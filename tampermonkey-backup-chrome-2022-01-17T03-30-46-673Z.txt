{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"HTML5视频播放工具","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["https://user.qzone.qq.com/*","https://www.meiju11.com/new/Play/*","https://www.hanjutvaa.com/player/*","https://www.olevod.com/index.php/vod/play/id/*","https://www.olevod.tv/index.php/vod/play/id/*","https://olevod.com/index.php/vod/play/id/*","https://olevod.tv/index.php/vod/play/id/*"],"orig_includes":["https://*.qq.com/*","https://www.weiyun.com/video_*","https://v.youku.com/v_show/id_*","https://vku.youku.com/live/*","https://video.tudou.com/v/*","https://www.iqiyi.com/*","https://live.bilibili.com/*","https://www.bilibili.com/*","https://www.ixigua.com/*","https://www.acfun.cn/*","http://v.pptv.com/show/*","https://v.pptv.com/show/*","https://www.miguvideo.com/*","https://tv.sohu.com/*","https://film.sohu.com/album/*","https://www.mgtv.com/*","https://pan.baidu.com/*","https://yun.baidu.com/*","https://*.163.com/*","https://*.icourse163.org/*","https://*.sina.com.cn/*","https://video.sina.cn/*","http://k.sina.*","https://k.sina.*","https://weibo.com/*","https://*.weibo.com/*","https://pan.baidu.com/*","https://yun.baidu.com/*","http://v.ifeng.com/*","https://v.ifeng.com/*","http://news.mtime.com/*","http://video.mtime.com/*","https://www.youtube.com/watch?v=*","https://www.ted.com/talks/*","https://www.yy.com/*","https://www.huya.com/*","https://v.douyu.com/*","https://www.douyu.com/*","http://star.longzhu.com/*","https://star.longzhu.com/*","https://www.zhanqi.tv/*","*/play*","*play/*","https://www.meiju11.com/ckplayerx/m3u8.php*","https://ww4.hanjutvaa.com/index.php*","https://olevod.com/static/player/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":["/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?www\\.bilibili\\.com(:[0-9]{1,5})?\\/.*$)/"],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"bili_danmu":"btrue"},"ts":1630066351373},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/30545-%E8%A7%86%E9%A2%91%E7%AB%99%E5%90%AF%E7%94%A8html5%E6%92%AD%E6%94%BE%E5%99%A8/code/%E8%A7%86%E9%A2%91%E7%AB%99%E5%90%AF%E7%94%A8html5%E6%92%AD%E6%94%BE%E5%99%A8.user.js","uuid":"c54a3580-c767-4247-ad53-924e0abb22e7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgSFRNTDXop4bpopHmkq3mlL7lt6XlhbcKLy8gQGRlc2NyaXB0aW9uIOS4ieWkp+WKn+iDvSDjgILlkK/nlKhIVE1MNeaSreaUvu+8m+S4h+iDvee9kemhteWFqOWxj++8m+a3u+WKoOW/q+aNt+mUru+8muW/q+i/m+OAgeW/q+mAgOOAgeaaguWBnC/mkq3mlL7jgIHpn7Pph4/jgIHkuIvkuIDpm4bjgIHliIfmjaIo572R6aG1KeWFqOWxj+OAgeS4iuS4i+W4p+OAgeaSreaUvumAn+W6puOAguaUr+aMgeinhumikeermeeCue+8muayueeuoeOAgVRFROOAgeS8mC7lnJ/jgIFRUeOAgULnq5njgIHopb/nk5zop4bpopHjgIHniLHlpYfoibrjgIFB56uZ44CBUFBUVuOAgeiKkuaenFRW44CB5ZKq5ZKV6KeG6aKR44CB5paw5rWq44CB5b6u5Y2a44CB572R5piTW+WoseS5kOOAgeS6keivvuWgguOAgeaWsOmXu13jgIHmkJzni5DjgIHpo47ooYzjgIHnmb7luqbkupHop4bpopHnrYnvvJvnm7Tmkq3vvJrmlpfpsbzjgIFZWeOAgeiZjueJmeOAgem+meePoOOAgeaImOaXl+OAguWPr+WinuWKoOiHquWumuS5ieermeeCuQovLyBAaG9tZXBhZ2UgICBodHRwczovL2Jicy5rYWZhbi5jbi90aHJlYWQtMjA5MzAxNC0xLTEuaHRtbAovLyBAaW5jbHVkZSAgICBodHRwczovLyoucXEuY29tLyoKLy8gQGV4Y2x1ZGUgICAgaHR0cHM6Ly91c2VyLnF6b25lLnFxLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3LndlaXl1bi5jb20vdmlkZW9fKgovLyBAaW5jbHVkZSAgICBodHRwczovL3YueW91a3UuY29tL3Zfc2hvdy9pZF8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vdmt1LnlvdWt1LmNvbS9saXZlLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly92aWRlby50dWRvdS5jb20vdi8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3LmlxaXlpLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vbGl2ZS5iaWxpYmlsaS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy5iaWxpYmlsaS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy5peGlndWEuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cuYWNmdW4uY24vKgovLyBAaW5jbHVkZSAgICBodHRwOi8vdi5wcHR2LmNvbS9zaG93LyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly92LnBwdHYuY29tL3Nob3cvKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy5taWd1dmlkZW8uY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly90di5zb2h1LmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vZmlsbS5zb2h1LmNvbS9hbGJ1bS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3Lm1ndHYuY29tLyoKLy8gQHZlcnNpb24gICAgMS44LjcKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly9wYW4uYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly95dW4uYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly8qLjE2My5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovLyouaWNvdXJzZTE2My5vcmcvKgovLyBAaW5jbHVkZSAgICBodHRwczovLyouc2luYS5jb20uY24vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3ZpZGVvLnNpbmEuY24vKgovLyBAaW5jbHVkZSAgICBodHRwOi8vay5zaW5hLioKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly9rLnNpbmEuKgovLyBAaW5jbHVkZSAgICBodHRwczovL3dlaWJvLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vKi53ZWliby5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3Bhbi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3l1bi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwOi8vdi5pZmVuZy5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3YuaWZlbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cDovL25ld3MubXRpbWUuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cDovL3ZpZGVvLm10aW1lLmNvbS8qCi8vIEBHTV9pbmZvCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9KgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy50ZWQuY29tL3RhbGtzLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cueXkuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cuaHV5YS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3YuZG91eXUuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cuZG91eXUuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cDovL3N0YXIubG9uZ3podS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3N0YXIubG9uZ3podS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy56aGFucWkudHYvKgovLyBAcnVuLWF0ICAgICBkb2N1bWVudC1zdGFydAovLyBAaW5jbHVkZSAgICAqL3BsYXkqCi8vIEBpbmNsdWRlICAgICpwbGF5LyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cubWVpanUxMS5jb20vY2twbGF5ZXJ4L20zdTgucGhwKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3NC5oYW5qdXR2YWEuY29tL2luZGV4LnBocCoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly9vbGV2b2QuY29tL3N0YXRpYy9wbGF5ZXIvKgovLyBAZ3JhbnQgICAgICBHTV9hZGRTdHlsZQovLyBAZXhjbHVkZSAgICBodHRwczovL3d3dy5tZWlqdTExLmNvbS9uZXcvUGxheS8qCi8vIEBleGNsdWRlICAgIGh0dHBzOi8vd3d3Lmhhbmp1dHZhYS5jb20vcGxheWVyLyoKLy8gQGV4Y2x1ZGUgICAgaHR0cHM6Ly93d3cub2xldm9kLmNvbS9pbmRleC5waHAvdm9kL3BsYXkvaWQvKgovLyBAZXhjbHVkZSAgICBodHRwczovL3d3dy5vbGV2b2QudHYvaW5kZXgucGhwL3ZvZC9wbGF5L2lkLyoKLy8gQGV4Y2x1ZGUgICAgaHR0cHM6Ly9vbGV2b2QuY29tL2luZGV4LnBocC92b2QvcGxheS9pZC8qCi8vIEBleGNsdWRlICAgIGh0dHBzOi8vb2xldm9kLnR2L2luZGV4LnBocC92b2QvcGxheS9pZC8qCi8vIEBncmFudCAgICAgIHdpbmRvdy5vbnVybGNoYW5nZQovLyBAZ3JhbnQgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICBHTV9nZXRWYWx1ZQovLyBAbmFtZXNwYWNlICBodHRwczovL2dyZWFzeWZvcmsub3JnL3VzZXJzLzcwMzYKLy8gPT0vVXNlclNjcmlwdD09CgondXNlIHN0cmljdCc7CmNvbnN0IHcgPSB1bnNhZmVXaW5kb3cgfHwgd2luZG93Owpjb25zdCB7IGhvc3QsIHBhdGhuYW1lOiBwYXRoIH0gPSBsb2NhdGlvbjsKY29uc3QgZCA9IGRvY3VtZW50LCBmaW5kID0gW10uZmluZDsKbGV0IHYsIF9mcCwgX2ZzLCBieTsgLy8gZG9jdW1lbnQuYm9keQpjb25zdCBvYnNlcnZlT3B0ID0ge2NoaWxkTGlzdCA6IHRydWUsIHN1YnRyZWUgOiB0cnVlfTsKY29uc3Qgbm9vcEZuID0gZnVuY3Rpb24oKXt9Owpjb25zdCBxID0gKGNzcywgcCA9IGQpID0+IHAucXVlcnlTZWxlY3Rvcihjc3MpOwpjb25zdCBkZWxFbGVtID0gZSA9PiBlLnJlbW92ZSgpOwpjb25zdCAkJCA9IGZ1bmN0aW9uKGMsIGNiID0gZGVsRWxlbSwgZG9jID0gZCkgewoJaWYgKCFjIHx8ICFjLmxlbmd0aCkgcmV0dXJuOwoJaWYgKHR5cGVvZiBjID09PSAnc3RyaW5nJykgYyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKGMpOwoJaWYgKCFjYikgcmV0dXJuIGM7Cglmb3IgKGxldCBlIG9mIGMpIGlmIChlICYmIGNiKGUpPT09ICExKSBicmVhazsKfTsKY29uc3QgcjEgPSAocmVncCwgcykgPT4gcmVncC50ZXN0KHMpICYmIFJlZ0V4cC4kMTsKY29uc3QgbG9nID0gY29uc29sZS5sb2cuYmluZCgKCWNvbnNvbGUsCgknJWPohJrmnKxbJXNdIOWPjemmiO+8miVzXG4lcycsCgknY29sb3I6I2MzYztmb250LXNpemU6MS4yZW0nLAoJR01faW5mby5zY3JpcHQubmFtZSwKCUdNX2luZm8uc2NyaXB0LmhvbWVwYWdlCik7CmNvbnN0IGdtRnVuY09mQ2hlY2tNZW51ID0gKHRpdGxlLCBzYXZlTmFtZSwgZGVmYXVsdFZhbCA9IHRydWUpID0+IHsKCWNvbnN0IHIgPSBHTV9nZXRWYWx1ZShzYXZlTmFtZSwgZGVmYXVsdFZhbCk7CglpZiAocikgdGl0bGUgPSAn4oiaICAnKyB0aXRsZTsKCUdNX3JlZ2lzdGVyTWVudUNvbW1hbmQodGl0bGUsICgpID0+IHsKCQlHTV9zZXRWYWx1ZShzYXZlTmFtZSwgIXIpOwoJCWxvY2F0aW9uLnJlbG9hZCgpOwoJfSk7CglyZXR1cm4gcjsKfTsKY29uc3Qgc2xlZXAgPSBtcyA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsgc2V0VGltZW91dChyZXNvbHZlLCBtcykgfSk7Ci8qCmNvbnN0IGNvb2tpZSA9IG5ldyBQcm94eShub29wRm4sIHsKCWFwcGx5KHRhcmdldCwgY3R4LCBhcmdzKSB7IC8v5riF55CGY29va2llCgkJY29uc3Qga2V5cyA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgvW14gPTtdKyg/PVw9KS9nKTsKCQlpZiAoa2V5cykgewoJCQljb25zdCB2YWwgPSAnPTsgZXhwaXJlcz0nICsgbmV3IERhdGUoMCkudG9VVENTdHJpbmcoKSArJzsgZG9tYWluPS47IHBhdGg9Lyc7CgkJCWZvciAoY29uc3QgayBvZiBrZXlzKSBkb2N1bWVudC5jb29raWUgPSBrICsgdmFsOwoJCX0KCQkvLyByZXR1cm4gUmVmbGVjdC5hcHBseSguLi5hcmd1bWVudHMpOwoJfSwKCWdldCh0YXJnZXQsIG5hbWUpIHsgLy8g6K+75Y+WY29va2llCgkJY29uc3QgciA9IHIxKG5ldyBSZWdFeHAobmFtZSArJz0oW147XSopJyksIGRvY3VtZW50LmNvb2tpZSk7CgkJaWYgKHIpIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocik7Cgl9LAoJc2V0KHRhcmdldCwgbmFtZSwgdmFsdWUsIHJlY2VpdmVyKSB7IC8vIOWGmeWFpWNvb2tpZQoJCWxldCBzLCB2LCBleHBpcmVzLAoJCW9uZVBhcmFtID0gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnOwoJCWlmIChvbmVQYXJhbSkgewoJCQlleHBpcmVzID0gNjsKCQkJdiA9IHZhbHVlOwoJCX0gZWxzZSB7CgkJCXYgPSB2YWx1ZS52YWw7CgkJCWV4cGlyZXMgPSB2YWx1ZS5leHBpcmVzIHx8IDY7CgkJCWRlbGV0ZSB2YWx1ZS5leHBpcmVzOwoJCX0KCQlzID0gbmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2KTsKCgkJaWYgKGV4cGlyZXMgJiYgKHR5cGVvZiBleHBpcmVzID09ICdudW1iZXInIHx8IGV4cGlyZXMudG9VVENTdHJpbmcpKSB7CgkJCWxldCBkYXRlOwoJCQlpZiAodHlwZW9mIGV4cGlyZXMgPT0gJ251bWJlcicpIHsKCQkJCWRhdGUgPSBuZXcgRGF0ZSgpOwoJCQkJZGF0ZS5zZXRUaW1lKGV4cGlyZXMgKiAyNCAqIDM2MDAwMDAgKyBkYXRlLmdldFRpbWUoKSk7CgkJCX0gZWxzZSB7CgkJCQlkYXRlID0gZXhwaXJlczsKCQkJfQoJCQlzICs9ICc7IGV4cGlyZXM9JyArIGRhdGUudG9VVENTdHJpbmcoKTsKCQl9CgkJaWYgKCFvbmVQYXJhbSkgZm9yIChjb25zdCBrIGluIHZhbHVlKSBzICs9ICc7ICcgKyBrICsgJz0nICsgdmFsdWVba107CgkJZG9jdW1lbnQuY29va2llID0gczsKCQlyZXR1cm4gdHJ1ZTsKCX0sCglkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIG5hbWUsIGRlc2NyaXB0b3IpIHsvLyDliKDpmaRjb29raWUKCQlkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz07IHBhdGg9LzsgZXhwaXJlcz0nKyBuZXcgRGF0ZSgwKS50b1VUQ1N0cmluZygpOwoJCXJldHVybiB0cnVlOwoJfQp9KTsKY29uc3Qgb25jZUV2ZW50ID0gKGN0eCwgZU5hbWUpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY3R4LmFkZEV2ZW50TGlzdGVuZXIoZU5hbWUsIHJlc29sdmUpKTsKY29uc3QgcHJvbWlzaWZ5ID0gKGZuKSA9PiAoLi4uYXJncykgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgYXJncy5wdXNoKHJlc29sdmUpOwoJZm4uYXBwbHkodGhpcywgYXJncyk7Cn0pOyAqLwpjb25zdCBob29rQXR0YWNoU2hhZG93ID0gKGNiKSA9PiB7Cgl0cnkgewoJCWNvbnN0IF9hdHRhY2hTaGFkb3cgPSBFbGVtZW50LnByb3RvdHlwZS5hdHRhY2hTaGFkb3c7CgkJRWxlbWVudC5wcm90b3R5cGUuYXR0YWNoU2hhZG93ID0gZnVuY3Rpb24ob3B0KSB7CgkJCW9wdC5tb2RlID0gJ29wZW4nOwoJCQljb25zdCBzaGFkb3dSb290ID0gX2F0dGFjaFNoYWRvdy5jYWxsKHRoaXMsIG9wdCk7CgkJCWNiKHNoYWRvd1Jvb3QpOwoJCQlyZXR1cm4gc2hhZG93Um9vdDsKCQl9OwoJfSBjYXRjaCAoZSkgewoJCWNvbnNvbGUuZXJyb3IoJ0hhY2sgYXR0YWNoU2hhZG93IGVycm9yJywgZSk7Cgl9Cn07CmNvbnN0IGdldFN0eWxlID0gKG8sIHMpID0+IHsKCWlmIChvLnN0eWxlW3NdKSByZXR1cm4gby5zdHlsZVtzXTsKCWlmIChnZXRDb21wdXRlZFN0eWxlKSB7CgkJY29uc3QgeCA9IGdldENvbXB1dGVkU3R5bGUobywgJycpOwoJCXMgPSBzLnJlcGxhY2UoLyhbQS1aXSkvZywnLSQxJykudG9Mb3dlckNhc2UoKTsKCQlyZXR1cm4geCAmJiB4LmdldFByb3BlcnR5VmFsdWUocyk7Cgl9Cn07CmNvbnN0IGRvQ2xpY2sgPSBlID0+IHsKCWlmICh0eXBlb2YgZSA9PT0gJ3N0cmluZycpIGUgPSBxKGUpOwoJaWYgKGUpIHsgZS5jbGljayA/IGUuY2xpY2soKSA6IGUuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnY2xpY2snKSkgfTsKfTsKY29uc3QgY2xpY2tEdWFsQnV0dG9uID0gYnRuID0+IHsgLy8gMuWQiDEg5oyJ6ZKuCgkhYnRuLm5leHRTaWJsaW5nIHx8IGdldFN0eWxlKGJ0biwgJ2Rpc3BsYXknKSAhPT0gJ25vbmUnID8gZG9DbGljayhidG4pIDogZG9DbGljayhidG4ubmV4dFNpYmxpbmcpOwp9Owpjb25zdCBpbnRlcnZhbFF1ZXJ5ID0gKGNiLCBjb25kaXRpb24sIHN0b3AgPSB0cnVlKSA9PiB7Cgljb25zdCBmbiA9IHR5cGVvZiBjb25kaXRpb24gPT09ICdzdHJpbmcnID8gcS5iaW5kKG51bGwsIGNvbmRpdGlvbikgOiBjb25kaXRpb247Cgljb25zdCB0ID0gc2V0SW50ZXJ2YWwoKCkgPT4gewoJCWNvbnN0IHIgPSBmbigpOwoJCWlmIChyKSB7CgkJCXN0b3AgJiYgY2xlYXJJbnRlcnZhbCh0KTsKCQkJY2Iocik7CgkJfQoJfSwgMzAwKTsKCXJldHVybiB0Owp9Owpjb25zdCBnb05leHRNViA9ICgpID0+IHsKCWNvbnN0IHMgPSBsb2NhdGlvbi5wYXRobmFtZTsKCWNvbnN0IG0gPSBzLm1hdGNoKC8oXGQrKShcRCopJC8pOwoJY29uc3QgZCA9ICttWzFdICsgMTsKCWxvY2F0aW9uLmFzc2lnbihzLnNsaWNlKDAsIG0uaW5kZXgpICsgZCArIG1bMl0pOwp9Owpjb25zdCBmaXJlZm94VmVyID0gcjEoL0ZpcmVmb3hcLyhcZCspLywgbmF2aWdhdG9yLnVzZXJBZ2VudCk7CmNvbnN0IGlzRWRnZSA9IC8gRWRnZT9cLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKY29uc3QgZmFrZVVBID0gdWEgPT4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3VzZXJBZ2VudCcsIHsKCXZhbHVlOiB1YSwKCXdyaXRhYmxlOiBmYWxzZSwKCWNvbmZpZ3VyYWJsZTogZmFsc2UsCgllbnVtZXJhYmxlOiB0cnVlCn0pOwpjb25zdCBnZXRNYWluRG9tYWluID0gaG9zdCA9PiB7Cgljb25zdCBhID0gaG9zdC5zcGxpdCgnLicpOwoJbGV0IGkgPSBhLmxlbmd0aCAtIDI7CglpZiAoL14oY29tP3xjY3x0dnxuZXR8b3JnfGdvdnxlZHUpJC8udGVzdChhW2ldKSkgaS0tOwoJcmV0dXJuIGFbaV07Cn07CmNvbnN0IHVhX2Nocm9tZSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS82Ni4wLjM2MjYuMTIxIFNhZmFyaS81MzcuMzYnOwoKY2xhc3MgRnVsbFNjcmVlbiB7Cgljb25zdHJ1Y3RvcihlKSB7CgkJbGV0IGZuID0gZC5leGl0RnVsbHNjcmVlbiB8fCBkLndlYmtpdEV4aXRGdWxsc2NyZWVuIHx8IGQubW96Q2FuY2VsRnVsbFNjcmVlbiB8fCBkLm1zRXhpdEZ1bGxzY3JlZW4gfHwgbm9vcEZuOwoJCXRoaXMuZXhpdCA9IGZuLmJpbmQoZCk7CgkJZm4gPSBlLnJlcXVlc3RGdWxsc2NyZWVuIHx8IGUud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4gfHwgZS5tb3pSZXF1ZXN0RnVsbFNjcmVlbiB8fCBlLm1zUmVxdWVzdEZ1bGxTY3JlZW4gfHwgbm9vcEZuOwoJCXRoaXMuZW50ZXIgPSBmbi5iaW5kKGUpOwoJfQoJc3RhdGljIGlzRnVsbCgpIHsKCQlyZXR1cm4gISEoZC5mdWxsc2NyZWVuIHx8IGQud2Via2l0SXNGdWxsU2NyZWVuIHx8IGQubW96RnVsbFNjcmVlbiB8fAoJCWQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCB8fCBkLm1vekZ1bGxTY3JlZW5FbGVtZW50KTsKCX0KCXRvZ2dsZSgpIHsKCQlGdWxsU2NyZWVuLmlzRnVsbCgpID8gdGhpcy5leGl0KCkgOiB0aGlzLmVudGVyKCk7Cgl9Cn0KCi8v5LiH6IO9572R6aG15YWo5bGPLCDlj4LogIPkuobvvJpodHRwczovL2dpdGh1Yi5jb20vZ29veWllL3lraDVwCmNsYXNzIEZ1bGxQYWdlIHsKCWNvbnN0cnVjdG9yKGNvbnRhaW5lciwgb25Td2l0Y2gpIHsKCQl0aGlzLl9pc0Z1bGwgPSAhMTsKCQl0aGlzLl9vblN3aXRjaCA9IG9uU3dpdGNoOwoJCXRoaXMuY29udGFpbmVyID0gY29udGFpbmVyIHx8IEZ1bGxQYWdlLmdldFBsYXllckNvbnRhaW5lcih2KTsKCQlHTV9hZGRTdHlsZSgKCQkJYC5nbS1mcC1ib2R5IC5nbS1mcC16VG9wIHsKCQkJCXBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OwoJCQkJei1pbmRleDogMjE0NzQ4MzY0NyAhaW1wb3J0YW50OwoJCQl9CgkJCS5nbS1mcC13cmFwcGVyLCAuZ20tZnAtYm9keXsgb3ZlcmZsb3c6aGlkZGVuICFpbXBvcnRhbnQ7IH0KCQkJLmdtLWZwLXdyYXBwZXIgLmdtLWZwLWlubmVyQm94IHsKCQkJCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CgkJCQloZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsKCQkJfQoJCQkuZ20tZnAtd3JhcHBlciB7CgkJCQlkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwoJCQkJcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7CgkJCQl3aWR0aDogMTAwJSAhaW1wb3J0YW50OwoJCQkJaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7CgkJCQl0b3A6IDAgIWltcG9ydGFudDsKCQkJCWxlZnQ6IDAgIWltcG9ydGFudDsKCQkJCWJhY2tncm91bmQ6ICMwMDAgIWltcG9ydGFudDsKCQkJCXotaW5kZXg6IDIxNDc0ODM2NDcgIWltcG9ydGFudDsKCQkJfWAKCQkpOwoJfQoJc3RhdGljIGdldFBsYXllckNvbnRhaW5lcih2aWRlbykgewoJCWxldCBlID0gdmlkZW8sIHAgPSBlLnBhcmVudE5vZGU7CgkJY29uc3QgeyBjbGllbnRXaWR0aDogd2lkLCBjbGllbnRIZWlnaHQ6IGggfSA9IGU7CgkJZG8gewoJCQllID0gcDsKCQkJcCA9IGUucGFyZW50Tm9kZTsKCQl9IHdoaWxlIChlLm5vZGVOYW1lID09ICdESVYnICYmIHAuY2xpZW50V2lkdGgtd2lkIDwgNSAmJiBwLmNsaWVudEhlaWdodC1oIDwgNSk7CgkJLy9lIOS4uui/lOWbnuWAvO+8jOWcqOatpOS5i+WQjuS4jeiDveWPmOS6hgoJCXdoaWxlIChwICE9PSBieSkgcCA9IHAucGFyZW50Tm9kZSB8fCBwLmhvc3Q7CgkJcmV0dXJuIGU7Cgl9CglzdGF0aWMgaXNGdWxsKGUpIHsKCQlyZXR1cm4gdy5pbm5lcldpZHRoIC0gZS5jbGllbnRXaWR0aCA8IDUgJiYgdy5pbm5lckhlaWdodCAtIGUuY2xpZW50SGVpZ2h0IDwgNTsKCX0KCXRvZ2dsZSgpIHsKCQkvLyBhc3NlcnQodGhpcy5jb250YWluZXIpOwoJCWlmICghdGhpcy5jb250YWluZXIuY29udGFpbnModikpIHRoaXMuY29udGFpbmVyID0gRnVsbFBhZ2UuZ2V0UGxheWVyQ29udGFpbmVyKHYpOwoJCWNvbnN0IGNiID0gdGhpcy5fb25Td2l0Y2g7CgkJaWYgKCF0aGlzLl9pc0Z1bGwgJiYgY2IpIGNiKHRydWUpOwoJCWJ5LmNsYXNzTGlzdC50b2dnbGUoJ2dtLWZwLWJvZHknKTsKCQlsZXQgZSA9IHY7CgkJd2hpbGUgKGUgIT0gdGhpcy5jb250YWluZXIpIHsKCQkJZS5jbGFzc0xpc3QudG9nZ2xlKCdnbS1mcC1pbm5lckJveCcpOwoJCQllID0gZS5wYXJlbnROb2RlOwoJCX0KCQllLmNsYXNzTGlzdC50b2dnbGUoJ2dtLWZwLXdyYXBwZXInKTsKCQllID0gZS5wYXJlbnROb2RlOwoJCXdoaWxlIChlICE9IGJ5KSB7CgkJCWUuY2xhc3NMaXN0LnRvZ2dsZSgnZ20tZnAtelRvcCcpOwoJCQllID0gZS5wYXJlbnROb2RlOwoJCX0KCQl0aGlzLl9pc0Z1bGwgPSAhdGhpcy5faXNGdWxsOwoJCWlmICghdGhpcy5faXNGdWxsICYmIGNiKSBzZXRUaW1lb3V0KGNiLCAxOTksICExKTsKCX0KfQoKY29uc3QgdSA9IGdldE1haW5Eb21haW4oaG9zdCk7CmNvbnN0IGV2ZW50cyA9IHsKCW9uKG5hbWUsIGZuKSB7CgkJdGhpc1tuYW1lXSA9IGZuOwoJfSwKCXVuZG8obmFtZSkgewoJCWRlbGV0ZSB0aGlzW25hbWVdOwoJfSwKCWhhbmRsZShuYW1lLCAuLi5hKSB7CgkJcmV0dXJuIHRoaXNbbmFtZV0gJiYgdGhpc1tuYW1lXS5hcHBseSh0aGlzLCBhKTsKCX0KfTsKY29uc3QgYXBwID0gewoJaXNMaXZlOiAhMSwKCWRpc2FibGVEQkxDbGljazogITEsCgltdWx0aXBsZVY6ICExLCAvL+WkmuinhumikemhtemdogoJaXNOdW1VUkw6ICExLCAvL+e9keWdgOaVsOWtl+WIhumbhgoJZGlzYWJsZUtleXM6IFtdLAoJc2hlbGxFdmVudCgpIHsKCQljb25zdCBmbiA9IGV2ID0+IHsKCQkJaWYgKGV2LnRhcmdldC5jbG9zZXN0KCdidXR0b24nKSkgcmV0dXJuOwoJCQlldi5zdG9wUHJvcGFnYXRpb24oKTsgLy8gcHJldmVudERlZmF1bHQKCQkJZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CgkJCXRoaXMudG9nZ2xlRlAoKTsKCQl9OwoJCXRoaXMubXZTaGVsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBldiA9PiB7CgkJCXRoaXMuY2hlY2tNVigpOwoJCQlpZiAoIXRoaXMuaXNMaXZlICYmIDE9PWV2LmJ1dHRvbikgewoJCQkJZXYuc3RvcFByb3BhZ2F0aW9uKCk7CgkJCQl2LmN1cnJlbnRUaW1lICs9IDU7CgkJCX0KCQl9KTsKCQkhdGhpcy5kaXNhYmxlREJMQ2xpY2sgJiYgdGhpcy5tdlNoZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZm4pOwoJfSwKCXNldFNoZWxsKCkgewoJCWNvbnN0IGUgPSB0aGlzLmdldERQbGF5ZXIoKSB8fCB0aGlzLmdldFZqc1BsYXllcigpIHx8CgkJCSh0aGlzLnNoZWxsQ1NTICYmIHEodGhpcy5zaGVsbENTUykpIHx8CgkJCSh0b3AgIT0gc2VsZiA/IGJ5IDogRnVsbFBhZ2UuZ2V0UGxheWVyQ29udGFpbmVyKHYpKTsKCQlpZiAoZSAmJiB0aGlzLm12U2hlbGwgIT0gZSkgewoJCQl0aGlzLm12U2hlbGwgPSBlOwoJCQl0aGlzLnNoZWxsRXZlbnQoKTsKCQl9Cgl9LAoJY2hlY2tNVigpIHsKCQlpZiAodGhpcy52TGlzdCkgewoJCQljb25zdCBlID0gdGhpcy5maW5kTVYoKTsKCQkJLy8gbG9nKCdhcHAuZmluZE1WKCknLHYsZSkKCQkJaWYgKGUgIT0gdikgewoJCQkJdiA9IGU7CgkJCQl0aGlzLmJ0blBsYXkgPSB0aGlzLmJ0bk5leHQgPSB0aGlzLmJ0bkZQID0gdGhpcy5idG5GUyA9IF9mcyA9IF9mcCA9IG51bGw7CgkJCQlpZiAoIXRoaXMuaXNMaXZlKSB7CgkJCQkJdi5wbGF5YmFja1JhdGUgPSBsb2NhbFN0b3JhZ2UubXZQbGF5UmF0ZSB8fCAxOwoJCQkJCXYuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsIGV2ID0+IHsKCQkJCQkJbG9jYWxTdG9yYWdlLm12UGxheVJhdGUgPSB2LnBsYXliYWNrUmF0ZTsKCQkJCQl9KTsKCQkJCX0KCQkJCXRoaXMuc2V0U2hlbGwoKTsKCQkJfQoJCX0KCQl0aGlzLmNoZWNrVUkoKTsKCQlyZXR1cm4gdjsKCX0sCglnZXREUGxheWVyKCkgewoJCWNvbnN0IGUgPSB2LmNsb3Nlc3QoJy5kcGxheWVyJyk7CgkJaWYgKGUpIHsKCQkJdGhpcy5idG5GUCA9IHEoJy5kcGxheWVyLWZ1bGwtaW4taWNvbiA+IHNwYW4nLCBlKTsKCQkJdGhpcy5idG5GUyA9IHEoJy5kcGxheWVyLWZ1bGwtaWNvbicsIGUpOwoJCQllLmNsb3Nlc3QoJ2JvZHkgPiAqJykuY2xhc3NMaXN0LmFkZCgnZ20tZHAtelRvcCcpOwoJCX0KCQlyZXR1cm4gZTsKCX0sCglnZXRWanNQbGF5ZXIoKSB7CgkJY29uc3QgZSA9IHYuY2xvc2VzdCgnLnZpZGVvLWpzJyk7CgkJaWYgKGUpIHsKCQkJdGhpcy5idG5GUyA9IHEoJy52anMtY29udHJvbC1iYXIgPiBidXR0b24udmpzLWJ1dHRvbjpudGgtbGFzdC1vZi10eXBlKDEpJyk7CgkJCXRoaXMud2ViZnVsbENTUyA9ICcudmpzLWNvbnRyb2wtYmFyID4gYnV0dG9uLnZqcy1idXR0b25bdGl0bGUkPSLlhajlsY8iXTpudGgtbGFzdC1vZi10eXBlKDIpJzsKCQl9CgkJcmV0dXJuIGU7Cgl9LAoJdG9nZ2xlRlAoKSB7CgkJc2VsZiAhPSB0b3AgPyB0b3AucG9zdE1lc3NhZ2Uoe2lkOiAnZ20taDUtdG9nZ2xlLWlmcmFtZVdlYkZ1bGwnfSwgJyonKQoJCTogX2ZwID8gX2ZwLnRvZ2dsZSgpIDogY2xpY2tEdWFsQnV0dG9uKHRoaXMuYnRuRlApOwoJfSwKCWhvdEtleShlKSB7CgkJY29uc3QgdCA9IGUudGFyZ2V0OwoJCWlmIChlLmN0cmxLZXkgfHwgZS5hbHRLZXkgfHwgdC5jb250ZW50RWRpdGFibGU9PSd0cnVlJyB8fAoJCQkvSU5QVVR8VEVYVEFSRUF8U0VMRUNULy50ZXN0KHQubm9kZU5hbWUpKSByZXR1cm47CgkJaWYgKGUuc2hpZnRLZXkgJiYgIVsxMywzNywzOV0uaW5jbHVkZXMoZS5rZXlDb2RlKSkgcmV0dXJuOwoJCWlmICh0aGlzLmRpc2FibGVLZXlzLmluY2x1ZGVzKGUua2V5Q29kZSkpIHJldHVybjsKCQlpZiAodGhpcy5pc0xpdmUgJiYgWzM3LDM5LDc4LDg4LDY3LDkwXS5pbmNsdWRlcyhlLmtleUNvZGUpKSByZXR1cm47CgkJaWYgKCF0aGlzLmNoZWNrTVYoKSkgcmV0dXJuOwoJCWlmIChldmVudHMuaGFuZGxlKCdrZXlkb3duJywgZSkpIHJldHVybjsKCQlpZiAoIWUuc2hpZnRLZXkgJiYgdGhpcy5tdlNoZWxsICYmIHRoaXMubXZTaGVsbC5jb250YWlucyh0KSAmJiBbMzIsMzcsMzldLmluY2x1ZGVzKGUua2V5Q29kZSkpIHJldHVybjsKCQllLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOwoJCWxldCBuOwoJCXN3aXRjaCAoZS5rZXlDb2RlKSB7CgkJY2FzZSAzMjogLy9zcGFjZQoJCQlpZiAodGhpcy5idG5QbGF5KSBjbGlja0R1YWxCdXR0b24odGhpcy5idG5QbGF5KTsKCQkJZWxzZSB2LnBhdXNlZCA/IHYucGxheSgpIDogdi5wYXVzZSgpOwoJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCWJyZWFrOwoJCWNhc2UgMzc6IG4gPSBlLnNoaWZ0S2V5ID8gLTIwIDogLTU7IC8vbGVmdCAg5b+r6YCANeenkixzaGlmdOWKoOmAnwoJCS8vcmlnaHQgIOW/q+i/mzXnp5Isc2hpZnTliqDpgJ8KCQljYXNlIDM5OiBuID0gbiB8fCAoZS5zaGlmdEtleSA/IDIwIDogNSk7CgkJCXYuY3VycmVudFRpbWUgKz0gbjsKCQkJYnJlYWs7CgkJY2FzZSA3ODogLy8gTiDkuIvkuIDpm4YKCQkJaWYgKHNlbGYgIT0gdG9wKSB0b3AucG9zdE1lc3NhZ2Uoe2lkOiAnZ20taDUtcGxheS1uZXh0J30sICcqJyk7CgkJCWVsc2UgaWYgKHRoaXMuYnRuTmV4dCkgZG9DbGljayh0aGlzLmJ0bk5leHQpOwoJCQllbHNlIGlmICh0aGlzLmlzTnVtVVJMKSBnb05leHRNVigpOwoJCQlicmVhazsKCQljYXNlIDM4OiBuID0gMC4xOyAvL+WKoOmfs+mHjwoJCWNhc2UgNDA6IG4gPSBuIHx8IC0wLjE7IC8v6ZmN6Z+z6YePCgkJCW4gKz0gdi52b2x1bWU7CgkJCWlmICgwIDw9IG4gJiYgbiA8PSAxKSB2LnZvbHVtZSA9ICtuLnRvRml4ZWQoMSk7CgkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJYnJlYWs7CgkJY2FzZSAxMzogLy/lm57ovabplK7jgIIg5YWo5bGPCgkJCWlmIChlLnNoaWZ0S2V5KSB7CgkJCQl0aGlzLnRvZ2dsZUZQKCk7CgkJCX0gZWxzZSB7CgkJCQlfZnMgPyBfZnMudG9nZ2xlKCkgOiBjbGlja0R1YWxCdXR0b24odGhpcy5idG5GUyk7CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSAyNzogLy9lc2MKCQkJaWYgKEZ1bGxTY3JlZW4uaXNGdWxsKCkpIHsKCQkJCV9mcyA/IF9mcy5leGl0KCkgOiBjbGlja0R1YWxCdXR0b24odGhpcy5idG5GUyk7CgkJCX0gZWxzZSBpZiAoc2VsZiAhPSB0b3ApIHsKCQkJCXRvcC5wb3N0TWVzc2FnZSh7aWQ6ICdnbS1oNS1pcy1pZnJhbWVXZWJGdWxsJ30sICcqJyk7CgkJCX0gZWxzZSBpZiAoRnVsbFBhZ2UuaXNGdWxsKHYpKSB7CgkJCQlfZnAgPyBfZnAudG9nZ2xlKCkgOiBjbGlja0R1YWxCdXR0b24odGhpcy5idG5GUCk7CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSA2NzogbiA9IDAuMTsgLy/mjInplK5D77ya5Yqg6YCf5pKt5pS+ICswLjEKCQljYXNlIDg4OiBuID0gbiB8fCAtMC4xOyAvL+aMiemUrljvvJrlh4/pgJ/mkq3mlL4gLTAuMQoJCQluICs9IHYucGxheWJhY2tSYXRlOwoJCQlpZiAoMCA8IG4gJiYgbiA8PSAxNikgdi5wbGF5YmFja1JhdGUgPSArbi50b0ZpeGVkKDIpOwoJCQlicmVhazsKCQljYXNlIDkwOiAvL+aMiemUrlrvvJrmraPluLjpgJ/luqbmkq3mlL4KCQkJdi5wbGF5YmFja1JhdGUgPSAxOwoJCQlicmVhazsKCQljYXNlIDcwOiBuID0gMC4wMzsgLy/mjInplK5G77ya5LiL5LiA5binCgkJY2FzZSA2ODogbiA9IG4gfHwgLTAuMDM7IC8v5oyJ6ZSuRO+8muS4iuS4gOW4pwoJCQl2LmN1cnJlbnRUaW1lICs9IG47CgkJCXYucGF1c2UoKTsKCQkJYnJlYWs7CgkJZGVmYXVsdDogcmV0dXJuOwoJCX0KCQllLnN0b3BQcm9wYWdhdGlvbigpOwoJfSwKCWNoZWNrVUkoKSB7CgkJaWYgKHRoaXMud2ViZnVsbENTUyAmJiAhdGhpcy5idG5GUCkgdGhpcy5idG5GUCA9IHEodGhpcy53ZWJmdWxsQ1NTKTsKCQlpZiAodGhpcy5idG5GUCkgX2ZwID0gbnVsbDsKCQllbHNlIGlmICghX2ZwICYmIHNlbGYgPT0gdG9wKSBfZnAgPSBuZXcgRnVsbFBhZ2UodGhpcy5tdlNoZWxsLCB0aGlzLnN3aXRjaEZQKTsKCgkJaWYgKHRoaXMuZnVsbENTUyAmJiAhdGhpcy5idG5GUykgdGhpcy5idG5GUyA9IHEodGhpcy5mdWxsQ1NTKTsKCQlpZiAodGhpcy5idG5GUykgX2ZzID0gbnVsbDsKCQllbHNlIGlmICghX2ZzKSBfZnMgPSBuZXcgRnVsbFNjcmVlbih2KTsKCgkJaWYgKHRoaXMubmV4dENTUyAmJiAhdGhpcy5idG5OZXh0KSB0aGlzLmJ0bk5leHQgPSBxKHRoaXMubmV4dENTUyk7CgkJaWYgKHRoaXMucGxheUNTUyAmJiAhdGhpcy5idG5QbGF5KSB0aGlzLmJ0blBsYXkgPSBxKHRoaXMucGxheUNTUyk7Cgl9LAoJc3dpdGNoRlAodG9GdWxsKSB7CgkJaWYgKHRvRnVsbCkgewoJCQlmb3IgKGxldCBlIG9mIHRoaXMudlNldCkgdGhpcy52aWV3T2JzZXJ2ZXIudW5vYnNlcnZlKGUpOwoJCX0gZWxzZSB7CgkJCWZvciAobGV0IGUgb2YgdGhpcy52TGlzdCkgdGhpcy52aWV3T2JzZXJ2ZXIub2JzZXJ2ZShlKTsKCQl9Cgl9LAoJb25Hcm93Vkxpc3QoKSB7CgkJaWYgKHRoaXMudkxpc3QubGVuZ3RoID09IHRoaXMudkNvdW50KSByZXR1cm47CgkJaWYgKHRoaXMudmlld09ic2VydmVyKSB7CgkJCWZvciAobGV0IGUgb2YgdGhpcy52TGlzdCkgewoJCQkJaWYgKCF0aGlzLnZTZXQuaGFzKGUpKSB0aGlzLnZpZXdPYnNlcnZlci5vYnNlcnZlKGUpOwoJCQl9CgkJfSBlbHNlIHsKCQkJY29uc3QgY29uZmlnID0gewoJCQkJcm9vdE1hcmdpbjogJzBweCcsCgkJCQl0aHJlc2hvbGQ6IDAuOQoJCQl9OwoJCQl0aGlzLnZpZXdPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcih0aGlzLm9uSW50ZXJzZWN0aW9uLmJpbmQodGhpcyksIGNvbmZpZyk7CgkJCWZvciAobGV0IGUgb2YgdGhpcy52TGlzdCkgdGhpcy52aWV3T2JzZXJ2ZXIub2JzZXJ2ZShlKTsKCQl9CgkJdGhpcy52U2V0ID0gbmV3IFNldCh0aGlzLnZMaXN0KTsKCQl0aGlzLnZDb3VudCA9IHRoaXMudkxpc3QubGVuZ3RoOwoJfSwKCW9uSW50ZXJzZWN0aW9uKGVudHJpZXMpIHsKCQlpZiAodGhpcy52TGlzdC5sZW5ndGggPCAyKSByZXR1cm47CgkJY29uc3QgZW50cnkgPSBmaW5kLmNhbGwoZW50cmllcywgayA9PiBrLmlzSW50ZXJzZWN0aW5nKTsKCQlpZiAoIWVudHJ5IHx8IHYgPT0gZW50cnkudGFyZ2V0KSByZXR1cm47CgkJdiA9IGVudHJ5LnRhcmdldDsKCQlfZnMgPSBuZXcgRnVsbFNjcmVlbih2KTsKCQlfZnAgPSBuZXcgRnVsbFBhZ2UobnVsbCwgdGhpcy5zd2l0Y2hGUCk7CgkJZXZlbnRzLmhhbmRsZSgnc3dpdGNoTVYnKTsKCX0sCgliaW5kRXZlbnQoKSB7CgkJJCQodGhpcy5hZHNDU1MpOwoJCWJ5ID0gZC5ib2R5OwoJCWxvZygnYmluZCBldmVudFxuJywgdik7CgkJZXZlbnRzLmhhbmRsZSgnZm91bmRNVicpOwoJCWlmICh0b3AgIT0gc2VsZikgewoJCQl0b3AucG9zdE1lc3NhZ2Uoe2lkOiAnZ20taDUtaW5pdC1NVmZyYW1lJ30sICcqJyk7CgkJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgZXYgPT4gewoJCQkJaWYgKCFldi5zb3VyY2UgfHwgIWV2LmRhdGE/LmlkKSByZXR1cm47CgkJCQlzd2l0Y2ggKGV2LmRhdGEuaWQpIHsKCQkJCWNhc2UgJ2dtLWg1LXRvZ2dsZS1mdWxsU2NyZWVuJzoKCQkJCQlfZnMgPyBfZnMudG9nZ2xlKCkgOiBjbGlja0R1YWxCdXR0b24odGhpcy5idG5GUyk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0sIGZhbHNlKTsKCQl9CgkJaWYgKCF0aGlzLmlzTGl2ZSkgewoJCQl2LnBsYXliYWNrUmF0ZSA9IGxvY2FsU3RvcmFnZS5tdlBsYXlSYXRlIHx8IDE7CgkJCXYuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsIGV2ID0+IHsKCQkJCWxvY2FsU3RvcmFnZS5tdlBsYXlSYXRlID0gdi5wbGF5YmFja1JhdGU7CgkJCX0pOwoJCX0KCQljb25zdCBmbiA9IGV2ID0+IHsKCQkJZXZlbnRzLmhhbmRsZSgnY2FucGxheScpOwoJCQl2LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgZm4pOwoJCX07CgkJdi5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIGZuKTsKCQlieS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5ob3RLZXkuYmluZCh0aGlzKSk7CgoJCXRoaXMubXZTaGVsbCA/IHRoaXMuc2hlbGxFdmVudCgpIDogdGhpcy5zZXRTaGVsbCgpOwoJCXRoaXMuY2hlY2tVSSgpOwoJCWlmICh0aGlzLm11bHRpcGxlVikgewoJCQluZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLm9uR3Jvd1ZMaXN0LmJpbmQodGhpcykpLm9ic2VydmUoYnksIG9ic2VydmVPcHQpOwoJCQl0aGlzLnZDb3VudCA9IDA7CgkJCXRoaXMub25Hcm93Vkxpc3QoKTsKCQl9Cgl9LAoJaW5pdCgpIHsKCQl0aGlzLnN3aXRjaEZQID0gdGhpcy5tdWx0aXBsZVYgPyB0aGlzLnN3aXRjaEZQLmJpbmQodGhpcykgOiBudWxsOwoJCXRoaXMudkxpc3QgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpOwoJCWNvbnN0IGZuID0gZSA9PiB0aGlzLmNzc01WID8gZS5tYXRjaGVzKHRoaXMuY3NzTVYpIDogZS5vZmZzZXRXaWR0aCA+IDk7CgkJdGhpcy5maW5kTVYgPSBmaW5kLmJpbmQodGhpcy52TGlzdCwgZm4pOwoJCWNvbnN0IHRpbWVyID0gaW50ZXJ2YWxRdWVyeShlID0+IHsKCQkJdiA9IGU7CgkJCXRoaXMuYmluZEV2ZW50KCk7CgkJfSwgdGhpcy5maW5kTVYpOwoKCQlob29rQXR0YWNoU2hhZG93KGFzeW5jIHNoYWRvd1Jvb3QgPT4gewoJCQlhd2FpdCBzbGVlcCg2MDApOwoJCQlldmVudHMuaGFuZGxlKCdhZGRTaGFkb3dSb290Jywgc2hhZG93Um9vdCk7CgkJCWlmICh2KSByZXR1cm47CgkJCWlmICh2ID0gcSgndmlkZW8nLCBzaGFkb3dSb290KSkgewoJCQkJbG9nKCdGb3VuZCBNViBpbiBTaGFkb3dSb290XG4nLCB2LCBzaGFkb3dSb290KTsKCQkJCWlmICghdGhpcy5zaGVsbENTUykgdGhpcy5tdlNoZWxsID0gc2hhZG93Um9vdC5ob3N0OwoJCQkJY2xlYXJJbnRlcnZhbCh0aW1lcik7CgkJCQl0aGlzLmJpbmRFdmVudCgpOwoKCQkJCXRoaXMudkxpc3QgPSBudWxsOwoJCQkJdGhpcy5maW5kTVYgPSBub29wRm47CgkJCX0KCQl9KTsKCX0KfTsKCmxldCByb3V0ZXIgPSB7Cgl0ZWQoKSB7CgkJYXBwLmZ1bGxDU1MgPSAnYnV0dG9uW3RpdGxlPSJFbnRlciBGdWxsc2NyZWVuIl0nOwoJCWFwcC5wbGF5Q1NTID0gJ2J1dHRvblt0aXRsZT0icGxheSB2aWRlbyJdJzsKCQlpZiAoIWdtRnVuY09mQ2hlY2tNZW51KCdURUTlvLrliLbpq5jmuIUnLCAndGVkX2ZvcmNlSEQnKSkgcmV0dXJuOwoJCWNvbnN0IGdldEhEU291cmNlID0gYXN5bmMgKCkgPT4gewoJCQljb25zdCBwbiA9IHIxKC9eKFwvdGFsa3NcL1x3KykvLCBwYXRoKTsKCQkJY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKHBuICsgJy9tZXRhZGF0YS5qc29uJyk7CgkJCWNvbnN0IGRhdGEgPSBhd2FpdCByZXNwLmpzb24oKTsKCQkJcmV0dXJuIGRhdGEudGFsa3NbMF0uZG93bmxvYWRzLm5hdGl2ZURvd25sb2Fkcy5oaWdoOwoJCX07CgkJY29uc3QgY2hlY2sgPSBhc3luYyAocnMpID0+IHsKCQkJaWYgKCF2LnNyYyB8fCB2LnNyYy5zdGFydHNXaXRoKCdodHRwJykpIHJldHVybjsKCQkJJCQoYXBwLnZMaXN0LCBlID0+IHsgZS5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpIH0pOyAvLyDlj5bmtojlpJrkvZnnmoTlqpLkvZPotYTmupDor7fmsYIKCQkJdHJ5IHsKCQkJCXYuc3JjID0gYXdhaXQgZ2V0SERTb3VyY2UoKTsKCQkJfSBjYXRjaChleCkgewoJCQkJY29uc29sZS5lcnJvcihleCk7CgkJCX0KCQl9OwoJCWV2ZW50cy5vbignZm91bmRNVicsICgpID0+IHsKCQkJbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2hlY2spLm9ic2VydmUodiwgewoJCQkJYXR0cmlidXRlczogdHJ1ZSwKCQkJCWF0dHJpYnV0ZUZpbHRlcjogWydzcmMnXQoJCQl9KTsKCQkJY2hlY2soKTsKCQl9KTsKCX0sCgl5b3V0dWJlKCkgewoJCWFwcC5wbGF5Q1NTID0gJ2J1dHRvbi55dHAtcGxheS1idXR0b24nOwoJCWFwcC5mdWxsQ1NTID0gJ2J1dHRvbi55dHAtZnVsbHNjcmVlbi1idXR0b24nOwoJCWFwcC5kaXNhYmxlS2V5cyA9IFszMiw3MF07CgkJZXZlbnRzLm9uKCdrZXlkb3duJywgZXYgPT4gewoJCQlzd2l0Y2ggKGV2LmtleUNvZGUpIHsKCQkJY2FzZSA2OTogLy9F77yM5pu/5o2iRumUrgoJCQkJdi5jdXJyZW50VGltZSArPSAwLjAzOwoJCQkJdi5wYXVzZSgpOwoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9KTsKCQkvLyBHTV9hZGRTdHlsZSgnLnl0cC1jaHJvbWUtYm90dG9tLCAueXRwLXByb2dyZXNzLWJhci1jb250YWluZXIgLnl0cC1jaGFwdGVycy1jb250YWluZXJ7d2lkdGg6MTAwJSFpbXBvcnRhbnR9Jyk7Cgl9LAoJcXEoKSB7CgkJYXBwLmRpc2FibGVLZXlzID0gWzMyXTsKCQlhcHAubmV4dENTUyA9ICcudHhwX2J0bl9uZXh0JzsKCQlhcHAud2ViZnVsbENTUyA9ICcudHhwX2J0bl9mYWtlJzsKCQlhcHAuZnVsbENTUyA9ICcudHhwX2J0bl9mdWxsc2NyZWVuJzsKCQlldmVudHMub24oJ2NhbnBsYXknLCAoKSA9PiB7CgkJCS8vIGlmICghcShhcHAud2ViZnVsbENTUykpIGFwcC5zaGVsbENTUyA9ICcudHhwX3BsYXllcic7CgkJCWlmICh2Lm11dGVkKSB7CgkJCQlkb0NsaWNrKCcudHhwX2J0bl92b2x1bWUnKTsKCQkJCSQoJy50eHBfcG9wdXBfdm9sdW1lJykuaGlkZSgpOwoJCQl9CgkJfSk7Cgl9LAoJeW91a3UoKSB7CgkJZXZlbnRzLm9uKCdrZXlkb3duJywgZXYgPT4gewoJCQlzd2l0Y2ggKGV2LmtleUNvZGUpIHsKCQkJY2FzZSAzMjogLy/nqbrmoLwKCQkJCWV2LnByZXZlbnREZWZhdWx0KCk7CgkJCQl2LnBhdXNlZCA/IHYucGxheSgpIDogdi5wYXVzZSgpOwoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9KTsKCQlpZiAoaG9zdC5zdGFydHNXaXRoKCd2a3UuJykpIHsKCQkJZXZlbnRzLm9uKCdjYW5wbGF5JywgKCkgPT4gewoJCQkJYXBwLmlzTGl2ZSA9ICFxKCcuc3B2X3Byb2dyZXNzJyk7CgkJCX0pOwoJCQlhcHAuZnVsbENTUyA9ICcubGl2ZV9pY29uX2Z1bGwnOwoJCX0gZWxzZSB7CgkJCWV2ZW50cy5vbignZm91bmRNVicsKCkgPT4gewoJCQkJYnkuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpOwoJCQl9KTsKCQkJLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NuYScpOwoJCQkvLyBkZWxldGUgY29va2llLmNuYTsgIC8v5YWo6YOo5riF6ZmkOiBjb29raWUoKTsg5YaZ5YWlY29va2ll77yaIGNvb2tpZS5jbmEgPSAneHh4eHgtLS14eHgnOwoJCQlhcHAuc2hlbGxDU1MgPSAnI3lrUGxheWVyJzsKCQkJYXBwLndlYmZ1bGxDU1MgPSAnLmNvbnRyb2wtd2ViZnVsbHNjcmVlbi1pY29uJzsKCQkJYXBwLmZ1bGxDU1MgPSAnLmNvbnRyb2wtZnVsbHNjcmVlbi1pY29uJzsKCQkJYXBwLm5leHRDU1MgPSAnc3Bhbi5pY29uLW5leHQnOwoJCX0KCX0sCgliaWxpYmlsaSgpIHsKCQlhcHAuaXNMaXZlID0gaG9zdC5zdGFydHNXaXRoKCdsaXZlLicpOwoJCWlmIChhcHAuaXNMaXZlKSByZXR1cm47CgkJY29uc3QgaXNTcXVpcnRsZSA9IHBhdGguc3RhcnRzV2l0aCgnL2Jhbmd1bWknKTsKCQlpZiAoIWlzU3F1aXJ0bGUpIGFwcC5kaXNhYmxlS2V5cyA9IFszMl07CgkJYXBwLnNoZWxsQ1NTID0gJ2RpdlthcmlhLWxhYmVsPSLlk5Tlk6nlk5Tlk6nmkq3mlL7lmagiXSc7IC8vIC5wbGF5ZXIgI2JpbGliaWxpLXBsYXllcgoJCWFwcC5uZXh0Q1NTID0gaXNTcXVpcnRsZSA/ICcuc3F1aXJ0bGUtdmlkZW8tbmV4dCcgOiAnLmJpbGliaWxpLXBsYXllci12aWRlby1idG4tbmV4dCc7CgkJYXBwLndlYmZ1bGxDU1MgPSBpc1NxdWlydGxlID8gJy5zcXVpcnRsZS12aWRlby1wYWdlZnVsbHNjcmVlbicgOiAnLmJpbGliaWxpLXBsYXllci12aWRlby13ZWItZnVsbHNjcmVlbic7CgkJYXBwLmZ1bGxDU1MgPSBpc1NxdWlydGxlID8gJy5zcXVpcnRsZS12aWRlby1mdWxsc2NyZWVuJyA6ICcuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1mdWxsc2NyZWVuJzsKCQlldmVudHMub24oJ2ZvdW5kTVYnLCAoKSA9PiB7CgkJCWNvbnN0IHMgPSBpc1NxdWlydGxlID8gJy5zcXVpcnRsZS1zcGVlZC1zZWxlY3QtcmVzdWx0JyA6ICcuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1zcGVlZC1uYW1lJzsKCQkJY29uc3QgZm4gPSBldiA9PiB7IHEocykudGV4dENvbnRlbnQgPSB2LnBsYXliYWNrUmF0ZSArICdYJzsgfTsKCQkJdi5hZGRFdmVudExpc3RlbmVyKCdyYXRlY2hhbmdlJywgZm4pOwoJCX0pOwoJCWNvbnN0IGZuID0gYXN5bmMgKGluZm8pID0+IHsgLy8gaW5mby51cmwKCQkJYXBwLmJ0bkZTID0gYXBwLmJ0bkZQID0gbnVsbDsKCQkJYXBwLmNoZWNrVUkoKTsKCQkJaWYgKGFwcC52TGlzdCkgeyAvLyDmnKrnlKhzaGFkb3dSb290CgkJCQl2ID0gYXBwLmZpbmRNVigpOwoJCQkJYXBwLm12U2hlbGwgPSB2LmNsb3Nlc3QoYXBwLnNoZWxsQ1NTKTsKCQkJfQoJCX07CgkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VybGNoYW5nZScsIGZuKTsKCX0sCglpcWl5aSgpIHsKCQlhcHAuZnVsbENTUyA9ICcuaXFwLWJ0bi1mdWxsc2NyZWVuJzsKCQlhcHAud2ViZnVsbENTUyA9ICcuaXFwLWJ0bi13ZWJzY3JlZW4nOwoJCWFwcC5uZXh0Q1NTID0gJy5pcXAtYnRuLW5leHQnOwoJfSwKCXBwdHYoKSB7CgkJYXBwLmZ1bGxDU1MgPSAnLnctem9vbS1jb250YWluZXIgPiBkaXYnOwoJCWFwcC53ZWJmdWxsQ1NTID0gJy53LWV4cGFuZC1jb250YWluZXIgPiBkaXYnOwoJCWFwcC5uZXh0Q1NTID0gJy53LW5leHQnOwoJfSwKCW1ndHYoKSB7CgkJYXBwLmZ1bGxDU1MgPSAnbWFuZ28tc2NyZWVuJzsKCQlhcHAud2ViZnVsbENTUyA9ICdtYW5nby13ZWJzY3JlZW4gPiBhJzsKCQlhcHAubmV4dENTUyA9ICdtYW5nby1jb250cm9sLXBsYXluZXh0LWJ0bic7Cgl9LAoJaXhpZ3VhKCkgewoJCWFwcC5mdWxsQ1NTID0gJy54Z3BsYXllci1mdWxsc2NyZWVuJzsKCQlhcHAud2ViZnVsbENTUyA9ICcueGdwbGF5ZXItY3NzZnVsbHNjcmVlbic7CgkJYXBwLm5leHRDU1MgPSAnLnhncGxheWVyLXBsYXlOZXh0JzsKCQlldmVudHMub24oJ2ZvdW5kTVYnLCAoKSA9PiB7CgkJCXYuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGFwcC5ob3RLZXkuYmluZChhcHApKTsKCQl9KTsKCX0sCgltaWd1dmlkZW8oKSB7CgkJYXBwLnBsYXlDU1MgPSAnLnBsYXktYnRuJzsKCQlhcHAubmV4dENTUyA9ICcubmV4dC1idG4nOwoJfSwKCXdlaWJvKCkgewoJCWFwcC5tdWx0aXBsZVYgPSBwYXRoLnN0YXJ0c1dpdGgoJy91LycpOwoJfSwKCWFjZnVuKCkgewoJCWFwcC5uZXh0Q1NTID0gJy5idG4tbmV4dC1wYXJ0IC5jb250cm9sLWJ0bic7CgkJYXBwLndlYmZ1bGxDU1MgPSAnLmZ1bGxzY3JlZW4td2ViJzsKCQlhcHAuZnVsbENTUyA9ICcuZnVsbHNjcmVlbi1zY3JlZW4nOwoJfSwKCVsnMTYzJ10oKSB7CgkJYXBwLm11bHRpcGxlViA9IGhvc3Quc3RhcnRzV2l0aCgnbmV3cy4nKTsKCQlHTV9hZGRTdHlsZSgnZGl2LnZpZGVvLHZpZGVve21heC1oZWlnaHQ6IDEwMCUgIWltcG9ydGFudDt9Jyk7CgkJcmV0dXJuIGhvc3Quc3BsaXQoJy4nKS5sZW5ndGggPiAzOwoJfSwKCXNvaHUoKSB7CgkJYXBwLm5leHRDU1MgPSAnbGkub25bZGF0YS12aWRdK2xpIGEnOwoJCWFwcC5mdWxsQ1NTID0gJy54LWZ1bGxzY3JlZW4tYnRuJzsKCQlhcHAud2ViZnVsbENTUyA9ICcueC1wYWdlZnMtYnRuJzsKCX0sCglmdW4oKSB7CgkJYXBwLm5leHRDU1MgPSAnLmJ0bi1pdGVtLmJ0bi1uZXh0JzsKCX0sCglsZSgpIHsKCQlHTV9hZGRTdHlsZSgnLmdtLWZwLWJvZHkgLmxlX2hlYWR7ZGlzcGxheTpub25lIWltcG9ydGFudH0nKTsKCQlhcHAuY3NzTVYgPSAnI3ZpZGVvIHZpZGVvJzsKCQlhcHAuc2hlbGxDU1MgPSAnI3ZpZGVvJzsKCQlhcHAubmV4dENTUyA9ICcuaHZfaWNvX25leHQnOwoJCXNldEludGVydmFsKF8gPT4gewoJCQlpZiAoIXYgfHwgdi5vZmZzZXRIZWlnaHQpIHJldHVybjsKCQkJZm9yIChjb25zdCBrIG9mIE9iamVjdC52YWx1ZXModi5hdHRyaWJ1dGVzKSkgaWYgKHYuZ2V0QXR0cmlidXRlKGsubmFtZSkgPT0gJycpewoJCQkJdi5yZW1vdmVBdHRyaWJ1dGUoay5uYW1lKTsKCQkJCWJyZWFrOwoJCQl9CgkJfSwgNjAwKTsKCX0sCgliYWlkdSgpIHsKCQlldmVudHMub24oJ2tleWRvd24nLCBldiA9PiB7CgkJCWNvbnN0IHAgPSAody5teXZpZGVvanMgfHwgdy52aWRlb1BsYXllcikuZ2V0UGxheWVycygidmlkZW8tcGxheWVyIikuaHRtbDVwbGF5ZXIudGVjaF87CgkJCWlmICghcCkgcmV0dXJuOwoJCQlsZXQgbjsKCQkJc3dpdGNoIChldi5rZXlDb2RlKSB7CgkJCWNhc2UgNjc6IG4gPSAwLjE7IC8v5oyJ6ZSuQ++8muWKoOmAn+aSreaUviArMC4xCgkJCWNhc2UgODg6IG4gPSBuIHx8IC0wLjE7IC8v5oyJ6ZSuWO+8muWHj+mAn+aSreaUviAtMC4xCgkJCQluICs9IHAucGxheWJhY2tSYXRlKCk7CgkJCQlpZiAoMCA8IG4gJiYgbiA8PSAxNikgcC5zZXRQbGF5YmFja1JhdGUobik7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJY2FzZSA5MDogLy/mjInplK5a77ya5q2j5bi46YCf5bqm5pKt5pS+CgkJCQlwLnNldFBsYXliYWNrUmF0ZSgxKTsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfSk7Cgl9LAoJYWdlZmFucygpIHsKCQlldmVudHMub24oJ2tleWRvd24nLCBldiA9PiB7CgkJCXN3aXRjaCAoZXYua2V5Q29kZSkgewoJCQljYXNlIDc4OiAvL04KCQkJCWxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1xkKyQvLCBzID0+ICsrcyk7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0pOwoJfSwKCWRpbGlsaXR2KCkgewoJCWFwcC5uZXh0Q1NTID0gYGFbaHJlZj0iJHtwYXRofSJdK2FgOwoJCUdNX2FkZFN0eWxlKCcuZHBsYXllci1sb2FkZWR7IGJhY2tncm91bmQtY29sb3I6b3JhbmdlICFpbXBvcnRhbnQ7IH0nKTsKCX0sCglvbGV2b2QoKSB7CgkJYXBwLmZ1bGxDU1MgPSAnYnV0dG9uW2RhdGEtcGx5cj1mdWxsc2NyZWVuXSc7CgkJR01fYWRkU3R5bGUoJy5wbHlyX192aWRlby13cmFwcGVyeyBoZWlnaHQ6MTAwJSFpbXBvcnRhbnQ7IHBhZGRpbmctYm90dG9tOjAhaW1wb3J0YW50O30nKTsKCX0KfTsKLy8gd3d3LmRpbGlsaXR2LmNjLHd3dy5obXR2Lm1lLGltZWlqdS5pbyx3d3cueGIxNS5jYwpyb3V0ZXIueGIxNSA9IHJvdXRlci5obXR2ID0gcm91dGVyLmltZWlqdSA9IHJvdXRlci5kaWxpbGl0djsKCmlmICghcm91dGVyW3VdKSB7IC8v55u05pKt56uZ54K5Cglyb3V0ZXIgPSB7CgkJZG91eXUoKSB7CgkJCWFwcC5hZHNDU1MgPSAnYVtocmVmKj0id2FuLmRvdXl1LmNvbSJdJzsKCQkJYXBwLmlzTGl2ZSA9ICFob3N0LnN0YXJ0c1dpdGgoJ3YuJyk7CgkJCWlmIChhcHAuaXNMaXZlKSB7CgkJCQlhcHAuY3NzTVYgPSAnLmxheW91dC1QbGF5ZXIgdmlkZW8nOwoJCQkJYXBwLndlYmZ1bGxDU1MgPSAnZGl2W2NsYXNzfD13ZnNdJzsKCQkJCWFwcC5mdWxsQ1NTID0gJ2RpdltjbGFzc3w9ZnNdJzsKCQkJCWFwcC5wbGF5Q1NTID0gJ2RpdltjbGFzc3w9cGxheV0nOwoJCQkJcGF0aCAhPSAnLycgJiYgZXZlbnRzLm9uKCdmb3VuZE1WJywgKCkgPT4gewoJCQkJCXEoJyNqcy1wbGF5ZXItYXNpZGUtc3RhdGUnKS5jaGVja2VkID0gdHJ1ZTsKCQkJCX0pOwoJCQl9IGVsc2UgZXZlbnRzLm9uKCdhZGRTaGFkb3dSb290JywgZnVuY3Rpb24ocikgewoJCQkJaWYgKHIuaG9zdC5tYXRjaGVzKCcjZGVtYW5kY29udHJvbGxlci1iYXInKSkgewoJCQkJCWFwcC5idG5GUCA9IHEoJy5Db250cm9sbGVyQmFyLVBhZ2VGdWxsJywgcik7CgkJCQkJYXBwLmJ0bkZTID0gcSgnLkNvbnRyb2xsZXJCYXItV2luZG93RnVsbCcsIHIpOwoJCQkJCXRoaXMudW5kbygnYWRkU2hhZG93Um9vdCcpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCXl5KCkgewoJCQlhcHAuaXNMaXZlID0gIXBhdGguc3RhcnRzV2l0aCgnL3gvJyk7CgkJCWlmIChhcHAuaXNMaXZlKSB7CgkJCQlhcHAuZnVsbENTUyA9ICcueWNfX2Z1bGxzY3JlZW4tYnRuJzsKCQkJCWFwcC53ZWJmdWxsQ1NTID0gJy55Y19fY2luZW1hLW1vZGUtYnRuJzsKCQkJCWFwcC5wbGF5Q1NTID0gJy55Y19fcGxheS1idG4nOwoJCQl9CgkJfSwKCQlodXlhKCkgewoJCQlpZiAoZmlyZWZveFZlciAmJiBmaXJlZm94VmVyIDwgNTcpIHJldHVybiB0cnVlOwoJCQlhcHAuZGlzYWJsZURCTENsaWNrID0gITA7CgkJCWFwcC53ZWJmdWxsQ1NTID0gJy5wbGF5ZXItZnVsbHBhZ2UtYnRuJzsKCQkJYXBwLmZ1bGxDU1MgPSAnLnBsYXllci1mdWxsc2NyZWVuLWJ0bic7CgkJCWFwcC5wbGF5Q1NTID0gJyNwbGF5ZXItYnRuJzsKCQkJYXBwLmFkc0NTUyA9ICcjcGxheWVyLXN1YnNjcmliZS13YXAsI3dyYXAtaW5jb21lJzsKCQkJaW50ZXJ2YWxRdWVyeShkb0NsaWNrLCAnLmxvZ2luLXRpcHMtY2xvc2UnKTsKCQkJbG9jYWxTdG9yYWdlWydzaWRlYmFyL2FkcyddID0gJ3t9JzsKCQkJbG9jYWxTdG9yYWdlWydzaWRlYmFyL3N0YXRlJ10gPSAwOwoJCQlsb2NhbFN0b3JhZ2UuVFRfUk9PTV9TSElFTERfQ0ZHXzBfID0gJ3siMTAwMDAiOjEsIjIwMDAxIjoxLCIyMDAwMiI6MSwiMjAwMDMiOjEsIjMwMDAwIjoxfSc7CgkJfSwKCQlsb25nemh1KCkgewoJCQlhcHAuZnVsbENTUyA9ICdhLnlhLXNjcmVlbi1idG4nOwoJCX0sCgkJemhhbnFpKCkgewoJCQlsb2NhbFN0b3JhZ2UubGFzdFBsYXllciA9ICdoNSc7CgkJCWFwcC5mdWxsQ1NTID0gJy52aWRlby1mdWxsc2NyZWVuJzsKCQl9Cgl9OwoJaWYgKHJvdXRlclt1XSkgewoJCWFwcC5pc0xpdmUgPSBhcHAuaXNMaXZlIHx8ICFob3N0LnN0YXJ0c1dpdGgoJ3YuJyk7CgkJKCF3LmNocm9tZSB8fCBpc0VkZ2UpICYmIGZha2VVQSh1YV9jaHJvbWUpOwoJfQp9CgpSZWZsZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3BsdWdpbnMnLCB7CglnZXQoKSB7IHJldHVybiB7IGxlbmd0aDogMCB9IH0KfSk7CkdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoJ+iEmuacrOWKn+iDveW/q+aNt+mUruihqCcgLCBhbGVydC5iaW5kKHcsCmDlj4zlh7vvvJrliIfmjaLvvIjnvZHpobXvvInlhajlsY8K6byg5qCH5Lit6ZSu77ya5b+r6L+bNeenkgoK5bem5Y+z5pa55ZCR6ZSu77ya5b+r6YCA44CB5b+r6L+bNeenkjsgK3NoaWZ0OiAyMOenkgrkuIrkuIvmlrnlkJHplK7vvJrpn7Pph4/osIPoioIgICBFU0PvvJrpgIDlh7rvvIjnvZHpobXvvInlhajlsY8K56m65qC86ZSu77ya5pqC5YGcL+aSreaUviAgICAgIE7vvJrmkq3mlL7kuIvkuIDpm4YK5Zue6L2m6ZSu77ya5YiH5o2i5YWo5bGPOyArc2hpZnQ6IOWIh+aNoue9kemhteWFqOWxjwpD77ya5Yqg6YCfMC4x5YCN5pKt5pS+ICAgICAgIFjvvJrlh4/pgJ8wLjHlgI3mkq3mlL4gICAgICAgWu+8muato+W4uOmAn+W6puaSreaUvgpE77ya5LiK5LiA5binICAgICBG77ya5LiL5LiA5binKHlvdXR1YmUuY29t55SoRemUrilgCikpOwppZiAoIXJvdXRlclt1XSB8fCAhcm91dGVyW3VdKCkpIGFwcC5pbml0KCk7CmlmICghcm91dGVyW3VdICYmICFhcHAuaXNOdW1VUkwpIGFwcC5pc051bVVSTCA9IC9bX1xXXVxkKyhcL3xcLlthLXpdezMsOH0pPyQvLnRlc3QocGF0aCk7"},{"name":"贴吧页面精简","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["*://tieba.baidu.com/f/fdir*"],"orig_includes":["*://tieba.baidu.com/*","*://dq.tieba.com/*","*://jump2.bdimg.com/*","*://jump.bdimg.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-body","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"version":"s2.8.0"},"ts":1630066351379},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/23687-%E8%B4%B4%E5%90%A7%E9%A1%B5%E9%9D%A2%E7%B2%BE%E7%AE%80/code/%E8%B4%B4%E5%90%A7%E9%A1%B5%E9%9D%A2%E7%B2%BE%E7%AE%80.user.js","uuid":"7283bb34-547d-4a09-a548-6ad3b10b5711","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDotLTlkKfpobXpnaLnsr7nroAKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3NjcmlwdHMvMjM2ODcKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL2NvZGluZy5uZXQvdS9CYWNrUnVubmVyL3AvR3JlYXNlTW9ua2V5LUpTL2dpdAovLyBAdmVyc2lvbiAgICAgIDIuOC4wCi8vIEBkZXNjcmlwdGlvbiAg44CQ5Y+v6IO95piv5L2g6YGH5Yiw55qE5pyA5aW955So55qE6LS05ZCn57K+566A6ISa5pys44CR77yM5Y676Zmk5ZCE56eN5bm/5ZGK5Y+K5omw55y85qih5Z2X77yM5YWo6Z2i5pSv5oyB5ZCE56eN6LS05ZCn6aG16Z2i77yM5YWN55m75b2V55yL5biW77yM44CQ5YCS5bqP55yL5biW44CRCi8vIEBhdXRob3IgICAgICAgQmFja1J1bm5lcgovLyBAaW5jbHVkZSAgICAgICo6Ly90aWViYS5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAgICo6Ly9kcS50aWViYS5jb20vKgovLyBAaW5jbHVkZSAgICAgICo6Ly9qdW1wMi5iZGltZy5jb20vKgovLyBAaW5jbHVkZSAgICAgICo6Ly9qdW1wLmJkaW1nLmNvbS8qCi8vIEBleGNsdWRlICAgICAgKjovL3RpZWJhLmJhaWR1LmNvbS9mL2ZkaXIqCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtYm9keQovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2pxdWVyeS8zLjQuMS9qcXVlcnkubWluLmpzCi8vIEBsaWNlbnNlICAgICAgTUlUCi8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX2RlbGV0ZVZhbHVlCi8vIEBncmFudCAgICAgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgIEdNX2luZm8KLy8gPT0vVXNlclNjcmlwdD09CgovLyA9PT09ICBUaXBzID09PT09Ci8vIOS9v+eUqFRhbXBlck1vbmtleeeahOeUqOaIt+WPr+S7peWwhuiEmuacrOeahOWKoOi9veS9jee9ruiuvue9ruS4umRvY3VtZW50LXN0YXJ06I635b6X5pu05aW95pWI5p6c77yM6Iul5Ye6546w5LiN55Sf5pWI562J6ZSZ6K+v6K+36L+Y5Y6f6K6+572uCi8vIOivt+agueaNruaCqOeahOmcgOimgeagueaNruS4i+mdouS7o+eggeeahOazqOmHiumAieaLqemcgOimgemakOiXj+eahOaooeWdl++8jOacieS4jeaDs+makOiXj+eahOaooeWdl+WPr+S7peazqOmHiuaOiemCo+S4gOihjOS7o+eggQovLyDor7fmoLnmja7mgqjnmoTpnIDopoHkuI7ms6jph4rosIPmlbTlj5jph4/lrprkuYnlhoXnmoTlhoXlrrkKLy8g5oKo6Ieq6KGM5L+u5pS555qE5Luj56CB5Lya5Zyo5pu05paw55qE5pe25YCZ6KKr6KaG55uW77yM5bu66K6u5oKo5aSH5Lu95oKo5L+u5pS555qE5YaF5a65Ci8vIOmBh+WIsOmXrumimOivt+eri+WNs+WPjemmiAovLyA9PT09IERvbmF0ZSA9PT09Ci8vIOWmguaenOaCqOinieW+l+acrOiEmuacrOWlveeUqOWPr+S7pei1nuWKqeaIkeS4gOeCuembtuiKsQovLyBkb25hdGVAYmFja3J1bm5lci50b3AgKOaUr+S7mOWunSkKLy8gPT09IOabtOaWsOaXpeW/lyA9PT0KLy8gMjAyMC4wMS4xNiAtIDIuOC4wCi8vIOS/ruWkjemXrumimAovLyAyMDE4LjEyLjI2IC0gMi43LjE1Ci8vIOS/ruWkjUNocm9tZeaWsOeJiOacrOS4iueahOWFvOWuuemXrumimOOAggovLyAyMDE4LjEwLjIxIC0gMi43LjE0Ci8vIOa3u+WKoOS4gOS4quWfn+WQjemHjeWumuWQkeinhOWImQovLyAyMDE4LjEwLjEzIC0gMi43LjEzCi8vIOabtOaNompRdWVyeeeahENETu+8jOiEmuacrOWKoOi9veaPkOmAnwovLyDkv67lpI3kuobkuIDkupvpl67popgKLy8gPT09PT09PT09PT09PT09PQoKCihmdW5jdGlvbigpIHsKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gICAgICAgIOWPmOmHj+WumuS5iQogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09CiAgICB2YXIgc2xlZXBUaW1lOwogICAgdmFyIHNsZWVwVGltZVdoZW5QYWdlVHVybjsKICAgIHZhciByZXZlcnNlU2xlZXBUaW1lOwogICAgdmFyIHBvc3Rwcm9jZXNzOwogICAgdmFyIGhvbWVQYWdlUHJvY2VzczsKICAgIHZhciBncm91cFBhZ2VQcm9jZXNzOwogICAgdmFyIG5vTG9naW5Qcm9jZXNzOwogICAgdmFyIHJldmVyc2U7CiAgICB2YXIgaG9tZVByb2Nlc3M7CiAgICB2YXIgaXNIZWFkaW1nOwogICAgdmFyIGNoZWNrcmF0ZTsKICAgIHZhciBkZWxheVNjcmlwdFJ1blRpbWVzOwogICAgdmFyIGlzUmVkaXJlY3Q7CiAgICB2YXIgZGlzcGxheUxpdmU7CiAgICB2YXIgZGlzcGxheVNpZ247CiAgICB2YXIgYXV0b0Nsb3NlR3VpZGU7CiAgICAvL+iEmuacrOWbuuWumuW8gOWFswogICAgdmFyIGlzQ3RybFBhbmVsT247CiAgICAvL+W6lemDqOS/oeaBr2RpdgogICAgdmFyIGZvb3Q7CiAgICB2YXIgaG9tZVBhZ2VNYXRjaCA9IFJlZ0V4cCgiKGh0dHB8aHR0cHMpOlwvXC90aWViYS5iYWlkdS5jb21cLygjKiQpfChodHRwfGh0dHBzKTpcL1wvdGllYmEuYmFpZHUuY29tXC8oaW5kZXhcLmh0bWwjKiQpIik7CiAgICAvLz09PT09PT09PT09PT09PT09PT09PQogICAgLy/ku6XkuIrlhoXlrrnlj6/ku6Xkv67mlLnvvIzor7fli7/kv67mlLnku6XkuIvlhoXlrrkKICAgIC8vPT09PT09PT09PT09PT09PT09PT09CiAgICB2YXIgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB2YXIgZmluaXNoVGltZSA9IC0xOwogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyAgICAgICAg5Li75omn6KGM5Yy6CiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8v5o6n5Yi25Y+w5L+h5oGvCiAgICBjb25zb2xlLndhcm4oJ+i0tOWQp+mhtemdoueyvueugDog5Yid5aeL5YyWJyk7CiAgICAvL+WIneWni+WMlgogICAgaW5pdGlhbGl6ZSgpOwogICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOWQr+WKqCcpOwogICAgLy/ph43lrprlkJEKICAgIGlmIChpc1JlZGlyZWN0KXsKICAgICAgICByZWRpcmVjdCgpOwogICAgfQogICAgLy9jc3Pkv67mlLkKICAgIGFwcGVuZENTUygpOwogICAgLy/mm7TmlrDkv6Hmga8KICAgIHVwZGF0ZUFsZXJ0KCk7CiAgICAvL+WFjeeZu+W9lQogICAgaWYgKG5vTG9naW5Qcm9jZXNzKXsKICAgICAgICBub0xvZ2luKCk7CiAgICB9CiAgICBpZiAocG9zdHByb2Nlc3MpewogICAgICAgIC8v5oOw5oCn6ISa5pys5omn6KGMCiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXsKICAgICAgICAgICAgLy/liqDovb3orqHml7YKICAgICAgICAgICAgZmluaXNoVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lOwogICAgICAgICAgICBjb25zb2xlLmxvZygn6LS05ZCn6aG16Z2i57K+566AOiDpobXpnaLliqDovb3nlKjml7Y6ICcgKyBmaW5pc2hUaW1lKTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOW8gOWni+aJp+ihjOaDsOaAp+iEmuacrCcpOwogICAgICAgICAgICAvL+aOp+WItumdouadvwogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+i0tOWQp+mhtemdoueyvueugDog5q2j5Zyo5Yib5bu65o6n5Yi26Z2i5p2/Jyk7CiAgICAgICAgICAgICAgICBpZihpc0N0cmxQYW5lbE9uKXsKICAgICAgICAgICAgICAgICAgICBjcmVhdGVDb250cm9sUGFuZWwoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy/lupXpg6jkv6Hmga8KICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgY3JlYXRlRm9vdGVyTGF5ZXIoKTsKICAgICAgICAgICAgICAgIGFkZEZpbmlzaFRpbWVUb0Zvb3RlcigpOwogICAgICAgICAgICB9IGNhdGNoKGUpewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL+WvvOiIquagj+e/u+mhteebkeWQrAogICAgICAgICAgICBhZGRMaXN0ZW5lclRvTmF2KCk7CiAgICAgICAgICAgIC8v5YiX6KGo57+76aG155uR5ZCsCiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoImt3PSIpIT0gLTEgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigic2VhcmNoIik9PS0xKXsKICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyVG9MaXN0KCk7CiAgICAgICAgICAgICAgICBhZGluTGlzdENsZWFuKCk7CiAgICAgICAgICAgICAgICBkaXNhYmxlRm9ydW1DYXJkKCk7CiAgICAgICAgICAgICAgICAvL+iHquWKqOaUtui1t+aMh+W8lSAqMjAxODA1MDkKICAgICAgICAgICAgICAgIGNsb3NlR3VpZGUoKTsKICAgICAgICAgICAgICAgIC8v5by55qGG5YWz6ZetICoyMDE4MTAxMwogICAgICAgICAgICAgICAgcmVtb3ZlUG9wdXBNb2RhbCgpOwogICAgICAgICAgICAgICAgLy/lhbPms6jmjInpkq7kv67lpI0gKjIwMjAwMTE2CiAgICAgICAgICAgICAgICBmaXhGb2N1c0J1dHRvbigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoInRpZWJhLmJhaWR1LmNvbS9wLyIpICE9IC0xKXsKICAgICAgICAgICAgICAgICAgICBhZGRMaXN0ZW5lclRvUGFnZSgpOwogICAgICAgICAgICAgICAgICAgIHRwb2ludEFEQ2xlYW4oKTsKICAgICAgICAgICAgICAgICAgICBhZGluUGFnZUNsZWFuKCk7CiAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZW9yZGVyKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJ0aWViYS5iYWlkdS5jb20vZ3JvdXAiKSAhPSAtMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign6LS05ZCn6aG16Z2i57K+566AOiDlvZPliY3kvY3kuo7nvqTnu4TpobXpnaLvvIzkuI3miafooYznvqTnu4TpobXpnaLmg7DmgKfohJrmnKwnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG9tZVBhZ2VNYXRjaC50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kQ2xlYW5JbmRleEFERXZlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign6LS05ZCn6aG16Z2i57K+566AOiDpobXpnaLmnKrpgILphY3lu7bov5/ohJrmnKwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8v5bu26L+f5omn6KGMCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjayxzbGVlcFRpbWUgKiBjaGVja3JhdGUpOwogICAgICAgICAgICB2YXIgbj0wOwogICAgICAgICAgICBmdW5jdGlvbiBjaGVjaygpewogICAgICAgICAgICAgICAgdmFyIHRpbWVzID0gbisxOwogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOW7tui/n+iEmuacrOato+WcqOaJp+ihjOesrCAnICsgdGltZXMgKyAnIOasoScpOwogICAgICAgICAgICAgICAgLy/mjqfliLbpnaLmnb8KICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+i0tOWQp+mhtemdoueyvueugDog5q2j5Zyo5Yib5bu65o6n5Yi26Z2i5p2/Jyk7CiAgICAgICAgICAgICAgICAgICAgaWYoaXNDdHJsUGFuZWxPbil7CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNvbnRyb2xQYW5lbCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8v5bqV6YOo5L+h5oGvCiAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRm9vdGVyTGF5ZXIoKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8v5a+86Iiq5qCP57+76aG155uR5ZCsCiAgICAgICAgICAgICAgICBhZGRMaXN0ZW5lclRvTmF2KCk7CiAgICAgICAgICAgICAgICAvL+WIl+ihqOe/u+mhteebkeWQrAogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZigia3c9IikhPSAtMSAmJiB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJzZWFyY2giKT09LTEpewogICAgICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyVG9MaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgYWRpbkxpc3RDbGVhbigpOwogICAgICAgICAgICAgICAgICAgIGRpc2FibGVGb3J1bUNhcmQoKTsKICAgICAgICAgICAgICAgICAgICAvL+iHquWKqOaUtui1t+aMh+W8lSAqMjAxODA1MDkKICAgICAgICAgICAgICAgICAgICBjbG9zZUd1aWRlKCk7CiAgICAgICAgICAgICAgICAgICAgLy/lvLnmoYblhbPpl60gKjIwMTgxMDEzCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUG9wdXBNb2RhbCgpOwogICAgICAgICAgICAgICAgICAgIC8v5L+u5aSN5YWz5rOo5oyJ6ZKuICoyMDIwMDExNgogICAgICAgICAgICAgICAgICAgIGZpeEZvY3VzQnV0dG9uKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJ0aWViYS5iYWlkdS5jb20vcC8iKSAhPSAtMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyVG9QYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRwb2ludEFEQ2xlYW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgYWRpblBhZ2VDbGVhbigpOwogICAgICAgICAgICAgICAgICAgICAgICByZXZlcnNlb3JkZXIoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG9tZVBhZ2VNYXRjaC50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kQ2xlYW5JbmRleEFERXZlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuQURpbkluZGV4KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZVN0YXJ0KCk7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZVN0YXJ0KCl7CiAgICAgICAgICAgICAgICAgICAgbisrOwogICAgICAgICAgICAgICAgICAgIGlmIChuPmRlbGF5U2NyaXB0UnVuVGltZXMtMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sc2xlZXBUaW1lKTsKICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjayxzbGVlcFRpbWUgKiBjaGVja3JhdGUpOwogICAgICAgICAgICB2YXIgbiA9IDA7CiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrKCl7CiAgICAgICAgICAgICAgICAvL+aOp+WItumdouadvwogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign6LS05ZCn6aG16Z2i57K+566AOiDmraPlnKjliJvlu7rmjqfliLbpnaLmnb8nKTsKICAgICAgICAgICAgICAgICAgICBpZihpc0N0cmxQYW5lbE9uKXsKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ29udHJvbFBhbmVsKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy/lupXpg6jkv6Hmga8KICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICBjcmVhdGVGb290ZXJMYXllcigpOwogICAgICAgICAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbisrOwogICAgICAgICAgICAgICAgaWYgKG4+ZGVsYXlTY3JpcHRSdW5UaW1lcyAtMSl7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXsKICAgICAgICAgICAgLy/liqDovb3orqHml7YKICAgICAgICAgICAgZmluaXNoVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lOwogICAgICAgICAgICBjb25zb2xlLmxvZygn6LS05ZCn6aG16Z2i57K+566AOiDpobXpnaLliqDovb3nlKjml7Y6ICcgKyBmaW5pc2hUaW1lKTsKICAgICAgICAgICAgLy/mjqfliLbpnaLmnb8KICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOato+WcqOWIm+W7uuaOp+WItumdouadvycpOwogICAgICAgICAgICAgICAgaWYoaXNDdHJsUGFuZWxPbil7CiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ29udHJvbFBhbmVsKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8v5bqV6YOo5L+h5oGvCiAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgIGNyZWF0ZUZvb3RlckxheWVyKCk7CiAgICAgICAgICAgICAgICBhZGRGaW5pc2hUaW1lVG9Gb290ZXIoKTsKICAgICAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLndhcm4oJ+i0tOWQp+mhtemdoueyvueugDog5ZCO5aSE55CG6ISa5pys5bey6Lez6L+HJyk7CiAgICB9CiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8v5Yqf6IO95Yy6IOivt+WLv+S/ruaUueS4i+mdoueahOWGheWuuQogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvL+WIneWni+WMlgogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpewogICAgICAgIHNsZWVwVGltZSA9IGluaXRpYWxpemVfdmFyKCJzbGVlcFRpbWUiLDMwMCk7CiAgICAgICAgc2xlZXBUaW1lV2hlblBhZ2VUdXJuID0gaW5pdGlhbGl6ZV92YXIoInNsZWVwVGltZVdoZW5QYWdlVHVybiIsODAwKTsKICAgICAgICByZXZlcnNlU2xlZXBUaW1lID0gaW5pdGlhbGl6ZV92YXIoInJldmVyc2VTbGVlcFRpbWUiLDIwMCk7CiAgICAgICAgcG9zdHByb2Nlc3MgPSBpbml0aWFsaXplX3ZhcigicG9zdHByb2Nlc3MiLHRydWUpOwogICAgICAgIGlzUmVkaXJlY3QgPSBpbml0aWFsaXplX3ZhcigiaXNSZWRpcmVjdCIsdHJ1ZSk7CiAgICAgICAgaG9tZVBhZ2VQcm9jZXNzID0gaW5pdGlhbGl6ZV92YXIoImhvbWVQYWdlUHJvY2VzcyIsdHJ1ZSk7CiAgICAgICAgZ3JvdXBQYWdlUHJvY2VzcyA9IGluaXRpYWxpemVfdmFyKCJncm91cFBhZ2VQcm9jZXNzIix0cnVlKTsKICAgICAgICBub0xvZ2luUHJvY2VzcyA9IGluaXRpYWxpemVfdmFyKCJub0xvZ2luUHJvY2VzcyIsdHJ1ZSk7CiAgICAgICAgcmV2ZXJzZSA9IGluaXRpYWxpemVfdmFyKCJyZXZlcnNlIixmYWxzZSk7CiAgICAgICAgaG9tZVByb2Nlc3MgPSBpbml0aWFsaXplX3ZhcigiaG9tZVByb2Nlc3MiLHRydWUpOwogICAgICAgIGlzSGVhZGltZyA9IGluaXRpYWxpemVfdmFyKCJpc0hlYWRpbWciLGZhbHNlKTsKICAgICAgICBjaGVja3JhdGUgPSBpbml0aWFsaXplX3ZhcigiY2hlY2tyYXRlIiwxKTsKICAgICAgICBkZWxheVNjcmlwdFJ1blRpbWVzID0gaW5pdGlhbGl6ZV92YXIoImRlbGF5U2NyaXB0UnVuVGltZXMiLDYpOwogICAgICAgIGRpc3BsYXlMaXZlID0gaW5pdGlhbGl6ZV92YXIoImRpc3BsYXlMaXZlIixmYWxzZSk7CiAgICAgICAgZGlzcGxheVNpZ24gPSBpbml0aWFsaXplX3ZhcigiZGlzcGxheVNpZ24iLGZhbHNlKTsKICAgICAgICBhdXRvQ2xvc2VHdWlkZSA9IGluaXRpYWxpemVfdmFyKCJhdXRvQ2xvc2VHdWlkZSIsdHJ1ZSk7CiAgICAgICAgLy/lm7rlrprlvIDlhbMgKjIwMTgwNTEwCiAgICAgICAgaXNDdHJsUGFuZWxPbiA9IGluaXRpYWxpemVfdmFyKCJpc0N0cmxQYW5lbE9uIix0cnVlKTsKICAgIH0KICAgIGZ1bmN0aW9uIGluaXRpYWxpemVfdmFyKG5hbWUsZGVmYXVsdFNldCl7CiAgICAgICAgdmFyIG9iaiA9IEdNX2dldFZhbHVlKG5hbWUsZGVmYXVsdFNldCk7CiAgICAgICAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgb2JqID0gZGVmYXVsdFNldDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0KICAgIC8vY3Nz5L+u5pS5CiAgICBmdW5jdGlvbiBhcHBlbmRDU1MoKXsKICAgICAgICB2YXIgY3NzVGV4dCA9ICIiOwogICAgICAgIC8v6aG26YOo55u05pKt5qCPCiAgICAgICAgY3NzVGV4dCArPSAnI3ZpZGVvX2Zyc19oZWFkIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lj7PkvqfkvJrlkZjmqKHlnZcKICAgICAgICBjc3NUZXh0ICs9ICcuY2VsZWJyaXR5IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lj7PkvqfmiJHnmoTlupTnlKjmqKHlnZcKICAgICAgICBjc3NUZXh0ICs9ICcubXlfYXBwIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/ng63orq7mppwKICAgICAgICBjc3NUZXh0ICs9ICcudG9waWNfbGlzdF9ib3gge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+W5v+WRiueBsOiJsmxhYmVsCiAgICAgICAgY3NzVGV4dCArPSAnLmxhYmVsX3RleHQge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+WPs+i+ueS4gOaOkuWbvuaghwogICAgICAgIGNzc1RleHQgKz0gJy5qX2ljb25fc2xvdCB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v5Lya5ZGY5Zu+5qCH77yI5Lya6YCg5oiQ55So5oi35ZCN5bem56e777yM5LiA5a6a56iL5bqm5LiK5b2x5ZON5pW05L2T576O6KeC77yJCiAgICAgICAgLy9jc3NUZXh0ICs9ICcuaWNvbl90YndvcmxkIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/mgqjlj6/og73mhJ/lhbTotqPnmoTlkKcKICAgICAgICBjc3NUZXh0ICs9ICcuZm9ydW1fcmVjb21tZW5kIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lj7PkuIrop5LlupTnlKjkuK3lv4MKICAgICAgICBjc3NUZXh0ICs9ICcudV9tZW51X3dyYXAudV9hcHBjZW50ZXJFbnRyYW5jZV93cmFwIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lj7PkuIrop5LkvJrlkZjlrpjnvZEKICAgICAgICBjc3NUZXh0ICs9ICcudV9qb2ludmlwX3dyYXAudmlwX3JlZC5qX2J0bl9nZXRtZW1iZXIge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICBjc3NUZXh0ICs9ICcudV9qb2ludmlwIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lhoXpobXpobbpg6hiYW5uZXIKICAgICAgICBjc3NUZXh0ICs9ICcubF9iYW5uZXIge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+WGhemhteaIkOWwsXNlY3Rpb24KICAgICAgICBjc3NUZXh0ICs9ICcuYWNoaWV2ZW1lbnRfbWVkYWxfc2VjdGlvbiB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v6aG26YOo5ri45oiP5L+h5oGvCiAgICAgICAgY3NzVGV4dCArPSAnLmdhbWUtaGVhZC1nYW1lLWluZm8td3JhcHBlciB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v5YaF6aG16YCB56S854mp5oyJ6ZKuCiAgICAgICAgY3NzVGV4dCArPSAnLnBvc3QtZm9vdC1zZW5kLWdpZnQtYnRuIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/kvJrlkZjmjL3lsIrmjInpkq4KICAgICAgICBjc3NUZXh0ICs9ICcuc2F2ZV9mYWNlX2JnIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgY3NzVGV4dCArPSAnLnNhdmVfZmFjZV9iZ18yIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lupXpg6jmuLjmiI/lvIDmtYsKICAgICAgICBjc3NUZXh0ICs9ICcjZHVva3Vfc2VydmVyc19saXN0IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lj7Pkvqfng63pl6jljaHljIUKICAgICAgICBjc3NUZXh0ICs9ICcudTlfYXNpZGUge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+WPs+S+p+Wwj+ivtOS6uuawlOamnAogICAgICAgIGNzc1RleHQgKz0gJy5ub3ZlbC1yYW5raW5nLWZycy1ib2R5IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lpLTlg4/kuIvpnaLnmoTkuIDmjpLlm77moIcKICAgICAgICBjc3NUZXh0ICs9ICcuaWNvbl93cmFwIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/otLTlkKfop6bngrnmjqjlub/lm77niYfvvIjlnKjlu7bov5/lpITnkIbliY3pooTlpITnkIbvvIkKICAgICAgICBjc3NUZXh0ICs9ICcudHBvaW50LWltZ3Mge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+WPs+S4i+inkueCruetkgogICAgICAgIGNzc1RleHQgKz0gJy5qLWZpcmV3b3JrLXNlbmRlciB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v6K6/6LCI55u05pKtCiAgICAgICAgaWYgKCFkaXNwbGF5TGl2ZSl7CiAgICAgICAgICAgIGNzc1RleHQgKz0gJy5pbnRlcnZpZXcge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICB9CiAgICAgICAgLy/otLTlhoXnm7jlhbPmjqjojZAKICAgICAgICBjc3NUZXh0ICs9ICcudGhyZWFkX3JlY29tbWVuZCB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v6LS05YaF5bm/5ZGKCiAgICAgICAgY3NzVGV4dCArPSAnLmlmcmFtZV93cmFwcGVyIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lj7PkvqfotLTlkKfkvZzogIXorqTor4EKICAgICAgICBjc3NUZXh0ICs9ICcuYXV0aG9yLW1hbmFnZXIge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+i+k+WFpeahhnBsYWNlaG9sZGVyCiAgICAgICAgY3NzVGV4dCArPSAnLnRiX3Bvc3Rlcl9wbGFjZWhvbGRlciB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v5Zu+54mH562+5ZCN5qGjCiAgICAgICAgaWYgKCFkaXNwbGF5U2lnbil7CiAgICAgICAgICAgIGNzc1RleHQgKz0gJy5qX3VzZXJfc2lnbiB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgICAgICBjc3NUZXh0ICs9ICcuZF9zaWduX3NwbGl0IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgfQogICAgICAgIC8v5Lya5ZGY5ZCN54mMCiAgICAgICAgY3NzVGV4dCArPSAnLnBiX25hbWVwbGF0ZSB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v5Y+z5L6n6I+c5Y2V5qCP57K+566ACiAgICAgICAgY3NzVGV4dCArPSAnLnRidWlfZmJhcl9wcm9wcyB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIGNzc1RleHQgKz0gJy50YnVpX2ZiYXJfdHN1a2tvbWkge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+WQp+S4u+S4k+eJiAogICAgICAgIGNzc1RleHQgKz0gJy50YnVpX2ZiYXJfYmF6aHUge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+WPs+S+p+WPr+eCueWHu+W5v+WRigogICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZiAhPT0gImh0dHA6Ly90aWViYS5iYWlkdS5jb20vIiAmJiB3aW5kb3cubG9jYXRpb24uaHJlZiAhPT0gImh0dHBzOi8vdGllYmEuYmFpZHUuY29tLyIpewogICAgICAgICAgICBjc3NUZXh0ICs9ICcual9jbGlja19zdGF0cyB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIH0KICAgICAgICAvL+WPs+S+p+inhumikeaOqOiNkAogICAgICAgIGNzc1RleHQgKz0gJyN2aWRlb19hc2lkZSB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v5LiA5qW855S15b2x5bm/5ZGKCiAgICAgICAgY3NzVGV4dCArPSAnLnRwb2ludC1za2luIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/nm7Tmkq3pobXpnaLlupXpg6jlvLnlh7rmoI8KICAgICAgICBjc3NUZXh0ICs9ICcuYXR0ZW50aW9uX3RpcF93cmFwIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lupXpg6jms6jlhowv55m75b2V5qiq5p2hCiAgICAgICAgY3NzVGV4dCArPSAnLmd1aWRhbmNlX2ZjIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy9jb250ZW50LWFkIHNwYW4KICAgICAgICBjc3NUZXh0ICs9ICcuY29udGVudC1hZCB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8vaGVhZCBhZCBzcGFuCiAgICAgICAgY3NzVGV4dCArPSAnLmhlYWRfYWRfdGFnIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgY3NzVGV4dCArPSAnLmhlYWRfYWRfcG9wIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/kvJrlkZjnva7pobZidWJibGUKICAgICAgICBjc3NUZXh0ICs9ICcjdGJfbWVzc2FnZV90aXBfZCB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgIC8v5bqU55So5Lit5b+DbmF2CiAgICAgICAgY3NzVGV4dCArPSAnLmFwcF9mb3J1bV90b3BfbmF2IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgY3NzVGV4dCArPSAnI2pfY29yZV90aXRsZV93cmFwIHt0b3A6MHB4ICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/pobbmoI/kvJrlkZgKICAgICAgICBjc3NUZXh0ICs9ICcudV9tZW1iZXIge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+WvvOiIquagj+a4uOaIjwogICAgICAgIGNzc1RleHQgKz0gJyNqX25hdnRhYl9nYW1lIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/lj5HluJbmoYbmsJTms6EKICAgICAgICBjc3NUZXh0ICs9ICcudWlfYnViYmxlX2JvZHkge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+ekvOi1ngogICAgICAgIGNzc1RleHQgKz0gJy5naWZ0LWdvaW4ge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+a8gua1geeTtgogICAgICAgIGNzc1RleHQgKz0gJy50YnVpX2ZiYXJfbm9ib3R0bGUge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+aJq+aPj+S4i+i9vUFQUAogICAgICAgIGNzc1RleHQgKz0gJy5hcHBfZG93bmxvYWRfYm94IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy/mn5DkuKrlj7Pkvqfmta7liqjlub/lkYrnmoRjbG9zZeaMiemSrgogICAgICAgIGNzc1RleHQgKz0gJy5qX2NsaWNrX2Nsb3NlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgLy82MTggQmFubmVyCiAgICAgICAgY3NzVGV4dCArPSAnLnNob3dCYXIge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+WPs+S4iuinkuawlOazoQogICAgICAgIGNzc1RleHQgKz0gJy51aV9idWJibGVfY29udGVudCB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50fSc7CiAgICAgICAgLy9IYW8xMjMKICAgICAgICBjc3NUZXh0ICs9ICcual91X21lbnVfZXh0cmFfdXJsX2xpbmsge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudH0nOwogICAgICAgIC8v5aSn5a626YO95Zyo5pCcCiAgICAgICAgY3NzVGV4dCArPSAnLnNlYXJjaF9iYWNrX2JveCB7ZGlzcGxheTpub25lICFpbXBvcnRhbnR9JzsKICAgICAgICAvL+S4i+i9vUFQUAogICAgICAgIGNzc1RleHQgKz0gJy50YnVpX2ZiYXJfZG93biB7ZGlzcGxheTpub25lICFpbXBvcnRhbnR9JzsKICAgICAgICAvL25hbmkKICAgICAgICBjc3NUZXh0ICs9ICcubmFuaV9hcHBfZG93bmxvYWRfYm94IHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+S8muWRmOiPnOWNlQogICAgICAgIGNzc1RleHQgKz0gJy51X21lbnVfbWVtYmVyIHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAvL+iPnOWNlSAqMjAxODEwMTIKICAgICAgICBjc3NUZXh0ICs9ICcudV9teXRibWFsbCwudV9nYW1lLC51X2JsdWV7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fSc7CgogICAgICAgIC8v576k57uE6aG16Z2i5Y+z5L6n5LiL6L29CiAgICAgICAgaWYgKGdyb3VwUGFnZVByb2Nlc3MpewogICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigidGllYmEuYmFpZHUuY29tL2dyb3VwIikgIT0gLTEpewogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAnLnJpZ2h0IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8v5Li76aG15qih5Z2X57K+566ACiAgICAgICAgaWYgKGhvbWVQYWdlUHJvY2Vzcyl7CiAgICAgICAgICAgIGlmIChob21lUGFnZU1hdGNoLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpKXsKICAgICAgICAgICAgICAgIC8v6aG26YOoCiAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVuc2FmZVdpbmRvdy5QYWdlRGF0YS51c2VyLmlzX2xvZ2luID09PSAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgY3NzVGV4dCArPSAnLnRvcC1zZWMge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfotLTlkKfpobXpnaLnsr7nroA6IOeZu+W9leeKtuaAgeajgOafpemUmeivrycpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL+ebtOaSreengAogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAnLnNwYWdlX2xpdmVzaG93X3NsaWRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgICAgICAvL+S7peS4i+aooeWdl+WboOS4uuWcqOWPs+S+p+acieS4gOS4quS4i+a7kemhtemdouaXtuiuqeaooeWdl+S7jeeEtuS/neaMgeWcqOWPr+inhuWMuuWfn+WGheeahOiuvuiuoe+8jOWNleeLrOeyvueugOS4gOS4quS8mumAoOaIkOa7muWKqOmhtemdouaXtuaooeWdl+mUmeS9je+8jOaJgOS7peWFqOmDqOeyvueugAogICAgICAgICAgICAgICAgLy/kubHkuIPlhavns5/nmoTmu5rliqjmtLvliqjmqKHlnZcKICAgICAgICAgICAgICAgIGNzc1RleHQgKz0gJyNwbGF0X2FjdF93cmFwcGVyIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgICAgICAvL+ixquWPi+S/seS5kOmDqAogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAnLm1lbWJlcl9yYW5rIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgICAgICAvL+WqkuS9k+i/m+mpuwogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAnI2FkaWRlX3BsYXRmb3JtIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgICAgICAvL+i0tOWQp+WoseS5kAogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAnI21lZGlhX2l0ZW0ge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9JzsKICAgICAgICAgICAgICAgIC8v5oiR55qE5ri45oiPCiAgICAgICAgICAgICAgICBjc3NUZXh0ICs9ICcjc3BhZ2VfZ2FtZV90YWJfd3JhcHBlciB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgICAgICAgICAgLy/lhazlkYrmnb8KICAgICAgICAgICAgICAgIGNzc1RleHQgKz0gJyNub3RpY2VfaXRlbSB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgICAgICAgICAgLy/osIPmlbTkvY3nva4gKjIwMTcxMjIzCiAgICAgICAgICAgICAgICBjc3NUZXh0ICs9ICcucmlnaHQtc2VjIHttYXJnaW4tdG9wOi0xNXB4ICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgICAgICAvL+i0tOWQp+eyvumAieS4k+mimCAqMjAxNzEyMjMKICAgICAgICAgICAgICAgIGNzc1RleHQgKz0gJy5hZ2dyZWdhdGVfZW50cmFuY2Vfd3JhcCB7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgICAgICAvL+acqueZu+W9leaXtueahOa7muWKqOaoquW5hSAqMjAxODA1MDQKICAgICAgICAgICAgICAgIGNzc1RleHQgKz0gJyNyZWNfbGVmdCB7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fSAjcmVjX3JpZ2h0e2Zsb2F0OnJpZ2h0O3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjMwcHg7bWFyZ2luLXRvcDoxNXB4O30nOwogICAgICAgICAgICAgICAgLy/nlKjmiLfpnaLmnb/nmoTkuIDkupvlm77ooajnrYkgKjIwMTgxMDEyCiAgICAgICAgICAgICAgICBjc3NUZXh0ICs9ICcuaWNvbl90YndvcmxkIHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9IC51c2VyX3Njb3Jle2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvL+S4quS6uuS4u+mhteeyvueugAogICAgICAgIGlmIChob21lUHJvY2Vzcyl7CiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJ0aWViYS5iYWlkdS5jb20vaG9tZSIpICE9PSAtMSl7CiAgICAgICAgICAgICAgICAvL+WPs+S+p+ekvOeJqemdouadvwogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAiLmlob21lLWFzaWRlLWdpZnQtY2VudGVyIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnR9IjsKICAgICAgICAgICAgICAgIC8v5rGC5ama5oyJ6ZKuCiAgICAgICAgICAgICAgICBjc3NUZXh0ICs9ICIudXNlcmluZm8tbWFycnkge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudH0iOwogICAgICAgICAgICAgICAgLy/miJHnmoTlpLrlrp0KICAgICAgICAgICAgICAgIGNzc1RleHQgKz0gIi5paG9tZS1hc2lkZS1ncmFiLXRyZWFzdXJlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnR9IjsKICAgICAgICAgICAgICAgIC8v5oiR55qEVOixhuOAgeiTnemSuwogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAiLnVzZXJpbmZvX3Njb3JlcyB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50fSI7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8v5YiX6KGo6aG15aS05Zu+57K+566ACiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoInRpZWJhLmJhaWR1LmNvbS9mIikgIT09IC0xKXsKICAgICAgICAgICAgaWYgKGlzSGVhZGltZyl7CiAgICAgICAgICAgICAgICBjc3NUZXh0ICs9ICIuaGVhZF9iYW5uZXJfaW1nLC5oZWFkX2FkX3BvcCwuaGVhZF9iYW5uZXIge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudH0iOwogICAgICAgICAgICAgICAgLy/pobbpg6hjc3PosIPmlbQgKjIwMTcxMjIzCiAgICAgICAgICAgICAgICBjc3NUZXh0ICs9ICcuaGVhZF9jb250ZW50IHtwYWRkaW5nLXRvcDoyMHB4ICFpbXBvcnRhbnR9JzsKICAgICAgICAgICAgICAgIGNzc1RleHQgKz0gJy5jYXJkX2Jhbm5lciwucGxhdF9yZWNvbV9jYXJvdXNlbCB7ZGlzcGxheTpub25lICFpbXBvcnRhbnR9JzsKICAgICAgICAgICAgICAgIGNzc1RleHQgKz0gJy5jYXJkX2hlYWQge3dpZHRoOjcwcHggIWltcG9ydGFudDtoZWlnaHQ6NzBweCAhaW1wb3J0YW50O21hcmdpbi1ib3R0b206MTBweCAhaW1wb3J0YW50O21hcmdpbi10b3A6MTAwcHggIWltcG9ydGFudH0nOwogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAnLmNhcmRfaGVhZF9pbWcge3dpZHRoOjcwcHggIWltcG9ydGFudDtoZWlnaHQ6NzBweCAhaW1wb3J0YW50O30nOwogICAgICAgICAgICAgICAgY3NzVGV4dCArPSAnLmNhcmRfdGl0bGUge21hcmdpbi1sZWZ0Oi01MHB4ICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgICAgICBjc3NUZXh0ICs9ICcuY2FyZF9zbG9nYW4ge21hcmdpbi1sZWZ0Oi01MHB4ICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8v6K6+572u6Z2i5p2/Y3NzCiAgICAgICAgY3NzVGV4dCArPSAnI2JhY2tydW5uZXJKU1NldHRpbmdfcm9vdCB7cmlnaHQ6MCAhaW1wb3J0YW50O30gI2JhY2tydW5uZXJKU1NldHRpbmdfY29uIHtyaWdodDowICFpbXBvcnRhbnQ7d2lkdGg6MjAwcHggaW1wb3J0YW50O30nOwogICAgICAgIGNzc1RleHQgKz0gJyNiYWNrcnVubmVySlNTZXR0aW5nX2NvbiBhIHtkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnQ7d2hpdGUtc3BhY2U6bm93cmFwOyAhaW1wb3J0YW50fSc7CiAgICAgICAgY3NzVGV4dCArPSAnI2JhY2tydW5uZXJKU1NldHRpbmdfY29uIGxpIHtsaW5lLWhlaWdodDoyM3B4ICFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O3doaXRlLXNwYWNlOm5vd3JhcCAhaW1wb3J0YW50O30nOwogICAgICAgIGNzc1RleHQgKz0gJyNiYWNrcnVubmVySlNTZXR0aW5nX2NvbiBsaSBhIHtwYWRkaW5nLXRvcDowcHggIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTowcHggIWltcG9ydGFudDtwYWRkaW5nLXJpZ2h0OjFlbSAhaW1wb3J0YW50O3BhZGRpbmctbGVmdDoxZW0gIWltcG9ydGFudDttYXJnaW46MCAhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjIuNGVtICFpbXBvcnRhbnQ7fSc7CiAgICAgICAgY3NzVGV4dCArPSAnLnNlYXJjaF9uYXYge21hcmdpbi1yaWdodDo0NzBweCAhaW1wb3J0YW50O30nOwoKICAgICAgICAvL3JldmVyc2Xnm7jlhbNjc3MgKjIwMTcxMjIzCiAgICAgICAgY3NzVGV4dCArPSAnLmJyX3JldmVyc2VfbGkge2Rpc3BsYXk6aW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MTVweCAhaW1wb3J0YW50O21hcmdpbi10b3A6LTE0cHggIWltcG9ydGFudDt9JzsKICAgICAgICBjc3NUZXh0ICs9ICcuY29yZV90aXRsZV90eHQge3dpZHRoOjQwMHB4ICFpbXBvcnRhbnQ7fSc7CgogICAgICAgIC8v5bqV6YOo5L+h5oGvY3NzCiAgICAgICAgY3NzVGV4dCArPSAnI2Zvb3RlciB7cGFkZGluZy1ib3R0b206MHB4ICFpbXBvcnRhbnQ7fSc7CgogICAgICAgIGNvbnNvbGUubG9nKCfotLTlkKfpobXpnaLnsr7nroA6IGNzc+WIm+W7uuWujOaIkCcpOwoKICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsKICAgICAgICBlbGVtZW50LnJlbD0ic3R5bGVzaGVldCI7CiAgICAgICAgZWxlbWVudC50eXBlPSJ0ZXh0L2NzcyI7CiAgICAgICAgZWxlbWVudC5ocmVmPSdkYXRhOnRleHQvY3NzLCcrY3NzVGV4dDsKCiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpOwoKICAgICAgICB2YXIgbW9kU3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kQ1NTJyk7CiAgICAgICAgaWYgKG1vZFN0eWxlID09PSBudWxsKXsKICAgICAgICAgICAgbW9kU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICBtb2RTdHlsZS5pZCA9ICdtb2RDU1MnOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZFN0eWxlKTsKICAgICAgICAgICAgbW9kU3R5bGUuaW5uZXJIVE1MID0gY3NzVGV4dDsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coJ+i0tOWQp+mhtemdoueyvueugDogY3Nz5bey5re75YqgJyk7CiAgICB9CiAgICAvL+WIl+ihqOe/u+mhteebkeWQrAogICAgZnVuY3Rpb24gYWRkTGlzdGVuZXJUb0xpc3QoKXsKICAgICAgICAkKCcjZnJzX2xpc3RfcGFnZXIgYScpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsbGlzdFBhZ2VUdXJuRXZlbnQpOwogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCfotLTlkKfpobXpnaLnsr7nroA6IOWIl+ihqOe/u+mhteebkeWQrOa3u+WKoOWujOavlScpOwogICAgfQogICAgLy/luJblrZDjgIHnsr7lk4Hnv7vpobXnm5HlkKwKICAgIGZ1bmN0aW9uIGFkZExpc3RlbmVyVG9OYXYoKXsKICAgICAgICAkKCcubmF2X2xpc3QgbGknKS5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmKHRoaXMuYXR0cmlidXRlc1snZGF0YS10YWItbWFpbiddIHx8IHRoaXMuYXR0cmlidXRlc1snZGF0YS10YWItZ29vZCddKXsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsbGlzdFBhZ2VUdXJuRXZlbnQpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CiAgICAvL+WIl+ihqOe/u+mhteebkeWQrOS6i+S7tgogICAgZnVuY3Rpb24gbGlzdFBhZ2VUdXJuRXZlbnQoKXsKICAgICAgICBjb25zb2xlLndhcm4oJ+i0tOWQp+mhtemdoueyvueugDog5YiX6KGo57+76aG15LqL5Lu26Kem5Y+RJyk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjayxzbGVlcFRpbWVXaGVuUGFnZVR1cm4gKiBjaGVja3JhdGUpOwogICAgICAgICAgICBmdW5jdGlvbiBjaGVjaygpewogICAgICAgICAgICAgICAgYWRkTGlzdGVuZXJUb05hdigpOwogICAgICAgICAgICAgICAgYWRkTGlzdGVuZXJUb0xpc3QoKTsKICAgICAgICAgICAgICAgIGFkaW5MaXN0Q2xlYW4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBhZGRMaXN0ZW5lclRvTmF2KCk7CiAgICAgICAgICAgICAgICBhZGRMaXN0ZW5lclRvTGlzdCgpOwogICAgICAgICAgICAgICAgYWRpbkxpc3RDbGVhbigpOwogICAgICAgICAgICB9LHNsZWVwVGltZSk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyVG9OYXYoKTsKICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyVG9MaXN0KCk7CiAgICAgICAgICAgICAgICBhZGluTGlzdENsZWFuKCk7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTsKICAgICAgICAgICAgfSxmaW5pc2hUaW1lLzMpOwogICAgICAgIH0sc2xlZXBUaW1lV2hlblBhZ2VUdXJuKTsKICAgIH0KICAgIGZ1bmN0aW9uIGFkZExpc3RlbmVyVG9QYWdlKCl7CiAgICAgICAgJCgnLmxfcGFnZXIgYScpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscGFnZVR1cm5FdmVudCk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coJ+i0tOWQp+mhtemdoueyvueugDog5biW5a2Q57+76aG155uR5ZCs5re75Yqg5a6M5q+VJyk7CiAgICB9CiAgICBmdW5jdGlvbiBwYWdlVHVybkV2ZW50KCl7CiAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOW4luWtkOe/u+mhteS6i+S7tuinpuWPkScpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoY2hlY2ssc2xlZXBUaW1lV2hlblBhZ2VUdXJuICogY2hlY2tyYXRlKTsKICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2soKXsKICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyVG9OYXYoKTsKICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyVG9QYWdlKCk7CiAgICAgICAgICAgICAgICBhZGluUGFnZUNsZWFuKCk7CiAgICAgICAgICAgICAgICB0cG9pbnRBRENsZWFuKCk7CiAgICAgICAgICAgICAgICByZXZlcnNlb3JkZXIoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBhZGRMaXN0ZW5lclRvTmF2KCk7CiAgICAgICAgICAgICAgICBhZGRMaXN0ZW5lclRvUGFnZSgpOwogICAgICAgICAgICAgICAgYWRpblBhZ2VDbGVhbigpOwogICAgICAgICAgICAgICAgdHBvaW50QURDbGVhbigpOwogICAgICAgICAgICAgICAgcmV2ZXJzZW9yZGVyKCk7CiAgICAgICAgICAgIH0sc2xlZXBUaW1lKTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgYWRkTGlzdGVuZXJUb05hdigpOwogICAgICAgICAgICAgICAgYWRkTGlzdGVuZXJUb1BhZ2UoKTsKICAgICAgICAgICAgICAgIGFkaW5QYWdlQ2xlYW4oKTsKICAgICAgICAgICAgICAgIHRwb2ludEFEQ2xlYW4oKTsKICAgICAgICAgICAgICAgIHJldmVyc2VvcmRlcigpOwogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgICAgICAgICAgIH0sZmluaXNoVGltZS8zKTsKICAgICAgICB9LHNsZWVwVGltZVdoZW5QYWdlVHVybik7CiAgICB9CiAgICAvL+inpueCueaOqOW5vwogICAgZnVuY3Rpb24gdHBvaW50QURDbGVhbigpewogICAgICAgIGNvbnNvbGUubG9nKCfotLTlkKfpobXpnaLnsr7nroA6IOW8gOWni+eyvueugOinpueCueaOqOW5vycpOwogICAgICAgIHZhciBwb2ludGFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndHBvaW50LWltZ3MnKTsKICAgICAgICBjb25zb2xlLmxvZygn6LS05ZCn6aG16Z2i57K+566AOiDmipPlj5bliLDnmoTlub/lkYrlhYPntKDmlbDph486ICcrcG9pbnRhZC5sZW5ndGgpOwogICAgICAgIGZvcih2YXIgaT0wO2k8cG9pbnRhZC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgcG9pbnRhZFtpXS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwb2ludGFkW2ldLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCfotLTlkKfpobXpnaLnsr7nroA6IOinpueCueaOqOW5v+eyvueugOWujOavlScpOwogICAgfQoKICAgIC8v5YiX6KGo5YaF5bm/5ZGKCiAgICBmdW5jdGlvbiBhZGluTGlzdENsZWFuKCl7CiAgICAgICAgY29uc29sZS5sb2coJ+i0tOWQp+mhtemdoueyvueugDog5byA5aeL57K+566A5YiX6KGo5YaF5bm/5ZGKJyk7CiAgICAgICAgdmFyIGFkaW5MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGhyZWFkbGlzdF9yZXBfbnVtJyk7CiAgICAgICAgdmFyIG51bSA9IDA7CiAgICAgICAgY29uc29sZS5sb2coJ+i0tOWQp+mhtemdoueyvueugDog5YiX6KGo5YaF5YWD57Sg5oqT5Y+W6YePOiAnK2FkaW5MaXN0Lmxlbmd0aCk7CiAgICAgICAgZm9yICh2YXIgaT0wO2k8YWRpbkxpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIGlmIChhZGluTGlzdFtpXS50aXRsZSA9PT0gIuW5v+WRiiIgfHwgYWRpbkxpc3RbaV0udGl0bGUgPT09ICLng63pl6giKXsKICAgICAgICAgICAgICAgIG51bSsrOwogICAgICAgICAgICAgICAgYWRpbkxpc3RbaV0ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhZGluTGlzdFtpXS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coJ+i0tOWQp+mhtemdoueyvueugDog5YiX6KGo5YaF5bm/5ZGK57K+566A5a6M5q+V77yM5YWx57K+566AICcrIG51bSArICcg5LiqJyk7CiAgICAgICAgLy/mlrDlop7moLnmja5jbGFzc+i/h+a7pAogICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RocmVhZF9saXN0JykuY2hpbGRyZW47CiAgICAgICAgZm9yIChpPTA7aTxsaXN0Lmxlbmd0aDtpKyspewogICAgICAgICAgICB2YXIgY2xhc3NOYW1lPWxpc3RbaV0uZ2V0QXR0cmlidXRlKCdjbGFzcycpOwogICAgICAgICAgICBpZiAoY2xhc3NOYW1lICE9IG51bGwpewogICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0uZ2V0QXR0cmlidXRlKCdjbGFzcycpLmluZGV4T2YoJ3RocmVhZF90b3BfbGlzdF9mb2xkZXInKT09LTEgJiYgbGlzdFtpXS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykuaW5kZXhPZignal90aHJlYWRfbGlzdCcpPT0tMSl7CiAgICAgICAgICAgICAgICAgICAgbGlzdFtpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxpc3RbaV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCfotLTlkKfpobXpnaLnsr7nroA6IOaJq+aPj+WIl+ihqOeyvueugOWFtuS7luW5v+WRiicpOwogICAgICAgIC8v5riF55CG5peg55SodGFiICoyMDE4MTAxMgogICAgICAgIHZhciB0YWJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgial90Ym5hdl90YWJfYSIpOwogICAgICAgIGZvciAoaT0wO2k8dGFicy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgaWYgKHRhYnNbaV0uaW5uZXJIVE1MLmluZGV4T2YoIuebtOaSrSIpICE9IC0xKXsKICAgICAgICAgICAgICAgIHRhYnNbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YWJzW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGFic1tpXS5pbm5lckhUTUwuaW5kZXhPZigi5bqU55SoIikgIT0gLTEpewogICAgICAgICAgICAgICAgdGFic1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRhYnNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8v6LS05YaF5bm/5ZGKCiAgICBmdW5jdGlvbiBhZGluUGFnZUNsZWFuKCl7CiAgICAgICAgY29uc29sZS5sb2coJ+i0tOWQp+mhtemdoueyvueugDog5byA5aeL57K+566A6LS05YaF5bm/5ZGKJyk7CiAgICAgICAgdmFyIGFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaWZyYW1lX3dyYXBwZXInKTsKICAgICAgICBjb25zb2xlLmxvZygn6LS05ZCn6aG16Z2i57K+566AOiDmipPlj5bliLDnmoTlub/lkYrlhYPntKDmlbDph486ICcrYWQubGVuZ3RoKTsKICAgICAgICBmb3IodmFyIGk9MDtpPGFkLmxlbmd0aDtpKyspewogICAgICAgICAgICBhZFtpXS5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWRbaV0ucGFyZW50Tm9kZSk7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCfotLTlkKfpobXpnaLnsr7nroA6IOi0tOWGheW5v+WRiueyvueugOWujOavlScpOwogICAgICAgIC8v6LS05YaF5o+S5YWl5bm/5ZGKCiAgICAgICAgdmFyIHBsdXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkX25hbWUnKTsKICAgICAgICBmb3IgKGk9MDtpPHBsdXMubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIHZhciBkYXQgPSBwbHVzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1maWVsZCcpOwogICAgICAgICAgICBpZighZGF0IHx8ICFkYXQucmVwbGFjZSgvXHMvZywnJykpewogICAgICAgICAgICAgICAgcGx1c1tpXS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBsdXNbaV0ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8v5YWN55m75b2V55yL5biWCiAgICBmdW5jdGlvbiBub0xvZ2luKCl7CiAgICAgICAgdHJ5ewogICAgICAgICAgICB2YXIgbG9naW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICAgICAgbG9naW4uaW5uZXJIVE1MPSJQYWdlRGF0YS51c2VyLmlzX2xvZ2luID0gdHJ1ZSI7CiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobG9naW4pOwogICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i0tOWQp+mhtemdoueyvueugDog5YWN55m75b2V55yL5biW5Yqg6L296ZSZ6K+vJyk7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8v5pu05paw5o+Q6YaSCiAgICBmdW5jdGlvbiB1cGRhdGVBbGVydCgpewogICAgICAgIHZhciBzX3VwZGF0ZSA9ICLotLTlkKfpobXpnaLnsr7nroDvvJpcbuajgOa1i+WIsOiEmuacrOeJiOacrOabtOaUuVxuXG4iOwogICAgICAgIHZhciB2ZXJzaW9uID0gR01fZ2V0VmFsdWUoInZlcnNpb24iKTsKICAgICAgICBpZiAodmVyc2lvbiAhPT0gR01faW5mby5zY3JpcHQudmVyc2lvbil7CiAgICAgICAgICAgIGNvbnNvbGUud2Fybigi6LS05ZCn6aG16Z2i57K+566A77ya5qOA5rWL5Yiw6ISa5pys54mI5pys5pu05pS577yaIiArIHZlcnNpb24gKyAiIOKGkiAiICsgR01faW5mby5zY3JpcHQudmVyc2lvbik7CiAgICAgICAgICAgIGlmICh2ZXJzaW9uID09PSB1bmRlZmluZWQpewogICAgICAgICAgICAgICAgdmVyc2lvbiA9ICLmnKrnn6UiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN3aXRjaCAodmVyc2lvbil7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIC8v54mI5pys5pu05paw5pe25Yig6Zmk5bqf5byD5Y+Y6YePCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlVHJhc2hWYWx1ZSgpOwogICAgICAgICAgICAgICAgICAgIHNfdXBkYXRlICs9ICLniYjmnKzlt7Lku44gIiArIHZlcnNpb24gKyAiIOabtOaWsOS4uiAiICsgR01faW5mby5zY3JpcHQudmVyc2lvbiArICJcblxuIiArIEdNX2luZm8uc2NyaXB0LnZlcnNpb24gKyAi54mI5pys55qE5pu05paw5YaF5a655Li677yaXG7kv67lpI3lr7nmlrDniYhDaHJvbWXnmoTlhbzlrrnmgKfpl67popjjgIJcblxu5aaC5p6c6YGH5YiwQnVn6K+35Y+K5pe25o+Q5Lqk5Y+N6aaI77yM5oSf6LCi44CCXG5cbuOAkOmHjeimgeaPkOmGku+8geW/heeci++8geOAkVxu5aaC5p6c5oKo5rKh5pyJ5a6J6KOFQWRibG9ja++8jOivt+WuieijhUFkYmxvY2vku6XojrflvpfmnIDkvbPkvZPpqoxcblxu55Sx5LqO6L+Z5Liq6ISa5pys5bey57uP5q+U6L6D56iz5a6a77yM5ZCO57ut5Y+q5L+u5aSNQnVn5ZKM5qC55o2u6LS05ZCn55qE5Y+Y5YyW5re76KGl5paw5Yqf6IO9XG4iOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAi5pyq55+lIjoKICAgICAgICAgICAgICAgICAgICBzX3VwZGF0ZSArPSAi5qyi6L+O5L2/55So6LS05ZCn6aG16Z2i57K+566A6ISa5pysXG7mgqjlvZPliY3nmoTohJrmnKzniYjmnKzkuLrvvJogIiArIHZlcnNpb24gKyAiXG5cbuOAkOWFs+S6juiuvue9ruOAkVxu5oKo5Y+v5Lul6YCa6L+H5Y+z5LiK6KeS55qE6K6+572u6Z2i5p2/6K6+572u55u45YWz5Yqf6IO95Lul6I635b6X5pyA5L2z5L2T6aqMXG5cbuOAkOmHjeimgeaPkOmGku+8geW/heeci++8geOAkVxu5aaC5p6c5oKo5rKh5pyJ5a6J6KOFQWRibG9ja++8jOivt+WuieijhUFkYmxvY2vku6XojrflvpfmnIDkvbPkvZPpqoxcblxu55Sx5LqO6L+Z5Liq6ISa5pys5bey57uP5q+U6L6D56iz5a6a77yM5ZCO57ut5Y+q5L+u5aSNQnVn5ZKM5qC55o2u6LS05ZCn55qE5Y+Y5YyW5re76KGl5paw5Yqf6IO9XG4iOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAiMi44LjAiOgogICAgICAgICAgICAgICAgICAgIHNfdXBkYXRlICs9ICLniYjmnKzlt7Lku44gIiArIHZlcnNpb24gKyAiIOmZjee6p+S4uiAiICsgR01faW5mby5zY3JpcHQudmVyc2lvbiArICJcblxuIiArICLlu7rorq7kvb/nlKjmnIDmlrDniYjmnKznmoTohJrmnKzku6XojrflvpfmnIDkvbPkvZPpqoxcbumZjee6p+S8mumAoOaIkOaCqOeahOiuvue9ruS4ouWkse+8jOivt+ajgOafpeaCqOeahOiuvue9rlxuIjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBzX3VwZGF0ZSArPSAiXG7pgYfliLDku7vkvZXpl67popjor7fnq4vliLvliLBHcmVhc3lGb3Jr5Y+N6aaIXG7miJbogIXlj5HpgIHpgq7ku7boh7NkZXZAYmFja3J1bm5lci50b3BcbuWmguaenOaCqOinieW+l+acrOiEmuacrOWlveeUqOWPr+S9v+eUqOaUr+S7mOWuneaJq+aPj0dyZWFzeUZvcmvkuK3nmoTkuoznu7TnoIHmiJblupXpg6jotZ7liqnpk77mjqXkuK3nmoTkuoznu7TnoIHlkJHmiJHmjZDotaBcbuaUtuWIsOaCqOeahOaNkOi1oOWQjuaIkeS8muWwhuaCqOeahGlk5Yqg5YWl5Yiw5oSf6LCi5ZCN5Y2VXG7mhJ/osKLlkI3ljZXmmL7npLrlnKjov5nph4zlkozohJrmnKzmj4/ov7DlhoUiOwogICAgICAgICAgICBhbGVydChzX3VwZGF0ZSk7CiAgICAgICAgICAgIEdNX3NldFZhbHVlKCJ2ZXJzaW9uIixHTV9pbmZvLnNjcmlwdC52ZXJzaW9uKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLndhcm4oIui0tOWQp+mhtemdoueyvueugO+8muacquajgOa1i+WIsOiEmuacrOeJiOacrOabtOaUuSIpOwogICAgICAgIH0KICAgIH0KICAgIC8v5Yib5bu66aG25qCP5o6n5Yi26Z2i5p2/CiAgICBmdW5jdGlvbiBjcmVhdGVDb250cm9sUGFuZWwoKXsKICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JhY2tydW5uZXJKU1NldHRpbmdfcm9vdCcpID09PSBudWxsKXsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgLy91c2VyYmFy6I635Y+W5LiO5Li75bGC5Yib5bu6CiAgICAgICAgICAgICAgICB2YXIgdXNlcmJhciA9ICQoJyNjb21fdXNlcmJhcicpLmNoaWxkcmVuKCd1bCcpWzBdOwogICAgICAgICAgICAgICAgdmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwoKICAgICAgICAgICAgICAgIC8v5Li75bGC6K6+572uCiAgICAgICAgICAgICAgICBhLmlubmVySFRNTCA9ICLohJrmnKzorr7nva4iOwoKICAgICAgICAgICAgICAgIC8v5Li75bGC5LqL5Lu2CiAgICAgICAgICAgICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsY3BPbk1vdXNlRW50ZXIpOwogICAgICAgICAgICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGNwT25Nb3VzZUxlYXZlKTsKCiAgICAgICAgICAgICAgICAvL+iPnOWNleWxguWIm+W7ugogICAgICAgICAgICAgICAgdmFyIG1lbnVyb290ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICB2YXIgbWVudWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgdmFyIG1lbnVkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIG1lbnVyb290LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd1X2RkbCcpOwogICAgICAgICAgICAgICAgbWVudXJvb3Quc2V0QXR0cmlidXRlKCdpZCcsJ2JhY2tydW5uZXJKU1NldHRpbmdfcm9vdCcpOwogICAgICAgICAgICAgICAgbWVudWNvbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywndV9kZGxfY29uJyk7CiAgICAgICAgICAgICAgICBtZW51Y29uLnNldEF0dHJpYnV0ZSgnaWQnLCdiYWNrcnVubmVySlNTZXR0aW5nX2NvbicpOwogICAgICAgICAgICAgICAgbWVudWRpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywndV9kZGxfY29uX3RvcCcpOwogICAgICAgICAgICAgICAgbWVudWRpdi5zZXRBdHRyaWJ1dGUoJ2lkJywnYmFja3J1bm5lckpTU2V0dGluZ19tYWluJyk7CiAgICAgICAgICAgICAgICBtZW51Y29uLmFwcGVuZENoaWxkKG1lbnVkaXYpOwogICAgICAgICAgICAgICAgbWVudXJvb3QuYXBwZW5kQ2hpbGQobWVudWNvbik7CgogICAgICAgICAgICAgICAgLy/oj5zljZXlsYLkuovku7YKICAgICAgICAgICAgICAgIG1lbnVyb290LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLGNwT25Nb3VzZUVudGVyKTsKICAgICAgICAgICAgICAgIG1lbnVyb290LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGNwT25Nb3VzZUxlYXZlKTsKCiAgICAgICAgICAgICAgICAvL+iPnOWNleWIl+ihqOWIm+W7ugogICAgICAgICAgICAgICAgdmFyIG1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1aScpOwogICAgICAgICAgICAgICAgLy8wOuaWh+acrOahhiAxOuWkjemAieahhiAyOuaMiemSrgogICAgICAgICAgICAgICAgY3JlYXRlTWVudUl0ZW0obWVudSwxLCJwb3N0cHJvY2VzcyIsIuWQjuWkhOeQhuiEmuacrCIsIiIpOwogICAgICAgICAgICAgICAgY3JlYXRlTWVudUl0ZW0obWVudSwxLCJpc1JlZGlyZWN0Iiwi6YeN5a6a5ZCRIiwiIik7CiAgICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbShtZW51LDEsImhvbWVwYWdlcHJvY2VzcyIsIuS4u+mhteeyvueugCIsIiIpOwogICAgICAgICAgICAgICAgY3JlYXRlTWVudUl0ZW0obWVudSwxLCJpc0hlYWRpbWciLCLnsr7nroDliJfooajpobXlpLTlm74iLCIiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMSwiZGlzcGxheUxpdmUiLCLmmK/lkKbmmL7npLrnm7Tmkq3luJYiLCIiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMSwiZGlzcGxheVNpZ24iLCLmmK/lkKbmmL7npLrnlKjmiLfnrb7lkI3moaMiLCIiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMSwiYXV0b0Nsb3NlR3VpZGUiLCLoh6rliqjmlLbotbfmjIflvJUiLCIiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMSwiaG9tZVByb2Nlc3MiLCLkuKrkurrkuLvpobXnsr7nroAiLCIiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMSwiZ3JvdXBwcm9jZXNzIiwi576k57uE6aG16Z2i57K+566AIiwiIik7CiAgICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbShtZW51LDEsIm5vbG9naW4iLCLlhY3nmbvlvZXnnIvluJYiLCIiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMSwicmV2ZXJzZSIsIuWAkuW6j+eci+W4lu+8iOWunumqjOaAp++8iSIsIiIpOwogICAgICAgICAgICAgICAgY3JlYXRlTWVudUl0ZW0obWVudSwwLCJzbGVlcFRpbWUiLCLkuLvohJrmnKzlu7bov5/ml7bpl7QiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMCwiZGVsYXlTY3JpcHRSdW5UaW1lcyIsIuW7tui/n+iEmuacrOaJp+ihjOasoeaVsCIsIiIpOwogICAgICAgICAgICAgICAgY3JlYXRlTWVudUl0ZW0obWVudSwwLCJzbGVlcFRpbWVQYWdlIiwi57+76aG16ISa5pys5bu26L+f5pe26Ze0IiwiIik7CiAgICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbShtZW51LDAsInJldmVyc2VTbGVlcFRpbWUiLCLlgJLluo/mn6XnnIvohJrmnKzlu7bov5/ml7bpl7QiLCIiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMCwiY2hlY2tyYXRlIiwi6ISa5pys5bu26L+f5pe26Ze05YCN546HIiwiIik7CiAgICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbShtZW51LDIsInJlZnJlc2giLCLliLfmlrDpobXpnaIiLCLliLfmlrAiKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKG1lbnUsMiwic3VibWl0Iiwi5o+Q5Lqk6K6+572uIiwi5o+Q5LqkIik7CiAgICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbShtZW51LDIsInJlc2V0Iiwi6YeN572u6K6+572uIiwi6YeN572uIik7CiAgICAgICAgICAgICAgICBtZW51ZGl2LmFwcGVuZENoaWxkKG1lbnUpOwoKICAgICAgICAgICAgICAgIC8v6I+c5Y2V5YWl5Y+jCiAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3VfbWVudV9pdGVtJyk7CiAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdpZCcsJ2JhY2tydW5uZXJKU1NldHRpbmdfaXRlbScpOwogICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICAgICAgICAgIGxpLmFwcGVuZENoaWxkKG1lbnVyb290KTsKICAgICAgICAgICAgICAgIHVzZXJiYXIuYXBwZW5kQ2hpbGQobGkpOwoKICAgICAgICAgICAgICAgIC8v6I+c5Y2V5YaF5a655Yid5aeL5YyWCiAgICAgICAgICAgICAgICBtZW51SW5pdGlhbGl6ZSgpOwoKICAgICAgICAgICAgICAgIC8v6I+c5Y2V5YaF5LqL5Lu25Yib5bu6CiAgICAgICAgICAgICAgICBjcmVhdGVNZW51RXZlbnQoKTsKICAgICAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ+i0tOWQp+mhtemdoueyvueugDog5o6n5Yi26Z2i5p2/5bey5a2Y5ZyoJyk7CiAgICAgICAgfQogICAgfQogICAgLy/oj5zljZXpobnliJvlu7oKICAgIGZ1bmN0aW9uIGNyZWF0ZU1lbnVJdGVtKG1lbnUsdHlwZSxpZCxsYWJlbENvbnRlbnQsaW5uZXJDb250ZW50KXsKICAgICAgICAvL+WxguWIm+W7ugogICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHZhciBkX2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICB2YXIgZF9pID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgLy/lsYLorr7nva4KICAgICAgICBkX2Euc2V0QXR0cmlidXRlKCdzdHlsZScsJ2Zsb2F0OmxlZnQ7d2lkdGg6MTUwcHgnKTsKICAgICAgICBzd2l0Y2godHlwZSl7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRfaS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywncGFkZGluZy10b3A6N3B4O3BhZGRpbmctbGVmdDoxNTBweDtwYWRkaW5nLXJpZ2h0OjEwcHg7Jyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgZF9pLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCdwYWRkaW5nLXRvcDo4cHg7cGFkZGluZy1sZWZ0OjE5MnB4O3BhZGRpbmctcmlnaHQ6MTBweDsnKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBkX2kuc2V0QXR0cmlidXRlKCdzdHlsZScsJ3BhZGRpbmctdG9wOjZweDtwYWRkaW5nLWxlZnQ6MTUwcHg7cGFkZGluZy1yaWdodDoxMHB4OycpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8v5YWD57Sg5Yib5bu6CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgdmFyIGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgIC8v5YWD57Sg6K6+572uCiAgICAgICAgYS5pbm5lckhUTUwgPSBsYWJlbENvbnRlbnQ7CiAgICAgICAgc3dpdGNoKHR5cGUpewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCd3aWR0aDo1MHB4O3RleHQtYWxpZ246cmlnaHQnKTsKICAgICAgICAgICAgICAgIGkuc2V0QXR0cmlidXRlKCdpZCcsJ2JhY2tydW5uZXJfaV8nK2lkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAvL+WkjemAieahhgogICAgICAgICAgICAgICAgaS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCdjaGVja2JveCcpOwogICAgICAgICAgICAgICAgaS5zZXRBdHRyaWJ1dGUoJ2lkJywnYmFja3J1bm5lcl9pXycraWQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIC8v5oyJ6ZKuCiAgICAgICAgICAgICAgICBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICBpLmlubmVySFRNTCA9IGlubmVyQ29udGVudDsKICAgICAgICAgICAgICAgIGkuc2V0QXR0cmlidXRlKCdzdHlsZScsJ3dpZHRoOjUycHgnKTsKICAgICAgICAgICAgICAgIGkuc2V0QXR0cmlidXRlKCdpZCcsJ2JhY2tydW5uZXJfYnRuXycraWQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICAvL+WFg+e0oOa3u+WKoOWIsOWxggogICAgICAgIGRfYS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBkX2kuYXBwZW5kQ2hpbGQoaSk7CiAgICAgICAgLy/lhYPntKDlsYLmt7vliqDliLDkuLvlsYIKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZF9hKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZF9pKTsKICAgICAgICAvL+S4u+Wxgua3u+WKoOWIsGxpCiAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICAvL2xp5re75Yqg5YiwbWVudQogICAgICAgIG1lbnUuYXBwZW5kQ2hpbGQobGkpOwogICAgfQogICAgLy/oj5zljZXliJ3lp4vljJYKICAgIGZ1bmN0aW9uIG1lbnVJbml0aWFsaXplKCl7CiAgICAgICAgbWVudUluaXRpYWxpemVfY2hlY2tib3goJ3Bvc3Rwcm9jZXNzJyxwb3N0cHJvY2Vzcyk7CiAgICAgICAgbWVudUluaXRpYWxpemVfY2hlY2tib3goJ2lzUmVkaXJlY3QnLGlzUmVkaXJlY3QpOwogICAgICAgIG1lbnVJbml0aWFsaXplX2NoZWNrYm94KCdob21lcGFnZXByb2Nlc3MnLGhvbWVQYWdlUHJvY2Vzcyk7CiAgICAgICAgbWVudUluaXRpYWxpemVfY2hlY2tib3goJ2hvbWVQcm9jZXNzJyxob21lUHJvY2Vzcyk7CiAgICAgICAgbWVudUluaXRpYWxpemVfY2hlY2tib3goJ2lzSGVhZGltZycsaXNIZWFkaW1nKTsKICAgICAgICBtZW51SW5pdGlhbGl6ZV9jaGVja2JveCgnZ3JvdXBwcm9jZXNzJyxncm91cFBhZ2VQcm9jZXNzKTsKICAgICAgICBtZW51SW5pdGlhbGl6ZV9jaGVja2JveCgnbm9sb2dpbicsbm9Mb2dpblByb2Nlc3MpOwogICAgICAgIG1lbnVJbml0aWFsaXplX2NoZWNrYm94KCdyZXZlcnNlJyxyZXZlcnNlKTsKICAgICAgICBtZW51SW5pdGlhbGl6ZV9jaGVja2JveCgnZGlzcGxheUxpdmUnLGRpc3BsYXlMaXZlKTsKICAgICAgICBtZW51SW5pdGlhbGl6ZV9jaGVja2JveCgnZGlzcGxheVNpZ24nLGRpc3BsYXlTaWduKTsKICAgICAgICBtZW51SW5pdGlhbGl6ZV9jaGVja2JveCgnYXV0b0Nsb3NlR3VpZGUnLGF1dG9DbG9zZUd1aWRlKTsKICAgICAgICBtZW51SW5pdGlhbGl6ZV9pbnB1dCgnc2xlZXBUaW1lJyxzbGVlcFRpbWUpOwogICAgICAgIG1lbnVJbml0aWFsaXplX2lucHV0KCdkZWxheVNjcmlwdFJ1blRpbWVzJyxkZWxheVNjcmlwdFJ1blRpbWVzKTsKICAgICAgICBtZW51SW5pdGlhbGl6ZV9pbnB1dCgnc2xlZXBUaW1lUGFnZScsc2xlZXBUaW1lV2hlblBhZ2VUdXJuKTsKICAgICAgICBtZW51SW5pdGlhbGl6ZV9pbnB1dCgncmV2ZXJzZVNsZWVwVGltZScscmV2ZXJzZVNsZWVwVGltZSk7CiAgICAgICAgbWVudUluaXRpYWxpemVfaW5wdXQoJ2NoZWNrcmF0ZScsY2hlY2tyYXRlKTsKICAgIH0KICAgIC8v6I+c5Y2VY2hlY2tib3jliJ3lp4vljJYKICAgIGZ1bmN0aW9uIG1lbnVJbml0aWFsaXplX2NoZWNrYm94KGlkLHZhcmlhYmxlKXsKICAgICAgICB2YXIgaSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWNrcnVubmVyX2lfJytpZCk7CiAgICAgICAgaWYgKGkgIT09IG51bGwpewogICAgICAgICAgICBpZiAodmFyaWFibGUpewogICAgICAgICAgICAgICAgaS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGkuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgLy/oj5zljZVpbnB1dOWIneWni+WMlgogICAgZnVuY3Rpb24gbWVudUluaXRpYWxpemVfaW5wdXQoaWQsdmFyaWFibGUpewogICAgICAgIHZhciBpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tydW5uZXJfaV8nK2lkKTsKICAgICAgICBpZiAoaSAhPT0gbnVsbCl7CiAgICAgICAgICAgIGkudmFsdWUgPSB2YXJpYWJsZTsKICAgICAgICB9CiAgICB9CgogICAgLy/oj5zljZXlhoXkuovku7bliJvlu7oKICAgIGZ1bmN0aW9uIGNyZWF0ZU1lbnVFdmVudCgpewogICAgICAgIHRyeXsKICAgICAgICAgICAgLy/liLfmlrAKICAgICAgICAgICAgdmFyIGJ0bl9yZWZyZXNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tydW5uZXJfYnRuX3JlZnJlc2gnKTsKICAgICAgICAgICAgaWYgKGJ0bl9yZWZyZXNoICE9PSBudWxsKXsKICAgICAgICAgICAgICAgIGJ0bl9yZWZyZXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxidG5fcmVmcmVzaF9jbGljayk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy/mj5DkuqQKICAgICAgICAgICAgdmFyIGJ0bl9zdWJtaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja3J1bm5lcl9idG5fc3VibWl0Jyk7CiAgICAgICAgICAgIGlmIChidG5fc3VibWl0ICE9PSBudWxsKXsKICAgICAgICAgICAgICAgIGJ0bl9zdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGJ0bl9zdWJtaXRfY2xpY2spOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8v6YeN572uCiAgICAgICAgICAgIHZhciBidG5fcmVzZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja3J1bm5lcl9idG5fcmVzZXQnKTsKICAgICAgICAgICAgaWYgKGJ0bl9yZXNldCAhPT0gbnVsbCl7CiAgICAgICAgICAgICAgICBidG5fcmVzZXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGJ0bl9yZXNldF9jbGljayk7CiAgICAgICAgICAgIH0KICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgfQogICAgfQogICAgLy/liLfmlrDmjInpkq7kuovku7YKICAgIGZ1bmN0aW9uIGJ0bl9yZWZyZXNoX2NsaWNrKCl7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgIH0KICAgIC8v5o+Q5Lqk5oyJ6ZKu5LqL5Lu2CiAgICBmdW5jdGlvbiBidG5fc3VibWl0X2NsaWNrKCl7CiAgICAgICAgcG9zdHByb2Nlc3MgPSBjb252ZXJ0Qm9vbFZhbHVlKCdwb3N0cHJvY2VzcycpOwogICAgICAgIGlzUmVkaXJlY3QgPSBjb252ZXJ0Qm9vbFZhbHVlKCdpc1JlZGlyZWN0Jyk7CiAgICAgICAgaG9tZVBhZ2VQcm9jZXNzID0gY29udmVydEJvb2xWYWx1ZSgnaG9tZXBhZ2Vwcm9jZXNzJyk7CiAgICAgICAgaG9tZVByb2Nlc3MgPSBjb252ZXJ0Qm9vbFZhbHVlKCdob21lUHJvY2VzcycpOwogICAgICAgIGlzSGVhZGltZyA9IGNvbnZlcnRCb29sVmFsdWUoJ2lzSGVhZGltZycpOwogICAgICAgIGRpc3BsYXlMaXZlID0gY29udmVydEJvb2xWYWx1ZSgnZGlzcGxheUxpdmUnKTsKICAgICAgICBkaXNwbGF5U2lnbiA9IGNvbnZlcnRCb29sVmFsdWUoJ2Rpc3BsYXlTaWduJyk7CiAgICAgICAgYXV0b0Nsb3NlR3VpZGUgPSBjb252ZXJ0Qm9vbFZhbHVlKCdhdXRvQ2xvc2VHdWlkZScpOwogICAgICAgIGdyb3VwUGFnZVByb2Nlc3MgPSBjb252ZXJ0Qm9vbFZhbHVlKCdncm91cHByb2Nlc3MnKTsKICAgICAgICBub0xvZ2luUHJvY2VzcyA9IGNvbnZlcnRCb29sVmFsdWUoJ25vbG9naW4nKTsKICAgICAgICByZXZlcnNlID0gY29udmVydEJvb2xWYWx1ZSgncmV2ZXJzZScpOwogICAgICAgIHNsZWVwVGltZSA9IGNvbnZlcnROdW1WYWx1ZSgnc2xlZXBUaW1lJyk7CiAgICAgICAgZGVsYXlTY3JpcHRSdW5UaW1lcyA9IGNvbnZlcnROdW1WYWx1ZSgnZGVsYXlTY3JpcHRSdW5UaW1lcycpOwogICAgICAgIHNsZWVwVGltZVdoZW5QYWdlVHVybiA9IGNvbnZlcnROdW1WYWx1ZSgnc2xlZXBUaW1lUGFnZScpOwogICAgICAgIHJldmVyc2VTbGVlcFRpbWUgPSBjb252ZXJ0TnVtVmFsdWUoJ3JldmVyc2VTbGVlcFRpbWUnKTsKICAgICAgICBjaGVja3JhdGUgPSBjb252ZXJ0TnVtVmFsdWUoJ2NoZWNrcmF0ZScpOwoKICAgICAgICBpZiAocG9zdHByb2Nlc3MpewogICAgICAgICAgICBpZiAod2luZG93LmNvbmZpcm0oJ+ehruiupOimgeabtOaUueiuvue9ru+8nycpKXsKICAgICAgICAgICAgICAgIHJlcGxhY2VTdG9yZWRTZXR0aW5ncygpOwogICAgICAgICAgICAgICAgbWVudUluaXRpYWxpemUoKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtZW51SW5pdGlhbGl6ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHdpbmRvdy5jb25maXJtKCfjgJDph43opoHjgJFcbuaCqOemgeeUqOS6huWQjuWkhOeQhuiEmuacrO+8jOacrOiEmuacrOe7neWkp+mDqOWIhuWKn+iDveWwhuaXoOazleS9v+eUqFxuXG7noa7orqTopoHmm7TmlLnorr7nva7vvJ8nKSl7CiAgICAgICAgICAgICAgICByZXBsYWNlU3RvcmVkU2V0dGluZ3MoKTsKICAgICAgICAgICAgICAgIG1lbnVJbml0aWFsaXplKCk7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWVudUluaXRpYWxpemUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGJ0bl9yZXNldF9jbGljaygpewogICAgICAgIGlmICh3aW5kb3cuY29uZmlybSgn56Gu6K6k6KaB6YeN572u6K6+572u77yfJykpewogICAgICAgICAgICBHTV9kZWxldGVWYWx1ZSgicG9zdHByb2Nlc3MiKTsKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUoImlzUmVkaXJlY3QiKTsKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUoInNsZWVwVGltZSIpOwogICAgICAgICAgICBHTV9kZWxldGVWYWx1ZSgiZGVsYXlTY3JpcHRSdW5UaW1lcyIpOwogICAgICAgICAgICBHTV9kZWxldGVWYWx1ZSgiZGlzcGxheUxpdmUiKTsKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUoImRpc3BsYXlTaWduIik7CiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJhdXRvQ2xvc2VHdWlkZSIpOwogICAgICAgICAgICBHTV9kZWxldGVWYWx1ZSgic2xlZXBUaW1lV2hlblBhZ2VUdXJuIik7CiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJyZXZlcnNlU2xlZXBUaW1lIik7CiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJob21lUGFnZVByb2Nlc3MiKTsKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUoImhvbWVQcm9jZXNzIik7CiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJpc0hlYWRpbWciKTsKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUoImdyb3VwUGFnZVByb2Nlc3MiKTsKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUoIm5vTG9naW5Qcm9jZXNzIik7CiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJyZXZlcnNlIik7CiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJjaGVja3JhdGUiKTsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgICAgICB9CiAgICB9CiAgICAvL+WwhuiPnOWNleS4reeahGJvb2zlgLzotYvnu5nlj5jph48KICAgIGZ1bmN0aW9uIGNvbnZlcnRCb29sVmFsdWUoaWQpewogICAgICAgIHZhciBpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tydW5uZXJfaV8nK2lkKTsKICAgICAgICBpZiAoaSAhPT0gbnVsbCl7CiAgICAgICAgICAgIGlmIChpLmNoZWNrZWQpewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvL+WwhuiPnOWNleS4reeahOaVsOWAvOi1i+e7meWPmOmHjwogICAgZnVuY3Rpb24gY29udmVydE51bVZhbHVlKGlkKXsKICAgICAgICB2YXIgaSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWNrcnVubmVyX2lfJytpZCk7CiAgICAgICAgaWYgKGkgIT09IG51bGwpewogICAgICAgICAgICByZXR1cm4ocGFyc2VGbG9hdChpLnZhbHVlKSk7CiAgICAgICAgfQogICAgfQogICAgLy/mjqfliLbpnaLmnb/pvKDmoIfkuovku7YKICAgIGZ1bmN0aW9uIGNwT25Nb3VzZUVudGVyKCl7CiAgICAgICAgdHJ5ewogICAgICAgICAgICB2YXIgY3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja3J1bm5lckpTU2V0dGluZ19yb290Jyk7CiAgICAgICAgICAgIGNwLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCdkaXNwbGF5OmJsb2NrO3JpZ2h0OjA7Jyk7CiAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBjcE9uTW91c2VMZWF2ZSgpewogICAgICAgIHRyeXsKICAgICAgICAgICAgdmFyIGNwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tydW5uZXJKU1NldHRpbmdfcm9vdCcpOwogICAgICAgICAgICBjcC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywnZGlzcGxheTpub25lO3JpZ2h0OjAnKTsKICAgICAgICB9IGNhdGNoKGUpewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgIH0KICAgIH0KCiAgICAvL+abv+aNouWCqOWtmOeahOiuvue9rgogICAgZnVuY3Rpb24gcmVwbGFjZVN0b3JlZFNldHRpbmdzKCl7CiAgICAgICAgR01fc2V0VmFsdWUoInBvc3Rwcm9jZXNzIixwb3N0cHJvY2Vzcyk7CiAgICAgICAgR01fc2V0VmFsdWUoImlzUmVkaXJlY3QiLGlzUmVkaXJlY3QpOwogICAgICAgIEdNX3NldFZhbHVlKCJzbGVlcFRpbWUiLHNsZWVwVGltZSk7CiAgICAgICAgR01fc2V0VmFsdWUoImRlbGF5U2NyaXB0UnVuVGltZXMiLGRlbGF5U2NyaXB0UnVuVGltZXMpOwogICAgICAgIEdNX3NldFZhbHVlKCJkaXNwbGF5TGl2ZSIsZGlzcGxheUxpdmUpOwogICAgICAgIEdNX3NldFZhbHVlKCJkaXNwbGF5U2lnbiIsZGlzcGxheVNpZ24pOwogICAgICAgIEdNX3NldFZhbHVlKCJhdXRvQ2xvc2VHdWlkZSIsYXV0b0Nsb3NlR3VpZGUpOwogICAgICAgIEdNX3NldFZhbHVlKCJzbGVlcFRpbWVXaGVuUGFnZVR1cm4iLHNsZWVwVGltZVdoZW5QYWdlVHVybik7CiAgICAgICAgR01fc2V0VmFsdWUoInJldmVyc2VTbGVlcFRpbWUiLHJldmVyc2VTbGVlcFRpbWUpOwogICAgICAgIEdNX3NldFZhbHVlKCJob21lUGFnZVByb2Nlc3MiLGhvbWVQYWdlUHJvY2Vzcyk7CiAgICAgICAgR01fc2V0VmFsdWUoImhvbWVQcm9jZXNzIixob21lUHJvY2Vzcyk7CiAgICAgICAgR01fc2V0VmFsdWUoImlzSGVhZGltZyIsaXNIZWFkaW1nKTsKICAgICAgICBHTV9zZXRWYWx1ZSgiZ3JvdXBQYWdlUHJvY2VzcyIsZ3JvdXBQYWdlUHJvY2Vzcyk7CiAgICAgICAgR01fc2V0VmFsdWUoIm5vTG9naW5Qcm9jZXNzIixub0xvZ2luUHJvY2Vzcyk7CiAgICAgICAgR01fc2V0VmFsdWUoInJldmVyc2UiLHJldmVyc2UpOwogICAgICAgIEdNX3NldFZhbHVlKCJjaGVja3JhdGUiLGNoZWNrcmF0ZSk7CiAgICB9CgogICAgLy/lupXpg6jkv6Hmga/ovpPlh7oKICAgIGZ1bmN0aW9uIGNyZWF0ZUZvb3RlckxheWVyKCl7CiAgICAgICAgdmFyIGZvb3REaXY7CiAgICAgICAgdmFyIGlkOwogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmFja3J1bm5lckpTRm9vdGVyJyk9PT1udWxsKXsKICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoInRpZWJhLmJhaWR1LmNvbS9mPyIpICE9PSAtMSl7CiAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgZm9vdERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zyc19jb250ZW50X2Zvb3Rlcl9wYWdlbGV0JylbMF07CiAgICAgICAgICAgICAgICAgICAgZm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgICAgIGlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgZm9vdC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnZm9vdGVyJyk7CiAgICAgICAgICAgICAgICAgICAgZm9vdC5zZXRBdHRyaWJ1dGUoJ2lkJywnZm9vdGVyJyk7CiAgICAgICAgICAgICAgICAgICAgZm9vdC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywncGFkZGluZy10b3A6MHB4ICFpbXBvcnRhbnQ7Jyk7CiAgICAgICAgICAgICAgICAgICAgaWQuc2V0QXR0cmlidXRlKCdpZCcsJ2JhY2tydW5uZXJKU0Zvb3RlcicpOwogICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZvb3RlckVsZW1lbnQoZm9vdCwi5bey5bqU55So55SxQmFja1J1bm5lcuWItuS9nOeahOi0tOWQp+eyvueugOiEmuacrCAoIisgR01faW5mby5zY3JpcHQudmVyc2lvbisiKSIsImh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8yMzY4NyIsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZvb3RlckVsZW1lbnQoZm9vdCwi5o2Q6LWg5L2c6ICFKOaUr+S7mOWuneS6jOe7tOeggSkiLCJodHRwczovL3NtYWxsZmlsZS5iYWNrcnVubmVyLnRvcC9pbWFnZXMvYWxpcGF5LmpwZyIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgZm9vdERpdi5hcHBlbmRDaGlsZChmb290KTsKICAgICAgICAgICAgICAgICAgICBmb290RGl2LmFwcGVuZENoaWxkKGlkKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+i0tOWQp+mhtemdoueyvueugDog5bqV6YOo5L+h5oGv5re75Yqg5a6M5oiQJyk7CiAgICAgICAgICAgICAgICB9IGNhdGNoKGUpewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigidGllYmEuYmFpZHUuY29tL3AvIikgIT09IC0xKXsKICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvb3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYl9mb290ZXInKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgICAgICAgICBmb290LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCdmb290ZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9vdC5zZXRBdHRyaWJ1dGUoJ2lkJywnZm9vdGVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvb3Quc2V0QXR0cmlidXRlKCdzdHlsZScsJ3BhZGRpbmctdG9wOjBweCAhaW1wb3J0YW50OycpOwogICAgICAgICAgICAgICAgICAgICAgICBpZC5zZXRBdHRyaWJ1dGUoJ2lkJywnYmFja3J1bm5lckpTRm9vdGVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZvb3RlckVsZW1lbnQoZm9vdCwi5bey5bqU55So55SxQmFja1J1bm5lcuWItuS9nOeahOi0tOWQp+eyvueugOiEmuacrCAoIisgR01faW5mby5zY3JpcHQudmVyc2lvbisiKSIsImh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8yMzY4NyIsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVGb290ZXJFbGVtZW50KGZvb3QsIuWQkeS9nOiAheaNkOasvijmlK/ku5jlrp3kuoznu7TnoIEpIiwiaHR0cHM6Ly9zbWFsbGZpbGUuYmFja3J1bm5lci50b3AvaW1hZ2VzL2FsaXBheS5qcGciLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBmb290RGl2LmFwcGVuZENoaWxkKGZvb3QpOwogICAgICAgICAgICAgICAgICAgICAgICBmb290RGl2LmFwcGVuZENoaWxkKGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOW6lemDqOS/oeaBr+a3u+WKoOWujOaIkCcpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOW6lemDqOS/oeaBr+W3suWtmOWcqCcpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGFkZEZpbmlzaFRpbWVUb0Zvb3RlcigpewogICAgICAgIGlmIChmaW5pc2hUaW1lICE9PSAtMSl7CiAgICAgICAgICAgIGFkZFNwbGl0TGluZVRvRm9vdGVyKGZvb3QpOwogICAgICAgICAgICBjcmVhdGVGb290ZXJFbGVtZW50KGZvb3QsIumhtemdouWKoOi9veaXtumXtO+8miIgKyBmaW5pc2hUaW1lKyJtcyIsImphdmFzY3JpcHQ6OyIsdHJ1ZSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gYWRkU3BsaXRMaW5lVG9Gb290ZXIoZm9vdGVyKXsKICAgICAgICB0cnl7CiAgICAgICAgICAgIHZhciBzcGxpdExpbmU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICBzcGxpdExpbmUuaW5uZXJIVE1MPSJ8IjsKICAgICAgICAgICAgZm9vdGVyLmFwcGVuZENoaWxkKHNwbGl0TGluZSk7CiAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGNyZWF0ZUZvb3RlckVsZW1lbnQoZm9vdGVyLHRleHQsaHJlZixpc0xhc3QpewogICAgICAgIHZhciBzcGxpdExpbmU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwbGl0TGluZS5pbm5lckhUTUw9InwiOwogICAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MPXRleHQ7CiAgICAgICAgY29udGVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLGhyZWYpOwogICAgICAgIGNvbnRlbnQuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCJfYmxhbmsiKTsKICAgICAgICBjb250ZW50LnNldEF0dHJpYnV0ZSgncHZfY29kZScsIjAiKTsKICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQoY29udGVudCk7CiAgICAgICAgaWYgKCFpc0xhc3QpewogICAgICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQoc3BsaXRMaW5lKTsKICAgICAgICB9CiAgICB9CiAgICAvL+WktOWbvuemgeeUqAogICAgZnVuY3Rpb24gZGlzYWJsZUZvcnVtQ2FyZCgpewogICAgICAgIGlmIChpc0hlYWRpbWcpewogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICB2YXIgZm9ydW1jYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvcnVtLWNhcmQtYmFubmVyJyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+i0tOWQp+mhtemdoueyvueugDog5q2j5Zyo57K+566A5aS05Zu+Jyk7CiAgICAgICAgICAgICAgICBpZiAoZm9ydW1jYXJkICE9PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICBpZiAoZm9ydW1jYXJkLmdldEF0dHJpYnV0ZSgic3JjIikhPT0iIil7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcnVtY2FyZC5zZXRBdHRyaWJ1dGUoInNyYyIsIiIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3J1bWNhcmQuc2V0QXR0cmlidXRlKCJzdHlsZSIsImhlaWdodDoxODBweCAhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6d2hpdGUgIWltcG9ydGFudDsiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgLy/ph43lrprlkJEKICAgIGZ1bmN0aW9uIHJlZGlyZWN0KCl7CiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgIC8vP3JlZF90YWfph43lrprlkJEKICAgICAgICB2YXIgZWxlbWVudHMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnRvU3RyaW5nKCkuc3BsaXQoJyYnKTsKICAgICAgICBmb3IgKHZhciBpID0gMDtpPGVsZW1lbnRzLmxlbmd0aDtpKyspewogICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uaW5kZXhPZigncmVkX3RhZycpICE9PSAtMSl7CiAgICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnJicrZWxlbWVudHNbaV0sJycpOwogICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoZWxlbWVudHNbaV0sJycpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8v5aWH5oCq5Z+f5ZCN6YeN5a6a5ZCRCiAgICAgICAgaWYgKHVybC5pbmRleE9mKCdkcS50aWViYS5jb20nKSE9LTEpewogICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnZHEudGllYmEuY29tJywndGllYmEuYmFpZHUuY29tJyk7CiAgICAgICAgfQogICAgICAgIGlmICh1cmwuaW5kZXhPZignanVtcC5iZGltZy5jb20nKSE9LTEpewogICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnanVtcDIuYmRpbWcuY29tJywndGllYmEuYmFpZHUuY29tJyk7CiAgICAgICAgfQogICAgICAgIGlmICh1cmwuaW5kZXhPZignanVtcDIuYmRpbWcuY29tJykhPS0xKXsKICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ2p1bXAyLmJkaW1nLmNvbScsJ3RpZWJhLmJhaWR1LmNvbScpOwogICAgICAgIH0KICAgICAgICBpZiAodXJsLmluZGV4T2YoJz90cmFjZWlkPScpIT0tMSl7CiAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCc/dHJhY2VpZD0nLCcnKTsKICAgICAgICB9CiAgICAgICAgaWYgKHVybCAhPT0gd2luZG93LmxvY2F0aW9uLmhyZWYpewogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7CiAgICAgICAgfQogICAgfQogICAgLy/lgJLluo/nnIvluJbmjInpkq7mt7vliqAKICAgIGZ1bmN0aW9uIHJldmVyc2VvcmRlcigpewogICAgICAgIGlmIChyZXZlcnNlKXsKICAgICAgICAgICAgLy/liKTlrprlvZPliY3nirbmgIEKICAgICAgICAgICAgdmFyIHN0YXR1cyA9IGluaXRpYWxpemVfdmFyKCdyZXZlcnNlX3N0YXR1cycsZmFsc2UpOwogICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JyX3JldmVyc2UnKSA9PT0gbnVsbCl7CiAgICAgICAgICAgICAgICB2YXIgcmlnaHRidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb3JlX3RpdGxlX2J0bnMnKVswXTsKICAgICAgICAgICAgICAgIHZhciBidG5saSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOato+WcqOWIm+W7uuWAkuW6j+afpeeci+aMiemSricpOwogICAgICAgICAgICAgICAgLy/liKTlrprmmK/lkKbkuLrlj6bkuIDkuKrluJblrZAKICAgICAgICAgICAgICAgIHZhciBsYXN0cGFnZSA9IGluaXRpYWxpemVfdmFyKCdyZXZlcnNlX2xhc3RwYWdlJywnJyk7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgICAgIHZhciBjdXJyZW50c2VhcmNoID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDsKICAgICAgICAgICAgICAgIHZhciBjdXJyZW50cGFnZSA9IGN1cnJlbnRocmVmLnJlcGxhY2UoY3VycmVudHNlYXJjaCwnJykucmVwbGFjZSgnaHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC8nLCcnKS5yZXBsYWNlKCdodHRwOi8vdGllYmEuYmFpZHUuY29tL3AvJywnJyk7CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudHBhZ2UhPWxhc3RwYWdlKXsKICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCdyZXZlcnNlX2xhc3RwYWdlJyxjdXJyZW50cGFnZSk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgncmV2ZXJzZV9zdGF0dXMnLHN0YXR1cyk7CiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzKXsKICAgICAgICAgICAgICAgICAgICBidG4uaW5uZXJIVE1MID0gJ+ato+W6j+afpeeciyc7CiAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYnRuLmlubmVySFRNTD0n5YCS5bqP5p+l55yLJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2lkJywnYnJfcmV2ZXJzZScpOwogICAgICAgICAgICAgICAgYnRuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCdidG4tc3ViIGJ0bi1zbWFsbCcpOwogICAgICAgICAgICAgICAgYnRubGkuc2V0QXR0cmlidXRlKCdjbGFzcycsJ2JyX3JldmVyc2VfbGkgcXVpY2tfcmVwbHknKTsKICAgICAgICAgICAgICAgIGJ0bmxpLmFwcGVuZENoaWxkKGJ0bik7CiAgICAgICAgICAgICAgICByaWdodGJ0bi5hcHBlbmRDaGlsZChidG5saSk7CiAgICAgICAgICAgICAgICByaWdodGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscmV2ZXJzZV9jbGljayk7CiAgICAgICAgICAgICAgICBjdXJyZW50aHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICAgICAgcmV2ZXJzZV9jb250ZW50cygpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgLy/lgJLluo/nnIvluJbngrnlh7vkuovku7YKICAgIGZ1bmN0aW9uIHJldmVyc2VfY2xpY2soKXsKICAgICAgICB2YXIgc3RhdHVzID0gaW5pdGlhbGl6ZV92YXIoJ3JldmVyc2Vfc3RhdHVzJyxmYWxzZSk7CiAgICAgICAgaWYoc3RhdHVzKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrJyk7CiAgICAgICAgICAgIC8v5oGi5aSN5q2j5bqPCiAgICAgICAgICAgIEdNX3NldFZhbHVlKCdyZXZlcnNlX3N0YXR1cycsZmFsc2UpOwogICAgICAgICAgICB2YXIgYnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BiX2xpc3RfcGFnZXInKVswXS5jaGlsZHJlbjsKICAgICAgICAgICAgaWYgKGJ0bnMubGVuZ3RoID09PSAwKXsKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7CiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwO2kgPCBidG5zLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgIGlmIChidG5zW2ldLmlubmVySFRNTCA9PSAnMScpewogICAgICAgICAgICAgICAgICAgICAgICAvL+WQkemmlumhtei3s+i9rAogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGJ0bnNbaV0uaHJlZjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL+WAkuW6jwogICAgICAgICAgICBHTV9zZXRWYWx1ZSgncmV2ZXJzZV9zdGF0dXMnLHRydWUpOwogICAgICAgICAgICBidG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGJfbGlzdF9wYWdlcicpWzBdLmNoaWxkcmVuOwogICAgICAgICAgICBpZiAoYnRucy5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7ajxidG5zLmxlbmd0aDtqKyspewogICAgICAgICAgICAgICAgICAgIGlmIChidG5zW2pdLmlubmVySFRNTCA9PSAn5bC+6aG1Jyl7CiAgICAgICAgICAgICAgICAgICAgICAgIC8v5ZCR5bC+6aG16Lez6L2sCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYnRuc1tqXS5ocmVmOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIC8v57+76L2s5b2T5YmN6aG15YaF5a65CiAgICBmdW5jdGlvbiByZXZlcnNlX2NvbnRlbnRzKCl7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgc3RhdHVzID0gaW5pdGlhbGl6ZV92YXIoJ3JldmVyc2Vfc3RhdHVzJyxmYWxzZSk7CiAgICAgICAgICAgIGlmIChzdGF0dXMpewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOato+WcqOe/u+i9rOW9k+WJjemhteWGheWuuScpOwoKICAgICAgICAgICAgICAgIC8v6I635Y+W5b2T5YmN55qEcG4KICAgICAgICAgICAgICAgIHZhciBzZWFyY2ggPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoOwogICAgICAgICAgICAgICAgdmFyIHNlYXJjaHMgPSBzZWFyY2guc3BsaXQoJyYnKTsKICAgICAgICAgICAgICAgIHZhciBwbjsKICAgICAgICAgICAgICAgIGZvciAodmFyIGNoaWxkID0gMDtjaGlsZDxzZWFyY2hzLmxlbmd0aDtjaGlsZCsrKXsKICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoc1tjaGlsZF0uaW5kZXhPZigncG49JykgIT09IC0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgcG4gPSBzZWFyY2hzW2NoaWxkXS5yZXBsYWNlKCc/JywnJykucmVwbGFjZSgncG49JywnJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnal9wX3Bvc3RsaXN0Jyk7CiAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSBsaXN0LmNoaWxkcmVuOwogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGNvbnRlbnRzKTsKICAgICAgICAgICAgICAgIGlmIChjb250ZW50cy5sZW5ndGggPT0gMSAmJiBjb250ZW50c1swXS5pZCA9PSAial9wX3Bvc3RsaXN0Iil7CiAgICAgICAgICAgICAgICAgICAgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BfcG9zdGxpc3QnKVsxXTsKICAgICAgICAgICAgICAgICAgICBjb250ZW50cyA9IGxpc3QuY2hpbGRyZW47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oY29udGVudHMpOwogICAgICAgICAgICAgICAgLy/lgJLluo8KICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IGNvbnRlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChjb250ZW50c1tpXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LHJldmVyc2VTbGVlcFRpbWUpOwogICAgfQogICAgLy/oh6rliqjmlLbotbfmjIflvJUKICAgIHZhciBpc0F1dG9DbG9zZUd1aWRlU2V0ID0gZmFsc2U7CiAgICBmdW5jdGlvbiBjbG9zZUd1aWRlKCl7CiAgICAgICAgaWYgKGF1dG9DbG9zZUd1aWRlICYmICFpc0F1dG9DbG9zZUd1aWRlU2V0KXsKICAgICAgICAgICAgdmFyIHRvcENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ0b3BfY29udGVudCIpOwogICAgICAgICAgICB2YXIgdG9wQ29udGVudE1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ0b3BfY29udF9tYWluIik7CiAgICAgICAgICAgIGlmICh0b3BDb250ZW50Lmxlbmd0aD4wICYmIHRvcENvbnRlbnRNYWluLmxlbmd0aD4wKXsKICAgICAgICAgICAgICAgIHRvcENvbnRlbnRbMF0uc2V0QXR0cmlidXRlKCJjbGFzcyIsInRvcF9jb250ZW50IHRvcF9jb250ZW50X2Nsb3NlZCIpOwogICAgICAgICAgICAgICAgdG9wQ29udGVudE1haW5bMF0uc2V0QXR0cmlidXRlKCJzdHlsZSIsImRpc3BsYXk6bm9uZTsiKTsKICAgICAgICAgICAgICAgIGlzQXV0b0Nsb3NlR3VpZGVTZXQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgLy/niYjmnKzmm7TmlrDliKDpmaTlup/lvIPlj5jph48KICAgIGZ1bmN0aW9uIGRlbGV0ZVRyYXNoVmFsdWUoKXsKICAgICAgICB2YXIgdHJhc2hMaXN0ID0ge307CiAgICAgICAgZm9yICh2YXIgaSA9IDA7aTx0cmFzaExpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJ0cmFzaExpc3RbaV0iKTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS53YXJuKCfotLTlkKfpobXpnaLnsr7nroA6IOeJiOacrOabtOaWsO+8jOW3suWIoOmZpOW6n+W8g+WPmOmHjycpOwogICAgfQogICAgLy/miZPmipjljaHnrYnlvLnmoYblsY/olL0KICAgIGZ1bmN0aW9uIHJlbW92ZVBvcHVwTW9kYWwoKXsKICAgICAgICB2YXIgZGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZGlhbG9nSicpOwogICAgICAgIHZhciBkaWFsb2dtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2RpYWxvZ0ptb2RhbCcpOwogICAgICAgIGZvciAodmFyIGkgPSAwO2k8ZGlhbG9nLmxlbmd0aDtpKyspewogICAgICAgICAgICBkaWFsb2dbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaWFsb2dbaV0pOwogICAgICAgICAgICBpZiAoZGlhbG9nW2ldLmlubmVySFRNTC5pbmRleE9mKCfnoa7lrprkuI3lho3lhbPms6gnICE9IC0xKSl7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKGkgPSAwO2k8ZGlhbG9nbW9kYWwubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIGRpYWxvZ21vZGFsW2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGlhbG9nbW9kYWxbaV0pOwogICAgICAgIH0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBkaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkaWFsb2dKJyk7CiAgICAgICAgICAgIHZhciBkaWFsb2dtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2RpYWxvZ0ptb2RhbCcpOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDtpPGRpYWxvZy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgIGRpYWxvZ1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRpYWxvZ1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChpID0gMDtpPGRpYWxvZ21vZGFsLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgZGlhbG9nbW9kYWxbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaWFsb2dtb2RhbFtpXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LDUwMDApOwogICAgfQogICAgLy/muIXnkIbpppbpobXliqjmgIHlhoXnmoTlub/lkYogKjIwMTgxMDIyCiAgICB2YXIgaW5kZXhBREV2ZW50X2EgPSBmYWxzZTsKICAgIHZhciBpbmRleEFERXZlbnRfc2Nyb2xsID0gZmFsc2U7CiAgICB2YXIgaW5kZXhBREV2ZW50X3RhZ19ob3QgPSBmYWxzZTsKICAgIHZhciBpbmRleEFERXZlbnRfdGFnX3BlcnNvbmFsID0gZmFsc2U7CiAgICB2YXIgd2luZG93VGVtcFNjcm9sbFRvcCA9IDA7CiAgICBmdW5jdGlvbiBiaW5kQ2xlYW5JbmRleEFERXZlbnQoKXsKICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9tb3JlJyk7CiAgICAgICAgdmFyIGEgPSBidG4uY2hpbGRyZW5bMF07CiAgICAgICAgaWYgKCFpbmRleEFERXZlbnRfYSl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLotLTlkKfpobXpnaLnsr7nroA6IOW3sue7keWumummlumhteWKqOaAgeW5v+WRiua4heeQhueahOaMiemSrueCueWHu+S6i+S7tiIpOwogICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbigpewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGNsZWFuQURpbkluZGV4KCk7CiAgICAgICAgICAgICAgICB9LHNsZWVwVGltZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpbmRleEFERXZlbnRfYSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmICghaW5kZXhBREV2ZW50X3Njcm9sbCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLotLTlkKfpobXpnaLnsr7nroA6IOW3sue7keWumummlumhteWKqOaAgeW5v+WRiua4heeQhueahOa7muWKqOS6i+S7tiIpOwogICAgICAgICAgICBkb2N1bWVudC5vbnNjcm9sbCA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCAtIHdpbmRvd1RlbXBTY3JvbGxUb3AgPiAzMDApewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLotLTlkKfpobXpnaLnsr7nroA6IOa7muWKqOinpuWPke+8jOato+WcqOa4heeQhuWKqOaAgeWGheeahOW5v+WRiiIpOwogICAgICAgICAgICAgICAgICAgIGNsZWFuQURpbkluZGV4KCk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93VGVtcFNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5kZXhBREV2ZW50X3Njcm9sbCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmICghaW5kZXhBREV2ZW50X3RhZ19ob3QpewogICAgICAgICAgICB2YXIgdGFnX2hvdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqX3JlbWVuX25hdicpOwogICAgICAgICAgICB0YWdfaG90LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbigpewogICAgICAgICAgICAgICAgY2xlYXJTY3JvbGxUb3BUZW1wKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpbmRleEFERXZlbnRfdGFnX2hvdCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmICghaW5kZXhBREV2ZW50X3RhZ19wZXJzb25hbCl7CiAgICAgICAgICAgIHZhciB0YWdfcGVyc29uYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2LXBlcnNvbmFsJyk7CiAgICAgICAgICAgIHRhZ19wZXJzb25hbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGNsZWFyU2Nyb2xsVG9wVGVtcCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaW5kZXhBREV2ZW50X3RhZ19ob3QgPSB0cnVlOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGNsZWFyU2Nyb2xsVG9wVGVtcCgpewogICAgICAgIGNvbnNvbGUubG9nKCLotLTlkKfpobXpnaLnsr7nroA6IOa4heeQhua7muWKqOmrmOW6pue8k+WtmCIpOwogICAgICAgIHdpbmRvd1RlbXBTY3JvbGxUb3AgPSAwOwogICAgfQogICAgZnVuY3Rpb24gY2xlYW5BRGluSW5kZXgoKXsKICAgICAgICB2YXIgYWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaG9tZS1wbGFjZS1pdGVtJyk7CiAgICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgICBmb3IgKHZhciBpID0gMDtpPGFkcy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgdmFyIGV4dGluZm8gPSBhZHNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLWV4dF9pbmZvJyk7CiAgICAgICAgICAgIGlmICh0eXBlb2YgZXh0aW5mbyAhPSAndW5kZWZpbmVkJyl7CiAgICAgICAgICAgICAgICBhZHNbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhZHNbaV0pOwogICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coIui0tOWQp+mhtemdoueyvueugDog5riF55CG5LqGIitjb3VudCsi5p2h5Yqo5oCB5YaF55qE5bm/5ZGKIik7CiAgICB9CiAgICAvLyDkv67lpI3lhbPms6jmjInpkq4KICAgIGZ1bmN0aW9uIGZpeEZvY3VzQnV0dG9uKCl7CiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlZG93bicsICcuaXNsaWtlX2ZvY3VzJyAsZnVuY3Rpb24oKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2FhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhJyk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICB9KTsKICAgIH0KfSkoKTs=","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js","ts":1642330991455,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My40LjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIHQoZSl9OnQoZSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKEMsZSl7InVzZSBzdHJpY3QiO3ZhciB0PVtdLEU9Qy5kb2N1bWVudCxyPU9iamVjdC5nZXRQcm90b3R5cGVPZixzPXQuc2xpY2UsZz10LmNvbmNhdCx1PXQucHVzaCxpPXQuaW5kZXhPZixuPXt9LG89bi50b1N0cmluZyx2PW4uaGFzT3duUHJvcGVydHksYT12LnRvU3RyaW5nLGw9YS5jYWxsKE9iamVjdCkseT17fSxtPWZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYibnVtYmVyIiE9dHlwZW9mIGUubm9kZVR5cGV9LHg9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJmU9PT1lLndpbmRvd30sYz17dHlwZTohMCxzcmM6ITAsbm9uY2U6ITAsbm9Nb2R1bGU6ITB9O2Z1bmN0aW9uIGIoZSx0LG4pe3ZhciByLGksbz0obj1ufHxFKS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtpZihvLnRleHQ9ZSx0KWZvcihyIGluIGMpKGk9dFtyXXx8dC5nZXRBdHRyaWJ1dGUmJnQuZ2V0QXR0cmlidXRlKHIpKSYmby5zZXRBdHRyaWJ1dGUocixpKTtuLmhlYWQuYXBwZW5kQ2hpbGQobykucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKX1mdW5jdGlvbiB3KGUpe3JldHVybiBudWxsPT1lP2UrIiI6Im9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZT9uW28uY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfXZhciBmPSIzLjQuMSIsaz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgay5mbi5pbml0KGUsdCl9LHA9L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nO2Z1bmN0aW9uIGQoZSl7dmFyIHQ9ISFlJiYibGVuZ3RoImluIGUmJmUubGVuZ3RoLG49dyhlKTtyZXR1cm4hbShlKSYmIXgoZSkmJigiYXJyYXkiPT09bnx8MD09PXR8fCJudW1iZXIiPT10eXBlb2YgdCYmMDx0JiZ0LTEgaW4gZSl9ay5mbj1rLnByb3RvdHlwZT17anF1ZXJ5OmYsY29uc3RydWN0b3I6ayxsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHMuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3MuY2FsbCh0aGlzKTplPDA/dGhpc1tlK3RoaXMubGVuZ3RoXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9ay5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHR9LGVhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIGsuZWFjaCh0aGlzLGUpfSxtYXA6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGsubWFwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jYWxsKGUsdCxlKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2socy5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCxuPStlKyhlPDA/dDowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soMDw9biYmbjx0P1t0aGlzW25dXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDp1LHNvcnQ6dC5zb3J0LHNwbGljZTp0LnNwbGljZX0say5leHRlbmQ9ay5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixpLG8sYT1hcmd1bWVudHNbMF18fHt9LHM9MSx1PWFyZ3VtZW50cy5sZW5ndGgsbD0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgYSYmKGw9YSxhPWFyZ3VtZW50c1tzXXx8e30scysrKSwib2JqZWN0Ij09dHlwZW9mIGF8fG0oYSl8fChhPXt9KSxzPT09dSYmKGE9dGhpcyxzLS0pO3M8dTtzKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW3NdKSlmb3IodCBpbiBlKXI9ZVt0XSwiX19wcm90b19fIiE9PXQmJmEhPT1yJiYobCYmciYmKGsuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhuPWFbdF0sbz1pJiYhQXJyYXkuaXNBcnJheShuKT9bXTppfHxrLmlzUGxhaW5PYmplY3Qobik/bjp7fSxpPSExLGFbdF09ay5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LGsuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8IltvYmplY3QgT2JqZWN0XSIhPT1vLmNhbGwoZSkpJiYoISh0PXIoZSkpfHwiZnVuY3Rpb24iPT10eXBlb2Yobj12LmNhbGwodCwiY29uc3RydWN0b3IiKSYmdC5jb25zdHJ1Y3RvcikmJmEuY2FsbChuKT09PWwpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSx0KXtiKGUse25vbmNlOnQmJnQubm9uY2V9KX0sZWFjaDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MDtpZihkKGUpKXtmb3Iobj1lLmxlbmd0aDtyPG47cisrKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVha31lbHNlIGZvcihyIGluIGUpaWYoITE9PT10LmNhbGwoZVtyXSxyLGVbcl0pKWJyZWFrO3JldHVybiBlfSx0cmltOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOihlKyIiKS5yZXBsYWNlKHAsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKGQoT2JqZWN0KGUpKT9rLm1lcmdlKG4sInN0cmluZyI9PXR5cGVvZiBlP1tlXTplKTp1LmNhbGwobixlKSksbn0saW5BcnJheTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG51bGw9PXQ/LTE6aS5jYWxsKHQsZSxuKX0sbWVyZ2U6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49K3QubGVuZ3RoLHI9MCxpPWUubGVuZ3RoO3I8bjtyKyspZVtpKytdPXRbcl07cmV0dXJuIGUubGVuZ3RoPWksZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPVtdLGk9MCxvPWUubGVuZ3RoLGE9IW47aTxvO2krKykhdChlW2ldLGkpIT09YSYmci5wdXNoKGVbaV0pO3JldHVybiByfSxtYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz0wLGE9W107aWYoZChlKSlmb3Iocj1lLmxlbmd0aDtvPHI7bysrKW51bGwhPShpPXQoZVtvXSxvLG4pKSYmYS5wdXNoKGkpO2Vsc2UgZm9yKG8gaW4gZSludWxsIT0oaT10KGVbb10sbyxuKSkmJmEucHVzaChpKTtyZXR1cm4gZy5hcHBseShbXSxhKX0sZ3VpZDoxLHN1cHBvcnQ6eX0pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihrLmZuW1N5bWJvbC5pdGVyYXRvcl09dFtTeW1ib2wuaXRlcmF0b3JdKSxrLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7blsiW29iamVjdCAiK3QrIl0iXT10LnRvTG93ZXJDYXNlKCl9KTt2YXIgaD1mdW5jdGlvbihuKXt2YXIgZSxkLGIsbyxpLGgsZixnLHcsdSxsLFQsQyxhLEUsdixzLGMseSxrPSJzaXp6bGUiKzEqbmV3IERhdGUsbT1uLmRvY3VtZW50LFM9MCxyPTAscD11ZSgpLHg9dWUoKSxOPXVlKCksQT11ZSgpLEQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQmJihsPSEwKSwwfSxqPXt9Lmhhc093blByb3BlcnR5LHQ9W10scT10LnBvcCxMPXQucHVzaCxIPXQucHVzaCxPPXQuc2xpY2UsUD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKylpZihlW25dPT09dClyZXR1cm4gbjtyZXR1cm4tMX0sUj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLE09IltcXHgyMFxcdFxcclxcblxcZl0iLEk9Iig/OlxcXFwufFtcXHctXXxbXlwwLVxceGEwXSkrIixXPSJcXFsiK00rIiooIitJKyIpKD86IitNKyIqKFsqXiR8IX5dPz0pIitNKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrSSsiKSl8KSIrTSsiKlxcXSIsJD0iOigiK0krIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1crIikqKXwuKilcXCl8KSIsRj1uZXcgUmVnRXhwKE0rIisiLCJnIiksQj1uZXcgUmVnRXhwKCJeIitNKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK00rIiskIiwiZyIpLF89bmV3IFJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSx6PW5ldyBSZWdFeHAoIl4iK00rIiooWz4rfl18IitNKyIpIitNKyIqIiksVT1uZXcgUmVnRXhwKE0rInw+IiksWD1uZXcgUmVnRXhwKCQpLFY9bmV3IFJlZ0V4cCgiXiIrSSsiJCIpLEc9e0lEOm5ldyBSZWdFeHAoIl4jKCIrSSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitJKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitJKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrVyksUFNFVURPOm5ldyBSZWdFeHAoIl4iKyQpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFk9L0hUTUwkL2ksUT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLEo9L15oXGQkL2ksSz0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGVlPS9bK35dLyx0ZT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK00rIj98KCIrTSsiKXwuKSIsImlnIiksbmU9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPSIweCIrdC02NTUzNjtyZXR1cm4gciE9cnx8bj90OnI8MD9TdHJpbmcuZnJvbUNoYXJDb2RlKHIrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUocj4+MTB8NTUyOTYsMTAyMyZyfDU2MzIwKX0scmU9LyhbXDAtXHgxZlx4N2ZdfF4tP1xkKXxeLSR8W15cMC1ceDFmXHg3Zi1cdUZGRkZcdy1dL2csaWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8iXDAiPT09ZT8iXHVmZmZkIjplLnNsaWNlKDAsLTEpKyJcXCIrZS5jaGFyQ29kZUF0KGUubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KSsiICI6IlxcIitlfSxvZT1mdW5jdGlvbigpe1QoKX0sYWU9YmUoZnVuY3Rpb24oZSl7cmV0dXJuITA9PT1lLmRpc2FibGVkJiYiZmllbGRzZXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e0guYXBwbHkodD1PLmNhbGwobS5jaGlsZE5vZGVzKSxtLmNoaWxkTm9kZXMpLHRbbS5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZSl7SD17YXBwbHk6dC5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtMLmFwcGx5KGUsTy5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gc2UodCxlLG4scil7dmFyIGksbyxhLHMsdSxsLGMsZj1lJiZlLm93bmVyRG9jdW1lbnQscD1lP2Uubm9kZVR5cGU6OTtpZihuPW58fFtdLCJzdHJpbmciIT10eXBlb2YgdHx8IXR8fDEhPT1wJiY5IT09cCYmMTEhPT1wKXJldHVybiBuO2lmKCFyJiYoKGU/ZS5vd25lckRvY3VtZW50fHxlOm0pIT09QyYmVChlKSxlPWV8fEMsRSkpe2lmKDExIT09cCYmKHU9Wi5leGVjKHQpKSlpZihpPXVbMV0pe2lmKDk9PT1wKXtpZighKGE9ZS5nZXRFbGVtZW50QnlJZChpKSkpcmV0dXJuIG47aWYoYS5pZD09PWkpcmV0dXJuIG4ucHVzaChhKSxufWVsc2UgaWYoZiYmKGE9Zi5nZXRFbGVtZW50QnlJZChpKSkmJnkoZSxhKSYmYS5pZD09PWkpcmV0dXJuIG4ucHVzaChhKSxufWVsc2V7aWYodVsyXSlyZXR1cm4gSC5hcHBseShuLGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUodCkpLG47aWYoKGk9dVszXSkmJmQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBILmFwcGx5KG4sZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGkpKSxufWlmKGQucXNhJiYhQVt0KyIgIl0mJighdnx8IXYudGVzdCh0KSkmJigxIT09cHx8Im9iamVjdCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpKXtpZihjPXQsZj1lLDE9PT1wJiZVLnRlc3QodCkpeyhzPWUuZ2V0QXR0cmlidXRlKCJpZCIpKT9zPXMucmVwbGFjZShyZSxpZSk6ZS5zZXRBdHRyaWJ1dGUoImlkIixzPWspLG89KGw9aCh0KSkubGVuZ3RoO3doaWxlKG8tLSlsW29dPSIjIitzKyIgIit4ZShsW29dKTtjPWwuam9pbigiLCIpLGY9ZWUudGVzdCh0KSYmeWUoZS5wYXJlbnROb2RlKXx8ZX10cnl7cmV0dXJuIEguYXBwbHkobixmLnF1ZXJ5U2VsZWN0b3JBbGwoYykpLG59Y2F0Y2goZSl7QSh0LCEwKX1maW5hbGx5e3M9PT1rJiZlLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBnKHQucmVwbGFjZShCLCIkMSIpLGUsbixyKX1mdW5jdGlvbiB1ZSgpe3ZhciByPVtdO3JldHVybiBmdW5jdGlvbiBlKHQsbil7cmV0dXJuIHIucHVzaCh0KyIgIik+Yi5jYWNoZUxlbmd0aCYmZGVsZXRlIGVbci5zaGlmdCgpXSxlW3QrIiAiXT1ufX1mdW5jdGlvbiBsZShlKXtyZXR1cm4gZVtrXT0hMCxlfWZ1bmN0aW9uIGNlKGUpe3ZhciB0PUMuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKTt0cnl7cmV0dXJuISFlKHQpfWNhdGNoKGUpe3JldHVybiExfWZpbmFsbHl7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksdD1udWxsfX1mdW5jdGlvbiBmZShlLHQpe3ZhciBuPWUuc3BsaXQoInwiKSxyPW4ubGVuZ3RoO3doaWxlKHItLSliLmF0dHJIYW5kbGVbbltyXV09dH1mdW5jdGlvbiBwZShlLHQpe3ZhciBuPXQmJmUscj1uJiYxPT09ZS5ub2RlVHlwZSYmMT09PXQubm9kZVR5cGUmJmUuc291cmNlSW5kZXgtdC5zb3VyY2VJbmRleDtpZihyKXJldHVybiByO2lmKG4pd2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9ZnVuY3Rpb24gZGUodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiJpbnB1dCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJmUudHlwZT09PXR9fWZ1bmN0aW9uIGhlKG4pe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT10fHwiYnV0dG9uIj09PXQpJiZlLnR5cGU9PT1ufX1mdW5jdGlvbiBnZSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuImZvcm0iaW4gZT9lLnBhcmVudE5vZGUmJiExPT09ZS5kaXNhYmxlZD8ibGFiZWwiaW4gZT8ibGFiZWwiaW4gZS5wYXJlbnROb2RlP2UucGFyZW50Tm9kZS5kaXNhYmxlZD09PXQ6ZS5kaXNhYmxlZD09PXQ6ZS5pc0Rpc2FibGVkPT09dHx8ZS5pc0Rpc2FibGVkIT09IXQmJmFlKGUpPT09dDplLmRpc2FibGVkPT09dDoibGFiZWwiaW4gZSYmZS5kaXNhYmxlZD09PXR9fWZ1bmN0aW9uIHZlKGEpe3JldHVybiBsZShmdW5jdGlvbihvKXtyZXR1cm4gbz0rbyxsZShmdW5jdGlvbihlLHQpe3ZhciBuLHI9YShbXSxlLmxlbmd0aCxvKSxpPXIubGVuZ3RoO3doaWxlKGktLSllW249cltpXV0mJihlW25dPSEodFtuXT1lW25dKSl9KX0pfWZ1bmN0aW9uIHllKGUpe3JldHVybiBlJiYidW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmV9Zm9yKGUgaW4gZD1zZS5zdXBwb3J0PXt9LGk9c2UuaXNYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5uYW1lc3BhY2VVUkksbj0oZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIVkudGVzdCh0fHxuJiZuLm5vZGVOYW1lfHwiSFRNTCIpfSxUPXNlLnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LG4scj1lP2Uub3duZXJEb2N1bWVudHx8ZTptO3JldHVybiByIT09QyYmOT09PXIubm9kZVR5cGUmJnIuZG9jdW1lbnRFbGVtZW50JiYoYT0oQz1yKS5kb2N1bWVudEVsZW1lbnQsRT0haShDKSxtIT09QyYmKG49Qy5kZWZhdWx0VmlldykmJm4udG9wIT09biYmKG4uYWRkRXZlbnRMaXN0ZW5lcj9uLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsb2UsITEpOm4uYXR0YWNoRXZlbnQmJm4uYXR0YWNoRXZlbnQoIm9udW5sb2FkIixvZSkpLGQuYXR0cmlidXRlcz1jZShmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxkLmdldEVsZW1lbnRzQnlUYWdOYW1lPWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKEMuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPUsudGVzdChDLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGQuZ2V0QnlJZD1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5pZD1rLCFDLmdldEVsZW1lbnRzQnlOYW1lfHwhQy5nZXRFbGVtZW50c0J5TmFtZShrKS5sZW5ndGh9KSxkLmdldEJ5SWQ/KGIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZSh0ZSxuZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSxiLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJkUpe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4/W25dOltdfX0pOihiLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgbj1lLnJlcGxhY2UodGUsbmUpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiB0JiZ0LnZhbHVlPT09bn19LGIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmRSl7dmFyIG4scixpLG89dC5nZXRFbGVtZW50QnlJZChlKTtpZihvKXtpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb107aT10LmdldEVsZW1lbnRzQnlOYW1lKGUpLHI9MDt3aGlsZShvPWlbcisrXSlpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb119cmV0dXJuW119fSksYi5maW5kLlRBRz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGUsdCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6ZC5xc2E/dC5xdWVyeVNlbGVjdG9yQWxsKGUpOnZvaWQgMH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoIioiPT09ZSl7d2hpbGUobj1vW2krK10pMT09PW4ubm9kZVR5cGUmJnIucHVzaChuKTtyZXR1cm4gcn1yZXR1cm4gb30sYi5maW5kLkNMQVNTPWQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmRSlyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxzPVtdLHY9W10sKGQucXNhPUsudGVzdChDLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGNlKGZ1bmN0aW9uKGUpe2EuYXBwZW5kQ2hpbGQoZSkuaW5uZXJIVE1MPSI8YSBpZD0nIitrKyInPjwvYT48c2VsZWN0IGlkPSciK2srIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmdi5wdXNoKCJbKl4kXT0iK00rIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIiooPzp2YWx1ZXwiK1IrIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IitrKyItXSIpLmxlbmd0aHx8di5wdXNoKCJ+PSIpLGUucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGh8fHYucHVzaCgiOmNoZWNrZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoImEjIitrKyIrKiIpLmxlbmd0aHx8di5wdXNoKCIuIy4rWyt+XSIpfSksY2UoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+PHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PiI7dmFyIHQ9Qy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Quc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmdi5wdXNoKCJuYW1lIitNKyIqWypeJHwhfl0/PSIpLDIhPT1lLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoJiZ2LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5hcHBlbmRDaGlsZChlKS5kaXNhYmxlZD0hMCwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZGlzYWJsZWQiKS5sZW5ndGgmJnYucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSx2LnB1c2goIiwuKjoiKX0pKSwoZC5tYXRjaGVzU2VsZWN0b3I9Sy50ZXN0KGM9YS5tYXRjaGVzfHxhLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEub01hdGNoZXNTZWxlY3Rvcnx8YS5tc01hdGNoZXNTZWxlY3RvcikpJiZjZShmdW5jdGlvbihlKXtkLmRpc2Nvbm5lY3RlZE1hdGNoPWMuY2FsbChlLCIqIiksYy5jYWxsKGUsIltzIT0nJ106eCIpLHMucHVzaCgiIT0iLCQpfSksdj12Lmxlbmd0aCYmbmV3IFJlZ0V4cCh2LmpvaW4oInwiKSkscz1zLmxlbmd0aCYmbmV3IFJlZ0V4cChzLmpvaW4oInwiKSksdD1LLnRlc3QoYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikseT10fHxLLnRlc3QoYS5jb250YWlucyk/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxEPXQ/ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuPSFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBufHwoMSYobj0oZS5vd25lckRvY3VtZW50fHxlKT09PSh0Lm93bmVyRG9jdW1lbnR8fHQpP2UuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCk6MSl8fCFkLnNvcnREZXRhY2hlZCYmdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PW4/ZT09PUN8fGUub3duZXJEb2N1bWVudD09PW0mJnkobSxlKT8tMTp0PT09Q3x8dC5vd25lckRvY3VtZW50PT09bSYmeShtLHQpPzE6dT9QKHUsZSktUCh1LHQpOjA6NCZuPy0xOjEpfTpmdW5jdGlvbihlLHQpe2lmKGU9PT10KXJldHVybiBsPSEwLDA7dmFyIG4scj0wLGk9ZS5wYXJlbnROb2RlLG89dC5wYXJlbnROb2RlLGE9W2VdLHM9W3RdO2lmKCFpfHwhbylyZXR1cm4gZT09PUM/LTE6dD09PUM/MTppPy0xOm8/MTp1P1AodSxlKS1QKHUsdCk6MDtpZihpPT09bylyZXR1cm4gcGUoZSx0KTtuPWU7d2hpbGUobj1uLnBhcmVudE5vZGUpYS51bnNoaWZ0KG4pO249dDt3aGlsZShuPW4ucGFyZW50Tm9kZSlzLnVuc2hpZnQobik7d2hpbGUoYVtyXT09PXNbcl0pcisrO3JldHVybiByP3BlKGFbcl0sc1tyXSk6YVtyXT09PW0/LTE6c1tyXT09PW0/MTowfSksQ30sc2UubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBzZShlLG51bGwsbnVsbCx0KX0sc2UubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoKGUub3duZXJEb2N1bWVudHx8ZSkhPT1DJiZUKGUpLGQubWF0Y2hlc1NlbGVjdG9yJiZFJiYhQVt0KyIgIl0mJighc3x8IXMudGVzdCh0KSkmJighdnx8IXYudGVzdCh0KSkpdHJ5e3ZhciBuPWMuY2FsbChlLHQpO2lmKG58fGQuZGlzY29ubmVjdGVkTWF0Y2h8fGUuZG9jdW1lbnQmJjExIT09ZS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gbn1jYXRjaChlKXtBKHQsITApfXJldHVybiAwPHNlKHQsQyxudWxsLFtlXSkubGVuZ3RofSxzZS5jb250YWlucz1mdW5jdGlvbihlLHQpe3JldHVybihlLm93bmVyRG9jdW1lbnR8fGUpIT09QyYmVChlKSx5KGUsdCl9LHNlLmF0dHI9ZnVuY3Rpb24oZSx0KXsoZS5vd25lckRvY3VtZW50fHxlKSE9PUMmJlQoZSk7dmFyIG49Yi5hdHRySGFuZGxlW3QudG9Mb3dlckNhc2UoKV0scj1uJiZqLmNhbGwoYi5hdHRySGFuZGxlLHQudG9Mb3dlckNhc2UoKSk/bihlLHQsIUUpOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09cj9yOmQuYXR0cmlidXRlc3x8IUU/ZS5nZXRBdHRyaWJ1dGUodCk6KHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSYmci5zcGVjaWZpZWQ/ci52YWx1ZTpudWxsfSxzZS5lc2NhcGU9ZnVuY3Rpb24oZSl7cmV0dXJuKGUrIiIpLnJlcGxhY2UocmUsaWUpfSxzZS5lcnJvcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZSl9LHNlLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxyPTAsaT0wO2lmKGw9IWQuZGV0ZWN0RHVwbGljYXRlcyx1PSFkLnNvcnRTdGFibGUmJmUuc2xpY2UoMCksZS5zb3J0KEQpLGwpe3doaWxlKHQ9ZVtpKytdKXQ9PT1lW2ldJiYocj1uLnB1c2goaSkpO3doaWxlKHItLSllLnNwbGljZShuW3JdLDEpfXJldHVybiB1PW51bGwsZX0sbz1zZS5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49IiIscj0wLGk9ZS5ub2RlVHlwZTtpZihpKXtpZigxPT09aXx8OT09PWl8fDExPT09aSl7aWYoInN0cmluZyI9PXR5cGVvZiBlLnRleHRDb250ZW50KXJldHVybiBlLnRleHRDb250ZW50O2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyluKz1vKGUpfWVsc2UgaWYoMz09PWl8fDQ9PT1pKXJldHVybiBlLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKHQ9ZVtyKytdKW4rPW8odCk7cmV0dXJuIG59LChiPXNlLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmxlLG1hdGNoOkcsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6ITB9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6ITB9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0ucmVwbGFjZSh0ZSxuZSksZVszXT0oZVszXXx8ZVs0XXx8ZVs1XXx8IiIpLnJlcGxhY2UodGUsbmUpLCJ+PSI9PT1lWzJdJiYoZVszXT0iICIrZVszXSsiICIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09ZVsxXS5zbGljZSgwLDMpPyhlWzNdfHxzZS5lcnJvcihlWzBdKSxlWzRdPSsoZVs0XT9lWzVdKyhlWzZdfHwxKToyKigiZXZlbiI9PT1lWzNdfHwib2RkIj09PWVbM10pKSxlWzVdPSsoZVs3XStlWzhdfHwib2RkIj09PWVbM10pKTplWzNdJiZzZS5lcnJvcihlWzBdKSxlfSxQU0VVRE86ZnVuY3Rpb24oZSl7dmFyIHQsbj0hZVs2XSYmZVsyXTtyZXR1cm4gRy5DSElMRC50ZXN0KGVbMF0pP251bGw6KGVbM10/ZVsyXT1lWzRdfHxlWzVdfHwiIjpuJiZYLnRlc3QobikmJih0PWgobiwhMCkpJiYodD1uLmluZGV4T2YoIikiLG4ubGVuZ3RoLXQpLW4ubGVuZ3RoKSYmKGVbMF09ZVswXS5zbGljZSgwLHQpLGVbMl09bi5zbGljZSgwLHQpKSxlLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKHRlLG5lKS50b0xvd2VyQ2FzZSgpO3JldHVybiIqIj09PWU/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXR9fSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgdD1wW2UrIiAiXTtyZXR1cm4gdHx8KHQ9bmV3IFJlZ0V4cCgiKF58IitNKyIpIitlKyIoIitNKyJ8JCkiKSkmJnAoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KCJzdHJpbmciPT10eXBlb2YgZS5jbGFzc05hbWUmJmUuY2xhc3NOYW1lfHwidW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24obixyLGkpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD1zZS5hdHRyKGUsbik7cmV0dXJuIG51bGw9PXQ/IiE9Ij09PXI6IXJ8fCh0Kz0iIiwiPSI9PT1yP3Q9PT1pOiIhPSI9PT1yP3QhPT1pOiJePSI9PT1yP2kmJjA9PT10LmluZGV4T2YoaSk6Iio9Ij09PXI/aSYmLTE8dC5pbmRleE9mKGkpOiIkPSI9PT1yP2kmJnQuc2xpY2UoLWkubGVuZ3RoKT09PWk6In49Ij09PXI/LTE8KCIgIit0LnJlcGxhY2UoRiwiICIpKyIgIikuaW5kZXhPZihpKToifD0iPT09ciYmKHQ9PT1pfHx0LnNsaWNlKDAsaS5sZW5ndGgrMSk9PT1pKyItIikpfX0sQ0hJTEQ6ZnVuY3Rpb24oaCxlLHQsZyx2KXt2YXIgeT0ibnRoIiE9PWguc2xpY2UoMCwzKSxtPSJsYXN0IiE9PWguc2xpY2UoLTQpLHg9Im9mLXR5cGUiPT09ZTtyZXR1cm4gMT09PWcmJjA9PT12P2Z1bmN0aW9uKGUpe3JldHVybiEhZS5wYXJlbnROb2RlfTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGEscyx1LGw9eSE9PW0/Im5leHRTaWJsaW5nIjoicHJldmlvdXNTaWJsaW5nIixjPWUucGFyZW50Tm9kZSxmPXgmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxwPSFuJiYheCxkPSExO2lmKGMpe2lmKHkpe3doaWxlKGwpe2E9ZTt3aGlsZShhPWFbbF0paWYoeD9hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1mOjE9PT1hLm5vZGVUeXBlKXJldHVybiExO3U9bD0ib25seSI9PT1oJiYhdSYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZih1PVttP2MuZmlyc3RDaGlsZDpjLmxhc3RDaGlsZF0sbSYmcCl7ZD0ocz0ocj0oaT0obz0oYT1jKVtrXXx8KGFba109e30pKVthLnVuaXF1ZUlEXXx8KG9bYS51bmlxdWVJRF09e30pKVtoXXx8W10pWzBdPT09UyYmclsxXSkmJnJbMl0sYT1zJiZjLmNoaWxkTm9kZXNbc107d2hpbGUoYT0rK3MmJmEmJmFbbF18fChkPXM9MCl8fHUucG9wKCkpaWYoMT09PWEubm9kZVR5cGUmJisrZCYmYT09PWUpe2lbaF09W1MscyxkXTticmVha319ZWxzZSBpZihwJiYoZD1zPShyPShpPShvPShhPWUpW2tdfHwoYVtrXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdfHxbXSlbMF09PT1TJiZyWzFdKSwhMT09PWQpd2hpbGUoYT0rK3MmJmEmJmFbbF18fChkPXM9MCl8fHUucG9wKCkpaWYoKHg/YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZjoxPT09YS5ub2RlVHlwZSkmJisrZCYmKHAmJigoaT0obz1hW2tdfHwoYVtrXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdPVtTLGRdKSxhPT09ZSkpYnJlYWs7cmV0dXJuKGQtPXYpPT09Z3x8ZCVnPT0wJiYwPD1kL2d9fX0sUFNFVURPOmZ1bmN0aW9uKGUsbyl7dmFyIHQsYT1iLnBzZXVkb3NbZV18fGIuc2V0RmlsdGVyc1tlLnRvTG93ZXJDYXNlKCldfHxzZS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2UpO3JldHVybiBhW2tdP2Eobyk6MTxhLmxlbmd0aD8odD1bZSxlLCIiLG9dLGIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShlLnRvTG93ZXJDYXNlKCkpP2xlKGZ1bmN0aW9uKGUsdCl7dmFyIG4scj1hKGUsbyksaT1yLmxlbmd0aDt3aGlsZShpLS0pZVtuPVAoZSxyW2ldKV09ISh0W25dPXJbaV0pfSk6ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSwwLHQpfSk6YX19LHBzZXVkb3M6e25vdDpsZShmdW5jdGlvbihlKXt2YXIgcj1bXSxpPVtdLHM9ZihlLnJlcGxhY2UoQiwiJDEiKSk7cmV0dXJuIHNba10/bGUoZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbz1zKGUsbnVsbCxyLFtdKSxhPWUubGVuZ3RoO3doaWxlKGEtLSkoaT1vW2FdKSYmKGVbYV09ISh0W2FdPWkpKX0pOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gclswXT1lLHMocixudWxsLG4saSksclswXT1udWxsLCFpLnBvcCgpfX0pLGhhczpsZShmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIDA8c2UodCxlKS5sZW5ndGh9fSksY29udGFpbnM6bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQ9dC5yZXBsYWNlKHRlLG5lKSxmdW5jdGlvbihlKXtyZXR1cm4tMTwoZS50ZXh0Q29udGVudHx8byhlKSkuaW5kZXhPZih0KX19KSxsYW5nOmxlKGZ1bmN0aW9uKG4pe3JldHVybiBWLnRlc3Qobnx8IiIpfHxzZS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIituKSxuPW4ucmVwbGFjZSh0ZSxuZSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihlKXt2YXIgdDtkb3tpZih0PUU/ZS5sYW5nOmUuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxlLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybih0PXQudG9Mb3dlckNhc2UoKSk9PT1ufHwwPT09dC5pbmRleE9mKG4rIi0iKX13aGlsZSgoZT1lLnBhcmVudE5vZGUpJiYxPT09ZS5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGUpe3ZhciB0PW4ubG9jYXRpb24mJm4ubG9jYXRpb24uaGFzaDtyZXR1cm4gdCYmdC5zbGljZSgxKT09PWUuaWR9LHJvb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1hfSxmb2N1czpmdW5jdGlvbihlKXtyZXR1cm4gZT09PUMuYWN0aXZlRWxlbWVudCYmKCFDLmhhc0ZvY3VzfHxDLmhhc0ZvY3VzKCkpJiYhIShlLnR5cGV8fGUuaHJlZnx8fmUudGFiSW5kZXgpfSxlbmFibGVkOmdlKCExKSxkaXNhYmxlZDpnZSghMCksY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiEhZS5jaGVja2VkfHwib3B0aW9uIj09PXQmJiEhZS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsITA9PT1lLnNlbGVjdGVkfSxlbXB0eTpmdW5jdGlvbihlKXtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIWIucHNldWRvcy5lbXB0eShlKX0saGVhZGVyOmZ1bmN0aW9uKGUpe3JldHVybiBKLnRlc3QoZS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGUpe3JldHVybiBRLnRlc3QoZS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiJidXR0b24iPT09ZS50eXBlfHwiYnV0dG9uIj09PXR9LHRleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuImlucHV0Ij09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmInRleHQiPT09ZS50eXBlJiYobnVsbD09KHQ9ZS5nZXRBdHRyaWJ1dGUoInR5cGUiKSl8fCJ0ZXh0Ij09PXQudG9Mb3dlckNhc2UoKSl9LGZpcnN0OnZlKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDp2ZShmdW5jdGlvbihlLHQpe3JldHVyblt0LTFdfSksZXE6dmUoZnVuY3Rpb24oZSx0LG4pe3JldHVybltuPDA/bit0Om5dfSksZXZlbjp2ZShmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248dDtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDp2ZShmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0xO248dDtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLGx0OnZlKGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDp0PG4/dDpuOzA8PS0tcjspZS5wdXNoKHIpO3JldHVybiBlfSksZ3Q6dmUoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0Om47KytyPHQ7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0pLnBzZXVkb3MubnRoPWIucHNldWRvcy5lcSx7cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pYi5wc2V1ZG9zW2VdPWRlKGUpO2ZvcihlIGlue3N1Ym1pdDohMCxyZXNldDohMH0pYi5wc2V1ZG9zW2VdPWhlKGUpO2Z1bmN0aW9uIG1lKCl7fWZ1bmN0aW9uIHhlKGUpe2Zvcih2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjt0PG47dCsrKXIrPWVbdF0udmFsdWU7cmV0dXJuIHJ9ZnVuY3Rpb24gYmUocyxlLHQpe3ZhciB1PWUuZGlyLGw9ZS5uZXh0LGM9bHx8dSxmPXQmJiJwYXJlbnROb2RlIj09PWMscD1yKys7cmV0dXJuIGUuZmlyc3Q/ZnVuY3Rpb24oZSx0LG4pe3doaWxlKGU9ZVt1XSlpZigxPT09ZS5ub2RlVHlwZXx8ZilyZXR1cm4gcyhlLHQsbik7cmV0dXJuITF9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT1bUyxwXTtpZihuKXt3aGlsZShlPWVbdV0paWYoKDE9PT1lLm5vZGVUeXBlfHxmKSYmcyhlLHQsbikpcmV0dXJuITB9ZWxzZSB3aGlsZShlPWVbdV0paWYoMT09PWUubm9kZVR5cGV8fGYpaWYoaT0obz1lW2tdfHwoZVtrXT17fSkpW2UudW5pcXVlSURdfHwob1tlLnVuaXF1ZUlEXT17fSksbCYmbD09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSllPWVbdV18fGU7ZWxzZXtpZigocj1pW2NdKSYmclswXT09PVMmJnJbMV09PT1wKXJldHVybiBhWzJdPXJbMl07aWYoKGlbY109YSlbMl09cyhlLHQsbikpcmV0dXJuITB9cmV0dXJuITF9fWZ1bmN0aW9uIHdlKGkpe3JldHVybiAxPGkubGVuZ3RoP2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj1pLmxlbmd0aDt3aGlsZShyLS0paWYoIWlbcl0oZSx0LG4pKXJldHVybiExO3JldHVybiEwfTppWzBdfWZ1bmN0aW9uIFRlKGUsdCxuLHIsaSl7Zm9yKHZhciBvLGE9W10scz0wLHU9ZS5sZW5ndGgsbD1udWxsIT10O3M8dTtzKyspKG89ZVtzXSkmJihuJiYhbihvLHIsaSl8fChhLnB1c2gobyksbCYmdC5wdXNoKHMpKSk7cmV0dXJuIGF9ZnVuY3Rpb24gQ2UoZCxoLGcsdix5LGUpe3JldHVybiB2JiYhdltrXSYmKHY9Q2UodikpLHkmJiF5W2tdJiYoeT1DZSh5LGUpKSxsZShmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscz1bXSx1PVtdLGw9dC5sZW5ndGgsYz1lfHxmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPTAsaT10Lmxlbmd0aDtyPGk7cisrKXNlKGUsdFtyXSxuKTtyZXR1cm4gbn0oaHx8IioiLG4ubm9kZVR5cGU/W25dOm4sW10pLGY9IWR8fCFlJiZoP2M6VGUoYyxzLGQsbixyKSxwPWc/eXx8KGU/ZDpsfHx2KT9bXTp0OmY7aWYoZyYmZyhmLHAsbixyKSx2KXtpPVRlKHAsdSksdihpLFtdLG4sciksbz1pLmxlbmd0aDt3aGlsZShvLS0pKGE9aVtvXSkmJihwW3Vbb11dPSEoZlt1W29dXT1hKSl9aWYoZSl7aWYoeXx8ZCl7aWYoeSl7aT1bXSxvPXAubGVuZ3RoO3doaWxlKG8tLSkoYT1wW29dKSYmaS5wdXNoKGZbb109YSk7eShudWxsLHA9W10saSxyKX1vPXAubGVuZ3RoO3doaWxlKG8tLSkoYT1wW29dKSYmLTE8KGk9eT9QKGUsYSk6c1tvXSkmJihlW2ldPSEodFtpXT1hKSl9fWVsc2UgcD1UZShwPT09dD9wLnNwbGljZShsLHAubGVuZ3RoKTpwKSx5P3kobnVsbCx0LHAscik6SC5hcHBseSh0LHApfSl9ZnVuY3Rpb24gRWUoZSl7Zm9yKHZhciBpLHQsbixyPWUubGVuZ3RoLG89Yi5yZWxhdGl2ZVtlWzBdLnR5cGVdLGE9b3x8Yi5yZWxhdGl2ZVsiICJdLHM9bz8xOjAsdT1iZShmdW5jdGlvbihlKXtyZXR1cm4gZT09PWl9LGEsITApLGw9YmUoZnVuY3Rpb24oZSl7cmV0dXJuLTE8UChpLGUpfSxhLCEwKSxjPVtmdW5jdGlvbihlLHQsbil7dmFyIHI9IW8mJihufHx0IT09dyl8fCgoaT10KS5ub2RlVHlwZT91KGUsdCxuKTpsKGUsdCxuKSk7cmV0dXJuIGk9bnVsbCxyfV07czxyO3MrKylpZih0PWIucmVsYXRpdmVbZVtzXS50eXBlXSljPVtiZSh3ZShjKSx0KV07ZWxzZXtpZigodD1iLmZpbHRlcltlW3NdLnR5cGVdLmFwcGx5KG51bGwsZVtzXS5tYXRjaGVzKSlba10pe2ZvcihuPSsrcztuPHI7bisrKWlmKGIucmVsYXRpdmVbZVtuXS50eXBlXSlicmVhaztyZXR1cm4gQ2UoMTxzJiZ3ZShjKSwxPHMmJnhlKGUuc2xpY2UoMCxzLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09ZVtzLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoQiwiJDEiKSx0LHM8biYmRWUoZS5zbGljZShzLG4pKSxuPHImJkVlKGU9ZS5zbGljZShuKSksbjxyJiZ4ZShlKSl9Yy5wdXNoKHQpfXJldHVybiB3ZShjKX1yZXR1cm4gbWUucHJvdG90eXBlPWIuZmlsdGVycz1iLnBzZXVkb3MsYi5zZXRGaWx0ZXJzPW5ldyBtZSxoPXNlLnRva2VuaXplPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8sYSxzLHUsbD14W2UrIiAiXTtpZihsKXJldHVybiB0PzA6bC5zbGljZSgwKTthPWUscz1bXSx1PWIucHJlRmlsdGVyO3doaWxlKGEpe2ZvcihvIGluIG4mJiEocj1fLmV4ZWMoYSkpfHwociYmKGE9YS5zbGljZShyWzBdLmxlbmd0aCl8fGEpLHMucHVzaChpPVtdKSksbj0hMSwocj16LmV4ZWMoYSkpJiYobj1yLnNoaWZ0KCksaS5wdXNoKHt2YWx1ZTpuLHR5cGU6clswXS5yZXBsYWNlKEIsIiAiKX0pLGE9YS5zbGljZShuLmxlbmd0aCkpLGIuZmlsdGVyKSEocj1HW29dLmV4ZWMoYSkpfHx1W29dJiYhKHI9dVtvXShyKSl8fChuPXIuc2hpZnQoKSxpLnB1c2goe3ZhbHVlOm4sdHlwZTpvLG1hdGNoZXM6cn0pLGE9YS5zbGljZShuLmxlbmd0aCkpO2lmKCFuKWJyZWFrfXJldHVybiB0P2EubGVuZ3RoOmE/c2UuZXJyb3IoZSk6eChlLHMpLnNsaWNlKDApfSxmPXNlLmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbix2LHksbSx4LHIsaT1bXSxvPVtdLGE9TltlKyIgIl07aWYoIWEpe3R8fCh0PWgoZSkpLG49dC5sZW5ndGg7d2hpbGUobi0tKShhPUVlKHRbbl0pKVtrXT9pLnB1c2goYSk6by5wdXNoKGEpOyhhPU4oZSwodj1vLG09MDwoeT1pKS5sZW5ndGgseD0wPHYubGVuZ3RoLHI9ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsdT0wLGw9IjAiLGM9ZSYmW10sZj1bXSxwPXcsZD1lfHx4JiZiLmZpbmQuVEFHKCIqIixpKSxoPVMrPW51bGw9PXA/MTpNYXRoLnJhbmRvbSgpfHwuMSxnPWQubGVuZ3RoO2ZvcihpJiYodz10PT09Q3x8dHx8aSk7bCE9PWcmJm51bGwhPShvPWRbbF0pO2wrKyl7aWYoeCYmbyl7YT0wLHR8fG8ub3duZXJEb2N1bWVudD09PUN8fChUKG8pLG49IUUpO3doaWxlKHM9dlthKytdKWlmKHMobyx0fHxDLG4pKXtyLnB1c2gobyk7YnJlYWt9aSYmKFM9aCl9bSYmKChvPSFzJiZvKSYmdS0tLGUmJmMucHVzaChvKSl9aWYodSs9bCxtJiZsIT09dSl7YT0wO3doaWxlKHM9eVthKytdKXMoYyxmLHQsbik7aWYoZSl7aWYoMDx1KXdoaWxlKGwtLSljW2xdfHxmW2xdfHwoZltsXT1xLmNhbGwocikpO2Y9VGUoZil9SC5hcHBseShyLGYpLGkmJiFlJiYwPGYubGVuZ3RoJiYxPHUreS5sZW5ndGgmJnNlLnVuaXF1ZVNvcnQocil9cmV0dXJuIGkmJihTPWgsdz1wKSxjfSxtP2xlKHIpOnIpKSkuc2VsZWN0b3I9ZX1yZXR1cm4gYX0sZz1zZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLGM9IXImJmgoZT1sLnNlbGVjdG9yfHxlKTtpZihuPW58fFtdLDE9PT1jLmxlbmd0aCl7aWYoMjwobz1jWzBdPWNbMF0uc2xpY2UoMCkpLmxlbmd0aCYmIklEIj09PShhPW9bMF0pLnR5cGUmJjk9PT10Lm5vZGVUeXBlJiZFJiZiLnJlbGF0aXZlW29bMV0udHlwZV0pe2lmKCEodD0oYi5maW5kLklEKGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtsJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZShvLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPUcubmVlZHNDb250ZXh0LnRlc3QoZSk/MDpvLmxlbmd0aDt3aGlsZShpLS0pe2lmKGE9b1tpXSxiLnJlbGF0aXZlW3M9YS50eXBlXSlicmVhaztpZigodT1iLmZpbmRbc10pJiYocj11KGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSxlZS50ZXN0KG9bMF0udHlwZSkmJnllKHQucGFyZW50Tm9kZSl8fHQpKSl7aWYoby5zcGxpY2UoaSwxKSwhKGU9ci5sZW5ndGgmJnhlKG8pKSlyZXR1cm4gSC5hcHBseShuLHIpLG47YnJlYWt9fX1yZXR1cm4obHx8ZihlLGMpKShyLHQsIUUsbiwhdHx8ZWUudGVzdChlKSYmeWUodC5wYXJlbnROb2RlKXx8dCksbn0sZC5zb3J0U3RhYmxlPWsuc3BsaXQoIiIpLnNvcnQoRCkuam9pbigiIik9PT1rLGQuZGV0ZWN0RHVwbGljYXRlcz0hIWwsVCgpLGQuc29ydERldGFjaGVkPWNlKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQy5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGZlKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxkLmF0dHJpYnV0ZXMmJmNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGZlKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuJiYiaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxmZShSLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLHNlfShDKTtrLmZpbmQ9aCxrLmV4cHI9aC5zZWxlY3RvcnMsay5leHByWyI6Il09ay5leHByLnBzZXVkb3Msay51bmlxdWVTb3J0PWsudW5pcXVlPWgudW5pcXVlU29ydCxrLnRleHQ9aC5nZXRUZXh0LGsuaXNYTUxEb2M9aC5pc1hNTCxrLmNvbnRhaW5zPWguY29udGFpbnMsay5lc2NhcGVTZWxlY3Rvcj1oLmVzY2FwZTt2YXIgVD1mdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT12b2lkIDAhPT1uO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmayhlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LFM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LE49ay5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBBKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX12YXIgRD0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaTtmdW5jdGlvbiBqKGUsbixyKXtyZXR1cm4gbShuKT9rLmdyZXAoZSxmdW5jdGlvbihlLHQpe3JldHVybiEhbi5jYWxsKGUsdCxlKSE9PXJ9KTpuLm5vZGVUeXBlP2suZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09biE9PXJ9KToic3RyaW5nIiE9dHlwZW9mIG4/ay5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuLTE8aS5jYWxsKG4sZSkhPT1yfSk6ay5maWx0ZXIobixlLHIpfWsuZmlsdGVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1yLm5vZGVUeXBlP2suZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106ay5maW5kLm1hdGNoZXMoZSxrLmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LGsuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmxlbmd0aCxpPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayhrKGUpLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7dDxyO3QrKylpZihrLmNvbnRhaW5zKGlbdF0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKG49dGhpcy5wdXNoU3RhY2soW10pLHQ9MDt0PHI7dCsrKWsuZmluZChlLGlbdF0sbik7cmV0dXJuIDE8cj9rLnVuaXF1ZVNvcnQobik6bn0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhqKHRoaXMsZXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhqKHRoaXMsZXx8W10sITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFqKHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZOLnRlc3QoZSk/ayhlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBxLEw9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLzsoay5mbi5pbml0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpO2lmKCFlKXJldHVybiB0aGlzO2lmKG49bnx8cSwic3RyaW5nIj09dHlwZW9mIGUpe2lmKCEocj0iPCI9PT1lWzBdJiYiPiI9PT1lW2UubGVuZ3RoLTFdJiYzPD1lLmxlbmd0aD9bbnVsbCxlLG51bGxdOkwuZXhlYyhlKSl8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2Ygaz90WzBdOnQsay5tZXJnZSh0aGlzLGsucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6RSwhMCkpLEQudGVzdChyWzFdKSYmay5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpbSh0aGlzW3JdKT90aGlzW3JdKHRbcl0pOnRoaXMuYXR0cihyLHRbcl0pO3JldHVybiB0aGlzfXJldHVybihpPUUuZ2V0RWxlbWVudEJ5SWQoclsyXSkpJiYodGhpc1swXT1pLHRoaXMubGVuZ3RoPTEpLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOm0oZSk/dm9pZCAwIT09bi5yZWFkeT9uLnJlYWR5KGUpOmUoayk6ay5tYWtlQXJyYXkoZSx0aGlzKX0pLnByb3RvdHlwZT1rLmZuLHE9ayhFKTt2YXIgSD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxPPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2Z1bmN0aW9uIFAoZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfWsuZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9ayhlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxuO2UrKylpZihrLmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT0ic3RyaW5nIiE9dHlwZW9mIGUmJmsoZSk7aWYoIU4udGVzdChlKSlmb3IoO3I8aTtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYoYT8tMTxhLmluZGV4KG4pOjE9PT1uLm5vZGVUeXBlJiZrLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtvLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKDE8by5sZW5ndGg/ay51bmlxdWVTb3J0KG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/aS5jYWxsKGsoZSksdGhpc1swXSk6aS5jYWxsKHRoaXMsZS5qcXVlcnk/ZVswXTplKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnB1c2hTdGFjayhrLnVuaXF1ZVNvcnQoay5tZXJnZSh0aGlzLmdldCgpLGsoZSx0KSkpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksay5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBUKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gVChlLCJwYXJlbnROb2RlIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gUChlLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBQKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBUKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIFQoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFQoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBUKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBTKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gUyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGUuY29udGVudERvY3VtZW50P2UuY29udGVudERvY3VtZW50OihBKGUsInRlbXBsYXRlIikmJihlPWUuY29udGVudHx8ZSksay5tZXJnZShbXSxlLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKHIsaSl7ay5mbltyXT1mdW5jdGlvbihlLHQpe3ZhciBuPWsubWFwKHRoaXMsaSxlKTtyZXR1cm4iVW50aWwiIT09ci5zbGljZSgtNSkmJih0PWUpLHQmJiJzdHJpbmciPT10eXBlb2YgdCYmKG49ay5maWx0ZXIodCxuKSksMTx0aGlzLmxlbmd0aCYmKE9bcl18fGsudW5pcXVlU29ydChuKSxILnRlc3QocikmJm4ucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgUj0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIE0oZSl7cmV0dXJuIGV9ZnVuY3Rpb24gSShlKXt0aHJvdyBlfWZ1bmN0aW9uIFcoZSx0LG4scil7dmFyIGk7dHJ5e2UmJm0oaT1lLnByb21pc2UpP2kuY2FsbChlKS5kb25lKHQpLmZhaWwobik6ZSYmbShpPWUudGhlbik/aS5jYWxsKGUsdCxuKTp0LmFwcGx5KHZvaWQgMCxbZV0uc2xpY2UocikpfWNhdGNoKGUpe24uYXBwbHkodm9pZCAwLFtlXSl9fWsuQ2FsbGJhY2tzPWZ1bmN0aW9uKHIpe3ZhciBlLG47cj0ic3RyaW5nIj09dHlwZW9mIHI/KGU9cixuPXt9LGsuZWFjaChlLm1hdGNoKFIpfHxbXSxmdW5jdGlvbihlLHQpe25bdF09ITB9KSxuKTprLmV4dGVuZCh7fSxyKTt2YXIgaSx0LG8sYSxzPVtdLHU9W10sbD0tMSxjPWZ1bmN0aW9uKCl7Zm9yKGE9YXx8ci5vbmNlLG89aT0hMDt1Lmxlbmd0aDtsPS0xKXt0PXUuc2hpZnQoKTt3aGlsZSgrK2w8cy5sZW5ndGgpITE9PT1zW2xdLmFwcGx5KHRbMF0sdFsxXSkmJnIuc3RvcE9uRmFsc2UmJihsPXMubGVuZ3RoLHQ9ITEpfXIubWVtb3J5fHwodD0hMSksaT0hMSxhJiYocz10P1tdOiIiKX0sZj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIHMmJih0JiYhaSYmKGw9cy5sZW5ndGgtMSx1LnB1c2godCkpLGZ1bmN0aW9uIG4oZSl7ay5lYWNoKGUsZnVuY3Rpb24oZSx0KXttKHQpP3IudW5pcXVlJiZmLmhhcyh0KXx8cy5wdXNoKHQpOnQmJnQubGVuZ3RoJiYic3RyaW5nIiE9PXcodCkmJm4odCl9KX0oYXJndW1lbnRzKSx0JiYhaSYmYygpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gay5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKC0xPChuPWsuaW5BcnJheSh0LHMsbikpKXMuc3BsaWNlKG4sMSksbjw9bCYmbC0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlPy0xPGsuaW5BcnJheShlLHMpOjA8cy5sZW5ndGh9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHMmJihzPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT1bXSxzPXQ9IiIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sbG9jazpmdW5jdGlvbigpe3JldHVybiBhPXU9W10sdHx8aXx8KHM9dD0iIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFhfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiBhfHwodD1bZSwodD10fHxbXSkuc2xpY2U/dC5zbGljZSgpOnRdLHUucHVzaCh0KSxpfHxjKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW99fTtyZXR1cm4gZn0say5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciBvPVtbIm5vdGlmeSIsInByb2dyZXNzIixrLkNhbGxiYWNrcygibWVtb3J5Iiksay5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLGsuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGsuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixrLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxrLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxpPSJwZW5kaW5nIixhPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBpfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGEudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGk9YXJndW1lbnRzO3JldHVybiBrLkRlZmVycmVkKGZ1bmN0aW9uKHIpe2suZWFjaChvLGZ1bmN0aW9uKGUsdCl7dmFyIG49bShpW3RbNF1dKSYmaVt0WzRdXTtzW3RbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9biYmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmbShlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHIubm90aWZ5KS5kb25lKHIucmVzb2x2ZSkuZmFpbChyLnJlamVjdCk6clt0WzBdKyJXaXRoIl0odGhpcyxuP1tlXTphcmd1bWVudHMpfSl9KSxpPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxuLHIpe3ZhciB1PTA7ZnVuY3Rpb24gbChpLG8sYSxzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLHI9YXJndW1lbnRzLGU9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKCEoaTx1KSl7aWYoKGU9YS5hcHBseShuLHIpKT09PW8ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO3Q9ZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpJiZlLnRoZW4sbSh0KT9zP3QuY2FsbChlLGwodSxvLE0scyksbCh1LG8sSSxzKSk6KHUrKyx0LmNhbGwoZSxsKHUsbyxNLHMpLGwodSxvLEkscyksbCh1LG8sTSxvLm5vdGlmeVdpdGgpKSk6KGEhPT1NJiYobj12b2lkIDAscj1bZV0pLChzfHxvLnJlc29sdmVXaXRoKShuLHIpKX19LHQ9cz9lOmZ1bmN0aW9uKCl7dHJ5e2UoKX1jYXRjaChlKXtrLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJmsuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHQuc3RhY2tUcmFjZSksdTw9aSsxJiYoYSE9PUkmJihuPXZvaWQgMCxyPVtlXSksby5yZWplY3RXaXRoKG4scikpfX07aT90KCk6KGsuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYodC5zdGFja1RyYWNlPWsuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLEMuc2V0VGltZW91dCh0KSl9fXJldHVybiBrLkRlZmVycmVkKGZ1bmN0aW9uKGUpe29bMF1bM10uYWRkKGwoMCxlLG0ocik/cjpNLGUubm90aWZ5V2l0aCkpLG9bMV1bM10uYWRkKGwoMCxlLG0odCk/dDpNKSksb1syXVszXS5hZGQobCgwLGUsbShuKT9uOkkpKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9rLmV4dGVuZChlLGEpOmF9fSxzPXt9O3JldHVybiBrLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPXRbMl0scj10WzVdO2FbdFsxXV09bi5hZGQsciYmbi5hZGQoZnVuY3Rpb24oKXtpPXJ9LG9bMy1lXVsyXS5kaXNhYmxlLG9bMy1lXVszXS5kaXNhYmxlLG9bMF1bMl0ubG9jayxvWzBdWzNdLmxvY2spLG4uYWRkKHRbM10uZmlyZSksc1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBzW3RbMF0rIldpdGgiXSh0aGlzPT09cz92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LHNbdFswXSsiV2l0aCJdPW4uZmlyZVdpdGh9KSxhLnByb21pc2UocyksZSYmZS5jYWxsKHMscyksc30sd2hlbjpmdW5jdGlvbihlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHQ9bixyPUFycmF5KHQpLGk9cy5jYWxsKGFyZ3VtZW50cyksbz1rLkRlZmVycmVkKCksYT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7clt0XT10aGlzLGlbdF09MTxhcmd1bWVudHMubGVuZ3RoP3MuY2FsbChhcmd1bWVudHMpOmUsLS1ufHxvLnJlc29sdmVXaXRoKHIsaSl9fTtpZihuPD0xJiYoVyhlLG8uZG9uZShhKHQpKS5yZXNvbHZlLG8ucmVqZWN0LCFuKSwicGVuZGluZyI9PT1vLnN0YXRlKCl8fG0oaVt0XSYmaVt0XS50aGVuKSkpcmV0dXJuIG8udGhlbigpO3doaWxlKHQtLSlXKGlbdF0sYSh0KSxvLnJlamVjdCk7cmV0dXJuIG8ucHJvbWlzZSgpfX0pO3ZhciAkPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO2suRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlLHQpe0MuY29uc29sZSYmQy5jb25zb2xlLndhcm4mJmUmJiQudGVzdChlLm5hbWUpJiZDLmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIitlLm1lc3NhZ2UsZS5zdGFjayx0KX0say5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlKXtDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9O3ZhciBGPWsuRGVmZXJyZWQoKTtmdW5jdGlvbiBCKCl7RS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixCKSxDLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLEIpLGsucmVhZHkoKX1rLmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7ay5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LGsuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS1rLnJlYWR5V2FpdDprLmlzUmVhZHkpfHwoay5pc1JlYWR5PSEwKSE9PWUmJjA8LS1rLnJlYWR5V2FpdHx8Ri5yZXNvbHZlV2l0aChFLFtrXSl9fSksay5yZWFkeS50aGVuPUYudGhlbiwiY29tcGxldGUiPT09RS5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1FLnJlYWR5U3RhdGUmJiFFLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9DLnNldFRpbWVvdXQoay5yZWFkeSk6KEUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQiksQy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixCKSk7dmFyIF89ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZigib2JqZWN0Ij09PXcobikpZm9yKHMgaW4gaT0hMCxuKV8oZSx0LHMsbltzXSwhMCxvLGEpO2Vsc2UgaWYodm9pZCAwIT09ciYmKGk9ITAsbShyKXx8KGE9ITApLGwmJihhPyh0LmNhbGwoZSxyKSx0PW51bGwpOihsPXQsdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY2FsbChrKGUpLG4pfSkpLHQpKWZvcig7czx1O3MrKyl0KGVbc10sbixhP3I6ci5jYWxsKGVbc10scyx0KGVbc10sbikpKTtyZXR1cm4gaT9lOmw/dC5jYWxsKGUpOnU/dChlWzBdLG4pOm99LHo9L14tbXMtLyxVPS8tKFthLXpdKS9nO2Z1bmN0aW9uIFgoZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIFYoZSl7cmV0dXJuIGUucmVwbGFjZSh6LCJtcy0iKS5yZXBsYWNlKFUsWCl9dmFyIEc9ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfHw5PT09ZS5ub2RlVHlwZXx8IStlLm5vZGVUeXBlfTtmdW5jdGlvbiBZKCl7dGhpcy5leHBhbmRvPWsuZXhwYW5kbytZLnVpZCsrfVkudWlkPTEsWS5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdHx8KHQ9e30sRyhlKSYmKGUubm9kZVR5cGU/ZVt0aGlzLmV4cGFuZG9dPXQ6T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy5leHBhbmRvLHt2YWx1ZTp0LGNvbmZpZ3VyYWJsZTohMH0pKSksdH0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMuY2FjaGUoZSk7aWYoInN0cmluZyI9PXR5cGVvZiB0KWlbVih0KV09bjtlbHNlIGZvcihyIGluIHQpaVtWKHIpXT10W3JdO3JldHVybiBpfSxnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD90aGlzLmNhY2hlKGUpOmVbdGhpcy5leHBhbmRvXSYmZVt0aGlzLmV4cGFuZG9dW1YodCldfSxhY2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT10fHx0JiYic3RyaW5nIj09dHlwZW9mIHQmJnZvaWQgMD09PW4/dGhpcy5nZXQoZSx0KToodGhpcy5zZXQoZSx0LG4pLHZvaWQgMCE9PW4/bjp0KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lW3RoaXMuZXhwYW5kb107aWYodm9pZCAwIT09cil7aWYodm9pZCAwIT09dCl7bj0odD1BcnJheS5pc0FycmF5KHQpP3QubWFwKFYpOih0PVYodCkpaW4gcj9bdF06dC5tYXRjaChSKXx8W10pLmxlbmd0aDt3aGlsZShuLS0pZGVsZXRlIHJbdFtuXV19KHZvaWQgMD09PXR8fGsuaXNFbXB0eU9iamVjdChyKSkmJihlLm5vZGVUeXBlP2VbdGhpcy5leHBhbmRvXT12b2lkIDA6ZGVsZXRlIGVbdGhpcy5leHBhbmRvXSl9fSxoYXNEYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdm9pZCAwIT09dCYmIWsuaXNFbXB0eU9iamVjdCh0KX19O3ZhciBRPW5ldyBZLEo9bmV3IFksSz0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLFo9L1tBLVpdL2c7ZnVuY3Rpb24gZWUoZSx0LG4pe3ZhciByLGk7aWYodm9pZCAwPT09biYmMT09PWUubm9kZVR5cGUpaWYocj0iZGF0YS0iK3QucmVwbGFjZShaLCItJCYiKS50b0xvd2VyQ2FzZSgpLCJzdHJpbmciPT10eXBlb2Yobj1lLmdldEF0dHJpYnV0ZShyKSkpe3RyeXtuPSJ0cnVlIj09PShpPW4pfHwiZmFsc2UiIT09aSYmKCJudWxsIj09PWk/bnVsbDppPT09K2krIiI/K2k6Sy50ZXN0KGkpP0pTT04ucGFyc2UoaSk6aSl9Y2F0Y2goZSl7fUouc2V0KGUsdCxuKX1lbHNlIG49dm9pZCAwO3JldHVybiBufWsuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBKLmhhc0RhdGEoZSl8fFEuaGFzRGF0YShlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEouYWNjZXNzKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0oucmVtb3ZlKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUS5hY2Nlc3MoZSx0LG4pfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe1EucmVtb3ZlKGUsdCl9fSksay5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24obixlKXt2YXIgdCxyLGksbz10aGlzWzBdLGE9byYmby5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PW4pe2lmKHRoaXMubGVuZ3RoJiYoaT1KLmdldChvKSwxPT09by5ub2RlVHlwZSYmIVEuZ2V0KG8sImhhc0RhdGFBdHRycyIpKSl7dD1hLmxlbmd0aDt3aGlsZSh0LS0pYVt0XSYmMD09PShyPWFbdF0ubmFtZSkuaW5kZXhPZigiZGF0YS0iKSYmKHI9VihyLnNsaWNlKDUpKSxlZShvLHIsaVtyXSkpO1Euc2V0KG8sImhhc0RhdGFBdHRycyIsITApfXJldHVybiBpfXJldHVybiJvYmplY3QiPT10eXBlb2Ygbj90aGlzLmVhY2goZnVuY3Rpb24oKXtKLnNldCh0aGlzLG4pfSk6Xyh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0O2lmKG8mJnZvaWQgMD09PWUpcmV0dXJuIHZvaWQgMCE9PSh0PUouZ2V0KG8sbikpP3Q6dm9pZCAwIT09KHQ9ZWUobyxuKSk/dDp2b2lkIDA7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Si5zZXQodGhpcyxuLGUpfSl9LG51bGwsZSwxPGFyZ3VtZW50cy5sZW5ndGgsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe0oucmVtb3ZlKHRoaXMsZSl9KX19KSxrLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKGUpcmV0dXJuIHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1RLmdldChlLHQpLG4mJighcnx8QXJyYXkuaXNBcnJheShuKT9yPVEuYWNjZXNzKGUsdCxrLm1ha2VBcnJheShuKSk6ci5wdXNoKG4pKSxyfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj1rLnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPWsuX3F1ZXVlSG9va3MoZSx0KTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxpJiYoImZ4Ij09PXQmJm4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBvLnN0b3AsaS5jYWxsKGUsZnVuY3Rpb24oKXtrLmRlcXVldWUoZSx0KX0sbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10KyJxdWV1ZUhvb2tzIjtyZXR1cm4gUS5nZXQoZSxuKXx8US5hY2Nlc3MoZSxuLHtlbXB0eTprLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtRLnJlbW92ZShlLFt0KyJxdWV1ZSIsbl0pfSl9KX19KSxrLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24odCxuKXt2YXIgZT0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSJmeCIsZS0tKSxhcmd1bWVudHMubGVuZ3RoPGU/ay5xdWV1ZSh0aGlzWzBdLHQpOnZvaWQgMD09PW4/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1rLnF1ZXVlKHRoaXMsdCxuKTtrLl9xdWV1ZUhvb2tzKHRoaXMsdCksImZ4Ij09PXQmJiJpbnByb2dyZXNzIiE9PWVbMF0mJmsuZGVxdWV1ZSh0aGlzLHQpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2suZGVxdWV1ZSh0aGlzLGUpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTEsaT1rLkRlZmVycmVkKCksbz10aGlzLGE9dGhpcy5sZW5ndGgscz1mdW5jdGlvbigpey0tcnx8aS5yZXNvbHZlV2l0aChvLFtvXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksZT1lfHwiZngiO3doaWxlKGEtLSkobj1RLmdldChvW2FdLGUrInF1ZXVlSG9va3MiKSkmJm4uZW1wdHkmJihyKyssbi5lbXB0eS5hZGQocykpO3JldHVybiBzKCksaS5wcm9taXNlKHQpfX0pO3ZhciB0ZT0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxuZT1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrdGUrIikoW2EteiVdKikkIiwiaSIpLHJlPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0saWU9RS5kb2N1bWVudEVsZW1lbnQsb2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGsuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfSxhZT17Y29tcG9zZWQ6ITB9O2llLmdldFJvb3ROb2RlJiYob2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGsuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHxlLmdldFJvb3ROb2RlKGFlKT09PWUub3duZXJEb2N1bWVudH0pO3ZhciBzZT1mdW5jdGlvbihlLHQpe3JldHVybiJub25lIj09PShlPXR8fGUpLnN0eWxlLmRpc3BsYXl8fCIiPT09ZS5zdHlsZS5kaXNwbGF5JiZvZShlKSYmIm5vbmUiPT09ay5jc3MoZSwiZGlzcGxheSIpfSx1ZT1mdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGE9e307Zm9yKG8gaW4gdClhW29dPWUuc3R5bGVbb10sZS5zdHlsZVtvXT10W29dO2ZvcihvIGluIGk9bi5hcHBseShlLHJ8fFtdKSx0KWUuc3R5bGVbb109YVtvXTtyZXR1cm4gaX07ZnVuY3Rpb24gbGUoZSx0LG4scil7dmFyIGksbyxhPTIwLHM9cj9mdW5jdGlvbigpe3JldHVybiByLmN1cigpfTpmdW5jdGlvbigpe3JldHVybiBrLmNzcyhlLHQsIiIpfSx1PXMoKSxsPW4mJm5bM118fChrLmNzc051bWJlclt0XT8iIjoicHgiKSxjPWUubm9kZVR5cGUmJihrLmNzc051bWJlclt0XXx8InB4IiE9PWwmJit1KSYmbmUuZXhlYyhrLmNzcyhlLHQpKTtpZihjJiZjWzNdIT09bCl7dS89MixsPWx8fGNbM10sYz0rdXx8MTt3aGlsZShhLS0pay5zdHlsZShlLHQsYytsKSwoMS1vKSooMS0obz1zKCkvdXx8LjUpKTw9MCYmKGE9MCksYy89bztjKj0yLGsuc3R5bGUoZSx0LGMrbCksbj1ufHxbXX1yZXR1cm4gbiYmKGM9K2N8fCt1fHwwLGk9blsxXT9jKyhuWzFdKzEpKm5bMl06K25bMl0sciYmKHIudW5pdD1sLHIuc3RhcnQ9YyxyLmVuZD1pKSksaX12YXIgY2U9e307ZnVuY3Rpb24gZmUoZSx0KXtmb3IodmFyIG4scixpLG8sYSxzLHUsbD1bXSxjPTAsZj1lLmxlbmd0aDtjPGY7YysrKShyPWVbY10pLnN0eWxlJiYobj1yLnN0eWxlLmRpc3BsYXksdD8oIm5vbmUiPT09biYmKGxbY109US5nZXQociwiZGlzcGxheSIpfHxudWxsLGxbY118fChyLnN0eWxlLmRpc3BsYXk9IiIpKSwiIj09PXIuc3R5bGUuZGlzcGxheSYmc2UocikmJihsW2NdPSh1PWE9bz12b2lkIDAsYT0oaT1yKS5vd25lckRvY3VtZW50LHM9aS5ub2RlTmFtZSwodT1jZVtzXSl8fChvPWEuYm9keS5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQocykpLHU9ay5jc3MobywiZGlzcGxheSIpLG8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKSwibm9uZSI9PT11JiYodT0iYmxvY2siKSxjZVtzXT11KSkpKToibm9uZSIhPT1uJiYobFtjXT0ibm9uZSIsUS5zZXQociwiZGlzcGxheSIsbikpKTtmb3IoYz0wO2M8ZjtjKyspbnVsbCE9bFtjXSYmKGVbY10uc3R5bGUuZGlzcGxheT1sW2NdKTtyZXR1cm4gZX1rLmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbigpe3JldHVybiBmZSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBmZSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGU/ZT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtzZSh0aGlzKT9rKHRoaXMpLnNob3coKTprKHRoaXMpLmhpZGUoKX0pfX0pO3ZhciBwZT0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxkZT0vPChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKikvaSxoZT0vXiR8Xm1vZHVsZSR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksZ2U9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtmdW5jdGlvbiB2ZShlLHQpe3ZhciBuO3JldHVybiBuPSJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKHR8fCIqIik6InVuZGVmaW5lZCIhPXR5cGVvZiBlLnF1ZXJ5U2VsZWN0b3JBbGw/ZS5xdWVyeVNlbGVjdG9yQWxsKHR8fCIqIik6W10sdm9pZCAwPT09dHx8dCYmQShlLHQpP2subWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24geWUoZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspUS5zZXQoZVtuXSwiZ2xvYmFsRXZhbCIsIXR8fFEuZ2V0KHRbbl0sImdsb2JhbEV2YWwiKSl9Z2Uub3B0Z3JvdXA9Z2Uub3B0aW9uLGdlLnRib2R5PWdlLnRmb290PWdlLmNvbGdyb3VwPWdlLmNhcHRpb249Z2UudGhlYWQsZ2UudGg9Z2UudGQ7dmFyIG1lLHhlLGJlPS88fCYjP1x3KzsvO2Z1bmN0aW9uIHdlKGUsdCxuLHIsaSl7Zm9yKHZhciBvLGEscyx1LGwsYyxmPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHA9W10sZD0wLGg9ZS5sZW5ndGg7ZDxoO2QrKylpZigobz1lW2RdKXx8MD09PW8paWYoIm9iamVjdCI9PT13KG8pKWsubWVyZ2UocCxvLm5vZGVUeXBlP1tvXTpvKTtlbHNlIGlmKGJlLnRlc3Qobykpe2E9YXx8Zi5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxzPShkZS5leGVjKG8pfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLHU9Z2Vbc118fGdlLl9kZWZhdWx0LGEuaW5uZXJIVE1MPXVbMV0ray5odG1sUHJlZmlsdGVyKG8pK3VbMl0sYz11WzBdO3doaWxlKGMtLSlhPWEubGFzdENoaWxkO2subWVyZ2UocCxhLmNoaWxkTm9kZXMpLChhPWYuZmlyc3RDaGlsZCkudGV4dENvbnRlbnQ9IiJ9ZWxzZSBwLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7Zi50ZXh0Q29udGVudD0iIixkPTA7d2hpbGUobz1wW2QrK10paWYociYmLTE8ay5pbkFycmF5KG8scikpaSYmaS5wdXNoKG8pO2Vsc2UgaWYobD1vZShvKSxhPXZlKGYuYXBwZW5kQ2hpbGQobyksInNjcmlwdCIpLGwmJnllKGEpLG4pe2M9MDt3aGlsZShvPWFbYysrXSloZS50ZXN0KG8udHlwZXx8IiIpJiZuLnB1c2gobyl9cmV0dXJuIGZ9bWU9RS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkuYXBwZW5kQ2hpbGQoRS5jcmVhdGVFbGVtZW50KCJkaXYiKSksKHhlPUUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkuc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSx4ZS5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIikseGUuc2V0QXR0cmlidXRlKCJuYW1lIiwidCIpLG1lLmFwcGVuZENoaWxkKHhlKSx5LmNoZWNrQ2xvbmU9bWUuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLG1lLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIseS5ub0Nsb25lQ2hlY2tlZD0hIW1lLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTt2YXIgVGU9L15rZXkvLENlPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxFZT0vXihbXi5dKikoPzpcLiguKyl8KS87ZnVuY3Rpb24ga2UoKXtyZXR1cm4hMH1mdW5jdGlvbiBTZSgpe3JldHVybiExfWZ1bmN0aW9uIE5lKGUsdCl7cmV0dXJuIGU9PT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gRS5hY3RpdmVFbGVtZW50fWNhdGNoKGUpe319KCk9PSgiZm9jdXMiPT09dCl9ZnVuY3Rpb24gQWUoZSx0LG4scixpLG8pe3ZhciBhLHM7aWYoIm9iamVjdCI9PXR5cGVvZiB0KXtmb3IocyBpbiJzdHJpbmciIT10eXBlb2YgbiYmKHI9cnx8bixuPXZvaWQgMCksdClBZShlLHMsbixyLHRbc10sbyk7cmV0dXJuIGV9aWYobnVsbD09ciYmbnVsbD09aT8oaT1uLHI9bj12b2lkIDApOm51bGw9PWkmJigic3RyaW5nIj09dHlwZW9mIG4/KGk9cixyPXZvaWQgMCk6KGk9cixyPW4sbj12b2lkIDApKSwhMT09PWkpaT1TZTtlbHNlIGlmKCFpKXJldHVybiBlO3JldHVybiAxPT09byYmKGE9aSwoaT1mdW5jdGlvbihlKXtyZXR1cm4gaygpLm9mZihlKSxhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLmd1aWQ9YS5ndWlkfHwoYS5ndWlkPWsuZ3VpZCsrKSksZS5lYWNoKGZ1bmN0aW9uKCl7ay5ldmVudC5hZGQodGhpcyx0LGkscixuKX0pfWZ1bmN0aW9uIERlKGUsaSxvKXtvPyhRLnNldChlLGksITEpLGsuZXZlbnQuYWRkKGUsaSx7bmFtZXNwYWNlOiExLGhhbmRsZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPVEuZ2V0KHRoaXMsaSk7aWYoMSZlLmlzVHJpZ2dlciYmdGhpc1tpXSl7aWYoci5sZW5ndGgpKGsuZXZlbnQuc3BlY2lhbFtpXXx8e30pLmRlbGVnYXRlVHlwZSYmZS5zdG9wUHJvcGFnYXRpb24oKTtlbHNlIGlmKHI9cy5jYWxsKGFyZ3VtZW50cyksUS5zZXQodGhpcyxpLHIpLHQ9byh0aGlzLGkpLHRoaXNbaV0oKSxyIT09KG49US5nZXQodGhpcyxpKSl8fHQ/US5zZXQodGhpcyxpLCExKTpuPXt9LHIhPT1uKXJldHVybiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSxuLnZhbHVlfWVsc2Ugci5sZW5ndGgmJihRLnNldCh0aGlzLGkse3ZhbHVlOmsuZXZlbnQudHJpZ2dlcihrLmV4dGVuZChyWzBdLGsuRXZlbnQucHJvdG90eXBlKSxyLnNsaWNlKDEpLHRoaXMpfSksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSl9fSkpOnZvaWQgMD09PVEuZ2V0KGUsaSkmJmsuZXZlbnQuYWRkKGUsaSxrZSl9ay5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbih0LGUsbixyLGkpe3ZhciBvLGEscyx1LGwsYyxmLHAsZCxoLGcsdj1RLmdldCh0KTtpZih2KXtuLmhhbmRsZXImJihuPShvPW4pLmhhbmRsZXIsaT1vLnNlbGVjdG9yKSxpJiZrLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGllLGkpLG4uZ3VpZHx8KG4uZ3VpZD1rLmd1aWQrKyksKHU9di5ldmVudHMpfHwodT12LmV2ZW50cz17fSksKGE9di5oYW5kbGUpfHwoYT12LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGsmJmsuZXZlbnQudHJpZ2dlcmVkIT09ZS50eXBlP2suZXZlbnQuZGlzcGF0Y2guYXBwbHkodCxhcmd1bWVudHMpOnZvaWQgMH0pLGw9KGU9KGV8fCIiKS5tYXRjaChSKXx8WyIiXSkubGVuZ3RoO3doaWxlKGwtLSlkPWc9KHM9RWUuZXhlYyhlW2xdKXx8W10pWzFdLGg9KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkJiYoZj1rLmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KGk/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGQsZj1rLmV2ZW50LnNwZWNpYWxbZF18fHt9LGM9ay5leHRlbmQoe3R5cGU6ZCxvcmlnVHlwZTpnLGRhdGE6cixoYW5kbGVyOm4sZ3VpZDpuLmd1aWQsc2VsZWN0b3I6aSxuZWVkc0NvbnRleHQ6aSYmay5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGkpLG5hbWVzcGFjZTpoLmpvaW4oIi4iKX0sbyksKHA9dVtkXSl8fCgocD11W2RdPVtdKS5kZWxlZ2F0ZUNvdW50PTAsZi5zZXR1cCYmITEhPT1mLnNldHVwLmNhbGwodCxyLGgsYSl8fHQuYWRkRXZlbnRMaXN0ZW5lciYmdC5hZGRFdmVudExpc3RlbmVyKGQsYSkpLGYuYWRkJiYoZi5hZGQuY2FsbCh0LGMpLGMuaGFuZGxlci5ndWlkfHwoYy5oYW5kbGVyLmd1aWQ9bi5ndWlkKSksaT9wLnNwbGljZShwLmRlbGVnYXRlQ291bnQrKywwLGMpOnAucHVzaChjKSxrLmV2ZW50Lmdsb2JhbFtkXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9US5oYXNEYXRhKGUpJiZRLmdldChlKTtpZih2JiYodT12LmV2ZW50cykpe2w9KHQ9KHR8fCIiKS5tYXRjaChSKXx8WyIiXSkubGVuZ3RoO3doaWxlKGwtLSlpZihkPWc9KHM9RWUuZXhlYyh0W2xdKXx8W10pWzFdLGg9KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkKXtmPWsuZXZlbnQuc3BlY2lhbFtkXXx8e30scD11W2Q9KHI/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGRdfHxbXSxzPXNbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK2guam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksYT1vPXAubGVuZ3RoO3doaWxlKG8tLSljPXBbb10sIWkmJmchPT1jLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1jLmd1aWR8fHMmJiFzLnRlc3QoYy5uYW1lc3BhY2UpfHxyJiZyIT09Yy5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYy5zZWxlY3Rvcil8fChwLnNwbGljZShvLDEpLGMuc2VsZWN0b3ImJnAuZGVsZWdhdGVDb3VudC0tLGYucmVtb3ZlJiZmLnJlbW92ZS5jYWxsKGUsYykpO2EmJiFwLmxlbmd0aCYmKGYudGVhcmRvd24mJiExIT09Zi50ZWFyZG93bi5jYWxsKGUsaCx2LmhhbmRsZSl8fGsucmVtb3ZlRXZlbnQoZSxkLHYuaGFuZGxlKSxkZWxldGUgdVtkXSl9ZWxzZSBmb3IoZCBpbiB1KWsuZXZlbnQucmVtb3ZlKGUsZCt0W2xdLG4sciwhMCk7ay5pc0VtcHR5T2JqZWN0KHUpJiZRLnJlbW92ZShlLCJoYW5kbGUgZXZlbnRzIil9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscz1rLmV2ZW50LmZpeChlKSx1PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKSxsPShRLmdldCh0aGlzLCJldmVudHMiKXx8e30pW3MudHlwZV18fFtdLGM9ay5ldmVudC5zcGVjaWFsW3MudHlwZV18fHt9O2Zvcih1WzBdPXMsdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspdVt0XT1hcmd1bWVudHNbdF07aWYocy5kZWxlZ2F0ZVRhcmdldD10aGlzLCFjLnByZURpc3BhdGNofHwhMSE9PWMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLHMpKXthPWsuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLHMsbCksdD0wO3doaWxlKChpPWFbdCsrXSkmJiFzLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe3MuY3VycmVudFRhcmdldD1pLmVsZW0sbj0wO3doaWxlKChvPWkuaGFuZGxlcnNbbisrXSkmJiFzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpcy5ybmFtZXNwYWNlJiYhMSE9PW8ubmFtZXNwYWNlJiYhcy5ybmFtZXNwYWNlLnRlc3Qoby5uYW1lc3BhY2UpfHwocy5oYW5kbGVPYmo9byxzLmRhdGE9by5kYXRhLHZvaWQgMCE9PShyPSgoay5ldmVudC5zcGVjaWFsW28ub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxvLmhhbmRsZXIpLmFwcGx5KGkuZWxlbSx1KSkmJiExPT09KHMucmVzdWx0PXIpJiYocy5wcmV2ZW50RGVmYXVsdCgpLHMuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gYy5wb3N0RGlzcGF0Y2gmJmMucG9zdERpc3BhdGNoLmNhbGwodGhpcyxzKSxzLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8sYSxzPVtdLHU9dC5kZWxlZ2F0ZUNvdW50LGw9ZS50YXJnZXQ7aWYodSYmbC5ub2RlVHlwZSYmISgiY2xpY2siPT09ZS50eXBlJiYxPD1lLmJ1dHRvbikpZm9yKDtsIT09dGhpcztsPWwucGFyZW50Tm9kZXx8dGhpcylpZigxPT09bC5ub2RlVHlwZSYmKCJjbGljayIhPT1lLnR5cGV8fCEwIT09bC5kaXNhYmxlZCkpe2ZvcihvPVtdLGE9e30sbj0wO248dTtuKyspdm9pZCAwPT09YVtpPShyPXRbbl0pLnNlbGVjdG9yKyIgIl0mJihhW2ldPXIubmVlZHNDb250ZXh0Py0xPGsoaSx0aGlzKS5pbmRleChsKTprLmZpbmQoaSx0aGlzLG51bGwsW2xdKS5sZW5ndGgpLGFbaV0mJm8ucHVzaChyKTtvLmxlbmd0aCYmcy5wdXNoKHtlbGVtOmwsaGFuZGxlcnM6b30pfXJldHVybiBsPXRoaXMsdTx0Lmxlbmd0aCYmcy5wdXNoKHtlbGVtOmwsaGFuZGxlcnM6dC5zbGljZSh1KX0pLHN9LGFkZFByb3A6ZnVuY3Rpb24odCxlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoay5FdmVudC5wcm90b3R5cGUsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0Om0oZSk/ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIGUodGhpcy5vcmlnaW5hbEV2ZW50KX06ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFt0XX0sc2V0OmZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmV9KX19KX0sZml4OmZ1bmN0aW9uKGUpe3JldHVybiBlW2suZXhwYW5kb10/ZTpuZXcgay5FdmVudChlKX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGNsaWNrOntzZXR1cDpmdW5jdGlvbihlKXt2YXIgdD10aGlzfHxlO3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCwiaW5wdXQiKSYmRGUodCwiY2xpY2siLGtlKSwhMX0sdHJpZ2dlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzfHxlO3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCwiaW5wdXQiKSYmRGUodCwiY2xpY2siKSwhMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZRLmdldCh0LCJjbGljayIpfHxBKHQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUucmVzdWx0JiZlLm9yaWdpbmFsRXZlbnQmJihlLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZS5yZXN1bHQpfX19fSxrLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4pfSxrLkV2ZW50PWZ1bmN0aW9uKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2Ygay5FdmVudCkpcmV0dXJuIG5ldyBrLkV2ZW50KGUsdCk7ZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09ZS5kZWZhdWx0UHJldmVudGVkJiYhMT09PWUucmV0dXJuVmFsdWU/a2U6U2UsdGhpcy50YXJnZXQ9ZS50YXJnZXQmJjM9PT1lLnRhcmdldC5ub2RlVHlwZT9lLnRhcmdldC5wYXJlbnROb2RlOmUudGFyZ2V0LHRoaXMuY3VycmVudFRhcmdldD1lLmN1cnJlbnRUYXJnZXQsdGhpcy5yZWxhdGVkVGFyZ2V0PWUucmVsYXRlZFRhcmdldCk6dGhpcy50eXBlPWUsdCYmay5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8RGF0ZS5ub3coKSx0aGlzW2suZXhwYW5kb109ITB9LGsuRXZlbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjprLkV2ZW50LGlzRGVmYXVsdFByZXZlbnRlZDpTZSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpTZSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpTZSxpc1NpbXVsYXRlZDohMSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1rZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1rZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9a2UsZSYmIXRoaXMuaXNTaW11bGF0ZWQmJmUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LGsuZWFjaCh7YWx0S2V5OiEwLGJ1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxjaGFuZ2VkVG91Y2hlczohMCxjdHJsS2V5OiEwLGRldGFpbDohMCxldmVudFBoYXNlOiEwLG1ldGFLZXk6ITAscGFnZVg6ITAscGFnZVk6ITAsc2hpZnRLZXk6ITAsdmlldzohMCwiY2hhciI6ITAsY29kZTohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihlKXt2YXIgdD1lLmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS53aGljaCYmVGUudGVzdChlLnR5cGUpP251bGwhPWUuY2hhckNvZGU/ZS5jaGFyQ29kZTplLmtleUNvZGU6IWUud2hpY2gmJnZvaWQgMCE9PXQmJkNlLnRlc3QoZS50eXBlKT8xJnQ/MToyJnQ/Mzo0JnQ/MjowOmUud2hpY2h9fSxrLmV2ZW50LmFkZFByb3ApLGsuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oZSx0KXtrLmV2ZW50LnNwZWNpYWxbZV09e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIERlKHRoaXMsZSxOZSksITF9LHRyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gRGUodGhpcyxlKSwhMH0sZGVsZWdhdGVUeXBlOnR9fSksay5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihlLGkpe2suZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOmksYmluZFR5cGU6aSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnJlbGF0ZWRUYXJnZXQscj1lLmhhbmRsZU9iajtyZXR1cm4gbiYmKG49PT10aGlzfHxrLmNvbnRhaW5zKHRoaXMsbikpfHwoZS50eXBlPXIub3JpZ1R5cGUsdD1yLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT1pKSx0fX19KSxrLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIEFlKHRoaXMsZSx0LG4scil9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gQWUodGhpcyxlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmosayhlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZSsiLiIrci5uYW1lc3BhY2U6ci5vcmlnVHlwZSxyLnNlbGVjdG9yLHIuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGUpe2ZvcihpIGluIGUpdGhpcy5vZmYoaSx0LGVbaV0pO3JldHVybiB0aGlzfXJldHVybiExIT09dCYmImZ1bmN0aW9uIiE9dHlwZW9mIHR8fChuPXQsdD12b2lkIDApLCExPT09biYmKG49U2UpLHRoaXMuZWFjaChmdW5jdGlvbigpe2suZXZlbnQucmVtb3ZlKHRoaXMsZSxuLHQpfSl9fSk7dmFyIGplPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKVtePl0qKVwvPi9naSxxZT0vPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxMZT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxIZT0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2c7ZnVuY3Rpb24gT2UoZSx0KXtyZXR1cm4gQShlLCJ0YWJsZSIpJiZBKDExIT09dC5ub2RlVHlwZT90OnQuZmlyc3RDaGlsZCwidHIiKSYmayhlKS5jaGlsZHJlbigidGJvZHkiKVswXXx8ZX1mdW5jdGlvbiBQZShlKXtyZXR1cm4gZS50eXBlPShudWxsIT09ZS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkrIi8iK2UudHlwZSxlfWZ1bmN0aW9uIFJlKGUpe3JldHVybiJ0cnVlLyI9PT0oZS50eXBlfHwiIikuc2xpY2UoMCw1KT9lLnR5cGU9ZS50eXBlLnNsaWNlKDUpOmUucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksZX1mdW5jdGlvbiBNZShlLHQpe3ZhciBuLHIsaSxvLGEscyx1LGw7aWYoMT09PXQubm9kZVR5cGUpe2lmKFEuaGFzRGF0YShlKSYmKG89US5hY2Nlc3MoZSksYT1RLnNldCh0LG8pLGw9by5ldmVudHMpKWZvcihpIGluIGRlbGV0ZSBhLmhhbmRsZSxhLmV2ZW50cz17fSxsKWZvcihuPTAscj1sW2ldLmxlbmd0aDtuPHI7bisrKWsuZXZlbnQuYWRkKHQsaSxsW2ldW25dKTtKLmhhc0RhdGEoZSkmJihzPUouYWNjZXNzKGUpLHU9ay5leHRlbmQoe30scyksSi5zZXQodCx1KSl9fWZ1bmN0aW9uIEllKG4scixpLG8pe3I9Zy5hcHBseShbXSxyKTt2YXIgZSx0LGEscyx1LGwsYz0wLGY9bi5sZW5ndGgscD1mLTEsZD1yWzBdLGg9bShkKTtpZihofHwxPGYmJiJzdHJpbmciPT10eXBlb2YgZCYmIXkuY2hlY2tDbG9uZSYmTGUudGVzdChkKSlyZXR1cm4gbi5lYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW4uZXEoZSk7aCYmKHJbMF09ZC5jYWxsKHRoaXMsZSx0Lmh0bWwoKSkpLEllKHQscixpLG8pfSk7aWYoZiYmKHQ9KGU9d2UocixuWzBdLm93bmVyRG9jdW1lbnQsITEsbixvKSkuZmlyc3RDaGlsZCwxPT09ZS5jaGlsZE5vZGVzLmxlbmd0aCYmKGU9dCksdHx8bykpe2ZvcihzPShhPWsubWFwKHZlKGUsInNjcmlwdCIpLFBlKSkubGVuZ3RoO2M8ZjtjKyspdT1lLGMhPT1wJiYodT1rLmNsb25lKHUsITAsITApLHMmJmsubWVyZ2UoYSx2ZSh1LCJzY3JpcHQiKSkpLGkuY2FsbChuW2NdLHUsYyk7aWYocylmb3IobD1hW2EubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsay5tYXAoYSxSZSksYz0wO2M8cztjKyspdT1hW2NdLGhlLnRlc3QodS50eXBlfHwiIikmJiFRLmFjY2Vzcyh1LCJnbG9iYWxFdmFsIikmJmsuY29udGFpbnMobCx1KSYmKHUuc3JjJiYibW9kdWxlIiE9PSh1LnR5cGV8fCIiKS50b0xvd2VyQ2FzZSgpP2suX2V2YWxVcmwmJiF1Lm5vTW9kdWxlJiZrLl9ldmFsVXJsKHUuc3JjLHtub25jZTp1Lm5vbmNlfHx1LmdldEF0dHJpYnV0ZSgibm9uY2UiKX0pOmIodS50ZXh0Q29udGVudC5yZXBsYWNlKEhlLCIiKSx1LGwpKX1yZXR1cm4gbn1mdW5jdGlvbiBXZShlLHQsbil7Zm9yKHZhciByLGk9dD9rLmZpbHRlcih0LGUpOmUsbz0wO251bGwhPShyPWlbb10pO28rKylufHwxIT09ci5ub2RlVHlwZXx8ay5jbGVhbkRhdGEodmUocikpLHIucGFyZW50Tm9kZSYmKG4mJm9lKHIpJiZ5ZSh2ZShyLCJzY3JpcHQiKSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpKTtyZXR1cm4gZX1rLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKGplLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGM9ZS5jbG9uZU5vZGUoITApLGY9b2UoZSk7aWYoISh5Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHxrLmlzWE1MRG9jKGUpKSlmb3IoYT12ZShjKSxyPTAsaT0obz12ZShlKSkubGVuZ3RoO3I8aTtyKyspcz1vW3JdLHU9YVtyXSx2b2lkIDAsImlucHV0Ij09PShsPXUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJnBlLnRlc3Qocy50eXBlKT91LmNoZWNrZWQ9cy5jaGVja2VkOiJpbnB1dCIhPT1sJiYidGV4dGFyZWEiIT09bHx8KHUuZGVmYXVsdFZhbHVlPXMuZGVmYXVsdFZhbHVlKTtpZih0KWlmKG4pZm9yKG89b3x8dmUoZSksYT1hfHx2ZShjKSxyPTAsaT1vLmxlbmd0aDtyPGk7cisrKU1lKG9bcl0sYVtyXSk7ZWxzZSBNZShlLGMpO3JldHVybiAwPChhPXZlKGMsInNjcmlwdCIpKS5sZW5ndGgmJnllKGEsIWYmJnZlKGUsInNjcmlwdCIpKSxjfSxjbGVhbkRhdGE6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4scixpPWsuZXZlbnQuc3BlY2lhbCxvPTA7dm9pZCAwIT09KG49ZVtvXSk7bysrKWlmKEcobikpe2lmKHQ9bltRLmV4cGFuZG9dKXtpZih0LmV2ZW50cylmb3IociBpbiB0LmV2ZW50cylpW3JdP2suZXZlbnQucmVtb3ZlKG4scik6ay5yZW1vdmVFdmVudChuLHIsdC5oYW5kbGUpO25bUS5leHBhbmRvXT12b2lkIDB9bltKLmV4cGFuZG9dJiYobltKLmV4cGFuZG9dPXZvaWQgMCl9fX0pLGsuZm4uZXh0ZW5kKHtkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIFdlKHRoaXMsZSwhMCl9LHJlbW92ZTpmdW5jdGlvbihlKXtyZXR1cm4gV2UodGhpcyxlKX0sdGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gXyh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP2sudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHwodGhpcy50ZXh0Q29udGVudD1lKX0pfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiBJZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8T2UodGhpcyxlKS5hcHBlbmRDaGlsZChlKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEllKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1PZSh0aGlzLGUpO3QuaW5zZXJ0QmVmb3JlKGUsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIEllKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIEllKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDtudWxsIT0oZT10aGlzW3RdKTt0KyspMT09PWUubm9kZVR5cGUmJihrLmNsZWFuRGF0YSh2ZShlLCExKSksZS50ZXh0Q29udGVudD0iIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbCE9ZSYmZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGsuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlKXt2YXIgdD10aGlzWzBdfHx7fSxuPTAscj10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1lJiYxPT09dC5ub2RlVHlwZSlyZXR1cm4gdC5pbm5lckhUTUw7aWYoInN0cmluZyI9PXR5cGVvZiBlJiYhcWUudGVzdChlKSYmIWdlWyhkZS5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1rLmh0bWxQcmVmaWx0ZXIoZSk7dHJ5e2Zvcig7bjxyO24rKykxPT09KHQ9dGhpc1tuXXx8e30pLm5vZGVUeXBlJiYoay5jbGVhbkRhdGEodmUodCwhMSkpLHQuaW5uZXJIVE1MPWUpO3Q9MH1jYXRjaChlKXt9fXQmJnRoaXMuZW1wdHkoKS5hcHBlbmQoZSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgbj1bXTtyZXR1cm4gSWUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJlbnROb2RlO2suaW5BcnJheSh0aGlzLG4pPDAmJihrLmNsZWFuRGF0YSh2ZSh0aGlzKSksdCYmdC5yZXBsYWNlQ2hpbGQoZSx0aGlzKSl9LG4pfX0pLGsuZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsYSl7ay5mbltlXT1mdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxyPWsoZSksaT1yLmxlbmd0aC0xLG89MDtvPD1pO28rKyl0PW89PT1pP3RoaXM6dGhpcy5jbG9uZSghMCksayhyW29dKVthXSh0KSx1LmFwcGx5KG4sdC5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4pfX0pO3ZhciAkZT1uZXcgUmVnRXhwKCJeKCIrdGUrIikoPyFweClbYS16JV0rJCIsImkiKSxGZT1mdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIHQmJnQub3BlbmVyfHwodD1DKSx0LmdldENvbXB1dGVkU3R5bGUoZSl9LEJlPW5ldyBSZWdFeHAocmUuam9pbigifCIpLCJpIik7ZnVuY3Rpb24gX2UoZSx0LG4pe3ZhciByLGksbyxhLHM9ZS5zdHlsZTtyZXR1cm4obj1ufHxGZShlKSkmJigiIiE9PShhPW4uZ2V0UHJvcGVydHlWYWx1ZSh0KXx8blt0XSl8fG9lKGUpfHwoYT1rLnN0eWxlKGUsdCkpLCF5LnBpeGVsQm94U3R5bGVzKCkmJiRlLnRlc3QoYSkmJkJlLnRlc3QodCkmJihyPXMud2lkdGgsaT1zLm1pbldpZHRoLG89cy5tYXhXaWR0aCxzLm1pbldpZHRoPXMubWF4V2lkdGg9cy53aWR0aD1hLGE9bi53aWR0aCxzLndpZHRoPXIscy5taW5XaWR0aD1pLHMubWF4V2lkdGg9bykpLHZvaWQgMCE9PWE/YSsiIjphfWZ1bmN0aW9uIHplKGUsdCl7cmV0dXJue2dldDpmdW5jdGlvbigpe2lmKCFlKCkpcmV0dXJuKHRoaXMuZ2V0PXQpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkZWxldGUgdGhpcy5nZXR9fX0hZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7aWYodSl7cy5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4O3dpZHRoOjYwcHg7bWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowIix1LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDttYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjYwJTt0b3A6MSUiLGllLmFwcGVuZENoaWxkKHMpLmFwcGVuZENoaWxkKHUpO3ZhciBlPUMuZ2V0Q29tcHV0ZWRTdHlsZSh1KTtuPSIxJSIhPT1lLnRvcCxhPTEyPT09dChlLm1hcmdpbkxlZnQpLHUuc3R5bGUucmlnaHQ9IjYwJSIsbz0zNj09PXQoZS5yaWdodCkscj0zNj09PXQoZS53aWR0aCksdS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLGk9MTI9PT10KHUub2Zmc2V0V2lkdGgvMyksaWUucmVtb3ZlQ2hpbGQocyksdT1udWxsfX1mdW5jdGlvbiB0KGUpe3JldHVybiBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoZSkpfXZhciBuLHIsaSxvLGEscz1FLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHU9RS5jcmVhdGVFbGVtZW50KCJkaXYiKTt1LnN0eWxlJiYodS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLHUuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix5LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09dS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxrLmV4dGVuZCh5LHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBlKCkscn0scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG99LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG59LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiBlKCksYX0sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe3JldHVybiBlKCksaX19KSl9KCk7dmFyIFVlPVsiV2Via2l0IiwiTW96IiwibXMiXSxYZT1FLmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLFZlPXt9O2Z1bmN0aW9uIEdlKGUpe3ZhciB0PWsuY3NzUHJvcHNbZV18fFZlW2VdO3JldHVybiB0fHwoZSBpbiBYZT9lOlZlW2VdPWZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0udG9VcHBlckNhc2UoKStlLnNsaWNlKDEpLG49VWUubGVuZ3RoO3doaWxlKG4tLSlpZigoZT1VZVtuXSt0KWluIFhlKXJldHVybiBlfShlKXx8ZSl9dmFyIFllPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxRZT0vXi0tLyxKZT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sS2U9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9O2Z1bmN0aW9uIFplKGUsdCxuKXt2YXIgcj1uZS5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsyXS0obnx8MCkpKyhyWzNdfHwicHgiKTp0fWZ1bmN0aW9uIGV0KGUsdCxuLHIsaSxvKXt2YXIgYT0id2lkdGgiPT09dD8xOjAscz0wLHU9MDtpZihuPT09KHI/ImJvcmRlciI6ImNvbnRlbnQiKSlyZXR1cm4gMDtmb3IoO2E8NDthKz0yKSJtYXJnaW4iPT09biYmKHUrPWsuY3NzKGUsbityZVthXSwhMCxpKSkscj8oImNvbnRlbnQiPT09biYmKHUtPWsuY3NzKGUsInBhZGRpbmciK3JlW2FdLCEwLGkpKSwibWFyZ2luIiE9PW4mJih1LT1rLmNzcyhlLCJib3JkZXIiK3JlW2FdKyJXaWR0aCIsITAsaSkpKToodSs9ay5jc3MoZSwicGFkZGluZyIrcmVbYV0sITAsaSksInBhZGRpbmciIT09bj91Kz1rLmNzcyhlLCJib3JkZXIiK3JlW2FdKyJXaWR0aCIsITAsaSk6cys9ay5jc3MoZSwiYm9yZGVyIityZVthXSsiV2lkdGgiLCEwLGkpKTtyZXR1cm4hciYmMDw9byYmKHUrPU1hdGgubWF4KDAsTWF0aC5jZWlsKGVbIm9mZnNldCIrdFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSldLW8tdS1zLS41KSl8fDApLHV9ZnVuY3Rpb24gdHQoZSx0LG4pe3ZhciByPUZlKGUpLGk9KCF5LmJveFNpemluZ1JlbGlhYmxlKCl8fG4pJiYiYm9yZGVyLWJveCI9PT1rLmNzcyhlLCJib3hTaXppbmciLCExLHIpLG89aSxhPV9lKGUsdCxyKSxzPSJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpO2lmKCRlLnRlc3QoYSkpe2lmKCFuKXJldHVybiBhO2E9ImF1dG8ifXJldHVybigheS5ib3hTaXppbmdSZWxpYWJsZSgpJiZpfHwiYXV0byI9PT1hfHwhcGFyc2VGbG9hdChhKSYmImlubGluZSI9PT1rLmNzcyhlLCJkaXNwbGF5IiwhMSxyKSkmJmUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJihpPSJib3JkZXItYm94Ij09PWsuY3NzKGUsImJveFNpemluZyIsITEsciksKG89cyBpbiBlKSYmKGE9ZVtzXSkpLChhPXBhcnNlRmxvYXQoYSl8fDApK2V0KGUsdCxufHwoaT8iYm9yZGVyIjoiY29udGVudCIpLG8scixhKSsicHgifWZ1bmN0aW9uIG50KGUsdCxuLHIsaSl7cmV0dXJuIG5ldyBudC5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfWsuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIG49X2UoZSwib3BhY2l0eSIpO3JldHVybiIiPT09bj8iMSI6bn19fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsZ3JpZEFyZWE6ITAsZ3JpZENvbHVtbjohMCxncmlkQ29sdW1uRW5kOiEwLGdyaWRDb2x1bW5TdGFydDohMCxncmlkUm93OiEwLGdyaWRSb3dFbmQ6ITAsZ3JpZFJvd1N0YXJ0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e30sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLGEscz1WKHQpLHU9UWUudGVzdCh0KSxsPWUuc3R5bGU7aWYodXx8KHQ9R2UocykpLGE9ay5jc3NIb29rc1t0XXx8ay5jc3NIb29rc1tzXSx2b2lkIDA9PT1uKXJldHVybiBhJiYiZ2V0ImluIGEmJnZvaWQgMCE9PShpPWEuZ2V0KGUsITEscikpP2k6bFt0XTsic3RyaW5nIj09PShvPXR5cGVvZiBuKSYmKGk9bmUuZXhlYyhuKSkmJmlbMV0mJihuPWxlKGUsdCxpKSxvPSJudW1iZXIiKSxudWxsIT1uJiZuPT1uJiYoIm51bWJlciIhPT1vfHx1fHwobis9aSYmaVszXXx8KGsuY3NzTnVtYmVyW3NdPyIiOiJweCIpKSx5LmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChsW3RdPSJpbmhlcml0IiksYSYmInNldCJpbiBhJiZ2b2lkIDA9PT0obj1hLnNldChlLG4scikpfHwodT9sLnNldFByb3BlcnR5KHQsbik6bFt0XT1uKSl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHM9Vih0KTtyZXR1cm4gUWUudGVzdCh0KXx8KHQ9R2UocykpLChhPWsuY3NzSG9va3NbdF18fGsuY3NzSG9va3Nbc10pJiYiZ2V0ImluIGEmJihpPWEuZ2V0KGUsITAsbikpLHZvaWQgMD09PWkmJihpPV9lKGUsdCxyKSksIm5vcm1hbCI9PT1pJiZ0IGluIEtlJiYoaT1LZVt0XSksIiI9PT1ufHxuPyhvPXBhcnNlRmxvYXQoaSksITA9PT1ufHxpc0Zpbml0ZShvKT9vfHwwOmkpOml9fSksay5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihlLHUpe2suY3NzSG9va3NbdV09e2dldDpmdW5jdGlvbihlLHQsbil7aWYodClyZXR1cm4hWWUudGVzdChrLmNzcyhlLCJkaXNwbGF5IikpfHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiZlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoP3R0KGUsdSxuKTp1ZShlLEplLGZ1bmN0aW9uKCl7cmV0dXJuIHR0KGUsdSxuKX0pfSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9RmUoZSksbz0heS5zY3JvbGxib3hTaXplKCkmJiJhYnNvbHV0ZSI9PT1pLnBvc2l0aW9uLGE9KG98fG4pJiYiYm9yZGVyLWJveCI9PT1rLmNzcyhlLCJib3hTaXppbmciLCExLGkpLHM9bj9ldChlLHUsbixhLGkpOjA7cmV0dXJuIGEmJm8mJihzLT1NYXRoLmNlaWwoZVsib2Zmc2V0Iit1WzBdLnRvVXBwZXJDYXNlKCkrdS5zbGljZSgxKV0tcGFyc2VGbG9hdChpW3VdKS1ldChlLHUsImJvcmRlciIsITEsaSktLjUpKSxzJiYocj1uZS5leGVjKHQpKSYmInB4IiE9PShyWzNdfHwicHgiKSYmKGUuc3R5bGVbdV09dCx0PWsuY3NzKGUsdSkpLFplKDAsdCxzKX19fSksay5jc3NIb29rcy5tYXJnaW5MZWZ0PXplKHkucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4ocGFyc2VGbG9hdChfZShlLCJtYXJnaW5MZWZ0IikpfHxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtdWUoZSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrInB4In0pLGsuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGksbyl7ay5jc3NIb29rc1tpK29dPXtleHBhbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj17fSxyPSJzdHJpbmciPT10eXBlb2YgZT9lLnNwbGl0KCIgIik6W2VdO3Q8NDt0KyspbltpK3JlW3RdK29dPXJbdF18fHJbdC0yXXx8clswXTtyZXR1cm4gbn19LCJtYXJnaW4iIT09aSYmKGsuY3NzSG9va3NbaStvXS5zZXQ9WmUpfSksay5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLHQpe3JldHVybiBfKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz17fSxhPTA7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHI9RmUoZSksaT10Lmxlbmd0aDthPGk7YSsrKW9bdFthXV09ay5jc3MoZSx0W2FdLCExLHIpO3JldHVybiBvfXJldHVybiB2b2lkIDAhPT1uP2suc3R5bGUoZSx0LG4pOmsuY3NzKGUsdCl9LGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfX0pLCgoay5Ud2Vlbj1udCkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpudCxpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHxrLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KGsuY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1udC5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6bnQucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49bnQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz10PWsuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpudC5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSkuaW5pdC5wcm90b3R5cGU9bnQucHJvdG90eXBlLChudC5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIDEhPT1lLmVsZW0ubm9kZVR5cGV8fG51bGwhPWUuZWxlbVtlLnByb3BdJiZudWxsPT1lLmVsZW0uc3R5bGVbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXToodD1rLmNzcyhlLmVsZW0sZS5wcm9wLCIiKSkmJiJhdXRvIiE9PXQ/dDowfSxzZXQ6ZnVuY3Rpb24oZSl7ay5meC5zdGVwW2UucHJvcF0/ay5meC5zdGVwW2UucHJvcF0oZSk6MSE9PWUuZWxlbS5ub2RlVHlwZXx8IWsuY3NzSG9va3NbZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW0dlKGUucHJvcCldP2UuZWxlbVtlLnByb3BdPWUubm93Omsuc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpfX19KS5zY3JvbGxUb3A9bnQucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0say5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxrLmZ4PW50LnByb3RvdHlwZS5pbml0LGsuZnguc3RlcD17fTt2YXIgcnQsaXQsb3QsYXQsc3Q9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLHV0PS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gbHQoKXtpdCYmKCExPT09RS5oaWRkZW4mJkMucmVxdWVzdEFuaW1hdGlvbkZyYW1lP0MucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGx0KTpDLnNldFRpbWVvdXQobHQsay5meC5pbnRlcnZhbCksay5meC50aWNrKCkpfWZ1bmN0aW9uIGN0KCl7cmV0dXJuIEMuc2V0VGltZW91dChmdW5jdGlvbigpe3J0PXZvaWQgMH0pLHJ0PURhdGUubm93KCl9ZnVuY3Rpb24gZnQoZSx0KXt2YXIgbixyPTAsaT17aGVpZ2h0OmV9O2Zvcih0PXQ/MTowO3I8NDtyKz0yLXQpaVsibWFyZ2luIisobj1yZVtyXSldPWlbInBhZGRpbmciK25dPWU7cmV0dXJuIHQmJihpLm9wYWNpdHk9aS53aWR0aD1lKSxpfWZ1bmN0aW9uIHB0KGUsdCxuKXtmb3IodmFyIHIsaT0oZHQudHdlZW5lcnNbdF18fFtdKS5jb25jYXQoZHQudHdlZW5lcnNbIioiXSksbz0wLGE9aS5sZW5ndGg7bzxhO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gZHQobyxlLHQpe3ZhciBuLGEscj0wLGk9ZHQucHJlZmlsdGVycy5sZW5ndGgscz1rLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihhKXJldHVybiExO2Zvcih2YXIgZT1ydHx8Y3QoKSx0PU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi1lKSxuPTEtKHQvbC5kdXJhdGlvbnx8MCkscj0wLGk9bC50d2VlbnMubGVuZ3RoO3I8aTtyKyspbC50d2VlbnNbcl0ucnVuKG4pO3JldHVybiBzLm5vdGlmeVdpdGgobyxbbCxuLHRdKSxuPDEmJmk/dDooaXx8cy5ub3RpZnlXaXRoKG8sW2wsMSwwXSkscy5yZXNvbHZlV2l0aChvLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTpvLHByb3BzOmsuZXh0ZW5kKHt9LGUpLG9wdHM6ay5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOmsuZWFzaW5nLl9kZWZhdWx0fSx0KSxvcmlnaW5hbFByb3BlcnRpZXM6ZSxvcmlnaW5hbE9wdGlvbnM6dCxzdGFydFRpbWU6cnR8fGN0KCksZHVyYXRpb246dC5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1rLlR3ZWVuKG8sbC5vcHRzLGUsdCxsLm9wdHMuc3BlY2lhbEVhc2luZ1tlXXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gobiksbn0sc3RvcDpmdW5jdGlvbihlKXt2YXIgdD0wLG49ZT9sLnR3ZWVucy5sZW5ndGg6MDtpZihhKXJldHVybiB0aGlzO2ZvcihhPSEwO3Q8bjt0KyspbC50d2VlbnNbdF0ucnVuKDEpO3JldHVybiBlPyhzLm5vdGlmeVdpdGgobyxbbCwxLDBdKSxzLnJlc29sdmVXaXRoKG8sW2wsZV0pKTpzLnJlamVjdFdpdGgobyxbbCxlXSksdGhpc319KSxjPWwucHJvcHM7Zm9yKCFmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGE7Zm9yKG4gaW4gZSlpZihpPXRbcj1WKG4pXSxvPWVbbl0sQXJyYXkuaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLChhPWsuY3NzSG9va3Nbcl0pJiYiZXhwYW5kImluIGEpZm9yKG4gaW4gbz1hLmV4cGFuZChvKSxkZWxldGUgZVtyXSxvKW4gaW4gZXx8KGVbbl09b1tuXSx0W25dPWkpO2Vsc2UgdFtyXT1pfShjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTtyPGk7cisrKWlmKG49ZHQucHJlZmlsdGVyc1tyXS5jYWxsKGwsbyxjLGwub3B0cykpcmV0dXJuIG0obi5zdG9wKSYmKGsuX3F1ZXVlSG9va3MobC5lbGVtLGwub3B0cy5xdWV1ZSkuc3RvcD1uLnN0b3AuYmluZChuKSksbjtyZXR1cm4gay5tYXAoYyxwdCxsKSxtKGwub3B0cy5zdGFydCkmJmwub3B0cy5zdGFydC5jYWxsKG8sbCksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyksay5meC50aW1lcihrLmV4dGVuZCh1LHtlbGVtOm8sYW5pbTpsLHF1ZXVlOmwub3B0cy5xdWV1ZX0pKSxsfWsuQW5pbWF0aW9uPWsuZXh0ZW5kKGR0LHt0d2VlbmVyczp7IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KTtyZXR1cm4gbGUobi5lbGVtLGUsbmUuZXhlYyh0KSxuKSxufV19LHR3ZWVuZXI6ZnVuY3Rpb24oZSx0KXttKGUpPyh0PWUsZT1bIioiXSk6ZT1lLm1hdGNoKFIpO2Zvcih2YXIgbixyPTAsaT1lLmxlbmd0aDtyPGk7cisrKW49ZVtyXSxkdC50d2VlbmVyc1tuXT1kdC50d2VlbmVyc1tuXXx8W10sZHQudHdlZW5lcnNbbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyczpbZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGMsZj0id2lkdGgiaW4gdHx8ImhlaWdodCJpbiB0LHA9dGhpcyxkPXt9LGg9ZS5zdHlsZSxnPWUubm9kZVR5cGUmJnNlKGUpLHY9US5nZXQoZSwiZnhzaG93Iik7Zm9yKHIgaW4gbi5xdWV1ZXx8KG51bGw9PShhPWsuX3F1ZXVlSG9va3MoZSwiZngiKSkudW5xdWV1ZWQmJihhLnVucXVldWVkPTAscz1hLmVtcHR5LmZpcmUsYS5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7YS51bnF1ZXVlZHx8cygpfSksYS51bnF1ZXVlZCsrLHAuYWx3YXlzKGZ1bmN0aW9uKCl7cC5hbHdheXMoZnVuY3Rpb24oKXthLnVucXVldWVkLS0say5xdWV1ZShlLCJmeCIpLmxlbmd0aHx8YS5lbXB0eS5maXJlKCl9KX0pKSx0KWlmKGk9dFtyXSxzdC50ZXN0KGkpKXtpZihkZWxldGUgdFtyXSxvPW98fCJ0b2dnbGUiPT09aSxpPT09KGc/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWl8fCF2fHx2b2lkIDA9PT12W3JdKWNvbnRpbnVlO2c9ITB9ZFtyXT12JiZ2W3JdfHxrLnN0eWxlKGUscil9aWYoKHU9IWsuaXNFbXB0eU9iamVjdCh0KSl8fCFrLmlzRW1wdHlPYmplY3QoZCkpZm9yKHIgaW4gZiYmMT09PWUubm9kZVR5cGUmJihuLm92ZXJmbG93PVtoLm92ZXJmbG93LGgub3ZlcmZsb3dYLGgub3ZlcmZsb3dZXSxudWxsPT0obD12JiZ2LmRpc3BsYXkpJiYobD1RLmdldChlLCJkaXNwbGF5IikpLCJub25lIj09PShjPWsuY3NzKGUsImRpc3BsYXkiKSkmJihsP2M9bDooZmUoW2VdLCEwKSxsPWUuc3R5bGUuZGlzcGxheXx8bCxjPWsuY3NzKGUsImRpc3BsYXkiKSxmZShbZV0pKSksKCJpbmxpbmUiPT09Y3x8ImlubGluZS1ibG9jayI9PT1jJiZudWxsIT1sKSYmIm5vbmUiPT09ay5jc3MoZSwiZmxvYXQiKSYmKHV8fChwLmRvbmUoZnVuY3Rpb24oKXtoLmRpc3BsYXk9bH0pLG51bGw9PWwmJihjPWguZGlzcGxheSxsPSJub25lIj09PWM/IiI6YykpLGguZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihoLm92ZXJmbG93PSJoaWRkZW4iLHAuYWx3YXlzKGZ1bmN0aW9uKCl7aC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGgub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0saC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKSx1PSExLGQpdXx8KHY/ImhpZGRlbiJpbiB2JiYoZz12LmhpZGRlbik6dj1RLmFjY2VzcyhlLCJmeHNob3ciLHtkaXNwbGF5Omx9KSxvJiYodi5oaWRkZW49IWcpLGcmJmZlKFtlXSwhMCkscC5kb25lKGZ1bmN0aW9uKCl7Zm9yKHIgaW4gZ3x8ZmUoW2VdKSxRLnJlbW92ZShlLCJmeHNob3ciKSxkKWsuc3R5bGUoZSxyLGRbcl0pfSkpLHU9cHQoZz92W3JdOjAscixwKSxyIGluIHZ8fCh2W3JdPXUuc3RhcnQsZyYmKHUuZW5kPXUuc3RhcnQsdS5zdGFydD0wKSl9XSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P2R0LnByZWZpbHRlcnMudW5zaGlmdChlKTpkdC5wcmVmaWx0ZXJzLnB1c2goZSl9fSksay5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmIm9iamVjdCI9PXR5cGVvZiBlP2suZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8bShlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYhbSh0KSYmdH07cmV0dXJuIGsuZngub2ZmP3IuZHVyYXRpb249MDoibnVtYmVyIiE9dHlwZW9mIHIuZHVyYXRpb24mJihyLmR1cmF0aW9uIGluIGsuZnguc3BlZWRzP3IuZHVyYXRpb249ay5meC5zcGVlZHNbci5kdXJhdGlvbl06ci5kdXJhdGlvbj1rLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ci5xdWV1ZSYmITAhPT1yLnF1ZXVlfHwoci5xdWV1ZT0iZngiKSxyLm9sZD1yLmNvbXBsZXRlLHIuY29tcGxldGU9ZnVuY3Rpb24oKXttKHIub2xkKSYmci5vbGQuY2FsbCh0aGlzKSxyLnF1ZXVlJiZrLmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0say5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIoc2UpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPWsuaXNFbXB0eU9iamVjdCh0KSxvPWsuc3BlZWQoZSxuLHIpLGE9ZnVuY3Rpb24oKXt2YXIgZT1kdCh0aGlzLGsuZXh0ZW5kKHt9LHQpLG8pOyhpfHxRLmdldCh0aGlzLCJmaW5pc2giKSkmJmUuc3RvcCghMCl9O3JldHVybiBhLmZpbmlzaD1hLGl8fCExPT09by5xdWV1ZT90aGlzLmVhY2goYSk6dGhpcy5xdWV1ZShvLnF1ZXVlLGEpfSxzdG9wOmZ1bmN0aW9uKGksZSxvKXt2YXIgYT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KG8pfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGkmJihvPWUsZT1pLGk9dm9pZCAwKSxlJiYhMSE9PWkmJnRoaXMucXVldWUoaXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9ITAsdD1udWxsIT1pJiZpKyJxdWV1ZUhvb2tzIixuPWsudGltZXJzLHI9US5nZXQodGhpcyk7aWYodClyW3RdJiZyW3RdLnN0b3AmJmEoclt0XSk7ZWxzZSBmb3IodCBpbiByKXJbdF0mJnJbdF0uc3RvcCYmdXQudGVzdCh0KSYmYShyW3RdKTtmb3IodD1uLmxlbmd0aDt0LS07KW5bdF0uZWxlbSE9PXRoaXN8fG51bGwhPWkmJm5bdF0ucXVldWUhPT1pfHwoblt0XS5hbmltLnN0b3AobyksZT0hMSxuLnNwbGljZSh0LDEpKTshZSYmb3x8ay5kZXF1ZXVlKHRoaXMsaSl9KX0sZmluaXNoOmZ1bmN0aW9uKGEpe3JldHVybiExIT09YSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGUsdD1RLmdldCh0aGlzKSxuPXRbYSsicXVldWUiXSxyPXRbYSsicXVldWVIb29rcyJdLGk9ay50aW1lcnMsbz1uP24ubGVuZ3RoOjA7Zm9yKHQuZmluaXNoPSEwLGsucXVldWUodGhpcyxhLFtdKSxyJiZyLnN0b3AmJnIuc3RvcC5jYWxsKHRoaXMsITApLGU9aS5sZW5ndGg7ZS0tOylpW2VdLmVsZW09PT10aGlzJiZpW2VdLnF1ZXVlPT09YSYmKGlbZV0uYW5pbS5zdG9wKCEwKSxpLnNwbGljZShlLDEpKTtmb3IoZT0wO2U8bztlKyspbltlXSYmbltlXS5maW5pc2gmJm5bZV0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIHQuZmluaXNofSl9fSksay5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihlLHIpe3ZhciBpPWsuZm5bcl07ay5mbltyXT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG51bGw9PWV8fCJib29sZWFuIj09dHlwZW9mIGU/aS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKGZ0KHIsITApLGUsdCxuKX19KSxrLmVhY2goe3NsaWRlRG93bjpmdCgic2hvdyIpLHNsaWRlVXA6ZnQoImhpZGUiKSxzbGlkZVRvZ2dsZTpmdCgidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihlLHIpe2suZm5bZV09ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLmFuaW1hdGUocixlLHQsbil9fSksay50aW1lcnM9W10say5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsdD0wLG49ay50aW1lcnM7Zm9yKHJ0PURhdGUubm93KCk7dDxuLmxlbmd0aDt0KyspKGU9blt0XSkoKXx8blt0XSE9PWV8fG4uc3BsaWNlKHQtLSwxKTtuLmxlbmd0aHx8ay5meC5zdG9wKCkscnQ9dm9pZCAwfSxrLmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2sudGltZXJzLnB1c2goZSksay5meC5zdGFydCgpfSxrLmZ4LmludGVydmFsPTEzLGsuZnguc3RhcnQ9ZnVuY3Rpb24oKXtpdHx8KGl0PSEwLGx0KCkpfSxrLmZ4LnN0b3A9ZnVuY3Rpb24oKXtpdD1udWxsfSxrLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxrLmZuLmRlbGF5PWZ1bmN0aW9uKHIsZSl7cmV0dXJuIHI9ay5meCYmay5meC5zcGVlZHNbcl18fHIsZT1lfHwiZngiLHRoaXMucXVldWUoZSxmdW5jdGlvbihlLHQpe3ZhciBuPUMuc2V0VGltZW91dChlLHIpO3Quc3RvcD1mdW5jdGlvbigpe0MuY2xlYXJUaW1lb3V0KG4pfX0pfSxvdD1FLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYXQ9RS5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKS5hcHBlbmRDaGlsZChFLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSxvdC50eXBlPSJjaGVja2JveCIseS5jaGVja09uPSIiIT09b3QudmFsdWUseS5vcHRTZWxlY3RlZD1hdC5zZWxlY3RlZCwob3Q9RS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKS52YWx1ZT0idCIsb3QudHlwZT0icmFkaW8iLHkucmFkaW9WYWx1ZT0idCI9PT1vdC52YWx1ZTt2YXIgaHQsZ3Q9ay5leHByLmF0dHJIYW5kbGU7ay5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gXyh0aGlzLGsuYXR0cixlLHQsMTxhcmd1bWVudHMubGVuZ3RoKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ay5yZW1vdmVBdHRyKHRoaXMsZSl9KX19KSxrLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPWUubm9kZVR5cGU7aWYoMyE9PW8mJjghPT1vJiYyIT09bylyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGUuZ2V0QXR0cmlidXRlP2sucHJvcChlLHQsbik6KDE9PT1vJiZrLmlzWE1MRG9jKGUpfHwoaT1rLmF0dHJIb29rc1t0LnRvTG93ZXJDYXNlKCldfHwoay5leHByLm1hdGNoLmJvb2wudGVzdCh0KT9odDp2b2lkIDApKSx2b2lkIDAhPT1uP251bGw9PT1uP3ZvaWQgay5yZW1vdmVBdHRyKGUsdCk6aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6KGUuc2V0QXR0cmlidXRlKHQsbisiIiksbik6aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjpudWxsPT0ocj1rLmZpbmQuYXR0cihlLHQpKT92b2lkIDA6cil9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIXkucmFkaW9WYWx1ZSYmInJhZGlvIj09PXQmJkEoZSwiaW5wdXQiKSl7dmFyIG49ZS52YWx1ZTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoInR5cGUiLHQpLG4mJihlLnZhbHVlPW4pLHR9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10JiZ0Lm1hdGNoKFIpO2lmKGkmJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49aVtyKytdKWUucmVtb3ZlQXR0cmlidXRlKG4pfX0pLGh0PXtzZXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiExPT09dD9rLnJlbW92ZUF0dHIoZSxuKTplLnNldEF0dHJpYnV0ZShuLG4pLG59fSxrLmVhY2goay5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oZSx0KXt2YXIgYT1ndFt0XXx8ay5maW5kLmF0dHI7Z3RbdF09ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz10LnRvTG93ZXJDYXNlKCk7cmV0dXJuIG58fChpPWd0W29dLGd0W29dPXIscj1udWxsIT1hKGUsdCxuKT9vOm51bGwsZ3Rbb109aSkscn19KTt2YXIgdnQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSx5dD0vXig/OmF8YXJlYSkkL2k7ZnVuY3Rpb24gbXQoZSl7cmV0dXJuKGUubWF0Y2goUil8fFtdKS5qb2luKCIgIil9ZnVuY3Rpb24geHQoZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiJ9ZnVuY3Rpb24gYnQoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZToic3RyaW5nIj09dHlwZW9mIGUmJmUubWF0Y2goUil8fFtdfWsuZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIF8odGhpcyxrLnByb3AsZSx0LDE8YXJndW1lbnRzLmxlbmd0aCl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW2sucHJvcEZpeFtlXXx8ZV19KX19KSxrLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPWUubm9kZVR5cGU7aWYoMyE9PW8mJjghPT1vJiYyIT09bylyZXR1cm4gMT09PW8mJmsuaXNYTUxEb2MoZSl8fCh0PWsucHJvcEZpeFt0XXx8dCxpPWsucHJvcEhvb2tzW3RdKSx2b2lkIDAhPT1uP2kmJiJzZXQiaW4gaSYmdm9pZCAwIT09KHI9aS5zZXQoZSxuLHQpKT9yOmVbdF09bjppJiYiZ2V0ImluIGkmJm51bGwhPT0ocj1pLmdldChlLHQpKT9yOmVbdF19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihlKXt2YXIgdD1rLmZpbmQuYXR0cihlLCJ0YWJpbmRleCIpO3JldHVybiB0P3BhcnNlSW50KHQsMTApOnZ0LnRlc3QoZS5ub2RlTmFtZSl8fHl0LnRlc3QoZS5ub2RlTmFtZSkmJmUuaHJlZj8wOi0xfX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pLHkub3B0U2VsZWN0ZWR8fChrLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3QmJih0LnNlbGVjdGVkSW5kZXgsdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksay5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtrLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSksay5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKHQpe3ZhciBlLG4scixpLG8sYSxzLHU9MDtpZihtKHQpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSl7ayh0aGlzKS5hZGRDbGFzcyh0LmNhbGwodGhpcyxlLHh0KHRoaXMpKSl9KTtpZigoZT1idCh0KSkubGVuZ3RoKXdoaWxlKG49dGhpc1t1KytdKWlmKGk9eHQobikscj0xPT09bi5ub2RlVHlwZSYmIiAiK210KGkpKyIgIil7YT0wO3doaWxlKG89ZVthKytdKXIuaW5kZXhPZigiICIrbysiICIpPDAmJihyKz1vKyIgIik7aSE9PShzPW10KHIpKSYmbi5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odCl7dmFyIGUsbixyLGksbyxhLHMsdT0wO2lmKG0odCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtrKHRoaXMpLnJlbW92ZUNsYXNzKHQuY2FsbCh0aGlzLGUseHQodGhpcykpKX0pO2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmF0dHIoImNsYXNzIiwiIik7aWYoKGU9YnQodCkpLmxlbmd0aCl3aGlsZShuPXRoaXNbdSsrXSlpZihpPXh0KG4pLHI9MT09PW4ubm9kZVR5cGUmJiIgIittdChpKSsiICIpe2E9MDt3aGlsZShvPWVbYSsrXSl3aGlsZSgtMTxyLmluZGV4T2YoIiAiK28rIiAiKSlyPXIucmVwbGFjZSgiICIrbysiICIsIiAiKTtpIT09KHM9bXQocikpJiZuLnNldEF0dHJpYnV0ZSgiY2xhc3MiLHMpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihpLHQpe3ZhciBvPXR5cGVvZiBpLGE9InN0cmluZyI9PT1vfHxBcnJheS5pc0FycmF5KGkpO3JldHVybiJib29sZWFuIj09dHlwZW9mIHQmJmE/dD90aGlzLmFkZENsYXNzKGkpOnRoaXMucmVtb3ZlQ2xhc3MoaSk6bShpKT90aGlzLmVhY2goZnVuY3Rpb24oZSl7ayh0aGlzKS50b2dnbGVDbGFzcyhpLmNhbGwodGhpcyxlLHh0KHRoaXMpLHQpLHQpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI7aWYoYSl7dD0wLG49ayh0aGlzKSxyPWJ0KGkpO3doaWxlKGU9clt0KytdKW4uaGFzQ2xhc3MoZSk/bi5yZW1vdmVDbGFzcyhlKTpuLmFkZENsYXNzKGUpfWVsc2Ugdm9pZCAwIT09aSYmImJvb2xlYW4iIT09b3x8KChlPXh0KHRoaXMpKSYmUS5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsZSksdGhpcy5zZXRBdHRyaWJ1dGUmJnRoaXMuc2V0QXR0cmlidXRlKCJjbGFzcyIsZXx8ITE9PT1pPyIiOlEuZ2V0KHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiIpKX0pfSxoYXNDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHI9MDt0PSIgIitlKyIgIjt3aGlsZShuPXRoaXNbcisrXSlpZigxPT09bi5ub2RlVHlwZSYmLTE8KCIgIittdCh4dChuKSkrIiAiKS5pbmRleE9mKHQpKXJldHVybiEwO3JldHVybiExfX0pO3ZhciB3dD0vXHIvZztrLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKG4pe3ZhciByLGUsaSx0PXRoaXNbMF07cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9bShuKSx0aGlzLmVhY2goZnVuY3Rpb24oZSl7dmFyIHQ7MT09PXRoaXMubm9kZVR5cGUmJihudWxsPT0odD1pP24uY2FsbCh0aGlzLGUsayh0aGlzKS52YWwoKSk6bik/dD0iIjoibnVtYmVyIj09dHlwZW9mIHQ/dCs9IiI6QXJyYXkuaXNBcnJheSh0KSYmKHQ9ay5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjplKyIifSkpLChyPWsudmFsSG9va3NbdGhpcy50eXBlXXx8ay52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSYmInNldCJpbiByJiZ2b2lkIDAhPT1yLnNldCh0aGlzLHQsInZhbHVlIil8fCh0aGlzLnZhbHVlPXQpKX0pKTp0PyhyPWsudmFsSG9va3NbdC50eXBlXXx8ay52YWxIb29rc1t0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSYmImdldCJpbiByJiZ2b2lkIDAhPT0oZT1yLmdldCh0LCJ2YWx1ZSIpKT9lOiJzdHJpbmciPT10eXBlb2YoZT10LnZhbHVlKT9lLnJlcGxhY2Uod3QsIiIpOm51bGw9PWU/IiI6ZTp2b2lkIDB9fSksay5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihlKXt2YXIgdD1rLmZpbmQuYXR0cihlLCJ2YWx1ZSIpO3JldHVybiBudWxsIT10P3Q6bXQoay50ZXh0KGUpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPWUub3B0aW9ucyxvPWUuc2VsZWN0ZWRJbmRleCxhPSJzZWxlY3Qtb25lIj09PWUudHlwZSxzPWE/bnVsbDpbXSx1PWE/bysxOmkubGVuZ3RoO2ZvcihyPW88MD91OmE/bzowO3I8dTtyKyspaWYoKChuPWlbcl0pLnNlbGVjdGVkfHxyPT09bykmJiFuLmRpc2FibGVkJiYoIW4ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IUEobi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYodD1rKG4pLnZhbCgpLGEpcmV0dXJuIHQ7cy5wdXNoKHQpfXJldHVybiBzfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9ZS5vcHRpb25zLG89ay5tYWtlQXJyYXkodCksYT1pLmxlbmd0aDt3aGlsZShhLS0pKChyPWlbYV0pLnNlbGVjdGVkPS0xPGsuaW5BcnJheShrLnZhbEhvb2tzLm9wdGlvbi5nZXQociksbykpJiYobj0hMCk7cmV0dXJuIG58fChlLnNlbGVjdGVkSW5kZXg9LTEpLG99fX19KSxrLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtrLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBlLmNoZWNrZWQ9LTE8ay5pbkFycmF5KGsoZSkudmFsKCksdCl9fSx5LmNoZWNrT258fChrLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWUuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6ZS52YWx1ZX0pfSkseS5mb2N1c2luPSJvbmZvY3VzaW4iaW4gQzt2YXIgVHQ9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLEN0PWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCl9O2suZXh0ZW5kKGsuZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsLGMsZixwPVtufHxFXSxkPXYuY2FsbChlLCJ0eXBlIik/ZS50eXBlOmUsaD12LmNhbGwoZSwibmFtZXNwYWNlIik/ZS5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihvPWY9YT1uPW58fEUsMyE9PW4ubm9kZVR5cGUmJjghPT1uLm5vZGVUeXBlJiYhVHQudGVzdChkK2suZXZlbnQudHJpZ2dlcmVkKSYmKC0xPGQuaW5kZXhPZigiLiIpJiYoZD0oaD1kLnNwbGl0KCIuIikpLnNoaWZ0KCksaC5zb3J0KCkpLHU9ZC5pbmRleE9mKCI6Iik8MCYmIm9uIitkLChlPWVbay5leHBhbmRvXT9lOm5ldyBrLkV2ZW50KGQsIm9iamVjdCI9PXR5cGVvZiBlJiZlKSkuaXNUcmlnZ2VyPXI/MjozLGUubmFtZXNwYWNlPWguam9pbigiLiIpLGUucm5hbWVzcGFjZT1lLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIitoLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsZS5yZXN1bHQ9dm9pZCAwLGUudGFyZ2V0fHwoZS50YXJnZXQ9biksdD1udWxsPT10P1tlXTprLm1ha2VBcnJheSh0LFtlXSksYz1rLmV2ZW50LnNwZWNpYWxbZF18fHt9LHJ8fCFjLnRyaWdnZXJ8fCExIT09Yy50cmlnZ2VyLmFwcGx5KG4sdCkpKXtpZighciYmIWMubm9CdWJibGUmJiF4KG4pKXtmb3Iocz1jLmRlbGVnYXRlVHlwZXx8ZCxUdC50ZXN0KHMrZCl8fChvPW8ucGFyZW50Tm9kZSk7bztvPW8ucGFyZW50Tm9kZSlwLnB1c2gobyksYT1vO2E9PT0obi5vd25lckRvY3VtZW50fHxFKSYmcC5wdXNoKGEuZGVmYXVsdFZpZXd8fGEucGFyZW50V2luZG93fHxDKX1pPTA7d2hpbGUoKG89cFtpKytdKSYmIWUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSlmPW8sZS50eXBlPTE8aT9zOmMuYmluZFR5cGV8fGQsKGw9KFEuZ2V0KG8sImV2ZW50cyIpfHx7fSlbZS50eXBlXSYmUS5nZXQobywiaGFuZGxlIikpJiZsLmFwcGx5KG8sdCksKGw9dSYmb1t1XSkmJmwuYXBwbHkmJkcobykmJihlLnJlc3VsdD1sLmFwcGx5KG8sdCksITE9PT1lLnJlc3VsdCYmZS5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gZS50eXBlPWQscnx8ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Yy5fZGVmYXVsdCYmITEhPT1jLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksdCl8fCFHKG4pfHx1JiZtKG5bZF0pJiYheChuKSYmKChhPW5bdV0pJiYoblt1XT1udWxsKSxrLmV2ZW50LnRyaWdnZXJlZD1kLGUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSYmZi5hZGRFdmVudExpc3RlbmVyKGQsQ3QpLG5bZF0oKSxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLEN0KSxrLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsYSYmKG5bdV09YSkpLGUucmVzdWx0fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWsuZXh0ZW5kKG5ldyBrLkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMH0pO2suZXZlbnQudHJpZ2dlcihyLG51bGwsdCl9fSksay5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ay5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXNbMF07aWYobilyZXR1cm4gay5ldmVudC50cmlnZ2VyKGUsdCxuLCEwKX19KSx5LmZvY3VzaW58fGsuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24obixyKXt2YXIgaT1mdW5jdGlvbihlKXtrLmV2ZW50LnNpbXVsYXRlKHIsZS50YXJnZXQsay5ldmVudC5maXgoZSkpfTtrLmV2ZW50LnNwZWNpYWxbcl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLHQ9US5hY2Nlc3MoZSxyKTt0fHxlLmFkZEV2ZW50TGlzdGVuZXIobixpLCEwKSxRLmFjY2VzcyhlLHIsKHR8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyx0PVEuYWNjZXNzKGUsciktMTt0P1EuYWNjZXNzKGUscix0KTooZS5yZW1vdmVFdmVudExpc3RlbmVyKG4saSwhMCksUS5yZW1vdmUoZSxyKSl9fX0pO3ZhciBFdD1DLmxvY2F0aW9uLGt0PURhdGUubm93KCksU3Q9L1w/LztrLnBhcnNlWE1MPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7dHJ5e3Q9KG5ldyBDLkRPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGUsInRleHQveG1sIil9Y2F0Y2goZSl7dD12b2lkIDB9cmV0dXJuIHQmJiF0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8ay5lcnJvcigiSW52YWxpZCBYTUw6ICIrZSksdH07dmFyIE50PS9cW1xdJC8sQXQ9L1xyP1xuL2csRHQ9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGp0PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBxdChuLGUscixpKXt2YXIgdDtpZihBcnJheS5pc0FycmF5KGUpKWsuZWFjaChlLGZ1bmN0aW9uKGUsdCl7cnx8TnQudGVzdChuKT9pKG4sdCk6cXQobisiWyIrKCJvYmplY3QiPT10eXBlb2YgdCYmbnVsbCE9dD9lOiIiKSsiXSIsdCxyLGkpfSk7ZWxzZSBpZihyfHwib2JqZWN0IiE9PXcoZSkpaShuLGUpO2Vsc2UgZm9yKHQgaW4gZSlxdChuKyJbIit0KyJdIixlW3RdLHIsaSl9ay5wYXJhbT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1mdW5jdGlvbihlLHQpe3ZhciBuPW0odCk/dCgpOnQ7cltyLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQobnVsbD09bj8iIjpuKX07aWYobnVsbD09ZSlyZXR1cm4iIjtpZihBcnJheS5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIWsuaXNQbGFpbk9iamVjdChlKSlrLmVhY2goZSxmdW5jdGlvbigpe2kodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IobiBpbiBlKXF0KG4sZVtuXSx0LGkpO3JldHVybiByLmpvaW4oIiYiKX0say5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBrLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9ay5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGU/ay5tYWtlQXJyYXkoZSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhayh0aGlzKS5pcygiOmRpc2FibGVkIikmJmp0LnRlc3QodGhpcy5ub2RlTmFtZSkmJiFEdC50ZXN0KGUpJiYodGhpcy5jaGVja2VkfHwhcGUudGVzdChlKSl9KS5tYXAoZnVuY3Rpb24oZSx0KXt2YXIgbj1rKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1uP251bGw6QXJyYXkuaXNBcnJheShuKT9rLm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoQXQsIlxyXG4iKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKEF0LCJcclxuIil9fSkuZ2V0KCl9fSk7dmFyIEx0PS8lMjAvZyxIdD0vIy4qJC8sT3Q9LyhbPyZdKV89W14mXSovLFB0PS9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKSQvZ20sUnQ9L14oPzpHRVR8SEVBRCkkLyxNdD0vXlwvXC8vLEl0PXt9LFd0PXt9LCR0PSIqLyIuY29uY2F0KCIqIiksRnQ9RS5jcmVhdGVFbGVtZW50KCJhIik7ZnVuY3Rpb24gQnQobyl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7InN0cmluZyIhPXR5cGVvZiBlJiYodD1lLGU9IioiKTt2YXIgbixyPTAsaT1lLnRvTG93ZXJDYXNlKCkubWF0Y2goUil8fFtdO2lmKG0odCkpd2hpbGUobj1pW3IrK10pIisiPT09blswXT8obj1uLnNsaWNlKDEpfHwiKiIsKG9bbl09b1tuXXx8W10pLnVuc2hpZnQodCkpOihvW25dPW9bbl18fFtdKS5wdXNoKHQpfX1mdW5jdGlvbiBfdCh0LGksbyxhKXt2YXIgcz17fSx1PXQ9PT1XdDtmdW5jdGlvbiBsKGUpe3ZhciByO3JldHVybiBzW2VdPSEwLGsuZWFjaCh0W2VdfHxbXSxmdW5jdGlvbihlLHQpe3ZhciBuPXQoaSxvLGEpO3JldHVybiJzdHJpbmciIT10eXBlb2Ygbnx8dXx8c1tuXT91PyEocj1uKTp2b2lkIDA6KGkuZGF0YVR5cGVzLnVuc2hpZnQobiksbChuKSwhMSl9KSxyfXJldHVybiBsKGkuZGF0YVR5cGVzWzBdKXx8IXNbIioiXSYmbCgiKiIpfWZ1bmN0aW9uIHp0KGUsdCl7dmFyIG4scixpPWsuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IobiBpbiB0KXZvaWQgMCE9PXRbbl0mJigoaVtuXT9lOnJ8fChyPXt9KSlbbl09dFtuXSk7cmV0dXJuIHImJmsuZXh0ZW5kKCEwLGUsciksZX1GdC5ocmVmPUV0LmhyZWYsay5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOkV0LmhyZWYsdHlwZToiR0VUIixpc0xvY2FsOi9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLnRlc3QoRXQucHJvdG9jb2wpLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6JHQsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6SlNPTi5wYXJzZSwidGV4dCB4bWwiOmsucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P3p0KHp0KGUsay5hamF4U2V0dGluZ3MpLHQpOnp0KGsuYWpheFNldHRpbmdzLGUpfSxhamF4UHJlZmlsdGVyOkJ0KEl0KSxhamF4VHJhbnNwb3J0OkJ0KFd0KSxhamF4OmZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBlJiYodD1lLGU9dm9pZCAwKSx0PXR8fHt9O3ZhciBjLGYscCxuLGQscixoLGcsaSxvLHY9ay5hamF4U2V0dXAoe30sdCkseT12LmNvbnRleHR8fHYsbT12LmNvbnRleHQmJih5Lm5vZGVUeXBlfHx5LmpxdWVyeSk/ayh5KTprLmV2ZW50LHg9ay5EZWZlcnJlZCgpLGI9ay5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iiksdz12LnN0YXR1c0NvZGV8fHt9LGE9e30scz17fSx1PSJjYW5jZWxlZCIsVD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKGgpe2lmKCFuKXtuPXt9O3doaWxlKHQ9UHQuZXhlYyhwKSluW3RbMV0udG9Mb3dlckNhc2UoKSsiICJdPShuW3RbMV0udG9Mb3dlckNhc2UoKSsiICJdfHxbXSkuY29uY2F0KHRbMl0pfXQ9bltlLnRvTG93ZXJDYXNlKCkrIiAiXX1yZXR1cm4gbnVsbD09dD9udWxsOnQuam9pbigiLCAiKX0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIGg/cDpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PWgmJihlPXNbZS50b0xvd2VyQ2FzZSgpXT1zW2UudG9Mb3dlckNhc2UoKV18fGUsYVtlXT10KSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1oJiYodi5taW1lVHlwZT1lKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKGUpaWYoaClULmFsd2F5cyhlW1Quc3RhdHVzXSk7ZWxzZSBmb3IodCBpbiBlKXdbdF09W3dbdF0sZVt0XV07cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGUpe3ZhciB0PWV8fHU7cmV0dXJuIGMmJmMuYWJvcnQodCksbCgwLHQpLHRoaXN9fTtpZih4LnByb21pc2UoVCksdi51cmw9KChlfHx2LnVybHx8RXQuaHJlZikrIiIpLnJlcGxhY2UoTXQsRXQucHJvdG9jb2wrIi8vIiksdi50eXBlPXQubWV0aG9kfHx0LnR5cGV8fHYubWV0aG9kfHx2LnR5cGUsdi5kYXRhVHlwZXM9KHYuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChSKXx8WyIiXSxudWxsPT12LmNyb3NzRG9tYWluKXtyPUUuY3JlYXRlRWxlbWVudCgiYSIpO3RyeXtyLmhyZWY9di51cmwsci5ocmVmPXIuaHJlZix2LmNyb3NzRG9tYWluPUZ0LnByb3RvY29sKyIvLyIrRnQuaG9zdCE9ci5wcm90b2NvbCsiLy8iK3IuaG9zdH1jYXRjaChlKXt2LmNyb3NzRG9tYWluPSEwfX1pZih2LmRhdGEmJnYucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2Ygdi5kYXRhJiYodi5kYXRhPWsucGFyYW0odi5kYXRhLHYudHJhZGl0aW9uYWwpKSxfdChJdCx2LHQsVCksaClyZXR1cm4gVDtmb3IoaSBpbihnPWsuZXZlbnQmJnYuZ2xvYmFsKSYmMD09ay5hY3RpdmUrKyYmay5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSx2LnR5cGU9di50eXBlLnRvVXBwZXJDYXNlKCksdi5oYXNDb250ZW50PSFSdC50ZXN0KHYudHlwZSksZj12LnVybC5yZXBsYWNlKEh0LCIiKSx2Lmhhc0NvbnRlbnQ/di5kYXRhJiZ2LnByb2Nlc3NEYXRhJiYwPT09KHYuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmKHYuZGF0YT12LmRhdGEucmVwbGFjZShMdCwiKyIpKToobz12LnVybC5zbGljZShmLmxlbmd0aCksdi5kYXRhJiYodi5wcm9jZXNzRGF0YXx8InN0cmluZyI9PXR5cGVvZiB2LmRhdGEpJiYoZis9KFN0LnRlc3QoZik/IiYiOiI/Iikrdi5kYXRhLGRlbGV0ZSB2LmRhdGEpLCExPT09di5jYWNoZSYmKGY9Zi5yZXBsYWNlKE90LCIkMSIpLG89KFN0LnRlc3QoZik/IiYiOiI/IikrIl89IitrdCsrK28pLHYudXJsPWYrbyksdi5pZk1vZGlmaWVkJiYoay5sYXN0TW9kaWZpZWRbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLGsubGFzdE1vZGlmaWVkW2ZdKSxrLmV0YWdbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsay5ldGFnW2ZdKSksKHYuZGF0YSYmdi5oYXNDb250ZW50JiYhMSE9PXYuY29udGVudFR5cGV8fHQuY29udGVudFR5cGUpJiZULnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsdi5jb250ZW50VHlwZSksVC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHYuZGF0YVR5cGVzWzBdJiZ2LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dP3YuYWNjZXB0c1t2LmRhdGFUeXBlc1swXV0rKCIqIiE9PXYuZGF0YVR5cGVzWzBdPyIsICIrJHQrIjsgcT0wLjAxIjoiIik6di5hY2NlcHRzWyIqIl0pLHYuaGVhZGVycylULnNldFJlcXVlc3RIZWFkZXIoaSx2LmhlYWRlcnNbaV0pO2lmKHYuYmVmb3JlU2VuZCYmKCExPT09di5iZWZvcmVTZW5kLmNhbGwoeSxULHYpfHxoKSlyZXR1cm4gVC5hYm9ydCgpO2lmKHU9ImFib3J0IixiLmFkZCh2LmNvbXBsZXRlKSxULmRvbmUodi5zdWNjZXNzKSxULmZhaWwodi5lcnJvciksYz1fdChXdCx2LHQsVCkpe2lmKFQucmVhZHlTdGF0ZT0xLGcmJm0udHJpZ2dlcigiYWpheFNlbmQiLFtULHZdKSxoKXJldHVybiBUO3YuYXN5bmMmJjA8di50aW1lb3V0JiYoZD1DLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtULmFib3J0KCJ0aW1lb3V0Iil9LHYudGltZW91dCkpO3RyeXtoPSExLGMuc2VuZChhLGwpfWNhdGNoKGUpe2lmKGgpdGhyb3cgZTtsKC0xLGUpfX1lbHNlIGwoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGwoZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPXQ7aHx8KGg9ITAsZCYmQy5jbGVhclRpbWVvdXQoZCksYz12b2lkIDAscD1yfHwiIixULnJlYWR5U3RhdGU9MDxlPzQ6MCxpPTIwMDw9ZSYmZTwzMDB8fDMwND09PWUsbiYmKHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHM9ZS5jb250ZW50cyx1PWUuZGF0YVR5cGVzO3doaWxlKCIqIj09PXVbMF0pdS5zaGlmdCgpLHZvaWQgMD09PXImJihyPWUubWltZVR5cGV8fHQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihyKWZvcihpIGluIHMpaWYoc1tpXSYmc1tpXS50ZXN0KHIpKXt1LnVuc2hpZnQoaSk7YnJlYWt9aWYodVswXWluIG4pbz11WzBdO2Vsc2V7Zm9yKGkgaW4gbil7aWYoIXVbMF18fGUuY29udmVydGVyc1tpKyIgIit1WzBdXSl7bz1pO2JyZWFrfWF8fChhPWkpfW89b3x8YX1pZihvKXJldHVybiBvIT09dVswXSYmdS51bnNoaWZ0KG8pLG5bb119KHYsVCxuKSkscz1mdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscyx1LGw9e30sYz1lLmRhdGFUeXBlcy5zbGljZSgpO2lmKGNbMV0pZm9yKGEgaW4gZS5jb252ZXJ0ZXJzKWxbYS50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbYV07bz1jLnNoaWZ0KCk7d2hpbGUobylpZihlLnJlc3BvbnNlRmllbGRzW29dJiYobltlLnJlc3BvbnNlRmllbGRzW29dXT10KSwhdSYmciYmZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdT1vLG89Yy5zaGlmdCgpKWlmKCIqIj09PW8pbz11O2Vsc2UgaWYoIioiIT09dSYmdSE9PW8pe2lmKCEoYT1sW3UrIiAiK29dfHxsWyIqICIrb10pKWZvcihpIGluIGwpaWYoKHM9aS5zcGxpdCgiICIpKVsxXT09PW8mJihhPWxbdSsiICIrc1swXV18fGxbIiogIitzWzBdXSkpeyEwPT09YT9hPWxbaV06ITAhPT1sW2ldJiYobz1zWzBdLGMudW5zaGlmdChzWzFdKSk7YnJlYWt9aWYoITAhPT1hKWlmKGEmJmVbInRocm93cyJdKXQ9YSh0KTtlbHNlIHRyeXt0PWEodCl9Y2F0Y2goZSl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6YT9lOiJObyBjb252ZXJzaW9uIGZyb20gIit1KyIgdG8gIitvfX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOnR9fSh2LHMsVCxpKSxpPyh2LmlmTW9kaWZpZWQmJigodT1ULmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIikpJiYoay5sYXN0TW9kaWZpZWRbZl09dSksKHU9VC5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpKSYmKGsuZXRhZ1tmXT11KSksMjA0PT09ZXx8IkhFQUQiPT09di50eXBlP2w9Im5vY29udGVudCI6MzA0PT09ZT9sPSJub3Rtb2RpZmllZCI6KGw9cy5zdGF0ZSxvPXMuZGF0YSxpPSEoYT1zLmVycm9yKSkpOihhPWwsIWUmJmx8fChsPSJlcnJvciIsZTwwJiYoZT0wKSkpLFQuc3RhdHVzPWUsVC5zdGF0dXNUZXh0PSh0fHxsKSsiIixpP3gucmVzb2x2ZVdpdGgoeSxbbyxsLFRdKTp4LnJlamVjdFdpdGgoeSxbVCxsLGFdKSxULnN0YXR1c0NvZGUodyksdz12b2lkIDAsZyYmbS50cmlnZ2VyKGk/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbVCx2LGk/bzphXSksYi5maXJlV2l0aCh5LFtULGxdKSxnJiYobS50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFtULHZdKSwtLWsuYWN0aXZlfHxrLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKX1yZXR1cm4gVH0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGsuZ2V0KGUsdCxuLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihlLHQpe3JldHVybiBrLmdldChlLHZvaWQgMCx0LCJzY3JpcHQiKX19KSxrLmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oZSxpKXtrW2ldPWZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBtKHQpJiYocj1yfHxuLG49dCx0PXZvaWQgMCksay5hamF4KGsuZXh0ZW5kKHt1cmw6ZSx0eXBlOmksZGF0YVR5cGU6cixkYXRhOnQsc3VjY2VzczpufSxrLmlzUGxhaW5PYmplY3QoZSkmJmUpKX19KSxrLl9ldmFsVXJsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGsuYWpheCh7dXJsOmUsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0IixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbigpe319LGRhdGFGaWx0ZXI6ZnVuY3Rpb24oZSl7ay5nbG9iYWxFdmFsKGUsdCl9fSl9LGsuZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0aGlzWzBdJiYobShlKSYmKGU9ZS5jYWxsKHRoaXNbMF0pKSx0PWsoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJnQuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLHQubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3aGlsZShlLmZpcnN0RWxlbWVudENoaWxkKWU9ZS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gZX0pLmFwcGVuZCh0aGlzKSksdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKG4pe3JldHVybiBtKG4pP3RoaXMuZWFjaChmdW5jdGlvbihlKXtrKHRoaXMpLndyYXBJbm5lcihuLmNhbGwodGhpcyxlKSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1rKHRoaXMpLHQ9ZS5jb250ZW50cygpO3QubGVuZ3RoP3Qud3JhcEFsbChuKTplLmFwcGVuZChuKX0pfSx3cmFwOmZ1bmN0aW9uKHQpe3ZhciBuPW0odCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtrKHRoaXMpLndyYXBBbGwobj90LmNhbGwodGhpcyxlKTp0KX0pfSx1bndyYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucGFyZW50KGUpLm5vdCgiYm9keSIpLmVhY2goZnVuY3Rpb24oKXtrKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KSx0aGlzfX0pLGsuZXhwci5wc2V1ZG9zLmhpZGRlbj1mdW5jdGlvbihlKXtyZXR1cm4hay5leHByLnBzZXVkb3MudmlzaWJsZShlKX0say5leHByLnBzZXVkb3MudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4hIShlLm9mZnNldFdpZHRofHxlLm9mZnNldEhlaWdodHx8ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCl9LGsuYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEMuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goZSl7fX07dmFyIFV0PXswOjIwMCwxMjIzOjIwNH0sWHQ9ay5hamF4U2V0dGluZ3MueGhyKCk7eS5jb3JzPSEhWHQmJiJ3aXRoQ3JlZGVudGlhbHMiaW4gWHQseS5hamF4PVh0PSEhWHQsay5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGkpe3ZhciBvLGE7aWYoeS5jb3JzfHxYdCYmIWkuY3Jvc3NEb21haW4pcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWkueGhyKCk7aWYoci5vcGVuKGkudHlwZSxpLnVybCxpLmFzeW5jLGkudXNlcm5hbWUsaS5wYXNzd29yZCksaS54aHJGaWVsZHMpZm9yKG4gaW4gaS54aHJGaWVsZHMpcltuXT1pLnhockZpZWxkc1tuXTtmb3IobiBpbiBpLm1pbWVUeXBlJiZyLm92ZXJyaWRlTWltZVR5cGUmJnIub3ZlcnJpZGVNaW1lVHlwZShpLm1pbWVUeXBlKSxpLmNyb3NzRG9tYWlufHxlWyJYLVJlcXVlc3RlZC1XaXRoIl18fChlWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0IiksZSlyLnNldFJlcXVlc3RIZWFkZXIobixlW25dKTtvPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe28mJihvPWE9ci5vbmxvYWQ9ci5vbmVycm9yPXIub25hYm9ydD1yLm9udGltZW91dD1yLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLCJhYm9ydCI9PT1lP3IuYWJvcnQoKToiZXJyb3IiPT09ZT8ibnVtYmVyIiE9dHlwZW9mIHIuc3RhdHVzP3QoMCwiZXJyb3IiKTp0KHIuc3RhdHVzLHIuc3RhdHVzVGV4dCk6dChVdFtyLnN0YXR1c118fHIuc3RhdHVzLHIuc3RhdHVzVGV4dCwidGV4dCIhPT0oci5yZXNwb25zZVR5cGV8fCJ0ZXh0Iil8fCJzdHJpbmciIT10eXBlb2Ygci5yZXNwb25zZVRleHQ/e2JpbmFyeTpyLnJlc3BvbnNlfTp7dGV4dDpyLnJlc3BvbnNlVGV4dH0sci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0sci5vbmxvYWQ9bygpLGE9ci5vbmVycm9yPXIub250aW1lb3V0PW8oImVycm9yIiksdm9pZCAwIT09ci5vbmFib3J0P3Iub25hYm9ydD1hOnIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXIucmVhZHlTdGF0ZSYmQy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7byYmYSgpfSl9LG89bygiYWJvcnQiKTt0cnl7ci5zZW5kKGkuaGFzQ29udGVudCYmaS5kYXRhfHxudWxsKX1jYXRjaChlKXtpZihvKXRocm93IGV9fSxhYm9ydDpmdW5jdGlvbigpe28mJm8oKX19fSksay5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKGUpe2UuY3Jvc3NEb21haW4mJihlLmNvbnRlbnRzLnNjcmlwdD0hMSl9KSxrLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xiKD86amF2YXxlY21hKXNjcmlwdFxiL30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4gay5nbG9iYWxFdmFsKGUpLGV9fX0pLGsuYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihlKXt2b2lkIDA9PT1lLmNhY2hlJiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIil9KSxrLmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24obil7dmFyIHIsaTtpZihuLmNyb3NzRG9tYWlufHxuLnNjcmlwdEF0dHJzKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsdCl7cj1rKCI8c2NyaXB0PiIpLmF0dHIobi5zY3JpcHRBdHRyc3x8e30pLnByb3Aoe2NoYXJzZXQ6bi5zY3JpcHRDaGFyc2V0LHNyYzpuLnVybH0pLm9uKCJsb2FkIGVycm9yIixpPWZ1bmN0aW9uKGUpe3IucmVtb3ZlKCksaT1udWxsLGUmJnQoImVycm9yIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxFLmhlYWQuYXBwZW5kQ2hpbGQoclswXSl9LGFib3J0OmZ1bmN0aW9uKCl7aSYmaSgpfX19KTt2YXIgVnQsR3Q9W10sWXQ9Lyg9KVw/KD89JnwkKXxcP1w/LztrLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9R3QucG9wKCl8fGsuZXhwYW5kbysiXyIra3QrKztyZXR1cm4gdGhpc1tlXT0hMCxlfX0pLGsuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPSExIT09ZS5qc29ucCYmKFl0LnRlc3QoZS51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgZS5kYXRhJiYwPT09KGUuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmWXQudGVzdChlLmRhdGEpJiYiZGF0YSIpO2lmKGF8fCJqc29ucCI9PT1lLmRhdGFUeXBlc1swXSlyZXR1cm4gcj1lLmpzb25wQ2FsbGJhY2s9bShlLmpzb25wQ2FsbGJhY2spP2UuanNvbnBDYWxsYmFjaygpOmUuanNvbnBDYWxsYmFjayxhP2VbYV09ZVthXS5yZXBsYWNlKFl0LCIkMSIrcik6ITEhPT1lLmpzb25wJiYoZS51cmwrPShTdC50ZXN0KGUudXJsKT8iJiI6Ij8iKStlLmpzb25wKyI9IityKSxlLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gb3x8ay5lcnJvcihyKyIgd2FzIG5vdCBjYWxsZWQiKSxvWzBdfSxlLmRhdGFUeXBlc1swXT0ianNvbiIsaT1DW3JdLENbcl09ZnVuY3Rpb24oKXtvPWFyZ3VtZW50c30sbi5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1pP2soQykucmVtb3ZlUHJvcChyKTpDW3JdPWksZVtyXSYmKGUuanNvbnBDYWxsYmFjaz10Lmpzb25wQ2FsbGJhY2ssR3QucHVzaChyKSksbyYmbShpKSYmaShvWzBdKSxvPWk9dm9pZCAwfSksInNjcmlwdCJ9KSx5LmNyZWF0ZUhUTUxEb2N1bWVudD0oKFZ0PUUuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKS5ib2R5KS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IiwyPT09VnQuY2hpbGROb2Rlcy5sZW5ndGgpLGsucGFyc2VIVE1MPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGU/W106KCJib29sZWFuIj09dHlwZW9mIHQmJihuPXQsdD0hMSksdHx8KHkuY3JlYXRlSFRNTERvY3VtZW50Pygocj0odD1FLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLmNyZWF0ZUVsZW1lbnQoImJhc2UiKSkuaHJlZj1FLmxvY2F0aW9uLmhyZWYsdC5oZWFkLmFwcGVuZENoaWxkKHIpKTp0PUUpLG89IW4mJltdLChpPUQuZXhlYyhlKSk/W3QuY3JlYXRlRWxlbWVudChpWzFdKV06KGk9d2UoW2VdLHQsbyksbyYmby5sZW5ndGgmJmsobykucmVtb3ZlKCksay5tZXJnZShbXSxpLmNoaWxkTm9kZXMpKSk7dmFyIHIsaSxvfSxrLmZuLmxvYWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPXRoaXMscz1lLmluZGV4T2YoIiAiKTtyZXR1cm4tMTxzJiYocj1tdChlLnNsaWNlKHMpKSxlPWUuc2xpY2UoMCxzKSksbSh0KT8obj10LHQ9dm9pZCAwKTp0JiYib2JqZWN0Ij09dHlwZW9mIHQmJihpPSJQT1NUIiksMDxhLmxlbmd0aCYmay5hamF4KHt1cmw6ZSx0eXBlOml8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOnR9KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLGEuaHRtbChyP2soIjxkaXY+IikuYXBwZW5kKGsucGFyc2VIVE1MKGUpKS5maW5kKHIpOmUpfSkuYWx3YXlzKG4mJmZ1bmN0aW9uKGUsdCl7YS5lYWNoKGZ1bmN0aW9uKCl7bi5hcHBseSh0aGlzLG98fFtlLnJlc3BvbnNlVGV4dCx0LGVdKX0pfSksdGhpc30say5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oZSx0KXtrLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKHQsZSl9fSksay5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIGsuZ3JlcChrLnRpbWVycyxmdW5jdGlvbihlKXtyZXR1cm4gdD09PWUuZWxlbX0pLmxlbmd0aH0say5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGEscyx1LGw9ay5jc3MoZSwicG9zaXRpb24iKSxjPWsoZSksZj17fTsic3RhdGljIj09PWwmJihlLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIpLHM9Yy5vZmZzZXQoKSxvPWsuY3NzKGUsInRvcCIpLHU9ay5jc3MoZSwibGVmdCIpLCgiYWJzb2x1dGUiPT09bHx8ImZpeGVkIj09PWwpJiYtMTwobyt1KS5pbmRleE9mKCJhdXRvIik/KGE9KHI9Yy5wb3NpdGlvbigpKS50b3AsaT1yLmxlZnQpOihhPXBhcnNlRmxvYXQobyl8fDAsaT1wYXJzZUZsb2F0KHUpfHwwKSxtKHQpJiYodD10LmNhbGwoZSxuLGsuZXh0ZW5kKHt9LHMpKSksbnVsbCE9dC50b3AmJihmLnRvcD10LnRvcC1zLnRvcCthKSxudWxsIT10LmxlZnQmJihmLmxlZnQ9dC5sZWZ0LXMubGVmdCtpKSwidXNpbmciaW4gdD90LnVzaW5nLmNhbGwoZSxmKTpjLmNzcyhmKX19LGsuZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24odCl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihlKXtrLm9mZnNldC5zZXRPZmZzZXQodGhpcyx0LGUpfSk7dmFyIGUsbixyPXRoaXNbMF07cmV0dXJuIHI/ci5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZT1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49ci5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LHt0b3A6ZS50b3Arbi5wYWdlWU9mZnNldCxsZWZ0OmUubGVmdCtuLnBhZ2VYT2Zmc2V0fSk6e3RvcDowLGxlZnQ6MH06dm9pZCAwfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbixyPXRoaXNbMF0saT17dG9wOjAsbGVmdDowfTtpZigiZml4ZWQiPT09ay5jc3MociwicG9zaXRpb24iKSl0PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZWxzZXt0PXRoaXMub2Zmc2V0KCksbj1yLm93bmVyRG9jdW1lbnQsZT1yLm9mZnNldFBhcmVudHx8bi5kb2N1bWVudEVsZW1lbnQ7d2hpbGUoZSYmKGU9PT1uLmJvZHl8fGU9PT1uLmRvY3VtZW50RWxlbWVudCkmJiJzdGF0aWMiPT09ay5jc3MoZSwicG9zaXRpb24iKSllPWUucGFyZW50Tm9kZTtlJiZlIT09ciYmMT09PWUubm9kZVR5cGUmJigoaT1rKGUpLm9mZnNldCgpKS50b3ArPWsuY3NzKGUsImJvcmRlclRvcFdpZHRoIiwhMCksaS5sZWZ0Kz1rLmNzcyhlLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSl9cmV0dXJue3RvcDp0LnRvcC1pLnRvcC1rLmNzcyhyLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1pLmxlZnQtay5jc3MociwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50O3doaWxlKGUmJiJzdGF0aWMiPT09ay5jc3MoZSwicG9zaXRpb24iKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxpZX0pfX0pLGsuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbih0LGkpe3ZhciBvPSJwYWdlWU9mZnNldCI9PT1pO2suZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoeChlKT9yPWU6OT09PWUubm9kZVR5cGUmJihyPWUuZGVmYXVsdFZpZXcpLHZvaWQgMD09PW4pcmV0dXJuIHI/cltpXTplW3RdO3I/ci5zY3JvbGxUbyhvP3IucGFnZVhPZmZzZXQ6bixvP246ci5wYWdlWU9mZnNldCk6ZVt0XT1ufSx0LGUsYXJndW1lbnRzLmxlbmd0aCl9fSksay5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsbil7ay5jc3NIb29rc1tuXT16ZSh5LnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZSx0KXtpZih0KXJldHVybiB0PV9lKGUsbiksJGUudGVzdCh0KT9rKGUpLnBvc2l0aW9uKClbbl0rInB4Ijp0fSl9KSxrLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLHMpe2suZWFjaCh7cGFkZGluZzoiaW5uZXIiK2EsY29udGVudDpzLCIiOiJvdXRlciIrYX0sZnVuY3Rpb24ocixvKXtrLmZuW29dPWZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aCYmKHJ8fCJib29sZWFuIiE9dHlwZW9mIGUpLGk9cnx8KCEwPT09ZXx8ITA9PT10PyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gXyh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4geChlKT8wPT09by5pbmRleE9mKCJvdXRlciIpP2VbImlubmVyIithXTplLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IithXTo5PT09ZS5ub2RlVHlwZT8ocj1lLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChlLmJvZHlbInNjcm9sbCIrYV0sclsic2Nyb2xsIithXSxlLmJvZHlbIm9mZnNldCIrYV0sclsib2Zmc2V0IithXSxyWyJjbGllbnQiK2FdKSk6dm9pZCAwPT09bj9rLmNzcyhlLHQsaSk6ay5zdHlsZShlLHQsbixpKX0scyxuP2U6dm9pZCAwLG4pfX0pfSksay5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsbil7ay5mbltuXT1mdW5jdGlvbihlLHQpe3JldHVybiAwPGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vbihuLG51bGwsZSx0KTp0aGlzLnRyaWdnZXIobil9fSksay5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfX0pLGsuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX19KSxrLnByb3h5PWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpO2lmKCJzdHJpbmciPT10eXBlb2YgdCYmKG49ZVt0XSx0PWUsZT1uKSxtKGUpKXJldHVybiByPXMuY2FsbChhcmd1bWVudHMsMiksKGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KHMuY2FsbChhcmd1bWVudHMpKSl9KS5ndWlkPWUuZ3VpZD1lLmd1aWR8fGsuZ3VpZCsrLGl9LGsuaG9sZFJlYWR5PWZ1bmN0aW9uKGUpe2U/ay5yZWFkeVdhaXQrKzprLnJlYWR5KCEwKX0say5pc0FycmF5PUFycmF5LmlzQXJyYXksay5wYXJzZUpTT049SlNPTi5wYXJzZSxrLm5vZGVOYW1lPUEsay5pc0Z1bmN0aW9uPW0say5pc1dpbmRvdz14LGsuY2FtZWxDYXNlPVYsay50eXBlPXcsay5ub3c9RGF0ZS5ub3csay5pc051bWVyaWM9ZnVuY3Rpb24oZSl7dmFyIHQ9ay50eXBlKGUpO3JldHVybigibnVtYmVyIj09PXR8fCJzdHJpbmciPT09dCkmJiFpc05hTihlLXBhcnNlRmxvYXQoZSkpfSwiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4ga30pO3ZhciBRdD1DLmpRdWVyeSxKdD1DLiQ7cmV0dXJuIGsubm9Db25mbGljdD1mdW5jdGlvbihlKXtyZXR1cm4gQy4kPT09ayYmKEMuJD1KdCksZSYmQy5qUXVlcnk9PT1rJiYoQy5qUXVlcnk9UXQpLGt9LGV8fChDLmpRdWVyeT1DLiQ9ayksa30pOwo="}]},{"name":"AC-baidu-重定向优化百度搜狗谷歌必应搜索_favicon_双列","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["baidu.com","google.com","google.com.hk","google.com.jp","bing.com","duckduckgo.com","dogedoge.com","so.com"],"orig_excludes":["*://*.google*/sorry*","https://zhidao.baidu.com/*","https://*.zhidao.baidu.com/*","https://www.baidu.com/img/*"],"orig_includes":["*://ipv6.baidu.com/*","*://www.baidu.com/*","*://www1.baidu.com/*","*://m.baidu.com/*","*://xueshu.baidu.com/s*","*://www.so.com/s?*","*://*.bing.com/*","*://encrypted.google.*/search*","*://*.google*/search*","*://*.google*/webhp*","*://*.zhihu.com/*","*://*duckduckgo.com/*","*://*.dogedoge.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-body","use_blockers":["weixin.sogou.com","downza.cn","*"],"use_connects":["www.baidu.com","wx.qq.com"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"AdsStyleMode_Baidu":"s0","AdsStyleMode_Google":"s0","Config":"s{\"isRedirectEnable\":true,\"isAdsEnable\":false,\"AdsStyleEnable\":false,\"AdsStyleMode_Baidu\":\"0\",\"AdsStyleMode_Google\":\"0\",\"AdsStyleMode_Bing\":\"0\",\"HuYan_Baidu\":false,\"HuYan_Google\":false,\"HuYan_Bing\":false,\"defaultHuYanColor\":\"#def1ef\",\"isUserColorEnable\":false,\"isFaviconEnable\":true,\"defaultFaviconUrl\":\"https://ae01.alicdn.com/kf/HTB1dRY0X8OD3KVjSZFFq6An9pXay.jpg\",\"doDisableSug\":true,\"isRightDisplayEnable\":false,\"isCounterEnable\":false,\"isALineEnable\":false,\"isUserStyleEnable\":false,\"UserStyleText\":\"/**计数器的颜色样式*/\\ndiv .AC-CounterT{\\n  background: #FD9999;\\n}\\n/**右侧栏的样式-其实不开启更好看一些*/\\n#content_right{\\n  padding: 20px 15px 15px;\\n  border-radius: 5px;\\n  background-color: #fff;\\n  box-sizing: border-box;\\n  box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n  -webkit-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n  -moz-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n}\\nbody[baidu] {\\n  position: relative;\\n}\\nbody[baidu]:before {\\n  position: fixed;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  left: 0;\\n  content: '';\\n  background-image: url('https://img.tujidu.com/image/5fdde8468423e.jpg');\\n  background-size: 100% auto;\\n  opacity: 1; /*背景图透明度=0.8，最大1*/\\n}\\n/**隐藏首页的大图标-修复可能导致外援样式异常**/\\nbody[baidu] #s_lg_img_new{\\n  display:none !important;\\n}\\nbody[baidu] .c-container{\\n  border-radius: 5px;\\n  background-color: rgba(255,255,255, 0.3) !important; /*百度搜索块体的颜色；透明度=0.1，最大1*/\\n}\\nbody[baidu] .c-container h3{\\n  background-color: rgba(248,248,248, 0.3) !important; /*百度搜索块体 - 标题的颜色；透明度=0.1，最大1*/\\n}\",\"oldVersion\":\"25.01\",\"isBlockEnable\":true,\"isBlockDisplay\":false,\"AdsStyleMode_SoGou\":\"3\",\"HuYan_SoGou\":false,\"UserBlockList\":[\"baijiahao.baidu.com\",\"www.guokr.com\",\"www.meizu.com\"],\"isBlockBtnDisplay\":true,\"isGooleInBaiduModeEnable\":false,\"Style_BaiduLite\":false,\"lastSaveTime\":1639108188379,\"isAutopage\":false,\"AdsStyleMode_Duck\":3,\"AdsStyleMode_Doge\":3,\"HuYan_Duck\":false,\"HuYan_Doge\":false,\"normalizeDuck\":true,\"isEnLang\":false,\"isBlockBtnNotDisplay\":false,\"baidu\":{\"name\":\"baidu\",\"AdsStyleMode\":\"0\",\"HuYanMode\":false},\"google\":{\"name\":\"google\",\"AdsStyleMode\":\"0\",\"HuYanMode\":false},\"bing\":{\"name\":\"bing\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"duck\":{\"name\":\"duck\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"doge\":{\"name\":\"doge\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"sogou\":{\"name\":\"sogou\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"zhihu\":{\"name\":\"zhihu\",\"AdsStyleMode\":\"0\",\"HuYanMode\":false},\"other\":{\"name\":\"other\",\"AdsStyleMode\":\"0\",\"HuYanMode\":false},\"acceptLicense\":true}","UserStyleText":"s#content_right{\n    padding: 20px 15px 15px;\n    border-radius: 5px;\n    background-color: #fff;\n    box-sizing: border-box;\n    box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\n    -webkit-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\n    -moz-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\n}","defaultFaviconUrl":"shttps://ws1.sinaimg.cn/large/6a155794ly1foijtdzhxhj200w00wjr5.jpg","doDisableSug":"btrue","isALineEnable":"bfalse","isAdsEnable":"btrue","isCounterEnable":"bfalse","isFaviconEnable":"btrue","isRedirectEnable":"btrue","isRightDisplayEnable":"btrue","isUserStyleEnable":"btrue","version":"s19.4"},"ts":1639108292009},"enabled":true,"position":3,"file_url":"https://greasyfork.org/scripts/14178-ac-baidu-%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6-%E6%90%9C%E7%8B%97-%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E4%B9%8B%E9%87%8D%E5%AE%9A%E5%90%91%E5%8E%BB%E9%99%A4-%E5%8E%BB%E5%B9%BF%E5%91%8A-favicon/code/AC-baidu%EF%BC%9A%20%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E3%80%81%E6%90%9C%E7%8B%97%E3%80%81%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E4%B9%8B%E9%87%8D%E5%AE%9A%E5%90%91%E5%8E%BB%E9%99%A4+%E5%8E%BB%E5%B9%BF%E5%91%8A+favicon.user.js","uuid":"996e82ca-b578-4084-b602-8e2eeb2ab996","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgQUMtYmFpZHUt6YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5b+F5bqU5pCc57SiX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOmVuICAgIEFDLWJhaWR1LWdvb2dsZV9zb2dvdV9iaW5nX1JlZGlyZWN0UmVtb3ZlX2Zhdmljb25fYWRhd2F5X1R3b0xpbmUKLy8gQG5hbWU6emggICAgQUMtYmFpZHUt6YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5b+F5bqU5pCc57SiX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOmphICAgIEFDLWJhaWR1LemHjeWumuWQkeacgOmBqeWMlkJhaWR144Gu5pCc54uX44GuR29vZ2xl44GuQmluZ+aknOe0oue1kOaenOOBruODquODgOOCpOODrOOCr+ODiOmZpOWOuytmYXZpY29uCi8vIEBkZXNjcmlwdGlvbiAgMS7nuZ7pgY7nmb7luqbjgIHmkJzni5fjgIHosLfmrYzjgIHlpb3mkJzmkJzntKLntZDmnpzkuK3nmoToh6rlt7HnmoTot7PovYnpj4jmjqXvvIznm7TmjqXoqKrllY/ljp/lp4vntrLpoIEt5Y+N5q2j6YO96IO955yL5oeCIDIu5paw5aKe6Ieq5a6a5LmJ572R56uZ5oum5oiq5Yqf6IO9IDPmt7vliqBGYXZpY29u5pi+56S6IDQu6aG16Z2iQ1NTIDUu5re75Yqg6K6h5pWwIDYu5byA5YWz6YCJ5oup5Lul5LiK5Yqf6IO9IDcu6Ieq5Yqo57+76aG15Yqf6IO9Ci8vIEBkZXNjcmlwdGlvbjplbiAgMS5ieXBhc3MgdGhlIHJlZGlyZWN0IGxpbmsgYXQgYmFpZHVcc29nb3VcZ29vZ2xlXGhhb3NvdTsgMi5yZW1vdmUgYWRzIGF0IGJhaWR1OyAzLmFkZCBGYXZpY29uIGZvciBlYWNoIHdlYnNpdGU7IDQucmVuZGVyIHlvdXIgb3duIHN0eWxlOyA1LmNvdW50ZXI7IDYuU3dpdGNoIHRvIGhhbmRsZSBhbGwgNy5BdXRvIFBhZ2VyCi8vIEBkZXNjcmlwdGlvbjpqYSAgMS7ov4Llm55CYWlkdeOAgVNvZ29144CBR29vZ2xl44CBSGFvc2915qSc57Si5qSc57Si57WQ5p6c44Gu5Lit44Gu6Ieq5YiG44Gu6YG356e744Oq44Oz44KvOyAyLkJhaWR144Gu5L2Z5YiG44Gq5bqD5ZGK44KS5Y+W44KK6Zmk44GPOyAzLuOCs+ODoeODs+ODiOOCkui/veWKoDsgNC7jg5rjg7zjgrjjga7jgqvjgrnjgr/jg6BDU1A7IDUu44Kr44Km44Oz44OI44KS6L+95YqgOyA2LuOCueOCpOODg+ODgeOBr+S7peS4iuOBruapn+iDveOCkumBuOaKnuOBl+OBvuOBmTsgNy7oh6rli5Xjg5rjg7zjgrjjgoHjgY/jgoouCi8vIEBpY29uICAgIGh0dHBzOi8vYWUwMS5hbGljZG4uY29tL2tmL0hhYzFhNTgwNTVjNTA0N2NkYjkxMzQ5ZTkxYWEyMDhkNWsuanBnCi8vIEBhdXRob3IgICAgQUMKLy8gQGxpY2Vuc2UgICAgR1BMLTMuMC1vbmx5Ci8vIEBjcmVhdGUgICAgIDIwMTUtMTEtMjUKLy8gQHJ1bi1hdCAgICAgZG9jdW1lbnQtYm9keQovLyBAdmVyc2lvbiAgICAyNS4wMQovLyBAY29ubmVjdCAgICBiYWlkdS5jb20KLy8gQGNvbm5lY3QgICAgZ29vZ2xlLmNvbQovLyBAY29ubmVjdCAgICBnb29nbGUuY29tLmhrCi8vIEBjb25uZWN0ICAgIGdvb2dsZS5jb20uanAKLy8gQGNvbm5lY3QgICAgYmluZy5jb20KLy8gQGNvbm5lY3QgICAgZHVja2R1Y2tnby5jb20KLy8gQGNvbm5lY3QgICAgZG9nZWRvZ2UuY29tCi8vIEBjb25uZWN0ICAgIHNvLmNvbQovLyBAaW5jbHVkZSAgICAqOi8vaXB2Ni5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vd3d3LmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgICo6Ly93d3cxLmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgICo6Ly9tLmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgICo6Ly94dWVzaHUuYmFpZHUuY29tL3MqCi8vIEBpbmNsdWRlICAgICo6Ly93d3cuc28uY29tL3M/KgovLyBAaW5jbHVkZSAgICAqOi8vKi5iaW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICo6Ly9lbmNyeXB0ZWQuZ29vZ2xlLiovc2VhcmNoKgovLyBAaW5jbHVkZSAgICAqOi8vKi5nb29nbGUqL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgKjovLyouZ29vZ2xlKi93ZWJocCoKLy8gQGluY2x1ZGUgICAgKjovLyouemhpaHUuY29tLyoKLy8gQGluY2x1ZGUgICAgKjovLypkdWNrZHVja2dvLmNvbS8qCi8vIEBpbmNsdWRlICAgICo6Ly8qLmRvZ2Vkb2dlLmNvbS8qCi8vIEBleGNsdWRlICAgICo6Ly8qLmdvb2dsZSovc29ycnkqCi8vIEBleGNsdWRlICAgIGh0dHBzOi8vemhpZGFvLmJhaWR1LmNvbS8qCi8vIEBleGNsdWRlICAgIGh0dHBzOi8vKi56aGlkYW8uYmFpZHUuY29tLyoKLy8gQGV4Y2x1ZGUgICAgaHR0cHM6Ly93d3cuYmFpZHUuY29tL2ltZy8qCi8vIEBzdXBwb3J0VVJMICBodHRwczovL2FjLnR1amlkdS5jb20vCi8vIEBob21lLXVybCAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtVFcvc2NyaXB0cy8xNDE3OAovLyBAaG9tZS11cmwyICBodHRwczovL2dpdGh1Yi5jb20vbGFuZ3JlbjEzNTMvR01fc2NyaXB0Ci8vIEBob21lcGFnZVVSTCAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1UVy9zY3JpcHRzLzE0MTc4Ci8vIEBjb3B5cmlnaHQgIDIwMTUtMjAyMCwgQUMKLy8gQGxhc3Rtb2RpZmllZCAgMjAyMS0xMi0wNgovLyBAZmVlZGJhY2stdXJsICBodHRwczovL2dpdGh1Yi5jb20vbGFuZ3JlbjEzNTMvR01fc2NyaXB0Ci8vIEBub3RlICAgIDIwMjEuMTItMDYtVjI1LjAxIOS/ruWkjeeZvuW6puagt+W8j+WBj+W3piAmIOS/ruWkjeiwt+atjOagt+W8j+aYvuekugovLyBAbm90ZSAgICAyMDIxLjEwLTMxLVYyNC4yOSBmaXhlZCBMZXNzIHJlcXVpcmVtZW50IGZvciBmYXN0ZXIgTG9hZAovLyBAbm90ZSAgICAyMDIxLjEwLTI5LVYyNC4yNyDnp7vpmaTlv4XlupTog73pgInmi6nnmoTlub/lkYrvvJvlop7liqDoh6rlrprkuYnmoLflvI9sZXNz55qE5pSv5oyBCi8vIEBub3RlICAgIDIwMjEuMDktMDItVjI0LjI2IOS/ruWkjeW/heW6lOWkmmZhdmljb27vvIzkv67lpI3nmb7luqbnmb7np5Hpl67popjvvJvkv67lpI3osLfmrYzkuIDkuKrlsI/pl67popgKLy8gQG5vdGUgICAgMjAyMS4wNy0xNi1WMjQuMjUg5L+u5aSN5LiA5LiqYnVn77yb5YW85a6555m+5bqm5LiL5pCc57Si6IKh56WodGFn77ybCi8vIEBub3RlICAgIDIwMjEuMDYtMTUtVjI0LjI0IOabtOaNomNkbuWcsOWdgAovLyBAbm90ZSAgICAyMDE3LjA1LjEyIC0+IDIwMjEuMDYtMTUgJiYgVjguNiAtPiBWMjQuMjQg5ZCE56eN5ZCE5qC355qE5Y6G5Y+y5pu05paw6K6w5b2V77yM5LuO5LiA5Liq54mI5pys6L+t5Luj5Yiw5Y+m5LiA5Liq54mI5pysCi8vIEBub3RlICAgIDIwMTcuMDUuMTItVjguNCDmlrDlop7vvJrpu5jorqTlsY/olL3osLfmrYznmoTlronlhajmkJzntKLlip/og70KLy8gQG5vdGUgICAgMjAxNy4wNS4wNS1WOC4zIOS/ruWkjWluY2x1ZGXojIPlm7TlpKrlsI/lr7zoh7TnmoTnmb7luqbnn6XpgZPnmoTlsY/olL3pl67popgKLy8gQG5vdGUgICAgMjAxNy4wNS4wNC1WOC4yIOe7iOS6juS/ruWkjeS6hueZvuW6puefpemBk+WbvueJh+abv+aNouS6huaWh+Wtl+eahOi/meS4quWkp0JVRzsg6aG65L6/5aSE55CG5LqGc3VwZXJhcGkuemhpZGFvLmJhaWR1LmNvbTsg5paw5aKe6LC35q2M5pCc57Si57uT5p6c6YeN5a6a5ZCR5Y676ZmkCi8vIEBub3RlICAgIDIwMTcuMDUuMDQtVjguMSDnu4jkuo7kv67lpI3kuobnmb7luqbnn6XpgZPlm77niYfmm7/mjaLkuobmloflrZfnmoTov5nkuKrlpKdCVUfvvIzpobrkvr/lpITnkIbkuoZzdXBlcmFwaS56aGlkYW8uYmFpZHUuY29tCi8vIEBub3RlICAgIDIwMTcuMDUuMDQtVjguMCDnu4jkuo7kv67lpI3kuobnmb7luqbnn6XpgZPlm77niYfmm7/mjaLkuobmloflrZfnmoTov5nkuKrlpKdCVUfvvIzlvoXmtYvor5UKLy8gQG5vdGUgICAgMjAxNy4wMy4yOC1WNy42IOS/ruWkjeWcqFZpb2xlbnRNb25rZXnkuIrnmoTkuI3mlK/mjIHnmoTpl67popgKLy8gQG5vdGUgICAgMjAxNy4wMy4yOC1WNy41IOWwneivleS/ruWkjWNocm9tZeS4iueahOmXrumimAovLyBAbm90ZSAgICAyMDE3LjAzLjIxLVY3LjQg5bCd6K+V5aSE55CGRWRnZeS4iuS4jeaUr+aMgeeahOmXrumimO+8jOe7k+aenOWPkeeOsOaYr0VkZ2XmnKzouqvnmoRUYW1wZXJNb25rZXnmlK/mjIHmnInpl67popgKLy8gQG5vdGUgICAgMjAxNy4wMy4xOS1WNy4zIOS/ruWkjeaJk+W8gOeZvuW6puS5i+WQjuWGjeasoeeCueWHu+KAnOeZvuW6puS4gOS4i+KAneWvvOiHtOeahOaXoOazleabtOaWsOmHjeWumuWQkemXrumimAovLyBAbm90ZSAgICAyMDE3LjAzLjE5LVY3LjIg5pyq55+l5Y6f5ZugY2hyb21l55qETXV0YXRpb25PYnNlcnZlcuaXoOazleS9v+eUqOS6hu+8jOe7p+e7reWbnuW9kuS7peWJjeeahERPTU5vZGVJbnNlcnRlZAovLyBAbm90ZSAgICAyMDE3LjAyLjE3LVY3LjAg5L+u5aSN5pCc54uX55qE5pCc57Si57uT5p6c6YeN5a6a5ZCR6Zeu6aKYK+aUueS4quWQjeWtlwovLyBAbm90ZSAgICAyMDE3LjAyLjE3LVY2Ljkg5L+u5aSN5pCc54uX55qE5pCc57Si57uT5p6c6YeN5a6a5ZCR6Zeu6aKYCi8vIEBub3RlICAgIDIwMTYuMTAuMjctVjYuNyDkv67lpI3kuobku6XliY3nmoTph43lpI3or7fmsYLvvIznjrDlnKjnmoTor7fmsYLmlbDlupTor6XlsI/kuoblvojlpJrvvIznvZHnu5zkuZ/lsLHkuI3ljaHkuobvvIzmhJ/op4nokIzokIzlk5IKLy8gQG5vdGUgICAgMjAxNi4wNC4yNC1WNi42IOaBouWkjeS7peWJjeeahOeJiOacrO+8jOWboOS4uuWFvOWuueaAp+mXrumimAovLyBAbm90ZSAgICAyMDE1LjEyLjAxLVY1LjAg5Yqg5YWl5pCc54uX55qE5pSv5oyB77yM5L2G5piv5pSv5oyB5LiN5piv5b6I5aW9Ci8vIEBub3RlICAgIDIwMTUuMTEuMjUtVjIuMCDkvJjljJbvvIzlt7Lnu4/mmK/nnJ/lrp7lnLDlnYDnmoTkuI3lho3lsJ3or5Xojrflj5YKLy8gQG5vdGUgICAgMjAxNS4xMS4yNS1WMS4wIOWujOaIkOWOu+aOieeZvuW6pumHjeWumuWQkeeahOWKn+iDvQovLyBAcmVzb3VyY2UgIGJhaWR1Q29tbW9uU3R5bGUgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2JhaWR1Q29tbW9uU3R5bGUuY3NzP3Q9MjUuMDEKLy8gQHJlc291cmNlICBiYWlkdU9uZVBhZ2VTdHlsZSAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9iYWlkdU9uZVBhZ2VTdHlsZS5jc3M/dD0yNS4wMTIKLy8gQHJlc291cmNlICBiYWlkdVR3b1BhZ2VTdHlsZSAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9iYWlkdVR3b1BhZ2VTdHlsZS5jc3M/dD0yNS4wMTIKLy8gQHJlc291cmNlICBiYWlkdUxpdGVTdHlsZSAgICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9iYWlkdUxpdGVTdHlsZS5jc3M/dD0yNS4wMQovLyBAcmVzb3VyY2UgIGdvb2dsZUNvbW1vblN0eWxlICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2dvb2dsZUNvbW1vblN0eWxlLmNzcz90PTI1LjAxCi8vIEByZXNvdXJjZSAgZ29vZ2xlT25lUGFnZVN0eWxlIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZ29vZ2xlT25lUGFnZVN0eWxlLmNzcz90PTI1LjAxCi8vIEByZXNvdXJjZSAgZ29vZ2xlVHdvUGFnZVN0eWxlIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZ29vZ2xlVHdvUGFnZVN0eWxlLmNzcz90PTI1LjAxCi8vIEByZXNvdXJjZSAgYmluZ0NvbW1vblN0eWxlICAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvYmluZ0NvbW1vblN0eWxlLmNzcz90PTI1LjAxCi8vIEByZXNvdXJjZSAgYmluZ09uZVBhZ2VTdHlsZSAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvYmluZ09uZVBhZ2VTdHlsZS5jc3M/dD0yNS4wMQovLyBAcmVzb3VyY2UgIGJpbmdUd29QYWdlU3R5bGUgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2JpbmdUd29QYWdlU3R5bGUuY3NzP3Q9MjUuMDEKLy8gQHJlc291cmNlICBkdWNrQ29tbW9uU3R5bGUgICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9kdWNrQ29tbW9uU3R5bGUuY3NzP3Q9MjUuMDEKLy8gQHJlc291cmNlICBkdWNrT25lUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9kdWNrT25lUGFnZVN0eWxlLmNzcz90PTI1LjAxCi8vIEByZXNvdXJjZSAgZHVja1R3b1BhZ2VTdHlsZSAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZHVja1R3b1BhZ2VTdHlsZS5jc3M/dD0yNS4wMQovLyBAcmVzb3VyY2UgIGRvZ2VDb21tb25TdHlsZSAgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2RvZ2VDb21tb25TdHlsZS5jc3M/dD0yNS4wMQovLyBAcmVzb3VyY2UgIGRvZ2VPbmVQYWdlU3R5bGUgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2RvZ2VPbmVQYWdlU3R5bGUuY3NzP3Q9MjUuMDEKLy8gQHJlc291cmNlICBkb2dlVHdvUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9kb2dlVHdvUGFnZVN0eWxlLmNzcz90PTI1LjAxCi8vIEByZXNvdXJjZSAgTWFpbkh1WWFuU3R5bGUgICAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvSHVZYW5TdHlsZS5jc3M/dD0yNS4wMQovLyBAcmVzb3VyY2UgIFNpdGVDb25maWdSdWxlcyAgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL1NpdGVDb25maWdSdWxlcy5jb25mP3Q9MjUuMDEKLy8gQHJlcXVpcmUgaHR0cHM6Ly9jZG4uc3RhdGljZmlsZS5vcmcvdnVlLzIuNi4xMS92dWUubWluLmpzCi8vIEByZXF1aXJlIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdnVlQDIuNi4xMi9kaXN0L3Z1ZS5taW4uanMKLy8gQHJlcXVpcmUgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9sZXNzX2Jyb3dzZXJfZml4QDQuMS4yL2Rpc3QvbGVzcy5qcwovLyBAcmVxdWlyZSBodHRwczovL2Nkbi5zdGF0aWNmaWxlLm9yZy9tZDUtd2FzbS8xLjAuMi9tZDUtd2FzbS5taW4uanMKLy8gQGdyYW50ICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICBHTS5nZXRWYWx1ZQovLyBAZ3JhbnQgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNLnNldFZhbHVlCi8vIEBncmFudCAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgR01fZ2V0UmVzb3VyY2VVUkwKLy8gQGdyYW50ICAgIEdNX2xpc3RWYWx1ZXMKLy8gQGdyYW50ICAgIEdNX2dldFJlc291cmNlVXJsCi8vIEBncmFudCAgICBHTS5nZXRSZXNvdXJjZVVybAovLyBAZ3JhbnQgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgIEdNX2dldFJlc291cmNlVGV4dAovLyBAZ3JhbnQgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgdW5zYWZlV2luZG93Ci8vIEBuYW1lc3BhY2UgMTM1MzQ2NDUzOUBxcS5jb20KLy8gPT0vVXNlclNjcmlwdD09Ci8vIGNhbGMoWDEodncpICsgWDIocHgpKSAtPiBCKHB4KSDkvb/nlKggaHR0cDovL3d3dy55dW5zdWFuLmluZm8vbWF0cml4Y29tcHV0YXRpb25zL3NvbHZlbGluZWFyc3lzdGVtcy5odG1sIOi/m+ihjOiuoeeulwohZnVuY3Rpb24gKCkgewogIGxldCBpc2RlYnVnID0gZmFsc2U7CiAgbGV0IGlzTG9jYWxEZWJ1ZyA9IGlzZGVidWcgfHwgZmFsc2U7CiAgbGV0IGRlYnVnID0gaXNkZWJ1ZyA/IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkgOiAoKT0+e30KICBsZXQgYWNDc3NMb2FkRmxhZyA9IGZhbHNlOwoKICBsZXQgaW5FeHRNb2RlID0gdHlwZW9mIChpc0V4dGVuc2lvbikgIT09ICJ1bmRlZmluZWQiOwogIGxldCBpbkdNTW9kZSA9IHR5cGVvZiAoR01faW5mby5zY3JpcHRIYW5kbGVyKSAhPT0gInVuZGVmaW5lZCI7IC8vID0gIkdyZWFzZW1vbmtleSIgfHwgIlRhbXBlcm1vbmtleSIgfHwgIlZpb2xlbnRNb25rZXkiCiAgLy8g5paw54mI5pys55qER3JlYXNlTW9ua2V55piv5bim5pyJc2NyaXB0SGFuZGxlcu+8jOS9huaYr+ayoeaciUdNX2dldFJlc291cmNlVGV4dO+8m+aXp+eJiOacrOS4jeW4pnNjcmlwdEhhbmRsZXLvvIzkvYbmmK/mnIlHTV9nZXRSZXNvdXJjZVRleHQKICAvLyBsZXQgaXNOZXdHTSA9IHR5cGVvZihHTV9pbmZvLnNjcmlwdEhhbmRsZXIpICE9PSAidW5kZWZpbmVkIiAmJiBHTV9pbmZvLnNjcmlwdEhhbmRsZXIudG9Mb3dlckNhc2UoKSA9PT0gImdyZWFzZW1vbmtleSI7CiAgbGV0IGlzTmV3R00gPSBmYWxzZTsKICAvLyBpbkV4dE1vZGUgJiBpbkdNTW9kZQogIC8vIHRydWUgICAgdHJ1ZSA95omp5bGV5LiL55qER03ku6PnoIEg5LiN5omn6KGMCiAgLy8gdHJ1ZSAgICBmYWxzZT3mianlsZXkuIvku6PnoIEg5omn6KGMCiAgLy8gZmFsc2UgIHRydWUgPeS7hUdN5Luj56CBIOaJp+ihjAogIC8vIGZhbHNlICBmYWxzZT3lvILluLgg5L2G5piv6L+Y5piv6KaB5omn6KGM5Luj56CBCiAgZGVidWcoIueoi+W6j+W8gOWniyIpOwogIGlmIChpbkV4dE1vZGUgPT09IHRydWUgJiYgaW5HTU1vZGUgPT09IHRydWUgfHwgdHlwZW9mKHdpbmRvdy5BQzY2NkluaXQpICE9PSAndW5kZWZpbmVkJykgewogICAgY29uc29sZS5sb2coIuaJqeWxleaooeW8jy3ohJrmnKzkuI3lkK/nlKgiKTsKICAgIHJldHVybjsKICB9CiAgd2luZG93LkFDNjY2SW5pdCA9IHRydWUKICBpZiAodHlwZW9mIChHTSkgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAvLyDov5nkuKrmmK9WaW9sZW50TW9ua2V555qE5pSv5oyB6YCJ6aG5CiAgICBHTSA9IHt9OwogICAgR00uc2V0VmFsdWUgPSBHTV9zZXRWYWx1ZTsKICAgIEdNLmdldFZhbHVlID0gR01fZ2V0VmFsdWU7CiAgfQogIChmdW5jdGlvbiAoKSB7CiAgICBkZWJ1Zygi56iL5bqP5omn6KGMIik7CiAgICBsZXQgbmVlZERpc3BsYXlOZXdGdW4gPSB0cnVlOyAvLyDmnKzmrKHmm7TmlrDmmK/lkKbmnInmlrDlip/og73pnIDopoHlsZXnpLoKICAgIGlmICh3aW5kb3cuTm9kZUxpc3QgJiYgIU5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7CiAgICAgIE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICAgICAgdGhpc0FyZyA9IHRoaXNBcmcgfHwgd2luZG93OwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzW2ldLCBpLCB0aGlzKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgICAvLyBsZXQgUmVkaXJlY3RNYXAgPSBuZXcgTWFwKCk7CiAgICBsZXQgQUNDb25maWcgPSB7fTsKICAgIGxldCBEQkNvbmZpZyA9IHt9OyAvLyDku4XkvZzkuLrmma7pgJpBQ0NvbmZpZ+eahOWOn+Wni+Wkh+S7ve+8jOWcqOWFtuS7lumdnuWFs+mUruS9jee9ruaXtui/m+ihjOS/neWtmOS9v+eUqAogICAgLyrlrZjlnKjlr7nmnKrliJ3lp4vljJblj5jph4/nmoTliJ3lp4vljJbotYvlgLwt5peg6ZyA5ouF5b+D6L+t5Luj5YW85a656Zeu6aKYKi8KICAgIGxldCBEZWZhdWx0Q29uZmlnID0gewogICAgICBpc1JlZGlyZWN0RW5hYmxlOiBmYWxzZSwgIC8vIOaYr+WQpuW8gOWQr+mHjeWumuWQkeWKn+iDvQogICAgICBpc0Fkc0VuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+WOu+W5v+WRiuaooeW8jwogICAgICBpc0F1dG9wYWdlOiB0cnVlLCAgLy8g5piv5ZCm5byA5ZCv6Ieq5Yqo57+76aG15Yqf6IO9CiAgICAgIGlzQmxvY2tFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKblvIDlkK/ljrvmi6bmiKrmqKHlvI8KICAgICAgaXNCbG9ja0Rpc3BsYXk6IGZhbHNlLCAvLyDmmK/lkKbliKDpmaTlt7Lmi6bmiKrnmoTmnaHnm64KICAgICAgaXNCbG9ja0J0bk5vdERpc3BsYXk6IGZhbHNlLCAvLyDmmK/lkKbmmL7npLpibG9ja+aMiemSrgogICAgICBBZHNTdHlsZUVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCv6Ieq5a6a5LmJ5qC35byP5qih5byPCgogICAgICBiYWlkdTogewogICAgICAgIG5hbWU6ICdiYWlkdScsICAvLyBDU1MgbG9hZCDnmoTliY3nvIDmoIflv5cKICAgICAgICBBZHNTdHlsZU1vZGU6ICcxJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t55m+5bqmCiAgICAgIH0sCiAgICAgIGdvb2dsZTogewogICAgICAgIG5hbWU6ICdnb29nbGUnLAogICAgICAgIEFkc1N0eWxlTW9kZTogJzMnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3osLfmrYwKICAgICAgfSwKICAgICAgYmluZzogewogICAgICAgIG5hbWU6ICdiaW5nJywKICAgICAgICBBZHNTdHlsZU1vZGU6ICczJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5b+F5bqUCiAgICAgIH0sCiAgICAgIGR1Y2s6IHsKICAgICAgICBuYW1lOiAnZHVjaycsCiAgICAgICAgQWRzU3R5bGVNb2RlOiAnMycsIC8vIDAt5LiN5bimY3Nz77ybMS3ljZXliJfpnaDlt6bvvJsyLeWNleWIl+WxheS4re+8mzMt5Y+M5YiX5bGF5LitCiAgICAgICAgSHVZYW5Nb2RlOiBmYWxzZSwgLy8g5oqk55y85qih5byPLUR1Y2tHT0dPCiAgICAgIH0sCiAgICAgIGRvZ2U6IHsKICAgICAgICBuYW1lOiAnZG9nZScsCiAgICAgICAgQWRzU3R5bGVNb2RlOiAnMycsIC8vIDAt5LiN5bimY3Nz77ybMS3ljZXliJfpnaDlt6bvvJsyLeWNleWIl+WxheS4re+8mzMt5Y+M5YiX5bGF5LitCiAgICAgICAgSHVZYW5Nb2RlOiBmYWxzZSwgLy8g5oqk55y85qih5byPLUR1Y2tHT0dPCiAgICAgIH0sCiAgICAgIHNvZ291OiB7CiAgICAgICAgbmFtZTogJ3NvZ291JywKICAgICAgICBBZHNTdHlsZU1vZGU6ICcxJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5pCc54uXCiAgICAgIH0sCiAgICAgIHpoaWh1OiB7CiAgICAgICAgbmFtZTogJ3poaWh1JywKICAgICAgICBBZHNTdHlsZU1vZGU6ICcwJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5pCc54uXCiAgICAgIH0sCiAgICAgIG90aGVyOiB7CiAgICAgICAgbmFtZTogJ290aGVyJywKICAgICAgICBBZHNTdHlsZU1vZGU6ICcwJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5pCc54uXCiAgICAgIH0sCgogICAgICBTdHlsZV9CYWlkdUxpdGU6IGZhbHNlLCAvLyBCYWlkdV9MaXRl5qC35byP6KGoCgogICAgICBkZWZhdWx0SHVZYW5Db2xvcjogIiNERUYxRUYiLAogICAgICBpc1VzZXJDb2xvckVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCvZmF2aWNvbuWbvuagh+WKn+iDvQogICAgICBpc0Zhdmljb25FbmFibGU6IHRydWUsIC8vIOaYr+WQpuW8gOWQr2Zhdmljb27lm77moIflip/og70KICAgICAgZGVmYXVsdEZhdmljb25Vcmw6ICJodHRwczovL2FlMDEuYWxpY2RuLmNvbS9rZi9IVEIxZFJZMFg4T0QzS1ZqU1pGRnE2QW45cFhheS5qcGciLCAvLyDpu5jorqTlm77moIflnLDlnYAKICAgICAgZG9EaXNhYmxlU3VnOiB0cnVlLCAvLyDmmK/lkKbnpoHmraLnmb7luqbmkJzntKLpooTmtYsKICAgICAgaXNSaWdodERpc3BsYXlFbmFibGU6IHRydWUsIC8vIOaYr+WQpuW8gOWQr+WPs+S+p+i+ueagjwogICAgICBpc0NvdW50ZXJFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKbmmL7npLrorqHmlbDlmagKICAgICAgaXNBTGluZUVuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuemgeatouS4i+WIkue6vwogICAgICBpc1VzZXJTdHlsZUVuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+iHquWumuS5ieagt+W8jwogICAgICBub3JtYWxpemVEdWNrOiB0cnVlLCAvLyDmmK/lkKbmjInnhafluLjnlKjkuaDmg6/ljrvphY3nva5EdWNrRHVja0dvCiAgICAgIGFjY2VwdExpY2Vuc2U6IGZhbHNlLAogICAgICBpc0VuTGFuZzogZmFsc2UsCiAgICAgIGlzR29vbGVJbkJhaWR1TW9kZUVuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+iwt+atjOaQnOe0oue7k+aenOmhteeahOeZvuW6puWbvuagh+aYvuekugogICAgICBVc2VyQmxvY2tMaXN0OiBbXSwKICAgICAgVXNlclN0eWxlVGV4dDoKICAgICAgICBgLyoq6K6h5pWw5Zmo55qE6aKc6Imy5qC35byPKi8KZGl2IC5BQy1Db3VudGVyVHsKICBiYWNrZ3JvdW5kOiAjRkQ5OTk5Owp9Ci8qKuWPs+S+p+agj+eahOagt+W8jy3lhbblrp7kuI3lvIDlkK/mm7Tlpb3nnIvkuIDkupsqLwojY29udGVudF9yaWdodHsKICBwYWRkaW5nOiAyMHB4IDE1cHggMTVweDsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJveC1zaGFkb3c6IDAgMCAyMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4xKTsKICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAyMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4xKTsKICAtbW96LWJveC1zaGFkb3c6IDAgMCAyMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4xKTsKfQpib2R5W2JhaWR1XSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CmJvZHlbYmFpZHVdOmJlZm9yZSB7CiAgcG9zaXRpb246IGZpeGVkOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBjb250ZW50OiAnJzsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2h0dHBzOi8vaW1nLnR1amlkdS5jb20vaW1hZ2UvNWZkZGU4NDY4NDIzZS5qcGcnKTsKICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgYXV0bzsKICBvcGFjaXR5OiAxOyAvKuiDjOaZr+WbvumAj+aYjuW6pj0wLjjvvIzmnIDlpKcxKi8KfQovKirpmpDol4/pppbpobXnmoTlpKflm77moIct5L+u5aSN5Y+v6IO95a+86Ie05aSW5o+05qC35byP5byC5bi4KiovCmJvZHlbYmFpZHVdICNzX2xnX2ltZ19uZXd7CiAgZGlzcGxheTpub25lICFpbXBvcnRhbnQ7Cn0KYm9keVtiYWlkdV0gLmMtY29udGFpbmVyewogIGJvcmRlci1yYWRpdXM6IDVweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LCAwLjMpICFpbXBvcnRhbnQ7IC8q55m+5bqm5pCc57Si5Z2X5L2T55qE6aKc6Imy77yb6YCP5piO5bqmPTAuMe+8jOacgOWkpzEqLwp9CmJvZHlbYmFpZHVdIC5jLWNvbnRhaW5lciBoM3sKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0OCwyNDgsMjQ4LCAwLjMpICFpbXBvcnRhbnQ7IC8q55m+5bqm5pCc57Si5Z2X5L2TIC0g5qCH6aKY55qE6aKc6Imy77yb6YCP5piO5bqmPTAuMe+8jOacgOWkpzEqLwp9YCwKICAgICAgb2xkVmVyc2lvbjogIiIsCiAgICAgIGxhc3RTYXZlVGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICB9OwogICAgbGV0IENPTlNUID0gewogICAgICBoYXNOZXdGdW5jTmVlZERpc3BsYXk6IHRydWUsCiAgICAgIHNvcnRJbmRleDogMSwKICAgICAgaXNHb29nbGVJbWFnZVVybDogZmFsc2UsCiAgICAgIGlzR29vZ2xlU3BlY2lhbDogZmFsc2UsIC8vIOWIpOaWreaYr+WQpuWtmOWcqCNyc28+Lmc7IHRydWU95a2Y5ZyoCiAgICAgIHVzZUl0ZW06IHt9LAogICAgICBTdHlsZU1hbmdlcjogZnVuY3Rpb24gKCkgewogICAgICB9LAogICAgfTsKCiAgICB2YXIgY3VyU2l0ZSA9IHsKICAgICAgU2l0ZVR5cGVJRDogMSwgIC8vIOW9k+WJjeermeeCueeahElECiAgICAgIE1haW5UeXBlOiAiIiwgICAgLy8g5Li75L2T6IqC54K577yM5b6I5aSa5Liq55qE54i26IqC54K5CiAgICAgIFN0eXBlX05vcm1hbDogIiIsIC8vIOmHjeWumuWQkemAieaLqeWZqO+8jOWPquacieeZvuW6pi3mkJzni5ct5aW95pCcCiAgICAgIEZhdmljb25UeXBlOiAiIiwgIC8vIGZhdmljb27nmoTln5/lkI3mo4Dmn6XlmahjaXRl77yM55So5LqO6I635Y+WaG9zdOeUqAogICAgICBGYXZpY29uQWRkVG86ICIiLCAvLyBmYXZpY29u6YCJ5oup5Zmo77yM55So5LqO5o+S5YWl5YiwdGl0bGXkuYvliY3nmoQKICAgICAgQ291bnRlclR5cGU6ICIiLCAgLy8g6K6h5pWw5Zmo5re75Yqg55qE5L2N572u77yM5LiA6Iis5ZKMZmF2aWNvbuS9jee9ruS4gOiHtAogICAgICBCbG9ja1R5cGU6ICIiLCAgLy8g5bGP6JS95oyJ6ZKu55qE5L2N572u77yM5LiA6Iis5ZyodGl0bGXkuYvlkI4KICAgIH07CiAgICBsZXQgREJTaXRlID0gewogICAgICBiYWlkdTogewogICAgICAgIFNpdGVUeXBlSUQ6IDEsCiAgICAgICAgTWFpblR5cGU6ICIjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAuYy1jb250YWluZXIgYXJ0aWNsZSBhIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5jLXNob3d1cmwiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAnLy9kaXZbQGlkPSJwYWdlIl0vL2FbY29udGFpbnModGV4dCgpLCLkuIvkuIDpobUiKV1bQGhyZWZdJywKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiY3NzO2RpdiNjb250ZW50X2xlZnQgPiAqIiwKICAgICAgICAgIEhUX2luc2VydDogWyJjc3M7ZGl2I2NvbnRlbnRfbGVmdCIsIDJdLAogICAgICAgICAgcmVwbGFjZUU6ICJjc3M7I3BhZ2UiLAogICAgICAgICAgc3R5bGlzaDogIi5hdXRvcGFnZXJpemVfcGFnZV9pbmZvLCBkaXYuc3Atc2VwYXJhdG9yIHttYXJnaW4tYm90dG9tOiAxMHB4ICFpbXBvcnRhbnQ7fSIsCiAgICAgICAgfQogICAgICB9LAogICAgICBzb2dvdTogewogICAgICAgIFNpdGVUeXBlSUQ6IDIsCiAgICAgICAgTWFpblR5cGU6ICIjbWFpbiAucmVzdWx0cz5kaXYiLAogICAgICAgIFN0eXBlX05vcm1hbDogImgzLnB0PmEsIGgzLnZyVGl0bGU+YSIsCiAgICAgICAgRmF2aWNvblR5cGU6ICJjaXRlW2lkKj0nY2FjaGVyZXN1bHRfaW5mb18nXSIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLAogICAgICAgIENvdW50ZXJUeXBlOiAiLnJlc3VsdHM+ZGl2IiwKICAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9XCJwYWdlYmFyX2NvbnRhaW5lclwiXS8vYVtAaWQ9XCJzb2dvdV9uZXh0XCJdIiwKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiLy9kaXZbQGNsYXNzPVwicmVzdWx0c1wiXS9kaXYiLAogICAgICAgICAgSFRfaW5zZXJ0OiBbIi8vZGl2W0BjbGFzcz1cInJlc3VsdHNcIl0iLCAyXSwKICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJwYWdlYmFyX2NvbnRhaW5lclwiKSIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGhhb3NvdTogewogICAgICAgIFNpdGVUeXBlSUQ6IDMsCiAgICAgICAgTWFpblR5cGU6ICIucmVzLWxpc3QiLAogICAgICAgIFN0eXBlX05vcm1hbDogIi5yZXMtbGlzdCBoMz5hIiwKICAgICAgICBGYXZpY29uVHlwZTogImNpdGUiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAiLy9kaXZbQGlkPSdwYWdlJ10vL2FbdGV4dCgpPSfkuIvkuIDpobU+J10gfCBpZCgnc25leHQnKSIsCiAgICAgICAgICBwYWdlRWxlbWVudDogIi8vZGl2W0BpZD0nY29udGFpbmVyJ10vZGl2IiwKICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAaWQ9J2NvbnRhaW5lciddIiwgMl0sCiAgICAgICAgICByZXBsYWNlRTogImlkKCdwYWdlJykiCiAgICAgICAgfQogICAgICB9LAogICAgICBnb29nbGU6IHsKICAgICAgICBTaXRlVHlwZUlEOiA0LAogICAgICAgIE1haW5UeXBlOiAiI3JzbyAuZyIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIuaVVoMzAiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNyc28gLmcgaDMsLl95RT5kaXZbY2xhc3N+PV9ra10gaDMiLAogICAgICAgIEJsb2NrVHlwZTogIi5yYz4ucj5hIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICdpZCgicG5uZXh0IikgfCBpZCgibmF2YmFyIG5hdmNudCBuYXYiKS8vdGRbc3Bhbl0vZm9sbG93aW5nLXNpYmxpbmc6OnRkWzFdL2EgfCBpZCgibm4iKS9wYXJlbnQ6OmEnLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICcvL2RpdltAaWQ9InJlcyJdJywKICAgICAgICAgIEhUX2luc2VydDogWyJjc3M7I3JlcyIsIDJdLAogICAgICAgICAgcmVwbGFjZUU6ICcvL2RpdltAaWQ9Im5hdmNudCJdIHwgLy9kaXZbQGlkPSJyY250Il0vL2RpdltAcm9sZT0ibmF2aWdhdGlvbiJdJwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmluZzogewogICAgICAgIFNpdGVUeXBlSUQ6IDUsCiAgICAgICAgTWFpblR5cGU6ICIjYl9yZXN1bHRzPmxpIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5iX2F0dHJpYnV0aW9uPmNpdGUiLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYW5zXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIiLAogICAgICAgIEJsb2NrVHlwZTogImgyIGEiLAogICAgICAgIHBhZ2VyOiB7CiAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsXCJzYl9wYWdOXCIpXSIsCiAgICAgICAgICBwYWdlRWxlbWVudDogImlkKFwiYl9yZXN1bHRzXCIpL2xpW25vdChjb250YWlucyhAY2xhc3MsXCJiX3BhZ1wiKSBvciBjb250YWlucyhAY2xhc3MsXCJiX2FucyBiX3RvcFwiKSldIiwKICAgICAgICAgIEhUX2luc2VydDogWyJpZChcImJfcmVzdWx0c1wiKS9saVtAY2xhc3M9XCJiX3BhZ1wiXSIsIDFdLAogICAgICAgICAgcmVwbGFjZUU6ICJpZChcImJfcmVzdWx0c1wiKS8vbmF2W0Byb2xlPVwibmF2aWdhdGlvblwiXSIsCiAgICAgICAgfQogICAgICB9LAogICAgICBkdWNrOiB7CiAgICAgICAgU2l0ZVR5cGVJRDogMTAsCiAgICAgICAgTWFpblR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX3VybF9fZG9tYWluIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcyxcInNiX3BhZ05cIildIiwKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLAogICAgICAgICAgSFRfaW5zZXJ0OiBbImlkKFwiYl9yZXN1bHRzXCIpL2xpW0BjbGFzcz1cImJfcGFnXCJdIiwgMV0sCiAgICAgICAgICByZXBsYWNlRTogImlkKFwiYl9yZXN1bHRzXCIpLy9uYXZbQHJvbGU9XCJuYXZpZ2F0aW9uXCJdIiwKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRvZ2U6IHsKICAgICAgICBTaXRlVHlwZUlEOiAxMSwKICAgICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdXJsX19kb21haW4iLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwKICAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICIvL2FbY29udGFpbnMoQGNsYXNzLFwic2JfcGFnTlwiKV0iLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZChcImJfcmVzdWx0c1wiKS9saVtub3QoY29udGFpbnMoQGNsYXNzLFwiYl9wYWdcIikgb3IgY29udGFpbnMoQGNsYXNzLFwiYl9hbnMgYl90b3BcIikpXSIsCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoXCJiX3Jlc3VsdHNcIikvbGlbQGNsYXNzPVwiYl9wYWdcIl0iLCAxXSwKICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJiX3Jlc3VsdHNcIikvL25hdltAcm9sZT1cIm5hdmlnYXRpb25cIl0iLAogICAgICAgIH0KICAgICAgfSwKICAgICAgbUJhaWR1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNiwKICAgICAgICBNYWluVHlwZTogIiNiX3Jlc3VsdHM+bGkiLAogICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLAogICAgICAgIENvdW50ZXJUeXBlOiAiI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbnNdPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsCiAgICAgIH0sCiAgICAgIHpoaWh1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNywKICAgICAgfSwKICAgICAgYmFpZHVfeHVlc2h1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogOCwKICAgICAgICBNYWluVHlwZTogIiNjb250ZW50X2xlZnQgLnJlc3VsdCIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAjcmVzdWx0cyAuYy1jb250YWluZXI+LmMtYmxvY2thIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHQtb3AsIC5jLXNob3d1cmwiLCAvLyBiYWlkdSDkvLzkuY7opoHmlLnniYjkuobvvJ8KICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjY29udGVudF9sZWZ0PiNkb3VibGU+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSwjY29udGVudF9sZWZ0PmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0iLAogICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgICB9LAogICAgICBvdGhlcjogewogICAgICAgIFNpdGVUeXBlSUQ6IDksCiAgICAgIH0KICAgIH07CiAgICBsZXQgU2l0ZVR5cGUgPSB7CiAgICAgIEJBSURVOiBEQlNpdGUuYmFpZHUuU2l0ZVR5cGVJRCwKICAgICAgTUJBSURVOiBEQlNpdGUubUJhaWR1LlNpdGVUeXBlSUQsCiAgICAgIFNPR09VOiBEQlNpdGUuc29nb3UuU2l0ZVR5cGVJRCwKICAgICAgU086IERCU2l0ZS5oYW9zb3UuU2l0ZVR5cGVJRCwKICAgICAgR09PR0xFOiBEQlNpdGUuZ29vZ2xlLlNpdGVUeXBlSUQsCiAgICAgIEJJTkc6IERCU2l0ZS5iaW5nLlNpdGVUeXBlSUQsCiAgICAgIERVQ0s6IERCU2l0ZS5kdWNrLlNpdGVUeXBlSUQsCiAgICAgIERPR0U6IERCU2l0ZS5kb2dlLlNpdGVUeXBlSUQsCiAgICAgIFpISUhVOiBEQlNpdGUuemhpaHUuU2l0ZVR5cGVJRCwKICAgICAgQkFJRFVfWFVFU0hVOiBEQlNpdGUuYmFpZHVfeHVlc2h1LlNpdGVUeXBlSUQsCiAgICAgIE9USEVSUzogOAogICAgfTsKICAgIGxldCBvdGhlckRhdGEgPSB7CiAgICAgIG90aGVyOiB7CiAgICAgICAgY3VyVGFiOiAxLCAvLyDlsZXnpLrnrKzkuoxwYW5lbAogICAgICAgIHNob3dCbG9ja0xpc3RBcmVhOiBmYWxzZSwgLy8gYmxvY2tMaXN05bGV56S65L2NdGV4dGFyZWEKICAgICAgICBhZGRCbG9ja0l0ZW06ICIiLCAgICAgLy8g55So5oi35omL5Yqo6L6T5YWl55qE5oum5oiq6KeE5YiZCiAgICAgICAgY3VySG9zdHM6IFtdLCAgICAgICAgIC8vIOWtmOaUvuW3sue7j+iuv+mXrueahGhvc3Rz5pWw5o2u5YaF5a65CiAgICAgIH0KICAgIH07ICAvLyDliLDml7blgJnmjILovb3liLBvdGhlcuS4igogICAgbGV0IEFsbERhdGEgPSB7CiAgICAgIEFDQ29uZmlnOiB7fSwKICAgICAgb3RoZXI6IG90aGVyRGF0YS5vdGhlciwKICAgICAgQ09OU1Q6IENPTlNULAogICAgICBsYW46IHsKICAgICAgICB1c2U6IHt9LAogICAgICAgIHpoX2NuOiB7CiAgICAgICAgICBtZW51X3RleHQ6ICLoh6rlrprkuYkiLAogICAgICAgICAgY3VyTGFuZzogInpoX2NuIiwKICAgICAgICAgIGZpZWxkc2V0X3BhbmVsOiB7CiAgICAgICAgICAgIHBhbmVsX3RpdGxlOiAiQUMt6YeN5a6a5ZCR6K6+572uICIgKyBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uICsgKGluRXh0TW9kZT8gJ0V4dCc6JycpLAogICAgICAgICAgICBzZXR0aW5nX3BhbmVsOiB7CiAgICAgICAgICAgICAgcmVkaXJlY3RfdGV4dDogIuS4u+WKn+iDvS3ph43lrprlkJHlip/og70iLAogICAgICAgICAgICAgIHJlZGlyZWN0X3RpdGxlOiAi6YeN5a6a5ZCR5Yqf6IO955qE5byA5ZCv5LiO5ZCmIiwKICAgICAgICAgICAgICB1c2VFbl90ZXh0OiAiRW4tTGFuZ3VhZ2UiLAogICAgICAgICAgICAgIHVzZUVuX3RpdGxlOiAiVXNpbmcgRW5nbGlzaCBsYW5ndWFnZSB0byBkaXNwbGF5IiwKICAgICAgICAgICAgICBhZHNfdGV4dDogIumZhOWKoDEt5Y675bm/5ZGK5Yqf6IO9IiwKICAgICAgICAgICAgICBhZHNfdGl0bGU6ICLljrvpmaTpg6jliIbpobXpnaLnmoTlub/lkYrkv6Hmga/vvIzov5jkvaDkuIDkuKrlubLlh4DmlbTmtIHnmoTpobXpnaIiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RleHQ6ICLoh6rliqjnv7vpobUiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RpdGxlOiAi6Ieq5Yqo57+76aG1IiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90ZXh0OiAi6ZmE5YqgMi3oh6rkuLvmi6bmiKrln5/lkI0iLAogICAgICAgICAgICAgIGJsb2NrZW5hYmxlX3RpdGxlOiAi54K55Ye76aG16Z2iYmxvY2vmjInpkq7mt7vliqDkvaDmg7PopoHpmpDol4/nmoTlnLDlnYDvvIzohJrmnKzlsIboh6rliqjpmpDol4/pg6jliIbnu5PmnpzkuLrlsI/mqKrluYXvvIxESVnmjInpkq7kuK3ngrnlh7vooajmoLzlhoXlrrnlj6/ku6Xlj5bmtojpmpDol48iLAogICAgICAgICAgICAgIGJsb2NrRGl5QnRuX3RleHQ6ICJESVkiLAogICAgICAgICAgICAgIGJsb2NrRGl5QnRuX3RpdGxlOiAi6Ieq5a6a5LmJQkxPQ0siLAogICAgICAgICAgICAgIGJsb2NrQXV0b1JlbW92ZV90ZXh0OiAi6ZqQ6JeP57uT5p6cIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGl0bGU6ICLoh6rliqjpmpDol4/lt7Lnu4/lsY/olL3nmoTln5/lkI0iLAogICAgICAgICAgICAgIGJsb2NrQnRuU2hvd190ZXh0OiAi6ZqQ6JePJ2Jsb2NrJ+aMiemSriIsCiAgICAgICAgICAgICAgYmxvY2tCdG5TaG93X3RpdGxlOiAi6ZqQ6JeP5o6JYmxvY2vmjInpkq7nmoTmmL7npLoiLAoKICAgICAgICAgICAgICB1c2VyU3R5bGVfdGV4dDogIumZhOWKoDMt6Ieq5a6a5LmJ5qC35byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfbGFibGU6ICLlsZXlvIDnmb7luqborr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X29yaWdpbjogIueZvuW6pi3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9odXlhbjogIueZvuW6pi3miqTnnLzmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9iYWlkdUxpdGU6ICLnmb7luqZMaXRl5qC35byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfbGFibGU6ICLlsZXlvIDosLfmrYzorr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9vcmlnaW46ICLosLfmrYwt5Y6f5aeL5qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlX2h1eWFuOiAi6LC35q2MLeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9nb29nbGVMaXRlOiAi6LC35q2MLeS8quijheeZvuW6piIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8xbGluZTogIuWNleWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8zbGluZTogIuS4ieWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX2xhYmxlOiAi5bGV5byA5b+F5bqU6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX29yaWdpbjogIuW/heW6lC3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX2h1eWFuOiAi5b+F5bqULeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzFsaW5lX2VudGVyOiAi5Y2V5YiX5bGF5LitIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ18ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzRsaW5lOiAi5Zub5YiXIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291X2xhYmxlOiAi5bGV5byA5pCc54uX6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9vcmlnaW46ICLmkJzni5ct5Y6f5aeL5qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfaHV5YW46ICLmkJzni5ct5oqk55y85qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2xhYmxlOiAi5bGV5byA6bit6bit5pCc6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX29yaWdpbjogIum4rem4rS3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2h1eWFuOiAi6bit6bitLeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfbm9ybWFsOiAi6bit6bitLeW4uOingemFjee9riIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzFsaW5lX2VudGVyOiAi5Y2V5YiX5bGF5LitIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzRsaW5lOiAi5Zub5YiXIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfbGFibGU6ICLlsZXlvIDlpJrlkInorr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2Vfb3JpZ2luOiAi5aSa5ZCJLeWOn+Wni+aooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfaHV5YW46ICLlpJrlkIkt5oqk55y85qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9ub3JtYWw6ICLlpJrlkIkt5bi46KeB6YWN572uIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8xbGluZTogIuWNleWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfMWxpbmVfZW50ZXI6ICLljZXliJflsYXkuK0iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlXzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8zbGluZTogIuS4ieWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfNGxpbmU6ICLlm5vliJciLAoKICAgICAgICAgICAgICBodXlhbk1vZGVfdGV4dDogIumZhOWKoDQt5oqk55y86aKc6Imy6YWN572uLeiHquWumuS5iTPkuK3pnIDlr7nlupTlvIDlkK8iLAogICAgICAgICAgICAgIGh1eWFuTW9kZV90aXRsZTogIu+8gemcgOimgeWcqOiHquWumuS5ieagt+W8j+S4reWQr+eUqOaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgaHV5YW5Db2xvcl90ZXh0OiAi6buY6K6k5oqk55y86aKc6Imy77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yX3RpdGxlOiAi6Ieq5a6a5LmJ55qE5oqk55y86aKc6Imy77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yTW9yZV90ZXh0OiAi5pu05aSa6aKc6Imy6YCJ5oupIiwKCiAgICAgICAgICAgICAgZmF2aWNvbl90ZXh0OiAi6ZmE5YqgNS1GYXZpY29u5Yqf6IO9IiwKICAgICAgICAgICAgICBmYXZpY29uX3RpdGxlOiAiQUMt5re75YqgRmF2aWNvbiIsCiAgICAgICAgICAgICAgZmF2aWNvbl9kZWZhdWx0SWNvbl90ZXh0OiAiRmF2aWNvbum7mOiupOWbvuagh++8miIsCgogICAgICAgICAgICAgIHNlYXJjaE9yaWdpbl90ZXh0OiAi6ZmE5YqgNi3np7vpmaTnmb7luqbmkJzntKLpooTmtYso5paH5a2X6Ieq5Yqo5pCc57SiKSIsCiAgICAgICAgICAgICAgc2VhcmNoT3JpZ2luX3RpdGxlOiAiQUMt56e76Zmk5pCc57Si6aKE5rWLIiwKCiAgICAgICAgICAgICAgc2hvd1JpZ2h0X3RleHQ6ICLpmYTliqA3LeaYvuekuuWPs+S+p+agjyIsCiAgICAgICAgICAgICAgc2hvd0NvdW50ZXJfdGV4dDogIumZhOWKoDgt57yW5Y+35Yqf6IO9IiwKICAgICAgICAgICAgICBoaW50U2hvd0NvdW50ZXJfdGV4dDogIuWPr+iDveS8muWvvOiHtOWbvueJh+WKoOi9veW8guW4uCIsCiAgICAgICAgICAgICAgc2hvd0FMaW5lX3RleHQ6ICLpmYTliqA5LeaWh+Wtl+S4i+WIkue6vyIsCiAgICAgICAgICAgICAgc2hvd1VzZXJTdHlsZV90ZXh0OiAi6ZmE5YqgMTAt6Ieq5a6a5LmJ5qC35byPIOaUr+aMgUxlc3MuanMiLAoKICAgICAgICAgICAgICBjb250YWN0TWVfdGV4dDogIuiBlOezu+S9nOiAhSzmj5Dlu7rorq4s5a+75rGC5biu5YqpLOiHquWumuS5ieagt+W8jyzohJrmnKzlrprliLbngrnmiJEiLAogICAgICAgICAgICAgIGNvbnRhY3RNZV91cmw6ICJodHRwczovL2dpdGh1Yi5jb20vbGFuZ3JlbjEzNTMvR01fc2NyaXB0IiwKCiAgICAgICAgICAgICAgc2V0dGluZ19wYW5lbF9zZWNvbmQ6IHsKICAgICAgICAgICAgICAgIGJhY2tCdG5fdGV4dDogIjwt6L+U5ZueIiwKICAgICAgICAgICAgICAgIGJsb2NrTGFiZWxfdGV4dDogIiDmi6bmiKrliJfooaggIOaDs+imgeeUn+aViOeahOivnemcgOimgeaJi+WKqOS/neWtmCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5fdGV4dDogIue8lui+keWIl+ihqCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5FbmRfdGV4dDogIue7k+adn+e8lui+kSIsCiAgICAgICAgICAgICAgICBhZGRCbG9ja0xhYmVsX3RleHQ6ICLlhajljLnphY3mi6bmiKrvvJoiLAogICAgICAgICAgICAgICAgYWRkQnRuTGFiZWxfdGV4dDogIua3u+WKoCIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjYW5jZWxCdG5fdGV4dDogIuWPlua2iCIsCiAgICAgICAgICAgICAgb2tCdG5fdGV4dDogIuS/neWtmCIsCiAgICAgICAgICAgICAgcmVzZXRCdG5fdGV4dDogIumHjee9riIsCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGVuOiB7CiAgICAgICAgICBtZW51X3RleHQ6ICJDVVNUT00iLAogICAgICAgICAgY3VyTGFuZzogImVuIiwKICAgICAgICAgIGZpZWxkc2V0X3BhbmVsOiB7CiAgICAgICAgICAgIHBhbmVsX3RpdGxlOiAiQUMgUmVkaXJlY3QgU2V0dGluZ3MgIiArIEdNX2luZm8uc2NyaXB0LnZlcnNpb24gKyAoaW5FeHRNb2RlPyAnRXh0JzonJyksCiAgICAgICAgICAgIHNldHRpbmdfcGFuZWw6IHsKICAgICAgICAgICAgICByZWRpcmVjdF90ZXh0OiAiTWFpbi1SZWRpcmVjdEZ1bmMiLAogICAgICAgICAgICAgIHJlZGlyZWN0X3RpdGxlOiAiVHVybiBvbiBvciBvZmYgcmVkaXJlY3QiLAogICAgICAgICAgICAgIHVzZUVuX3RleHQ6ICJFbi1MYW5ndWFnZSIsCiAgICAgICAgICAgICAgdXNlRW5fdGl0bGU6ICLkvb/nlKjoi7HmlofmmL7npLrpobXpnaIiLAogICAgICAgICAgICAgIGFkc190ZXh0OiAiQWRkMS1SZW1vdmUgQWRzIiwKICAgICAgICAgICAgICBhZHNfdGl0bGU6ICJSZW1vdmUgdGhlIGFkcyBvbiB0aGUgcGFnZSwgYW5kIHJldHVybiB5b3UgYSBjbGVhbiBwYWdlIiwKICAgICAgICAgICAgICBhdXRvcGFnZV90ZXh0OiAiQXV0byBQYWdlciIsCiAgICAgICAgICAgICAgYXV0b3BhZ2VfdGl0bGU6ICJBdXRvIFBhZ2VyIiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90ZXh0OiAiQWRkMi1CbG9jayBob3N0IiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90aXRsZTogIkNsaWNrIHRoZSBCbG9jayBidXR0b24gdG8gYWRkIHRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIGhpZGUuIFRoZSBzY3JpcHQgd2lsbCBoaWRlIGl0IHdpdGggc21hbGwgYmFubmVyIGF1dG9tYXRpY2FsbHkuIERJWSBidXR0b24gZm9yIGVkaXR0aW5nIHRoZSBoaWRpbmcgbGlzdCIsCiAgICAgICAgICAgICAgYmxvY2tEaXlCdG5fdGV4dDogIkRJWSIsCiAgICAgICAgICAgICAgYmxvY2tEaXlCdG5fdGl0bGU6ICJFZGl0IEJMT0NLIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGV4dDogIkF1dG8gcmVtb3ZlIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGl0bGU6ICJyZW1vdmUgdGhlIGJsb2NrIHJlc3VsdHMgYXV0b21hdGljYWxseSIsCiAgICAgICAgICAgICAgYmxvY2tCdG5TaG93X3RleHQ6ICJIaWRlICdCbG9jaycgYnV0dG9uIiwKICAgICAgICAgICAgICBibG9ja0J0blNob3dfdGl0bGU6ICJIaWRlICdCbG9jaycgYnV0dG9uIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX3RleHQ6ICJBZGQzLUN1c3RvbVN0eWxlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfbGFibGU6ICJFeHBhbmQgQmFpZHUgU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X29yaWdpbjogIkJhaWR1LU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X2h1eWFuOiAiQmFpZHUtRXllU2F2ZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X2JhaWR1TGl0ZTogIkJhaWR1TGl0ZVN0eWxlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfbGFibGU6ICJFeHBhbmQgR29vZ2xlIFNldHRpbmdzPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfb3JpZ2luOiAiR29vZ2xlLU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9odXlhbjogIkdvb2dsZS1FeWVTYXZlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlX2dvb2dsZUxpdGU6ICJGYWtlIEJhaWR1IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzFsaW5lOiAiU2luZ2xlUm93IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzNsaW5lOiAiVGhyZWUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfbGFibGU6ICJFeHBhbmQgQmluZyBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ19vcmlnaW46ICJCaW5nLU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfaHV5YW46ICJCaW5nLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzFsaW5lOiAiU2luZ2xlUm93IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ18xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfMmxpbmU6ICJUd28iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzNsaW5lOiAiVGhyZWUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9sYWJsZTogIkV4cGFuZCBTb0dvdSBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3Vfb3JpZ2luOiAiU29Hb3UtT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfaHV5YW46ICJTb0dvdS1FeWVTYXZlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2xhYmxlOiAiRXhwYW5kIER1Y2tEdWNrR28gU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfb3JpZ2luOiAiRHVja0R1Y2stT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja19odXlhbjogIkR1Y2tEdWNrLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX25vcm1hbDogIkR1Y2tEdWNrLU5vcm1hbCIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18ybGluZTogIlR3byIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfbGFibGU6ICJFeHBhbmQgRG9nZURvZ2UgU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2Vfb3JpZ2luOiAiRG9nZURvZ2UtT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9odXlhbjogIkRvZ2VEb2dlLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlX25vcm1hbDogIkRvZ2VEb2dlLU5vcm1hbCIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8ybGluZTogIlR3byIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgaHV5YW5Nb2RlX3RleHQ6ICJBZGQ0LUV5ZVNhdmUgQ29sb3IgU2V0dGluZy1OZWVkIG9wZW5lZCBpbiBBZGQzIiwKICAgICAgICAgICAgICBodXlhbk1vZGVfdGl0bGU6ICLvvIFPcGVuIEV5ZVNhdmUgTW9kZSBpbiBDdXN0b21TdHlsZSBpcyBNdXN0IiwKICAgICAgICAgICAgICBodXlhbkNvbG9yX3RleHQ6ICJEZWZhdWx0IEV5ZVNhdmUgQ29sb3LvvJoiLAogICAgICAgICAgICAgIGh1eWFuQ29sb3JfdGl0bGU6ICJUaGUgY29sb3Igb2YgRXllU2F2Ze+8miIsCiAgICAgICAgICAgICAgaHV5YW5Db2xvck1vcmVfdGV4dDogIk1vcmUgQ29sb3IiLAoKICAgICAgICAgICAgICBmYXZpY29uX3RleHQ6ICJBZGQ1LUZhdmljb24uRnVuYyIsCiAgICAgICAgICAgICAgZmF2aWNvbl90aXRsZTogIkFDLUFkZEZhdmljb24iLAogICAgICAgICAgICAgIGZhdmljb25fZGVmYXVsdEljb25fdGV4dDogIkZhdmljb25GYWlsZWRJbWfvvJrvvJoiLAoKICAgICAgICAgICAgICBzZWFyY2hPcmlnaW5fdGV4dDogIkFDLVJlbW92ZSBCYWlkdSBBdXRvUHJlZGljdCBpbiB0ZXh0IHNlYXJjaCIsCiAgICAgICAgICAgICAgc2VhcmNoT3JpZ2luX3RpdGxlOiAiQWRkNi1SZW1vdmUgQmFpZHUgQXV0b1ByZWRpY3QgaW4gdGV4dCBzZWFyY2giLAoKICAgICAgICAgICAgICBzaG93UmlnaHRfdGV4dDogIkFkZDctUmlnaHQgU2lkZSBDb2x1bW4iLAogICAgICAgICAgICAgIHNob3dDb3VudGVyX3RleHQ6ICJBZGQ4LU51bUZ1bmMiLAogICAgICAgICAgICAgIGhpbnRTaG93Q291bnRlcl90ZXh0OiAiTWF5IENhdXNlIGltYWdlIGxvYWQgcHJvYmxlbSIsCiAgICAgICAgICAgICAgc2hvd0FMaW5lX3RleHQ6ICJBZGQ5LVRleHRVbmRlckxpbmUiLAogICAgICAgICAgICAgIHNob3dVc2VyU3R5bGVfdGV4dDogIkFkZDEwLVlvdXIgb3duIFN0eWxlIHN1cHBvcnQgTGVzcy5qcyIsCgogICAgICAgICAgICAgIGNvbnRhY3RNZV90ZXh0OiAiRm9yIGNvbnRhY3QgdGhlIHdyaXR0ZXIsIHN1Z2dlc3RzLCBhc2sgZm9yIGhlbHAgdGhlbiBjbGljayBtZSIsCiAgICAgICAgICAgICAgY29udGFjdE1lX3VybDogImh0dHBzOi8vZ2l0aHViLmNvbS9sYW5ncmVuMTM1My9HTV9zY3JpcHQvIiwKCiAgICAgICAgICAgICAgc2V0dGluZ19wYW5lbF9zZWNvbmQ6IHsKICAgICAgICAgICAgICAgIGJhY2tCdG5fdGV4dDogIjwtQmFjayIsCiAgICAgICAgICAgICAgICBibG9ja0xhYmVsX3RleHQ6ICImbmJzcDtCbG9jayBMaXN0Jm5ic3A7Jm5ic3A7Q2xpY2sgU2F2ZSBCdXR0b24gaWYgeW91IHdhbnQgd28gc2F2ZSB0aGUgbGlzdCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5fdGV4dDogIkVkaXQgTGlzdCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5FbmRfdGV4dDogIkVuZCBFZGl0IiwKICAgICAgICAgICAgICAgIGFkZEJsb2NrTGFiZWxfdGV4dDogIkFkZCBCbG9jayBpdGVt77yaIiwKICAgICAgICAgICAgICAgIGFkZEJ0bkxhYmVsX3RleHQ6ICJBZGQiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2FuY2VsQnRuX3RleHQ6ICJDYW5jZWwiLAogICAgICAgICAgICAgIG9rQnRuX3RleHQ6ICJTYXZlIiwKICAgICAgICAgICAgICByZXNldEJ0bl90ZXh0OiAiUmVzZXQiLAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgbGV0IHZ1ZVZNID0gbnVsbDsKICAgIC8qKuWIneWni+WMluaJgOacieeahOiuvue9rioqLwogICAgUHJvbWlzZS5hbGwoW0dNLmdldFZhbHVlKCJDb25maWciKV0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgbGV0IHJlcyA9IGRhdGFbMF0KICAgICAgaWYgKHJlcyAhPSBudWxsKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIEFDQ29uZmlnID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIEFDQ29uZmlnID0gcmVzOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBBQ0NvbmZpZyA9IERlZmF1bHRDb25maWc7CiAgICAgIH0KICAgICAgY29uc3QgbG9jYWxEYXRhID0gbG9jYWxTdG9yYWdlLkFDQ29uZmlnOyAvLyDlsI/lv4PpmpDnp4HmqKHlvI8KICAgICAgaWYobG9jYWxEYXRhICYmIGxvY2FsRGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgQUNDb25maWcgPSBKU09OLnBhcnNlKGxvY2FsRGF0YSk7CiAgICAgIH0KICAgICAgZm9yICh2YXIga2V5IGluIERlZmF1bHRDb25maWcpIHsKICAgICAgICBpZiAodHlwZW9mIChBQ0NvbmZpZ1trZXldKSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgIEFDQ29uZmlnW2tleV0gPSBEZWZhdWx0Q29uZmlnW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChBQ0NvbmZpZy5pc1VzZXJTdHlsZUVuYWJsZSA9PT0gZmFsc2UgJiYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gQUNDb25maWcubGFzdFNhdmVUaW1lID4gMjU5MjAwMDAwMCkpIHsgLy8g5aSn57qmMzDlpKnml7bpl7QKICAgICAgICAvLyDlpoLmnpznlKjmiLflj5bmtojkuoborr7nva7vvIzlubbkuJTplb/ml7bpl7QoMzDlpKkp5rKh5pyJ6L+b6KGM6L+H5aSE55CG77yM6YKj5LmI55u05o6l5bCG5pWw5o2u572u56m6IC0+IOeUqOS6juWIt+aWsOaVsOaNrgogICAgICAgIGNvbnNvbGUubG9nKCJhYy1iYWlkdSBjc3MgcmVzZXQgZm9yIHRpbWUiKTsKICAgICAgICBBQ0NvbmZpZy5sYXN0U2F2ZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICBBQ0NvbmZpZy5Vc2VyU3R5bGVUZXh0ID0gRGVmYXVsdENvbmZpZy5Vc2VyU3R5bGVUZXh0OwogICAgICB9CiAgICAgIEFsbERhdGEuQUNDb25maWcgPSBBQ0NvbmZpZzsKICAgICAgREJDb25maWcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEFDQ29uZmlnKSk7IC8vIOaaguaXtuS9nOS4uuS4gOS4quWOn+Wni+S/neWtmAogICAgICBBbGxEYXRhLmxhbi51c2UgPSBBQ0NvbmZpZy5pc0VuTGFuZyA/IEFsbERhdGEubGFuLmVuIDogQWxsRGF0YS5sYW4uemhfY247CiAgICAgIC8vIOWIneWni+WMluWujOaIkOS5i+WQjuaJjeiDveiwg+eUqOato+W4uOWHveaVsAogICAgICBjYWxsYmFjaygpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGV4Y2VwdCkgewogICAgICBjb25zb2xlLmxvZyhleGNlcHQpOwogICAgfSk7CgogICAgZnVuY3Rpb24gUmVnX0dldChIVE1MLCByZWcpIHsKICAgICAgbGV0IFJlZ0UgPSBuZXcgUmVnRXhwKHJlZyk7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIFJlZ0UuZXhlYyhIVE1MKVsxXTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIEFDU2V0VmFsdWUoa2V5LCB2YWx1ZSkgewogICAgICBHTV9zZXRWYWx1ZShrZXksIHZhbHVlKTsKICAgICAgaWYoa2V5ID09PSAnQ29uZmlnJyl7CiAgICAgICAgbG9jYWxTdG9yYWdlLkFDQ29uZmlnID0gdmFsdWU7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRFbGVtZW50QnlYcGF0aChlLCB0LCByKSB7CiAgICAgIHIgPSByIHx8IGRvY3VtZW50LCB0ID0gdCB8fCByOwogICAgICB0cnkgewogICAgICAgIHJldHVybiByLmV2YWx1YXRlKGUsIHQsIG51bGwsIFhQYXRoUmVzdWx0LkZJUlNUX09SREVSRURfTk9ERV9UWVBFLCBudWxsKS5zaW5nbGVOb2RlVmFsdWU7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICByZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCLml6DmlYjnmoR4cGF0aCIpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QWxsRWxlbWVudHMoZSwgdCwgciwgbiwgbykgewogICAgICBsZXQgZ2V0QWxsRWxlbWVudHNCeVhwYXRoID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIHJldHVybiByID0gciB8fCBkb2N1bWVudCwgdCA9IHQgfHwgciwgci5ldmFsdWF0ZShlLCB0LCBudWxsLCBYUGF0aFJlc3VsdC5PUkRFUkVEX05PREVfU05BUFNIT1RfVFlQRSwgbnVsbCk7CiAgICAgIH0KCiAgICAgIHZhciBpLCBzID0gW107CiAgICAgIGlmICghZSkgcmV0dXJuIHM7CiAgICAgIGlmIChyID0gciB8fCBkb2N1bWVudCwgbiA9IG4gfHwgd2luZG93LCBvID0gbyB8fCB2b2lkIDAsIHQgPSB0IHx8IHIsICJzdHJpbmciID09PSB0eXBlb2YgZSkgaSA9IDAgPT09IGUuc2VhcmNoKC9eY3NzOy9pKSA/IGZ1bmN0aW9uIGdldEFsbEVsZW1lbnRzQnlDU1MoZSwgdCkgewogICAgICAgIHJldHVybiAodCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChlKTsKICAgICAgfShlLnNsaWNlKDQpLCB0KSA6IGdldEFsbEVsZW1lbnRzQnlYcGF0aChlLCB0LCByKTsgZWxzZSB7CiAgICAgICAgaWYgKCEoaSA9IGUociwgbiwgbykpKSByZXR1cm4gczsKICAgICAgICBpZiAoaS5ub2RlVHlwZSkgcmV0dXJuIHNbMF0gPSBpLCBzOwogICAgICB9CiAgICAgIHJldHVybiBmdW5jdGlvbiBtYWtlQXJyYXkoZSkgewogICAgICAgIHZhciB0LCByLCBuLCBvID0gW107CiAgICAgICAgaWYgKGUucG9wKSB7CiAgICAgICAgICBmb3IgKHQgPSAwLCByID0gZS5sZW5ndGg7IHQgPCByOyB0KyspIChuID0gZVt0XSkgJiYgKG4ubm9kZVR5cGUgPyBvLnB1c2gobikgOiBvID0gby5jb25jYXQobWFrZUFycmF5KG4pKSk7CiAgICAgICAgICByZXR1cm4gYSgpKG8pOwogICAgICAgIH0KICAgICAgICBpZiAoZS5pdGVtKSB7CiAgICAgICAgICBmb3IgKHQgPSBlLmxlbmd0aDsgdDspIG9bLS10XSA9IGVbdF07CiAgICAgICAgICByZXR1cm4gbzsKICAgICAgICB9CiAgICAgICAgaWYgKGUuaXRlcmF0ZU5leHQpIHsKICAgICAgICAgIGZvciAodCA9IGUuc25hcHNob3RMZW5ndGg7IHQ7KSBvWy0tdF0gPSBlLnNuYXBzaG90SXRlbSh0KTsKICAgICAgICAgIHJldHVybiBvOwogICAgICAgIH0KICAgICAgfShpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgaWYgKEFDQ29uZmlnLm9sZFZlcnNpb24gPT09IEdNX2luZm8uc2NyaXB0LnZlcnNpb24pIHsKICAgICAgICBDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPSBuZWVkRGlzcGxheU5ld0Z1bjsKICAgICAgfQoKICAgICAgIWZ1bmN0aW9uKCkgewogICAgICAgIC8qKgogICAgICAgICAqIOi/m+ihjOS4jemHjeWkjeaPkuWFpe+8jOaPkuWFpeWQjuaJp+ihjOWbnuiwg+WHveaVsAogICAgICAgICAqIEBwYXJhbSBkYXRhIOW+heaPkuWFpeaVsOaNrgogICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayDlm57osIPlh73mlbAKICAgICAgICAgKi8KICAgICAgICBmdW5jdGlvbiBhY3B1c2goZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgIC8vIOWmguaenOaYr+Weg+WcvuaVsOaNru+8jOmCo+S5iOWPr+S7peS4ouW8g+eahAogICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47CiAgICAgICAgICAvLyDlpoLmnpzmlbDmja7kuK3mnInlm57ovabvvIzpgqPmlbDmja7kuZ/mmK/ml6DmlYjnmoTmraPmlofogIzlt7IKICAgICAgICAgIGlmIChkYXRhLnJlcGxhY2UoLyh7fH18LHxcK3zvvJp844CCfFxuKS8pICE9PSBkYXRhKSByZXR1cm47CiAgICAgICAgICBpZiAodGhpcy5maW5kSW5kZXgobSA9PiBtID09PSBkYXRhKSA8IDApIHsKICAgICAgICAgICAgdGhpcy5wdXNoKGRhdGEpOwogICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh0aGlzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYWNyZW1vdmUoZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgIGxldCBkZWxJZCA9IHRoaXMuZmluZEluZGV4KG0gPT4gbSA9PT0gZGF0YSk7CiAgICAgICAgICBpZiAoZGVsSWQgPj0gMCkgewogICAgICAgICAgICB0aGlzLnNwbGljZShkZWxJZCwgMSk7CiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHRoaXMpOwogICAgICAgICAgfSAvLyDliKDpmaRkZWxJZOeahOaVsOaNru+8jOWIoOmZpOS4gOS4qgogICAgICAgIH0KICAgICAgICAvLyDpgb/lhY3msaHmn5PlhajlsYDljp/lnovpk74KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQUNDb25maWcuVXNlckJsb2NrTGlzdCwgJ2FjcHVzaCcsIHt2YWx1ZTogYWNwdXNofSkKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQUNDb25maWcuVXNlckJsb2NrTGlzdCwgJ2FjcmVtb3ZlJywge3ZhbHVlOiBhY3JlbW92ZX0pCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG90aGVyRGF0YS5vdGhlci5jdXJIb3N0cywgJ2FjcHVzaCcsIHt2YWx1ZTogYWNwdXNofSkKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3RoZXJEYXRhLm90aGVyLmN1ckhvc3RzLCAnYWNyZW1vdmUnLCB7dmFsdWU6IGFjcmVtb3ZlfSkKICAgICAgfSgpOwoKCgogICAgICAhZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBpbnNlcnRMb2NrZWQgPSBmYWxzZTsKICAgICAgICBpZiAodHlwZW9mIEdNX2dldFJlc291cmNlVGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIEdNLmdldFJlc291cmNlVGV4dCA9IEdNX2dldFJlc291cmNlVGV4dCA9IGFzeW5jIGZ1bmN0aW9uIChhUmVzb3VyY2VOYW1lKSB7CiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCAoYXdhaXQgZmV0Y2goYXdhaXQgR00uZ2V0UmVzb3VyY2VVcmwoYVJlc291cmNlTmFtZSkpKS50ZXh0KCk7CiAgICAgICAgICAgIGxldCBzYXZlUmVzID0gYXdhaXQgR00uZ2V0VmFsdWUoYVJlc291cmNlTmFtZSk7CiAgICAgICAgICAgIGlmICh0eXBlb2YgKHNhdmVSZXMpID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIEdNLnNldFZhbHVlKGFSZXNvdXJjZU5hbWUsIHJlcyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNhdmVSZXM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKEdNX2dldFJlc291cmNlVGV4dCkgewogICAgICAgICAgLy8g5LuF5Zyo5pSv5oyBR01fZ2V0UmVzb3VyY2VUZXh055qE5a655Zmo5LiK6L+b6KGM5Yqo5oCB5pWw5o2u5pu05pawCiAgICAgICAgICAvLyDkuJTog73pmLLmraLosLfmrYznmb7luqbpobXpnaLop4TliJnlpKflj5jliqjlj4jpnIDopoHmm7TmlrDohJrmnKwgLSDnibnliKvmmK/mtonlj4rnv7vpobXlj4LmlbAKICAgICAgICAgIGxldCBjb25maWcgPSBHTV9nZXRSZXNvdXJjZVRleHQoIlNpdGVDb25maWdSdWxlcyIpOwogICAgICAgICAgZXZhbChjb25maWcpOwogICAgICAgICAgaWYgKHR5cGVvZiAob25saW5lREIpID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCLnur/kuIrmlbDmja7kuLrnqboiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIERCU2l0ZSA9IG9ubGluZURCOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygieHVlc2h1LmJhaWR1LmNvbSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmJhaWR1X3h1ZXNodTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoIi5iYWlkdS5jb20iKSkgewogICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQucmVwbGFjZSgvKGFuZHJvaWR8bW9iaWxlfGlwaG9uZSkvaWdtLCAiIikgIT09IG5hdmlnYXRvci51c2VyQWdlbnQpIHsKICAgICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5tQmFpZHU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmJhaWR1OwogICAgICAgICAgfQogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmJhaWR1OwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygiemhpaHUuY29tIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuemhpaHU7CiAgICAgICAgICBDT05TVC51c2VJdGVtID0gQUNDb25maWcuemhpaHU7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKCJzb2dvdSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLnNvZ291OwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLnNvZ291OwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygic28uY29tIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuaGFvc291OwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLm90aGVyOwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygiZ29vZ2xlIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuZ29vZ2xlOwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmdvb2dsZTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoImJpbmciKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5iaW5nOwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmJpbmc7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKCJkdWNrZHVja2dvIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuZHVjazsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5kdWNrOwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygiZG9nZWRvZ2UiKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5kb2dlOwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmRvZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUub3RoZXI7CiAgICAgICAgICBDT05TVC51c2VJdGVtID0gQUNDb25maWcub3RoZXI7CiAgICAgICAgfQogICAgICAgIGN1clNpdGUucGFnZU51bSA9IDE7IC8vIOW9k+WJjemhteaVsAogICAgICAgIGN1clNpdGUucGFnZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBjdXJTaXRlLnBhZ2VVcmwgPSAiIjsKICAgICAgICBpZiAoCiAgICAgICAgICAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUgJiYgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC90Ym09KGlzY2h8bGNsfHNob3B8ZmxtKS8sICIiKSAhPT0gbG9jYXRpb24uaHJlZiApIHx8CiAgICAgICAgICAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CSU5HICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvaW1hZ2VzXC9zZWFyY2gvLCAiIikgIT09IGxvY2F0aW9uLmhyZWYgKQogICAgICAgICkgewogICAgICAgICAgLy8g5Zu+54mH56uZIOOAgeWcsOWbvuermeOAgei0reeJqeermQogICAgICAgICAgY29uc29sZS5sb2coIueJueauiuermSzkuI3liqDovb3moLflvI/vvIzkuI3mt7vliqBtZW51Iik7CiAgICAgICAgICBDT05TVC5pc0dvb2dsZUltYWdlVXJsID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFVfWFVFU0hVKXsKICAgICAgICAgIENPTlNULnVzZUl0ZW0uQWRzU3R5bGVNb2RlID0gMjsgLy8g5Y2V5YiX5bGF5Lit5Y2z5Y+vCiAgICAgICAgfQoKICAgICAgICBpZiAoQUNDb25maWcuQWRzU3R5bGVFbmFibGUpIHsKICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyID0gRlNCYWlkdSgpOyAvLyDmt7vliqDorr7nva7pobkt5Y2V5Y+M5YiX5pi+56S6CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygiJWNbQUMtUmVkaXJlY3RdICVjTGV0IE1lIEludHJvZHVjZSB5b3UgYSBWZXJ5IEdvb2QgU2VhcmNoIEVuZ2luZe+8miVjICVzICVjU2VhcmNoIEVuZ2luZS4iLCAiZm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjpjb3JuZmxvd2VyYmx1ZSIsICJjb2xvcjowIiwgImZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6ZGFya29yYW5nZSIsIENPTlNULnVzZUl0ZW0ubmFtZS5yZXBsYWNlKENPTlNULnVzZUl0ZW0ubmFtZVswXSwgQ09OU1QudXNlSXRlbS5uYW1lWzBdLnRvVXBwZXJDYXNlKCkpLCAiZm9udC13ZWlnaHQ6bm9ybWFsO2NvbG9yOjAiKTsKCiAgICAgICAgbGV0IFNpdGVCbG9jayA9IHsKICAgICAgICAgIC8qKgogICAgICAgICAgICog5Yid5aeL5YyWQmxvY2vmoLflvI8KICAgICAgICAgICAqLwogICAgICAgICAgaW5pdFN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKCJidXR0b24uZ2hoaWRlci5naGhiW2FjLXVzZXItYWx0ZXI9JzEnXTo6YmVmb3Jle2NvbnRlbnQ6J+WPlua2iCAtICc7fSNzcC1hYy1jb250YWluZXIgLmFjLWJsb2NrLWl0ZW17Y29sb3I6I0FBQTttYXJnaW4tbGVmdDo0OHB4O30jc3AtYWMtY29udGFpbmVyIC5hYy1ibG9jay1pdGVtZGVse2Zsb2F0OnJpZ2h0O21hcmdpbi1sZWZ0OjA7cGFkZGluZzowIDIwcHg7Y3Vyc29yOnBvaW50ZXI7fSNzcC1hYy1jb250YWluZXIgLmFjLWJsb2NrLWl0ZW1kZWw6aG92ZXJ7Y29sb3I6cmVkO30jc3AtYWMtY29udGFpbmVyIC5hYy1ibG9jay1oaWdoe2NvbG9yOiMwMDA7fS5hYy1ibG9ja0xpc3QgbGk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojYTNjYWZmO2NvbG9yOndoaXRlICFpbXBvcnRhbnQ7Y3Vyc29yOnBvaW50ZXI7fSAqW2FjLW5lZWRoaWRlXSAqe2Rpc3BsYXk6bm9uZX0gKlthYy1uZWVkaGlkZV0gLmJsb2NrU2hvd3tkaXNwbGF5OnVuc2V0O2N1cnNvcjpwb2ludGVyO30gKlthYy1uZWVkaGlkZV0gLmJsb2NrU2hvdzpob3Zlcntib3JkZXI6MXB4IHNvbGlkICNERER9YnV0dG9uLmdoaGlkZXJ7Y29sb3I6IzU1NTtiYWNrZ3JvdW5kLWNvbG9yOiNmY2ZjZmM7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjttYXJnaW46YXV0byAycHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDNweH1idXR0b24uZ2hoaWRlcntmb250LXNpemU6MTJweH1idXR0b24uZ2hoaWRlcjpob3Zlcntjb2xvcjojMDA2YWZmO2JhY2tncm91bmQ6I2ZmZn0iLAogICAgICAgICAgICAgICJBQy1CbG9ja1N0eWxlIik7CiAgICAgICAgICB9LAogICAgICAgICAgLyoqCiAgICAgICAgICAgKiDliJ3lp4vljJblsY/olL3mjInpkq7liqDovb0KICAgICAgICAgICAqLwogICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY2hlY2tOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3VyU2l0ZS5NYWluVHlwZSArICI6bm90KFthY2Jsb2NrXSkiKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGVja05vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCBjdXJOb2RlID0gY2hlY2tOb2Rlc1tpXTsKICAgICAgICAgICAgICAgIGxldCBmYXZpY29uTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkZhdmljb25UeXBlKTsKICAgICAgICAgICAgICAgIC8vIGlmKGN1ck5vZGUuaGFzQXR0cmlidXRlKCJhY2Jsb2NrIikpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbGV0IGhvc3QgPSBnZXROb2RlSG9zdChmYXZpY29uTm9kZSkuY3VySG9zdDsKICAgICAgICAgICAgICAgIC8vIGlmKGhvc3QgPT09IG51bGwpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbGV0IGZhTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkJsb2NrVHlwZSk7CiAgICAgICAgICAgICAgICBsZXQgbm9kZVN0eWxlID0gImRpc3BsYXk6dW5zZXQ7IjsKICAgICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0Jsb2NrQnRuTm90RGlzcGxheSkgewogICAgICAgICAgICAgICAgICBub2RlU3R5bGUgPSAiZGlzcGxheTpub25lOyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmYU5vZGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlcmVuZCIsIGA8YnV0dG9uIHN0eWxlPScke25vZGVTdHlsZX0nIGNsYXNzPSdnaGhpZGVyIGdoaGInIGhyZWY9IiR7ZmF2aWNvbk5vZGUuaHJlZiB8fCBmYXZpY29uTm9kZS5pbm5lclRleHR9IiBtZXRhPSIke2hvc3R9IiBkYXRhLWhvc3Q9IiR7aG9zdH0iIHRpdGxlPScke3RoaXMuZ2V0QmxvY2tCdG5UaXRsZShob3N0KX0nPmJsb2NrPC9idXR0b24+YCk7CgogICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjYmxvY2siLCAiMCIpOwogICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjYmxvY2siLCAiMCIpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pbml0TGlzdGVuZXIoKTsKICAgICAgICAgICAgdGhpcy5yZW5kZXJEaXNwbGF5KCk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0QmxvY2tCdG5UaXRsZShob3N0KXsKICAgICAgICAgICAgcmV0dXJuIGDngrnlh7vljbPlj6/lsY/olL0gJHtob3N0fSDmlL7lvIDvvIzpnIDopoHlnKjoh6rlrprkuYnkuK3miYvliqjphY3nva7mlL7lvIBgOwogICAgICAgICAgfSwKICAgICAgICAgIGluaXRMaXN0ZW5lcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY2hlY2tOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImJ1dHRvbi5naGhpZGVyOm5vdChbYWNFbnZdKSIpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBjaGVja05vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5kb0hpZGVFbnYpOwogICAgICAgICAgICAgIGNoZWNrTm9kZXNbaV0uc2V0QXR0cmlidXRlKCJhY0VudiIsICIwIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBkb0hpZGVFbnY6IGZ1bmN0aW9uIChlbnYpIHsKICAgICAgICAgICAgLy8g5YWI5o+S5YWl5pWw5o2uLS0t6K6w5b6X6L+Y6KaB5YaZ5YWl5a2Y5YKoCiAgICAgICAgICAgIGxldCBub2RlID0gZW52LnNvdXJjZVRhcmdldCB8fCBlbnYudGFyZ2V0OwogICAgICAgICAgICBsZXQgaG9zdCA9IG5vZGUuZGF0YXNldC5ob3N0OwogICAgICAgICAgICBpZiAoK25vZGUuZ2V0QXR0cmlidXRlKCJhYy11c2VyLWFsdGVyIikgPT09IDEpIHsKICAgICAgICAgICAgICAvLyDlt7Lnu4/lsY/olL3kuYvlkI7vvIzlho3mrKHngrnlh7tibG9ja+W6lOivpeaYr+WPlua2iOeKtuaAgQogICAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCJhYy11c2VyLWFsdGVyIik7CiAgICAgICAgICAgICAgQUNDb25maWcuVXNlckJsb2NrTGlzdC5hY3JlbW92ZShob3N0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDmraPluLjlsY/olL3mk43kvZwKICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIpOwogICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNwdXNoKGhvc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIERCQ29uZmlnLlVzZXJCbG9ja0xpc3QgPSBBQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0OwogICAgICAgICAgICBBQ1NldFZhbHVlKCJDb25maWciLCBKU09OLnN0cmluZ2lmeShEQkNvbmZpZykpOyAvLyDngrnlh7vkuIDmrKHvvIzkv53lrZjkuIDmrKEKICAgICAgICAgICAgU2l0ZUJsb2NrLnJlbmRlckRpc3BsYXkoKTsKICAgICAgICAgICAgZW52LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIOWIt+aWsOaYvuekuuaViOaenC0t6ICX5pe25pON5L2cCiAgICAgICAgICByZW5kZXJEaXNwbGF5OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxldCBjaGVja05vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLk1haW5UeXBlKTsKICAgICAgICAgICAgbGV0IGZsYWcgPSAiYWMtbmVlZGhpZGUiOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBjaGVja05vZGVzW2ldOwogICAgICAgICAgICAgICAgbGV0IHtjdXJIb3N0LCBjdXJVcmx9ID0gZ2V0Tm9kZUhvc3QoY3VyTm9kZS5xdWVyeVNlbGVjdG9yKGN1clNpdGUuRmF2aWNvblR5cGUpKTsKICAgICAgICAgICAgICAgIGN1clVybCA9IGN1clVybCB8fCAiIjsKICAgICAgICAgICAgICAgIGlmIChjdXJIb3N0ID09PSBudWxsKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbGV0IEJsb2NrQnRuID0gY3VyTm9kZS5xdWVyeVNlbGVjdG9yKCIuZ2hoaWRlci5naGhiIik7CiAgICAgICAgICAgICAgICAgIEJsb2NrQnRuLmRhdGFzZXQuaG9zdCA9IEJsb2NrQnRuLmRhdGFzZXQubWV0YSA9IGN1ckhvc3Q7CiAgICAgICAgICAgICAgICAgIEJsb2NrQnRuLnRpdGxlID0gdGhpcy5nZXRCbG9ja0J0blRpdGxlKGN1ckhvc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGN1ck5vZGUucXVlcnlTZWxlY3RvcigiYnV0dG9uW2FjLXVzZXItYWx0ZXJdIikgIT0gbnVsbCkgY29udGludWU7IC8vIOeUqOaIt+aJi+WKqOeCuei/h+aYvuekuueahO+8jOmCo+S5iOi3s+i/h2NoZWNrCiAgICAgICAgICAgICAgICBsZXQgeyBtZDU6IG1kNV90YWcsIGxpc3Q6IHJlZ0xpc3QgPSBbXX0gPSB2dWVWTS5jYWxjX2Jsb2NrX2RhdGE7IC8vIOS9v+eUqFZ1ZeeahGNvbXB1dGVk5bGe5oCn6K6h566X55qE5pWw5o2u5YC877yM5LiA6Iis5qC55pys5LiN5pu05pawCiAgICAgICAgICAgICAgICAvLyDlh4/lsJHmlbDmja7orqHnrpcKICAgICAgICAgICAgICAgIGlmKGN1ck5vZGUuZGF0YXNldC5tZDUgJiYgY3VyTm9kZS5kYXRhLm1kNSA9PT0gbWQ1X3RhZykgYnJlYWsKICAgICAgICAgICAgICAgIGlmICghY3VyVXJsLmluY2x1ZGVzKCJ3d3cuYmFpZHUuY29tL2xpbmsiKSAmJiByZWdMaXN0LmZpbmRJbmRleChvbmUgPT4gewogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBvbmUudGVzdChjdXJIb3N0KSB8fCBvbmUudGVzdChjdXJVcmwpOyAvLyDogJfml7bmk43kvZwKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtID09PSBjdXJIb3N0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgIC8vIOWPquajgOafpeWcqOWxj+iUveihqOS4reeahOaVsOaNrgogICAgICAgICAgICAgICAgICBpZiAoIWN1ck5vZGUuaGFzQXR0cmlidXRlKGZsYWcpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQmxvY2tEaXNwbGF5KSB7IC8vIOWvueS6juS4jeaYvuekuueahOaVsOaNruWPr+S7pei/m+ihjOenu+mZpOaTjeS9nAogICAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VyVGl0bGUgPSBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5CbG9ja1R5cGUpOwogICAgICAgICAgICAgICAgICAgIGN1clRpdGxlID0gY3VyVGl0bGUuaW5uZXJUZXh0IHx8IGN1clRpdGxlLnRleHRDb250ZW50OwoKICAgICAgICAgICAgICAgICAgICBpZiAoY3VyTm9kZS5oYXNBdHRyaWJ1dGUoZmxhZykpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlhrLnqoHkuobvvIHvvIHvvIEiKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoZmxhZywgIjEiKTsKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmluc2VydEFkamFjZW50SFRNTCgiYWZ0ZXJCZWdpbiIsIGA8c3BhbiBjbGFzcz0iYmxvY2tTaG93IiB0aXRsZT0i5aaC5p6c6ZyA6KaB5LiA55u05pi+56S677yM6K+35Zyo6Ieq5a6a5LmJ5LitRElZ55uu5b2V56e76Zmk5pys5Zyw5Z2AIj4ke2N1clRpdGxlfSZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyAtYmxvY2sgYnkgJHtjdXJIb3N0fTwvc3Bhbj5gKTsKCiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICh4Y3VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyDlt7Lnu4/lsY/olL3kuYvlkI7nmoTlhoXlrrnvvIzngrnlh7vkuIDkuIvmmL7npLrljp/lp4vlhoXlrrkKICAgICAgICAgICAgICAgICAgICAgIHhjdXIucXVlcnlTZWxlY3RvcigiLmJsb2NrU2hvdyIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGVudikgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcigiYnV0dG9uLmdoaGlkZXIiKS5zZXRBdHRyaWJ1dGUoImFjLXVzZXItYWx0ZXIiLCAiMSIpOyAvLyDov5nkuKrlsZ7mgKfnlKjkuo7kv53mjIHlnKhET03mm7TmlrDml7bvvIzmjInpkq7kuI3lj5gKICAgICAgICAgICAgICAgICAgICAgICAgeGN1ci5yZW1vdmVBdHRyaWJ1dGUoZmxhZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVGdW5jdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgeGN1ci5xdWVyeVNlbGVjdG9yKCIuYmxvY2tTaG93IikucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBlbnYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KShjdXJOb2RlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgY3VyTm9kZS5yZW1vdmVBdHRyaWJ1dGUoZmxhZyk7CiAgICAgICAgICAgICAgICAgIHNhZmVGdW5jdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5xdWVyeVNlbGVjdG9yKCIuYmxvY2tTaG93IikucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY3VyTm9kZS5kYXRhc2V0Lm1kNSA9IG1kNV90YWcKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gYWRkU3R5bGUoY3NzKSB7IC8v5re75YqgQ1NT55qE5Luj56CBLS1jb3B555qECiAgICAgICAgICBsZXQgcGkgPSBkb2N1bWVudC5jcmVhdGVQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24oCiAgICAgICAgICAgICd4bWwtc3R5bGVzaGVldCcsCiAgICAgICAgICAgICd0eXBlPSJ0ZXh0L2NzcyIgbXVzdD0iZmFsc2UiIGhyZWY9ImRhdGE6dGV4dC9jc3M7dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChjc3MpICsgJyInCiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuIGRvY3VtZW50Lmluc2VydEJlZm9yZShwaSwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgICB9CgogICAgICAgIGlmIChBQ0NvbmZpZy5pc0Fkc0VuYWJsZSkgewogICAgICAgICAgLy8gZGlzcGxheeW3sue7j+aXoOazlemakOiXj+S7luS7rOS6hu+8jOmcgOimgeeUqOe7neWvueeahOmakOiXjwogICAgICAgICAgYWRkU3R5bGUoIiNib3R0b21hZHN7ZGlzcGxheTpub25lO30gI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtpZF0pPmRpdltjbWF0Y2hpZF0sICNjb250ZW50X2xlZnQ+ZGl2W2lkKj0nMzAwJ106bm90KFtjbGFzcyo9J3Jlc3VsdCddKSwjY29udGVudF9yaWdodCB0ZD5kaXY6bm90KFtpZF0pLCNjb250ZW50X3JpZ2h0PmJye3Bvc2l0aW9uOmFic29sdXRlO3RvcDotNjY2NnB4O30iKTsKICAgICAgICB9CiAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFICYmIEFDQ29uZmlnLmlzR29vbGVJbkJhaWR1TW9kZUVuYWJsZSkgewogICAgICAgICAgc2FmZVdhaXRGdW5jKCIjbG9nbyBpbWcsICNsb2dvY29udCBpbWciLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICBsZXQgZmFOb2RlID0gbm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgIGZhTm9kZS5jbGFzc0xpc3QuYWRkKCJiYWlkdSIpOwogICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgic3JjIik7CiAgICAgICAgICAgIG5vZGUuc3JjID0gImh0dHBzOi8vcGljLnJtYi5iZHN0YXRpYy5jb20vYzg2MjU1ZTgwMjg2OTYxMzlkM2UzZTRiYjQ0YzA0N2IucG5nIjsKICAgICAgICAgICAgbm9kZS53aWR0aCA9ICIxMjUiOwogICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgiaGVpZ2h0Iik7CiAgICAgICAgICB9KTsKICAgICAgICAgIHNhZmVXYWl0RnVuYygiI21haW4gLmxvZ28gaW1nW2FsdD0nR29vZ2xlJ10iLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgic3Jjc2V0Iik7CiAgICAgICAgICAgIG5vZGUuc3JjID0gImh0dHBzOi8vd3d3LmJhaWR1LmNvbS9pbWcvYmRfbG9nbzEucG5nP3doZXJlPXN1cGVyIjsKICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsICI1OSIpOwogICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgIHNhZmVXYWl0RnVuYygiZm9ybVtyb2xlPSdzZWFyY2gnXSAubG9nbyBpbWciLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgic3Jjc2V0Iik7CiAgICAgICAgICAgIG5vZGUuc3JjID0gImh0dHBzOi8vd3d3LmJhaWR1LmNvbS9pbWcvYmRfbG9nbzEucG5nP3doZXJlPXN1cGVyIjsKICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsICI1OSIpOwogICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZG9jdW1lbnQudGl0bGUucmVwbGFjZSgvXkdvb2dsZS8sICLnmb7luqbkuIDkuIvvvIzkvaDlsLHnn6XpgZMiKQogICAgICAgICAgLnJlcGxhY2UoLyAtIEdvb2dsZSDmkJzntKIvLCAiX+eZvuW6puaQnOe0oiIpCiAgICAgICAgICAucmVwbGFjZSgvIC0gR29vZ2xlIFNlYXJjaC8sICJf55m+5bqm5pCc57SiIik7CiAgICAgICAgICBzYWZlV2FpdEZ1bmMoImhlYWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxldCBsaW5rVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibGlua1t0eXBlPSdpbWFnZS94LWljb24nXSIpIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsKICAgICAgICAgICAgbGlua1RhcmdldC50eXBlID0gJ2ltYWdlL3gtaWNvbic7CiAgICAgICAgICAgIGxpbmtUYXJnZXQucmVsID0gJ3Nob3J0Y3V0IGljb24nOwogICAgICAgICAgICBsaW5rVGFyZ2V0LmhyZWYgPSAnaHR0cHM6Ly93d3cuYmFpZHUuY29tL2Zhdmljb24uaWNvJzsKICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rVGFyZ2V0KTsKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRVQ0spIHsKICAgICAgICAgIGFkZFN0eWxlID0gQUNfYWRkU3R5bGUgLy8g5YW85a65RHVja+eahENTUOWQjOa6kOinhOWImQogICAgICAgICAgaWYoQUNDb25maWcubm9ybWFsaXplRHVjayl7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBEREcuc2V0dGluZ3Muc2V0KCJrbiIsIDEsIHsgIC8vIOaWsOeql+WPo+aJk+W8gOmhtemdogogICAgICAgICAgICAgICAgICBzYXZlVG9DbG91ZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZm9yY2VUaGVtZTogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBEREcuc2V0dGluZ3Muc2V0KCJrYXYiLCAxLCB7IC8vIOi/nue7reaYvuekuuaQnOe0oue7k+aenAogICAgICAgICAgICAgICAgICBzYXZlVG9DbG91ZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZm9yY2VUaGVtZTogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5PVEhFUlMpIHsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgTWFpbkNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgTWFpbkNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgIHNhZmVXYWl0RnVuYygiYm9keSIsICgpID0+IHsKICAgICAgICAgICAgICAhZG9jdW1lbnQuYm9keS5oYXNBdHRyaWJ1dGUoQ09OU1QudXNlSXRlbS5uYW1lKSAmJiBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZShDT05TVC51c2VJdGVtLm5hbWUsICIxIik7CiAgICAgICAgICAgICAgIWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNULnVzZUl0ZW0ubmFtZSkgJiYgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKENPTlNULnVzZUl0ZW0ubmFtZSk7CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLkFkc1N0eWxlRW5hYmxlKSB7IC8vIOWNleeLrOS4jemcgOimgeWumuaXtuWZqC3poLvnuYHop6blj5Et6L295YWlY3NzCiAgICAgICAgICAgICAgICBGU0JhaWR1KCk7CiAgICAgICAgICAgICAgICBBZGRDdXN0b21TdHlsZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgUkFGSW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmKGRvY3VtZW50LmJvZHkpIHsKICAgICAgICAgICAgICAgIHJhcGlkRGVhbCgpOyAvLyDlrprmnJ/osIPnlKjvvIzpgb/lhY3mnInml7blgJlET03mj5LlhaXmsqHmnInmiafooYzlr7zoh7TnmoTpl67popgKICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmIGxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoInRuPW5ld3MiKSkgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSgibmV3cyIsICIxIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUF0dHJpYnV0ZSgibmV3cyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgODAwKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB9CiAgICAgICAgc2FmZVdhaXRGdW5jKCIjc3AtYWMtY29udGVudCIsIGZ1bmN0aW9uIChjaGVja05vZGUpIHsKICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICBlbDogY2hlY2tOb2RlLAogICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIC4uLkFsbERhdGEsCiAgICAgICAgICAgICAgICBMaXZlQ29uZmlnOiB7CiAgICAgICAgICAgICAgICAgIGNzc19oYXNfZXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVzZXRDU1NfdGV4dDogJ+mHjee9rkNTUycsCiAgICAgICAgICAgICAgICBjYWxjX2Jsb2NrX2RhdGE6IHt9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgICAgbGFiZWxTaG93SGlkZUVudihlKSB7CiAgICAgICAgICAgICAgICBsZXQgY3VyID0gZS5zcmNFbGVtZW50IHx8IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9IGN1ci5wYXJlbnROb2RlLmNsYXNzTmFtZS5yZXBsYWNlKCJjb250YWluZXItbGFiZWwgIiwgIiIpOwogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoIi5YWD5sYWJlbCwuWFg+YnJ7ZGlzcGxheTp1bnNldCAhaW1wb3J0YW50O30uWFg+LmxhYmVsX2hpZGV7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fSIucmVwbGFjZSgvWFgvZ20sIGNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICJBQy1TaG93SGlkZUl0ZW0tIiArIGNsYXNzTmFtZSwgImJvZHkiKTsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzeW5jVG9CbG9ja0xpc3QoZW52KSB7CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3QgPSBlbnYudGFyZ2V0LnZhbHVlLnNwbGl0KCJcbiIpLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09ICcnKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHJlbW92ZUFCbG9ja0xpc3RJdGVtKGUpIHsKICAgICAgICAgICAgICAgIC8vIOeCueWHu+enu+mZpOafkOS4qmhvc3TmlbDmja7ml7YKICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSBlLnNyY0VsZW1lbnQgfHwgZS50YXJnZXQ7CiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gImxhYmVsIikgewogICAgICAgICAgICAgICAgICBsZXQgaG9zdCA9IHRhcmdldC5kYXRhc2V0Lmhvc3Q7CiAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNyZW1vdmUoaG9zdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBja0FkZFJ1bGUoKSB7CiAgICAgICAgICAgICAgICAvLyDmiYvliqjlop7liqDnp7vpmaTop4TliJkKICAgICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNwdXNoKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtKTsKICAgICAgICAgICAgICAgIHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtID0gIiI7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBsb2FkQ3VzdG9tU3R5bGUoKSB7CiAgICAgICAgICAgICAgICBsZXNzLnJlbmRlcihBQ0NvbmZpZy5Vc2VyU3R5bGVUZXh0LCAoZSwgY3NzKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLkxpdmVDb25maWcuY3NzX2hhc19lcnJvciA9IHRydWUKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLkxpdmVDb25maWcuY3NzX2hhc19lcnJvciA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgY3NzID0gY3NzLmNzcyB8fCAnJwogICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGNzcywgIkFDLXVzZXJTdHlsZSIsICJoZWFkIiwgdHJ1ZSk7IC8vIOeUqOaIt+iHquWumuS5ieeahOagt+W8j+ihqAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNhdmVDb25maWcoKSB7CiAgICAgICAgICAgICAgICBpZih0aGlzLm90aGVyLmN1clRhYj09PTEgJiYgIXRoaXMuQUNDb25maWcuYWNjZXB0TGljZW5zZSl7CiAgICAgICAgICAgICAgICAgIHRoaXMub3RoZXIuY3VyVGFiID0gMwogICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuYWNjZXB0TGljZW5zZSA9IHRydWUKCiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLmxhc3RTYXZlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgQUNTZXRWYWx1ZSgiQ29uZmlnIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5BQ0NvbmZpZykpOwogICAgICAgICAgICAgICAgaWYoIXRoaXMuQUNDb25maWcuZG9EaXNhYmxlU3VnKXsKICAgICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIk9SSUdJTiIsIDEsICJ3d3cuYmFpZHUuY29tIiwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSA4NjQwMDAwMCk7CiAgICAgICAgICAgICAgICAgIGFjU2V0Q29va2llKCJJU1NXIiwgMSwgbnVsbCwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSA4NjQwMDAwMCk7CiAgICAgICAgICAgICAgICAgIGFjU2V0Q29va2llKCJJU1NXIiwgMSwgInd3dy5iYWlkdS5jb20iLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDg2NDAwMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2hhbmdlUmVzZXRUZXh0KCkgewogICAgICAgICAgICAgICAgdGhpcy5sYW4uemhfY24uZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5yZXNldEJ0bl90ZXh0ID0gJ+WPjOWHu+mHjee9ricKICAgICAgICAgICAgICAgIHRoaXMubGFuLmVuLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwucmVzZXRCdG5fdGV4dCA9ICdEQmwgY2xpY2sgdG8gUmVzZXQnCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICByZXNldENvbmZpZygpIHsKICAgICAgICAgICAgICAgIC8vIOaYvuekuuS4uuWPjOWHu+mHjee9rgogICAgICAgICAgICAgICAgQUNTZXRWYWx1ZSgiQ29uZmlnIiwgJ3t9Jyk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNsb3NlUGFuZWwoKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICByZXNldENTUygpIHsKICAgICAgICAgICAgICAgIGlmKHRoaXMucmVzZXRDU1NfdGV4dC5pbmNsdWRlcygn6YeN572uQ1NTJykpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldENTU190ZXh0ID0gJ+ehruiupOmHjee9ricKICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZih0aGlzLnJlc2V0Q1NTX3RleHQuaW5jbHVkZXMoJ+ehruiupOmHjee9ricpKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuVXNlclN0eWxlVGV4dCA9IERlZmF1bHRDb25maWcuVXNlclN0eWxlVGV4dAogICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Q1NTX3RleHQgPSAn6YeN572uQ1NTJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdXNlVGhpc0h1eWFuQ29sb3IoZW52KSB7CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLmRlZmF1bHRIdVlhbkNvbG9yID0gZW52LnRhcmdldC52YWx1ZSB8fCBlbnYudGFyZ2V0LmRhdGFzZXQudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLkFDQ29uZmlnLmRlZmF1bHRIdVlhbkNvbG9yKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRIdVlhblN0eWxlKHRoaXMuQUNDb25maWcuZGVmYXVsdEh1WWFuQ29sb3IpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZ2V0VXNlckJsb2NrTGlzdFJlZ2V4KCkgewogICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuVXNlckJsb2NrTGlzdC5mb3JFYWNoKG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIG9uZSAhPT0gbnVsbCAmJiBsaXN0LnB1c2gobmV3IFJlZ0V4cChvbmUucmVwbGFjZSgiKiIsICIuKiIpKSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0pICE9PSAidW5kZWZpbmVkIiAmJiB0aGlzLm90aGVyLmFkZEJsb2NrSXRlbSAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKG5ldyBSZWdFeHAodGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0ucmVwbGFjZSgiKiIsICIuKiIpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbXB1dGVkOiB7CiAgICAgICAgICAgICAgZ2V0QmxvY2tMaXN0KCkgeyAvLyDkvJroh6rliqjnmoRyZW5kZXLliLBodG1s5LiK5Y6777yM5LiN55So5omL5Yqo5Y675riy5p+T5LiA6YGNCiAgICAgICAgICAgICAgICBsZXQgaW5zSFRNTCA9ICIiOwogICAgICAgICAgICAgICAgbGV0IHsgbGlzdDogVXNlckJsb2NrUmVnTGlzdCB9ID0gdGhpcy5jYWxfVXNlckJsb2NrTGlzdFJlZ2V4OwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgbGV0IGluc0NsYXNzID0gdGhpcy5vdGhlci5jdXJIb3N0cy5maW5kSW5kZXgobSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGxldCBbY3VySG9zdCwgY3VyVXJsXSA9IG0uc3BsaXQoIiMjIyIpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJCbG9ja1JlZ0xpc3RbaV0udGVzdChjdXJIb3N0KSB8fCBVc2VyQmxvY2tSZWdMaXN0W2ldLnRlc3QoY3VyVXJsKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSA9PT0gQUNDb25maWcuVXNlckJsb2NrTGlzdFtpXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pID49IDAgPyAiIGFjLWJsb2NrLWhpZ2giIDogIiI7IC8vIOWmguaenOW9k+WJjemhtemdouWtmOWcqO+8jOWImemrmOS6rgogICAgICAgICAgICAgICAgICBpbnNIVE1MICs9IGA8bGk+PGxhYmVsIGNsYXNzPSJhYy1ibG9jay1pdGVtJHtpbnNDbGFzc30iIGRhdGEtaG9zdD0iJHt0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3RbaV19Ij4ke3RoaXMuQUNDb25maWcuVXNlckJsb2NrTGlzdFtpXX08L2xhYmVsPjxsYWJlbCBjbGFzcz0iYWMtYmxvY2staXRlbSBhYy1ibG9jay1pdGVtZGVsIiBkYXRhLWhvc3Q9IiR7dGhpcy5BQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0W2ldfSI+eDwvbGFiZWw+PC9saT5cbmA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaW5zSFRNTDsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNhbF9kaXlCbG9ja0xpc3RCdG4oKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vdGhlci5zaG93QmxvY2tMaXN0QXJlYSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYmxvY2tFZGl0QnRuRW5kX3RleHQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYmxvY2tFZGl0QnRuX3RleHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBhc3luYyBjYWxfVXNlckJsb2NrTGlzdFJlZ2V4KCkgewogICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuVXNlckJsb2NrTGlzdC5mb3JFYWNoKG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIG9uZSAhPT0gbnVsbCAmJiBsaXN0LnB1c2gobmV3IFJlZ0V4cChvbmUucmVwbGFjZSgiKiIsICIuKiIpKSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0pICE9PSAidW5kZWZpbmVkIiAmJiB0aGlzLm90aGVyLmFkZEJsb2NrSXRlbSAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKG5ldyBSZWdFeHAodGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0ucmVwbGFjZSgiKiIsICIuKiIpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCBzdHIyYWIgPSAoc3RyKSA9PiB7CiAgICAgICAgICAgICAgICAgIHZhciBidWYgPSBuZXcgQXJyYXlCdWZmZXIoc3RyLmxlbmd0aCAqIDIpOyAvLyDmr4/kuKrlrZfnrKbljaDnlKgy5Liq5a2X6IqCCiAgICAgICAgICAgICAgICAgIHZhciBidWZWaWV3ID0gbmV3IFVpbnQxNkFycmF5KGJ1Zik7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBzdHJMZW4gPSBzdHIubGVuZ3RoOyBpIDwgc3RyTGVuOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBidWZWaWV3W2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1ZjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuY2FsY19ibG9ja19kYXRhID0gewogICAgICAgICAgICAgICAgICBtZDU6IGF3YWl0IG1kNVdBU00oc3RyMmFiKEpTT04uc3RyaW5naWZ5KGxpc3QpKSksCiAgICAgICAgICAgICAgICAgIGxpc3QKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxjX2Jsb2NrX2RhdGEKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIEFkc1N0eWxlTW9kZUNoYW5nZSgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIHYxOiBDT05TVC51c2VJdGVtLkFkc1N0eWxlTW9kZSwKICAgICAgICAgICAgICAgICAgdjI6IENPTlNULnVzZUl0ZW0uSHVZYW5Nb2RlLAogICAgICAgICAgICAgICAgICB2MzogQUNDb25maWcuU3R5bGVfQmFpZHVMaXRlLAogICAgICAgICAgICAgICAgICB2NDogQUNDb25maWcuaXNGYXZpY29uRW5hYmxlLAogICAgICAgICAgICAgICAgICB2NTogQ09OU1QuaXNHb29nbGVTcGVjaWFsLAogICAgICAgICAgICAgICAgICB2NjogQUNDb25maWcuaXNSaWdodERpc3BsYXlFbmFibGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBVc2VyU3R5bGVFbmFibGVDaGFuZ2UoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICB2MTogQUNDb25maWcuaXNVc2VyU3R5bGVFbmFibGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGxhbkNoYW5nZSgpewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgdjE6IEFDQ29uZmlnLmlzRW5MYW5nCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgaXNTYXZlQnV0dG9uQ2FuQmVTZWUoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNFbGVtZW50VmlzaWJsZSh0aGlzLiRyZWZzLmJvdHRvbVNhdmVCdXR0b24pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB3YXRjaDogewogICAgICAgICAgICAgICdDT05TVC51c2VJdGVtLkh1WWFuTW9kZSc6IHsKICAgICAgICAgICAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgICAgICAgICAgIGlmKHZhbCkgQ09OU1QuU3R5bGVNYW5nZXIubG9hZEh1WWFuU3R5bGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgQWRzU3R5bGVNb2RlQ2hhbmdlOiB7CiAgICAgICAgICAgICAgICBoYW5kbGVyKCkgewogICAgICAgICAgICAgICAgICAvLyDpnIDopoHlhYjliKDpmaTljp/mnInnmoToioLngrnmlbDmja4KICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7cmVzLCBub2RlfSA9IGNoZWNrRG9jbWVudEhhc05vZGUoIkFDLSIpCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykgbm9kZS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzPSdBQy1TdHlsZS1leHBhbmQnXSxzdHlsZVtjbGFzcz0nQUMtVHdvUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtVGhyZWVQYWdlRXhTdHlsZSddLHN0eWxlW2NsYXNzPSdBQy1Gb3VyUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtc3R5bGUtbG9nbyddLHN0eWxlW2NsYXNzPSdBQy1iYWlkdUxpdGVTdHlsZSddLHN0eWxlW2NsYXNzKj0nSHVZYW5TdHlsZS1GaWxlJ10iKTsKICAgICAgICAgICAgICAgICAgYWNDc3NMb2FkRmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5pbml0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBVc2VyU3R5bGVFbmFibGVDaGFuZ2UoKSB7CiAgICAgICAgICAgICAgICBpZihBQ0NvbmZpZy5pc1VzZXJTdHlsZUVuYWJsZSkgewogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRDdXN0b21TdHlsZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc2FmZVJlbW92ZSgic3R5bGVbY2xhc3M9J0FDLXVzZXJTdHlsZSddIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGxhbkNoYW5nZSgpewogICAgICAgICAgICAgICAgQWxsRGF0YS5sYW4udXNlID0gQUNDb25maWcuaXNFbkxhbmcgPyBBbGxEYXRhLmxhbi5lbiA6IEFsbERhdGEubGFuLnpoX2NuOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI215dXNlciIpLnJlbW92ZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIGlmICh0eXBlb2YgKFZ1ZSkgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgaWYgKCtWdWUudmVyc2lvbi5jaGFyQXQoMCkgPT09IDIpIHsKICAgICAgICAgICAgICB2dWVWTSA9IG5ldyBWdWUob3B0aW9ucyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdnVlVk0gPSBWdWUuY3JlYXRlQXBwKG9wdGlvbnMpLm1vdW50KGNoZWNrTm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlZ1ZSDmnKrlrozmiJDliJ3lp4vljJYtLeeoi+W6j+aXoOazleacieaViOaJp+ihjCIpOwogICAgICAgICAgfQogICAgICAgIH0sIDI1MCk7CgogICAgICAgIGZ1bmN0aW9uIE1haW5DYWxsYmFjayhlKSB7CiAgICAgICAgICBpZiAoZS50YXJnZXQgIT0gbnVsbCAmJiB0eXBlb2YgKGUudGFyZ2V0LmNsYXNzTmFtZSkgPT09ICJzdHJpbmciICYmIGUudGFyZ2V0LmNsYXNzTmFtZS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoIkFDLSIpID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy/lsY/olL3mjonlm6DkuLrlop7liqBjc3Plr7zoh7TnmoTop6blj5FpbnNlcnTliqjkvZwKICAgICAgICAgIHJhcGlkRGVhbCgpOwogICAgICAgICAgSW5zZXJ0U2V0dGluZ01lbnUoKTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBTaG93U2V0dGluZygpOwogICAgICAgICAgfSwgMTAwMCkgLy8g5rue5ZCO56qX5Y+j55qE5Yqg6L2977yM5YeP5bCR5YmN5pyfQ1BV5LqJ55SoCiAgICAgICAgfQoKICAgICAgICAvKuS7peS4i+S7o+eggeWkp+mDqOWIhuadpea6kOS6jlN1cHJlUHJlbG9hZGVyIOaEn+iwoiBzd2R5aCAmJiB5d3poYWlxaSAmJiBOTEYg5Lul5Y+KIG1hY2g2IOWkp+S9rCovCiAgICAgICAgLyoKICAgICAgICBTdXBlcl9wcmVsb2FkZXJQbHVzX29uZV9OZXc6IFByZWxvYWQgYW5kIEF1dG9wYWdlci4KICAgICAgICBDb3B5cmlnaHQgKEMpIDIwMjAgTWFjaDYKCiAgICAgICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgdmVyc2lvbiAzLgoKICAgICAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgogICAgICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgogICAgICAgICAqLwogICAgICAgIGZ1bmN0aW9uIGFjX3NwZnVuYyhlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCLov5nph4zmnInpl67popgiKQogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIHZhciB0LCByID0gZS5jdXJyZW50VGFyZ2V0OwogICAgICAgICAgdmFyIFR3ZWVuID0gewogICAgICAgICAgICAgICAgTGluZWFyOiBmdW5jdGlvbiBMaW5lYXIoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICByZXR1cm4gciAqIGUgLyBuICsgdDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBRdWFkOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIChlIC89IG4pICogZSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtciAqIChlIC89IG4pICogKGUgLSAyKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgLz0gbiAvIDIpIDwgMSA/IHIgLyAyICogZSAqIGUgKyB0IDogLXIgLyAyICogKC0tZSAqIChlIC0gMikgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBDdWJpYzogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoZSAvPSBuKSAqIGUgKiBlICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoKGUgPSBlIC8gbiAtIDEpICogZSAqIGUgKyAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgLz0gbiAvIDIpIDwgMSA/IHIgLyAyICogZSAqIGUgKiBlICsgdCA6IHIgLyAyICogKChlIC09IDIpICogZSAqIGUgKyAyKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBRdWFydDogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoZSAvPSBuKSAqIGUgKiBlICogZSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtciAqICgoZSA9IGUgLyBuIC0gMSkgKiBlICogZSAqIGUgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgLz0gbiAvIDIpIDwgMSA/IHIgLyAyICogZSAqIGUgKiBlICogZSArIHQgOiAtciAvIDIgKiAoKGUgLT0gMikgKiBlICogZSAqIGUgLSAyKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBRdWludDogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoZSAvPSBuKSAqIGUgKiBlICogZSAqIGUgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqICgoZSA9IGUgLyBuIC0gMSkgKiBlICogZSAqIGUgKiBlICsgMSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICogZSAqIGUgKiBlICsgdCA6IHIgLyAyICogKChlIC09IDIpICogZSAqIGUgKiBlICogZSArIDIpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFNpbmU6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtciAqIE1hdGguY29zKGUgLyBuICogKE1hdGguUEkgLyAyKSkgKyByICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiBNYXRoLnNpbihlIC8gbiAqIChNYXRoLlBJIC8gMikpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtciAvIDIgKiAoTWF0aC5jb3MoTWF0aC5QSSAqIGUgLyBuKSAtIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEV4cG86IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogciAqIE1hdGgucG93KDIsIDEwICogKGUgLyBuIC0gMSkpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT0gbiA/IHQgKyByIDogciAqICgxIC0gTWF0aC5wb3coMiwgLTEwICogZSAvIG4pKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBlID8gdCA6IGUgPT0gbiA/IHQgKyByIDogKGUgLz0gbiAvIDIpIDwgMSA/IHIgLyAyICogTWF0aC5wb3coMiwgMTAgKiAoZSAtIDEpKSArIHQgOiByIC8gMiAqICgyIC0gTWF0aC5wb3coMiwgLTEwICogLS1lKSkgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgQ2lyYzogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1yICogKE1hdGguc3FydCgxIC0gKGUgLz0gbikgKiBlKSAtIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiBNYXRoLnNxcnQoMSAtIChlID0gZSAvIG4gLSAxKSAqIGUpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuIC8gMikgPCAxID8gLXIgLyAyICogKE1hdGguc3FydCgxIC0gZSAqIGUpIC0gMSkgKyB0IDogciAvIDIgKiAoTWF0aC5zcXJ0KDEgLSAoZSAtPSAyKSAqIGUpICsgMSkgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgRWxhc3RpYzogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuLCBhLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSA/IHQgOiAxID09IChlIC89IG4pID8gdCArIHIgOiAobyB8fCAobyA9IC4zICogbiksICFhIHx8IGEgPCBNYXRoLmFicyhyKSA/IChhID0gciwKICAgICAgICAgICAgICAgICAgICAgIGkgPSBvIC8gNCkgOiBpID0gbyAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4ociAvIGEpLCAtYSAqIE1hdGgucG93KDIsIDEwICogKGUgLT0gMSkpICogTWF0aC5zaW4oKGUgKiBuIC0gaSkgKiAoMiAqIE1hdGguUEkpIC8gbykgKyB0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuLCBhLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSA/IHQgOiAxID09IChlIC89IG4pID8gdCArIHIgOiAobyB8fCAobyA9IC4zICogbiksICFhIHx8IGEgPCBNYXRoLmFicyhyKSA/IChhID0gciwKICAgICAgICAgICAgICAgICAgICAgIGkgPSBvIC8gNCkgOiBpID0gbyAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4ociAvIGEpLCBhICogTWF0aC5wb3coMiwgLTEwICogZSkgKiBNYXRoLnNpbigoZSAqIG4gLSBpKSAqICgyICogTWF0aC5QSSkgLyBvKSArIHIgKyB0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbiwgYSwgbykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogMiA9PSAoZSAvPSBuIC8gMikgPyB0ICsgciA6IChvIHx8IChvID0gbiAqICguMyAqIDEuNSkpLCAhYSB8fCBhIDwgTWF0aC5hYnMocikgPyAoYSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICBpID0gbyAvIDQpIDogaSA9IG8gLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKHIgLyBhKSwgZSA8IDEgPyBhICogTWF0aC5wb3coMiwgMTAgKiAoZSAtPSAxKSkgKiBNYXRoLnNpbigoZSAqIG4gLSBpKSAqICgyICogTWF0aC5QSSkgLyBvKSAqIC0uNSArIHQgOiBhICogTWF0aC5wb3coMiwgLTEwICogKGUgLT0gMSkpICogTWF0aC5zaW4oKGUgKiBuIC0gaSkgKiAoMiAqIE1hdGguUEkpIC8gbykgKiAuNSArIHIgKyB0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEJhY2s6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbiwgYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGEgJiYgKGEgPSAxLjcwMTU4KSwgciAqIChlIC89IG4pICogZSAqICgoYSArIDEpICogZSAtIGEpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gYSAmJiAoYSA9IDEuNzAxNTgpLCByICogKChlID0gZSAvIG4gLSAxKSAqIGUgKiAoKGEgKyAxKSAqIGUgKyBhKSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbiwgYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGEgJiYgKGEgPSAxLjcwMTU4KSwgKGUgLz0gbiAvIDIpIDwgMSA/IHIgLyAyICogKGUgKiBlICogKCgxICsgKGEgKj0gMS41MjUpKSAqIGUgLSBhKSkgKyB0IDogciAvIDIgKiAoKGUgLT0gMikgKiBlICogKCgxICsgKGEgKj0gMS41MjUpKSAqIGUgKyBhKSArIDIpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEJvdW5jZTogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgLSBUd2Vlbi5Cb3VuY2UuZWFzZU91dChuIC0gZSwgMCwgciwgbikgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgLz0gbikgPCAxIC8gMi43NSA/IHIgKiAoNy41NjI1ICogZSAqIGUpICsgdCA6IGUgPCAyIC8gMi43NSA/IHIgKiAoNy41NjI1ICogKGUgLT0gMS41IC8gMi43NSkgKiBlICsgLjc1KSArIHQgOiBlIDwgMi41IC8gMi43NSA/IHIgKiAoNy41NjI1ICogKGUgLT0gMi4yNSAvIDIuNzUpICogZSArIC45Mzc1KSArIHQgOiByICogKDcuNTYyNSAqIChlIC09IDIuNjI1IC8gMi43NSkgKiBlICsgLjk4NDM3NSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPCBuIC8gMiA/IC41ICogVHdlZW4uQm91bmNlLmVhc2VJbigyICogZSwgMCwgciwgbikgKyB0IDogLjUgKiBUd2Vlbi5Cb3VuY2UuZWFzZU91dCgyICogZSAtIG4sIDAsIHIsIG4pICsgLjUgKiByICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgVHdlZW5NID0gWyJMaW5lYXIiLCAiUXVhZCIsICJDdWJpYyIsICJRdWFydCIsICJRdWludCIsICJTaW5lIiwgIkV4cG8iLCAiQ2lyYyIsICJFbGFzdGljIiwgIkJhY2siLCAiQm91bmNlIl0sCiAgICAgICAgICAgICAgVHdlZW5FYXNlID0gWyJlYXNlSW4iLCAiZWFzZU91dCIsICJlYXNlSW5PdXQiXTsKICAgICAgICAgIHZhciBwcmVmcyA9IHsKICAgICAgICAgICAgc19tZXRob2Q6IDMsCiAgICAgICAgICAgIHNfZWFzZTogMiwKICAgICAgICAgICAgc19GUFM6IDYwLAogICAgICAgICAgICBzX2R1cmF0aW9uOiAzMzMsCiAgICAgICAgICB9OwoKICAgICAgICAgIGZ1bmN0aW9uIGdldFJlbGF0aXZlRGl2KGUpIHsKICAgICAgICAgICAgdmFyIHQgPSByLmlkOwogICAgICAgICAgICByZXR1cm4gKHQgPSB0LnJlcGxhY2UoLyhzcC1zZXBhcmF0b3ItKSguKykvLCAoZnVuY3Rpb24gKHQsIHIsIG4pIHsKICAgICAgICAgICAgICByZXR1cm4gciArIFN0cmluZyhOdW1iZXIobikgKyAoInByZSIgPT0gZSA/IC0xIDogMSkpOwogICAgICAgICAgICB9KSkpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkgOiBudWxsOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHNwX3RyYW5zaXRpb24oZSwgdCkgewogICAgICAgICAgICB2YXIgciA9IHNwX3RyYW5zaXRpb24uVHdlZW5GOwogICAgICAgICAgICByIHx8IChyID0gKHIgPSBUd2VlbltUd2Vlbk1bcHJlZnMuc19tZXRob2RdXSlbVHdlZW5FYXNlW3ByZWZzLnNfZWFzZV1dIHx8IHIsIHNwX3RyYW5zaXRpb24uVHdlZW5GID0gcik7CiAgICAgICAgICAgIHZhciBuID0gMWUzIC8gcHJlZnMuc19GUFMsIGEgPSAwLCBvID0gZSwgaSA9IHQgLSBlLCBzID0gTWF0aC5jZWlsKHByZWZzLnNfZHVyYXRpb24gLyBuKSwKICAgICAgICAgICAgICAgIGMgPSB3aW5kb3cuc2Nyb2xsWDsKICAgICAgICAgICAgIWZ1bmN0aW9uIHRyYW5zaXRpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGUgPSBNYXRoLmNlaWwocihhLCBvLCBpLCBzKSk7CiAgICAgICAgICAgICAgd2luZG93LnNjcm9sbChjLCBlKSwgYSA8IHMgJiYgKGErKywgc2V0VGltZW91dCh0cmFuc2l0aW9uLCBuKSk7CiAgICAgICAgICAgIH0oKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBzY3JvbGxJdChlLCB0KSB7CiAgICAgICAgICAgIHNwX3RyYW5zaXRpb24oZSwgdCk7CiAgICAgICAgICB9CgogICAgICAgICAgc3dpdGNoIChlLnRhcmdldC5pZCkgewogICAgICAgICAgICBjYXNlICJzcC1zcC1nb3RvcCI6CiAgICAgICAgICAgICAgc2Nyb2xsSXQod2luZG93LnNjcm9sbFksIDApOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAic3Atc3AtZ29wcmUiOgogICAgICAgICAgICAgIHZhciBuID0gZ2V0UmVsYXRpdmVEaXYoInByZSIpOwogICAgICAgICAgICAgIGlmICghbikgcmV0dXJuOwogICAgICAgICAgICAgIHQgPSB3aW5kb3cuc2Nyb2xsWTsKICAgICAgICAgICAgICB2YXIgYSA9IG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOwogICAgICAgICAgICAgIGEgPSB0IC0gKHIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gYSk7CiAgICAgICAgICAgICAgc2Nyb2xsSXQodCwgYSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJzcC1zcC1nb25leHQiOgogICAgICAgICAgICAgIHZhciBvID0gZ2V0UmVsYXRpdmVEaXYoIm5leHQiKTsKICAgICAgICAgICAgICBpZiAoIW8pIHJldHVybjsKICAgICAgICAgICAgICB0ID0gd2luZG93LnNjcm9sbFk7CiAgICAgICAgICAgICAgdmFyIGkgPSBvLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDsKICAgICAgICAgICAgICBpID0gdCArICgtci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBpKTsKICAgICAgICAgICAgICBzY3JvbGxJdCh0LCBpKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgInNwLXNwLWdvYm90dG9tIjoKICAgICAgICAgICAgICBzY3JvbGxJdCh3aW5kb3cuc2Nyb2xsWSwgTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCwgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQpKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHdpbmRvd3Njcm9sbChmbiA9ICgpPT57fSkgewogICAgICAgICAgc2FmZVdhaXRGdW5jKCgpID0+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgKCkgPT4gewogICAgICAgICAgICB2YXIgYmVmb3JlU2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcAogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgLy8g5bu25pe25omn6KGM77yM6YG/5YWN5Yia6L295YWl5Yiw6aG16Z2i5bCx6Kem5Y+R57+76aG15LqL5Lu2CiAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgYWZ0ZXJTY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLAogICAgICAgICAgICAgICAgICAgIGRlbHRhID0gYWZ0ZXJTY3JvbGxUb3AgLSBiZWZvcmVTY3JvbGxUb3A7CiAgICAgICAgICAgICAgICBpZiAoZGVsdGEgPT09IDApIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIGZuKGRlbHRhID4gMCA/ICJkb3duIiA6ICJ1cCIsIGUpOwogICAgICAgICAgICAgICAgYmVmb3JlU2Nyb2xsVG9wID0gYWZ0ZXJTY3JvbGxUb3A7CiAgICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICB9LCAxMDAwKQogICAgICAgICAgfSkKICAgICAgICB9CgogICAgICAgIHdpbmRvd3Njcm9sbChmdW5jdGlvbiAoZGlyZWN0aW9uLCBlKSB7CiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAiZG93biIpIHsgLy8g5LiL5ruR5omN5YeG5aSH57+76aG1CiAgICAgICAgICAgIGxldCBzcGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtZnctYV9lbmFibGUiKTsKICAgICAgICAgICAgLy8g5byA5ZCv5ZCO77yM5LiU5Zyo6Z2e77yIc3VwcmVwcmVsb2FkZXLlkK/nlKjvvInml7blnYflj68KICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQXV0b3BhZ2UgPT09IHRydWUgJiYgIShzcGwgJiYgc3BsLmNoZWNrZWQgPT09IHRydWUpKSB7CiAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgIGxldCBzY3JvbGxEZWx0YSA9IDY2NjsKICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUpIHNjcm9sbERlbHRhID0gMTAyNDsgLy8g5q+V56uf6LC35q2M5Yqg6L2957yT5oWi55qE6Zeu6aKYCiAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgPD0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCArIHNjcm9sbFRvcCArIHNjcm9sbERlbHRhICYmIGN1clNpdGUucGFnZUxvYWRpbmcgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRVQ0spIHsgLy8g5Y+v5Lul55So5bey5pyJ55qE5pa55rOV5p2l5a6e546w5LqGCiAgICAgICAgICAgICAgICAgIGlmICghQUNDb25maWcubm9ybWFsaXplRHVjayB8fCArQUNDb25maWcuZHVjay5BZHNTdHlsZU1vZGUgPj0gMykgeyAgLy8g5aaC5p6c5rKh5pyJ5byA5ZCv77yM6YKj5LmI5omL5Yqo57+76aG1IHx8IOWmguaenOaYr+WPjOWIl+eahOaXtuWAme+8jOS8vOS5juW5tuS4jeS8muiHquWKqOinpuWPkee/u+mhteaViOaenAogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNsaW5rcyAucmVzdWx0LS1tb3JlIGEiKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBTaG93UGFnZXIubG9hZE1vcmVQYWdlKCk7CiAgICAgICAgICAgICAgICAgIGlmKGN1clNpdGUucGFnZXIgJiYgY3VyU2l0ZS5wYWdlci5zdHlsaXNoKSB7CiAgICAgICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoY3VyU2l0ZS5wYWdlci5zdHlsaXNoLCAiQUMtcGFnZXItc3R5bGlzaCIpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgU2hvd1BhZ2VyID0gewogICAgICAgICAgZ2V0RnVsbEhyZWY6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmKGUgPT09IG51bGwpIHJldHVybiAnJzsKICAgICAgICAgICAgInN0cmluZyIgIT0gdHlwZW9mIGUgJiYgKGUgPSBlLmdldEF0dHJpYnV0ZSgiaHJlZiIpKTsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmdldEZ1bGxIcmVmLmE7CiAgICAgICAgICAgIHJldHVybiB0IHx8ICh0aGlzLmdldEZ1bGxIcmVmLmEgPSB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpKSwgdC5ocmVmID0gZSwgdC5ocmVmOwogICAgICAgICAgfSwKICAgICAgICAgIGNyZWF0ZURvY3VtZW50QnlTdHJpbmc6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgaWYgKCJIVE1MIiAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lKSByZXR1cm4gKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCAiYXBwbGljYXRpb24veGh0bWwreG1sIik7CiAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHQgPSAobmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGUsICJ0ZXh0L2h0bWwiKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdDsKICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KSB0ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJBRG9jdW1lbnQiKTsgZWxzZSB0cnkgewogICAgICAgICAgICAgICAgKHQgPSBkb2N1bWVudC5jbG9uZU5vZGUoITEpKS5hcHBlbmRDaGlsZCh0LmltcG9ydE5vZGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAhMSkpLAogICAgICAgICAgICAgICAgICB0LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImhlYWQiKSksIHQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiYm9keSIpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgICAgICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhkb2N1bWVudC5ib2R5KTsKICAgICAgICAgICAgICAgIHZhciBuID0gci5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZSk7CiAgICAgICAgICAgICAgICB0LmJvZHkuYXBwZW5kQ2hpbGQobik7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBhLCBvID0gewogICAgICAgICAgICAgICAgICBUSVRMRTogITAsCiAgICAgICAgICAgICAgICAgIE1FVEE6ICEwLAogICAgICAgICAgICAgICAgICBMSU5LOiAhMCwKICAgICAgICAgICAgICAgICAgU1RZTEU6ICEwLAogICAgICAgICAgICAgICAgICBCQVNFOiAhMAogICAgICAgICAgICAgICAgfSwgaSA9IHQuYm9keSwgcyA9IGkuY2hpbGROb2RlcywgYyA9IHMubGVuZ3RoIC0gMTsgYyA+PSAwOyBjLS0pIG9bKGEgPSBzW2NdKS5ub2RlTmFtZV0gJiYgaS5yZW1vdmVDaGlsZChhKTsKICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGNvbnNvbGUuZXJyb3IoIltBQy1TY3JpcHRdIiwgIuayoeacieaJvuWIsOimgei9rOaIkERPTeeahOWtl+espuS4siIpOwogICAgICAgICAgfSwKICAgICAgICAgIGxvYWRNb3JlUGFnZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoY3VyU2l0ZS5wYWdlcikgewogICAgICAgICAgICAgIGxldCBjdXJQYWdlRWxlID0gZ2V0RWxlbWVudEJ5WHBhdGgoY3VyU2l0ZS5wYWdlci5uZXh0TGluayk7CiAgICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0RnVsbEhyZWYoY3VyUGFnZUVsZSk7CiAgICAgICAgICAgICAgaWYoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUgKSB7CiAgICAgICAgICAgICAgICBpZihuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21hY2ludG9zaCcpKSB7CiAgICAgICAgICAgICAgICAgIC8vIE1BUksg5Li65LqG5YW85a6555m+5bqm5Zyoc2FmYXJp5LiL55qECiAgICAgICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdodHRwczovLycsICdodHRwOi8vJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmKHVybCA9PT0gJycpIHJldHVybjsKICAgICAgICAgICAgICB2YXIgc2VwSW1ncyA9IHsKICAgICAgICAgICAgICAgIHRvcDogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBV3RKUkVGVWVOcmNsRTByUkdFVXg4YzFHVXBSSklWSVpHZGhaQ1ZyMzhHR2hhSTBaWHdDa2xpZ2xDaFpFY3ZKeGhkZ1lXT2pMRVVwbS9FeWlMenplK284ZFR6ZE8zUGxqb1ZUdjdyUGM4LzVkKzY1NTV4WXJFaFdvcDZib2RhNSs2bDl3aldjV3BGK1dJYnFDSko5aEZSY0RyM1FBSWtJaEt1Z3o1UERma1NpeGtwaHo1YWlBbnFnRThyZ1dSeEdvU09QeUJrc3dRdVV3eXNjdzRIcm1GQ1pMOEt0L0pBZzdtRUZQRW1vNEZkUHdrMEJVY3NkeklhcDBUUThxTUFQdUlDY0VqTG5kK1ZqU2pjZkpOZ0ljL0RrWkdTeW1ZR3NuSzlFWk1yeGU0TUZhTkdpWmpDMmZUNXpRM3A3UURLMWRSMkdTbGp6aWNsQXZSVWU4bkhZVkE0amp2QzQzTmZBdWsvc21CMlFOcWNzV3hLY0xiQUtURm5TMGhXRDZuMjdGZDZGTHFpREk1aVFtUTlqcGlWVDBzTko2YVlkN2RBRTNRSEJiaW5TQVg1SldXYXh1TG84RjM1amgvYkJLOVkrL3IvQ2w2cExjbm5hOE52dURHTW5zbHBiWlJwWFpZVC8zcjRFR0FDWkwzWkwyYWZORkFBQUFBQkpSVTVFcmtKZ2dnPT0iLAogICAgICAgICAgICAgICAgYm90dG9tOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFYRkpSRUZVZU5yTTFjOHJCR0VjeC9GZHRDRWtMcVl0cGR3a0tTVUhVaHh3SVRkSytaM3lNMmNPTG5KMzlDYzQ0U2dIU2NtSndsRnhzSWRsQ1NjTzYvMnQ3Nk9ucDUyZFhUdGJubm8xTTgrUHo4NCt6ek16a2NnL0tBM29SVHpNMEE0Y0k0VlRkSVVWUElNM3BQR081YUFCSlRrR3gxQnFqWW1GRlp4VzdubkJ3WG1Yb2dXWDZiRUdjMmpFSVU3K2tOV0RVU1N3WnlxbmRTdkozTjFnMkJtMG9MdEIyait3N3JRUDRNcHFYelJUMFlSYVBXL0J0aE1lZFlMczYwSHNvRTJ2cTlCc1B3QUphOFhGTFVhMGZVcnZST28vc2FUMVE5YWRHaW1kbHQ4eWo2VFQ2UTZkMnZhaWRhOVlSYnRQNkVxbUJaQzVmSEE2WCtBQXoxYndFYzZjZms5K29hWk00Tm9aSkw3MCtKMmhUYVp0TnBldDA0MXpLOHlQL01nbCtyT0YxZW1yMFVNMXhuQWZFUHlJU2QwSm5vNnZ0eCtRdU02UFoyMmxwTzdkYkVWMlNpdjZyUGVJak5zMUhkWUM3aXhmRytZQnFkVFZEcVBJdjZpSVd2TzdpWEdVRnhBcWk3MlByYUo5SUg4RUdBQ1FjWWpZUmQ1R0h3QUFBQUJKUlU1RXJrSmdnZz09IiwKICAgICAgICAgICAgICAgIHByZTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBU2xKUkVGVWVOcGlZQmpPb0JpSXJ3SnhGUkF6VXN2UVZpRCtDTVQvZ2ZnVEVQZFJ5OUJQVUVOaCtBc1E5MUppYUF1U1M5SHhaM0lOYjhIaTB2K1V1cndGNnFML1JPQnZRTnhEcktGZmtUVCtBK0puUVB3QktmSkEvTDlJYW43aWM3a01FSGNDOFE4MEYzVUFjUnNRdjRieTMwSU5hVUpUOXdlYVdoU1FEUlVCNHVWWXZMa1lpQVdBT0JvcHZFRkJsQXJFUEVBOEc0dWU5VUFzQVRNNEVZdUNKVWdLTXRBTUxvU0tDd1B4WEN4NmMxaWdDbFRRZ21VWlZQTnJITUVHeTNtZ1lDa0NZaVlnVGtDU1Y0VVp2QTJJallCWURJZ3ZRYlB2T3lKVEVDaWQ1d0h4YnlBMkJ1TDNRTHdSV1lFc0VKdmcwSXdlRkVVNDFJRU1sZ2N4V0pBRUgwTXhKZUFzak1GRXE2SncrQnI4QmltVmZNQ1RERWtHN0VCY0E4VDNvV1VKeDREVll3QUJCZ0Nhbm5uU3piZ3dJUUFBQUFCSlJVNUVya0pnZ2c9PSIsCiAgICAgICAgICAgICAgICBuZXh0OiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFUMUpSRUZVZU5yYzFiMUtBMEVZaGVFbC9pQVJGRkVrS2w2RDBVSzhDckVWckN3RWV4RkN0QklsUldJanNmRWlMTDBGS3pzN1FVV3hNMnBpRk1Va3ZoUE93TEFzMlRHdUNuN3drTmxsNWpDNyt3MEpndjlhdmRqQU9iYlFuMVR3Q3U3UXdoV1c0eGFrUElPSE1LenhHQ2FTQ202aW9YSExaMEhxcHo3S3J3UlBJdnZOdkJsTTJ6WXlOWThjTWpoREhvOWZDQnpFcm5JcUtOamdSU3hwdklBQmJPTGVzMk1LV0hmdVhkaFhjUjJhdktySjR6R2hJOWdMaFFicTlYYVpnR08xa3V0SU96SUhwS3A3TmF3aGpZT0lOU2VZNmxGd0hhY3cxN1A2TlRXSGQ0eHFuTmJjUzgzTE9idHNhQ1BiRVcrZ1hVVzhPRHN3QzI3eG9Pc24zT0REbWZPR3NzOVhMdUU1NGpHanZQcUd1dUcxbUZEelpJZmROSHlubmRlN0RiVzFyNUR3VHN0SkhQMmlFNTVZcUQzNmViWFpEdnIrN0wvc1U0QUJBSXBWWldub0E1R2tBQUFBQUVsRlRrU3VRbUNDIiwKICAgICAgICAgICAgICAgIG5leHRfZ3JheTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBdHhKUkVGVWVOcmNsYzlMMm1FY3g3LzZOYlZacVJWajdwSU9sSVV1WjFITWd2MEJEY3FUN0pyc2tIMTNFTFBCRjdlVHZ6MTBIem5XUUJsQlJJZkJYSWZCTG1xWHNjdllaV1BLck1OSVU5QXBtcnIzNC93Nmkwb3ZNWmp3K0gwK3ovTjhYdCtQbi9mbjgwaFIvK1dIWVJoQklwRndSS1BSei9GNC9LbkQ0UkIyOHhIMEFoNGNISHlvVUNqc0lwRklJWlBKSGttbDBtOVlmbjJaRDc4WGNMMWVINnJWYWxJTUNtTVV0cUtiRDcvSGJOUXhhcTE1b3hjSC9sWHBjbVhndG5oMnUvMm1YQzYvRHFFK3NTeExsVXFsbmlFMFRWUEJZSkFxRm90NitHVjlQdCtQSnRobXM4MHNMUzJ4RW9ua2hsZ3Mvamd3TU9CY1hWM041ZlA1cmxDY3A5YlgxeVdMaTR1ZWNyazhVNmxVc2hEWTN3UmJMSllGR0tac05rc3E0Tjc4L0x3WTloT24wNWs1T2pxaStQelRHZVB4ZUZ3WlVsNnZkOGhrTXZrUERnNnNaSjJNNWVYbHIxd3FVdTJrQTVKT3B5MklBTytvTzlmVzFuNW1NcGsybkRqbWNqa0tOVTI1WEM2NTJXeDJwVklwNjVtWEoybnlqVVBwcWFrcE5aeHVBOFk1VDg3T3pzb2JqY1lIcFZLcEdoc2JlMUN0VmtYWXF4UUtoVGRxdGZxTDFXcjFKcFBKeHh5VTVMcS92ejhhQ29YOFRURGF0WWlGaEY2dnh4NXRBSndtOE9QajQ4bTV1Ym1LU3FVYUFXd1NhOWVRdzZKR28vbHVOQm9OaDRlSGJBZTBKaEFJTnNMaDhMTkFJSkNpdWRoeEIrUWgybHVkVGlmREFRTHZJM0FJY2grUmtsOGpKbHJoQ2JPcWdmb0xtRGVwT0YvQmZHTnJhMnNGRlpGdHZxZ3pNYkZZakFpeXA5VnFoNFZDNGNUSnlZbVE5MGVwSVFKdEhSTzFiQTVhUmhBdmRuWjJHSS9IODdjRXo1WVBnZU9TMlJzZkh4OUI3dStnT2k2OHlRQXRZWDl6ZDNlWGdaQ25hL3M4Qnk1eXBHVVV6aE9JU0hnTzlCZldYd0c2Y2haNkliaVZjNkx3bnNGZ0dJVkFlcEx6ams0cllXMXplM3ViY2J2ZDUzZmpaVjJGYXFHUTYzZlQwOVBETU85aTlCRW9vbjBKOVJtLzMzOXhtM2RyMmYzOWZWTFg3d0Z2b01Wdm9ZV2ZSeUlSRm5kRC9aLzhuZjBXWUFBOEVDMVovWk5tNGdBQUFBQkpSVTVFcmtKZ2dnPT0iLAogICAgICAgICAgICAgICAgcHJlX2dyYXk6ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXNsSlJFRlVlTnJjbFR0TVdtRVV4ei91dlR6bElVaHBOTVIwYUdOanJOSFNtSFRxUkp5YWR1alFEYlNHUndKVWFZQ21EaXpxVUV3Nk9EVk5HZ2JwWUNmU3BGSU5DUXpGUjlveU1YUnNYRkNzQVhrSUtOTC9SN2dHV3hPc1NkUEVrNXpjM08rZTg3dm4rNTl6djB2SXBiU0ppUW15dWJuNUxCS0pwTmJYMTErNFhDNUJ1eHkyWFlETlppTU9oMk9XNHppUFRDYlRpOFhpa2VIaDRTc1NpZVFUWG5JeHNOMXVKMWFyZFZZZ0VEZ1BEdytWOVhxZDFHbzFNY3V5ZzdBdXVWeStzcmEyOW5kZ1ZFbkd4OGRuaEVLaHMxcXRLZ0UvZVhaOGZDekMrcTMrL242dFNxVmFTU1FTNXdNN25VNWlNcGxtc0YxWHBWSTVCZVh0Nk9oSUJGa0dBZTlTS3BWL3dObXpLaldielJUNnRGd3VLODZDVXFQcmtJVldQalF3TUtCV0tCU240T3p2MExHeHNSbVJTRFNGU2p1YTBEbzhUUldBUytCNStCNjhnL0loaXhDTnZRUE4xV2p1aWVac1MvZjFhTlEwd3pCdWFDcWxVQ1FSdFZyOUVzMUs0a1ZEV0pOaHJRakFJaXFNbGtxbGU4MDRGbmtqQm9PaEV6djR2ckd4a1cyQUxSYUxGcnErUW9BVjJuRTh0TGUzZHpFWURFNXZiMjkzOXZYMVBjQmtpS1ZTYVExakZvckZZcStOUnFNdW04M2Vic1l6bUpxN3NHdTR4aGtLeHNEZkIvQXhuTzg2MGV2MW9lWGxaVThnRU1nbWswa0ZxbXc4bzlkVUtpV2ZuNTh2aE1QaDU0aDdTK09wUVhOU0xCWWZlanllUjF5enc5ZGJSb24wOVBTOFcxMWRuZkw1ZkpsOFBrKzBXaTNoazV2eUNOQlk0dlY2ZjBJbTkram9LSk5PcDgxOG84RzcwYWg0YVducEl6U0tZQ2EvZFhkM0IrUHh1SE55Y2pLenM3TnpBbXMxK3FGUXkrVnlkRFJ6MFdqVXBkUHAzdEI4VEZNMEZBcUZHeFhQemMxOXBsSnJOSnFyYU1vWHQ5dE50M1N1YytUZzRJQ2VKZm1GaFFWTG9WQXdvS0c3ZnIvL0I4Y0hBTDZGeTlaRkRpbmFHL3I1dzc3eWE4eS9PaEV2S1JoanRJdXAyWU1UZUJiM21YWTUzSG5BbU5rUCsvdjdOekhUVHdBTzRmNzlmL3VkL1JKZ0FPTGNSTlpxTG9qTUFBQUFBRWxGVGtTdVFtQ0MiLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoIi5zcC1zZXBhcmF0b3J7bGluZS1oZWlnaHQ6MS44ICFpbXBvcnRhbnQ7b3BhY2l0eToxICFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUgIWltcG9ydGFudDtmbG9hdDpub25lICFpbXBvcnRhbnQ7dG9wOjAgIWltcG9ydGFudDtsZWZ0OjAgIWltcG9ydGFudDttaW4td2lkdGg6MzY2cHg7d2lkdGg6YXV0bzt0ZXh0LWFsaWduOmNlbnRlciAhaW1wb3J0YW50O2ZvbnQtc2l6ZToxNHB4ICFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O3BhZGRpbmc6M3B4IDAgIWltcG9ydGFudDttYXJnaW46NXB4IDEwcHggOHB4O2NsZWFyOmJvdGggIWltcG9ydGFudDtib3JkZXItc3R5bGU6c29saWQgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjY2NjYyAhaW1wb3J0YW50O2JvcmRlci13aWR0aDoxcHggIWltcG9ydGFudDstbW96LWJvcmRlci1yYWRpdXM6MzBweCAhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MzBweCAhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZiAhaW1wb3J0YW50O30uc3Atc2VwYXJhdG9yOmhvdmVye2JveC1zaGFkb3c6MCAwIDExcHggcmdiYSgzMywzMywzMywwLjIpO30jc3Atc2VwYXJhdG9yLWhvdmVye2Rpc3BsYXk6bm9uZTt9LnNwLXNlcGFyYXRvcjpob3ZlciAjc3Atc2VwYXJhdG9yLWhvdmVye2Rpc3BsYXk6YmxvY2s7fS5zcC1zZXBhcmF0b3IgLnNwLXNvbWVpbmZve3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7cmlnaHQ6MTBweCAhaW1wb3J0YW50O2ZvbnQtc2l6ZToxMnB4ICFpbXBvcnRhbnQ7Zm9udC1zdHlsZTppdGFsaWMgIWltcG9ydGFudDtiYWNrZ3JvdW5kOm5vbmUgIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciBzcGFue3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Y3Vyc29yOiBwb2ludGVyO3BhZGRpbmc6IDA7bWFyZ2luOiAwIDVweDtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOjIycHg7aGVpZ2h0OjIycHg7fS5zcC1zZXBhcmF0b3IgYXttYXJnaW46MCAyMHB4IDAgLTZweCAhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lICFpbXBvcnRhbnQ7dGV4dC1zaGFkb3c6I2ZmZiAwIDFweCAwICFpbXBvcnRhbnQ7YmFja2dyb3VuZDpub25lICFpbXBvcnRhbnQ7Y29sb3I6IzU5NTk1OSAhaW1wb3J0YW50O30uc3Atc2VwYXJhdG9yIGlucHV0e3BhZGRpbmc6MCAhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjIzcHggIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciAuc3AtbWQtc3Bhbntmb250LXdlaWdodDpib2xkICFpbXBvcnRhbnQ7bWFyZ2luOjAgMjBweCAhaW1wb3J0YW50O30jc3Atc3AtbWQtbnVtYmVye3dpZHRoOjZjaCAhaW1wb3J0YW50O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSAhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7dGV4dC1hbGlnbjpsZWZ0ICFpbXBvcnRhbnQ7fSIgKwogICAgICAgICAgICAgICAgYC5hY19zcF90b3B7YmFja2dyb3VuZC1pbWFnZTp1cmwoJyR7c2VwSW1ncy50b3B9Jyl9YCArCiAgICAgICAgICAgICAgICBgLmFjX3NwX3ByZXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLnByZX0nKX1gICsKICAgICAgICAgICAgICAgIGAuYWNfc3BfbmV4dHtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLm5leHR9Jyl9YCArCiAgICAgICAgICAgICAgICBgLmFjX3NwX2JvdHRvbXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLmJvdHRvbX0nKX1gICsKICAgICAgICAgICAgICAgIGAuYWNfc3BfbmV4dF9ncmF5e2JhY2tncm91bmQtaW1hZ2U6dXJsKCcke3NlcEltZ3MubmV4dF9ncmF5fScpfWAgKwogICAgICAgICAgICAgICAgYC5hY19zcF9wcmVfZ3JheXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLnByZV9ncmF5fScpfWAsCiAgICAgICAgICAgICAgICAiQUMtUHJlbG9hZCIpCiAgICAgICAgICAgICAgaWYgKGN1clNpdGUucGFnZVVybCA9PT0gdXJsKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJbQUMtU2NyaXB0XSIsICLnv7vpobXliLDovr7lupXpg6jkuoYgLSDmiJbogIXlvILluLggLSDlh7rnjrDlvILluLjor7fnm7TmjqXlj43ppojkvZzogIXkv67mlLkiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9Ly8g5LiN5Lya6YeN5aSN5Yqg6L2955u45ZCM55qE6aG16Z2iCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWKoOi9vee/u+mhteWcsOWdgO+8miIgKyB1cmwpCiAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlVXJsID0gdXJsOwogICAgICAgICAgICAgIC8vIOWvuXVybOeahOaVsOaNrui/m+ihjOivu+WPlgogICAgICAgICAgICAgIGN1clNpdGUucGFnZXIuc3RhcnRGaWx0ZXIgJiYgY3VyU2l0ZS5wYWdlci5zdGFydEZpbHRlcigpOwogICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBuZXdCb2R5ID0gU2hvd1BhZ2VyLmNyZWF0ZURvY3VtZW50QnlTdHJpbmcocmVzcG9uc2UucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAvLyB4eC5ldmFsdWF0ZSh4cGF0aCwgeHgpCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2VFbGVtcyA9IGdldEFsbEVsZW1lbnRzKGN1clNpdGUucGFnZXIucGFnZUVsZW1lbnQsIG5ld0JvZHksIG5ld0JvZHkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcmlwdEVsZW1zID0gZ2V0QWxsRWxlbWVudHMoJy8vc2NyaXB0JywgbmV3Qm9keSwgbmV3Qm9keSk7CgogICAgICAgICAgICAgICAgICAgIGxldCB0b0VsZW1lbnQgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLkhUX2luc2VydFswXSlbMF07CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VFbGVtcy5sZW5ndGggPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5pyA5ZCO5LiA5Liq57+76aG15oyJ6ZKuCiAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dEVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3NwLXNwLWdvbmV4dCIpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRFcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXN0RSA9IG5leHRFc1tuZXh0RXMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RFLmNsYXNzTGlzdC5yZXBsYWNlKCJhY19zcF9uZXh0X2dyYXkiLCAiYWNfc3BfbmV4dCIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgLy8g5o+S5YWl57+76aG15oyJ6ZKu5YWD57SgCiAgICAgICAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VOdW0rKzsKICAgICAgICAgICAgICAgICAgICAgIGxldCBhZGRUbyA9ICJiZWZvcmVlbmQiOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUucGFnZXIuSFRfaW5zZXJ0WzFdID09PSAxKSBhZGRUbyA9ICJiZWZvcmViZWdpbiI7CiAgICAgICAgICAgICAgICAgICAgICB0b0VsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKGFkZFRvLCBgPGRpdiBjbGFzcz0nc3Atc2VwYXJhdG9yIEFDJyBpZD0nc3Atc2VwYXJhdG9yLUFDWCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9J3NwLXNwLW5leHRsaW5rJyB0YXJnZXQ9J19ibGFuayc+PGI+56ysIDxzcGFuIHN0eWxlPSdjb2xvcjojNTk1OTU5IWltcG9ydGFudDsnPkFDWDwvc3Bhbj4g6aG1PC9iPjwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3Atc3AtZ290b3AiIGNsYXNzPSdhY19zcF90b3AnIHRpdGxlPSfljrvliLDpobbpg6gnPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3Atc3AtZ29wcmUiIGNsYXNzPScke2N1clNpdGUucGFnZU51bSA8PSAyID8gImFjX3NwX3ByZV9ncmF5IiA6ICJhY19zcF9wcmUifScgdGl0bGU9J+S4iua7muS4gOmhtScgPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3Atc3AtZ29uZXh0IiBjbGFzcz0nYWNfc3BfbmV4dF9ncmF5JyB0aXRsZT0n5LiL5rua5LiA6aG1Jz48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvYm90dG9tIiBjbGFzcz0nYWNfc3BfYm90dG9tJyB0aXRsZT0n5Y675Yiw5bqV6YOoJyA+PC9zcGFuPjwvZGl2PmAKICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9BQ1gvZ20sIGN1clNpdGUucGFnZU51bSkpOwogICAgICAgICAgICAgICAgICAgICAgLy8g5o+S5YWl5paw6aG16Z2i5YWD57SgCiAgICAgICAgICAgICAgICAgICAgICBwYWdlRWxlbXMuZm9yRWFjaChmdW5jdGlvbiAob25lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvRWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoYWRkVG8sIG9uZSk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5zcC1zZXBhcmF0b3IuQUM6bm90KFtiaW5kXSkiKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVyLnNldEF0dHJpYnV0ZSgiYmluZCIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBwZXIuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhY19zcGZ1bmMpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgLy8g5o+S5YWlc2NyaXB0cyAmIHN0eWxlIC0g5L+d6K+BanPliqDovb0KICAgICAgICAgICAgICAgICAgICAgIGlmKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JpcHRUZXh0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdEVsZW1zLmZvckVhY2goKG9uZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdFRleHQgKz0gb25lLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JpcHROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdE5vZGUuaW5uZXJIVE1MID0gc2NyaXB0VGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgdG9FbGVtZW50LmFwcGVuZENoaWxkKHNjcmlwdE5vZGUpCiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgLy8g5pu/5o2i5b6F5pu/5o2i5YWD57SgCiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3JpRSA9IGdldEFsbEVsZW1lbnRzKGN1clNpdGUucGFnZXIucmVwbGFjZUUpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVwRSA9IGdldEFsbEVsZW1lbnRzKGN1clNpdGUucGFnZXIucmVwbGFjZUUsIG5ld0JvZHksIG5ld0JvZHkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpRS5sZW5ndGggPT09IHJlcEUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3JpRS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICLnv7vpobUt5pu/5o2i57+76aG15YWD57SgICdyZXBsYWNlRScg5aSx5pWIIjsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmlFLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlFW2ldLm91dGVySFRNTCA9IHJlcEVbaV0ub3V0ZXJIVE1MOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gQWRkQ3VzdG9tU3R5bGUoKSB7CiAgICAgICAgICBpZiAoQUNDb25maWcuaXNVc2VyU3R5bGVFbmFibGUpIHsKICAgICAgICAgICAgQUNfYWRkU3R5bGUoQUNDb25maWcuVXNlclN0eWxlVGV4dCwgIkFDLXVzZXJTdHlsZSIpOy8vIOeUqOaIt+iHquWumuS5ieeahOagt+W8j+ihqAogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5Li65LqG5pa55L6/6LCD5pW05qC35byP5ZKM5p+l55yL5pWI5p6c77yM5pqC5pe25LiN56e76ZmkCiAgICAgICAgICAgIC8vIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzPSdBQy11c2VyU3R5bGUnXSIpCiAgICAgICAgICB9CiAgICAgICAgICBBQ19hZGRTdHlsZSgKICAgICAgICAgICAgIi5vcHItcmVjb21tZW5kcy1tZXJnZS1pbWd0ZXh0e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnQ7fSIgKyAvLyDnp7vpmaTnmb7luqbmtY/op4jlmajmjqjlub8KICAgICAgICAgICAgIi5yZXNfdG9wX2Jhbm5lcntkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iICsgLy8g56e76Zmk5Y+v6IO955qE55m+5bqmSFRUUFPliqvmjIHmmL7npLrpl67popgKICAgICAgICAgICAgIi5oZWFkQmxvY2ssIGJvZHk+ZGl2LnJlc3VsdC1vcHtkaXNwbGF5Om5vbmU7fSIgLy8g56e76Zmk55m+5bqm55qE5pCc57Si57uT5p6c6aG26YOo5LiA5p2h55qE5bu66K6u5paH5a2XICYg56e76Zmk5Y+v6IO95Ye6546w55qE55m95bGP546w6LGhCiAgICAgICAgICAgICwgIkFDLXNwZWNpYWwtQkFJRFUiCiAgICAgICAgICApOwogICAgICAgICAgLyoi6Ieq5a6a5LmJIuaMiemSruaViOaenCovCiAgICAgICAgICBBQ19hZGRTdHlsZSgiLmFjaGlkZXtkaXNwbGF5Om5vbmU7fSAubmV3RnVuY0hpZ2hMaWdodHtjb2xvcjpyZWQ7Zm9udC13ZWlnaHQ6IDEwMDtiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7Zm9udC13ZWlnaHQ6IDYwMDt9I3NwLWFjLWNvbnRhaW5lciBsYWJlbHtkaXNwbGF5OmlubGluZTt9I3V7d2lkdGg6MzE5cHh9I3UgI215dXNlcntkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW46IDEzcHggLTEwcHggMCAyNHB4O30uc2l0ZS13cmFwcGVyICNteXVzZXIsLnNvZ291LXNldC1ib3ggI215dXNlciwjZ2J3ICNteXVzZXJ7bWFyZ2luLXJpZ2h0OjE1cHg7fSAjbXl1c2VyLCNteXVzZXIgLm15dXNlcmNvbmZpZ3twYWRkaW5nOjA7bWFyZ2luOjB9I215dXNlcntkaXNwbGF5OmlubGluZS1ibG9jazt9I215dXNlciAubXl1c2VyY29uZmlne2Rpc3BsYXk6aW5saW5lLWJsb2NrO2xpbmUtaGVpZ2h0OjEuNTtiYWNrZ3JvdW5kOiM0ZTZlZjI7Y29sb3I6I2ZmZjtmb250LXdlaWdodDo3MDA7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzo2cHg7Ym9yZGVyOjJweCBzb2xpZCAjRTVFNUU1O30jbXl1c2VyIC5teXVzZXJjb25maWd7Ym94LXNoYWRvdzowIDAgMTBweCAzcHggcmdiYSgwLDAsMCwuMSk7Ym9yZGVyLXJhZGl1czogNnB4fSNteXVzZXIgLm15dXNlcmNvbmZpZzpob3ZlcntiYWNrZ3JvdW5kOiM0NjYyZDkgIWltcG9ydGFudDtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2JvcmRlcjoycHggc29saWQgIzczQTZGODt9Ym9keVtkb2dlXSAjaGVhZGVye21heC13aWR0aDogdW5zZXQ7fWJvZHlbZG9nZV0gI215dXNlcntwb3NpdGlvbjogYWJzb2x1dGU7cmlnaHQ6IDQwcHg7fSIsCiAgICAgICAgICAgICJBQy1NRU5VX0J0biIpOwogICAgICAgICAgLyroh6rlrprkuYnpobXpnaLlhoXlrrnmlYjmnpwqLwogICAgICAgICAgQUNfYWRkU3R5bGUoJ2JvZHlbYmFpZHVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iYmFpZHUiXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W2dvb2dsZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJnb29nbGUiXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W2JpbmddICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iYmluZyJdKT5sYWJlbDpub3QoW2NsYXNzPSJsYWJlbF9oaWRlIl0pLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbc29nb3VdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0ic29nb3UiXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W2R1Y2tdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZHVjayJdKT5sYWJlbDpub3QoW2NsYXNzPSJsYWJlbF9oaWRlIl0pLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZG9nZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJkb2dlIl0pPmxhYmVsOm5vdChbY2xhc3M9ImxhYmVsX2hpZGUiXSksXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiYWlkdV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJiYWlkdSJdKT5icixcbicgKwogICAgICAgICAgICAnICBib2R5W2dvb2dsZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJnb29nbGUiXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiaW5nXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImJpbmciXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtkdWNrXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImR1Y2siXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtkb2dlXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImRvZ2UiXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtzb2dvdV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJzb2dvdSJdKT5icixcbicgKwogICAgICAgICAgICAnICBib2R5W2JhaWR1XSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJiYWlkdSJdPi5sYWJlbF9oaWRlLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZ29vZ2xlXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJnb29nbGUiXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W2JpbmddICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbFtjbGFzcyo9ImJpbmciXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W3NvZ291XSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJzb2dvdSJdPi5sYWJlbF9oaWRlLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZHVja10gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0iZHVjayJdPi5sYWJlbF9oaWRlLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZG9nZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0iZG9nZSJdPi5sYWJlbF9oaWRlXG4nICsgLy8g5rOo5oSP5bC+6YOo6YCX5Y+3CiAgICAgICAgICAgICd7JyArCiAgICAgICAgICAgICdkaXNwbGF5Om5vbmU7XG4nICsKICAgICAgICAgICAgJ30jc3AtYWMtY29udGFpbmVyIC5sYWJlbF9oaWRle2N1cnNvcjpwb2ludGVyO21hcmdpbi1sZWZ0OjglO2NvbG9yOmJsdWV9I3NwLWFjLWNvbnRhaW5lciAubGlua2hyZWYsI3NwLWFjLWNvbnRhaW5lciAubGFiZWxfaGlkZTpob3Zlcntjb2xvcjpyZWR9I3NwLWFjLWNvbnRhaW5lciAubGlua2hyZWY6aG92ZXJ7Zm9udC13ZWlnaHQ6Ym9sZH0jc3AtYWMtY29udGFpbmVyIGxhYmVsLm1lbnUtYm94LXNtYWxse21heC13aWR0aDoxNnB4O21heC1oZWlnaHQ6MTZweDtjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmlubGluZS1ibG9ja30uQUMtQ291bnRlclR7YmFja2dyb3VuZDojRkQ5OTk5fWJvZHkgICNzcC1hYy1jb250YWluZXJ7cG9zaXRpb246Zml4ZWQ7dG9wOjMuOXZ3O3JpZ2h0OjguOHZ3fSNzcC1hYy1jb250YWluZXJ7ei1pbmRleDo5OTk5OTk7dGV4dC1hbGlnbjpsZWZ0O2JhY2tncm91bmQtY29sb3I6d2hpdGV9I3NwLWFjLWNvbnRhaW5lciAqe2ZvbnQtc2l6ZToxM3B4O2NvbG9yOmJsYWNrO2Zsb2F0Om5vbmV9I3NwLWFjLW1haW4taGVhZHtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MDtsZWZ0OjB9I3NwLWFjLXNwYW4taW5mb3twb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxcHg7dG9wOjA7Zm9udC1zaXplOjEwcHg7bGluZS1oZWlnaHQ6MTBweDtiYWNrZ3JvdW5kOm5vbmU7Zm9udC1zdHlsZTppdGFsaWM7Y29sb3I6IzVhNWE1YTt0ZXh0LXNoYWRvdzp3aGl0ZSAwcHggMXB4IDFweH0jc3AtYWMtY29udGFpbmVyIGlucHV0e3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtkaXNwbGF5OmlubGluZS1ibG9jaztvdXRsaW5lOm5vbmU7aGVpZ2h0OmF1dG87cGFkZGluZzowcHg7bWFyZ2luLWJvdHRvbTowcHg7bWFyZ2luLXRvcDowcHh9I3NwLWFjLWNvbnRhaW5lciBpbnB1dFt0eXBlPSJudW1iZXIiXXt3aWR0aDo1MHB4O3RleHQtYWxpZ246bGVmdH0jc3AtYWMtY29udGFpbmVyIGlucHV0W3R5cGU9ImNoZWNrYm94Il17Ym9yZGVyOjFweCBzb2xpZCAjQjRCNEI0O3BhZGRpbmc6MXB4O21hcmdpbjozcHg7d2lkdGg6MTNweDtoZWlnaHQ6MTNweDtiYWNrZ3JvdW5kOm5vbmU7Y3Vyc29yOnBvaW50ZXI7dmlzaWJpbGl0eTp2aXNpYmxlO3Bvc2l0aW9uOnN0YXRpY30jc3AtYWMtY29udGFpbmVyIGlucHV0W3R5cGU9ImJ1dHRvbiJde2JvcmRlcjoxcHggc29saWQgI2NjYztjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOm5vbmU7d2lkdGg6YXV0bztoZWlnaHQ6YXV0b30jc3AtYWMtY29udGFpbmVyIGxpe2xpc3Qtc3R5bGU6bm9uZTttYXJnaW46M3B4IDA7Ym9yZGVyOm5vbmU7ZmxvYXQ6bm9uZTtjdXJzb3I6ZGVmYXVsdDt9I3NwLWFjLWNvbnRhaW5lciBmaWVsZHNldHtib3JkZXI6MnB4IGdyb292ZSAjY2NjOy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7cGFkZGluZzo0cHggOXB4IDZweCA5cHg7bWFyZ2luOjJweDtkaXNwbGF5OmJsb2NrO3dpZHRoOmF1dG87aGVpZ2h0OmF1dG99I3NwLWFjLWNvbnRhaW5lciBsZWdlbmR7bGluZS1oZWlnaHQ6MjBweDttYXJnaW4tYm90dG9tOjBweH0jc3AtYWMtY29udGFpbmVyIGZpZWxkc2V0ID4gdWx7cGFkZGluZzowO21hcmdpbjowfSNzcC1hYy1jb250YWluZXIgdWwjc3AtYWMtYV91c2VpZnJhbWUtZXh0ZW5ke3BhZGRpbmctbGVmdDo0MHB4fSNzcC1hYy1yZWN0e3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDowO2xlZnQ6MDtmbG9hdDpyaWdodDtoZWlnaHQ6MTBweDt3aWR0aDoxMHB4O3BhZGRpbmc6MDttYXJnaW46MDstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O2JvcmRlcjoxcHggc29saWQgd2hpdGU7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgNXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDAgMCAzcHggcmdiYSgwLDAsMCwwLjgpOy1tb3otYm94LXNoYWRvdzppbnNldCAwIDVweCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwIDAgM3B4IHJnYmEoMCwwLDAsMC44KTtib3gtc2hhZG93Omluc2V0IDAgNXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDAgMCAzcHggcmdiYSgwLDAsMCwwLjgpO29wYWNpdHk6MC44fSNzcC1hYy1kb3QsI3NwLWFjLWN1ci1tb2Rle3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6OTk5OTt3aWR0aDo1cHg7aGVpZ2h0OjVweDtwYWRkaW5nOjA7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtib3JkZXI6MXB4IHNvbGlkIHdoaXRlO29wYWNpdHk6MTstd2Via2l0LWJveC1zaGFkb3c6aW5zZXQgMCAtMnB4IDFweCByZ2JhKDAsMCwwLDAuMyksaW5zZXQgMCAycHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwcHggMXB4IDJweCByZ2JhKDAsMCwwLDAuOSk7LW1vei1ib3gtc2hhZG93Omluc2V0IDAgLTJweCAxcHggcmdiYSgwLDAsMCwwLjMpLGluc2V0IDAgMnB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMHB4IDFweCAycHggcmdiYSgwLDAsMCwwLjkpO2JveC1zaGFkb3c6aW5zZXQgMCAtMnB4IDFweCByZ2JhKDAsMCwwLDAuMyksaW5zZXQgMCAycHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwcHggMXB4IDJweCByZ2JhKDAsMCwwLDAuOSl9I3NwLWFjLWRvdHtyaWdodDotM3B4O3RvcDotM3B4fSNzcC1hYy1jdXItbW9kZXtsZWZ0Oi0zcHg7dG9wOi0zcHg7d2lkdGg6NnB4O2hlaWdodDo2cHh9I3NwLWFjLWNvbnRlbnR7cGFkZGluZzowO21hcmdpbjowcHg7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtib3JkZXI6MXB4IHNvbGlkICNBMEEwQTA7LXdlYmtpdC1ib3gtc2hhZG93Oi0ycHggMnB4IDVweCByZ2JhKDAsMCwwLDAuMyk7LW1vei1ib3gtc2hhZG93Oi0ycHggMnB4IDVweCByZ2JhKDAsMCwwLDAuMyk7Ym94LXNoYWRvdzotMnB4IDJweCA1cHggcmdiYSgwLDAsMCwwLjMpfSNzcC1hYy1tYWlue3BhZGRpbmc6NXB4O2JvcmRlcjoxcHggc29saWQgd2hpdGU7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOiNGMkYyRjc7YmFja2dyb3VuZDotbW96LWxpbmVhci1ncmFkaWVudCh0b3AsI0ZDRkNGQywjRjJGMkY3IDEwMCUpO2JhY2tncm91bmQ6LXdlYmtpdC1ncmFkaWVudChsaW5lYXIsMCAwLDAgMTAwJSxmcm9tKCNGQ0ZDRkMpLHRvKCNGMkYyRjcpKX0jc3AtYWMtZm9vdHtwb3NpdGlvbjpyZWxhdGl2ZTtsZWZ0OjA7cmlnaHQ6MDttaW4taGVpZ2h0OjIwcHh9I3NwLWFjLXNhdmVidXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MnB4fSNzcC1hYy1jb250YWluZXIgLmVuZGJ1dHRvbnttYXJnaW4tdG9wOjhweH0jc3AtYWMtY29udGFpbmVyIC5zcC1hYy1zcGFuYnV0dG9ue2JvcmRlcjoxcHggc29saWQgI2NjYzstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O3BhZGRpbmc6MnB4IDNweDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNGOUY5Rjk7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgMTBweCA1cHggd2hpdGU7LW1vei1ib3gtc2hhZG93Omluc2V0IDAgMTBweCA1cHggd2hpdGU7Ym94LXNoYWRvdzppbnNldCAwIDEwcHggNXB4IHdoaXRlfSNzcC1hYy1jb250YWluZXIgLnNwLWFjLXNwYW5idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojREREfWxhYmVsW2NsYXNzPSJuZXdGdW5jIl17Y29sb3I6Ymx1ZX0nLAogICAgICAgICAgICAiQUMtTUVOVV9QYWdlIik7CiAgICAgICAgfQoKICAgICAgICBBZGRDdXN0b21TdHlsZSgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCdBQy3ph43lrprlkJHohJrmnKzorr7nva4nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgfQoKICAgICAgICAvKirov5nkuJzopb/ku6XlkI7kvJrnlKjkuIoqKi8KICAgICAgICBmdW5jdGlvbiBnZXRTZWFyY2hWYWx1ZSgpIHsKICAgICAgICAgIGxldCBrdmwgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLnNwbGl0KCImIik7CiAgICAgICAgICBsZXQgc2VhcmNoViA9ICIiOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrdmwubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGV0IHZhbHVlID0ga3ZsW2ldLnJlcGxhY2UoL14od2R8cXVlcnl8cSk9LywgIiIpOwogICAgICAgICAgICBpZiAodmFsdWUgIT09IGt2bFtpXSkgewogICAgICAgICAgICAgIHNlYXJjaFYgPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gICcrJyDnmb7luqbjgIHmkJzni5fjgIHlv4XlupTjgIHosLfmrYzjgIHlpb3mkJwKICAgICAgICAgIHNlYXJjaFYgPSBzZWFyY2hWLnJlcGxhY2UoIisiLCAiICIpOwogICAgICAgICAgcmV0dXJuIHNlYXJjaFY7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByYXBpZERlYWwoKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoaW5zZXJ0TG9ja2VkID09PSBmYWxzZSAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLk9USEVSUykgewogICAgICAgICAgICAgIGluc2VydExvY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgQUNIYW5kbGUoKTsgLy8g5aSE55CG5Li76YeN5a6a5ZCRCiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzRmF2aWNvbkVuYWJsZSAmJiB0eXBlb2YoY3VyU2l0ZS5GYXZpY29uVHlwZSkgIT09ICd1bmRlZmluZWQnKSB7IC8vIOaYvuekumZhdmljb27lm77moIcKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKCJoMzo6YmVmb3JlLCBoMjo6YmVmb3JlIHtjb250ZW50OiAnICc7ZGlzcGxheTppbmxpbmUtYmxvY2t9IiwgIkFDLVN0eWxlLUZhdmljb24iLCAiaGVhZCIpOwogICAgICAgICAgICAgICAgYWRkRmF2aWNvbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGN1clNpdGUuRmF2aWNvblR5cGUpKTsgLy8g5re75YqgRmF2aWNvbuaYvuekugogICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgc2FmZVJlbW92ZSgiaW1nLkFDLWZhdmljb25UIik7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGN1clNpdGUuRmF2aWNvblR5cGUpLmZvckVhY2goKG9uZSkgPT4gewogICAgICAgICAgICAgICAgICBvbmUucmVtb3ZlQXR0cmlidXRlKCJhY19mYXZpY29uc3RhdHVzIik7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyDliqjmgIHkuIvliJLnur8KICAgICAgICAgICAgICBpZiAoIUFDQ29uZmlnLmlzQUxpbmVFbmFibGUpIHsKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKCJhLGEgZW17dGV4dC1kZWNvcmF0aW9uOm5vbmUgIWltcG9ydGFudH0iLCAiQUMtTm9MaW5lIiwgImJvZHkiKTsvLyDnp7vpmaTov5nkupvkuKrkuIvliJLnur8KICAgICAgICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCJzdHlsZVtjbGFzcz0nQUMtTm9MaW5lJ10iKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNBZHNFbmFibGUpIHsgLy8g56e76Zmk5aSa5L2Z55qE5bm/5ZGK5YaF5a65CiAgICAgICAgICAgICAgICByZW1vdmVBRF9iYWlkdV9zb2dvdSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNDb3VudGVyRW5hYmxlKSB7IC8vIOaYvuekuuiuoeaVsOWZqAogICAgICAgICAgICAgICAgYWRkQ291bnRlcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGN1clNpdGUuQ291bnRlclR5cGUpKTsKICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5BQy1Db3VudGVyVCIpLmZvckVhY2gob25lID0+IHsKICAgICAgICAgICAgICAgICAgb25lLnBhcmVudEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdTb3J0SW5kZXgnKTsKICAgICAgICAgICAgICAgICAgb25lLnJlbW92ZSgpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQUNDb25maWcuZG9EaXNhYmxlU3VnKSB7IC8vIOS4jeWQr+eUqOenu+WKqOmihOa1i1vpu5jorqRdCiAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiT1JJR0lOIiwgMiwgInd3dy5iYWlkdS5jb20iKTsKICAgICAgICAgICAgICAgIGFjU2V0Q29va2llKCJJU1NXIiwgMSk7CiAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEsICJ3d3cuYmFpZHUuY29tIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIGlmKENPTlNULnVzZUl0ZW0uSHVZYW5Nb2RlID09PSBmYWxzZSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJzdHlsZVtjbGFzcyo9J2RhcmtyZWFkZXInXSIpICE9IG51bGwpIHsKICAgICAgICAgICAgICAvLyAgIENPTlNULnVzZUl0ZW0uSHVZYW5Nb2RlID0gdHJ1ZTsKICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQmxvY2tFbmFibGUgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5TT0dPVSkgeyAvLyDlkK/nlKjlsY/olL3lip/og70tIOWvueavj+S4gOS4quaWsOWinueahOWcsOWdgOmDveimgeWkhOeQhgogICAgICAgICAgICAgICAgU2l0ZUJsb2NrLmluaXRTdHlsZSgpOwogICAgICAgICAgICAgICAgU2l0ZUJsb2NrLmluaXQoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYoZG9jdW1lbnQuYm9keSl7CiAgICAgICAgICAgICAgICBpZiAoIUFDQ29uZmlnLmlzUmlnaHREaXNwbGF5RW5hYmxlKSB7IC8vIOWPs+S+p+agj+aYvuekugogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoInNob3dSaWdodCIpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoInNob3dSaWdodCIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgewogICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3JzbyIpCiAgICAgICAgICAgICAgICBjb25zdCBpc1NwZWNpYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcnNvPi5nIikgIT09IG51bGwgLy8g5a2Y5Zyo5LiA5Liq6IqC54K55Y2z5Li6c3BlY2lhbAogICAgICAgICAgICAgICAgaWYoaXNTcGVjaWFsICE9PSBDT05TVC5pc0dvb2dsZVNwZWNpYWwgJiYgQ09OU1QuaXNHb29nbGVTcGVjaWFsID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIENPTlNULmlzR29vZ2xlU3BlY2lhbCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCJzdHlsZVtjbGFzcz0nQUMtVHdvUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtVGhyZWVQYWdlRXhTdHlsZSddLHN0eWxlW2NsYXNzPSdBQy1Gb3VyUGFnZUV4U3R5bGUnXSIpOwogICAgICAgICAgICAgICAgICAgIGFjQ3NzTG9hZEZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5pbml0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihub2RlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIG5vZGVMaXN0LmZvckVhY2goKG5vZGUpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoQ09OU1QuaXNHb29nbGVTcGVjaWFsKSB7CiAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlLmRpc3BsYXkgIT09ICdncmlkJyA/IG5vZGUuc3R5bGUuZGlzcGxheSA9ICdncmlkJzogJycKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ICE9PSAndW5zZXQnID8gbm9kZS5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JzogJycKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g54m55q6K5YWD57Sg5LiA6KGM5aSE55CGCiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjcnNvPmRpdjpub3QoLmcpPmRpdltqc21vZGVsXSIpLmZvckVhY2gob25lID0+IHsKICAgICAgICAgICAgICAgICAgb25lLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSA9ICJ1bnNldCIKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaW5zZXJ0TG9ja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFjU2V0Q29va2llKGNuYW1lLCBjdmFsdWUsIGRvbWFpbiwgZXhkYXlzKSB7CiAgICAgICAgICB0cnl7CiAgICAgICAgICAgIGV4ZGF5cyA9IGV4ZGF5cyB8fCAzMDsKICAgICAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBkb21haW4gPSAoZG9tYWluID8gImRvbWFpbj0iICsgZG9tYWluIDogIiIpICsgIjsiOwogICAgICAgICAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAoZXhkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCkpOwogICAgICAgICAgICBsZXQgZXhwaXJlcyA9ICJleHBpcmVzPSIgKyBkLnRvVVRDU3RyaW5nKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNuYW1lICsgIj0iICsgY3ZhbHVlICsgIjsgIiArIGRvbWFpbiArIGV4cGlyZXMgKyAiO3BhdGg9LyI7CiAgICAgICAgICB9Y2F0Y2goZSl7fQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBnZXROb2RlSG9zdChzaXRldHBOb2RlKSB7CiAgICAgICAgICBpZihzaXRldHBOb2RlIGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQpewogICAgICAgICAgICByZXR1cm4ge2N1ckhvc3Q6IHNpdGV0cE5vZGUuaG9zdCwgY3VyVXJsOiBzaXRldHBOb2RlLmhyZWZ9OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUpIHsKICAgICAgICAgICAgdmFyIGhyZWYgPSBudWxsOwogICAgICAgICAgICBpZiAoc2l0ZXRwTm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7CiAgICAgICAgICAgICAgaHJlZiA9IHNpdGV0cE5vZGUuZ2V0QXR0cmlidXRlKCJocmVmIikKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaHJlZiAhPSBudWxsICYmIGhyZWYuaW5jbHVkZXMoImJhaWR1LmNvbS9saW5rIikpIHsKICAgICAgICAgICAgICAvLyDlt7Lnu4/op6PmnpDlh7rmnaXkuoYKICAgICAgICAgICAgICByZXR1cm4gIHtjdXJIb3N0OiBnZXRUZXh0SG9zdChocmVmKSwgY3VyVXJsOiBocmVmfTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHtjdXJIb3N0OiBnZXRUZXh0SG9zdChzaXRldHBOb2RlLmlubmVyVGV4dCB8fCBzaXRldHBOb2RlLnRleHRDb250ZW50KSwgY3VyVXJsOiBudWxsfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEFDSGFuZGxlKCkgewogICAgICAgICAgLy8g5aSE55CG5Li76YeN5a6a5ZCRCiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5PVEhFUlMgfHwgY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkgcmV0dXJuOwogICAgICAgICAgaWYgKEFDQ29uZmlnLmlzUmVkaXJlY3RFbmFibGUpIHsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU3R5cGVfTm9ybWFsICE9PSBudWxsICYmIGN1clNpdGUuU3R5cGVfTm9ybWFsICE9PSAiIikgewogICAgICAgICAgICAgIC8vIOeZvuW6puaQnOeLl+WOu+mHjeWumuWQkS3mma7pgJrmqKHlvI/jgJDms6jmhI/kuI3og73kuLpkb2N1bWVudC5xdWVyeS4u44CRCiAgICAgICAgICAgICAgcmVzZXRVUkxOb3JtYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLlN0eXBlX05vcm1hbCkpOwogICAgICAgICAgICAgIGlmIChjaGVja0lTQmFpZHVNYWluKCkpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5zX2Zvcm0gLmluZGV4LWxvZ28tc3JjW3NyYyo9J2dpZiddLCAuc19mb3JtIC5pbmRleC1sb2dvLXNyY25ld1tzcmMqPSdnaWYnXSIpLmZvckVhY2goZnVuY3Rpb24gKHBlcikgewogICAgICAgICAgICAgICAgICBwZXIuc3JjID0gImh0dHBzOi8vcGljLnJtYi5iZHN0YXRpYy5jb20vYzg2MjU1ZTgwMjg2OTYxMzlkM2UzZTRiYjQ0YzA0N2IucG5nIjsKICAgICAgICAgICAgICAgICAgLy8g56We5aWH55qE55m+5bqm55m+5a625Y+3CiAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vaW1nc2EuYmFpZHUuY29tL2ZleC9waWMvaXRlbS84NzE4MzY3YWRhYjQ0YWVkY2M5MWFiMmJiZTFjODcwMWEwOGJmYjI2LmpwZwogICAgICAgICAgICAgICAgICAvLyBodHRwczovL2JhaWR1Lm50YW93LmNvbS9uZXdjc3MvYmFpZHUucG5nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSByZW1vdmVPbk1vdXNlRG93bkZ1bmMoKTsgLy8g56e76Zmkb25Nb3VzZURvd27kuovku7bvvIzosLfmrYzljrvph43lrprlkJEKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuTUJBSURVKSByZW1vdmVNb2JpbGVCYWlkdURpcmVjdExpbmsoKTsgLy8g5aSE55CG55m+5bqm5omL5py654mI5pys55qE6YeN5a6a5ZCR5Zyw5Z2ACiAgICAgICAgICAgIHJlbW92ZVJlZGlyZWN0TGlua1RhcmdldCgpOyAvLyDlj6rnp7vpmaTnn6XkuY7nmoTph43lrprlkJHpl67popggJiDnmb7luqblrabmnK/ph43lrprlkJHpl67popgKICAgICAgICAgICAgc2FmZVJlbW92ZSgiLnJlc190b3BfYmFubmVyIik7IC8vIOenu+mZpOeZvuW6puWPr+iDveaYvuekuueahOWKq+aMgQogICAgICAgICAgfQoKICAgICAgICAgIHRyeSB7IC8vIOaUvuWFpeW8guW4uOaNleiOt++8jOmYsuatoueUseS6jmh0bWzmj5LlhaXov4fmhaLlr7zoh7TnmoRqc+e7iOatogogICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1zdHlsZSIpLmNoZWNrZWQpIHsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lKj0nc3AtYWMtYV9mb3JjZV9zdHlsZV8nXSIpLmZvckVhY2gocGVyID0+IHsKICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgImRpc2FibGVkIik7CiAgICAgICAgICAgICAgICBwZXIucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgIuivt+W8gOWQr+iHquWumuS5ieagt+W8jyIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZSo9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfJ10iKS5mb3JFYWNoKHBlciA9PiB7CiAgICAgICAgICAgICAgICBwZXIucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgcGVyLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsICJBQy3oh6rlrprkuYnmoLflvI/lhoXlrrkiKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWJsb2NrIikuY2hlY2tlZCkgewogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNzcC1hYy1yZW1vdmVCbG9jaywgI3NwLWFjLWJsb2NrQnRuRGlzcGxheSIpLmZvckVhY2gocGVyID0+IHsKICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgImRpc2FibGVkIik7CiAgICAgICAgICAgICAgICBwZXIucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgIuivt+W8gOWQr+iHquWumuS5ieagt+W8jyIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3NwLWFjLXJlbW92ZUJsb2NrLCAjc3AtYWMtYmxvY2tCdG5EaXNwbGF5IikuZm9yRWFjaChwZXIgPT4gewogICAgICAgICAgICAgICAgcGVyLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKICAgICAgICAgICAgICAgIHBlci5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgidGl0bGUiLCAiQUMt6Ieq5Li75oum5oiq5Yqf6IO9IikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gQUN0b2dnbGVTZXR0aW5nRGlzcGxheShlKSB7CiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgLy8g5pi+56S677yf6ZqQ6JeP6K6+572u55WM6Z2iCiAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlmcmFtZS1mYXRoZXIgaWZyYW1lIikgPT09IG51bGwpIHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlmcmFtZS1mYXRoZXIiKS5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZWVuZCIsICI8aWZyYW1lIHNyYz0naHR0cHM6Ly9naGJ0bnMuY29tL2dpdGh1Yi1idG4uaHRtbD91c2VyPWxhbmdyZW4xMzUzJnJlcG89R01fc2NyaXB0JnR5cGU9c3RhciZjb3VudD10cnVlJyBmcmFtZWJvcmRlcj0nMCcgc2Nyb2xsaW5nPScwJyBzdHlsZT0naGVpZ2h0OiAyMHB4O21heC13aWR0aDogMTA4cHg7cGFkZGluZy1sZWZ0OjVweDtib3gtc2l6aW5nOiBib3JkZXItYm94O21hcmdpbi1ib3R0b206IC01cHg7ZGlzcGxheTp1bnNldCAhaW1wb3J0YW50Oyc+PC9pZnJhbWU+Iik7CiAgICAgICAgICB9CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJykgewogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBEQkNvbmZpZy5vbGRWZXJzaW9uID0gQUNDb25maWcub2xkVmVyc2lvbiA9IEdNX2luZm8uc2NyaXB0LnZlcnNpb247IC8vIOWPqumcgOimgeWGmeWHuuS4gOmDqOWIhueahOWFs+mUruaVsOaNruWNs+WPrwogICAgICAgICAgICAgIEFDU2V0VmFsdWUoIkNvbmZpZyIsIEpTT04uc3RyaW5naWZ5KERCQ29uZmlnKSk7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFjLW5ld3ZlcnNpb25EaXNwbGF5Iikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gU2hvd1NldHRpbmcoKSB7CiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5PVEhFUlMpIHJldHVybjsKICAgICAgICAgIC8vIOWmguaenOS4jeWtmOWcqOeahOivne+8jOmCo+S5iOiHquW3seWIm+W7uuS4gOS4qi1jb3B5IGZyb20gc3VwZXJQcmVsb2FkCiAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keSAhPT0gbnVsbCAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGFpbmVyIikgPT09IG51bGwpIHsKICAgICAgICAgICAgbGV0IENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBDb250YWluZXIuaWQgPSAic3AtYWMtY29udGFpbmVyIjsKICAgICAgICAgICAgQ29udGFpbmVyLmlubmVySFRNTCA9CiAgICAgICAgICAgICAgYDxkaXYgaWQ9InNwLWFjLWNvbnRlbnQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvaHRtbCI+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzcC1hYy1tYWluIj4KICAgICAgICAgICAgICAgICAgPGZpZWxkc2V0IGlkPSJzcC1hYy1hdXRvcGFnZXItZmllbGQiIHN0eWxlPSJkaXNwbGF5OmJsb2NrOyI+CiAgICAgICAgICAgICAgICAgICAgPGxlZ2VuZCBjbGFzcz0iaWZyYW1lLWZhdGhlciI+CiAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImxpbmtocmVmIiBocmVmPSJodHRwczovL3d3dy5udGFvdy5jb20vYWJvdXRzY3JpcHQuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5wYW5lbF90aXRsZSI+PC9hPgogICAgICAgICAgICAgICAgICAgIDwvbGVnZW5kPgogICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ic2V0dGluZy1tYWluIiB2LXNob3c9Im90aGVyLmN1clRhYiA9PT0gMSI+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5yZWRpcmVjdF90aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1yZWRpcmVjdCIgbmFtZT0ic3AtYWMtYV9zZXBhcmF0b3IiIHR5cGU9ImNoZWNrYm94IiAgdi1tb2RlbD0iQUNDb25maWcuaXNSZWRpcmVjdEVuYWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnJlZGlyZWN0X3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtaXNFbkxhbmciIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0VuTGFuZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZUVuX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLWFjLXNhdmVidXR0b24iIEBjbGljaz0ic2F2ZUNvbmZpZyIgY2xhc3M9InNwLWFjLXNwYW5idXR0b24gZW5kYnV0dG9uIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5va0J0bl90ZXh0IiBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlO2Zsb2F0OiByaWdodDttYXJnaW4tdG9wOiAtNnB4OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwub2tCdG5fdGV4dCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3AtYWMtcmVzZXRidXR0b24iIEBjbGljaz0iY2hhbmdlUmVzZXRUZXh0IiBAZGJsY2xpY2s9InJlc2V0Q29uZmlnIiBjbGFzcz0ic3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24iIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnJlc2V0QnRuX3RleHQiIHN0eWxlPSJwb3NpdGlvbjogcmVsYXRpdmU7ZmxvYXQ6IHJpZ2h0O21hcmdpbi10b3A6IC02cHg7IiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5yZXNldEJ0bl90ZXh0Ij48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYWRzX3RpdGxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWFkcyIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giIHYtbW9kZWw9IkFDQ29uZmlnLmlzQWRzRW5hYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYWRzX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmF1dG9wYWdlX3RpdGxlIiBjbGFzcz0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWlzQXV0b3BhZ2UiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0F1dG9wYWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYXV0b3BhZ2VfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tlbmFibGVfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtYmxvY2siIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0Jsb2NrRW5hYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tlbmFibGVfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3AtYWMtYmxvY2tkaXlidXR0b24iIGNsYXNzPSJzcC1hYy1zcGFuYnV0dG9uIiBAY2xpY2s9Im90aGVyLmN1clRhYiA9IDIiIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrRGl5QnRuX3RpdGxlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6IDVweDtjb2xvcjogIzg4ODg4ODsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrRGl5QnRuX3RleHQiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrZW5hYmxlX3RleHQiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja0F1dG9SZW1vdmVfdGl0bGUiIHYtbW9kZWw9IkFDQ29uZmlnLmlzQmxvY2tEaXNwbGF5IiBpZD0ic3AtYWMtcmVtb3ZlQmxvY2siIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tBdXRvUmVtb3ZlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrQnRuU2hvd190aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrQnRuU2hvd190aXRsZSIgIHYtbW9kZWw9IkFDQ29uZmlnLmlzQmxvY2tCdG5Ob3REaXNwbGF5IiBpZD0ic3AtYWMtYmxvY2tCdG5EaXNwbGF5IiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrQnRuU2hvd190ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3RleHQiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtc3R5bGUiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5BZHNTdHlsZUVuYWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeeZvuW6puagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImNvbnRhaW5lci1sYWJlbCBiYWlkdSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfbGFibGUiIEBjbGljaz0ibGFiZWxTaG93SGlkZUVudiI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1IiB2YWx1ZT0iMCIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV9vcmlnaW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgIG5hbWU9J3NwLWFjLWh1eWFuX3N0eWxlX2JhaWR1JyB0eXBlPSdjaGVja2JveCcgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuSHVZYW5Nb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1X2h1eWFuIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9IiI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHVsaXRlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuU3R5bGVfQmFpZHVMaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1X2JhaWR1TGl0ZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSIxIiB2LW1vZGVsPSJBQ0NvbmZpZy5iYWlkdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzFsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSIyIiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzFsaW5lX2VudGVyIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSIzIiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSI0IiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSI1IiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t55m+5bqm5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4OyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6LC35q2M5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iY29udGFpbmVyLWxhYmVsIGdvb2dsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlX2xhYmxlIiBAY2xpY2s9ImxhYmVsU2hvd0hpZGVFbnYiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfb3JpZ2luIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV9odXlhbiI+PGlucHV0IG5hbWU9InNwLWFjLWh1eWFuX3N0eWxlX2dvb2dsZSIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkh1WWFuTW9kZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlX2h1eWFuIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV9nb29nbGVMaXRlIiBzdHlsZT0iIj48aW5wdXQgbmFtZT0ic3AtYWMtZ29vZ2xlX2luX2JhaWR1bW9kZSIgdi1tb2RlbD0iQUNDb25maWcuaXNHb29sZUluQmFpZHVNb2RlRW5hYmxlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfZ29vZ2xlTGl0ZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIiB2YWx1ZT0iMSIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlXzFsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIiB2YWx1ZT0iMiIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfMWxpbmVfZW50ZXIgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfMmxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSI0IiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfM2xpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSI1IiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfNGxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3osLfmrYzmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3lv4XlupTmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgYmluZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ19sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5BZHNTdHlsZU1vZGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nX29yaWdpbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nX2h1eWFuIj48aW5wdXQgbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfYmluZyIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfaHV5YW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB2YWx1ZT0iMSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ18xbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHZhbHVlPSIyIiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ18xbGluZV9lbnRlciB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nXzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdmFsdWU9IjQiIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nXzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdmFsdWU9IjUiIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nXzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3lv4XlupTmoLflvI8tLS0tLS0tLS0tLS0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4OyI+PC9kaXY+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAmbHQ7ISZuZGFzaDsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1O+aQnOeLl+agt+W8jyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyZuZGFzaDsmZ3Q7LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImNvbnRhaW5lci1sYWJlbCBzb2dvdSI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibGFiZWxfaGlkZSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291X2xhYmxlIiBAY2xpY2s9ImxhYmVsU2hvd0hpZGVFbnYiPjwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHYtbW9kZWw9IkFDQ29uZmlnLnNvZ291LkFkc1N0eWxlTW9kZSIgdmFsdWU9IjAiIHR5cGU9InJhZGlvIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV9vcmlnaW4gfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV9odXlhbiI+PGlucHV0IG5hbWU9InNwLWFjLWh1eWFuX3N0eWxlX3NvZ291IiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV9odXlhbiB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2YWx1ZT0iMSIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfMWxpbmUgfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2YWx1ZT0iMiIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfMWxpbmVfZW50ZXIgfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2YWx1ZT0iMyIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyIgY2hlY2tlZD0iIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV8ybGluZSB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHZhbHVlPSI0IiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV8zbGluZSB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHZhbHVlPSI1IiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV80bGluZSB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICZsdDshJm5kYXNoOyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU75pCc54uX5qC35byPJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7Jm5kYXNoOyZndDstLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3puK3puK3mkJzmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgZHVjayI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja19sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5BZHNTdHlsZU1vZGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrX29yaWdpbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrX2h1eWFuIj48aW5wdXQgbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfZHVjayIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfaHV5YW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfbm9ybWFsIiBzdHlsZT0iIj48aW5wdXQgdi1tb2RlbD0iQUNDb25maWcubm9ybWFsaXplRHVjayIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja19ub3JtYWwgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHZhbHVlPSIxIiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja18xbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHZhbHVlPSIyIiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja18xbGluZV9lbnRlciB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrXzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdmFsdWU9IjQiIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrXzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdmFsdWU9IjUiIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrXzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3puK3puK3mkJzmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3lpJrlkInmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgZG9nZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV9sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5BZHNTdHlsZU1vZGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlX29yaWdpbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlX2h1eWFuIj48aW5wdXQgbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfZG9nZSIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfaHV5YW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2Vfbm9ybWFsIiBzdHlsZT0iIj48aW5wdXQgdi1tb2RlbD0iQUNDb25maWcubm9ybWFsaXplRG9nZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV9ub3JtYWwgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHZhbHVlPSIxIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV8xbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHZhbHVlPSIyIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV8xbGluZV9lbnRlciB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlXzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdmFsdWU9IjQiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlXzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdmFsdWU9IjUiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlXzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5aSa5ZCJ5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3miqTnnLzmqKHlvI/orr7nva4tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmh1eWFuTW9kZV90aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy11c2VyY29sb3IiIHYtbW9kZWw9IkFDQ29uZmlnLmlzVXNlckNvbG9yRW5hYmxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Nb2RlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibWVudS1ib3gtY29udGFpbmVyIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5odXlhbk1vZGVfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweDsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmh1eWFuQ29sb3JfdGV4dCI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9InNwLWFjLW1lbnVodXlhbkNvbG9yIiBAaW5wdXQuc3RvcD0idXNlVGhpc0h1eWFuQ29sb3IiIHYtbW9kZWw9IkFDQ29uZmlnLmRlZmF1bHRIdVlhbkNvbG9yIiB0eXBlPSJjb2xvciIgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Db2xvcl90aXRsZSIgc3R5bGU9ImN1cnNvcjogcG9pbnRlcjttYXJnaW4tdG9wOi0wLjA1cmVtO2hlaWdodDoyM3B4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJtZW51LWJveC1zbWFsbCIgZGF0YS12YWx1ZT0iI0RFRjFFRiIgQGNsaWNrLnN0b3A9InVzZVRoaXNIdXlhbkNvbG9yIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojREVGMUVGOyI+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im1lbnUtYm94LXNtYWxsIiBkYXRhLXZhbHVlPSIjRjNGMkVFIiBAY2xpY2suc3RvcD0idXNlVGhpc0h1eWFuQ29sb3IiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNGM0YyRUU7Ij4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibWVudS1ib3gtc21hbGwiIGRhdGEtdmFsdWU9IiNFNUU1RTUiIEBjbGljay5zdG9wPSJ1c2VUaGlzSHV5YW5Db2xvciIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0U1RTVFNTsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsaW5raHJlZiIgZGF0YS1ocmVmPSJodHRwczovL3d3dy5udGFvdy5jb20vY29sb3JwaWNrZXIuaHRtbCIgc3R5bGU9ImN1cnNvcjpwb2ludGVyO21hcmdpbi1yaWdodDogMTBweDsiIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuZGF0YXNldC5ocmVmKSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Db2xvck1vcmVfdGV4dCI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLUZhdmljb27lm77moIforr7nva4tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5mYXZpY29uX3RpdGxlIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0Zhdmljb25FbmFibGUiIGlkPSJzcC1hYy1mYXZpY29uIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuZmF2aWNvbl90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuZmF2aWNvbl9kZWZhdWx0SWNvbl90ZXh0Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtZmF2aWNvblVybCIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdi1tb2RlbD0iQUNDb25maWcuZGVmYXVsdEZhdmljb25VcmwiIHZhbHVlPSJodHRwczovL2FlMDEuYWxpY2RuLmNvbS9rZi9IVEIxZFJZMFg4T0QzS1ZqU1pGRnE2QW45cFhheS5qcGciIHN0eWxlPSJ3aWR0aDo1NSU7bWFyZ2luLXRvcDotMC4zZW07IiB0eXBlPSJpbnB1dCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3np7vpmaTnmb7luqbmkJzntKLpooTmtYstLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zZWFyY2hPcmlnaW5fdGl0bGUiIHYtbW9kZWw9IkFDQ29uZmlnLmRvRGlzYWJsZVN1ZyIgaWQ9InNwLWFjLXN1Z19vcmlnaW4iIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zZWFyY2hPcmlnaW5fdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6ZmE5YqgN+OAgTjjgIE5LS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLXJpZ2h0IiB2LW1vZGVsPSJBQ0NvbmZpZy5pc1JpZ2h0RGlzcGxheUVuYWJsZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zaG93UmlnaHRfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1jb3VudGVyIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0NvdW50ZXJFbmFibGUiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5oaW50U2hvd0NvdW50ZXJfdGV4dCI+e3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNob3dDb3VudGVyX3RleHQgfX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWFsaW5lIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0FMaW5lRW5hYmxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNob3dBTGluZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3oh6rlrprkuYnmoLflvI/lhoXlrrktLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtdXNlcnN0eWxlIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc1VzZXJTdHlsZUVuYWJsZSIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zaG93VXNlclN0eWxlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHYtaWY9IkxpdmVDb25maWcuY3NzX2hhc19lcnJvciIgc3R5bGU9ImNvbG9yOiByZWQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+ZXJyb3I8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3AtYWMtc3BhbmJ1dHRvbiIgQGNsaWNrPSJyZXNldENTUyIgdGl0bGU9IlJlc2V0IENTUyIgdi10ZXh0PSJyZXNldENTU190ZXh0Ij48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9InNwLWFjLXVzZXJzdHlsZVRFWFQiIHYtbW9kZWw9IkFDQ29uZmlnLlVzZXJTdHlsZVRleHQiIEBrZXl1cD0ibG9hZEN1c3RvbVN0eWxlIiBAY2hhbmdlPSJsb2FkQ3VzdG9tU3R5bGUiIEBwYXN0ZT0ibG9hZEN1c3RvbVN0eWxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiBzdHlsZT0id2lkdGg6ODUlO2hlaWdodDogNjZweDttYXJnaW4tbGVmdDozMHB4OyIgdHlwZT0iaW5wdXQiID48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImxpbmtocmVmIiB0YXJnZXQ9Il9ibGFuayIgOmhyZWY9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jb250YWN0TWVfdXJsIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jb250YWN0TWVfdGV4dCI+PC9hPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5oum5oiq5Z+f5ZCN6K6+572ucGFuZWwtLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9InNldHRpbmctc2Vjb25kIiB2LXNob3c9Im90aGVyLmN1clRhYiA9PT0gMiI+CiAgICAgICAgICAgICAgICAgICAgICA8bGkgc3R5bGU9J21hcmdpbi1ib3R0b206IDhweCAhaW1wb3J0YW50Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0nc3AtYWMtYmxvY2tkaXlidXR0b24tYmFjaycgQGNsaWNrPSJvdGhlci5jdXJUYWI9MSxvdGhlci5zaG93QmxvY2tMaXN0QXJlYSA9IGZhbHNlIiBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbic+e3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJhY2tCdG5fdGV4dCB9fTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJsb2NrTGFiZWxfdGV4dCB9fX0KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGkgc3R5bGU9J21hcmdpbi1ib3R0b206IDhweCAhaW1wb3J0YW50Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1ibG9ja2RpeWJ1dHRvbi1kaXlsaXN0JyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbicgQGNsaWNrPSJvdGhlci5zaG93QmxvY2tMaXN0QXJlYSA9ICFvdGhlci5zaG93QmxvY2tMaXN0QXJlYSIgdi10ZXh0PSJjYWxfZGl5QmxvY2tMaXN0QnRuIj48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSdhYy1ibG9ja0xpc3QnIEBjbGljaz0icmVtb3ZlQUJsb2NrTGlzdEl0ZW0iIHN0eWxlPSdtYXgtaGVpZ2h0OjYwdmg7b3ZlcmZsb3cteTogc2Nyb2xsOyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCB2LXNob3c9IiFvdGhlci5zaG93QmxvY2tMaXN0QXJlYSIgdi1odG1sPSJnZXRCbG9ja0xpc3QiPjwvdWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSdhYy1ibG9ja0JveENvbicgc3R5bGU9J21heC1oZWlnaHQ6IDYwdmg7dGV4dC1hbGlnbjogY2VudGVyO21hcmdpbi1sZWZ0OiAyNnB4Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSB2LXNob3c9Im90aGVyLnNob3dCbG9ja0xpc3RBcmVhIiAgQGtleXVwPSJzeW5jVG9CbG9ja0xpc3QiIEBjaGFuZ2U9InN5bmNUb0Jsb2NrTGlzdCIgQHBhc3RlPSJzeW5jVG9CbG9ja0xpc3QiIHJvd3M9IjIwIiB2LXRleHQ9IkFDQ29uZmlnLlVzZXJCbG9ja0xpc3Quam9pbignXFxuJykiPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYWRkQmxvY2tMYWJlbF90ZXh0IH19PGlucHV0IGNsYXNzPSJzcC1hYy1hZGRSdWxlT25lIiBAa2V5dXAuZW50ZXI9ImNrQWRkUnVsZSIgdi1tb2RlbD0ib3RoZXIuYWRkQmxvY2tJdGVtIiBzdHlsZT0nd2lkdGg6NTUlOyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1hZGRSdWxlYnV0dG9uJyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24nIEBjbGljaz0iY2tBZGRSdWxlIiBzdHlsZT0ncG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6IDE3cHg7JyB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zZXR0aW5nX3BhbmVsX3NlY29uZC5hZGRCdG5MYWJlbF90ZXh0Ij7mlrDlop48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgPHVsIHYtc2hvdz0ib3RoZXIuY3VyVGFiID09PSAzIiBzdHlsZT0id2lkdGg6IDMwMHB4Ij4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlhbG9nLWJvZHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1ibG9ja2RpeWJ1dHRvbi1iYWNrJyBAY2xpY2s9Im90aGVyLmN1clRhYj0xIiBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbic+6L+U5ZuePC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+5L2/55So6K+05piO77yaPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pi08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPjEuIOacrOiEmuacrOS4jeWMheWQq+S7u+S9leW5v+WRiuWGheWuue+8jOS5n+aXoOaEj+S6juegtOWdj+e9keermeeOsOacieWKn+iDveeahOWujOaVtOaAp++8jOS7heW4jOacm+mAmui/h+S4gOS6m+aYvuekuuaViOaenOeahOWPmOabtOiDveabtOWlveeahOeVmeWtmOWvueW6lOe9keermeeOsOacieeahOeUqOaIt++8jOS4gOWumueoi+W6puS4iuabtOWlveWcsOS/neivgeS6huebruagh+e9keermeeahOaXpea0u+OAgjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyLiDlkIzml7bmnKzohJrmnKzkuK3miYDmnInlip/og73lnYfkuLrlrabkuaDlkoznoJTnqbZ3ZWLliY3nq6/mioDmnK/nmoTlj5HlsZXogIzlvIDlj5HvvIzluIzmnJvkuLrlrabkuaDliY3nq6/mioDmnK/nmoTnoJTnqbbkurrlkZjmj5DkvpvkuIDkuKrmm7Tlpb3nmoTlj4LogIPku6PnoIHvvIzkv4Pov5t3ZWLliY3nq6/mioDmnK/nmoTlj5HlsZXvvIzkvr/kuo7mioDmnK/nmoTlrabkuaDlkozkuqTmtYHvvIzmnKzohJrmnKzkuI3mtonlj4rlr7nnvZHnq5nmupDnoIHnmoTosIPor5Xlkozkv67mlLnvvIzlm6Dkvb/nlKjmnKzohJrmnKzov5vooYzpnZ7ms5XnlKjpgJTkuI7mnKzohJrmnKzml6DlhbPjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3kv53lrZjjgIHlj5bmtojmjInpkq4tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3AtYWMtY2FuY2VsYnV0dG9uIiBjbGFzcz0ic3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24iIEBjbGljaz0iY2xvc2VQYW5lbCIgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuY2FuY2VsQnRuX3RleHQiIHN0eWxlPSJwb3NpdGlvbjogcmVsYXRpdmU7ZmxvYXQ6IGxlZnQ7IiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jYW5jZWxCdG5fdGV4dCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1hYy1zYXZlYnV0dG9uIiByZWY9ImJvdHRvbVNhdmVCdXR0b24iIEBjbGljaz0ic2F2ZUNvbmZpZyIgY2xhc3M9InNwLWFjLXNwYW5idXR0b24gZW5kYnV0dG9uIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5va0J0bl90ZXh0IiBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlO2Zsb2F0OiByaWdodDsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLm9rQnRuX3RleHQiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPC9maWVsZHNldD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChDb250YWluZXIpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGxldCBhbGxOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5BQy1mYXZpY29uVCwgLkFDLUNvdW50ZXJUIik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChhbGxOb2Rlc1tpXS5nZXRBdHRyaWJ1dGUoJ2FjQ2xpY2snKSA9PT0gbnVsbCkgewogICAgICAgICAgICAgIGFsbE5vZGVzW2ldLnNldEF0dHJpYnV0ZSgnYWNDbGljaycsICcxJyk7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGFsbE5vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSk7CiAgICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkgI3NwLWFjLWNvbnRhaW5lciIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOyAvLyDpmLvmraLngrnlh7voh6rouqvnmoTml7blgJnlhbPpl60KICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHNhZmVGdW5jdGlvbiggKCkgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRlbnQiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc0VsZW1lbnRWaXNpYmxlKGRvbSkgewogICAgICAgICAgY29uc3Qgc2NyVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgIHJldHVybiAhKHNjclRvcCA+IChkb20ub2Zmc2V0VG9wICsgZG9tLm9mZnNldEhlaWdodCkgfHwgKHNjclRvcCArIHdpbmRvdy5pbm5lckhlaWdodCkgPCBkb20ub2Zmc2V0VG9wKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZU1vYmlsZUJhaWR1RGlyZWN0TGluaygpIHsKICAgICAgICAgIGxldCBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNwYWdlICNwYWdlLWJkICNyZXN1bHRzIC5yZXN1bHQ6bm90KFthY19yZWRpcmVjdFN0YXR1c10pIik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBjdXJOb2RlID0gbm9kZXNbaV07CiAgICAgICAgICAgIHNhZmVGdW5jdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgbGV0IGN1ckRhdGEgPSBKU09OLnBhcnNlKGN1ck5vZGUuZGF0YXNldC5sb2cucmVwbGFjZSgvJy9nbSwgIlwiIikpOwogICAgICAgICAgICAgIGxldCB0cnVlTGluayA9IGN1ckRhdGEubXU7CiAgICAgICAgICAgICAgY3VyTm9kZS5xdWVyeVNlbGVjdG9yKCJhcnRpY2xlIikuc2V0QXR0cmlidXRlKCJybC1saW5rLWhyZWYiLCB0cnVlTGluayk7CiAgICAgICAgICAgICAgY3VyTm9kZS5xdWVyeVNlbGVjdG9yQWxsKCJhIikuZm9yRWFjaChmdW5jdGlvbiAocGVyKSB7CiAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJocmVmIiwgdHJ1ZUxpbmspOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIiwgIjEiKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZU9uTW91c2VEb3duRnVuYygpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxldCByZXN1bHROb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5nIC5yYyBhLCAjcnMsICNyc28gLmcgYSIpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbGV0IG9uZSA9IHJlc3VsdE5vZGVzW2ldOwogICAgICAgICAgICAgIG9uZS5zZXRBdHRyaWJ1dGUoIm9ubW91c2Vkb3duIiwgIiIpOyAvLyDosLfmrYzljrvph43lrprlkJHlubLmibAKICAgICAgICAgICAgICBvbmUuc2V0QXR0cmlidXRlKCJ0YXJnZXQiLCAiX2JsYW5rIik7IC8vIOiwt+atjOmTvuaOpeaWsOagh+etvuaJk+W8gAogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlUmVkaXJlY3RMaW5rVGFyZ2V0KCkgewogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuWkhJSFUpIHsKICAgICAgICAgICAgbGV0IG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLlJpY2hUZXh0IGFbaHJlZio9Jy8vbGluay56aGlodS5jb20vP3RhcmdldCddIik7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBsZXQgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KG5vZGVzW2ldLmhyZWYucmVwbGFjZSgvaHR0cHM/OlwvXC9saW5rXC56aGlodVwuY29tXC9cP3RhcmdldD0vLCAiIikpOwogICAgICAgICAgICAgIG5vZGVzW2ldLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVV9YVUVTSFUpIHsKICAgICAgICAgICAgbGV0IHhub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImFbaHJlZio9J3NjX3Z1cmw9aHR0cCddIik7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBpIDwgeG5vZGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgbGV0IHh1cmwgPSBnZXRVcmxBdHRyaWJ1dGUoeG5vZGVzW2pdLmhyZWYsICJzY192dXJsIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgeG5vZGVzW2pdLmhyZWYgPSB4dXJsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDmj5Dlj5Z1cmzlhYPntKDnmoTlj4LmlbDlgLwKICAgICAgICBmdW5jdGlvbiBnZXRVcmxBdHRyaWJ1dGUodXJsLCBhdHRyaWJ1dGUsIG5lZWREZWNvZGUpIHsKICAgICAgICAgIGxldCBzZWFyY2hWYWx1ZVMgPSAodXJsLnN1YnN0cigxKSArICIiKS5zcGxpdCgiJiIpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWFyY2hWYWx1ZVMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGV0IGtleV92YWx1ZSA9IHNlYXJjaFZhbHVlU1tpXS5zcGxpdCgiPSIpOwogICAgICAgICAgICBsZXQgcmVnID0gbmV3IFJlZ0V4cCgiXiIgKyBhdHRyaWJ1dGUgKyAiJCIpOwogICAgICAgICAgICBpZiAocmVnLnRlc3Qoa2V5X3ZhbHVlWzBdKSkgewogICAgICAgICAgICAgIGxldCBzZWFyY2hXb3JkcyA9IGtleV92YWx1ZVsxXTsKICAgICAgICAgICAgICByZXR1cm4gbmVlZERlY29kZSA/IGRlY29kZVVSSUNvbXBvbmVudChzZWFyY2hXb3JkcykgOiBzZWFyY2hXb3JkczsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzZXRVUkxOb3JtYWwobGlzdCkgewogICAgICAgICAgLy8g5rOo5oSP5pyJ6YeN5aSN55qE5Zyw5Z2A77yM5bC96YeP5a+56YeN5aSN5Zyw5Z2A6L+b6KGM5Y676YeNCiAgICAgICAgICB2YXIgaGFzRGVhbEhyZWZTZXQgPSBuZXcgU2V0KCk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgLy8g5q2k5pa55rOV5piv5byC5q2l77yM5pWF5Zyo57uT5p2f55qE5pe25YCZ5L2/55SoaeS8muWHuumXrumimC3kuKXph40hCiAgICAgICAgICAgIC8vIOmHh+eUqOmXreWMheeahOaWueazleadpei/m+ihjOaVsOaNrueahOS8oOmAkgogICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGxpc3RbaV07CiAgICAgICAgICAgIGxldCBjdXJocmVmID0gY3VyTm9kZS5ocmVmOwogICAgICAgICAgICBpZiAobGlzdFtpXSAhPT0gbnVsbCAmJiBsaXN0W2ldLmdldEF0dHJpYnV0ZSgiYWNfcmVkaXJlY3RTdGF0dXMiKSA9PT0gbnVsbCkgewogICAgICAgICAgICAgIGxpc3RbaV0uc2V0QXR0cmlidXRlKCJhY19yZWRpcmVjdFN0YXR1cyIsICIwIik7CiAgICAgICAgICAgICAgbGV0IGxlbjEgPSBoYXNEZWFsSHJlZlNldC5zaXplOwogICAgICAgICAgICAgIGhhc0RlYWxIcmVmU2V0LmFkZChjdXJocmVmKTsKICAgICAgICAgICAgICBsZXQgbGVuMiA9IGhhc0RlYWxIcmVmU2V0LnNpemU7CiAgICAgICAgICAgICAgaWYgKGxlbjEgPT09IGxlbjIpIGNvbnRpbnVlOyAvLyDor7TmmI7mlbDmja7lt7Lnu4/lpITnkIbov4fvvIzlrZjlnKjnm7jlkIznmoTorrDlvZUKICAgICAgICAgICAgICBpZiAoY3VyaHJlZi5pbmNsdWRlcygid3d3LmJhaWR1LmNvbS9saW5rIikgfHwKICAgICAgICAgICAgICAgIGN1cmhyZWYuaW5jbHVkZXMoIm0uYmFpZHUuY29tL2Zyb20iKSB8fAogICAgICAgICAgICAgICAgY3VyaHJlZi5pbmNsdWRlcygid3d3LnNvZ291LmNvbS9saW5rIikgfHwKICAgICAgICAgICAgICAgIGN1cmhyZWYuaW5jbHVkZXMoInNvLmNvbS9saW5rIikpIHsKICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoY19jdXJub2RlLCBjX2N1cmhyZWYpIHsKICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IGNfY3VyaHJlZi5yZXBsYWNlKC9eaHR0cDovLCAiaHR0cHM6Iik7CiAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmICF1cmwuaW5jbHVkZXMoImVxaWQiKSkgewogICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+eZvuW6pu+8jOW5tuS4lOayoeacieW4puacieino+aekOWPguaVsO+8jOmCo+S5iOaJi+WKqOW4puS4igogICAgICAgICAgICAgICAgICAgIHVybCA9IHVybCArICImd2Q9JmVxaWQ9IjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBsZXQgZ21SZXF1ZXN0Tm9kZSA9IEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAvLyBmcm9tOiAiYWN4aHIiLAogICAgICAgICAgICAgICAgICAgIGV4dERhdGE6IGNfY3VyaHJlZiwgLy8g55So5LqO5omp5bGVCiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyJBY2NlcHQiOiAiKi8qIiwgIlJlZmVyZXIiOiBjX2N1cmhyZWYucmVwbGFjZSgvXmh0dHA6LywgImh0dHBzOiIpfSwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDgwMDAsCiAgICAgICAgICAgICAgICAgICAgb25yZWFkeXN0YXRlY2hhbmdlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsgLy8gTUFSSyDmnInml7blgJnov5nkuKrlh73mlbDmoLnmnKzkuI3ov5vmnaUgLSDosIPor5XnmoTpl67popggLSB0aW1lb3V0CiAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5yZXNwb25zZVRleHQgfHwgcmVzcG9uc2UucmVzcG9uc2VIZWFkZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeUseS6juaYr+eJueauiui/lOWbni3lubbkuJTlpb3mkJwt5pCc54uXLeeZvuW6pumDveaYr+i/meS4quagvOW8j++8jOaVheaPkOWHugogICAgICAgICAgICAgICAgICAgICAgICBEZWFsUmVkaXJlY3QoZ21SZXF1ZXN0Tm9kZSwgY19jdXJocmVmLCByZXNwb25zZS5yZXNwb25zZVRleHQsICJVUkw9JyhbXiddKyknIikKICAgICAgICAgICAgICAgICAgICAgICAgLy8g6L+Z5Liq5piv5Zyo5LiK6Z2i5peg5rOV5aSE55CG55qE5oOF5Ya15LiL77yM5aSH55So55qEIHRtLWZpbmFsdXJsZGhkZyAgdG0tZmluYWx1cmxtZmRoCgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucmVzcG9uc2VIZWFkZXJzLmluY2x1ZGVzKCJ0bS1maW5hbHVybCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlbFVSTCA9IFJlZ19HZXQocmVzcG9uc2UucmVzcG9uc2VIZWFkZXJzLCAidG0tZmluYWx1cmxcXHcrOiAoW15cXHNdKykiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVsVVJMID09PSBudWxsIHx8IHJlbFVSTCA9PT0gIiIgfHwgcmVsVVJMLmluY2x1ZGVzKCJ3d3cuYmFpZHUuY29tL3NlYXJjaC9lcnJvciIpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgRGVhbFJlZGlyZWN0KGdtUmVxdWVzdE5vZGUsIGNfY3VyaHJlZiwgcmVsVVJMKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KShjdXJOb2RlLCBjdXJocmVmKTsgLy/kvKDpgJLml6fnmoTnvZHlnYDov4fljrvvvIzor7vkvZxjX2N1cmhyZWYKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gY3VyTm9kZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCAoKT0+IHsKICAgICAgICAgICAgICAvLyAgIGNvbnN0IEFCS2V5ID0gUmVkaXJlY3RNYXAuZ2V0KGN1ck5vZGUuaHJlZik7IC8vIOWOn+WniyAtPiDkuYvlkI7nmoTpk77mjqUKICAgICAgICAgICAgICAvLyAgIGlmKEFCS2V5KSBjdXJOb2RlLmhyZWYgPSBBQktleTsKICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgIC8vIGN1ck5vZGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCAoKT0+IHsKICAgICAgICAgICAgICAvLyAgIGNvbnN0IEJBS2V5ID0gUmVkaXJlY3RNYXAuZ2V0KGN1ck5vZGUuaHJlZik7IC8vIOS5i+WQjueahOi/nuaOpSAtPiDljp/lp4sKICAgICAgICAgICAgICAvLyAgIGlmKEJBS2V5KSBjdXJOb2RlLmhyZWYgPSBCQUtleTsKICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaGFzRGVhbEhyZWZTZXQuc2l6ZSA+IDAgJiYgbGlzdC5sZW5ndGggLSBoYXNEZWFsSHJlZlNldC5zaXplID4gMCkgY29uc29sZS5sb2coIuS4ouW8g+aOiSIsIGxpc3QubGVuZ3RoIC0gaGFzRGVhbEhyZWZTZXQuc2l6ZSwgIuS4qumHjeWkjemTvuaOpSIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIERlYWxSZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXF1ZXN0LCBjdXJOb2RlSHJlZiwgcmVzcFRleHQsIFJlZ1RleHQpIHsKICAgICAgICAgIGlmIChyZXNwVGV4dCA9PT0gbnVsbCB8fCB0eXBlb2YgKHJlc3BUZXh0KSA9PT0gInVuZGVmaW5lZCIpIHJldHVybjsKICAgICAgICAgIGxldCByZXN1bHRSZXNwb25zZVVybCA9ICIiOwogICAgICAgICAgaWYgKFJlZ1RleHQgIT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHRSZXNwb25zZVVybCA9IFJlZ19HZXQocmVzcFRleHQsIFJlZ1RleHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0UmVzcG9uc2VVcmwgPSByZXNwVGV4dDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHRSZXNwb25zZVVybCAhPT0gbnVsbCAmJiByZXN1bHRSZXNwb25zZVVybCAhPT0gIiIgJiYgIXJlc3VsdFJlc3BvbnNlVXJsLmluY2x1ZGVzKCJ3d3cuYmFpZHUuY29tL2xpbmsiKSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLlNPR09VKSBjdXJOb2RlSHJlZiA9IGN1ck5vZGVIcmVmLnJlcGxhY2UoL15odHRwczpcL1wvd3d3LnNvZ291LmNvbS8sICIiKTsKICAgICAgICAgICAgICBsZXQgaG9zdCA9IGdldFRleHRIb3N0KHJlc3VsdFJlc3BvbnNlVXJsKTsKICAgICAgICAgICAgICAvLyBSZWRpcmVjdE1hcC5zZXQoY3VyTm9kZUhyZWYsIHJlc3VsdFJlc3BvbnNlVXJsKTsgLy8g6L+b6KGM5LiA5Liq5pWw5o2u5YWz6IGUCiAgICAgICAgICAgICAgLy8gUmVkaXJlY3RNYXAuc2V0KHJlc3VsdFJlc3BvbnNlVXJsLCBjdXJOb2RlSHJlZik7IC8vIOi/m+ihjOS4gOS4quaVsOaNruWFs+iBlAogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIipbaHJlZio9JyIgKyBjdXJOb2RlSHJlZiArICInXSIpLmZvckVhY2goIHBlciA9PiB7CiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlTm9kZSA9IHBlcjsKCiAgICAgICAgICAgICAgICBjaGFuZ2VOb2RlLnNldEF0dHJpYnV0ZSgiYWNfcmVkaXJlY3RTdGF0dXMiLCAiMiIpOwogICAgICAgICAgICAgICAgY2hhbmdlTm9kZS5ocmVmID0gcmVzdWx0UmVzcG9uc2VVcmw7CiAgICAgICAgICAgICAgICAvLyBjaGFuZ2VOb2RlLnNldEF0dHJpYnV0ZSgiZGF0YS1vcmlocmVmIiwgY2hhbmdlTm9kZS5ocmVmKTsKICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VOb2RlLmhhc0F0dHJpYnV0ZSgibWV0YSIpKSB7CiAgICAgICAgICAgICAgICAgIGNoYW5nZU5vZGUuc2V0QXR0cmlidXRlKCJtZXRhIiwgaG9zdCk7CiAgICAgICAgICAgICAgICAgIGNoYW5nZU5vZGUuZGF0YXNldC5ob3N0ID0gaG9zdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VOb2RlLnRleHQgJiYgY2hhbmdlTm9kZS50ZXh0Lmxlbmd0aCA8IDEwICYmICFjaGFuZ2VOb2RlLnRleHQuaW5jbHVkZXMoaG9zdCkKICAgICAgICAgICAgICAgICAgLy8g5LiN6IO95pivcmVkaXJlY3QgdXJsIOS4jeiDveaYr2gyXGgz5LiL55u05bGe6ZO+5o6lCiAgICAgICAgICAgICAgICAgICYmICFjaGFuZ2VOb2RlLnBhcmVudEVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJoIikpIHsKICAgICAgICAgICAgICAgICAgY2hhbmdlTm9kZS5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZUVuZCIsICImbmJzcDstJm5ic3A7IiArIGhvc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgIG90aGVyRGF0YS5vdGhlci5jdXJIb3N0cy5hY3B1c2goaG9zdCArICIjIyMiICsgcmVzdWx0UmVzcG9uc2VVcmwpOwogICAgICAgICAgICAgIHJlcXVlc3QuYWJvcnQoKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQURfYmFpZHVfc29nb3UoKSB7IC8vIOenu+mZpOe9keermeiHquacieW5v+WRigogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUpIHsKCiAgICAgICAgICAgIC8vIOenu+mZpHNoYWRvd0RPTeW5v+WRiu+8m+aQnOe0ouWFs+mUruWtl++8mua3mOWune+8m+eEtuWQjueCueWHu+aQnOe0ouahhu+8jOW5v+WRiuS8muWkmuasoemHjeeOsHNoYWRvd2RvbQogICAgICAgICAgICBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICQoJy5jLWNvbnRhaW5lciA+Pj4gLmMtY29udGFpbmVyJykuaGFzKCcuZjEzPnNwYW46c3RhcnRzLXdpdGgoIuW5v+WRiiIpJykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g56e76Zmk5Y+z5L6n5qCP5bm/5ZGKCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X3JpZ2h0JykvZGl2Wy4vL2Fbc3RhcnRzLXdpdGgodGV4dCgpLCAn5bm/5ZGKJyldXSIpOwogICAgICAgICAgICAvLyDnp7vpmaTmoIflh4blub/lkYoKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2NvbnRlbnRfbGVmdCcpL2RpdlsuLy9zcGFuW2NvbnRhaW5zKHRleHQoKSwgJ+W5v+WRiicpXV0iKTsKICAgICAgICAgICAgLy8g56e76Zmk5qCH5YeG5bm/5ZGKIC0g5pawCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X2xlZnQnKS9kaXZbLi8vYVt0ZXh0KCk9J+W5v+WRiiddXSIpOwogICAgICAgICAgICAvLyDnp7vpmaTlj7PkvqfmoI/pobbpg6gt5bqV6YOo5peg55So5bm/5ZGKCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X3JpZ2h0JykvYnIiKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2NvbnRlbnRfcmlnaHQnKS9kaXZbbm90KEBpZCldIik7CiAgICAgICAgICAgIC8vIOenu+mZpOmhtumDqOWPr+iDveWHuueOsOeahCAi5Li65oKo5o6o6I2QIgogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgnY29udGVudF9sZWZ0JykvL2Rpdltjb250YWlucyhAY2xhc3MsICdfcnMnKV0iKTsKCiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuTUJBSURVKSB7CiAgICAgICAgICAgIC8qKioq56e76Zmk5omL5py65qih5byP5LiK55qE6YOo5YiG5bm/5ZGKKioqKi8KICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ3BhZ2UtYmQnKS9kaXZbbm90KGNvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdCcpKV0iKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ3BhZ2UtYmQnKS9kaXZbbm90KEBjbGFzcyldIik7CiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoIi8vZGl2W0BjbGFzcz0nbmEtbGlrZS1jb250YWluZXInXSIpOwogICAgICAgICAgICAvLyBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyAgICQoJyNwYWdlLWJkICNyZXN1bHRzPmRpdjpub3QoW2NsYXNzKj0icmVzdWx0Il0pJykucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAvLyBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyAgICQoJyNwYWdlLWJkICNyZXN1bHRzPmRpdjpub3QoW2NsYXNzXSknKS5yZW1vdmUoKTsKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU08pIHsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiI3NvX2t3LWFkIik7CiAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNtLXNwcmVhZC1sZWZ0Iik7CiAgICAgICAgICAgIC8vIOenu+mZpOaQnOe0ouS4reW6lemDqOW5v+WRigogICAgICAgICAgICBzYWZlUmVtb3ZlKCIjbS1zcHJlYWQtYm90dG9tIik7CiAgICAgICAgICAgIC8vIOenu+mZpOWPs+S+p+agj+mhtumDqOW5v+WRigogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgncmlnaHR0b3BfYm94JykvL2xpWy4vL3NwYW5bY29udGFpbnModGV4dCgpLCAn5bm/5ZGKJyldXSIpOwogICAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIHsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiLmJfYWQiKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2JfcmVzdWx0cycpL2xpWy4vZGl2W0BjbGFzcz0nYWRfZmxzJ11dIiwgdHJ1ZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSB7CiAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNib3R0b21hZHMiKTsKICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAkKCdkaXZbYXJpYS1sYWJlbD0i5bm/5ZGKIl0nKS5yZW1vdmUoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRDb3VudGVyKGNpdGVMaXN0KSB7CiAgICAgICAgICBsZXQgY3NzVGV4dCA9ICJwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjE7bWFyZ2luLXJpZ2h0OjRweDtkaXNwbGF5OmlubGluZS1ibG9jaztjb2xvcjp3aGl0ZTtmb250LWZhbWlseTon5b6u6L2v6ZuF6buRJztmb250LXNpemU6MTZweDt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoyMnB4O2xpbmUtaGVpZ2h0OjIycHg7Ym9yZGVyLXJhZGl1czo1MCU7IjsKICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2l0ZUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGV0IGN1ciA9IGNpdGVMaXN0W2ldCiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY3VyLmdldEF0dHJpYnV0ZSgnU29ydEluZGV4Jyk7CiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gbnVsbCB8fCB0eXBlb2YgKGluZGV4KSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICBjdXIuc2V0QXR0cmlidXRlKCdTb3J0SW5kZXgnLCBDT05TVC5zb3J0SW5kZXgpOwogICAgICAgICAgICAgIGN1ci5pbm5lciA9IGN1ci5pbm5lckhUTUw7CiAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICI8ZW0gY2xhc3M9J0FDLUNvdW50ZXJUJyBzdHlsZT0iICsgY3NzVGV4dCArICI+IiArIENPTlNULnNvcnRJbmRleCArICI8L2VtPiI7CiAgICAgICAgICAgICAgY3VyLmlubmVySFRNTCA9IGRpdi5pbm5lckhUTUwgKyBjdXIuaW5uZXI7CiAgICAgICAgICAgICAgQ09OU1Quc29ydEluZGV4Kys7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc3QgY3VyQ291bnRlciA9IGN1ci5xdWVyeVNlbGVjdG9yKCIuQUMtQ291bnRlclQiKQogICAgICAgICAgICAgIGNvbnN0IG9yaUluZGV4ID0gY3VyQ291bnRlci5pbm5lclRleHQKICAgICAgICAgICAgICBjb25zdCBjaGVja1ZhbHVlID0gKGkgKyAxKSAlIDEwMDsKICAgICAgICAgICAgICAvLyDmlbDmja7lgLzkuI3lkIwKICAgICAgICAgICAgICAvLyDmlbDmja7msqHmnInooqvnv7vor5EKICAgICAgICAgICAgICBpZiAoK2luZGV4ICE9PSBjaGVja1ZhbHVlICYmICEvXlxkKyQvLnRlc3Qob3JpSW5kZXgpKSB7IC8vIOaMiemcgOabtOaWsAogICAgICAgICAgICAgICAgY3VyQ291bnRlci5pbm5lclRleHQgPWNoZWNrVmFsdWU7CiAgICAgICAgICAgICAgICBjdXIuc2V0QXR0cmlidXRlKCdTb3J0SW5kZXgnLCBjaGVja1ZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBIb3N0UmVnID0gbmV3IFJlZ0V4cCgvKGh0dHBzPzpcL1wvKT8oW14vXHNdKykvaSk7CgogICAgICAgIGZ1bmN0aW9uIGdldFRleHRIb3N0KHNiZWZvcmUpIHsKICAgICAgICAgIHNiZWZvcmUgPSAoc2JlZm9yZSAmJiBzYmVmb3JlLnRyaW0oKSkucmVwbGFjZSgvXHMtXHNcZHs0fS1cZHsxLDJ9LVxkezEsMn0vLCAiIikgfHwgIiI7CiAgICAgICAgICBsZXQgc2VuZDsKICAgICAgICAgIGxldCByZXN1bHQgPSBzYmVmb3JlLnNwbGl0KCctJyk7CiAgICAgICAgICAvLyAtLeaQnOeLl+eZvuW6puS4k+eUqO+8m+WmguaenOesrOS4gOS4quaYr+S4reaWh+eahOivne+8jOWcsOWdgOWwseaYr+esrOS6jOS4qgogICAgICAgICAgaWYgKChyZXN1bHQubGVuZ3RoID4gMSAmJiBuZXcgUmVnRXhwKCJbXFx1NEUwMC1cXHU5RkZGXSsiLCAiZyIpLnRlc3Qoc2JlZm9yZSkpICYmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVIHx8IGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpKSB7CiAgICAgICAgICAgIHNiZWZvcmUgPSByZXN1bHRbMV07CiAgICAgICAgICB9CiAgICAgICAgICAvLyDmraTml7ZzYmVmb3Jl5Yeg5LmO5piv562J5LqO572R5Z2A5LqG77yM5L2G5piv5pyJ5pe25YCZ5Lya5pyJ5aSa55qE56m65qC877yM5aSa55qE5YaF5a6577yM5aSa55qE5YmN57yAaHR0cO+8jOWkmuS9meeahOi3r+W+hAogICAgICAgICAgbGV0IHJlcyA9IEhvc3RSZWcuZXhlYyhzYmVmb3JlKTsKICAgICAgICAgIHNlbmQgPSAocmVzICYmIHJlc1syXS50cmltKCkpIHx8ICIiOwogICAgICAgICAgLy8gc2VuZCA9IHNiZWZvcmUucmVwbGFjZSgvKFwvW14vXSp8XHMqKS8sICIiKS5yZXBsYWNlKC88W14+XSo+L2csICIiKS5yZXBsYWNlKC9odHRwcz86XC9cLy9nLCAiIikucmVwbGFjZSgvPFwvP3N0cm9uZz4vZywgIiIpLnJlcGxhY2UoLzxcLz9iPi9nLCAiIikucmVwbGFjZSgvPD8+Py9nLCAiIikucmVwbGFjZSgvKCB8XC8pLiovZywgIiIpLnJlcGxhY2UoL1wuXC4uKi8sICIiKTsKICAgICAgICAgIGlmIChzZW5kID09PSAiIikgcmV0dXJuIG51bGw7CiAgICAgICAgICBpZiAoc2VuZC5pbmRleE9mKCIuIikgPCAwKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGlmIChzZW5kLmluZGV4T2YoIuKGtSIpID49IDApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHNlbmQudHJpbSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkRmF2aWNvbihjaXRlTGlzdCkgewogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuRE9HRSkgewogICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2l0ZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGNpdGVMaXN0W2luZGV4XS5nZXRBdHRyaWJ1dGUoImFjX2Zhdmljb25TdGF0dXMiKSkgewogICAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBjaXRlTGlzdFtpbmRleF07CiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0Tm9kZSA9IGN1ck5vZGU7CiAgICAgICAgICAgICAgICBsZXQgeyBjdXJIb3N0LCBjdXJVcmwgfSA9IGdldE5vZGVIb3N0KHRhcmdldE5vZGUpOwogICAgICAgICAgICAgICAgaWYgKGN1ckhvc3QgPT09IG51bGwgfHwgKGN1clVybCAmJiBjdXJVcmwuaW5jbHVkZXMoInd3dy5iYWlkdS5jb20vbGluayIpKSkgeyAvLyDot7Pov4diYWlkdS5jbGljawogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIG90aGVyRGF0YS5vdGhlci5jdXJIb3N0cy5hY3B1c2goY3VySG9zdCArICIjIyMiICsgY3VyVXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCBmYXZpY29uVXJsID0gY3VySG9zdDsKICAgICAgICAgICAgICAgIGxldCBJSSA9IDA7CiAgICAgICAgICAgICAgICBmb3IgKDsgSUkgPD0gNTsgSUkrKykgewogICAgICAgICAgICAgICAgICB0YXJnZXROb2RlID0gdGFyZ2V0Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Tm9kZSAhPSBudWxsICYmIHRhcmdldE5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkZhdmljb25BZGRUbykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZih0YXJnZXROb2RlLnBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCd0cGwnKSAmJiB0YXJnZXROb2RlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCd0cGwnKS5pbmNsdWRlcygnc3RvY2snKSkgewogICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICItMyIpOwogICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpbmRleCsiLiIrZmF2aWNvblVybCsiLS0iK0lJKTsKICAgICAgICAgICAgICAgIGlmIChJSSA8PSA1KSB7CiAgICAgICAgICAgICAgICAgIC8vIOWFiOeUqOeItuiKgueCueWIpOaWreS4gOS4i+aYr+WQpuWtmOWcqGltZwogICAgICAgICAgICAgICAgICBsZXQgdG1wSFRNTCA9IHRhcmdldE5vZGUuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgICBsZXQgcG9zID0gdG1wSFRNTC5pbmRleE9mKCJmYXYtdXJsIikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigid3JfZmF2IikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigiZmF2dXJsIikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigidGl0LWljbyIpCiAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImltZ19mYXYgcm1zX2ltZyIpCiAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImMtdG9vbC0iKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJzcGFuIGNsYXNzPVwiYy1pY29uIGMtaWNvbi0iKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJpbWcgY2xhc3M9XCJ4QTMzR2MiKTsKICAgICAgICAgICAgICAgICAgLy/ku5boh6rlt7Hlt7Lnu4/lgZrkuoZmYXZpY29u5LqGCiAgICAgICAgICAgICAgICAgIGlmIChwb3MgPiAtMSkgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLlt7LmnInlm77niYfvvJoiKTsKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICItMiIpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSB0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uQWRkVG8pOwogICAgICAgICAgICAgICAgICAvLyDnibnmrorlpITnkIZCSU5HCiAgICAgICAgICAgICAgICAgIC8vIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIGN1ck5vZGUgPSBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoImgyIik7CiAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9hcGkuYnlpLnB3L2Zhdmljb24vP3VybD0/Pz8/IOS4jeeos+WumgogICAgICAgICAgICAgICAgICAvL2h0dHA6Ly8iK2Zhdmljb25VcmwrIi9jZG4uaWNvP2RlZmF1bHRpY29uPWh0dHA6Ly9zb3ouaW0vZmF2aWNvbi5pY28g5LiN56iz5a6aCiAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly93d3cueHR3aW5kLmNvbS9hcGkvaW5kZXgucGhwP3VybD0/Pz8/IOaMguS6huOAguOAguOAggogICAgICAgICAgICAgICAgICAvL2h0dHBzOi8vc3RhdGljcy5kbnNwb2QuY24vcHJveHlfZmF2aWNvbi9fL2Zhdmljb24/ZG9tYWluPXNpbmEuY24KICAgICAgICAgICAgICAgICAgLy93d3cuZ29vZ2xlLmNvbS9zMi9mYXZpY29ucz9kb21haW49NzY0MzUwMTc3LmxvZnRlci5jb20KICAgICAgICAgICAgICAgICAgLy/lpoLmnpzlnLDlnYDkuI3mraPnoa7vvIzpgqPkuYjkuKLlvIMKICAgICAgICAgICAgICAgICAgbGV0IGhvc3QgPSBmYXZpY29uVXJsLnJlcGxhY2UoL1teLl0rXC4oW14uXSspXC4oW14uXSspLywgIiQxLiQyIik7CiAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoIi5BQy1mYXZpY29uVCIpID09PSBudWxsICYmIGhvc3QubGVuZ3RoID4gMykgewogICAgICAgICAgICAgICAgICAgIGxldCBpbnNOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgLy8gY3VyTm9kZSA9IGN1ck5vZGUuY2hpbGRyZW5bMF0gfHwgY3VyTm9kZS5maXJzdENoaWxkIDsgLy8gZmlyc3RDaGlsZOWuueaYk+mBh+WIsHRleHTlr7nosaEKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICIxIik7CiAgICAgICAgICAgICAgICAgICAgLy8gY3VyTm9kZS5pbnNlcnRCZWZvcmUoaW5zTm9kZSwgY3VyTm9kZS5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLmNsYXNzTmFtZSA9ICJBQy1mYXZpY29uVCI7CiAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zZXRBdHRyaWJ1dGUoInJlZmVycmVycG9saWN5IiwgIm5vLXJlZmVycmVyIik7CiAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zdHlsZSA9ICJwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjE7dmVydGljYWwtYWxpZ246c3ViO2hlaWdodDoxNnB4O3dpZHRoOjE2cHg7bWFyZ2luLXJpZ2h0OjVweDttYXJnaW4tYm90dG9tOiAycHg7dXNlci1zZWxlY3Q6bm9uZTsiOwoKICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLnNyYyA9ICJodHRwczovL2Zhdmljb24ueWFuZGV4Lm5ldC9mYXZpY29uL3YyLyIgKyAoY3VyTm9kZS5ocmVmIHx8IGhvc3QpOyAvLyBNQVJLIHlhbmRleOaUr+aMgei/meenjeafpeivouinhOWImQogICAgICAgICAgICAgICAgICAgIGluc05vZGUuc2V0QXR0cmlidXRlKCJmYXZpY29uSUQiLCAiMCIpOwogICAgICAgICAgICAgICAgICAgIGluc05vZGUuc2V0QXR0cmlidXRlKCJvbmRyYWdzdGFydCIsICJyZXR1cm4gZmFsc2U7IikgLy8g56aB5q2i5ouW5Yqo5Zu+54mHLemBv+WFjeaLlumUmeS6hgogICAgICAgICAgICAgICAgICAgIC8vIGN1ck5vZGUuaW5uZXJIVE1MID0gaW5zTm9kZS5vdXRlckhUTUwgKyBjdXJOb2RlLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAvLyBjdXJOb2RlLmluc2VydEFkamFjZW50SFRNTCgiYWZ0ZXJFbmQiLCBpbnNOb2RlLmlubmVySFRNTCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGJlZm9yZUluZGV4ID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Tm9kZS5jaGlsZE5vZGVzW2JlZm9yZUluZGV4XS5jbGFzc05hbWUgPT09ICJBQy1Db3VudGVyVCIpIHsKICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZUluZGV4ID0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZS5pbnNlcnRCZWZvcmUoaW5zTm9kZSwgdGFyZ2V0Tm9kZS5jaGlsZE5vZGVzW2JlZm9yZUluZGV4XSk7CiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICh4Y3VyKSB7CiAgICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLm9ubG9hZCA9IGZ1bmN0aW9uIChlbnYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ05vZGUgPSB4Y3VyLnF1ZXJ5U2VsZWN0b3IoIi5BQy1mYXZpY29uVCIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGltZ05vZGUgfHwge30pLm5hdHVyYWxXaWR0aCA8IDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nTm9kZS5zZXRBdHRyaWJ1dGUoIm9sZC1zcmMiLCBpbWdOb2RlLnNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nTm9kZS5zcmMgPSBBQ0NvbmZpZy5kZWZhdWx0RmF2aWNvblVybDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpbWdOb2RlLm9ubG9hZCA9ICJqYXZhc2NyaXB0OnZvaWQoMCk7IjsKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSkodGFyZ2V0Tm9kZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBjaGVja05vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAiKTsKICAgICAgICAgICAgZm9yIChsZXQgZmFOb2RlIG9mIGNoZWNrTm9kZXMpIHsKICAgICAgICAgICAgICBsZXQgZmF2aWNvbk5vZGUgPSBmYU5vZGUucXVlcnlTZWxlY3RvcigiLnJlc3VsdF9faWNvbiBpbWciKTsKICAgICAgICAgICAgICBsZXQgYmVmb3JlTm9kZSA9IGZhTm9kZS5xdWVyeVNlbGVjdG9yKCIucmVzdWx0X190aXRsZSBhIik7CiAgICAgICAgICAgICAgaWYoZmF2aWNvbk5vZGUgJiYgYmVmb3JlTm9kZSl7CiAgICAgICAgICAgICAgICBmYXZpY29uTm9kZS5zdHlsZSA9ICJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7bWFyZ2luLXJpZ2h0OjVweDsiOwogICAgICAgICAgICAgICAgYmVmb3JlTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmYXZpY29uTm9kZSwgYmVmb3JlTm9kZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBJbnNlcnRTZXR0aW5nTWVudSgpIHsKICAgICAgICAgIGlmICgoY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5PVEhFUlMpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNteXVzZXIiKSA9PT0gbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGxldCBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdSwgI2diPmRpdj5kaXY+ZGl2LCAjYl9oZWFkZXI+I2lkX2gsIC50b3AtYmFyIC5zb2dvdS1zZXQtYm94LCAjaGVhZGVyX3dyYXBwZXIgLmpzLWhsLWJ1dHRvbiwgYm9keVtkb2dlXSAjaGVhZGVyX3dyYXBwZXIgI2hlYWRlciIpOyAvL2JhaWR1OyBnb29nbGU7IGJpbmc7IOaQnOeLlwogICAgICAgICAgICAgIHBhcmVudC5zdHlsZSA9ICJ3aWR0aDogYXV0bzsiOwogICAgICAgICAgICAgIGxldCB1c2VyQWRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgIHVzZXJBZGl2LmlkID0gIm15dXNlciI7CiAgICAgICAgICAgICAgdXNlckFkaXYuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPSdzdWJtaXQnIGNsYXNzPSdteXVzZXJjb25maWcnIHZhbHVlPScke0FsbERhdGEubGFuLnVzZS5tZW51X3RleHR9Jy8+PHNwYW4gY2xhc3M9J2FjLW5ld3ZlcnNpb25EaXNwbGF5JyBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjogcmVkO2Zsb2F0OiBsZWZ0O2hlaWdodDogOHB4O3dpZHRoOiA4cHg7Ym9yZGVyLXJhZGl1czogNHB4O2Rpc3BsYXk6JHsoQ09OU1QuaGFzTmV3RnVuY05lZWREaXNwbGF5ID8gInVuc2V0IiA6ICJub25lIil9Jz4mbmJzcDs8L3NwYW4+YDsKICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHVzZXJBZGl2LCBwYXJlbnQuY2hpbGROb2Rlc1swXSk7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI215dXNlciAubXl1c2VyY29uZmlnIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSk7CiAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSgpOyAvLyDor7vlj5bkuKrkurrorr7nva7kv6Hmga8KICAgICAgLyoqCiAgICAgICAqIEBwYXJhbSBjYWxsYmFjayDlm57osIPlh73mlbDvvIzpnIDopoHov5Tlm57mmK/lkKbnu5PmnZ9UcnVl44CBRmFsc2XjgIHlkKbliJnnm7jlvZPkuo7lrprml7blmagKICAgICAgICogY2FsbGJhY2sgcmV0dXJuOgogICAgICAgKiAgdHJ1ZSA9IOWAkuiuoeaXtgogICAgICAgKiAgZmFsc2UgPSDorqHml7blmagKICAgICAgICogIG5vbmUgPSDorqHml7blmagKICAgICAgICogQHBhcmFtIHBlcmlvZCDlkajmnJ/vvIzlpoI6MjAwbXMKICAgICAgICogQHBhcmFtIHJ1bk5vdyDnq4vljbPmiafooYwKICAgICAgICovCiAgICAgIGZ1bmN0aW9uIFJBRkludGVydmFsKGNhbGxiYWNrLCBwZXJpb2QsIHJ1bk5vdykgewogICAgICAgIC8vIOS4gOenkjYw5qyh77yM5a+55bqUMeenkjEwMDBtcwogICAgICAgIGNvbnN0IG5lZWRDb3VudCA9IHBlcmlvZCAvIDEwMDAgKiA2MDsKICAgICAgICBsZXQgdGltZXMgPSAwOyAvLyDlt7Lnu4/orqHmlbDnmoTmlbDph48KCiAgICAgICAgaWYocnVuTm93ID09PSB0cnVlKXsgLy8g5a+55LqO56uL5Y2z5omn6KGM5Ye95pWw55qE56uL5Y2z5Yik5a6a77yM5ZCm5YiZ6L+b6KGMCiAgICAgICAgICBjb25zdCBzaG91bGRGaW5pc2ggPSBjYWxsYmFjaygpOwogICAgICAgICAgaWYoc2hvdWxkRmluaXNoKSByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdGVwKCkgewogICAgICAgICAgaWYodGltZXMgPCBuZWVkQ291bnQpewogICAgICAgICAgICAvLyDorqHmlbDmnKrnu5PmnZ8t57un57ut6K6h5pWwCiAgICAgICAgICAgIHRpbWVzKys7CiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIC8vIOiuoeaVsOe7k+adny3lgZzmraLorqHmlbDvvIzliKTlrprnu5PmnpwKICAgICAgICAgICAgY29uc3Qgc2hvdWxkRmluaXNoID0gY2FsbGJhY2soKSB8fCBmYWxzZTsKICAgICAgICAgICAgaWYoIXNob3VsZEZpbmlzaCl7CiAgICAgICAgICAgICAgLy8g6L+U5Zue5YC85Li6ZmFsc2XvvIzph43lkK/orqHmlbDlmagKICAgICAgICAgICAgICB0aW1lcyA9IDA7CiAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIC8vIOi/lOWbnuWAvOS4unRydWXvvIznu5PmnZ/orqHmlbDlmagKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNhZmVGdW5jdGlvbihmdW5jKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZ1bmMoKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBzYWZlV2FpdEZ1bmMoc2VsZWN0b3IsIGNhbGxiYWNrRnVuYywgdGltZSwgbm90Q2xlYXIpIHsKICAgICAgICB0aW1lID0gdGltZSB8fCA1MDsKICAgICAgICBub3RDbGVhciA9IG5vdENsZWFyIHx8IGZhbHNlOwogICAgICAgIGxldCBkb0NsZWFyID0gIW5vdENsZWFyOwogICAgICAgIFJBRkludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICgodHlwZW9mIChzZWxlY3RvcikgPT09ICJzdHJpbmciICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpICE9IG51bGwpKSB7CiAgICAgICAgICAgIGNhbGxiYWNrRnVuYyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSk7CiAgICAgICAgICAgIGlmIChkb0NsZWFyKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChzZWxlY3RvcikgPT09ICJmdW5jdGlvbiIgJiYgKHNlbGVjdG9yKCkgIT0gbnVsbCB8fCAoc2VsZWN0b3IoKSB8fCBbXSkubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgY2FsbGJhY2tGdW5jKHNlbGVjdG9yKClbMF0pOwogICAgICAgICAgICBpZiAoZG9DbGVhcikgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSwgdGltZSwgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEFDX2FkZFN0eWxlKGNzcywgY2xhc3NOYW1lLCBhZGRUb1RhcmdldCwgaXNSZWxvYWQsIGluaXRUeXBlKSB7IC8vIOa3u+WKoENTU+S7o+egge+8jOS4jeiAg+iZkeaWh+acrOi9veWFpeaXtumXtO+8jOWPquaJp+ihjOS4gOasoS3ml6DorrrmiJDlip/kuI7lkKbvvIzluKbmnIljbGFzc05hbWUKICAgICAgICBSQUZJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvKioKICAgICAgICAgICAqIGFkZFRvVGFyZ2V06L+Z6YeM5LiN6KaB5L2/55SoaGVhZOagh+etvixoZWFk5qCH562+55qEY3Nz5Lya5ZyoaHRtbOi9veWFpeaXtuWKoOi9ve+8jAogICAgICAgICAgICogaHRtbOWKoOi9veWQjuS8vOS5juS4jeS8muWGjeasoeWKoOi9ve+8jGJvZHnkvJroh6rliqjliqDovb0KICAgICAgICAgICAqICoqLwogICAgICAgICAgbGV0IGFkZFRvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhZGRUb1RhcmdldCk7CiAgICAgICAgICBpZiAodHlwZW9mIChhZGRUb1RhcmdldCkgPT09ICJ1bmRlZmluZWQiKQogICAgICAgICAgICBhZGRUbyA9IChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgICAgIGlzUmVsb2FkID0gaXNSZWxvYWQgfHwgZmFsc2U7IC8vIOm7mOiupOaYr+mdnuWKoOi9veWeiwogICAgICAgICAgaW5pdFR5cGUgPSBpbml0VHlwZSB8fCAidGV4dC9jc3MiOwogICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ55uu5qCH6IqC54K5KOWImeebtOaOpeWKoCkgfHwg5pyJ55uu5qCH6IqC54K55LiU5om+5Yiw5LqG6IqC54K5KOi/m+ihjOaWsOWinikKICAgICAgICAgIGlmICh0eXBlb2YgKGFkZFRvVGFyZ2V0KSA9PT0gInVuZGVmaW5lZCIgfHwgKHR5cGVvZiAoYWRkVG9UYXJnZXQpICE9ICJ1bmRlZmluZWQiICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRkVG9UYXJnZXQpICE9IG51bGwpKSB7CiAgICAgICAgICAgIC8vIGNsZWFySW50ZXJ2YWwodG91dCk7CiAgICAgICAgICAgIC8vIOWmguaenHRydWUg5by66KGM6KaG55uW77yM5LiN566h5pyJ5rKh5pyJLS3lhYjliKDpmaQKICAgICAgICAgICAgLy8g5aaC5p6cZmFsc2XvvIzkuI3opobnm5bvvIzkvYbmmK/lpoLmnpzmnInnmoTor53vvIzopoHpgIDlh7rvvIzkuI3lrZjlnKjliJnmlrDlop4tLeaXoOmcgOWIoOmZpAogICAgICAgICAgICBpZiAoaXNSZWxvYWQgPT09IHRydWUpIHsKICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIuIiArIGNsYXNzTmFtZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZWxvYWQgPT09IGZhbHNlICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi4iICsgY2xhc3NOYW1lKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgLy8g6IqC54K55a2Y5ZyoICYmIOS4jeWHhuWkh+imhueblgogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSAhPSBudWxsKSBjc3NOb2RlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsKICAgICAgICAgICAgY3NzTm9kZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCBpbml0VHlwZSk7CiAgICAgICAgICAgIGNzc05vZGUuaW5uZXJIVE1MID0gY3NzOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGFkZFRvLmFwcGVuZENoaWxkKGNzc05vZGUpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9LCAyMCwgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNhZmVSZW1vdmUoY3NzU2VsZWN0b3IpIHsKICAgICAgICBzYWZlRnVuY3Rpb24oKCkgPT4gewogICAgICAgICAgbGV0IHJlbW92ZU5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjc3NTZWxlY3Rvcik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZU5vZGVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICByZW1vdmVOb2Rlc1tpXS5yZW1vdmUoKTsKICAgICAgICB9KQogICAgICB9CgogICAgICBmdW5jdGlvbiBoaWRlTm9kZShub2RlKSB7CiAgICAgICAgaWYobm9kZS5oYXNBdHRyaWJ1dGUoJ2FjLWFkLWhpZGUnKSkgcmV0dXJuCiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FjLWFkLWhpZGUnLCAnMScpCiAgICAgICAgbm9kZS5zdHlsZSA9ICdkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7JwogICAgICB9CgogICAgICBmdW5jdGlvbiBzYWZlUmVtb3ZlX3hwYXRoKHhwYXRoU2VsZWN0b3IsIGlzSGlkZT1mYWxzZSkgewogICAgICAgIHNhZmVGdW5jdGlvbigoKSA9PiB7CiAgICAgICAgICBsZXQgcmVtb3ZlTm9kZXMgPSBnZXRBbGxFbGVtZW50cyh4cGF0aFNlbGVjdG9yKTsKICAgICAgICAgIGlmKGlzSGlkZSkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZU5vZGVzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICBoaWRlTm9kZShyZW1vdmVOb2Rlc1tpXSkKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1vdmVOb2Rlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgcmVtb3ZlTm9kZXNbaV0ucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CgogICAgICBmdW5jdGlvbiBjaGVja0lTQmFpZHVNYWluKCkgeyAvLyDpppbpobU9dHJ1ZTvpnZ7pppbpobU9ZmFsc2UKICAgICAgICAvLyDlpoLmnpzmmK/nmb7luqYgJiYgIOayoeaciSjnmb7luqbmkJzntKLnu5PmnpznmoTmoIflv5ctW+WtmOWcqF3nmb7luqbnmoTlhoXlrrkpIHJldHVybjsKICAgICAgICByZXR1cm4gIShjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmICEobG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oJnxcPykod2R8d29yZCk9LywgIiIpICE9PSBsb2NhdGlvbi5ocmVmIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjb250ZW50X2xlZnQiKSB8fAogICAgICAgICAgICAoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNrdyIpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNrdyIpLmdldEF0dHJpYnV0ZSgidmFsdWUiKSkgfHwgIiIpICE9PSAiIikKICAgICAgICApCiAgICAgIH0KCiAgICAgIC8qKgogICAgICAgKiDmo4Dmn6Vkb2N1bWVudOeahOWtkOiKgueCueaYr+WQpuWQq+acieWFg+e0oAogICAgICAgKiBAcGFyYW0gbm9kZUNsYXNzIOW+heajgOafpeWFg+e0oAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHxGCiAgICAgICAqLwogICAgICBmdW5jdGlvbiBjaGVja0RvY21lbnRIYXNOb2RlKG5vZGVDbGFzcykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGRvY3VtZW50LmNoaWxkTm9kZXNbaV0uZGF0YSAmJiBkb2N1bWVudC5jaGlsZE5vZGVzW2ldLmRhdGEuaW5kZXhPZihub2RlQ2xhc3MpID4gMCkKICAgICAgICAgICAgcmV0dXJuIHtyZXM6IHRydWUsIG5vZGU6IGRvY3VtZW50LmNoaWxkTm9kZXNbaV19OwogICAgICAgIH0KICAgICAgICByZXR1cm4ge3JlczogZmFsc2UsIG5vZGU6IG51bGx9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBGU0JhaWR1KCkgeyAvLyB0aGFua3MgZm9yIGNvZGUgZnJvbSDmta7nlJ9A5pyq5q2HIEBwYWdlIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtVFcvc2NyaXB0cy8zMTY0MgogICAgICAgIC8vIGRlYnVnKCLliJ3lp4vljJZGU0JBSURVIik7CgogICAgICAgIENPTlNULlN0eWxlTWFuZ2VyID0gewogICAgICAgICAgLyoqCiAgICAgICAgICAgKiDlr7zlhaVjc3PlhoXlrrnkuLrjgJDmlofmnKzmoLzlvI/jgJHvvIHvvIHvvIEKICAgICAgICAgICAqIEBwYXJhbSBkYXRhIGNzc+WGheWuuQogICAgICAgICAgICogQHBhcmFtIHRvQ2xhc3NOYW1lIOmihOacn+eahOexu+WQjQogICAgICAgICAgICovCiAgICAgICAgICBpbXBvcnRTdHlsZTogZnVuY3Rpb24gKGRhdGEsIHRvQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgKGRhdGEpID09PSAidW5kZWZpbmVkIiB8fCBkYXRhID09PSBudWxsKSB7CiAgICAgICAgICAgICAgLy8g6L+Z5Liq5bGF54S25ZyoVk3kuIrlh7rpl67popjkuobvvIzlvojlpYfmgKoKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJHTV9nZXRSZXNvdXJjZVRleHTojrflj5blhoXlrrnmlbDmja7lvILluLgiKTsKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICB1c2VOb3JtYWxDU1MgPSB1c2VOb3JtYWxDU1MgfHwgZmFsc2U7CiAgICAgICAgICAgIG11c3RMb2FkID0gbXVzdExvYWQgfHwgZmFsc2U7CiAgICAgICAgICAgIC8vIOaZrumAmua1j+iniOWZqOaooeW8jy0t5L2G5piv5Ly85LmO5qC35byP5Yqg6L2955qE5LyY5YWI57qn5L2O5LqOaGVhZOS4reeahHN0eWxl5LyY5YWI57qnCiAgICAgICAgICAgIGlmICghdXNlTm9ybWFsQ1NTICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuRFVDSykgewogICAgICAgICAgICAgIC8vIOmAmui/h211c3Tlj4LmlbDmnaXliKTlrppzdHlsZeaYr+WQpuWKoOi9vQogICAgICAgICAgICAgIC8vIGRhdGEgPSBkYXRhLnJlcGxhY2UoL2JhaWR1LmNvbSNcJCMvaWdtLCAnJyk7CiAgICAgICAgICAgICAgaWYgKGRhdGEuaW5kZXhPZigiaHR0cCIpICE9PSAwKSBkYXRhID0gImRhdGE6dGV4dC9jc3M7dXRmLTgsIiArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhKTsKICAgICAgICAgICAgICB2YXIge3Jlcyx9ID0gY2hlY2tEb2NtZW50SGFzTm9kZSh0b0NsYXNzTmFtZSk7CiAgICAgICAgICAgICAgaWYgKCFyZXMpIHsKICAgICAgICAgICAgICAgIGxldCBwaSA9IGRvY3VtZW50LmNyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbigKICAgICAgICAgICAgICAgICAgInhtbC1zdHlsZXNoZWV0IiwKICAgICAgICAgICAgICAgICAgYHR5cGU9InRleHQvY3NzIiBtdXN0PSIke211c3RMb2FkfSIgY2xhc3M9IiR7dG9DbGFzc05hbWV9IiBocmVmPSIke2RhdGF9ImAKICAgICAgICAgICAgICAgICk7IC8vIOazqOaEj+W/hemhu+imgeWPjOW8leWPtwogICAgICAgICAgICAgICAgZG9jdW1lbnQuaW5zZXJ0QmVmb3JlKHBpLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvKiAqKioqKioqKioq5aSa6YeN5qC35byPLeWFvOWuuWVkZ2UgJiYg6buR5aSc6ISa5pysKioqKioqKioqKioqICovCiAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoZGF0YSwgdG9DbGFzc05hbWUsICJoZWFkIiwgZmFsc2UsICJ0ZXh0L2NzcyIpOwogICAgICAgICAgICAgIC8qICoqKioqKioqKirlpJrph43moLflvI8t5YW85a65ZWRnZSAmJiDpu5HlpJzohJrmnKwqKioqKioqKioqKiogKi8KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIC8v5Yqg6L295pmu6YCa5qC35byPCiAgICAgICAgICBsb2FkQ29tbW9uU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5sb2FkU3R5bGUoQ09OU1QudXNlSXRlbS5uYW1lICsgIkNvbW1vblN0eWxlIiwgQ09OU1QudXNlSXRlbS5uYW1lICsgIkNvbW1vblN0eWxlIik7CiAgICAgICAgICB9LAogICAgICAgICAgbG9hZEJhaWR1TGl0ZVN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRTdHlsZSgiYmFpZHVMaXRlU3R5bGUiLCAiYmFpZHVMaXRlU3R5bGUiLCBudWxsLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRQbGFpblRvQ1NTKCJiYWlkdUxpdGVTdHlsZSIpOwogICAgICAgICAgfSwKICAgICAgICAgIGxvYWRTdHlsZTogYXN5bmMgZnVuY3Rpb24gKHN0eWxlTmFtZSwgaW5zQ2xhc3NOYW1lLCBzZXRVcmwsIHVzZU5vcm1hbENTUywgbXVzdExvYWQpIHsKICAgICAgICAgICAgLy8g5YWo6YOo6YeH55SodGV4dC9jc3PnmoTlhoXlrrnmnaXovb3lhaUKICAgICAgICAgICAgLy8g5aaC5p6c5pivZGVidWfmqKHlvI/jgILmiJbogIXmmK9nbeaooeW8jwogICAgICAgICAgICBpZiAoaXNMb2NhbERlYnVnKSB7CiAgICAgICAgICAgICAgZGVidWcoIuacrOWcsC3liqDovb3moLflvI/vvJoiICsgaW5zQ2xhc3NOYW1lKTsKICAgICAgICAgICAgICBzZXRVcmwgPSBzZXRVcmwgfHwgImh0dHA6Ly8xMjcuMC4wLjEvIiArIHN0eWxlTmFtZSArICIuY3NzIjsKICAgICAgICAgICAgICB0aGlzLmltcG9ydFN0eWxlKHNldFVybCwgIkFDLSIgKyBpbnNDbGFzc05hbWUsIHVzZU5vcm1hbENTUywgbXVzdExvYWQpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGlzTmV3R00gPT09IHRydWUpIHsKICAgICAgICAgICAgICAvLyDku4XnlKjkuo5HcmVhc2VNb25rZXk0LjArCiAgICAgICAgICAgICAgZGVidWcoIueJueauiuaooeW8jy3liqDovb3moLflvI/vvJoiICsgaW5zQ2xhc3NOYW1lKTsKICAgICAgICAgICAgICBzZXRVcmwgPSBzZXRVcmwgfHwgImh0dHBzOi8vc3luYy50dWppZHUuY29tL25ld2Nzcy8iICsgc3R5bGVOYW1lICsgIi5jc3MiOwogICAgICAgICAgICAgIHRoaXMuaW1wb3J0U3R5bGUoc2V0VXJsLCAiQUMtIiArIGluc0NsYXNzTmFtZSwgdXNlTm9ybWFsQ1NTLCBtdXN0TG9hZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZGVidWcoIuWKoOi9veagt+W8j++8miIgKyBpbnNDbGFzc05hbWUpOwogICAgICAgICAgICAgIC8vIFRhbXBlck1vbmtleSArIEdyZWFzZU1vbmtleSA8IDQuMCArIFZpb2xlbnRNb25rZXkgKDQuMEdyZWFzZU1vbmtleeS4jeaUr+aMgUdldFJlc291cmNl5pa55rOVKQogICAgICAgICAgICAgIHRoaXMuaW1wb3J0U3R5bGUoYXdhaXQgR01fZ2V0UmVzb3VyY2VUZXh0KHN0eWxlTmFtZSksICJBQy0iICsgaW5zQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIC8v5Yqg6L295oqk55y85qih5byP5qC35byPCiAgICAgICAgICBsb2FkSHVZYW5TdHlsZTogZnVuY3Rpb24gKGNvbG9yKSB7CiAgICAgICAgICAgIGxldCBzdHlsZSA9ICJib2R5W2JhaWR1XSwjd3JhcHBlciAjaGVhZCwjd3JhcHBlciAjc190YWIsZm9ybS5mbSAuc19pcHRfd3IuYmd7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wLCNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCNjb250YWluZXIgI3JzLCNjb250YWluZXIgI2NvbnRlbnRfcmlnaHR7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggZG91YmxlICNhMmQ3ZDQ7Ym9yZGVyLXJhZGl1czowfSNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wOmhvdmVyLCNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0OmhvdmVye2JhY2tncm91bmQtY29sb3I6I2NjYyFpbXBvcnRhbnR9I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMsI2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciBoMywjY29udGFpbmVyICNycyAudHR7YmFja2dyb3VuZC1jb2xvcjojYmJifS5uYV9jbnQgLm53c19pdG0sLm53c19pdG1iLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBsaSxib2R5ICNiX2hlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Ym9yZGVyOjFweCBkb3VibGUgI2EyZDdkNDtib3JkZXItcmFkaXVzOjB9I2JfY29udGVudCAjYl9yZXN1bHRzIGxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2NjYyFpbXBvcnRhbnR9I2JfY29udGVudCAjYl9yZXN1bHRzIGxpIGgye2JhY2tncm91bmQtY29sb3I6I2JiYn0jcnNvIC5nLC5ia1dNZ2Q+LmcsLmJrV01nZCBnLWlubmVyLWNhcmQsI3Joc2NvbCAjcmhzLCNyaHNjb2wgI3JocyAuZz5kaXYsLmMyeHpUYiAuZywucnVUY0lkIC5nLC5mbTA2SWYgLmcsLmNVblFLZSAuZywuSGFuUW1mIC5ne2JhY2tncm91bmQtY29sb3I6I2FhYTtib3JkZXI6MXB4IGRvdWJsZSAjYTJkN2Q0O2JvcmRlci1yYWRpdXM6MH0jcnNvIC5nOmhvdmVyLC5ia1dNZ2Q+Lmc6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0uYmtXTWdkIC5nIGRpdi5yLCNyc28gLmcgaDN7YmFja2dyb3VuZC1jb2xvcjojYmJifSI7CiAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc1VzZXJDb2xvckVuYWJsZSkgewogICAgICAgICAgICAgIGNvbG9yID0gY29sb3IgfHwgQUNDb25maWcuZGVmYXVsdEh1WWFuQ29sb3IgfHwgIiNGRkZGRkYiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbG9yID0gY29sb3IgfHwgIiNGRkZGRkYiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjb2xvci5pbmRleE9mKCIjIikgIT09IDAgfHwgY29sb3IubGVuZ3RoIDwgNykgcmV0dXJuOwogICAgICAgICAgICBpZiAoaXNOZXdHTSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICBzdHlsZSA9IEdNX2dldFJlc291cmNlVGV4dCgiTWFpbkh1WWFuU3R5bGUiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdHlsZSA9IHN0eWxlCiAgICAgICAgICAgIC5yZXBsYWNlKC8jYWFhKGEqKS9pZ20sIGNvbG9yKQogICAgICAgICAgICAucmVwbGFjZSgvI2JiYihiKikvaWdtLCB0aGlzLkxpZ2h0ZXIoY29sb3IsIC00MCkpCiAgICAgICAgICAgIC5yZXBsYWNlKC8jY2NjKGMqKS9pZ20sIHRoaXMuTGlnaHRlcihjb2xvciwgNDUpKTsKICAgICAgICAgICAgQUNfYWRkU3R5bGUoc3R5bGUsICJBQy0iICsgQ09OU1QudXNlSXRlbS5uYW1lICsgIkh1WWFuU3R5bGUiICsgKGlzTmV3R00gPyAiIiA6ICItRmlsZSIpLCAiaGVhZCIsIHRydWUpOyAvLyDpnIDopoHkv67mlLnnmoTvvIzmiYDku6XkuLp0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgY2xpcDI1NTogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZSA+IDI1NSkgcmV0dXJuIDI1NTsKICAgICAgICAgICAgaWYgKHZhbHVlIDwgMCkgcmV0dXJuIDA7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgIH0sCiAgICAgICAgICBMaWdodGVyOiBmdW5jdGlvbiAob3JpUkdCLCBkZWx0YVkpIHsKICAgICAgICAgICAgLy8g5oyJ5q+U5L6L57yp5pS+ICsgMS9kZWx0YVkKICAgICAgICAgICAgLy8gSEVYIDIgUkdCCiAgICAgICAgICAgIGxldCByZ2IgPSBvcmlSR0IucmVwbGFjZSgiIyIsICIiKTsKICAgICAgICAgICAgbGV0IFIgPSBwYXJzZUludCgiMHgiICsgcmdiLnN1YnN0cigwLCAyKSk7CiAgICAgICAgICAgIGxldCBHID0gcGFyc2VJbnQoIjB4IiArIHJnYi5zdWJzdHIoMiwgMikpOwogICAgICAgICAgICBsZXQgQiA9IHBhcnNlSW50KCIweCIgKyByZ2Iuc3Vic3RyKDQsIDIpKTsKICAgICAgICAgICAgLy8gUkdCIDIgWVVWCiAgICAgICAgICAgIGxldCBZID0gKCg2NiAqIFIgKyAxMjkgKiBHICsgMjUgKiBCICsgMTI4KSA+PiA4KSArIDE2OwogICAgICAgICAgICBsZXQgVSA9ICgoLTM4ICogUiAtIDc0ICogRyArIDExMiAqIEIgKyAxMjgpID4+IDgpICsgMTI4OwogICAgICAgICAgICBsZXQgViA9ICgoMTEyICogUiAtIDk0ICogRyAtIDE4ICogQiArIDEyOCkgPj4gOCkgKyAxMjg7CiAgICAgICAgICAgIFkgPSBZICogKDEgKyAxLjAgLyBkZWx0YVkpOy8vIOaPkOmrmOS6ruW6pgogICAgICAgICAgICAvLyBZVVYgMiBSR0IKICAgICAgICAgICAgUiA9IHRoaXMuY2xpcDI1NSgoMjk4ICogKFkgLSAxNikgKyA0MDkgKiAoViAtIDEyOCkgKyAxMjgpID4+IDgpOwogICAgICAgICAgICBHID0gdGhpcy5jbGlwMjU1KCgyOTggKiAoWSAtIDE2KSAtIDEwMCAqIChVIC0gMTI4KSAtIDIwOCAqIChWIC0gMTI4KSArIDEyOCkgPj4gOCk7CiAgICAgICAgICAgIEIgPSB0aGlzLmNsaXAyNTUoKDI5OCAqIChZIC0gMTYpICsgNTE2ICogKFUgLSAxMjgpICsgMTI4KSA+PiA4KTsKICAgICAgICAgICAgcmV0dXJuICIjIiArICgoUiA8PCAxNikgKyAoRyA8PCA4KSArIEIpLnRvU3RyaW5nKDE2KTsKICAgICAgICAgIH0sCiAgICAgICAgICAvL+WKoOi9veWNlemhteagt+W8jwogICAgICAgICAgbG9hZE9uZVBhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmxvYWRTdHlsZShDT05TVC51c2VJdGVtLm5hbWUgKyAiT25lUGFnZVN0eWxlIiwgQ09OU1QudXNlSXRlbS5uYW1lICsgIk9uZVBhZ2VTdHlsZSIpOwogICAgICAgICAgfSwKICAgICAgICAgIC8v5Yqg6L295Y+M6aG15qC35byPCiAgICAgICAgICBsb2FkVHdvUGFnZVN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlKENPTlNULnVzZUl0ZW0ubmFtZSArICJUd29QYWdlU3R5bGUiLCBDT05TVC51c2VJdGVtLm5hbWUgKyAiVHdvUGFnZVN0eWxlIik7CiAgICAgICAgICAgIGxldCBjc3NIZWFkID0gIiI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVIHx8IGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuTUJBSURVKSBjc3NIZWFkID0gIiNjb250YWluZXIgI2NvbnRlbnRfbGVmdCwgYm9keVtuZXdzXSAjY29udGFpbmVyICNjb250ZW50X2xlZnQ+ZGl2Om5vdChbY2xhc3NdKTpub3QoW2lkXSkiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUpIENPTlNULmlzR29vZ2xlU3BlY2lhbCA/IGNzc0hlYWQgPSAiLnNyZywgI3JzbyIgOiBjc3NIZWFkID0gIi5zcmcsICNyc28+ZGl2Om5vdCguZykiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CSU5HKSBjc3NIZWFkID0gIiNiX2NvbnRlbnQgI2JfcmVzdWx0cyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLlNPR09VKSBjc3NIZWFkID0gIiNtYWluIC5yZXN1bHRzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRFVDSykgY3NzSGVhZCA9ICIjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5ET0dFKSBjc3NIZWFkID0gIiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyI7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKGNzc0hlYWQgKyAie2dyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDIsIG1pbm1heCg1MCUsMWZyKSk7Z3JpZC10ZW1wbGF0ZS1hcmVhczoneG1haW4geG1haW4nO2dyaWQtY29sdW1uLWdhcDogMXB4O30uQUMuc3Atc2VwYXJhdG9ye2dyaWQtY29sdW1uLXN0YXJ0OiAxO2dyaWQtY29sdW1uLWVuZDogeG1haW4tZW5kO30iLAogICAgICAgICAgICAgICJBQy1Ud29QYWdlRXhTdHlsZSIsICJoZWFkIik7CiAgICAgICAgICB9LAogICAgICAgICAgLy8g5Yqg6L295LiJ5YiX5qC35byPCiAgICAgICAgICBsb2FkVGhyZWVQYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGNzc0hlYWQgPSAiIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUgfHwgY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5NQkFJRFUpIGNzc0hlYWQgPSAiI2NvbnRhaW5lciAjY29udGVudF9sZWZ0LCBib2R5W25ld3NdICNjb250YWluZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgQ09OU1QuaXNHb29nbGVTcGVjaWFsID8gY3NzSGVhZCA9ICIuc3JnLCAjcnNvIiA6IGNzc0hlYWQgPSAiLnNyZywgI3Jzbz5kaXY6bm90KC5nKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIGNzc0hlYWQgPSAiI2JfY29udGVudCAjYl9yZXN1bHRzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpIGNzc0hlYWQgPSAiI21haW4gLnJlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5EVUNLKSBjc3NIZWFkID0gIiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRPR0UpIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgQUNfYWRkU3R5bGUoY3NzSGVhZCArICJ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMywgbWlubWF4KDMzLjMlLDFmcikpO2dyaWQtdGVtcGxhdGUtYXJlYXM6J3htYWluIHhtYWluIHhtYWluJztncmlkLWNvbHVtbi1nYXA6IDEwcHg7fSIsCiAgICAgICAgICAgICAgIkFDLVRocmVlUGFnZUV4U3R5bGUiLCAiaGVhZCIpOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIOWKoOi9veWbm+WIl+agt+W8jwogICAgICAgICAgbG9hZEZvdXJQYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGNzc0hlYWQgPSAiIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUgfHwgY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5NQkFJRFUpIGNzc0hlYWQgPSAiI2NvbnRhaW5lciAjY29udGVudF9sZWZ0LCBib2R5W25ld3NdICNjb250YWluZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgQ09OU1QuaXNHb29nbGVTcGVjaWFsID8gY3NzSGVhZCA9ICIuc3JnLCAjcnNvIiA6IGNzc0hlYWQgPSAiLnNyZywgI3Jzbz5kaXY6bm90KC5nKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIGNzc0hlYWQgPSAiI2JfY29udGVudCAjYl9yZXN1bHRzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpIGNzc0hlYWQgPSAiI21haW4gLnJlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5ET0dFKSBjc3NIZWFkID0gIiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRPR0UpIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgQUNfYWRkU3R5bGUoY3NzSGVhZCArICJ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNCwgbWlubWF4KDI1JSwxZnIpKTtncmlkLXRlbXBsYXRlLWFyZWFzOid4bWFpbiB4bWFpbiB4bWFpbiB4bWFpbic7Z3JpZC1jb2x1bW4tZ2FwOiAxcHg7fSIsCiAgICAgICAgICAgICAgIkFDLUZvdXJQYWdlRXhTdHlsZSIsICJoZWFkIik7CiAgICAgICAgICB9LAogICAgICAgICAgbG9hZFBsYWluVG9DU1M6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBkb2N1bWVudC5jaGlsZE5vZGVzW2ldOwogICAgICAgICAgICAgIGlmIChjdXJOb2RlLmRlbCkgY3VyTm9kZS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzYWZlUmVtb3ZlKCJzdHlsZVtjbGFzcyo9J0FDJ11bZGVsPScxJ10iKTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyDnpoHmraLni6znq4vnmoTmoLflvI/liqDovb0KICAgICAgICAgIGxvYWRDU1NUb1BsYWluOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGxldCBjdXJOb2RlID0gZG9jdW1lbnQuY2hpbGROb2Rlc1tpXTsKICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/lrZjlnKhjc3PvvIwg5LiU6Z2e5b+F6aG75pWw5o2uCiAgICAgICAgICAgICAgaWYgKGN1ck5vZGUudGFyZ2V0ID09PSAieG1sLXN0eWxlc2hlZXQiICYmIGN1ck5vZGUuZGF0YS5pbmRleE9mKCJtdXN0PVwidHJ1ZSIpIDwgMCkgewogICAgICAgICAgICAgICAgY3VyTm9kZS5kYXRhID0gIiI7CiAgICAgICAgICAgICAgICBjdXJOb2RlLmRlbCA9IHRydWU7CgogICAgICAgICAgICAgICAgLy8g5a+55LqOZWRnZeWSjHNhZmFyaemDveeJueauiuWkhOeQhuS4gOS4i+WQpwogICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJlZGdlIikgPiAwIHx8IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJzYWZhcmkiKSA+IDApIHsKICAgICAgICAgICAgICAgICAgY3VyTm9kZS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBpbml0KCkgewogICAgICAgICAgICBDb250cm9sTWFuYWdlci5pbml0KCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB2YXIgQ29udHJvbE1hbmFnZXIgPSB7CiAgICAgICAgICAvL+WxheS4reaYvuekuiAtLS0g5b+F6aG75piv55m+5bqm5ZKM6LC35q2M55qE5pCc57Si57uT5p6c6aG16Z2i77yM5YW25LuW6aG16Z2i5LiN6IO95Yqg6L2955qELS3lt7Lnu4/pgJrov4fohJrmnKxpbmNsdWRl5qCH562+6ZmQ5Yi25LqG5LiA6YOo5YiGCiAgICAgICAgICBjZW50ZXJEaXNwbGF5OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vIOWmguaenOaYr+eZvuW6piAmJiAoKOWcsOWdgOabv+aNoi0+5YyF5ZCrd2TlhbPplK7or41b5pu/5o2i5LmL5ZCO5LiN562JLeaYr+eZvuW6pue7k+aenOmhtemdol0pIHx8IOacieWPs+i+ueagjy3ogq/lrprmmK/nmb7luqbmkJzntKLnu5PmnpzpobUgfHwgdmFsdWXkuK3lrZjlnKjmkJzntKLlhoXlrrkpIHJldHVybjsKICAgICAgICAgICAgaWYgKCFjaGVja0lTQmFpZHVNYWluKCkpIHsKICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ1NTVG9QbGFpbigpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBBQ19hZGRTdHlsZSgiLm1pbmlkaXYgI2xvZ28gaW1ne3dpZHRoOiAxMDBweDtoZWlnaHQ6IHVuc2V0O21hcmdpbi10b3A6IDAuM3JlbTt9IiwgIkFDLXN0eWxlLWxvZ28iLCAiaGVhZCIpOwogICAgICAgICAgICBsZXQgcmVzdWx0ID0gcGFyc2VJbnQoQ09OU1QudXNlSXRlbS5BZHNTdHlsZU1vZGUgfHwgLTEpOwogICAgICAgICAgICBpZiAoYWNDc3NMb2FkRmxhZyA9PT0gZmFsc2UgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLkFDRXh0ZW5zaW9uIikgPT09IG51bGwpIHsKICAgICAgICAgICAgICBkZWJ1ZygiaW7moLflvI/ljbPlsIbliqDovb06IiArIHJlc3VsdCk7CiAgICAgICAgICAgICAgbGV0IGV4cGFuZFN0eWxlID0gIiN3cmFwcGVyICNycywgI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCAjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lcnttaW4td2lkdGg6NjcwcHg7fS5jLXNwYW4xOHt3aWR0aDo3OCUhaW1wb3J0YW50O21pbi13aWR0aDo1NTBweDt9LmMtc3BhbjI0e3dpZHRoOiBhdXRvIWltcG9ydGFudDt9IjsKICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSAxKSB7CiAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZShleHBhbmRTdHlsZSwgIkFDLVN0eWxlLWV4cGFuZCIsICJoZWFkIik7CiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gMikgey8v5Y2V6aG15bGF5LitCiAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZShleHBhbmRTdHlsZSwgIkFDLVN0eWxlLWV4cGFuZCIsICJoZWFkIik7CiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRPbmVQYWdlU3R5bGUoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gMykgeyAvL+WPjOmhteWxheS4rQogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZENvbW1vblN0eWxlKCk7CiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkVHdvUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IDQpIHsgLy8g5LiJ5YiXCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUd29QYWdlU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUaHJlZVBhZ2VTdHlsZSgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSA1KSB7IC8vIOWbm+WIlwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZENvbW1vblN0eWxlKCk7CiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkVHdvUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkRm91clBhZ2VTdHlsZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBhY0Nzc0xvYWRGbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICBkZWJ1ZygiaW7moLflvI/ov5DooYznu5PmnZ8iKTsKICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSAmJiBBQ0NvbmZpZy5TdHlsZV9CYWlkdUxpdGUgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKEdNX2dldFJlc291cmNlVGV4dCgiYmFpZHVMaXRlU3R5bGUiKSwgIkFDLWJhaWR1TGl0ZVN0eWxlIiwgImhlYWQiKQogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZEJhaWR1TGl0ZVN0eWxlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLkJBSURVICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuQkFJRFVfWFVFU0hVICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuR09PR0xFICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuQklORyAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLlNPR09VICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuRFVDSyAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLkRPR0UpIHJldHVybjsKCiAgICAgICAgICAgIC8vIOWmguaenOaYr+iwt+atjCAmJiAo5Zyw5Z2A5pu/5o2iLT7mmK/osLfmrYzlm77lg4/pobXpnaIgfHwg5piv5Zyw5Zu+6aG16Z2iKVvmm7/mjaLopoHlj5hdIHJldHVybjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvdGJtPShpc2NofGxjbHxzaG9wfGZsbSkvLCAiIikgIT09IGxvY2F0aW9uLmhyZWYpIHsKICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ1NTVG9QbGFpbigpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvKirmiqTnnLxTdHlsZeacgOWQjui9veWFpSoqLwogICAgICAgICAgICBpZiAoQ09OU1QudXNlSXRlbS5IdVlhbk1vZGUgPT09IHRydWUgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic3R5bGVbY2xhc3MqPSdkYXJrcmVhZGVyJ10iKSAhPSBudWxsKSBDT05TVC5TdHlsZU1hbmdlci5sb2FkSHVZYW5TdHlsZSgpOwoKICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFBsYWluVG9DU1MoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChDT05TVC5pc0dvb2dsZUltYWdlVXJsKSByZXR1cm47CiAgICAgICAgICAgIHRoaXMuY2VudGVyRGlzcGxheSgpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gZGVidWcoIuiwg+eUqOWKoOi9veiHquWumuS5iWNzcyIpOwogICAgICAgIENvbnRyb2xNYW5hZ2VyLmluaXQoKTsKICAgICAgICByZXR1cm4gQ09OU1QuU3R5bGVNYW5nZXI7CiAgICAgIH0KICAgIH0KICB9KSgpOwp9KCk7Cg==","resources":[{"meta":{"name":"baiduCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduCommonStyle.css?t=25.01","ts":1642048881091,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVDb21tb25TdHlsZSoqLw0KaWZyYW1lOm5vdChbc3JjKj0nY2hyb21lJ10pLA0KLnJlc190b3BfYmFubmVyICNmb290LA0KI3BhZ2UgLmZrLA0KI2hlYWQgLmhlYWRCbG9jaywNCiNyc190b3BfbmV3LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD50YWJsZSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtcmVjb21tZW5kLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAubGVmdEJsb2NrLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucnJlY29tLWJ0bi1wYXJlbnQsDQojZGVtbywNCiN3cmFwcGVyICNnb3RvUGFnZSwNCmJvZHk+ZGl2LnJlc3VsdC1vcCwNCi5ycmVjb20tY29udGFpbmVyLA0KLmNodW53YW4td3JhcHBlcnsNCiAgICBkaXNwbGF5OiBub25lIWltcG9ydGFudDsNCn0NCmJvZHlbYmFpZHVdIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1Ow0KICAgIHRyYW5zaXRpb246IGFsbCAxLjVzOw0KfQ0KI2FsYV9pbWdfcmVzdWx0c3sNCiAgICBvdmVyZmxvdzpoaWRkZW47DQp9DQpib2R5IGEsDQpib2R5IGEgZW0sDQojdSBhICwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhIGVtIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoNCmJvZHkgYTpob3ZlciwNCmJvZHkgYTpob3ZlciBlbXsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQojd3JhcHBlciAjc190YWIgew0KICAgIGJvcmRlci1ib3R0b206ICNlMGUwZTAgMXB4IHNvbGlkOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQp9DQpib2R5ICNoZWFkew0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQ4LCAyNDgsIDI0OCwgMC40KTsNCiAgICBib3JkZXItYm90dG9tOiBub25lOw0KICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KQ0KfQ0KZm9ybS5mbSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogdW5zZXQ7DQp9DQpmb3JtLmZtIC5iZHN1ZyBsaSB7DQogICAgd2lkdGg6IGF1dG87DQogICAgY29sb3I6ICMwMDA7DQogICAgZm9udDogMTVweCBhcmlhbDsNCiAgICBsaW5lLWhlaWdodDogMjZweDsNCn0NCmZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgd2lkdGg6IDY2JTsNCiAgICBtaW4td2lkdGg6IDU3MHB4Ow0KfQ0KI2NvbnRlbnRfbGVmdCAubmV3LXBtZCAuYy1zcGFuOSwNCiNjb250ZW50X2xlZnQgLm5ldy1wbWQgLmMtc3BhbjEwew0KICAgIHdpZHRoOiB1bnNldDsNCiAgICBmbG9hdDogdW5zZXQ7DQp9DQovKioqZml4IDJrKyBwcm9ibGVtKioqLw0KI2hlYWQgLmhlYWRfd3JhcHBlcnsNCiAgICB3aWR0aDogdW5zZXQ7IC8qZWRpdDogZml4IGJhaWR1IGJhbm5lciBwb3NpdGlvbiovDQp9DQpmb3JtLmZtIC5zX2J0biB7DQogICAgYmFja2dyb3VuZDogIzM0NzZkMjsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzM0NzZkMjsNCn0NCmZvcm0uZm0gLnNfYnRuOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kOiAjNEY3RmJGOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzQ3NmQyOw0KfQ0KI3dyYXBwZXIgI3NfdGFiIGIgew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGJvcmRlci1ib3R0b206IDNweCAjMzQ3NmQyIHNvbGlkOw0KfQ0KDQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLnNlYXJjaF90b29sX2NvbnRlciwNCiN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtcyB7DQogICAgd2lkdGg6IDYzMHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9ib3R0b21Ub3RvcDsNCiAgICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogLjJzOw0KICAgIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCiNoZWFkIC5oZWFkX3dyYXBwZXJ7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9sZWZ0VG9yaWdodDsNCiAgICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogLjJzOw0KICAgIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQoNCiN3cmFwcGVyICNycywNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQ+LmMtY29udGFpbmVyIHsNCiAgICB3aWR0aDogNjcwcHg7DQogICAgcGFkZGluZzogMHB4IDIwcHggMTVweDsNCiAgICBtYXJnaW4tdG9wOiAwcHg7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCiAgICBib3JkZXItcmFkaXVzOiAwOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4uYy1jb250YWluZXI6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5yZXN1bHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5jLWNvbnRhaW5lcjpob3ZlciBhcnRpY2xlew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsLjMpOw0KICAgIGJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtbW96LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JheTsNCn0NCiN3cmFwcGVyICNyc1thYy1uZWVkaGlkZV0sDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5yZXN1bHRbYWMtbmVlZGhpZGVdLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4uYy1jb250YWluZXJbYWMtbmVlZGhpZGVdew0KICAgIHBhZGRpbmc6IDVweDsNCiAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5yZXN1bHRbdHBsPSdzb2Z0J10gLm9wLXNvZnQtdGl0bGUsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5yZXN1bHQgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5jLWNvbnRhaW5lciBoMyB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCiAgICBtYXJnaW46IDBweCAtMjBweCAxMHB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDhweCAyMHB4IDVweDsNCiAgICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDBweCAwcHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5mMTMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjE4IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5zdWJMaW5rX2ZhY3RvcnkgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnN1YkxpbmtfYW5zd2VyIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXRhYnMtY29udGVudCBhLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Bfb2ZmaWNhbF93ZWlib19jb250ZW50IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9vZmZpY2FsX3dlaWJvX3B6IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC10aWViYS1nZW5lcmFsLXJpZ2h0LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV90aXRsZSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfdGFibGUgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfbW9yZWxpbmsgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXRpZWJhLWdlbmVyYWwtbWFpbnBsIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1vZmZzZXQ+ZGl2IGEgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGVtOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc3ViTGlua19mYWN0b3J5IGE6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5zdWJMaW5rX2Fuc3dlciBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy10YWJzLWNvbnRlbnQgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX3RpZWJhMl90YWJsaW5rc19jb250YWluZXIgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXRpZWJhLWdlbmVyYWwtcmlnaHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9kcTAxX3RpdGxlOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV90YWJsZSBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV9tb3JlbGluayBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3AtdGllYmEtZ2VuZXJhbC1tYWlucGwgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNlLWxpc3Rlbi1yZWNvbW1lbmQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLW9mZnNldD5kaXYgYTpob3ZlciB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUhaW1wb3J0YW50Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGEgew0KICAgIGNvbG9yOiAjMDA4MDAwOw0KfQ0KDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXNwYW4xOCwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjI0ew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1pbi13aWR0aDogdW5zZXQ7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWJvcmRlciB7DQogICAgd2lkdGg6IGF1dG87DQogICAgYm9yZGVyOiBub25lOw0KICAgIGJvcmRlci1ib3R0b20tY29sb3I6IHRyYW5zcGFyZW50Ow0KICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMHB4IDBweCB0cmFuc3BhcmVudDsNCiAgICAtbW96LWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KICAgIC1vLWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc2VfY29tX2lycmVndWxhcl9nYWxsZXJ5IHVsIGxpLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfamluZ3lhbl9saXN0LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IC5vcC1pbWctYWRkcmVzcy1saW5rLXR5cGUgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBtYXJnaW4tbGVmdDogMTBweDsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQ+LmMtY29udGFpbmVyW3RwbD0nc29mdCddIC5vcC1zb2Z0LXRpdGxlIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5jLWNvbnRhaW5lclt0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhIGVtLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4uYy1jb250YWluZXIgaDMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhIGVtLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzIGEgZW0gew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOmhvdmVyOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6aG92ZXI6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYTpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGE6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTphZnRlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhOmFmdGVyIHsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzNDc2ZDI7DQogICAgYm90dG9tOiAtMnB4Ow0KICAgIGxlZnQ6IDEwMCU7DQogICAgd2lkdGg6IDA7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4uYy1jb250YWluZXIgaDN7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgZm9udC1zaXplOiBtZWRpdW07DQp9DQoNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZCBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhOnZpc2l0ZWQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTp2aXNpdGVkIGVtIHsNCiAgICBjb2xvcjogIzY2MDA5OTsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIgew0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDEwMCU7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQ6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTp2aXNpdGVkOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzIGE6dmlzaXRlZDphZnRlciB7DQogICAgY29udGVudDogIiI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNjYwMDk5Ow0KICAgIGJvdHRvbTogLTJweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtZ3JvdXAtd3JhcHBlcnsNCiAgICBwYWRkaW5nOiAzMHB4Ow0KICAgIG1hcmdpbjogMCAwIDIwcHggMDsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtZ3JvdXAtd3JhcHBlciAuYy1ncm91cHsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZy10b3A6IDEwcHg7DQp9DQojd3JhcHBlciAjcnN7DQogICAgcGFkZGluZzogdW5zZXQ7DQogICAgbWFyZ2luOiAyMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICB6LWluZGV4OiAxOw0KfQ0KI3dyYXBwZXIgI3JzIC5uZXctcG1kew0KICAgIHBhZGRpbmc6IDIwcHg7DQp9DQoud3JhcHBlcl9uZXcgI2Zvcm0gLmJkc3VnLW5ld3sNCiAgICBwYWRkaW5nLXJpZ2h0OiAxMXB4Ow0KfQ0KI3dyYXBwZXIgI3JzIC50dCB7DQogICAgbWFyZ2luOiAtMjBweCAtMjBweCA1cHggLTIwcHg7DQogICAgcGFkZGluZzogMTVweCAyMHB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI3dyYXBwZXIgI3JzIHRhYmxlIHsNCiAgICB3aWR0aDogNjMwcHg7DQogICAgcGFkZGluZzogNXB4IDE1cHg7DQp9DQojd3JhcHBlciAjcnMgdGFibGUgdHIgYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDVweDsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiN3cmFwcGVyICNycyB0YWJsZSB0ciBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCiN3cmFwcGVyICNwYWdlIHsNCiAgICBtaW4td2lkdGg6IDcxMHB4Ow0KICAgIGhlaWdodDogNDBweDsNCiAgICBsaW5lLWhlaWdodDogNDBweDsNCiAgICBwYWRkaW5nLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDUwcHg7DQogICAgbWFyZ2luLWxlZnQ6IDBweDsNCn0NCi5vcC1pbWctYWRkcmVzcy1kZXNrdG9wLWNvbnR7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCiN3cmFwcGVyICNwYWdlIGEsDQojd3JhcHBlciAjcGFnZSBzdHJvbmcgew0KICAgIGNvbG9yOiMzNDc2ZDI7DQogICAgaGVpZ2h0OiBhdXRvOw0KfQ0KI3dyYXBwZXIgI3BhZ2UgLm57DQogICAgaGVpZ2h0OiAzNHB4Ow0KfQ0KI3dyYXBwZXIgI3BhZ2UgLm46aG92ZXIsDQojd3JhcHBlciAjcGFnZSBhOmhvdmVyIC5wYyB7DQogICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgYmFja2dyb3VuZDogI2Q4ZDhkODsNCiAgICBjb2xvcjogIzAwNTdkYTsNCn0NCiN3cmFwcGVyICNwYWdlIHN0cm9uZyAucGMgew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgY29sb3I6IHdoaXRlOw0KfQ0KLm9wLWltZy1hZGRyZXNzLWRpdmlkZS1oaWdoew0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9DQojd3JhcHBlciAja3d7DQogICAgd2lkdGg6IDk0JTsNCn0NCiNjb250YWluZXIuc2FtX25ld2dyaWQgLmMtY29udGFpbmVyIC50IC5BQy1mYXZpY29uVH5hLCAjY29udGFpbmVyLnNhbV9uZXdncmlkIC5jLWNvbnRhaW5lciAudCAuYy1pY29ufmF7DQogICAgZGlzcGxheTppbmxpbmUNCn0NCmJvZHkgI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCBhW2hyZWYqPSdvZmZpY2lhbCddIHsNCiAgICBjb2xvcjogd2hpdGU7DQp9DQojY29udGVudF9sZWZ0IC5jLWdyb3VwLW1pZGRsZSwjY29udGVudF9sZWZ0ICAuYy1ncm91cC10b3B7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweCAhaW1wb3J0YW50Ow0KfQ0KQC13ZWJraXQta2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0IHsNCiAgICAwJSB7DQogICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYW5pX3RvcFRvYnV0dG9tIHsNCiAgICAwJSB7DQogICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQojY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIC5jLWNvbnRhaW5lcnsNCiAgICB3aWR0aDogYXV0bzsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KfQ0KLmMtY29udGFpbmVyIC5jLXJlc3VsdC1jb250ZW50ew0KICAgIHBhZGRpbmctdG9wOiAyMHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAgLmMtY29udGFpbmVyIGFydGljbGV7DQogICAgcGFkZGluZy10b3A6IDE1cHg7DQogICAgYm9yZGVyOiB1bnNldCAhaW1wb3J0YW50Ow0KICAgIGJveC1zaGFkb3c6IHVuc2V0ICFpbXBvcnRhbnQ7DQp9DQpib2R5IC53cmFwcGVyX25ldyAjaGVhZC5maXgtaGVhZCAuc19mb3Jtew0KICAgIGhlaWdodDogNzBweDsNCn0NCi5BQy5zcC1zZXBhcmF0b3J7DQogICAgbWFyZ2luLXRvcDogLTEwcHg7DQogICAgd2lkdGg6IDY1MHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCmJvZHkuc2hvd1JpZ2h0ICN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGRpc3BsYXk6IHVuc2V0Ow0KfQ0KLnJlc3VsdC1tb2xlY3VsZSAjcGFnZSA+ZGl2ew0KICAgIHdpZHRoOiB1bnNldDsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyW3RwbD0ncmVjb21tZW5kX2xpc3QnXXsNCiAgICBwYWRkaW5nLXRvcDogMTBweDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQp9DQojY29udGVudF9sZWZ0IC5oaXQtdG9wdGlwew0KICAgIGdyaWQtY29sdW1uLXN0YXJ0OiAxOw0KICAgIGdyaWQtY29sdW1uLWVuZDogeG1haW4tZW5kOw0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDoxMjgwcHgpew0KICAgICN1IC50b2luZGV4LCAjdSAjaW1zZ3sNCiAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICB9DQp9DQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxOTIxcHgpew0KICAgIC8qQmFpZHUgaW4gMksgc2NyZWVuIGRlZmF1bHQgaW4gOiBjZW50ZXIqLw0KICAgICNoZWFkIC5oZWFkX3dyYXBwZXJ7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoLTEyMHB4LDAsMXB4KTsNCiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgfQ0KfQ0K"},{"meta":{"name":"baiduOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduOnePageStyle.css?t=25.012","ts":1642048881119,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVPbmVQYWdlU3R5bGUqKi8NCiN3cmFwcGVyX3dyYXBwZXIgI2NvbnRhaW5lcnsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7DQp9DQpmb3JtLmZtew0KICAgIHBvc2l0aW9uOnJlbGF0aXZlOw0KICAgIGJhY2tncm91bmQtY29sb3I6IHVuc2V0Ow0KfQ0KYm9keVtiYWlkdV0gLnBhZ2Vmb290Lmdqew0KICAgIG1hcmdpbi10b3A6IDEwMHB4Ow0KfQ0KLndyYXBwZXJfbmV3IC5oZWFkX3dyYXBwZXIgI3Jlc3VsdF9sb2dvew0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3NfdGFiIGIsI3NfdGFiIGF7DQogICAgcG9zaXRpb246cmVsYXRpdmU7DQp9DQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXJ7DQogICAgcG9zaXRpb246YWJzb2x1dGU7DQogICAgbGVmdDogMjAlOw0KICAgIHdpZHRoOiA2MCU7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0ew0KICAgIG1hcmdpbjogMCBhdXRvICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldCAhaW1wb3J0YW50Ow0KfQ0KI3dyYXBwZXIgICNjb250ZW50X2xlZnQsI3dyYXBwZXIgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjcnMsICN3cmFwcGVyICNwYWdlew0KICAgIHBvc2l0aW9uOnJlbGF0aXZlOw0KICAgIHBhZGRpbmctbGVmdDogMHB4Ow0KICAgIHdpZHRoOiA0MCUgIWltcG9ydGFudDsNCiAgICBtaW4td2lkdGg6IDY3MHB4Ow0KICAgIGZsb2F0OnVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiB1bnNldDsNCiAgICBtYXJnaW46IDAgYXV0bzsNCn0NCg0KI3dyYXBwZXIgI3BhZ2V7DQogICAgYmFja2dyb3VuZDogdW5zZXQ7DQp9DQojd3JhcHBlciAjcnMgdGh7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KI3dyYXBwZXIgI3Jzew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBtYXJnaW46IDMwcHggYXV0byAtMjBweCBhdXRvOw0KfQ0KI3dyYXBwZXIgICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQogICAgbWluLXdpZHRoOjY1MHB4Ow0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTAwMHB4KSB7DQogICAgI3dyYXBwZXIgICNjb250ZW50X2xlZnQsICN3cmFwcGVyICAjcnN7DQogICAgICAgIG1pbi13aWR0aDo4MDBweDsNCiAgICB9DQp9DQojd3JhcHBlciAjY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnR7DQogICAgcGFkZGluZy1sZWZ0OiAyMHB4Ow0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7DQogICAgZmxvYXQ6IHVuc2V0Ow0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCn0NCmJvZHkuc2hvd1JpZ2h0ICN3cmFwcGVyICNjb250YWluZXIuc2FtX25ld2dyaWQgI2NvbnRlbnRfbGVmdHsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoY2FsYyg2dncgLSAyNTFweCkpOw0KfQ0KYm9keS5zaG93UmlnaHQgI3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7DQogICAgcmlnaHQ6IGNhbGMoMzcuNXZ3IC0gNDcwcHgpOw0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTI4MHB4KXsNCiAgICBib2R5LnNob3dSaWdodCAjd3JhcHBlciAjY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnR7DQogICAgICAgIHRyYW5zZm9ybTogdW5zZXQ7DQogICAgfQ0KICAgIGJvZHkuc2hvd1JpZ2h0ICN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgIH0NCn0NCiN3cmFwcGVyICNwYWdlIGEsICN3cmFwcGVyICNwYWdlIHN0cm9uZ3sNCiAgICBtYXJnaW4tcmlnaHQ6IDIycHggIWltcG9ydGFudDsNCn0NCiN3cmFwcGVyICNwYWdlIC5wYWdlLWlubmVyew0KICAgIHBhZGRpbmctbGVmdDogMjJweDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KfQ0KLnNfdGFiX2lubmVyew0KICAgIGRpc3BsYXk6YmxvY2sgIWltcG9ydGFudDsNCn0NCiNjb250YWluZXIgLmhpbnRfY29tbW9uX3Jlc3RvcHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgbGVmdDogY2FsYyg0NXZ3IC0gNTAwcHgpOw0KICAgIG1hcmdpbi10b3A6IDI1cHg7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIHdpZHRoOiBhdXRvOw0KfQ0KLypzZWFyY2ggZW5naW5lIGp1bXAqLw0KI3Nlai1jb250YWluZXJ7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KICAgIG1hcmdpbi1sZWZ0OiAwOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5zX2Zvcm1fd3JhcHBlciB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCiN3cmFwcGVyICNzX3RhYnsNCiAgICBwYWRkaW5nLWxlZnQ6IDA7DQogICAgbWFyZ2luLWxlZnQ6IDA7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCiN3cmFwcGVyICNjb250YWluZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsDQojd3JhcHBlciAjY29udGFpbmVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtcyB7DQogICAgd2lkdGg6IDY5JTsNCiAgICBtYXJnaW4tbGVmdDogMTYlOw0KfQ0KZm9ybS5mbSAuc19pcHRfd3IuYmd7DQogICAgbWluLXdpZHRoOiBjYWxjKDM3LjV2dyAtIDE1MHB4KTsNCn0NCg0KLnJlc3VsdC1tb2xlY3VsZS5uZXctcG1kIHsNCiAgICBtYXJnaW46IDAgYXV0bzsNCiAgICBtaW4td2lkdGg6IDgwMHB4Ow0KICAgIHdpZHRoOiA0MCUgIWltcG9ydGFudDsNCiAgICBtYXJnaW4tdG9wOiA2cHg7DQogICAgcGFkZGluZy1sZWZ0OiAyMHB4Ow0KfQ0KDQoubmV3LXBtZCAjcnNfbmV3IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgICB3aWR0aDogY2FsYygxMDAlIC0gMjBweCk7DQogICAgcGFkZGluZzogMTBweCAwIDEwcHggMjBweDsNCn0NCi5yZXN1bHQtbW9sZWN1bGUgI3BhZ2UgPmRpdnsNCiAgICB3aWR0aDogdW5zZXQ7DQp9DQoNCi5uZXctcG1kICNyc19uZXcgdGFibGV7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbWFyZ2luLXRvcDogMTJweDsNCn0NCg0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMXB4KSB7DQogICAgI2hlYWQgLmhlYWRfd3JhcHBlcnsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgxNDBweCwwLDFweCk7DQogICAgfQ0KICAgIC53cmFwcGVyX25ldyAjc190YWIuc190YWIgLnNfdGFiX2lubmVyIHsNCiAgICAgICAgd2lkdGg6IDkwMHB4Ow0KICAgICAgICBwYWRkaW5nLWxlZnQ6IDI5NnB4Ow0KICAgIH0NCiAgICBmb3JtLmZtIC5zX2lwdF93ci5iZ3sNCiAgICAgICAgbWluLXdpZHRoOiBjYWxjKDM3LjV2dyAtIDE1MHB4KTsNCiAgICB9DQogICAgLmhlYWRfd3JhcHBlciAjdSB7DQogICAgICAgIHJpZ2h0OiAyMDBweDsNCiAgICB9DQp9DQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMzY2cHgpIGFuZCAobWF4LXdpZHRoOiAxOTIwcHgpIHsNCiAgICAud3JhcHBlcl9uZXcgLmhlYWRfd3JhcHBlciAjcmVzdWx0X2xvZ297DQogICAgICAgIG1hcmdpbi1sZWZ0OiAwcHg7DQogICAgfQ0KfQ0K"},{"meta":{"name":"baiduTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduTwoPageStyle.css?t=25.012","ts":1642048881141,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVUb3dQYWdlU3R5bGUqKi8NCiN3cmFwcGVyX3dyYXBwZXIgI2NvbnRhaW5lciB7DQogICAgd2lkdGg6IGF1dG87DQp9DQpmb3JtLmZtew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB1bnNldDsNCn0NCiNzX3RhYiBiLCAjc190YWIgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI3NfdGFiew0KICAgIHBhZGRpbmctbGVmdDogMDsNCiAgICBtYXJnaW4tbGVmdDogMDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KfQ0KI3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsDQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXMgew0KICAgIHdpZHRoOiA4MCU7DQogICAgbWFyZ2luLWxlZnQ6IDEwJTsNCn0NCiN3cmFwcGVyICAuaGVhZF9udW1zX2NvbnRfb3V0ZXIsDQouaGludF9jb21tb25fcmVzdG9wLA0KI2hlYWRlcl90b3BfYmFyIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbGVmdDogMTAlOw0KICAgIHdpZHRoOiA4MCU7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0LCAjY29udGFpbmVyIC5yZXN1bHQtbW9sZWN1bGUgew0KICAgIG1hcmdpbjogMCBhdXRvICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldCAhaW1wb3J0YW50Ow0KfQ0KI3dyYXBwZXIgI2hlYWRlcl90b3BfYmFyew0KICAgIG1hcmdpbi1ib3R0b206IDBweDsNCn0NCmJvZHkgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjY29udGVudF9sZWZ0ew0KICAgIHdpZHRoOiA4MCU7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0ew0KICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA1MCUgNTAlOw0KICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6ICJ4bWFpbiB4bWFpbiI7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHBhZGRpbmctbGVmdDogNSU7DQogICAgZmxvYXQ6IHVuc2V0Ow0KICAgIHdpZHRoOiA4MCU7DQogICAgbWFyZ2luLWxlZnQ6NyU7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCn0NCmJvZHlbbmV3c10gI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKXsNCiAgICBkaXNwbGF5OiBncmlkOw0KICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNTAlIDUwJTsNCiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOiAieG1haW4geG1haW4iOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7DQogICAgZGlzcGxheTpub25lICFpbXBvcnRhbnQ7DQp9DQojd3JhcHBlcl93cmFwcGVyICNjb250YWluZXIgI3Jzew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBtYXJnaW46IDAgYXV0bzsNCn0NCiN3cmFwcGVyICNwYWdlIHsNCiAgICBtaW4td2lkdGg6IDcxMHB4Ow0KICAgIGhlaWdodDogNDBweDsNCiAgICBsaW5lLWhlaWdodDogNDBweDsNCiAgICBwYWRkaW5nOiA1cHggMTBweDsNCiAgICBtYXJnaW46IDAgYXV0bzsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI3BhZ2UgLnBhZ2UtaW5uZXJ7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KfQ0KI3dyYXBwZXIgICNjb250ZW50X2xlZnQgLnJlc3VsdCwNCiN3cmFwcGVyICAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciB7DQogICAgd2lkdGg6IHVuc2V0ICFpbXBvcnRhbnQ7DQogICAgbWF4LXdpZHRoOiAxMDAlOw0KICAgIG1hcmdpbi1sZWZ0OiA1cHg7DQogICAgbWFyZ2luLXJpZ2h0OiAxNXB4Ow0KfQ0KDQojd3JhcHBlciAgI2NvbnRlbnRfbGVmdD4qOm5vdChbY2xhc3MqPSdyZXN1bHQnXSk6bm90KFtjbGFzcyo9J2MtZ3JvdXAtd3JhcHBlciddKXsNCglncmlkLWNvbHVtbi1zdGFydDogMTsNCiAgICBncmlkLWNvbHVtbi1lbmQ6IHhtYWluLWVuZDsNCn0NCi5jLWNvbnRhaW5lciBoMyBhew0KICAgIHotaW5kZXg6MTsNCn0NCi5BQy5zcC1zZXBhcmF0b3J7DQogICAgd2lkdGg6IGF1dG87DQp9DQovKnNlYXJjaCBlbmdpbmUganVtcCovDQojc2VqLWNvbnRhaW5lcnsNCiAgICBwYWRkaW5nLWxlZnQ6IDA7DQogICAgbWFyZ2luLWxlZnQ6IDA7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLnNfZm9ybV93cmFwcGVyIHsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KfQ0KDQoucmVzdWx0LW1vbGVjdWxlLm5ldy1wbWQgew0KICAgIG1hcmdpbjogMCBhdXRvOw0KICAgIG1pbi13aWR0aDogODAwcHg7DQogICAgd2lkdGg6IDQwJSAhaW1wb3J0YW50Ow0KICAgIHBhZGRpbmctbGVmdDogMjBweDsNCn0NCg0KLnJlc3VsdC1tb2xlY3VsZSAjcGFnZSA+ZGl2ew0KICAgIHdpZHRoOiB1bnNldDsNCn0NCg0KLm5ldy1wbWQgI3JzX25ldyB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogICAgd2lkdGg6IGNhbGMoMTAwJSAtIDIwcHgpOw0KICAgIHBhZGRpbmc6IDEwcHggMCAxMHB4IDIwcHg7DQp9DQoNCi5uZXctcG1kICNyc19uZXcgdGFibGV7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbWFyZ2luLXRvcDogMTJweDsNCn0NCg0KI3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsDQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXMgew0KICAgIHdpZHRoOiA4MCU7DQp9DQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxNTAwcHgpIHsNCiAgICBmb3JtLmZtIC5zX2lwdF93ci5iZ3sNCiAgICAgICAgbWluLXdpZHRoOiA0NTBweA0KICAgIH0NCiAgICAud3JhcHBlcl9uZXcgLmhlYWRfd3JhcHBlciAjcmVzdWx0X2xvZ297DQogICAgICAgIG1hcmdpbi1sZWZ0OiAtMTcwcHg7DQogICAgfQ0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMXB4KSB7DQogICAgI3NfdGFiLnNfdGFiIC5zX3RhYl9pbm5lciB7DQogICAgICAgIHdpZHRoOiA5MDBweDsNCiAgICB9DQogICAgZm9ybS5mbSAuc19pcHRfd3IuYmd7DQogICAgICAgIG1pbi13aWR0aDogOTAwcHgNCiAgICB9DQp9DQo="},{"meta":{"name":"baiduLiteStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduLiteStyle.css?t=25.01","ts":1642048881140,"mimetype":"text/css"},"source":"LyoNCiEgVmVyc2lvbjogMjAxODA0MjcwMDANCiEgVGl0bGU6ICBiYWlkdS1saXRlWzIwMTgwNDI3MDAwXQ0KISBMYXN0IG1vZGlmaWVkOiAyMDE5LzA5LzA1DQohIEV4cGlyZXM6IDEgZGF5cyAodXBkYXRlIGZyZXF1ZW5jeSkNCg0KVGhpcyBzdHlsZSBpcyBmcm9tIHd3dy55aWNsZWFyLmNvbSwgYW5kIHRoYW5rcyB0aGUgYXV0aG9yIG9mIHRoZSBzaXRlLg0KKi8NCip7Zm9udC1mYW1pbHk6LWFwcGxlLXN5c3RlbSwiSGVsdmV0aWNhIE5ldWUiLEhlbHZldGljYSwiTmltYnVzIFNhbnMgTCIsQXJpYWwsIkxpYmVyYXRpb24gU2FucyIsIlBpbmdGYW5nIFNDIiwiSGlyYWdpbm8gU2FucyBHQiIsIlNvdXJjZSBIYW4gU2FucyBDTiIsIlNvdXJjZSBIYW4gU2FucyBTQyIsIk1pY3Jvc29mdCBZYUhlaSIsIldlbnF1YW55aSBNaWNybyBIZWkiLCJXZW5RdWFuWWkgWmVuIEhlaSIsIlNUIEhlaXRpIixTaW1IZWksIldlblF1YW5ZaSBaZW4gSGVpIFNoYXJwIixzYW5zLXNlcmlmfQ0KOjotd2Via2l0LXNjcm9sbGJhcnt3aWR0aDo2cHg7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLDApfQ0KOjotd2Via2l0LXNjcm9sbGJhci10cmFja3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjEpfQ0KOjotd2Via2l0LXNjcm9sbGJhci10aHVtYntib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjIpO3RyYW5zaXRpb246YWxsIC40cyBlYXNlOy1tb3otdHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZX0NCjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXJ7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC40KTt0cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstbW96LXRyYW5zaXRpb246YWxsIC40cyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjRzIGVhc2V9DQouYW5pbWF0ZWR7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246MXM7YW5pbWF0aW9uLWR1cmF0aW9uOjFzO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aH0NCkAtd2Via2l0LWtleWZyYW1lcyBmYWRlSW5VcHtmcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwMCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKX10b3tvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQpAa2V5ZnJhbWVzIGZhZGVJblVwe2Zyb217b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMDAlLDApfXRve29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTpub25lO3RyYW5zZm9ybTpub25lfX0NCi5mYWRlSW5VcHstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmZhZGVJblVwO2FuaW1hdGlvbi1uYW1lOmZhZGVJblVwfQ0KQC13ZWJraXQta2V5ZnJhbWVzIGJvdW5jZUluUmlnaHR7NjAlLDc1JSw5MCUsZnJvbSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgzMDAwcHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwcHgsMCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNXB4LDAsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQpAa2V5ZnJhbWVzIGJvdW5jZUluUmlnaHR7NjAlLDc1JSw5MCUsZnJvbSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgzMDAwcHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwcHgsMCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNXB4LDAsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQouYm91bmNlSW5SaWdodHstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmJvdW5jZUluUmlnaHQ7YW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodH0NCkAtd2Via2l0LWtleWZyYW1lcyBib3VuY2VJblVwezYwJSw3NSUsOTAlLGZyb20sdG97LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMjE1LC42MSwuMzU1LDEpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSl9ZnJvbXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwzMDAwcHgsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMzAwMHB4LDApfTYwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKX03NSV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCl9OTAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsLTVweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtNXB4LDApfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApfX0NCmF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bWFyZ2luLWJvdHRvbToycHh9DQouYy1zaG93dXJsOmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lO2JvcmRlcjpub25lO29wYWNpdHk6Ljg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoucmVzLWdhcC1yaWdodDE2OmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCi5jLXNob3d1cmx7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10aXAtYXJyb3c6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmV9DQouYy1kZWZhdWx0IGF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmV9DQouYy1nYXAtYm90dG9tIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0NCi5vcF9kaWN0M19tb3JlbGluayBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9DQouYy1idG46aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KdGQgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfQ0KZW17dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KI3Nfd3JhcHtkaXNwbGF5Om5vbmV9DQoucy10b3AtbmF2e2Rpc3BsYXk6bm9uZX0NCiNzX2N0bmVyX21lbnVze2Rpc3BsYXk6bm9uZX0NCiNzX21lbnVfZ3VyZHtkaXNwbGF5Om5vbmV9DQojc19zdHJweF9zcGFuMXtkaXNwbGF5Om5vbmV9DQojZnRDb257ZGlzcGxheTpub25lfQ0KI2JvdHRvbV9jb250YWluZXJ7ZGlzcGxheTpub25lfQ0KI2xne2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtoZWlnaHQ6NzBweDtwYWRkaW5nLXRvcDoxNTBweH0NCiNsZyBpbWd7ZGlzcGxheTpub25lfQ0KI2xnIGF7ZGlzcGxheTpub25lfQ0KI2hlYWRfd3JhcHBlcntwYWRkaW5nLWJvdHRvbTowfQ0KLnNfZm9ybV93cmFwcGVye21hcmdpbi10b3A6YXV0bztkaXNwbGF5OiBmbGV4O30NCiNzX2xnX2ltZywjc19sZ19pbWdfbmV3e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQojZm9ybSAuc19pcHRfd3J7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czozcHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIWltcG9ydGFudDtoZWlnaHQ6MzlweDtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLCJIZWx2ZXRpY2EgTmV1ZSIsSGVsdmV0aWNhLCJOaW1idXMgU2FucyBMIixBcmlhbCwiTGliZXJhdGlvbiBTYW5zIiwiUGluZ0ZhbmcgU0MiLCJIaXJhZ2lubyBTYW5zIEdCIiwiU291cmNlIEhhbiBTYW5zIENOIiwiU291cmNlIEhhbiBTYW5zIFNDIiwiTWljcm9zb2Z0IFlhSGVpIiwiV2VucXVhbnlpIE1pY3JvIEhlaSIsIldlblF1YW5ZaSBaZW4gSGVpIiwiU1QgSGVpdGkiLFNpbUhlaSwiV2VuUXVhbllpIFplbiBIZWkgU2hhcnAiLHNhbnMtc2VyaWY7cGFkZGluZy10b3A6NHB4fQ0KLnNfaXB0e2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sIkhlbHZldGljYSBOZXVlIixIZWx2ZXRpY2EsIk5pbWJ1cyBTYW5zIEwiLEFyaWFsLCJMaWJlcmF0aW9uIFNhbnMiLCJQaW5nRmFuZyBTQyIsIkhpcmFnaW5vIFNhbnMgR0IiLCJTb3VyY2UgSGFuIFNhbnMgQ04iLCJTb3VyY2UgSGFuIFNhbnMgU0MiLCJNaWNyb3NvZnQgWWFIZWkiLCJXZW5xdWFueWkgTWljcm8gSGVpIiwiV2VuUXVhbllpIFplbiBIZWkiLCJTVCBIZWl0aSIsU2ltSGVpLCJXZW5RdWFuWWkgWmVuIEhlaSBTaGFycCIsc2Fucy1zZXJpZn0NCiNmb3JtIC5zX2lwdF93cjpob3Zlcntib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjJweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5pcHRob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5pcHRmb2N1c3tib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpfQ0KYm9keSAjZm9ybSAuc19idG57d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7bWFyZ2luLWxlZnQ6MDt6LWluZGV4OjEwMDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczttYXJnaW4tdG9wOjA7b3BhY2l0eTowfQ0KYm9keSAjZm9ybSAuc19idG46aG92ZXJ7b3BhY2l0eTouNTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMCk7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KYm9keSAjZm9ybSAuc19idG5fd3J7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCk7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO21hcmdpbi1sZWZ0OjVweDt6LWluZGV4OjEwMDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczttYXJnaW4tdG9wOjZweH0NCmJvZHkgI2Zvcm0gLnNfYnRuX3dyOmhvdmVye29wYWNpdHk6LjU7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDApO2JvcmRlcjpub25lO2JveC1zaGFkb3c6bm9uZTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5idG5ob3ZlcntvcGFjaXR5Oi41O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKSFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JveC1zaGFkb3c6bm9uZTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5oaW50X3RvcHJxX3RpcHN7bWFyZ2luLWJvdHRvbToxMnB4fQ0KLnNfZm9ybXtoZWlnaHQ6NzVweDtwYWRkaW5nLXRvcDoxMHB4fQ0KI3NfdGFie3BhZGRpbmc6ODdweCAwIDAgMTIxcHg7fQ0KI2hlYWQuc19kb3due2JveC1zaGFkb3c6MCAwIDVweCAjNjY2O3BhZGRpbmctYm90dG9tOiA4cHg7fQ0KLmJkc3Vne3RvcDo0MnB4O2JveC1zaGFkb3c6MCAycHggNXB4IDAgcmdiYSgwLDAsMCwuMTYpLDAgMnB4IDEwcHggMCByZ2JhKDAsMCwwLC4xMik7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czowIDAgMnB4IDJweDtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLCJIZWx2ZXRpY2EgTmV1ZSIsSGVsdmV0aWNhLCJOaW1idXMgU2FucyBMIixBcmlhbCwiTGliZXJhdGlvbiBTYW5zIiwiUGluZ0ZhbmcgU0MiLCJIaXJhZ2lubyBTYW5zIEdCIiwiU291cmNlIEhhbiBTYW5zIENOIiwiU291cmNlIEhhbiBTYW5zIFNDIiwiTWljcm9zb2Z0IFlhSGVpIiwiV2VucXVhbnlpIE1pY3JvIEhlaSIsIldlblF1YW5ZaSBaZW4gSGVpIiwiU1QgSGVpdGkiLFNpbUhlaSwiV2VuUXVhbllpIFplbiBIZWkgU2hhcnAiLHNhbnMtc2VyaWY7fQ0KLmJnc3VnIGxpe2ZvbnQtZmFtaWx5OkhlbHZldGljYSwiTWljcm9zb2Z0IFlhaGVpIFVJIiFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6MzZweCFpbXBvcnRhbnR9DQouYmdzdWcgdWwgbGl7bGluZS1oZWlnaHQ6MzJweCFpbXBvcnRhbnR9DQouYmRzdWctb3ZlcmZsb3d7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLCJNaWNyb3NvZnQgWWFoZWkgVUkiIWltcG9ydGFudDt3aWR0aDo1ODNweCFpbXBvcnRhbnR9DQojcXVpY2tkZWxldGV7dG9wOjVweCFpbXBvcnRhbnQ7b3BhY2l0eTouNX0NCiNrd190aXB7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLCJNaWNyb3NvZnQgWWFoZWkgVUkgTGlnaHQifQ0KI3Jlc3VsdF9sb2dve2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTVRBeElETXpJaUJ6ZEhsc1pUMGlaVzVoWW14bExXSmhZMnRuY205MWJtUTZibVYzSURBZ01DQXhNREVnTXpNN0lpQjRiV3c2YzNCaFkyVTlJbkJ5WlhObGNuWmxJajRLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNEtDUzV6ZERCN1ptbHNiRG9qTkRnM09VSkVPMzBLQ1M1emRERjdabWxzYkRvalJFUTBORE0yTzMwS0NTNXpkREo3Wm1sc2JEb2pSa1pHUmtaR08zMEtQQzl6ZEhsc1pUNEtQSEJoZEdnZ1kyeGhjM005SW5OME1DSWdaRDBpVFRVd0xqUXNNVFV1TTJNdE15NDRMREF1TXkwMExESXVOaTAxTGpjc05DNDNZeTB4TGpnc01pNHlMVFV1TlN3MExqRXROaXcyTGpkakxUQXVOaXd6TGpNc01TNHpMRFV1TVN3ekxEVXVOMk14TGprc01DNDJMRFl1TWkwd0xqVXNPQzQwTFRBdU5XZ3dMaklLQ1dnd0xqSmpNaTR5TERBc05pNDBMREV1TVN3NExqUXNNQzQxWXpFdU9DMHdMallzTXk0MUxUTXVNaXd6TFRVdU4yTXRNQzQwTFRJdU1TMDBMalF0TkM0MUxUWXVNaTAyTGpkRE5UUXVNaXd4T0N3MU5DNHpMREUxTGpZc05UQXVOQ3d4TlM0emVpQk5NemNzTVRRdU9Bb0pZekFzTWk0MExERXVOaXcwTGpNc015NDBMRFF1TTJNeExqa3NNQ3d6TGpRdE1TNDVMRE11TkMwMExqTmpNQzB5TGpRdE1TNDJMVFF1TXkwekxqUXROQzR6VXpNM0xERXlMalVzTXpjc01UUXVPSG9nVFRRekxqa3NPQzQyWXpBc01pNDFMREV1TlN3MExqVXNNeTR6TERRdU5Rb0pZekV1T0N3d0xETXVNeTB5TGpFc015NHpMVFF1TlZNME9TdzBMakVzTkRjdU1TdzBMakZETkRVdU15dzBMRFF6TGprc05pdzBNeTQ1TERndU5ub2dUVFV5TGpJc09DNDFZekFzTWk0ekxERXVOQ3cwTGpNc015NHlMRFF1TTNNekxqSXRNUzQ1TERNdU1pMDBMak56TFRFdU5DMDBMak10TXk0eUxUUXVNd29KVXpVeUxqSXNOaTR5TERVeUxqSXNPQzQxZWlCTk5UY3VOU3d4TlM0NVl6QXNNaTR6TERFdU5TdzBMak1zTXk0ekxEUXVNMk14TGpnc01Dd3pMak10TVM0NUxETXVNeTAwTGpOekxURXVOUzAwTGpNdE15NHpMVFF1TTBNMU9DNDVMREV4TGpZc05UY3VOU3d4TXk0MkxEVTNMalVzTVRVdU9Yb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUUXNNekF1TkhZdE5TNHhhRFl1TkdNeExqWXNNQ3d4TGpZc01DNHpMREV1Tml3eWRqRXVOR013TERFdU5pMHlMak1zTVM0NExUTXVPU3d4TGpoTU5Dd3pNQzQwVERRc016QXVOSG9nVFRRc01qTjJMVFF1T0dnMExqRUtDV014TGpZc01Dd3pMamtzTUN3ekxqa3NNaTR4ZGpBdU1XTXdMREV1TkMwd0xqVXNNaTQyTFRFdU9Dd3lMalpETVRBdU15d3lNeXcwTERJekxEUXNNak42SUUweExqY3NNVFoyTVRZdU0yZzJMalJqTXl3d0xEWXVNaXd3TERZdU1pMHpMaloyTFRFdU1XTXdMVEV1Tmkwd0xqRXRNaTQzTFRFdU1TMHpMalVLQ1dNeExUQXVPQ3d4TGpFdE1pNHpMREV1TVMwekxqWnNNQ3d3WXpBdE5DNDFMVE11TWkwMExqVXROaTR5TFRRdU5Vd3hMamNzTVRaTU1TNDNMREUyZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOTWpVc01qZ3VPV010TVM0eExERXVNUzB6TGpNc01TNHpMVE11TlN3eExqTmpMVEV1TXl3d0xUSXVOeTB3TGpVdE1pNDNMVEl1TVdNd0xURXVOQ3d3TGpVdE1pNHpMREl1TVMweUxqTmpNUzR6TERBc01pNDRMREF1TVN3MExqRXNNQzQyVmpJNExqbDZDZ2tnVFRJeExqUXNNekl1TTJNd0xqUXNNQ3d5TGpNdE1DNHhMRE11Tnkwd0xqbHNNQzR5TERBdU4yZ3lMakYyTFRndU9XTXdMVE11TmkweUxqTXROUzAxTGpjdE5XTXRNUzQ0TERBdE5DNHpMREF1TnkwMExqY3NNQzQ1YkRBdU5Dd3lMak5qTVM0MkxUQXVOaXd6TFRBdU5pdzBMakl0TUM0MkNnbGpNUzQ0TERBc015NHpMREF1Tml3ekxqTXNNaTQyVmpJMFl5MHhMVEF1TkMweUxqUXRNQzQyTFRRdU1TMHdMalpqTFRNc01DMDBMalVzTVM0MkxUUXVOU3cwTGpkRE1UWXVOQ3d6TVM0NExERTVMallzTXpJdU15d3lNUzQwTERNeUxqTjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHpNQzR5TERFMkxqRmpNQ3d3TGpZc01DNDJMREV1TWl3eExqTXNNUzR5WXpBdU9Dd3dMREV1TXkwd0xqWXNNUzR6TFRFdU1tTXdMVEF1Tnkwd0xqWXRNUzR6TFRFdU15MHhMak5ETXpBdU9Dd3hOQzQ0TERNd0xqSXNNVFV1TXl3ek1DNHlMREUyTGpGNkNna2dUVE13TGpNc016SXVNV2d5TGpSV01UZ3VOV2d0TWk0MFZqTXlMakY2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazAzTVM0eUxESXlMakZvT0M0MFl6QXVOQ3d3TGpFc01DNDJMREF1TXl3d0xqWXNNQzQzZGpJdU5tZ3RPUzQzZGkweUxqWkROekF1Tml3eU1pNDBMRGN3TGpnc01qSXVNaXczTVM0eUxESXlMakY2SUUwM01TNHlMRE13TGpVS0NXTXRNQzQwTERBdE1DNDJMVEF1TXkwd0xqY3RNQzQ0ZGkweUxqWm9PUzQzZGpJdU5tTXdMREF1TkMwd0xqSXNNQzQzTFRBdU5pd3dMamRJTnpFdU1ub2dUVGN6TGpZc01UaGpMVEF1TVN3d0xqUXRNQzR4TERBdU9TMHdMalFzTVM0M1l5MHdMakVzTUM0ekxUQXVNU3d3TGpVdE1DNHhMREF1TndvSmFDMHlMalpqTFRFdU15d3dMakV0TVM0NUxEQXVPQzB5TERKMk55NDVZekF1TVN3eExqRXNNQzQ0TERFdU9Dd3lMREV1T1dneE1HTXhMakl0TUM0eExERXVPQzB3TGpjc01TNDVMVEV1T0hZdE55NDVZeTB3TGpFdE1TNHpMVEF1TnkweExqa3RNUzQ1TFRJdU1XZ3ROUW9KWXpBdU1TMHdMak1zTUM0eExUQXVPQ3d3TGpNdE1TNDBZekF1TVMwd0xqUXNNQzR4TFRBdU55d3dMakV0TUM0NWFEY3VNbll0TVM0NFNEWTNMalJXTVRoTU56TXVOaXd4T0V3M015NDJMREU0ZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOT1RNdU55d3lNaTQzWXkwd0xqUXRNQzR4TFRBdU5TMHdMakl0TUM0MUxUQXVOWFl0TUM0MmFETXVNbll3TGpaakxUQXVNU3d3TGpNdE1DNHlMREF1TkMwd0xqVXNNQzQxU0RrekxqZDZJRTA1Tmk0MkxESTBMakVLQ1dNeExqRXRNQzR4TERFdU5pMHdMalVzTVM0MkxURXVOSFl0TVdneUxqTjJMVEV1TldndE1pNHpkaTB4TGpGb0xURXVPSFl4TGpGb0xUTXVNbll0TVM0eGFDMHhMamgyTVM0eGFDMHlMak4yTVM0MWFESXVNM1l4WXpBdU1Td3dMamtzTUM0MkxERXVOQ3d4TGpZc01TNDBTRGsyTGpaNkNna2dUVGswTGpnc016QXVOR014TGpZc01DNDRMRE11TkN3eExqTXNOUzQwTERFdU9Hd3dMamt0TVM0M1l5MHhMalF0TUM0eUxUSXVPUzB3TGpZdE5DNDBMVEV1TVdNeExqRXRNQzQ0TERJdE1TNDJMREl1TnkweUxqVmpNQzR6TFRBdU5Dd3dMalF0TUM0NUxEQXVNaTB4TGpNS0NXTXRNQzR6TFRBdU5pMHdMamd0TUM0NUxURXVOQzB3TGpsb0xUbDJNUzQxYURjdU4yTXdMaklzTUN3d0xqUXNNQzR4TERBdU5Dd3dMakZ6TUN3d0xqRXRNQzR4TERBdU0yTXRNQzQyTERBdU5pMHhMalFzTVM0ekxUSXVNeXd4TGpoakxURXVNaTB3TGpjdE1pNHhMVEV1TXkweUxqUXRNUzQ0YUMweUxqSUtDV013TGprc01Td3hMamdzTVM0NUxESXVPU3d5TGpkakxURXVOaXd3TGpZdE15NHpMREV1TVMwMExqa3NNUzR6YkRBdU9Td3hMalpET1RFdU15d3pNUzQ0TERrekxqSXNNekV1TVN3NU5DNDRMRE13TGpSNklFMDRPQzR6TERJMUxqSjJMVFpqTUM0eExUQXVOaXd3TGpNdE1DNDVMREF1T0Mwd0xqa0tDV2d4TVM0NGRpMHhMalpJT1RWakxUQXVNUzB3TGpFdE1pNHlMVEF1TVMweUxqSXNNR2d0TkM0M1l5MHhMakVzTUM0eExURXVOeXd3TGprdE1TNDRMREl1TWxZeU5XTXdMakVzTWk0eExUQXVOQ3cwTGpRdE1TNHhMRFl1TjJ3eExqa3NNQzQyQ2dsRE9EY3VPU3d5T1M0NUxEZzRMak1zTWpjdU5pdzRPQzR6TERJMUxqSjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMDBOaTR6TERJMExqSmpNQzQyTERBc01TNHlMREF1TVN3eExqY3NNQzQwZGpNdU5HTXdMREF1TXkwd0xqWXNNUzB4TGprc01XTXRNUzQxTERBdE1TNDRMVEF1TmkweExqZ3RNaTR4ZGkwd0xqWUtDVU0wTkM0eUxESTBMamdzTkRRdU55d3lOQzR5TERRMkxqTXNNalF1TW5vZ1RUUTVMaklzTWpBdU4wZzBPSFl5TGpWRE5EY3VOaXd5TXk0eExEUTNMREl6TERRMkxqTXNNak5qTFRJdU55d3dMVE11TXl3eExUTXVNeXd6TGpWMk1DNHpZekFzTWk0MExEQXVPU3d6TGpNc015NHlMRE11TXdvSll6QXVPQ3d3TERFdU15MHdMakVzTVM0NExUQXVOV3d3TGpFc01DNDJhREV1TVV3ME9TNHlMREl3TGpkTU5Ea3VNaXd5TUM0M2VpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXlJaUJrUFNKTk5UWXVOeXd5TTJndE1TNHlkalV1TW1NdE1DNDJMREF1TkMweExqY3NNQzQyTFRJdU5Dd3dMalpqTFRBdU9Dd3dMVEV0TUM0MExURXRNUzR6ZGkwMExqWm9MVEV1TVhZMExqaGpNQ3d4TGpZc01DNDFMREl1TXl3eUxqRXNNaTR6Q2dsak1Td3dMREl1TVMwd0xqTXNNaTQyTFRBdU5td3dMakVzTUM0MmFERXVNVll5TTNvaUx6NEtQSEJoZEdnZ1kyeGhjM005SW5OME1TSWdaRDBpVFRreUxqY3NNVFV1TjJNd0xUQXVOeXd3TGpZdE1TNHpMREV1TWkweExqTmpNQzQyTERBc01TNHlMREF1Tml3eExqSXNNUzR6VXprMExqVXNNVGNzT1RNdU9Td3hOME01TXk0ekxERTJMamtzT1RJdU55d3hOaTR6TERreUxqY3NNVFV1TjNvaUx6NEtQQzl6ZG1jK0NnPT0iKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7d2lkdGg6MTAxcHg7aGVpZ2h0OjMzcHg7bWFyZ2luLXRvcDo5cHh9DQojcmVzdWx0X2xvZ28gaW1ne2Rpc3BsYXk6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbn0NCiNyZXN1bHRfbG9nbyBhIGltZ3tkaXNwbGF5Om5vbmU7dmlzaWJpbGl0eTpoaWRkZW59DQouYy1jb250YWluZXJ7bGluZS1oZWlnaHQ6MS42NX0NCiNyc3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCkhaW1wb3J0YW50fQ0KLmMtYm9yZGVyey13ZWJraXQtYm94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JvcmRlci1yYWRpdXM6MnB4O2JvcmRlcjpub25lO3BhZGRpbmc6MjBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5jLWJvcmRlcjpob3Zlcntib3gtc2hhZG93OjAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMTYpLDAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMjMpO3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5jLXRhYnMtbmF2e2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MnB4IDJweCAwIDA7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLmMtdGFicy1uYXYtbW92ZXRvcHttYXJnaW4tbGVmdDotMjBweDttYXJnaW4tcmlnaHQ6LTIwcHg7bWFyZ2luLXRvcDotMjBweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10YWJzLW5hdi1zZWxlY3RlZHtib3JkZXItdG9wOm5vbmUhaW1wb3J0YW50O2JvcmRlci1sZWZ0Om5vbmUhaW1wb3J0YW50O2JvcmRlci1yaWdodDpub25lIWltcG9ydGFudDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10YWJzLW5hdi1zZXB7ZGlzcGxheTpub25lIWltcG9ydGFudH0NCiNwYWdlIGF7aGVpZ2h0OjM0cHg7Ym9yZGVyLXJhZGl1czoycHg7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKTt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojcGFnZSBhOmhvdmVye3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiNwYWdlIGEgLnBjOmhvdmVye3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiNwYWdlIHN0cm9uZ3toZWlnaHQ6MzRweDtib3JkZXItcmFkaXVzOjJweDtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6LTJweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojcGFnZSBzdHJvbmcgLnBje2xpbmUtaGVpZ2h0OjM0cHg7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLmZre2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQoucGN7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2hlaWdodDozNXB4O3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5wYzpob3Zlcnt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojc190YWIgYXt3aWR0aDo1OXB4O2xpbmUtaGVpZ2h0OjQ0cHh9DQojc190YWIgYnt3aWR0aDo1OXB4O2xpbmUtaGVpZ2h0OjQ0cHh9DQojc190YWJ7cGFkZGluZy1ib3R0b206OHB4O3BhZGRpbmctdG9wOjg5cHh9DQouYy1pY29uLXRpZWJhe2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcn0NCi50b2luZGV4e2Rpc3BsYXk6bm9uZX0NCi53cmFwcGVyX25ldyAuc190YWJfaW5uZXJ7cGFkZGluZy10b3A6IDEwcHg7fQ0KLndyYXBwZXJfbmV3IC5zX2lwdF93cntiYWNrZ3JvdW5kOiAjZmZmZmZmO30NCi53cmFwcGVyX25ldy53cmFwcGVyX3MgI2Zvcm0gLmJkc3VnLW5ld3t3aWR0aDogOTMlO30NCiN1IC5wZntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3BhZGRpbmctdG9wOjE4cHg7cGFkZGluZy1ib3R0b206MTBweDt9DQojdSAucGY6aG92ZXJ7b3BhY2l0eToxOyAtbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9DQoud3JhcHBlcl9uZXcgI3U+YS5wZntjb2xvcjpyZ2JhKDAsMCwwLDApOyBtYXJnaW46IDRweCAwIDAgMjRweDt9DQoud3JhcHBlcl9uZXcgI3U+YS5wZjpob3Zlcntjb2xvcjpyZ2JhKDAsMCwwLDApfQ0KLnBmIC5jLWljb257ZGlzcGxheTpub25lIWltcG9ydGFudH0NCi5jLWljb24tdHJpYW5nbGUtZG93bntkaXNwbGF5Om5vbmV9DQouYmRwZm1lbnV7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmU7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7bWFyZ2luLWxlZnQ6LTEwcHg7bWFyZ2luLXRvcDozMHB4O3otaW5kZXg6ODg4OCFpbXBvcnRhbnR9DQouYmRwZm1lbnUgYTpob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5iZG51YXJyb3d7ZGlzcGxheTpub25lIWltcG9ydGFudH0NCi5zZXRwcmVme2JvcmRlci1yYWRpdXM6MnB4IDJweCAwIDA7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouc2V0cHJlZjpob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiN1IC5sYntwYWRkaW5nOjIzcHg7Ym9yZGVyLXJhZGl1czo1MHB4O2ZvbnQtc2l6ZTowO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjUwcHg7dG9wOjM4MDAlO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdSAubGI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdSAubGI6YWN0aXZle2JveC1zaGFkb3c6MCAxMHB4IDMwcHggcmdiYSgwLDAsMCwuMTkpLDAgNnB4IDEwcHggcmdiYSgwLDAsMCwuMjMpO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLnRhbmctZm9yZWdyb3VuZHtib3JkZXItcmFkaXVzOjJweDtib3gtc2hhZG93OjAgMTlweCA2MHB4IHJnYmEoMCwwLDAsLjMpLDAgMTVweCAyMHB4IHJnYmEoMCwwLDAsLjIyKX0NCiNzX3VwZnVuY19tZW51c3tkaXNwbGF5Om5vbmV9DQojYmd7YmFja2dyb3VuZC1jb2xvcjojRkZGRkZGIWltcG9ydGFudDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjNweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUhaW1wb3J0YW50O3otaW5kZXg6LTE7d2lkdGg6NjAwcHg7aGVpZ2h0OjM5cHg7Zm9udC1mYW1pbHk6LWFwcGxlLXN5c3RlbSwiSGVsdmV0aWNhIE5ldWUiLEhlbHZldGljYSwiTmltYnVzIFNhbnMgTCIsQXJpYWwsIkxpYmVyYXRpb24gU2FucyIsIlBpbmdGYW5nIFNDIiwiSGlyYWdpbm8gU2FucyBHQiIsIlNvdXJjZSBIYW4gU2FucyBDTiIsIlNvdXJjZSBIYW4gU2FucyBTQyIsIk1pY3Jvc29mdCBZYUhlaSIsIldlbnF1YW55aSBNaWNybyBIZWkiLCJXZW5RdWFuWWkgWmVuIEhlaSIsIlNUIEhlaXRpIixTaW1IZWksIldlblF1YW5ZaSBaZW4gSGVpIFNoYXJwIixzYW5zLXNlcmlmO3BhZGRpbmctdG9wOjVweCFpbXBvcnRhbnR9DQojaGVhZF93cmFwcGVyIC5zX2lwdHtib3JkZXI6MCFpbXBvcnRhbnQ7aGVpZ2h0OjIwcHghaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MnB4O3dpZHRoOjU4NnB4IWltcG9ydGFudH0NCiNoZWFkX3dyYXBwZXIgLm5vYmdfc19mbV9ob3Zlcntib3JkZXI6MCFpbXBvcnRhbnR9DQojaGVhZF93cmFwcGVyIC5ub2JnX3NfZm1fZm9jdXN7Ym9yZGVyOjAhaW1wb3J0YW50O2JvcmRlci10b3A6MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItYm90dG9tOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQ6MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICMzOGZ9DQoucy10aXRsZS1pbWFnZXtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym9yZGVyLXRvcDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1ib3R0b206MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItbGVmdDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1yaWdodDowIHNvbGlkICNmZmYhaW1wb3J0YW50fQ0KI3NfbGdfaW1ne2Rpc3BsYXk6bm9uZX0NCiNmb3Jtey13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjAuMnM7YW5pbWF0aW9uLWR1cmF0aW9uOjAuMnM7LXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1uYW1lOmZhZGVJblVwOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmFkZUluVXA7YW5pbWF0aW9uLWRlbGF5Oi4zczstd2Via2l0LWFuaW1hdGlvbi1kZWxheTouM3N9DQpib2R5Om5vdChbbmV3c10pICNoZWFkX3dyYXBwZXIgI2Zvcm0uZm17bWluLXdpZHRoOiA1MCU7d2lkdGg6IDExMCU7fQ0KLnMtcC10b3B7dHJhbnNmb3JtOnNjYWxlKC44KTtib3R0b206OXB4IWltcG9ydGFudH0NCi5tbmF2e2Rpc3BsYXk6bm9uZX0NCiN1X3NwIC5tbmF2e2Rpc3BsYXk6bm9uZX0NCiN1MSBhLmxie3BhZGRpbmc6MjNweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDo0NHB4O3RvcDoxMDQwJTtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ05EWWdORFlpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRFEySURRMk95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2STBaR1JrWkdSanQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHlNeXd5TTJNeUxqa3NNQ3cxTGpJdE1pNHpMRFV1TWkwMUxqSnpMVEl1TXkwMUxqSXROUzR5TFRVdU1uTXROUzR5TERJdU15MDFMaklzTlM0eVV6SXdMakVzTWpNc01qTXNNak42SUUweU15d3lOUzQyQ2dsakxUTXVOU3d3TFRFd0xqUXNNUzQzTFRFd0xqUXNOUzR5ZGpJdU5tZ3lNQzQzZGkweUxqWkRNek11TkN3eU55NHpMREkyTGpVc01qVXVOaXd5TXl3eU5TNDJlaUl2UGdvOEwzTjJaejRLIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztsaW5lLWhlaWdodDowO3otaW5kZXg6MTAwfQ0KI3UxIGEubGI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdTEgYS5sYjphY3RpdmV7Ym94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLC4xOSksMCA2cHggMTBweCByZ2JhKDAsMCwwLC4yMyk7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdTEgYS5wZntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3otaW5kZXg6MH0NCiN1MSBhLmJyaXtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCk7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2ZvbnQtc2l6ZTowO3BhZGRpbmc6MnB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6MTJweH0NCiN3cmFwcGVyIC5iZGJyaWltZ3RpdGxle3BhZGRpbmctdG9wOjIzcHh9DQojd3JhcHBlciAuYmRicmkuYmRicmlpbWcgLmJkbWFpbmxpbmsgYXtib3JkZXI6bm9uZX0NCiN3cmFwcGVyIC5iZGJyaXt6LWluZGV4OjJ9DQojd3JhcHBlciAjdV9zcCAuc19icml7cGFkZGluZzo1cHg7Ym9yZGVyLXJhZGl1czo1MCU7Zm9udC1zaXplOjA7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4T1M0eUxqRXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5Danh6ZG1jZ2RtVnljMmx2YmowaU1TNHhJaUJwWkQwaTVadSs1YkdDWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0RRbzhjM1I1YkdVZ2RIbHdaVDBpZEdWNGRDOWpjM01pUGcwS0NTNXpkREI3Wm1sc2JEb2pSa1pHUmtaR08zME5Dand2YzNSNWJHVStEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXdJaUJrUFNKTk1UQXNNVE5vTTNZdE0yZ3RNMVl4TTNvZ1RURTBMalVzTWpKb00zWXRNMmd0TTBNeE5DNDFMREU1TERFMExqVXNNaklzTVRRdU5Td3lNbm9nVFRFd0xESXlhRE4yTFROb0xUTldNako2SUUweE1Dd3hOeTQxYUROMkxUTm9MVE5XTVRjdU5Yb05DZ2tnVFRFMExqVXNNVGN1TldnemRpMHphQzB6UXpFMExqVXNNVFF1TlN3eE5DNDFMREUzTGpVc01UUXVOU3d4Tnk0MWVpQk5NVGtzTVRCMk0yZ3pkaTB6U0RFNWVpQk5NVFF1TlN3eE0yZ3pkaTB6YUMwelF6RTBMalVzTVRBc01UUXVOU3d4TXl3eE5DNDFMREV6ZWlCTk1Ua3NNVGN1TldnemRpMHphQzB6RFFvSlZqRTNMalY2SUUweE9Td3lNbWd6ZGkwemFDMHpWakl5ZWlJdlBnMEtQQzl6ZG1jK0RRbz0iKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2xpbmUtaGVpZ2h0OjA7ei1pbmRleDoxMDA7bWFyZ2luLXJpZ2h0OjIycHg7bWFyZ2luLXRvcDoxcHh9DQojdV9zcCAuc19iZGJyaWltZ3RpdGxle3BhZGRpbmctdG9wOjczcHh9DQojc191c2Vyc2V0dGluZ190b3B7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2ZvbnQtc2l6ZTowO3BhZGRpbmc6MTRweDtvcGFjaXR5Oi44Oy1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTttYXJnaW4tdG9wOjEycHg7bWFyZ2luLXJpZ2h0OjRweDt6LWluZGV4Oi0xMDB9DQojc190b3Bfd3JhcHt6LWluZGV4Oi0xMDtib3JkZXItYm90dG9tOnVuc2V0O30NCiN1IC50b2luZGV4e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQojc191c2VybmFtZV90b3B7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bWFyZ2luLXRvcDoyNnB4O21hcmdpbi1sZWZ0OjVweDtib3JkZXI6bm9uZTtwYWRkaW5nLWxlZnQ6MTBweDtwYWRkaW5nLXJpZ2h0OjEwcHg7Ym9yZGVyLXJhZGl1czoxNnB4O21hcmdpbi1yaWdodDotM3B4fQ0KLnVzZXItbmFtZXt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9DQoubWVudS1hcnJvd3tkaXNwbGF5Om5vbmUhaW1wb3J0YW50fQ0KLnNfdXNlcl9uYW1lX21lbnV7dGV4dC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50fQ0KLnMtdXNlci1zZXQtbWVudS5tZW51LXRvcHt3aWR0aDoxMDBweH0NCi5zLXVzZXItc2V0LW1lbnUgZGl2e2JvcmRlcjpub25lIWltcG9ydGFudDtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHh9DQoucy11c2VyLXNldC1tZW51e3BhZGRpbmctdG9wOjA7bWFyZ2luLXRvcDozNnB4O2JvcmRlci1yYWRpdXM6MnB4IWltcG9ydGFudH0NCi5zLXVzZXItc2V0LW1lbnUgYXtwYWRkaW5nLWxlZnQ6MjVweDstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9DQoucy11c2VyLXNldC1tZW51IGE6aG92ZXJ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KI3VzZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50O21hcmdpbi10b3A6MzBweDttYXJnaW4tbGVmdDo1cHg7Ym9yZGVyOm5vbmU7cGFkZGluZy1sZWZ0OjEwcHg7cGFkZGluZy1yaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6MTZweDttYXJnaW4tcmlnaHQ6LTNweDtoZWlnaHQ6MjNweDtwYWRkaW5nLXRvcDo4cHg7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246MXM7YW5pbWF0aW9uLWR1cmF0aW9uOjFzOy13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tbmFtZTpib3VuY2VJblJpZ2h0Oy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodH0NCi51c2VybWVudXtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDstd2Via2l0LWJveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7d2lkdGg6ODNweDtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7dG9wOjM1cHghaW1wb3J0YW50O21hcmdpbjogMCBhdXRvO30NCi51c2VybmFtZSBhey1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3JkZXItcmFkaXVzOjJweH0NCi51c2VybmFtZSBhOmhvdmVye2JhY2tncm91bmQ6IzM0NzZkMiFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KLnVzZXJuYW1lIGE6YWN0aXZle2JhY2tncm91bmQ6IzM0NzZkMiFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KI3VzZXIgLmMtaWNvbntkaXNwbGF5Om5vbmV9DQojaW1zZ3tiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3otaW5kZXg6MDtwYWRkaW5nLXRvcDoyNXB4O3BhZGRpbmctYm90dG9tOjIxcHh9DQojaW1zZzpob3ZlcntvcGFjaXR5OjF9DQouaGVhZF93cmFwcGVyICNiZHMtbWVzc2FnZS13cmFwcGVye3RvcDo2NHB4fQ0KLnMtbW9kLW1zZ3tib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50Oy13ZWJraXQtYm94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjNweH0NCi5tc2ctYnRue2JvcmRlci1yYWRpdXM6MnB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoubXNnLWJ0bjpob3Zlcntib3JkZXItcmFkaXVzOjJweDtib3gtc2hhZG93OjAgMXB4IDZweCByZ2JhKDAsMCwwLC4xMiksMCAxcHggNHB4IHJnYmEoMCwwLDAsLjEyKTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLm1zZy1idG46YWN0aXZle2JvcmRlci1yYWRpdXM6MnB4O2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoubm8tdXNlOmhvdmVye2JveC1zaGFkb3c6bm9uZSFpbXBvcnRhbnR9DQoudG9wLWxvZ28gaW1ne2Rpc3BsYXk6bm9uZX0NCi50b3AtbG9nb3tiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ01UQXhJRE16SWlCemRIbHNaVDBpWlc1aFlteGxMV0poWTJ0bmNtOTFibVE2Ym1WM0lEQWdNQ0F4TURFZ016TTdJaUI0Yld3NmMzQmhZMlU5SW5CeVpYTmxjblpsSWo0S1BITjBlV3hsSUhSNWNHVTlJblJsZUhRdlkzTnpJajRLQ1M1emREQjdabWxzYkRvak5EZzNPVUpFTzMwS0NTNXpkREY3Wm1sc2JEb2pSRVEwTkRNMk8zMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBLUEM5emRIbHNaVDRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNQ0lnWkQwaVRUVXdMalFzTVRVdU0yTXRNeTQ0TERBdU15MDBMREl1TmkwMUxqY3NOQzQzWXkweExqZ3NNaTR5TFRVdU5TdzBMakV0Tml3MkxqZGpMVEF1Tml3ekxqTXNNUzR6TERVdU1Td3pMRFV1TjJNeExqa3NNQzQyTERZdU1pMHdMalVzT0M0MExUQXVOV2d3TGpJS0NXZ3dMakpqTWk0eUxEQXNOaTQwTERFdU1TdzRMalFzTUM0MVl6RXVPQzB3TGpZc015NDFMVE11TWl3ekxUVXVOMk10TUM0MExUSXVNUzAwTGpRdE5DNDFMVFl1TWkwMkxqZEROVFF1TWl3eE9DdzFOQzR6TERFMUxqWXNOVEF1TkN3eE5TNHplaUJOTXpjc01UUXVPQW9KWXpBc01pNDBMREV1Tml3MExqTXNNeTQwTERRdU0yTXhMamtzTUN3ekxqUXRNUzQ1TERNdU5DMDBMak5qTUMweUxqUXRNUzQyTFRRdU15MHpMalF0TkM0elV6TTNMREV5TGpVc016Y3NNVFF1T0hvZ1RUUXpMamtzT0M0Mll6QXNNaTQxTERFdU5TdzBMalVzTXk0ekxEUXVOUW9KWXpFdU9Dd3dMRE11TXkweUxqRXNNeTR6TFRRdU5WTTBPU3cwTGpFc05EY3VNU3cwTGpGRE5EVXVNeXcwTERRekxqa3NOaXcwTXk0NUxEZ3VObm9nVFRVeUxqSXNPQzQxWXpBc01pNHpMREV1TkN3MExqTXNNeTR5TERRdU0zTXpMakl0TVM0NUxETXVNaTAwTGpOekxURXVOQzAwTGpNdE15NHlMVFF1TXdvSlV6VXlMaklzTmk0eUxEVXlMaklzT0M0MWVpQk5OVGN1TlN3eE5TNDVZekFzTWk0ekxERXVOU3cwTGpNc015NHpMRFF1TTJNeExqZ3NNQ3d6TGpNdE1TNDVMRE11TXkwMExqTnpMVEV1TlMwMExqTXRNeTR6TFRRdU0wTTFPQzQ1TERFeExqWXNOVGN1TlN3eE15NDJMRFUzTGpVc01UVXVPWG9pTHo0S1BIQmhkR2dnWTJ4aGMzTTlJbk4wTVNJZ1pEMGlUVFFzTXpBdU5IWXROUzR4YURZdU5HTXhMallzTUN3eExqWXNNQzR6TERFdU5pd3lkakV1TkdNd0xERXVOaTB5TGpNc01TNDRMVE11T1N3eExqaE1OQ3d6TUM0MFREUXNNekF1TkhvZ1RUUXNNak4yTFRRdU9HZzBMakVLQ1dNeExqWXNNQ3d6TGprc01Dd3pMamtzTWk0eGRqQXVNV013TERFdU5DMHdMalVzTWk0MkxURXVPQ3d5TGpaRE1UQXVNeXd5TXl3MExESXpMRFFzTWpONklFMHhMamNzTVRaMk1UWXVNMmcyTGpSak15d3dMRFl1TWl3d0xEWXVNaTB6TGpaMkxURXVNV013TFRFdU5pMHdMakV0TWk0M0xURXVNUzB6TGpVS0NXTXhMVEF1T0N3eExqRXRNaTR6TERFdU1TMHpMalpzTUN3d1l6QXROQzQxTFRNdU1pMDBMalV0Tmk0eUxUUXVOVXd4TGpjc01UWk1NUzQzTERFMmVpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1qVXNNamd1T1dNdE1TNHhMREV1TVMwekxqTXNNUzR6TFRNdU5Td3hMak5qTFRFdU15d3dMVEl1Tnkwd0xqVXRNaTQzTFRJdU1XTXdMVEV1TkN3d0xqVXRNaTR6TERJdU1TMHlMak5qTVM0ekxEQXNNaTQ0TERBdU1TdzBMakVzTUM0MlZqSTRMamw2Q2drZ1RUSXhMalFzTXpJdU0yTXdMalFzTUN3eUxqTXRNQzR4TERNdU55MHdMamxzTUM0eUxEQXVOMmd5TGpGMkxUZ3VPV013TFRNdU5pMHlMak10TlMwMUxqY3ROV010TVM0NExEQXROQzR6TERBdU55MDBMamNzTUM0NWJEQXVOQ3d5TGpOak1TNDJMVEF1Tml3ekxUQXVOaXcwTGpJdE1DNDJDZ2xqTVM0NExEQXNNeTR6TERBdU5pd3pMak1zTWk0MlZqSTBZeTB4TFRBdU5DMHlMalF0TUM0MkxUUXVNUzB3TGpaakxUTXNNQzAwTGpVc01TNDJMVFF1TlN3MExqZERNVFl1TkN3ek1TNDRMREU1TGpZc016SXVNeXd5TVM0MExETXlMak42SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazB6TUM0eUxERTJMakZqTUN3d0xqWXNNQzQyTERFdU1pd3hMak1zTVM0eVl6QXVPQ3d3TERFdU15MHdMallzTVM0ekxURXVNbU13TFRBdU55MHdMall0TVM0ekxURXVNeTB4TGpORE16QXVPQ3d4TkM0NExETXdMaklzTVRVdU15d3pNQzR5TERFMkxqRjZDZ2tnVFRNd0xqTXNNekl1TVdneUxqUldNVGd1TldndE1pNDBWak15TGpGNklpOCtDanh3WVhSb0lHTnNZWE56UFNKemRERWlJR1E5SWswM01TNHlMREl5TGpGb09DNDBZekF1TkN3d0xqRXNNQzQyTERBdU15d3dMallzTUM0M2RqSXVObWd0T1M0M2RpMHlMalpETnpBdU5pd3lNaTQwTERjd0xqZ3NNakl1TWl3M01TNHlMREl5TGpGNklFMDNNUzR5TERNd0xqVUtDV010TUM0MExEQXRNQzQyTFRBdU15MHdMamN0TUM0NGRpMHlMalpvT1M0M2RqSXVObU13TERBdU5DMHdMaklzTUM0M0xUQXVOaXd3TGpkSU56RXVNbm9nVFRjekxqWXNNVGhqTFRBdU1Td3dMalF0TUM0eExEQXVPUzB3TGpRc01TNDNZeTB3TGpFc01DNHpMVEF1TVN3d0xqVXRNQzR4TERBdU53b0phQzB5TGpaakxURXVNeXd3TGpFdE1TNDVMREF1T0MweUxESjJOeTQ1WXpBdU1Td3hMakVzTUM0NExERXVPQ3d5TERFdU9XZ3hNR014TGpJdE1DNHhMREV1T0Mwd0xqY3NNUzQ1TFRFdU9IWXROeTQ1WXkwd0xqRXRNUzR6TFRBdU55MHhMamt0TVM0NUxUSXVNV2d0TlFvSll6QXVNUzB3TGpNc01DNHhMVEF1T0N3d0xqTXRNUzQwWXpBdU1TMHdMalFzTUM0eExUQXVOeXd3TGpFdE1DNDVhRGN1TW5ZdE1TNDRTRFkzTGpSV01UaE1Oek11Tml3eE9FdzNNeTQyTERFNGVpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk9UTXVOeXd5TWk0M1l5MHdMalF0TUM0eExUQXVOUzB3TGpJdE1DNDFMVEF1TlhZdE1DNDJhRE11TW5Zd0xqWmpMVEF1TVN3d0xqTXRNQzR5TERBdU5DMHdMalVzTUM0MVNEa3pMamQ2SUUwNU5pNDJMREkwTGpFS0NXTXhMakV0TUM0eExERXVOaTB3TGpVc01TNDJMVEV1TkhZdE1XZ3lMak4yTFRFdU5XZ3RNaTR6ZGkweExqRm9MVEV1T0hZeExqRm9MVE11TW5ZdE1TNHhhQzB4TGpoMk1TNHhhQzB5TGpOMk1TNDFhREl1TTNZeFl6QXVNU3d3TGprc01DNDJMREV1TkN3eExqWXNNUzQwU0RrMkxqWjZDZ2tnVFRrMExqZ3NNekF1TkdNeExqWXNNQzQ0TERNdU5Dd3hMak1zTlM0MExERXVPR3d3TGprdE1TNDNZeTB4TGpRdE1DNHlMVEl1T1Mwd0xqWXROQzQwTFRFdU1XTXhMakV0TUM0NExESXRNUzQyTERJdU55MHlMalZqTUM0ekxUQXVOQ3d3TGpRdE1DNDVMREF1TWkweExqTUtDV010TUM0ekxUQXVOaTB3TGpndE1DNDVMVEV1TkMwd0xqbG9MVGwyTVM0MWFEY3VOMk13TGpJc01Dd3dMalFzTUM0eExEQXVOQ3d3TGpGek1Dd3dMakV0TUM0eExEQXVNMk10TUM0MkxEQXVOaTB4TGpRc01TNHpMVEl1TXl3eExqaGpMVEV1TWkwd0xqY3RNaTR4TFRFdU15MHlMalF0TVM0NGFDMHlMaklLQ1dNd0xqa3NNU3d4TGpnc01TNDVMREl1T1N3eUxqZGpMVEV1Tml3d0xqWXRNeTR6TERFdU1TMDBMamtzTVM0emJEQXVPU3d4TGpaRE9URXVNeXd6TVM0NExEa3pMaklzTXpFdU1TdzVOQzQ0TERNd0xqUjZJRTA0T0M0ekxESTFMakoyTFRaak1DNHhMVEF1Tml3d0xqTXRNQzQ1TERBdU9DMHdMamtLQ1dneE1TNDRkaTB4TGpaSU9UVmpMVEF1TVMwd0xqRXRNaTR5TFRBdU1TMHlMaklzTUdndE5DNDNZeTB4TGpFc01DNHhMVEV1Tnl3d0xqa3RNUzQ0TERJdU1sWXlOV013TGpFc01pNHhMVEF1TkN3MExqUXRNUzR4TERZdU4yd3hMamtzTUM0MkNnbERPRGN1T1N3eU9TNDVMRGc0TGpNc01qY3VOaXc0T0M0ekxESTFMako2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERJaUlHUTlJazAwTmk0ekxESTBMakpqTUM0MkxEQXNNUzR5TERBdU1Td3hMamNzTUM0MGRqTXVOR013TERBdU15MHdMallzTVMweExqa3NNV010TVM0MUxEQXRNUzQ0TFRBdU5pMHhMamd0TWk0eGRpMHdMallLQ1VNME5DNHlMREkwTGpnc05EUXVOeXd5TkM0eUxEUTJMak1zTWpRdU1ub2dUVFE1TGpJc01qQXVOMGcwT0hZeUxqVkRORGN1Tml3eU15NHhMRFEzTERJekxEUTJMak1zTWpOakxUSXVOeXd3TFRNdU15d3hMVE11TXl3ekxqVjJNQzR6WXpBc01pNDBMREF1T1N3ekxqTXNNeTR5TERNdU13b0pZekF1T0N3d0xERXVNeTB3TGpFc01TNDRMVEF1Tld3d0xqRXNNQzQyYURFdU1VdzBPUzR5TERJd0xqZE1ORGt1TWl3eU1DNDNlaUl2UGdvOGNHRjBhQ0JqYkdGemN6MGljM1F5SWlCa1BTSk5OVFl1Tnl3eU0yZ3RNUzR5ZGpVdU1tTXRNQzQyTERBdU5DMHhMamNzTUM0MkxUSXVOQ3d3TGpaakxUQXVPQ3d3TFRFdE1DNDBMVEV0TVM0emRpMDBMalpvTFRFdU1YWTBMamhqTUN3eExqWXNNQzQxTERJdU15d3lMakVzTWk0ekNnbGpNU3d3TERJdU1TMHdMak1zTWk0MkxUQXVObXd3TGpFc01DNDJhREV1TVZZeU0zb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMamNzTVRVdU4yTXdMVEF1Tnl3d0xqWXRNUzR6TERFdU1pMHhMak5qTUM0MkxEQXNNUzR5TERBdU5pd3hMaklzTVM0elV6azBMalVzTVRjc09UTXVPU3d4TjBNNU15NHpMREUyTGprc09USXVOeXd4Tmk0ekxEa3lMamNzTVRVdU4zb2lMejRLUEM5emRtYytDZz09Iik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2hlaWdodDoxMDBweDt3aWR0aDoyMDBweH0NCiN1X3NwIC5zX2JyaXtib3JkZXI6MCFpbXBvcnRhbnR9DQoucGFzcy10ZXh0LWlucHV0e2JhY2tncm91bmQtaW1hZ2U6bm9uZSFpbXBvcnRhbnR9DQoucGFzcy10ZXh0LWlucHV0LWZvY3Vze2JhY2tncm91bmQtaW1hZ2U6bm9uZSFpbXBvcnRhbnR9DQojcGFzc3BvcnQtbG9naW4tcG9we2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sIkhlbHZldGljYSBOZXVlIixIZWx2ZXRpY2EsIk5pbWJ1cyBTYW5zIEwiLEFyaWFsLCJMaWJlcmF0aW9uIFNhbnMiLCJQaW5nRmFuZyBTQyIsIkhpcmFnaW5vIFNhbnMgR0IiLCJTb3VyY2UgSGFuIFNhbnMgQ04iLCJTb3VyY2UgSGFuIFNhbnMgU0MiLCJNaWNyb3NvZnQgWWFIZWkiLCJXZW5xdWFueWkgTWljcm8gSGVpIiwiV2VuUXVhbllpIFplbiBIZWkiLCJTVCBIZWl0aSIsU2ltSGVpLCJXZW5RdWFuWWkgWmVuIEhlaSBTaGFycCIsc2Fucy1zZXJpZjtib3JkZXItcmFkaXVzOjJweH0NCiNUQU5HUkFNX19QU1BfMl9fdGl0bGVUZXh0e2ZvbnQtZmFtaWx5OkhlbHZldGljYSwiTWljcm9zb2Z0IFlhaGVpIFVJIExpZ2h0In0NCi5wYXNzLWZndHB3ZHtmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnBhc3Mtc21zLWJ0bntmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnBhc3MtcmVnbGlua3tmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnRhbmctZm9yZWdyb3VuZHtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7Ym9yZGVyOjAhaW1wb3J0YW50fQ0KLnRhbmctdGl0bGV7Ym9yZGVyLXJhZGl1czoycHggMnB4IDAgMCFpbXBvcnRhbnR9DQoudGFuZy1wYXNzLXBvcC1sb2dpbiBkaXYudGFuZy10aXRsZXtib3JkZXItcmFkaXVzOjJweCAycHggMCAwIWltcG9ydGFudH0NCi5wYXNzLWNoZWNrYm94LWlucHV0e3dpZHRoOjE3cHg7aGVpZ2h0OjE3cHg7Ym9yZGVyOiNlMGUwZTAgM3B4IHNvbGlkIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50O2JveC1zaGFkb3c6bm9uZX0NCi50YW5nLXBhc3MtcG9wLWxvZ2luLWNvbG9yLWJsdWUgLnBhc3MtYnV0dG9uOmZvY3Vze2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50fQ0KLnJyZWNvbS1idG4tcGFyZW50e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQoucy1wLXRvcHtib3R0b206LThweCFpbXBvcnRhbnR9DQppbnB1dFt0eXBlPXRleHRdOmZvY3Vze2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItdG9wOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWJvdHRvbTowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1sZWZ0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnR9DQphW3NvZnRfaWRde2Rpc3BsYXk6bm9uZX0NCi5vcC1zb2Z0LWJ0bmJveCAuYy1nYXAtbGVmdC1zbWFsbHttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzM0NzZkMjtwYWRkaW5nOjdweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KLm9wLXNvZnQtYnRuYm94IC5jLWdhcC1sZWZ0LXNtYWxsOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThEMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpfQ0KLnNvdXR1LWlucHV0LWltYWdle3RvcDo2cHg7bGVmdDo1cHh9DQoja3d7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0NCi5zLXNraW4taGFzYmcgI2t3e2JveC1zaGFkb3c6MCAwIDAgcmdiYSgwLDAsMCwuMil9DQoucy1za2luLWhhc2JnIC5idG5fd3J7d2lkdGg6MzVweH0NCiNzX3VzZXJzZXR0aW5nX3RvcHttYXJnaW4tdG9wOi03cHh9DQojc191c2VybmFtZV90b3B7bWFyZ2luLXRvcDo3cHh9DQojdV9zcHtwYWRkaW5nLXRvcDoxNnB4fQ0KLmlwdF9yZWN7YmFja2dyb3VuZDowIDA7YmFja2dyb3VuZC1pbWFnZTpub25lfQ0KLmlwdF9yZWM6aG92ZXJ7YmFja2dyb3VuZDowIDA7YmFja2dyb3VuZC1pbWFnZTpub25lfQ0KLmlwdF9yZWM6YWZ0ZXJ7ZGlzcGxheTpub25lO21hcmdpbi10b3A6NTBweH0NCi5iZHBmbWVudSwudXNlcm1lbnV7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lOy13ZWJraXQtYm94LXNoYWRvdzpub25lOy1tb3otYm94LXNoYWRvdzpub25lOy1vLWJveC1zaGFkb3c6bm9uZX0NCi5xcmNvZGVDb257dmlzaWJpbGl0eTpoaWRkZW59DQojaGVhZCAuaGVhZEJsb2Nre21hcmdpbjoxMnB4IDAgNnB4IDEyMXB4fQ0KYXtjb2xvcjojMzQ3NmQyfQ0KaDMgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9DQouYy1zaG93dXJse2NvbG9yOiM0Q0FGNTB9DQoub3Atc2UtbGlzdGVuLXJlY29tbWVuZDpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9DQouYy1nYXAtYm90dG9tLXNtYWxsIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KLmMtcm93IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KI3JzIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KLmhpbnRfdG9wcnFfdGlwc19pdGVtcyBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCi5jOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCmVte2NvbG9yOiNFQTQzMzV9DQoub3AtdmlkZW8tdmFzdC11bCBsaSBhe21hcmdpbi1ib3R0b206IHVuc2V0O30NCmJvZHl7YmFja2dyb3VuZC1jb2xvcjojRjdGN0Y3fQ0KI2Zvcm0gLnNfYnRue2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKX0NCiN3cmFwcGVyICNoZWFkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0OCwgMjQ4LCAyNDgsIDAuNCk7DQogICAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCkNCn0NCi5jLXRhYnMtbmF2e2JhY2tncm91bmQtY29sb3I6I0VFRX0NCi5jLXRhYnMtbmF2LXNlbGVjdGVke2JvcmRlci1ib3R0b206I0Y0NDMzNiAycHggc29saWQhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6IzIxOTZGMyFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9DQojcGFnZSBhe2JhY2tncm91bmQ6I2ZmZjtjb2xvcjojNDI0MjQyfQ0KI3BhZ2UgYTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTAhaW1wb3J0YW50fQ0KI3BhZ2UgYSAucGM6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQ0KI3BhZ2Ugc3Ryb25ne2JhY2tncm91bmQtY29sb3I6IzQyODVGNCFpbXBvcnRhbnQ7Y29sb3I6I2ZmZn0NCiNwYWdlIHN0cm9uZyAucGN7YmFja2dyb3VuZC1jb2xvcjojNDI4NUY0IWltcG9ydGFudH0NCi5wYzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTB9DQojc190YWIgYntib3JkZXItYm90dG9tOjNweCAjMzQ3NmQyIHNvbGlkO2NvbG9yOiMzNDc2ZDJ9DQojc190YWJ7Ym9yZGVyLWJvdHRvbTojZTBlMGUwIDFweCBzb2xpZH0NCi5iZHBmbWVudSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzM0NzZkMiFpbXBvcnRhbnR9DQouc2V0cHJlZjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KI3UgLmxie2JhY2tncm91bmQtY29sb3I6IzM0NzZkMn0NCiN1IC5sYjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThDQzd9DQojdSAubGI6YWN0aXZle2JhY2tncm91bmQtY29sb3I6IzdEQTBEMH0NCiNiZ3tiYWNrZ3JvdW5kLWNvbG9yOiNGRkYhaW1wb3J0YW50O2JhY2tncm91bmQ6I0ZGRn0NCiN1MSBhLmxie2JhY2tncm91bmQtY29sb3I6IzM0NzZkMn0NCiN1MSBhLmxiOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzYxOENDN30NCiN1MSBhLmxiOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiM3REEwRDB9DQojdV9zcCAuc19icml7YmFja2dyb3VuZC1jb2xvcjojRjQ0MzM2fQ0KI3NfdXNlcm5hbWVfdG9we2JhY2tncm91bmQtY29sb3I6I2UwZTBlMH0NCi5zLXVzZXItc2V0LW1lbnUgYTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KI3VzZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQ0KLm1zZy1zZXR0aW5nLWJ0bntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KLm5vLXVzZXtiYWNrZ3JvdW5kLWNvbG9yOiNFNUU1RTUhaW1wb3J0YW50fQ0KLnBhc3MtdGV4dC1pbnB1dHtib3JkZXItYm90dG9tOiNlMGUwZTAgMnB4IHNvbGlkIWltcG9ydGFudDtib3JkZXItbGVmdDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci1yaWdodDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci10b3A6I2ZmZiAwIHNvbGlkIWltcG9ydGFudH0NCi5wYXNzLXRleHQtaW5wdXQtZm9jdXN7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDJweCBzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQ6I2ZmZiAwIHNvbGlkIWltcG9ydGFudDtib3JkZXItcmlnaHQ6I2ZmZiAwIHNvbGlkIWltcG9ydGFudDtib3JkZXItdG9wOiNmZmYgMCBzb2xpZCFpbXBvcnRhbnR9DQoudGFuZy1wYXNzLXBvcC1sb2dpbi1jb2xvci1ibHVlIC5wYXNzLWJ1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDJ9DQoudGFuZy1wYXNzLXBvcC1sb2dpbi1jb2xvci1ibHVlIC5wYXNzLWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThDQzd9DQojbGd7bWFyZ2luLWxlZnQ6LTNyZW07YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE9TNHlMakVzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p4emRtY2dkbVZ5YzJsdmJqMGlNUzR4SWlCcFpEMGk1YkdDWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalU1SURFeE5pSWdjM1I1YkdVOUltVnVZV0pzWlMxaVlXTnJaM0p2ZFc1a09tNWxkeUF3SURBZ01qVTVJREV4TmpzaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlQZzBLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNE5DZ2t1YzNRd2UyWnBiR3c2SXpReU9EVkdORHQ5RFFvSkxuTjBNWHRtYVd4c09pTkZRVFF6TXpVN2ZRMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBOQ2p3dmMzUjViR1UrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NVEk0TGpJc056ZGpMVFV1TkN3d0xqUXROUzQyTERNdU55MDRMakVzTmk0M1l5MHlMalVzTXk0eExUY3VOeXcxTGpndE9DNDBMRGt1TldNdE1DNDRMRFF1Tnl3eExqZ3NOeTR5TERRdU15dzRZekl1Tnl3d0xqa3NPQzQ0TFRBdU55d3hNUzQ1TFRBdU53MEtDV2d3TGpOb01DNHpZek11TVN3d0xEa3VNU3d4TGpZc01URXVPU3d3TGpkak1pNDFMVEF1T1N3MExqa3ROQzQxTERRdU15MDRZeTB3TGpVdE15MDJMakl0Tmk0MExUZ3VOeTA1TGpWRE1UTXpMallzT0RBdU55d3hNek11Tnl3M055NDBMREV5T0M0eUxEYzNlaUJOTVRBNUxqTXNOell1TXcwS0NXTXdMRE11TkN3eUxqSXNOaTR4TERRdU9DdzJMakZqTWk0M0xEQXNOQzQ0TFRJdU55dzBMamd0Tmk0eGN5MHlMakl0Tmk0eExUUXVPQzAyTGpGVE1UQTVMak1zTnpNc01UQTVMak1zTnpZdU0zb2dUVEV4T1N3Mk55NDFZekFzTXk0MUxESXVNU3cyTGpRc05DNDJMRFl1TkEwS0NXTXlMallzTUN3MExqY3RNaTQ1TERRdU55MDJMalJ6TFRJdU1TMDJMalF0TkM0M0xUWXVORU14TWpFc05qRXNNVEU1TERZekxqa3NNVEU1TERZM0xqVjZJRTB4TXpBdU55dzJOeTQwWXpBc015NHpMRElzTml3MExqVXNObk0wTGpVdE1pNDNMRFF1TlMwMll6QXRNeTR6TFRJdE5pMDBMalV0TmcwS0NWTXhNekF1Tnl3Mk5DNHhMREV6TUM0M0xEWTNMalI2SUUweE16Z3VNaXczTnk0NFl6QXNNeTR6TERJdU1TdzJMRFF1Tml3Mll6SXVOaXd3TERRdU55MHlMamNzTkM0M0xUWmpNQzB6TGpNdE1pNHhMVFl0TkM0M0xUWkRNVFF3TGpJc056RXVPQ3d4TXpndU1pdzNOQzQxTERFek9DNHlMRGMzTGpoNklnMEtDUzgrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F4SWlCa1BTSk5Oakl1T0N3NU9DNHlWamt4YURsak1pNHlMREFzTWk0ekxEQXVOQ3d5TGpNc01pNDRkakpqTUN3eUxqTXRNeTR5TERJdU5TMDFMalVzTWk0MWFDMDFMamhXT1RndU1ub2dUVFl5TGpnc09EY3VPRlk0TVdnMUxqZ05DZ2xqTWk0ekxEQXNOUzQxTERBc05TNDFMRE4yTUM0eFl6QXNNaTB3TGpjc015NDNMVEl1TlN3ekxqZEROekV1Tml3NE55NDRMRFl5TGpnc09EY3VPQ3cyTWk0NExEZzNMamg2SUUwMU9TNDFMRGMzTGpsMk1qTm9PUzR4WXpRdU15d3dMRGd1Tnl3d0xEZ3VOeTAxTGpGMkxURXVOUTBLQ1dNd0xUSXVNeTB3TGpJdE15NDRMVEV1TlMwMExqbGpNUzQwTFRFdU1Td3hMalV0TXk0eUxERXVOUzAxTGpGc01Dd3dZekF0Tmk0ekxUUXVOUzAyTGpNdE9DNDNMVFl1TTB3MU9TNDFMRGMzTGpsTU5Ua3VOU3czTnk0NWVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMalFzT1RZdU1XTXRNUzQxTERFdU5pMDBMallzTVM0NExUUXVPU3d4TGpoakxURXVPU3d3TFRNdU9DMHdMamN0TXk0NExUSXVPV013TFRJc01DNDNMVE11TXl3eUxqa3RNeTR6WXpFdU9Dd3dMRFFzTUM0eUxEVXVPQ3d3TGpoV09UWXVNWG9OQ2drZ1RUZzNMak1zTVRBd0xqbGpNQzQxTERBc015NHpMVEF1TWl3MUxqSXRNUzR6YkRBdU15d3hhREl1T1ZZNE9HTXdMVFV1TVMwekxqSXROeTR4TFRndE55NHhZeTB5TGpVc01DMDJMakVzTVMwMkxqWXNNUzR5YkRBdU5pd3pMakpqTWk0eUxUQXVPQ3cwTGpJdE1DNDVMRFV1T1Mwd0xqa05DZ2xqTWk0MkxEQXNOQzQyTERBdU9TdzBMallzTXk0M2RqRXVNV010TVM0MExUQXVOUzB6TGpRdE1DNDVMVFV1T0Mwd0xqbGpMVFF1TWl3d0xUWXVNeXd5TGpNdE5pNHpMRFl1TmtNNE1DNHpMREV3TUM0ekxEZzBMamNzTVRBd0xqa3NPRGN1TXl3eE1EQXVPWG9pTHo0TkNqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazA1T1M0M0xEYzRMakZqTUN3d0xqa3NNQzQ1TERFdU55d3hMamdzTVM0M1l6RXVNU3d3TERFdU9TMHdMamdzTVM0NUxURXVOMk13TFRFdE1DNDRMVEV1T0MweExqa3RNUzQ0UXpFd01DNDJMRGMyTGpNc09Ua3VOeXczTnl3NU9TNDNMRGM0TGpGNkRRb0pJRTA1T1M0NUxERXdNQzQyYURNdU5GWTRNUzQxYUMwekxqUldNVEF3TGpaNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UVTNMallzT0RZdU5tZ3hNUzQ0WXpBdU5Td3dMakVzTUM0NExEQXVOQ3d3TGprc01YWXpMalpvTFRFekxqZDJMVE11TmtNeE5UWXVOeXc0Tnl3eE5UY3NPRFl1Tnl3eE5UY3VOaXc0Tmk0MmVpQk5NVFUzTGpZc09UZ3VOQTBLQ1dNdE1DNDJMREF0TUM0NUxUQXVOQzB4TFRFdU1YWXRNeTQyYURFekxqZDJNeTQzWXpBc01DNDJMVEF1TXl3eExUQXVPU3d4U0RFMU55NDJlaUJOTVRZd0xqa3NPREF1TjJNdE1DNHhMREF1TlMwd0xqSXNNUzR6TFRBdU5Td3lMalJqTFRBdU1Td3dMalF0TUM0eExEQXVOeTB3TGpJc01XZ3RNeTQzRFFvSll5MHhMamdzTUM0eExUSXVOeXd4TGpFdE1pNDRMREl1T0ZZNU9HTXdMakVzTVM0MkxERXVNU3d5TGpVc01pNDRMREl1TjJneE5DNHhZekV1Tnkwd0xqRXNNaTQyTFRFc01pNDNMVEl1TlZZNE4yTXRNQzR4TFRFdU9DMHhMVEl1TnkweUxqY3RNaTQ1YUMwM0RRb0pZekF1TVMwd0xqUXNNQzR5TFRFdU1Td3dMalF0TW1Nd0xqRXRNQzQyTERBdU1TMHhMREF1TWkweExqTm9NVEF1TW5ZdE1pNDJhQzB5TWk0eWRqSXVOa3d4TmpBdU9TdzRNQzQzVERFMk1DNDVMRGd3TGpkNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UZzVMalFzT0RjdU5HTXRNQzQxTFRBdU1TMHdMamN0TUM0ekxUQXVOeTB3TGpkMkxUQXVPV2cwTGpWMk1DNDVZeTB3TGpFc01DNDBMVEF1TXl3d0xqWXRNQzQzTERBdU4wZ3hPRGt1TkhvZ1RURTVNeTQwTERnNUxqUU5DZ2xqTVM0MUxUQXVNU3d5TGpJdE1DNDNMREl1TXkweVZqZzJhRE11TW5ZdE1pNHhhQzB6TGpKMkxURXVObWd0TWk0MWRqRXVObWd0TkM0MWRpMHhMalpvTFRJdU5uWXhMalpvTFRNdU1sWTRObWd6TGpKMk1TNDBZekF1TVN3eExqTXNNQzQ0TERJc01pNHlMREpJTVRrekxqUjZJRTB4T1RBdU9TdzVPQzR6RFFvSll6SXVNeXd4TGpFc05DNDRMREV1T1N3M0xqWXNNaTQyYkRFdU1pMHlMalJqTFRJdE1DNHpMVFF1TVMwd0xqZ3ROaTR5TFRFdU5tTXhMalV0TVM0eExESXVPQzB5TGpJc015NDRMVE11TldNd0xqUXRNQzQyTERBdU5TMHhMaklzTUM0ekxURXVPV010TUM0MExUQXVPQzB4TGpFdE1TNHlMVEl0TVM0eURRb0phQzB4TWk0M2RqSXVNV2d4TUM0NFl6QXVNeXd3TERBdU5Td3dMakVzTUM0MkxEQXVNbk13TERBdU1pMHdMaklzTUM0MFl5MHdMamtzTUM0NUxUSXNNUzQ0TFRNdU15d3lMalpqTFRFdU55MHhMVEl1T1MweExqa3RNeTQwTFRJdU5tZ3RNeTR4WXpFdU1pd3hMalFzTWk0MkxESXVOeXcwTGpFc015NDREUW9KWXkweUxqTXNNQzQ1TFRRdU5pd3hMalV0Tmk0NUxERXVPR3d4TGpNc01pNHlRekU0TlM0NUxERXdNQzR5TERFNE9DNDJMRGs1TGpNc01Ua3dMamtzT1RndU0zb2dUVEU0TVM0M0xEa3dMamwyTFRndU5XTXdMakV0TUM0NExEQXVOQzB4TGpJc01TNHhMVEV1TTJneE5pNDNkaTB5TGpOb0xUZ3VNdzBLQ1dNdE1DNHhMVEF1TWkwekxqRXRNQzR4TFRNdU1Td3dhQzAyTGpkakxURXVOU3d3TGpJdE1pNDBMREV1TXkweUxqVXNNeTR4ZGpndU4yTXdMakVzTXkwd0xqVXNOaTR5TFRFdU5pdzVMalJzTWk0M0xEQXVPRU14T0RFdU1TdzVOeTQyTERFNE1TNDNMRGswTGpNc01UZ3hMamNzT1RBdU9Yb2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMHhNakl1TlN3NE9TNDFZekF1T0N3d0xERXVOeXd3TGpJc01pNDBMREF1TlhZMExqaGpNQ3d3TGpRdE1DNDVMREV1TkMweUxqY3NNUzQwWXkweUxqRXNNQzB5TGpZdE1DNDVMVEl1TmkweUxqbDJMVEF1T0EwS0NVTXhNVGt1TlN3NU1DNDBMREV5TUM0eUxEZzVMalVzTVRJeUxqVXNPRGt1TlhvZ1RURXlOaTQyTERnMExqWm9MVEV1TjNZekxqVmpMVEF1Tmkwd0xqSXRNUzQxTFRBdU15MHlMalF0TUM0ell5MHpMamdzTUMwMExqWXNNUzQwTFRRdU5pdzBMamwyTUM0MERRb0pZekFzTXk0MExERXVNeXcwTGpZc05DNDFMRFF1Tm1NeExqRXNNQ3d4TGprdE1DNHlMREl1Tmkwd0xqZHNNQzR5TERBdU9HZ3hMalZNTVRJMkxqWXNPRFF1Tmt3eE1qWXVOaXc0TkM0MmVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNaUlnWkQwaVRURXpOeTR4TERnM0xqaG9MVEV1TjNZM0xqUmpMVEF1T1N3d0xqVXRNaTQwTERBdU9DMHpMalFzTUM0NFl5MHhMakVzTUMweExqUXRNQzQyTFRFdU5DMHhMamwyTFRZdU5VZ3hNamwyTmk0NFl6QXNNaTR6TERBdU55d3pMaklzTWk0NUxETXVNZzBLQ1dNeExqUXNNQ3d5TGprdE1DNDBMRE11Tmkwd0xqaHNNQzR4TERBdU9HZ3hMalZXT0RjdU9Ib2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHhPRGN1T1N3M055NDFZekF0TVN3d0xqZ3RNUzQ0TERFdU55MHhMamh6TVM0M0xEQXVPQ3d4TGpjc01TNDRjeTB3TGpnc01TNDRMVEV1Tnl3eExqaERNVGc0TGpjc056a3VNaXd4T0RjdU9TdzNPQzQwTERFNE55NDVMRGMzTGpWNklpOCtEUW84TDNOMlp6NE5DZz09Iil9DQojZm9ybSAuc19idG57YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6UTNOemxDUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB4TkM0NExESXhMalZqTFRBdU5Dd3dMVEF1Tnl3d0xURXVNUzB3TGpGakxUSXVNUzB3TGpNdE15NDVMVEV1TkMwMUxqSXRNMk10TVM0ekxURXVOeTB4TGpndE15NDNMVEV1TmkwMUxqaGpNQzR6TFRJdU1Td3hMalF0TXk0NUxETXROUzR5Q2dsak1TNDNMVEV1TXl3ekxqZ3RNUzQ0TERVdU9DMHhMalpqTWk0eExEQXVNeXd6TGprc01TNDBMRFV1TWl3ell6RXVNeXd4TGpjc01TNDRMRE11T0N3eExqWXNOUzQ0WXkwd0xqTXNNaTR4TFRFdU5Dd3pMamt0TXl3MUxqSkRNVGd1TWl3eU1Td3hOaTQxTERJeExqVXNNVFF1T0N3eU1TNDFlZ29KSUUweE5DNDRMRGd1TVdNdE1TNHlMREF0TWk0MExEQXVOQzB6TGpNc01TNHhZeTB5TGpRc01TNDRMVEl1T1N3MUxqTXRNU3czTGpkak1TNDRMREl1TkN3MUxqTXNNaTQ1TERjdU55d3hZekV1TWkwd0xqa3NNUzQ1TFRJdU1pd3lMakV0TXk0Mll6QXVNaTB4TGpVdE1DNHlMVEl1T1MweExqRXROQzR4Q2dsVE1UY3NPQzQwTERFMUxqVXNPQzR5UXpFMUxqTXNPQzR5TERFMUxEZ3VNU3d4TkM0NExEZ3VNWG9pTHo0S1BHYytDZ2s4Wno0S0NRazhjR0YwYUNCamJHRnpjejBpYzNRd0lpQmtQU0pOTWpVdU15d3lOeTQxVERJMUxqTXNNamN1TldNdE1DNDJMREF1TkMweExqUXNNQzR6TFRFdU9DMHdMakpzTFRVdU1TMDJMamRqTFRBdU5DMHdMall0TUM0ekxURXVOQ3d3TGpJdE1TNDRiREFzTUFvSkNRbGpNQzQyTFRBdU5Dd3hMalF0TUM0ekxERXVPQ3d3TGpKc05TNHhMRFl1TjBNeU5pd3lOaTR6TERJMUxqa3NNamN1TVN3eU5TNHpMREkzTGpWNklpOCtDZ2s4TDJjK0Nqd3ZaejRLUEM5emRtYytDZz09IikhaW1wb3J0YW50fQ0KI2Zvcm0gLnNfYnRuX3dye2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelEzTnpsQ1JEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweE5DNDRMREl4TGpWakxUQXVOQ3d3TFRBdU55d3dMVEV1TVMwd0xqRmpMVEl1TVMwd0xqTXRNeTQ1TFRFdU5DMDFMakl0TTJNdE1TNHpMVEV1TnkweExqZ3RNeTQzTFRFdU5pMDFMamhqTUM0ekxUSXVNU3d4TGpRdE15NDVMRE10TlM0eUNnbGpNUzQzTFRFdU15d3pMamd0TVM0NExEVXVPQzB4TGpaak1pNHhMREF1TXl3ekxqa3NNUzQwTERVdU1pd3pZekV1TXl3eExqY3NNUzQ0TERNdU9Dd3hMallzTlM0NFl5MHdMak1zTWk0eExURXVOQ3d6TGprdE15dzFMakpETVRndU1pd3lNU3d4Tmk0MUxESXhMalVzTVRRdU9Dd3lNUzQxZWdvSklFMHhOQzQ0TERndU1XTXRNUzR5TERBdE1pNDBMREF1TkMwekxqTXNNUzR4WXkweUxqUXNNUzQ0TFRJdU9TdzFMak10TVN3M0xqZGpNUzQ0TERJdU5DdzFMak1zTWk0NUxEY3VOeXd4WXpFdU1pMHdMamtzTVM0NUxUSXVNaXd5TGpFdE15NDJZekF1TWkweExqVXRNQzR5TFRJdU9TMHhMakV0TkM0eENnbFRNVGNzT0M0MExERTFMalVzT0M0eVF6RTFMak1zT0M0eUxERTFMRGd1TVN3eE5DNDRMRGd1TVhvaUx6NEtQR2MrQ2drOFp6NEtDUWs4Y0dGMGFDQmpiR0Z6Y3owaWMzUXdJaUJrUFNKTk1qVXVNeXd5Tnk0MVRESTFMak1zTWpjdU5XTXRNQzQyTERBdU5DMHhMalFzTUM0ekxURXVPQzB3TGpKc0xUVXVNUzAyTGpkakxUQXVOQzB3TGpZdE1DNHpMVEV1TkN3d0xqSXRNUzQ0YkRBc01Bb0pDUWxqTUM0MkxUQXVOQ3d4TGpRdE1DNHpMREV1T0N3d0xqSnNOUzR4TERZdU4wTXlOaXd5Tmk0ekxESTFMamtzTWpjdU1Td3lOUzR6TERJM0xqVjZJaTgrQ2drOEwyYytDand2Wno0S1BDOXpkbWMrQ2c9PSIpIWltcG9ydGFudH0NCi5jLWljb24tdGllYmF7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalFnTWpRaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURJMElESTBPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6TTNRVUpGTXp0OUNna3VjM1F4ZTJacGJHdzZJMFpHUmtaR1JqdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU1DNDVMREl6TGpOSU15NHhZeTB4TGpFc01DMHlMVEF1T1MweUxUSldNaTQ0WXpBdE1TNHhMREF1T1MweUxESXRNbWd4Tnk0NFl6RXVNU3d3TERJc01DNDVMRElzTW5ZeE9DNDFRekl5TGprc01qSXVOQ3d5TWl3eU15NHpMREl3TGprc01qTXVNM29pQ2drdlBnbzhaejRLQ1R4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMDFMaklzTVRrdU9VdzBMREU1TGpKak1TNDFMVEV1T1N3eUxqTXRNeTQ1TERJdU5DMDFMamhqTUMweExEQXVNUzB6TGpFc01DNHhMVFl1TTBnNFl6QXNNaTR5TERBc05DNHpMVEF1TVN3MkxqUmpNQ3d3TGpZdE1DNHhMREV1TWkwd0xqTXNNUzQ0Q2drSmFERXVNV013TGpVc01DNDRMREV1TWl3eUxqUXNNaTR5TERRdU5rZzVZeTB3TGpZdE1TNDFMVEV1TWkweUxqZ3RNUzQyTFRNdU9VTTNMREUzTGpJc05pNHpMREU0TGpZc05TNHlMREU1TGpsNklFMDBMakVzTVRRdU9GWTJMakZqTUMweExqSXNNQzQxTFRFdU9Dd3hMall0TVM0NGFETUtDUWxqTVN3d0xERXVOaXd3TGpjc01TNDJMREV1T0hZNExqWklPQzQ1VmpZdU0yTXdMVEF1TkMwd0xqTXRNQzQyTFRBdU5pMHdMalpvTFRKakxUQXVOQ3d3TFRBdU5pd3dMakl0TUM0MkxEQXVOblk0TGpWSU5DNHhlaUJOTVRJdU9Td3hPUzQxWXkweExqRXNNQzB4TGpjdE1DNDJMVEV1T0MweExqWldNVE1LQ1Fsak1DMHhMakVzTUM0M0xURXVOeXd4TGpndE1TNDRhREZXTkM0eGFERXVOM1l5TGpWSU1qQldPR2d0TkM0emRqTXVNbWd4TGpoak1TNHhMREFzTVM0M0xEQXVOeXd4TGpnc01TNDRkalF1T0dNd0xERXVNUzB3TGpZc01TNDJMVEV1T0N3eExqZElNVEl1T1hvZ1RURXlMamdzTVRNdU0zWTBMak1LQ1Fsak1Dd3dMalFzTUM0ekxEQXVOeXd3TGpjc01DNDNhRE11TW1Nd0xqVXNNQ3d3TGpjdE1DNHpMREF1T0Mwd0xqZDJMVFF1TkdNd0xUQXVOQzB3TGpNdE1DNDNMVEF1Tnkwd0xqZG9MVE11TTBNeE15NHhMREV5TGpZc01USXVPU3d4TWk0NExERXlMamdzTVRNdU0zb2lMejRLUEM5blBnbzhMM04yWno0SyIpfQ0KI3UgLnBme2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelpFTmtRMlJEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU5TNHlMREUzTGpKak1DMHdMalFzTUM0eExUQXVPQ3d3TGpFdE1TNHlZekF0TUM0MExEQXRNQzQ0TFRBdU1TMHhMakpzTWk0MkxUSmpNQzR5TFRBdU1pd3dMak10TUM0MUxEQXVNUzB3TGpoc0xUSXVOUzAwTGpNS0NXTXRNQzR4TFRBdU15MHdMalV0TUM0MExUQXVPQzB3TGpOc0xUTXVNU3d4TGpKakxUQXVOaTB3TGpVdE1TNHpMVEF1T1MweUxqRXRNUzR5YkMwd0xqVXRNeTR6WXpBdE1DNHpMVEF1TXkwd0xqVXRNQzQyTFRBdU5XZ3ROV010TUM0ekxEQXRNQzQyTERBdU1pMHdMallzTUM0MWJDMHdMalVzTXk0ekNnbGpMVEF1T0N3d0xqTXRNUzQwTERBdU55MHlMakVzTVM0eVREY3VNeXczTGpSRE55dzNMak1zTmk0M0xEY3VOQ3cyTGpVc055NDNURFFzTVRFdU9XTXRNQzR5TERBdU15MHdMakVzTUM0MkxEQXVNU3d3TGpoc01pNDJMREpqTUN3d0xqUXRNQzR4TERBdU9DMHdMakVzTVM0eUNnbGpNQ3d3TGpRc01Dd3dMamdzTUM0eExERXVNbXd0TWk0MkxESmpMVEF1TWl3d0xqSXRNQzR6TERBdU5TMHdMakVzTUM0NGJESXVOU3cwTGpOak1DNHhMREF1TXl3d0xqVXNNQzQwTERBdU9Dd3dMak5zTXk0eExURXVNbU13TGpZc01DNDFMREV1TXl3d0xqa3NNaTR4TERFdU1td3dMalVzTXk0ekNnbGpNQ3d3TGpNc01DNHpMREF1TlN3d0xqWXNNQzQxYURWak1DNHpMREFzTUM0MkxUQXVNaXd3TGpZdE1DNDFiREF1TlMwekxqTmpNQzQ0TFRBdU15d3hMalF0TUM0M0xESXVNUzB4TGpKc015NHhMREV1TW1Nd0xqTXNNQzR4TERBdU5pd3dMREF1T0Mwd0xqTnNNaTQxTFRRdU13b0pZekF1TVMwd0xqTXNNQzR4TFRBdU5pMHdMakV0TUM0NFRESTFMaklzTVRjdU1ub2dUVEUyTERJd0xqTmpMVEl1TkN3d0xUUXVNeTB4TGprdE5DNHpMVFF1TTNNeExqa3ROQzR6TERRdU15MDBMak56TkM0ekxERXVPU3cwTGpNc05DNHpVekU0TGpRc01qQXVNeXd4Tml3eU1DNHplaUl2UGdvOEwzTjJaejRLIil9DQojdSAubGJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdORFlnTkRZaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURRMklEUTJPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3NkkwWkdSa1pHUmp0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TXl3eU0yTXlMamtzTUN3MUxqSXRNaTR6TERVdU1pMDFMakp6TFRJdU15MDFMakl0TlM0eUxUVXVNbk10TlM0eUxESXVNeTAxTGpJc05TNHlVekl3TGpFc01qTXNNak1zTWpONklFMHlNeXd5TlM0MkNnbGpMVE11TlN3d0xURXdMalFzTVM0M0xURXdMalFzTlM0eWRqSXVObWd5TUM0M2RpMHlMalpETXpNdU5Dd3lOeTR6TERJMkxqVXNNalV1Tml3eU15d3lOUzQyZWlJdlBnbzhMM04yWno0SyIpfQ0KI3UxIGEucGZ7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEsiKX0NCiN1MSBhLnBmLCAjdTEgYS5sYntjb2xvcjogcmdiYSgwLDAsMCwwKSFpbXBvcnRhbnQ7fQ0KI3UxIGEuYnJpe2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelpFTmtRMlJEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWswekxqY3NPUzQ0YURZdU1sWXpMamRJTXk0M1Zqa3VPSG9nVFRFeUxqa3NNamd1TTJnMkxqSjJMVFl1TW1ndE5pNHlWakk0TGpONklFMHpMamNzTWpndU0yZzJMakoyTFRZdU1rZ3pMamRXTWpndU0zb2dUVE11Tnl3eE9TNHhhRFl1TW5ZdE5pNHlDZ2xJTXk0M1ZqRTVMakY2SUUweE1pNDVMREU1TGpGb05pNHlkaTAyTGpKb0xUWXVNbFl4T1M0eGVpQk5Nakl1TWl3ekxqZDJOaTR5YURZdU1sWXpMamRJTWpJdU1ub2dUVEV5TGprc09TNDRhRFl1TWxZekxqZG9MVFl1TWxZNUxqaDZJRTB5TWk0eUxERTVMakZvTmk0eWRpMDJMakpvTFRZdU1sWXhPUzR4Q2dsNklFMHlNaTR5TERJNExqTm9OaTR5ZGkwMkxqSm9MVFl1TWxZeU9DNHplaUl2UGdvOEwzTjJaejRLIil9DQojc191c2Vyc2V0dGluZ190b3B7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEsiKX0NCiNpbXNne2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhPUzR5TGpFc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqeHpkbWNnZG1WeWMybHZiajBpTVM0eElpQnBaRDBpNVp1KzViR0NYekVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGc5SWpCd2VDSWdlVDBpTUhCNElnMEtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGMzUjViR1VnZEhsd1pUMGlkR1Y0ZEM5amMzTWlQZzBLQ1M1emREQjdabWxzYkRvak5rUTJSRFpFTzMwTkNqd3ZjM1I1YkdVK0RRbzhjR0YwYUNCamJHRnpjejBpYzNRd0lpQmtQU0pOTWpVdU15dzBMalpvTFRFNVF6VXNOQzQyTERNdU9TdzFMamNzTXk0NUxEZHNNQ3d5TVM0MGJEUXVPQzAwTGpob01UWXVObU14TGpNc01Dd3lMalF0TVM0eExESXVOQzB5TGpSV04wTXlOeTQzTERVdU55d3lOaTQyTERRdU5pd3lOUzR6TERRdU5ub05DZ2tnVFRJeUxqa3NNVGd1T1VnNExqWjJMVEl1TkdneE5DNHpWakU0TGpsNklFMHlNaTQ1TERFMUxqTklPQzQyZGkweUxqUm9NVFF1TTFZeE5TNHplaUJOTWpJdU9Td3hNUzQzU0RndU5sWTVMalJvTVRRdU0xWXhNUzQzZWlJdlBnMEtQQzl6ZG1jK0RRbz0iKX0NCi5jLWNvbnRhaW5lcntiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoycHg7cGFkZGluZzoyNXB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7Ym94LXNoYWRvdzowIDFweCA0cHggMCByZ2JhKDAsMCwwLC4xNCk7d2lkdGg6NTQ5cHh9DQpoMyBhOnZpc2l0ZWR7b3BhY2l0eTouNCFpbXBvcnRhbnQ7Y29sb3I6I2JiYiFpbXBvcnRhbnR9DQouYy1jb250YWluZXI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgLjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xMTc2NDcpIDAgMXB4IDZweCxyZ2JhKDAsMCwwLC4xMTc2NDcpIDAgMXB4IDRweH0NCi5jLWNvbnRhaW5lcjphY3RpdmV7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE4ODIzNSkgMCAxMHB4IDMwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDZweCAxMHB4fQ0KLnR7cGFkZGluZy1ib3R0b206MTBweH0NCi5jLWJvcmRlcnt3aWR0aDo1NTlweDtib3gtc2hhZG93Om5vbmUhaW1wb3J0YW50O21hcmdpbi10b3A6MTdweDttYXJnaW4tYm90dG9tOjIzcHg7Ym9yZGVyLXRvcDojRUVFIDFweCBzb2xpZDtib3JkZXItYm90dG9tOiNFRUUgMXB4IHNvbGlkfQ0KI2hlbHB7cGFkZGluZy1sZWZ0OjEwN3B4IWltcG9ydGFudH0NCi5jLXRvb2xzIGF7Ym9yZGVyOjAhaW1wb3J0YW50fQ0KLmYxMyBhOmhvdmVye2JvcmRlcjpub25lIWltcG9ydGFudH0NCi5mMTMgLm06aG92ZXJ7Ym9yZGVyLWJvdHRvbTpzb2xpZCAxcHggIzY2NiFpbXBvcnRhbnR9DQouZyAubTpob3Zlcntib3JkZXItYm90dG9tOnNvbGlkIDFweCAjNjY2IWltcG9ydGFudH0NCi5jLXJvdyBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9DQouYy1zcGFuNiBhOmhvdmVye2JvcmRlci1ib3R0b206bm9uZX0NCi5vcF92ZF9taW5pbmV3ZXN0X2xpbms6aG92ZXJ7b3BhY2l0eTouOH0NCi5vcC10aWViYS1vZmZpY2FsLWxvb2ttb3JlIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDFweCBzb2xpZH0NCm9wLXRpZWJhLWdlbmVyYWwtbG9va21vcmUgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMXB4IHNvbGlkfQ0KLmMtdGlwLW1lbnUgdWwgbGkgYXtjb2xvcjojMzQ3NmQyIWltcG9ydGFudH0NCmgzIGE6aG92ZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O29wYWNpdHk6Ljc7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCmgzIGF7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5zaXRlbGlua19zdW1tYXJ5IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDFweCBzb2xpZH0NCi5jLWdyYXk6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNjY2IDFweCBzb2xpZH0NCi5vcF9rZWZ1dGFibGVfY29tbWl0dGVsOmhvdmVye2JvcmRlci1ib3R0b206IzY2NiAxcHggc29saWR9DQoub3Atc29mdC1idG5ib3ggYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9DQoub3Atc29mdC1hcy1wYy1kb3duYnRue21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50O2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMzQ3NmQyO3BhZGRpbmc6M3B4IDE1cHg7Ym9yZGVyLXJhZGl1czoycHg7Zm9udC1zaXplOjE0cHg7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym9yZGVyOm5vbmU7bWFyZ2luLXRvcDotM3B4fQ0KLm9wLXNvZnQtYXMtcGMtZG93bmJ0bjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM3MDk4RDA7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9DQouYy1idG4tcHJpbWFyeXttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzM0NzZkMjtwYWRkaW5nOjNweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6LTNweH0NCi5jLWJ0bi1wcmltYXJ5OmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThEMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JhY2tncm91bmQtaW1hZ2U6bm9uZX0NCi5vcC1zb2Z0LXRpdGxlIGE6aG92ZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O29wYWNpdHk6Ljc7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5vcC1zb2Z0LXRpdGxlIGF7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5udW1ze3dpZHRoOjU5OHB4fQ0KLnNlYXJjaF90b29sX2NvbnRlcnt3aWR0aDo1OThweH0NCi5vcF9vZmZpY2FsX3dlaWJvX290aGVyIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KLm9wX29mZmljYWxfd2VpYm9faW5mbyBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudH0NCi5vcF9vZmZpY2FsX3dlaWJvX2NvbnRlbnQgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9DQouYy1idG57Ym9yZGVyOm5vbmUhaW1wb3J0YW50fQ0KLm9wLXp4LW5ldy1tdmlkZW8taW5mbzpob3Zlcntib3JkZXItYm90dG9tOm5vbmV9DQoub3AtengtbmV3LW12aWRlby1ybHQgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMXB4IHNvbGlkfQ0KLm9wLXp4LW5ldy1tdmlkZW8tb25lbGluZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9DQouaGludF9jb21tb25fcmVzdG9we2NvbG9yOiNFQTQzMzU7Zm9udC1zaXplOm1lZGl1bTtmb250LXdlaWdodDo3MDB9DQoub3AtdGllYmEtZ2VuZXJhbC1tYWluLWNvbCBwOmhvdmVye2JvcmRlcjpub25lIWltcG9ydGFudH0NCi5jLXRleHR7YmFja2dyb3VuZDojMzQ3NmQyO2NvbG9yOiNmZmY7Ym9yZGVyOiMzNDc2ZDIgMXB4IHNvbGlkO3BhZGRpbmctdG9wOjNweDtib3JkZXItcmFkaXVzOjJweH0NCi5jLXRleHQ6aG92ZXJ7YmFja2dyb3VuZDowIDA7Y29sb3I6IzM0NzZkMjtib3JkZXI6IzM0NzZkMiAxcHggc29saWQhaW1wb3J0YW50O3BhZGRpbmctdG9wOjNweDtib3JkZXItcmFkaXVzOjJweH0NCg=="},{"meta":{"name":"googleCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleCommonStyle.css?t=25.01","ts":1642048881117,"mimetype":"text/css"},"source":"LyoqKioqKioqKioqKioqKioqKiogU3RvcmUgR29vZ2xlQ29tbW9uU3R5bGUgKioqKioqKioqKioqKioqKioqKi8NCi8qIHJlZ3VsYXIgaXRlbXMsIHdhcnJpbmc6IGlmcmFtZXMgY291bGQgYmUgdmlkZW9zKi8NCmRpdi5yZXNfdG9wX2Jhbm5lciwNCiNwYWdlIC5maywNCiNoZWFkIC5oZWFkQmxvY2ssDQojcnNfdG9wX25ldywNCiNjb250ZW50X3JpZ2h0LA0KI3Jzbz50YWJsZSwNCiNyc28+ZGl2W2lkKj0iMzAiXSwNCiNyc28gLmMtcmVjb21tZW5kLA0KI3JzbyAubGVmdEJsb2NrLA0KI3JzbyAub1VBY1BkLA0KI3NlYXJjaCAjejlQb1YsDQojcnNvIC5oaXRfdG9wX25ldywNCiNyc28gI2ZsZCwNCiNyc28gZGl2LnJyZWNvbS1idG4tcGFyZW50LA0KI2NvbnRlbnRfcmlnaHQsDQojY2VudGVyX2NvbD4jdGF3LA0KI2ZsZCwNCiNkZW1vIHsNCiAgICBkaXNwbGF5OiBub25lIWltcG9ydGFudDsNCn0NCi8qKioqKioqKioqKioqKioqKioqIGluaXQgKioqKioqKioqKioqKioqKioqKi8NCmJvZHlbZ29vZ2xlXSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZEZkRmRDsNCn0NCiN0b3BfbmF2ICNoZHRiew0KICAgIGJhY2tncm91bmQ6IHVuc2V0Ow0KfQ0KI2NudCAjaGR0YlN1bSwgI2NudD4jYXBwYmFyew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMCk7DQp9DQojZm9ybSAuYmRzdWd7DQogICAgd2lkdGg6IDc2JTsNCn0NCiNhbGFfaW1nX3Jlc3VsdHN7DQogICAgb3ZlcmZsb3c6aGlkZGVuOw0KfQ0KYSwNCmEgZW0sDQojdSBhIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQphOmhvdmVyLA0KYTpob3ZlciBoM3sNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsNCn0NCi8qKioqKioqKioqKioqKioqKioqIHJld3JpdGUgaGVhZGVyICoqKioqKioqKioqKioqKioqKiovDQoNCiNoZWFkLA0KI3NfdGFiIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4Ow0KfQ0KI2hlYWQgew0KICAgIGJvcmRlci1ib3R0b206IG5vbmU7DQp9DQojZm9ybSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogdW5zZXQ7DQp9DQojZm9ybSAuYmRzdWcgbGkgew0KICAgIHdpZHRoOiBhdXRvOw0KICAgIGNvbG9yOiAjMDAwOw0KICAgIGZvbnQ6IDE1cHggYXJpYWw7DQogICAgbGluZS1oZWlnaHQ6IDI2cHg7DQp9DQojZm9ybSAuc19pcHRfd3IuYmcgew0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgd2lkdGg6IDc2JTsNCn0NCiNmb3JtIC5zX2J0biB7DQogICAgYmFja2dyb3VuZDogIzM0NzZkMjsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzM0NzZkMjsNCn0NCiNmb3JtIC5zX2J0bjpob3ZlciB7DQogICAgYmFja2dyb3VuZDogIzM0NzZkMjsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzM0NzZkMjsNCn0NCiNzX3RhYiBiIHsNCiAgICBjb2xvcjogIzM0NzZkMjsNCiAgICBib3JkZXItYm90dG9tOiAzcHggIzM0NzZkMiBzb2xpZDsNCn0NCiNzX3RhYiB7DQogICAgYm9yZGVyLWJvdHRvbTogI2UwZTBlMCAxcHggc29saWQ7DQp9DQovKioqKioqKioqKioqKioqKioqKiByZXdyaXRlIC0gc2VhcmNoQm94ICoqKioqKioqKioqKioqKioqKiovDQovKiBTZWFyY2hUb29scyAqLw0KI2NvbnRhaW5lciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLnNlYXJjaF90b29sX2NvbnRlciwNCiNjb250YWluZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5udW1zIHsNCiAgICB3aWR0aDogNjMwcHg7DQp9DQoNCi8qIFNlYXJjaEl0bWVzIEJvdHRvbSB0byBUb3AgYW5pICovDQojc2VhcmNoICNyc297DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9ib3R0b21Ub3RvcDsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IC4zczsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOw0KICAgIGp1c3RpZnktaXRlbXM6IGNlbnRlcjsNCn0NCi8qIFNlYXJjaEJhciBMZWZ0IHRvIFJpZ2h0IGFuaSAqLw0KLnNycCBmb3Jtew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfbGVmdFRvcmlnaHQ7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQoNCiNyc28gLmpVbWtGYjpob3ZlciB7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgYm9yZGVyLWxlZnQ6dW5zZXQ7DQogICAgcGFkZGluZzogMHB4IDIwcHggMTVweDsNCiAgICBtYXJnaW4tYm90dG9tOiA0MHB4Ow0KfQ0KI3JzLCAjcnNvIC5new0KICAgIHdpZHRoOiA3NjBweDsNCiAgICBwYWRkaW5nOiAwcHggMjBweCAxNXB4Ow0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiA0MHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOw0KfQ0KI3JzLCAjcnNvIC5nIGRpdi5yYyAuc3sNCiAgICBtYXgtd2lkdGg6dW5zZXQ7DQp9DQojcnNvIC5nOmhvdmVyew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4zKTsNCiAgICBib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMXB4IGdyYXk7DQp9DQojcnNvIC5nW3RwbD0nc29mdCddIC5vcC1zb2Z0LXRpdGxlLA0KI3JzbyAuZyBkaXYuciB7DQogICAgbWFyZ2luOiAwcHggLTIwcHggMTBweCAtMjBweDsNCiAgICBwYWRkaW5nOiA4cHggMjBweCA1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KLyogSXRlbXMgLSBDb2xvciAqLw0KI3JzbyAuZjEzIGEsDQojcnNvIC5mMTMgZW0sDQojcnNvIC5jLXNwYW4xOCBhLA0KI3JzbyAuc3ViTGlua19mYWN0b3J5IGEsDQojcnNvIC5jLXRhYnMtY29udGVudCBhLA0KI3JzbyAub3Bfb2ZmaWNhbF93ZWlib19jb250ZW50IGEsDQojcnNvIC5vcF9vZmZpY2FsX3dlaWJvX3B6IGEsDQojcnNvIC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGEsDQojcnNvIC5vcC10aWViYS1nZW5lcmFsLXJpZ2h0LA0KI3JzbyAub3BfZHEwMV90aXRsZSwNCiNyc28gLm9wX2RxMDFfdGFibGUgYSwNCiNyc28gLm9wX2RxMDFfbW9yZWxpbmsgYSwNCiNyc28gLm9wLXRpZWJhLWdlbmVyYWwtbWFpbnBsIGEsDQojcnNvIC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kLA0KI3JzbyAuYy1vZmZzZXQ+ZGl2IGEgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiNyc28gLmYxMyBhOmhvdmVyLA0KI3JzbyAuZjEzIGVtOmhvdmVyLA0KI3JzbyAuc3ViTGlua19mYWN0b3J5IGE6aG92ZXIsDQojcnNvIC5jLXRhYnMtY29udGVudCBhOmhvdmVyLA0KI3JzbyAub3BfdGllYmEyX3RhYmxpbmtzX2NvbnRhaW5lciBhOmhvdmVyLA0KI3JzbyAub3AtdGllYmEtZ2VuZXJhbC1yaWdodDpob3ZlciwNCiNyc28gLm9wX2RxMDFfdGl0bGU6aG92ZXIsDQojcnNvIC5vcF9kcTAxX3RhYmxlIGE6aG92ZXIsDQojcnNvIC5vcF9kcTAxX21vcmVsaW5rIGE6aG92ZXIsDQojcnNvIC5vcC10aWViYS1nZW5lcmFsLW1haW5wbCBhOmhvdmVyLA0KI3JzbyAub3Atc2UtbGlzdGVuLXJlY29tbWVuZDpob3ZlciwNCiNyc28gLmMtb2Zmc2V0PmRpdiBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZSFpbXBvcnRhbnQ7DQp9DQojcnNvIC5mMTMgYSB7DQogICAgY29sb3I6ICMwMDgwMDA7DQp9DQovKiBJdGVtcyAtIEFkaiAqLw0KDQojcnNvIC5jLXNwYW4xOCwgI3JzbyAuYy1zcGFuMjR7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCn0NCiNyc28gLmMtYm9yZGVyIHsNCiAgICB3aWR0aDogYXV0bzsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQ7DQogICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgICBib3gtc2hhZG93OiAwcHggMHB4IDBweCB0cmFuc3BhcmVudDsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KICAgIC1tb3otYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQogICAgLW8tYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQp9DQovKiBJbWcgKi8NCg0KI3JzbyAuc2VfY29tX2lycmVndWxhcl9nYWxsZXJ5IHVsIGxpLA0KI3JzbyAub3BfamluZ3lhbl9saXN0LA0KI3JzbyAuZyAub3AtaW1nLWFkZHJlc3MtbGluay10eXBlIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQp9DQovKiB0aXRsZSAqLw0KI3JzbyAuZ1t0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhLA0KI3JzbyAuZ1t0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhIGVtLA0KI3JzbyAuZyBkaXYucj4gYSwNCiNyc28gLmcgYSBoMywNCiNyc28gLmcgZGl2LnI+IGEgZW0sDQojcmNudCAjcmVzIGgzLA0KI3JjbnQgI2V4dHJhcmVzIGgzew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLyogdGl0bGU6dmlzaWVkICovDQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZCwNCiNyc28gLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkIGVtLA0KI3JzbyAuZyBkaXYucj4gYTp2aXNpdGVkLA0KI3JzbyAuZyBkaXYucj4gYTp2aXNpdGVkIGVtLA0KI3JjbnQgI3JlcyBhOnZpc2l0ZWQgaDMsDQojcnNvIC5nIGE6dmlzaXRlZCBoMyB7DQogICAgY29sb3I6ICM2NjAwOTk7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGEsDQojcnNvIC5nIGRpdi5yPiBhIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGEgZW0sDQojcnNvIC5nIGRpdi5yPiBhIGVtIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6aG92ZXI6YWZ0ZXIsDQojcnNvIC5nIGRpdi5yPiBhOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNyc28gLm9wLXNvZnQtdGl0bGUgYTphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6YWZ0ZXIgew0KICAgIGNvbnRlbnQ6ICIiOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzM0NzZkMjsNCiAgICBib3R0b206IC0ycHg7DQogICAgbGVmdDogMTAwJTsNCiAgICB3aWR0aDogMDsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQp9DQoNCiNyc28gLm9wLXNvZnQtdGl0bGUgYSwgI3JzbyAuZyBkaXYucj4gYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6dmlzaXRlZDpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZDphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6dmlzaXRlZDphZnRlciB7DQogICAgY29udGVudDogIiI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNjYwMDk5Ow0KICAgIGJvdHRvbTogLTJweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCi8qICBBYm91dCBTZWFyY2ggUmVzdWx0ICovDQoNCiNycyB7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIHBhZGRpbmc6IDBweCAyMHB4IDE1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KfQ0KI3JzIC50dCB7DQogICAgbWFyZ2luOiAwcHggLTIwcHggNXB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDVweCAyMHB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI3JzIHRhYmxlIHsNCiAgICB3aWR0aDogNjMwcHg7DQogICAgcGFkZGluZzogNXB4IDE1cHg7DQp9DQojcnMgdGFibGUgdHIgYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDVweDsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiNycyB0YWJsZSB0ciBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCi8qIHBhZ2UgbnVtcyAqLw0KDQojcGFnZSB7DQogICAgbWluLXdpZHRoOiA3MTBweDsNCiAgICBoZWlnaHQ6IDQwcHg7DQogICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogICAgcGFkZGluZy10b3A6IDVweDsNCiAgICBtYXJnaW46IDBweCAwcHggNTBweCA4MHB4Ow0KfQ0KLm9wLWltZy1hZGRyZXNzLWRlc2t0b3AtY29udHsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KI3BhZ2UgYSwNCiNwYWdlIHN0cm9uZyB7DQogICAgY29sb3I6IzM0NzZkMjsNCiAgICBoZWlnaHQ6IGF1dG87DQogICAgYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KICAgIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KICAgIC1tb3otYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KfQ0KI3BhZ2UgLm46aG92ZXIsDQojcGFnZSBhOmhvdmVyIC5wYyB7DQogICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgYmFja2dyb3VuZDogI2Q4ZDhkODsNCiAgICBjb2xvcjogIzAwNTdkYTsNCn0NCiNwYWdlIHN0cm9uZyAucGMgew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgY29sb3I6IHdoaXRlOw0KfQ0KLyogYW5pICovDQpAa2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0KQGtleWZyYW1lcyBhbmlfbGVmdFRvcmlnaHQgew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQojcnNvIGRpdi5nOm5vdChbY2xhc3NdKXsNCiAgICBtYXJnaW4tbGVmdDogMThweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDE4cHg7DQp9DQojcnNvIC5nIC5leHAtb3V0bGluZXsNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojcmVzIC5nIC50c3sNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI21haW4gI3JjbnQgI3Joc3sNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQouc2hvd1JpZ2h0ICNtYWluICNyY250ICNyaHN7DQogICAgZGlzcGxheTp1bnNldDsNCn0NCmNpdGV7DQogICAgZm9udC13ZWlnaHQ6bm9ybWFsOw0KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQp9DQovKipNb29uY2FuIC1TVEFSVCoqLw0KLyoqQWphIExpbmVIZWlnaHQqLw0KZGl2LnJlc190b3BfYmFubmVyICNmb290LCNwYWcNCiNyZXMgLnJ7DQogICAgbGluZS1oZWlnaHQ6IDEuMzsNCn0NCiNyZXN7DQogICAgcGFkZGluZzogMDsNCn0NCi8qKkdvb2dsZSBDb25uZWN0aW9uQm94Ki8NCiNycywgI3JzbyAuZyB7DQogICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KfQ0KI3JzbyAuZyBkaXYuciB7DQogICAgYm9yZGVyLXJhZGl1czogMTBweCAxMHB4IDBweCAwcHg7DQp9DQojcnNvIC5nIC5jYXJkLXNlY3Rpb24sICNjZW50ZXJfY29sIC5rcC1ibGt7DQogICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsNCn0NCi8qKlJld3JpdGUgbWFpbiBwYWdlIC0+IHdlYiBzdW1tYXJ5Ki8NCi5jMnh6VGIgLmcsIC5ydVRjSWQgLmcsIC5mbTA2SWYgLmcsIC5jVW5RS2UgLmcsIC5IYW5RbWYgLmcgew0KICAgIHdpZHRoOiA3NThweDsNCiAgICBwYWRkaW5nLWxlZnQ6ICAyMHB4ICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZy1yaWdodDogMjBweCAhaW1wb3J0YW50Ow0KICAgIGJveC1zaGFkb3c6IDAgMCAwcHggMHB4IHJnYigwLCAwLCAwKTsgLypyZW1vdmUgdGhlIHNoYWRvdyovDQp9DQpkaXYgLnhmeHg1ZCB7DQogICAgbWFyZ2luLWJvdHRvbTogLTE4cHggIWltcG9ydGFudDsNCiAgICBtYXJnaW4tdG9wOiAtMjVweCAhaW1wb3J0YW50Ow0KfQ0KZGl2IC54YXFKemYueGZ4eDVkIC5rbm8tZnRyew0KICAgIG1hcmdpbi10b3A6IDEwcHggIWltcG9ydGFudDsNCn0NCmRpdiAua25vLWZ0ciBhew0KICAgIHBvc2l0aW9uOiBzdGlja3k7DQp9DQovKipUaGFua3MgdG8gTW9vbmNhbiAtRU5EKiovDQojcmNudCAjcmVzIGgzLCAjcmNudCAjZXh0cmFyZXMgaDN7DQogICAgLyoqcmVzZXQgZm9udCBzaXplKiovDQogICAgZm9udC1zaXplOiBtZWRpdW07DQp9DQojcmNudCAjcmVzIGgzIGRpdiwgI3JjbnQgI2V4dHJhcmVzIGgzIGRpdnsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQp9DQovKmRlYWwgd2l0aCBjaXRlIHRvbyBsb25nIGFuZCB0aXRsZSB0b28gc2hvcnQqLw0KI3JzbyAuZyAucj5hPmRpdnsNCiAgICB3aWR0aDogMzVyZW07DQp9DQpkaXYucmNbYWMtbmVlZGhpZGVdew0KICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICBtYXJnaW4tYm90dG9tOiAtMTVweDsNCn0NCi8qcmVzZXQgbG9nbyBwb3NpdGlvbiBhdCBkcm9wICovDQoubG9nb3sNCiAgICB0b3A6dW5zZXQ7DQp9DQpib2R5W2dvb2dsZV0gLmJpZyAuYmFpZHV7DQogICAgdHJhbnNmb3JtOiB1bnNldCAhaW1wb3J0YW50Ow0KICAgIG1hcmdpbi10b3A6IC0xMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAtMnJlbTsNCn0NCmJvZHlbZ29vZ2xlXSAuYmlnIC5iYWlkdSAjbG9nbyBpbWd7DQogICAgbWFyZ2luLXRvcDogLTE1cHg7DQp9DQpib2R5W2dvb2dsZV0gLmJpZy5taW5pZGl2IC5iYWlkdSAjbG9nbyBpbWd7DQogICAgaGVpZ2h0OiA1OXB4Ow0KICAgIHdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW4tdG9wOiAtMThweDsNCn0NCmJvZHlbZ29vZ2xlXSAuQThTQndmew0KICAgIG1heC13aWR0aDogNjkycHg7DQogICAgd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAyNSU7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIG1hcmdpbi10b3A6IC0yMHB4Ow0KfQ0KZGl2W2pzY29udHJvbGxlcl0gYSwgZGl2W2pzbmFtZV0gYXsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMzY2cHgpew0KICAgICNtYWluICNyY250ICNyaHMgew0KICAgICAgICBwYWRkaW5nLWxlZnQ6IDQwcHg7DQogICAgICAgIG1hcmdpbi1sZWZ0OiA4MDBweDsNCiAgICB9DQp9DQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxOTIwcHgpew0KICAgICNtYWluICNyY250ICNyaHMgew0KICAgICAgICBtYXJnaW4tbGVmdDogMTMwMHB4Ow0KICAgICAgICBwYWRkaW5nLWxlZnQ6IDQwcHg7DQogICAgfQ0KfQ0K"},{"meta":{"name":"googleOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleOnePageStyle.css?t=25.01","ts":1642048881091,"mimetype":"text/css"},"source":"LyoqU3RvcmUgR29vZ2xlVHdvUGFnZVN0eWxlKiovDQojc2VhcmNoICNyc28gew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBmbG9hdDogdW5zZXQ7DQogICAgd2lkdGg6IDgwMHB4Ow0KICAgIG1hcmdpbjogMCBhdXRvOw0KICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoOw0KICAgIGp1c3RpZnktaXRlbXM6IHN0cmV0Y2g7DQogICAgZ3JpZC1nYXA6IDIwcHg7DQp9DQojcnNvIC5qVW1rRmI6aG92ZXIgew0KICAgIG1hcmdpbi1ib3R0b206IDMwcHg7DQogICAgbWFyZ2luLWxlZnQ6IDIwcHg7DQp9DQojcnNvIC5new0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHBhZGRpbmc6IDBweCAyMHB4IDE1cHg7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7DQp9DQojcnNvPmRpdiB7DQogICAgd2lkdGg6IDEwMCU7DQp9DQouc2VhcmNoPiNpcmVzICNyc28+Lmd7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCiNyc28+LmcgfiBkaXY6bm90KC5nKXsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQp9DQojbWFpbiAjcmNudHsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KYm9keSAjYXBwYmFyLGJvZHkgLnJoc2NvbCwgYm9keSAjdG9wX25hdiwgYm9keSAjZmJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KfQ0KI3JzbyBnLXNjcm9sbGluZy1jYXJvdXNlbHsNCiAgICBtYXJnaW46IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAyMHB4Ow0KfQ0KLmNvbHsNCiAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50Ow0KfQ0KLmNvbCAjY2VudGVyX2NvbHsNCiAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50Ow0KICAgIG1hcmdpbi1sZWZ0OiB1bnNldCAhaW1wb3J0YW50Ow0KfQ0KLnNycCAuYmlnICN0c2Z7DQogICAgd2lkdGg6IDgzM3B4Ow0KfQ0KLyoqc2VhcmNoIGJveCBhbGlnbiBjZW50ZXIqKi8NCi5zcnAgZm9ybXsNCiAgICBtYXJnaW46IDAgYXV0bzsNCn0NCiN0b3BfbmF2ew0KICAgIG1pbi13aWR0aDogdW5zZXQ7DQp9DQovKip2aWRlbyBib3ggYWxpZ24gY2VudGVyKiovDQpnLXNlY3Rpb24td2l0aC1oZWFkZXJ7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KI2hkdGIgI2hkdGItbXNiew0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KI2hkdGIgI2hkdGItbXNiLXZpc3sNCiAgICBtYXJnaW4tbGVmdDogLTE2OXB4Ow0KfQ0KLkFDLnNwLXNlcGFyYXRvciB7DQogICAgbWFyZ2luLXRvcDogLTIwcHg7DQogICAgd2lkdGg6IDgwMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIG1hcmdpbi1yaWdodDogYXV0bzsNCn0NCi5GeExEcHsNCiAgICBwYWRkaW5nOiB1bnNldDsNCn0NCiNtYWluICNjbnQsICNjbnQgI2NlbnRlcl9jb2wsICNjbnQgI2Zvb3R7DQogICAgd2lkdGg6IGNhbGMoMzYuM3Z3ICsgNTI1cHgpOw0KICAgIG1hcmdpbjogMCBhdXRvOw0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDoxNDQwcHgpew0KICAgIC5STk5YZ2J7DQogICAgICAgIHdpZHRoOiA4MCUgIWltcG9ydGFudDsNCiAgICB9DQp9DQo="},{"meta":{"name":"googleTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleTwoPageStyle.css?t=25.01","ts":1642048881148,"mimetype":"text/css"},"source":"LyoqU3RvcmUgR29vZ2xlVHdvUGFnZVN0eWxlKiovDQojcnNvIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgZmxvYXQ6IHVuc2V0Ow0KfQ0KI3JzbyAualVta0ZiOmhvdmVyIHsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KfQ0KI3JzbyAuZywgLnZrX2N7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgcGFkZGluZzogMTBweCAyMHB4IDE1cHg7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4yNXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczsNCn0NCi5zZWFyY2g+I2lyZXMgI3JzbyAuZ3sNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI21haW4gI3JjbnQgI3Joc3sNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojbWFpbiAjcmNudHsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI21haW4gI2NudCwgI2NudCAjY2VudGVyX2NvbCwgI2NudCAjZm9vdHsNCiAgICB3aWR0aDogY2FsYyg1NHZ3ICsgMzYwcHgpOw0KICAgIG1hcmdpbjogMCBhdXRvOw0KfQ0KYm9keSAjYXBwYmFyLGJvZHkgLnJoc2NvbCwgYm9keSAjdG9wX25hdiwgYm9keSAjZmJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KfQ0KI3JzbyAuQ09Fb2lkew0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQouY29sew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQp9DQouY29sICNjZW50ZXJfY29sew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQogICAgbWFyZ2luLWxlZnQ6IHVuc2V0ICFpbXBvcnRhbnQ7DQp9DQouc3JnLCAjcnNvLCAjcnNvPmRpdnsNCglkaXNwbGF5OiBncmlkOw0KCWdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LG1pbm1heCg1MCUsMWZyKSk7DQogICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogInhtYWluIHhtYWluIjsNCiAgICBncmlkLWdhcDogMjBweCAhaW1wb3J0YW50Ow0KICAgIGp1c3RpZnktaXRlbXM6IHN0cmV0Y2g7DQogICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7DQogICAgd2lkdGg6IDEwMCU7DQp9DQojcnNvPi5nIH4gZGl2Om5vdCguZyl7DQogICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCn0NCi5BQy5zcC1zZXBhcmF0b3Igew0KICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgbWFyZ2luLWxlZnQ6IGF1dG87DQogICAgbWFyZ2luLXJpZ2h0OiBhdXRvOw0KfQ0KLyoqc2VhcmNoIGJveCBhbGlnbiBjZW50ZXIqKi8NCi5zcnAgZm9ybXsNCiAgICBtYXJnaW46MCBhdXRvOw0KfQ0KZy1zZWN0aW9uLXdpdGgtaGVhZGVyew0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCiNoZHRiICNoZHRiLW1zYnsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICB3aWR0aDogMTAwJTsNCn0NCiNoZHRiICNoZHRiLW1zYi12aXN7DQogICAgbWFyZ2luLWxlZnQ6IC0xNjlweDsNCn0NCg=="},{"meta":{"name":"bingCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingCommonStyle.css?t=25.01","ts":1642048881204,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nQ29tbW9uU3R5bGUqLw0KYm9keSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsNCn0NCi5zaF9mYXZpY29uew0KICAgIG1hcmdpbi1sZWZ0OiAxNnB4Ow0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzPmxpOm5vdCgjbWZhX3Jvb3QpIHsNCiAgICB3aWR0aDogNjcwcHg7DQogICAgcGFkZGluZzogMTJweCAyMHB4ICFpbXBvcnRhbnQ7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGEgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhLCAjYl9yZXN1bHRzIGgyIHN0cm9uZ3sNCiAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICBmb250LXNpemU6IG1lZGl1bTsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cz5saTpob3ZlciB7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjMpOw0KICAgIGJhY2tncm91bmQ6ICNGQ0ZDRkMgIWltcG9ydGFudDsNCiAgICBib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMXB4IGdyYXk7DQp9DQojYl9jb250ZW50ID4jYl9yZXN1bHRzIGxpOm5vdCgjbWZhX3Jvb3QpIGgyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4Ow0KICAgIG1hcmdpbjogLTEycHggLTIwcHggMTBweCAtMjBweDsNCiAgICBwYWRkaW5nOiA4cHggMjBweCA1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KDQphLCBhIHN0cm9uZyB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgYSBzdHJvbmcsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYSBzdHJvbmcgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCi5iX2FsZ286Zmlyc3QtY2hpbGQ6aG92ZXIgaDIgYXsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhOmhvdmVyOmFmdGVyLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGE6aG92ZXI6YWZ0ZXIgew0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDEwMCU7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzIGE6aG92ZXIsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTpob3ZlcnsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgYTphZnRlciwNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOmFmdGVyIHsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzNDc2ZDI7DQogICAgYm90dG9tOiAtMnB4Ow0KICAgIGxlZnQ6IDEwMCU7DQogICAgd2lkdGg6IDA7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGE6dmlzaXRlZCwNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOnZpc2l0ZWQgc3Ryb25nLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGgyIGE6dmlzaXRlZCwNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBoMiBhOnZpc2l0ZWQgc3Ryb25nIHsNCiAgICBjb2xvcjogIzY2MDA5OTsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNiX2NvbnRlbnQ+b2wjYl9jb250ZXh0ew0KICAgIGRpc3BsYXk6bm9uZTsNCn0NCmJvZHkgI2JfaGVhZGVyew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQp9DQojYl9jb250ZW50IC5iX3VuZGVyU2VhcmNoYm94ew0KICAgIG1hcmdpbi10b3A6IDEwcHg7DQp9DQojYl9oZWFkZXIgLmJfc2NvcGViYXJ7DQogICAgbWFyZ2luOiB1bnNldDsNCn0NCi8qc2VhcmNoIGVuZ2luZSBqdW1wKi8NCi50c2YtcD4ubG9nb2NvbnQsICNzZWotY29udGFpbmVyew0KICAgIG1hcmdpbi1yaWdodDogMzUwcHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLnRzZi1wPi5zZmliYmJjew0KICAgIG1hcmdpbi1yaWdodDogMzUwcHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmJfc2VhcmNoYm94Rm9ybSAuc2FfdG17DQogICAgdGV4dC1hbGlnbjogbGVmdDsgLyogU2VhcmNoQm94IHRleHQgQ2VudGVyICovDQp9DQpib2R5ICNiX2hlYWRlciAjZXN0X3N3aXRjaHsNCiAgICBtYXJnaW46IDAgYXV0bzsNCiAgICBwYWRkaW5nLXJpZ2h0OiAxMCU7IC8qKlRPRE8qKiovDQp9DQpib2R5ICNlc3RfY246OmFmdGVyLCBib2R5ICNlc3RfZW46OmFmdGVyew0KICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xLDEuMykgcGVyc3BlY3RpdmUoLjVlbSkgcm90YXRlWCgwZGVnKTsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS4xLDEuMykgcGVyc3BlY3RpdmUoLjVlbSkgcm90YXRlWCgwZGVnKTsNCn0NCkBtZWRpYSAobWF4LXdpZHRoOiAxMTAwcHgpew0KICAgIGJvZHkgI2JfaGVhZGVyICNlc3Rfc3dpdGNoew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMS4ycmVtKTsNCiAgICB9DQp9DQovKiBTZWFyY2hJdG1lcyBCb3R0b20gdG8gVG9wIGFuaSAqLw0KI2JfY29udGVudHsNCiAgICBhbmltYXRpb24tbmFtZTogYW5pX2JvdHRvbVRvdG9wOw0KICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMC42czsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOw0KfQ0KDQovKiBTZWFyY2hCYXIgTGVmdCB0byBSaWdodCBhbmkgKi8NCmJvZHkgI2JfaGVhZGVyIHsNCiAgICBhbmltYXRpb24tbmFtZTogYW5pX3RvcFRvYnV0dG9tOw0KICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMC42czsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLW91dDsNCn0NCmJvZHl7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9oaWRlVG9TaG93Ow0KICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMC42czsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLW91dDsNCn0NCi5BQy5zcC1zZXBhcmF0b3J7DQogICAgbWFyZ2luLXRvcDogLTE1cHg7DQp9DQpAa2V5ZnJhbWVzIGFuaV9sZWZ0VG9yaWdodCB7DQogICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTMycHgpOw0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAyMCUgew0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAzMCUgew0KICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgfQ0KICAgIDEwMCUgew0KICAgICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCn0NCi8qIGFuaSAqLw0KQGtleWZyYW1lcyBhbmlfYm90dG9tVG90b3Agew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDMycHgpOw0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAyMCUgew0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAzMCUgew0KICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgfQ0KICAgIDEwMCUgew0KICAgICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCn0NCkAtd2Via2l0LWtleWZyYW1lcyBhbmlfdG9wVG9idXR0b20gew0KICAgIDAlIHsNCiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTMycHgpOw0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAyMCUgew0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAzMCUgew0KICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgfQ0KICAgIDEwMCUgew0KICAgICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCn0NCkAtd2Via2l0LWtleWZyYW1lcyBhbmlfaGlkZVRvU2hvdyB7DQogICAgMCUgew0KICAgICAgICBkaXNwbGF5Om5vbmU7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIGRpc3BsYXk6bm9uZTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgZGlzcGxheTpub25lOw0KICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgfQ0KICAgIDEwMCUgew0KICAgICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCn0NCg=="},{"meta":{"name":"bingOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingOnePageStyle.css?t=25.01","ts":1642048881177,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nT25lUGFnZVN0eWxlKi8NCiNiX2NvbnRlbnQgYXNpZGV7DQogICAgZGlzcGxheTpub25lOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzew0KICAgIHdpZHRoOiA3M3Z3Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIG1heC13aWR0aDogMTAwMHB4Ow0KfQ0KYm9keSAjYl9oZWFkZXJ7DQogICAgd2lkdGg6IDcydnc7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIG1hcmdpbjogMCBhdXRvOw0KfQ0KYm9keSAjYl9jb250ZW50ew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgbWFyZ2luLWxlZnQ6IHVuc2V0Ow0KICAgIHBhZGRpbmctbGVmdDogdW5zZXQ7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6bm90KCNtZmFfcm9vdCkgew0KICAgIHdpZHRoOjk4JTsNCn0NCg=="},{"meta":{"name":"bingTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingTwoPageStyle.css?t=25.01","ts":1642048881172,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nVHdvUGFnZVN0eWxlKi8NCiNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAuaGl0X3RvcF9uZXcsDQojYl9jb250ZW50IGFzaWRlLCAjYl9yZXN1bHRzICNtZmFfcm9vdHsNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHN7DQogICAgd2lkdGg6IDczdnc7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsbWlubWF4KDUwJSwxZnIpKTsNCiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOiAieG1haW4geG1haW4iOw0KICAgIGRpc3BsYXk6IGdyaWQ7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6bm90KCNtZmFfcm9vdCkgew0KICAgIHdpZHRoOjk4JTsNCiAgICBtYXJnaW4tbGVmdDogMSU7DQp9DQojYl9yZXN1bHRzIC5iX2FsZ28gLmJfZGVlcCB1bHsNCiAgICB3aWR0aDogNTAlOw0KfQ0KI2JfbXNnLCAjYl9wYWd7DQogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7DQogICAgZ3JpZC1jb2x1bW4tc3RhcnQ6IDE7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRjsNCn0NCmJvZHkgI2JfY29udGVudHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIG1hcmdpbi1sZWZ0OiB1bnNldDsNCiAgICBwYWRkaW5nLWxlZnQ6IHVuc2V0Ow0KfQ0KYm9keSAjYl9oZWFkZXJ7DQogICAgd2lkdGg6IDcydnc7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIG1hcmdpbjogMCBhdXRvOw0KfQ0K"},{"meta":{"name":"duckCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckCommonStyle.css?t=25.01","ts":1642048881154,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb0NvbW1vblN0eWxlKi8NCmJvZHkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQp9DQoucmVzdWx0X19pY29uIC5yZXN1bHRfX2ljb25fX2ltZywgLnJlc3VsdF9faWNvbiAucmVzdWx0X19pY29uIGltZ3sNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDJ7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIG1heC13aWR0aDogNjcwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCB7DQogICAgd2lkdGg6IDY3MHB4Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7DQp9DQouZGFyay1iZyAjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOw0KfQ0KLmRhcmstYmcgI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMzNDU7DQp9DQouZGFyay1iZyAjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X190aXRsZSBhIHsNCiAgICBjb2xvcjogI0NDQ0NDQzsNCn0NCi5kYXJrLWJnICNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX3RpdGxlIGE6dmlzaXRlZCB7DQogICAgY29sb3I6ICNiNzY2M2U7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X190aXRsZSBhIHsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgIG1heC13aWR0aDogNjQwcHg7DQogICAgY29sb3I6ICMzNDc2ZDI7DQogICAgZm9udC1zaXplOiBzbWFsbGVyOw0KfQ0KDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X19ib2R5ew0KICAgIHBhZGRpbmc6IDEycHggMjBweCAhaW1wb3J0YW50Ow0KfQ0KDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcDpob3ZlciB7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjMpOw0KICAgIGJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtbW96LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JheTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4Ow0KICAgIG1hcmdpbjogLTEycHggLTIwcHggMHB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDhweCAyMHB4IDVweDsNCiAgICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDBweCAwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6YWZ0ZXIgew0KICAgIGNvbnRlbnQ6ICIiOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzM0NzZkMjsNCiAgICBib3R0b206IDFweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZCwNCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZCBzdHJvbmcgew0KICAgIGNvbG9yOiAjNjYwMDk5Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLA0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCg0KLyogU2VhcmNoSXRtZXMgQm90dG9tIHRvIFRvcCBhbmkgKi8NCiNsaW5rc193cmFwcGVyICNsaW5rcyB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9ib3R0b21Ub3RvcDsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IC4zczsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOw0KfQ0KDQovKiBTZWFyY2hCYXIgTGVmdCB0byBSaWdodCBhbmkgKi8NCiNoZWFkZXJfd3JhcHBlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9sZWZ0VG9yaWdodDsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IC4zczsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLW91dDsNCn0NCkBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0IHsNCiAgICAwJSB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0KLyogYW5pICovDQpAa2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0K"},{"meta":{"name":"duckOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckOnePageStyle.css?t=25.01","ts":1642048881231,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb09uZVBhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsICNvcmdhbmljLW1vZHVsZSwgLnBpbm5lZC10by1ib3R0b217DQogICAgZGlzcGxheTogbm9uZTsNCn0NCi5qcy1yZXN1bHQtaGlkZGVuLWVsew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCn0NCi5zaXRlLXdyYXBwZXIgI3dlYl9jb250ZW50X3dyYXBwZXIgLmN3IHsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIG1heC13aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLWxlZnQ6IC0xNTBweDsNCn0NCg0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAuc2VhcmNoLWZpbHRlcnMtd3JhcCwNCiN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tZXNzYWdlew0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIGRpc3BsYXk6IGdyaWQ7DQp9DQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciB7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCg0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgd2lkdGg6IDUwMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXJ7DQogICAgZGlzcGxheTogaW5saW5lLWZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbnsNCiAgICBmbG9hdDogdW5zZXQ7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"duckTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckTwoPageStyle.css?t=25.01","ts":1642048881204,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb1R3b1BhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsDQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhciwNCiNvcmdhbmljLW1vZHVsZSwNCi5waW5uZWQtdG8tYm90dG9tew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQouanMtcmVzdWx0LWhpZGRlbi1lbHsNCiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7DQp9DQouc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jdyB7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnNlYXJjaC1maWx0ZXJzLXdyYXAsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWVzc2FnZXsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBncmlkOw0KfQ0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIgew0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIC5oZWFkZXJfX3NlYXJjaC13cmFwIHsNCiAgICB3aWR0aDogNTAwcHg7DQp9DQojbGlua3Nfd3JhcHBlcnsNCiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIGZsb2F0OiB1bnNldDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLXNpZGViYXJ7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW46IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzew0KICAgIHdpZHRoOiA4MHZ3Ow0KICAgIC8qIFRoaXMgbWF5IGNhdXNlIFBhZ2UgZmFpbGVkICovDQogICAgZGlzcGxheTogZ3JpZDsNCiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDUwJSA1MCU7DQogICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogInhtYWluIHhtYWluIjsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwew0KICAgIHdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7DQp9DQojbGlua3MgLnJlc3VsdC0tbW9yZSwgI2xpbmtzIC5yZXN1bHQtLXNlcHsNCiAgICBncmlkLWNvbHVtbi1zdGFydDogMTsNCiAgICBncmlkLWNvbHVtbi1lbmQ6IHhtYWluLWVuZDsNCiAgICB3aWR0aDogdW5zZXQgIWltcG9ydGFudDsNCiAgICBwYWRkaW5nOiAwOw0KICAgIHBhZGRpbmctcmlnaHQ6IDE1cHg7DQp9DQojbGlua3MgLnJlc3VsdC0tc2Vwew0KICAgIG1hcmdpbi1ib3R0b206IDJlbTsNCn0NCi5ib2R5LS1zZXJwIC5mb290ZXJ7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBwYWRkaW5nLWxlZnQ6IHVuc2V0Ow0KfQ0K"},{"meta":{"name":"dogeCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeCommonStyle.css?t=25.01","ts":1642048881206,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZUNvbW1vblN0eWxlKi8NCmJvZHkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQp9DQoucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX2ljb257DQogICAgZGlzcGxheTogbm9uZTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyew0KICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbnsNCiAgICBtYXgtd2lkdGg6IDY3MHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgew0KICAgIHdpZHRoOiA2NzBweDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOw0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdGl0bGUgYSB7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICBtYXgtd2lkdGg6IDY0MHB4Ow0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtc2l6ZTogc21hbGxlcjsNCn0NCg0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fYm9keXsNCiAgICBwYWRkaW5nOiAxMnB4IDIwcHggIWltcG9ydGFudDsNCn0NCg0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXA6aG92ZXIgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4zKTsNCiAgICBib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMXB4IGdyYXk7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCiAgICBtYXJnaW46IC0xMnB4IC0yMHB4IDBweCAtMjBweDsNCiAgICBwYWRkaW5nOiA4cHggMjBweCA1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOmFmdGVyIHsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzNDc2ZDI7DQogICAgYm90dG9tOiAxcHg7DQogICAgbGVmdDogMTAwJTsNCiAgICB3aWR0aDogMDsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQsDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQgc3Ryb25nIHsNCiAgICBjb2xvcjogIzY2MDA5OTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQoNCi8qIFNlYXJjaEl0bWVzIEJvdHRvbSB0byBUb3AgYW5pICovDQojbGlua3Nfd3JhcHBlciAjbGlua3Mgew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfYm90dG9tVG90b3A7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCg0KLyogU2VhcmNoQmFyIExlZnQgdG8gUmlnaHQgYW5pICovDQojaGVhZGVyX3dyYXBwZXIgLmhlYWRlcl9fc2VhcmNoLXdyYXAgew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfbGVmdFRvcmlnaHQ7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIG1hcmdpbi10b3A6IC0xNXB4Ow0KfQ0KQGtleWZyYW1lcyBhbmlfbGVmdFRvcmlnaHQgew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQovKiBhbmkgKi8NCkBrZXlmcmFtZXMgYW5pX2JvdHRvbVRvdG9wIHsNCiAgICAwJSB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQo="},{"meta":{"name":"dogeOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeOnePageStyle.css?t=25.01","ts":1642048881205,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZU9uZVBhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsICNvcmdhbmljLW1vZHVsZSwgLnBpbm5lZC10by1ib3R0b217DQogICAgZGlzcGxheTogbm9uZTsNCn0NCi5qcy1yZXN1bHQtaGlkZGVuLWVsew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCn0NCi5zaXRlLXdyYXBwZXIgI3dlYl9jb250ZW50X3dyYXBwZXIgLmN3IHsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCkgew0KICAgICNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgfQ0KfQ0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciwNCiN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5zZWFyY2gtZmlsdGVycy13cmFwLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1lc3NhZ2V7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZ3JpZDsNCn0NCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIHsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgd2lkdGg6IDUwMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXJ7DQogICAgZGlzcGxheTogaW5saW5lLWZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW57DQogICAgZmxvYXQ6IHVuc2V0Ow0KICAgIG1heC13aWR0aDogODYwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"dogeTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeTwoPageStyle.css?t=25.01","ts":1642048881259,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZVR3b1BhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsDQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhciwNCiNvcmdhbmljLW1vZHVsZSwNCi5waW5uZWQtdG8tYm90dG9tew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQouanMtcmVzdWx0LWhpZGRlbi1lbHsNCiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7DQp9DQouc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jdyB7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnNlYXJjaC1maWx0ZXJzLXdyYXAsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWVzc2FnZXsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBncmlkOw0KfQ0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIgew0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIC5oZWFkZXJfX3NlYXJjaC13cmFwIHsNCiAgICB3aWR0aDogNTAwcHg7DQp9DQojbGlua3Nfd3JhcHBlcnsNCiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIGZsb2F0OiB1bnNldDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLXNpZGViYXJ7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW46IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzew0KICAgIHdpZHRoOiA4MHZ3Ow0KICAgIC8qIFRoaXMgbWF5IGNhdXNlIFBhZ2UgZmFpbGVkICovDQogICAgZGlzcGxheTogZ3JpZDsNCiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDUwJSA1MCU7DQogICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogInhtYWluIHhtYWluIjsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwew0KICAgIHdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7DQp9DQojbGlua3MgLnJlc3VsdC0tbW9yZSwgI2xpbmtzIC5yZXN1bHQtLXNlcHsNCiAgICBncmlkLWNvbHVtbi1zdGFydDogMTsNCiAgICBncmlkLWNvbHVtbi1lbmQ6IHhtYWluLWVuZDsNCiAgICB3aWR0aDogdW5zZXQgIWltcG9ydGFudDsNCiAgICBwYWRkaW5nOiAwOw0KICAgIHBhZGRpbmctcmlnaHQ6IDE1cHg7DQp9DQojbGlua3MgLnJlc3VsdC0tc2Vwew0KICAgIG1hcmdpbi1ib3R0b206IDJlbTsNCn0NCi5ib2R5LS1zZXJwIC5mb290ZXJ7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBwYWRkaW5nLWxlZnQ6IHVuc2V0Ow0KfQ0K"},{"meta":{"name":"HuYanStyle.css","url":"http://ibaidu.tujidu.com/newcss/HuYanStyle.css?t=25.01","ts":1642048881250,"mimetype":"text/css"},"source":"LyoqU3RvcmUgSHVZYW5TdHlsZSoqLw0KLyoqKioqQmFpZHUtSHVZYW5TdHlsZSoqKioqLw0KYm9keVtiYWlkdV0sDQojd3JhcHBlciAjaGVhZCwNCiN3cmFwcGVyICNzX3RhYiwNCmZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IGFydGljbGUsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciwNCiN3cmFwcGVyICNycywNCiN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQUFBQUEgOw0KICAgIGJvcmRlcjogMXB4IGRvdWJsZSAjQTJEN0Q0IDsNCiAgICBib3JkZXItcmFkaXVzOiAwcHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIgYXJ0aWNsZXsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciBoMywNCiN3cmFwcGVyICNycyAudHR7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQovKioqQmluZy1IdVlhblN0eWxlKioqKi8NCi5uYV9jbnQgLm53c19pdG0sDQoubndzX2l0bWIsDQojYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6bm90KCNtZmFfcm9vdCksDQpib2R5ICNiX2hlYWRlcnsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQUFBQUFBIDsNCiAgICBib3JkZXI6IDFweCBkb3VibGUgI0EyRDdENCA7DQogICAgYm9yZGVyLXJhZGl1czogMHB4Ow0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzIGxpOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgbGkgaDJ7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQovKioqR29vZ2xlLUh1WWFuU3R5bGUqKioqLw0KYm9keVtnb29nbGVdew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmRGZEZkQ7DQp9DQojcnNvIC5nLCAuYmtXTWdkPi5nLA0KLmJrV01nZCBnLWlubmVyLWNhcmQsDQojcmhzY29sICNyaHMsDQojcmhzY29sICNyaHMgLmc+ZGl2LA0KLmMyeHpUYiAuZywNCi5ydVRjSWQgLmcsDQouZm0wNklmIC5nLA0KLmNVblFLZSAuZywNCi5IYW5RbWYgLmcsDQojcnNvIC5nLA0KI3JzbyAua3AtYmxrLA0KI3JzbyAuTUdxakssDQojcnNvPmRpdjpub3QoLmcpPip7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0FBQUFBQSA7DQogICAgYm9yZGVyOiAxcHggc29saWQgIzljZDJjZkFBOw0KICAgIGJvcmRlci1yYWRpdXM6IDBweDsNCn0NCiNyc28gLmc6aG92ZXIsDQouYmtXTWdkPi5nOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQogICAgYm9yZGVyOiAxcHggZG91YmxlICM5Y2QyY2Y7DQp9DQouYmtXTWdkIC5nIGRpdi5yLA0KI3JzbyAuZyBoM3sNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQkJCQkJCIDsNCn0NCi8qKipTb2dvdS1IdVlhblN0eWxlKioqKi8NCmJvZHlbc29nb3VdLCAjcGFnZWJhcl9jb250YWluZXIgYXsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZkRmRGZEOw0KfQ0KI21haW4gLnJlc3VsdHM+ZGl2ew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQUFBQUEgOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICM5Y2QyY2ZBQTsNCiAgICBib3JkZXItcmFkaXVzOiAwcHg7DQp9DQojbWFpbiAucmVzdWx0cz5kaXY6aG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0MgIWltcG9ydGFudDsNCiAgICBib3JkZXI6IDFweCBkb3VibGUgIzljZDJjZjsNCn0NCiNtYWluIC5yZXN1bHRzPmRpdiBoM3sNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQkJCQkJCIDsNCn0NCi8qKipEdWNrX0RvZ2UtSHVZYW5TdHlsZSoqKiovDQpib2R5W2R1Y2tdLGJvZHlbZG9nZV17DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZEZkRmRDsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQUFBQUEgOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICM5Y2QyY2ZBQTsNCiAgICBib3JkZXItcmFkaXVzOiAwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcDpob3ZlciB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQyAhaW1wb3J0YW50Ow0KICAgIGJvcmRlcjogMXB4IGRvdWJsZSAjOWNkMmNmOw0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDJ7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQo="},{"meta":{"name":"SiteConfigRules.conf","url":"http://ibaidu.tujidu.com/newcss/SiteConfigRules.conf?t=25.01","ts":1642048881233,"mimetype":"text/plain"},"source":"b25saW5lREIgPSB7DQogICBiYWlkdTogew0KICAgICAgIFNpdGVUeXBlSUQ6IDEsDQogICAgICAgTWFpblR5cGU6ICIjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciIsDQogICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAuYy1jb250YWluZXIgYXJ0aWNsZSBhIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5jLXNob3d1cmwiLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogJy8vZGl2W0BpZD0icGFnZSJdLy9hW2NvbnRhaW5zKHRleHQoKSwiw6TCuMKLw6TCuMKAw6nCocK1IildW0BocmVmXScsDQogICAgICAgICAgIHBhZ2VFbGVtZW50OiAiY3NzO2RpdiNjb250ZW50X2xlZnQgPiAqIiwNCiAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7ZGl2I2NvbnRlbnRfbGVmdCIsIDIgXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICJjc3M7I3BhZ2UiLA0KICAgICAgICAgICBzdHlsaXNoOiAiLmF1dG9wYWdlcml6ZV9wYWdlX2luZm8sIGRpdi5zcC1zZXBhcmF0b3Ige21hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDt9LmMtaW1nLWJvcmRlcntkaXNwbGF5Om5vbmV9IiwNCiAgICAgICB9DQogICB9LA0KICAgc29nb3U6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAyLA0KICAgICAgIE1haW5UeXBlOiAiI21haW4gLnJlc3VsdHM+ZGl2IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy5wdD5hLCBoMy52clRpdGxlPmEiLA0KICAgICAgIEZhdmljb25UeXBlOiAiY2l0ZVtpZCo9J2NhY2hlcmVzdWx0X2luZm9fJ10iLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogIi8vZGl2W0BpZD1cInBhZ2ViYXJfY29udGFpbmVyXCJdLy9hW0BpZD1cInNvZ291X25leHRcIl0iLA0KICAgICAgICAgICBwYWdlRWxlbWVudDogIi8vZGl2W0BjbGFzcz0ncmVzdWx0cyddL2RpdiIsDQogICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAY2xhc3M9J3Jlc3VsdHMnXSIsIDJdLA0KICAgICAgICAgICByZXBsYWNlRTogImlkKCdwYWdlYmFyX2NvbnRhaW5lcicpIg0KICAgICAgIH0NCiAgIH0sDQogICBoYW9zb3U6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAzLA0KICAgICAgIE1haW5UeXBlOiAiLnJlcy1saXN0IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICIucmVzLWxpc3QgaDM+YSIsDQogICAgICAgRmF2aWNvblR5cGU6ICJjaXRlIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsDQogICAgICAgQ291bnRlclR5cGU6ICIucmVzdWx0cz5kaXYiLA0KICAgICAgIEJsb2NrVHlwZTogImgzIGEiLA0KICAgICAgIHBhZ2VyOnsNCiAgICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9J3BhZ2UnXS8vYVt0ZXh0KCk9J8OkwrjCi8OkwrjCgMOpwqHCtT4nXSB8IGlkKCdzbmV4dCcpIiwNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICIvL2RpdltAaWQ9J2NvbnRhaW5lciddL2RpdiIsDQogICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAaWQ9J2NvbnRhaW5lciddIiwgMl0sDQogICAgICAgICAgIHJlcGxhY2VFOiAiaWQoJ3BhZ2UnKSINCiAgICAgICB9DQogICB9LA0KICAgZ29vZ2xlOiB7DQogICAgICAgU2l0ZVR5cGVJRDogNCwNCiAgICAgICBNYWluVHlwZTogIiNyc28gLmciLA0KICAgICAgIEZhdmljb25UeXBlOiAiLmlVaDMwIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsDQogICAgICAgQ291bnRlclR5cGU6ICIjcnNvIC5nIGgzLC5feUU+ZGl2W2NsYXNzfj1fa2tdIGgzIiwNCiAgICAgICBCbG9ja1R5cGU6ICIucmM+ZGl2PmEsICNycywgI3JzbyAuZyBhIiwNCiAgICAgICBwYWdlcjp7DQogICAgICAgICAgIG5leHRMaW5rOiAnaWQoInBubmV4dCIpIHwgaWQoIm5hdmJhciBuYXZjbnQgbmF2IikvL3RkW3NwYW5dL2ZvbGxvd2luZy1zaWJsaW5nOjp0ZFsxXS9hIHwgaWQoIm5uIikvcGFyZW50OjphJywNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICcvL2RpdltAaWQ9InJlcyJdJywNCiAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7I3JlcyIsIDIgXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICcvL2RpdltAaWQ9Im5hdmNudCJdIHwgLy9kaXZbQGlkPSJyY250Il0vL2RpdltAcm9sZT0ibmF2aWdhdGlvbiJdJw0KICAgICAgIH0NCiAgIH0sDQogICBiaW5nOiB7DQogICAgICAgU2l0ZVR5cGVJRDogNSwNCiAgICAgICBNYWluVHlwZTogIiNiX3Jlc3VsdHM+bGkiLA0KICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsDQogICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLA0KICAgICAgIENvdW50ZXJUeXBlOiAiI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbnNdPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsXCJzYl9wYWdOXCIpXSIsDQogICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLA0KICAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoXCJiX3Jlc3VsdHNcIikvbGlbQGNsYXNzPVwiYl9wYWdcIl0iLCAxXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICJpZChcImJfcmVzdWx0c1wiKS8vbmF2W0Byb2xlPVwibmF2aWdhdGlvblwiXSIsDQogICAgICAgfQ0KICAgfSwNCiAgIGR1Y2s6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAxMCwNCiAgICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdXJsX19kb21haW4iLA0KICAgICAgIEZhdmljb25BZGRUbzogImgyIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwNCiAgICAgICBwYWdlcjp7DQogICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcyxcInNiX3BhZ05cIildIiwNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZChcImJfcmVzdWx0c1wiKS9saVtub3QoY29udGFpbnMoQGNsYXNzLFwiYl9wYWdcIikgb3IgY29udGFpbnMoQGNsYXNzLFwiYl9hbnMgYl90b3BcIikpXSIsDQogICAgICAgICAgIEhUX2luc2VydDogWyJpZChcImJfcmVzdWx0c1wiKS9saVtAY2xhc3M9XCJiX3BhZ1wiXSIsIDFdLA0KICAgICAgICAgICByZXBsYWNlRTogImlkKFwiYl9yZXN1bHRzXCIpLy9uYXZbQHJvbGU9XCJuYXZpZ2F0aW9uXCJdIiwNCiAgICAgICB9DQogICB9LA0KICAgZG9nZTogew0KICAgICAgU2l0ZVR5cGVJRDogMTEsDQogICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwNCiAgICAgIEZhdmljb25UeXBlOiAiLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X191cmxfX2RvbWFpbiIsDQogICAgICBGYXZpY29uQWRkVG86ICJoMiIsDQogICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwNCiAgICAgIEJsb2NrVHlwZTogImgyIGEiLA0KICAgICAgcGFnZXI6ew0KICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdC0tbW9yZScpXSIsDQogICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZCgnbGlua3Nfd3JhcHBlcicpLy9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0c19saW5rc19kZWVwJyldIiwNCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoJ2xpbmtzX3dyYXBwZXInKS8vZGl2W0BpZD0nbGlua3MnXS9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0LS1tb3JlJyldIiwgMV0sDQogICAgICAgICAgcmVwbGFjZUU6ICJpZCgnbGlua3Nfd3JhcHBlcicpLy9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0LS1tb3JlJyldL2FbY29udGFpbnModGV4dCgpLCAnw6TCuMKLw6TCuMKAw6nCocK1JyldW0BocmVmXSIsDQogICAgICB9DQogICB9LA0KICAgbUJhaWR1OnsNCiAgICAgICBTaXRlVHlwZUlEOiA2LA0KICAgICAgIE1haW5UeXBlOiAiI2JfcmVzdWx0cz5saSIsDQogICAgICAgRmF2aWNvblR5cGU6ICIuYl9hdHRyaWJ1dGlvbj5jaXRlIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsDQogICAgICAgQ291bnRlclR5cGU6ICIjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2Fuc10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwNCiAgIH0sDQogICB6aGlodTogew0KICAgICAgIFNpdGVUeXBlSUQ6IDcsDQogICB9LA0KICAgYmFpZHVfeHVlc2h1OnsNCiAgICAgICBTaXRlVHlwZUlEOiA4LA0KICAgICAgIE1haW5UeXBlOiAiI2NvbnRlbnRfbGVmdCAucmVzdWx0IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy50PmEsICNyZXN1bHRzIC5jLWNvbnRhaW5lcj4uYy1ibG9ja2EiLA0KICAgICAgIEZhdmljb25UeXBlOiAiLnJlc3VsdC1vcCwgLmMtc2hvd3VybCIsDQogICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLA0KICAgICAgIENvdW50ZXJUeXBlOiAiI2NvbnRlbnRfbGVmdD4jZG91YmxlPmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0sI2NvbnRlbnRfbGVmdD5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwNCiAgIH0sDQogICBvdGhlcjogew0KICAgICAgIFNpdGVUeXBlSUQ6IDksDQogICB9DQp9DQo="}],"requires":[{"meta":{"name":"vue.min.js","url":"https://cdn.staticfile.org/vue/2.6.11/vue.min.js","ts":1642048881122,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjExCiAqIChjKSAyMDE0LTIwMTkgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVnVlPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG51bGwhPWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4hMD09PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8InN5bWJvbCI9PXR5cGVvZiBlfHwiYm9vbGVhbiI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKGUpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKGUpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9cGFyc2VGbG9hdChTdHJpbmcoZSkpO3JldHVybiB0Pj0wJiZNYXRoLmZsb29yKHQpPT09dCYmaXNGaW5pdGUoZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gbihlKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2F0Y2h9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbnVsbD09ZT8iIjpBcnJheS5pc0FycmF5KGUpfHxzKGUpJiZlLnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeShlLG51bGwsMik6U3RyaW5nKGUpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCk/ZTp0fWZ1bmN0aW9uIHAoZSx0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPWUuc3BsaXQoIiwiKSxpPTA7aTxyLmxlbmd0aDtpKyspbltyW2ldXT0hMDtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbihlKXtyZXR1cm4gbltlXX19dmFyIGQ9cCgic2xvdCxjb21wb25lbnQiLCEwKSx2PXAoImtleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUubGVuZ3RoKXt2YXIgbj1lLmluZGV4T2YodCk7aWYobj4tMSlyZXR1cm4gZS5zcGxpY2UobiwxKX19dmFyIG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiB5KGUsdCl7cmV0dXJuIG0uY2FsbChlLHQpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHRbbl18fCh0W25dPWUobikpfX12YXIgXz0vLShcdykvZyxiPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShfLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dC50b1VwcGVyQ2FzZSgpOiIifSl9KSwkPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLHc9L1xCKFtBLVpdKS9nLEM9ZyhmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKHcsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgeD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihlLHQpe3JldHVybiBlLmJpbmQodCl9OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO3JldHVybiByP3I+MT9lLmFwcGx5KHQsYXJndW1lbnRzKTplLmNhbGwodCxuKTplLmNhbGwodCl9cmV0dXJuIG4uX2xlbmd0aD1lLmxlbmd0aCxufTtmdW5jdGlvbiBrKGUsdCl7dD10fHwwO2Zvcih2YXIgbj1lLmxlbmd0aC10LHI9bmV3IEFycmF5KG4pO24tLTspcltuXT1lW24rdF07cmV0dXJuIHJ9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBPKGUpe2Zvcih2YXIgdD17fSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXSYmQSh0LGVbbl0pO3JldHVybiB0fWZ1bmN0aW9uIFMoZSx0LG4pe312YXIgVD1mdW5jdGlvbihlLHQsbil7cmV0dXJuITF9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Z1bmN0aW9uIE4oZSx0KXtpZihlPT09dClyZXR1cm4hMDt2YXIgbj1vKGUpLHI9byh0KTtpZighbnx8IXIpcmV0dXJuIW4mJiFyJiZTdHJpbmcoZSk9PT1TdHJpbmcodCk7dHJ5e3ZhciBpPUFycmF5LmlzQXJyYXkoZSksYT1BcnJheS5pc0FycmF5KHQpO2lmKGkmJmEpcmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTihlLHRbbl0pfSk7aWYoZSBpbnN0YW5jZW9mIERhdGUmJnQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXMoZSksYz1PYmplY3Qua2V5cyh0KTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gTihlW25dLHRbbl0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGooZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihOKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gRChlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXZhciBMPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIsTT1bImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsImZpbHRlciJdLEk9WyJiZWZvcmVDcmVhdGUiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCJdLEY9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzpULGlzUmVzZXJ2ZWRBdHRyOlQsaXNVbmtub3duRWxlbWVudDpULGdldFRhZ05hbWVzcGFjZTpTLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkUsbXVzdFVzZVByb3A6VCxhc3luYzohMCxfbGlmZWN5Y2xlSG9va3M6SX0sUD0vYS16QS1aXHUwMEI3XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMzdEXHUwMzdGLVx1MUZGRlx1MjAwQy1cdTIwMERcdTIwM0YtXHUyMDQwXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkQvO2Z1bmN0aW9uIFIoZSx0LG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgSD1uZXcgUmVnRXhwKCJbXiIrUC5zb3VyY2UrIi4kX1xcZF0iKTt2YXIgQixVPSJfX3Byb3RvX18iaW57fSx6PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LFY9InVuZGVmaW5lZCIhPXR5cGVvZiBXWEVudmlyb25tZW50JiYhIVdYRW52aXJvbm1lbnQucGxhdGZvcm0sSz1WJiZXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksSj16JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHE9SiYmL21zaWV8dHJpZGVudC8udGVzdChKKSxXPUomJkouaW5kZXhPZigibXNpZSA5LjAiKT4wLFo9SiYmSi5pbmRleE9mKCJlZGdlLyIpPjAsRz0oSiYmSi5pbmRleE9mKCJhbmRyb2lkIiksSiYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KEopfHwiaW9zIj09PUspLFg9KEomJi9jaHJvbWVcL1xkKy8udGVzdChKKSxKJiYvcGhhbnRvbWpzLy50ZXN0KEopLEomJkoubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykpLFk9e30ud2F0Y2gsUT0hMTtpZih6KXRyeXt2YXIgZWU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGVlLCJwYXNzaXZlIix7Z2V0OmZ1bmN0aW9uKCl7UT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLGVlKX1jYXRjaChlKXt9dmFyIHRlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUImJihCPSF6JiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLEJ9LG5lPXomJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIHJlKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYvbmF0aXZlIGNvZGUvLnRlc3QoZS50b1N0cmluZygpKX12YXIgaWUsb2U9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnJlKFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmcmUoUmVmbGVjdC5vd25LZXlzKTtpZT0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmcmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09dGhpcy5zZXRbZV19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLnNldFtlXT0hMH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSxlfSgpO3ZhciBhZT1TLHNlPTAsY2U9ZnVuY3Rpb24oKXt0aGlzLmlkPXNlKyssdGhpcy5zdWJzPVtdfTtjZS5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKGUpe3RoaXMuc3Vicy5wdXNoKGUpfSxjZS5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKGUpe2godGhpcy5zdWJzLGUpfSxjZS5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Y2UudGFyZ2V0JiZjZS50YXJnZXQuYWRkRGVwKHRoaXMpfSxjZS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc3Vicy5zbGljZSgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspZVt0XS51cGRhdGUoKX0sY2UudGFyZ2V0PW51bGw7dmFyIHVlPVtdO2Z1bmN0aW9uIGxlKGUpe3VlLnB1c2goZSksY2UudGFyZ2V0PWV9ZnVuY3Rpb24gZmUoKXt1ZS5wb3AoKSxjZS50YXJnZXQ9dWVbdWUubGVuZ3RoLTFdfXZhciBwZT1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe3RoaXMudGFnPWUsdGhpcy5kYXRhPXQsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9dCYmdC5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZGU9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtkZS5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGUucHJvdG90eXBlLGRlKTt2YXIgdmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB0PW5ldyBwZTtyZXR1cm4gdC50ZXh0PWUsdC5pc0NvbW1lbnQ9ITAsdH07ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIG5ldyBwZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcoZSkpfWZ1bmN0aW9uIG1lKGUpe3ZhciB0PW5ldyBwZShlLnRhZyxlLmRhdGEsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5zbGljZSgpLGUudGV4dCxlLmVsbSxlLmNvbnRleHQsZS5jb21wb25lbnRPcHRpb25zLGUuYXN5bmNGYWN0b3J5KTtyZXR1cm4gdC5ucz1lLm5zLHQuaXNTdGF0aWM9ZS5pc1N0YXRpYyx0LmtleT1lLmtleSx0LmlzQ29tbWVudD1lLmlzQ29tbWVudCx0LmZuQ29udGV4dD1lLmZuQ29udGV4dCx0LmZuT3B0aW9ucz1lLmZuT3B0aW9ucyx0LmZuU2NvcGVJZD1lLmZuU2NvcGVJZCx0LmFzeW5jTWV0YT1lLmFzeW5jTWV0YSx0LmlzQ2xvbmVkPSEwLHR9dmFyIHllPUFycmF5LnByb3RvdHlwZSxnZT1PYmplY3QuY3JlYXRlKHllKTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9eWVbZV07UihnZSxlLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBpLG89dC5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKGUpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjppPW47YnJlYWs7Y2FzZSJzcGxpY2UiOmk9bi5zbGljZSgyKX1yZXR1cm4gaSYmYS5vYnNlcnZlQXJyYXkoaSksYS5kZXAubm90aWZ5KCksb30pfSk7dmFyIF9lPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdlKSxiZT0hMDtmdW5jdGlvbiAkZShlKXtiZT1lfXZhciB3ZT1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnZhbHVlPWUsdGhpcy5kZXA9bmV3IGNlLHRoaXMudm1Db3VudD0wLFIoZSwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KGUpPyhVPyh0PWdlLGUuX19wcm90b19fPXQpOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07UihlLG8sdFtvXSl9fShlLGdlLF9lKSx0aGlzLm9ic2VydmVBcnJheShlKSk6dGhpcy53YWxrKGUpfTtmdW5jdGlvbiBDZShlLHQpe3ZhciBuO2lmKG8oZSkmJiEoZSBpbnN0YW5jZW9mIHBlKSlyZXR1cm4geShlLCJfX29iX18iKSYmZS5fX29iX18gaW5zdGFuY2VvZiB3ZT9uPWUuX19vYl9fOmJlJiYhdGUoKSYmKEFycmF5LmlzQXJyYXkoZSl8fHMoZSkpJiZPYmplY3QuaXNFeHRlbnNpYmxlKGUpJiYhZS5faXNWdWUmJihuPW5ldyB3ZShlKSksdCYmbiYmbi52bUNvdW50Kyssbn1mdW5jdGlvbiB4ZShlLHQsbixyLGkpe3ZhciBvPW5ldyBjZSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZighYXx8ITEhPT1hLmNvbmZpZ3VyYWJsZSl7dmFyIHM9YSYmYS5nZXQsYz1hJiZhLnNldDtzJiYhY3x8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fChuPWVbdF0pO3ZhciB1PSFpJiZDZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1zP3MuY2FsbChlKTpuO3JldHVybiBjZS50YXJnZXQmJihvLmRlcGVuZCgpLHUmJih1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KHQpJiZmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj12b2lkIDAscj0wLGk9dC5sZW5ndGg7cjxpO3IrKykobj10W3JdKSYmbi5fX29iX18mJm4uX19vYl9fLmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KG4pJiZlKG4pfSh0KSkpLHR9LHNldDpmdW5jdGlvbih0KXt2YXIgcj1zP3MuY2FsbChlKTpuO3Q9PT1yfHx0IT10JiZyIT1yfHxzJiYhY3x8KGM/Yy5jYWxsKGUsdCk6bj10LHU9IWkmJkNlKHQpLG8ubm90aWZ5KCkpfX0pfX1mdW5jdGlvbiBrZShlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSYmYyh0KSlyZXR1cm4gZS5sZW5ndGg9TWF0aC5tYXgoZS5sZW5ndGgsdCksZS5zcGxpY2UodCwxLG4pLG47aWYodCBpbiBlJiYhKHQgaW4gT2JqZWN0LnByb3RvdHlwZSkpcmV0dXJuIGVbdF09bixuO3ZhciByPWUuX19vYl9fO3JldHVybiBlLl9pc1Z1ZXx8ciYmci52bUNvdW50P246cj8oeGUoci52YWx1ZSx0LG4pLHIuZGVwLm5vdGlmeSgpLG4pOihlW3RdPW4sbil9ZnVuY3Rpb24gQWUoZSx0KXtpZihBcnJheS5pc0FycmF5KGUpJiZjKHQpKWUuc3BsaWNlKHQsMSk7ZWxzZXt2YXIgbj1lLl9fb2JfXztlLl9pc1Z1ZXx8biYmbi52bUNvdW50fHx5KGUsdCkmJihkZWxldGUgZVt0XSxuJiZuLmRlcC5ub3RpZnkoKSl9fXdlLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspeGUoZSx0W25dKX0sd2UucHJvdG90eXBlLm9ic2VydmVBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspQ2UoZVt0XSl9O3ZhciBPZT1GLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBTZShlLHQpe2lmKCF0KXJldHVybiBlO2Zvcih2YXIgbixyLGksbz1vZT9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksYT0wO2E8by5sZW5ndGg7YSsrKSJfX29iX18iIT09KG49b1thXSkmJihyPWVbbl0saT10W25dLHkoZSxuKT9yIT09aSYmcyhyKSYmcyhpKSYmU2UocixpKTprZShlLG4saSkpO3JldHVybiBlfWZ1bmN0aW9uIFRlKGUsdCxuKXtyZXR1cm4gbj9mdW5jdGlvbigpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQsaT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwobixuKTplO3JldHVybiByP1NlKHIsaSk6aX06dD9lP2Z1bmN0aW9uKCl7cmV0dXJuIFNlKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbCh0aGlzLHRoaXMpOnQsImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSl9OnQ6ZX1mdW5jdGlvbiBFZShlLHQpe3ZhciBuPXQ/ZT9lLmNvbmNhdCh0KTpBcnJheS5pc0FycmF5KHQpP3Q6W3RdOmU7cmV0dXJuIG4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyktMT09PXQuaW5kZXhPZihlW25dKSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fShuKTpufWZ1bmN0aW9uIE5lKGUsdCxuLHIpe3ZhciBpPU9iamVjdC5jcmVhdGUoZXx8bnVsbCk7cmV0dXJuIHQ/QShpLHQpOml9T2UuZGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/VGUoZSx0LG4pOnQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6VGUoZSx0KX0sSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2VdPUVlfSksTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2UrInMiXT1OZX0pLE9lLndhdGNoPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKGU9PT1ZJiYoZT12b2lkIDApLHQ9PT1ZJiYodD12b2lkIDApLCF0KXJldHVybiBPYmplY3QuY3JlYXRlKGV8fG51bGwpO2lmKCFlKXJldHVybiB0O3ZhciBpPXt9O2Zvcih2YXIgbyBpbiBBKGksZSksdCl7dmFyIGE9aVtvXSxzPXRbb107YSYmIUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSksaVtvXT1hP2EuY29uY2F0KHMpOkFycmF5LmlzQXJyYXkocyk/czpbc119cmV0dXJuIGl9LE9lLnByb3BzPU9lLm1ldGhvZHM9T2UuaW5qZWN0PU9lLmNvbXB1dGVkPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIEEoaSxlKSx0JiZBKGksdCksaX0sT2UucHJvdmlkZT1UZTt2YXIgamU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9O2Z1bmN0aW9uIERlKGUsdCxuKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9dC5vcHRpb25zKSxmdW5jdGlvbihlLHQpe3ZhciBuPWUucHJvcHM7aWYobil7dmFyIHIsaSxvPXt9O2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHI9bi5sZW5ndGg7ci0tOykic3RyaW5nIj09dHlwZW9mKGk9bltyXSkmJihvW2IoaSldPXt0eXBlOm51bGx9KTtlbHNlIGlmKHMobikpZm9yKHZhciBhIGluIG4paT1uW2FdLG9bYihhKV09cyhpKT9pOnt0eXBlOml9O2UucHJvcHM9b319KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5pbmplY3Q7aWYobil7dmFyIHI9ZS5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKylyW25baV1dPXtmcm9tOm5baV19O2Vsc2UgaWYocyhuKSlmb3IodmFyIG8gaW4gbil7dmFyIGE9bltvXTtyW29dPXMoYSk/QSh7ZnJvbTpvfSxhKTp7ZnJvbTphfX19fSh0KSxmdW5jdGlvbihlKXt2YXIgdD1lLmRpcmVjdGl2ZXM7aWYodClmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmKHRbbl09e2JpbmQ6cix1cGRhdGU6cn0pfX0odCksIXQuX2Jhc2UmJih0LmV4dGVuZHMmJihlPURlKGUsdC5leHRlbmRzLG4pKSx0Lm1peGlucykpZm9yKHZhciByPTAsaT10Lm1peGlucy5sZW5ndGg7cjxpO3IrKyllPURlKGUsdC5taXhpbnNbcl0sbik7dmFyIG8sYT17fTtmb3IobyBpbiBlKWMobyk7Zm9yKG8gaW4gdCl5KGUsbyl8fGMobyk7ZnVuY3Rpb24gYyhyKXt2YXIgaT1PZVtyXXx8amU7YVtyXT1pKGVbcl0sdFtyXSxuLHIpfXJldHVybiBhfWZ1bmN0aW9uIExlKGUsdCxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGk9ZVt0XTtpZih5KGksbikpcmV0dXJuIGlbbl07dmFyIG89YihuKTtpZih5KGksbykpcmV0dXJuIGlbb107dmFyIGE9JChvKTtyZXR1cm4geShpLGEpP2lbYV06aVtuXXx8aVtvXXx8aVthXX19ZnVuY3Rpb24gTWUoZSx0LG4scil7dmFyIGk9dFtlXSxvPSF5KG4sZSksYT1uW2VdLHM9UGUoQm9vbGVhbixpLnR5cGUpO2lmKHM+LTEpaWYobyYmIXkoaSwiZGVmYXVsdCIpKWE9ITE7ZWxzZSBpZigiIj09PWF8fGE9PT1DKGUpKXt2YXIgYz1QZShTdHJpbmcsaS50eXBlKTsoYzwwfHxzPGMpJiYoYT0hMCl9aWYodm9pZCAwPT09YSl7YT1mdW5jdGlvbihlLHQsbil7aWYoIXkodCwiZGVmYXVsdCIpKXJldHVybjt2YXIgcj10LmRlZmF1bHQ7aWYoZSYmZS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PWUuJG9wdGlvbnMucHJvcHNEYXRhW25dJiZ2b2lkIDAhPT1lLl9wcm9wc1tuXSlyZXR1cm4gZS5fcHJvcHNbbl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJiJGdW5jdGlvbiIhPT1JZSh0LnR5cGUpP3IuY2FsbChlKTpyfShyLGksZSk7dmFyIHU9YmU7JGUoITApLENlKGEpLCRlKHUpfXJldHVybiBhfWZ1bmN0aW9uIEllKGUpe3ZhciB0PWUmJmUudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIHQ/dFsxXToiIn1mdW5jdGlvbiBGZShlLHQpe3JldHVybiBJZShlKT09PUllKHQpfWZ1bmN0aW9uIFBlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEZlKHQsZSk/MDotMTtmb3IodmFyIG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoRmUodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBSZShlLHQsbil7bGUoKTt0cnl7aWYodClmb3IodmFyIHI9dDtyPXIuJHBhcmVudDspe3ZhciBpPXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXRyeXtpZighMT09PWlbb10uY2FsbChyLGUsdCxuKSlyZXR1cm59Y2F0Y2goZSl7QmUoZSxyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19QmUoZSx0LG4pfWZpbmFsbHl7ZmUoKX19ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgbzt0cnl7KG89bj9lLmFwcGx5KHQsbik6ZS5jYWxsKHQpKSYmIW8uX2lzVnVlJiZ1KG8pJiYhby5faGFuZGxlZCYmKG8uY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFJlKGUscixpKyIgKFByb21pc2UvYXN5bmMpIil9KSxvLl9oYW5kbGVkPSEwKX1jYXRjaChlKXtSZShlLHIsaSl9cmV0dXJuIG99ZnVuY3Rpb24gQmUoZSx0LG4pe2lmKEYuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gRi5lcnJvckhhbmRsZXIuY2FsbChudWxsLGUsdCxuKX1jYXRjaCh0KXt0IT09ZSYmVWUodCxudWxsLCJjb25maWcuZXJyb3JIYW5kbGVyIil9VWUoZSx0LG4pfWZ1bmN0aW9uIFVlKGUsdCxuKXtpZigheiYmIVZ8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZSl0aHJvdyBlO2NvbnNvbGUuZXJyb3IoZSl9dmFyIHplLFZlPSExLEtlPVtdLEplPSExO2Z1bmN0aW9uIHFlKCl7SmU9ITE7dmFyIGU9S2Uuc2xpY2UoMCk7S2UubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmcmUoUHJvbWlzZSkpe3ZhciBXZT1Qcm9taXNlLnJlc29sdmUoKTt6ZT1mdW5jdGlvbigpe1dlLnRoZW4ocWUpLEcmJnNldFRpbWVvdXQoUyl9LFZlPSEwfWVsc2UgaWYocXx8InVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwhcmUoTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKXplPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZyZShzZXRJbW1lZGlhdGUpP2Z1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHFlKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHFlLDApfTtlbHNle3ZhciBaZT0xLEdlPW5ldyBNdXRhdGlvbk9ic2VydmVyKHFlKSxYZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShTdHJpbmcoWmUpKTtHZS5vYnNlcnZlKFhlLHtjaGFyYWN0ZXJEYXRhOiEwfSksemU9ZnVuY3Rpb24oKXtaZT0oWmUrMSklMixYZS5kYXRhPVN0cmluZyhaZSl9LFZlPSEwfWZ1bmN0aW9uIFllKGUsdCl7dmFyIG47aWYoS2UucHVzaChmdW5jdGlvbigpe2lmKGUpdHJ5e2UuY2FsbCh0KX1jYXRjaChlKXtSZShlLHQsIm5leHRUaWNrIil9ZWxzZSBuJiZuKHQpfSksSmV8fChKZT0hMCx6ZSgpKSwhZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuPWV9KX12YXIgUWU9bmV3IGllO2Z1bmN0aW9uIGV0KGUpeyFmdW5jdGlvbiBlKHQsbil7dmFyIHIsaTt2YXIgYT1BcnJheS5pc0FycmF5KHQpO2lmKCFhJiYhbyh0KXx8T2JqZWN0LmlzRnJvemVuKHQpfHx0IGluc3RhbmNlb2YgcGUpcmV0dXJuO2lmKHQuX19vYl9fKXt2YXIgcz10Ll9fb2JfXy5kZXAuaWQ7aWYobi5oYXMocykpcmV0dXJuO24uYWRkKHMpfWlmKGEpZm9yKHI9dC5sZW5ndGg7ci0tOyllKHRbcl0sbik7ZWxzZSBmb3IoaT1PYmplY3Qua2V5cyh0KSxyPWkubGVuZ3RoO3ItLTspZSh0W2lbcl1dLG4pfShlLFFlKSxRZS5jbGVhcigpfXZhciB0dD1nKGZ1bmN0aW9uKGUpe3ZhciB0PSImIj09PWUuY2hhckF0KDApLG49In4iPT09KGU9dD9lLnNsaWNlKDEpOmUpLmNoYXJBdCgwKSxyPSIhIj09PShlPW4/ZS5zbGljZSgxKTplKS5jaGFyQXQoMCk7cmV0dXJue25hbWU6ZT1yP2Uuc2xpY2UoMSk6ZSxvbmNlOm4sY2FwdHVyZTpyLHBhc3NpdmU6dH19KTtmdW5jdGlvbiBudChlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZT1hcmd1bWVudHMscj1uLmZucztpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gSGUocixudWxsLGFyZ3VtZW50cyx0LCJ2LW9uIGhhbmRsZXIiKTtmb3IodmFyIGk9ci5zbGljZSgpLG89MDtvPGkubGVuZ3RoO28rKylIZShpW29dLG51bGwsZSx0LCJ2LW9uIGhhbmRsZXIiKX1yZXR1cm4gbi5mbnM9ZSxufWZ1bmN0aW9uIHJ0KGUsbixpLG8sYSxzKXt2YXIgYyx1LGwsZjtmb3IoYyBpbiBlKXU9ZVtjXSxsPW5bY10sZj10dChjKSx0KHUpfHwodChsKT8odCh1LmZucykmJih1PWVbY109bnQodSxzKSkscihmLm9uY2UpJiYodT1lW2NdPWEoZi5uYW1lLHUsZi5jYXB0dXJlKSksaShmLm5hbWUsdSxmLmNhcHR1cmUsZi5wYXNzaXZlLGYucGFyYW1zKSk6dSE9PWwmJihsLmZucz11LGVbY109bCkpO2ZvcihjIGluIG4pdChlW2NdKSYmbygoZj10dChjKSkubmFtZSxuW2NdLGYuY2FwdHVyZSl9ZnVuY3Rpb24gaXQoZSxpLG8pe3ZhciBhO2UgaW5zdGFuY2VvZiBwZSYmKGU9ZS5kYXRhLmhvb2t8fChlLmRhdGEuaG9vaz17fSkpO3ZhciBzPWVbaV07ZnVuY3Rpb24gYygpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLGgoYS5mbnMsYyl9dChzKT9hPW50KFtjXSk6bihzLmZucykmJnIocy5tZXJnZWQpPyhhPXMpLmZucy5wdXNoKGMpOmE9bnQoW3MsY10pLGEubWVyZ2VkPSEwLGVbaV09YX1mdW5jdGlvbiBvdChlLHQscixpLG8pe2lmKG4odCkpe2lmKHkodCxyKSlyZXR1cm4gZVtyXT10W3JdLG98fGRlbGV0ZSB0W3JdLCEwO2lmKHkodCxpKSlyZXR1cm4gZVtyXT10W2ldLG98fGRlbGV0ZSB0W2ldLCEwfXJldHVybiExfWZ1bmN0aW9uIGF0KGUpe3JldHVybiBpKGUpP1toZShlKV06QXJyYXkuaXNBcnJheShlKT9mdW5jdGlvbiBlKG8sYSl7dmFyIHM9W107dmFyIGMsdSxsLGY7Zm9yKGM9MDtjPG8ubGVuZ3RoO2MrKyl0KHU9b1tjXSl8fCJib29sZWFuIj09dHlwZW9mIHV8fChsPXMubGVuZ3RoLTEsZj1zW2xdLEFycmF5LmlzQXJyYXkodSk/dS5sZW5ndGg+MCYmKHN0KCh1PWUodSwoYXx8IiIpKyJfIitjKSlbMF0pJiZzdChmKSYmKHNbbF09aGUoZi50ZXh0K3VbMF0udGV4dCksdS5zaGlmdCgpKSxzLnB1c2guYXBwbHkocyx1KSk6aSh1KT9zdChmKT9zW2xdPWhlKGYudGV4dCt1KToiIiE9PXUmJnMucHVzaChoZSh1KSk6c3QodSkmJnN0KGYpP3NbbF09aGUoZi50ZXh0K3UudGV4dCk6KHIoby5faXNWTGlzdCkmJm4odS50YWcpJiZ0KHUua2V5KSYmbihhKSYmKHUua2V5PSJfX3ZsaXN0IithKyJfIitjKyJfXyIpLHMucHVzaCh1KSkpO3JldHVybiBzfShlKTp2b2lkIDB9ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIG4oZSkmJm4oZS50ZXh0KSYmITE9PT1lLmlzQ29tbWVudH1mdW5jdGlvbiBjdChlLHQpe2lmKGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9b2U/UmVmbGVjdC5vd25LZXlzKGUpOk9iamVjdC5rZXlzKGUpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTtpZigiX19vYl9fIiE9PW8pe2Zvcih2YXIgYT1lW29dLmZyb20scz10O3M7KXtpZihzLl9wcm92aWRlZCYmeShzLl9wcm92aWRlZCxhKSl7bltvXT1zLl9wcm92aWRlZFthXTticmVha31zPXMuJHBhcmVudH1pZighcyYmImRlZmF1bHQiaW4gZVtvXSl7dmFyIGM9ZVtvXS5kZWZhdWx0O25bb109ImZ1bmN0aW9uIj09dHlwZW9mIGM/Yy5jYWxsKHQpOmN9fX1yZXR1cm4gbn19ZnVuY3Rpb24gdXQoZSx0KXtpZighZXx8IWUubGVuZ3RoKXJldHVybnt9O2Zvcih2YXIgbj17fSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLGE9by5kYXRhO2lmKGEmJmEuYXR0cnMmJmEuYXR0cnMuc2xvdCYmZGVsZXRlIGEuYXR0cnMuc2xvdCxvLmNvbnRleHQhPT10JiZvLmZuQ29udGV4dCE9PXR8fCFhfHxudWxsPT1hLnNsb3QpKG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1bXSkpLnB1c2gobyk7ZWxzZXt2YXIgcz1hLnNsb3QsYz1uW3NdfHwobltzXT1bXSk7InRlbXBsYXRlIj09PW8udGFnP2MucHVzaC5hcHBseShjLG8uY2hpbGRyZW58fFtdKTpjLnB1c2gobyl9fWZvcih2YXIgdSBpbiBuKW5bdV0uZXZlcnkobHQpJiZkZWxldGUgblt1XTtyZXR1cm4gbn1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJiFlLmFzeW5jRmFjdG9yeXx8IiAiPT09ZS50ZXh0fWZ1bmN0aW9uIGZ0KHQsbixyKXt2YXIgaSxvPU9iamVjdC5rZXlzKG4pLmxlbmd0aD4wLGE9dD8hIXQuJHN0YWJsZTohbyxzPXQmJnQuJGtleTtpZih0KXtpZih0Ll9ub3JtYWxpemVkKXJldHVybiB0Ll9ub3JtYWxpemVkO2lmKGEmJnImJnIhPT1lJiZzPT09ci4ka2V5JiYhbyYmIXIuJGhhc05vcm1hbClyZXR1cm4gcjtmb3IodmFyIGMgaW4gaT17fSx0KXRbY10mJiIkIiE9PWNbMF0mJihpW2NdPXB0KG4sYyx0W2NdKSl9ZWxzZSBpPXt9O2Zvcih2YXIgdSBpbiBuKXUgaW4gaXx8KGlbdV09ZHQobix1KSk7cmV0dXJuIHQmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJih0Ll9ub3JtYWxpemVkPWkpLFIoaSwiJHN0YWJsZSIsYSksUihpLCIka2V5IixzKSxSKGksIiRoYXNOb3JtYWwiLG8pLGl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD9uLmFwcGx5KG51bGwsYXJndW1lbnRzKTpuKHt9KTtyZXR1cm4oZT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpP1tlXTphdChlKSkmJigwPT09ZS5sZW5ndGh8fDE9PT1lLmxlbmd0aCYmZVswXS5pc0NvbW1lbnQpP3ZvaWQgMDplfTtyZXR1cm4gbi5wcm94eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfWZ1bmN0aW9uIGR0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGVbdF19fWZ1bmN0aW9uIHZ0KGUsdCl7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KGUpfHwic3RyaW5nIj09dHlwZW9mIGUpZm9yKHI9bmV3IEFycmF5KGUubGVuZ3RoKSxpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKXJbaV09dChlW2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBlKWZvcihyPW5ldyBBcnJheShlKSxpPTA7aTxlO2krKylyW2ldPXQoaSsxLGkpO2Vsc2UgaWYobyhlKSlpZihvZSYmZVtTeW1ib2wuaXRlcmF0b3JdKXtyPVtdO2Zvcih2YXIgdT1lW1N5bWJvbC5pdGVyYXRvcl0oKSxsPXUubmV4dCgpOyFsLmRvbmU7KXIucHVzaCh0KGwudmFsdWUsci5sZW5ndGgpKSxsPXUubmV4dCgpfWVsc2UgZm9yKHM9T2JqZWN0LmtleXMoZSkscj1uZXcgQXJyYXkocy5sZW5ndGgpLGk9MCxhPXMubGVuZ3RoO2k8YTtpKyspYz1zW2ldLHJbaV09dChlW2NdLGMsaSk7cmV0dXJuIG4ocil8fChyPVtdKSxyLl9pc1ZMaXN0PSEwLHJ9ZnVuY3Rpb24gaHQoZSx0LG4scil7dmFyIGksbz10aGlzLiRzY29wZWRTbG90c1tlXTtvPyhuPW58fHt9LHImJihuPUEoQSh7fSxyKSxuKSksaT1vKG4pfHx0KTppPXRoaXMuJHNsb3RzW2VdfHx0O3ZhciBhPW4mJm4uc2xvdDtyZXR1cm4gYT90aGlzLiRjcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIse3Nsb3Q6YX0saSk6aX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gTGUodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsZSl8fEV9ZnVuY3Rpb24geXQoZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT8tMT09PWUuaW5kZXhPZih0KTplIT09dH1mdW5jdGlvbiBndChlLHQsbixyLGkpe3ZhciBvPUYua2V5Q29kZXNbdF18fG47cmV0dXJuIGkmJnImJiFGLmtleUNvZGVzW3RdP3l0KGkscik6bz95dChvLGUpOnI/QyhyKSE9PXQ6dm9pZCAwfWZ1bmN0aW9uIF90KGUsdCxuLHIsaSl7aWYobilpZihvKG4pKXt2YXIgYTtBcnJheS5pc0FycmF5KG4pJiYobj1PKG4pKTt2YXIgcz1mdW5jdGlvbihvKXtpZigiY2xhc3MiPT09b3x8InN0eWxlIj09PW98fHYobykpYT1lO2Vsc2V7dmFyIHM9ZS5hdHRycyYmZS5hdHRycy50eXBlO2E9cnx8Ri5tdXN0VXNlUHJvcCh0LHMsbyk/ZS5kb21Qcm9wc3x8KGUuZG9tUHJvcHM9e30pOmUuYXR0cnN8fChlLmF0dHJzPXt9KX12YXIgYz1iKG8pLHU9QyhvKTtjIGluIGF8fHUgaW4gYXx8KGFbb109bltvXSxpJiYoKGUub258fChlLm9uPXt9KSlbInVwZGF0ZToiK29dPWZ1bmN0aW9uKGUpe25bb109ZX0pKX07Zm9yKHZhciBjIGluIG4pcyhjKX1lbHNlO3JldHVybiBlfWZ1bmN0aW9uIGJ0KGUsdCl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXN8fCh0aGlzLl9zdGF0aWNUcmVlcz1bXSkscj1uW2VdO3JldHVybiByJiYhdD9yOih3dChyPW5bZV09dGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbZV0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitlLCExKSxyKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIHd0KGUsIl9fb25jZV9fIit0KyhuPyJfIituOiIiKSwhMCksZX1mdW5jdGlvbiB3dChlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdJiYic3RyaW5nIiE9dHlwZW9mIGVbcl0mJkN0KGVbcl0sdCsiXyIrcixuKTtlbHNlIEN0KGUsdCxuKX1mdW5jdGlvbiBDdChlLHQsbil7ZS5pc1N0YXRpYz0hMCxlLmtleT10LGUuaXNPbmNlPW59ZnVuY3Rpb24geHQoZSx0KXtpZih0KWlmKHModCkpe3ZhciBuPWUub249ZS5vbj9BKHt9LGUub24pOnt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaT1uW3JdLG89dFtyXTtuW3JdPWk/W10uY29uY2F0KGksbyk6b319ZWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBrdChlLHQsbixyKXt0PXR8fHskc3RhYmxlOiFufTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXTtBcnJheS5pc0FycmF5KG8pP2t0KG8sdCxuKTpvJiYoby5wcm94eSYmKG8uZm4ucHJveHk9ITApLHRbby5rZXldPW8uZm4pfXJldHVybiByJiYodC4ka2V5PXIpLHR9ZnVuY3Rpb24gQXQoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRbbl07InN0cmluZyI9PXR5cGVvZiByJiZyJiYoZVt0W25dXT10W24rMV0pfXJldHVybiBlfWZ1bmN0aW9uIE90KGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3QrZTplfWZ1bmN0aW9uIFN0KGUpe2UuX289JHQsZS5fbj1mLGUuX3M9bCxlLl9sPXZ0LGUuX3Q9aHQsZS5fcT1OLGUuX2k9aixlLl9tPWJ0LGUuX2Y9bXQsZS5faz1ndCxlLl9iPV90LGUuX3Y9aGUsZS5fZT12ZSxlLl91PWt0LGUuX2c9eHQsZS5fZD1BdCxlLl9wPU90fWZ1bmN0aW9uIFR0KHQsbixpLG8sYSl7dmFyIHMsYz10aGlzLHU9YS5vcHRpb25zO3kobywiX3VpZCIpPyhzPU9iamVjdC5jcmVhdGUobykpLl9vcmlnaW5hbD1vOihzPW8sbz1vLl9vcmlnaW5hbCk7dmFyIGw9cih1Ll9jb21waWxlZCksZj0hbDt0aGlzLmRhdGE9dCx0aGlzLnByb3BzPW4sdGhpcy5jaGlsZHJlbj1pLHRoaXMucGFyZW50PW8sdGhpcy5saXN0ZW5lcnM9dC5vbnx8ZSx0aGlzLmluamVjdGlvbnM9Y3QodS5pbmplY3QsbyksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiBjLiRzbG90c3x8ZnQodC5zY29wZWRTbG90cyxjLiRzbG90cz11dChpLG8pKSxjLiRzbG90c30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInNjb3BlZFNsb3RzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnQodC5zY29wZWRTbG90cyx0aGlzLnNsb3RzKCkpfX0pLGwmJih0aGlzLiRvcHRpb25zPXUsdGhpcy4kc2xvdHM9dGhpcy5zbG90cygpLHRoaXMuJHNjb3BlZFNsb3RzPWZ0KHQuc2NvcGVkU2xvdHMsdGhpcy4kc2xvdHMpKSx1Ll9zY29wZUlkP3RoaXMuX2M9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9UHQocyxlLHQsbixyLGYpO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGkuZm5TY29wZUlkPXUuX3Njb3BlSWQsaS5mbkNvbnRleHQ9byksaX06dGhpcy5fYz1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gUHQocyxlLHQsbixyLGYpfX1mdW5jdGlvbiBFdChlLHQsbixyLGkpe3ZhciBvPW1lKGUpO3JldHVybiBvLmZuQ29udGV4dD1uLG8uZm5PcHRpb25zPXIsdC5zbG90JiYoKG8uZGF0YXx8KG8uZGF0YT17fSkpLnNsb3Q9dC5zbG90KSxvfWZ1bmN0aW9uIE50KGUsdCl7Zm9yKHZhciBuIGluIHQpZVtiKG4pXT10W25dfVN0KFR0LnByb3RvdHlwZSk7dmFyIGp0PXtpbml0OmZ1bmN0aW9uKGUsdCl7aWYoZS5jb21wb25lbnRJbnN0YW5jZSYmIWUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZlLmRhdGEua2VlcEFsaXZlKXt2YXIgcj1lO2p0LnByZXBhdGNoKHIscil9ZWxzZXsoZS5jb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXtfaXNDb21wb25lbnQ6ITAsX3BhcmVudFZub2RlOmUscGFyZW50OnR9LGk9ZS5kYXRhLmlubGluZVRlbXBsYXRlO24oaSkmJihyLnJlbmRlcj1pLnJlbmRlcixyLnN0YXRpY1JlbmRlckZucz1pLnN0YXRpY1JlbmRlckZucyk7cmV0dXJuIG5ldyBlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihyKX0oZSxXdCkpLiRtb3VudCh0P2UuZWxtOnZvaWQgMCx0KX19LHByZXBhdGNoOmZ1bmN0aW9uKHQsbil7dmFyIHI9bi5jb21wb25lbnRPcHRpb25zOyFmdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPWkuZGF0YS5zY29wZWRTbG90cyxzPXQuJHNjb3BlZFNsb3RzLGM9ISEoYSYmIWEuJHN0YWJsZXx8cyE9PWUmJiFzLiRzdGFibGV8fGEmJnQuJHNjb3BlZFNsb3RzLiRrZXkhPT1hLiRrZXkpLHU9ISEob3x8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fGMpO3QuJG9wdGlvbnMuX3BhcmVudFZub2RlPWksdC4kdm5vZGU9aSx0Ll92bm9kZSYmKHQuX3Zub2RlLnBhcmVudD1pKTtpZih0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1vLHQuJGF0dHJzPWkuZGF0YS5hdHRyc3x8ZSx0LiRsaXN0ZW5lcnM9cnx8ZSxuJiZ0LiRvcHRpb25zLnByb3BzKXskZSghMSk7Zm9yKHZhciBsPXQuX3Byb3BzLGY9dC4kb3B0aW9ucy5fcHJvcEtleXN8fFtdLHA9MDtwPGYubGVuZ3RoO3ArKyl7dmFyIGQ9ZltwXSx2PXQuJG9wdGlvbnMucHJvcHM7bFtkXT1NZShkLHYsbix0KX0kZSghMCksdC4kb3B0aW9ucy5wcm9wc0RhdGE9bn1yPXJ8fGU7dmFyIGg9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1yLHF0KHQscixoKSx1JiYodC4kc2xvdHM9dXQobyxpLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfShuLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usci5wcm9wc0RhdGEsci5saXN0ZW5lcnMsbixyLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5jb250ZXh0LHI9ZS5jb21wb25lbnRJbnN0YW5jZTtyLl9pc01vdW50ZWR8fChyLl9pc01vdW50ZWQ9ITAsWXQociwibW91bnRlZCIpKSxlLmRhdGEua2VlcEFsaXZlJiYobi5faXNNb3VudGVkPygodD1yKS5faW5hY3RpdmU9ITEsZW4ucHVzaCh0KSk6WHQociwhMCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcG9uZW50SW5zdGFuY2U7dC5faXNEZXN0cm95ZWR8fChlLmRhdGEua2VlcEFsaXZlP2Z1bmN0aW9uIGUodCxuKXtpZihuJiYodC5fZGlyZWN0SW5hY3RpdmU9ITAsR3QodCkpKXJldHVybjtpZighdC5faW5hY3RpdmUpe3QuX2luYWN0aXZlPSEwO2Zvcih2YXIgcj0wO3I8dC4kY2hpbGRyZW4ubGVuZ3RoO3IrKyllKHQuJGNoaWxkcmVuW3JdKTtZdCh0LCJkZWFjdGl2YXRlZCIpfX0odCwhMCk6dC4kZGVzdHJveSgpKX19LER0PU9iamVjdC5rZXlzKGp0KTtmdW5jdGlvbiBMdChpLGEscyxjLGwpe2lmKCF0KGkpKXt2YXIgZj1zLiRvcHRpb25zLl9iYXNlO2lmKG8oaSkmJihpPWYuZXh0ZW5kKGkpKSwiZnVuY3Rpb24iPT10eXBlb2YgaSl7dmFyIHA7aWYodChpLmNpZCkmJnZvaWQgMD09PShpPWZ1bmN0aW9uKGUsaSl7aWYocihlLmVycm9yKSYmbihlLmVycm9yQ29tcCkpcmV0dXJuIGUuZXJyb3JDb21wO2lmKG4oZS5yZXNvbHZlZCkpcmV0dXJuIGUucmVzb2x2ZWQ7dmFyIGE9SHQ7YSYmbihlLm93bmVycykmJi0xPT09ZS5vd25lcnMuaW5kZXhPZihhKSYmZS5vd25lcnMucHVzaChhKTtpZihyKGUubG9hZGluZykmJm4oZS5sb2FkaW5nQ29tcCkpcmV0dXJuIGUubG9hZGluZ0NvbXA7aWYoYSYmIW4oZS5vd25lcnMpKXt2YXIgcz1lLm93bmVycz1bYV0sYz0hMCxsPW51bGwsZj1udWxsO2EuJG9uKCJob29rOmRlc3Ryb3llZCIsZnVuY3Rpb24oKXtyZXR1cm4gaChzLGEpfSk7dmFyIHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1zLmxlbmd0aDt0PG47dCsrKXNbdF0uJGZvcmNlVXBkYXRlKCk7ZSYmKHMubGVuZ3RoPTAsbnVsbCE9PWwmJihjbGVhclRpbWVvdXQobCksbD1udWxsKSxudWxsIT09ZiYmKGNsZWFyVGltZW91dChmKSxmPW51bGwpKX0sZD1EKGZ1bmN0aW9uKHQpe2UucmVzb2x2ZWQ9QnQodCxpKSxjP3MubGVuZ3RoPTA6cCghMCl9KSx2PUQoZnVuY3Rpb24odCl7bihlLmVycm9yQ29tcCkmJihlLmVycm9yPSEwLHAoITApKX0pLG09ZShkLHYpO3JldHVybiBvKG0pJiYodShtKT90KGUucmVzb2x2ZWQpJiZtLnRoZW4oZCx2KTp1KG0uY29tcG9uZW50KSYmKG0uY29tcG9uZW50LnRoZW4oZCx2KSxuKG0uZXJyb3IpJiYoZS5lcnJvckNvbXA9QnQobS5lcnJvcixpKSksbihtLmxvYWRpbmcpJiYoZS5sb2FkaW5nQ29tcD1CdChtLmxvYWRpbmcsaSksMD09PW0uZGVsYXk/ZS5sb2FkaW5nPSEwOmw9c2V0VGltZW91dChmdW5jdGlvbigpe2w9bnVsbCx0KGUucmVzb2x2ZWQpJiZ0KGUuZXJyb3IpJiYoZS5sb2FkaW5nPSEwLHAoITEpKX0sbS5kZWxheXx8MjAwKSksbihtLnRpbWVvdXQpJiYoZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLHQoZS5yZXNvbHZlZCkmJnYobnVsbCl9LG0udGltZW91dCkpKSksYz0hMSxlLmxvYWRpbmc/ZS5sb2FkaW5nQ29tcDplLnJlc29sdmVkfX0ocD1pLGYpKSlyZXR1cm4gZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz12ZSgpO3JldHVybiBvLmFzeW5jRmFjdG9yeT1lLG8uYXN5bmNNZXRhPXtkYXRhOnQsY29udGV4dDpuLGNoaWxkcmVuOnIsdGFnOml9LG99KHAsYSxzLGMsbCk7YT1hfHx7fSwkbihpKSxuKGEubW9kZWwpJiZmdW5jdGlvbihlLHQpe3ZhciByPWUubW9kZWwmJmUubW9kZWwucHJvcHx8InZhbHVlIixpPWUubW9kZWwmJmUubW9kZWwuZXZlbnR8fCJpbnB1dCI7KHQuYXR0cnN8fCh0LmF0dHJzPXt9KSlbcl09dC5tb2RlbC52YWx1ZTt2YXIgbz10Lm9ufHwodC5vbj17fSksYT1vW2ldLHM9dC5tb2RlbC5jYWxsYmFjaztuKGEpPyhBcnJheS5pc0FycmF5KGEpPy0xPT09YS5pbmRleE9mKHMpOmEhPT1zKSYmKG9baV09W3NdLmNvbmNhdChhKSk6b1tpXT1zfShpLm9wdGlvbnMsYSk7dmFyIGQ9ZnVuY3Rpb24oZSxyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1lLmF0dHJzLGM9ZS5wcm9wcztpZihuKHMpfHxuKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1DKHUpO290KGEsYyx1LGwsITApfHxvdChhLHMsdSxsLCExKX1yZXR1cm4gYX19KGEsaSk7aWYocihpLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIGZ1bmN0aW9uKHQscixpLG8sYSl7dmFyIHM9dC5vcHRpb25zLGM9e30sdT1zLnByb3BzO2lmKG4odSkpZm9yKHZhciBsIGluIHUpY1tsXT1NZShsLHUscnx8ZSk7ZWxzZSBuKGkuYXR0cnMpJiZOdChjLGkuYXR0cnMpLG4oaS5wcm9wcykmJk50KGMsaS5wcm9wcyk7dmFyIGY9bmV3IFR0KGksYyxhLG8sdCkscD1zLnJlbmRlci5jYWxsKG51bGwsZi5fYyxmKTtpZihwIGluc3RhbmNlb2YgcGUpcmV0dXJuIEV0KHAsaSxmLnBhcmVudCxzKTtpZihBcnJheS5pc0FycmF5KHApKXtmb3IodmFyIGQ9YXQocCl8fFtdLHY9bmV3IEFycmF5KGQubGVuZ3RoKSxoPTA7aDxkLmxlbmd0aDtoKyspdltoXT1FdChkW2hdLGksZi5wYXJlbnQscyk7cmV0dXJuIHZ9fShpLGQsYSxzLGMpO3ZhciB2PWEub247aWYoYS5vbj1hLm5hdGl2ZU9uLHIoaS5vcHRpb25zLmFic3RyYWN0KSl7dmFyIG09YS5zbG90O2E9e30sbSYmKGEuc2xvdD1tKX0hZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuaG9va3x8KGUuaG9vaz17fSksbj0wO248RHQubGVuZ3RoO24rKyl7dmFyIHI9RHRbbl0saT10W3JdLG89anRbcl07aT09PW98fGkmJmkuX21lcmdlZHx8KHRbcl09aT9NdChvLGkpOm8pfX0oYSk7dmFyIHk9aS5vcHRpb25zLm5hbWV8fGw7cmV0dXJuIG5ldyBwZSgidnVlLWNvbXBvbmVudC0iK2kuY2lkKyh5PyItIit5OiIiKSxhLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHMse0N0b3I6aSxwcm9wc0RhdGE6ZCxsaXN0ZW5lcnM6dix0YWc6bCxjaGlsZHJlbjpjfSxwKX19fWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49ZnVuY3Rpb24obixyKXtlKG4sciksdChuLHIpfTtyZXR1cm4gbi5fbWVyZ2VkPSEwLG59dmFyIEl0PTEsRnQ9MjtmdW5jdGlvbiBQdChlLGEscyxjLHUsbCl7cmV0dXJuKEFycmF5LmlzQXJyYXkocyl8fGkocykpJiYodT1jLGM9cyxzPXZvaWQgMCkscihsKSYmKHU9RnQpLGZ1bmN0aW9uKGUsaSxhLHMsYyl7aWYobihhKSYmbihhLl9fb2JfXykpcmV0dXJuIHZlKCk7bihhKSYmbihhLmlzKSYmKGk9YS5pcyk7aWYoIWkpcmV0dXJuIHZlKCk7QXJyYXkuaXNBcnJheShzKSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbMF0mJigoYT1hfHx7fSkuc2NvcGVkU2xvdHM9e2RlZmF1bHQ6c1swXX0scy5sZW5ndGg9MCk7Yz09PUZ0P3M9YXQocyk6Yz09PUl0JiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihBcnJheS5pc0FycmF5KGVbdF0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGUpO3JldHVybiBlfShzKSk7dmFyIHUsbDtpZigic3RyaW5nIj09dHlwZW9mIGkpe3ZhciBmO2w9ZS4kdm5vZGUmJmUuJHZub2RlLm5zfHxGLmdldFRhZ05hbWVzcGFjZShpKSx1PUYuaXNSZXNlcnZlZFRhZyhpKT9uZXcgcGUoRi5wYXJzZVBsYXRmb3JtVGFnTmFtZShpKSxhLHMsdm9pZCAwLHZvaWQgMCxlKTphJiZhLnByZXx8IW4oZj1MZShlLiRvcHRpb25zLCJjb21wb25lbnRzIixpKSk/bmV3IHBlKGksYSxzLHZvaWQgMCx2b2lkIDAsZSk6THQoZixhLGUscyxpKX1lbHNlIHU9THQoaSxhLGUscyk7cmV0dXJuIEFycmF5LmlzQXJyYXkodSk/dTpuKHUpPyhuKGwpJiZmdW5jdGlvbiBlKGksbyxhKXtpLm5zPW87ImZvcmVpZ25PYmplY3QiPT09aS50YWcmJihvPXZvaWQgMCxhPSEwKTtpZihuKGkuY2hpbGRyZW4pKWZvcih2YXIgcz0wLGM9aS5jaGlsZHJlbi5sZW5ndGg7czxjO3MrKyl7dmFyIHU9aS5jaGlsZHJlbltzXTtuKHUudGFnKSYmKHQodS5ucyl8fHIoYSkmJiJzdmciIT09dS50YWcpJiZlKHUsbyxhKX19KHUsbCksbihhKSYmZnVuY3Rpb24oZSl7byhlLnN0eWxlKSYmZXQoZS5zdHlsZSk7byhlLmNsYXNzKSYmZXQoZS5jbGFzcyl9KGEpLHUpOnZlKCl9KGUsYSxzLGMsdSl9dmFyIFJ0LEh0PW51bGw7ZnVuY3Rpb24gQnQoZSx0KXtyZXR1cm4oZS5fX2VzTW9kdWxlfHxvZSYmIk1vZHVsZSI9PT1lW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYoZT1lLmRlZmF1bHQpLG8oZSk/dC5leHRlbmQoZSk6ZX1mdW5jdGlvbiBVdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJmUuYXN5bmNGYWN0b3J5fWZ1bmN0aW9uIHp0KGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07aWYobihyKSYmKG4oci5jb21wb25lbnRPcHRpb25zKXx8VXQocikpKXJldHVybiByfX1mdW5jdGlvbiBWdChlLHQpe1J0LiRvbihlLHQpfWZ1bmN0aW9uIEt0KGUsdCl7UnQuJG9mZihlLHQpfWZ1bmN0aW9uIEp0KGUsdCl7dmFyIG49UnQ7cmV0dXJuIGZ1bmN0aW9uIHIoKXtudWxsIT09dC5hcHBseShudWxsLGFyZ3VtZW50cykmJm4uJG9mZihlLHIpfX1mdW5jdGlvbiBxdChlLHQsbil7UnQ9ZSxydCh0LG58fHt9LFZ0LEt0LEp0LGUpLFJ0PXZvaWQgMH12YXIgV3Q9bnVsbDtmdW5jdGlvbiBadChlKXt2YXIgdD1XdDtyZXR1cm4gV3Q9ZSxmdW5jdGlvbigpe1d0PXR9fWZ1bmN0aW9uIEd0KGUpe2Zvcig7ZSYmKGU9ZS4kcGFyZW50KTspaWYoZS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWHQoZSx0KXtpZih0KXtpZihlLl9kaXJlY3RJbmFjdGl2ZT0hMSxHdChlKSlyZXR1cm59ZWxzZSBpZihlLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYoZS5faW5hY3RpdmV8fG51bGw9PT1lLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjxlLiRjaGlsZHJlbi5sZW5ndGg7bisrKVh0KGUuJGNoaWxkcmVuW25dKTtZdChlLCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24gWXQoZSx0KXtsZSgpO3ZhciBuPWUuJG9wdGlvbnNbdF0scj10KyIgaG9vayI7aWYobilmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspSGUobltpXSxlLG51bGwsZSxyKTtlLl9oYXNIb29rRXZlbnQmJmUuJGVtaXQoImhvb2s6Iit0KSxmZSgpfXZhciBRdD1bXSxlbj1bXSx0bj17fSxubj0hMSxybj0hMSxvbj0wO3ZhciBhbj0wLHNuPURhdGUubm93O2lmKHomJiFxKXt2YXIgY249d2luZG93LnBlcmZvcm1hbmNlO2NuJiYiZnVuY3Rpb24iPT10eXBlb2YgY24ubm93JiZzbigpPmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLnRpbWVTdGFtcCYmKHNuPWZ1bmN0aW9uKCl7cmV0dXJuIGNuLm5vdygpfSl9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0O2Zvcihhbj1zbigpLHJuPSEwLFF0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pZC10LmlkfSksb249MDtvbjxRdC5sZW5ndGg7b24rKykoZT1RdFtvbl0pLmJlZm9yZSYmZS5iZWZvcmUoKSx0PWUuaWQsdG5bdF09bnVsbCxlLnJ1bigpO3ZhciBuPWVuLnNsaWNlKCkscj1RdC5zbGljZSgpO29uPVF0Lmxlbmd0aD1lbi5sZW5ndGg9MCx0bj17fSxubj1ybj0hMSxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLl9pbmFjdGl2ZT0hMCxYdChlW3RdLCEwKX0obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7Zm9yKDt0LS07KXt2YXIgbj1lW3RdLHI9bi52bTtyLl93YXRjaGVyPT09biYmci5faXNNb3VudGVkJiYhci5faXNEZXN0cm95ZWQmJll0KHIsInVwZGF0ZWQiKX19KHIpLG5lJiZGLmRldnRvb2xzJiZuZS5lbWl0KCJmbHVzaCIpfXZhciBsbj0wLGZuPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dGhpcy52bT1lLGkmJihlLl93YXRjaGVyPXRoaXMpLGUuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jLHRoaXMuYmVmb3JlPXIuYmVmb3JlKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kytsbix0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBpZSx0aGlzLm5ld0RlcElkcz1uZXcgaWUsdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P3RoaXMuZ2V0dGVyPXQ6KHRoaXMuZ2V0dGVyPWZ1bmN0aW9uKGUpe2lmKCFILnRlc3QoZSkpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2lmKCFlKXJldHVybjtlPWVbdFtuXV19cmV0dXJuIGV9fX0odCksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1TKSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O2ZuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtsZSh0aGlzKTt2YXIgdD10aGlzLnZtO3RyeXtlPXRoaXMuZ2V0dGVyLmNhbGwodCx0KX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7UmUoZSx0LCdnZXR0ZXIgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZmluYWxseXt0aGlzLmRlZXAmJmV0KGUpLGZlKCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiBlfSxmbi5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQ7dGhpcy5uZXdEZXBJZHMuaGFzKHQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKHQpLHRoaXMubmV3RGVwcy5wdXNoKGUpLHRoaXMuZGVwSWRzLmhhcyh0KXx8ZS5hZGRTdWIodGhpcykpfSxmbi5wcm90b3R5cGUuY2xlYW51cERlcHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5kZXBzLmxlbmd0aDtlLS07KXt2YXIgdD10aGlzLmRlcHNbZV07dGhpcy5uZXdEZXBJZHMuaGFzKHQuaWQpfHx0LnJlbW92ZVN1Yih0aGlzKX12YXIgbj10aGlzLmRlcElkczt0aGlzLmRlcElkcz10aGlzLm5ld0RlcElkcyx0aGlzLm5ld0RlcElkcz1uLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksbj10aGlzLmRlcHMsdGhpcy5kZXBzPXRoaXMubmV3RGVwcyx0aGlzLm5ld0RlcHM9bix0aGlzLm5ld0RlcHMubGVuZ3RoPTB9LGZuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkO2lmKG51bGw9PXRuW3RdKXtpZih0blt0XT0hMCxybil7Zm9yKHZhciBuPVF0Lmxlbmd0aC0xO24+b24mJlF0W25dLmlkPmUuaWQ7KW4tLTtRdC5zcGxpY2UobisxLDAsZSl9ZWxzZSBRdC5wdXNoKGUpO25ufHwobm49ITAsWWUodW4pKX19KHRoaXMpfSxmbi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciBlPXRoaXMuZ2V0KCk7aWYoZSE9PXRoaXMudmFsdWV8fG8oZSl8fHRoaXMuZGVlcCl7dmFyIHQ9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPWUsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfWNhdGNoKGUpe1JlKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfX19LGZuLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5nZXQoKSx0aGlzLmRpcnR5PSExfSxmbi5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0aGlzLmRlcHNbZV0uZGVwZW5kKCl9LGZuLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkfHxoKHRoaXMudm0uX3dhdGNoZXJzLHRoaXMpO2Zvcih2YXIgZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspdGhpcy5kZXBzW2VdLnJlbW92ZVN1Yih0aGlzKTt0aGlzLmFjdGl2ZT0hMX19O3ZhciBwbj17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OlMsc2V0OlN9O2Z1bmN0aW9uIGRuKGUsdCxuKXtwbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XVtuXX0scG4uc2V0PWZ1bmN0aW9uKGUpe3RoaXNbdF1bbl09ZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbixwbil9ZnVuY3Rpb24gdm4oZSl7ZS5fd2F0Y2hlcnM9W107dmFyIHQ9ZS4kb3B0aW9uczt0LnByb3BzJiZmdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnMucHJvcHNEYXRhfHx7fSxyPWUuX3Byb3BzPXt9LGk9ZS4kb3B0aW9ucy5fcHJvcEtleXM9W107ZS4kcGFyZW50JiYkZSghMSk7dmFyIG89ZnVuY3Rpb24obyl7aS5wdXNoKG8pO3ZhciBhPU1lKG8sdCxuLGUpO3hlKHIsbyxhKSxvIGluIGV8fGRuKGUsIl9wcm9wcyIsbyl9O2Zvcih2YXIgYSBpbiB0KW8oYSk7JGUoITApfShlLHQucHJvcHMpLHQubWV0aG9kcyYmZnVuY3Rpb24oZSx0KXtlLiRvcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWVbbl09ImZ1bmN0aW9uIiE9dHlwZW9mIHRbbl0/Uzp4KHRbbl0sZSl9KGUsdC5tZXRob2RzKSx0LmRhdGE/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5kYXRhO3ModD1lLl9kYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCl7bGUoKTt0cnl7cmV0dXJuIGUuY2FsbCh0LHQpfWNhdGNoKGUpe3JldHVybiBSZShlLHQsImRhdGEoKSIpLHt9fWZpbmFsbHl7ZmUoKX19KHQsZSk6dHx8e30pfHwodD17fSk7dmFyIG49T2JqZWN0LmtleXModCkscj1lLiRvcHRpb25zLnByb3BzLGk9KGUuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIgbz1uW2ldO3ImJnkocixvKXx8KGE9dm9pZCAwLDM2IT09KGE9KG8rIiIpLmNoYXJDb2RlQXQoMCkpJiY5NSE9PWEmJmRuKGUsIl9kYXRhIixvKSl9dmFyIGE7Q2UodCwhMCl9KGUpOkNlKGUuX2RhdGE9e30sITApLHQuY29tcHV0ZWQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5fY29tcHV0ZWRXYXRjaGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGUoKTtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP286by5nZXQ7cnx8KG5baV09bmV3IGZuKGUsYXx8UyxTLGhuKSksaSBpbiBlfHxtbihlLGksbyl9fShlLHQuY29tcHV0ZWQpLHQud2F0Y2gmJnQud2F0Y2ghPT1ZJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspX24oZSxuLHJbaV0pO2Vsc2UgX24oZSxuLHIpfX0oZSx0LndhdGNoKX12YXIgaG49e2xhenk6ITB9O2Z1bmN0aW9uIG1uKGUsdCxuKXt2YXIgcj0hdGUoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8ocG4uZ2V0PXI/eW4odCk6Z24obikscG4uc2V0PVMpOihwbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP3luKHQpOmduKG4uZ2V0KTpTLHBuLnNldD1uLnNldHx8UyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxwbil9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1tlXTtpZih0KXJldHVybiB0LmRpcnR5JiZ0LmV2YWx1YXRlKCksY2UudGFyZ2V0JiZ0LmRlcGVuZCgpLHQudmFsdWV9fWZ1bmN0aW9uIGduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24gX24oZSx0LG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49ZVtuXSksZS4kd2F0Y2godCxuLHIpfXZhciBibj0wO2Z1bmN0aW9uICRuKGUpe3ZhciB0PWUub3B0aW9ucztpZihlLnN1cGVyKXt2YXIgbj0kbihlLnN1cGVyKTtpZihuIT09ZS5zdXBlck9wdGlvbnMpe2Uuc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9wdGlvbnMscj1lLnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBpIGluIG4pbltpXSE9PXJbaV0mJih0fHwodD17fSksdFtpXT1uW2ldKTtyZXR1cm4gdH0oZSk7ciYmQShlLmV4dGVuZE9wdGlvbnMsciksKHQ9ZS5vcHRpb25zPURlKG4sZS5leHRlbmRPcHRpb25zKSkubmFtZSYmKHQuY29tcG9uZW50c1t0Lm5hbWVdPWUpfX1yZXR1cm4gdH1mdW5jdGlvbiB3bihlKXt0aGlzLl9pbml0KGUpfWZ1bmN0aW9uIENuKGUpe2UuY2lkPTA7dmFyIHQ9MTtlLmV4dGVuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxpPWUuX0N0b3J8fChlLl9DdG9yPXt9KTtpZihpW3JdKXJldHVybiBpW3JdO3ZhciBvPWUubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbihlKXt0aGlzLl9pbml0KGUpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9dCsrLGEub3B0aW9ucz1EZShuLm9wdGlvbnMsZSksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWRuKGUucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKGUpe3ZhciB0PWUub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gdCltbihlLnByb3RvdHlwZSxuLHRbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV09bltlXX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPWUsYS5zZWFsZWRPcHRpb25zPUEoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24geG4oZSl7cmV0dXJuIGUmJihlLkN0b3Iub3B0aW9ucy5uYW1lfHxlLnRhZyl9ZnVuY3Rpb24ga24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmluZGV4T2YodCk+LTE6InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiwiKS5pbmRleE9mKHQpPi0xOihuPWUsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJmUudGVzdCh0KSk7dmFyIG59ZnVuY3Rpb24gQW4oZSx0KXt2YXIgbj1lLmNhY2hlLHI9ZS5rZXlzLGk9ZS5fdm5vZGU7Zm9yKHZhciBvIGluIG4pe3ZhciBhPW5bb107aWYoYSl7dmFyIHM9eG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhdChzKSYmT24obixvLHIsaSl9fX1mdW5jdGlvbiBPbihlLHQsbixyKXt2YXIgaT1lW3RdOyFpfHxyJiZpLnRhZz09PXIudGFnfHxpLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksZVt0XT1udWxsLGgobix0KX0hZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl91aWQ9Ym4rKyxuLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9mdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9dC5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9dC5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9aS5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPWkubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWkuY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPWkudGFnLHQucmVuZGVyJiYobi5yZW5kZXI9dC5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9dC5zdGF0aWNSZW5kZXJGbnMpfShuLHQpOm4uJG9wdGlvbnM9RGUoJG4obi5jb25zdHJ1Y3RvciksdHx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucyxuPXQucGFyZW50O2lmKG4mJiF0LmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaChlKX1lLiRwYXJlbnQ9bixlLiRyb290PW4/bi4kcm9vdDplLGUuJGNoaWxkcmVuPVtdLGUuJHJlZnM9e30sZS5fd2F0Y2hlcj1udWxsLGUuX2luYWN0aXZlPW51bGwsZS5fZGlyZWN0SW5hY3RpdmU9ITEsZS5faXNNb3VudGVkPSExLGUuX2lzRGVzdHJveWVkPSExLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKGUpe2UuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2hhc0hvb2tFdmVudD0hMTt2YXIgdD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dCYmcXQoZSx0KX0obiksZnVuY3Rpb24odCl7dC5fdm5vZGU9bnVsbCx0Ll9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPXQuJG9wdGlvbnMscj10LiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxpPXImJnIuY29udGV4dDt0LiRzbG90cz11dChuLl9yZW5kZXJDaGlsZHJlbixpKSx0LiRzY29wZWRTbG90cz1lLHQuX2M9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMSl9LHQuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMCl9O3ZhciBvPXImJnIuZGF0YTt4ZSh0LCIkYXR0cnMiLG8mJm8uYXR0cnN8fGUsbnVsbCwhMCkseGUodCwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHxlLG51bGwsITApfShuKSxZdChuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbihlKXt2YXIgdD1jdChlLiRvcHRpb25zLmluamVjdCxlKTt0JiYoJGUoITEpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7eGUoZSxuLHRbbl0pfSksJGUoITApKX0obiksdm4obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5wcm92aWRlO3QmJihlLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwoZSk6dCl9KG4pLFl0KG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KHduKSxmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRkYXRhIix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRwcm9wcyIsbiksZS5wcm90b3R5cGUuJHNldD1rZSxlLnByb3RvdHlwZS4kZGVsZXRlPUFlLGUucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbihlLHQsbil7aWYocyh0KSlyZXR1cm4gX24odGhpcyxlLHQsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IGZuKHRoaXMsZSx0LG4pO2lmKG4uaW1tZWRpYXRlKXRyeXt0LmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaChlKXtSZShlLHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0od24pLGZ1bmN0aW9uKGUpe3ZhciB0PS9eaG9vazovO2UucHJvdG90eXBlLiRvbj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspci4kb24oZVtpXSxuKTtlbHNlKHIuX2V2ZW50c1tlXXx8KHIuX2V2ZW50c1tlXT1bXSkpLnB1c2gobiksdC50ZXN0KGUpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYoZSxyKSx0LmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj10LG4uJG9uKGUsciksbn0sZS5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKW4uJG9mZihlW3JdLHQpO3JldHVybiBufXZhciBvLGE9bi5fZXZlbnRzW2VdO2lmKCFhKXJldHVybiBuO2lmKCF0KXJldHVybiBuLl9ldmVudHNbZV09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChvPWFbc10pPT09dHx8by5mbj09PXQpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LGUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZih0KXt0PXQubGVuZ3RoPjE/ayh0KTp0O2Zvcih2YXIgbj1rKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJytlKyciJyxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKUhlKHRbaV0sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fSh3biksZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1uLiRlbCxpPW4uX3Zub2RlLG89WnQobik7bi5fdm5vZGU9ZSxuLiRlbD1pP24uX19wYXRjaF9fKGksZSk6bi5fX3BhdGNoX18obi4kZWwsZSx0LCExKSxvKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LGUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LGUucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5faXNCZWluZ0Rlc3Ryb3llZCl7WXQoZSwiYmVmb3JlRGVzdHJveSIpLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIHQ9ZS4kcGFyZW50OyF0fHx0Ll9pc0JlaW5nRGVzdHJveWVkfHxlLiRvcHRpb25zLmFic3RyYWN0fHxoKHQuJGNoaWxkcmVuLGUpLGUuX3dhdGNoZXImJmUuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49ZS5fd2F0Y2hlcnMubGVuZ3RoO24tLTspZS5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTtlLl9kYXRhLl9fb2JfXyYmZS5fZGF0YS5fX29iX18udm1Db3VudC0tLGUuX2lzRGVzdHJveWVkPSEwLGUuX19wYXRjaF9fKGUuX3Zub2RlLG51bGwpLFl0KGUsImRlc3Ryb3llZCIpLGUuJG9mZigpLGUuJGVsJiYoZS4kZWwuX192dWVfXz1udWxsKSxlLiR2bm9kZSYmKGUuJHZub2RlLnBhcmVudD1udWxsKX19fSh3biksZnVuY3Rpb24oZSl7U3QoZS5wcm90b3R5cGUpLGUucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gWWUoZSx0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuJG9wdGlvbnMscj1uLnJlbmRlcixpPW4uX3BhcmVudFZub2RlO2kmJih0LiRzY29wZWRTbG90cz1mdChpLmRhdGEuc2NvcGVkU2xvdHMsdC4kc2xvdHMsdC4kc2NvcGVkU2xvdHMpKSx0LiR2bm9kZT1pO3RyeXtIdD10LGU9ci5jYWxsKHQuX3JlbmRlclByb3h5LHQuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe1JlKG4sdCwicmVuZGVyIiksZT10Ll92bm9kZX1maW5hbGx5e0h0PW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksZSBpbnN0YW5jZW9mIHBlfHwoZT12ZSgpKSxlLnBhcmVudD1pLGV9fSh3bik7dmFyIFNuPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxUbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpTbixleGNsdWRlOlNuLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5jYWNoZSlPbih0aGlzLmNhY2hlLGUsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHQpe0FuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGtuKHQsZSl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbih0KXtBbihlLGZ1bmN0aW9uKGUpe3JldHVybiFrbih0LGUpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2xvdHMuZGVmYXVsdCx0PXp0KGUpLG49dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPXhuKG4pLGk9dGhpcy5pbmNsdWRlLG89dGhpcy5leGNsdWRlO2lmKGkmJighcnx8IWtuKGkscikpfHxvJiZyJiZrbihvLHIpKXJldHVybiB0O3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT10LmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTp0LmtleTthW2NdPyh0LmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsaChzLGMpLHMucHVzaChjKSk6KGFbY109dCxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmT24oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSx0LmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiB0fHxlJiZlWzBdfX19OyFmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY29uZmlnIix0KSxlLnV0aWw9e3dhcm46YWUsZXh0ZW5kOkEsbWVyZ2VPcHRpb25zOkRlLGRlZmluZVJlYWN0aXZlOnhlfSxlLnNldD1rZSxlLmRlbGV0ZT1BZSxlLm5leHRUaWNrPVllLGUub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gQ2UoZSksZX0sZS5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub3B0aW9uc1t0KyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLGUub3B0aW9ucy5fYmFzZT1lLEEoZS5vcHRpb25zLmNvbXBvbmVudHMsVG4pLGZ1bmN0aW9uKGUpe2UudXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZih0LmluZGV4T2YoZSk+LTEpcmV0dXJuIHRoaXM7dmFyIG49ayhhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5pbnN0YWxsP2UuaW5zdGFsbC5hcHBseShlLG4pOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFwcGx5KG51bGwsbiksdC5wdXNoKGUpLHRoaXN9fShlKSxmdW5jdGlvbihlKXtlLm1peGluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnM9RGUodGhpcy5vcHRpb25zLGUpLHRoaXN9fShlKSxDbihlKSxmdW5jdGlvbihlKXtNLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PXQmJnMobikmJihuLm5hbWU9bi5uYW1lfHxlLG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1t0KyJzIl1bZV09bixuKTp0aGlzLm9wdGlvbnNbdCsicyJdW2VdfX0pfShlKX0od24pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3biwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLHt2YWx1ZTpUdH0pLHduLnZlcnNpb249IjIuNi4xMSI7dmFyIEVuPXAoInN0eWxlLGNsYXNzIiksTm49cCgiaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcyIpLGpuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4idmFsdWUiPT09biYmTm4oZSkmJiJidXR0b24iIT09dHx8InNlbGVjdGVkIj09PW4mJiJvcHRpb24iPT09ZXx8ImNoZWNrZWQiPT09biYmImlucHV0Ij09PWV8fCJtdXRlZCI9PT1uJiYidmlkZW8iPT09ZX0sRG49cCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksTG49cCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLE1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhuKHQpfHwiZmFsc2UiPT09dD8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09ZSYmTG4odCk/dDoidHJ1ZSJ9LEluPXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxGbj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24oZSl7cmV0dXJuIjoiPT09ZS5jaGFyQXQoNSkmJiJ4bGluayI9PT1lLnNsaWNlKDAsNSl9LFJuPWZ1bmN0aW9uKGUpe3JldHVybiBQbihlKT9lLnNsaWNlKDYsZS5sZW5ndGgpOiIifSxIbj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZXx8ITE9PT1lfTtmdW5jdGlvbiBCbihlKXtmb3IodmFyIHQ9ZS5kYXRhLHI9ZSxpPWU7bihpLmNvbXBvbmVudEluc3RhbmNlKTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZpLmRhdGEmJih0PVVuKGkuZGF0YSx0KSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJih0PVVuKHQsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYobihlKXx8bih0KSlyZXR1cm4gem4oZSxWbih0KSk7cmV0dXJuIiJ9KHQuc3RhdGljQ2xhc3MsdC5jbGFzcyl9ZnVuY3Rpb24gVW4oZSx0KXtyZXR1cm57c3RhdGljQ2xhc3M6em4oZS5zdGF0aWNDbGFzcyx0LnN0YXRpY0NsYXNzKSxjbGFzczpuKGUuY2xhc3MpP1tlLmNsYXNzLHQuY2xhc3NdOnQuY2xhc3N9fWZ1bmN0aW9uIHpuKGUsdCl7cmV0dXJuIGU/dD9lKyIgIit0OmU6dHx8IiJ9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9IiIsaT0wLG89ZS5sZW5ndGg7aTxvO2krKyluKHQ9Vm4oZVtpXSkpJiYiIiE9PXQmJihyJiYocis9IiAiKSxyKz10KTtyZXR1cm4gcn0oZSk6byhlKT9mdW5jdGlvbihlKXt2YXIgdD0iIjtmb3IodmFyIG4gaW4gZSllW25dJiYodCYmKHQrPSIgIiksdCs9bik7cmV0dXJuIHR9KGUpOiJzdHJpbmciPT10eXBlb2YgZT9lOiIifXZhciBLbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEpuPXAoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IikscW49cCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbihlKXtyZXR1cm4gSm4oZSl8fHFuKGUpfTtmdW5jdGlvbiBabihlKXtyZXR1cm4gcW4oZSk/InN2ZyI6Im1hdGgiPT09ZT8ibWF0aCI6dm9pZCAwfXZhciBHbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBYbj1wKCJ0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCIpO2Z1bmN0aW9uIFluKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gdHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIGV9dmFyIFFuPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiJzZWxlY3QiIT09ZT9uOih0LmRhdGEmJnQuZGF0YS5hdHRycyYmdm9pZCAwIT09dC5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEtuW2VdLHQpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoZSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtlLnJlbW92ZUNoaWxkKHQpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe2UuYXBwZW5kQ2hpbGQodCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSh0LCIiKX19KSxlcj17Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dHIodCl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UuZGF0YS5yZWYhPT10LmRhdGEucmVmJiYodHIoZSwhMCksdHIodCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RyKGUsITApfX07ZnVuY3Rpb24gdHIoZSx0KXt2YXIgcj1lLmRhdGEucmVmO2lmKG4ocikpe3ZhciBpPWUuY29udGV4dCxvPWUuY29tcG9uZW50SW5zdGFuY2V8fGUuZWxtLGE9aS4kcmVmczt0P0FycmF5LmlzQXJyYXkoYVtyXSk/aChhW3JdLG8pOmFbcl09PT1vJiYoYVtyXT12b2lkIDApOmUuZGF0YS5yZWZJbkZvcj9BcnJheS5pc0FycmF5KGFbcl0pP2Fbcl0uaW5kZXhPZihvKTwwJiZhW3JdLnB1c2gobyk6YVtyXT1bb106YVtyXT1vfX12YXIgbnI9bmV3IHBlKCIiLHt9LFtdKSxycj1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIGlyKGUsaSl7cmV0dXJuIGUua2V5PT09aS5rZXkmJihlLnRhZz09PWkudGFnJiZlLmlzQ29tbWVudD09PWkuaXNDb21tZW50JiZuKGUuZGF0YSk9PT1uKGkuZGF0YSkmJmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0IiE9PWUudGFnKXJldHVybiEwO3ZhciByLGk9bihyPWUuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlLG89bihyPXQuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlO3JldHVybiBpPT09b3x8WG4oaSkmJlhuKG8pfShlLGkpfHxyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSYmZS5hc3luY0ZhY3Rvcnk9PT1pLmFzeW5jRmFjdG9yeSYmdChpLmFzeW5jRmFjdG9yeS5lcnJvcikpfWZ1bmN0aW9uIG9yKGUsdCxyKXt2YXIgaSxvLGE9e307Zm9yKGk9dDtpPD1yOysraSluKG89ZVtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX12YXIgYXI9e2NyZWF0ZTpzcix1cGRhdGU6c3IsZGVzdHJveTpmdW5jdGlvbihlKXtzcihlLG5yKX19O2Z1bmN0aW9uIHNyKGUsdCl7KGUuZGF0YS5kaXJlY3RpdmVzfHx0LmRhdGEuZGlyZWN0aXZlcykmJmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG89ZT09PW5yLGE9dD09PW5yLHM9dXIoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSxjPXVyKHQuZGF0YS5kaXJlY3RpdmVzLHQuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUsaS5vbGRBcmc9ci5hcmcsZnIoaSwidXBkYXRlIix0LGUpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihmcihpLCJiaW5kIix0LGUpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylmcih1W25dLCJpbnNlcnRlZCIsdCxlKX07bz9pdCh0LCJpbnNlcnQiLGYpOmYoKX1sLmxlbmd0aCYmaXQodCwicG9zdHBhdGNoIixmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248bC5sZW5ndGg7bisrKWZyKGxbbl0sImNvbXBvbmVudFVwZGF0ZWQiLHQsZSl9KTtpZighbylmb3IobiBpbiBzKWNbbl18fGZyKHNbbl0sInVuYmluZCIsZSxlLGEpfShlLHQpfXZhciBjcj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIHVyKGUsdCl7dmFyIG4scixpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoIWUpcmV0dXJuIGk7Zm9yKG49MDtuPGUubGVuZ3RoO24rKykocj1lW25dKS5tb2RpZmllcnN8fChyLm1vZGlmaWVycz1jciksaVtscihyKV09cixyLmRlZj1MZSh0LiRvcHRpb25zLCJkaXJlY3RpdmVzIixyLm5hbWUpO3JldHVybiBpfWZ1bmN0aW9uIGxyKGUpe3JldHVybiBlLnJhd05hbWV8fGUubmFtZSsiLiIrT2JqZWN0LmtleXMoZS5tb2RpZmllcnN8fHt9KS5qb2luKCIuIil9ZnVuY3Rpb24gZnIoZSx0LG4scixpKXt2YXIgbz1lLmRlZiYmZS5kZWZbdF07aWYobyl0cnl7byhuLmVsbSxlLG4scixpKX1jYXRjaChyKXtSZShyLG4uY29udGV4dCwiZGlyZWN0aXZlICIrZS5uYW1lKyIgIit0KyIgaG9vayIpfX12YXIgcHI9W2VyLGFyXTtmdW5jdGlvbiBkcihlLHIpe3ZhciBpPXIuY29tcG9uZW50T3B0aW9ucztpZighKG4oaSkmJiExPT09aS5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzfHx0KGUuZGF0YS5hdHRycykmJnQoci5kYXRhLmF0dHJzKSkpe3ZhciBvLGEscz1yLmVsbSxjPWUuZGF0YS5hdHRyc3x8e30sdT1yLmRhdGEuYXR0cnN8fHt9O2ZvcihvIGluIG4odS5fX29iX18pJiYodT1yLmRhdGEuYXR0cnM9QSh7fSx1KSksdSlhPXVbb10sY1tvXSE9PWEmJnZyKHMsbyxhKTtmb3IobyBpbihxfHxaKSYmdS52YWx1ZSE9PWMudmFsdWUmJnZyKHMsInZhbHVlIix1LnZhbHVlKSxjKXQodVtvXSkmJihQbihvKT9zLnJlbW92ZUF0dHJpYnV0ZU5TKEZuLFJuKG8pKTpEbihvKXx8cy5yZW1vdmVBdHRyaWJ1dGUobykpfX1mdW5jdGlvbiB2cihlLHQsbil7ZS50YWdOYW1lLmluZGV4T2YoIi0iKT4tMT9ocihlLHQsbik6SW4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6KG49ImFsbG93ZnVsbHNjcmVlbiI9PT10JiYiRU1CRUQiPT09ZS50YWdOYW1lPyJ0cnVlIjp0LGUuc2V0QXR0cmlidXRlKHQsbikpOkRuKHQpP2Uuc2V0QXR0cmlidXRlKHQsTW4odCxuKSk6UG4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGVOUyhGbixSbih0KSk6ZS5zZXRBdHRyaWJ1dGVOUyhGbix0LG4pOmhyKGUsdCxuKX1mdW5jdGlvbiBocihlLHQsbil7aWYoSG4obikpZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihxJiYhVyYmIlRFWFRBUkVBIj09PWUudGFnTmFtZSYmInBsYWNlaG9sZGVyIj09PXQmJiIiIT09biYmIWUuX19pZXBoKXt2YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpfTtlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixyKSxlLl9faWVwaD0hMH1lLnNldEF0dHJpYnV0ZSh0LG4pfX12YXIgbXI9e2NyZWF0ZTpkcix1cGRhdGU6ZHJ9O2Z1bmN0aW9uIHlyKGUscil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1lLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1CbihyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO24oYykmJihzPXpuKHMsVm4oYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fXZhciBncixfcixiciwkcix3cixDcix4cj17Y3JlYXRlOnlyLHVwZGF0ZTp5cn0sa3I9L1tcdykuK1wtXyRcXV0vO2Z1bmN0aW9uIEFyKGUpe3ZhciB0LG4scixpLG8sYT0hMSxzPSExLGM9ITEsdT0hMSxsPTAsZj0wLHA9MCxkPTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihuPXQsdD1lLmNoYXJDb2RlQXQociksYSkzOT09PXQmJjkyIT09biYmKGE9ITEpO2Vsc2UgaWYocykzND09PXQmJjkyIT09biYmKHM9ITEpO2Vsc2UgaWYoYyk5Nj09PXQmJjkyIT09biYmKGM9ITEpO2Vsc2UgaWYodSk0Nz09PXQmJjkyIT09biYmKHU9ITEpO2Vsc2UgaWYoMTI0IT09dHx8MTI0PT09ZS5jaGFyQ29kZUF0KHIrMSl8fDEyND09PWUuY2hhckNvZGVBdChyLTEpfHxsfHxmfHxwKXtzd2l0Y2godCl7Y2FzZSAzNDpzPSEwO2JyZWFrO2Nhc2UgMzk6YT0hMDticmVhaztjYXNlIDk2OmM9ITA7YnJlYWs7Y2FzZSA0MDpwKys7YnJlYWs7Y2FzZSA0MTpwLS07YnJlYWs7Y2FzZSA5MTpmKys7YnJlYWs7Y2FzZSA5MzpmLS07YnJlYWs7Y2FzZSAxMjM6bCsrO2JyZWFrO2Nhc2UgMTI1OmwtLX1pZig0Nz09PXQpe2Zvcih2YXIgdj1yLTEsaD12b2lkIDA7dj49MCYmIiAiPT09KGg9ZS5jaGFyQXQodikpO3YtLSk7aCYma3IudGVzdChoKXx8KHU9ITApfX1lbHNlIHZvaWQgMD09PWk/KGQ9cisxLGk9ZS5zbGljZSgwLHIpLnRyaW0oKSk6bSgpO2Z1bmN0aW9uIG0oKXsob3x8KG89W10pKS5wdXNoKGUuc2xpY2UoZCxyKS50cmltKCkpLGQ9cisxfWlmKHZvaWQgMD09PWk/aT1lLnNsaWNlKDAscikudHJpbSgpOjAhPT1kJiZtKCksbylmb3Iocj0wO3I8by5sZW5ndGg7cisrKWk9T3IoaSxvW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBPcihlLHQpe3ZhciBuPXQuaW5kZXhPZigiKCIpO2lmKG48MClyZXR1cm4nX2YoIicrdCsnIikoJytlKyIpIjt2YXIgcj10LnNsaWNlKDAsbiksaT10LnNsaWNlKG4rMSk7cmV0dXJuJ19mKCInK3IrJyIpKCcrZSsoIikiIT09aT8iLCIraTppKX1mdW5jdGlvbiBTcihlLHQpe2NvbnNvbGUuZXJyb3IoIltWdWUgY29tcGlsZXJdOiAiK2UpfWZ1bmN0aW9uIFRyKGUsdCl7cmV0dXJuIGU/ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTpbXX1mdW5jdGlvbiBFcihlLHQsbixyLGkpeyhlLnByb3BzfHwoZS5wcm9wcz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24gTnIoZSx0LG4scixpKXsoaT9lLmR5bmFtaWNBdHRyc3x8KGUuZHluYW1pY0F0dHJzPVtdKTplLmF0dHJzfHwoZS5hdHRycz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24ganIoZSx0LG4scil7ZS5hdHRyc01hcFt0XT1uLGUuYXR0cnNMaXN0LnB1c2goUnIoe25hbWU6dCx2YWx1ZTpufSxyKSl9ZnVuY3Rpb24gRHIoZSx0LG4scixpLG8sYSxzKXsoZS5kaXJlY3RpdmVzfHwoZS5kaXJlY3RpdmVzPVtdKSkucHVzaChScih7bmFtZTp0LHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLGlzRHluYW1pY0FyZzpvLG1vZGlmaWVyczphfSxzKSksZS5wbGFpbj0hMX1mdW5jdGlvbiBMcihlLHQsbil7cmV0dXJuIG4/Il9wKCIrdCsnLCInK2UrJyIpJzplK3R9ZnVuY3Rpb24gTXIodCxuLHIsaSxvLGEscyxjKXt2YXIgdTsoaT1pfHxlKS5yaWdodD9jP249IigiK24rIik9PT0nY2xpY2snPydjb250ZXh0bWVudSc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJjb250ZXh0bWVudSIsZGVsZXRlIGkucmlnaHQpOmkubWlkZGxlJiYoYz9uPSIoIituKyIpPT09J2NsaWNrJz8nbW91c2V1cCc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJtb3VzZXVwIikpLGkuY2FwdHVyZSYmKGRlbGV0ZSBpLmNhcHR1cmUsbj1McigiISIsbixjKSksaS5vbmNlJiYoZGVsZXRlIGkub25jZSxuPUxyKCJ+IixuLGMpKSxpLnBhc3NpdmUmJihkZWxldGUgaS5wYXNzaXZlLG49THIoIiYiLG4sYykpLGkubmF0aXZlPyhkZWxldGUgaS5uYXRpdmUsdT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6dT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgbD1Scih7dmFsdWU6ci50cmltKCksZHluYW1pYzpjfSxzKTtpIT09ZSYmKGwubW9kaWZpZXJzPWkpO3ZhciBmPXVbbl07QXJyYXkuaXNBcnJheShmKT9vP2YudW5zaGlmdChsKTpmLnB1c2gobCk6dVtuXT1mP28/W2wsZl06W2YsbF06bCx0LnBsYWluPSExfWZ1bmN0aW9uIElyKGUsdCxuKXt2YXIgcj1GcihlLCI6Iit0KXx8RnIoZSwidi1iaW5kOiIrdCk7aWYobnVsbCE9cilyZXR1cm4gQXIocik7aWYoITEhPT1uKXt2YXIgaT1GcihlLHQpO2lmKG51bGwhPWkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfX1mdW5jdGlvbiBGcihlLHQsbil7dmFyIHI7aWYobnVsbCE9KHI9ZS5hdHRyc01hcFt0XSkpZm9yKHZhciBpPWUuYXR0cnNMaXN0LG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYoaVtvXS5uYW1lPT09dCl7aS5zcGxpY2UobywxKTticmVha31yZXR1cm4gbiYmZGVsZXRlIGUuYXR0cnNNYXBbdF0scn1mdW5jdGlvbiBQcihlLHQpe2Zvcih2YXIgbj1lLmF0dHJzTGlzdCxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1uW3JdO2lmKHQudGVzdChvLm5hbWUpKXJldHVybiBuLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIHQmJihudWxsIT10LnN0YXJ0JiYoZS5zdGFydD10LnN0YXJ0KSxudWxsIT10LmVuZCYmKGUuZW5kPXQuZW5kKSksZX1mdW5jdGlvbiBIcihlLHQsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT1Ccih0LG8pO2UubW9kZWw9e3ZhbHVlOiIoIit0KyIpIixleHByZXNzaW9uOkpTT04uc3RyaW5naWZ5KHQpLGNhbGxiYWNrOiJmdW5jdGlvbiAoJCR2KSB7IithKyJ9In19ZnVuY3Rpb24gQnIoZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtpZihlPWUudHJpbSgpLGdyPWUubGVuZ3RoLGUuaW5kZXhPZigiWyIpPDB8fGUubGFzdEluZGV4T2YoIl0iKTxnci0xKXJldHVybigkcj1lLmxhc3RJbmRleE9mKCIuIikpPi0xP3tleHA6ZS5zbGljZSgwLCRyKSxrZXk6JyInK2Uuc2xpY2UoJHIrMSkrJyInfTp7ZXhwOmUsa2V5Om51bGx9O19yPWUsJHI9d3I9Q3I9MDtmb3IoOyF6cigpOylWcihicj1VcigpKT9Kcihicik6OTE9PT1iciYmS3IoYnIpO3JldHVybntleHA6ZS5zbGljZSgwLHdyKSxrZXk6ZS5zbGljZSh3cisxLENyKX19KGUpO3JldHVybiBudWxsPT09bi5rZXk/ZSsiPSIrdDoiJHNldCgiK24uZXhwKyIsICIrbi5rZXkrIiwgIit0KyIpIn1mdW5jdGlvbiBVcigpe3JldHVybiBfci5jaGFyQ29kZUF0KCsrJHIpfWZ1bmN0aW9uIHpyKCl7cmV0dXJuICRyPj1ncn1mdW5jdGlvbiBWcihlKXtyZXR1cm4gMzQ9PT1lfHwzOT09PWV9ZnVuY3Rpb24gS3IoZSl7dmFyIHQ9MTtmb3Iod3I9JHI7IXpyKCk7KWlmKFZyKGU9VXIoKSkpSnIoZSk7ZWxzZSBpZig5MT09PWUmJnQrKyw5Mz09PWUmJnQtLSwwPT09dCl7Q3I9JHI7YnJlYWt9fWZ1bmN0aW9uIEpyKGUpe2Zvcih2YXIgdD1lOyF6cigpJiYoZT1VcigpKSE9PXQ7KTt9dmFyIHFyLFdyPSJfX3IiLFpyPSJfX2MiO2Z1bmN0aW9uIEdyKGUsdCxuKXt2YXIgcj1xcjtyZXR1cm4gZnVuY3Rpb24gaSgpe251bGwhPT10LmFwcGx5KG51bGwsYXJndW1lbnRzKSYmUXIoZSxpLG4scil9fXZhciBYcj1WZSYmIShYJiZOdW1iZXIoWFsxXSk8PTUzKTtmdW5jdGlvbiBZcihlLHQsbixyKXtpZihYcil7dmFyIGk9YW4sbz10O3Q9by5fd3JhcHBlcj1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PWUuY3VycmVudFRhcmdldHx8ZS50aW1lU3RhbXA+PWl8fGUudGltZVN0YW1wPD0wfHxlLnRhcmdldC5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1xci5hZGRFdmVudExpc3RlbmVyKGUsdCxRP3tjYXB0dXJlOm4scGFzc2l2ZTpyfTpuKX1mdW5jdGlvbiBRcihlLHQsbixyKXsocnx8cXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0Ll93cmFwcGVyfHx0LG4pfWZ1bmN0aW9uIGVpKGUscil7aWYoIXQoZS5kYXRhLm9uKXx8IXQoci5kYXRhLm9uKSl7dmFyIGk9ci5kYXRhLm9ufHx7fSxvPWUuZGF0YS5vbnx8e307cXI9ci5lbG0sZnVuY3Rpb24oZSl7aWYobihlW1dyXSkpe3ZhciB0PXE/ImNoYW5nZSI6ImlucHV0IjtlW3RdPVtdLmNvbmNhdChlW1dyXSxlW3RdfHxbXSksZGVsZXRlIGVbV3JdfW4oZVtacl0pJiYoZS5jaGFuZ2U9W10uY29uY2F0KGVbWnJdLGUuY2hhbmdlfHxbXSksZGVsZXRlIGVbWnJdKX0oaSkscnQoaSxvLFlyLFFyLEdyLHIuY29udGV4dCkscXI9dm9pZCAwfX12YXIgdGksbmk9e2NyZWF0ZTplaSx1cGRhdGU6ZWl9O2Z1bmN0aW9uIHJpKGUscil7aWYoIXQoZS5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9ZS5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGkgaW4gbihjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz1BKHt9LGMpKSxzKWkgaW4gY3x8KGFbaV09IiIpO2ZvcihpIGluIGMpe2lmKG89Y1tpXSwidGV4dENvbnRlbnQiPT09aXx8ImlubmVySFRNTCI9PT1pKXtpZihyLmNoaWxkcmVuJiYoci5jaGlsZHJlbi5sZW5ndGg9MCksbz09PXNbaV0pY29udGludWU7MT09PWEuY2hpbGROb2Rlcy5sZW5ndGgmJmEucmVtb3ZlQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKX1pZigidmFsdWUiPT09aSYmIlBST0dSRVNTIiE9PWEudGFnTmFtZSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtpaShhLHUpJiYoYS52YWx1ZT11KX1lbHNlIGlmKCJpbm5lckhUTUwiPT09aSYmcW4oYS50YWdOYW1lKSYmdChhLmlubmVySFRNTCkpeyh0aT10aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD0iPHN2Zz4iK28rIjwvc3ZnPiI7Zm9yKHZhciBsPXRpLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtsLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQobC5maXJzdENoaWxkKX1lbHNlIGlmKG8hPT1zW2ldKXRyeXthW2ldPW99Y2F0Y2goZSl7fX19fWZ1bmN0aW9uIGlpKGUsdCl7cmV0dXJuIWUuY29tcG9zaW5nJiYoIk9QVElPTiI9PT1lLnRhZ05hbWV8fGZ1bmN0aW9uKGUsdCl7dmFyIG49ITA7dHJ5e249ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWV9Y2F0Y2goZSl7fXJldHVybiBuJiZlLnZhbHVlIT09dH0oZSx0KXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZhbHVlLGk9ZS5fdk1vZGlmaWVycztpZihuKGkpKXtpZihpLm51bWJlcilyZXR1cm4gZihyKSE9PWYodCk7aWYoaS50cmltKXJldHVybiByLnRyaW0oKSE9PXQudHJpbSgpfXJldHVybiByIT09dH0oZSx0KSl9dmFyIG9pPXtjcmVhdGU6cmksdXBkYXRlOnJpfSxhaT1nKGZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49LzooLispLztyZXR1cm4gZS5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHI9ZS5zcGxpdChuKTtyLmxlbmd0aD4xJiYodFtyWzBdLnRyaW0oKV09clsxXS50cmltKCkpfX0pLHR9KTtmdW5jdGlvbiBzaShlKXt2YXIgdD1jaShlLnN0eWxlKTtyZXR1cm4gZS5zdGF0aWNTdHlsZT9BKGUuc3RhdGljU3R5bGUsdCk6dH1mdW5jdGlvbiBjaShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9PKGUpOiJzdHJpbmciPT10eXBlb2YgZT9haShlKTplfXZhciB1aSxsaT0vXi0tLyxmaT0vXHMqIWltcG9ydGFudCQvLHBpPWZ1bmN0aW9uKGUsdCxuKXtpZihsaS50ZXN0KHQpKWUuc3R5bGUuc2V0UHJvcGVydHkodCxuKTtlbHNlIGlmKGZpLnRlc3QobikpZS5zdHlsZS5zZXRQcm9wZXJ0eShDKHQpLG4ucmVwbGFjZShmaSwiIiksImltcG9ydGFudCIpO2Vsc2V7dmFyIHI9dmkodCk7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspZS5zdHlsZVtyXT1uW2ldO2Vsc2UgZS5zdHlsZVtyXT1ufX0sZGk9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHZpPWcoZnVuY3Rpb24oZSl7aWYodWk9dWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJmaWx0ZXIiIT09KGU9YihlKSkmJmUgaW4gdWkpcmV0dXJuIGU7Zm9yKHZhciB0PWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPTA7bjxkaS5sZW5ndGg7bisrKXt2YXIgcj1kaVtuXSt0O2lmKHIgaW4gdWkpcmV0dXJuIHJ9fSk7ZnVuY3Rpb24gaGkoZSxyKXt2YXIgaT1yLmRhdGEsbz1lLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1jaShyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPW4ocC5fX29iX18pP0Eoe30scCk6cDt2YXIgZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9e307aWYodClmb3IodmFyIGk9ZTtpLmNvbXBvbmVudEluc3RhbmNlOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkmJmkuZGF0YSYmKG49c2koaS5kYXRhKSkmJkEocixuKTsobj1zaShlLmRhdGEpKSYmQShyLG4pO2Zvcih2YXIgbz1lO289by5wYXJlbnQ7KW8uZGF0YSYmKG49c2koby5kYXRhKSkmJkEocixuKTtyZXR1cm4gcn0ociwhMCk7Zm9yKHMgaW4gZil0KGRbc10pJiZwaShjLHMsIiIpO2ZvcihzIGluIGQpKGE9ZFtzXSkhPT1mW3NdJiZwaShjLHMsbnVsbD09YT8iIjphKX19dmFyIG1pPXtjcmVhdGU6aGksdXBkYXRlOmhpfSx5aT0vXHMrLztmdW5jdGlvbiBnaShlLHQpe2lmKHQmJih0PXQudHJpbSgpKSlpZihlLmNsYXNzTGlzdCl0LmluZGV4T2YoIiAiKT4tMT90LnNwbGl0KHlpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCl9KTplLmNsYXNzTGlzdC5hZGQodCk7ZWxzZXt2YXIgbj0iICIrKGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrdCsiICIpPDAmJmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rdCkudHJpbSgpKX19ZnVuY3Rpb24gX2koZSx0KXtpZih0JiYodD10LnRyaW0oKSkpaWYoZS5jbGFzc0xpc3QpdC5pbmRleE9mKCIgIik+LTE/dC5zcGxpdCh5aSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpfSk6ZS5jbGFzc0xpc3QucmVtb3ZlKHQpLGUuY2xhc3NMaXN0Lmxlbmd0aHx8ZS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyhlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIit0KyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTplLnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gYmkoZSl7aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdD17fTtyZXR1cm4hMSE9PWUuY3NzJiZBKHQsJGkoZS5uYW1lfHwidiIpKSxBKHQsZSksdH1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/JGkoZSk6dm9pZCAwfX12YXIgJGk9ZyhmdW5jdGlvbihlKXtyZXR1cm57ZW50ZXJDbGFzczplKyItZW50ZXIiLGVudGVyVG9DbGFzczplKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6ZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczplKyItbGVhdmUiLGxlYXZlVG9DbGFzczplKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6ZSsiLWxlYXZlLWFjdGl2ZSJ9fSksd2k9eiYmIVcsQ2k9InRyYW5zaXRpb24iLHhpPSJhbmltYXRpb24iLGtpPSJ0cmFuc2l0aW9uIixBaT0idHJhbnNpdGlvbmVuZCIsT2k9ImFuaW1hdGlvbiIsU2k9ImFuaW1hdGlvbmVuZCI7d2kmJih2b2lkIDA9PT13aW5kb3cub250cmFuc2l0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kJiYoa2k9IldlYmtpdFRyYW5zaXRpb24iLEFpPSJ3ZWJraXRUcmFuc2l0aW9uRW5kIiksdm9pZCAwPT09d2luZG93Lm9uYW5pbWF0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQmJihPaT0iV2Via2l0QW5pbWF0aW9uIixTaT0id2Via2l0QW5pbWF0aW9uRW5kIikpO3ZhciBUaT16P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyk6c2V0VGltZW91dDpmdW5jdGlvbihlKXtyZXR1cm4gZSgpfTtmdW5jdGlvbiBFaShlKXtUaShmdW5jdGlvbigpe1RpKGUpfSl9ZnVuY3Rpb24gTmkoZSx0KXt2YXIgbj1lLl90cmFuc2l0aW9uQ2xhc3Nlc3x8KGUuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YodCk8MCYmKG4ucHVzaCh0KSxnaShlLHQpKX1mdW5jdGlvbiBqaShlLHQpe2UuX3RyYW5zaXRpb25DbGFzc2VzJiZoKGUuX3RyYW5zaXRpb25DbGFzc2VzLHQpLF9pKGUsdCl9ZnVuY3Rpb24gRGkoZSx0LG4pe3ZhciByPU1pKGUsdCksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT1DaT9BaTpTaSxjPTAsdT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksZS5hZGRFdmVudExpc3RlbmVyKHMsbCl9dmFyIExpPS9cYih0cmFuc2Zvcm18YWxsKSgsfCQpLztmdW5jdGlvbiBNaShlLHQpe3ZhciBuLHI9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSksaT0ocltraSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLG89KHJba2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSxhPUlpKGksbykscz0ocltPaSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLGM9KHJbT2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSx1PUlpKHMsYyksbD0wLGY9MDtyZXR1cm4gdD09PUNpP2E+MCYmKG49Q2ksbD1hLGY9by5sZW5ndGgpOnQ9PT14aT91PjAmJihuPXhpLGw9dSxmPWMubGVuZ3RoKTpmPShuPShsPU1hdGgubWF4KGEsdSkpPjA/YT51P0NpOnhpOm51bGwpP249PT1DaT9vLmxlbmd0aDpjLmxlbmd0aDowLHt0eXBlOm4sdGltZW91dDpsLHByb3BDb3VudDpmLGhhc1RyYW5zZm9ybTpuPT09Q2kmJkxpLnRlc3QocltraSsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIElpKGUsdCl7Zm9yKDtlLmxlbmd0aDx0Lmxlbmd0aDspZT1lLmNvbmNhdChlKTtyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCx0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBGaSh0KStGaShlW25dKX0pKX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gMWUzKk51bWJlcihlLnNsaWNlKDAsLTEpLnJlcGxhY2UoIiwiLCIuIikpfWZ1bmN0aW9uIFBpKGUscil7dmFyIGk9ZS5lbG07bihpLl9sZWF2ZUNiKSYmKGkuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGkuX2xlYXZlQ2IoKSk7dmFyIGE9YmkoZS5kYXRhLnRyYW5zaXRpb24pO2lmKCF0KGEpJiYhbihpLl9lbnRlckNiKSYmMT09PWkubm9kZVR5cGUpe2Zvcih2YXIgcz1hLmNzcyxjPWEudHlwZSx1PWEuZW50ZXJDbGFzcyxsPWEuZW50ZXJUb0NsYXNzLHA9YS5lbnRlckFjdGl2ZUNsYXNzLGQ9YS5hcHBlYXJDbGFzcyx2PWEuYXBwZWFyVG9DbGFzcyxoPWEuYXBwZWFyQWN0aXZlQ2xhc3MsbT1hLmJlZm9yZUVudGVyLHk9YS5lbnRlcixnPWEuYWZ0ZXJFbnRlcixfPWEuZW50ZXJDYW5jZWxsZWQsYj1hLmJlZm9yZUFwcGVhciwkPWEuYXBwZWFyLHc9YS5hZnRlckFwcGVhcixDPWEuYXBwZWFyQ2FuY2VsbGVkLHg9YS5kdXJhdGlvbixrPVd0LEE9V3QuJHZub2RlO0EmJkEucGFyZW50OylrPUEuY29udGV4dCxBPUEucGFyZW50O3ZhciBPPSFrLl9pc01vdW50ZWR8fCFlLmlzUm9vdEluc2VydDtpZighT3x8JHx8IiI9PT0kKXt2YXIgUz1PJiZkP2Q6dSxUPU8mJmg/aDpwLEU9TyYmdj92OmwsTj1PJiZifHxtLGo9TyYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEw9TyYmd3x8ZyxNPU8mJkN8fF8sST1mKG8oeCk/eC5lbnRlcjp4KSxGPSExIT09cyYmIVcsUD1CaShqKSxSPWkuX2VudGVyQ2I9RChmdW5jdGlvbigpe0YmJihqaShpLEUpLGppKGksVCkpLFIuY2FuY2VsbGVkPyhGJiZqaShpLFMpLE0mJk0oaSkpOkwmJkwoaSksaS5fZW50ZXJDYj1udWxsfSk7ZS5kYXRhLnNob3d8fGl0KGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgdD1pLnBhcmVudE5vZGUsbj10JiZ0Ll9wZW5kaW5nJiZ0Ll9wZW5kaW5nW2Uua2V5XTtuJiZuLnRhZz09PWUudGFnJiZuLmVsbS5fbGVhdmVDYiYmbi5lbG0uX2xlYXZlQ2IoKSxqJiZqKGksUil9KSxOJiZOKGkpLEYmJihOaShpLFMpLE5pKGksVCksRWkoZnVuY3Rpb24oKXtqaShpLFMpLFIuY2FuY2VsbGVkfHwoTmkoaSxFKSxQfHwoSGkoSSk/c2V0VGltZW91dChSLEkpOkRpKGksYyxSKSkpfSkpLGUuZGF0YS5zaG93JiYociYmcigpLGomJmooaSxSKSksRnx8UHx8UigpfX19ZnVuY3Rpb24gUmkoZSxyKXt2YXIgaT1lLmVsbTtuKGkuX2VudGVyQ2IpJiYoaS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsaS5fZW50ZXJDYigpKTt2YXIgYT1iaShlLmRhdGEudHJhbnNpdGlvbik7aWYodChhKXx8MSE9PWkubm9kZVR5cGUpcmV0dXJuIHIoKTtpZighbihpLl9sZWF2ZUNiKSl7dmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmxlYXZlQ2xhc3MsbD1hLmxlYXZlVG9DbGFzcyxwPWEubGVhdmVBY3RpdmVDbGFzcyxkPWEuYmVmb3JlTGVhdmUsdj1hLmxlYXZlLGg9YS5hZnRlckxlYXZlLG09YS5sZWF2ZUNhbmNlbGxlZCx5PWEuZGVsYXlMZWF2ZSxnPWEuZHVyYXRpb24sXz0hMSE9PXMmJiFXLGI9QmkodiksJD1mKG8oZyk/Zy5sZWF2ZTpnKSx3PWkuX2xlYXZlQ2I9RChmdW5jdGlvbigpe2kucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLl9wZW5kaW5nJiYoaS5wYXJlbnROb2RlLl9wZW5kaW5nW2Uua2V5XT1udWxsKSxfJiYoamkoaSxsKSxqaShpLHApKSx3LmNhbmNlbGxlZD8oXyYmamkoaSx1KSxtJiZtKGkpKToocigpLGgmJmgoaSkpLGkuX2xlYXZlQ2I9bnVsbH0pO3k/eShDKTpDKCl9ZnVuY3Rpb24gQygpe3cuY2FuY2VsbGVkfHwoIWUuZGF0YS5zaG93JiZpLnBhcmVudE5vZGUmJigoaS5wYXJlbnROb2RlLl9wZW5kaW5nfHwoaS5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbZS5rZXldPWUpLGQmJmQoaSksXyYmKE5pKGksdSksTmkoaSxwKSxFaShmdW5jdGlvbigpe2ppKGksdSksdy5jYW5jZWxsZWR8fChOaShpLGwpLGJ8fChIaSgkKT9zZXRUaW1lb3V0KHcsJCk6RGkoaSxjLHcpKSl9KSksdiYmdihpLHcpLF98fGJ8fHcoKSl9fWZ1bmN0aW9uIEhpKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIEJpKGUpe2lmKHQoZSkpcmV0dXJuITE7dmFyIHI9ZS5mbnM7cmV0dXJuIG4ocik/QmkoQXJyYXkuaXNBcnJheShyKT9yWzBdOnIpOihlLl9sZW5ndGh8fGUubGVuZ3RoKT4xfWZ1bmN0aW9uIFVpKGUsdCl7ITAhPT10LmRhdGEuc2hvdyYmUGkodCl9dmFyIHppPWZ1bmN0aW9uKGUpe3ZhciBvLGEscz17fSxjPWUubW9kdWxlcyx1PWUubm9kZU9wcztmb3Iobz0wO288cnIubGVuZ3RoOysrbylmb3Ioc1tycltvXV09W10sYT0wO2E8Yy5sZW5ndGg7KythKW4oY1thXVtycltvXV0pJiZzW3JyW29dXS5wdXNoKGNbYV1bcnJbb11dKTtmdW5jdGlvbiBsKGUpe3ZhciB0PXUucGFyZW50Tm9kZShlKTtuKHQpJiZ1LnJlbW92ZUNoaWxkKHQsZSl9ZnVuY3Rpb24gZihlLHQsaSxvLGEsYyxsKXtpZihuKGUuZWxtKSYmbihjKSYmKGU9Y1tsXT1tZShlKSksZS5pc1Jvb3RJbnNlcnQ9IWEsIWZ1bmN0aW9uKGUsdCxpLG8pe3ZhciBhPWUuZGF0YTtpZihuKGEpKXt2YXIgYz1uKGUuY29tcG9uZW50SW5zdGFuY2UpJiZhLmtlZXBBbGl2ZTtpZihuKGE9YS5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMSksbihlLmNvbXBvbmVudEluc3RhbmNlKSlyZXR1cm4gZChlLHQpLHYoaSxlLmVsbSxvKSxyKGMpJiZmdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG8sYT1lO2EuY29tcG9uZW50SW5zdGFuY2U7KWlmKGE9YS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUsbihvPWEuZGF0YSkmJm4obz1vLnRyYW5zaXRpb24pKXtmb3Iobz0wO288cy5hY3RpdmF0ZS5sZW5ndGg7KytvKXMuYWN0aXZhdGVbb10obnIsYSk7dC5wdXNoKGEpO2JyZWFrfXYocixlLmVsbSxpKX0oZSx0LGksbyksITB9fShlLHQsaSxvKSl7dmFyIGY9ZS5kYXRhLHA9ZS5jaGlsZHJlbixtPWUudGFnO24obSk/KGUuZWxtPWUubnM/dS5jcmVhdGVFbGVtZW50TlMoZS5ucyxtKTp1LmNyZWF0ZUVsZW1lbnQobSxlKSxnKGUpLGgoZSxwLHQpLG4oZikmJnkoZSx0KSx2KGksZS5lbG0sbykpOnIoZS5pc0NvbW1lbnQpPyhlLmVsbT11LmNyZWF0ZUNvbW1lbnQoZS50ZXh0KSx2KGksZS5lbG0sbykpOihlLmVsbT11LmNyZWF0ZVRleHROb2RlKGUudGV4dCksdihpLGUuZWxtLG8pKX19ZnVuY3Rpb24gZChlLHQpe24oZS5kYXRhLnBlbmRpbmdJbnNlcnQpJiYodC5wdXNoLmFwcGx5KHQsZS5kYXRhLnBlbmRpbmdJbnNlcnQpLGUuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLGUuZWxtPWUuY29tcG9uZW50SW5zdGFuY2UuJGVsLG0oZSk/KHkoZSx0KSxnKGUpKToodHIoZSksdC5wdXNoKGUpKX1mdW5jdGlvbiB2KGUsdCxyKXtuKGUpJiYobihyKT91LnBhcmVudE5vZGUocik9PT1lJiZ1Lmluc2VydEJlZm9yZShlLHQscik6dS5hcHBlbmRDaGlsZChlLHQpKX1mdW5jdGlvbiBoKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWYodFtyXSxuLGUuZWxtLG51bGwsITAsdCxyKTtlbHNlIGkoZS50ZXh0KSYmdS5hcHBlbmRDaGlsZChlLmVsbSx1LmNyZWF0ZVRleHROb2RlKFN0cmluZyhlLnRleHQpKSl9ZnVuY3Rpb24gbShlKXtmb3IoO2UuY29tcG9uZW50SW5zdGFuY2U7KWU9ZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIG4oZS50YWcpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIHI9MDtyPHMuY3JlYXRlLmxlbmd0aDsrK3Ipcy5jcmVhdGVbcl0obnIsZSk7bihvPWUuZGF0YS5ob29rKSYmKG4oby5jcmVhdGUpJiZvLmNyZWF0ZShucixlKSxuKG8uaW5zZXJ0KSYmdC5wdXNoKGUpKX1mdW5jdGlvbiBnKGUpe3ZhciB0O2lmKG4odD1lLmZuU2NvcGVJZCkpdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpO2Vsc2UgZm9yKHZhciByPWU7cjspbih0PXIuY29udGV4dCkmJm4odD10LiRvcHRpb25zLl9zY29wZUlkKSYmdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpLHI9ci5wYXJlbnQ7bih0PVd0KSYmdCE9PWUuY29udGV4dCYmdCE9PWUuZm5Db250ZXh0JiZuKHQ9dC4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZShlLmVsbSx0KX1mdW5jdGlvbiBfKGUsdCxuLHIsaSxvKXtmb3IoO3I8PWk7KytyKWYobltyXSxvLGUsdCwhMSxuLHIpfWZ1bmN0aW9uIGIoZSl7dmFyIHQscixpPWUuZGF0YTtpZihuKGkpKWZvcihuKHQ9aS5ob29rKSYmbih0PXQuZGVzdHJveSkmJnQoZSksdD0wO3Q8cy5kZXN0cm95Lmxlbmd0aDsrK3Qpcy5kZXN0cm95W3RdKGUpO2lmKG4odD1lLmNoaWxkcmVuKSlmb3Iocj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKWIoZS5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gJChlLHQscil7Zm9yKDt0PD1yOysrdCl7dmFyIGk9ZVt0XTtuKGkpJiYobihpLnRhZyk/KHcoaSksYihpKSk6bChpLmVsbSkpfX1mdW5jdGlvbiB3KGUsdCl7aWYobih0KXx8bihlLmRhdGEpKXt2YXIgcixpPXMucmVtb3ZlLmxlbmd0aCsxO2ZvcihuKHQpP3QubGlzdGVuZXJzKz1pOnQ9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7MD09LS1uLmxpc3RlbmVycyYmbChlKX1yZXR1cm4gbi5saXN0ZW5lcnM9dCxufShlLmVsbSxpKSxuKHI9ZS5jb21wb25lbnRJbnN0YW5jZSkmJm4ocj1yLl92bm9kZSkmJm4oci5kYXRhKSYmdyhyLHQpLHI9MDtyPHMucmVtb3ZlLmxlbmd0aDsrK3Ipcy5yZW1vdmVbcl0oZSx0KTtuKHI9ZS5kYXRhLmhvb2spJiZuKHI9ci5yZW1vdmUpP3IoZSx0KTp0KCl9ZWxzZSBsKGUuZWxtKX1mdW5jdGlvbiBDKGUsdCxyLGkpe2Zvcih2YXIgbz1yO288aTtvKyspe3ZhciBhPXRbb107aWYobihhKSYmaXIoZSxhKSlyZXR1cm4gb319ZnVuY3Rpb24geChlLGksbyxhLGMsbCl7aWYoZSE9PWkpe24oaS5lbG0pJiZuKGEpJiYoaT1hW2NdPW1lKGkpKTt2YXIgcD1pLmVsbT1lLmVsbTtpZihyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSluKGkuYXN5bmNGYWN0b3J5LnJlc29sdmVkKT9PKGUuZWxtLGksbyk6aS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihyKGkuaXNTdGF0aWMpJiZyKGUuaXNTdGF0aWMpJiZpLmtleT09PWUua2V5JiYocihpLmlzQ2xvbmVkKXx8cihpLmlzT25jZSkpKWkuY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZTtlbHNle3ZhciBkLHY9aS5kYXRhO24odikmJm4oZD12Lmhvb2spJiZuKGQ9ZC5wcmVwYXRjaCkmJmQoZSxpKTt2YXIgaD1lLmNoaWxkcmVuLHk9aS5jaGlsZHJlbjtpZihuKHYpJiZtKGkpKXtmb3IoZD0wO2Q8cy51cGRhdGUubGVuZ3RoOysrZClzLnVwZGF0ZVtkXShlLGkpO24oZD12Lmhvb2spJiZuKGQ9ZC51cGRhdGUpJiZkKGUsaSl9dChpLnRleHQpP24oaCkmJm4oeSk/aCE9PXkmJmZ1bmN0aW9uKGUscixpLG8sYSl7Zm9yKHZhciBzLGMsbCxwPTAsZD0wLHY9ci5sZW5ndGgtMSxoPXJbMF0sbT1yW3ZdLHk9aS5sZW5ndGgtMSxnPWlbMF0sYj1pW3ldLHc9IWE7cDw9diYmZDw9eTspdChoKT9oPXJbKytwXTp0KG0pP209clstLXZdOmlyKGgsZyk/KHgoaCxnLG8saSxkKSxoPXJbKytwXSxnPWlbKytkXSk6aXIobSxiKT8oeChtLGIsbyxpLHkpLG09clstLXZdLGI9aVstLXldKTppcihoLGIpPyh4KGgsYixvLGkseSksdyYmdS5pbnNlcnRCZWZvcmUoZSxoLmVsbSx1Lm5leHRTaWJsaW5nKG0uZWxtKSksaD1yWysrcF0sYj1pWy0teV0pOmlyKG0sZyk/KHgobSxnLG8saSxkKSx3JiZ1Lmluc2VydEJlZm9yZShlLG0uZWxtLGguZWxtKSxtPXJbLS12XSxnPWlbKytkXSk6KHQocykmJihzPW9yKHIscCx2KSksdChjPW4oZy5rZXkpP3NbZy5rZXldOkMoZyxyLHAsdikpP2YoZyxvLGUsaC5lbG0sITEsaSxkKTppcihsPXJbY10sZyk/KHgobCxnLG8saSxkKSxyW2NdPXZvaWQgMCx3JiZ1Lmluc2VydEJlZm9yZShlLGwuZWxtLGguZWxtKSk6ZihnLG8sZSxoLmVsbSwhMSxpLGQpLGc9aVsrK2RdKTtwPnY/XyhlLHQoaVt5KzFdKT9udWxsOmlbeSsxXS5lbG0saSxkLHksbyk6ZD55JiYkKHIscCx2KX0ocCxoLHksbyxsKTpuKHkpPyhuKGUudGV4dCkmJnUuc2V0VGV4dENvbnRlbnQocCwiIiksXyhwLG51bGwseSwwLHkubGVuZ3RoLTEsbykpOm4oaCk/JChoLDAsaC5sZW5ndGgtMSk6bihlLnRleHQpJiZ1LnNldFRleHRDb250ZW50KHAsIiIpOmUudGV4dCE9PWkudGV4dCYmdS5zZXRUZXh0Q29udGVudChwLGkudGV4dCksbih2KSYmbihkPXYuaG9vaykmJm4oZD1kLnBvc3RwYXRjaCkmJmQoZSxpKX19fWZ1bmN0aW9uIGsoZSx0LGkpe2lmKHIoaSkmJm4oZS5wYXJlbnQpKWUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD10O2Vsc2UgZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsrK28pdFtvXS5kYXRhLmhvb2suaW5zZXJ0KHRbb10pfXZhciBBPXAoImF0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleSIpO2Z1bmN0aW9uIE8oZSx0LGksbyl7dmFyIGEscz10LnRhZyxjPXQuZGF0YSx1PXQuY2hpbGRyZW47aWYobz1vfHxjJiZjLnByZSx0LmVsbT1lLHIodC5pc0NvbW1lbnQpJiZuKHQuYXN5bmNGYWN0b3J5KSlyZXR1cm4gdC5pc0FzeW5jUGxhY2Vob2xkZXI9ITAsITA7aWYobihjKSYmKG4oYT1jLmhvb2spJiZuKGE9YS5pbml0KSYmYSh0LCEwKSxuKGE9dC5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBkKHQsaSksITA7aWYobihzKSl7aWYobih1KSlpZihlLmhhc0NoaWxkTm9kZXMoKSlpZihuKGE9YykmJm4oYT1hLmRvbVByb3BzKSYmbihhPWEuaW5uZXJIVE1MKSl7aWYoYSE9PWUuaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBsPSEwLGY9ZS5maXJzdENoaWxkLHA9MDtwPHUubGVuZ3RoO3ArKyl7aWYoIWZ8fCFPKGYsdVtwXSxpLG8pKXtsPSExO2JyZWFrfWY9Zi5uZXh0U2libGluZ31pZighbHx8ZilyZXR1cm4hMX1lbHNlIGgodCx1LGkpO2lmKG4oYykpe3ZhciB2PSExO2Zvcih2YXIgbSBpbiBjKWlmKCFBKG0pKXt2PSEwLHkodCxpKTticmVha30hdiYmYy5jbGFzcyYmZXQoYy5jbGFzcyl9fWVsc2UgZS5kYXRhIT09dC50ZXh0JiYoZS5kYXRhPXQudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKGUsaSxvLGEpe2lmKCF0KGkpKXt2YXIgYyxsPSExLHA9W107aWYodChlKSlsPSEwLGYoaSxwKTtlbHNle3ZhciBkPW4oZS5ub2RlVHlwZSk7aWYoIWQmJmlyKGUsaSkpeChlLGkscCxudWxsLG51bGwsYSk7ZWxzZXtpZihkKXtpZigxPT09ZS5ub2RlVHlwZSYmZS5oYXNBdHRyaWJ1dGUoTCkmJihlLnJlbW92ZUF0dHJpYnV0ZShMKSxvPSEwKSxyKG8pJiZPKGUsaSxwKSlyZXR1cm4gayhpLHAsITApLGU7Yz1lLGU9bmV3IHBlKHUudGFnTmFtZShjKS50b0xvd2VyQ2FzZSgpLHt9LFtdLHZvaWQgMCxjKX12YXIgdj1lLmVsbSxoPXUucGFyZW50Tm9kZSh2KTtpZihmKGkscCx2Ll9sZWF2ZUNiP251bGw6aCx1Lm5leHRTaWJsaW5nKHYpKSxuKGkucGFyZW50KSlmb3IodmFyIHk9aS5wYXJlbnQsZz1tKGkpO3k7KXtmb3IodmFyIF89MDtfPHMuZGVzdHJveS5sZW5ndGg7KytfKXMuZGVzdHJveVtfXSh5KTtpZih5LmVsbT1pLmVsbSxnKXtmb3IodmFyIHc9MDt3PHMuY3JlYXRlLmxlbmd0aDsrK3cpcy5jcmVhdGVbd10obnIseSk7dmFyIEM9eS5kYXRhLmhvb2suaW5zZXJ0O2lmKEMubWVyZ2VkKWZvcih2YXIgQT0xO0E8Qy5mbnMubGVuZ3RoO0ErKylDLmZuc1tBXSgpfWVsc2UgdHIoeSk7eT15LnBhcmVudH1uKGgpPyQoW2VdLDAsMCk6bihlLnRhZykmJmIoZSl9fXJldHVybiBrKGkscCxsKSxpLmVsbX1uKGUpJiZiKGUpfX0oe25vZGVPcHM6UW4sbW9kdWxlczpbbXIseHIsbmksb2ksbWksej97Y3JlYXRlOlVpLGFjdGl2YXRlOlVpLHJlbW92ZTpmdW5jdGlvbihlLHQpeyEwIT09ZS5kYXRhLnNob3c/UmkoZSx0KTp0KCl9fTp7fV0uY29uY2F0KHByKX0pO1cmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmUudm1vZGVsJiZYaShlLCJpbnB1dCIpfSk7dmFyIFZpPXtpbnNlcnRlZDpmdW5jdGlvbihlLHQsbixyKXsic2VsZWN0Ij09PW4udGFnPyhyLmVsbSYmIXIuZWxtLl92T3B0aW9ucz9pdChuLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7VmkuY29tcG9uZW50VXBkYXRlZChlLHQsbil9KTpLaShlLHQsbi5jb250ZXh0KSxlLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpKTooInRleHRhcmVhIj09PW4udGFnfHxYbihlLnR5cGUpKSYmKGUuX3ZNb2RpZmllcnM9dC5tb2RpZmllcnMsdC5tb2RpZmllcnMubGF6eXx8KGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25zdGFydCIsWmkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLEdpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsR2kpLFcmJihlLnZtb2RlbD0hMCkpKX0sY29tcG9uZW50VXBkYXRlZDpmdW5jdGlvbihlLHQsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7S2koZSx0LG4uY29udGV4dCk7dmFyIHI9ZS5fdk9wdGlvbnMsaT1lLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpO2lmKGkuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiFOKGUsclt0XSl9KSkoZS5tdWx0aXBsZT90LnZhbHVlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHFpKGUsaSl9KTp0LnZhbHVlIT09dC5vbGRWYWx1ZSYmcWkodC52YWx1ZSxpKSkmJlhpKGUsImNoYW5nZSIpfX19O2Z1bmN0aW9uIEtpKGUsdCxuKXtKaShlLHQsbiksKHF8fFopJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SmkoZSx0LG4pfSwwKX1mdW5jdGlvbiBKaShlLHQsbil7dmFyIHI9dC52YWx1ZSxpPWUubXVsdGlwbGU7aWYoIWl8fEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbyxhLHM9MCxjPWUub3B0aW9ucy5sZW5ndGg7czxjO3MrKylpZihhPWUub3B0aW9uc1tzXSxpKW89aihyLFdpKGEpKT4tMSxhLnNlbGVjdGVkIT09byYmKGEuc2VsZWN0ZWQ9byk7ZWxzZSBpZihOKFdpKGEpLHIpKXJldHVybiB2b2lkKGUuc2VsZWN0ZWRJbmRleCE9PXMmJihlLnNlbGVjdGVkSW5kZXg9cykpO2l8fChlLnNlbGVjdGVkSW5kZXg9LTEpfX1mdW5jdGlvbiBxaShlLHQpe3JldHVybiB0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiFOKHQsZSl9KX1mdW5jdGlvbiBXaShlKXtyZXR1cm4iX3ZhbHVlImluIGU/ZS5fdmFsdWU6ZS52YWx1ZX1mdW5jdGlvbiBaaShlKXtlLnRhcmdldC5jb21wb3Npbmc9ITB9ZnVuY3Rpb24gR2koZSl7ZS50YXJnZXQuY29tcG9zaW5nJiYoZS50YXJnZXQuY29tcG9zaW5nPSExLFhpKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiBYaShlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7bi5pbml0RXZlbnQodCwhMCwhMCksZS5kaXNwYXRjaEV2ZW50KG4pfWZ1bmN0aW9uIFlpKGUpe3JldHVybiFlLmNvbXBvbmVudEluc3RhbmNlfHxlLmRhdGEmJmUuZGF0YS50cmFuc2l0aW9uP2U6WWkoZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpfXZhciBRaT17bW9kZWw6Vmksc2hvdzp7YmluZDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dC52YWx1ZSxpPShuPVlpKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPWUuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PWUuc3R5bGUuZGlzcGxheT8iIjplLnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsUGkobixmdW5jdGlvbigpe2Uuc3R5bGUuZGlzcGxheT1vfSkpOmUuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQudmFsdWU7IXIhPSF0Lm9sZFZhbHVlJiYoKG49WWkobikpLmRhdGEmJm4uZGF0YS50cmFuc2l0aW9uPyhuLmRhdGEuc2hvdz0hMCxyP1BpKG4sZnVuY3Rpb24oKXtlLnN0eWxlLmRpc3BsYXk9ZS5fX3ZPcmlnaW5hbERpc3BsYXl9KTpSaShuLGZ1bmN0aW9uKCl7ZS5zdHlsZS5kaXNwbGF5PSJub25lIn0pKTplLnN0eWxlLmRpc3BsYXk9cj9lLl9fdk9yaWdpbmFsRGlzcGxheToibm9uZSIpfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0LG4scixpKXtpfHwoZS5zdHlsZS5kaXNwbGF5PWUuX192T3JpZ2luYWxEaXNwbGF5KX19fSxlbz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gdG8oZSl7dmFyIHQ9ZSYmZS5jb21wb25lbnRPcHRpb25zO3JldHVybiB0JiZ0LkN0b3Iub3B0aW9ucy5hYnN0cmFjdD90byh6dCh0LmNoaWxkcmVuKSk6ZX1mdW5jdGlvbiBubyhlKXt2YXIgdD17fSxuPWUuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKXRbcl09ZVtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpdFtiKG8pXT1pW29dO3JldHVybiB0fWZ1bmN0aW9uIHJvKGUsdCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHQudGFnKSlyZXR1cm4gZSgia2VlcC1hbGl2ZSIse3Byb3BzOnQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGF9KX12YXIgaW89ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnfHxVdChlKX0sb289ZnVuY3Rpb24oZSl7cmV0dXJuInNob3ciPT09ZS5uYW1lfSxhbz17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6ZW8sYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKG4mJihuPW4uZmlsdGVyKGlvKSkubGVuZ3RoKXt2YXIgcj10aGlzLm1vZGUsbz1uWzBdO2lmKGZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnBhcmVudDspaWYoZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gbzt2YXIgYT10byhvKTtpZighYSlyZXR1cm4gbztpZih0aGlzLl9sZWF2aW5nKXJldHVybiBybyhlLG8pO3ZhciBzPSJfX3RyYW5zaXRpb24tIit0aGlzLl91aWQrIi0iO2Eua2V5PW51bGw9PWEua2V5P2EuaXNDb21tZW50P3MrImNvbW1lbnQiOnMrYS50YWc6aShhLmtleSk/MD09PVN0cmluZyhhLmtleSkuaW5kZXhPZihzKT9hLmtleTpzK2Eua2V5OmEua2V5O3ZhciBjPShhLmRhdGF8fChhLmRhdGE9e30pKS50cmFuc2l0aW9uPW5vKHRoaXMpLHU9dGhpcy5fdm5vZGUsbD10byh1KTtpZihhLmRhdGEuZGlyZWN0aXZlcyYmYS5kYXRhLmRpcmVjdGl2ZXMuc29tZShvbykmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5rZXk9PT1lLmtleSYmdC50YWc9PT1lLnRhZ30oYSxsKSYmIVV0KGwpJiYoIWwuY29tcG9uZW50SW5zdGFuY2V8fCFsLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgZj1sLmRhdGEudHJhbnNpdGlvbj1BKHt9LGMpO2lmKCJvdXQtaW4iPT09cilyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxpdChmLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3QuX2xlYXZpbmc9ITEsdC4kZm9yY2VVcGRhdGUoKX0pLHJvKGUsbyk7aWYoImluLW91dCI9PT1yKXtpZihVdChhKSlyZXR1cm4gdTt2YXIgcCxkPWZ1bmN0aW9uKCl7cCgpfTtpdChjLCJhZnRlckVudGVyIixkKSxpdChjLCJlbnRlckNhbmNlbGxlZCIsZCksaXQoZiwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24oZSl7cD1lfSl9fXJldHVybiBvfX19LHNvPUEoe3RhZzpTdHJpbmcsbW92ZUNsYXNzOlN0cmluZ30sZW8pO2Z1bmN0aW9uIGNvKGUpe2UuZWxtLl9tb3ZlQ2ImJmUuZWxtLl9tb3ZlQ2IoKSxlLmVsbS5fZW50ZXJDYiYmZS5lbG0uX2VudGVyQ2IoKX1mdW5jdGlvbiB1byhlKXtlLmRhdGEubmV3UG9zPWUuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIGxvKGUpe3ZhciB0PWUuZGF0YS5wb3Msbj1lLmRhdGEubmV3UG9zLHI9dC5sZWZ0LW4ubGVmdCxpPXQudG9wLW4udG9wO2lmKHJ8fGkpe2UuZGF0YS5tb3ZlZD0hMDt2YXIgbz1lLmVsbS5zdHlsZTtvLnRyYW5zZm9ybT1vLldlYmtpdFRyYW5zZm9ybT0idHJhbnNsYXRlKCIrcisicHgsIitpKyJweCkiLG8udHJhbnNpdGlvbkR1cmF0aW9uPSIwcyJ9fWRlbGV0ZSBzby5tb2RlO3ZhciBmbz17VHJhbnNpdGlvbjphbyxUcmFuc2l0aW9uR3JvdXA6e3Byb3BzOnNvLGJlZm9yZU1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3VwZGF0ZTt0aGlzLl91cGRhdGU9ZnVuY3Rpb24obixyKXt2YXIgaT1adChlKTtlLl9fcGF0Y2hfXyhlLl92bm9kZSxlLmtlcHQsITEsITApLGUuX3Zub2RlPWUua2VwdCxpKCksdC5jYWxsKGUsbixyKX19LHJlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGhpcy5wcmV2Q2hpbGRyZW49dGhpcy5jaGlsZHJlbixpPXRoaXMuJHNsb3RzLmRlZmF1bHR8fFtdLG89dGhpcy5jaGlsZHJlbj1bXSxhPW5vKHRoaXMpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGM9aVtzXTtjLnRhZyYmbnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSYmKG8ucHVzaChjKSxuW2Mua2V5XT1jLChjLmRhdGF8fChjLmRhdGE9e30pKS50cmFuc2l0aW9uPWEpfWlmKHIpe2Zvcih2YXIgdT1bXSxsPVtdLGY9MDtmPHIubGVuZ3RoO2YrKyl7dmFyIHA9cltmXTtwLmRhdGEudHJhbnNpdGlvbj1hLHAuZGF0YS5wb3M9cC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbltwLmtleV0/dS5wdXNoKHApOmwucHVzaChwKX10aGlzLmtlcHQ9ZSh0LG51bGwsdSksdGhpcy5yZW1vdmVkPWx9cmV0dXJuIGUodCxudWxsLG8pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcmV2Q2hpbGRyZW4sdD10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2UubGVuZ3RoJiZ0aGlzLmhhc01vdmUoZVswXS5lbG0sdCkmJihlLmZvckVhY2goY28pLGUuZm9yRWFjaCh1byksZS5mb3JFYWNoKGxvKSx0aGlzLl9yZWZsb3c9ZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5tb3ZlZCl7dmFyIG49ZS5lbG0scj1uLnN0eWxlO05pKG4sdCksci50cmFuc2Zvcm09ci5XZWJraXRUcmFuc2Zvcm09ci50cmFuc2l0aW9uRHVyYXRpb249IiIsbi5hZGRFdmVudExpc3RlbmVyKEFpLG4uX21vdmVDYj1mdW5jdGlvbiBlKHIpe3ImJnIudGFyZ2V0IT09bnx8ciYmIS90cmFuc2Zvcm0kLy50ZXN0KHIucHJvcGVydHlOYW1lKXx8KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihBaSxlKSxuLl9tb3ZlQ2I9bnVsbCxqaShuLHQpKX0pfX0pKX0sbWV0aG9kczp7aGFzTW92ZTpmdW5jdGlvbihlLHQpe2lmKCF3aSlyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBuPWUuY2xvbmVOb2RlKCk7ZS5fdHJhbnNpdGlvbkNsYXNzZXMmJmUuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oZSl7X2kobixlKX0pLGdpKG4sdCksbi5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLiRlbC5hcHBlbmRDaGlsZChuKTt2YXIgcj1NaShuKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQobiksdGhpcy5faGFzTW92ZT1yLmhhc1RyYW5zZm9ybX19fX07d24uY29uZmlnLm11c3RVc2VQcm9wPWpuLHduLmNvbmZpZy5pc1Jlc2VydmVkVGFnPVduLHduLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1Fbix3bi5jb25maWcuZ2V0VGFnTmFtZXNwYWNlPVpuLHduLmNvbmZpZy5pc1Vua25vd25FbGVtZW50PWZ1bmN0aW9uKGUpe2lmKCF6KXJldHVybiEwO2lmKFduKGUpKXJldHVybiExO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLG51bGwhPUduW2VdKXJldHVybiBHbltlXTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBlLmluZGV4T2YoIi0iKT4tMT9HbltlXT10LmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8dC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpHbltlXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KHQudG9TdHJpbmcoKSl9LEEod24ub3B0aW9ucy5kaXJlY3RpdmVzLFFpKSxBKHduLm9wdGlvbnMuY29tcG9uZW50cyxmbyksd24ucHJvdG90eXBlLl9fcGF0Y2hfXz16P3ppOlMsd24ucHJvdG90eXBlLiRtb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGUuJGVsPXQsZS4kb3B0aW9ucy5yZW5kZXJ8fChlLiRvcHRpb25zLnJlbmRlcj12ZSksWXQoZSwiYmVmb3JlTW91bnQiKSxyPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlKGUuX3JlbmRlcigpLG4pfSxuZXcgZm4oZSxyLFMse2JlZm9yZTpmdW5jdGlvbigpe2UuX2lzTW91bnRlZCYmIWUuX2lzRGVzdHJveWVkJiZZdChlLCJiZWZvcmVVcGRhdGUiKX19LCEwKSxuPSExLG51bGw9PWUuJHZub2RlJiYoZS5faXNNb3VudGVkPSEwLFl0KGUsIm1vdW50ZWQiKSksZX0odGhpcyxlPWUmJno/WW4oZSk6dm9pZCAwLHQpfSx6JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ri5kZXZ0b29scyYmbmUmJm5lLmVtaXQoImluaXQiLHduKX0sMCk7dmFyIHBvPS9ce1x7KCg/Oi58XHI/XG4pKz8pXH1cfS9nLHZvPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxobz1nKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0ucmVwbGFjZSh2bywiXFwkJiIpLG49ZVsxXS5yZXBsYWNlKHZvLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAodCsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSk7dmFyIG1vPXtzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsImNsYXNzIik7biYmKGUuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPUlyKGUsImNsYXNzIiwhMSk7ciYmKGUuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVybiBlLnN0YXRpY0NsYXNzJiYodCs9InN0YXRpY0NsYXNzOiIrZS5zdGF0aWNDbGFzcysiLCIpLGUuY2xhc3NCaW5kaW5nJiYodCs9ImNsYXNzOiIrZS5jbGFzc0JpbmRpbmcrIiwiKSx0fX07dmFyIHlvLGdvPXtzdGF0aWNLZXlzOlsic3RhdGljU3R5bGUiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsInN0eWxlIik7biYmKGUuc3RhdGljU3R5bGU9SlNPTi5zdHJpbmdpZnkoYWkobikpKTt2YXIgcj1JcihlLCJzdHlsZSIsITEpO3ImJihlLnN0eWxlQmluZGluZz1yKX0sZ2VuRGF0YTpmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZS5zdGF0aWNTdHlsZSYmKHQrPSJzdGF0aWNTdHlsZToiK2Uuc3RhdGljU3R5bGUrIiwiKSxlLnN0eWxlQmluZGluZyYmKHQrPSJzdHlsZTooIitlLnN0eWxlQmluZGluZysiKSwiKSx0fX0sX289ZnVuY3Rpb24oZSl7cmV0dXJuKHlvPXlvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUseW8udGV4dENvbnRlbnR9LGJvPXAoImFyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyIiksJG89cCgiY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSIpLHdvPXAoImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCxkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaGVhZCxoZWFkZXIsaGdyb3VwLGhyLGh0bWwsbGVnZW5kLGxpLG1lbnVpdGVtLG1ldGEsb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpdGxlLHRyLHRyYWNrIiksQ289L15ccyooW15ccyInPD5cLz1dKykoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vLHhvPS9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy8sa289IlthLXpBLVpfXVtcXC1cXC4wLTlfYS16QS1aIitQLnNvdXJjZSsiXSoiLEFvPSIoKD86IitrbysiXFw6KT8iK2tvKyIpIixPbz1uZXcgUmVnRXhwKCJePCIrQW8pLFNvPS9eXHMqKFwvPyk+LyxUbz1uZXcgUmVnRXhwKCJePFxcLyIrQW8rIltePl0qPiIpLEVvPS9ePCFET0NUWVBFIFtePl0rPi9pLE5vPS9ePCFcLS0vLGpvPS9ePCFcWy8sRG89cCgic2NyaXB0LHN0eWxlLHRleHRhcmVhIiwhMCksTG89e30sTW89eyImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIicsIiZhbXA7IjoiJiIsIiYjMTA7IjoiXG4iLCImIzk7IjoiXHQiLCImIzM5OyI6IicifSxJbz0vJig/Omx0fGd0fHF1b3R8YW1wfCMzOSk7L2csRm89LyYoPzpsdHxndHxxdW90fGFtcHwjMzl8IzEwfCM5KTsvZyxQbz1wKCJwcmUsdGV4dGFyZWEiLCEwKSxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZQbyhlKSYmIlxuIj09PXRbMF19O2Z1bmN0aW9uIEhvKGUsdCl7dmFyIG49dD9GbzpJbztyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIE1vW2VdfSl9dmFyIEJvLFVvLHpvLFZvLEtvLEpvLHFvLFdvLFpvPS9eQHxedi1vbjovLEdvPS9edi18XkB8Xjp8XiMvLFhvPS8oW1xzXFNdKj8pXHMrKD86aW58b2YpXHMrKFtcc1xTXSopLyxZbz0vLChbXixcfVxdXSopKD86LChbXixcfVxdXSopKT8kLyxRbz0vXlwofFwpJC9nLGVhPS9eXFsuKlxdJC8sdGE9LzooLiopJC8sbmE9L146fF5cLnxedi1iaW5kOi8scmE9L1wuW14uXF1dKyg/PVteXF1dKiQpL2csaWE9L152LXNsb3QoOnwkKXxeIy8sb2E9L1tcclxuXS8sYWE9L1xzKy9nLHNhPWcoX28pLGNhPSJfZW1wdHlfIjtmdW5jdGlvbiB1YShlLHQsbil7cmV0dXJue3R5cGU6MSx0YWc6ZSxhdHRyc0xpc3Q6dCxhdHRyc01hcDptYSh0KSxyYXdBdHRyc01hcDp7fSxwYXJlbnQ6bixjaGlsZHJlbjpbXX19ZnVuY3Rpb24gbGEoZSx0KXtCbz10Lndhcm58fFNyLEpvPXQuaXNQcmVUYWd8fFQscW89dC5tdXN0VXNlUHJvcHx8VCxXbz10LmdldFRhZ05hbWVzcGFjZXx8VDt0LmlzUmVzZXJ2ZWRUYWc7em89VHIodC5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksVm89VHIodC5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksS289VHIodC5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLFVvPXQuZGVsaW1pdGVyczt2YXIgbixyLGk9W10sbz0hMSE9PXQucHJlc2VydmVXaGl0ZXNwYWNlLGE9dC53aGl0ZXNwYWNlLHM9ITEsYz0hMTtmdW5jdGlvbiB1KGUpe2lmKGwoZSksc3x8ZS5wcm9jZXNzZWR8fChlPWZhKGUsdCkpLGkubGVuZ3RofHxlPT09bnx8bi5pZiYmKGUuZWxzZWlmfHxlLmVsc2UpJiZkYShuLHtleHA6ZS5lbHNlaWYsYmxvY2s6ZX0pLHImJiFlLmZvcmJpZGRlbilpZihlLmVsc2VpZnx8ZS5lbHNlKWE9ZSwodT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtmb3IoO3QtLTspe2lmKDE9PT1lW3RdLnR5cGUpcmV0dXJuIGVbdF07ZS5wb3AoKX19KHIuY2hpbGRyZW4pKSYmdS5pZiYmZGEodSx7ZXhwOmEuZWxzZWlmLGJsb2NrOmF9KTtlbHNle2lmKGUuc2xvdFNjb3BlKXt2YXIgbz1lLnNsb3RUYXJnZXR8fCciZGVmYXVsdCInOyhyLnNjb3BlZFNsb3RzfHwoci5zY29wZWRTbG90cz17fSkpW29dPWV9ci5jaGlsZHJlbi5wdXNoKGUpLGUucGFyZW50PXJ9dmFyIGEsdTtlLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLnNsb3RTY29wZX0pLGwoZSksZS5wcmUmJihzPSExKSxKbyhlLnRhZykmJihjPSExKTtmb3IodmFyIGY9MDtmPEtvLmxlbmd0aDtmKyspS29bZl0oZSx0KX1mdW5jdGlvbiBsKGUpe2lmKCFjKWZvcih2YXIgdDsodD1lLmNoaWxkcmVuW2UuY2hpbGRyZW4ubGVuZ3RoLTFdKSYmMz09PXQudHlwZSYmIiAiPT09dC50ZXh0OyllLmNoaWxkcmVuLnBvcCgpfXJldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9W10sbz10LmV4cGVjdEhUTUwsYT10LmlzVW5hcnlUYWd8fFQscz10LmNhbkJlTGVmdE9wZW5UYWd8fFQsYz0wO2U7KXtpZihuPWUsciYmRG8ocikpe3ZhciB1PTAsbD1yLnRvTG93ZXJDYXNlKCksZj1Mb1tsXXx8KExvW2xdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrbCsiW14+XSo+KSIsImkiKSkscD1lLnJlcGxhY2UoZixmdW5jdGlvbihlLG4scil7cmV0dXJuIHU9ci5sZW5ndGgsRG8obCl8fCJub3NjcmlwdCI9PT1sfHwobj1uLnJlcGxhY2UoLzwhXC0tKFtcc1xTXSo/KS0tPi9nLCIkMSIpLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCIkMSIpKSxSbyhsLG4pJiYobj1uLnNsaWNlKDEpKSx0LmNoYXJzJiZ0LmNoYXJzKG4pLCIifSk7Yys9ZS5sZW5ndGgtcC5sZW5ndGgsZT1wLEEobCxjLXUsYyl9ZWxzZXt2YXIgZD1lLmluZGV4T2YoIjwiKTtpZigwPT09ZCl7aWYoTm8udGVzdChlKSl7dmFyIHY9ZS5pbmRleE9mKCItLVx4M2UiKTtpZih2Pj0wKXt0LnNob3VsZEtlZXBDb21tZW50JiZ0LmNvbW1lbnQoZS5zdWJzdHJpbmcoNCx2KSxjLGMrdiszKSxDKHYrMyk7Y29udGludWV9fWlmKGpvLnRlc3QoZSkpe3ZhciBoPWUuaW5kZXhPZigiXT4iKTtpZihoPj0wKXtDKGgrMik7Y29udGludWV9fXZhciBtPWUubWF0Y2goRW8pO2lmKG0pe0MobVswXS5sZW5ndGgpO2NvbnRpbnVlfXZhciB5PWUubWF0Y2goVG8pO2lmKHkpe3ZhciBnPWM7Qyh5WzBdLmxlbmd0aCksQSh5WzFdLGcsYyk7Y29udGludWV9dmFyIF89eCgpO2lmKF8pe2soXyksUm8oXy50YWdOYW1lLGUpJiZDKDEpO2NvbnRpbnVlfX12YXIgYj12b2lkIDAsJD12b2lkIDAsdz12b2lkIDA7aWYoZD49MCl7Zm9yKCQ9ZS5zbGljZShkKTshKFRvLnRlc3QoJCl8fE9vLnRlc3QoJCl8fE5vLnRlc3QoJCl8fGpvLnRlc3QoJCl8fCh3PSQuaW5kZXhPZigiPCIsMSkpPDApOylkKz13LCQ9ZS5zbGljZShkKTtiPWUuc3Vic3RyaW5nKDAsZCl9ZDwwJiYoYj1lKSxiJiZDKGIubGVuZ3RoKSx0LmNoYXJzJiZiJiZ0LmNoYXJzKGIsYy1iLmxlbmd0aCxjKX1pZihlPT09bil7dC5jaGFycyYmdC5jaGFycyhlKTticmVha319ZnVuY3Rpb24gQyh0KXtjKz10LGU9ZS5zdWJzdHJpbmcodCl9ZnVuY3Rpb24geCgpe3ZhciB0PWUubWF0Y2goT28pO2lmKHQpe3ZhciBuLHIsaT17dGFnTmFtZTp0WzFdLGF0dHJzOltdLHN0YXJ0OmN9O2ZvcihDKHRbMF0ubGVuZ3RoKTshKG49ZS5tYXRjaChTbykpJiYocj1lLm1hdGNoKHhvKXx8ZS5tYXRjaChDbykpOylyLnN0YXJ0PWMsQyhyWzBdLmxlbmd0aCksci5lbmQ9YyxpLmF0dHJzLnB1c2gocik7aWYobilyZXR1cm4gaS51bmFyeVNsYXNoPW5bMV0sQyhuWzBdLmxlbmd0aCksaS5lbmQ9YyxpfX1mdW5jdGlvbiBrKGUpe3ZhciBuPWUudGFnTmFtZSxjPWUudW5hcnlTbGFzaDtvJiYoInAiPT09ciYmd28obikmJkEocikscyhuKSYmcj09PW4mJkEobikpO2Zvcih2YXIgdT1hKG4pfHwhIWMsbD1lLmF0dHJzLmxlbmd0aCxmPW5ldyBBcnJheShsKSxwPTA7cDxsO3ArKyl7dmFyIGQ9ZS5hdHRyc1twXSx2PWRbM118fGRbNF18fGRbNV18fCIiLGg9ImEiPT09biYmImhyZWYiPT09ZFsxXT90LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzO2ZbcF09e25hbWU6ZFsxXSx2YWx1ZTpIbyh2LGgpfX11fHwoaS5wdXNoKHt0YWc6bixsb3dlckNhc2VkVGFnOm4udG9Mb3dlckNhc2UoKSxhdHRyczpmLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSkscj1uKSx0LnN0YXJ0JiZ0LnN0YXJ0KG4sZix1LGUuc3RhcnQsZS5lbmQpfWZ1bmN0aW9uIEEoZSxuLG8pe3ZhciBhLHM7aWYobnVsbD09biYmKG49YyksbnVsbD09byYmKG89YyksZSlmb3Iocz1lLnRvTG93ZXJDYXNlKCksYT1pLmxlbmd0aC0xO2E+PTAmJmlbYV0ubG93ZXJDYXNlZFRhZyE9PXM7YS0tKTtlbHNlIGE9MDtpZihhPj0wKXtmb3IodmFyIHU9aS5sZW5ndGgtMTt1Pj1hO3UtLSl0LmVuZCYmdC5lbmQoaVt1XS50YWcsbixvKTtpLmxlbmd0aD1hLHI9YSYmaVthLTFdLnRhZ31lbHNlImJyIj09PXM/dC5zdGFydCYmdC5zdGFydChlLFtdLCEwLG4sbyk6InAiPT09cyYmKHQuc3RhcnQmJnQuc3RhcnQoZSxbXSwhMSxuLG8pLHQuZW5kJiZ0LmVuZChlLG4sbykpfUEoKX0oZSx7d2FybjpCbyxleHBlY3RIVE1MOnQuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOnQuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOnQuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczp0LnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixzaG91bGRLZWVwQ29tbWVudDp0LmNvbW1lbnRzLG91dHB1dFNvdXJjZVJhbmdlOnQub3V0cHV0U291cmNlUmFuZ2Usc3RhcnQ6ZnVuY3Rpb24oZSxvLGEsbCxmKXt2YXIgcD1yJiZyLm5zfHxXbyhlKTtxJiYic3ZnIj09PXAmJihvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07eWEudGVzdChyLm5hbWUpfHwoci5uYW1lPXIubmFtZS5yZXBsYWNlKGdhLCIiKSx0LnB1c2gocikpfXJldHVybiB0fShvKSk7dmFyIGQsdj11YShlLG8scik7cCYmKHYubnM9cCksInN0eWxlIiE9PShkPXYpLnRhZyYmKCJzY3JpcHQiIT09ZC50YWd8fGQuYXR0cnNNYXAudHlwZSYmInRleHQvamF2YXNjcmlwdCIhPT1kLmF0dHJzTWFwLnR5cGUpfHx0ZSgpfHwodi5mb3JiaWRkZW49ITApO2Zvcih2YXIgaD0wO2g8Vm8ubGVuZ3RoO2grKyl2PVZvW2hdKHYsdCl8fHY7c3x8KCFmdW5jdGlvbihlKXtudWxsIT1GcihlLCJ2LXByZSIpJiYoZS5wcmU9ITApfSh2KSx2LnByZSYmKHM9ITApKSxKbyh2LnRhZykmJihjPSEwKSxzP2Z1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cnNMaXN0LG49dC5sZW5ndGg7aWYobilmb3IodmFyIHI9ZS5hdHRycz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspcltpXT17bmFtZTp0W2ldLm5hbWUsdmFsdWU6SlNPTi5zdHJpbmdpZnkodFtpXS52YWx1ZSl9LG51bGwhPXRbaV0uc3RhcnQmJihyW2ldLnN0YXJ0PXRbaV0uc3RhcnQscltpXS5lbmQ9dFtpXS5lbmQpO2Vsc2UgZS5wcmV8fChlLnBsYWluPSEwKX0odik6di5wcm9jZXNzZWR8fChwYSh2KSxmdW5jdGlvbihlKXt2YXIgdD1GcihlLCJ2LWlmIik7aWYodCllLmlmPXQsZGEoZSx7ZXhwOnQsYmxvY2s6ZX0pO2Vsc2V7bnVsbCE9RnIoZSwidi1lbHNlIikmJihlLmVsc2U9ITApO3ZhciBuPUZyKGUsInYtZWxzZS1pZiIpO24mJihlLmVsc2VpZj1uKX19KHYpLGZ1bmN0aW9uKGUpe251bGwhPUZyKGUsInYtb25jZSIpJiYoZS5vbmNlPSEwKX0odikpLG58fChuPXYpLGE/dSh2KToocj12LGkucHVzaCh2KSl9LGVuZDpmdW5jdGlvbihlLHQsbil7dmFyIG89aVtpLmxlbmd0aC0xXTtpLmxlbmd0aC09MSxyPWlbaS5sZW5ndGgtMV0sdShvKX0sY2hhcnM6ZnVuY3Rpb24oZSx0LG4pe2lmKHImJighcXx8InRleHRhcmVhIiE9PXIudGFnfHxyLmF0dHJzTWFwLnBsYWNlaG9sZGVyIT09ZSkpe3ZhciBpLHUsbCxmPXIuY2hpbGRyZW47aWYoZT1jfHxlLnRyaW0oKT8ic2NyaXB0Ij09PShpPXIpLnRhZ3x8InN0eWxlIj09PWkudGFnP2U6c2EoZSk6Zi5sZW5ndGg/YT8iY29uZGVuc2UiPT09YSYmb2EudGVzdChlKT8iIjoiICI6bz8iICI6IiI6IiIpY3x8ImNvbmRlbnNlIiE9PWF8fChlPWUucmVwbGFjZShhYSwiICIpKSwhcyYmIiAiIT09ZSYmKHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P2hvKHQpOnBvO2lmKG4udGVzdChlKSl7Zm9yKHZhciByLGksbyxhPVtdLHM9W10sYz1uLmxhc3RJbmRleD0wO3I9bi5leGVjKGUpOyl7KGk9ci5pbmRleCk+YyYmKHMucHVzaChvPWUuc2xpY2UoYyxpKSksYS5wdXNoKEpTT04uc3RyaW5naWZ5KG8pKSk7dmFyIHU9QXIoclsxXS50cmltKCkpO2EucHVzaCgiX3MoIit1KyIpIikscy5wdXNoKHsiQGJpbmRpbmciOnV9KSxjPWkrclswXS5sZW5ndGh9cmV0dXJuIGM8ZS5sZW5ndGgmJihzLnB1c2gobz1lLnNsaWNlKGMpKSxhLnB1c2goSlNPTi5zdHJpbmdpZnkobykpKSx7ZXhwcmVzc2lvbjphLmpvaW4oIisiKSx0b2tlbnM6c319fShlLFVvKSk/bD17dHlwZToyLGV4cHJlc3Npb246dS5leHByZXNzaW9uLHRva2Vuczp1LnRva2Vucyx0ZXh0OmV9OiIgIj09PWUmJmYubGVuZ3RoJiYiICI9PT1mW2YubGVuZ3RoLTFdLnRleHR8fChsPXt0eXBlOjMsdGV4dDplfSksbCYmZi5wdXNoKGwpfX0sY29tbWVudDpmdW5jdGlvbihlLHQsbil7aWYocil7dmFyIGk9e3R5cGU6Myx0ZXh0OmUsaXNDb21tZW50OiEwfTtyLmNoaWxkcmVuLnB1c2goaSl9fX0pLG59ZnVuY3Rpb24gZmEoZSx0KXt2YXIgbixyOyhyPUlyKG49ZSwia2V5IikpJiYobi5rZXk9ciksZS5wbGFpbj0hZS5rZXkmJiFlLnNjb3BlZFNsb3RzJiYhZS5hdHRyc0xpc3QubGVuZ3RoLGZ1bmN0aW9uKGUpe3ZhciB0PUlyKGUsInJlZiIpO3QmJihlLnJlZj10LGUucmVmSW5Gb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IoO3Q7KXtpZih2b2lkIDAhPT10LmZvcilyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfShlKSl9KGUpLGZ1bmN0aW9uKGUpe3ZhciB0OyJ0ZW1wbGF0ZSI9PT1lLnRhZz8odD1GcihlLCJzY29wZSIpLGUuc2xvdFNjb3BlPXR8fEZyKGUsInNsb3Qtc2NvcGUiKSk6KHQ9RnIoZSwic2xvdC1zY29wZSIpKSYmKGUuc2xvdFNjb3BlPXQpO3ZhciBuPUlyKGUsInNsb3QiKTtuJiYoZS5zbG90VGFyZ2V0PSciIic9PT1uPyciZGVmYXVsdCInOm4sZS5zbG90VGFyZ2V0RHluYW1pYz0hKCFlLmF0dHJzTWFwWyI6c2xvdCJdJiYhZS5hdHRyc01hcFsidi1iaW5kOnNsb3QiXSksInRlbXBsYXRlIj09PWUudGFnfHxlLnNsb3RTY29wZXx8TnIoZSwic2xvdCIsbixmdW5jdGlvbihlLHQpe3JldHVybiBlLnJhd0F0dHJzTWFwWyI6Iit0XXx8ZS5yYXdBdHRyc01hcFsidi1iaW5kOiIrdF18fGUucmF3QXR0cnNNYXBbdF19KGUsInNsb3QiKSkpO2lmKCJ0ZW1wbGF0ZSI9PT1lLnRhZyl7dmFyIHI9UHIoZSxpYSk7aWYocil7dmFyIGk9dmEociksbz1pLm5hbWUsYT1pLmR5bmFtaWM7ZS5zbG90VGFyZ2V0PW8sZS5zbG90VGFyZ2V0RHluYW1pYz1hLGUuc2xvdFNjb3BlPXIudmFsdWV8fGNhfX1lbHNle3ZhciBzPVByKGUsaWEpO2lmKHMpe3ZhciBjPWUuc2NvcGVkU2xvdHN8fChlLnNjb3BlZFNsb3RzPXt9KSx1PXZhKHMpLGw9dS5uYW1lLGY9dS5keW5hbWljLHA9Y1tsXT11YSgidGVtcGxhdGUiLFtdLGUpO3Auc2xvdFRhcmdldD1sLHAuc2xvdFRhcmdldER5bmFtaWM9ZixwLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKCFlLnNsb3RTY29wZSlyZXR1cm4gZS5wYXJlbnQ9cCwhMH0pLHAuc2xvdFNjb3BlPXMudmFsdWV8fGNhLGUuY2hpbGRyZW49W10sZS5wbGFpbj0hMX19fShlKSxmdW5jdGlvbihlKXsic2xvdCI9PT1lLnRhZyYmKGUuc2xvdE5hbWU9SXIoZSwibmFtZSIpKX0oZSksZnVuY3Rpb24oZSl7dmFyIHQ7KHQ9SXIoZSwiaXMiKSkmJihlLmNvbXBvbmVudD10KTtudWxsIT1GcihlLCJpbmxpbmUtdGVtcGxhdGUiKSYmKGUuaW5saW5lVGVtcGxhdGU9ITApfShlKTtmb3IodmFyIGk9MDtpPHpvLmxlbmd0aDtpKyspZT16b1tpXShlLHQpfHxlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyxjLHU9ZS5hdHRyc0xpc3Q7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYocj1pPXVbdF0ubmFtZSxvPXVbdF0udmFsdWUsR28udGVzdChyKSlpZihlLmhhc0JpbmRpbmdzPSEwLChhPWhhKHIucmVwbGFjZShHbywiIikpKSYmKHI9ci5yZXBsYWNlKHJhLCIiKSksbmEudGVzdChyKSlyPXIucmVwbGFjZShuYSwiIiksbz1BcihvKSwoYz1lYS50ZXN0KHIpKSYmKHI9ci5zbGljZSgxLC0xKSksYSYmKGEucHJvcCYmIWMmJiJpbm5lckh0bWwiPT09KHI9YihyKSkmJihyPSJpbm5lckhUTUwiKSxhLmNhbWVsJiYhYyYmKHI9YihyKSksYS5zeW5jJiYocz1CcihvLCIkZXZlbnQiKSxjP01yKGUsJyJ1cGRhdGU6IisoJytyKyIpIixzLG51bGwsITEsMCx1W3RdLCEwKTooTXIoZSwidXBkYXRlOiIrYihyKSxzLG51bGwsITEsMCx1W3RdKSxDKHIpIT09YihyKSYmTXIoZSwidXBkYXRlOiIrQyhyKSxzLG51bGwsITEsMCx1W3RdKSkpKSxhJiZhLnByb3B8fCFlLmNvbXBvbmVudCYmcW8oZS50YWcsZS5hdHRyc01hcC50eXBlLHIpP0VyKGUscixvLHVbdF0sYyk6TnIoZSxyLG8sdVt0XSxjKTtlbHNlIGlmKFpvLnRlc3Qocikpcj1yLnJlcGxhY2UoWm8sIiIpLChjPWVhLnRlc3QocikpJiYocj1yLnNsaWNlKDEsLTEpKSxNcihlLHIsbyxhLCExLDAsdVt0XSxjKTtlbHNle3ZhciBsPShyPXIucmVwbGFjZShHbywiIikpLm1hdGNoKHRhKSxmPWwmJmxbMV07Yz0hMSxmJiYocj1yLnNsaWNlKDAsLShmLmxlbmd0aCsxKSksZWEudGVzdChmKSYmKGY9Zi5zbGljZSgxLC0xKSxjPSEwKSksRHIoZSxyLGksbyxmLGMsYSx1W3RdKX1lbHNlIE5yKGUscixKU09OLnN0cmluZ2lmeShvKSx1W3RdKSwhZS5jb21wb25lbnQmJiJtdXRlZCI9PT1yJiZxbyhlLnRhZyxlLmF0dHJzTWFwLnR5cGUscikmJkVyKGUsciwidHJ1ZSIsdVt0XSl9KGUpLGV9ZnVuY3Rpb24gcGEoZSl7dmFyIHQ7aWYodD1GcihlLCJ2LWZvciIpKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKFhvKTtpZighdClyZXR1cm47dmFyIG49e307bi5mb3I9dFsyXS50cmltKCk7dmFyIHI9dFsxXS50cmltKCkucmVwbGFjZShRbywiIiksaT1yLm1hdGNoKFlvKTtpPyhuLmFsaWFzPXIucmVwbGFjZShZbywiIikudHJpbSgpLG4uaXRlcmF0b3IxPWlbMV0udHJpbSgpLGlbMl0mJihuLml0ZXJhdG9yMj1pWzJdLnRyaW0oKSkpOm4uYWxpYXM9cjtyZXR1cm4gbn0odCk7biYmQShlLG4pfX1mdW5jdGlvbiBkYShlLHQpe2UuaWZDb25kaXRpb25zfHwoZS5pZkNvbmRpdGlvbnM9W10pLGUuaWZDb25kaXRpb25zLnB1c2godCl9ZnVuY3Rpb24gdmEoZSl7dmFyIHQ9ZS5uYW1lLnJlcGxhY2UoaWEsIiIpO3JldHVybiB0fHwiIyIhPT1lLm5hbWVbMF0mJih0PSJkZWZhdWx0IiksZWEudGVzdCh0KT97bmFtZTp0LnNsaWNlKDEsLTEpLGR5bmFtaWM6ITB9OntuYW1lOiciJyt0KyciJyxkeW5hbWljOiExfX1mdW5jdGlvbiBoYShlKXt2YXIgdD1lLm1hdGNoKHJhKTtpZih0KXt2YXIgbj17fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5zbGljZSgxKV09ITB9KSxufX1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9e30sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W2Vbbl0ubmFtZV09ZVtuXS52YWx1ZTtyZXR1cm4gdH12YXIgeWE9L154bWxuczpOU1xkKy8sZ2E9L15OU1xkKzovO2Z1bmN0aW9uIF9hKGUpe3JldHVybiB1YShlLnRhZyxlLmF0dHJzTGlzdC5zbGljZSgpLGUucGFyZW50KX12YXIgYmE9W21vLGdvLHtwcmVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0Ij09PWUudGFnKXt2YXIgbixyPWUuYXR0cnNNYXA7aWYoIXJbInYtbW9kZWwiXSlyZXR1cm47aWYoKHJbIjp0eXBlIl18fHJbInYtYmluZDp0eXBlIl0pJiYobj1JcihlLCJ0eXBlIikpLHIudHlwZXx8bnx8IXJbInYtYmluZCJdfHwobj0iKCIrclsidi1iaW5kIl0rIikudHlwZSIpLG4pe3ZhciBpPUZyKGUsInYtaWYiLCEwKSxvPWk/IiYmKCIraSsiKSI6IiIsYT1udWxsIT1GcihlLCJ2LWVsc2UiLCEwKSxzPUZyKGUsInYtZWxzZS1pZiIsITApLGM9X2EoZSk7cGEoYyksanIoYywidHlwZSIsImNoZWNrYm94IiksZmEoYyx0KSxjLnByb2Nlc3NlZD0hMCxjLmlmPSIoIituKyIpPT09J2NoZWNrYm94JyIrbyxkYShjLHtleHA6Yy5pZixibG9jazpjfSk7dmFyIHU9X2EoZSk7RnIodSwidi1mb3IiLCEwKSxqcih1LCJ0eXBlIiwicmFkaW8iKSxmYSh1LHQpLGRhKGMse2V4cDoiKCIrbisiKT09PSdyYWRpbyciK28sYmxvY2s6dX0pO3ZhciBsPV9hKGUpO3JldHVybiBGcihsLCJ2LWZvciIsITApLGpyKGwsIjp0eXBlIixuKSxmYShsLHQpLGRhKGMse2V4cDppLGJsb2NrOmx9KSxhP2MuZWxzZT0hMDpzJiYoYy5lbHNlaWY9cyksY319fX1dO3ZhciAkYSx3YSxDYT17ZXhwZWN0SFRNTDohMCxtb2R1bGVzOmJhLGRpcmVjdGl2ZXM6e21vZGVsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LnZhbHVlLGk9dC5tb2RpZmllcnMsbz1lLnRhZyxhPWUuYXR0cnNNYXAudHlwZTtpZihlLmNvbXBvbmVudClyZXR1cm4gSHIoZSxyLGkpLCExO2lmKCJzZWxlY3QiPT09bykhZnVuY3Rpb24oZSx0LG4pe3ZhciByPSd2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pOyI7cj1yKyIgIitCcih0LCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxNcihlLCJjaGFuZ2UiLHIsbnVsbCwhMCl9KGUscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSkhZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4mJm4ubnVtYmVyLGk9SXIoZSwidmFsdWUiKXx8Im51bGwiLG89SXIoZSwidHJ1ZS12YWx1ZSIpfHwidHJ1ZSIsYT1JcihlLCJmYWxzZS12YWx1ZSIpfHwiZmFsc2UiO0VyKGUsImNoZWNrZWQiLCJBcnJheS5pc0FycmF5KCIrdCsiKT9faSgiK3QrIiwiK2krIik+LTEiKygidHJ1ZSI9PT1vPyI6KCIrdCsiKSI6IjpfcSgiK3QrIiwiK28rIikiKSksTXIoZSwiY2hhbmdlIiwidmFyICQkYT0iK3QrIiwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD8oIitvKyIpOigiK2ErIik7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PSIrKHI/Il9uKCIraSsiKSI6aSkrIiwkJGk9X2koJCRhLCQkdik7aWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIrQnIodCwiJCRhLmNvbmNhdChbJCR2XSkiKSsiKX1lbHNleyQkaT4tMSYmKCIrQnIodCwiJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkiKSsiKX19ZWxzZXsiK0JyKHQsIiQkYyIpKyJ9IixudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW8mJiJyYWRpbyI9PT1hKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9biYmbi5udW1iZXIsaT1JcihlLCJ2YWx1ZSIpfHwibnVsbCI7RXIoZSwiY2hlY2tlZCIsIl9xKCIrdCsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLE1yKGUsImNoYW5nZSIsQnIodCxpKSxudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/V3I6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9QnIodCxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksRXIoZSwidmFsdWUiLCIoIit0KyIpIiksTXIoZSx1LGYsbnVsbCwhMCksKHN8fGEpJiZNcihlLCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX0oZSxyLGkpO2Vsc2UgaWYoIUYuaXNSZXNlcnZlZFRhZyhvKSlyZXR1cm4gSHIoZSxyLGkpLCExO3JldHVybiEwfSx0ZXh0OmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwidGV4dENvbnRlbnQiLCJfcygiK3QudmFsdWUrIikiLHQpfSxodG1sOmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwiaW5uZXJIVE1MIiwiX3MoIit0LnZhbHVlKyIpIix0KX19LGlzUHJlVGFnOmZ1bmN0aW9uKGUpe3JldHVybiJwcmUiPT09ZX0saXNVbmFyeVRhZzpibyxtdXN0VXNlUHJvcDpqbixjYW5CZUxlZnRPcGVuVGFnOiRvLGlzUmVzZXJ2ZWRUYWc6V24sZ2V0VGFnTmFtZXNwYWNlOlpuLHN0YXRpY0tleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQuc3RhdGljS2V5c3x8W10pfSxbXSkuam9pbigiLCIpfShiYSl9LHhhPWcoZnVuY3Rpb24oZSl7cmV0dXJuIHAoInR5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwIisoZT8iLCIrZToiIikpfSk7ZnVuY3Rpb24ga2EoZSx0KXtlJiYoJGE9eGEodC5zdGF0aWNLZXlzfHwiIiksd2E9dC5pc1Jlc2VydmVkVGFnfHxULGZ1bmN0aW9uIGUodCl7dC5zdGF0aWM9ZnVuY3Rpb24oZSl7aWYoMj09PWUudHlwZSlyZXR1cm4hMTtpZigzPT09ZS50eXBlKXJldHVybiEwO3JldHVybiEoIWUucHJlJiYoZS5oYXNCaW5kaW5nc3x8ZS5pZnx8ZS5mb3J8fGQoZS50YWcpfHwhd2EoZS50YWcpfHxmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PShlPWUucGFyZW50KS50YWcpcmV0dXJuITE7aWYoZS5mb3IpcmV0dXJuITB9cmV0dXJuITF9KGUpfHwhT2JqZWN0LmtleXMoZSkuZXZlcnkoJGEpKSl9KHQpO2lmKDE9PT10LnR5cGUpe2lmKCF3YSh0LnRhZykmJiJzbG90IiE9PXQudGFnJiZudWxsPT10LmF0dHJzTWFwWyJpbmxpbmUtdGVtcGxhdGUiXSlyZXR1cm47Zm9yKHZhciBuPTAscj10LmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXt2YXIgaT10LmNoaWxkcmVuW25dO2UoaSksaS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBvPTEsYT10LmlmQ29uZGl0aW9ucy5sZW5ndGg7bzxhO28rKyl7dmFyIHM9dC5pZkNvbmRpdGlvbnNbb10uYmxvY2s7ZShzKSxzLnN0YXRpY3x8KHQuc3RhdGljPSExKX19fShlKSxmdW5jdGlvbiBlKHQsbil7aWYoMT09PXQudHlwZSl7aWYoKHQuc3RhdGljfHx0Lm9uY2UpJiYodC5zdGF0aWNJbkZvcj1uKSx0LnN0YXRpYyYmdC5jaGlsZHJlbi5sZW5ndGgmJigxIT09dC5jaGlsZHJlbi5sZW5ndGh8fDMhPT10LmNoaWxkcmVuWzBdLnR5cGUpKXJldHVybiB2b2lkKHQuc3RhdGljUm9vdD0hMCk7aWYodC5zdGF0aWNSb290PSExLHQuY2hpbGRyZW4pZm9yKHZhciByPTAsaT10LmNoaWxkcmVuLmxlbmd0aDtyPGk7cisrKWUodC5jaGlsZHJlbltyXSxufHwhIXQuZm9yKTtpZih0LmlmQ29uZGl0aW9ucylmb3IodmFyIG89MSxhPXQuaWZDb25kaXRpb25zLmxlbmd0aDtvPGE7bysrKWUodC5pZkNvbmRpdGlvbnNbb10uYmxvY2ssbil9fShlLCExKSl9dmFyIEFhPS9eKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb24oPzpccytbXHckXSspP1xzKlwoLyxPYT0vXChbXildKj9cKTsqJC8sU2E9L15bQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJ1teJ10qPyddfFxbIlteIl0qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSokLyxUYT17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxFYT17ZXNjOlsiRXNjIiwiRXNjYXBlIl0sdGFiOiJUYWIiLGVudGVyOiJFbnRlciIsc3BhY2U6WyIgIiwiU3BhY2ViYXIiXSx1cDpbIlVwIiwiQXJyb3dVcCJdLGxlZnQ6WyJMZWZ0IiwiQXJyb3dMZWZ0Il0scmlnaHQ6WyJSaWdodCIsIkFycm93UmlnaHQiXSxkb3duOlsiRG93biIsIkFycm93RG93biJdLGRlbGV0ZTpbIkJhY2tzcGFjZSIsIkRlbGV0ZSIsIkRlbCJdfSxOYT1mdW5jdGlvbihlKXtyZXR1cm4iaWYoIitlKyIpcmV0dXJuIG51bGw7In0samE9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpOYSgiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOk5hKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpOYSgiISRldmVudC5zaGlmdEtleSIpLGFsdDpOYSgiISRldmVudC5hbHRLZXkiKSxtZXRhOk5hKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0Ok5hKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX07ZnVuY3Rpb24gRGEoZSx0KXt2YXIgbj10PyJuYXRpdmVPbjoiOiJvbjoiLHI9IiIsaT0iIjtmb3IodmFyIG8gaW4gZSl7dmFyIGE9TGEoZVtvXSk7ZVtvXSYmZVtvXS5keW5hbWljP2krPW8rIiwiK2ErIiwiOnIrPSciJytvKyciOicrYSsiLCJ9cmV0dXJuIHI9InsiK3Iuc2xpY2UoMCwtMSkrIn0iLGk/bisiX2QoIityKyIsWyIraS5zbGljZSgwLC0xKSsiXSkiOm4rcn1mdW5jdGlvbiBMYShlKXtpZighZSlyZXR1cm4iZnVuY3Rpb24oKXt9IjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiJbIitlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTGEoZSl9KS5qb2luKCIsIikrIl0iO3ZhciB0PVNhLnRlc3QoZS52YWx1ZSksbj1BYS50ZXN0KGUudmFsdWUpLHI9U2EudGVzdChlLnZhbHVlLnJlcGxhY2UoT2EsIiIpKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylpZihqYVtzXSlvKz1qYVtzXSxUYVtzXSYmYS5wdXNoKHMpO2Vsc2UgaWYoImV4YWN0Ij09PXMpe3ZhciBjPWUubW9kaWZpZXJzO28rPU5hKFsiY3RybCIsInNoaWZ0IiwiYWx0IiwibWV0YSJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hY1tlXX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iJGV2ZW50LiIrZSsiS2V5In0pLmpvaW4oInx8IikpfWVsc2UgYS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPWZ1bmN0aW9uKGUpe3JldHVybiJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIrZS5tYXAoTWEpLmpvaW4oIiYmIikrIilyZXR1cm4gbnVsbDsifShhKSksbyYmKGkrPW8pLCJmdW5jdGlvbigkZXZlbnQpeyIraSsodD8icmV0dXJuICIrZS52YWx1ZSsiKCRldmVudCkiOm4/InJldHVybiAoIitlLnZhbHVlKyIpKCRldmVudCkiOnI/InJldHVybiAiK2UudmFsdWU6ZS52YWx1ZSkrIn0ifXJldHVybiB0fHxuP2UudmFsdWU6ImZ1bmN0aW9uKCRldmVudCl7Iisocj8icmV0dXJuICIrZS52YWx1ZTplLnZhbHVlKSsifSJ9ZnVuY3Rpb24gTWEoZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7aWYodClyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK3Q7dmFyIG49VGFbZV0scj1FYVtlXTtyZXR1cm4iX2soJGV2ZW50LmtleUNvZGUsIitKU09OLnN0cmluZ2lmeShlKSsiLCIrSlNPTi5zdHJpbmdpZnkobikrIiwkZXZlbnQua2V5LCIrSlNPTi5zdHJpbmdpZnkocikrIikifXZhciBJYT17b246ZnVuY3Rpb24oZSx0KXtlLndyYXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIl9nKCIrZSsiLCIrdC52YWx1ZSsiKSJ9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7ZS53cmFwRGF0YT1mdW5jdGlvbihuKXtyZXR1cm4iX2IoIituKyIsJyIrZS50YWcrIicsIit0LnZhbHVlKyIsIisodC5tb2RpZmllcnMmJnQubW9kaWZpZXJzLnByb3A/InRydWUiOiJmYWxzZSIpKyh0Lm1vZGlmaWVycyYmdC5tb2RpZmllcnMuc3luYz8iLHRydWUiOiIiKSsiKSJ9fSxjbG9hazpTfSxGYT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLndhcm49ZS53YXJufHxTcix0aGlzLnRyYW5zZm9ybXM9VHIoZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Db2RlIiksdGhpcy5kYXRhR2VuRm5zPVRyKGUubW9kdWxlcywiZ2VuRGF0YSIpLHRoaXMuZGlyZWN0aXZlcz1BKEEoe30sSWEpLGUuZGlyZWN0aXZlcyk7dmFyIHQ9ZS5pc1Jlc2VydmVkVGFnfHxUO3RoaXMubWF5YmVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNvbXBvbmVudHx8IXQoZS50YWcpfSx0aGlzLm9uY2VJZD0wLHRoaXMuc3RhdGljUmVuZGVyRm5zPVtdLHRoaXMucHJlPSExfTtmdW5jdGlvbiBQYShlLHQpe3ZhciBuPW5ldyBGYSh0KTtyZXR1cm57cmVuZGVyOiJ3aXRoKHRoaXMpe3JldHVybiAiKyhlP1JhKGUsbik6J19jKCJkaXYiKScpKyJ9IixzdGF0aWNSZW5kZXJGbnM6bi5zdGF0aWNSZW5kZXJGbnN9fWZ1bmN0aW9uIFJhKGUsdCl7aWYoZS5wYXJlbnQmJihlLnByZT1lLnByZXx8ZS5wYXJlbnQucHJlKSxlLnN0YXRpY1Jvb3QmJiFlLnN0YXRpY1Byb2Nlc3NlZClyZXR1cm4gSGEoZSx0KTtpZihlLm9uY2UmJiFlLm9uY2VQcm9jZXNzZWQpcmV0dXJuIEJhKGUsdCk7aWYoZS5mb3ImJiFlLmZvclByb2Nlc3NlZClyZXR1cm4gemEoZSx0KTtpZihlLmlmJiYhZS5pZlByb2Nlc3NlZClyZXR1cm4gVWEoZSx0KTtpZigidGVtcGxhdGUiIT09ZS50YWd8fGUuc2xvdFRhcmdldHx8dC5wcmUpe2lmKCJzbG90Ij09PWUudGFnKXJldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUuc2xvdE5hbWV8fCciZGVmYXVsdCInLHI9cWEoZSx0KSxpPSJfdCgiK24rKHI/IiwiK3I6IiIpLG89ZS5hdHRyc3x8ZS5keW5hbWljQXR0cnM/R2EoKGUuYXR0cnN8fFtdKS5jb25jYXQoZS5keW5hbWljQXR0cnN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6YihlLm5hbWUpLHZhbHVlOmUudmFsdWUsZHluYW1pYzplLmR5bmFtaWN9fSkpOm51bGwsYT1lLmF0dHJzTWFwWyJ2LWJpbmQiXTshbyYmIWF8fHJ8fChpKz0iLG51bGwiKTtvJiYoaSs9IiwiK28pO2EmJihpKz0obz8iIjoiLG51bGwiKSsiLCIrYSk7cmV0dXJuIGkrIikifShlLHQpO3ZhciBuO2lmKGUuY29tcG9uZW50KW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuaW5saW5lVGVtcGxhdGU/bnVsbDpxYSh0LG4sITApO3JldHVybiJfYygiK2UrIiwiK1ZhKHQsbikrKHI/IiwiK3I6IiIpKyIpIn0oZS5jb21wb25lbnQsZSx0KTtlbHNle3ZhciByOyghZS5wbGFpbnx8ZS5wcmUmJnQubWF5YmVDb21wb25lbnQoZSkpJiYocj1WYShlLHQpKTt2YXIgaT1lLmlubGluZVRlbXBsYXRlP251bGw6cWEoZSx0LCEwKTtuPSJfYygnIitlLnRhZysiJyIrKHI/IiwiK3I6IiIpKyhpPyIsIitpOiIiKSsiKSJ9Zm9yKHZhciBvPTA7bzx0LnRyYW5zZm9ybXMubGVuZ3RoO28rKyluPXQudHJhbnNmb3Jtc1tvXShlLG4pO3JldHVybiBufXJldHVybiBxYShlLHQpfHwidm9pZCAwIn1mdW5jdGlvbiBIYShlLHQpe2Uuc3RhdGljUHJvY2Vzc2VkPSEwO3ZhciBuPXQucHJlO3JldHVybiBlLnByZSYmKHQucHJlPWUucHJlKSx0LnN0YXRpY1JlbmRlckZucy5wdXNoKCJ3aXRoKHRoaXMpe3JldHVybiAiK1JhKGUsdCkrIn0iKSx0LnByZT1uLCJfbSgiKyh0LnN0YXRpY1JlbmRlckZucy5sZW5ndGgtMSkrKGUuc3RhdGljSW5Gb3I/Iix0cnVlIjoiIikrIikifWZ1bmN0aW9uIEJhKGUsdCl7aWYoZS5vbmNlUHJvY2Vzc2VkPSEwLGUuaWYmJiFlLmlmUHJvY2Vzc2VkKXJldHVybiBVYShlLHQpO2lmKGUuc3RhdGljSW5Gb3Ipe2Zvcih2YXIgbj0iIixyPWUucGFyZW50O3I7KXtpZihyLmZvcil7bj1yLmtleTticmVha31yPXIucGFyZW50fXJldHVybiBuPyJfbygiK1JhKGUsdCkrIiwiK3Qub25jZUlkKysrIiwiK24rIikiOlJhKGUsdCl9cmV0dXJuIEhhKGUsdCl9ZnVuY3Rpb24gVWEoZSx0LG4scil7cmV0dXJuIGUuaWZQcm9jZXNzZWQ9ITAsZnVuY3Rpb24gZSh0LG4scixpKXtpZighdC5sZW5ndGgpcmV0dXJuIGl8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2Eoby5ibG9jaykrIjoiK2UodCxuLHIsaSk6IiIrYShvLmJsb2NrKTtmdW5jdGlvbiBhKGUpe3JldHVybiByP3IoZSxuKTplLm9uY2U/QmEoZSxuKTpSYShlLG4pfX0oZS5pZkNvbmRpdGlvbnMuc2xpY2UoKSx0LG4scil9ZnVuY3Rpb24gemEoZSx0LG4scil7dmFyIGk9ZS5mb3Isbz1lLmFsaWFzLGE9ZS5pdGVyYXRvcjE/IiwiK2UuaXRlcmF0b3IxOiIiLHM9ZS5pdGVyYXRvcjI/IiwiK2UuaXRlcmF0b3IyOiIiO3JldHVybiBlLmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fFJhKShlLHQpKyJ9KSJ9ZnVuY3Rpb24gVmEoZSx0KXt2YXIgbj0ieyIscj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlyZWN0aXZlcztpZighbilyZXR1cm47dmFyIHIsaSxvLGEscz0iZGlyZWN0aXZlczpbIixjPSExO2ZvcihyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXtvPW5bcl0sYT0hMDt2YXIgdT10LmRpcmVjdGl2ZXNbby5uYW1lXTt1JiYoYT0hIXUoZSxvLHQud2FybikpLGEmJihjPSEwLHMrPSd7bmFtZToiJytvLm5hbWUrJyIscmF3TmFtZToiJytvLnJhd05hbWUrJyInKyhvLnZhbHVlPyIsdmFsdWU6KCIrby52YWx1ZSsiKSxleHByZXNzaW9uOiIrSlNPTi5zdHJpbmdpZnkoby52YWx1ZSk6IiIpKyhvLmFyZz8iLGFyZzoiKyhvLmlzRHluYW1pY0FyZz9vLmFyZzonIicrby5hcmcrJyInKToiIikrKG8ubW9kaWZpZXJzPyIsbW9kaWZpZXJzOiIrSlNPTi5zdHJpbmdpZnkoby5tb2RpZmllcnMpOiIiKSsifSwiKX1pZihjKXJldHVybiBzLnNsaWNlKDAsLTEpKyJdIn0oZSx0KTtyJiYobis9cisiLCIpLGUua2V5JiYobis9ImtleToiK2Uua2V5KyIsIiksZS5yZWYmJihuKz0icmVmOiIrZS5yZWYrIiwiKSxlLnJlZkluRm9yJiYobis9InJlZkluRm9yOnRydWUsIiksZS5wcmUmJihuKz0icHJlOnRydWUsIiksZS5jb21wb25lbnQmJihuKz0ndGFnOiInK2UudGFnKyciLCcpO2Zvcih2YXIgaT0wO2k8dC5kYXRhR2VuRm5zLmxlbmd0aDtpKyspbis9dC5kYXRhR2VuRm5zW2ldKGUpO2lmKGUuYXR0cnMmJihuKz0iYXR0cnM6IitHYShlLmF0dHJzKSsiLCIpLGUucHJvcHMmJihuKz0iZG9tUHJvcHM6IitHYShlLnByb3BzKSsiLCIpLGUuZXZlbnRzJiYobis9RGEoZS5ldmVudHMsITEpKyIsIiksZS5uYXRpdmVFdmVudHMmJihuKz1EYShlLm5hdGl2ZUV2ZW50cywhMCkrIiwiKSxlLnNsb3RUYXJnZXQmJiFlLnNsb3RTY29wZSYmKG4rPSJzbG90OiIrZS5zbG90VGFyZ2V0KyIsIiksZS5zY29wZWRTbG90cyYmKG4rPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmZvcnx8T2JqZWN0LmtleXModCkuc29tZShmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLnNsb3RUYXJnZXREeW5hbWljfHxuLmlmfHxuLmZvcnx8S2Eobil9KSxpPSEhZS5pZjtpZighcilmb3IodmFyIG89ZS5wYXJlbnQ7bzspe2lmKG8uc2xvdFNjb3BlJiZvLnNsb3RTY29wZSE9PWNhfHxvLmZvcil7cj0hMDticmVha31vLmlmJiYoaT0hMCksbz1vLnBhcmVudH12YXIgYT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEphKHRbZV0sbil9KS5qb2luKCIsIik7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK2ErIl0iKyhyPyIsbnVsbCx0cnVlIjoiIikrKCFyJiZpPyIsbnVsbCxmYWxzZSwiK2Z1bmN0aW9uKGUpe3ZhciB0PTUzODEsbj1lLmxlbmd0aDtmb3IoO247KXQ9MzMqdF5lLmNoYXJDb2RlQXQoLS1uKTtyZXR1cm4gdD4+PjB9KGEpOiIiKSsiKSJ9KGUsZS5zY29wZWRTbG90cyx0KSsiLCIpLGUubW9kZWwmJihuKz0ibW9kZWw6e3ZhbHVlOiIrZS5tb2RlbC52YWx1ZSsiLGNhbGxiYWNrOiIrZS5tb2RlbC5jYWxsYmFjaysiLGV4cHJlc3Npb246IitlLm1vZGVsLmV4cHJlc3Npb24rIn0sIiksZS5pbmxpbmVUZW1wbGF0ZSl7dmFyIG89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoaWxkcmVuWzBdO2lmKG4mJjE9PT1uLnR5cGUpe3ZhciByPVBhKG4sdC5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24oKXsiK2UrIn0ifSkuam9pbigiLCIpKyJdfSJ9fShlLHQpO28mJihuKz1vKyIsIil9cmV0dXJuIG49bi5yZXBsYWNlKC8sJC8sIiIpKyJ9IixlLmR5bmFtaWNBdHRycyYmKG49Il9iKCIrbisnLCInK2UudGFnKyciLCcrR2EoZS5keW5hbWljQXR0cnMpKyIpIiksZS53cmFwRGF0YSYmKG49ZS53cmFwRGF0YShuKSksZS53cmFwTGlzdGVuZXJzJiYobj1lLndyYXBMaXN0ZW5lcnMobikpLG59ZnVuY3Rpb24gS2EoZSl7cmV0dXJuIDE9PT1lLnR5cGUmJigic2xvdCI9PT1lLnRhZ3x8ZS5jaGlsZHJlbi5zb21lKEthKSl9ZnVuY3Rpb24gSmEoZSx0KXt2YXIgbj1lLmF0dHJzTWFwWyJzbG90LXNjb3BlIl07aWYoZS5pZiYmIWUuaWZQcm9jZXNzZWQmJiFuKXJldHVybiBVYShlLHQsSmEsIm51bGwiKTtpZihlLmZvciYmIWUuZm9yUHJvY2Vzc2VkKXJldHVybiB6YShlLHQsSmEpO3ZhciByPWUuc2xvdFNjb3BlPT09Y2E/IiI6U3RyaW5nKGUuc2xvdFNjb3BlKSxpPSJmdW5jdGlvbigiK3IrIil7cmV0dXJuICIrKCJ0ZW1wbGF0ZSI9PT1lLnRhZz9lLmlmJiZuPyIoIitlLmlmKyIpPyIrKHFhKGUsdCl8fCJ1bmRlZmluZWQiKSsiOnVuZGVmaW5lZCI6cWEoZSx0KXx8InVuZGVmaW5lZCI6UmEoZSx0KSkrIn0iLG89cj8iIjoiLHByb3h5OnRydWUiO3JldHVybiJ7a2V5OiIrKGUuc2xvdFRhcmdldHx8JyJkZWZhdWx0IicpKyIsZm46IitpK28rIn0ifWZ1bmN0aW9uIHFhKGUsdCxuLHIsaSl7dmFyIG89ZS5jaGlsZHJlbjtpZihvLmxlbmd0aCl7dmFyIGE9b1swXTtpZigxPT09by5sZW5ndGgmJmEuZm9yJiYidGVtcGxhdGUiIT09YS50YWcmJiJzbG90IiE9PWEudGFnKXt2YXIgcz1uP3QubWF5YmVDb21wb25lbnQoYSk/IiwxIjoiLDAiOiIiO3JldHVybiIiKyhyfHxSYSkoYSx0KStzfXZhciBjPW4/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYoMT09PWkudHlwZSl7aWYoV2EoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBXYShlLmJsb2NrKX0pKXtuPTI7YnJlYWt9KHQoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUuYmxvY2spfSkpJiYobj0xKX19cmV0dXJuIG59KG8sdC5tYXliZUNvbXBvbmVudCk6MCx1PWl8fFphO3JldHVybiJbIitvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdShlLHQpfSkuam9pbigiLCIpKyJdIisoYz8iLCIrYzoiIil9fWZ1bmN0aW9uIFdhKGUpe3JldHVybiB2b2lkIDAhPT1lLmZvcnx8InRlbXBsYXRlIj09PWUudGFnfHwic2xvdCI9PT1lLnRhZ31mdW5jdGlvbiBaYShlLHQpe3JldHVybiAxPT09ZS50eXBlP1JhKGUsdCk6Mz09PWUudHlwZSYmZS5pc0NvbW1lbnQ/KHI9ZSwiX2UoIitKU09OLnN0cmluZ2lmeShyLnRleHQpKyIpIik6Il92KCIrKDI9PT0obj1lKS50eXBlP24uZXhwcmVzc2lvbjpYYShKU09OLnN0cmluZ2lmeShuLnRleHQpKSkrIikiO3ZhciBuLHJ9ZnVuY3Rpb24gR2EoZSl7Zm9yKHZhciB0PSIiLG49IiIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89WGEoaS52YWx1ZSk7aS5keW5hbWljP24rPWkubmFtZSsiLCIrbysiLCI6dCs9JyInK2kubmFtZSsnIjonK28rIiwifXJldHVybiB0PSJ7Iit0LnNsaWNlKDAsLTEpKyJ9IixuPyJfZCgiK3QrIixbIituLnNsaWNlKDAsLTEpKyJdKSI6dH1mdW5jdGlvbiBYYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cdTIwMjgvZywiXFx1MjAyOCIpLnJlcGxhY2UoL1x1MjAyOS9nLCJcXHUyMDI5Iil9bmV3IFJlZ0V4cCgiXFxiIisiZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCxzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cyIuc3BsaXQoIiwiKS5qb2luKCJcXGJ8XFxiIikrIlxcYiIpO2Z1bmN0aW9uIFlhKGUsdCl7dHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oZSl9Y2F0Y2gobil7cmV0dXJuIHQucHVzaCh7ZXJyOm4sY29kZTplfSksU319ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obixyLGkpeyhyPUEoe30scikpLndhcm47ZGVsZXRlIHIud2Fybjt2YXIgbz1yLmRlbGltaXRlcnM/U3RyaW5nKHIuZGVsaW1pdGVycykrbjpuO2lmKHRbb10pcmV0dXJuIHRbb107dmFyIGE9ZShuLHIpLHM9e30sYz1bXTtyZXR1cm4gcy5yZW5kZXI9WWEoYS5yZW5kZXIsYykscy5zdGF0aWNSZW5kZXJGbnM9YS5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBZYShlLGMpfSksdFtvXT1zfX12YXIgZXMsdHMsbnM9KGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49bGEoZS50cmltKCksdCk7ITEhPT10Lm9wdGltaXplJiZrYShuLHQpO3ZhciByPVBhKG4sdCk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9T2JqZWN0LmNyZWF0ZShlKSxpPVtdLG89W107aWYobilmb3IodmFyIGEgaW4gbi5tb2R1bGVzJiYoci5tb2R1bGVzPShlLm1vZHVsZXN8fFtdKS5jb25jYXQobi5tb2R1bGVzKSksbi5kaXJlY3RpdmVzJiYoci5kaXJlY3RpdmVzPUEoT2JqZWN0LmNyZWF0ZShlLmRpcmVjdGl2ZXN8fG51bGwpLG4uZGlyZWN0aXZlcykpLG4pIm1vZHVsZXMiIT09YSYmImRpcmVjdGl2ZXMiIT09YSYmKHJbYV09blthXSk7ci53YXJuPWZ1bmN0aW9uKGUsdCxuKXsobj9vOmkpLnB1c2goZSl9O3ZhciBzPWVzKHQudHJpbSgpLHIpO3JldHVybiBzLmVycm9ycz1pLHMudGlwcz1vLHN9cmV0dXJue2NvbXBpbGU6dCxjb21waWxlVG9GdW5jdGlvbnM6UWEodCl9fSkoQ2EpLHJzPShucy5jb21waWxlLG5zLmNvbXBpbGVUb0Z1bmN0aW9ucyk7ZnVuY3Rpb24gaXMoZSl7cmV0dXJuKHRzPXRzfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWU/JzxhIGhyZWY9IlxuIi8+JzonPGRpdiBhPSJcbiIvPicsdHMuaW5uZXJIVE1MLmluZGV4T2YoIiYjMTA7Iik+MH12YXIgb3M9ISF6JiZpcyghMSksYXM9ISF6JiZpcyghMCksc3M9ZyhmdW5jdGlvbihlKXt2YXIgdD1ZbihlKTtyZXR1cm4gdCYmdC5pbm5lckhUTUx9KSxjcz13bi5wcm90b3R5cGUuJG1vdW50O3JldHVybiB3bi5wcm90b3R5cGUuJG1vdW50PWZ1bmN0aW9uKGUsdCl7aWYoKGU9ZSYmWW4oZSkpPT09ZG9jdW1lbnQuYm9keXx8ZT09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudClyZXR1cm4gdGhpczt2YXIgbj10aGlzLiRvcHRpb25zO2lmKCFuLnJlbmRlcil7dmFyIHI9bi50ZW1wbGF0ZTtpZihyKWlmKCJzdHJpbmciPT10eXBlb2YgcikiIyI9PT1yLmNoYXJBdCgwKSYmKHI9c3MocikpO2Vsc2V7aWYoIXIubm9kZVR5cGUpcmV0dXJuIHRoaXM7cj1yLmlubmVySFRNTH1lbHNlIGUmJihyPWZ1bmN0aW9uKGUpe2lmKGUub3V0ZXJIVE1MKXJldHVybiBlLm91dGVySFRNTDt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpLHQuaW5uZXJIVE1MfShlKSk7aWYocil7dmFyIGk9cnMocix7b3V0cHV0U291cmNlUmFuZ2U6ITEsc2hvdWxkRGVjb2RlTmV3bGluZXM6b3Msc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOmFzLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiBjcy5jYWxsKHRoaXMsZSx0KX0sd24uY29tcGlsZT1ycyx3bn0pOw=="},{"meta":{"name":"vue.min.js","url":"https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js","ts":1642048881225,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjEyCiAqIChjKSAyMDE0LTIwMjAgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVnVlPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG51bGwhPWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4hMD09PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8InN5bWJvbCI9PXR5cGVvZiBlfHwiYm9vbGVhbiI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKGUpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKGUpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9cGFyc2VGbG9hdChTdHJpbmcoZSkpO3JldHVybiB0Pj0wJiZNYXRoLmZsb29yKHQpPT09dCYmaXNGaW5pdGUoZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gbihlKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2F0Y2h9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbnVsbD09ZT8iIjpBcnJheS5pc0FycmF5KGUpfHxzKGUpJiZlLnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeShlLG51bGwsMik6U3RyaW5nKGUpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCk/ZTp0fWZ1bmN0aW9uIHAoZSx0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPWUuc3BsaXQoIiwiKSxpPTA7aTxyLmxlbmd0aDtpKyspbltyW2ldXT0hMDtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbihlKXtyZXR1cm4gbltlXX19dmFyIGQ9cCgic2xvdCxjb21wb25lbnQiLCEwKSx2PXAoImtleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUubGVuZ3RoKXt2YXIgbj1lLmluZGV4T2YodCk7aWYobj4tMSlyZXR1cm4gZS5zcGxpY2UobiwxKX19dmFyIG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiB5KGUsdCl7cmV0dXJuIG0uY2FsbChlLHQpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHRbbl18fCh0W25dPWUobikpfX12YXIgXz0vLShcdykvZyxiPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShfLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dC50b1VwcGVyQ2FzZSgpOiIifSl9KSwkPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLHc9L1xCKFtBLVpdKS9nLEM9ZyhmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKHcsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgeD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihlLHQpe3JldHVybiBlLmJpbmQodCl9OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO3JldHVybiByP3I+MT9lLmFwcGx5KHQsYXJndW1lbnRzKTplLmNhbGwodCxuKTplLmNhbGwodCl9cmV0dXJuIG4uX2xlbmd0aD1lLmxlbmd0aCxufTtmdW5jdGlvbiBrKGUsdCl7dD10fHwwO2Zvcih2YXIgbj1lLmxlbmd0aC10LHI9bmV3IEFycmF5KG4pO24tLTspcltuXT1lW24rdF07cmV0dXJuIHJ9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBPKGUpe2Zvcih2YXIgdD17fSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXSYmQSh0LGVbbl0pO3JldHVybiB0fWZ1bmN0aW9uIFMoZSx0LG4pe312YXIgVD1mdW5jdGlvbihlLHQsbil7cmV0dXJuITF9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Z1bmN0aW9uIE4oZSx0KXtpZihlPT09dClyZXR1cm4hMDt2YXIgbj1vKGUpLHI9byh0KTtpZighbnx8IXIpcmV0dXJuIW4mJiFyJiZTdHJpbmcoZSk9PT1TdHJpbmcodCk7dHJ5e3ZhciBpPUFycmF5LmlzQXJyYXkoZSksYT1BcnJheS5pc0FycmF5KHQpO2lmKGkmJmEpcmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTihlLHRbbl0pfSk7aWYoZSBpbnN0YW5jZW9mIERhdGUmJnQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXMoZSksYz1PYmplY3Qua2V5cyh0KTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gTihlW25dLHRbbl0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGooZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihOKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gRChlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXZhciBMPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIsTT1bImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsImZpbHRlciJdLEk9WyJiZWZvcmVDcmVhdGUiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCJdLEY9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzpULGlzUmVzZXJ2ZWRBdHRyOlQsaXNVbmtub3duRWxlbWVudDpULGdldFRhZ05hbWVzcGFjZTpTLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkUsbXVzdFVzZVByb3A6VCxhc3luYzohMCxfbGlmZWN5Y2xlSG9va3M6SX0sUD0vYS16QS1aXHUwMEI3XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMzdEXHUwMzdGLVx1MUZGRlx1MjAwQy1cdTIwMERcdTIwM0YtXHUyMDQwXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkQvO2Z1bmN0aW9uIFIoZSx0LG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgSD1uZXcgUmVnRXhwKCJbXiIrUC5zb3VyY2UrIi4kX1xcZF0iKTt2YXIgQixVPSJfX3Byb3RvX18iaW57fSx6PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LFY9InVuZGVmaW5lZCIhPXR5cGVvZiBXWEVudmlyb25tZW50JiYhIVdYRW52aXJvbm1lbnQucGxhdGZvcm0sSz1WJiZXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksSj16JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHE9SiYmL21zaWV8dHJpZGVudC8udGVzdChKKSxXPUomJkouaW5kZXhPZigibXNpZSA5LjAiKT4wLFo9SiYmSi5pbmRleE9mKCJlZGdlLyIpPjAsRz0oSiYmSi5pbmRleE9mKCJhbmRyb2lkIiksSiYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KEopfHwiaW9zIj09PUspLFg9KEomJi9jaHJvbWVcL1xkKy8udGVzdChKKSxKJiYvcGhhbnRvbWpzLy50ZXN0KEopLEomJkoubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykpLFk9e30ud2F0Y2gsUT0hMTtpZih6KXRyeXt2YXIgZWU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGVlLCJwYXNzaXZlIix7Z2V0OmZ1bmN0aW9uKCl7UT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLGVlKX1jYXRjaChlKXt9dmFyIHRlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUImJihCPSF6JiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLEJ9LG5lPXomJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIHJlKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYvbmF0aXZlIGNvZGUvLnRlc3QoZS50b1N0cmluZygpKX12YXIgaWUsb2U9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnJlKFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmcmUoUmVmbGVjdC5vd25LZXlzKTtpZT0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmcmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09dGhpcy5zZXRbZV19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLnNldFtlXT0hMH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSxlfSgpO3ZhciBhZT1TLHNlPTAsY2U9ZnVuY3Rpb24oKXt0aGlzLmlkPXNlKyssdGhpcy5zdWJzPVtdfTtjZS5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKGUpe3RoaXMuc3Vicy5wdXNoKGUpfSxjZS5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKGUpe2godGhpcy5zdWJzLGUpfSxjZS5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Y2UudGFyZ2V0JiZjZS50YXJnZXQuYWRkRGVwKHRoaXMpfSxjZS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc3Vicy5zbGljZSgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspZVt0XS51cGRhdGUoKX0sY2UudGFyZ2V0PW51bGw7dmFyIHVlPVtdO2Z1bmN0aW9uIGxlKGUpe3VlLnB1c2goZSksY2UudGFyZ2V0PWV9ZnVuY3Rpb24gZmUoKXt1ZS5wb3AoKSxjZS50YXJnZXQ9dWVbdWUubGVuZ3RoLTFdfXZhciBwZT1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe3RoaXMudGFnPWUsdGhpcy5kYXRhPXQsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9dCYmdC5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZGU9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtkZS5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGUucHJvdG90eXBlLGRlKTt2YXIgdmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB0PW5ldyBwZTtyZXR1cm4gdC50ZXh0PWUsdC5pc0NvbW1lbnQ9ITAsdH07ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIG5ldyBwZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcoZSkpfWZ1bmN0aW9uIG1lKGUpe3ZhciB0PW5ldyBwZShlLnRhZyxlLmRhdGEsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5zbGljZSgpLGUudGV4dCxlLmVsbSxlLmNvbnRleHQsZS5jb21wb25lbnRPcHRpb25zLGUuYXN5bmNGYWN0b3J5KTtyZXR1cm4gdC5ucz1lLm5zLHQuaXNTdGF0aWM9ZS5pc1N0YXRpYyx0LmtleT1lLmtleSx0LmlzQ29tbWVudD1lLmlzQ29tbWVudCx0LmZuQ29udGV4dD1lLmZuQ29udGV4dCx0LmZuT3B0aW9ucz1lLmZuT3B0aW9ucyx0LmZuU2NvcGVJZD1lLmZuU2NvcGVJZCx0LmFzeW5jTWV0YT1lLmFzeW5jTWV0YSx0LmlzQ2xvbmVkPSEwLHR9dmFyIHllPUFycmF5LnByb3RvdHlwZSxnZT1PYmplY3QuY3JlYXRlKHllKTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9eWVbZV07UihnZSxlLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBpLG89dC5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKGUpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjppPW47YnJlYWs7Y2FzZSJzcGxpY2UiOmk9bi5zbGljZSgyKX1yZXR1cm4gaSYmYS5vYnNlcnZlQXJyYXkoaSksYS5kZXAubm90aWZ5KCksb30pfSk7dmFyIF9lPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdlKSxiZT0hMDtmdW5jdGlvbiAkZShlKXtiZT1lfXZhciB3ZT1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnZhbHVlPWUsdGhpcy5kZXA9bmV3IGNlLHRoaXMudm1Db3VudD0wLFIoZSwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KGUpPyhVPyh0PWdlLGUuX19wcm90b19fPXQpOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07UihlLG8sdFtvXSl9fShlLGdlLF9lKSx0aGlzLm9ic2VydmVBcnJheShlKSk6dGhpcy53YWxrKGUpfTtmdW5jdGlvbiBDZShlLHQpe3ZhciBuO2lmKG8oZSkmJiEoZSBpbnN0YW5jZW9mIHBlKSlyZXR1cm4geShlLCJfX29iX18iKSYmZS5fX29iX18gaW5zdGFuY2VvZiB3ZT9uPWUuX19vYl9fOmJlJiYhdGUoKSYmKEFycmF5LmlzQXJyYXkoZSl8fHMoZSkpJiZPYmplY3QuaXNFeHRlbnNpYmxlKGUpJiYhZS5faXNWdWUmJihuPW5ldyB3ZShlKSksdCYmbiYmbi52bUNvdW50Kyssbn1mdW5jdGlvbiB4ZShlLHQsbixyLGkpe3ZhciBvPW5ldyBjZSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZighYXx8ITEhPT1hLmNvbmZpZ3VyYWJsZSl7dmFyIHM9YSYmYS5nZXQsYz1hJiZhLnNldDtzJiYhY3x8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fChuPWVbdF0pO3ZhciB1PSFpJiZDZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1zP3MuY2FsbChlKTpuO3JldHVybiBjZS50YXJnZXQmJihvLmRlcGVuZCgpLHUmJih1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KHQpJiZmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj12b2lkIDAscj0wLGk9dC5sZW5ndGg7cjxpO3IrKykobj10W3JdKSYmbi5fX29iX18mJm4uX19vYl9fLmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KG4pJiZlKG4pfSh0KSkpLHR9LHNldDpmdW5jdGlvbih0KXt2YXIgcj1zP3MuY2FsbChlKTpuO3Q9PT1yfHx0IT10JiZyIT1yfHxzJiYhY3x8KGM/Yy5jYWxsKGUsdCk6bj10LHU9IWkmJkNlKHQpLG8ubm90aWZ5KCkpfX0pfX1mdW5jdGlvbiBrZShlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSYmYyh0KSlyZXR1cm4gZS5sZW5ndGg9TWF0aC5tYXgoZS5sZW5ndGgsdCksZS5zcGxpY2UodCwxLG4pLG47aWYodCBpbiBlJiYhKHQgaW4gT2JqZWN0LnByb3RvdHlwZSkpcmV0dXJuIGVbdF09bixuO3ZhciByPWUuX19vYl9fO3JldHVybiBlLl9pc1Z1ZXx8ciYmci52bUNvdW50P246cj8oeGUoci52YWx1ZSx0LG4pLHIuZGVwLm5vdGlmeSgpLG4pOihlW3RdPW4sbil9ZnVuY3Rpb24gQWUoZSx0KXtpZihBcnJheS5pc0FycmF5KGUpJiZjKHQpKWUuc3BsaWNlKHQsMSk7ZWxzZXt2YXIgbj1lLl9fb2JfXztlLl9pc1Z1ZXx8biYmbi52bUNvdW50fHx5KGUsdCkmJihkZWxldGUgZVt0XSxuJiZuLmRlcC5ub3RpZnkoKSl9fXdlLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspeGUoZSx0W25dKX0sd2UucHJvdG90eXBlLm9ic2VydmVBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspQ2UoZVt0XSl9O3ZhciBPZT1GLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBTZShlLHQpe2lmKCF0KXJldHVybiBlO2Zvcih2YXIgbixyLGksbz1vZT9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksYT0wO2E8by5sZW5ndGg7YSsrKSJfX29iX18iIT09KG49b1thXSkmJihyPWVbbl0saT10W25dLHkoZSxuKT9yIT09aSYmcyhyKSYmcyhpKSYmU2UocixpKTprZShlLG4saSkpO3JldHVybiBlfWZ1bmN0aW9uIFRlKGUsdCxuKXtyZXR1cm4gbj9mdW5jdGlvbigpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQsaT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwobixuKTplO3JldHVybiByP1NlKHIsaSk6aX06dD9lP2Z1bmN0aW9uKCl7cmV0dXJuIFNlKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbCh0aGlzLHRoaXMpOnQsImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSl9OnQ6ZX1mdW5jdGlvbiBFZShlLHQpe3ZhciBuPXQ/ZT9lLmNvbmNhdCh0KTpBcnJheS5pc0FycmF5KHQpP3Q6W3RdOmU7cmV0dXJuIG4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyktMT09PXQuaW5kZXhPZihlW25dKSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fShuKTpufWZ1bmN0aW9uIE5lKGUsdCxuLHIpe3ZhciBpPU9iamVjdC5jcmVhdGUoZXx8bnVsbCk7cmV0dXJuIHQ/QShpLHQpOml9T2UuZGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/VGUoZSx0LG4pOnQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6VGUoZSx0KX0sSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2VdPUVlfSksTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2UrInMiXT1OZX0pLE9lLndhdGNoPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKGU9PT1ZJiYoZT12b2lkIDApLHQ9PT1ZJiYodD12b2lkIDApLCF0KXJldHVybiBPYmplY3QuY3JlYXRlKGV8fG51bGwpO2lmKCFlKXJldHVybiB0O3ZhciBpPXt9O2Zvcih2YXIgbyBpbiBBKGksZSksdCl7dmFyIGE9aVtvXSxzPXRbb107YSYmIUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSksaVtvXT1hP2EuY29uY2F0KHMpOkFycmF5LmlzQXJyYXkocyk/czpbc119cmV0dXJuIGl9LE9lLnByb3BzPU9lLm1ldGhvZHM9T2UuaW5qZWN0PU9lLmNvbXB1dGVkPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIEEoaSxlKSx0JiZBKGksdCksaX0sT2UucHJvdmlkZT1UZTt2YXIgamU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9O2Z1bmN0aW9uIERlKGUsdCxuKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9dC5vcHRpb25zKSxmdW5jdGlvbihlLHQpe3ZhciBuPWUucHJvcHM7aWYobil7dmFyIHIsaSxvPXt9O2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHI9bi5sZW5ndGg7ci0tOykic3RyaW5nIj09dHlwZW9mKGk9bltyXSkmJihvW2IoaSldPXt0eXBlOm51bGx9KTtlbHNlIGlmKHMobikpZm9yKHZhciBhIGluIG4paT1uW2FdLG9bYihhKV09cyhpKT9pOnt0eXBlOml9O2UucHJvcHM9b319KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5pbmplY3Q7aWYobil7dmFyIHI9ZS5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKylyW25baV1dPXtmcm9tOm5baV19O2Vsc2UgaWYocyhuKSlmb3IodmFyIG8gaW4gbil7dmFyIGE9bltvXTtyW29dPXMoYSk/QSh7ZnJvbTpvfSxhKTp7ZnJvbTphfX19fSh0KSxmdW5jdGlvbihlKXt2YXIgdD1lLmRpcmVjdGl2ZXM7aWYodClmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmKHRbbl09e2JpbmQ6cix1cGRhdGU6cn0pfX0odCksIXQuX2Jhc2UmJih0LmV4dGVuZHMmJihlPURlKGUsdC5leHRlbmRzLG4pKSx0Lm1peGlucykpZm9yKHZhciByPTAsaT10Lm1peGlucy5sZW5ndGg7cjxpO3IrKyllPURlKGUsdC5taXhpbnNbcl0sbik7dmFyIG8sYT17fTtmb3IobyBpbiBlKWMobyk7Zm9yKG8gaW4gdCl5KGUsbyl8fGMobyk7ZnVuY3Rpb24gYyhyKXt2YXIgaT1PZVtyXXx8amU7YVtyXT1pKGVbcl0sdFtyXSxuLHIpfXJldHVybiBhfWZ1bmN0aW9uIExlKGUsdCxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGk9ZVt0XTtpZih5KGksbikpcmV0dXJuIGlbbl07dmFyIG89YihuKTtpZih5KGksbykpcmV0dXJuIGlbb107dmFyIGE9JChvKTtyZXR1cm4geShpLGEpP2lbYV06aVtuXXx8aVtvXXx8aVthXX19ZnVuY3Rpb24gTWUoZSx0LG4scil7dmFyIGk9dFtlXSxvPSF5KG4sZSksYT1uW2VdLHM9UGUoQm9vbGVhbixpLnR5cGUpO2lmKHM+LTEpaWYobyYmIXkoaSwiZGVmYXVsdCIpKWE9ITE7ZWxzZSBpZigiIj09PWF8fGE9PT1DKGUpKXt2YXIgYz1QZShTdHJpbmcsaS50eXBlKTsoYzwwfHxzPGMpJiYoYT0hMCl9aWYodm9pZCAwPT09YSl7YT1mdW5jdGlvbihlLHQsbil7aWYoIXkodCwiZGVmYXVsdCIpKXJldHVybjt2YXIgcj10LmRlZmF1bHQ7aWYoZSYmZS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PWUuJG9wdGlvbnMucHJvcHNEYXRhW25dJiZ2b2lkIDAhPT1lLl9wcm9wc1tuXSlyZXR1cm4gZS5fcHJvcHNbbl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJiJGdW5jdGlvbiIhPT1JZSh0LnR5cGUpP3IuY2FsbChlKTpyfShyLGksZSk7dmFyIHU9YmU7JGUoITApLENlKGEpLCRlKHUpfXJldHVybiBhfWZ1bmN0aW9uIEllKGUpe3ZhciB0PWUmJmUudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIHQ/dFsxXToiIn1mdW5jdGlvbiBGZShlLHQpe3JldHVybiBJZShlKT09PUllKHQpfWZ1bmN0aW9uIFBlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEZlKHQsZSk/MDotMTtmb3IodmFyIG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoRmUodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBSZShlLHQsbil7bGUoKTt0cnl7aWYodClmb3IodmFyIHI9dDtyPXIuJHBhcmVudDspe3ZhciBpPXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXRyeXtpZighMT09PWlbb10uY2FsbChyLGUsdCxuKSlyZXR1cm59Y2F0Y2goZSl7QmUoZSxyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19QmUoZSx0LG4pfWZpbmFsbHl7ZmUoKX19ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgbzt0cnl7KG89bj9lLmFwcGx5KHQsbik6ZS5jYWxsKHQpKSYmIW8uX2lzVnVlJiZ1KG8pJiYhby5faGFuZGxlZCYmKG8uY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFJlKGUscixpKyIgKFByb21pc2UvYXN5bmMpIil9KSxvLl9oYW5kbGVkPSEwKX1jYXRjaChlKXtSZShlLHIsaSl9cmV0dXJuIG99ZnVuY3Rpb24gQmUoZSx0LG4pe2lmKEYuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gRi5lcnJvckhhbmRsZXIuY2FsbChudWxsLGUsdCxuKX1jYXRjaCh0KXt0IT09ZSYmVWUodCxudWxsLCJjb25maWcuZXJyb3JIYW5kbGVyIil9VWUoZSx0LG4pfWZ1bmN0aW9uIFVlKGUsdCxuKXtpZigheiYmIVZ8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZSl0aHJvdyBlO2NvbnNvbGUuZXJyb3IoZSl9dmFyIHplLFZlPSExLEtlPVtdLEplPSExO2Z1bmN0aW9uIHFlKCl7SmU9ITE7dmFyIGU9S2Uuc2xpY2UoMCk7S2UubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmcmUoUHJvbWlzZSkpe3ZhciBXZT1Qcm9taXNlLnJlc29sdmUoKTt6ZT1mdW5jdGlvbigpe1dlLnRoZW4ocWUpLEcmJnNldFRpbWVvdXQoUyl9LFZlPSEwfWVsc2UgaWYocXx8InVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwhcmUoTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKXplPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZyZShzZXRJbW1lZGlhdGUpP2Z1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHFlKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHFlLDApfTtlbHNle3ZhciBaZT0xLEdlPW5ldyBNdXRhdGlvbk9ic2VydmVyKHFlKSxYZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShTdHJpbmcoWmUpKTtHZS5vYnNlcnZlKFhlLHtjaGFyYWN0ZXJEYXRhOiEwfSksemU9ZnVuY3Rpb24oKXtaZT0oWmUrMSklMixYZS5kYXRhPVN0cmluZyhaZSl9LFZlPSEwfWZ1bmN0aW9uIFllKGUsdCl7dmFyIG47aWYoS2UucHVzaChmdW5jdGlvbigpe2lmKGUpdHJ5e2UuY2FsbCh0KX1jYXRjaChlKXtSZShlLHQsIm5leHRUaWNrIil9ZWxzZSBuJiZuKHQpfSksSmV8fChKZT0hMCx6ZSgpKSwhZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuPWV9KX12YXIgUWU9bmV3IGllO2Z1bmN0aW9uIGV0KGUpeyFmdW5jdGlvbiBlKHQsbil7dmFyIHIsaTt2YXIgYT1BcnJheS5pc0FycmF5KHQpO2lmKCFhJiYhbyh0KXx8T2JqZWN0LmlzRnJvemVuKHQpfHx0IGluc3RhbmNlb2YgcGUpcmV0dXJuO2lmKHQuX19vYl9fKXt2YXIgcz10Ll9fb2JfXy5kZXAuaWQ7aWYobi5oYXMocykpcmV0dXJuO24uYWRkKHMpfWlmKGEpZm9yKHI9dC5sZW5ndGg7ci0tOyllKHRbcl0sbik7ZWxzZSBmb3IoaT1PYmplY3Qua2V5cyh0KSxyPWkubGVuZ3RoO3ItLTspZSh0W2lbcl1dLG4pfShlLFFlKSxRZS5jbGVhcigpfXZhciB0dD1nKGZ1bmN0aW9uKGUpe3ZhciB0PSImIj09PWUuY2hhckF0KDApLG49In4iPT09KGU9dD9lLnNsaWNlKDEpOmUpLmNoYXJBdCgwKSxyPSIhIj09PShlPW4/ZS5zbGljZSgxKTplKS5jaGFyQXQoMCk7cmV0dXJue25hbWU6ZT1yP2Uuc2xpY2UoMSk6ZSxvbmNlOm4sY2FwdHVyZTpyLHBhc3NpdmU6dH19KTtmdW5jdGlvbiBudChlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZT1hcmd1bWVudHMscj1uLmZucztpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gSGUocixudWxsLGFyZ3VtZW50cyx0LCJ2LW9uIGhhbmRsZXIiKTtmb3IodmFyIGk9ci5zbGljZSgpLG89MDtvPGkubGVuZ3RoO28rKylIZShpW29dLG51bGwsZSx0LCJ2LW9uIGhhbmRsZXIiKX1yZXR1cm4gbi5mbnM9ZSxufWZ1bmN0aW9uIHJ0KGUsbixpLG8sYSxzKXt2YXIgYyx1LGwsZjtmb3IoYyBpbiBlKXU9ZVtjXSxsPW5bY10sZj10dChjKSx0KHUpfHwodChsKT8odCh1LmZucykmJih1PWVbY109bnQodSxzKSkscihmLm9uY2UpJiYodT1lW2NdPWEoZi5uYW1lLHUsZi5jYXB0dXJlKSksaShmLm5hbWUsdSxmLmNhcHR1cmUsZi5wYXNzaXZlLGYucGFyYW1zKSk6dSE9PWwmJihsLmZucz11LGVbY109bCkpO2ZvcihjIGluIG4pdChlW2NdKSYmbygoZj10dChjKSkubmFtZSxuW2NdLGYuY2FwdHVyZSl9ZnVuY3Rpb24gaXQoZSxpLG8pe3ZhciBhO2UgaW5zdGFuY2VvZiBwZSYmKGU9ZS5kYXRhLmhvb2t8fChlLmRhdGEuaG9vaz17fSkpO3ZhciBzPWVbaV07ZnVuY3Rpb24gYygpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLGgoYS5mbnMsYyl9dChzKT9hPW50KFtjXSk6bihzLmZucykmJnIocy5tZXJnZWQpPyhhPXMpLmZucy5wdXNoKGMpOmE9bnQoW3MsY10pLGEubWVyZ2VkPSEwLGVbaV09YX1mdW5jdGlvbiBvdChlLHQscixpLG8pe2lmKG4odCkpe2lmKHkodCxyKSlyZXR1cm4gZVtyXT10W3JdLG98fGRlbGV0ZSB0W3JdLCEwO2lmKHkodCxpKSlyZXR1cm4gZVtyXT10W2ldLG98fGRlbGV0ZSB0W2ldLCEwfXJldHVybiExfWZ1bmN0aW9uIGF0KGUpe3JldHVybiBpKGUpP1toZShlKV06QXJyYXkuaXNBcnJheShlKT9mdW5jdGlvbiBlKG8sYSl7dmFyIHM9W107dmFyIGMsdSxsLGY7Zm9yKGM9MDtjPG8ubGVuZ3RoO2MrKyl0KHU9b1tjXSl8fCJib29sZWFuIj09dHlwZW9mIHV8fChsPXMubGVuZ3RoLTEsZj1zW2xdLEFycmF5LmlzQXJyYXkodSk/dS5sZW5ndGg+MCYmKHN0KCh1PWUodSwoYXx8IiIpKyJfIitjKSlbMF0pJiZzdChmKSYmKHNbbF09aGUoZi50ZXh0K3VbMF0udGV4dCksdS5zaGlmdCgpKSxzLnB1c2guYXBwbHkocyx1KSk6aSh1KT9zdChmKT9zW2xdPWhlKGYudGV4dCt1KToiIiE9PXUmJnMucHVzaChoZSh1KSk6c3QodSkmJnN0KGYpP3NbbF09aGUoZi50ZXh0K3UudGV4dCk6KHIoby5faXNWTGlzdCkmJm4odS50YWcpJiZ0KHUua2V5KSYmbihhKSYmKHUua2V5PSJfX3ZsaXN0IithKyJfIitjKyJfXyIpLHMucHVzaCh1KSkpO3JldHVybiBzfShlKTp2b2lkIDB9ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIG4oZSkmJm4oZS50ZXh0KSYmITE9PT1lLmlzQ29tbWVudH1mdW5jdGlvbiBjdChlLHQpe2lmKGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9b2U/UmVmbGVjdC5vd25LZXlzKGUpOk9iamVjdC5rZXlzKGUpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTtpZigiX19vYl9fIiE9PW8pe2Zvcih2YXIgYT1lW29dLmZyb20scz10O3M7KXtpZihzLl9wcm92aWRlZCYmeShzLl9wcm92aWRlZCxhKSl7bltvXT1zLl9wcm92aWRlZFthXTticmVha31zPXMuJHBhcmVudH1pZighcyYmImRlZmF1bHQiaW4gZVtvXSl7dmFyIGM9ZVtvXS5kZWZhdWx0O25bb109ImZ1bmN0aW9uIj09dHlwZW9mIGM/Yy5jYWxsKHQpOmN9fX1yZXR1cm4gbn19ZnVuY3Rpb24gdXQoZSx0KXtpZighZXx8IWUubGVuZ3RoKXJldHVybnt9O2Zvcih2YXIgbj17fSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLGE9by5kYXRhO2lmKGEmJmEuYXR0cnMmJmEuYXR0cnMuc2xvdCYmZGVsZXRlIGEuYXR0cnMuc2xvdCxvLmNvbnRleHQhPT10JiZvLmZuQ29udGV4dCE9PXR8fCFhfHxudWxsPT1hLnNsb3QpKG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1bXSkpLnB1c2gobyk7ZWxzZXt2YXIgcz1hLnNsb3QsYz1uW3NdfHwobltzXT1bXSk7InRlbXBsYXRlIj09PW8udGFnP2MucHVzaC5hcHBseShjLG8uY2hpbGRyZW58fFtdKTpjLnB1c2gobyl9fWZvcih2YXIgdSBpbiBuKW5bdV0uZXZlcnkobHQpJiZkZWxldGUgblt1XTtyZXR1cm4gbn1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJiFlLmFzeW5jRmFjdG9yeXx8IiAiPT09ZS50ZXh0fWZ1bmN0aW9uIGZ0KHQsbixyKXt2YXIgaSxvPU9iamVjdC5rZXlzKG4pLmxlbmd0aD4wLGE9dD8hIXQuJHN0YWJsZTohbyxzPXQmJnQuJGtleTtpZih0KXtpZih0Ll9ub3JtYWxpemVkKXJldHVybiB0Ll9ub3JtYWxpemVkO2lmKGEmJnImJnIhPT1lJiZzPT09ci4ka2V5JiYhbyYmIXIuJGhhc05vcm1hbClyZXR1cm4gcjtmb3IodmFyIGMgaW4gaT17fSx0KXRbY10mJiIkIiE9PWNbMF0mJihpW2NdPXB0KG4sYyx0W2NdKSl9ZWxzZSBpPXt9O2Zvcih2YXIgdSBpbiBuKXUgaW4gaXx8KGlbdV09ZHQobix1KSk7cmV0dXJuIHQmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJih0Ll9ub3JtYWxpemVkPWkpLFIoaSwiJHN0YWJsZSIsYSksUihpLCIka2V5IixzKSxSKGksIiRoYXNOb3JtYWwiLG8pLGl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD9uLmFwcGx5KG51bGwsYXJndW1lbnRzKTpuKHt9KTtyZXR1cm4oZT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpP1tlXTphdChlKSkmJigwPT09ZS5sZW5ndGh8fDE9PT1lLmxlbmd0aCYmZVswXS5pc0NvbW1lbnQpP3ZvaWQgMDplfTtyZXR1cm4gbi5wcm94eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfWZ1bmN0aW9uIGR0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGVbdF19fWZ1bmN0aW9uIHZ0KGUsdCl7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KGUpfHwic3RyaW5nIj09dHlwZW9mIGUpZm9yKHI9bmV3IEFycmF5KGUubGVuZ3RoKSxpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKXJbaV09dChlW2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBlKWZvcihyPW5ldyBBcnJheShlKSxpPTA7aTxlO2krKylyW2ldPXQoaSsxLGkpO2Vsc2UgaWYobyhlKSlpZihvZSYmZVtTeW1ib2wuaXRlcmF0b3JdKXtyPVtdO2Zvcih2YXIgdT1lW1N5bWJvbC5pdGVyYXRvcl0oKSxsPXUubmV4dCgpOyFsLmRvbmU7KXIucHVzaCh0KGwudmFsdWUsci5sZW5ndGgpKSxsPXUubmV4dCgpfWVsc2UgZm9yKHM9T2JqZWN0LmtleXMoZSkscj1uZXcgQXJyYXkocy5sZW5ndGgpLGk9MCxhPXMubGVuZ3RoO2k8YTtpKyspYz1zW2ldLHJbaV09dChlW2NdLGMsaSk7cmV0dXJuIG4ocil8fChyPVtdKSxyLl9pc1ZMaXN0PSEwLHJ9ZnVuY3Rpb24gaHQoZSx0LG4scil7dmFyIGksbz10aGlzLiRzY29wZWRTbG90c1tlXTtvPyhuPW58fHt9LHImJihuPUEoQSh7fSxyKSxuKSksaT1vKG4pfHx0KTppPXRoaXMuJHNsb3RzW2VdfHx0O3ZhciBhPW4mJm4uc2xvdDtyZXR1cm4gYT90aGlzLiRjcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIse3Nsb3Q6YX0saSk6aX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gTGUodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsZSl8fEV9ZnVuY3Rpb24geXQoZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT8tMT09PWUuaW5kZXhPZih0KTplIT09dH1mdW5jdGlvbiBndChlLHQsbixyLGkpe3ZhciBvPUYua2V5Q29kZXNbdF18fG47cmV0dXJuIGkmJnImJiFGLmtleUNvZGVzW3RdP3l0KGkscik6bz95dChvLGUpOnI/QyhyKSE9PXQ6dm9pZCAwfWZ1bmN0aW9uIF90KGUsdCxuLHIsaSl7aWYobilpZihvKG4pKXt2YXIgYTtBcnJheS5pc0FycmF5KG4pJiYobj1PKG4pKTt2YXIgcz1mdW5jdGlvbihvKXtpZigiY2xhc3MiPT09b3x8InN0eWxlIj09PW98fHYobykpYT1lO2Vsc2V7dmFyIHM9ZS5hdHRycyYmZS5hdHRycy50eXBlO2E9cnx8Ri5tdXN0VXNlUHJvcCh0LHMsbyk/ZS5kb21Qcm9wc3x8KGUuZG9tUHJvcHM9e30pOmUuYXR0cnN8fChlLmF0dHJzPXt9KX12YXIgYz1iKG8pLHU9QyhvKTtjIGluIGF8fHUgaW4gYXx8KGFbb109bltvXSxpJiYoKGUub258fChlLm9uPXt9KSlbInVwZGF0ZToiK29dPWZ1bmN0aW9uKGUpe25bb109ZX0pKX07Zm9yKHZhciBjIGluIG4pcyhjKX1lbHNlO3JldHVybiBlfWZ1bmN0aW9uIGJ0KGUsdCl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXN8fCh0aGlzLl9zdGF0aWNUcmVlcz1bXSkscj1uW2VdO3JldHVybiByJiYhdD9yOih3dChyPW5bZV09dGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbZV0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitlLCExKSxyKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIHd0KGUsIl9fb25jZV9fIit0KyhuPyJfIituOiIiKSwhMCksZX1mdW5jdGlvbiB3dChlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdJiYic3RyaW5nIiE9dHlwZW9mIGVbcl0mJkN0KGVbcl0sdCsiXyIrcixuKTtlbHNlIEN0KGUsdCxuKX1mdW5jdGlvbiBDdChlLHQsbil7ZS5pc1N0YXRpYz0hMCxlLmtleT10LGUuaXNPbmNlPW59ZnVuY3Rpb24geHQoZSx0KXtpZih0KWlmKHModCkpe3ZhciBuPWUub249ZS5vbj9BKHt9LGUub24pOnt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaT1uW3JdLG89dFtyXTtuW3JdPWk/W10uY29uY2F0KGksbyk6b319ZWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBrdChlLHQsbixyKXt0PXR8fHskc3RhYmxlOiFufTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXTtBcnJheS5pc0FycmF5KG8pP2t0KG8sdCxuKTpvJiYoby5wcm94eSYmKG8uZm4ucHJveHk9ITApLHRbby5rZXldPW8uZm4pfXJldHVybiByJiYodC4ka2V5PXIpLHR9ZnVuY3Rpb24gQXQoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRbbl07InN0cmluZyI9PXR5cGVvZiByJiZyJiYoZVt0W25dXT10W24rMV0pfXJldHVybiBlfWZ1bmN0aW9uIE90KGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3QrZTplfWZ1bmN0aW9uIFN0KGUpe2UuX289JHQsZS5fbj1mLGUuX3M9bCxlLl9sPXZ0LGUuX3Q9aHQsZS5fcT1OLGUuX2k9aixlLl9tPWJ0LGUuX2Y9bXQsZS5faz1ndCxlLl9iPV90LGUuX3Y9aGUsZS5fZT12ZSxlLl91PWt0LGUuX2c9eHQsZS5fZD1BdCxlLl9wPU90fWZ1bmN0aW9uIFR0KHQsbixpLG8sYSl7dmFyIHMsYz10aGlzLHU9YS5vcHRpb25zO3kobywiX3VpZCIpPyhzPU9iamVjdC5jcmVhdGUobykpLl9vcmlnaW5hbD1vOihzPW8sbz1vLl9vcmlnaW5hbCk7dmFyIGw9cih1Ll9jb21waWxlZCksZj0hbDt0aGlzLmRhdGE9dCx0aGlzLnByb3BzPW4sdGhpcy5jaGlsZHJlbj1pLHRoaXMucGFyZW50PW8sdGhpcy5saXN0ZW5lcnM9dC5vbnx8ZSx0aGlzLmluamVjdGlvbnM9Y3QodS5pbmplY3QsbyksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiBjLiRzbG90c3x8ZnQodC5zY29wZWRTbG90cyxjLiRzbG90cz11dChpLG8pKSxjLiRzbG90c30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInNjb3BlZFNsb3RzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnQodC5zY29wZWRTbG90cyx0aGlzLnNsb3RzKCkpfX0pLGwmJih0aGlzLiRvcHRpb25zPXUsdGhpcy4kc2xvdHM9dGhpcy5zbG90cygpLHRoaXMuJHNjb3BlZFNsb3RzPWZ0KHQuc2NvcGVkU2xvdHMsdGhpcy4kc2xvdHMpKSx1Ll9zY29wZUlkP3RoaXMuX2M9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9UHQocyxlLHQsbixyLGYpO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGkuZm5TY29wZUlkPXUuX3Njb3BlSWQsaS5mbkNvbnRleHQ9byksaX06dGhpcy5fYz1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gUHQocyxlLHQsbixyLGYpfX1mdW5jdGlvbiBFdChlLHQsbixyLGkpe3ZhciBvPW1lKGUpO3JldHVybiBvLmZuQ29udGV4dD1uLG8uZm5PcHRpb25zPXIsdC5zbG90JiYoKG8uZGF0YXx8KG8uZGF0YT17fSkpLnNsb3Q9dC5zbG90KSxvfWZ1bmN0aW9uIE50KGUsdCl7Zm9yKHZhciBuIGluIHQpZVtiKG4pXT10W25dfVN0KFR0LnByb3RvdHlwZSk7dmFyIGp0PXtpbml0OmZ1bmN0aW9uKGUsdCl7aWYoZS5jb21wb25lbnRJbnN0YW5jZSYmIWUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZlLmRhdGEua2VlcEFsaXZlKXt2YXIgcj1lO2p0LnByZXBhdGNoKHIscil9ZWxzZXsoZS5jb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXtfaXNDb21wb25lbnQ6ITAsX3BhcmVudFZub2RlOmUscGFyZW50OnR9LGk9ZS5kYXRhLmlubGluZVRlbXBsYXRlO24oaSkmJihyLnJlbmRlcj1pLnJlbmRlcixyLnN0YXRpY1JlbmRlckZucz1pLnN0YXRpY1JlbmRlckZucyk7cmV0dXJuIG5ldyBlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihyKX0oZSxXdCkpLiRtb3VudCh0P2UuZWxtOnZvaWQgMCx0KX19LHByZXBhdGNoOmZ1bmN0aW9uKHQsbil7dmFyIHI9bi5jb21wb25lbnRPcHRpb25zOyFmdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPWkuZGF0YS5zY29wZWRTbG90cyxzPXQuJHNjb3BlZFNsb3RzLGM9ISEoYSYmIWEuJHN0YWJsZXx8cyE9PWUmJiFzLiRzdGFibGV8fGEmJnQuJHNjb3BlZFNsb3RzLiRrZXkhPT1hLiRrZXkpLHU9ISEob3x8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fGMpO3QuJG9wdGlvbnMuX3BhcmVudFZub2RlPWksdC4kdm5vZGU9aSx0Ll92bm9kZSYmKHQuX3Zub2RlLnBhcmVudD1pKTtpZih0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1vLHQuJGF0dHJzPWkuZGF0YS5hdHRyc3x8ZSx0LiRsaXN0ZW5lcnM9cnx8ZSxuJiZ0LiRvcHRpb25zLnByb3BzKXskZSghMSk7Zm9yKHZhciBsPXQuX3Byb3BzLGY9dC4kb3B0aW9ucy5fcHJvcEtleXN8fFtdLHA9MDtwPGYubGVuZ3RoO3ArKyl7dmFyIGQ9ZltwXSx2PXQuJG9wdGlvbnMucHJvcHM7bFtkXT1NZShkLHYsbix0KX0kZSghMCksdC4kb3B0aW9ucy5wcm9wc0RhdGE9bn1yPXJ8fGU7dmFyIGg9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1yLHF0KHQscixoKSx1JiYodC4kc2xvdHM9dXQobyxpLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfShuLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usci5wcm9wc0RhdGEsci5saXN0ZW5lcnMsbixyLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5jb250ZXh0LHI9ZS5jb21wb25lbnRJbnN0YW5jZTtyLl9pc01vdW50ZWR8fChyLl9pc01vdW50ZWQ9ITAsWXQociwibW91bnRlZCIpKSxlLmRhdGEua2VlcEFsaXZlJiYobi5faXNNb3VudGVkPygodD1yKS5faW5hY3RpdmU9ITEsZW4ucHVzaCh0KSk6WHQociwhMCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcG9uZW50SW5zdGFuY2U7dC5faXNEZXN0cm95ZWR8fChlLmRhdGEua2VlcEFsaXZlP2Z1bmN0aW9uIGUodCxuKXtpZihuJiYodC5fZGlyZWN0SW5hY3RpdmU9ITAsR3QodCkpKXJldHVybjtpZighdC5faW5hY3RpdmUpe3QuX2luYWN0aXZlPSEwO2Zvcih2YXIgcj0wO3I8dC4kY2hpbGRyZW4ubGVuZ3RoO3IrKyllKHQuJGNoaWxkcmVuW3JdKTtZdCh0LCJkZWFjdGl2YXRlZCIpfX0odCwhMCk6dC4kZGVzdHJveSgpKX19LER0PU9iamVjdC5rZXlzKGp0KTtmdW5jdGlvbiBMdChpLGEscyxjLGwpe2lmKCF0KGkpKXt2YXIgZj1zLiRvcHRpb25zLl9iYXNlO2lmKG8oaSkmJihpPWYuZXh0ZW5kKGkpKSwiZnVuY3Rpb24iPT10eXBlb2YgaSl7dmFyIHA7aWYodChpLmNpZCkmJnZvaWQgMD09PShpPWZ1bmN0aW9uKGUsaSl7aWYocihlLmVycm9yKSYmbihlLmVycm9yQ29tcCkpcmV0dXJuIGUuZXJyb3JDb21wO2lmKG4oZS5yZXNvbHZlZCkpcmV0dXJuIGUucmVzb2x2ZWQ7dmFyIGE9SHQ7YSYmbihlLm93bmVycykmJi0xPT09ZS5vd25lcnMuaW5kZXhPZihhKSYmZS5vd25lcnMucHVzaChhKTtpZihyKGUubG9hZGluZykmJm4oZS5sb2FkaW5nQ29tcCkpcmV0dXJuIGUubG9hZGluZ0NvbXA7aWYoYSYmIW4oZS5vd25lcnMpKXt2YXIgcz1lLm93bmVycz1bYV0sYz0hMCxsPW51bGwsZj1udWxsO2EuJG9uKCJob29rOmRlc3Ryb3llZCIsZnVuY3Rpb24oKXtyZXR1cm4gaChzLGEpfSk7dmFyIHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1zLmxlbmd0aDt0PG47dCsrKXNbdF0uJGZvcmNlVXBkYXRlKCk7ZSYmKHMubGVuZ3RoPTAsbnVsbCE9PWwmJihjbGVhclRpbWVvdXQobCksbD1udWxsKSxudWxsIT09ZiYmKGNsZWFyVGltZW91dChmKSxmPW51bGwpKX0sZD1EKGZ1bmN0aW9uKHQpe2UucmVzb2x2ZWQ9QnQodCxpKSxjP3MubGVuZ3RoPTA6cCghMCl9KSx2PUQoZnVuY3Rpb24odCl7bihlLmVycm9yQ29tcCkmJihlLmVycm9yPSEwLHAoITApKX0pLG09ZShkLHYpO3JldHVybiBvKG0pJiYodShtKT90KGUucmVzb2x2ZWQpJiZtLnRoZW4oZCx2KTp1KG0uY29tcG9uZW50KSYmKG0uY29tcG9uZW50LnRoZW4oZCx2KSxuKG0uZXJyb3IpJiYoZS5lcnJvckNvbXA9QnQobS5lcnJvcixpKSksbihtLmxvYWRpbmcpJiYoZS5sb2FkaW5nQ29tcD1CdChtLmxvYWRpbmcsaSksMD09PW0uZGVsYXk/ZS5sb2FkaW5nPSEwOmw9c2V0VGltZW91dChmdW5jdGlvbigpe2w9bnVsbCx0KGUucmVzb2x2ZWQpJiZ0KGUuZXJyb3IpJiYoZS5sb2FkaW5nPSEwLHAoITEpKX0sbS5kZWxheXx8MjAwKSksbihtLnRpbWVvdXQpJiYoZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLHQoZS5yZXNvbHZlZCkmJnYobnVsbCl9LG0udGltZW91dCkpKSksYz0hMSxlLmxvYWRpbmc/ZS5sb2FkaW5nQ29tcDplLnJlc29sdmVkfX0ocD1pLGYpKSlyZXR1cm4gZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz12ZSgpO3JldHVybiBvLmFzeW5jRmFjdG9yeT1lLG8uYXN5bmNNZXRhPXtkYXRhOnQsY29udGV4dDpuLGNoaWxkcmVuOnIsdGFnOml9LG99KHAsYSxzLGMsbCk7YT1hfHx7fSwkbihpKSxuKGEubW9kZWwpJiZmdW5jdGlvbihlLHQpe3ZhciByPWUubW9kZWwmJmUubW9kZWwucHJvcHx8InZhbHVlIixpPWUubW9kZWwmJmUubW9kZWwuZXZlbnR8fCJpbnB1dCI7KHQuYXR0cnN8fCh0LmF0dHJzPXt9KSlbcl09dC5tb2RlbC52YWx1ZTt2YXIgbz10Lm9ufHwodC5vbj17fSksYT1vW2ldLHM9dC5tb2RlbC5jYWxsYmFjaztuKGEpPyhBcnJheS5pc0FycmF5KGEpPy0xPT09YS5pbmRleE9mKHMpOmEhPT1zKSYmKG9baV09W3NdLmNvbmNhdChhKSk6b1tpXT1zfShpLm9wdGlvbnMsYSk7dmFyIGQ9ZnVuY3Rpb24oZSxyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1lLmF0dHJzLGM9ZS5wcm9wcztpZihuKHMpfHxuKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1DKHUpO290KGEsYyx1LGwsITApfHxvdChhLHMsdSxsLCExKX1yZXR1cm4gYX19KGEsaSk7aWYocihpLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIGZ1bmN0aW9uKHQscixpLG8sYSl7dmFyIHM9dC5vcHRpb25zLGM9e30sdT1zLnByb3BzO2lmKG4odSkpZm9yKHZhciBsIGluIHUpY1tsXT1NZShsLHUscnx8ZSk7ZWxzZSBuKGkuYXR0cnMpJiZOdChjLGkuYXR0cnMpLG4oaS5wcm9wcykmJk50KGMsaS5wcm9wcyk7dmFyIGY9bmV3IFR0KGksYyxhLG8sdCkscD1zLnJlbmRlci5jYWxsKG51bGwsZi5fYyxmKTtpZihwIGluc3RhbmNlb2YgcGUpcmV0dXJuIEV0KHAsaSxmLnBhcmVudCxzKTtpZihBcnJheS5pc0FycmF5KHApKXtmb3IodmFyIGQ9YXQocCl8fFtdLHY9bmV3IEFycmF5KGQubGVuZ3RoKSxoPTA7aDxkLmxlbmd0aDtoKyspdltoXT1FdChkW2hdLGksZi5wYXJlbnQscyk7cmV0dXJuIHZ9fShpLGQsYSxzLGMpO3ZhciB2PWEub247aWYoYS5vbj1hLm5hdGl2ZU9uLHIoaS5vcHRpb25zLmFic3RyYWN0KSl7dmFyIG09YS5zbG90O2E9e30sbSYmKGEuc2xvdD1tKX0hZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuaG9va3x8KGUuaG9vaz17fSksbj0wO248RHQubGVuZ3RoO24rKyl7dmFyIHI9RHRbbl0saT10W3JdLG89anRbcl07aT09PW98fGkmJmkuX21lcmdlZHx8KHRbcl09aT9NdChvLGkpOm8pfX0oYSk7dmFyIHk9aS5vcHRpb25zLm5hbWV8fGw7cmV0dXJuIG5ldyBwZSgidnVlLWNvbXBvbmVudC0iK2kuY2lkKyh5PyItIit5OiIiKSxhLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHMse0N0b3I6aSxwcm9wc0RhdGE6ZCxsaXN0ZW5lcnM6dix0YWc6bCxjaGlsZHJlbjpjfSxwKX19fWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49ZnVuY3Rpb24obixyKXtlKG4sciksdChuLHIpfTtyZXR1cm4gbi5fbWVyZ2VkPSEwLG59dmFyIEl0PTEsRnQ9MjtmdW5jdGlvbiBQdChlLGEscyxjLHUsbCl7cmV0dXJuKEFycmF5LmlzQXJyYXkocyl8fGkocykpJiYodT1jLGM9cyxzPXZvaWQgMCkscihsKSYmKHU9RnQpLGZ1bmN0aW9uKGUsaSxhLHMsYyl7aWYobihhKSYmbihhLl9fb2JfXykpcmV0dXJuIHZlKCk7bihhKSYmbihhLmlzKSYmKGk9YS5pcyk7aWYoIWkpcmV0dXJuIHZlKCk7QXJyYXkuaXNBcnJheShzKSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbMF0mJigoYT1hfHx7fSkuc2NvcGVkU2xvdHM9e2RlZmF1bHQ6c1swXX0scy5sZW5ndGg9MCk7Yz09PUZ0P3M9YXQocyk6Yz09PUl0JiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihBcnJheS5pc0FycmF5KGVbdF0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGUpO3JldHVybiBlfShzKSk7dmFyIHUsbDtpZigic3RyaW5nIj09dHlwZW9mIGkpe3ZhciBmO2w9ZS4kdm5vZGUmJmUuJHZub2RlLm5zfHxGLmdldFRhZ05hbWVzcGFjZShpKSx1PUYuaXNSZXNlcnZlZFRhZyhpKT9uZXcgcGUoRi5wYXJzZVBsYXRmb3JtVGFnTmFtZShpKSxhLHMsdm9pZCAwLHZvaWQgMCxlKTphJiZhLnByZXx8IW4oZj1MZShlLiRvcHRpb25zLCJjb21wb25lbnRzIixpKSk/bmV3IHBlKGksYSxzLHZvaWQgMCx2b2lkIDAsZSk6THQoZixhLGUscyxpKX1lbHNlIHU9THQoaSxhLGUscyk7cmV0dXJuIEFycmF5LmlzQXJyYXkodSk/dTpuKHUpPyhuKGwpJiZmdW5jdGlvbiBlKGksbyxhKXtpLm5zPW87ImZvcmVpZ25PYmplY3QiPT09aS50YWcmJihvPXZvaWQgMCxhPSEwKTtpZihuKGkuY2hpbGRyZW4pKWZvcih2YXIgcz0wLGM9aS5jaGlsZHJlbi5sZW5ndGg7czxjO3MrKyl7dmFyIHU9aS5jaGlsZHJlbltzXTtuKHUudGFnKSYmKHQodS5ucyl8fHIoYSkmJiJzdmciIT09dS50YWcpJiZlKHUsbyxhKX19KHUsbCksbihhKSYmZnVuY3Rpb24oZSl7byhlLnN0eWxlKSYmZXQoZS5zdHlsZSk7byhlLmNsYXNzKSYmZXQoZS5jbGFzcyl9KGEpLHUpOnZlKCl9KGUsYSxzLGMsdSl9dmFyIFJ0LEh0PW51bGw7ZnVuY3Rpb24gQnQoZSx0KXtyZXR1cm4oZS5fX2VzTW9kdWxlfHxvZSYmIk1vZHVsZSI9PT1lW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYoZT1lLmRlZmF1bHQpLG8oZSk/dC5leHRlbmQoZSk6ZX1mdW5jdGlvbiBVdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJmUuYXN5bmNGYWN0b3J5fWZ1bmN0aW9uIHp0KGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07aWYobihyKSYmKG4oci5jb21wb25lbnRPcHRpb25zKXx8VXQocikpKXJldHVybiByfX1mdW5jdGlvbiBWdChlLHQpe1J0LiRvbihlLHQpfWZ1bmN0aW9uIEt0KGUsdCl7UnQuJG9mZihlLHQpfWZ1bmN0aW9uIEp0KGUsdCl7dmFyIG49UnQ7cmV0dXJuIGZ1bmN0aW9uIHIoKXtudWxsIT09dC5hcHBseShudWxsLGFyZ3VtZW50cykmJm4uJG9mZihlLHIpfX1mdW5jdGlvbiBxdChlLHQsbil7UnQ9ZSxydCh0LG58fHt9LFZ0LEt0LEp0LGUpLFJ0PXZvaWQgMH12YXIgV3Q9bnVsbDtmdW5jdGlvbiBadChlKXt2YXIgdD1XdDtyZXR1cm4gV3Q9ZSxmdW5jdGlvbigpe1d0PXR9fWZ1bmN0aW9uIEd0KGUpe2Zvcig7ZSYmKGU9ZS4kcGFyZW50KTspaWYoZS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWHQoZSx0KXtpZih0KXtpZihlLl9kaXJlY3RJbmFjdGl2ZT0hMSxHdChlKSlyZXR1cm59ZWxzZSBpZihlLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYoZS5faW5hY3RpdmV8fG51bGw9PT1lLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjxlLiRjaGlsZHJlbi5sZW5ndGg7bisrKVh0KGUuJGNoaWxkcmVuW25dKTtZdChlLCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24gWXQoZSx0KXtsZSgpO3ZhciBuPWUuJG9wdGlvbnNbdF0scj10KyIgaG9vayI7aWYobilmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspSGUobltpXSxlLG51bGwsZSxyKTtlLl9oYXNIb29rRXZlbnQmJmUuJGVtaXQoImhvb2s6Iit0KSxmZSgpfXZhciBRdD1bXSxlbj1bXSx0bj17fSxubj0hMSxybj0hMSxvbj0wO3ZhciBhbj0wLHNuPURhdGUubm93O2lmKHomJiFxKXt2YXIgY249d2luZG93LnBlcmZvcm1hbmNlO2NuJiYiZnVuY3Rpb24iPT10eXBlb2YgY24ubm93JiZzbigpPmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLnRpbWVTdGFtcCYmKHNuPWZ1bmN0aW9uKCl7cmV0dXJuIGNuLm5vdygpfSl9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0O2Zvcihhbj1zbigpLHJuPSEwLFF0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pZC10LmlkfSksb249MDtvbjxRdC5sZW5ndGg7b24rKykoZT1RdFtvbl0pLmJlZm9yZSYmZS5iZWZvcmUoKSx0PWUuaWQsdG5bdF09bnVsbCxlLnJ1bigpO3ZhciBuPWVuLnNsaWNlKCkscj1RdC5zbGljZSgpO29uPVF0Lmxlbmd0aD1lbi5sZW5ndGg9MCx0bj17fSxubj1ybj0hMSxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLl9pbmFjdGl2ZT0hMCxYdChlW3RdLCEwKX0obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7Zm9yKDt0LS07KXt2YXIgbj1lW3RdLHI9bi52bTtyLl93YXRjaGVyPT09biYmci5faXNNb3VudGVkJiYhci5faXNEZXN0cm95ZWQmJll0KHIsInVwZGF0ZWQiKX19KHIpLG5lJiZGLmRldnRvb2xzJiZuZS5lbWl0KCJmbHVzaCIpfXZhciBsbj0wLGZuPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dGhpcy52bT1lLGkmJihlLl93YXRjaGVyPXRoaXMpLGUuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jLHRoaXMuYmVmb3JlPXIuYmVmb3JlKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kytsbix0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBpZSx0aGlzLm5ld0RlcElkcz1uZXcgaWUsdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P3RoaXMuZ2V0dGVyPXQ6KHRoaXMuZ2V0dGVyPWZ1bmN0aW9uKGUpe2lmKCFILnRlc3QoZSkpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2lmKCFlKXJldHVybjtlPWVbdFtuXV19cmV0dXJuIGV9fX0odCksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1TKSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O2ZuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtsZSh0aGlzKTt2YXIgdD10aGlzLnZtO3RyeXtlPXRoaXMuZ2V0dGVyLmNhbGwodCx0KX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7UmUoZSx0LCdnZXR0ZXIgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZmluYWxseXt0aGlzLmRlZXAmJmV0KGUpLGZlKCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiBlfSxmbi5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQ7dGhpcy5uZXdEZXBJZHMuaGFzKHQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKHQpLHRoaXMubmV3RGVwcy5wdXNoKGUpLHRoaXMuZGVwSWRzLmhhcyh0KXx8ZS5hZGRTdWIodGhpcykpfSxmbi5wcm90b3R5cGUuY2xlYW51cERlcHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5kZXBzLmxlbmd0aDtlLS07KXt2YXIgdD10aGlzLmRlcHNbZV07dGhpcy5uZXdEZXBJZHMuaGFzKHQuaWQpfHx0LnJlbW92ZVN1Yih0aGlzKX12YXIgbj10aGlzLmRlcElkczt0aGlzLmRlcElkcz10aGlzLm5ld0RlcElkcyx0aGlzLm5ld0RlcElkcz1uLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksbj10aGlzLmRlcHMsdGhpcy5kZXBzPXRoaXMubmV3RGVwcyx0aGlzLm5ld0RlcHM9bix0aGlzLm5ld0RlcHMubGVuZ3RoPTB9LGZuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkO2lmKG51bGw9PXRuW3RdKXtpZih0blt0XT0hMCxybil7Zm9yKHZhciBuPVF0Lmxlbmd0aC0xO24+b24mJlF0W25dLmlkPmUuaWQ7KW4tLTtRdC5zcGxpY2UobisxLDAsZSl9ZWxzZSBRdC5wdXNoKGUpO25ufHwobm49ITAsWWUodW4pKX19KHRoaXMpfSxmbi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciBlPXRoaXMuZ2V0KCk7aWYoZSE9PXRoaXMudmFsdWV8fG8oZSl8fHRoaXMuZGVlcCl7dmFyIHQ9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPWUsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfWNhdGNoKGUpe1JlKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfX19LGZuLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5nZXQoKSx0aGlzLmRpcnR5PSExfSxmbi5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0aGlzLmRlcHNbZV0uZGVwZW5kKCl9LGZuLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkfHxoKHRoaXMudm0uX3dhdGNoZXJzLHRoaXMpO2Zvcih2YXIgZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspdGhpcy5kZXBzW2VdLnJlbW92ZVN1Yih0aGlzKTt0aGlzLmFjdGl2ZT0hMX19O3ZhciBwbj17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OlMsc2V0OlN9O2Z1bmN0aW9uIGRuKGUsdCxuKXtwbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XVtuXX0scG4uc2V0PWZ1bmN0aW9uKGUpe3RoaXNbdF1bbl09ZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbixwbil9ZnVuY3Rpb24gdm4oZSl7ZS5fd2F0Y2hlcnM9W107dmFyIHQ9ZS4kb3B0aW9uczt0LnByb3BzJiZmdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnMucHJvcHNEYXRhfHx7fSxyPWUuX3Byb3BzPXt9LGk9ZS4kb3B0aW9ucy5fcHJvcEtleXM9W107ZS4kcGFyZW50JiYkZSghMSk7dmFyIG89ZnVuY3Rpb24obyl7aS5wdXNoKG8pO3ZhciBhPU1lKG8sdCxuLGUpO3hlKHIsbyxhKSxvIGluIGV8fGRuKGUsIl9wcm9wcyIsbyl9O2Zvcih2YXIgYSBpbiB0KW8oYSk7JGUoITApfShlLHQucHJvcHMpLHQubWV0aG9kcyYmZnVuY3Rpb24oZSx0KXtlLiRvcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWVbbl09ImZ1bmN0aW9uIiE9dHlwZW9mIHRbbl0/Uzp4KHRbbl0sZSl9KGUsdC5tZXRob2RzKSx0LmRhdGE/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5kYXRhO3ModD1lLl9kYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCl7bGUoKTt0cnl7cmV0dXJuIGUuY2FsbCh0LHQpfWNhdGNoKGUpe3JldHVybiBSZShlLHQsImRhdGEoKSIpLHt9fWZpbmFsbHl7ZmUoKX19KHQsZSk6dHx8e30pfHwodD17fSk7dmFyIG49T2JqZWN0LmtleXModCkscj1lLiRvcHRpb25zLnByb3BzLGk9KGUuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIgbz1uW2ldO3ImJnkocixvKXx8KGE9dm9pZCAwLDM2IT09KGE9KG8rIiIpLmNoYXJDb2RlQXQoMCkpJiY5NSE9PWEmJmRuKGUsIl9kYXRhIixvKSl9dmFyIGE7Q2UodCwhMCl9KGUpOkNlKGUuX2RhdGE9e30sITApLHQuY29tcHV0ZWQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5fY29tcHV0ZWRXYXRjaGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGUoKTtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP286by5nZXQ7cnx8KG5baV09bmV3IGZuKGUsYXx8UyxTLGhuKSksaSBpbiBlfHxtbihlLGksbyl9fShlLHQuY29tcHV0ZWQpLHQud2F0Y2gmJnQud2F0Y2ghPT1ZJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspX24oZSxuLHJbaV0pO2Vsc2UgX24oZSxuLHIpfX0oZSx0LndhdGNoKX12YXIgaG49e2xhenk6ITB9O2Z1bmN0aW9uIG1uKGUsdCxuKXt2YXIgcj0hdGUoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8ocG4uZ2V0PXI/eW4odCk6Z24obikscG4uc2V0PVMpOihwbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP3luKHQpOmduKG4uZ2V0KTpTLHBuLnNldD1uLnNldHx8UyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxwbil9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1tlXTtpZih0KXJldHVybiB0LmRpcnR5JiZ0LmV2YWx1YXRlKCksY2UudGFyZ2V0JiZ0LmRlcGVuZCgpLHQudmFsdWV9fWZ1bmN0aW9uIGduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24gX24oZSx0LG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49ZVtuXSksZS4kd2F0Y2godCxuLHIpfXZhciBibj0wO2Z1bmN0aW9uICRuKGUpe3ZhciB0PWUub3B0aW9ucztpZihlLnN1cGVyKXt2YXIgbj0kbihlLnN1cGVyKTtpZihuIT09ZS5zdXBlck9wdGlvbnMpe2Uuc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9wdGlvbnMscj1lLnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBpIGluIG4pbltpXSE9PXJbaV0mJih0fHwodD17fSksdFtpXT1uW2ldKTtyZXR1cm4gdH0oZSk7ciYmQShlLmV4dGVuZE9wdGlvbnMsciksKHQ9ZS5vcHRpb25zPURlKG4sZS5leHRlbmRPcHRpb25zKSkubmFtZSYmKHQuY29tcG9uZW50c1t0Lm5hbWVdPWUpfX1yZXR1cm4gdH1mdW5jdGlvbiB3bihlKXt0aGlzLl9pbml0KGUpfWZ1bmN0aW9uIENuKGUpe2UuY2lkPTA7dmFyIHQ9MTtlLmV4dGVuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxpPWUuX0N0b3J8fChlLl9DdG9yPXt9KTtpZihpW3JdKXJldHVybiBpW3JdO3ZhciBvPWUubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbihlKXt0aGlzLl9pbml0KGUpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9dCsrLGEub3B0aW9ucz1EZShuLm9wdGlvbnMsZSksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWRuKGUucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKGUpe3ZhciB0PWUub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gdCltbihlLnByb3RvdHlwZSxuLHRbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV09bltlXX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPWUsYS5zZWFsZWRPcHRpb25zPUEoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24geG4oZSl7cmV0dXJuIGUmJihlLkN0b3Iub3B0aW9ucy5uYW1lfHxlLnRhZyl9ZnVuY3Rpb24ga24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmluZGV4T2YodCk+LTE6InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiwiKS5pbmRleE9mKHQpPi0xOihuPWUsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJmUudGVzdCh0KSk7dmFyIG59ZnVuY3Rpb24gQW4oZSx0KXt2YXIgbj1lLmNhY2hlLHI9ZS5rZXlzLGk9ZS5fdm5vZGU7Zm9yKHZhciBvIGluIG4pe3ZhciBhPW5bb107aWYoYSl7dmFyIHM9eG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhdChzKSYmT24obixvLHIsaSl9fX1mdW5jdGlvbiBPbihlLHQsbixyKXt2YXIgaT1lW3RdOyFpfHxyJiZpLnRhZz09PXIudGFnfHxpLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksZVt0XT1udWxsLGgobix0KX0hZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl91aWQ9Ym4rKyxuLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9mdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9dC5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9dC5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9aS5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPWkubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWkuY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPWkudGFnLHQucmVuZGVyJiYobi5yZW5kZXI9dC5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9dC5zdGF0aWNSZW5kZXJGbnMpfShuLHQpOm4uJG9wdGlvbnM9RGUoJG4obi5jb25zdHJ1Y3RvciksdHx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucyxuPXQucGFyZW50O2lmKG4mJiF0LmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaChlKX1lLiRwYXJlbnQ9bixlLiRyb290PW4/bi4kcm9vdDplLGUuJGNoaWxkcmVuPVtdLGUuJHJlZnM9e30sZS5fd2F0Y2hlcj1udWxsLGUuX2luYWN0aXZlPW51bGwsZS5fZGlyZWN0SW5hY3RpdmU9ITEsZS5faXNNb3VudGVkPSExLGUuX2lzRGVzdHJveWVkPSExLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKGUpe2UuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2hhc0hvb2tFdmVudD0hMTt2YXIgdD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dCYmcXQoZSx0KX0obiksZnVuY3Rpb24odCl7dC5fdm5vZGU9bnVsbCx0Ll9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPXQuJG9wdGlvbnMscj10LiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxpPXImJnIuY29udGV4dDt0LiRzbG90cz11dChuLl9yZW5kZXJDaGlsZHJlbixpKSx0LiRzY29wZWRTbG90cz1lLHQuX2M9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMSl9LHQuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMCl9O3ZhciBvPXImJnIuZGF0YTt4ZSh0LCIkYXR0cnMiLG8mJm8uYXR0cnN8fGUsbnVsbCwhMCkseGUodCwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHxlLG51bGwsITApfShuKSxZdChuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbihlKXt2YXIgdD1jdChlLiRvcHRpb25zLmluamVjdCxlKTt0JiYoJGUoITEpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7eGUoZSxuLHRbbl0pfSksJGUoITApKX0obiksdm4obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5wcm92aWRlO3QmJihlLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwoZSk6dCl9KG4pLFl0KG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KHduKSxmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRkYXRhIix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRwcm9wcyIsbiksZS5wcm90b3R5cGUuJHNldD1rZSxlLnByb3RvdHlwZS4kZGVsZXRlPUFlLGUucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbihlLHQsbil7aWYocyh0KSlyZXR1cm4gX24odGhpcyxlLHQsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IGZuKHRoaXMsZSx0LG4pO2lmKG4uaW1tZWRpYXRlKXRyeXt0LmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaChlKXtSZShlLHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0od24pLGZ1bmN0aW9uKGUpe3ZhciB0PS9eaG9vazovO2UucHJvdG90eXBlLiRvbj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspci4kb24oZVtpXSxuKTtlbHNlKHIuX2V2ZW50c1tlXXx8KHIuX2V2ZW50c1tlXT1bXSkpLnB1c2gobiksdC50ZXN0KGUpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYoZSxyKSx0LmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj10LG4uJG9uKGUsciksbn0sZS5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKW4uJG9mZihlW3JdLHQpO3JldHVybiBufXZhciBvLGE9bi5fZXZlbnRzW2VdO2lmKCFhKXJldHVybiBuO2lmKCF0KXJldHVybiBuLl9ldmVudHNbZV09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChvPWFbc10pPT09dHx8by5mbj09PXQpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LGUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZih0KXt0PXQubGVuZ3RoPjE/ayh0KTp0O2Zvcih2YXIgbj1rKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJytlKyciJyxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKUhlKHRbaV0sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fSh3biksZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1uLiRlbCxpPW4uX3Zub2RlLG89WnQobik7bi5fdm5vZGU9ZSxuLiRlbD1pP24uX19wYXRjaF9fKGksZSk6bi5fX3BhdGNoX18obi4kZWwsZSx0LCExKSxvKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LGUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LGUucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5faXNCZWluZ0Rlc3Ryb3llZCl7WXQoZSwiYmVmb3JlRGVzdHJveSIpLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIHQ9ZS4kcGFyZW50OyF0fHx0Ll9pc0JlaW5nRGVzdHJveWVkfHxlLiRvcHRpb25zLmFic3RyYWN0fHxoKHQuJGNoaWxkcmVuLGUpLGUuX3dhdGNoZXImJmUuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49ZS5fd2F0Y2hlcnMubGVuZ3RoO24tLTspZS5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTtlLl9kYXRhLl9fb2JfXyYmZS5fZGF0YS5fX29iX18udm1Db3VudC0tLGUuX2lzRGVzdHJveWVkPSEwLGUuX19wYXRjaF9fKGUuX3Zub2RlLG51bGwpLFl0KGUsImRlc3Ryb3llZCIpLGUuJG9mZigpLGUuJGVsJiYoZS4kZWwuX192dWVfXz1udWxsKSxlLiR2bm9kZSYmKGUuJHZub2RlLnBhcmVudD1udWxsKX19fSh3biksZnVuY3Rpb24oZSl7U3QoZS5wcm90b3R5cGUpLGUucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gWWUoZSx0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuJG9wdGlvbnMscj1uLnJlbmRlcixpPW4uX3BhcmVudFZub2RlO2kmJih0LiRzY29wZWRTbG90cz1mdChpLmRhdGEuc2NvcGVkU2xvdHMsdC4kc2xvdHMsdC4kc2NvcGVkU2xvdHMpKSx0LiR2bm9kZT1pO3RyeXtIdD10LGU9ci5jYWxsKHQuX3JlbmRlclByb3h5LHQuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe1JlKG4sdCwicmVuZGVyIiksZT10Ll92bm9kZX1maW5hbGx5e0h0PW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksZSBpbnN0YW5jZW9mIHBlfHwoZT12ZSgpKSxlLnBhcmVudD1pLGV9fSh3bik7dmFyIFNuPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxUbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpTbixleGNsdWRlOlNuLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5jYWNoZSlPbih0aGlzLmNhY2hlLGUsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHQpe0FuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGtuKHQsZSl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbih0KXtBbihlLGZ1bmN0aW9uKGUpe3JldHVybiFrbih0LGUpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2xvdHMuZGVmYXVsdCx0PXp0KGUpLG49dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPXhuKG4pLGk9dGhpcy5pbmNsdWRlLG89dGhpcy5leGNsdWRlO2lmKGkmJighcnx8IWtuKGkscikpfHxvJiZyJiZrbihvLHIpKXJldHVybiB0O3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT10LmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTp0LmtleTthW2NdPyh0LmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsaChzLGMpLHMucHVzaChjKSk6KGFbY109dCxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmT24oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSx0LmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiB0fHxlJiZlWzBdfX19OyFmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY29uZmlnIix0KSxlLnV0aWw9e3dhcm46YWUsZXh0ZW5kOkEsbWVyZ2VPcHRpb25zOkRlLGRlZmluZVJlYWN0aXZlOnhlfSxlLnNldD1rZSxlLmRlbGV0ZT1BZSxlLm5leHRUaWNrPVllLGUub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gQ2UoZSksZX0sZS5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub3B0aW9uc1t0KyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLGUub3B0aW9ucy5fYmFzZT1lLEEoZS5vcHRpb25zLmNvbXBvbmVudHMsVG4pLGZ1bmN0aW9uKGUpe2UudXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZih0LmluZGV4T2YoZSk+LTEpcmV0dXJuIHRoaXM7dmFyIG49ayhhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5pbnN0YWxsP2UuaW5zdGFsbC5hcHBseShlLG4pOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFwcGx5KG51bGwsbiksdC5wdXNoKGUpLHRoaXN9fShlKSxmdW5jdGlvbihlKXtlLm1peGluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnM9RGUodGhpcy5vcHRpb25zLGUpLHRoaXN9fShlKSxDbihlKSxmdW5jdGlvbihlKXtNLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PXQmJnMobikmJihuLm5hbWU9bi5uYW1lfHxlLG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1t0KyJzIl1bZV09bixuKTp0aGlzLm9wdGlvbnNbdCsicyJdW2VdfX0pfShlKX0od24pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3biwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLHt2YWx1ZTpUdH0pLHduLnZlcnNpb249IjIuNi4xMiI7dmFyIEVuPXAoInN0eWxlLGNsYXNzIiksTm49cCgiaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcyIpLGpuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4idmFsdWUiPT09biYmTm4oZSkmJiJidXR0b24iIT09dHx8InNlbGVjdGVkIj09PW4mJiJvcHRpb24iPT09ZXx8ImNoZWNrZWQiPT09biYmImlucHV0Ij09PWV8fCJtdXRlZCI9PT1uJiYidmlkZW8iPT09ZX0sRG49cCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksTG49cCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLE1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhuKHQpfHwiZmFsc2UiPT09dD8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09ZSYmTG4odCk/dDoidHJ1ZSJ9LEluPXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxGbj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24oZSl7cmV0dXJuIjoiPT09ZS5jaGFyQXQoNSkmJiJ4bGluayI9PT1lLnNsaWNlKDAsNSl9LFJuPWZ1bmN0aW9uKGUpe3JldHVybiBQbihlKT9lLnNsaWNlKDYsZS5sZW5ndGgpOiIifSxIbj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZXx8ITE9PT1lfTtmdW5jdGlvbiBCbihlKXtmb3IodmFyIHQ9ZS5kYXRhLHI9ZSxpPWU7bihpLmNvbXBvbmVudEluc3RhbmNlKTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZpLmRhdGEmJih0PVVuKGkuZGF0YSx0KSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJih0PVVuKHQsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYobihlKXx8bih0KSlyZXR1cm4gem4oZSxWbih0KSk7cmV0dXJuIiJ9KHQuc3RhdGljQ2xhc3MsdC5jbGFzcyl9ZnVuY3Rpb24gVW4oZSx0KXtyZXR1cm57c3RhdGljQ2xhc3M6em4oZS5zdGF0aWNDbGFzcyx0LnN0YXRpY0NsYXNzKSxjbGFzczpuKGUuY2xhc3MpP1tlLmNsYXNzLHQuY2xhc3NdOnQuY2xhc3N9fWZ1bmN0aW9uIHpuKGUsdCl7cmV0dXJuIGU/dD9lKyIgIit0OmU6dHx8IiJ9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9IiIsaT0wLG89ZS5sZW5ndGg7aTxvO2krKyluKHQ9Vm4oZVtpXSkpJiYiIiE9PXQmJihyJiYocis9IiAiKSxyKz10KTtyZXR1cm4gcn0oZSk6byhlKT9mdW5jdGlvbihlKXt2YXIgdD0iIjtmb3IodmFyIG4gaW4gZSllW25dJiYodCYmKHQrPSIgIiksdCs9bik7cmV0dXJuIHR9KGUpOiJzdHJpbmciPT10eXBlb2YgZT9lOiIifXZhciBLbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEpuPXAoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IikscW49cCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbihlKXtyZXR1cm4gSm4oZSl8fHFuKGUpfTtmdW5jdGlvbiBabihlKXtyZXR1cm4gcW4oZSk/InN2ZyI6Im1hdGgiPT09ZT8ibWF0aCI6dm9pZCAwfXZhciBHbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBYbj1wKCJ0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCIpO2Z1bmN0aW9uIFluKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gdHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIGV9dmFyIFFuPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiJzZWxlY3QiIT09ZT9uOih0LmRhdGEmJnQuZGF0YS5hdHRycyYmdm9pZCAwIT09dC5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEtuW2VdLHQpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoZSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtlLnJlbW92ZUNoaWxkKHQpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe2UuYXBwZW5kQ2hpbGQodCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSh0LCIiKX19KSxlcj17Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dHIodCl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UuZGF0YS5yZWYhPT10LmRhdGEucmVmJiYodHIoZSwhMCksdHIodCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RyKGUsITApfX07ZnVuY3Rpb24gdHIoZSx0KXt2YXIgcj1lLmRhdGEucmVmO2lmKG4ocikpe3ZhciBpPWUuY29udGV4dCxvPWUuY29tcG9uZW50SW5zdGFuY2V8fGUuZWxtLGE9aS4kcmVmczt0P0FycmF5LmlzQXJyYXkoYVtyXSk/aChhW3JdLG8pOmFbcl09PT1vJiYoYVtyXT12b2lkIDApOmUuZGF0YS5yZWZJbkZvcj9BcnJheS5pc0FycmF5KGFbcl0pP2Fbcl0uaW5kZXhPZihvKTwwJiZhW3JdLnB1c2gobyk6YVtyXT1bb106YVtyXT1vfX12YXIgbnI9bmV3IHBlKCIiLHt9LFtdKSxycj1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIGlyKGUsaSl7cmV0dXJuIGUua2V5PT09aS5rZXkmJihlLnRhZz09PWkudGFnJiZlLmlzQ29tbWVudD09PWkuaXNDb21tZW50JiZuKGUuZGF0YSk9PT1uKGkuZGF0YSkmJmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0IiE9PWUudGFnKXJldHVybiEwO3ZhciByLGk9bihyPWUuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlLG89bihyPXQuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlO3JldHVybiBpPT09b3x8WG4oaSkmJlhuKG8pfShlLGkpfHxyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSYmZS5hc3luY0ZhY3Rvcnk9PT1pLmFzeW5jRmFjdG9yeSYmdChpLmFzeW5jRmFjdG9yeS5lcnJvcikpfWZ1bmN0aW9uIG9yKGUsdCxyKXt2YXIgaSxvLGE9e307Zm9yKGk9dDtpPD1yOysraSluKG89ZVtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX12YXIgYXI9e2NyZWF0ZTpzcix1cGRhdGU6c3IsZGVzdHJveTpmdW5jdGlvbihlKXtzcihlLG5yKX19O2Z1bmN0aW9uIHNyKGUsdCl7KGUuZGF0YS5kaXJlY3RpdmVzfHx0LmRhdGEuZGlyZWN0aXZlcykmJmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG89ZT09PW5yLGE9dD09PW5yLHM9dXIoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSxjPXVyKHQuZGF0YS5kaXJlY3RpdmVzLHQuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUsaS5vbGRBcmc9ci5hcmcsZnIoaSwidXBkYXRlIix0LGUpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihmcihpLCJiaW5kIix0LGUpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylmcih1W25dLCJpbnNlcnRlZCIsdCxlKX07bz9pdCh0LCJpbnNlcnQiLGYpOmYoKX1sLmxlbmd0aCYmaXQodCwicG9zdHBhdGNoIixmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248bC5sZW5ndGg7bisrKWZyKGxbbl0sImNvbXBvbmVudFVwZGF0ZWQiLHQsZSl9KTtpZighbylmb3IobiBpbiBzKWNbbl18fGZyKHNbbl0sInVuYmluZCIsZSxlLGEpfShlLHQpfXZhciBjcj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIHVyKGUsdCl7dmFyIG4scixpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoIWUpcmV0dXJuIGk7Zm9yKG49MDtuPGUubGVuZ3RoO24rKykocj1lW25dKS5tb2RpZmllcnN8fChyLm1vZGlmaWVycz1jciksaVtscihyKV09cixyLmRlZj1MZSh0LiRvcHRpb25zLCJkaXJlY3RpdmVzIixyLm5hbWUpO3JldHVybiBpfWZ1bmN0aW9uIGxyKGUpe3JldHVybiBlLnJhd05hbWV8fGUubmFtZSsiLiIrT2JqZWN0LmtleXMoZS5tb2RpZmllcnN8fHt9KS5qb2luKCIuIil9ZnVuY3Rpb24gZnIoZSx0LG4scixpKXt2YXIgbz1lLmRlZiYmZS5kZWZbdF07aWYobyl0cnl7byhuLmVsbSxlLG4scixpKX1jYXRjaChyKXtSZShyLG4uY29udGV4dCwiZGlyZWN0aXZlICIrZS5uYW1lKyIgIit0KyIgaG9vayIpfX12YXIgcHI9W2VyLGFyXTtmdW5jdGlvbiBkcihlLHIpe3ZhciBpPXIuY29tcG9uZW50T3B0aW9ucztpZighKG4oaSkmJiExPT09aS5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzfHx0KGUuZGF0YS5hdHRycykmJnQoci5kYXRhLmF0dHJzKSkpe3ZhciBvLGEscz1yLmVsbSxjPWUuZGF0YS5hdHRyc3x8e30sdT1yLmRhdGEuYXR0cnN8fHt9O2ZvcihvIGluIG4odS5fX29iX18pJiYodT1yLmRhdGEuYXR0cnM9QSh7fSx1KSksdSlhPXVbb10sY1tvXSE9PWEmJnZyKHMsbyxhKTtmb3IobyBpbihxfHxaKSYmdS52YWx1ZSE9PWMudmFsdWUmJnZyKHMsInZhbHVlIix1LnZhbHVlKSxjKXQodVtvXSkmJihQbihvKT9zLnJlbW92ZUF0dHJpYnV0ZU5TKEZuLFJuKG8pKTpEbihvKXx8cy5yZW1vdmVBdHRyaWJ1dGUobykpfX1mdW5jdGlvbiB2cihlLHQsbil7ZS50YWdOYW1lLmluZGV4T2YoIi0iKT4tMT9ocihlLHQsbik6SW4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6KG49ImFsbG93ZnVsbHNjcmVlbiI9PT10JiYiRU1CRUQiPT09ZS50YWdOYW1lPyJ0cnVlIjp0LGUuc2V0QXR0cmlidXRlKHQsbikpOkRuKHQpP2Uuc2V0QXR0cmlidXRlKHQsTW4odCxuKSk6UG4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGVOUyhGbixSbih0KSk6ZS5zZXRBdHRyaWJ1dGVOUyhGbix0LG4pOmhyKGUsdCxuKX1mdW5jdGlvbiBocihlLHQsbil7aWYoSG4obikpZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihxJiYhVyYmIlRFWFRBUkVBIj09PWUudGFnTmFtZSYmInBsYWNlaG9sZGVyIj09PXQmJiIiIT09biYmIWUuX19pZXBoKXt2YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpfTtlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixyKSxlLl9faWVwaD0hMH1lLnNldEF0dHJpYnV0ZSh0LG4pfX12YXIgbXI9e2NyZWF0ZTpkcix1cGRhdGU6ZHJ9O2Z1bmN0aW9uIHlyKGUscil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1lLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1CbihyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO24oYykmJihzPXpuKHMsVm4oYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fXZhciBncixfcixiciwkcix3cixDcix4cj17Y3JlYXRlOnlyLHVwZGF0ZTp5cn0sa3I9L1tcdykuK1wtXyRcXV0vO2Z1bmN0aW9uIEFyKGUpe3ZhciB0LG4scixpLG8sYT0hMSxzPSExLGM9ITEsdT0hMSxsPTAsZj0wLHA9MCxkPTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihuPXQsdD1lLmNoYXJDb2RlQXQociksYSkzOT09PXQmJjkyIT09biYmKGE9ITEpO2Vsc2UgaWYocykzND09PXQmJjkyIT09biYmKHM9ITEpO2Vsc2UgaWYoYyk5Nj09PXQmJjkyIT09biYmKGM9ITEpO2Vsc2UgaWYodSk0Nz09PXQmJjkyIT09biYmKHU9ITEpO2Vsc2UgaWYoMTI0IT09dHx8MTI0PT09ZS5jaGFyQ29kZUF0KHIrMSl8fDEyND09PWUuY2hhckNvZGVBdChyLTEpfHxsfHxmfHxwKXtzd2l0Y2godCl7Y2FzZSAzNDpzPSEwO2JyZWFrO2Nhc2UgMzk6YT0hMDticmVhaztjYXNlIDk2OmM9ITA7YnJlYWs7Y2FzZSA0MDpwKys7YnJlYWs7Y2FzZSA0MTpwLS07YnJlYWs7Y2FzZSA5MTpmKys7YnJlYWs7Y2FzZSA5MzpmLS07YnJlYWs7Y2FzZSAxMjM6bCsrO2JyZWFrO2Nhc2UgMTI1OmwtLX1pZig0Nz09PXQpe2Zvcih2YXIgdj1yLTEsaD12b2lkIDA7dj49MCYmIiAiPT09KGg9ZS5jaGFyQXQodikpO3YtLSk7aCYma3IudGVzdChoKXx8KHU9ITApfX1lbHNlIHZvaWQgMD09PWk/KGQ9cisxLGk9ZS5zbGljZSgwLHIpLnRyaW0oKSk6bSgpO2Z1bmN0aW9uIG0oKXsob3x8KG89W10pKS5wdXNoKGUuc2xpY2UoZCxyKS50cmltKCkpLGQ9cisxfWlmKHZvaWQgMD09PWk/aT1lLnNsaWNlKDAscikudHJpbSgpOjAhPT1kJiZtKCksbylmb3Iocj0wO3I8by5sZW5ndGg7cisrKWk9T3IoaSxvW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBPcihlLHQpe3ZhciBuPXQuaW5kZXhPZigiKCIpO2lmKG48MClyZXR1cm4nX2YoIicrdCsnIikoJytlKyIpIjt2YXIgcj10LnNsaWNlKDAsbiksaT10LnNsaWNlKG4rMSk7cmV0dXJuJ19mKCInK3IrJyIpKCcrZSsoIikiIT09aT8iLCIraTppKX1mdW5jdGlvbiBTcihlLHQpe2NvbnNvbGUuZXJyb3IoIltWdWUgY29tcGlsZXJdOiAiK2UpfWZ1bmN0aW9uIFRyKGUsdCl7cmV0dXJuIGU/ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTpbXX1mdW5jdGlvbiBFcihlLHQsbixyLGkpeyhlLnByb3BzfHwoZS5wcm9wcz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24gTnIoZSx0LG4scixpKXsoaT9lLmR5bmFtaWNBdHRyc3x8KGUuZHluYW1pY0F0dHJzPVtdKTplLmF0dHJzfHwoZS5hdHRycz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24ganIoZSx0LG4scil7ZS5hdHRyc01hcFt0XT1uLGUuYXR0cnNMaXN0LnB1c2goUnIoe25hbWU6dCx2YWx1ZTpufSxyKSl9ZnVuY3Rpb24gRHIoZSx0LG4scixpLG8sYSxzKXsoZS5kaXJlY3RpdmVzfHwoZS5kaXJlY3RpdmVzPVtdKSkucHVzaChScih7bmFtZTp0LHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLGlzRHluYW1pY0FyZzpvLG1vZGlmaWVyczphfSxzKSksZS5wbGFpbj0hMX1mdW5jdGlvbiBMcihlLHQsbil7cmV0dXJuIG4/Il9wKCIrdCsnLCInK2UrJyIpJzplK3R9ZnVuY3Rpb24gTXIodCxuLHIsaSxvLGEscyxjKXt2YXIgdTsoaT1pfHxlKS5yaWdodD9jP249IigiK24rIik9PT0nY2xpY2snPydjb250ZXh0bWVudSc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJjb250ZXh0bWVudSIsZGVsZXRlIGkucmlnaHQpOmkubWlkZGxlJiYoYz9uPSIoIituKyIpPT09J2NsaWNrJz8nbW91c2V1cCc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJtb3VzZXVwIikpLGkuY2FwdHVyZSYmKGRlbGV0ZSBpLmNhcHR1cmUsbj1McigiISIsbixjKSksaS5vbmNlJiYoZGVsZXRlIGkub25jZSxuPUxyKCJ+IixuLGMpKSxpLnBhc3NpdmUmJihkZWxldGUgaS5wYXNzaXZlLG49THIoIiYiLG4sYykpLGkubmF0aXZlPyhkZWxldGUgaS5uYXRpdmUsdT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6dT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgbD1Scih7dmFsdWU6ci50cmltKCksZHluYW1pYzpjfSxzKTtpIT09ZSYmKGwubW9kaWZpZXJzPWkpO3ZhciBmPXVbbl07QXJyYXkuaXNBcnJheShmKT9vP2YudW5zaGlmdChsKTpmLnB1c2gobCk6dVtuXT1mP28/W2wsZl06W2YsbF06bCx0LnBsYWluPSExfWZ1bmN0aW9uIElyKGUsdCxuKXt2YXIgcj1GcihlLCI6Iit0KXx8RnIoZSwidi1iaW5kOiIrdCk7aWYobnVsbCE9cilyZXR1cm4gQXIocik7aWYoITEhPT1uKXt2YXIgaT1GcihlLHQpO2lmKG51bGwhPWkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfX1mdW5jdGlvbiBGcihlLHQsbil7dmFyIHI7aWYobnVsbCE9KHI9ZS5hdHRyc01hcFt0XSkpZm9yKHZhciBpPWUuYXR0cnNMaXN0LG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYoaVtvXS5uYW1lPT09dCl7aS5zcGxpY2UobywxKTticmVha31yZXR1cm4gbiYmZGVsZXRlIGUuYXR0cnNNYXBbdF0scn1mdW5jdGlvbiBQcihlLHQpe2Zvcih2YXIgbj1lLmF0dHJzTGlzdCxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1uW3JdO2lmKHQudGVzdChvLm5hbWUpKXJldHVybiBuLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIHQmJihudWxsIT10LnN0YXJ0JiYoZS5zdGFydD10LnN0YXJ0KSxudWxsIT10LmVuZCYmKGUuZW5kPXQuZW5kKSksZX1mdW5jdGlvbiBIcihlLHQsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT1Ccih0LG8pO2UubW9kZWw9e3ZhbHVlOiIoIit0KyIpIixleHByZXNzaW9uOkpTT04uc3RyaW5naWZ5KHQpLGNhbGxiYWNrOiJmdW5jdGlvbiAoJCR2KSB7IithKyJ9In19ZnVuY3Rpb24gQnIoZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtpZihlPWUudHJpbSgpLGdyPWUubGVuZ3RoLGUuaW5kZXhPZigiWyIpPDB8fGUubGFzdEluZGV4T2YoIl0iKTxnci0xKXJldHVybigkcj1lLmxhc3RJbmRleE9mKCIuIikpPi0xP3tleHA6ZS5zbGljZSgwLCRyKSxrZXk6JyInK2Uuc2xpY2UoJHIrMSkrJyInfTp7ZXhwOmUsa2V5Om51bGx9O19yPWUsJHI9d3I9Q3I9MDtmb3IoOyF6cigpOylWcihicj1VcigpKT9Kcihicik6OTE9PT1iciYmS3IoYnIpO3JldHVybntleHA6ZS5zbGljZSgwLHdyKSxrZXk6ZS5zbGljZSh3cisxLENyKX19KGUpO3JldHVybiBudWxsPT09bi5rZXk/ZSsiPSIrdDoiJHNldCgiK24uZXhwKyIsICIrbi5rZXkrIiwgIit0KyIpIn1mdW5jdGlvbiBVcigpe3JldHVybiBfci5jaGFyQ29kZUF0KCsrJHIpfWZ1bmN0aW9uIHpyKCl7cmV0dXJuICRyPj1ncn1mdW5jdGlvbiBWcihlKXtyZXR1cm4gMzQ9PT1lfHwzOT09PWV9ZnVuY3Rpb24gS3IoZSl7dmFyIHQ9MTtmb3Iod3I9JHI7IXpyKCk7KWlmKFZyKGU9VXIoKSkpSnIoZSk7ZWxzZSBpZig5MT09PWUmJnQrKyw5Mz09PWUmJnQtLSwwPT09dCl7Q3I9JHI7YnJlYWt9fWZ1bmN0aW9uIEpyKGUpe2Zvcih2YXIgdD1lOyF6cigpJiYoZT1VcigpKSE9PXQ7KTt9dmFyIHFyLFdyPSJfX3IiLFpyPSJfX2MiO2Z1bmN0aW9uIEdyKGUsdCxuKXt2YXIgcj1xcjtyZXR1cm4gZnVuY3Rpb24gaSgpe251bGwhPT10LmFwcGx5KG51bGwsYXJndW1lbnRzKSYmUXIoZSxpLG4scil9fXZhciBYcj1WZSYmIShYJiZOdW1iZXIoWFsxXSk8PTUzKTtmdW5jdGlvbiBZcihlLHQsbixyKXtpZihYcil7dmFyIGk9YW4sbz10O3Q9by5fd3JhcHBlcj1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PWUuY3VycmVudFRhcmdldHx8ZS50aW1lU3RhbXA+PWl8fGUudGltZVN0YW1wPD0wfHxlLnRhcmdldC5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1xci5hZGRFdmVudExpc3RlbmVyKGUsdCxRP3tjYXB0dXJlOm4scGFzc2l2ZTpyfTpuKX1mdW5jdGlvbiBRcihlLHQsbixyKXsocnx8cXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0Ll93cmFwcGVyfHx0LG4pfWZ1bmN0aW9uIGVpKGUscil7aWYoIXQoZS5kYXRhLm9uKXx8IXQoci5kYXRhLm9uKSl7dmFyIGk9ci5kYXRhLm9ufHx7fSxvPWUuZGF0YS5vbnx8e307cXI9ci5lbG0sZnVuY3Rpb24oZSl7aWYobihlW1dyXSkpe3ZhciB0PXE/ImNoYW5nZSI6ImlucHV0IjtlW3RdPVtdLmNvbmNhdChlW1dyXSxlW3RdfHxbXSksZGVsZXRlIGVbV3JdfW4oZVtacl0pJiYoZS5jaGFuZ2U9W10uY29uY2F0KGVbWnJdLGUuY2hhbmdlfHxbXSksZGVsZXRlIGVbWnJdKX0oaSkscnQoaSxvLFlyLFFyLEdyLHIuY29udGV4dCkscXI9dm9pZCAwfX12YXIgdGksbmk9e2NyZWF0ZTplaSx1cGRhdGU6ZWl9O2Z1bmN0aW9uIHJpKGUscil7aWYoIXQoZS5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9ZS5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGkgaW4gbihjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz1BKHt9LGMpKSxzKWkgaW4gY3x8KGFbaV09IiIpO2ZvcihpIGluIGMpe2lmKG89Y1tpXSwidGV4dENvbnRlbnQiPT09aXx8ImlubmVySFRNTCI9PT1pKXtpZihyLmNoaWxkcmVuJiYoci5jaGlsZHJlbi5sZW5ndGg9MCksbz09PXNbaV0pY29udGludWU7MT09PWEuY2hpbGROb2Rlcy5sZW5ndGgmJmEucmVtb3ZlQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKX1pZigidmFsdWUiPT09aSYmIlBST0dSRVNTIiE9PWEudGFnTmFtZSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtpaShhLHUpJiYoYS52YWx1ZT11KX1lbHNlIGlmKCJpbm5lckhUTUwiPT09aSYmcW4oYS50YWdOYW1lKSYmdChhLmlubmVySFRNTCkpeyh0aT10aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD0iPHN2Zz4iK28rIjwvc3ZnPiI7Zm9yKHZhciBsPXRpLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtsLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQobC5maXJzdENoaWxkKX1lbHNlIGlmKG8hPT1zW2ldKXRyeXthW2ldPW99Y2F0Y2goZSl7fX19fWZ1bmN0aW9uIGlpKGUsdCl7cmV0dXJuIWUuY29tcG9zaW5nJiYoIk9QVElPTiI9PT1lLnRhZ05hbWV8fGZ1bmN0aW9uKGUsdCl7dmFyIG49ITA7dHJ5e249ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWV9Y2F0Y2goZSl7fXJldHVybiBuJiZlLnZhbHVlIT09dH0oZSx0KXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZhbHVlLGk9ZS5fdk1vZGlmaWVycztpZihuKGkpKXtpZihpLm51bWJlcilyZXR1cm4gZihyKSE9PWYodCk7aWYoaS50cmltKXJldHVybiByLnRyaW0oKSE9PXQudHJpbSgpfXJldHVybiByIT09dH0oZSx0KSl9dmFyIG9pPXtjcmVhdGU6cmksdXBkYXRlOnJpfSxhaT1nKGZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49LzooLispLztyZXR1cm4gZS5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHI9ZS5zcGxpdChuKTtyLmxlbmd0aD4xJiYodFtyWzBdLnRyaW0oKV09clsxXS50cmltKCkpfX0pLHR9KTtmdW5jdGlvbiBzaShlKXt2YXIgdD1jaShlLnN0eWxlKTtyZXR1cm4gZS5zdGF0aWNTdHlsZT9BKGUuc3RhdGljU3R5bGUsdCk6dH1mdW5jdGlvbiBjaShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9PKGUpOiJzdHJpbmciPT10eXBlb2YgZT9haShlKTplfXZhciB1aSxsaT0vXi0tLyxmaT0vXHMqIWltcG9ydGFudCQvLHBpPWZ1bmN0aW9uKGUsdCxuKXtpZihsaS50ZXN0KHQpKWUuc3R5bGUuc2V0UHJvcGVydHkodCxuKTtlbHNlIGlmKGZpLnRlc3QobikpZS5zdHlsZS5zZXRQcm9wZXJ0eShDKHQpLG4ucmVwbGFjZShmaSwiIiksImltcG9ydGFudCIpO2Vsc2V7dmFyIHI9dmkodCk7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspZS5zdHlsZVtyXT1uW2ldO2Vsc2UgZS5zdHlsZVtyXT1ufX0sZGk9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHZpPWcoZnVuY3Rpb24oZSl7aWYodWk9dWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJmaWx0ZXIiIT09KGU9YihlKSkmJmUgaW4gdWkpcmV0dXJuIGU7Zm9yKHZhciB0PWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPTA7bjxkaS5sZW5ndGg7bisrKXt2YXIgcj1kaVtuXSt0O2lmKHIgaW4gdWkpcmV0dXJuIHJ9fSk7ZnVuY3Rpb24gaGkoZSxyKXt2YXIgaT1yLmRhdGEsbz1lLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1jaShyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPW4ocC5fX29iX18pP0Eoe30scCk6cDt2YXIgZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9e307aWYodClmb3IodmFyIGk9ZTtpLmNvbXBvbmVudEluc3RhbmNlOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkmJmkuZGF0YSYmKG49c2koaS5kYXRhKSkmJkEocixuKTsobj1zaShlLmRhdGEpKSYmQShyLG4pO2Zvcih2YXIgbz1lO289by5wYXJlbnQ7KW8uZGF0YSYmKG49c2koby5kYXRhKSkmJkEocixuKTtyZXR1cm4gcn0ociwhMCk7Zm9yKHMgaW4gZil0KGRbc10pJiZwaShjLHMsIiIpO2ZvcihzIGluIGQpKGE9ZFtzXSkhPT1mW3NdJiZwaShjLHMsbnVsbD09YT8iIjphKX19dmFyIG1pPXtjcmVhdGU6aGksdXBkYXRlOmhpfSx5aT0vXHMrLztmdW5jdGlvbiBnaShlLHQpe2lmKHQmJih0PXQudHJpbSgpKSlpZihlLmNsYXNzTGlzdCl0LmluZGV4T2YoIiAiKT4tMT90LnNwbGl0KHlpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCl9KTplLmNsYXNzTGlzdC5hZGQodCk7ZWxzZXt2YXIgbj0iICIrKGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrdCsiICIpPDAmJmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rdCkudHJpbSgpKX19ZnVuY3Rpb24gX2koZSx0KXtpZih0JiYodD10LnRyaW0oKSkpaWYoZS5jbGFzc0xpc3QpdC5pbmRleE9mKCIgIik+LTE/dC5zcGxpdCh5aSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpfSk6ZS5jbGFzc0xpc3QucmVtb3ZlKHQpLGUuY2xhc3NMaXN0Lmxlbmd0aHx8ZS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyhlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIit0KyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTplLnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gYmkoZSl7aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdD17fTtyZXR1cm4hMSE9PWUuY3NzJiZBKHQsJGkoZS5uYW1lfHwidiIpKSxBKHQsZSksdH1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/JGkoZSk6dm9pZCAwfX12YXIgJGk9ZyhmdW5jdGlvbihlKXtyZXR1cm57ZW50ZXJDbGFzczplKyItZW50ZXIiLGVudGVyVG9DbGFzczplKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6ZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczplKyItbGVhdmUiLGxlYXZlVG9DbGFzczplKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6ZSsiLWxlYXZlLWFjdGl2ZSJ9fSksd2k9eiYmIVcsQ2k9InRyYW5zaXRpb24iLHhpPSJhbmltYXRpb24iLGtpPSJ0cmFuc2l0aW9uIixBaT0idHJhbnNpdGlvbmVuZCIsT2k9ImFuaW1hdGlvbiIsU2k9ImFuaW1hdGlvbmVuZCI7d2kmJih2b2lkIDA9PT13aW5kb3cub250cmFuc2l0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kJiYoa2k9IldlYmtpdFRyYW5zaXRpb24iLEFpPSJ3ZWJraXRUcmFuc2l0aW9uRW5kIiksdm9pZCAwPT09d2luZG93Lm9uYW5pbWF0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQmJihPaT0iV2Via2l0QW5pbWF0aW9uIixTaT0id2Via2l0QW5pbWF0aW9uRW5kIikpO3ZhciBUaT16P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyk6c2V0VGltZW91dDpmdW5jdGlvbihlKXtyZXR1cm4gZSgpfTtmdW5jdGlvbiBFaShlKXtUaShmdW5jdGlvbigpe1RpKGUpfSl9ZnVuY3Rpb24gTmkoZSx0KXt2YXIgbj1lLl90cmFuc2l0aW9uQ2xhc3Nlc3x8KGUuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YodCk8MCYmKG4ucHVzaCh0KSxnaShlLHQpKX1mdW5jdGlvbiBqaShlLHQpe2UuX3RyYW5zaXRpb25DbGFzc2VzJiZoKGUuX3RyYW5zaXRpb25DbGFzc2VzLHQpLF9pKGUsdCl9ZnVuY3Rpb24gRGkoZSx0LG4pe3ZhciByPU1pKGUsdCksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT1DaT9BaTpTaSxjPTAsdT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksZS5hZGRFdmVudExpc3RlbmVyKHMsbCl9dmFyIExpPS9cYih0cmFuc2Zvcm18YWxsKSgsfCQpLztmdW5jdGlvbiBNaShlLHQpe3ZhciBuLHI9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSksaT0ocltraSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLG89KHJba2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSxhPUlpKGksbykscz0ocltPaSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLGM9KHJbT2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSx1PUlpKHMsYyksbD0wLGY9MDtyZXR1cm4gdD09PUNpP2E+MCYmKG49Q2ksbD1hLGY9by5sZW5ndGgpOnQ9PT14aT91PjAmJihuPXhpLGw9dSxmPWMubGVuZ3RoKTpmPShuPShsPU1hdGgubWF4KGEsdSkpPjA/YT51P0NpOnhpOm51bGwpP249PT1DaT9vLmxlbmd0aDpjLmxlbmd0aDowLHt0eXBlOm4sdGltZW91dDpsLHByb3BDb3VudDpmLGhhc1RyYW5zZm9ybTpuPT09Q2kmJkxpLnRlc3QocltraSsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIElpKGUsdCl7Zm9yKDtlLmxlbmd0aDx0Lmxlbmd0aDspZT1lLmNvbmNhdChlKTtyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCx0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBGaSh0KStGaShlW25dKX0pKX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gMWUzKk51bWJlcihlLnNsaWNlKDAsLTEpLnJlcGxhY2UoIiwiLCIuIikpfWZ1bmN0aW9uIFBpKGUscil7dmFyIGk9ZS5lbG07bihpLl9sZWF2ZUNiKSYmKGkuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGkuX2xlYXZlQ2IoKSk7dmFyIGE9YmkoZS5kYXRhLnRyYW5zaXRpb24pO2lmKCF0KGEpJiYhbihpLl9lbnRlckNiKSYmMT09PWkubm9kZVR5cGUpe2Zvcih2YXIgcz1hLmNzcyxjPWEudHlwZSx1PWEuZW50ZXJDbGFzcyxsPWEuZW50ZXJUb0NsYXNzLHA9YS5lbnRlckFjdGl2ZUNsYXNzLGQ9YS5hcHBlYXJDbGFzcyx2PWEuYXBwZWFyVG9DbGFzcyxoPWEuYXBwZWFyQWN0aXZlQ2xhc3MsbT1hLmJlZm9yZUVudGVyLHk9YS5lbnRlcixnPWEuYWZ0ZXJFbnRlcixfPWEuZW50ZXJDYW5jZWxsZWQsYj1hLmJlZm9yZUFwcGVhciwkPWEuYXBwZWFyLHc9YS5hZnRlckFwcGVhcixDPWEuYXBwZWFyQ2FuY2VsbGVkLHg9YS5kdXJhdGlvbixrPVd0LEE9V3QuJHZub2RlO0EmJkEucGFyZW50OylrPUEuY29udGV4dCxBPUEucGFyZW50O3ZhciBPPSFrLl9pc01vdW50ZWR8fCFlLmlzUm9vdEluc2VydDtpZighT3x8JHx8IiI9PT0kKXt2YXIgUz1PJiZkP2Q6dSxUPU8mJmg/aDpwLEU9TyYmdj92OmwsTj1PJiZifHxtLGo9TyYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEw9TyYmd3x8ZyxNPU8mJkN8fF8sST1mKG8oeCk/eC5lbnRlcjp4KSxGPSExIT09cyYmIVcsUD1CaShqKSxSPWkuX2VudGVyQ2I9RChmdW5jdGlvbigpe0YmJihqaShpLEUpLGppKGksVCkpLFIuY2FuY2VsbGVkPyhGJiZqaShpLFMpLE0mJk0oaSkpOkwmJkwoaSksaS5fZW50ZXJDYj1udWxsfSk7ZS5kYXRhLnNob3d8fGl0KGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgdD1pLnBhcmVudE5vZGUsbj10JiZ0Ll9wZW5kaW5nJiZ0Ll9wZW5kaW5nW2Uua2V5XTtuJiZuLnRhZz09PWUudGFnJiZuLmVsbS5fbGVhdmVDYiYmbi5lbG0uX2xlYXZlQ2IoKSxqJiZqKGksUil9KSxOJiZOKGkpLEYmJihOaShpLFMpLE5pKGksVCksRWkoZnVuY3Rpb24oKXtqaShpLFMpLFIuY2FuY2VsbGVkfHwoTmkoaSxFKSxQfHwoSGkoSSk/c2V0VGltZW91dChSLEkpOkRpKGksYyxSKSkpfSkpLGUuZGF0YS5zaG93JiYociYmcigpLGomJmooaSxSKSksRnx8UHx8UigpfX19ZnVuY3Rpb24gUmkoZSxyKXt2YXIgaT1lLmVsbTtuKGkuX2VudGVyQ2IpJiYoaS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsaS5fZW50ZXJDYigpKTt2YXIgYT1iaShlLmRhdGEudHJhbnNpdGlvbik7aWYodChhKXx8MSE9PWkubm9kZVR5cGUpcmV0dXJuIHIoKTtpZighbihpLl9sZWF2ZUNiKSl7dmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmxlYXZlQ2xhc3MsbD1hLmxlYXZlVG9DbGFzcyxwPWEubGVhdmVBY3RpdmVDbGFzcyxkPWEuYmVmb3JlTGVhdmUsdj1hLmxlYXZlLGg9YS5hZnRlckxlYXZlLG09YS5sZWF2ZUNhbmNlbGxlZCx5PWEuZGVsYXlMZWF2ZSxnPWEuZHVyYXRpb24sXz0hMSE9PXMmJiFXLGI9QmkodiksJD1mKG8oZyk/Zy5sZWF2ZTpnKSx3PWkuX2xlYXZlQ2I9RChmdW5jdGlvbigpe2kucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLl9wZW5kaW5nJiYoaS5wYXJlbnROb2RlLl9wZW5kaW5nW2Uua2V5XT1udWxsKSxfJiYoamkoaSxsKSxqaShpLHApKSx3LmNhbmNlbGxlZD8oXyYmamkoaSx1KSxtJiZtKGkpKToocigpLGgmJmgoaSkpLGkuX2xlYXZlQ2I9bnVsbH0pO3k/eShDKTpDKCl9ZnVuY3Rpb24gQygpe3cuY2FuY2VsbGVkfHwoIWUuZGF0YS5zaG93JiZpLnBhcmVudE5vZGUmJigoaS5wYXJlbnROb2RlLl9wZW5kaW5nfHwoaS5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbZS5rZXldPWUpLGQmJmQoaSksXyYmKE5pKGksdSksTmkoaSxwKSxFaShmdW5jdGlvbigpe2ppKGksdSksdy5jYW5jZWxsZWR8fChOaShpLGwpLGJ8fChIaSgkKT9zZXRUaW1lb3V0KHcsJCk6RGkoaSxjLHcpKSl9KSksdiYmdihpLHcpLF98fGJ8fHcoKSl9fWZ1bmN0aW9uIEhpKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIEJpKGUpe2lmKHQoZSkpcmV0dXJuITE7dmFyIHI9ZS5mbnM7cmV0dXJuIG4ocik/QmkoQXJyYXkuaXNBcnJheShyKT9yWzBdOnIpOihlLl9sZW5ndGh8fGUubGVuZ3RoKT4xfWZ1bmN0aW9uIFVpKGUsdCl7ITAhPT10LmRhdGEuc2hvdyYmUGkodCl9dmFyIHppPWZ1bmN0aW9uKGUpe3ZhciBvLGEscz17fSxjPWUubW9kdWxlcyx1PWUubm9kZU9wcztmb3Iobz0wO288cnIubGVuZ3RoOysrbylmb3Ioc1tycltvXV09W10sYT0wO2E8Yy5sZW5ndGg7KythKW4oY1thXVtycltvXV0pJiZzW3JyW29dXS5wdXNoKGNbYV1bcnJbb11dKTtmdW5jdGlvbiBsKGUpe3ZhciB0PXUucGFyZW50Tm9kZShlKTtuKHQpJiZ1LnJlbW92ZUNoaWxkKHQsZSl9ZnVuY3Rpb24gZihlLHQsaSxvLGEsYyxsKXtpZihuKGUuZWxtKSYmbihjKSYmKGU9Y1tsXT1tZShlKSksZS5pc1Jvb3RJbnNlcnQ9IWEsIWZ1bmN0aW9uKGUsdCxpLG8pe3ZhciBhPWUuZGF0YTtpZihuKGEpKXt2YXIgYz1uKGUuY29tcG9uZW50SW5zdGFuY2UpJiZhLmtlZXBBbGl2ZTtpZihuKGE9YS5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMSksbihlLmNvbXBvbmVudEluc3RhbmNlKSlyZXR1cm4gZChlLHQpLHYoaSxlLmVsbSxvKSxyKGMpJiZmdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG8sYT1lO2EuY29tcG9uZW50SW5zdGFuY2U7KWlmKGE9YS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUsbihvPWEuZGF0YSkmJm4obz1vLnRyYW5zaXRpb24pKXtmb3Iobz0wO288cy5hY3RpdmF0ZS5sZW5ndGg7KytvKXMuYWN0aXZhdGVbb10obnIsYSk7dC5wdXNoKGEpO2JyZWFrfXYocixlLmVsbSxpKX0oZSx0LGksbyksITB9fShlLHQsaSxvKSl7dmFyIGY9ZS5kYXRhLHA9ZS5jaGlsZHJlbixtPWUudGFnO24obSk/KGUuZWxtPWUubnM/dS5jcmVhdGVFbGVtZW50TlMoZS5ucyxtKTp1LmNyZWF0ZUVsZW1lbnQobSxlKSxnKGUpLGgoZSxwLHQpLG4oZikmJnkoZSx0KSx2KGksZS5lbG0sbykpOnIoZS5pc0NvbW1lbnQpPyhlLmVsbT11LmNyZWF0ZUNvbW1lbnQoZS50ZXh0KSx2KGksZS5lbG0sbykpOihlLmVsbT11LmNyZWF0ZVRleHROb2RlKGUudGV4dCksdihpLGUuZWxtLG8pKX19ZnVuY3Rpb24gZChlLHQpe24oZS5kYXRhLnBlbmRpbmdJbnNlcnQpJiYodC5wdXNoLmFwcGx5KHQsZS5kYXRhLnBlbmRpbmdJbnNlcnQpLGUuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLGUuZWxtPWUuY29tcG9uZW50SW5zdGFuY2UuJGVsLG0oZSk/KHkoZSx0KSxnKGUpKToodHIoZSksdC5wdXNoKGUpKX1mdW5jdGlvbiB2KGUsdCxyKXtuKGUpJiYobihyKT91LnBhcmVudE5vZGUocik9PT1lJiZ1Lmluc2VydEJlZm9yZShlLHQscik6dS5hcHBlbmRDaGlsZChlLHQpKX1mdW5jdGlvbiBoKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWYodFtyXSxuLGUuZWxtLG51bGwsITAsdCxyKTtlbHNlIGkoZS50ZXh0KSYmdS5hcHBlbmRDaGlsZChlLmVsbSx1LmNyZWF0ZVRleHROb2RlKFN0cmluZyhlLnRleHQpKSl9ZnVuY3Rpb24gbShlKXtmb3IoO2UuY29tcG9uZW50SW5zdGFuY2U7KWU9ZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIG4oZS50YWcpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIHI9MDtyPHMuY3JlYXRlLmxlbmd0aDsrK3Ipcy5jcmVhdGVbcl0obnIsZSk7bihvPWUuZGF0YS5ob29rKSYmKG4oby5jcmVhdGUpJiZvLmNyZWF0ZShucixlKSxuKG8uaW5zZXJ0KSYmdC5wdXNoKGUpKX1mdW5jdGlvbiBnKGUpe3ZhciB0O2lmKG4odD1lLmZuU2NvcGVJZCkpdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpO2Vsc2UgZm9yKHZhciByPWU7cjspbih0PXIuY29udGV4dCkmJm4odD10LiRvcHRpb25zLl9zY29wZUlkKSYmdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpLHI9ci5wYXJlbnQ7bih0PVd0KSYmdCE9PWUuY29udGV4dCYmdCE9PWUuZm5Db250ZXh0JiZuKHQ9dC4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZShlLmVsbSx0KX1mdW5jdGlvbiBfKGUsdCxuLHIsaSxvKXtmb3IoO3I8PWk7KytyKWYobltyXSxvLGUsdCwhMSxuLHIpfWZ1bmN0aW9uIGIoZSl7dmFyIHQscixpPWUuZGF0YTtpZihuKGkpKWZvcihuKHQ9aS5ob29rKSYmbih0PXQuZGVzdHJveSkmJnQoZSksdD0wO3Q8cy5kZXN0cm95Lmxlbmd0aDsrK3Qpcy5kZXN0cm95W3RdKGUpO2lmKG4odD1lLmNoaWxkcmVuKSlmb3Iocj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKWIoZS5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gJChlLHQscil7Zm9yKDt0PD1yOysrdCl7dmFyIGk9ZVt0XTtuKGkpJiYobihpLnRhZyk/KHcoaSksYihpKSk6bChpLmVsbSkpfX1mdW5jdGlvbiB3KGUsdCl7aWYobih0KXx8bihlLmRhdGEpKXt2YXIgcixpPXMucmVtb3ZlLmxlbmd0aCsxO2ZvcihuKHQpP3QubGlzdGVuZXJzKz1pOnQ9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7MD09LS1uLmxpc3RlbmVycyYmbChlKX1yZXR1cm4gbi5saXN0ZW5lcnM9dCxufShlLmVsbSxpKSxuKHI9ZS5jb21wb25lbnRJbnN0YW5jZSkmJm4ocj1yLl92bm9kZSkmJm4oci5kYXRhKSYmdyhyLHQpLHI9MDtyPHMucmVtb3ZlLmxlbmd0aDsrK3Ipcy5yZW1vdmVbcl0oZSx0KTtuKHI9ZS5kYXRhLmhvb2spJiZuKHI9ci5yZW1vdmUpP3IoZSx0KTp0KCl9ZWxzZSBsKGUuZWxtKX1mdW5jdGlvbiBDKGUsdCxyLGkpe2Zvcih2YXIgbz1yO288aTtvKyspe3ZhciBhPXRbb107aWYobihhKSYmaXIoZSxhKSlyZXR1cm4gb319ZnVuY3Rpb24geChlLGksbyxhLGMsbCl7aWYoZSE9PWkpe24oaS5lbG0pJiZuKGEpJiYoaT1hW2NdPW1lKGkpKTt2YXIgcD1pLmVsbT1lLmVsbTtpZihyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSluKGkuYXN5bmNGYWN0b3J5LnJlc29sdmVkKT9PKGUuZWxtLGksbyk6aS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihyKGkuaXNTdGF0aWMpJiZyKGUuaXNTdGF0aWMpJiZpLmtleT09PWUua2V5JiYocihpLmlzQ2xvbmVkKXx8cihpLmlzT25jZSkpKWkuY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZTtlbHNle3ZhciBkLHY9aS5kYXRhO24odikmJm4oZD12Lmhvb2spJiZuKGQ9ZC5wcmVwYXRjaCkmJmQoZSxpKTt2YXIgaD1lLmNoaWxkcmVuLHk9aS5jaGlsZHJlbjtpZihuKHYpJiZtKGkpKXtmb3IoZD0wO2Q8cy51cGRhdGUubGVuZ3RoOysrZClzLnVwZGF0ZVtkXShlLGkpO24oZD12Lmhvb2spJiZuKGQ9ZC51cGRhdGUpJiZkKGUsaSl9dChpLnRleHQpP24oaCkmJm4oeSk/aCE9PXkmJmZ1bmN0aW9uKGUscixpLG8sYSl7Zm9yKHZhciBzLGMsbCxwPTAsZD0wLHY9ci5sZW5ndGgtMSxoPXJbMF0sbT1yW3ZdLHk9aS5sZW5ndGgtMSxnPWlbMF0sYj1pW3ldLHc9IWE7cDw9diYmZDw9eTspdChoKT9oPXJbKytwXTp0KG0pP209clstLXZdOmlyKGgsZyk/KHgoaCxnLG8saSxkKSxoPXJbKytwXSxnPWlbKytkXSk6aXIobSxiKT8oeChtLGIsbyxpLHkpLG09clstLXZdLGI9aVstLXldKTppcihoLGIpPyh4KGgsYixvLGkseSksdyYmdS5pbnNlcnRCZWZvcmUoZSxoLmVsbSx1Lm5leHRTaWJsaW5nKG0uZWxtKSksaD1yWysrcF0sYj1pWy0teV0pOmlyKG0sZyk/KHgobSxnLG8saSxkKSx3JiZ1Lmluc2VydEJlZm9yZShlLG0uZWxtLGguZWxtKSxtPXJbLS12XSxnPWlbKytkXSk6KHQocykmJihzPW9yKHIscCx2KSksdChjPW4oZy5rZXkpP3NbZy5rZXldOkMoZyxyLHAsdikpP2YoZyxvLGUsaC5lbG0sITEsaSxkKTppcihsPXJbY10sZyk/KHgobCxnLG8saSxkKSxyW2NdPXZvaWQgMCx3JiZ1Lmluc2VydEJlZm9yZShlLGwuZWxtLGguZWxtKSk6ZihnLG8sZSxoLmVsbSwhMSxpLGQpLGc9aVsrK2RdKTtwPnY/XyhlLHQoaVt5KzFdKT9udWxsOmlbeSsxXS5lbG0saSxkLHksbyk6ZD55JiYkKHIscCx2KX0ocCxoLHksbyxsKTpuKHkpPyhuKGUudGV4dCkmJnUuc2V0VGV4dENvbnRlbnQocCwiIiksXyhwLG51bGwseSwwLHkubGVuZ3RoLTEsbykpOm4oaCk/JChoLDAsaC5sZW5ndGgtMSk6bihlLnRleHQpJiZ1LnNldFRleHRDb250ZW50KHAsIiIpOmUudGV4dCE9PWkudGV4dCYmdS5zZXRUZXh0Q29udGVudChwLGkudGV4dCksbih2KSYmbihkPXYuaG9vaykmJm4oZD1kLnBvc3RwYXRjaCkmJmQoZSxpKX19fWZ1bmN0aW9uIGsoZSx0LGkpe2lmKHIoaSkmJm4oZS5wYXJlbnQpKWUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD10O2Vsc2UgZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsrK28pdFtvXS5kYXRhLmhvb2suaW5zZXJ0KHRbb10pfXZhciBBPXAoImF0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleSIpO2Z1bmN0aW9uIE8oZSx0LGksbyl7dmFyIGEscz10LnRhZyxjPXQuZGF0YSx1PXQuY2hpbGRyZW47aWYobz1vfHxjJiZjLnByZSx0LmVsbT1lLHIodC5pc0NvbW1lbnQpJiZuKHQuYXN5bmNGYWN0b3J5KSlyZXR1cm4gdC5pc0FzeW5jUGxhY2Vob2xkZXI9ITAsITA7aWYobihjKSYmKG4oYT1jLmhvb2spJiZuKGE9YS5pbml0KSYmYSh0LCEwKSxuKGE9dC5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBkKHQsaSksITA7aWYobihzKSl7aWYobih1KSlpZihlLmhhc0NoaWxkTm9kZXMoKSlpZihuKGE9YykmJm4oYT1hLmRvbVByb3BzKSYmbihhPWEuaW5uZXJIVE1MKSl7aWYoYSE9PWUuaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBsPSEwLGY9ZS5maXJzdENoaWxkLHA9MDtwPHUubGVuZ3RoO3ArKyl7aWYoIWZ8fCFPKGYsdVtwXSxpLG8pKXtsPSExO2JyZWFrfWY9Zi5uZXh0U2libGluZ31pZighbHx8ZilyZXR1cm4hMX1lbHNlIGgodCx1LGkpO2lmKG4oYykpe3ZhciB2PSExO2Zvcih2YXIgbSBpbiBjKWlmKCFBKG0pKXt2PSEwLHkodCxpKTticmVha30hdiYmYy5jbGFzcyYmZXQoYy5jbGFzcyl9fWVsc2UgZS5kYXRhIT09dC50ZXh0JiYoZS5kYXRhPXQudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKGUsaSxvLGEpe2lmKCF0KGkpKXt2YXIgYyxsPSExLHA9W107aWYodChlKSlsPSEwLGYoaSxwKTtlbHNle3ZhciBkPW4oZS5ub2RlVHlwZSk7aWYoIWQmJmlyKGUsaSkpeChlLGkscCxudWxsLG51bGwsYSk7ZWxzZXtpZihkKXtpZigxPT09ZS5ub2RlVHlwZSYmZS5oYXNBdHRyaWJ1dGUoTCkmJihlLnJlbW92ZUF0dHJpYnV0ZShMKSxvPSEwKSxyKG8pJiZPKGUsaSxwKSlyZXR1cm4gayhpLHAsITApLGU7Yz1lLGU9bmV3IHBlKHUudGFnTmFtZShjKS50b0xvd2VyQ2FzZSgpLHt9LFtdLHZvaWQgMCxjKX12YXIgdj1lLmVsbSxoPXUucGFyZW50Tm9kZSh2KTtpZihmKGkscCx2Ll9sZWF2ZUNiP251bGw6aCx1Lm5leHRTaWJsaW5nKHYpKSxuKGkucGFyZW50KSlmb3IodmFyIHk9aS5wYXJlbnQsZz1tKGkpO3k7KXtmb3IodmFyIF89MDtfPHMuZGVzdHJveS5sZW5ndGg7KytfKXMuZGVzdHJveVtfXSh5KTtpZih5LmVsbT1pLmVsbSxnKXtmb3IodmFyIHc9MDt3PHMuY3JlYXRlLmxlbmd0aDsrK3cpcy5jcmVhdGVbd10obnIseSk7dmFyIEM9eS5kYXRhLmhvb2suaW5zZXJ0O2lmKEMubWVyZ2VkKWZvcih2YXIgQT0xO0E8Qy5mbnMubGVuZ3RoO0ErKylDLmZuc1tBXSgpfWVsc2UgdHIoeSk7eT15LnBhcmVudH1uKGgpPyQoW2VdLDAsMCk6bihlLnRhZykmJmIoZSl9fXJldHVybiBrKGkscCxsKSxpLmVsbX1uKGUpJiZiKGUpfX0oe25vZGVPcHM6UW4sbW9kdWxlczpbbXIseHIsbmksb2ksbWksej97Y3JlYXRlOlVpLGFjdGl2YXRlOlVpLHJlbW92ZTpmdW5jdGlvbihlLHQpeyEwIT09ZS5kYXRhLnNob3c/UmkoZSx0KTp0KCl9fTp7fV0uY29uY2F0KHByKX0pO1cmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmUudm1vZGVsJiZYaShlLCJpbnB1dCIpfSk7dmFyIFZpPXtpbnNlcnRlZDpmdW5jdGlvbihlLHQsbixyKXsic2VsZWN0Ij09PW4udGFnPyhyLmVsbSYmIXIuZWxtLl92T3B0aW9ucz9pdChuLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7VmkuY29tcG9uZW50VXBkYXRlZChlLHQsbil9KTpLaShlLHQsbi5jb250ZXh0KSxlLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpKTooInRleHRhcmVhIj09PW4udGFnfHxYbihlLnR5cGUpKSYmKGUuX3ZNb2RpZmllcnM9dC5tb2RpZmllcnMsdC5tb2RpZmllcnMubGF6eXx8KGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25zdGFydCIsWmkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLEdpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsR2kpLFcmJihlLnZtb2RlbD0hMCkpKX0sY29tcG9uZW50VXBkYXRlZDpmdW5jdGlvbihlLHQsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7S2koZSx0LG4uY29udGV4dCk7dmFyIHI9ZS5fdk9wdGlvbnMsaT1lLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpO2lmKGkuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiFOKGUsclt0XSl9KSkoZS5tdWx0aXBsZT90LnZhbHVlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHFpKGUsaSl9KTp0LnZhbHVlIT09dC5vbGRWYWx1ZSYmcWkodC52YWx1ZSxpKSkmJlhpKGUsImNoYW5nZSIpfX19O2Z1bmN0aW9uIEtpKGUsdCxuKXtKaShlLHQsbiksKHF8fFopJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SmkoZSx0LG4pfSwwKX1mdW5jdGlvbiBKaShlLHQsbil7dmFyIHI9dC52YWx1ZSxpPWUubXVsdGlwbGU7aWYoIWl8fEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbyxhLHM9MCxjPWUub3B0aW9ucy5sZW5ndGg7czxjO3MrKylpZihhPWUub3B0aW9uc1tzXSxpKW89aihyLFdpKGEpKT4tMSxhLnNlbGVjdGVkIT09byYmKGEuc2VsZWN0ZWQ9byk7ZWxzZSBpZihOKFdpKGEpLHIpKXJldHVybiB2b2lkKGUuc2VsZWN0ZWRJbmRleCE9PXMmJihlLnNlbGVjdGVkSW5kZXg9cykpO2l8fChlLnNlbGVjdGVkSW5kZXg9LTEpfX1mdW5jdGlvbiBxaShlLHQpe3JldHVybiB0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiFOKHQsZSl9KX1mdW5jdGlvbiBXaShlKXtyZXR1cm4iX3ZhbHVlImluIGU/ZS5fdmFsdWU6ZS52YWx1ZX1mdW5jdGlvbiBaaShlKXtlLnRhcmdldC5jb21wb3Npbmc9ITB9ZnVuY3Rpb24gR2koZSl7ZS50YXJnZXQuY29tcG9zaW5nJiYoZS50YXJnZXQuY29tcG9zaW5nPSExLFhpKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiBYaShlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7bi5pbml0RXZlbnQodCwhMCwhMCksZS5kaXNwYXRjaEV2ZW50KG4pfWZ1bmN0aW9uIFlpKGUpe3JldHVybiFlLmNvbXBvbmVudEluc3RhbmNlfHxlLmRhdGEmJmUuZGF0YS50cmFuc2l0aW9uP2U6WWkoZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpfXZhciBRaT17bW9kZWw6Vmksc2hvdzp7YmluZDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dC52YWx1ZSxpPShuPVlpKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPWUuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PWUuc3R5bGUuZGlzcGxheT8iIjplLnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsUGkobixmdW5jdGlvbigpe2Uuc3R5bGUuZGlzcGxheT1vfSkpOmUuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQudmFsdWU7IXIhPSF0Lm9sZFZhbHVlJiYoKG49WWkobikpLmRhdGEmJm4uZGF0YS50cmFuc2l0aW9uPyhuLmRhdGEuc2hvdz0hMCxyP1BpKG4sZnVuY3Rpb24oKXtlLnN0eWxlLmRpc3BsYXk9ZS5fX3ZPcmlnaW5hbERpc3BsYXl9KTpSaShuLGZ1bmN0aW9uKCl7ZS5zdHlsZS5kaXNwbGF5PSJub25lIn0pKTplLnN0eWxlLmRpc3BsYXk9cj9lLl9fdk9yaWdpbmFsRGlzcGxheToibm9uZSIpfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0LG4scixpKXtpfHwoZS5zdHlsZS5kaXNwbGF5PWUuX192T3JpZ2luYWxEaXNwbGF5KX19fSxlbz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gdG8oZSl7dmFyIHQ9ZSYmZS5jb21wb25lbnRPcHRpb25zO3JldHVybiB0JiZ0LkN0b3Iub3B0aW9ucy5hYnN0cmFjdD90byh6dCh0LmNoaWxkcmVuKSk6ZX1mdW5jdGlvbiBubyhlKXt2YXIgdD17fSxuPWUuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKXRbcl09ZVtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpdFtiKG8pXT1pW29dO3JldHVybiB0fWZ1bmN0aW9uIHJvKGUsdCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHQudGFnKSlyZXR1cm4gZSgia2VlcC1hbGl2ZSIse3Byb3BzOnQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGF9KX12YXIgaW89ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnfHxVdChlKX0sb289ZnVuY3Rpb24oZSl7cmV0dXJuInNob3ciPT09ZS5uYW1lfSxhbz17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6ZW8sYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKG4mJihuPW4uZmlsdGVyKGlvKSkubGVuZ3RoKXt2YXIgcj10aGlzLm1vZGUsbz1uWzBdO2lmKGZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnBhcmVudDspaWYoZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gbzt2YXIgYT10byhvKTtpZighYSlyZXR1cm4gbztpZih0aGlzLl9sZWF2aW5nKXJldHVybiBybyhlLG8pO3ZhciBzPSJfX3RyYW5zaXRpb24tIit0aGlzLl91aWQrIi0iO2Eua2V5PW51bGw9PWEua2V5P2EuaXNDb21tZW50P3MrImNvbW1lbnQiOnMrYS50YWc6aShhLmtleSk/MD09PVN0cmluZyhhLmtleSkuaW5kZXhPZihzKT9hLmtleTpzK2Eua2V5OmEua2V5O3ZhciBjPShhLmRhdGF8fChhLmRhdGE9e30pKS50cmFuc2l0aW9uPW5vKHRoaXMpLHU9dGhpcy5fdm5vZGUsbD10byh1KTtpZihhLmRhdGEuZGlyZWN0aXZlcyYmYS5kYXRhLmRpcmVjdGl2ZXMuc29tZShvbykmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5rZXk9PT1lLmtleSYmdC50YWc9PT1lLnRhZ30oYSxsKSYmIVV0KGwpJiYoIWwuY29tcG9uZW50SW5zdGFuY2V8fCFsLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgZj1sLmRhdGEudHJhbnNpdGlvbj1BKHt9LGMpO2lmKCJvdXQtaW4iPT09cilyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxpdChmLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3QuX2xlYXZpbmc9ITEsdC4kZm9yY2VVcGRhdGUoKX0pLHJvKGUsbyk7aWYoImluLW91dCI9PT1yKXtpZihVdChhKSlyZXR1cm4gdTt2YXIgcCxkPWZ1bmN0aW9uKCl7cCgpfTtpdChjLCJhZnRlckVudGVyIixkKSxpdChjLCJlbnRlckNhbmNlbGxlZCIsZCksaXQoZiwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24oZSl7cD1lfSl9fXJldHVybiBvfX19LHNvPUEoe3RhZzpTdHJpbmcsbW92ZUNsYXNzOlN0cmluZ30sZW8pO2Z1bmN0aW9uIGNvKGUpe2UuZWxtLl9tb3ZlQ2ImJmUuZWxtLl9tb3ZlQ2IoKSxlLmVsbS5fZW50ZXJDYiYmZS5lbG0uX2VudGVyQ2IoKX1mdW5jdGlvbiB1byhlKXtlLmRhdGEubmV3UG9zPWUuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIGxvKGUpe3ZhciB0PWUuZGF0YS5wb3Msbj1lLmRhdGEubmV3UG9zLHI9dC5sZWZ0LW4ubGVmdCxpPXQudG9wLW4udG9wO2lmKHJ8fGkpe2UuZGF0YS5tb3ZlZD0hMDt2YXIgbz1lLmVsbS5zdHlsZTtvLnRyYW5zZm9ybT1vLldlYmtpdFRyYW5zZm9ybT0idHJhbnNsYXRlKCIrcisicHgsIitpKyJweCkiLG8udHJhbnNpdGlvbkR1cmF0aW9uPSIwcyJ9fWRlbGV0ZSBzby5tb2RlO3ZhciBmbz17VHJhbnNpdGlvbjphbyxUcmFuc2l0aW9uR3JvdXA6e3Byb3BzOnNvLGJlZm9yZU1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3VwZGF0ZTt0aGlzLl91cGRhdGU9ZnVuY3Rpb24obixyKXt2YXIgaT1adChlKTtlLl9fcGF0Y2hfXyhlLl92bm9kZSxlLmtlcHQsITEsITApLGUuX3Zub2RlPWUua2VwdCxpKCksdC5jYWxsKGUsbixyKX19LHJlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGhpcy5wcmV2Q2hpbGRyZW49dGhpcy5jaGlsZHJlbixpPXRoaXMuJHNsb3RzLmRlZmF1bHR8fFtdLG89dGhpcy5jaGlsZHJlbj1bXSxhPW5vKHRoaXMpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGM9aVtzXTtjLnRhZyYmbnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSYmKG8ucHVzaChjKSxuW2Mua2V5XT1jLChjLmRhdGF8fChjLmRhdGE9e30pKS50cmFuc2l0aW9uPWEpfWlmKHIpe2Zvcih2YXIgdT1bXSxsPVtdLGY9MDtmPHIubGVuZ3RoO2YrKyl7dmFyIHA9cltmXTtwLmRhdGEudHJhbnNpdGlvbj1hLHAuZGF0YS5wb3M9cC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbltwLmtleV0/dS5wdXNoKHApOmwucHVzaChwKX10aGlzLmtlcHQ9ZSh0LG51bGwsdSksdGhpcy5yZW1vdmVkPWx9cmV0dXJuIGUodCxudWxsLG8pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcmV2Q2hpbGRyZW4sdD10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2UubGVuZ3RoJiZ0aGlzLmhhc01vdmUoZVswXS5lbG0sdCkmJihlLmZvckVhY2goY28pLGUuZm9yRWFjaCh1byksZS5mb3JFYWNoKGxvKSx0aGlzLl9yZWZsb3c9ZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5tb3ZlZCl7dmFyIG49ZS5lbG0scj1uLnN0eWxlO05pKG4sdCksci50cmFuc2Zvcm09ci5XZWJraXRUcmFuc2Zvcm09ci50cmFuc2l0aW9uRHVyYXRpb249IiIsbi5hZGRFdmVudExpc3RlbmVyKEFpLG4uX21vdmVDYj1mdW5jdGlvbiBlKHIpe3ImJnIudGFyZ2V0IT09bnx8ciYmIS90cmFuc2Zvcm0kLy50ZXN0KHIucHJvcGVydHlOYW1lKXx8KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihBaSxlKSxuLl9tb3ZlQ2I9bnVsbCxqaShuLHQpKX0pfX0pKX0sbWV0aG9kczp7aGFzTW92ZTpmdW5jdGlvbihlLHQpe2lmKCF3aSlyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBuPWUuY2xvbmVOb2RlKCk7ZS5fdHJhbnNpdGlvbkNsYXNzZXMmJmUuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oZSl7X2kobixlKX0pLGdpKG4sdCksbi5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLiRlbC5hcHBlbmRDaGlsZChuKTt2YXIgcj1NaShuKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQobiksdGhpcy5faGFzTW92ZT1yLmhhc1RyYW5zZm9ybX19fX07d24uY29uZmlnLm11c3RVc2VQcm9wPWpuLHduLmNvbmZpZy5pc1Jlc2VydmVkVGFnPVduLHduLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1Fbix3bi5jb25maWcuZ2V0VGFnTmFtZXNwYWNlPVpuLHduLmNvbmZpZy5pc1Vua25vd25FbGVtZW50PWZ1bmN0aW9uKGUpe2lmKCF6KXJldHVybiEwO2lmKFduKGUpKXJldHVybiExO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLG51bGwhPUduW2VdKXJldHVybiBHbltlXTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBlLmluZGV4T2YoIi0iKT4tMT9HbltlXT10LmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8dC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpHbltlXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KHQudG9TdHJpbmcoKSl9LEEod24ub3B0aW9ucy5kaXJlY3RpdmVzLFFpKSxBKHduLm9wdGlvbnMuY29tcG9uZW50cyxmbyksd24ucHJvdG90eXBlLl9fcGF0Y2hfXz16P3ppOlMsd24ucHJvdG90eXBlLiRtb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGUuJGVsPXQsZS4kb3B0aW9ucy5yZW5kZXJ8fChlLiRvcHRpb25zLnJlbmRlcj12ZSksWXQoZSwiYmVmb3JlTW91bnQiKSxyPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlKGUuX3JlbmRlcigpLG4pfSxuZXcgZm4oZSxyLFMse2JlZm9yZTpmdW5jdGlvbigpe2UuX2lzTW91bnRlZCYmIWUuX2lzRGVzdHJveWVkJiZZdChlLCJiZWZvcmVVcGRhdGUiKX19LCEwKSxuPSExLG51bGw9PWUuJHZub2RlJiYoZS5faXNNb3VudGVkPSEwLFl0KGUsIm1vdW50ZWQiKSksZX0odGhpcyxlPWUmJno/WW4oZSk6dm9pZCAwLHQpfSx6JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ri5kZXZ0b29scyYmbmUmJm5lLmVtaXQoImluaXQiLHduKX0sMCk7dmFyIHBvPS9ce1x7KCg/Oi58XHI/XG4pKz8pXH1cfS9nLHZvPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxobz1nKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0ucmVwbGFjZSh2bywiXFwkJiIpLG49ZVsxXS5yZXBsYWNlKHZvLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAodCsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSk7dmFyIG1vPXtzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsImNsYXNzIik7biYmKGUuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPUlyKGUsImNsYXNzIiwhMSk7ciYmKGUuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVybiBlLnN0YXRpY0NsYXNzJiYodCs9InN0YXRpY0NsYXNzOiIrZS5zdGF0aWNDbGFzcysiLCIpLGUuY2xhc3NCaW5kaW5nJiYodCs9ImNsYXNzOiIrZS5jbGFzc0JpbmRpbmcrIiwiKSx0fX07dmFyIHlvLGdvPXtzdGF0aWNLZXlzOlsic3RhdGljU3R5bGUiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsInN0eWxlIik7biYmKGUuc3RhdGljU3R5bGU9SlNPTi5zdHJpbmdpZnkoYWkobikpKTt2YXIgcj1JcihlLCJzdHlsZSIsITEpO3ImJihlLnN0eWxlQmluZGluZz1yKX0sZ2VuRGF0YTpmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZS5zdGF0aWNTdHlsZSYmKHQrPSJzdGF0aWNTdHlsZToiK2Uuc3RhdGljU3R5bGUrIiwiKSxlLnN0eWxlQmluZGluZyYmKHQrPSJzdHlsZTooIitlLnN0eWxlQmluZGluZysiKSwiKSx0fX0sX289ZnVuY3Rpb24oZSl7cmV0dXJuKHlvPXlvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUseW8udGV4dENvbnRlbnR9LGJvPXAoImFyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyIiksJG89cCgiY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSIpLHdvPXAoImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCxkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaGVhZCxoZWFkZXIsaGdyb3VwLGhyLGh0bWwsbGVnZW5kLGxpLG1lbnVpdGVtLG1ldGEsb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpdGxlLHRyLHRyYWNrIiksQ289L15ccyooW15ccyInPD5cLz1dKykoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vLHhvPS9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy8sa289IlthLXpBLVpfXVtcXC1cXC4wLTlfYS16QS1aIitQLnNvdXJjZSsiXSoiLEFvPSIoKD86IitrbysiXFw6KT8iK2tvKyIpIixPbz1uZXcgUmVnRXhwKCJePCIrQW8pLFNvPS9eXHMqKFwvPyk+LyxUbz1uZXcgUmVnRXhwKCJePFxcLyIrQW8rIltePl0qPiIpLEVvPS9ePCFET0NUWVBFIFtePl0rPi9pLE5vPS9ePCFcLS0vLGpvPS9ePCFcWy8sRG89cCgic2NyaXB0LHN0eWxlLHRleHRhcmVhIiwhMCksTG89e30sTW89eyImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIicsIiZhbXA7IjoiJiIsIiYjMTA7IjoiXG4iLCImIzk7IjoiXHQiLCImIzM5OyI6IicifSxJbz0vJig/Omx0fGd0fHF1b3R8YW1wfCMzOSk7L2csRm89LyYoPzpsdHxndHxxdW90fGFtcHwjMzl8IzEwfCM5KTsvZyxQbz1wKCJwcmUsdGV4dGFyZWEiLCEwKSxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZQbyhlKSYmIlxuIj09PXRbMF19O2Z1bmN0aW9uIEhvKGUsdCl7dmFyIG49dD9GbzpJbztyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIE1vW2VdfSl9dmFyIEJvLFVvLHpvLFZvLEtvLEpvLHFvLFdvLFpvPS9eQHxedi1vbjovLEdvPS9edi18XkB8Xjp8XiMvLFhvPS8oW1xzXFNdKj8pXHMrKD86aW58b2YpXHMrKFtcc1xTXSopLyxZbz0vLChbXixcfVxdXSopKD86LChbXixcfVxdXSopKT8kLyxRbz0vXlwofFwpJC9nLGVhPS9eXFsuKlxdJC8sdGE9LzooLiopJC8sbmE9L146fF5cLnxedi1iaW5kOi8scmE9L1wuW14uXF1dKyg/PVteXF1dKiQpL2csaWE9L152LXNsb3QoOnwkKXxeIy8sb2E9L1tcclxuXS8sYWE9L1xzKy9nLHNhPWcoX28pLGNhPSJfZW1wdHlfIjtmdW5jdGlvbiB1YShlLHQsbil7cmV0dXJue3R5cGU6MSx0YWc6ZSxhdHRyc0xpc3Q6dCxhdHRyc01hcDptYSh0KSxyYXdBdHRyc01hcDp7fSxwYXJlbnQ6bixjaGlsZHJlbjpbXX19ZnVuY3Rpb24gbGEoZSx0KXtCbz10Lndhcm58fFNyLEpvPXQuaXNQcmVUYWd8fFQscW89dC5tdXN0VXNlUHJvcHx8VCxXbz10LmdldFRhZ05hbWVzcGFjZXx8VDt0LmlzUmVzZXJ2ZWRUYWc7em89VHIodC5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksVm89VHIodC5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksS289VHIodC5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLFVvPXQuZGVsaW1pdGVyczt2YXIgbixyLGk9W10sbz0hMSE9PXQucHJlc2VydmVXaGl0ZXNwYWNlLGE9dC53aGl0ZXNwYWNlLHM9ITEsYz0hMTtmdW5jdGlvbiB1KGUpe2lmKGwoZSksc3x8ZS5wcm9jZXNzZWR8fChlPWZhKGUsdCkpLGkubGVuZ3RofHxlPT09bnx8bi5pZiYmKGUuZWxzZWlmfHxlLmVsc2UpJiZkYShuLHtleHA6ZS5lbHNlaWYsYmxvY2s6ZX0pLHImJiFlLmZvcmJpZGRlbilpZihlLmVsc2VpZnx8ZS5lbHNlKWE9ZSwodT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtmb3IoO3QtLTspe2lmKDE9PT1lW3RdLnR5cGUpcmV0dXJuIGVbdF07ZS5wb3AoKX19KHIuY2hpbGRyZW4pKSYmdS5pZiYmZGEodSx7ZXhwOmEuZWxzZWlmLGJsb2NrOmF9KTtlbHNle2lmKGUuc2xvdFNjb3BlKXt2YXIgbz1lLnNsb3RUYXJnZXR8fCciZGVmYXVsdCInOyhyLnNjb3BlZFNsb3RzfHwoci5zY29wZWRTbG90cz17fSkpW29dPWV9ci5jaGlsZHJlbi5wdXNoKGUpLGUucGFyZW50PXJ9dmFyIGEsdTtlLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLnNsb3RTY29wZX0pLGwoZSksZS5wcmUmJihzPSExKSxKbyhlLnRhZykmJihjPSExKTtmb3IodmFyIGY9MDtmPEtvLmxlbmd0aDtmKyspS29bZl0oZSx0KX1mdW5jdGlvbiBsKGUpe2lmKCFjKWZvcih2YXIgdDsodD1lLmNoaWxkcmVuW2UuY2hpbGRyZW4ubGVuZ3RoLTFdKSYmMz09PXQudHlwZSYmIiAiPT09dC50ZXh0OyllLmNoaWxkcmVuLnBvcCgpfXJldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9W10sbz10LmV4cGVjdEhUTUwsYT10LmlzVW5hcnlUYWd8fFQscz10LmNhbkJlTGVmdE9wZW5UYWd8fFQsYz0wO2U7KXtpZihuPWUsciYmRG8ocikpe3ZhciB1PTAsbD1yLnRvTG93ZXJDYXNlKCksZj1Mb1tsXXx8KExvW2xdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrbCsiW14+XSo+KSIsImkiKSkscD1lLnJlcGxhY2UoZixmdW5jdGlvbihlLG4scil7cmV0dXJuIHU9ci5sZW5ndGgsRG8obCl8fCJub3NjcmlwdCI9PT1sfHwobj1uLnJlcGxhY2UoLzwhXC0tKFtcc1xTXSo/KS0tPi9nLCIkMSIpLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCIkMSIpKSxSbyhsLG4pJiYobj1uLnNsaWNlKDEpKSx0LmNoYXJzJiZ0LmNoYXJzKG4pLCIifSk7Yys9ZS5sZW5ndGgtcC5sZW5ndGgsZT1wLEEobCxjLXUsYyl9ZWxzZXt2YXIgZD1lLmluZGV4T2YoIjwiKTtpZigwPT09ZCl7aWYoTm8udGVzdChlKSl7dmFyIHY9ZS5pbmRleE9mKCItLVx4M2UiKTtpZih2Pj0wKXt0LnNob3VsZEtlZXBDb21tZW50JiZ0LmNvbW1lbnQoZS5zdWJzdHJpbmcoNCx2KSxjLGMrdiszKSxDKHYrMyk7Y29udGludWV9fWlmKGpvLnRlc3QoZSkpe3ZhciBoPWUuaW5kZXhPZigiXT4iKTtpZihoPj0wKXtDKGgrMik7Y29udGludWV9fXZhciBtPWUubWF0Y2goRW8pO2lmKG0pe0MobVswXS5sZW5ndGgpO2NvbnRpbnVlfXZhciB5PWUubWF0Y2goVG8pO2lmKHkpe3ZhciBnPWM7Qyh5WzBdLmxlbmd0aCksQSh5WzFdLGcsYyk7Y29udGludWV9dmFyIF89eCgpO2lmKF8pe2soXyksUm8oXy50YWdOYW1lLGUpJiZDKDEpO2NvbnRpbnVlfX12YXIgYj12b2lkIDAsJD12b2lkIDAsdz12b2lkIDA7aWYoZD49MCl7Zm9yKCQ9ZS5zbGljZShkKTshKFRvLnRlc3QoJCl8fE9vLnRlc3QoJCl8fE5vLnRlc3QoJCl8fGpvLnRlc3QoJCl8fCh3PSQuaW5kZXhPZigiPCIsMSkpPDApOylkKz13LCQ9ZS5zbGljZShkKTtiPWUuc3Vic3RyaW5nKDAsZCl9ZDwwJiYoYj1lKSxiJiZDKGIubGVuZ3RoKSx0LmNoYXJzJiZiJiZ0LmNoYXJzKGIsYy1iLmxlbmd0aCxjKX1pZihlPT09bil7dC5jaGFycyYmdC5jaGFycyhlKTticmVha319ZnVuY3Rpb24gQyh0KXtjKz10LGU9ZS5zdWJzdHJpbmcodCl9ZnVuY3Rpb24geCgpe3ZhciB0PWUubWF0Y2goT28pO2lmKHQpe3ZhciBuLHIsaT17dGFnTmFtZTp0WzFdLGF0dHJzOltdLHN0YXJ0OmN9O2ZvcihDKHRbMF0ubGVuZ3RoKTshKG49ZS5tYXRjaChTbykpJiYocj1lLm1hdGNoKHhvKXx8ZS5tYXRjaChDbykpOylyLnN0YXJ0PWMsQyhyWzBdLmxlbmd0aCksci5lbmQ9YyxpLmF0dHJzLnB1c2gocik7aWYobilyZXR1cm4gaS51bmFyeVNsYXNoPW5bMV0sQyhuWzBdLmxlbmd0aCksaS5lbmQ9YyxpfX1mdW5jdGlvbiBrKGUpe3ZhciBuPWUudGFnTmFtZSxjPWUudW5hcnlTbGFzaDtvJiYoInAiPT09ciYmd28obikmJkEocikscyhuKSYmcj09PW4mJkEobikpO2Zvcih2YXIgdT1hKG4pfHwhIWMsbD1lLmF0dHJzLmxlbmd0aCxmPW5ldyBBcnJheShsKSxwPTA7cDxsO3ArKyl7dmFyIGQ9ZS5hdHRyc1twXSx2PWRbM118fGRbNF18fGRbNV18fCIiLGg9ImEiPT09biYmImhyZWYiPT09ZFsxXT90LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzO2ZbcF09e25hbWU6ZFsxXSx2YWx1ZTpIbyh2LGgpfX11fHwoaS5wdXNoKHt0YWc6bixsb3dlckNhc2VkVGFnOm4udG9Mb3dlckNhc2UoKSxhdHRyczpmLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSkscj1uKSx0LnN0YXJ0JiZ0LnN0YXJ0KG4sZix1LGUuc3RhcnQsZS5lbmQpfWZ1bmN0aW9uIEEoZSxuLG8pe3ZhciBhLHM7aWYobnVsbD09biYmKG49YyksbnVsbD09byYmKG89YyksZSlmb3Iocz1lLnRvTG93ZXJDYXNlKCksYT1pLmxlbmd0aC0xO2E+PTAmJmlbYV0ubG93ZXJDYXNlZFRhZyE9PXM7YS0tKTtlbHNlIGE9MDtpZihhPj0wKXtmb3IodmFyIHU9aS5sZW5ndGgtMTt1Pj1hO3UtLSl0LmVuZCYmdC5lbmQoaVt1XS50YWcsbixvKTtpLmxlbmd0aD1hLHI9YSYmaVthLTFdLnRhZ31lbHNlImJyIj09PXM/dC5zdGFydCYmdC5zdGFydChlLFtdLCEwLG4sbyk6InAiPT09cyYmKHQuc3RhcnQmJnQuc3RhcnQoZSxbXSwhMSxuLG8pLHQuZW5kJiZ0LmVuZChlLG4sbykpfUEoKX0oZSx7d2FybjpCbyxleHBlY3RIVE1MOnQuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOnQuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOnQuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczp0LnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixzaG91bGRLZWVwQ29tbWVudDp0LmNvbW1lbnRzLG91dHB1dFNvdXJjZVJhbmdlOnQub3V0cHV0U291cmNlUmFuZ2Usc3RhcnQ6ZnVuY3Rpb24oZSxvLGEsbCxmKXt2YXIgcD1yJiZyLm5zfHxXbyhlKTtxJiYic3ZnIj09PXAmJihvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07eWEudGVzdChyLm5hbWUpfHwoci5uYW1lPXIubmFtZS5yZXBsYWNlKGdhLCIiKSx0LnB1c2gocikpfXJldHVybiB0fShvKSk7dmFyIGQsdj11YShlLG8scik7cCYmKHYubnM9cCksInN0eWxlIiE9PShkPXYpLnRhZyYmKCJzY3JpcHQiIT09ZC50YWd8fGQuYXR0cnNNYXAudHlwZSYmInRleHQvamF2YXNjcmlwdCIhPT1kLmF0dHJzTWFwLnR5cGUpfHx0ZSgpfHwodi5mb3JiaWRkZW49ITApO2Zvcih2YXIgaD0wO2g8Vm8ubGVuZ3RoO2grKyl2PVZvW2hdKHYsdCl8fHY7c3x8KCFmdW5jdGlvbihlKXtudWxsIT1GcihlLCJ2LXByZSIpJiYoZS5wcmU9ITApfSh2KSx2LnByZSYmKHM9ITApKSxKbyh2LnRhZykmJihjPSEwKSxzP2Z1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cnNMaXN0LG49dC5sZW5ndGg7aWYobilmb3IodmFyIHI9ZS5hdHRycz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspcltpXT17bmFtZTp0W2ldLm5hbWUsdmFsdWU6SlNPTi5zdHJpbmdpZnkodFtpXS52YWx1ZSl9LG51bGwhPXRbaV0uc3RhcnQmJihyW2ldLnN0YXJ0PXRbaV0uc3RhcnQscltpXS5lbmQ9dFtpXS5lbmQpO2Vsc2UgZS5wcmV8fChlLnBsYWluPSEwKX0odik6di5wcm9jZXNzZWR8fChwYSh2KSxmdW5jdGlvbihlKXt2YXIgdD1GcihlLCJ2LWlmIik7aWYodCllLmlmPXQsZGEoZSx7ZXhwOnQsYmxvY2s6ZX0pO2Vsc2V7bnVsbCE9RnIoZSwidi1lbHNlIikmJihlLmVsc2U9ITApO3ZhciBuPUZyKGUsInYtZWxzZS1pZiIpO24mJihlLmVsc2VpZj1uKX19KHYpLGZ1bmN0aW9uKGUpe251bGwhPUZyKGUsInYtb25jZSIpJiYoZS5vbmNlPSEwKX0odikpLG58fChuPXYpLGE/dSh2KToocj12LGkucHVzaCh2KSl9LGVuZDpmdW5jdGlvbihlLHQsbil7dmFyIG89aVtpLmxlbmd0aC0xXTtpLmxlbmd0aC09MSxyPWlbaS5sZW5ndGgtMV0sdShvKX0sY2hhcnM6ZnVuY3Rpb24oZSx0LG4pe2lmKHImJighcXx8InRleHRhcmVhIiE9PXIudGFnfHxyLmF0dHJzTWFwLnBsYWNlaG9sZGVyIT09ZSkpe3ZhciBpLHUsbCxmPXIuY2hpbGRyZW47aWYoZT1jfHxlLnRyaW0oKT8ic2NyaXB0Ij09PShpPXIpLnRhZ3x8InN0eWxlIj09PWkudGFnP2U6c2EoZSk6Zi5sZW5ndGg/YT8iY29uZGVuc2UiPT09YSYmb2EudGVzdChlKT8iIjoiICI6bz8iICI6IiI6IiIpY3x8ImNvbmRlbnNlIiE9PWF8fChlPWUucmVwbGFjZShhYSwiICIpKSwhcyYmIiAiIT09ZSYmKHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P2hvKHQpOnBvO2lmKG4udGVzdChlKSl7Zm9yKHZhciByLGksbyxhPVtdLHM9W10sYz1uLmxhc3RJbmRleD0wO3I9bi5leGVjKGUpOyl7KGk9ci5pbmRleCk+YyYmKHMucHVzaChvPWUuc2xpY2UoYyxpKSksYS5wdXNoKEpTT04uc3RyaW5naWZ5KG8pKSk7dmFyIHU9QXIoclsxXS50cmltKCkpO2EucHVzaCgiX3MoIit1KyIpIikscy5wdXNoKHsiQGJpbmRpbmciOnV9KSxjPWkrclswXS5sZW5ndGh9cmV0dXJuIGM8ZS5sZW5ndGgmJihzLnB1c2gobz1lLnNsaWNlKGMpKSxhLnB1c2goSlNPTi5zdHJpbmdpZnkobykpKSx7ZXhwcmVzc2lvbjphLmpvaW4oIisiKSx0b2tlbnM6c319fShlLFVvKSk/bD17dHlwZToyLGV4cHJlc3Npb246dS5leHByZXNzaW9uLHRva2Vuczp1LnRva2Vucyx0ZXh0OmV9OiIgIj09PWUmJmYubGVuZ3RoJiYiICI9PT1mW2YubGVuZ3RoLTFdLnRleHR8fChsPXt0eXBlOjMsdGV4dDplfSksbCYmZi5wdXNoKGwpfX0sY29tbWVudDpmdW5jdGlvbihlLHQsbil7aWYocil7dmFyIGk9e3R5cGU6Myx0ZXh0OmUsaXNDb21tZW50OiEwfTtyLmNoaWxkcmVuLnB1c2goaSl9fX0pLG59ZnVuY3Rpb24gZmEoZSx0KXt2YXIgbixyOyhyPUlyKG49ZSwia2V5IikpJiYobi5rZXk9ciksZS5wbGFpbj0hZS5rZXkmJiFlLnNjb3BlZFNsb3RzJiYhZS5hdHRyc0xpc3QubGVuZ3RoLGZ1bmN0aW9uKGUpe3ZhciB0PUlyKGUsInJlZiIpO3QmJihlLnJlZj10LGUucmVmSW5Gb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IoO3Q7KXtpZih2b2lkIDAhPT10LmZvcilyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfShlKSl9KGUpLGZ1bmN0aW9uKGUpe3ZhciB0OyJ0ZW1wbGF0ZSI9PT1lLnRhZz8odD1GcihlLCJzY29wZSIpLGUuc2xvdFNjb3BlPXR8fEZyKGUsInNsb3Qtc2NvcGUiKSk6KHQ9RnIoZSwic2xvdC1zY29wZSIpKSYmKGUuc2xvdFNjb3BlPXQpO3ZhciBuPUlyKGUsInNsb3QiKTtuJiYoZS5zbG90VGFyZ2V0PSciIic9PT1uPyciZGVmYXVsdCInOm4sZS5zbG90VGFyZ2V0RHluYW1pYz0hKCFlLmF0dHJzTWFwWyI6c2xvdCJdJiYhZS5hdHRyc01hcFsidi1iaW5kOnNsb3QiXSksInRlbXBsYXRlIj09PWUudGFnfHxlLnNsb3RTY29wZXx8TnIoZSwic2xvdCIsbixmdW5jdGlvbihlLHQpe3JldHVybiBlLnJhd0F0dHJzTWFwWyI6Iit0XXx8ZS5yYXdBdHRyc01hcFsidi1iaW5kOiIrdF18fGUucmF3QXR0cnNNYXBbdF19KGUsInNsb3QiKSkpO2lmKCJ0ZW1wbGF0ZSI9PT1lLnRhZyl7dmFyIHI9UHIoZSxpYSk7aWYocil7dmFyIGk9dmEociksbz1pLm5hbWUsYT1pLmR5bmFtaWM7ZS5zbG90VGFyZ2V0PW8sZS5zbG90VGFyZ2V0RHluYW1pYz1hLGUuc2xvdFNjb3BlPXIudmFsdWV8fGNhfX1lbHNle3ZhciBzPVByKGUsaWEpO2lmKHMpe3ZhciBjPWUuc2NvcGVkU2xvdHN8fChlLnNjb3BlZFNsb3RzPXt9KSx1PXZhKHMpLGw9dS5uYW1lLGY9dS5keW5hbWljLHA9Y1tsXT11YSgidGVtcGxhdGUiLFtdLGUpO3Auc2xvdFRhcmdldD1sLHAuc2xvdFRhcmdldER5bmFtaWM9ZixwLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKCFlLnNsb3RTY29wZSlyZXR1cm4gZS5wYXJlbnQ9cCwhMH0pLHAuc2xvdFNjb3BlPXMudmFsdWV8fGNhLGUuY2hpbGRyZW49W10sZS5wbGFpbj0hMX19fShlKSxmdW5jdGlvbihlKXsic2xvdCI9PT1lLnRhZyYmKGUuc2xvdE5hbWU9SXIoZSwibmFtZSIpKX0oZSksZnVuY3Rpb24oZSl7dmFyIHQ7KHQ9SXIoZSwiaXMiKSkmJihlLmNvbXBvbmVudD10KTtudWxsIT1GcihlLCJpbmxpbmUtdGVtcGxhdGUiKSYmKGUuaW5saW5lVGVtcGxhdGU9ITApfShlKTtmb3IodmFyIGk9MDtpPHpvLmxlbmd0aDtpKyspZT16b1tpXShlLHQpfHxlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyxjLHU9ZS5hdHRyc0xpc3Q7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYocj1pPXVbdF0ubmFtZSxvPXVbdF0udmFsdWUsR28udGVzdChyKSlpZihlLmhhc0JpbmRpbmdzPSEwLChhPWhhKHIucmVwbGFjZShHbywiIikpKSYmKHI9ci5yZXBsYWNlKHJhLCIiKSksbmEudGVzdChyKSlyPXIucmVwbGFjZShuYSwiIiksbz1BcihvKSwoYz1lYS50ZXN0KHIpKSYmKHI9ci5zbGljZSgxLC0xKSksYSYmKGEucHJvcCYmIWMmJiJpbm5lckh0bWwiPT09KHI9YihyKSkmJihyPSJpbm5lckhUTUwiKSxhLmNhbWVsJiYhYyYmKHI9YihyKSksYS5zeW5jJiYocz1CcihvLCIkZXZlbnQiKSxjP01yKGUsJyJ1cGRhdGU6IisoJytyKyIpIixzLG51bGwsITEsMCx1W3RdLCEwKTooTXIoZSwidXBkYXRlOiIrYihyKSxzLG51bGwsITEsMCx1W3RdKSxDKHIpIT09YihyKSYmTXIoZSwidXBkYXRlOiIrQyhyKSxzLG51bGwsITEsMCx1W3RdKSkpKSxhJiZhLnByb3B8fCFlLmNvbXBvbmVudCYmcW8oZS50YWcsZS5hdHRyc01hcC50eXBlLHIpP0VyKGUscixvLHVbdF0sYyk6TnIoZSxyLG8sdVt0XSxjKTtlbHNlIGlmKFpvLnRlc3Qocikpcj1yLnJlcGxhY2UoWm8sIiIpLChjPWVhLnRlc3QocikpJiYocj1yLnNsaWNlKDEsLTEpKSxNcihlLHIsbyxhLCExLDAsdVt0XSxjKTtlbHNle3ZhciBsPShyPXIucmVwbGFjZShHbywiIikpLm1hdGNoKHRhKSxmPWwmJmxbMV07Yz0hMSxmJiYocj1yLnNsaWNlKDAsLShmLmxlbmd0aCsxKSksZWEudGVzdChmKSYmKGY9Zi5zbGljZSgxLC0xKSxjPSEwKSksRHIoZSxyLGksbyxmLGMsYSx1W3RdKX1lbHNlIE5yKGUscixKU09OLnN0cmluZ2lmeShvKSx1W3RdKSwhZS5jb21wb25lbnQmJiJtdXRlZCI9PT1yJiZxbyhlLnRhZyxlLmF0dHJzTWFwLnR5cGUscikmJkVyKGUsciwidHJ1ZSIsdVt0XSl9KGUpLGV9ZnVuY3Rpb24gcGEoZSl7dmFyIHQ7aWYodD1GcihlLCJ2LWZvciIpKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKFhvKTtpZighdClyZXR1cm47dmFyIG49e307bi5mb3I9dFsyXS50cmltKCk7dmFyIHI9dFsxXS50cmltKCkucmVwbGFjZShRbywiIiksaT1yLm1hdGNoKFlvKTtpPyhuLmFsaWFzPXIucmVwbGFjZShZbywiIikudHJpbSgpLG4uaXRlcmF0b3IxPWlbMV0udHJpbSgpLGlbMl0mJihuLml0ZXJhdG9yMj1pWzJdLnRyaW0oKSkpOm4uYWxpYXM9cjtyZXR1cm4gbn0odCk7biYmQShlLG4pfX1mdW5jdGlvbiBkYShlLHQpe2UuaWZDb25kaXRpb25zfHwoZS5pZkNvbmRpdGlvbnM9W10pLGUuaWZDb25kaXRpb25zLnB1c2godCl9ZnVuY3Rpb24gdmEoZSl7dmFyIHQ9ZS5uYW1lLnJlcGxhY2UoaWEsIiIpO3JldHVybiB0fHwiIyIhPT1lLm5hbWVbMF0mJih0PSJkZWZhdWx0IiksZWEudGVzdCh0KT97bmFtZTp0LnNsaWNlKDEsLTEpLGR5bmFtaWM6ITB9OntuYW1lOiciJyt0KyciJyxkeW5hbWljOiExfX1mdW5jdGlvbiBoYShlKXt2YXIgdD1lLm1hdGNoKHJhKTtpZih0KXt2YXIgbj17fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5zbGljZSgxKV09ITB9KSxufX1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9e30sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W2Vbbl0ubmFtZV09ZVtuXS52YWx1ZTtyZXR1cm4gdH12YXIgeWE9L154bWxuczpOU1xkKy8sZ2E9L15OU1xkKzovO2Z1bmN0aW9uIF9hKGUpe3JldHVybiB1YShlLnRhZyxlLmF0dHJzTGlzdC5zbGljZSgpLGUucGFyZW50KX12YXIgYmE9W21vLGdvLHtwcmVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0Ij09PWUudGFnKXt2YXIgbixyPWUuYXR0cnNNYXA7aWYoIXJbInYtbW9kZWwiXSlyZXR1cm47aWYoKHJbIjp0eXBlIl18fHJbInYtYmluZDp0eXBlIl0pJiYobj1JcihlLCJ0eXBlIikpLHIudHlwZXx8bnx8IXJbInYtYmluZCJdfHwobj0iKCIrclsidi1iaW5kIl0rIikudHlwZSIpLG4pe3ZhciBpPUZyKGUsInYtaWYiLCEwKSxvPWk/IiYmKCIraSsiKSI6IiIsYT1udWxsIT1GcihlLCJ2LWVsc2UiLCEwKSxzPUZyKGUsInYtZWxzZS1pZiIsITApLGM9X2EoZSk7cGEoYyksanIoYywidHlwZSIsImNoZWNrYm94IiksZmEoYyx0KSxjLnByb2Nlc3NlZD0hMCxjLmlmPSIoIituKyIpPT09J2NoZWNrYm94JyIrbyxkYShjLHtleHA6Yy5pZixibG9jazpjfSk7dmFyIHU9X2EoZSk7RnIodSwidi1mb3IiLCEwKSxqcih1LCJ0eXBlIiwicmFkaW8iKSxmYSh1LHQpLGRhKGMse2V4cDoiKCIrbisiKT09PSdyYWRpbyciK28sYmxvY2s6dX0pO3ZhciBsPV9hKGUpO3JldHVybiBGcihsLCJ2LWZvciIsITApLGpyKGwsIjp0eXBlIixuKSxmYShsLHQpLGRhKGMse2V4cDppLGJsb2NrOmx9KSxhP2MuZWxzZT0hMDpzJiYoYy5lbHNlaWY9cyksY319fX1dO3ZhciAkYSx3YSxDYT17ZXhwZWN0SFRNTDohMCxtb2R1bGVzOmJhLGRpcmVjdGl2ZXM6e21vZGVsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LnZhbHVlLGk9dC5tb2RpZmllcnMsbz1lLnRhZyxhPWUuYXR0cnNNYXAudHlwZTtpZihlLmNvbXBvbmVudClyZXR1cm4gSHIoZSxyLGkpLCExO2lmKCJzZWxlY3QiPT09bykhZnVuY3Rpb24oZSx0LG4pe3ZhciByPSd2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pOyI7cj1yKyIgIitCcih0LCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxNcihlLCJjaGFuZ2UiLHIsbnVsbCwhMCl9KGUscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSkhZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4mJm4ubnVtYmVyLGk9SXIoZSwidmFsdWUiKXx8Im51bGwiLG89SXIoZSwidHJ1ZS12YWx1ZSIpfHwidHJ1ZSIsYT1JcihlLCJmYWxzZS12YWx1ZSIpfHwiZmFsc2UiO0VyKGUsImNoZWNrZWQiLCJBcnJheS5pc0FycmF5KCIrdCsiKT9faSgiK3QrIiwiK2krIik+LTEiKygidHJ1ZSI9PT1vPyI6KCIrdCsiKSI6IjpfcSgiK3QrIiwiK28rIikiKSksTXIoZSwiY2hhbmdlIiwidmFyICQkYT0iK3QrIiwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD8oIitvKyIpOigiK2ErIik7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PSIrKHI/Il9uKCIraSsiKSI6aSkrIiwkJGk9X2koJCRhLCQkdik7aWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIrQnIodCwiJCRhLmNvbmNhdChbJCR2XSkiKSsiKX1lbHNleyQkaT4tMSYmKCIrQnIodCwiJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkiKSsiKX19ZWxzZXsiK0JyKHQsIiQkYyIpKyJ9IixudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW8mJiJyYWRpbyI9PT1hKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9biYmbi5udW1iZXIsaT1JcihlLCJ2YWx1ZSIpfHwibnVsbCI7RXIoZSwiY2hlY2tlZCIsIl9xKCIrdCsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLE1yKGUsImNoYW5nZSIsQnIodCxpKSxudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/V3I6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9QnIodCxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksRXIoZSwidmFsdWUiLCIoIit0KyIpIiksTXIoZSx1LGYsbnVsbCwhMCksKHN8fGEpJiZNcihlLCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX0oZSxyLGkpO2Vsc2UgaWYoIUYuaXNSZXNlcnZlZFRhZyhvKSlyZXR1cm4gSHIoZSxyLGkpLCExO3JldHVybiEwfSx0ZXh0OmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwidGV4dENvbnRlbnQiLCJfcygiK3QudmFsdWUrIikiLHQpfSxodG1sOmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwiaW5uZXJIVE1MIiwiX3MoIit0LnZhbHVlKyIpIix0KX19LGlzUHJlVGFnOmZ1bmN0aW9uKGUpe3JldHVybiJwcmUiPT09ZX0saXNVbmFyeVRhZzpibyxtdXN0VXNlUHJvcDpqbixjYW5CZUxlZnRPcGVuVGFnOiRvLGlzUmVzZXJ2ZWRUYWc6V24sZ2V0VGFnTmFtZXNwYWNlOlpuLHN0YXRpY0tleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQuc3RhdGljS2V5c3x8W10pfSxbXSkuam9pbigiLCIpfShiYSl9LHhhPWcoZnVuY3Rpb24oZSl7cmV0dXJuIHAoInR5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwIisoZT8iLCIrZToiIikpfSk7ZnVuY3Rpb24ga2EoZSx0KXtlJiYoJGE9eGEodC5zdGF0aWNLZXlzfHwiIiksd2E9dC5pc1Jlc2VydmVkVGFnfHxULGZ1bmN0aW9uIGUodCl7dC5zdGF0aWM9ZnVuY3Rpb24oZSl7aWYoMj09PWUudHlwZSlyZXR1cm4hMTtpZigzPT09ZS50eXBlKXJldHVybiEwO3JldHVybiEoIWUucHJlJiYoZS5oYXNCaW5kaW5nc3x8ZS5pZnx8ZS5mb3J8fGQoZS50YWcpfHwhd2EoZS50YWcpfHxmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PShlPWUucGFyZW50KS50YWcpcmV0dXJuITE7aWYoZS5mb3IpcmV0dXJuITB9cmV0dXJuITF9KGUpfHwhT2JqZWN0LmtleXMoZSkuZXZlcnkoJGEpKSl9KHQpO2lmKDE9PT10LnR5cGUpe2lmKCF3YSh0LnRhZykmJiJzbG90IiE9PXQudGFnJiZudWxsPT10LmF0dHJzTWFwWyJpbmxpbmUtdGVtcGxhdGUiXSlyZXR1cm47Zm9yKHZhciBuPTAscj10LmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXt2YXIgaT10LmNoaWxkcmVuW25dO2UoaSksaS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBvPTEsYT10LmlmQ29uZGl0aW9ucy5sZW5ndGg7bzxhO28rKyl7dmFyIHM9dC5pZkNvbmRpdGlvbnNbb10uYmxvY2s7ZShzKSxzLnN0YXRpY3x8KHQuc3RhdGljPSExKX19fShlKSxmdW5jdGlvbiBlKHQsbil7aWYoMT09PXQudHlwZSl7aWYoKHQuc3RhdGljfHx0Lm9uY2UpJiYodC5zdGF0aWNJbkZvcj1uKSx0LnN0YXRpYyYmdC5jaGlsZHJlbi5sZW5ndGgmJigxIT09dC5jaGlsZHJlbi5sZW5ndGh8fDMhPT10LmNoaWxkcmVuWzBdLnR5cGUpKXJldHVybiB2b2lkKHQuc3RhdGljUm9vdD0hMCk7aWYodC5zdGF0aWNSb290PSExLHQuY2hpbGRyZW4pZm9yKHZhciByPTAsaT10LmNoaWxkcmVuLmxlbmd0aDtyPGk7cisrKWUodC5jaGlsZHJlbltyXSxufHwhIXQuZm9yKTtpZih0LmlmQ29uZGl0aW9ucylmb3IodmFyIG89MSxhPXQuaWZDb25kaXRpb25zLmxlbmd0aDtvPGE7bysrKWUodC5pZkNvbmRpdGlvbnNbb10uYmxvY2ssbil9fShlLCExKSl9dmFyIEFhPS9eKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb24oPzpccytbXHckXSspP1xzKlwoLyxPYT0vXChbXildKj9cKTsqJC8sU2E9L15bQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJ1teJ10qPyddfFxbIlteIl0qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSokLyxUYT17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxFYT17ZXNjOlsiRXNjIiwiRXNjYXBlIl0sdGFiOiJUYWIiLGVudGVyOiJFbnRlciIsc3BhY2U6WyIgIiwiU3BhY2ViYXIiXSx1cDpbIlVwIiwiQXJyb3dVcCJdLGxlZnQ6WyJMZWZ0IiwiQXJyb3dMZWZ0Il0scmlnaHQ6WyJSaWdodCIsIkFycm93UmlnaHQiXSxkb3duOlsiRG93biIsIkFycm93RG93biJdLGRlbGV0ZTpbIkJhY2tzcGFjZSIsIkRlbGV0ZSIsIkRlbCJdfSxOYT1mdW5jdGlvbihlKXtyZXR1cm4iaWYoIitlKyIpcmV0dXJuIG51bGw7In0samE9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpOYSgiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOk5hKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpOYSgiISRldmVudC5zaGlmdEtleSIpLGFsdDpOYSgiISRldmVudC5hbHRLZXkiKSxtZXRhOk5hKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0Ok5hKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX07ZnVuY3Rpb24gRGEoZSx0KXt2YXIgbj10PyJuYXRpdmVPbjoiOiJvbjoiLHI9IiIsaT0iIjtmb3IodmFyIG8gaW4gZSl7dmFyIGE9TGEoZVtvXSk7ZVtvXSYmZVtvXS5keW5hbWljP2krPW8rIiwiK2ErIiwiOnIrPSciJytvKyciOicrYSsiLCJ9cmV0dXJuIHI9InsiK3Iuc2xpY2UoMCwtMSkrIn0iLGk/bisiX2QoIityKyIsWyIraS5zbGljZSgwLC0xKSsiXSkiOm4rcn1mdW5jdGlvbiBMYShlKXtpZighZSlyZXR1cm4iZnVuY3Rpb24oKXt9IjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiJbIitlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTGEoZSl9KS5qb2luKCIsIikrIl0iO3ZhciB0PVNhLnRlc3QoZS52YWx1ZSksbj1BYS50ZXN0KGUudmFsdWUpLHI9U2EudGVzdChlLnZhbHVlLnJlcGxhY2UoT2EsIiIpKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylpZihqYVtzXSlvKz1qYVtzXSxUYVtzXSYmYS5wdXNoKHMpO2Vsc2UgaWYoImV4YWN0Ij09PXMpe3ZhciBjPWUubW9kaWZpZXJzO28rPU5hKFsiY3RybCIsInNoaWZ0IiwiYWx0IiwibWV0YSJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hY1tlXX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iJGV2ZW50LiIrZSsiS2V5In0pLmpvaW4oInx8IikpfWVsc2UgYS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPWZ1bmN0aW9uKGUpe3JldHVybiJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIrZS5tYXAoTWEpLmpvaW4oIiYmIikrIilyZXR1cm4gbnVsbDsifShhKSksbyYmKGkrPW8pLCJmdW5jdGlvbigkZXZlbnQpeyIraSsodD8icmV0dXJuICIrZS52YWx1ZSsiKCRldmVudCkiOm4/InJldHVybiAoIitlLnZhbHVlKyIpKCRldmVudCkiOnI/InJldHVybiAiK2UudmFsdWU6ZS52YWx1ZSkrIn0ifXJldHVybiB0fHxuP2UudmFsdWU6ImZ1bmN0aW9uKCRldmVudCl7Iisocj8icmV0dXJuICIrZS52YWx1ZTplLnZhbHVlKSsifSJ9ZnVuY3Rpb24gTWEoZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7aWYodClyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK3Q7dmFyIG49VGFbZV0scj1FYVtlXTtyZXR1cm4iX2soJGV2ZW50LmtleUNvZGUsIitKU09OLnN0cmluZ2lmeShlKSsiLCIrSlNPTi5zdHJpbmdpZnkobikrIiwkZXZlbnQua2V5LCIrSlNPTi5zdHJpbmdpZnkocikrIikifXZhciBJYT17b246ZnVuY3Rpb24oZSx0KXtlLndyYXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIl9nKCIrZSsiLCIrdC52YWx1ZSsiKSJ9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7ZS53cmFwRGF0YT1mdW5jdGlvbihuKXtyZXR1cm4iX2IoIituKyIsJyIrZS50YWcrIicsIit0LnZhbHVlKyIsIisodC5tb2RpZmllcnMmJnQubW9kaWZpZXJzLnByb3A/InRydWUiOiJmYWxzZSIpKyh0Lm1vZGlmaWVycyYmdC5tb2RpZmllcnMuc3luYz8iLHRydWUiOiIiKSsiKSJ9fSxjbG9hazpTfSxGYT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLndhcm49ZS53YXJufHxTcix0aGlzLnRyYW5zZm9ybXM9VHIoZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Db2RlIiksdGhpcy5kYXRhR2VuRm5zPVRyKGUubW9kdWxlcywiZ2VuRGF0YSIpLHRoaXMuZGlyZWN0aXZlcz1BKEEoe30sSWEpLGUuZGlyZWN0aXZlcyk7dmFyIHQ9ZS5pc1Jlc2VydmVkVGFnfHxUO3RoaXMubWF5YmVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNvbXBvbmVudHx8IXQoZS50YWcpfSx0aGlzLm9uY2VJZD0wLHRoaXMuc3RhdGljUmVuZGVyRm5zPVtdLHRoaXMucHJlPSExfTtmdW5jdGlvbiBQYShlLHQpe3ZhciBuPW5ldyBGYSh0KTtyZXR1cm57cmVuZGVyOiJ3aXRoKHRoaXMpe3JldHVybiAiKyhlP1JhKGUsbik6J19jKCJkaXYiKScpKyJ9IixzdGF0aWNSZW5kZXJGbnM6bi5zdGF0aWNSZW5kZXJGbnN9fWZ1bmN0aW9uIFJhKGUsdCl7aWYoZS5wYXJlbnQmJihlLnByZT1lLnByZXx8ZS5wYXJlbnQucHJlKSxlLnN0YXRpY1Jvb3QmJiFlLnN0YXRpY1Byb2Nlc3NlZClyZXR1cm4gSGEoZSx0KTtpZihlLm9uY2UmJiFlLm9uY2VQcm9jZXNzZWQpcmV0dXJuIEJhKGUsdCk7aWYoZS5mb3ImJiFlLmZvclByb2Nlc3NlZClyZXR1cm4gemEoZSx0KTtpZihlLmlmJiYhZS5pZlByb2Nlc3NlZClyZXR1cm4gVWEoZSx0KTtpZigidGVtcGxhdGUiIT09ZS50YWd8fGUuc2xvdFRhcmdldHx8dC5wcmUpe2lmKCJzbG90Ij09PWUudGFnKXJldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUuc2xvdE5hbWV8fCciZGVmYXVsdCInLHI9cWEoZSx0KSxpPSJfdCgiK24rKHI/IiwiK3I6IiIpLG89ZS5hdHRyc3x8ZS5keW5hbWljQXR0cnM/R2EoKGUuYXR0cnN8fFtdKS5jb25jYXQoZS5keW5hbWljQXR0cnN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6YihlLm5hbWUpLHZhbHVlOmUudmFsdWUsZHluYW1pYzplLmR5bmFtaWN9fSkpOm51bGwsYT1lLmF0dHJzTWFwWyJ2LWJpbmQiXTshbyYmIWF8fHJ8fChpKz0iLG51bGwiKTtvJiYoaSs9IiwiK28pO2EmJihpKz0obz8iIjoiLG51bGwiKSsiLCIrYSk7cmV0dXJuIGkrIikifShlLHQpO3ZhciBuO2lmKGUuY29tcG9uZW50KW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuaW5saW5lVGVtcGxhdGU/bnVsbDpxYSh0LG4sITApO3JldHVybiJfYygiK2UrIiwiK1ZhKHQsbikrKHI/IiwiK3I6IiIpKyIpIn0oZS5jb21wb25lbnQsZSx0KTtlbHNle3ZhciByOyghZS5wbGFpbnx8ZS5wcmUmJnQubWF5YmVDb21wb25lbnQoZSkpJiYocj1WYShlLHQpKTt2YXIgaT1lLmlubGluZVRlbXBsYXRlP251bGw6cWEoZSx0LCEwKTtuPSJfYygnIitlLnRhZysiJyIrKHI/IiwiK3I6IiIpKyhpPyIsIitpOiIiKSsiKSJ9Zm9yKHZhciBvPTA7bzx0LnRyYW5zZm9ybXMubGVuZ3RoO28rKyluPXQudHJhbnNmb3Jtc1tvXShlLG4pO3JldHVybiBufXJldHVybiBxYShlLHQpfHwidm9pZCAwIn1mdW5jdGlvbiBIYShlLHQpe2Uuc3RhdGljUHJvY2Vzc2VkPSEwO3ZhciBuPXQucHJlO3JldHVybiBlLnByZSYmKHQucHJlPWUucHJlKSx0LnN0YXRpY1JlbmRlckZucy5wdXNoKCJ3aXRoKHRoaXMpe3JldHVybiAiK1JhKGUsdCkrIn0iKSx0LnByZT1uLCJfbSgiKyh0LnN0YXRpY1JlbmRlckZucy5sZW5ndGgtMSkrKGUuc3RhdGljSW5Gb3I/Iix0cnVlIjoiIikrIikifWZ1bmN0aW9uIEJhKGUsdCl7aWYoZS5vbmNlUHJvY2Vzc2VkPSEwLGUuaWYmJiFlLmlmUHJvY2Vzc2VkKXJldHVybiBVYShlLHQpO2lmKGUuc3RhdGljSW5Gb3Ipe2Zvcih2YXIgbj0iIixyPWUucGFyZW50O3I7KXtpZihyLmZvcil7bj1yLmtleTticmVha31yPXIucGFyZW50fXJldHVybiBuPyJfbygiK1JhKGUsdCkrIiwiK3Qub25jZUlkKysrIiwiK24rIikiOlJhKGUsdCl9cmV0dXJuIEhhKGUsdCl9ZnVuY3Rpb24gVWEoZSx0LG4scil7cmV0dXJuIGUuaWZQcm9jZXNzZWQ9ITAsZnVuY3Rpb24gZSh0LG4scixpKXtpZighdC5sZW5ndGgpcmV0dXJuIGl8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2Eoby5ibG9jaykrIjoiK2UodCxuLHIsaSk6IiIrYShvLmJsb2NrKTtmdW5jdGlvbiBhKGUpe3JldHVybiByP3IoZSxuKTplLm9uY2U/QmEoZSxuKTpSYShlLG4pfX0oZS5pZkNvbmRpdGlvbnMuc2xpY2UoKSx0LG4scil9ZnVuY3Rpb24gemEoZSx0LG4scil7dmFyIGk9ZS5mb3Isbz1lLmFsaWFzLGE9ZS5pdGVyYXRvcjE/IiwiK2UuaXRlcmF0b3IxOiIiLHM9ZS5pdGVyYXRvcjI/IiwiK2UuaXRlcmF0b3IyOiIiO3JldHVybiBlLmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fFJhKShlLHQpKyJ9KSJ9ZnVuY3Rpb24gVmEoZSx0KXt2YXIgbj0ieyIscj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlyZWN0aXZlcztpZighbilyZXR1cm47dmFyIHIsaSxvLGEscz0iZGlyZWN0aXZlczpbIixjPSExO2ZvcihyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXtvPW5bcl0sYT0hMDt2YXIgdT10LmRpcmVjdGl2ZXNbby5uYW1lXTt1JiYoYT0hIXUoZSxvLHQud2FybikpLGEmJihjPSEwLHMrPSd7bmFtZToiJytvLm5hbWUrJyIscmF3TmFtZToiJytvLnJhd05hbWUrJyInKyhvLnZhbHVlPyIsdmFsdWU6KCIrby52YWx1ZSsiKSxleHByZXNzaW9uOiIrSlNPTi5zdHJpbmdpZnkoby52YWx1ZSk6IiIpKyhvLmFyZz8iLGFyZzoiKyhvLmlzRHluYW1pY0FyZz9vLmFyZzonIicrby5hcmcrJyInKToiIikrKG8ubW9kaWZpZXJzPyIsbW9kaWZpZXJzOiIrSlNPTi5zdHJpbmdpZnkoby5tb2RpZmllcnMpOiIiKSsifSwiKX1pZihjKXJldHVybiBzLnNsaWNlKDAsLTEpKyJdIn0oZSx0KTtyJiYobis9cisiLCIpLGUua2V5JiYobis9ImtleToiK2Uua2V5KyIsIiksZS5yZWYmJihuKz0icmVmOiIrZS5yZWYrIiwiKSxlLnJlZkluRm9yJiYobis9InJlZkluRm9yOnRydWUsIiksZS5wcmUmJihuKz0icHJlOnRydWUsIiksZS5jb21wb25lbnQmJihuKz0ndGFnOiInK2UudGFnKyciLCcpO2Zvcih2YXIgaT0wO2k8dC5kYXRhR2VuRm5zLmxlbmd0aDtpKyspbis9dC5kYXRhR2VuRm5zW2ldKGUpO2lmKGUuYXR0cnMmJihuKz0iYXR0cnM6IitHYShlLmF0dHJzKSsiLCIpLGUucHJvcHMmJihuKz0iZG9tUHJvcHM6IitHYShlLnByb3BzKSsiLCIpLGUuZXZlbnRzJiYobis9RGEoZS5ldmVudHMsITEpKyIsIiksZS5uYXRpdmVFdmVudHMmJihuKz1EYShlLm5hdGl2ZUV2ZW50cywhMCkrIiwiKSxlLnNsb3RUYXJnZXQmJiFlLnNsb3RTY29wZSYmKG4rPSJzbG90OiIrZS5zbG90VGFyZ2V0KyIsIiksZS5zY29wZWRTbG90cyYmKG4rPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmZvcnx8T2JqZWN0LmtleXModCkuc29tZShmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLnNsb3RUYXJnZXREeW5hbWljfHxuLmlmfHxuLmZvcnx8S2Eobil9KSxpPSEhZS5pZjtpZighcilmb3IodmFyIG89ZS5wYXJlbnQ7bzspe2lmKG8uc2xvdFNjb3BlJiZvLnNsb3RTY29wZSE9PWNhfHxvLmZvcil7cj0hMDticmVha31vLmlmJiYoaT0hMCksbz1vLnBhcmVudH12YXIgYT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEphKHRbZV0sbil9KS5qb2luKCIsIik7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK2ErIl0iKyhyPyIsbnVsbCx0cnVlIjoiIikrKCFyJiZpPyIsbnVsbCxmYWxzZSwiK2Z1bmN0aW9uKGUpe3ZhciB0PTUzODEsbj1lLmxlbmd0aDtmb3IoO247KXQ9MzMqdF5lLmNoYXJDb2RlQXQoLS1uKTtyZXR1cm4gdD4+PjB9KGEpOiIiKSsiKSJ9KGUsZS5zY29wZWRTbG90cyx0KSsiLCIpLGUubW9kZWwmJihuKz0ibW9kZWw6e3ZhbHVlOiIrZS5tb2RlbC52YWx1ZSsiLGNhbGxiYWNrOiIrZS5tb2RlbC5jYWxsYmFjaysiLGV4cHJlc3Npb246IitlLm1vZGVsLmV4cHJlc3Npb24rIn0sIiksZS5pbmxpbmVUZW1wbGF0ZSl7dmFyIG89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoaWxkcmVuWzBdO2lmKG4mJjE9PT1uLnR5cGUpe3ZhciByPVBhKG4sdC5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24oKXsiK2UrIn0ifSkuam9pbigiLCIpKyJdfSJ9fShlLHQpO28mJihuKz1vKyIsIil9cmV0dXJuIG49bi5yZXBsYWNlKC8sJC8sIiIpKyJ9IixlLmR5bmFtaWNBdHRycyYmKG49Il9iKCIrbisnLCInK2UudGFnKyciLCcrR2EoZS5keW5hbWljQXR0cnMpKyIpIiksZS53cmFwRGF0YSYmKG49ZS53cmFwRGF0YShuKSksZS53cmFwTGlzdGVuZXJzJiYobj1lLndyYXBMaXN0ZW5lcnMobikpLG59ZnVuY3Rpb24gS2EoZSl7cmV0dXJuIDE9PT1lLnR5cGUmJigic2xvdCI9PT1lLnRhZ3x8ZS5jaGlsZHJlbi5zb21lKEthKSl9ZnVuY3Rpb24gSmEoZSx0KXt2YXIgbj1lLmF0dHJzTWFwWyJzbG90LXNjb3BlIl07aWYoZS5pZiYmIWUuaWZQcm9jZXNzZWQmJiFuKXJldHVybiBVYShlLHQsSmEsIm51bGwiKTtpZihlLmZvciYmIWUuZm9yUHJvY2Vzc2VkKXJldHVybiB6YShlLHQsSmEpO3ZhciByPWUuc2xvdFNjb3BlPT09Y2E/IiI6U3RyaW5nKGUuc2xvdFNjb3BlKSxpPSJmdW5jdGlvbigiK3IrIil7cmV0dXJuICIrKCJ0ZW1wbGF0ZSI9PT1lLnRhZz9lLmlmJiZuPyIoIitlLmlmKyIpPyIrKHFhKGUsdCl8fCJ1bmRlZmluZWQiKSsiOnVuZGVmaW5lZCI6cWEoZSx0KXx8InVuZGVmaW5lZCI6UmEoZSx0KSkrIn0iLG89cj8iIjoiLHByb3h5OnRydWUiO3JldHVybiJ7a2V5OiIrKGUuc2xvdFRhcmdldHx8JyJkZWZhdWx0IicpKyIsZm46IitpK28rIn0ifWZ1bmN0aW9uIHFhKGUsdCxuLHIsaSl7dmFyIG89ZS5jaGlsZHJlbjtpZihvLmxlbmd0aCl7dmFyIGE9b1swXTtpZigxPT09by5sZW5ndGgmJmEuZm9yJiYidGVtcGxhdGUiIT09YS50YWcmJiJzbG90IiE9PWEudGFnKXt2YXIgcz1uP3QubWF5YmVDb21wb25lbnQoYSk/IiwxIjoiLDAiOiIiO3JldHVybiIiKyhyfHxSYSkoYSx0KStzfXZhciBjPW4/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYoMT09PWkudHlwZSl7aWYoV2EoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBXYShlLmJsb2NrKX0pKXtuPTI7YnJlYWt9KHQoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUuYmxvY2spfSkpJiYobj0xKX19cmV0dXJuIG59KG8sdC5tYXliZUNvbXBvbmVudCk6MCx1PWl8fFphO3JldHVybiJbIitvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdShlLHQpfSkuam9pbigiLCIpKyJdIisoYz8iLCIrYzoiIil9fWZ1bmN0aW9uIFdhKGUpe3JldHVybiB2b2lkIDAhPT1lLmZvcnx8InRlbXBsYXRlIj09PWUudGFnfHwic2xvdCI9PT1lLnRhZ31mdW5jdGlvbiBaYShlLHQpe3JldHVybiAxPT09ZS50eXBlP1JhKGUsdCk6Mz09PWUudHlwZSYmZS5pc0NvbW1lbnQ/KHI9ZSwiX2UoIitKU09OLnN0cmluZ2lmeShyLnRleHQpKyIpIik6Il92KCIrKDI9PT0obj1lKS50eXBlP24uZXhwcmVzc2lvbjpYYShKU09OLnN0cmluZ2lmeShuLnRleHQpKSkrIikiO3ZhciBuLHJ9ZnVuY3Rpb24gR2EoZSl7Zm9yKHZhciB0PSIiLG49IiIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89WGEoaS52YWx1ZSk7aS5keW5hbWljP24rPWkubmFtZSsiLCIrbysiLCI6dCs9JyInK2kubmFtZSsnIjonK28rIiwifXJldHVybiB0PSJ7Iit0LnNsaWNlKDAsLTEpKyJ9IixuPyJfZCgiK3QrIixbIituLnNsaWNlKDAsLTEpKyJdKSI6dH1mdW5jdGlvbiBYYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cdTIwMjgvZywiXFx1MjAyOCIpLnJlcGxhY2UoL1x1MjAyOS9nLCJcXHUyMDI5Iil9bmV3IFJlZ0V4cCgiXFxiIisiZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCxzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cyIuc3BsaXQoIiwiKS5qb2luKCJcXGJ8XFxiIikrIlxcYiIpO2Z1bmN0aW9uIFlhKGUsdCl7dHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oZSl9Y2F0Y2gobil7cmV0dXJuIHQucHVzaCh7ZXJyOm4sY29kZTplfSksU319ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obixyLGkpeyhyPUEoe30scikpLndhcm47ZGVsZXRlIHIud2Fybjt2YXIgbz1yLmRlbGltaXRlcnM/U3RyaW5nKHIuZGVsaW1pdGVycykrbjpuO2lmKHRbb10pcmV0dXJuIHRbb107dmFyIGE9ZShuLHIpLHM9e30sYz1bXTtyZXR1cm4gcy5yZW5kZXI9WWEoYS5yZW5kZXIsYykscy5zdGF0aWNSZW5kZXJGbnM9YS5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBZYShlLGMpfSksdFtvXT1zfX12YXIgZXMsdHMsbnM9KGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49bGEoZS50cmltKCksdCk7ITEhPT10Lm9wdGltaXplJiZrYShuLHQpO3ZhciByPVBhKG4sdCk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9T2JqZWN0LmNyZWF0ZShlKSxpPVtdLG89W107aWYobilmb3IodmFyIGEgaW4gbi5tb2R1bGVzJiYoci5tb2R1bGVzPShlLm1vZHVsZXN8fFtdKS5jb25jYXQobi5tb2R1bGVzKSksbi5kaXJlY3RpdmVzJiYoci5kaXJlY3RpdmVzPUEoT2JqZWN0LmNyZWF0ZShlLmRpcmVjdGl2ZXN8fG51bGwpLG4uZGlyZWN0aXZlcykpLG4pIm1vZHVsZXMiIT09YSYmImRpcmVjdGl2ZXMiIT09YSYmKHJbYV09blthXSk7ci53YXJuPWZ1bmN0aW9uKGUsdCxuKXsobj9vOmkpLnB1c2goZSl9O3ZhciBzPWVzKHQudHJpbSgpLHIpO3JldHVybiBzLmVycm9ycz1pLHMudGlwcz1vLHN9cmV0dXJue2NvbXBpbGU6dCxjb21waWxlVG9GdW5jdGlvbnM6UWEodCl9fSkoQ2EpLHJzPShucy5jb21waWxlLG5zLmNvbXBpbGVUb0Z1bmN0aW9ucyk7ZnVuY3Rpb24gaXMoZSl7cmV0dXJuKHRzPXRzfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWU/JzxhIGhyZWY9IlxuIi8+JzonPGRpdiBhPSJcbiIvPicsdHMuaW5uZXJIVE1MLmluZGV4T2YoIiYjMTA7Iik+MH12YXIgb3M9ISF6JiZpcyghMSksYXM9ISF6JiZpcyghMCksc3M9ZyhmdW5jdGlvbihlKXt2YXIgdD1ZbihlKTtyZXR1cm4gdCYmdC5pbm5lckhUTUx9KSxjcz13bi5wcm90b3R5cGUuJG1vdW50O3JldHVybiB3bi5wcm90b3R5cGUuJG1vdW50PWZ1bmN0aW9uKGUsdCl7aWYoKGU9ZSYmWW4oZSkpPT09ZG9jdW1lbnQuYm9keXx8ZT09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudClyZXR1cm4gdGhpczt2YXIgbj10aGlzLiRvcHRpb25zO2lmKCFuLnJlbmRlcil7dmFyIHI9bi50ZW1wbGF0ZTtpZihyKWlmKCJzdHJpbmciPT10eXBlb2YgcikiIyI9PT1yLmNoYXJBdCgwKSYmKHI9c3MocikpO2Vsc2V7aWYoIXIubm9kZVR5cGUpcmV0dXJuIHRoaXM7cj1yLmlubmVySFRNTH1lbHNlIGUmJihyPWZ1bmN0aW9uKGUpe2lmKGUub3V0ZXJIVE1MKXJldHVybiBlLm91dGVySFRNTDt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpLHQuaW5uZXJIVE1MfShlKSk7aWYocil7dmFyIGk9cnMocix7b3V0cHV0U291cmNlUmFuZ2U6ITEsc2hvdWxkRGVjb2RlTmV3bGluZXM6b3Msc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOmFzLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiBjcy5jYWxsKHRoaXMsZSx0KX0sd24uY29tcGlsZT1ycyx3bn0pOw=="},{"meta":{"name":"less.js","url":"https://cdn.jsdelivr.net/npm/less_browser_fix@4.1.2/dist/less.js","ts":1642048881222,"mimetype":"text/javascript"},"source":"LyoqCiAqIExlc3MgLSBMZXNzIDQuMS4yIGZpeGVkIGZvciBHcmVhc2VNb25rZXkgdjQuMS4yCiAqIGh0dHA6Ly9sZXNzY3NzLm9yZwogKiAKICogQ29weXJpZ2h0IChjKSAyMDA5LTIwMjEsIEFsZXhpcyBTZWxsaWVyIDxzZWxmQGNsb3VkaGVhZC5uZXQ+CiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUtMi4wIExpY2Vuc2UuCiAqCiAqIEBsaWNlbnNlIEFwYWNoZS0yLjAKICovCgooZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOgogICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDoKICAgIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5sZXNzID0gZmFjdG9yeSgpKTsKfSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7CgogICAgLy8gRXhwb3J0IGEgbmV3IGRlZmF1bHQgZWFjaCB0aW1lDQogICAgZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMgKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgLyogSW5saW5lIEphdmFzY3JpcHQgLSBAcGx1Z2luIHN0aWxsIGFsbG93ZWQgKi8NCiAgICAgICAgICAgIGphdmFzY3JpcHRFbmFibGVkOiBmYWxzZSwNCiAgICAgICAgICAgIC8qIE91dHB1dHMgYSBtYWtlZmlsZSBpbXBvcnQgZGVwZW5kZW5jeSBsaXN0IHRvIHN0ZG91dC4gKi8NCiAgICAgICAgICAgIGRlcGVuZHM6IGZhbHNlLA0KICAgICAgICAgICAgLyogKERFUFJFQ0FURUQpIENvbXByZXNzIHVzaW5nIGxlc3MgYnVpbHQtaW4gY29tcHJlc3Npb24uDQogICAgICAgICAgICAgKiBUaGlzIGRvZXMgYW4gb2theSBqb2IgYnV0IGRvZXMgbm90IHV0aWxpc2UgYWxsIHRoZSB0cmlja3Mgb2YNCiAgICAgICAgICAgICAqIGRlZGljYXRlZCBjc3MgY29tcHJlc3Npb24uICovDQogICAgICAgICAgICBjb21wcmVzczogZmFsc2UsDQogICAgICAgICAgICAvKiBSdW5zIHRoZSBsZXNzIHBhcnNlciBhbmQganVzdCByZXBvcnRzIGVycm9ycyB3aXRob3V0IGFueSBvdXRwdXQuICovDQogICAgICAgICAgICBsaW50OiBmYWxzZSwNCiAgICAgICAgICAgIC8qIFNldHMgYXZhaWxhYmxlIGluY2x1ZGUgcGF0aHMuDQogICAgICAgICAgICAgKiBJZiB0aGUgZmlsZSBpbiBhbiBAaW1wb3J0IHJ1bGUgZG9lcyBub3QgZXhpc3QgYXQgdGhhdCBleGFjdCBsb2NhdGlvbiwNCiAgICAgICAgICAgICAqIGxlc3Mgd2lsbCBsb29rIGZvciBpdCBhdCB0aGUgbG9jYXRpb24ocykgcGFzc2VkIHRvIHRoaXMgb3B0aW9uLg0KICAgICAgICAgICAgICogWW91IG1pZ2h0IHVzZSB0aGlzIGZvciBpbnN0YW5jZSB0byBzcGVjaWZ5IGEgcGF0aCB0byBhIGxpYnJhcnkgd2hpY2gNCiAgICAgICAgICAgICAqIHlvdSB3YW50IHRvIGJlIHJlZmVyZW5jZWQgc2ltcGx5IGFuZCByZWxhdGl2ZWx5IGluIHRoZSBsZXNzIGZpbGVzLiAqLw0KICAgICAgICAgICAgcGF0aHM6IFtdLA0KICAgICAgICAgICAgLyogY29sb3Igb3V0cHV0IGluIHRoZSB0ZXJtaW5hbCAqLw0KICAgICAgICAgICAgY29sb3I6IHRydWUsDQogICAgICAgICAgICAvKiBUaGUgc3RyaWN0SW1wb3J0cyBjb250cm9scyB3aGV0aGVyIHRoZSBjb21waWxlciB3aWxsIGFsbG93IGFuIEBpbXBvcnQgaW5zaWRlIG9mIGVpdGhlcg0KICAgICAgICAgICAgICogQG1lZGlhIGJsb2NrcyBvciAoYSBsYXRlciBhZGRpdGlvbikgb3RoZXIgc2VsZWN0b3IgYmxvY2tzLg0KICAgICAgICAgICAgICogU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbGVzcy9sZXNzLmpzL2lzc3Vlcy82NTYgKi8NCiAgICAgICAgICAgIHN0cmljdEltcG9ydHM6IGZhbHNlLA0KICAgICAgICAgICAgLyogQWxsb3cgSW1wb3J0cyBmcm9tIEluc2VjdXJlIEhUVFBTIEhvc3RzICovDQogICAgICAgICAgICBpbnNlY3VyZTogZmFsc2UsDQogICAgICAgICAgICAvKiBBbGxvd3MgeW91IHRvIGFkZCBhIHBhdGggdG8gZXZlcnkgZ2VuZXJhdGVkIGltcG9ydCBhbmQgdXJsIGluIHlvdXIgY3NzLg0KICAgICAgICAgICAgICogVGhpcyBkb2VzIG5vdCBhZmZlY3QgbGVzcyBpbXBvcnQgc3RhdGVtZW50cyB0aGF0IGFyZSBwcm9jZXNzZWQsIGp1c3Qgb25lcw0KICAgICAgICAgICAgICogdGhhdCBhcmUgbGVmdCBpbiB0aGUgb3V0cHV0IGNzcy4gKi8NCiAgICAgICAgICAgIHJvb3RwYXRoOiAnJywNCiAgICAgICAgICAgIC8qIEJ5IGRlZmF1bHQgVVJMcyBhcmUga2VwdCBhcy1pcywgc28gaWYgeW91IGltcG9ydCBhIGZpbGUgaW4gYSBzdWItZGlyZWN0b3J5DQogICAgICAgICAgICAgKiB0aGF0IHJlZmVyZW5jZXMgYW4gaW1hZ2UsIGV4YWN0bHkgdGhlIHNhbWUgVVJMIHdpbGwgYmUgb3V0cHV0IGluIHRoZSBjc3MuDQogICAgICAgICAgICAgKiBUaGlzIG9wdGlvbiBhbGxvd3MgeW91IHRvIHJlLXdyaXRlIFVSTCdzIGluIGltcG9ydGVkIGZpbGVzIHNvIHRoYXQgdGhlDQogICAgICAgICAgICAgKiBVUkwgaXMgYWx3YXlzIHJlbGF0aXZlIHRvIHRoZSBiYXNlIGltcG9ydGVkIGZpbGUgKi8NCiAgICAgICAgICAgIHJld3JpdGVVcmxzOiBmYWxzZSwNCiAgICAgICAgICAgIC8qIEhvdyB0byBwcm9jZXNzIG1hdGgNCiAgICAgICAgICAgICAqICAgMCBhbHdheXMgICAgICAgICAgIC0gZWFnZXJseSB0cnkgdG8gc29sdmUgYWxsIG9wZXJhdGlvbnMNCiAgICAgICAgICAgICAqICAgMSBwYXJlbnMtZGl2aXNpb24gIC0gcmVxdWlyZSBwYXJlbnMgZm9yIGRpdmlzaW9uICIvIg0KICAgICAgICAgICAgICogICAyIHBhcmVucyB8IHN0cmljdCAgLSByZXF1aXJlIHBhcmVucyBmb3IgYWxsIG9wZXJhdGlvbnMNCiAgICAgICAgICAgICAqICAgMyBzdHJpY3QtbGVnYWN5ICAgIC0gbGVnYWN5IHN0cmljdCBiZWhhdmlvciAoc3VwZXItc3RyaWN0KQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBtYXRoOiAxLA0KICAgICAgICAgICAgLyogV2l0aG91dCB0aGlzIG9wdGlvbiwgbGVzcyBhdHRlbXB0cyB0byBndWVzcyBhdCB0aGUgb3V0cHV0IHVuaXQgd2hlbiBpdCBkb2VzIG1hdGhzLiAqLw0KICAgICAgICAgICAgc3RyaWN0VW5pdHM6IGZhbHNlLA0KICAgICAgICAgICAgLyogRWZmZWN0aXZlbHkgdGhlIGRlY2xhcmF0aW9uIGlzIHB1dCBhdCB0aGUgdG9wIG9mIHlvdXIgYmFzZSBMZXNzIGZpbGUsDQogICAgICAgICAgICAgKiBtZWFuaW5nIGl0IGNhbiBiZSB1c2VkIGJ1dCBpdCBhbHNvIGNhbiBiZSBvdmVycmlkZGVuIGlmIHRoaXMgdmFyaWFibGUNCiAgICAgICAgICAgICAqIGlzIGRlZmluZWQgaW4gdGhlIGZpbGUuICovDQogICAgICAgICAgICBnbG9iYWxWYXJzOiBudWxsLA0KICAgICAgICAgICAgLyogQXMgb3Bwb3NlZCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIG9wdGlvbiwgdGhpcyBwdXRzIHRoZSBkZWNsYXJhdGlvbiBhdCB0aGUNCiAgICAgICAgICAgICAqIGVuZCBvZiB5b3VyIGJhc2UgZmlsZSwgbWVhbmluZyBpdCB3aWxsIG92ZXJyaWRlIGFueXRoaW5nIGRlZmluZWQgaW4geW91ciBMZXNzIGZpbGUuICovDQogICAgICAgICAgICBtb2RpZnlWYXJzOiBudWxsLA0KICAgICAgICAgICAgLyogVGhpcyBvcHRpb24gYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGEgYXJndW1lbnQgdG8gZ28gb24gdG8gZXZlcnkgVVJMLiAgKi8NCiAgICAgICAgICAgIHVybEFyZ3M6ICcnDQogICAgICAgIH07DQogICAgfQoKICAgIGZ1bmN0aW9uIGV4dHJhY3RJZChocmVmKSB7DQogICAgICAgIHJldHVybiBocmVmLnJlcGxhY2UoL15bYS16LV0rOlwvKz9bXlwvXSsvLCAnJykgLy8gUmVtb3ZlIHByb3RvY29sICYgZG9tYWluDQogICAgICAgICAgICAucmVwbGFjZSgvW1w/XCZdbGl2ZXJlbG9hZD1cdysvLCAnJykgLy8gUmVtb3ZlIExpdmVSZWxvYWQgY2FjaGVidXN0ZXINCiAgICAgICAgICAgIC5yZXBsYWNlKC9eXC8vLCAnJykgLy8gUmVtb3ZlIHJvb3QgLw0KICAgICAgICAgICAgLnJlcGxhY2UoL1wuW2EtekEtWl0rJC8sICcnKSAvLyBSZW1vdmUgc2ltcGxlIGV4dGVuc2lvbg0KICAgICAgICAgICAgLnJlcGxhY2UoL1teXC5cdy1dKy9nLCAnLScpIC8vIFJlcGxhY2UgaWxsZWdhbCBjaGFyYWN0ZXJzDQogICAgICAgICAgICAucmVwbGFjZSgvXC4vZywgJzonKTsgLy8gUmVwbGFjZSBkb3RzIHdpdGggY29sb25zKGZvciB2YWxpZCBpZCkNCiAgICB9DQogICAgZnVuY3Rpb24gYWRkRGF0YUF0dHIob3B0aW9ucywgdGFnKSB7DQogICAgICAgIGlmICghdGFnKQ0KICAgICAgICAgICAgcmV0dXJuOyAvLyBpbiBjYXNlIG9mIHRhZyBpcyBudWxsIG9yIHVuZGVmaW5lZA0KICAgICAgICBmb3IgKHZhciBvcHQgaW4gdGFnLmRhdGFzZXQpIHsNCiAgICAgICAgICAgIGlmICh0YWcuZGF0YXNldC5oYXNPd25Qcm9wZXJ0eShvcHQpKSB7DQogICAgICAgICAgICAgICAgaWYgKG9wdCA9PT0gJ2VudicgfHwgb3B0ID09PSAnZHVtcExpbmVOdW1iZXJzJyB8fCBvcHQgPT09ICdyb290cGF0aCcgfHwgb3B0ID09PSAnZXJyb3JSZXBvcnRpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbb3B0XSA9IHRhZy5kYXRhc2V0W29wdF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1tvcHRdID0gSlNPTi5wYXJzZSh0YWcuZGF0YXNldFtvcHRdKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQoKICAgIHZhciBicm93c2VyID0gew0KICAgICAgICBjcmVhdGVDU1M6IGZ1bmN0aW9uIChkb2N1bWVudCwgc3R5bGVzLCBzaGVldCkgew0KICAgICAgICAgICAgLy8gU3RyaXAgdGhlIHF1ZXJ5LXN0cmluZw0KICAgICAgICAgICAgdmFyIGhyZWYgPSBzaGVldC5ocmVmIHx8ICcnOw0KICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gdGl0bGUgc2V0LCB1c2UgdGhlIGZpbGVuYW1lLCBtaW51cyB0aGUgZXh0ZW5zaW9uDQogICAgICAgICAgICB2YXIgaWQgPSAibGVzczoiICsgKHNoZWV0LnRpdGxlIHx8IGV4dHJhY3RJZChocmVmKSk7DQogICAgICAgICAgICAvLyBJZiB0aGlzIGhhcyBhbHJlYWR5IGJlZW4gaW5zZXJ0ZWQgaW50byB0aGUgRE9NLCB3ZSBtYXkgbmVlZCB0byByZXBsYWNlIGl0DQogICAgICAgICAgICB2YXIgb2xkU3R5bGVOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgdmFyIGtlZXBPbGRTdHlsZU5vZGUgPSBmYWxzZTsNCiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBzdHlsZXNoZWV0IG5vZGUgZm9yIGluc2VydGlvbiBvciAoaWYgbmVjZXNzYXJ5KSByZXBsYWNlbWVudA0KICAgICAgICAgICAgdmFyIHN0eWxlTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7DQogICAgICAgICAgICBzdHlsZU5vZGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7DQogICAgICAgICAgICBpZiAoc2hlZXQubWVkaWEpIHsNCiAgICAgICAgICAgICAgICBzdHlsZU5vZGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIHNoZWV0Lm1lZGlhKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN0eWxlTm9kZS5pZCA9IGlkOw0KICAgICAgICAgICAgaWYgKCFzdHlsZU5vZGUuc3R5bGVTaGVldCkgew0KICAgICAgICAgICAgICAgIHN0eWxlTm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzdHlsZXMpKTsNCiAgICAgICAgICAgICAgICAvLyBJZiBuZXcgY29udGVudHMgbWF0Y2ggY29udGVudHMgb2Ygb2xkU3R5bGVOb2RlLCBkb24ndCByZXBsYWNlIG9sZFN0eWxlTm9kZQ0KICAgICAgICAgICAgICAgIGtlZXBPbGRTdHlsZU5vZGUgPSAob2xkU3R5bGVOb2RlICE9PSBudWxsICYmIG9sZFN0eWxlTm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDAgJiYgc3R5bGVOb2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCAmJg0KICAgICAgICAgICAgICAgICAgICBvbGRTdHlsZU5vZGUuZmlyc3RDaGlsZC5ub2RlVmFsdWUgPT09IHN0eWxlTm9kZS5maXJzdENoaWxkLm5vZGVWYWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07DQogICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBvbGRTdHlsZU5vZGUsIGp1c3QgYXBwZW5kOyBvdGhlcndpc2UsIG9ubHkgYXBwZW5kIGlmIHdlIG5lZWQNCiAgICAgICAgICAgIC8vIHRvIHJlcGxhY2Ugb2xkU3R5bGVOb2RlIHdpdGggYW4gdXBkYXRlZCBzdHlsZXNoZWV0DQogICAgICAgICAgICBpZiAob2xkU3R5bGVOb2RlID09PSBudWxsIHx8IGtlZXBPbGRTdHlsZU5vZGUgPT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgdmFyIG5leHRFbCA9IHNoZWV0ICYmIHNoZWV0Lm5leHRTaWJsaW5nIHx8IG51bGw7DQogICAgICAgICAgICAgICAgaWYgKG5leHRFbCkgew0KICAgICAgICAgICAgICAgICAgICBuZXh0RWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3R5bGVOb2RlLCBuZXh0RWwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZU5vZGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChvbGRTdHlsZU5vZGUgJiYga2VlcE9sZFN0eWxlTm9kZSA9PT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICBvbGRTdHlsZU5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGRTdHlsZU5vZGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gRm9yIElFLg0KICAgICAgICAgICAgLy8gVGhpcyBuZWVkcyB0byBoYXBwZW4gKmFmdGVyKiB0aGUgc3R5bGUgZWxlbWVudCBpcyBhZGRlZCB0byB0aGUgRE9NLCBvdGhlcndpc2UgSUUgNyBhbmQgOCBtYXkgY3Jhc2guDQogICAgICAgICAgICAvLyBTZWUgaHR0cDovL3NvY2lhbC5tc2RuLm1pY3Jvc29mdC5jb20vRm9ydW1zL2VuLVVTLzdlMDgxYjY1LTg3OGEtNGMyMi04ZTY4LWMxMGQzOWMyZWQzMi9pbnRlcm5ldC1leHBsb3Jlci1jcmFzaGVzLWFwcGVuZGluZy1zdHlsZS1lbGVtZW50LXRvLWhlYWQNCiAgICAgICAgICAgIGlmIChzdHlsZU5vZGUuc3R5bGVTaGVldCkgew0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHN0eWxlTm9kZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBzdHlsZXM7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGRuXCd0IHJlYXNzaWduIHN0eWxlU2hlZXQuY3NzVGV4dC4nKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGN1cnJlbnRTY3JpcHQ6IGZ1bmN0aW9uICh3aW5kb3cpIHsNCiAgICAgICAgICAgIHZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDsNCiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0IHx8IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgIH0pKCk7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBhZGREZWZhdWx0T3B0aW9ucyA9IChmdW5jdGlvbiAod2luZG93LCBvcHRpb25zKSB7DQogICAgICAgIC8vIHVzZSBvcHRpb25zIGZyb20gdGhlIGN1cnJlbnQgc2NyaXB0IHRhZyBkYXRhIGF0dHJpYnVlcw0KICAgICAgICBhZGREYXRhQXR0cihvcHRpb25zLCBicm93c2VyLmN1cnJlbnRTY3JpcHQod2luZG93KSk7DQogICAgICAgIGlmIChvcHRpb25zLmlzRmlsZVByb3RvY29sID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgIG9wdGlvbnMuaXNGaWxlUHJvdG9jb2wgPSAvXihmaWxlfChjaHJvbWV8c2FmYXJpKSgtZXh0ZW5zaW9uKT98cmVzb3VyY2V8cXJjfGFwcCk6Ly50ZXN0KHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gTG9hZCBzdHlsZXMgYXN5bmNocm9ub3VzbHkgKGRlZmF1bHQ6IGZhbHNlKQ0KICAgICAgICAvLw0KICAgICAgICAvLyBUaGlzIGlzIHNldCB0byBgZmFsc2VgIGJ5IGRlZmF1bHQsIHNvIHRoYXQgdGhlIGJvZHkNCiAgICAgICAgLy8gZG9lc24ndCBzdGFydCBsb2FkaW5nIGJlZm9yZSB0aGUgc3R5bGVzaGVldHMgYXJlIHBhcnNlZC4NCiAgICAgICAgLy8gU2V0dGluZyB0aGlzIHRvIGB0cnVlYCBjYW4gcmVzdWx0IGluIGZsaWNrZXJpbmcuDQogICAgICAgIC8vDQogICAgICAgIG9wdGlvbnMuYXN5bmMgPSBvcHRpb25zLmFzeW5jIHx8IGZhbHNlOw0KICAgICAgICBvcHRpb25zLmZpbGVBc3luYyA9IG9wdGlvbnMuZmlsZUFzeW5jIHx8IGZhbHNlOw0KICAgICAgICAvLyBJbnRlcnZhbCBiZXR3ZWVuIHdhdGNoIHBvbGxzDQogICAgICAgIG9wdGlvbnMucG9sbCA9IG9wdGlvbnMucG9sbCB8fCAob3B0aW9ucy5pc0ZpbGVQcm90b2NvbCA/IDEwMDAgOiAxNTAwKTsNCiAgICAgICAgb3B0aW9ucy5lbnYgPSBvcHRpb25zLmVudiB8fCAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09ICcxMjcuMC4wLjEnIHx8DQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gJzAuMC4wLjAnIHx8DQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gJ2xvY2FsaG9zdCcgfHwNCiAgICAgICAgICAgICh3aW5kb3cubG9jYXRpb24ucG9ydCAmJg0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wb3J0Lmxlbmd0aCA+IDApIHx8DQogICAgICAgICAgICBvcHRpb25zLmlzRmlsZVByb3RvY29sID8gJ2RldmVsb3BtZW50Jw0KICAgICAgICAgICAgOiAncHJvZHVjdGlvbicpOw0KICAgICAgICB2YXIgZHVtcExpbmVOdW1iZXJzID0gLyFkdW1wTGluZU51bWJlcnM6KGNvbW1lbnRzfG1lZGlhcXVlcnl8YWxsKS8uZXhlYyh3aW5kb3cubG9jYXRpb24uaGFzaCk7DQogICAgICAgIGlmIChkdW1wTGluZU51bWJlcnMpIHsNCiAgICAgICAgICAgIG9wdGlvbnMuZHVtcExpbmVOdW1iZXJzID0gZHVtcExpbmVOdW1iZXJzWzFdOw0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRpb25zLnVzZUZpbGVDYWNoZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICBvcHRpb25zLnVzZUZpbGVDYWNoZSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG9wdGlvbnMub25SZWFkeSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICBvcHRpb25zLm9uUmVhZHkgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRpb25zLnJlbGF0aXZlVXJscykgew0KICAgICAgICAgICAgb3B0aW9ucy5yZXdyaXRlVXJscyA9ICdhbGwnOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIGxvZ2dlciQxID0gew0KICAgICAgICBlcnJvcjogZnVuY3Rpb24gKG1zZykgew0KICAgICAgICAgICAgdGhpcy5fZmlyZUV2ZW50KCdlcnJvcicsIG1zZyk7DQogICAgICAgIH0sDQogICAgICAgIHdhcm46IGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgICAgIHRoaXMuX2ZpcmVFdmVudCgnd2FybicsIG1zZyk7DQogICAgICAgIH0sDQogICAgICAgIGluZm86IGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgICAgIHRoaXMuX2ZpcmVFdmVudCgnaW5mbycsIG1zZyk7DQogICAgICAgIH0sDQogICAgICAgIGRlYnVnOiBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgICB0aGlzLl9maXJlRXZlbnQoJ2RlYnVnJywgbXNnKTsNCiAgICAgICAgfSwNCiAgICAgICAgYWRkTGlzdGVuZXI6IGZ1bmN0aW9uIChsaXN0ZW5lcikgew0KICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOw0KICAgICAgICB9LA0KICAgICAgICByZW1vdmVMaXN0ZW5lcjogZnVuY3Rpb24gKGxpc3RlbmVyKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnNbaV0gPT09IGxpc3RlbmVyKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIF9maXJlRXZlbnQ6IGZ1bmN0aW9uICh0eXBlLCBtc2cpIHsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdmFyIGxvZ0Z1bmN0aW9uID0gdGhpcy5fbGlzdGVuZXJzW2ldW3R5cGVdOw0KICAgICAgICAgICAgICAgIGlmIChsb2dGdW5jdGlvbikgew0KICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihtc2cpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgX2xpc3RlbmVyczogW10NCiAgICB9OwoKICAgIC8qKg0KICAgICAqIEB0b2RvIERvY3VtZW50IHdoeSB0aGlzIGFic3RyYWN0aW9uIGV4aXN0cywgYW5kIHRoZSByZWxhdGlvbnNoaXAgYmV0d2Vlbg0KICAgICAqICAgICAgIGVudmlyb25tZW50LCBmaWxlIG1hbmFnZXJzLCBhbmQgcGx1Z2luIG1hbmFnZXINCiAgICAgKi8NCiAgICB2YXIgRW52aXJvbm1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgICAgIGZ1bmN0aW9uIEVudmlyb25tZW50KGV4dGVybmFsRW52aXJvbm1lbnQsIGZpbGVNYW5hZ2Vycykgew0KICAgICAgICAgICAgdGhpcy5maWxlTWFuYWdlcnMgPSBmaWxlTWFuYWdlcnMgfHwgW107DQogICAgICAgICAgICBleHRlcm5hbEVudmlyb25tZW50ID0gZXh0ZXJuYWxFbnZpcm9ubWVudCB8fCB7fTsNCiAgICAgICAgICAgIHZhciBvcHRpb25hbEZ1bmN0aW9ucyA9IFsnZW5jb2RlQmFzZTY0JywgJ21pbWVMb29rdXAnLCAnY2hhcnNldExvb2t1cCcsICdnZXRTb3VyY2VNYXBHZW5lcmF0b3InXTsNCiAgICAgICAgICAgIHZhciByZXF1aXJlZEZ1bmN0aW9ucyA9IFtdOw0KICAgICAgICAgICAgdmFyIGZ1bmN0aW9ucyA9IHJlcXVpcmVkRnVuY3Rpb25zLmNvbmNhdChvcHRpb25hbEZ1bmN0aW9ucyk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZ1bmN0aW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IGZ1bmN0aW9uc1tpXTsNCiAgICAgICAgICAgICAgICB2YXIgZW52aXJvbm1lbnRGdW5jID0gZXh0ZXJuYWxFbnZpcm9ubWVudFtwcm9wTmFtZV07DQogICAgICAgICAgICAgICAgaWYgKGVudmlyb25tZW50RnVuYykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IGVudmlyb25tZW50RnVuYy5iaW5kKGV4dGVybmFsRW52aXJvbm1lbnQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChpIDwgcmVxdWlyZWRGdW5jdGlvbnMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMud2FybigibWlzc2luZyByZXF1aXJlZCBmdW5jdGlvbiBpbiBlbnZpcm9ubWVudCAtICIgKyBwcm9wTmFtZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIEVudmlyb25tZW50LnByb3RvdHlwZS5nZXRGaWxlTWFuYWdlciA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgY3VycmVudERpcmVjdG9yeSwgb3B0aW9ucywgZW52aXJvbm1lbnQsIGlzU3luYykgew0KICAgICAgICAgICAgaWYgKCFmaWxlbmFtZSkgew0KICAgICAgICAgICAgICAgIGxvZ2dlciQxLndhcm4oJ2dldEZpbGVNYW5hZ2VyIGNhbGxlZCB3aXRoIG5vIGZpbGVuYW1lLi4gUGxlYXNlIHJlcG9ydCB0aGlzIGlzc3VlLiBjb250aW51aW5nLicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGN1cnJlbnREaXJlY3RvcnkgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGxvZ2dlciQxLndhcm4oJ2dldEZpbGVNYW5hZ2VyIGNhbGxlZCB3aXRoIG51bGwgZGlyZWN0b3J5Li4gUGxlYXNlIHJlcG9ydCB0aGlzIGlzc3VlLiBjb250aW51aW5nLicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGZpbGVNYW5hZ2VycyA9IHRoaXMuZmlsZU1hbmFnZXJzOw0KICAgICAgICAgICAgaWYgKG9wdGlvbnMucGx1Z2luTWFuYWdlcikgew0KICAgICAgICAgICAgICAgIGZpbGVNYW5hZ2VycyA9IFtdLmNvbmNhdChmaWxlTWFuYWdlcnMpLmNvbmNhdChvcHRpb25zLnBsdWdpbk1hbmFnZXIuZ2V0RmlsZU1hbmFnZXJzKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZpbGVNYW5hZ2Vycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICAgIHZhciBmaWxlTWFuYWdlciA9IGZpbGVNYW5hZ2Vyc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAoZmlsZU1hbmFnZXJbaXNTeW5jID8gJ3N1cHBvcnRzU3luYycgOiAnc3VwcG9ydHMnXShmaWxlbmFtZSwgY3VycmVudERpcmVjdG9yeSwgb3B0aW9ucywgZW52aXJvbm1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlTWFuYWdlcjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfTsNCiAgICAgICAgRW52aXJvbm1lbnQucHJvdG90eXBlLmFkZEZpbGVNYW5hZ2VyID0gZnVuY3Rpb24gKGZpbGVNYW5hZ2VyKSB7DQogICAgICAgICAgICB0aGlzLmZpbGVNYW5hZ2Vycy5wdXNoKGZpbGVNYW5hZ2VyKTsNCiAgICAgICAgfTsNCiAgICAgICAgRW52aXJvbm1lbnQucHJvdG90eXBlLmNsZWFyRmlsZU1hbmFnZXJzID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdGhpcy5maWxlTWFuYWdlcnMgPSBbXTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIEVudmlyb25tZW50Ow0KICAgIH0oKSk7CgogICAgdmFyIGNvbG9ycyA9IHsNCiAgICAgICAgJ2FsaWNlYmx1ZSc6ICcjZjBmOGZmJywNCiAgICAgICAgJ2FudGlxdWV3aGl0ZSc6ICcjZmFlYmQ3JywNCiAgICAgICAgJ2FxdWEnOiAnIzAwZmZmZicsDQogICAgICAgICdhcXVhbWFyaW5lJzogJyM3ZmZmZDQnLA0KICAgICAgICAnYXp1cmUnOiAnI2YwZmZmZicsDQogICAgICAgICdiZWlnZSc6ICcjZjVmNWRjJywNCiAgICAgICAgJ2Jpc3F1ZSc6ICcjZmZlNGM0JywNCiAgICAgICAgJ2JsYWNrJzogJyMwMDAwMDAnLA0KICAgICAgICAnYmxhbmNoZWRhbG1vbmQnOiAnI2ZmZWJjZCcsDQogICAgICAgICdibHVlJzogJyMwMDAwZmYnLA0KICAgICAgICAnYmx1ZXZpb2xldCc6ICcjOGEyYmUyJywNCiAgICAgICAgJ2Jyb3duJzogJyNhNTJhMmEnLA0KICAgICAgICAnYnVybHl3b29kJzogJyNkZWI4ODcnLA0KICAgICAgICAnY2FkZXRibHVlJzogJyM1ZjllYTAnLA0KICAgICAgICAnY2hhcnRyZXVzZSc6ICcjN2ZmZjAwJywNCiAgICAgICAgJ2Nob2NvbGF0ZSc6ICcjZDI2OTFlJywNCiAgICAgICAgJ2NvcmFsJzogJyNmZjdmNTAnLA0KICAgICAgICAnY29ybmZsb3dlcmJsdWUnOiAnIzY0OTVlZCcsDQogICAgICAgICdjb3Juc2lsayc6ICcjZmZmOGRjJywNCiAgICAgICAgJ2NyaW1zb24nOiAnI2RjMTQzYycsDQogICAgICAgICdjeWFuJzogJyMwMGZmZmYnLA0KICAgICAgICAnZGFya2JsdWUnOiAnIzAwMDA4YicsDQogICAgICAgICdkYXJrY3lhbic6ICcjMDA4YjhiJywNCiAgICAgICAgJ2Rhcmtnb2xkZW5yb2QnOiAnI2I4ODYwYicsDQogICAgICAgICdkYXJrZ3JheSc6ICcjYTlhOWE5JywNCiAgICAgICAgJ2RhcmtncmV5JzogJyNhOWE5YTknLA0KICAgICAgICAnZGFya2dyZWVuJzogJyMwMDY0MDAnLA0KICAgICAgICAnZGFya2toYWtpJzogJyNiZGI3NmInLA0KICAgICAgICAnZGFya21hZ2VudGEnOiAnIzhiMDA4YicsDQogICAgICAgICdkYXJrb2xpdmVncmVlbic6ICcjNTU2YjJmJywNCiAgICAgICAgJ2RhcmtvcmFuZ2UnOiAnI2ZmOGMwMCcsDQogICAgICAgICdkYXJrb3JjaGlkJzogJyM5OTMyY2MnLA0KICAgICAgICAnZGFya3JlZCc6ICcjOGIwMDAwJywNCiAgICAgICAgJ2RhcmtzYWxtb24nOiAnI2U5OTY3YScsDQogICAgICAgICdkYXJrc2VhZ3JlZW4nOiAnIzhmYmM4ZicsDQogICAgICAgICdkYXJrc2xhdGVibHVlJzogJyM0ODNkOGInLA0KICAgICAgICAnZGFya3NsYXRlZ3JheSc6ICcjMmY0ZjRmJywNCiAgICAgICAgJ2RhcmtzbGF0ZWdyZXknOiAnIzJmNGY0ZicsDQogICAgICAgICdkYXJrdHVycXVvaXNlJzogJyMwMGNlZDEnLA0KICAgICAgICAnZGFya3Zpb2xldCc6ICcjOTQwMGQzJywNCiAgICAgICAgJ2RlZXBwaW5rJzogJyNmZjE0OTMnLA0KICAgICAgICAnZGVlcHNreWJsdWUnOiAnIzAwYmZmZicsDQogICAgICAgICdkaW1ncmF5JzogJyM2OTY5NjknLA0KICAgICAgICAnZGltZ3JleSc6ICcjNjk2OTY5JywNCiAgICAgICAgJ2RvZGdlcmJsdWUnOiAnIzFlOTBmZicsDQogICAgICAgICdmaXJlYnJpY2snOiAnI2IyMjIyMicsDQogICAgICAgICdmbG9yYWx3aGl0ZSc6ICcjZmZmYWYwJywNCiAgICAgICAgJ2ZvcmVzdGdyZWVuJzogJyMyMjhiMjInLA0KICAgICAgICAnZnVjaHNpYSc6ICcjZmYwMGZmJywNCiAgICAgICAgJ2dhaW5zYm9ybyc6ICcjZGNkY2RjJywNCiAgICAgICAgJ2dob3N0d2hpdGUnOiAnI2Y4ZjhmZicsDQogICAgICAgICdnb2xkJzogJyNmZmQ3MDAnLA0KICAgICAgICAnZ29sZGVucm9kJzogJyNkYWE1MjAnLA0KICAgICAgICAnZ3JheSc6ICcjODA4MDgwJywNCiAgICAgICAgJ2dyZXknOiAnIzgwODA4MCcsDQogICAgICAgICdncmVlbic6ICcjMDA4MDAwJywNCiAgICAgICAgJ2dyZWVueWVsbG93JzogJyNhZGZmMmYnLA0KICAgICAgICAnaG9uZXlkZXcnOiAnI2YwZmZmMCcsDQogICAgICAgICdob3RwaW5rJzogJyNmZjY5YjQnLA0KICAgICAgICAnaW5kaWFucmVkJzogJyNjZDVjNWMnLA0KICAgICAgICAnaW5kaWdvJzogJyM0YjAwODInLA0KICAgICAgICAnaXZvcnknOiAnI2ZmZmZmMCcsDQogICAgICAgICdraGFraSc6ICcjZjBlNjhjJywNCiAgICAgICAgJ2xhdmVuZGVyJzogJyNlNmU2ZmEnLA0KICAgICAgICAnbGF2ZW5kZXJibHVzaCc6ICcjZmZmMGY1JywNCiAgICAgICAgJ2xhd25ncmVlbic6ICcjN2NmYzAwJywNCiAgICAgICAgJ2xlbW9uY2hpZmZvbic6ICcjZmZmYWNkJywNCiAgICAgICAgJ2xpZ2h0Ymx1ZSc6ICcjYWRkOGU2JywNCiAgICAgICAgJ2xpZ2h0Y29yYWwnOiAnI2YwODA4MCcsDQogICAgICAgICdsaWdodGN5YW4nOiAnI2UwZmZmZicsDQogICAgICAgICdsaWdodGdvbGRlbnJvZHllbGxvdyc6ICcjZmFmYWQyJywNCiAgICAgICAgJ2xpZ2h0Z3JheSc6ICcjZDNkM2QzJywNCiAgICAgICAgJ2xpZ2h0Z3JleSc6ICcjZDNkM2QzJywNCiAgICAgICAgJ2xpZ2h0Z3JlZW4nOiAnIzkwZWU5MCcsDQogICAgICAgICdsaWdodHBpbmsnOiAnI2ZmYjZjMScsDQogICAgICAgICdsaWdodHNhbG1vbic6ICcjZmZhMDdhJywNCiAgICAgICAgJ2xpZ2h0c2VhZ3JlZW4nOiAnIzIwYjJhYScsDQogICAgICAgICdsaWdodHNreWJsdWUnOiAnIzg3Y2VmYScsDQogICAgICAgICdsaWdodHNsYXRlZ3JheSc6ICcjNzc4ODk5JywNCiAgICAgICAgJ2xpZ2h0c2xhdGVncmV5JzogJyM3Nzg4OTknLA0KICAgICAgICAnbGlnaHRzdGVlbGJsdWUnOiAnI2IwYzRkZScsDQogICAgICAgICdsaWdodHllbGxvdyc6ICcjZmZmZmUwJywNCiAgICAgICAgJ2xpbWUnOiAnIzAwZmYwMCcsDQogICAgICAgICdsaW1lZ3JlZW4nOiAnIzMyY2QzMicsDQogICAgICAgICdsaW5lbic6ICcjZmFmMGU2JywNCiAgICAgICAgJ21hZ2VudGEnOiAnI2ZmMDBmZicsDQogICAgICAgICdtYXJvb24nOiAnIzgwMDAwMCcsDQogICAgICAgICdtZWRpdW1hcXVhbWFyaW5lJzogJyM2NmNkYWEnLA0KICAgICAgICAnbWVkaXVtYmx1ZSc6ICcjMDAwMGNkJywNCiAgICAgICAgJ21lZGl1bW9yY2hpZCc6ICcjYmE1NWQzJywNCiAgICAgICAgJ21lZGl1bXB1cnBsZSc6ICcjOTM3MGQ4JywNCiAgICAgICAgJ21lZGl1bXNlYWdyZWVuJzogJyMzY2IzNzEnLA0KICAgICAgICAnbWVkaXVtc2xhdGVibHVlJzogJyM3YjY4ZWUnLA0KICAgICAgICAnbWVkaXVtc3ByaW5nZ3JlZW4nOiAnIzAwZmE5YScsDQogICAgICAgICdtZWRpdW10dXJxdW9pc2UnOiAnIzQ4ZDFjYycsDQogICAgICAgICdtZWRpdW12aW9sZXRyZWQnOiAnI2M3MTU4NScsDQogICAgICAgICdtaWRuaWdodGJsdWUnOiAnIzE5MTk3MCcsDQogICAgICAgICdtaW50Y3JlYW0nOiAnI2Y1ZmZmYScsDQogICAgICAgICdtaXN0eXJvc2UnOiAnI2ZmZTRlMScsDQogICAgICAgICdtb2NjYXNpbic6ICcjZmZlNGI1JywNCiAgICAgICAgJ25hdmFqb3doaXRlJzogJyNmZmRlYWQnLA0KICAgICAgICAnbmF2eSc6ICcjMDAwMDgwJywNCiAgICAgICAgJ29sZGxhY2UnOiAnI2ZkZjVlNicsDQogICAgICAgICdvbGl2ZSc6ICcjODA4MDAwJywNCiAgICAgICAgJ29saXZlZHJhYic6ICcjNmI4ZTIzJywNCiAgICAgICAgJ29yYW5nZSc6ICcjZmZhNTAwJywNCiAgICAgICAgJ29yYW5nZXJlZCc6ICcjZmY0NTAwJywNCiAgICAgICAgJ29yY2hpZCc6ICcjZGE3MGQ2JywNCiAgICAgICAgJ3BhbGVnb2xkZW5yb2QnOiAnI2VlZThhYScsDQogICAgICAgICdwYWxlZ3JlZW4nOiAnIzk4ZmI5OCcsDQogICAgICAgICdwYWxldHVycXVvaXNlJzogJyNhZmVlZWUnLA0KICAgICAgICAncGFsZXZpb2xldHJlZCc6ICcjZDg3MDkzJywNCiAgICAgICAgJ3BhcGF5YXdoaXAnOiAnI2ZmZWZkNScsDQogICAgICAgICdwZWFjaHB1ZmYnOiAnI2ZmZGFiOScsDQogICAgICAgICdwZXJ1JzogJyNjZDg1M2YnLA0KICAgICAgICAncGluayc6ICcjZmZjMGNiJywNCiAgICAgICAgJ3BsdW0nOiAnI2RkYTBkZCcsDQogICAgICAgICdwb3dkZXJibHVlJzogJyNiMGUwZTYnLA0KICAgICAgICAncHVycGxlJzogJyM4MDAwODAnLA0KICAgICAgICAncmViZWNjYXB1cnBsZSc6ICcjNjYzMzk5JywNCiAgICAgICAgJ3JlZCc6ICcjZmYwMDAwJywNCiAgICAgICAgJ3Jvc3licm93bic6ICcjYmM4ZjhmJywNCiAgICAgICAgJ3JveWFsYmx1ZSc6ICcjNDE2OWUxJywNCiAgICAgICAgJ3NhZGRsZWJyb3duJzogJyM4YjQ1MTMnLA0KICAgICAgICAnc2FsbW9uJzogJyNmYTgwNzInLA0KICAgICAgICAnc2FuZHlicm93bic6ICcjZjRhNDYwJywNCiAgICAgICAgJ3NlYWdyZWVuJzogJyMyZThiNTcnLA0KICAgICAgICAnc2Vhc2hlbGwnOiAnI2ZmZjVlZScsDQogICAgICAgICdzaWVubmEnOiAnI2EwNTIyZCcsDQogICAgICAgICdzaWx2ZXInOiAnI2MwYzBjMCcsDQogICAgICAgICdza3libHVlJzogJyM4N2NlZWInLA0KICAgICAgICAnc2xhdGVibHVlJzogJyM2YTVhY2QnLA0KICAgICAgICAnc2xhdGVncmF5JzogJyM3MDgwOTAnLA0KICAgICAgICAnc2xhdGVncmV5JzogJyM3MDgwOTAnLA0KICAgICAgICAnc25vdyc6ICcjZmZmYWZhJywNCiAgICAgICAgJ3NwcmluZ2dyZWVuJzogJyMwMGZmN2YnLA0KICAgICAgICAnc3RlZWxibHVlJzogJyM0NjgyYjQnLA0KICAgICAgICAndGFuJzogJyNkMmI0OGMnLA0KICAgICAgICAndGVhbCc6ICcjMDA4MDgwJywNCiAgICAgICAgJ3RoaXN0bGUnOiAnI2Q4YmZkOCcsDQogICAgICAgICd0b21hdG8nOiAnI2ZmNjM0NycsDQogICAgICAgICd0dXJxdW9pc2UnOiAnIzQwZTBkMCcsDQogICAgICAgICd2aW9sZXQnOiAnI2VlODJlZScsDQogICAgICAgICd3aGVhdCc6ICcjZjVkZWIzJywNCiAgICAgICAgJ3doaXRlJzogJyNmZmZmZmYnLA0KICAgICAgICAnd2hpdGVzbW9rZSc6ICcjZjVmNWY1JywNCiAgICAgICAgJ3llbGxvdyc6ICcjZmZmZjAwJywNCiAgICAgICAgJ3llbGxvd2dyZWVuJzogJyM5YWNkMzInDQogICAgfTsKCiAgICB2YXIgdW5pdENvbnZlcnNpb25zID0gew0KICAgICAgICBsZW5ndGg6IHsNCiAgICAgICAgICAgICdtJzogMSwNCiAgICAgICAgICAgICdjbSc6IDAuMDEsDQogICAgICAgICAgICAnbW0nOiAwLjAwMSwNCiAgICAgICAgICAgICdpbic6IDAuMDI1NCwNCiAgICAgICAgICAgICdweCc6IDAuMDI1NCAvIDk2LA0KICAgICAgICAgICAgJ3B0JzogMC4wMjU0IC8gNzIsDQogICAgICAgICAgICAncGMnOiAwLjAyNTQgLyA3MiAqIDEyDQogICAgICAgIH0sDQogICAgICAgIGR1cmF0aW9uOiB7DQogICAgICAgICAgICAncyc6IDEsDQogICAgICAgICAgICAnbXMnOiAwLjAwMQ0KICAgICAgICB9LA0KICAgICAgICBhbmdsZTogew0KICAgICAgICAgICAgJ3JhZCc6IDEgLyAoMiAqIE1hdGguUEkpLA0KICAgICAgICAgICAgJ2RlZyc6IDEgLyAzNjAsDQogICAgICAgICAgICAnZ3JhZCc6IDEgLyA0MDAsDQogICAgICAgICAgICAndHVybic6IDENCiAgICAgICAgfQ0KICAgIH07CgogICAgdmFyIGRhdGEgPSB7IGNvbG9yczogY29sb3JzLCB1bml0Q29udmVyc2lvbnM6IHVuaXRDb252ZXJzaW9ucyB9OwoKICAgIC8qKg0KICAgICAqIFRoZSByZWFzb24gd2h5IE5vZGUgaXMgYSBjbGFzcyBhbmQgb3RoZXIgbm9kZXMgc2ltcGx5IGRvIG5vdCBleHRlbmQNCiAgICAgKiBmcm9tIE5vZGUgKHNpbmNlIHdlJ3JlIHRyYW5zcGlsaW5nKSBpcyBkdWUgdG8gdGhpcyBpc3N1ZToNCiAgICAgKg0KICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXNzL2xlc3MuanMvaXNzdWVzLzM0MzQNCiAgICAgKi8NCiAgICB2YXIgTm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gTm9kZSgpIHsNCiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDsNCiAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eUJsb2NrcyA9IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIHRoaXMubm9kZVZpc2libGUgPSB1bmRlZmluZWQ7DQogICAgICAgICAgICB0aGlzLnJvb3ROb2RlID0gbnVsbDsNCiAgICAgICAgICAgIHRoaXMucGFyc2VkID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsICJjdXJyZW50RmlsZUluZm8iLCB7DQogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlSW5mbygpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLA0KICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlDQogICAgICAgIH0pOw0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsICJpbmRleCIsIHsNCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEluZGV4KCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsDQogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUNCiAgICAgICAgfSk7DQogICAgICAgIE5vZGUucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uIChub2RlcywgcGFyZW50KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBzZXQobm9kZSkgew0KICAgICAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUgaW5zdGFuY2VvZiBOb2RlKSB7DQogICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50ID0gcGFyZW50Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGVzKSkgew0KICAgICAgICAgICAgICAgIG5vZGVzLmZvckVhY2goc2V0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHNldChub2Rlcyk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4IHx8ICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5nZXRJbmRleCgpKSB8fCAwOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5maWxlSW5mbyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maWxlSW5mbyB8fCAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuZmlsZUluZm8oKSkgfHwge307DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmlzUnVsZXNldExpa2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTsNCiAgICAgICAgTm9kZS5wcm90b3R5cGUudG9DU1MgPSBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHN0cnMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuZ2VuQ1NTKGNvbnRleHQsIHsNCiAgICAgICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChjaHVuaywgZmlsZUluZm8sIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICAgIHN0cnMucHVzaChjaHVuayk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBpc0VtcHR5OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJzLmxlbmd0aCA9PT0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybiBzdHJzLmpvaW4oJycpOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5nZW5DU1MgPSBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMudmFsdWUpOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZpc2l0b3IudmlzaXQodGhpcy52YWx1ZSk7DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmV2YWwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5fb3BlcmF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0LCBvcCwgYSwgYikgew0KICAgICAgICAgICAgc3dpdGNoIChvcCkgew0KICAgICAgICAgICAgICAgIGNhc2UgJysnOiByZXR1cm4gYSArIGI7DQogICAgICAgICAgICAgICAgY2FzZSAnLSc6IHJldHVybiBhIC0gYjsNCiAgICAgICAgICAgICAgICBjYXNlICcqJzogcmV0dXJuIGEgKiBiOw0KICAgICAgICAgICAgICAgIGNhc2UgJy8nOiByZXR1cm4gYSAvIGI7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmZyb3VuZCA9IGZ1bmN0aW9uIChjb250ZXh0LCB2YWx1ZSkgew0KICAgICAgICAgICAgdmFyIHByZWNpc2lvbiA9IGNvbnRleHQgJiYgY29udGV4dC5udW1QcmVjaXNpb247DQogICAgICAgICAgICAvLyBhZGQgImVwc2lsb24iIHRvIGVuc3VyZSBudW1iZXJzIGxpa2UgMS4wMDAwMDAwMDUgKHJlcHJlc2VudGVkIGFzIDEuMDAwMDAwMDA0OTk5Li4uKSBhcmUgcHJvcGVybHkgcm91bmRlZDoNCiAgICAgICAgICAgIHJldHVybiAocHJlY2lzaW9uKSA/IE51bWJlcigodmFsdWUgKyAyZS0xNikudG9GaXhlZChwcmVjaXNpb24pKSA6IHZhbHVlOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLmNvbXBhcmUgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgICAgLyogcmV0dXJuczoNCiAgICAgICAgICAgICAtMTogYSA8IGINCiAgICAgICAgICAgICAwOiBhID0gYg0KICAgICAgICAgICAgIDE6IGEgPiBiDQogICAgICAgICAgICAgYW5kICphbnkqIG90aGVyIHZhbHVlIGZvciBhICE9IGIgKGUuZy4gdW5kZWZpbmVkLCBOYU4sIC0yIGV0Yy4pICovDQogICAgICAgICAgICBpZiAoKGEuY29tcGFyZSkgJiYNCiAgICAgICAgICAgICAgICAvLyBmb3IgInN5bW1ldHJpYyByZXN1bHRzIiBmb3JjZSB0b0NTUy1iYXNlZCBjb21wYXJpc29uDQogICAgICAgICAgICAgICAgLy8gb2YgUXVvdGVkIG9yIEFub255bW91cyBpZiBlaXRoZXIgdmFsdWUgaXMgb25lIG9mIHRob3NlDQogICAgICAgICAgICAgICAgIShiLnR5cGUgPT09ICdRdW90ZWQnIHx8IGIudHlwZSA9PT0gJ0Fub255bW91cycpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGEuY29tcGFyZShiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGIuY29tcGFyZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAtYi5jb21wYXJlKGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoYS50eXBlICE9PSBiLnR5cGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYSA9IGEudmFsdWU7DQogICAgICAgICAgICBiID0gYi52YWx1ZTsNCiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBhID09PSBiID8gMCA6IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKE5vZGUuY29tcGFyZShhW2ldLCBiW2ldKSAhPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLm51bWVyaWNDb21wYXJlID0gZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgICAgICAgIHJldHVybiBhIDwgYiA/IC0xDQogICAgICAgICAgICAgICAgOiBhID09PSBiID8gMA0KICAgICAgICAgICAgICAgICAgICA6IGEgPiBiID8gMSA6IHVuZGVmaW5lZDsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gUmV0dXJucyB0cnVlIGlmIHRoaXMgbm9kZSByZXByZXNlbnRzIHJvb3Qgb2YgYXN0IGltcG9ydGVkIGJ5IHJlZmVyZW5jZQ0KICAgICAgICBOb2RlLnByb3RvdHlwZS5ibG9ja3NWaXNpYmlsaXR5ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudmlzaWJpbGl0eUJsb2NrcyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5QmxvY2tzID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2liaWxpdHlCbG9ja3MgIT09IDA7DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmFkZFZpc2liaWxpdHlCbG9jayA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnZpc2liaWxpdHlCbG9ja3MgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eUJsb2NrcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnZpc2liaWxpdHlCbG9ja3MgPSB0aGlzLnZpc2liaWxpdHlCbG9ja3MgKyAxOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5yZW1vdmVWaXNpYmlsaXR5QmxvY2sgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAodGhpcy52aXNpYmlsaXR5QmxvY2tzID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnZpc2liaWxpdHlCbG9ja3MgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5QmxvY2tzID0gdGhpcy52aXNpYmlsaXR5QmxvY2tzIC0gMTsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gVHVybnMgb24gbm9kZSB2aXNpYmlsaXR5IC0gaWYgY2FsbGVkIG5vZGUgd2lsbCBiZSBzaG93biBpbiBvdXRwdXQgcmVnYXJkbGVzcw0KICAgICAgICAvLyBvZiB3aGV0aGVyIGl0IGNvbWVzIGZyb20gaW1wb3J0IGJ5IHJlZmVyZW5jZSBvciBub3QNCiAgICAgICAgTm9kZS5wcm90b3R5cGUuZW5zdXJlVmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMubm9kZVZpc2libGUgPSB0cnVlOw0KICAgICAgICB9Ow0KICAgICAgICAvLyBUdXJucyBvZmYgbm9kZSB2aXNpYmlsaXR5IC0gaWYgY2FsbGVkIG5vZGUgd2lsbCBOT1QgYmUgc2hvd24gaW4gb3V0cHV0IHJlZ2FyZGxlc3MNCiAgICAgICAgLy8gb2Ygd2hldGhlciBpdCBjb21lcyBmcm9tIGltcG9ydCBieSByZWZlcmVuY2Ugb3Igbm90DQogICAgICAgIE5vZGUucHJvdG90eXBlLmVuc3VyZUludmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMubm9kZVZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gcmV0dXJuIHZhbHVlczoNCiAgICAgICAgLy8gZmFsc2UgLSB0aGUgbm9kZSBtdXN0IG5vdCBiZSB2aXNpYmxlDQogICAgICAgIC8vIHRydWUgLSB0aGUgbm9kZSBtdXN0IGJlIHZpc2libGUNCiAgICAgICAgLy8gdW5kZWZpbmVkIG9yIG51bGwgLSB0aGUgbm9kZSBoYXMgdGhlIHNhbWUgdmlzaWJpbGl0eSBhcyBpdHMgcGFyZW50DQogICAgICAgIE5vZGUucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGVWaXNpYmxlOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS52aXNpYmlsaXR5SW5mbyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdmlzaWJpbGl0eUJsb2NrczogdGhpcy52aXNpYmlsaXR5QmxvY2tzLA0KICAgICAgICAgICAgICAgIG5vZGVWaXNpYmxlOiB0aGlzLm5vZGVWaXNpYmxlDQogICAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5jb3B5VmlzaWJpbGl0eUluZm8gPSBmdW5jdGlvbiAoaW5mbykgew0KICAgICAgICAgICAgaWYgKCFpbmZvKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5QmxvY2tzID0gaW5mby52aXNpYmlsaXR5QmxvY2tzOw0KICAgICAgICAgICAgdGhpcy5ub2RlVmlzaWJsZSA9IGluZm8ubm9kZVZpc2libGU7DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBOb2RlOw0KICAgIH0oKSk7CgogICAgLy8NCiAgICAvLyBSR0IgQ29sb3JzIC0gI2ZmMDAxNCwgI2VlZQ0KICAgIC8vDQogICAgdmFyIENvbG9yID0gZnVuY3Rpb24gKHJnYiwgYSwgb3JpZ2luYWxGb3JtKSB7DQogICAgICAgIHZhciBzZWxmID0gdGhpczsNCiAgICAgICAgLy8NCiAgICAgICAgLy8gVGhlIGVuZCBnb2FsIGhlcmUsIGlzIHRvIHBhcnNlIHRoZSBhcmd1bWVudHMNCiAgICAgICAgLy8gaW50byBhbiBpbnRlZ2VyIHRyaXBsZXQsIHN1Y2ggYXMgYDEyOCwgMjU1LCAwYA0KICAgICAgICAvLw0KICAgICAgICAvLyBUaGlzIGZhY2lsaXRhdGVzIG9wZXJhdGlvbnMgYW5kIGNvbnZlcnNpb25zLg0KICAgICAgICAvLw0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZ2IpKSB7DQogICAgICAgICAgICB0aGlzLnJnYiA9IHJnYjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChyZ2IubGVuZ3RoID49IDYpIHsNCiAgICAgICAgICAgIHRoaXMucmdiID0gW107DQogICAgICAgICAgICByZ2IubWF0Y2goLy57Mn0vZykubWFwKGZ1bmN0aW9uIChjLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKGkgPCAzKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYucmdiLnB1c2gocGFyc2VJbnQoYywgMTYpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWxwaGEgPSAocGFyc2VJbnQoYywgMTYpKSAvIDI1NTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMucmdiID0gW107DQogICAgICAgICAgICByZ2Iuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoYywgaSkgew0KICAgICAgICAgICAgICAgIGlmIChpIDwgMykgew0KICAgICAgICAgICAgICAgICAgICBzZWxmLnJnYi5wdXNoKHBhcnNlSW50KGMgKyBjLCAxNikpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbHBoYSA9IChwYXJzZUludChjICsgYywgMTYpKSAvIDI1NTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmFscGhhID0gdGhpcy5hbHBoYSB8fCAodHlwZW9mIGEgPT09ICdudW1iZXInID8gYSA6IDEpOw0KICAgICAgICBpZiAodHlwZW9mIG9yaWdpbmFsRm9ybSAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBvcmlnaW5hbEZvcm07DQogICAgICAgIH0NCiAgICB9Ow0KICAgIENvbG9yLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnQ29sb3InLA0KICAgICAgICBsdW1hOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgciA9IHRoaXMucmdiWzBdIC8gMjU1LCBnID0gdGhpcy5yZ2JbMV0gLyAyNTUsIGIgPSB0aGlzLnJnYlsyXSAvIDI1NTsNCiAgICAgICAgICAgIHIgPSAociA8PSAwLjAzOTI4KSA/IHIgLyAxMi45MiA6IE1hdGgucG93KCgociArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTsNCiAgICAgICAgICAgIGcgPSAoZyA8PSAwLjAzOTI4KSA/IGcgLyAxMi45MiA6IE1hdGgucG93KCgoZyArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTsNCiAgICAgICAgICAgIGIgPSAoYiA8PSAwLjAzOTI4KSA/IGIgLyAxMi45MiA6IE1hdGgucG93KCgoYiArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTsNCiAgICAgICAgICAgIHJldHVybiAwLjIxMjYgKiByICsgMC43MTUyICogZyArIDAuMDcyMiAqIGI7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnRvQ1NTKGNvbnRleHQpKTsNCiAgICAgICAgfSwNCiAgICAgICAgdG9DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBkb05vdENvbXByZXNzKSB7DQogICAgICAgICAgICB2YXIgY29tcHJlc3MgPSBjb250ZXh0ICYmIGNvbnRleHQuY29tcHJlc3MgJiYgIWRvTm90Q29tcHJlc3M7DQogICAgICAgICAgICB2YXIgY29sb3I7DQogICAgICAgICAgICB2YXIgYWxwaGE7DQogICAgICAgICAgICB2YXIgY29sb3JGdW5jdGlvbjsNCiAgICAgICAgICAgIHZhciBhcmdzID0gW107DQogICAgICAgICAgICAvLyBgdmFsdWVgIGlzIHNldCBpZiB0aGlzIGNvbG9yIHdhcyBvcmlnaW5hbGx5DQogICAgICAgICAgICAvLyBjb252ZXJ0ZWQgZnJvbSBhIG5hbWVkIGNvbG9yIHN0cmluZyBzbyB3ZSBuZWVkDQogICAgICAgICAgICAvLyB0byByZXNwZWN0IHRoaXMgYW5kIHRyeSB0byBvdXRwdXQgbmFtZWQgY29sb3IgdG9vLg0KICAgICAgICAgICAgYWxwaGEgPSB0aGlzLmZyb3VuZChjb250ZXh0LCB0aGlzLmFscGhhKTsNCiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUuaW5kZXhPZigncmdiJykgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFscGhhIDwgMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JGdW5jdGlvbiA9ICdyZ2JhJzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnZhbHVlLmluZGV4T2YoJ2hzbCcpID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYSA8IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yRnVuY3Rpb24gPSAnaHNsYSc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb2xvckZ1bmN0aW9uID0gJ2hzbCc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChhbHBoYSA8IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3JGdW5jdGlvbiA9ICdyZ2JhJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzd2l0Y2ggKGNvbG9yRnVuY3Rpb24pIHsNCiAgICAgICAgICAgICAgICBjYXNlICdyZ2JhJzoNCiAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXMucmdiLm1hcChmdW5jdGlvbiAoYykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wJDEoTWF0aC5yb3VuZChjKSwgMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgfSkuY29uY2F0KGNsYW1wJDEoYWxwaGEsIDEpKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnaHNsYSc6DQogICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaChjbGFtcCQxKGFscGhhLCAxKSk7DQogICAgICAgICAgICAgICAgY2FzZSAnaHNsJzoNCiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSB0aGlzLnRvSFNMKCk7DQogICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBbDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb3VuZChjb250ZXh0LCBjb2xvci5oKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvdW5kKGNvbnRleHQsIGNvbG9yLnMgKiAxMDApICsgIiUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm91bmQoY29udGV4dCwgY29sb3IubCAqIDEwMCkgKyAiJSINCiAgICAgICAgICAgICAgICAgICAgXS5jb25jYXQoYXJncyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoY29sb3JGdW5jdGlvbikgew0KICAgICAgICAgICAgICAgIC8vIFZhbHVlcyBhcmUgY2FwcGVkIGJldHdlZW4gYDBgIGFuZCBgMjU1YCwgcm91bmRlZCBhbmQgemVyby1wYWRkZWQuDQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yRnVuY3Rpb24gKyAiKCIgKyBhcmdzLmpvaW4oIiwiICsgKGNvbXByZXNzID8gJycgOiAnICcpKSArICIpIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbG9yID0gdGhpcy50b1JHQigpOw0KICAgICAgICAgICAgaWYgKGNvbXByZXNzKSB7DQogICAgICAgICAgICAgICAgdmFyIHNwbGl0Y29sb3IgPSBjb2xvci5zcGxpdCgnJyk7DQogICAgICAgICAgICAgICAgLy8gQ29udmVydCBjb2xvciB0byBzaG9ydCBmb3JtYXQNCiAgICAgICAgICAgICAgICBpZiAoc3BsaXRjb2xvclsxXSA9PT0gc3BsaXRjb2xvclsyXSAmJiBzcGxpdGNvbG9yWzNdID09PSBzcGxpdGNvbG9yWzRdICYmIHNwbGl0Y29sb3JbNV0gPT09IHNwbGl0Y29sb3JbNl0pIHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSAiIyIgKyBzcGxpdGNvbG9yWzFdICsgc3BsaXRjb2xvclszXSArIHNwbGl0Y29sb3JbNV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGNvbG9yOw0KICAgICAgICB9LA0KICAgICAgICAvLw0KICAgICAgICAvLyBPcGVyYXRpb25zIGhhdmUgdG8gYmUgZG9uZSBwZXItY2hhbm5lbCwgaWYgbm90LA0KICAgICAgICAvLyBjaGFubmVscyB3aWxsIHNwaWxsIG9udG8gZWFjaCBvdGhlci4gT25jZSB3ZSBoYXZlDQogICAgICAgIC8vIG91ciByZXN1bHQsIGluIHRoZSBmb3JtIG9mIGFuIGludGVnZXIgdHJpcGxldCwNCiAgICAgICAgLy8gd2UgY3JlYXRlIGEgbmV3IENvbG9yIG5vZGUgdG8gaG9sZCB0aGUgcmVzdWx0Lg0KICAgICAgICAvLw0KICAgICAgICBvcGVyYXRlOiBmdW5jdGlvbiAoY29udGV4dCwgb3AsIG90aGVyKSB7DQogICAgICAgICAgICB2YXIgcmdiID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgICAgdmFyIGFscGhhID0gdGhpcy5hbHBoYSAqICgxIC0gb3RoZXIuYWxwaGEpICsgb3RoZXIuYWxwaGE7DQogICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IDM7IGMrKykgew0KICAgICAgICAgICAgICAgIHJnYltjXSA9IHRoaXMuX29wZXJhdGUoY29udGV4dCwgb3AsIHRoaXMucmdiW2NdLCBvdGhlci5yZ2JbY10pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihyZ2IsIGFscGhhKTsNCiAgICAgICAgfSwNCiAgICAgICAgdG9SR0I6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0b0hleCh0aGlzLnJnYik7DQogICAgICAgIH0sDQogICAgICAgIHRvSFNMOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgciA9IHRoaXMucmdiWzBdIC8gMjU1LCBnID0gdGhpcy5yZ2JbMV0gLyAyNTUsIGIgPSB0aGlzLnJnYlsyXSAvIDI1NSwgYSA9IHRoaXMuYWxwaGE7DQogICAgICAgICAgICB2YXIgbWF4ID0gTWF0aC5tYXgociwgZywgYiksIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpOw0KICAgICAgICAgICAgdmFyIGg7DQogICAgICAgICAgICB2YXIgczsNCiAgICAgICAgICAgIHZhciBsID0gKG1heCArIG1pbikgLyAyOw0KICAgICAgICAgICAgdmFyIGQgPSBtYXggLSBtaW47DQogICAgICAgICAgICBpZiAobWF4ID09PSBtaW4pIHsNCiAgICAgICAgICAgICAgICBoID0gcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBzID0gbCA+IDAuNSA/IGQgLyAoMiAtIG1heCAtIG1pbikgOiBkIC8gKG1heCArIG1pbik7DQogICAgICAgICAgICAgICAgc3dpdGNoIChtYXgpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSByOg0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgZzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGggPSAoYiAtIHIpIC8gZCArIDI7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBiOg0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChyIC0gZykgLyBkICsgNDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBoIC89IDY7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4geyBoOiBoICogMzYwLCBzOiBzLCBsOiBsLCBhOiBhIH07DQogICAgICAgIH0sDQogICAgICAgIC8vIEFkYXB0ZWQgZnJvbSBodHRwOi8vbWppamFja3Nvbi5jb20vMjAwOC8wMi9yZ2ItdG8taHNsLWFuZC1yZ2ItdG8taHN2LWNvbG9yLW1vZGVsLWNvbnZlcnNpb24tYWxnb3JpdGhtcy1pbi1qYXZhc2NyaXB0DQogICAgICAgIHRvSFNWOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgciA9IHRoaXMucmdiWzBdIC8gMjU1LCBnID0gdGhpcy5yZ2JbMV0gLyAyNTUsIGIgPSB0aGlzLnJnYlsyXSAvIDI1NSwgYSA9IHRoaXMuYWxwaGE7DQogICAgICAgICAgICB2YXIgbWF4ID0gTWF0aC5tYXgociwgZywgYiksIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpOw0KICAgICAgICAgICAgdmFyIGg7DQogICAgICAgICAgICB2YXIgczsNCiAgICAgICAgICAgIHZhciB2ID0gbWF4Ow0KICAgICAgICAgICAgdmFyIGQgPSBtYXggLSBtaW47DQogICAgICAgICAgICBpZiAobWF4ID09PSAwKSB7DQogICAgICAgICAgICAgICAgcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBzID0gZCAvIG1heDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChtYXggPT09IG1pbikgew0KICAgICAgICAgICAgICAgIGggPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChtYXgpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSByOg0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgZzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGggPSAoYiAtIHIpIC8gZCArIDI7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBiOg0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChyIC0gZykgLyBkICsgNDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBoIC89IDY7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4geyBoOiBoICogMzYwLCBzOiBzLCB2OiB2LCBhOiBhIH07DQogICAgICAgIH0sDQogICAgICAgIHRvQVJHQjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRvSGV4KFt0aGlzLmFscGhhICogMjU1XS5jb25jYXQodGhpcy5yZ2IpKTsNCiAgICAgICAgfSwNCiAgICAgICAgY29tcGFyZTogZnVuY3Rpb24gKHgpIHsNCiAgICAgICAgICAgIHJldHVybiAoeC5yZ2IgJiYNCiAgICAgICAgICAgICAgICB4LnJnYlswXSA9PT0gdGhpcy5yZ2JbMF0gJiYNCiAgICAgICAgICAgICAgICB4LnJnYlsxXSA9PT0gdGhpcy5yZ2JbMV0gJiYNCiAgICAgICAgICAgICAgICB4LnJnYlsyXSA9PT0gdGhpcy5yZ2JbMl0gJiYNCiAgICAgICAgICAgICAgICB4LmFscGhhID09PSB0aGlzLmFscGhhKSA/IDAgOiB1bmRlZmluZWQ7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICBDb2xvci5mcm9tS2V5d29yZCA9IGZ1bmN0aW9uIChrZXl3b3JkKSB7DQogICAgICAgIHZhciBjOw0KICAgICAgICB2YXIga2V5ID0ga2V5d29yZC50b0xvd2VyQ2FzZSgpOw0KICAgICAgICBpZiAoY29sb3JzLmhhc093blByb3BlcnR5KGtleSkpIHsNCiAgICAgICAgICAgIGMgPSBuZXcgQ29sb3IoY29sb3JzW2tleV0uc2xpY2UoMSkpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3RyYW5zcGFyZW50Jykgew0KICAgICAgICAgICAgYyA9IG5ldyBDb2xvcihbMCwgMCwgMF0sIDApOw0KICAgICAgICB9DQogICAgICAgIGlmIChjKSB7DQogICAgICAgICAgICBjLnZhbHVlID0ga2V5d29yZDsNCiAgICAgICAgICAgIHJldHVybiBjOw0KICAgICAgICB9DQogICAgfTsNCiAgICBmdW5jdGlvbiBjbGFtcCQxKHYsIG1heCkgew0KICAgICAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodiwgMCksIG1heCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRvSGV4KHYpIHsNCiAgICAgICAgcmV0dXJuICIjIiArIHYubWFwKGZ1bmN0aW9uIChjKSB7DQogICAgICAgICAgICBjID0gY2xhbXAkMShNYXRoLnJvdW5kKGMpLCAyNTUpOw0KICAgICAgICAgICAgcmV0dXJuIChjIDwgMTYgPyAnMCcgOiAnJykgKyBjLnRvU3RyaW5nKDE2KTsNCiAgICAgICAgfSkuam9pbignJyk7DQogICAgfQoKICAgIHZhciBQYXJlbiA9IGZ1bmN0aW9uIChub2RlKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSBub2RlOw0KICAgIH07DQogICAgUGFyZW4ucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdQYXJlbicsDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCgnKCcpOw0KICAgICAgICAgICAgdGhpcy52YWx1ZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgIG91dHB1dC5hZGQoJyknKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyZW4odGhpcy52YWx1ZS5ldmFsKGNvbnRleHQpKTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBfbm9TcGFjZUNvbWJpbmF0b3JzID0gew0KICAgICAgICAnJzogdHJ1ZSwNCiAgICAgICAgJyAnOiB0cnVlLA0KICAgICAgICAnfCc6IHRydWUNCiAgICB9Ow0KICAgIHZhciBDb21iaW5hdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgIGlmICh2YWx1ZSA9PT0gJyAnKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gJyAnOw0KICAgICAgICAgICAgdGhpcy5lbXB0eU9yV2hpdGVzcGFjZSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgPyB2YWx1ZS50cmltKCkgOiAnJzsNCiAgICAgICAgICAgIHRoaXMuZW1wdHlPcldoaXRlc3BhY2UgPSB0aGlzLnZhbHVlID09PSAnJzsNCiAgICAgICAgfQ0KICAgIH07DQogICAgQ29tYmluYXRvci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ0NvbWJpbmF0b3InLA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIHZhciBzcGFjZU9yRW1wdHkgPSAoY29udGV4dC5jb21wcmVzcyB8fCBfbm9TcGFjZUNvbWJpbmF0b3JzW3RoaXMudmFsdWVdKSA/ICcnIDogJyAnOw0KICAgICAgICAgICAgb3V0cHV0LmFkZChzcGFjZU9yRW1wdHkgKyB0aGlzLnZhbHVlICsgc3BhY2VPckVtcHR5KTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBFbGVtZW50ID0gZnVuY3Rpb24gKGNvbWJpbmF0b3IsIHZhbHVlLCBpc1ZhcmlhYmxlLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLmNvbWJpbmF0b3IgPSBjb21iaW5hdG9yIGluc3RhbmNlb2YgQ29tYmluYXRvciA/DQogICAgICAgICAgICBjb21iaW5hdG9yIDogbmV3IENvbWJpbmF0b3IoY29tYmluYXRvcik7DQogICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUudHJpbSgpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5pc1ZhcmlhYmxlID0gaXNWYXJpYWJsZTsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuY29weVZpc2liaWxpdHlJbmZvKHZpc2liaWxpdHlJbmZvKTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5jb21iaW5hdG9yLCB0aGlzKTsNCiAgICB9Ow0KICAgIEVsZW1lbnQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdFbGVtZW50JywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTsNCiAgICAgICAgICAgIHRoaXMuY29tYmluYXRvciA9IHZpc2l0b3IudmlzaXQodGhpcy5jb21iaW5hdG9yKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7DQogICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZpc2l0b3IudmlzaXQodmFsdWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBFbGVtZW50KHRoaXMuY29tYmluYXRvciwgdGhpcy52YWx1ZS5ldmFsID8gdGhpcy52YWx1ZS5ldmFsKGNvbnRleHQpIDogdGhpcy52YWx1ZSwgdGhpcy5pc1ZhcmlhYmxlLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgY2xvbmU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRWxlbWVudCh0aGlzLmNvbWJpbmF0b3IsIHRoaXMudmFsdWUsIHRoaXMuaXNWYXJpYWJsZSwgdGhpcy5nZXRJbmRleCgpLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnRvQ1NTKGNvbnRleHQpLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMuZ2V0SW5kZXgoKSk7DQogICAgICAgIH0sDQogICAgICAgIHRvQ1NTOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwge307DQogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlOw0KICAgICAgICAgICAgdmFyIGZpcnN0U2VsZWN0b3IgPSBjb250ZXh0LmZpcnN0U2VsZWN0b3I7DQogICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQYXJlbikgew0KICAgICAgICAgICAgICAgIC8vIHNlbGVjdG9yIGluIHBhcmVucyBzaG91bGQgbm90IGJlIGFmZmVjdGVkIGJ5IG91dGVyIHNlbGVjdG9yDQogICAgICAgICAgICAgICAgLy8gZmxhZ3MgKGJyZWFrcyBvbmx5IGludGVycG9sYXRlZCBzZWxlY3RvcnMgLSBzZWUgIzE5NzMpDQogICAgICAgICAgICAgICAgY29udGV4dC5maXJzdFNlbGVjdG9yID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9DU1MgPyB2YWx1ZS50b0NTUyhjb250ZXh0KSA6IHZhbHVlOw0KICAgICAgICAgICAgY29udGV4dC5maXJzdFNlbGVjdG9yID0gZmlyc3RTZWxlY3RvcjsNCiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycgJiYgdGhpcy5jb21iaW5hdG9yLnZhbHVlLmNoYXJBdCgwKSA9PT0gJyYnKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tYmluYXRvci50b0NTUyhjb250ZXh0KSArIHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIE1hdGgkMSA9IHsNCiAgICAgICAgQUxXQVlTOiAwLA0KICAgICAgICBQQVJFTlNfRElWSVNJT046IDEsDQogICAgICAgIFBBUkVOUzogMg0KICAgICAgICAvLyByZW1vdmVkIC0gU1RSSUNUX0xFR0FDWTogMw0KICAgIH07DQogICAgdmFyIFJld3JpdGVVcmxzID0gew0KICAgICAgICBPRkY6IDAsDQogICAgICAgIExPQ0FMOiAxLA0KICAgICAgICBBTEw6IDINCiAgICB9OwoKICAgIC8qKg0KICAgICAqIFJldHVybnMgdGhlIG9iamVjdCB0eXBlIG9mIHRoZSBnaXZlbiBwYXlsb2FkDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IHBheWxvYWQNCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGdldFR5cGUocGF5bG9hZCkgew0KICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHBheWxvYWQpLnNsaWNlKDgsIC0xKTsNCiAgICB9DQogICAgLyoqDQogICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBwYXlsb2FkIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3QgKGV4Y2x1ZGluZyBzcGVjaWFsIGNsYXNzZXMgb3Igb2JqZWN0cyB3aXRoIG90aGVyIHByb3RvdHlwZXMpDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IHBheWxvYWQNCiAgICAgKiBAcmV0dXJucyB7cGF5bG9hZCBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+fQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QocGF5bG9hZCkgew0KICAgICAgICBpZiAoZ2V0VHlwZShwYXlsb2FkKSAhPT0gJ09iamVjdCcpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHJldHVybiBwYXlsb2FkLmNvbnN0cnVjdG9yID09PSBPYmplY3QgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKHBheWxvYWQpID09PSBPYmplY3QucHJvdG90eXBlOw0KICAgIH0NCiAgICAvKioNCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHBheWxvYWQgaXMgYW4gYXJyYXkNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55fSBwYXlsb2FkDQogICAgICogQHJldHVybnMge3BheWxvYWQgaXMgYW55W119DQogICAgICovDQogICAgZnVuY3Rpb24gaXNBcnJheShwYXlsb2FkKSB7DQogICAgICAgIHJldHVybiBnZXRUeXBlKHBheWxvYWQpID09PSAnQXJyYXknOw0KICAgIH0KCiAgICAvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4NCiAgICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlDQogICAgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUNCiAgICBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KDQogICAgVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQ0KICAgIEtJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRUQNCiAgICBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLA0KICAgIE1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuDQoNCiAgICBTZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMNCiAgICBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8NCg0KICAgIGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkgew0KICAgICAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDsNCiAgICAgICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKQ0KICAgICAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspDQogICAgICAgICAgICAgICAgcltrXSA9IGFbal07DQogICAgICAgIHJldHVybiByOw0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NpZ25Qcm9wKGNhcnJ5LCBrZXksIG5ld1ZhbCwgb3JpZ2luYWxPYmplY3QsIGluY2x1ZGVOb25lbnVtZXJhYmxlKSB7DQogICAgICAgIHZhciBwcm9wVHlwZSA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob3JpZ2luYWxPYmplY3QsIGtleSkNCiAgICAgICAgICAgID8gJ2VudW1lcmFibGUnDQogICAgICAgICAgICA6ICdub25lbnVtZXJhYmxlJzsNCiAgICAgICAgaWYgKHByb3BUeXBlID09PSAnZW51bWVyYWJsZScpDQogICAgICAgICAgICBjYXJyeVtrZXldID0gbmV3VmFsOw0KICAgICAgICBpZiAoaW5jbHVkZU5vbmVudW1lcmFibGUgJiYgcHJvcFR5cGUgPT09ICdub25lbnVtZXJhYmxlJykgew0KICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhcnJ5LCBrZXksIHsNCiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3VmFsLA0KICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLA0KICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KICAgIC8qKg0KICAgICAqIENvcHkgKGNsb25lKSBhbiBvYmplY3QgYW5kIGFsbCBpdHMgcHJvcHMgcmVjdXJzaXZlbHkgdG8gZ2V0IHJpZCBvZiBhbnkgcHJvcCByZWZlcmVuY2VkIG9mIHRoZSBvcmlnaW5hbCBvYmplY3QuIEFycmF5cyBhcmUgYWxzbyBjbG9uZWQsIGhvd2V2ZXIgb2JqZWN0cyBpbnNpZGUgYXJyYXlzIGFyZSBzdGlsbCBsaW5rZWQuDQogICAgICoNCiAgICAgKiBAZXhwb3J0DQogICAgICogQHRlbXBsYXRlIFQNCiAgICAgKiBAcGFyYW0ge1R9IHRhcmdldCBUYXJnZXQgY2FuIGJlIGFueXRoaW5nDQogICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9ucz17fV0gT3B0aW9ucyBjYW4gYmUgYHByb3BzYCBvciBgbm9uZW51bWVyYWJsZWANCiAgICAgKiBAcmV0dXJucyB7VH0gdGhlIHRhcmdldCB3aXRoIHJlcGxhY2VkIHZhbHVlcw0KICAgICAqIEBleHBvcnQNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBjb3B5KHRhcmdldCwgb3B0aW9ucykgew0KICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfQ0KICAgICAgICBpZiAoaXNBcnJheSh0YXJnZXQpKQ0KICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5tYXAoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGNvcHkoaSwgb3B0aW9ucyk7IH0pOw0KICAgICAgICBpZiAoIWlzUGxhaW5PYmplY3QodGFyZ2V0KSkNCiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7DQogICAgICAgIHZhciBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldCk7DQogICAgICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpOw0KICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheXMocHJvcHMsIHN5bWJvbHMpLnJlZHVjZShmdW5jdGlvbiAoY2FycnksIGtleSkgew0KICAgICAgICAgICAgaWYgKGlzQXJyYXkob3B0aW9ucy5wcm9wcykgJiYgIW9wdGlvbnMucHJvcHMuaW5jbHVkZXMoa2V5KSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBjYXJyeTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciB2YWwgPSB0YXJnZXRba2V5XTsNCiAgICAgICAgICAgIHZhciBuZXdWYWwgPSBjb3B5KHZhbCwgb3B0aW9ucyk7DQogICAgICAgICAgICBhc3NpZ25Qcm9wKGNhcnJ5LCBrZXksIG5ld1ZhbCwgdGFyZ2V0LCBvcHRpb25zLm5vbmVudW1lcmFibGUpOw0KICAgICAgICAgICAgcmV0dXJuIGNhcnJ5Ow0KICAgICAgICB9LCB7fSk7DQogICAgfQoKICAgIC8qIGpzaGludCBwcm90bzogdHJ1ZSAqLw0KICAgIGZ1bmN0aW9uIGdldExvY2F0aW9uKGluZGV4LCBpbnB1dFN0cmVhbSkgew0KICAgICAgICB2YXIgbiA9IGluZGV4ICsgMTsNCiAgICAgICAgdmFyIGxpbmUgPSBudWxsOw0KICAgICAgICB2YXIgY29sdW1uID0gLTE7DQogICAgICAgIHdoaWxlICgtLW4gPj0gMCAmJiBpbnB1dFN0cmVhbS5jaGFyQXQobikgIT09ICdcbicpIHsNCiAgICAgICAgICAgIGNvbHVtbisrOw0KICAgICAgICB9DQogICAgICAgIGlmICh0eXBlb2YgaW5kZXggPT09ICdudW1iZXInKSB7DQogICAgICAgICAgICBsaW5lID0gKGlucHV0U3RyZWFtLnNsaWNlKDAsIGluZGV4KS5tYXRjaCgvXG4vZykgfHwgJycpLmxlbmd0aDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbGluZTogbGluZSwNCiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uDQogICAgICAgIH07DQogICAgfQ0KICAgIGZ1bmN0aW9uIGNvcHlBcnJheShhcnIpIHsNCiAgICAgICAgdmFyIGk7DQogICAgICAgIHZhciBsZW5ndGggPSBhcnIubGVuZ3RoOw0KICAgICAgICB2YXIgY29weSA9IG5ldyBBcnJheShsZW5ndGgpOw0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGNvcHlbaV0gPSBhcnJbaV07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGNvcHk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGNsb25lKG9iaikgew0KICAgICAgICB2YXIgY2xvbmVkID0ge307DQogICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7DQogICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7DQogICAgICAgICAgICAgICAgY2xvbmVkW3Byb3BdID0gb2JqW3Byb3BdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBjbG9uZWQ7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGRlZmF1bHRzKG9iajEsIG9iajIpIHsNCiAgICAgICAgdmFyIG5ld09iaiA9IG9iajIgfHwge307DQogICAgICAgIGlmICghb2JqMi5fZGVmYXVsdHMpIHsNCiAgICAgICAgICAgIG5ld09iaiA9IHt9Ow0KICAgICAgICAgICAgdmFyIGRlZmF1bHRzXzEgPSBjb3B5KG9iajEpOw0KICAgICAgICAgICAgbmV3T2JqLl9kZWZhdWx0cyA9IGRlZmF1bHRzXzE7DQogICAgICAgICAgICB2YXIgY2xvbmVkID0gb2JqMiA/IGNvcHkob2JqMikgOiB7fTsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obmV3T2JqLCBkZWZhdWx0c18xLCBjbG9uZWQpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBuZXdPYmo7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGNvcHlPcHRpb25zKG9iajEsIG9iajIpIHsNCiAgICAgICAgaWYgKG9iajIgJiYgb2JqMi5fZGVmYXVsdHMpIHsNCiAgICAgICAgICAgIHJldHVybiBvYmoyOw0KICAgICAgICB9DQogICAgICAgIHZhciBvcHRzID0gZGVmYXVsdHMob2JqMSwgb2JqMik7DQogICAgICAgIGlmIChvcHRzLnN0cmljdE1hdGgpIHsNCiAgICAgICAgICAgIG9wdHMubWF0aCA9IE1hdGgkMS5QQVJFTlM7DQogICAgICAgIH0NCiAgICAgICAgLy8gQmFjayBjb21wYXQgd2l0aCBjaGFuZ2VkIHJlbGF0aXZlVXJscyBvcHRpb24NCiAgICAgICAgaWYgKG9wdHMucmVsYXRpdmVVcmxzKSB7DQogICAgICAgICAgICBvcHRzLnJld3JpdGVVcmxzID0gUmV3cml0ZVVybHMuQUxMOw0KICAgICAgICB9DQogICAgICAgIGlmICh0eXBlb2Ygb3B0cy5tYXRoID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgc3dpdGNoIChvcHRzLm1hdGgudG9Mb3dlckNhc2UoKSkgew0KICAgICAgICAgICAgICAgIGNhc2UgJ2Fsd2F5cyc6DQogICAgICAgICAgICAgICAgICAgIG9wdHMubWF0aCA9IE1hdGgkMS5BTFdBWVM7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ3BhcmVucy1kaXZpc2lvbic6DQogICAgICAgICAgICAgICAgICAgIG9wdHMubWF0aCA9IE1hdGgkMS5QQVJFTlNfRElWSVNJT047DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmljdCc6DQogICAgICAgICAgICAgICAgY2FzZSAncGFyZW5zJzoNCiAgICAgICAgICAgICAgICAgICAgb3B0cy5tYXRoID0gTWF0aCQxLlBBUkVOUzsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgb3B0cy5tYXRoID0gTWF0aCQxLlBBUkVOUzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAodHlwZW9mIG9wdHMucmV3cml0ZVVybHMgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICBzd2l0Y2ggKG9wdHMucmV3cml0ZVVybHMudG9Mb3dlckNhc2UoKSkgew0KICAgICAgICAgICAgICAgIGNhc2UgJ29mZic6DQogICAgICAgICAgICAgICAgICAgIG9wdHMucmV3cml0ZVVybHMgPSBSZXdyaXRlVXJscy5PRkY7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ2xvY2FsJzoNCiAgICAgICAgICAgICAgICAgICAgb3B0cy5yZXdyaXRlVXJscyA9IFJld3JpdGVVcmxzLkxPQ0FMOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdhbGwnOg0KICAgICAgICAgICAgICAgICAgICBvcHRzLnJld3JpdGVVcmxzID0gUmV3cml0ZVVybHMuQUxMOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gb3B0czsNCiAgICB9DQogICAgZnVuY3Rpb24gbWVyZ2Uob2JqMSwgb2JqMikgew0KICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iajIpIHsNCiAgICAgICAgICAgIGlmIChvYmoyLmhhc093blByb3BlcnR5KHByb3ApKSB7DQogICAgICAgICAgICAgICAgb2JqMVtwcm9wXSA9IG9iajJbcHJvcF07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG9iajE7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGZsYXR0ZW5BcnJheShhcnIsIHJlc3VsdCkgew0KICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsgcmVzdWx0ID0gW107IH0NCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpKyspIHsNCiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFycltpXTsNCiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgew0KICAgICAgICAgICAgICAgIGZsYXR0ZW5BcnJheSh2YWx1ZSwgcmVzdWx0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9CgogICAgdmFyIHV0aWxzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoewogICAgICAgIF9fcHJvdG9fXzogbnVsbCwKICAgICAgICBnZXRMb2NhdGlvbjogZ2V0TG9jYXRpb24sCiAgICAgICAgY29weUFycmF5OiBjb3B5QXJyYXksCiAgICAgICAgY2xvbmU6IGNsb25lLAogICAgICAgIGRlZmF1bHRzOiBkZWZhdWx0cywKICAgICAgICBjb3B5T3B0aW9uczogY29weU9wdGlvbnMsCiAgICAgICAgbWVyZ2U6IG1lcmdlLAogICAgICAgIGZsYXR0ZW5BcnJheTogZmxhdHRlbkFycmF5CiAgICB9KTsKCiAgICB2YXIgYW5vbnltb3VzRnVuYyA9IC8oPGFub255bW91cz58RnVuY3Rpb24pOihcZCspOihcZCspLzsNCiAgICAvKioNCiAgICAgKiBUaGlzIGlzIGEgY2VudHJhbGl6ZWQgY2xhc3Mgb2YgYW55IGVycm9yIHRoYXQgY291bGQgYmUgdGhyb3duIGludGVybmFsbHkgKG1vc3RseSBieSB0aGUgcGFyc2VyKS4NCiAgICAgKiBCZXNpZGVzIHN0YW5kYXJkIC5tZXNzYWdlIGl0IGtlZXBzIHNvbWUgYWRkaXRpb25hbCBkYXRhIGxpa2UgYSBwYXRoIHRvIHRoZSBmaWxlIHdoZXJlIHRoZSBlcnJvcg0KICAgICAqIG9jY3VycmVkIGFsb25nIHdpdGggbGluZSBhbmQgY29sdW1uIG51bWJlcnMuDQogICAgICoNCiAgICAgKiBAY2xhc3MNCiAgICAgKiBAZXh0ZW5kcyBFcnJvcg0KICAgICAqIEB0eXBlIHttb2R1bGUuTGVzc0Vycm9yfQ0KICAgICAqDQogICAgICogQHByb3Age3N0cmluZ30gdHlwZQ0KICAgICAqIEBwcm9wIHtzdHJpbmd9IGZpbGVuYW1lDQogICAgICogQHByb3Age251bWJlcn0gaW5kZXgNCiAgICAgKiBAcHJvcCB7bnVtYmVyfSBsaW5lDQogICAgICogQHByb3Age251bWJlcn0gY29sdW1uDQogICAgICogQHByb3Age251bWJlcn0gY2FsbExpbmUNCiAgICAgKiBAcHJvcCB7bnVtYmVyfSBjYWxsRXh0cmFjdA0KICAgICAqIEBwcm9wIHtzdHJpbmdbXX0gZXh0cmFjdA0KICAgICAqDQogICAgICogQHBhcmFtIHtPYmplY3R9IGUgICAgICAgICAgICAgIC0gQW4gZXJyb3Igb2JqZWN0IHRvIHdyYXAgYXJvdW5kIG9yIGp1c3QgYSBkZXNjcmlwdGl2ZSBvYmplY3QNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmlsZUNvbnRlbnRNYXAgLSBBbiBvYmplY3Qgd2l0aCBmaWxlIGNvbnRlbnRzIGluICdjb250ZW50cycgcHJvcGVydHkgKGxpa2UgaW1wb3J0TWFuYWdlcikgQHRvZG8gLSBtb3ZlIHRvIGZpbGVNYW5hZ2VyPw0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY3VycmVudEZpbGVuYW1lXQ0KICAgICAqLw0KICAgIHZhciBMZXNzRXJyb3IgPSBmdW5jdGlvbiAoZSwgZmlsZUNvbnRlbnRNYXAsIGN1cnJlbnRGaWxlbmFtZSkgew0KICAgICAgICBFcnJvci5jYWxsKHRoaXMpOw0KICAgICAgICB2YXIgZmlsZW5hbWUgPSBlLmZpbGVuYW1lIHx8IGN1cnJlbnRGaWxlbmFtZTsNCiAgICAgICAgdGhpcy5tZXNzYWdlID0gZS5tZXNzYWdlOw0KICAgICAgICB0aGlzLnN0YWNrID0gZS5zdGFjazsNCiAgICAgICAgaWYgKGZpbGVDb250ZW50TWFwICYmIGZpbGVuYW1lKSB7DQogICAgICAgICAgICB2YXIgaW5wdXQgPSBmaWxlQ29udGVudE1hcC5jb250ZW50c1tmaWxlbmFtZV07DQogICAgICAgICAgICB2YXIgbG9jID0gZ2V0TG9jYXRpb24oZS5pbmRleCwgaW5wdXQpOw0KICAgICAgICAgICAgdmFyIGxpbmUgPSBsb2MubGluZTsNCiAgICAgICAgICAgIHZhciBjb2wgPSBsb2MuY29sdW1uOw0KICAgICAgICAgICAgdmFyIGNhbGxMaW5lID0gZS5jYWxsICYmIGdldExvY2F0aW9uKGUuY2FsbCwgaW5wdXQpLmxpbmU7DQogICAgICAgICAgICB2YXIgbGluZXMgPSBpbnB1dCA/IGlucHV0LnNwbGl0KCdcbicpIDogJyc7DQogICAgICAgICAgICB0aGlzLnR5cGUgPSBlLnR5cGUgfHwgJ1N5bnRheCc7DQogICAgICAgICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7DQogICAgICAgICAgICB0aGlzLmluZGV4ID0gZS5pbmRleDsNCiAgICAgICAgICAgIHRoaXMubGluZSA9IHR5cGVvZiBsaW5lID09PSAnbnVtYmVyJyA/IGxpbmUgKyAxIDogbnVsbDsNCiAgICAgICAgICAgIHRoaXMuY29sdW1uID0gY29sOw0KICAgICAgICAgICAgaWYgKCF0aGlzLmxpbmUgJiYgdGhpcy5zdGFjaykgew0KICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IHRoaXMuc3RhY2subWF0Y2goYW5vbnltb3VzRnVuYyk7DQogICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICogV2UgaGF2ZSB0byBmaWd1cmUgb3V0IGhvdyB0aGlzIGVudmlyb25tZW50IHN0cmluZ2lmaWVzIGFub255bW91cyBmdW5jdGlvbnMNCiAgICAgICAgICAgICAgICAgKiBzbyB3ZSBjYW4gY29ycmVjdGx5IG1hcCBwbHVnaW4gZXJyb3JzLg0KICAgICAgICAgICAgICAgICAqDQogICAgICAgICAgICAgICAgICogTm90ZSwgaW4gTm9kZSA4LCB0aGUgb3V0cHV0IG9mIGFub255bW91cyBmdW5jcyB2YXJpZWQgYmFzZWQgb24gcGFyYW1ldGVycw0KICAgICAgICAgICAgICAgICAqIGJlaW5nIHByZXNlbnQgb3Igbm90LCBzbyB3ZSBpbmplY3QgZHVtbXkgcGFyYW1zLg0KICAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgICAgIHZhciBmdW5jID0gbmV3IEZ1bmN0aW9uKCdhJywgJ3Rocm93IG5ldyBFcnJvcigpJyk7DQogICAgICAgICAgICAgICAgdmFyIGxpbmVBZGp1c3QgPSAwOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGZ1bmMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gZS5zdGFjay5tYXRjaChhbm9ueW1vdXNGdW5jKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBwYXJzZUludChtYXRjaFsyXSk7DQogICAgICAgICAgICAgICAgICAgIGxpbmVBZGp1c3QgPSAxIC0gbGluZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZFsyXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lID0gcGFyc2VJbnQoZm91bmRbMl0pICsgbGluZUFkanVzdDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmRbM10pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uID0gcGFyc2VJbnQoZm91bmRbM10pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5jYWxsTGluZSA9IGNhbGxMaW5lICsgMTsNCiAgICAgICAgICAgIHRoaXMuY2FsbEV4dHJhY3QgPSBsaW5lc1tjYWxsTGluZV07DQogICAgICAgICAgICB0aGlzLmV4dHJhY3QgPSBbDQogICAgICAgICAgICAgICAgbGluZXNbdGhpcy5saW5lIC0gMl0sDQogICAgICAgICAgICAgICAgbGluZXNbdGhpcy5saW5lIC0gMV0sDQogICAgICAgICAgICAgICAgbGluZXNbdGhpcy5saW5lXQ0KICAgICAgICAgICAgXTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAndW5kZWZpbmVkJykgew0KICAgICAgICB2YXIgRiA9IGZ1bmN0aW9uICgpIHsgfTsNCiAgICAgICAgRi5wcm90b3R5cGUgPSBFcnJvci5wcm90b3R5cGU7DQogICAgICAgIExlc3NFcnJvci5wcm90b3R5cGUgPSBuZXcgRigpOw0KICAgIH0NCiAgICBlbHNlIHsNCiAgICAgICAgTGVzc0Vycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTsNCiAgICB9DQogICAgTGVzc0Vycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExlc3NFcnJvcjsNCiAgICAvKioNCiAgICAgKiBBbiBvdmVycmlkZGVuIHZlcnNpb24gb2YgdGhlIGRlZmF1bHQgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZw0KICAgICAqIHdoaWNoIHVzZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byBjcmVhdGUgYSBoZWxwZnVsIG1lc3NhZ2UuDQogICAgICoNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAgICovDQogICAgTGVzc0Vycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7DQogICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9Ow0KICAgICAgICB2YXIgbWVzc2FnZSA9ICcnOw0KICAgICAgICB2YXIgZXh0cmFjdCA9IHRoaXMuZXh0cmFjdCB8fCBbXTsNCiAgICAgICAgdmFyIGVycm9yID0gW107DQogICAgICAgIHZhciBzdHlsaXplID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyOyB9Ow0KICAgICAgICBpZiAob3B0aW9ucy5zdHlsaXplKSB7DQogICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBvcHRpb25zLnN0eWxpemU7DQogICAgICAgICAgICBpZiAodHlwZSAhPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJvcHRpb25zLnN0eWxpemUgc2hvdWxkIGJlIGEgZnVuY3Rpb24sIGdvdCBhICIgKyB0eXBlICsgIiEiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN0eWxpemUgPSBvcHRpb25zLnN0eWxpemU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMubGluZSAhPT0gbnVsbCkgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBleHRyYWN0WzBdID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIGVycm9yLnB1c2goc3R5bGl6ZSh0aGlzLmxpbmUgLSAxICsgIiAiICsgZXh0cmFjdFswXSwgJ2dyZXknKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodHlwZW9mIGV4dHJhY3RbMV0gPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgdmFyIGVycm9yVHh0ID0gdGhpcy5saW5lICsgIiAiOw0KICAgICAgICAgICAgICAgIGlmIChleHRyYWN0WzFdKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9yVHh0ICs9IGV4dHJhY3RbMV0uc2xpY2UoMCwgdGhpcy5jb2x1bW4pICsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxpemUoc3R5bGl6ZShzdHlsaXplKGV4dHJhY3RbMV0uc3Vic3RyKHRoaXMuY29sdW1uLCAxKSwgJ2JvbGQnKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdFsxXS5zbGljZSh0aGlzLmNvbHVtbiArIDEpLCAncmVkJyksICdpbnZlcnNlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVycm9yLnB1c2goZXJyb3JUeHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHR5cGVvZiBleHRyYWN0WzJdID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIGVycm9yLnB1c2goc3R5bGl6ZSh0aGlzLmxpbmUgKyAxICsgIiAiICsgZXh0cmFjdFsyXSwgJ2dyZXknKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlcnJvciA9IGVycm9yLmpvaW4oJ1xuJykgKyBzdHlsaXplKCcnLCAncmVzZXQnKSArICJcbiI7DQogICAgICAgIH0NCiAgICAgICAgbWVzc2FnZSArPSBzdHlsaXplKHRoaXMudHlwZSArICJFcnJvcjogIiArIHRoaXMubWVzc2FnZSwgJ3JlZCcpOw0KICAgICAgICBpZiAodGhpcy5maWxlbmFtZSkgew0KICAgICAgICAgICAgbWVzc2FnZSArPSBzdHlsaXplKCcgaW4gJywgJ3JlZCcpICsgdGhpcy5maWxlbmFtZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5saW5lKSB7DQogICAgICAgICAgICBtZXNzYWdlICs9IHN0eWxpemUoIiBvbiBsaW5lICIgKyB0aGlzLmxpbmUgKyAiLCBjb2x1bW4gIiArICh0aGlzLmNvbHVtbiArIDEpICsgIjoiLCAnZ3JleScpOw0KICAgICAgICB9DQogICAgICAgIG1lc3NhZ2UgKz0gIlxuIiArIGVycm9yOw0KICAgICAgICBpZiAodGhpcy5jYWxsTGluZSkgew0KICAgICAgICAgICAgbWVzc2FnZSArPSBzdHlsaXplKCdmcm9tICcsICdyZWQnKSArICh0aGlzLmZpbGVuYW1lIHx8ICcnKSArICIvbiI7DQogICAgICAgICAgICBtZXNzYWdlICs9IHN0eWxpemUodGhpcy5jYWxsTGluZSwgJ2dyZXknKSArICIgIiArIHRoaXMuY2FsbEV4dHJhY3QgKyAiL24iOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBtZXNzYWdlOw0KICAgIH07CgogICAgdmFyIFNlbGVjdG9yID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBleHRlbmRMaXN0LCBjb25kaXRpb24sIGluZGV4LCBjdXJyZW50RmlsZUluZm8sIHZpc2liaWxpdHlJbmZvKSB7DQogICAgICAgIHRoaXMuZXh0ZW5kTGlzdCA9IGV4dGVuZExpc3Q7DQogICAgICAgIHRoaXMuY29uZGl0aW9uID0gY29uZGl0aW9uOw0KICAgICAgICB0aGlzLmV2YWxkQ29uZGl0aW9uID0gIWNvbmRpdGlvbjsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuZWxlbWVudHMgPSB0aGlzLmdldEVsZW1lbnRzKGVsZW1lbnRzKTsNCiAgICAgICAgdGhpcy5taXhpbkVsZW1lbnRzXyA9IHVuZGVmaW5lZDsNCiAgICAgICAgdGhpcy5jb3B5VmlzaWJpbGl0eUluZm8odmlzaWJpbGl0eUluZm8pOw0KICAgICAgICB0aGlzLnNldFBhcmVudCh0aGlzLmVsZW1lbnRzLCB0aGlzKTsNCiAgICB9Ow0KICAgIFNlbGVjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnU2VsZWN0b3InLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50cykgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSB2aXNpdG9yLnZpc2l0QXJyYXkodGhpcy5lbGVtZW50cyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5leHRlbmRMaXN0KSB7DQogICAgICAgICAgICAgICAgdGhpcy5leHRlbmRMaXN0ID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMuZXh0ZW5kTGlzdCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5jb25kaXRpb24pIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IHZpc2l0b3IudmlzaXQodGhpcy5jb25kaXRpb24pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjcmVhdGVEZXJpdmVkOiBmdW5jdGlvbiAoZWxlbWVudHMsIGV4dGVuZExpc3QsIGV2YWxkQ29uZGl0aW9uKSB7DQogICAgICAgICAgICBlbGVtZW50cyA9IHRoaXMuZ2V0RWxlbWVudHMoZWxlbWVudHMpOw0KICAgICAgICAgICAgdmFyIG5ld1NlbGVjdG9yID0gbmV3IFNlbGVjdG9yKGVsZW1lbnRzLCBleHRlbmRMaXN0IHx8IHRoaXMuZXh0ZW5kTGlzdCwgbnVsbCwgdGhpcy5nZXRJbmRleCgpLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgICAgICBuZXdTZWxlY3Rvci5ldmFsZENvbmRpdGlvbiA9IChldmFsZENvbmRpdGlvbiAhPSBudWxsKSA/IGV2YWxkQ29uZGl0aW9uIDogdGhpcy5ldmFsZENvbmRpdGlvbjsNCiAgICAgICAgICAgIG5ld1NlbGVjdG9yLm1lZGlhRW1wdHkgPSB0aGlzLm1lZGlhRW1wdHk7DQogICAgICAgICAgICByZXR1cm4gbmV3U2VsZWN0b3I7DQogICAgICAgIH0sDQogICAgICAgIGdldEVsZW1lbnRzOiBmdW5jdGlvbiAoZWxzKSB7DQogICAgICAgICAgICBpZiAoIWVscykgew0KICAgICAgICAgICAgICAgIHJldHVybiBbbmV3IEVsZW1lbnQoJycsICcmJywgZmFsc2UsIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbyldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHR5cGVvZiBlbHMgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJzZS5wYXJzZU5vZGUoZWxzLCBbJ3NlbGVjdG9yJ10sIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbywgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBlcnIuaW5kZXgsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucGFyc2UuaW1wb3J0cywgdGhpcy5fZmlsZUluZm8uZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVscyA9IHJlc3VsdFswXS5lbGVtZW50czsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBlbHM7DQogICAgICAgIH0sDQogICAgICAgIGNyZWF0ZUVtcHR5U2VsZWN0b3JzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgZWwgPSBuZXcgRWxlbWVudCgnJywgJyYnLCBmYWxzZSwgdGhpcy5faW5kZXgsIHRoaXMuX2ZpbGVJbmZvKSwgc2VscyA9IFtuZXcgU2VsZWN0b3IoW2VsXSwgbnVsbCwgbnVsbCwgdGhpcy5faW5kZXgsIHRoaXMuX2ZpbGVJbmZvKV07DQogICAgICAgICAgICBzZWxzWzBdLm1lZGlhRW1wdHkgPSB0cnVlOw0KICAgICAgICAgICAgcmV0dXJuIHNlbHM7DQogICAgICAgIH0sDQogICAgICAgIG1hdGNoOiBmdW5jdGlvbiAob3RoZXIpIHsNCiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHM7DQogICAgICAgICAgICB2YXIgbGVuID0gZWxlbWVudHMubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIG9sZW47DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIG90aGVyID0gb3RoZXIubWl4aW5FbGVtZW50cygpOw0KICAgICAgICAgICAgb2xlbiA9IG90aGVyLmxlbmd0aDsNCiAgICAgICAgICAgIGlmIChvbGVuID09PSAwIHx8IGxlbiA8IG9sZW4pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvbGVuOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2ldLnZhbHVlICE9PSBvdGhlcltpXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gb2xlbjsgLy8gcmV0dXJuIG51bWJlciBvZiBtYXRjaGVkIGVsZW1lbnRzDQogICAgICAgIH0sDQogICAgICAgIG1peGluRWxlbWVudHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLm1peGluRWxlbWVudHNfKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWl4aW5FbGVtZW50c187DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLm1hcChmdW5jdGlvbiAodikgew0KICAgICAgICAgICAgICAgIHJldHVybiB2LmNvbWJpbmF0b3IudmFsdWUgKyAodi52YWx1ZS52YWx1ZSB8fCB2LnZhbHVlKTsNCiAgICAgICAgICAgIH0pLmpvaW4oJycpLm1hdGNoKC9bLCYjXCpcLlx3LV0oW1x3LV18KFxcLikpKi9nKTsNCiAgICAgICAgICAgIGlmIChlbGVtZW50cykgew0KICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c1swXSA9PT0gJyYnKSB7DQogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnNoaWZ0KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgZWxlbWVudHMgPSBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAodGhpcy5taXhpbkVsZW1lbnRzXyA9IGVsZW1lbnRzKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNKdXN0UGFyZW50U2VsZWN0b3I6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiAhdGhpcy5tZWRpYUVtcHR5ICYmDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5sZW5ndGggPT09IDEgJiYNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzWzBdLnZhbHVlID09PSAnJicgJiYNCiAgICAgICAgICAgICAgICAodGhpcy5lbGVtZW50c1swXS5jb21iaW5hdG9yLnZhbHVlID09PSAnICcgfHwgdGhpcy5lbGVtZW50c1swXS5jb21iaW5hdG9yLnZhbHVlID09PSAnJyk7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgZXZhbGRDb25kaXRpb24gPSB0aGlzLmNvbmRpdGlvbiAmJiB0aGlzLmNvbmRpdGlvbi5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50czsNCiAgICAgICAgICAgIHZhciBleHRlbmRMaXN0ID0gdGhpcy5leHRlbmRMaXN0Ow0KICAgICAgICAgICAgZWxlbWVudHMgPSBlbGVtZW50cyAmJiBlbGVtZW50cy5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuZXZhbChjb250ZXh0KTsgfSk7DQogICAgICAgICAgICBleHRlbmRMaXN0ID0gZXh0ZW5kTGlzdCAmJiBleHRlbmRMaXN0Lm1hcChmdW5jdGlvbiAoZXh0ZW5kKSB7IHJldHVybiBleHRlbmQuZXZhbChjb250ZXh0KTsgfSk7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEZXJpdmVkKGVsZW1lbnRzLCBleHRlbmRMaXN0LCBldmFsZENvbmRpdGlvbik7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgdmFyIGksIGVsZW1lbnQ7DQogICAgICAgICAgICBpZiAoKCFjb250ZXh0IHx8ICFjb250ZXh0LmZpcnN0U2VsZWN0b3IpICYmIHRoaXMuZWxlbWVudHNbMF0uY29tYmluYXRvci52YWx1ZSA9PT0gJycpIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcgJywgdGhpcy5maWxlSW5mbygpLCB0aGlzLmdldEluZGV4KCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50c1tpXTsNCiAgICAgICAgICAgICAgICBlbGVtZW50LmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZXRJc091dHB1dDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZhbGRDb25kaXRpb247DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSByZXF1aXJlcyBhbiBhcnJheSBhcmd1bWVudCcpOw0KICAgICAgICB9DQogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbdmFsdWVdOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOw0KICAgICAgICB9DQogICAgfTsNCiAgICBWYWx1ZS5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ1ZhbHVlJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMudmFsdWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMF0uZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmFsdWUodGhpcy52YWx1ZS5tYXAoZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICB9KSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbaV0uZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgaWYgKGkgKyAxIDwgdGhpcy52YWx1ZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgoY29udGV4dCAmJiBjb250ZXh0LmNvbXByZXNzKSA/ICcsJyA6ICcsICcpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBLZXl3b3JkID0gZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICB9Ow0KICAgIEtleXdvcmQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdLZXl3b3JkJywNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJyUnKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgeyB0eXBlOiAnU3ludGF4JywgbWVzc2FnZTogJ0ludmFsaWQgJSB3aXRob3V0IG51bWJlcicgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG91dHB1dC5hZGQodGhpcy52YWx1ZSk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICBLZXl3b3JkLlRydWUgPSBuZXcgS2V5d29yZCgndHJ1ZScpOw0KICAgIEtleXdvcmQuRmFsc2UgPSBuZXcgS2V5d29yZCgnZmFsc2UnKTsKCiAgICB2YXIgQW5vbnltb3VzID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCBtYXBMaW5lcywgcnVsZXNldExpa2UsIHZpc2liaWxpdHlJbmZvKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMubWFwTGluZXMgPSBtYXBMaW5lczsNCiAgICAgICAgdGhpcy5ydWxlc2V0TGlrZSA9ICh0eXBlb2YgcnVsZXNldExpa2UgPT09ICd1bmRlZmluZWQnKSA/IGZhbHNlIDogcnVsZXNldExpa2U7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5jb3B5VmlzaWJpbGl0eUluZm8odmlzaWJpbGl0eUluZm8pOw0KICAgIH07DQogICAgQW5vbnltb3VzLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnQW5vbnltb3VzJywNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXModGhpcy52YWx1ZSwgdGhpcy5faW5kZXgsIHRoaXMuX2ZpbGVJbmZvLCB0aGlzLm1hcExpbmVzLCB0aGlzLnJ1bGVzZXRMaWtlLCB0aGlzLnZpc2liaWxpdHlJbmZvKCkpOw0KICAgICAgICB9LA0KICAgICAgICBjb21wYXJlOiBmdW5jdGlvbiAob3RoZXIpIHsNCiAgICAgICAgICAgIHJldHVybiBvdGhlci50b0NTUyAmJiB0aGlzLnRvQ1NTKCkgPT09IG90aGVyLnRvQ1NTKCkgPyAwIDogdW5kZWZpbmVkOw0KICAgICAgICB9LA0KICAgICAgICBpc1J1bGVzZXRMaWtlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5ydWxlc2V0TGlrZTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICB0aGlzLm5vZGVWaXNpYmxlID0gQm9vbGVhbih0aGlzLnZhbHVlKTsNCiAgICAgICAgICAgIGlmICh0aGlzLm5vZGVWaXNpYmxlKSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnZhbHVlLCB0aGlzLl9maWxlSW5mbywgdGhpcy5faW5kZXgsIHRoaXMubWFwTGluZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIE1BVEgkMSA9IE1hdGgkMTsNCiAgICBmdW5jdGlvbiBldmFsTmFtZShjb250ZXh0LCBuYW1lKSB7DQogICAgICAgIHZhciB2YWx1ZSA9ICcnOw0KICAgICAgICB2YXIgaTsNCiAgICAgICAgdmFyIG4gPSBuYW1lLmxlbmd0aDsNCiAgICAgICAgdmFyIG91dHB1dCA9IHsgYWRkOiBmdW5jdGlvbiAocykgeyB2YWx1ZSArPSBzOyB9IH07DQogICAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyBpKyspIHsNCiAgICAgICAgICAgIG5hbWVbaV0uZXZhbChjb250ZXh0KS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgfQ0KICAgIHZhciBEZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgaW1wb3J0YW50LCBtZXJnZSwgaW5kZXgsIGN1cnJlbnRGaWxlSW5mbywgaW5saW5lLCB2YXJpYWJsZSkgew0KICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOw0KICAgICAgICB0aGlzLnZhbHVlID0gKHZhbHVlIGluc3RhbmNlb2YgTm9kZSkgPyB2YWx1ZSA6IG5ldyBWYWx1ZShbdmFsdWUgPyBuZXcgQW5vbnltb3VzKHZhbHVlKSA6IG51bGxdKTsNCiAgICAgICAgdGhpcy5pbXBvcnRhbnQgPSBpbXBvcnRhbnQgPyAiICIgKyBpbXBvcnRhbnQudHJpbSgpIDogJyc7DQogICAgICAgIHRoaXMubWVyZ2UgPSBtZXJnZTsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuaW5saW5lID0gaW5saW5lIHx8IGZhbHNlOw0KICAgICAgICB0aGlzLnZhcmlhYmxlID0gKHZhcmlhYmxlICE9PSB1bmRlZmluZWQpID8gdmFyaWFibGUNCiAgICAgICAgICAgIDogKG5hbWUuY2hhckF0ICYmIChuYW1lLmNoYXJBdCgwKSA9PT0gJ0AnKSk7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy52YWx1ZSwgdGhpcyk7DQogICAgfTsNCiAgICBEZWNsYXJhdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ0RlY2xhcmF0aW9uJywNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMubmFtZSArIChjb250ZXh0LmNvbXByZXNzID8gJzonIDogJzogJyksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy5nZXRJbmRleCgpKTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgZS5pbmRleCA9IHRoaXMuX2luZGV4Ow0KICAgICAgICAgICAgICAgIGUuZmlsZW5hbWUgPSB0aGlzLl9maWxlSW5mby5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICB0aHJvdyBlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLmltcG9ydGFudCArICgodGhpcy5pbmxpbmUgfHwgKGNvbnRleHQubGFzdFJ1bGUgJiYgY29udGV4dC5jb21wcmVzcykpID8gJycgOiAnOycpLCB0aGlzLl9maWxlSW5mbywgdGhpcy5faW5kZXgpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIG1hdGhCeXBhc3MgPSBmYWxzZSwgcHJldk1hdGgsIG5hbWUgPSB0aGlzLm5hbWUsIGV2YWxkVmFsdWUsIHZhcmlhYmxlID0gdGhpcy52YXJpYWJsZTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICAvLyBleHBhbmQgJ3ByaW1pdGl2ZScgbmFtZSBkaXJlY3RseSB0byBnZXQNCiAgICAgICAgICAgICAgICAvLyB0aGluZ3MgZmFzdGVyICh+MTAlIGZvciBiZW5jaG1hcmsubGVzcyk6DQogICAgICAgICAgICAgICAgbmFtZSA9IChuYW1lLmxlbmd0aCA9PT0gMSkgJiYgKG5hbWVbMF0gaW5zdGFuY2VvZiBLZXl3b3JkKSA/DQogICAgICAgICAgICAgICAgICAgIG5hbWVbMF0udmFsdWUgOiBldmFsTmFtZShjb250ZXh0LCBuYW1lKTsNCiAgICAgICAgICAgICAgICB2YXJpYWJsZSA9IGZhbHNlOyAvLyBuZXZlciB0cmVhdCBleHBhbmRlZCBpbnRlcnBvbGF0aW9uIGFzIG5ldyB2YXJpYWJsZSBuYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBAdG9kbyByZW1vdmUgd2hlbiBwYXJlbnMtZGl2aXNpb24gaXMgZGVmYXVsdA0KICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdmb250JyAmJiBjb250ZXh0Lm1hdGggPT09IE1BVEgkMS5BTFdBWVMpIHsNCiAgICAgICAgICAgICAgICBtYXRoQnlwYXNzID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBwcmV2TWF0aCA9IGNvbnRleHQubWF0aDsNCiAgICAgICAgICAgICAgICBjb250ZXh0Lm1hdGggPSBNQVRIJDEuUEFSRU5TX0RJVklTSU9OOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb250ZXh0LmltcG9ydGFudFNjb3BlLnB1c2goe30pOw0KICAgICAgICAgICAgICAgIGV2YWxkVmFsdWUgPSB0aGlzLnZhbHVlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnZhcmlhYmxlICYmIGV2YWxkVmFsdWUudHlwZSA9PT0gJ0RldGFjaGVkUnVsZXNldCcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgeyBtZXNzYWdlOiAnUnVsZXNldHMgY2Fubm90IGJlIGV2YWx1YXRlZCBvbiBhIHByb3BlcnR5LicsDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpLCBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBpbXBvcnRhbnQgPSB0aGlzLmltcG9ydGFudDsNCiAgICAgICAgICAgICAgICB2YXIgaW1wb3J0YW50UmVzdWx0ID0gY29udGV4dC5pbXBvcnRhbnRTY29wZS5wb3AoKTsNCiAgICAgICAgICAgICAgICBpZiAoIWltcG9ydGFudCAmJiBpbXBvcnRhbnRSZXN1bHQuaW1wb3J0YW50KSB7DQogICAgICAgICAgICAgICAgICAgIGltcG9ydGFudCA9IGltcG9ydGFudFJlc3VsdC5pbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGVjbGFyYXRpb24obmFtZSwgZXZhbGRWYWx1ZSwgaW1wb3J0YW50LCB0aGlzLm1lcmdlLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy5pbmxpbmUsIHZhcmlhYmxlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlLmluZGV4ICE9PSAnbnVtYmVyJykgew0KICAgICAgICAgICAgICAgICAgICBlLmluZGV4ID0gdGhpcy5nZXRJbmRleCgpOw0KICAgICAgICAgICAgICAgICAgICBlLmZpbGVuYW1lID0gdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aHJvdyBlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG1hdGhCeXBhc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tYXRoID0gcHJldk1hdGg7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBtYWtlSW1wb3J0YW50OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERlY2xhcmF0aW9uKHRoaXMubmFtZSwgdGhpcy52YWx1ZSwgJyFpbXBvcnRhbnQnLCB0aGlzLm1lcmdlLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy5pbmxpbmUpOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIGRlYnVnSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gZGVidWdJbmZvKGNvbnRleHQsIGN0eCwgbGluZVNlcGFyYXRvcikgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnOw0KICAgICAgICAgICAgaWYgKGNvbnRleHQuZHVtcExpbmVOdW1iZXJzICYmICFjb250ZXh0LmNvbXByZXNzKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChjb250ZXh0LmR1bXBMaW5lTnVtYmVycykgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdjb21tZW50cyc6DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkZWJ1Z0luZm8uYXNDb21tZW50KGN0eCk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWVkaWFxdWVyeSc6DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkZWJ1Z0luZm8uYXNNZWRpYVF1ZXJ5KGN0eCk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlYnVnSW5mby5hc0NvbW1lbnQoY3R4KSArIChsaW5lU2VwYXJhdG9yIHx8ICcnKSArIGRlYnVnSW5mby5hc01lZGlhUXVlcnkoY3R4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICAgICAgZGVidWdJbmZvLmFzQ29tbWVudCA9IGZ1bmN0aW9uIChjdHgpIHsNCiAgICAgICAgICAgIHJldHVybiAiLyogbGluZSAiICsgY3R4LmRlYnVnSW5mby5saW5lTnVtYmVyICsgIiwgIiArIGN0eC5kZWJ1Z0luZm8uZmlsZU5hbWUgKyAiICovXG4iOw0KICAgICAgICB9Ow0KICAgICAgICBkZWJ1Z0luZm8uYXNNZWRpYVF1ZXJ5ID0gZnVuY3Rpb24gKGN0eCkgew0KICAgICAgICAgICAgdmFyIGZpbGVuYW1lV2l0aFByb3RvY29sID0gY3R4LmRlYnVnSW5mby5maWxlTmFtZTsNCiAgICAgICAgICAgIGlmICghL15bYS16XSs6XC9cLy9pLnRlc3QoZmlsZW5hbWVXaXRoUHJvdG9jb2wpKSB7DQogICAgICAgICAgICAgICAgZmlsZW5hbWVXaXRoUHJvdG9jb2wgPSAiZmlsZTovLyIgKyBmaWxlbmFtZVdpdGhQcm90b2NvbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAiQG1lZGlhIC1zYXNzLWRlYnVnLWluZm97ZmlsZW5hbWV7Zm9udC1mYW1pbHk6IiArIGZpbGVuYW1lV2l0aFByb3RvY29sLnJlcGxhY2UoLyhbLjpcL1xcXSkvZywgZnVuY3Rpb24gKGEpIHsNCiAgICAgICAgICAgICAgICBpZiAoYSA9PSAnXFwnKSB7DQogICAgICAgICAgICAgICAgICAgIGEgPSAnXC8nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gIlxcIiArIGE7DQogICAgICAgICAgICB9KSArICJ9bGluZXtmb250LWZhbWlseTpcXDAwMDAzIiArIGN0eC5kZWJ1Z0luZm8ubGluZU51bWJlciArICJ9fVxuIjsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIGRlYnVnSW5mbzsNCiAgICB9KCkpOwoKICAgIHZhciBDb21tZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBpc0xpbmVDb21tZW50LCBpbmRleCwgY3VycmVudEZpbGVJbmZvKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICAgICAgdGhpcy5pc0xpbmVDb21tZW50ID0gaXNMaW5lQ29tbWVudDsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICB9Ow0KICAgIENvbW1lbnQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdDb21tZW50JywNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBpZiAodGhpcy5kZWJ1Z0luZm8pIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGRlYnVnSW5mbyhjb250ZXh0LCB0aGlzKSwgdGhpcy5maWxlSW5mbygpLCB0aGlzLmdldEluZGV4KCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNTaWxlbnQ6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgaXNDb21wcmVzc2VkID0gY29udGV4dC5jb21wcmVzcyAmJiB0aGlzLnZhbHVlWzJdICE9PSAnISc7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5pc0xpbmVDb21tZW50IHx8IGlzQ29tcHJlc3NlZDsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBjb250ZXh0cyA9IHt9Ow0KICAgIHZhciBjb3B5RnJvbU9yaWdpbmFsID0gZnVuY3Rpb24gY29weUZyb21PcmlnaW5hbChvcmlnaW5hbCwgZGVzdGluYXRpb24sIHByb3BlcnRpZXNUb0NvcHkpIHsNCiAgICAgICAgaWYgKCFvcmlnaW5hbCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllc1RvQ29weS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKG9yaWdpbmFsLmhhc093blByb3BlcnR5KHByb3BlcnRpZXNUb0NvcHlbaV0pKSB7DQogICAgICAgICAgICAgICAgZGVzdGluYXRpb25bcHJvcGVydGllc1RvQ29weVtpXV0gPSBvcmlnaW5hbFtwcm9wZXJ0aWVzVG9Db3B5W2ldXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQogICAgLyoNCiAgICAgcGFyc2UgaXMgdXNlZCB3aGlsc3QgcGFyc2luZw0KICAgICAqLw0KICAgIHZhciBwYXJzZUNvcHlQcm9wZXJ0aWVzID0gWw0KICAgICAgICAvLyBvcHRpb25zDQogICAgICAgICdwYXRocycsDQogICAgICAgICdyZXdyaXRlVXJscycsDQogICAgICAgICdyb290cGF0aCcsDQogICAgICAgICdzdHJpY3RJbXBvcnRzJywNCiAgICAgICAgJ2luc2VjdXJlJywNCiAgICAgICAgJ2R1bXBMaW5lTnVtYmVycycsDQogICAgICAgICdjb21wcmVzcycsDQogICAgICAgICdzeW5jSW1wb3J0JywNCiAgICAgICAgJ2NodW5rSW5wdXQnLA0KICAgICAgICAnbWltZScsDQogICAgICAgICd1c2VGaWxlQ2FjaGUnLA0KICAgICAgICAvLyBjb250ZXh0DQogICAgICAgICdwcm9jZXNzSW1wb3J0cycsDQogICAgICAgIC8vIFVzZWQgYnkgdGhlIGltcG9ydCBtYW5hZ2VyIHRvIHN0b3AgbXVsdGlwbGUgaW1wb3J0IHZpc2l0b3JzIGJlaW5nIGNyZWF0ZWQuDQogICAgICAgICdwbHVnaW5NYW5hZ2VyJyAvLyBVc2VkIGFzIHRoZSBwbHVnaW4gbWFuYWdlciBmb3IgdGhlIHNlc3Npb24NCiAgICBdOw0KICAgIGNvbnRleHRzLlBhcnNlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsNCiAgICAgICAgY29weUZyb21PcmlnaW5hbChvcHRpb25zLCB0aGlzLCBwYXJzZUNvcHlQcm9wZXJ0aWVzKTsNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhdGhzID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgdGhpcy5wYXRocyA9IFt0aGlzLnBhdGhzXTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgdmFyIGV2YWxDb3B5UHJvcGVydGllcyA9IFsNCiAgICAgICAgJ3BhdGhzJywNCiAgICAgICAgJ2NvbXByZXNzJywNCiAgICAgICAgJ21hdGgnLA0KICAgICAgICAnc3RyaWN0VW5pdHMnLA0KICAgICAgICAnc291cmNlTWFwJywNCiAgICAgICAgJ2ltcG9ydE11bHRpcGxlJywNCiAgICAgICAgJ3VybEFyZ3MnLA0KICAgICAgICAnamF2YXNjcmlwdEVuYWJsZWQnLA0KICAgICAgICAncGx1Z2luTWFuYWdlcicsDQogICAgICAgICdpbXBvcnRhbnRTY29wZScsDQogICAgICAgICdyZXdyaXRlVXJscycgLy8gb3B0aW9uIC0gd2hldGhlciB0byBhZGp1c3QgVVJMJ3MgdG8gYmUgcmVsYXRpdmUNCiAgICBdOw0KICAgIGNvbnRleHRzLkV2YWwgPSBmdW5jdGlvbiAob3B0aW9ucywgZnJhbWVzKSB7DQogICAgICAgIGNvcHlGcm9tT3JpZ2luYWwob3B0aW9ucywgdGhpcywgZXZhbENvcHlQcm9wZXJ0aWVzKTsNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhdGhzID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgdGhpcy5wYXRocyA9IFt0aGlzLnBhdGhzXTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmZyYW1lcyA9IGZyYW1lcyB8fCBbXTsNCiAgICAgICAgdGhpcy5pbXBvcnRhbnRTY29wZSA9IHRoaXMuaW1wb3J0YW50U2NvcGUgfHwgW107DQogICAgfTsNCiAgICBjb250ZXh0cy5FdmFsLnByb3RvdHlwZS5lbnRlckNhbGMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmICghdGhpcy5jYWxjU3RhY2spIHsNCiAgICAgICAgICAgIHRoaXMuY2FsY1N0YWNrID0gW107DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5jYWxjU3RhY2sucHVzaCh0cnVlKTsNCiAgICAgICAgdGhpcy5pbkNhbGMgPSB0cnVlOw0KICAgIH07DQogICAgY29udGV4dHMuRXZhbC5wcm90b3R5cGUuZXhpdENhbGMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHRoaXMuY2FsY1N0YWNrLnBvcCgpOw0KICAgICAgICBpZiAoIXRoaXMuY2FsY1N0YWNrLmxlbmd0aCkgew0KICAgICAgICAgICAgdGhpcy5pbkNhbGMgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgY29udGV4dHMuRXZhbC5wcm90b3R5cGUuaW5QYXJlbnRoZXNpcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKCF0aGlzLnBhcmVuc1N0YWNrKSB7DQogICAgICAgICAgICB0aGlzLnBhcmVuc1N0YWNrID0gW107DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5wYXJlbnNTdGFjay5wdXNoKHRydWUpOw0KICAgIH07DQogICAgY29udGV4dHMuRXZhbC5wcm90b3R5cGUub3V0T2ZQYXJlbnRoZXNpcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhpcy5wYXJlbnNTdGFjay5wb3AoKTsNCiAgICB9Ow0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLmluQ2FsYyA9IGZhbHNlOw0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLm1hdGhPbiA9IHRydWU7DQogICAgY29udGV4dHMuRXZhbC5wcm90b3R5cGUuaXNNYXRoT24gPSBmdW5jdGlvbiAob3ApIHsNCiAgICAgICAgaWYgKCF0aGlzLm1hdGhPbikgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChvcCA9PT0gJy8nICYmIHRoaXMubWF0aCAhPT0gTWF0aCQxLkFMV0FZUyAmJiAoIXRoaXMucGFyZW5zU3RhY2sgfHwgIXRoaXMucGFyZW5zU3RhY2subGVuZ3RoKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLm1hdGggPiBNYXRoJDEuUEFSRU5TX0RJVklTSU9OKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnNTdGFjayAmJiB0aGlzLnBhcmVuc1N0YWNrLmxlbmd0aDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9Ow0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLnBhdGhSZXF1aXJlc1Jld3JpdGUgPSBmdW5jdGlvbiAocGF0aCkgew0KICAgICAgICB2YXIgaXNSZWxhdGl2ZSA9IHRoaXMucmV3cml0ZVVybHMgPT09IFJld3JpdGVVcmxzLkxPQ0FMID8gaXNQYXRoTG9jYWxSZWxhdGl2ZSA6IGlzUGF0aFJlbGF0aXZlOw0KICAgICAgICByZXR1cm4gaXNSZWxhdGl2ZShwYXRoKTsNCiAgICB9Ow0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLnJld3JpdGVQYXRoID0gZnVuY3Rpb24gKHBhdGgsIHJvb3RwYXRoKSB7DQogICAgICAgIHZhciBuZXdQYXRoOw0KICAgICAgICByb290cGF0aCA9IHJvb3RwYXRoIHx8ICcnOw0KICAgICAgICBuZXdQYXRoID0gdGhpcy5ub3JtYWxpemVQYXRoKHJvb3RwYXRoICsgcGF0aCk7DQogICAgICAgIC8vIElmIGEgcGF0aCB3YXMgZXhwbGljaXQgcmVsYXRpdmUgYW5kIHRoZSByb290cGF0aCB3YXMgbm90IGFuIGFic29sdXRlIHBhdGgNCiAgICAgICAgLy8gd2UgbXVzdCBlbnN1cmUgdGhhdCB0aGUgbmV3IHBhdGggaXMgYWxzbyBleHBsaWNpdCByZWxhdGl2ZS4NCiAgICAgICAgaWYgKGlzUGF0aExvY2FsUmVsYXRpdmUocGF0aCkgJiYNCiAgICAgICAgICAgIGlzUGF0aFJlbGF0aXZlKHJvb3RwYXRoKSAmJg0KICAgICAgICAgICAgaXNQYXRoTG9jYWxSZWxhdGl2ZShuZXdQYXRoKSA9PT0gZmFsc2UpIHsNCiAgICAgICAgICAgIG5ld1BhdGggPSAiLi8iICsgbmV3UGF0aDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV3UGF0aDsNCiAgICB9Ow0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLm5vcm1hbGl6ZVBhdGggPSBmdW5jdGlvbiAocGF0aCkgew0KICAgICAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJykucmV2ZXJzZSgpOw0KICAgICAgICB2YXIgc2VnbWVudDsNCiAgICAgICAgcGF0aCA9IFtdOw0KICAgICAgICB3aGlsZSAoc2VnbWVudHMubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICBzZWdtZW50ID0gc2VnbWVudHMucG9wKCk7DQogICAgICAgICAgICBzd2l0Y2ggKHNlZ21lbnQpIHsNCiAgICAgICAgICAgICAgICBjYXNlICcuJzoNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnLi4nOg0KICAgICAgICAgICAgICAgICAgICBpZiAoKHBhdGgubGVuZ3RoID09PSAwKSB8fCAocGF0aFtwYXRoLmxlbmd0aCAtIDFdID09PSAnLi4nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKHNlZ21lbnQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wb3AoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICBwYXRoLnB1c2goc2VnbWVudCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBwYXRoLmpvaW4oJy8nKTsNCiAgICB9Ow0KICAgIGZ1bmN0aW9uIGlzUGF0aFJlbGF0aXZlKHBhdGgpIHsNCiAgICAgICAgcmV0dXJuICEvXig/OlthLXotXSs6fFwvfCMpL2kudGVzdChwYXRoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gaXNQYXRoTG9jYWxSZWxhdGl2ZShwYXRoKSB7DQogICAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy4nOw0KICAgIH0NCiAgICAvLyB0b2RvIC0gZG8gdGhlIHNhbWUgZm9yIHRoZSB0b0NTUyA/CgogICAgZnVuY3Rpb24gbWFrZVJlZ2lzdHJ5KGJhc2UpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIF9kYXRhOiB7fSwNCiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHsNCiAgICAgICAgICAgICAgICAvLyBwcmVjYXV0aW9uYXJ5IGNhc2UgY29udmVyc2lvbiwgYXMgbGF0ZXIgcXVlcnlpbmcgb2YNCiAgICAgICAgICAgICAgICAvLyB0aGUgcmVnaXN0cnkgYnkgZnVuY3Rpb24tY2FsbGVyIHVzZXMgbG93ZXIgY2FzZSBhcyB3ZWxsLg0KICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIDsNCiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW25hbWVdID0gZnVuYzsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBhZGRNdWx0aXBsZTogZnVuY3Rpb24gKGZ1bmN0aW9ucykgew0KICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZnVuY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZChuYW1lLCBmdW5jdGlvbnNbbmFtZV0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVtuYW1lXSB8fCAoYmFzZSAmJiBiYXNlLmdldChuYW1lKSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZ2V0TG9jYWxGdW5jdGlvbnM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBpbmhlcml0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VSZWdpc3RyeSh0aGlzKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChiYXNlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VSZWdpc3RyeShiYXNlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICB9DQogICAgdmFyIGZ1bmN0aW9uUmVnaXN0cnkgPSBtYWtlUmVnaXN0cnkobnVsbCk7CgogICAgdmFyIGRlZmF1bHRGdW5jID0gew0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgdiA9IHRoaXMudmFsdWVfOw0KICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmVycm9yXzsNCiAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh2ICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdiA/IEtleXdvcmQuVHJ1ZSA6IEtleXdvcmQuRmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAodikgew0KICAgICAgICAgICAgdGhpcy52YWx1ZV8gPSB2Ow0KICAgICAgICB9LA0KICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgIHRoaXMuZXJyb3JfID0gZTsNCiAgICAgICAgfSwNCiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWVfID0gdGhpcy5lcnJvcl8gPSBudWxsOw0KICAgICAgICB9DQogICAgfTsKCiAgICB2YXIgUnVsZXNldCA9IGZ1bmN0aW9uIChzZWxlY3RvcnMsIHJ1bGVzLCBzdHJpY3RJbXBvcnRzLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLnNlbGVjdG9ycyA9IHNlbGVjdG9yczsNCiAgICAgICAgdGhpcy5ydWxlcyA9IHJ1bGVzOw0KICAgICAgICB0aGlzLl9sb29rdXBzID0ge307DQogICAgICAgIHRoaXMuX3ZhcmlhYmxlcyA9IG51bGw7DQogICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBudWxsOw0KICAgICAgICB0aGlzLnN0cmljdEltcG9ydHMgPSBzdHJpY3RJbXBvcnRzOw0KICAgICAgICB0aGlzLmNvcHlWaXNpYmlsaXR5SW5mbyh2aXNpYmlsaXR5SW5mbyk7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5zZWxlY3RvcnMsIHRoaXMpOw0KICAgICAgICB0aGlzLnNldFBhcmVudCh0aGlzLnJ1bGVzLCB0aGlzKTsNCiAgICB9Ow0KICAgIFJ1bGVzZXQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdSdWxlc2V0JywNCiAgICAgICAgaXNSdWxlc2V0OiB0cnVlLA0KICAgICAgICBpc1J1bGVzZXRMaWtlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5wYXRocykgew0KICAgICAgICAgICAgICAgIHRoaXMucGF0aHMgPSB2aXNpdG9yLnZpc2l0QXJyYXkodGhpcy5wYXRocywgdHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNlbGVjdG9ycykgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JzID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMuc2VsZWN0b3JzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVzICYmIHRoaXMucnVsZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHZpc2l0b3IudmlzaXRBcnJheSh0aGlzLnJ1bGVzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBzZWxlY3RvcnM7DQogICAgICAgICAgICB2YXIgc2VsQ250Ow0KICAgICAgICAgICAgdmFyIHNlbGVjdG9yOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICB2YXIgaGFzVmFyaWFibGU7DQogICAgICAgICAgICB2YXIgaGFzT25lUGFzc2luZ1NlbGVjdG9yID0gZmFsc2U7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RvcnMgJiYgKHNlbENudCA9IHRoaXMuc2VsZWN0b3JzLmxlbmd0aCkpIHsNCiAgICAgICAgICAgICAgICBzZWxlY3RvcnMgPSBuZXcgQXJyYXkoc2VsQ250KTsNCiAgICAgICAgICAgICAgICBkZWZhdWx0RnVuYy5lcnJvcih7DQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdTeW50YXgnLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaXQgaXMgY3VycmVudGx5IG9ubHkgYWxsb3dlZCBpbiBwYXJhbWV0cmljIG1peGluIGd1YXJkcywnDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlbENudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvcnNbaV0uZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZWxlY3Rvci5lbGVtZW50cy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yLmVsZW1lbnRzW2pdLmlzVmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNWYXJpYWJsZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JzW2ldID0gc2VsZWN0b3I7DQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvci5ldmFsZENvbmRpdGlvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaGFzT25lUGFzc2luZ1NlbGVjdG9yID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaGFzVmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHRvUGFyc2VTZWxlY3RvcnMgPSBuZXcgQXJyYXkoc2VsQ250KTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlbENudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvUGFyc2VTZWxlY3RvcnNbaV0gPSBzZWxlY3Rvci50b0NTUyhjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlLnBhcnNlTm9kZSh0b1BhcnNlU2VsZWN0b3JzLmpvaW4oJywnKSwgWyJzZWxlY3RvcnMiXSwgc2VsZWN0b3JzWzBdLmdldEluZGV4KCksIHNlbGVjdG9yc1swXS5maWxlSW5mbygpLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcnMgPSBmbGF0dGVuQXJyYXkocmVzdWx0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRlZmF1bHRGdW5jLnJlc2V0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBoYXNPbmVQYXNzaW5nU2VsZWN0b3IgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gdGhpcy5ydWxlcyA/IGNvcHlBcnJheSh0aGlzLnJ1bGVzKSA6IG51bGw7DQogICAgICAgICAgICB2YXIgcnVsZXNldCA9IG5ldyBSdWxlc2V0KHNlbGVjdG9ycywgcnVsZXMsIHRoaXMuc3RyaWN0SW1wb3J0cywgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgICAgIHZhciBydWxlOw0KICAgICAgICAgICAgdmFyIHN1YlJ1bGU7DQogICAgICAgICAgICBydWxlc2V0Lm9yaWdpbmFsUnVsZXNldCA9IHRoaXM7DQogICAgICAgICAgICBydWxlc2V0LnJvb3QgPSB0aGlzLnJvb3Q7DQogICAgICAgICAgICBydWxlc2V0LmZpcnN0Um9vdCA9IHRoaXMuZmlyc3RSb290Ow0KICAgICAgICAgICAgcnVsZXNldC5hbGxvd0ltcG9ydHMgPSB0aGlzLmFsbG93SW1wb3J0czsNCiAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnSW5mbykgew0KICAgICAgICAgICAgICAgIHJ1bGVzZXQuZGVidWdJbmZvID0gdGhpcy5kZWJ1Z0luZm87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIWhhc09uZVBhc3NpbmdTZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgIHJ1bGVzLmxlbmd0aCA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBpbmhlcml0IGEgZnVuY3Rpb24gcmVnaXN0cnkgZnJvbSB0aGUgZnJhbWVzIHN0YWNrIHdoZW4gcG9zc2libGU7DQogICAgICAgICAgICAvLyBvdGhlcndpc2UgZnJvbSB0aGUgZ2xvYmFsIHJlZ2lzdHJ5DQogICAgICAgICAgICBydWxlc2V0LmZ1bmN0aW9uUmVnaXN0cnkgPSAoZnVuY3Rpb24gKGZyYW1lcykgew0KICAgICAgICAgICAgICAgIHZhciBpID0gMDsNCiAgICAgICAgICAgICAgICB2YXIgbiA9IGZyYW1lcy5sZW5ndGg7DQogICAgICAgICAgICAgICAgdmFyIGZvdW5kOw0KICAgICAgICAgICAgICAgIGZvciAoOyBpICE9PSBuOyArK2kpIHsNCiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBmcmFtZXNbaV0uZnVuY3Rpb25SZWdpc3RyeTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uUmVnaXN0cnk7DQogICAgICAgICAgICB9KGNvbnRleHQuZnJhbWVzKSkuaW5oZXJpdCgpOw0KICAgICAgICAgICAgLy8gcHVzaCB0aGUgY3VycmVudCBydWxlc2V0IHRvIHRoZSBmcmFtZXMgc3RhY2sNCiAgICAgICAgICAgIHZhciBjdHhGcmFtZXMgPSBjb250ZXh0LmZyYW1lczsNCiAgICAgICAgICAgIGN0eEZyYW1lcy51bnNoaWZ0KHJ1bGVzZXQpOw0KICAgICAgICAgICAgLy8gY3VycnJlbnQgc2VsZWN0b3JzDQogICAgICAgICAgICB2YXIgY3R4U2VsZWN0b3JzID0gY29udGV4dC5zZWxlY3RvcnM7DQogICAgICAgICAgICBpZiAoIWN0eFNlbGVjdG9ycykgew0KICAgICAgICAgICAgICAgIGNvbnRleHQuc2VsZWN0b3JzID0gY3R4U2VsZWN0b3JzID0gW107DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjdHhTZWxlY3RvcnMudW5zaGlmdCh0aGlzLnNlbGVjdG9ycyk7DQogICAgICAgICAgICAvLyBFdmFsdWF0ZSBpbXBvcnRzDQogICAgICAgICAgICBpZiAocnVsZXNldC5yb290IHx8IHJ1bGVzZXQuYWxsb3dJbXBvcnRzIHx8ICFydWxlc2V0LnN0cmljdEltcG9ydHMpIHsNCiAgICAgICAgICAgICAgICBydWxlc2V0LmV2YWxJbXBvcnRzKGNvbnRleHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGZyYW1lcyBhcm91bmQgbWl4aW4gZGVmaW5pdGlvbnMsDQogICAgICAgICAgICAvLyBzbyB0aGV5IGNhbiBiZSBldmFsdWF0ZWQgbGlrZSBjbG9zdXJlcyB3aGVuIHRoZSB0aW1lIGNvbWVzLg0KICAgICAgICAgICAgdmFyIHJzUnVsZXMgPSBydWxlc2V0LnJ1bGVzOw0KICAgICAgICAgICAgZm9yIChpID0gMDsgKHJ1bGUgPSByc1J1bGVzW2ldKTsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUuZXZhbEZpcnN0KSB7DQogICAgICAgICAgICAgICAgICAgIHJzUnVsZXNbaV0gPSBydWxlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG1lZGlhQmxvY2tDb3VudCA9IChjb250ZXh0Lm1lZGlhQmxvY2tzICYmIGNvbnRleHQubWVkaWFCbG9ja3MubGVuZ3RoKSB8fCAwOw0KICAgICAgICAgICAgLy8gRXZhbHVhdGUgbWl4aW4gY2FsbHMuDQogICAgICAgICAgICBmb3IgKGkgPSAwOyAocnVsZSA9IHJzUnVsZXNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAocnVsZS50eXBlID09PSAnTWl4aW5DYWxsJykgew0KICAgICAgICAgICAgICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqLw0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGUuZXZhbChjb250ZXh0KS5maWx0ZXIoZnVuY3Rpb24gKHIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgociBpbnN0YW5jZW9mIERlY2xhcmF0aW9uKSAmJiByLnZhcmlhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IHBvbGx1dGUgdGhlIHNjb3BlIGlmIHRoZSB2YXJpYWJsZSBpcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgdGhlcmUuIGNvbnNpZGVyIHJldHVybmluZyBmYWxzZSBoZXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IHdlIG5lZWQgYSB3YXkgdG8gInJldHVybiIgdmFyaWFibGUgZnJvbSBtaXhpbnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShydWxlc2V0LnZhcmlhYmxlKHIubmFtZSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICByc1J1bGVzLnNwbGljZS5hcHBseShyc1J1bGVzLCBbaSwgMV0uY29uY2F0KHJ1bGVzKSk7DQogICAgICAgICAgICAgICAgICAgIGkgKz0gcnVsZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldC5yZXNldENhY2hlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUudHlwZSA9PT0gJ1ZhcmlhYmxlQ2FsbCcpIHsNCiAgICAgICAgICAgICAgICAgICAgLyoganNoaW50IGxvb3BmdW5jOnRydWUgKi8NCiAgICAgICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlLmV2YWwoY29udGV4dCkucnVsZXMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHIgaW5zdGFuY2VvZiBEZWNsYXJhdGlvbikgJiYgci52YXJpYWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBwb2xsdXRlIHRoZSBzY29wZSBhdCBhbGwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHJzUnVsZXMuc3BsaWNlLmFwcGx5KHJzUnVsZXMsIFtpLCAxXS5jb25jYXQocnVsZXMpKTsNCiAgICAgICAgICAgICAgICAgICAgaSArPSBydWxlcy5sZW5ndGggLSAxOw0KICAgICAgICAgICAgICAgICAgICBydWxlc2V0LnJlc2V0Q2FjaGUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBFdmFsdWF0ZSBldmVyeXRoaW5nIGVsc2UNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IChydWxlID0gcnNSdWxlc1tpXSk7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmICghcnVsZS5ldmFsRmlyc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgcnNSdWxlc1tpXSA9IHJ1bGUgPSBydWxlLmV2YWwgPyBydWxlLmV2YWwoY29udGV4dCkgOiBydWxlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIEV2YWx1YXRlIGV2ZXJ5dGhpbmcgZWxzZQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgKHJ1bGUgPSByc1J1bGVzW2ldKTsgaSsrKSB7DQogICAgICAgICAgICAgICAgLy8gZm9yIHJ1bGVzZXRzLCBjaGVjayBpZiBpdCBpcyBhIGNzcyBndWFyZCBhbmQgY2FuIGJlIHJlbW92ZWQNCiAgICAgICAgICAgICAgICBpZiAocnVsZSBpbnN0YW5jZW9mIFJ1bGVzZXQgJiYgcnVsZS5zZWxlY3RvcnMgJiYgcnVsZS5zZWxlY3RvcnMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGl0IGNhbiBiZSBmb2xkZWQgaW4gKGUuZy4gJiB3aGVyZSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUuc2VsZWN0b3JzWzBdICYmIHJ1bGUuc2VsZWN0b3JzWzBdLmlzSnVzdFBhcmVudFNlbGVjdG9yKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJzUnVsZXMuc3BsaWNlKGktLSwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgKHN1YlJ1bGUgPSBydWxlLnJ1bGVzW2pdKTsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlJ1bGUgaW5zdGFuY2VvZiBOb2RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlJ1bGUuY29weVZpc2liaWxpdHlJbmZvKHJ1bGUudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHN1YlJ1bGUgaW5zdGFuY2VvZiBEZWNsYXJhdGlvbikgfHwgIXN1YlJ1bGUudmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJzUnVsZXMuc3BsaWNlKCsraSwgMCwgc3ViUnVsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBQb3AgdGhlIHN0YWNrDQogICAgICAgICAgICBjdHhGcmFtZXMuc2hpZnQoKTsNCiAgICAgICAgICAgIGN0eFNlbGVjdG9ycy5zaGlmdCgpOw0KICAgICAgICAgICAgaWYgKGNvbnRleHQubWVkaWFCbG9ja3MpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSBtZWRpYUJsb2NrQ291bnQ7IGkgPCBjb250ZXh0Lm1lZGlhQmxvY2tzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubWVkaWFCbG9ja3NbaV0uYnViYmxlU2VsZWN0b3JzKHNlbGVjdG9ycyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJ1bGVzZXQ7DQogICAgICAgIH0sDQogICAgICAgIGV2YWxJbXBvcnRzOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gdGhpcy5ydWxlczsNCiAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgdmFyIGltcG9ydFJ1bGVzOw0KICAgICAgICAgICAgaWYgKCFydWxlcykgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmIChydWxlc1tpXS50eXBlID09PSAnSW1wb3J0Jykgew0KICAgICAgICAgICAgICAgICAgICBpbXBvcnRSdWxlcyA9IHJ1bGVzW2ldLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRSdWxlcyAmJiAoaW1wb3J0UnVsZXMubGVuZ3RoIHx8IGltcG9ydFJ1bGVzLmxlbmd0aCA9PT0gMCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzLnNwbGljZS5hcHBseShydWxlcywgW2ksIDFdLmNvbmNhdChpbXBvcnRSdWxlcykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaSArPSBpbXBvcnRSdWxlcy5sZW5ndGggLSAxOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXMuc3BsaWNlKGksIDEsIGltcG9ydFJ1bGVzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Q2FjaGUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIG1ha2VJbXBvcnRhbnQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUnVsZXNldCh0aGlzLnNlbGVjdG9ycywgdGhpcy5ydWxlcy5tYXAoZnVuY3Rpb24gKHIpIHsNCiAgICAgICAgICAgICAgICBpZiAoci5tYWtlSW1wb3J0YW50KSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByLm1ha2VJbXBvcnRhbnQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pLCB0aGlzLnN0cmljdEltcG9ydHMsIHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9LA0KICAgICAgICBtYXRjaEFyZ3M6IGZ1bmN0aW9uIChhcmdzKSB7DQogICAgICAgICAgICByZXR1cm4gIWFyZ3MgfHwgYXJncy5sZW5ndGggPT09IDA7DQogICAgICAgIH0sDQogICAgICAgIC8vIGxldHMgeW91IGNhbGwgYSBjc3Mgc2VsZWN0b3Igd2l0aCBhIGd1YXJkDQogICAgICAgIG1hdGNoQ29uZGl0aW9uOiBmdW5jdGlvbiAoYXJncywgY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIGxhc3RTZWxlY3RvciA9IHRoaXMuc2VsZWN0b3JzW3RoaXMuc2VsZWN0b3JzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgaWYgKCFsYXN0U2VsZWN0b3IuZXZhbGRDb25kaXRpb24pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAobGFzdFNlbGVjdG9yLmNvbmRpdGlvbiAmJg0KICAgICAgICAgICAgICAgICFsYXN0U2VsZWN0b3IuY29uZGl0aW9uLmV2YWwobmV3IGNvbnRleHRzLkV2YWwoY29udGV4dCwgY29udGV4dC5mcmFtZXMpKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICByZXNldENhY2hlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLl9ydWxlc2V0cyA9IG51bGw7DQogICAgICAgICAgICB0aGlzLl92YXJpYWJsZXMgPSBudWxsOw0KICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9IG51bGw7DQogICAgICAgICAgICB0aGlzLl9sb29rdXBzID0ge307DQogICAgICAgIH0sDQogICAgICAgIHZhcmlhYmxlczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLl92YXJpYWJsZXMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLl92YXJpYWJsZXMgPSAhdGhpcy5ydWxlcyA/IHt9IDogdGhpcy5ydWxlcy5yZWR1Y2UoZnVuY3Rpb24gKGhhc2gsIHIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBEZWNsYXJhdGlvbiAmJiByLnZhcmlhYmxlID09PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBoYXNoW3IubmFtZV0gPSByOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gZXZhbHVhdGluZyB2YXJpYWJsZXMgaW4gYW4gaW1wb3J0IHN0YXRlbWVudCwgaW1wb3J0cyBoYXZlIG5vdCBiZWVuIGV2YWwnZA0KICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGdvIGluc2lkZSBpbXBvcnQgc3RhdGVtZW50cy4NCiAgICAgICAgICAgICAgICAgICAgLy8gZ3VhcmQgYWdhaW5zdCByb290IGJlaW5nIGEgc3RyaW5nIChpbiB0aGUgY2FzZSBvZiBpbmxpbmVkIGxlc3MpDQogICAgICAgICAgICAgICAgICAgIGlmIChyLnR5cGUgPT09ICdJbXBvcnQnICYmIHIucm9vdCAmJiByLnJvb3QudmFyaWFibGVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFycyA9IHIucm9vdC52YXJpYWJsZXMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWVfMSBpbiB2YXJzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhcnMuaGFzT3duUHJvcGVydHkobmFtZV8xKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoW25hbWVfMV0gPSByLnJvb3QudmFyaWFibGUobmFtZV8xKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc2g7DQogICAgICAgICAgICAgICAgfSwge30pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhcmlhYmxlczsNCiAgICAgICAgfSwNCiAgICAgICAgcHJvcGVydGllczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLl9wcm9wZXJ0aWVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9ICF0aGlzLnJ1bGVzID8ge30gOiB0aGlzLnJ1bGVzLnJlZHVjZShmdW5jdGlvbiAoaGFzaCwgcikgew0KICAgICAgICAgICAgICAgICAgICBpZiAociBpbnN0YW5jZW9mIERlY2xhcmF0aW9uICYmIHIudmFyaWFibGUgIT09IHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lXzIgPSAoci5uYW1lLmxlbmd0aCA9PT0gMSkgJiYgKHIubmFtZVswXSBpbnN0YW5jZW9mIEtleXdvcmQpID8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLm5hbWVbMF0udmFsdWUgOiByLm5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9wZXJ0aWVzIGRvbid0IG92ZXJ3cml0ZSBhcyB0aGV5IGNhbiBtZXJnZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNoWyIkIiArIG5hbWVfMl0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoWyIkIiArIG5hbWVfMl0gPSBbcl07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoWyIkIiArIG5hbWVfMl0ucHVzaChyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDsNCiAgICAgICAgICAgICAgICB9LCB7fSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllczsNCiAgICAgICAgfSwNCiAgICAgICAgdmFyaWFibGU6IGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICB2YXIgZGVjbCA9IHRoaXMudmFyaWFibGVzKClbbmFtZV07DQogICAgICAgICAgICBpZiAoZGVjbCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVmFsdWUoZGVjbCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHByb3BlcnR5OiBmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgdmFyIGRlY2wgPSB0aGlzLnByb3BlcnRpZXMoKVtuYW1lXTsNCiAgICAgICAgICAgIGlmIChkZWNsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYWx1ZShkZWNsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbGFzdERlY2xhcmF0aW9uOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5ydWxlcy5sZW5ndGg7IGkgPiAwOyBpLS0pIHsNCiAgICAgICAgICAgICAgICB2YXIgZGVjbCA9IHRoaXMucnVsZXNbaSAtIDFdOw0KICAgICAgICAgICAgICAgIGlmIChkZWNsIGluc3RhbmNlb2YgRGVjbGFyYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYWx1ZShkZWNsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHBhcnNlVmFsdWU6IGZ1bmN0aW9uICh0b1BhcnNlKSB7DQogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7DQogICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1EZWNsYXJhdGlvbihkZWNsKSB7DQogICAgICAgICAgICAgICAgaWYgKGRlY2wudmFsdWUgaW5zdGFuY2VvZiBBbm9ueW1vdXMgJiYgIWRlY2wucGFyc2VkKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVjbC52YWx1ZS52YWx1ZSA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2UucGFyc2VOb2RlKGRlY2wudmFsdWUudmFsdWUsIFsndmFsdWUnLCAnaW1wb3J0YW50J10sIGRlY2wudmFsdWUuZ2V0SW5kZXgoKSwgZGVjbC5maWxlSW5mbygpLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wucGFyc2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsLnZhbHVlID0gcmVzdWx0WzBdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsLmltcG9ydGFudCA9IHJlc3VsdFsxXSB8fCAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5wYXJzZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5wYXJzZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY2w7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRvUGFyc2UpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybURlY2xhcmF0aW9uLmNhbGwoc2VsZiwgdG9QYXJzZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB2YXIgbm9kZXNfMSA9IFtdOw0KICAgICAgICAgICAgICAgIHRvUGFyc2UuZm9yRWFjaChmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgICAgICAgICBub2Rlc18xLnB1c2godHJhbnNmb3JtRGVjbGFyYXRpb24uY2FsbChzZWxmLCBuKSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzXzE7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHJ1bGVzZXRzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAoIXRoaXMucnVsZXMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgZmlsdFJ1bGVzID0gW107DQogICAgICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVzOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICB2YXIgcnVsZTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IChydWxlID0gcnVsZXNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAocnVsZS5pc1J1bGVzZXQpIHsNCiAgICAgICAgICAgICAgICAgICAgZmlsdFJ1bGVzLnB1c2gocnVsZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGZpbHRSdWxlczsNCiAgICAgICAgfSwNCiAgICAgICAgcHJlcGVuZFJ1bGU6IGZ1bmN0aW9uIChydWxlKSB7DQogICAgICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVzOw0KICAgICAgICAgICAgaWYgKHJ1bGVzKSB7DQogICAgICAgICAgICAgICAgcnVsZXMudW5zaGlmdChydWxlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMucnVsZXMgPSBbcnVsZV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldFBhcmVudChydWxlLCB0aGlzKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmluZDogZnVuY3Rpb24gKHNlbGVjdG9yLCBzZWxmLCBmaWx0ZXIpIHsNCiAgICAgICAgICAgIHNlbGYgPSBzZWxmIHx8IHRoaXM7DQogICAgICAgICAgICB2YXIgcnVsZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciBtYXRjaDsNCiAgICAgICAgICAgIHZhciBmb3VuZE1peGluczsNCiAgICAgICAgICAgIHZhciBrZXkgPSBzZWxlY3Rvci50b0NTUygpOw0KICAgICAgICAgICAgaWYgKGtleSBpbiB0aGlzLl9sb29rdXBzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvb2t1cHNba2V5XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucnVsZXNldHMoKS5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUgIT09IHNlbGYpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBydWxlLnNlbGVjdG9ycy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBzZWxlY3Rvci5tYXRjaChydWxlLnNlbGVjdG9yc1tqXSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IuZWxlbWVudHMubGVuZ3RoID4gbWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIgfHwgZmlsdGVyKHJ1bGUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZE1peGlucyA9IHJ1bGUuZmluZChuZXcgU2VsZWN0b3Ioc2VsZWN0b3IuZWxlbWVudHMuc2xpY2UobWF0Y2gpKSwgc2VsZiwgZmlsdGVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm91bmRNaXhpbnMubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZE1peGluc1tpXS5wYXRoLnB1c2gocnVsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShydWxlcywgZm91bmRNaXhpbnMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcy5wdXNoKHsgcnVsZTogcnVsZSwgcGF0aDogW10gfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLl9sb29rdXBzW2tleV0gPSBydWxlczsNCiAgICAgICAgICAgIHJldHVybiBydWxlczsNCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBqOw0KICAgICAgICAgICAgdmFyIGNoYXJzZXRSdWxlTm9kZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciBydWxlTm9kZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciAvLyBMaW5lIG51bWJlciBkZWJ1Z2dpbmcNCiAgICAgICAgICAgIGRlYnVnSW5mbyQxOw0KICAgICAgICAgICAgdmFyIHJ1bGU7DQogICAgICAgICAgICB2YXIgcGF0aDsNCiAgICAgICAgICAgIGNvbnRleHQudGFiTGV2ZWwgPSAoY29udGV4dC50YWJMZXZlbCB8fCAwKTsNCiAgICAgICAgICAgIGlmICghdGhpcy5yb290KSB7DQogICAgICAgICAgICAgICAgY29udGV4dC50YWJMZXZlbCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHRhYlJ1bGVTdHIgPSBjb250ZXh0LmNvbXByZXNzID8gJycgOiBBcnJheShjb250ZXh0LnRhYkxldmVsICsgMSkuam9pbignICAnKTsNCiAgICAgICAgICAgIHZhciB0YWJTZXRTdHIgPSBjb250ZXh0LmNvbXByZXNzID8gJycgOiBBcnJheShjb250ZXh0LnRhYkxldmVsKS5qb2luKCcgICcpOw0KICAgICAgICAgICAgdmFyIHNlcDsNCiAgICAgICAgICAgIHZhciBjaGFyc2V0Tm9kZUluZGV4ID0gMDsNCiAgICAgICAgICAgIHZhciBpbXBvcnROb2RlSW5kZXggPSAwOw0KICAgICAgICAgICAgZm9yIChpID0gMDsgKHJ1bGUgPSB0aGlzLnJ1bGVzW2ldKTsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBDb21tZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnROb2RlSW5kZXggPT09IGkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydE5vZGVJbmRleCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJ1bGVOb2Rlcy5wdXNoKHJ1bGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChydWxlLmlzQ2hhcnNldCAmJiBydWxlLmlzQ2hhcnNldCgpKSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVOb2Rlcy5zcGxpY2UoY2hhcnNldE5vZGVJbmRleCwgMCwgcnVsZSk7DQogICAgICAgICAgICAgICAgICAgIGNoYXJzZXROb2RlSW5kZXgrKzsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0Tm9kZUluZGV4Kys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUudHlwZSA9PT0gJ0ltcG9ydCcpIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZU5vZGVzLnNwbGljZShpbXBvcnROb2RlSW5kZXgsIDAsIHJ1bGUpOw0KICAgICAgICAgICAgICAgICAgICBpbXBvcnROb2RlSW5kZXgrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVOb2Rlcy5wdXNoKHJ1bGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJ1bGVOb2RlcyA9IGNoYXJzZXRSdWxlTm9kZXMuY29uY2F0KHJ1bGVOb2Rlcyk7DQogICAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSByb290IG5vZGUsIHdlIGRvbid0IHJlbmRlcg0KICAgICAgICAgICAgLy8gYSBzZWxlY3Rvciwgb3Ige30uDQogICAgICAgICAgICBpZiAoIXRoaXMucm9vdCkgew0KICAgICAgICAgICAgICAgIGRlYnVnSW5mbyQxID0gZGVidWdJbmZvKGNvbnRleHQsIHRoaXMsIHRhYlNldFN0cik7DQogICAgICAgICAgICAgICAgaWYgKGRlYnVnSW5mbyQxKSB7DQogICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZGVidWdJbmZvJDEpOw0KICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHRhYlNldFN0cik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBwYXRocyA9IHRoaXMucGF0aHM7DQogICAgICAgICAgICAgICAgdmFyIHBhdGhDbnQgPSBwYXRocy5sZW5ndGg7DQogICAgICAgICAgICAgICAgdmFyIHBhdGhTdWJDbnQgPSB2b2lkIDA7DQogICAgICAgICAgICAgICAgc2VwID0gY29udGV4dC5jb21wcmVzcyA/ICcsJyA6ICgiLFxuIiArIHRhYlNldFN0cik7DQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhdGhDbnQ7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGF0aHNbaV07DQogICAgICAgICAgICAgICAgICAgIGlmICghKHBhdGhTdWJDbnQgPSBwYXRoLmxlbmd0aCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZChzZXApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlyc3RTZWxlY3RvciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHBhdGhbMF0uZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlyc3RTZWxlY3RvciA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAxOyBqIDwgcGF0aFN1YkNudDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXRoW2pdLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoKGNvbnRleHQuY29tcHJlc3MgPyAneycgOiAnIHtcbicpICsgdGFiUnVsZVN0cik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBDb21waWxlIHJ1bGVzIGFuZCBydWxlc2V0cw0KICAgICAgICAgICAgZm9yIChpID0gMDsgKHJ1bGUgPSBydWxlTm9kZXNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoaSArIDEgPT09IHJ1bGVOb2Rlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sYXN0UnVsZSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TGFzdFJ1bGUgPSBjb250ZXh0Lmxhc3RSdWxlOw0KICAgICAgICAgICAgICAgIGlmIChydWxlLmlzUnVsZXNldExpa2UocnVsZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sYXN0UnVsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocnVsZS5nZW5DU1MpIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAocnVsZS52YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHJ1bGUudmFsdWUudG9TdHJpbmcoKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnRleHQubGFzdFJ1bGUgPSBjdXJyZW50TGFzdFJ1bGU7DQogICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0Lmxhc3RSdWxlICYmIHJ1bGUuaXNWaXNpYmxlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZChjb250ZXh0LmNvbXByZXNzID8gJycgOiAoIlxuIiArIHRhYlJ1bGVTdHIpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGFzdFJ1bGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIXRoaXMucm9vdCkgew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoKGNvbnRleHQuY29tcHJlc3MgPyAnfScgOiAiXG4iICsgdGFiU2V0U3RyICsgIn0iKSk7DQogICAgICAgICAgICAgICAgY29udGV4dC50YWJMZXZlbC0tOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFvdXRwdXQuaXNFbXB0eSgpICYmICFjb250ZXh0LmNvbXByZXNzICYmIHRoaXMuZmlyc3RSb290KSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgnXG4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgam9pblNlbGVjdG9yczogZnVuY3Rpb24gKHBhdGhzLCBjb250ZXh0LCBzZWxlY3RvcnMpIHsNCiAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgc2VsZWN0b3JzLmxlbmd0aDsgcysrKSB7DQogICAgICAgICAgICAgICAgdGhpcy5qb2luU2VsZWN0b3IocGF0aHMsIGNvbnRleHQsIHNlbGVjdG9yc1tzXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGpvaW5TZWxlY3RvcjogZnVuY3Rpb24gKHBhdGhzLCBjb250ZXh0LCBzZWxlY3Rvcikgew0KICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGFyZW50aGVzaXMoZWxlbWVudHNUb1Bhaywgb3JpZ2luYWxFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50UGFyZW4sIGo7DQogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzVG9QYWsubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50UGFyZW4gPSBuZXcgUGFyZW4oZWxlbWVudHNUb1Bha1swXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5zaWRlUGFyZW50ID0gbmV3IEFycmF5KGVsZW1lbnRzVG9QYWsubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGVsZW1lbnRzVG9QYWsubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGluc2lkZVBhcmVudFtqXSA9IG5ldyBFbGVtZW50KG51bGwsIGVsZW1lbnRzVG9QYWtbal0sIG9yaWdpbmFsRWxlbWVudC5pc1ZhcmlhYmxlLCBvcmlnaW5hbEVsZW1lbnQuX2luZGV4LCBvcmlnaW5hbEVsZW1lbnQuX2ZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudFBhcmVuID0gbmV3IFBhcmVuKG5ldyBTZWxlY3RvcihpbnNpZGVQYXJlbnQpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VtZW50UGFyZW47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVTZWxlY3Rvcihjb250YWluZWRFbGVtZW50LCBvcmlnaW5hbEVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCwgc2VsZWN0b3I7DQogICAgICAgICAgICAgICAgZWxlbWVudCA9IG5ldyBFbGVtZW50KG51bGwsIGNvbnRhaW5lZEVsZW1lbnQsIG9yaWdpbmFsRWxlbWVudC5pc1ZhcmlhYmxlLCBvcmlnaW5hbEVsZW1lbnQuX2luZGV4LCBvcmlnaW5hbEVsZW1lbnQuX2ZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IG5ldyBTZWxlY3RvcihbZWxlbWVudF0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIGpvaW5zIHNlbGVjdG9yIHBhdGggZnJvbSBgYmVnaW5uaW5nUGF0aGAgd2l0aCBzZWxlY3RvciBwYXRoIGluIGBhZGRQYXRoYA0KICAgICAgICAgICAgLy8gYHJlcGxhY2VkRWxlbWVudGAgY29udGFpbnMgZWxlbWVudCB0aGF0IGlzIGJlaW5nIHJlcGxhY2VkIGJ5IGBhZGRQYXRoYA0KICAgICAgICAgICAgLy8gcmV0dXJucyBjb25jYXRlbmF0ZWQgcGF0aA0KICAgICAgICAgICAgZnVuY3Rpb24gYWRkUmVwbGFjZW1lbnRJbnRvUGF0aChiZWdpbm5pbmdQYXRoLCBhZGRQYXRoLCByZXBsYWNlZEVsZW1lbnQsIG9yaWdpbmFsU2VsZWN0b3IpIHsNCiAgICAgICAgICAgICAgICB2YXIgbmV3U2VsZWN0b3JQYXRoLCBsYXN0U2VsZWN0b3IsIG5ld0pvaW5lZFNlbGVjdG9yOw0KICAgICAgICAgICAgICAgIC8vIG91ciBuZXcgc2VsZWN0b3IgcGF0aA0KICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yUGF0aCA9IFtdOw0KICAgICAgICAgICAgICAgIC8vIGNvbnN0cnVjdCB0aGUgam9pbmVkIHNlbGVjdG9yIC0gaWYgJiBpcyB0aGUgZmlyc3QgdGhpbmcgdGhpcyB3aWxsIGJlIGVtcHR5LA0KICAgICAgICAgICAgICAgIC8vIGlmIG5vdCBuZXdKb2luZWRTZWxlY3RvciB3aWxsIGJlIHRoZSBsYXN0IHNldCBvZiBlbGVtZW50cyBpbiB0aGUgc2VsZWN0b3INCiAgICAgICAgICAgICAgICBpZiAoYmVnaW5uaW5nUGF0aC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yUGF0aCA9IGNvcHlBcnJheShiZWdpbm5pbmdQYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgbGFzdFNlbGVjdG9yID0gbmV3U2VsZWN0b3JQYXRoLnBvcCgpOw0KICAgICAgICAgICAgICAgICAgICBuZXdKb2luZWRTZWxlY3RvciA9IG9yaWdpbmFsU2VsZWN0b3IuY3JlYXRlRGVyaXZlZChjb3B5QXJyYXkobGFzdFNlbGVjdG9yLmVsZW1lbnRzKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBuZXdKb2luZWRTZWxlY3RvciA9IG9yaWdpbmFsU2VsZWN0b3IuY3JlYXRlRGVyaXZlZChbXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhZGRQYXRoLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gL2RlZXAvIGlzIGEgQ1NTNCBzZWxlY3RvciAtIChyZW1vdmVkLCBzbyBzaG91bGQgZGVwcmVjYXRlKQ0KICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IGlzIHZhbGlkIHdpdGhvdXQgYW55dGhpbmcgaW4gZnJvbnQgb2YgaXQNCiAgICAgICAgICAgICAgICAgICAgLy8gc28gaWYgdGhlICYgZG9lcyBub3QgaGF2ZSBhIGNvbWJpbmF0b3IgdGhhdCBpcyAiIiBvciAiICIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlcmUgaXMgYSBjb21iaW5hdG9yIG9uIHRoZSBwYXJlbnQsIHRoZW4gZ3JhYiB0aGF0Lg0KICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGFsc28gYWxsb3dzICsgYSB7ICYgLmIgeyAuYSAmIHsgLi4uIHRob3VnaCBub3Qgc3VyZSB3aHkgeW91IHdvdWxkIHdhbnQgdG8gZG8gdGhhdA0KICAgICAgICAgICAgICAgICAgICB2YXIgY29tYmluYXRvciA9IHJlcGxhY2VkRWxlbWVudC5jb21iaW5hdG9yOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWwgPSBhZGRQYXRoWzBdLmVsZW1lbnRzWzBdOw0KICAgICAgICAgICAgICAgICAgICBpZiAoY29tYmluYXRvci5lbXB0eU9yV2hpdGVzcGFjZSAmJiAhcGFyZW50RWwuY29tYmluYXRvci5lbXB0eU9yV2hpdGVzcGFjZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29tYmluYXRvciA9IHBhcmVudEVsLmNvbWJpbmF0b3I7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gam9pbiB0aGUgZWxlbWVudHMgc28gZmFyIHdpdGggdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHBhcmVudA0KICAgICAgICAgICAgICAgICAgICBuZXdKb2luZWRTZWxlY3Rvci5lbGVtZW50cy5wdXNoKG5ldyBFbGVtZW50KGNvbWJpbmF0b3IsIHBhcmVudEVsLnZhbHVlLCByZXBsYWNlZEVsZW1lbnQuaXNWYXJpYWJsZSwgcmVwbGFjZWRFbGVtZW50Ll9pbmRleCwgcmVwbGFjZWRFbGVtZW50Ll9maWxlSW5mbykpOw0KICAgICAgICAgICAgICAgICAgICBuZXdKb2luZWRTZWxlY3Rvci5lbGVtZW50cyA9IG5ld0pvaW5lZFNlbGVjdG9yLmVsZW1lbnRzLmNvbmNhdChhZGRQYXRoWzBdLmVsZW1lbnRzLnNsaWNlKDEpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gbm93IGFkZCB0aGUgam9pbmVkIHNlbGVjdG9yIC0gYnV0IG9ubHkgaWYgaXQgaXMgbm90IGVtcHR5DQogICAgICAgICAgICAgICAgaWYgKG5ld0pvaW5lZFNlbGVjdG9yLmVsZW1lbnRzLmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBuZXdTZWxlY3RvclBhdGgucHVzaChuZXdKb2luZWRTZWxlY3Rvcik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIHB1dCB0b2dldGhlciB0aGUgcGFyZW50IHNlbGVjdG9ycyBhZnRlciB0aGUgam9pbiAoZS5nLiB0aGUgcmVzdCBvZiB0aGUgcGFyZW50KQ0KICAgICAgICAgICAgICAgIGlmIChhZGRQYXRoLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3RPZlBhdGggPSBhZGRQYXRoLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICByZXN0T2ZQYXRoID0gcmVzdE9mUGF0aC5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3IuY3JlYXRlRGVyaXZlZChzZWxlY3Rvci5lbGVtZW50cywgW10pOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0b3JQYXRoID0gbmV3U2VsZWN0b3JQYXRoLmNvbmNhdChyZXN0T2ZQYXRoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NlbGVjdG9yUGF0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIGpvaW5zIHNlbGVjdG9yIHBhdGggZnJvbSBgYmVnaW5uaW5nUGF0aGAgd2l0aCBldmVyeSBzZWxlY3RvciBwYXRoIGluIGBhZGRQYXRoc2AgYXJyYXkNCiAgICAgICAgICAgIC8vIGByZXBsYWNlZEVsZW1lbnRgIGNvbnRhaW5zIGVsZW1lbnQgdGhhdCBpcyBiZWluZyByZXBsYWNlZCBieSBgYWRkUGF0aGANCiAgICAgICAgICAgIC8vIHJldHVybnMgYXJyYXkgd2l0aCBhbGwgY29uY2F0ZW5hdGVkIHBhdGhzDQogICAgICAgICAgICBmdW5jdGlvbiBhZGRBbGxSZXBsYWNlbWVudHNJbnRvUGF0aChiZWdpbm5pbmdQYXRoLCBhZGRQYXRocywgcmVwbGFjZWRFbGVtZW50LCBvcmlnaW5hbFNlbGVjdG9yLCByZXN1bHQpIHsNCiAgICAgICAgICAgICAgICB2YXIgajsNCiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgYmVnaW5uaW5nUGF0aC5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2VsZWN0b3JQYXRoID0gYWRkUmVwbGFjZW1lbnRJbnRvUGF0aChiZWdpbm5pbmdQYXRoW2pdLCBhZGRQYXRocywgcmVwbGFjZWRFbGVtZW50LCBvcmlnaW5hbFNlbGVjdG9yKTsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3U2VsZWN0b3JQYXRoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIG1lcmdlRWxlbWVudHNPblRvU2VsZWN0b3JzKGVsZW1lbnRzLCBzZWxlY3RvcnMpIHsNCiAgICAgICAgICAgICAgICB2YXIgaSwgc2VsOw0KICAgICAgICAgICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3JzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcnMucHVzaChbbmV3IFNlbGVjdG9yKGVsZW1lbnRzKV0pOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IChzZWwgPSBzZWxlY3RvcnNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByZXZpb3VzIHRoaW5nIGluIHNlbCBpcyBhIHBhcmVudCB0aGlzIG5lZWRzIHRvIGpvaW4gb24gdG8gaXQNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxbc2VsLmxlbmd0aCAtIDFdID0gc2VsW3NlbC5sZW5ndGggLSAxXS5jcmVhdGVEZXJpdmVkKHNlbFtzZWwubGVuZ3RoIC0gMV0uZWxlbWVudHMuY29uY2F0KGVsZW1lbnRzKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWwucHVzaChuZXcgU2VsZWN0b3IoZWxlbWVudHMpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHJlcGxhY2UgYWxsIHBhcmVudCBzZWxlY3RvcnMgaW5zaWRlIGBpblNlbGVjdG9yYCBieSBjb250ZW50IG9mIGBjb250ZXh0YCBhcnJheQ0KICAgICAgICAgICAgLy8gcmVzdWx0aW5nIHNlbGVjdG9ycyBhcmUgcmV0dXJuZWQgaW5zaWRlIGBwYXRoc2AgYXJyYXkNCiAgICAgICAgICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBgaW5TZWxlY3RvcmAgY29udGFpbmVkIGF0IGxlYXN0IG9uZSBwYXJlbnQgc2VsZWN0b3INCiAgICAgICAgICAgIGZ1bmN0aW9uIHJlcGxhY2VQYXJlbnRTZWxlY3RvcihwYXRocywgY29udGV4dCwgaW5TZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgIC8vIFRoZSBwYXRocyBhcmUgW1tTZWxlY3Rvcl1dDQogICAgICAgICAgICAgICAgLy8gVGhlIGZpcnN0IGxpc3QgaXMgYSBsaXN0IG9mIGNvbW1hIHNlcGFyYXRlZCBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAvLyBUaGUgaW5uZXIgbGlzdCBpcyBhIGxpc3Qgb2YgaW5oZXJpdGFuY2Ugc2VwYXJhdGVkIHNlbGVjdG9ycw0KICAgICAgICAgICAgICAgIC8vIGUuZy4NCiAgICAgICAgICAgICAgICAvLyAuYSwgLmIgew0KICAgICAgICAgICAgICAgIC8vICAgLmMgew0KICAgICAgICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgICAgICAvLyA9PSBbWy5hXSBbLmNdXSBbWy5iXSBbLmNdXQ0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgdmFyIGksIGosIGssIGN1cnJlbnRFbGVtZW50cywgbmV3U2VsZWN0b3JzLCBzZWxlY3RvcnNNdWx0aXBsaWVkLCBzZWwsIGVsLCBoYWRQYXJlbnRTZWxlY3RvciA9IGZhbHNlLCBsZW5ndGgsIGxhc3RTZWxlY3RvcjsNCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaW5kTmVzdGVkU2VsZWN0b3IoZWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbWF5YmVTZWxlY3RvcjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZWxlbWVudC52YWx1ZSBpbnN0YW5jZW9mIFBhcmVuKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgbWF5YmVTZWxlY3RvciA9IGVsZW1lbnQudmFsdWUudmFsdWU7DQogICAgICAgICAgICAgICAgICAgIGlmICghKG1heWJlU2VsZWN0b3IgaW5zdGFuY2VvZiBTZWxlY3RvcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXliZVNlbGVjdG9yOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudHMgZnJvbSB0aGUgY3VycmVudCBzZWxlY3RvciBzbyBmYXINCiAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudHMgPSBbXTsNCiAgICAgICAgICAgICAgICAvLyB0aGUgY3VycmVudCBsaXN0IG9mIG5ldyBzZWxlY3RvcnMgdG8gYWRkIHRvIHRoZSBwYXRoLg0KICAgICAgICAgICAgICAgIC8vIFdlIHdpbGwgYnVpbGQgaXQgdXAuIFdlIGluaXRpYXRlIGl0IHdpdGggb25lIGVtcHR5IHNlbGVjdG9yIGFzIHdlICJtdWx0aXBseSIgdGhlIG5ldyBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAvLyBieSB0aGUgcGFyZW50cw0KICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9ycyA9IFsNCiAgICAgICAgICAgICAgICAgICAgW10NCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IChlbCA9IGluU2VsZWN0b3IuZWxlbWVudHNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gbm9uIHBhcmVudCByZWZlcmVuY2UgZWxlbWVudHMganVzdCBnZXQgYWRkZWQNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLnZhbHVlICE9PSAnJicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXN0ZWRTZWxlY3RvciA9IGZpbmROZXN0ZWRTZWxlY3RvcihlbCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGVkU2VsZWN0b3IgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZSBjdXJyZW50IGxpc3Qgb2Ygbm9uIHBhcmVudCBzZWxlY3RvciBlbGVtZW50cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIHRvIHRoZSBjdXJyZW50IGxpc3Qgb2Ygc2VsZWN0b3JzIHRvIGFkZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlRWxlbWVudHNPblRvU2VsZWN0b3JzKGN1cnJlbnRFbGVtZW50cywgbmV3U2VsZWN0b3JzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmVzdGVkUGF0aHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZWQgPSB2b2lkIDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VkTmV3U2VsZWN0b3JzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZWQgPSByZXBsYWNlUGFyZW50U2VsZWN0b3IobmVzdGVkUGF0aHMsIGNvbnRleHQsIG5lc3RlZFNlbGVjdG9yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYWRQYXJlbnRTZWxlY3RvciA9IGhhZFBhcmVudFNlbGVjdG9yIHx8IHJlcGxhY2VkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBuZXN0ZWRQYXRocyBhcnJheSBzaG91bGQgaGF2ZSBvbmx5IG9uZSBtZW1iZXIgLSByZXBsYWNlUGFyZW50U2VsZWN0b3IgZG9lcyBub3QgbXVsdGlwbHkgc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG5lc3RlZFBhdGhzLmxlbmd0aDsgaysrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXBsYWNlbWVudFNlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoY3JlYXRlUGFyZW50aGVzaXMobmVzdGVkUGF0aHNba10sIGVsKSwgZWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRBbGxSZXBsYWNlbWVudHNJbnRvUGF0aChuZXdTZWxlY3RvcnMsIFtyZXBsYWNlbWVudFNlbGVjdG9yXSwgZWwsIGluU2VsZWN0b3IsIHJlcGxhY2VkTmV3U2VsZWN0b3JzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0b3JzID0gcmVwbGFjZWROZXdTZWxlY3RvcnM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnRzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudHMucHVzaChlbCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBoYWRQYXJlbnRTZWxlY3RvciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbmV3IGxpc3Qgb2Ygc2VsZWN0b3JzIHRvIGFkZA0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JzTXVsdGlwbGllZCA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlIGN1cnJlbnQgbGlzdCBvZiBub24gcGFyZW50IHNlbGVjdG9yIGVsZW1lbnRzDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0byB0aGUgY3VycmVudCBsaXN0IG9mIHNlbGVjdG9ycyB0byBhZGQNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlRWxlbWVudHNPblRvU2VsZWN0b3JzKGN1cnJlbnRFbGVtZW50cywgbmV3U2VsZWN0b3JzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBvdXIgY3VycmVudCBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBuZXdTZWxlY3RvcnMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWwgPSBuZXdTZWxlY3RvcnNbal07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgcGFyZW50IHBhdGhzLCB0aGUgJiBtaWdodCBiZSBpbiBhIG1peGluIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGV0aGVyIHRoZXJlIGFyZSBwYXJlbnRzIG9yIG5vdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY29tYmluYXRvciB1c2VkIG9uIGVsIHNob3VsZCBub3cgYmUgYXBwbGllZCB0byB0aGUgbmV4dCBlbGVtZW50IGluc3RlYWQgc28gdGhhdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCBpcyBub3QgbG9zdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbFswXS5lbGVtZW50cy5wdXNoKG5ldyBFbGVtZW50KGVsLmNvbWJpbmF0b3IsICcnLCBlbC5pc1ZhcmlhYmxlLCBlbC5faW5kZXgsIGVsLl9maWxlSW5mbykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yc011bHRpcGxpZWQucHVzaChzZWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBwYXJlbnQgc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBjb250ZXh0Lmxlbmd0aDsgaysrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHB1dCB0aGUgY3VycmVudCBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZW4gam9pbiB0aGUgbGFzdCBzZWxlY3RvcidzIGVsZW1lbnRzIG9uIHRvIHRoZSBwYXJlbnRzIHNlbGVjdG9ycw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NlbGVjdG9yUGF0aCA9IGFkZFJlcGxhY2VtZW50SW50b1BhdGgoc2VsLCBjb250ZXh0W2tdLCBlbCwgaW5TZWxlY3Rvcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhhdCB0byBvdXIgbmV3IHNldCBvZiBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yc011bHRpcGxpZWQucHVzaChuZXdTZWxlY3RvclBhdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3VyIG5ldyBzZWxlY3RvcnMgaGFzIGJlZW4gbXVsdGlwbGllZCwgc28gcmVzZXQgdGhlIHN0YXRlDQogICAgICAgICAgICAgICAgICAgICAgICBuZXdTZWxlY3RvcnMgPSBzZWxlY3RvcnNNdWx0aXBsaWVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnRzID0gW107DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhbnkgZWxlbWVudHMgbGVmdCBvdmVyIChlLmcuIC5hJiAuYiA9PSAuYikNCiAgICAgICAgICAgICAgICAvLyBhZGQgdGhlbSBvbiB0byBhbGwgdGhlIGN1cnJlbnQgc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgbWVyZ2VFbGVtZW50c09uVG9TZWxlY3RvcnMoY3VycmVudEVsZW1lbnRzLCBuZXdTZWxlY3RvcnMpOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBuZXdTZWxlY3RvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gbmV3U2VsZWN0b3JzW2ldLmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhzLnB1c2gobmV3U2VsZWN0b3JzW2ldKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RTZWxlY3RvciA9IG5ld1NlbGVjdG9yc1tpXVtsZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yc1tpXVtsZW5ndGggLSAxXSA9IGxhc3RTZWxlY3Rvci5jcmVhdGVEZXJpdmVkKGxhc3RTZWxlY3Rvci5lbGVtZW50cywgaW5TZWxlY3Rvci5leHRlbmRMaXN0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gaGFkUGFyZW50U2VsZWN0b3I7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBkZXJpdmVTZWxlY3Rvcih2aXNpYmlsaXR5SW5mbywgZGVyaXZlRnJvbSkgew0KICAgICAgICAgICAgICAgIHZhciBuZXdTZWxlY3RvciA9IGRlcml2ZUZyb20uY3JlYXRlRGVyaXZlZChkZXJpdmVGcm9tLmVsZW1lbnRzLCBkZXJpdmVGcm9tLmV4dGVuZExpc3QsIGRlcml2ZUZyb20uZXZhbGRDb25kaXRpb24pOw0KICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yLmNvcHlWaXNpYmlsaXR5SW5mbyh2aXNpYmlsaXR5SW5mbyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NlbGVjdG9yOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gam9pblNlbGVjdG9yIGNvZGUgZm9sbG93cw0KICAgICAgICAgICAgdmFyIGksIG5ld1BhdGhzLCBoYWRQYXJlbnRTZWxlY3RvcjsNCiAgICAgICAgICAgIG5ld1BhdGhzID0gW107DQogICAgICAgICAgICBoYWRQYXJlbnRTZWxlY3RvciA9IHJlcGxhY2VQYXJlbnRTZWxlY3RvcihuZXdQYXRocywgY29udGV4dCwgc2VsZWN0b3IpOw0KICAgICAgICAgICAgaWYgKCFoYWRQYXJlbnRTZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgbmV3UGF0aHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbnRleHQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25jYXRlbmF0ZWQgPSBjb250ZXh0W2ldLm1hcChkZXJpdmVTZWxlY3Rvci5iaW5kKHRoaXMsIHNlbGVjdG9yLnZpc2liaWxpdHlJbmZvKCkpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmNhdGVuYXRlZC5wdXNoKHNlbGVjdG9yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhdGhzLnB1c2goY29uY2F0ZW5hdGVkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgbmV3UGF0aHMgPSBbW3NlbGVjdG9yXV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG5ld1BhdGhzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgcGF0aHMucHVzaChuZXdQYXRoc1tpXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgQXRSdWxlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBydWxlcywgaW5kZXgsIGN1cnJlbnRGaWxlSW5mbywgZGVidWdJbmZvLCBpc1Jvb3RlZCwgdmlzaWJpbGl0eUluZm8pIHsNCiAgICAgICAgdmFyIGk7DQogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7DQogICAgICAgIHRoaXMudmFsdWUgPSAodmFsdWUgaW5zdGFuY2VvZiBOb2RlKSA/IHZhbHVlIDogKHZhbHVlID8gbmV3IEFub255bW91cyh2YWx1ZSkgOiB2YWx1ZSk7DQogICAgICAgIGlmIChydWxlcykgew0KICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocnVsZXMpKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHJ1bGVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IFtydWxlc107DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlc1swXS5zZWxlY3RvcnMgPSAobmV3IFNlbGVjdG9yKFtdLCBudWxsLCBudWxsLCBpbmRleCwgY3VycmVudEZpbGVJbmZvKSkuY3JlYXRlRW1wdHlTZWxlY3RvcnMoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnJ1bGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlc1tpXS5hbGxvd0ltcG9ydHMgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5ydWxlcywgdGhpcyk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuZGVidWdJbmZvID0gZGVidWdJbmZvOw0KICAgICAgICB0aGlzLmlzUm9vdGVkID0gaXNSb290ZWQgfHwgZmFsc2U7DQogICAgICAgIHRoaXMuY29weVZpc2liaWxpdHlJbmZvKHZpc2liaWxpdHlJbmZvKTsNCiAgICAgICAgdGhpcy5hbGxvd1Jvb3QgPSB0cnVlOw0KICAgIH07DQogICAgQXRSdWxlLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnQXRSdWxlJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZSwgcnVsZXMgPSB0aGlzLnJ1bGVzOw0KICAgICAgICAgICAgaWYgKHJ1bGVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHZpc2l0b3IudmlzaXRBcnJheShydWxlcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmlzaXRvci52aXNpdCh2YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGlzUnVsZXNldExpa2U6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnJ1bGVzIHx8ICF0aGlzLmlzQ2hhcnNldCgpOw0KICAgICAgICB9LA0KICAgICAgICBpc0NoYXJzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiAnQGNoYXJzZXQnID09PSB0aGlzLm5hbWU7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZSwgcnVsZXMgPSB0aGlzLnJ1bGVzOw0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLm5hbWUsIHRoaXMuZmlsZUluZm8oKSwgdGhpcy5nZXRJbmRleCgpKTsNCiAgICAgICAgICAgIGlmICh2YWx1ZSkgew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoJyAnKTsNCiAgICAgICAgICAgICAgICB2YWx1ZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChydWxlcykgew0KICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0UnVsZXNldChjb250ZXh0LCBvdXRwdXQsIHJ1bGVzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoJzsnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBtZWRpYVBhdGhCYWNrdXAsIG1lZGlhQmxvY2tzQmFja3VwLCB2YWx1ZSA9IHRoaXMudmFsdWUsIHJ1bGVzID0gdGhpcy5ydWxlczsNCiAgICAgICAgICAgIC8vIG1lZGlhIHN0b3JlZCBpbnNpZGUgb3RoZXIgYXRydWxlIHNob3VsZCBub3QgYnViYmxlIG92ZXIgaXQNCiAgICAgICAgICAgIC8vIGJhY2twdXAgbWVkaWEgYnViYmxpbmcgaW5mb3JtYXRpb24NCiAgICAgICAgICAgIG1lZGlhUGF0aEJhY2t1cCA9IGNvbnRleHQubWVkaWFQYXRoOw0KICAgICAgICAgICAgbWVkaWFCbG9ja3NCYWNrdXAgPSBjb250ZXh0Lm1lZGlhQmxvY2tzOw0KICAgICAgICAgICAgLy8gZGVsZXRlZCBtZWRpYSBidWJibGluZyBpbmZvcm1hdGlvbg0KICAgICAgICAgICAgY29udGV4dC5tZWRpYVBhdGggPSBbXTsNCiAgICAgICAgICAgIGNvbnRleHQubWVkaWFCbG9ja3MgPSBbXTsNCiAgICAgICAgICAgIGlmICh2YWx1ZSkgew0KICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChydWxlcykgew0KICAgICAgICAgICAgICAgIC8vIGFzc3VtaW5nIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgcnVsZSBhdCB0aGlzIHBvaW50IC0gdGhhdCBpcyBob3cgcGFyc2VyIGNvbnN0cnVjdHMgdGhlIHJ1bGUNCiAgICAgICAgICAgICAgICBydWxlcyA9IFtydWxlc1swXS5ldmFsKGNvbnRleHQpXTsNCiAgICAgICAgICAgICAgICBydWxlc1swXS5yb290ID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHJlc3RvcmUgbWVkaWEgYnViYmxpbmcgaW5mb3JtYXRpb24NCiAgICAgICAgICAgIGNvbnRleHQubWVkaWFQYXRoID0gbWVkaWFQYXRoQmFja3VwOw0KICAgICAgICAgICAgY29udGV4dC5tZWRpYUJsb2NrcyA9IG1lZGlhQmxvY2tzQmFja3VwOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBBdFJ1bGUodGhpcy5uYW1lLCB2YWx1ZSwgcnVsZXMsIHRoaXMuZ2V0SW5kZXgoKSwgdGhpcy5maWxlSW5mbygpLCB0aGlzLmRlYnVnSW5mbywgdGhpcy5pc1Jvb3RlZCwgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgdmFyaWFibGU6IGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICBpZiAodGhpcy5ydWxlcykgew0KICAgICAgICAgICAgICAgIC8vIGFzc3VtaW5nIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgcnVsZSBhdCB0aGlzIHBvaW50IC0gdGhhdCBpcyBob3cgcGFyc2VyIGNvbnN0cnVjdHMgdGhlIHJ1bGUNCiAgICAgICAgICAgICAgICByZXR1cm4gUnVsZXNldC5wcm90b3R5cGUudmFyaWFibGUuY2FsbCh0aGlzLnJ1bGVzWzBdLCBuYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZmluZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMucnVsZXMpIHsNCiAgICAgICAgICAgICAgICAvLyBhc3N1bWluZyB0aGF0IHRoZXJlIGlzIG9ubHkgb25lIHJ1bGUgYXQgdGhpcyBwb2ludCAtIHRoYXQgaXMgaG93IHBhcnNlciBjb25zdHJ1Y3RzIHRoZSBydWxlDQogICAgICAgICAgICAgICAgcmV0dXJuIFJ1bGVzZXQucHJvdG90eXBlLmZpbmQuYXBwbHkodGhpcy5ydWxlc1swXSwgYXJndW1lbnRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgcnVsZXNldHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVzKSB7DQogICAgICAgICAgICAgICAgLy8gYXNzdW1pbmcgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBydWxlIGF0IHRoaXMgcG9pbnQgLSB0aGF0IGlzIGhvdyBwYXJzZXIgY29uc3RydWN0cyB0aGUgcnVsZQ0KICAgICAgICAgICAgICAgIHJldHVybiBSdWxlc2V0LnByb3RvdHlwZS5ydWxlc2V0cy5hcHBseSh0aGlzLnJ1bGVzWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgb3V0cHV0UnVsZXNldDogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCwgcnVsZXMpIHsNCiAgICAgICAgICAgIHZhciBydWxlQ250ID0gcnVsZXMubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICBjb250ZXh0LnRhYkxldmVsID0gKGNvbnRleHQudGFiTGV2ZWwgfCAwKSArIDE7DQogICAgICAgICAgICAvLyBDb21wcmVzc2VkDQogICAgICAgICAgICBpZiAoY29udGV4dC5jb21wcmVzcykgew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoJ3snKTsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcnVsZUNudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVzW2ldLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCd9Jyk7DQogICAgICAgICAgICAgICAgY29udGV4dC50YWJMZXZlbC0tOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIE5vbi1jb21wcmVzc2VkDQogICAgICAgICAgICB2YXIgdGFiU2V0U3RyID0gIlxuIiArIEFycmF5KGNvbnRleHQudGFiTGV2ZWwpLmpvaW4oJyAgJyksIHRhYlJ1bGVTdHIgPSB0YWJTZXRTdHIgKyAiICAiOw0KICAgICAgICAgICAgaWYgKCFydWxlQ250KSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgiIHsiICsgdGFiU2V0U3RyICsgIn0iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoIiB7IiArIHRhYlJ1bGVTdHIpOw0KICAgICAgICAgICAgICAgIHJ1bGVzWzBdLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBydWxlQ250OyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0YWJSdWxlU3RyKTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNbaV0uZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQodGFiU2V0U3RyICsgIn0iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnRleHQudGFiTGV2ZWwtLTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBEZXRhY2hlZFJ1bGVzZXQgPSBmdW5jdGlvbiAocnVsZXNldCwgZnJhbWVzKSB7DQogICAgICAgIHRoaXMucnVsZXNldCA9IHJ1bGVzZXQ7DQogICAgICAgIHRoaXMuZnJhbWVzID0gZnJhbWVzOw0KICAgICAgICB0aGlzLnNldFBhcmVudCh0aGlzLnJ1bGVzZXQsIHRoaXMpOw0KICAgIH07DQogICAgRGV0YWNoZWRSdWxlc2V0LnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnRGV0YWNoZWRSdWxlc2V0JywNCiAgICAgICAgZXZhbEZpcnN0OiB0cnVlLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICB0aGlzLnJ1bGVzZXQgPSB2aXNpdG9yLnZpc2l0KHRoaXMucnVsZXNldCk7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgZnJhbWVzID0gdGhpcy5mcmFtZXMgfHwgY29weUFycmF5KGNvbnRleHQuZnJhbWVzKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGV0YWNoZWRSdWxlc2V0KHRoaXMucnVsZXNldCwgZnJhbWVzKTsNCiAgICAgICAgfSwNCiAgICAgICAgY2FsbEV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5ydWxlc2V0LmV2YWwodGhpcy5mcmFtZXMgPyBuZXcgY29udGV4dHMuRXZhbChjb250ZXh0LCB0aGlzLmZyYW1lcy5jb25jYXQoY29udGV4dC5mcmFtZXMpKSA6IGNvbnRleHQpOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIFVuaXQgPSBmdW5jdGlvbiAobnVtZXJhdG9yLCBkZW5vbWluYXRvciwgYmFja3VwVW5pdCkgew0KICAgICAgICB0aGlzLm51bWVyYXRvciA9IG51bWVyYXRvciA/IGNvcHlBcnJheShudW1lcmF0b3IpLnNvcnQoKSA6IFtdOw0KICAgICAgICB0aGlzLmRlbm9taW5hdG9yID0gZGVub21pbmF0b3IgPyBjb3B5QXJyYXkoZGVub21pbmF0b3IpLnNvcnQoKSA6IFtdOw0KICAgICAgICBpZiAoYmFja3VwVW5pdCkgew0KICAgICAgICAgICAgdGhpcy5iYWNrdXBVbml0ID0gYmFja3VwVW5pdDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChudW1lcmF0b3IgJiYgbnVtZXJhdG9yLmxlbmd0aCkgew0KICAgICAgICAgICAgdGhpcy5iYWNrdXBVbml0ID0gbnVtZXJhdG9yWzBdOw0KICAgICAgICB9DQogICAgfTsNCiAgICBVbml0LnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnVW5pdCcsDQogICAgICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFVuaXQoY29weUFycmF5KHRoaXMubnVtZXJhdG9yKSwgY29weUFycmF5KHRoaXMuZGVub21pbmF0b3IpLCB0aGlzLmJhY2t1cFVuaXQpOw0KICAgICAgICB9LA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIC8vIERpbWVuc2lvbiBjaGVja3MgdGhlIHVuaXQgaXMgc2luZ3VsYXIgYW5kIHRocm93cyBhbiBlcnJvciBpZiBpbiBzdHJpY3QgbWF0aCBtb2RlLg0KICAgICAgICAgICAgdmFyIHN0cmljdFVuaXRzID0gY29udGV4dCAmJiBjb250ZXh0LnN0cmljdFVuaXRzOw0KICAgICAgICAgICAgaWYgKHRoaXMubnVtZXJhdG9yLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQodGhpcy5udW1lcmF0b3JbMF0pOyAvLyB0aGUgaWRlYWwgc2l0dWF0aW9uDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICghc3RyaWN0VW5pdHMgJiYgdGhpcy5iYWNrdXBVbml0KSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLmJhY2t1cFVuaXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoIXN0cmljdFVuaXRzICYmIHRoaXMuZGVub21pbmF0b3IubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLmRlbm9taW5hdG9yWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBpLCByZXR1cm5TdHIgPSB0aGlzLm51bWVyYXRvci5qb2luKCcqJyk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5kZW5vbWluYXRvci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHJldHVyblN0ciArPSAiLyIgKyB0aGlzLmRlbm9taW5hdG9yW2ldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJldHVyblN0cjsNCiAgICAgICAgfSwNCiAgICAgICAgY29tcGFyZTogZnVuY3Rpb24gKG90aGVyKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5pcyhvdGhlci50b1N0cmluZygpKSA/IDAgOiB1bmRlZmluZWQ7DQogICAgICAgIH0sDQogICAgICAgIGlzOiBmdW5jdGlvbiAodW5pdFN0cmluZykgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSB1bml0U3RyaW5nLnRvVXBwZXJDYXNlKCk7DQogICAgICAgIH0sDQogICAgICAgIGlzTGVuZ3RoOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gUmVnRXhwKCdeKHB4fGVtfGV4fGNofHJlbXxpbnxjbXxtbXxwY3xwdHxleHx2d3x2aHx2bWlufHZtYXgpJCcsICdnaScpLnRlc3QodGhpcy50b0NTUygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNFbXB0eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtZXJhdG9yLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmRlbm9taW5hdG9yLmxlbmd0aCA9PT0gMDsNCiAgICAgICAgfSwNCiAgICAgICAgaXNTaW5ndWxhcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtZXJhdG9yLmxlbmd0aCA8PSAxICYmIHRoaXMuZGVub21pbmF0b3IubGVuZ3RoID09PSAwOw0KICAgICAgICB9LA0KICAgICAgICBtYXA6IGZ1bmN0aW9uIChjYWxsYmFjaykgew0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5udW1lcmF0b3IubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB0aGlzLm51bWVyYXRvcltpXSA9IGNhbGxiYWNrKHRoaXMubnVtZXJhdG9yW2ldLCBmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5kZW5vbWluYXRvci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVub21pbmF0b3JbaV0gPSBjYWxsYmFjayh0aGlzLmRlbm9taW5hdG9yW2ldLCB0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdXNlZFVuaXRzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgZ3JvdXA7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307DQogICAgICAgICAgICB2YXIgbWFwVW5pdDsNCiAgICAgICAgICAgIHZhciBncm91cE5hbWU7DQogICAgICAgICAgICBtYXBVbml0ID0gZnVuY3Rpb24gKGF0b21pY1VuaXQpIHsNCiAgICAgICAgICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqLw0KICAgICAgICAgICAgICAgIGlmIChncm91cC5oYXNPd25Qcm9wZXJ0eShhdG9taWNVbml0KSAmJiAhcmVzdWx0W2dyb3VwTmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2dyb3VwTmFtZV0gPSBhdG9taWNVbml0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gYXRvbWljVW5pdDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBmb3IgKGdyb3VwTmFtZSBpbiB1bml0Q29udmVyc2lvbnMpIHsNCiAgICAgICAgICAgICAgICBpZiAodW5pdENvbnZlcnNpb25zLmhhc093blByb3BlcnR5KGdyb3VwTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgZ3JvdXAgPSB1bml0Q29udmVyc2lvbnNbZ3JvdXBOYW1lXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAobWFwVW5pdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgY291bnRlciA9IHt9Ow0KICAgICAgICAgICAgdmFyIGF0b21pY1VuaXQ7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLm51bWVyYXRvci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGF0b21pY1VuaXQgPSB0aGlzLm51bWVyYXRvcltpXTsNCiAgICAgICAgICAgICAgICBjb3VudGVyW2F0b21pY1VuaXRdID0gKGNvdW50ZXJbYXRvbWljVW5pdF0gfHwgMCkgKyAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZGVub21pbmF0b3IubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBhdG9taWNVbml0ID0gdGhpcy5kZW5vbWluYXRvcltpXTsNCiAgICAgICAgICAgICAgICBjb3VudGVyW2F0b21pY1VuaXRdID0gKGNvdW50ZXJbYXRvbWljVW5pdF0gfHwgMCkgLSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5udW1lcmF0b3IgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuZGVub21pbmF0b3IgPSBbXTsNCiAgICAgICAgICAgIGZvciAoYXRvbWljVW5pdCBpbiBjb3VudGVyKSB7DQogICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIuaGFzT3duUHJvcGVydHkoYXRvbWljVW5pdCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gY291bnRlclthdG9taWNVbml0XTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm51bWVyYXRvci5wdXNoKGF0b21pY1VuaXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvdW50IDwgMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IC1jb3VudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZW5vbWluYXRvci5wdXNoKGF0b21pY1VuaXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5udW1lcmF0b3Iuc29ydCgpOw0KICAgICAgICAgICAgdGhpcy5kZW5vbWluYXRvci5zb3J0KCk7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICAvLw0KICAgIC8vIEEgbnVtYmVyIHdpdGggYSB1bml0DQogICAgLy8NCiAgICB2YXIgRGltZW5zaW9uID0gZnVuY3Rpb24gKHZhbHVlLCB1bml0KSB7DQogICAgICAgIHRoaXMudmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTsNCiAgICAgICAgaWYgKGlzTmFOKHRoaXMudmFsdWUpKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpbWVuc2lvbiBpcyBub3QgYSBudW1iZXIuJyk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy51bml0ID0gKHVuaXQgJiYgdW5pdCBpbnN0YW5jZW9mIFVuaXQpID8gdW5pdCA6DQogICAgICAgICAgICBuZXcgVW5pdCh1bml0ID8gW3VuaXRdIDogdW5kZWZpbmVkKTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy51bml0LCB0aGlzKTsNCiAgICB9Ow0KICAgIERpbWVuc2lvbi5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ0RpbWVuc2lvbicsDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gKHZpc2l0b3IpIHsNCiAgICAgICAgICAgIHRoaXMudW5pdCA9IHZpc2l0b3IudmlzaXQodGhpcy51bml0KTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzOw0KICAgICAgICB9LA0KICAgICAgICB0b0NvbG9yOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKFt0aGlzLnZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLnZhbHVlXSk7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgaWYgKChjb250ZXh0ICYmIGNvbnRleHQuc3RyaWN0VW5pdHMpICYmICF0aGlzLnVuaXQuaXNTaW5ndWxhcigpKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNdWx0aXBsZSB1bml0cyBpbiBkaW1lbnNpb24uIENvcnJlY3QgdGhlIHVuaXRzIG9yIHVzZSB0aGUgdW5pdCBmdW5jdGlvbi4gQmFkIHVuaXQ6ICIgKyB0aGlzLnVuaXQudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmZyb3VuZChjb250ZXh0LCB0aGlzLnZhbHVlKTsNCiAgICAgICAgICAgIHZhciBzdHJWYWx1ZSA9IFN0cmluZyh2YWx1ZSk7DQogICAgICAgICAgICBpZiAodmFsdWUgIT09IDAgJiYgdmFsdWUgPCAwLjAwMDAwMSAmJiB2YWx1ZSA+IC0wLjAwMDAwMSkgew0KICAgICAgICAgICAgICAgIC8vIHdvdWxkIGJlIG91dHB1dCAxZS02IGV0Yy4NCiAgICAgICAgICAgICAgICBzdHJWYWx1ZSA9IHZhbHVlLnRvRml4ZWQoMjApLnJlcGxhY2UoLzArJC8sICcnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuY29tcHJlc3MpIHsNCiAgICAgICAgICAgICAgICAvLyBaZXJvIHZhbHVlcyBkb2Vzbid0IG5lZWQgYSB1bml0DQogICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAwICYmIHRoaXMudW5pdC5pc0xlbmd0aCgpKSB7DQogICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoc3RyVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIEZsb2F0IHZhbHVlcyBkb2Vzbid0IG5lZWQgYSBsZWFkaW5nIHplcm8NCiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiAwICYmIHZhbHVlIDwgMSkgew0KICAgICAgICAgICAgICAgICAgICBzdHJWYWx1ZSA9IChzdHJWYWx1ZSkuc3Vic3RyKDEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG91dHB1dC5hZGQoc3RyVmFsdWUpOw0KICAgICAgICAgICAgdGhpcy51bml0LmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICB9LA0KICAgICAgICAvLyBJbiBhbiBvcGVyYXRpb24gYmV0d2VlbiB0d28gRGltZW5zaW9ucywNCiAgICAgICAgLy8gd2UgZGVmYXVsdCB0byB0aGUgZmlyc3QgRGltZW5zaW9uJ3MgdW5pdCwNCiAgICAgICAgLy8gc28gYDFweCArIDJgIHdpbGwgeWllbGQgYDNweGAuDQogICAgICAgIG9wZXJhdGU6IGZ1bmN0aW9uIChjb250ZXh0LCBvcCwgb3RoZXIpIHsNCiAgICAgICAgICAgIC8qIGpzaGludCBub2VtcHR5OmZhbHNlICovDQogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9vcGVyYXRlKGNvbnRleHQsIG9wLCB0aGlzLnZhbHVlLCBvdGhlci52YWx1ZSk7DQogICAgICAgICAgICB2YXIgdW5pdCA9IHRoaXMudW5pdC5jbG9uZSgpOw0KICAgICAgICAgICAgaWYgKG9wID09PSAnKycgfHwgb3AgPT09ICctJykgew0KICAgICAgICAgICAgICAgIGlmICh1bml0Lm51bWVyYXRvci5sZW5ndGggPT09IDAgJiYgdW5pdC5kZW5vbWluYXRvci5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdW5pdCA9IG90aGVyLnVuaXQuY2xvbmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5pdC5iYWNrdXBVbml0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICB1bml0LmJhY2t1cFVuaXQgPSB0aGlzLnVuaXQuYmFja3VwVW5pdDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChvdGhlci51bml0Lm51bWVyYXRvci5sZW5ndGggPT09IDAgJiYgdW5pdC5kZW5vbWluYXRvci5sZW5ndGggPT09IDApIDsNCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgb3RoZXIgPSBvdGhlci5jb252ZXJ0VG8odGhpcy51bml0LnVzZWRVbml0cygpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuc3RyaWN0VW5pdHMgJiYgb3RoZXIudW5pdC50b1N0cmluZygpICE9PSB1bml0LnRvU3RyaW5nKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW5jb21wYXRpYmxlIHVuaXRzLiBDaGFuZ2UgdGhlIHVuaXRzIG9yIHVzZSB0aGUgdW5pdCBmdW5jdGlvbi4gIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKCJCYWQgdW5pdHM6ICciICsgdW5pdC50b1N0cmluZygpICsgIicgYW5kICciICsgb3RoZXIudW5pdC50b1N0cmluZygpICsgIicuIikpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fb3BlcmF0ZShjb250ZXh0LCBvcCwgdGhpcy52YWx1ZSwgb3RoZXIudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG9wID09PSAnKicpIHsNCiAgICAgICAgICAgICAgICB1bml0Lm51bWVyYXRvciA9IHVuaXQubnVtZXJhdG9yLmNvbmNhdChvdGhlci51bml0Lm51bWVyYXRvcikuc29ydCgpOw0KICAgICAgICAgICAgICAgIHVuaXQuZGVub21pbmF0b3IgPSB1bml0LmRlbm9taW5hdG9yLmNvbmNhdChvdGhlci51bml0LmRlbm9taW5hdG9yKS5zb3J0KCk7DQogICAgICAgICAgICAgICAgdW5pdC5jYW5jZWwoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG9wID09PSAnLycpIHsNCiAgICAgICAgICAgICAgICB1bml0Lm51bWVyYXRvciA9IHVuaXQubnVtZXJhdG9yLmNvbmNhdChvdGhlci51bml0LmRlbm9taW5hdG9yKS5zb3J0KCk7DQogICAgICAgICAgICAgICAgdW5pdC5kZW5vbWluYXRvciA9IHVuaXQuZGVub21pbmF0b3IuY29uY2F0KG90aGVyLnVuaXQubnVtZXJhdG9yKS5zb3J0KCk7DQogICAgICAgICAgICAgICAgdW5pdC5jYW5jZWwoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHZhbHVlLCB1bml0KTsNCiAgICAgICAgfSwNCiAgICAgICAgY29tcGFyZTogZnVuY3Rpb24gKG90aGVyKSB7DQogICAgICAgICAgICB2YXIgYSwgYjsNCiAgICAgICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRGltZW5zaW9uKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy51bml0LmlzRW1wdHkoKSB8fCBvdGhlci51bml0LmlzRW1wdHkoKSkgew0KICAgICAgICAgICAgICAgIGEgPSB0aGlzOw0KICAgICAgICAgICAgICAgIGIgPSBvdGhlcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGEgPSB0aGlzLnVuaWZ5KCk7DQogICAgICAgICAgICAgICAgYiA9IG90aGVyLnVuaWZ5KCk7DQogICAgICAgICAgICAgICAgaWYgKGEudW5pdC5jb21wYXJlKGIudW5pdCkgIT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gTm9kZS5udW1lcmljQ29tcGFyZShhLnZhbHVlLCBiLnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgdW5pZnk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUbyh7IGxlbmd0aDogJ3B4JywgZHVyYXRpb246ICdzJywgYW5nbGU6ICdyYWQnIH0pOw0KICAgICAgICB9LA0KICAgICAgICBjb252ZXJ0VG86IGZ1bmN0aW9uIChjb252ZXJzaW9ucykgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTsNCiAgICAgICAgICAgIHZhciB1bml0ID0gdGhpcy51bml0LmNsb25lKCk7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBncm91cE5hbWU7DQogICAgICAgICAgICB2YXIgZ3JvdXA7DQogICAgICAgICAgICB2YXIgdGFyZ2V0VW5pdDsNCiAgICAgICAgICAgIHZhciBkZXJpdmVkQ29udmVyc2lvbnMgPSB7fTsNCiAgICAgICAgICAgIHZhciBhcHBseVVuaXQ7DQogICAgICAgICAgICBpZiAodHlwZW9mIGNvbnZlcnNpb25zID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIGZvciAoaSBpbiB1bml0Q29udmVyc2lvbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHVuaXRDb252ZXJzaW9uc1tpXS5oYXNPd25Qcm9wZXJ0eShjb252ZXJzaW9ucykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb252ZXJzaW9ucyA9IHt9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbnZlcnNpb25zW2ldID0gY29udmVyc2lvbnM7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29udmVyc2lvbnMgPSBkZXJpdmVkQ29udmVyc2lvbnM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBhcHBseVVuaXQgPSBmdW5jdGlvbiAoYXRvbWljVW5pdCwgZGVub21pbmF0b3IpIHsNCiAgICAgICAgICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqLw0KICAgICAgICAgICAgICAgIGlmIChncm91cC5oYXNPd25Qcm9wZXJ0eShhdG9taWNVbml0KSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZGVub21pbmF0b3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLyAoZ3JvdXBbYXRvbWljVW5pdF0gLyBncm91cFt0YXJnZXRVbml0XSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICogKGdyb3VwW2F0b21pY1VuaXRdIC8gZ3JvdXBbdGFyZ2V0VW5pdF0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRVbml0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gYXRvbWljVW5pdDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBmb3IgKGdyb3VwTmFtZSBpbiBjb252ZXJzaW9ucykgew0KICAgICAgICAgICAgICAgIGlmIChjb252ZXJzaW9ucy5oYXNPd25Qcm9wZXJ0eShncm91cE5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHRhcmdldFVuaXQgPSBjb252ZXJzaW9uc1tncm91cE5hbWVdOw0KICAgICAgICAgICAgICAgICAgICBncm91cCA9IHVuaXRDb252ZXJzaW9uc1tncm91cE5hbWVdOw0KICAgICAgICAgICAgICAgICAgICB1bml0Lm1hcChhcHBseVVuaXQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHVuaXQuY2FuY2VsKCk7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih2YWx1ZSwgdW5pdCk7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgTUFUSCA9IE1hdGgkMTsNCiAgICB2YXIgT3BlcmF0aW9uID0gZnVuY3Rpb24gKG9wLCBvcGVyYW5kcywgaXNTcGFjZWQpIHsNCiAgICAgICAgdGhpcy5vcCA9IG9wLnRyaW0oKTsNCiAgICAgICAgdGhpcy5vcGVyYW5kcyA9IG9wZXJhbmRzOw0KICAgICAgICB0aGlzLmlzU3BhY2VkID0gaXNTcGFjZWQ7DQogICAgfTsNCiAgICBPcGVyYXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdPcGVyYXRpb24nLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICB0aGlzLm9wZXJhbmRzID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMub3BlcmFuZHMpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIGEgPSB0aGlzLm9wZXJhbmRzWzBdLmV2YWwoY29udGV4dCksIGIgPSB0aGlzLm9wZXJhbmRzWzFdLmV2YWwoY29udGV4dCksIG9wOw0KICAgICAgICAgICAgaWYgKGNvbnRleHQuaXNNYXRoT24odGhpcy5vcCkpIHsNCiAgICAgICAgICAgICAgICBvcCA9IHRoaXMub3AgPT09ICcuLycgPyAnLycgOiB0aGlzLm9wOw0KICAgICAgICAgICAgICAgIGlmIChhIGluc3RhbmNlb2YgRGltZW5zaW9uICYmIGIgaW5zdGFuY2VvZiBDb2xvcikgew0KICAgICAgICAgICAgICAgICAgICBhID0gYS50b0NvbG9yKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChiIGluc3RhbmNlb2YgRGltZW5zaW9uICYmIGEgaW5zdGFuY2VvZiBDb2xvcikgew0KICAgICAgICAgICAgICAgICAgICBiID0gYi50b0NvbG9yKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghYS5vcGVyYXRlIHx8ICFiLm9wZXJhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKChhIGluc3RhbmNlb2YgT3BlcmF0aW9uIHx8IGIgaW5zdGFuY2VvZiBPcGVyYXRpb24pDQogICAgICAgICAgICAgICAgICAgICAgICAmJiBhLm9wID09PSAnLycgJiYgY29udGV4dC5tYXRoID09PSBNQVRILlBBUkVOU19ESVZJU0lPTikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPcGVyYXRpb24odGhpcy5vcCwgW2EsIGJdLCB0aGlzLmlzU3BhY2VkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdPcGVyYXRpb24nLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ09wZXJhdGlvbiBvbiBhbiBpbnZhbGlkIHR5cGUnIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBhLm9wZXJhdGUoY29udGV4dCwgb3AsIGIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPcGVyYXRpb24odGhpcy5vcCwgW2EsIGJdLCB0aGlzLmlzU3BhY2VkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICB0aGlzLm9wZXJhbmRzWzBdLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgaWYgKHRoaXMuaXNTcGFjZWQpIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcgJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMub3ApOw0KICAgICAgICAgICAgaWYgKHRoaXMuaXNTcGFjZWQpIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcgJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm9wZXJhbmRzWzFdLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICB9DQogICAgfSk7CgogICAgLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uDQoNCiAgICBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkNCiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuDQoNCiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSA0KICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQ0KICAgIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCwNCiAgICBJTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST00NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUg0KICAgIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1INCiAgICBQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLg0KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovDQoNCiAgICBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7DQogICAgICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7DQogICAgICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTsNCiAgICAgICAgICAgICAgICBhcltpXSA9IGZyb21baV07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBmcm9tKTsNCiAgICB9CgogICAgdmFyIEV4cHJlc3Npb24gPSBmdW5jdGlvbiAodmFsdWUsIG5vU3BhY2luZykgew0KICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7DQogICAgICAgIHRoaXMubm9TcGFjaW5nID0gbm9TcGFjaW5nOw0KICAgICAgICBpZiAoIXZhbHVlKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cHJlc3Npb24gcmVxdWlyZXMgYW4gYXJyYXkgcGFyYW1ldGVyJyk7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIEV4cHJlc3Npb24ucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdFeHByZXNzaW9uJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZpc2l0b3IudmlzaXRBcnJheSh0aGlzLnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZTsNCiAgICAgICAgICAgIHZhciBtYXRoT24gPSBjb250ZXh0LmlzTWF0aE9uKCk7DQogICAgICAgICAgICB2YXIgaW5QYXJlbnRoZXNpcyA9IHRoaXMucGFyZW5zOw0KICAgICAgICAgICAgdmFyIGRvdWJsZVBhcmVuID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaW5QYXJlbnRoZXNpcykgew0KICAgICAgICAgICAgICAgIGNvbnRleHQuaW5QYXJlbnRoZXNpcygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gbmV3IEV4cHJlc3Npb24odGhpcy52YWx1ZS5tYXAoZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmV2YWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgfSksIHRoaXMubm9TcGFjaW5nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVbMF0ucGFyZW5zICYmICF0aGlzLnZhbHVlWzBdLnBhcmVuc0luT3AgJiYgIWNvbnRleHQuaW5DYWxjKSB7DQogICAgICAgICAgICAgICAgICAgIGRvdWJsZVBhcmVuID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0aGlzLnZhbHVlWzBdLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRoaXM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaW5QYXJlbnRoZXNpcykgew0KICAgICAgICAgICAgICAgIGNvbnRleHQub3V0T2ZQYXJlbnRoZXNpcygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMucGFyZW5zICYmIHRoaXMucGFyZW5zSW5PcCAmJiAhbWF0aE9uICYmICFkb3VibGVQYXJlbg0KICAgICAgICAgICAgICAgICYmICghKHJldHVyblZhbHVlIGluc3RhbmNlb2YgRGltZW5zaW9uKSkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IG5ldyBQYXJlbihyZXR1cm5WYWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnZhbHVlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdGhpcy52YWx1ZVtpXS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubm9TcGFjaW5nICYmIGkgKyAxIDwgdGhpcy52YWx1ZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgnICcpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdGhyb3dBd2F5Q29tbWVudHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLmZpbHRlcihmdW5jdGlvbiAodikgew0KICAgICAgICAgICAgICAgIHJldHVybiAhKHYgaW5zdGFuY2VvZiBDb21tZW50KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIGZ1bmN0aW9uQ2FsbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBmdW5jdGlvbkNhbGxlcihuYW1lLCBjb250ZXh0LCBpbmRleCwgY3VycmVudEZpbGVJbmZvKSB7DQogICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0Ow0KICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgICAgICB0aGlzLmZ1bmMgPSBjb250ZXh0LmZyYW1lc1swXS5mdW5jdGlvblJlZ2lzdHJ5LmdldCh0aGlzLm5hbWUpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uQ2FsbGVyLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5mdW5jKTsNCiAgICAgICAgfTsNCiAgICAgICAgZnVuY3Rpb25DYWxsZXIucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoYXJncykgew0KICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgICAgICAgIGlmICghKEFycmF5LmlzQXJyYXkoYXJncykpKSB7DQogICAgICAgICAgICAgICAgYXJncyA9IFthcmdzXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBldmFsQXJncyA9IHRoaXMuZnVuYy5ldmFsQXJnczsNCiAgICAgICAgICAgIGlmIChldmFsQXJncyAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICBhcmdzID0gYXJncy5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEuZXZhbChfdGhpcy5jb250ZXh0KTsgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgY29tbWVudEZpbHRlciA9IGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAhKGl0ZW0udHlwZSA9PT0gJ0NvbW1lbnQnKTsgfTsNCiAgICAgICAgICAgIC8vIFRoaXMgY29kZSBpcyB0ZXJyaWJsZSBhbmQgc2hvdWxkIGJlIHJlcGxhY2VkIGFzIHBlciB0aGlzIGlzc3VlLi4uDQogICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGVzcy9sZXNzLmpzL2lzc3Vlcy8yNDc3DQogICAgICAgICAgICBhcmdzID0gYXJncw0KICAgICAgICAgICAgICAgIC5maWx0ZXIoY29tbWVudEZpbHRlcikNCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ0V4cHJlc3Npb24nKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBzdWJOb2RlcyA9IGl0ZW0udmFsdWUuZmlsdGVyKGNvbW1lbnRGaWx0ZXIpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc3ViTm9kZXMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGVzcy9sZXNzLmpzL2lzc3Vlcy8zNjE2DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5wYXJlbnMgJiYgc3ViTm9kZXNbMF0ub3AgPT09ICcvJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Yk5vZGVzWzBdOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKHN1Yk5vZGVzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYgKGV2YWxBcmdzID09PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bmMuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbdGhpcy5jb250ZXh0XSwgYXJncykpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnVuYy5hcHBseSh0aGlzLCBhcmdzKTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uQ2FsbGVyOw0KICAgIH0oKSk7CgogICAgLy8NCiAgICAvLyBBIGZ1bmN0aW9uIGNhbGwgbm9kZS4NCiAgICAvLw0KICAgIHZhciBDYWxsID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MsIGluZGV4LCBjdXJyZW50RmlsZUluZm8pIHsNCiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgICAgdGhpcy5hcmdzID0gYXJnczsNCiAgICAgICAgdGhpcy5jYWxjID0gbmFtZSA9PT0gJ2NhbGMnOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICB9Ow0KICAgIENhbGwucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdDYWxsJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgaWYgKHRoaXMuYXJncykgew0KICAgICAgICAgICAgICAgIHRoaXMuYXJncyA9IHZpc2l0b3IudmlzaXRBcnJheSh0aGlzLmFyZ3MpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLw0KICAgICAgICAvLyBXaGVuIGV2YWx1YXRpbmcgYSBmdW5jdGlvbiBjYWxsLA0KICAgICAgICAvLyB3ZSBlaXRoZXIgZmluZCB0aGUgZnVuY3Rpb24gaW4gdGhlIGZ1bmN0aW9uUmVnaXN0cnksDQogICAgICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgY2FsbCBpdCwgcGFzc2luZyB0aGUgIGV2YWx1YXRlZCBhcmd1bWVudHMsDQogICAgICAgIC8vIGlmIHRoaXMgcmV0dXJucyBudWxsIG9yIHdlIGNhbm5vdCBmaW5kIHRoZSBmdW5jdGlvbiwgd2UNCiAgICAgICAgLy8gc2ltcGx5IHByaW50IGl0IG91dCBhcyBpdCBhcHBlYXJlZCBvcmlnaW5hbGx5IFsyXS4NCiAgICAgICAgLy8NCiAgICAgICAgLy8gVGhlIHJlYXNvbiB3aHkgd2UgZXZhbHVhdGUgdGhlIGFyZ3VtZW50cywgaXMgaW4gdGhlIGNhc2Ugd2hlcmUNCiAgICAgICAgLy8gd2UgdHJ5IHRvIHBhc3MgYSB2YXJpYWJsZSB0byBhIGZ1bmN0aW9uLCBsaWtlOiBgc2F0dXJhdGUoQGNvbG9yKWAuDQogICAgICAgIC8vIFRoZSBmdW5jdGlvbiBzaG91bGQgcmVjZWl2ZSB0aGUgdmFsdWUsIG5vdCB0aGUgdmFyaWFibGUuDQogICAgICAgIC8vDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBUdXJuIG9mZiBtYXRoIGZvciBjYWxjKCksIGFuZCBzd2l0Y2ggYmFjayBvbiBmb3IgZXZhbHVhdGluZyBuZXN0ZWQgZnVuY3Rpb25zDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIHZhciBjdXJyZW50TWF0aENvbnRleHQgPSBjb250ZXh0Lm1hdGhPbjsNCiAgICAgICAgICAgIGNvbnRleHQubWF0aE9uID0gIXRoaXMuY2FsYzsNCiAgICAgICAgICAgIGlmICh0aGlzLmNhbGMgfHwgY29udGV4dC5pbkNhbGMpIHsNCiAgICAgICAgICAgICAgICBjb250ZXh0LmVudGVyQ2FsYygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGV4aXRDYWxjID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jYWxjIHx8IGNvbnRleHQuaW5DYWxjKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZXhpdENhbGMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29udGV4dC5tYXRoT24gPSBjdXJyZW50TWF0aENvbnRleHQ7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdmFyIHJlc3VsdDsNCiAgICAgICAgICAgIHZhciBmdW5jQ2FsbGVyID0gbmV3IGZ1bmN0aW9uQ2FsbGVyKHRoaXMubmFtZSwgY29udGV4dCwgdGhpcy5nZXRJbmRleCgpLCB0aGlzLmZpbGVJbmZvKCkpOw0KICAgICAgICAgICAgaWYgKGZ1bmNDYWxsZXIuaXNWYWxpZCgpKSB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuY0NhbGxlci5jYWxsKHRoaXMuYXJncyk7DQogICAgICAgICAgICAgICAgICAgIGV4aXRDYWxjKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlLmhhc093blByb3BlcnR5KCdsaW5lJykgJiYgZS5oYXNPd25Qcm9wZXJ0eSgnY29sdW1uJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZS50eXBlIHx8ICdSdW50aW1lJywNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJFcnJvciBldmFsdWF0aW5nIGZ1bmN0aW9uIGAiICsgdGhpcy5uYW1lICsgImAiICsgKGUubWVzc2FnZSA/ICI6ICIgKyBlLm1lc3NhZ2UgOiAnJyksDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZUluZm8oKS5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGUubGluZU51bWJlciwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZS5jb2x1bW5OdW1iZXINCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsICYmIHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgLy8gUmVzdWx0cyB0aGF0IHRoYXQgYXJlIG5vdCBub2RlcyBhcmUgY2FzdCBhcyBBbm9ueW1vdXMgbm9kZXMNCiAgICAgICAgICAgICAgICAvLyBGYWxzeSB2YWx1ZXMgb3IgYm9vbGVhbnMgYXJlIHJldHVybmVkIGFzIGVtcHR5IG5vZGVzDQogICAgICAgICAgICAgICAgaWYgKCEocmVzdWx0IGluc3RhbmNlb2YgTm9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgfHwgcmVzdWx0ID09PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgQW5vbnltb3VzKG51bGwpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEFub255bW91cyhyZXN1bHQudG9TdHJpbmcoKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVzdWx0Ll9pbmRleCA9IHRoaXMuX2luZGV4Ow0KICAgICAgICAgICAgICAgIHJlc3VsdC5fZmlsZUluZm8gPSB0aGlzLl9maWxlSW5mbzsNCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmFyZ3MubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLmV2YWwoY29udGV4dCk7IH0pOw0KICAgICAgICAgICAgZXhpdENhbGMoKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbCh0aGlzLm5hbWUsIGFyZ3MsIHRoaXMuZ2V0SW5kZXgoKSwgdGhpcy5maWxlSW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMubmFtZSArICIoIiwgdGhpcy5maWxlSW5mbygpLCB0aGlzLmdldEluZGV4KCkpOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFyZ3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFyZ3NbaV0uZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgaWYgKGkgKyAxIDwgdGhpcy5hcmdzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcsICcpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG91dHB1dC5hZGQoJyknKTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBWYXJpYWJsZSA9IGZ1bmN0aW9uIChuYW1lLCBpbmRleCwgY3VycmVudEZpbGVJbmZvKSB7DQogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7DQogICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuX2ZpbGVJbmZvID0gY3VycmVudEZpbGVJbmZvOw0KICAgIH07DQogICAgVmFyaWFibGUucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdWYXJpYWJsZScsDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgdmFyaWFibGUsIG5hbWUgPSB0aGlzLm5hbWU7DQogICAgICAgICAgICBpZiAobmFtZS5pbmRleE9mKCdAQCcpID09PSAwKSB7DQogICAgICAgICAgICAgICAgbmFtZSA9ICJAIiArIG5ldyBWYXJpYWJsZShuYW1lLnNsaWNlKDEpLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSkuZXZhbChjb250ZXh0KS52YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLmV2YWx1YXRpbmcpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIlJlY3Vyc2l2ZSB2YXJpYWJsZSBkZWZpbml0aW9uIGZvciAiICsgbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZUluZm8oKS5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZ2V0SW5kZXgoKSB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5ldmFsdWF0aW5nID0gdHJ1ZTsNCiAgICAgICAgICAgIHZhcmlhYmxlID0gdGhpcy5maW5kKGNvbnRleHQuZnJhbWVzLCBmdW5jdGlvbiAoZnJhbWUpIHsNCiAgICAgICAgICAgICAgICB2YXIgdiA9IGZyYW1lLnZhcmlhYmxlKG5hbWUpOw0KICAgICAgICAgICAgICAgIGlmICh2KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh2LmltcG9ydGFudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltcG9ydGFudFNjb3BlID0gY29udGV4dC5pbXBvcnRhbnRTY29wZVtjb250ZXh0LmltcG9ydGFudFNjb3BlLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0YW50U2NvcGUuaW1wb3J0YW50ID0gdi5pbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaW4gY2FsYywgd3JhcCB2YXJzIGluIGEgZnVuY3Rpb24gY2FsbCB0byBjYXNjYWRlIGV2YWx1YXRlIGFyZ3MgZmlyc3QNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuaW5DYWxjKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBDYWxsKCdfU0VMRicsIFt2LnZhbHVlXSkpLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi52YWx1ZS5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAodmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmV2YWx1YXRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdmFyaWFibGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogInZhcmlhYmxlICIgKyBuYW1lICsgIiBpcyB1bmRlZmluZWQiLA0KICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpIH07DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGZpbmQ6IGZ1bmN0aW9uIChvYmosIGZ1bikgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHIgPSB2b2lkIDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICByID0gZnVuLmNhbGwob2JqLCBvYmpbaV0pOw0KICAgICAgICAgICAgICAgIGlmIChyKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIFByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUsIGluZGV4LCBjdXJyZW50RmlsZUluZm8pIHsNCiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgfTsNCiAgICBQcm9wZXJ0eS5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ1Byb3BlcnR5JywNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBwcm9wZXJ0eTsNCiAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lOw0KICAgICAgICAgICAgLy8gVE9ETzogc2hvcnRlbiB0aGlzIHJlZmVyZW5jZQ0KICAgICAgICAgICAgdmFyIG1lcmdlUnVsZXMgPSBjb250ZXh0LnBsdWdpbk1hbmFnZXIubGVzcy52aXNpdG9ycy5Ub0NTU1Zpc2l0b3IucHJvdG90eXBlLl9tZXJnZVJ1bGVzOw0KICAgICAgICAgICAgaWYgKHRoaXMuZXZhbHVhdGluZykgew0KICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ05hbWUnLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiUmVjdXJzaXZlIHByb3BlcnR5IHJlZmVyZW5jZSBmb3IgIiArIG5hbWUsDQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB0aGlzLmZpbGVJbmZvKCkuZmlsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmdldEluZGV4KCkgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZXZhbHVhdGluZyA9IHRydWU7DQogICAgICAgICAgICBwcm9wZXJ0eSA9IHRoaXMuZmluZChjb250ZXh0LmZyYW1lcywgZnVuY3Rpb24gKGZyYW1lKSB7DQogICAgICAgICAgICAgICAgdmFyIHY7DQogICAgICAgICAgICAgICAgdmFyIHZBcnIgPSBmcmFtZS5wcm9wZXJ0eShuYW1lKTsNCiAgICAgICAgICAgICAgICBpZiAodkFycikgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZBcnIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB2QXJyW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgdkFycltpXSA9IG5ldyBEZWNsYXJhdGlvbih2Lm5hbWUsIHYudmFsdWUsIHYuaW1wb3J0YW50LCB2Lm1lcmdlLCB2LmluZGV4LCB2LmN1cnJlbnRGaWxlSW5mbywgdi5pbmxpbmUsIHYudmFyaWFibGUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIG1lcmdlUnVsZXModkFycik7DQogICAgICAgICAgICAgICAgICAgIHYgPSB2QXJyW3ZBcnIubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgICAgIGlmICh2LmltcG9ydGFudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltcG9ydGFudFNjb3BlID0gY29udGV4dC5pbXBvcnRhbnRTY29wZVtjb250ZXh0LmltcG9ydGFudFNjb3BlLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0YW50U2NvcGUuaW1wb3J0YW50ID0gdi5pbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdiA9IHYudmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAocHJvcGVydHkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmV2YWx1YXRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcGVydHk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIlByb3BlcnR5ICciICsgbmFtZSArICInIGlzIHVuZGVmaW5lZCIsDQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXggfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZmluZDogZnVuY3Rpb24gKG9iaiwgZnVuKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgciA9IHZvaWQgMDsgaSA8IG9iai5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHIgPSBmdW4uY2FsbChvYmosIG9ialtpXSk7DQogICAgICAgICAgICAgICAgaWYgKHIpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgQXR0cmlidXRlID0gZnVuY3Rpb24gKGtleSwgb3AsIHZhbHVlKSB7DQogICAgICAgIHRoaXMua2V5ID0ga2V5Ow0KICAgICAgICB0aGlzLm9wID0gb3A7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICB9Ow0KICAgIEF0dHJpYnV0ZS5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ0F0dHJpYnV0ZScsDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZSh0aGlzLmtleS5ldmFsID8gdGhpcy5rZXkuZXZhbChjb250ZXh0KSA6IHRoaXMua2V5LCB0aGlzLm9wLCAodGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLmV2YWwpID8gdGhpcy52YWx1ZS5ldmFsKGNvbnRleHQpIDogdGhpcy52YWx1ZSk7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnRvQ1NTKGNvbnRleHQpKTsNCiAgICAgICAgfSwNCiAgICAgICAgdG9DU1M6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmtleS50b0NTUyA/IHRoaXMua2V5LnRvQ1NTKGNvbnRleHQpIDogdGhpcy5rZXk7DQogICAgICAgICAgICBpZiAodGhpcy5vcCkgew0KICAgICAgICAgICAgICAgIHZhbHVlICs9IHRoaXMub3A7DQogICAgICAgICAgICAgICAgdmFsdWUgKz0gKHRoaXMudmFsdWUudG9DU1MgPyB0aGlzLnZhbHVlLnRvQ1NTKGNvbnRleHQpIDogdGhpcy52YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gIlsiICsgdmFsdWUgKyAiXSI7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgUXVvdGVkID0gZnVuY3Rpb24gKHN0ciwgY29udGVudCwgZXNjYXBlZCwgaW5kZXgsIGN1cnJlbnRGaWxlSW5mbykgew0KICAgICAgICB0aGlzLmVzY2FwZWQgPSAoZXNjYXBlZCA9PSBudWxsKSA/IHRydWUgOiBlc2NhcGVkOw0KICAgICAgICB0aGlzLnZhbHVlID0gY29udGVudCB8fCAnJzsNCiAgICAgICAgdGhpcy5xdW90ZSA9IHN0ci5jaGFyQXQoMCk7DQogICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuX2ZpbGVJbmZvID0gY3VycmVudEZpbGVJbmZvOw0KICAgICAgICB0aGlzLnZhcmlhYmxlUmVnZXggPSAvQFx7KFtcdy1dKylcfS9nOw0KICAgICAgICB0aGlzLnByb3BSZWdleCA9IC9cJFx7KFtcdy1dKylcfS9nOw0KICAgICAgICB0aGlzLmFsbG93Um9vdCA9IGVzY2FwZWQ7DQogICAgfTsNCiAgICBRdW90ZWQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdRdW90ZWQnLA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy5lc2NhcGVkKSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnF1b3RlLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMuZ2V0SW5kZXgoKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMudmFsdWUpOw0KICAgICAgICAgICAgaWYgKCF0aGlzLmVzY2FwZWQpIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMucXVvdGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjb250YWluc1ZhcmlhYmxlczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUubWF0Y2godGhpcy52YXJpYWJsZVJlZ2V4KTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsNCiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7DQogICAgICAgICAgICB2YXIgdmFyaWFibGVSZXBsYWNlbWVudCA9IGZ1bmN0aW9uIChfLCBuYW1lKSB7DQogICAgICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmFyaWFibGUoIkAiICsgbmFtZSwgdGhhdC5nZXRJbmRleCgpLCB0aGF0LmZpbGVJbmZvKCkpLmV2YWwoY29udGV4dCwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuICh2IGluc3RhbmNlb2YgUXVvdGVkKSA/IHYudmFsdWUgOiB2LnRvQ1NTKCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdmFyIHByb3BlcnR5UmVwbGFjZW1lbnQgPSBmdW5jdGlvbiAoXywgbmFtZSkgew0KICAgICAgICAgICAgICAgIHZhciB2ID0gbmV3IFByb3BlcnR5KCIkIiArIG5hbWUsIHRoYXQuZ2V0SW5kZXgoKSwgdGhhdC5maWxlSW5mbygpKS5ldmFsKGNvbnRleHQsIHRydWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiAodiBpbnN0YW5jZW9mIFF1b3RlZCkgPyB2LnZhbHVlIDogdi50b0NTUygpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGZ1bmN0aW9uIGl0ZXJhdGl2ZVJlcGxhY2UodmFsdWUsIHJlZ2V4cCwgcmVwbGFjZW1lbnRGbmMpIHsNCiAgICAgICAgICAgICAgICB2YXIgZXZhbHVhdGVkVmFsdWUgPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZXZhbHVhdGVkVmFsdWUudG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGVkVmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4cCwgcmVwbGFjZW1lbnRGbmMpOw0KICAgICAgICAgICAgICAgIH0gd2hpbGUgKHZhbHVlICE9PSBldmFsdWF0ZWRWYWx1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGV2YWx1YXRlZFZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFsdWUgPSBpdGVyYXRpdmVSZXBsYWNlKHZhbHVlLCB0aGlzLnZhcmlhYmxlUmVnZXgsIHZhcmlhYmxlUmVwbGFjZW1lbnQpOw0KICAgICAgICAgICAgdmFsdWUgPSBpdGVyYXRpdmVSZXBsYWNlKHZhbHVlLCB0aGlzLnByb3BSZWdleCwgcHJvcGVydHlSZXBsYWNlbWVudCk7DQogICAgICAgICAgICByZXR1cm4gbmV3IFF1b3RlZCh0aGlzLnF1b3RlICsgdmFsdWUgKyB0aGlzLnF1b3RlLCB2YWx1ZSwgdGhpcy5lc2NhcGVkLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSk7DQogICAgICAgIH0sDQogICAgICAgIGNvbXBhcmU6IGZ1bmN0aW9uIChvdGhlcikgew0KICAgICAgICAgICAgLy8gd2hlbiBjb21wYXJpbmcgcXVvdGVkIHN0cmluZ3MgYWxsb3cgdGhlIHF1b3RlIHRvIGRpZmZlcg0KICAgICAgICAgICAgaWYgKG90aGVyLnR5cGUgPT09ICdRdW90ZWQnICYmICF0aGlzLmVzY2FwZWQgJiYgIW90aGVyLmVzY2FwZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gTm9kZS5udW1lcmljQ29tcGFyZSh0aGlzLnZhbHVlLCBvdGhlci52YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gb3RoZXIudG9DU1MgJiYgdGhpcy50b0NTUygpID09PSBvdGhlci50b0NTUygpID8gMCA6IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIGZ1bmN0aW9uIGVzY2FwZVBhdGgocGF0aCkgew0KICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9bXChcKSciXHNdL2csIGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gIlxcIiArIG1hdGNoOyB9KTsNCiAgICB9DQogICAgdmFyIFVSTCA9IGZ1bmN0aW9uICh2YWwsIGluZGV4LCBjdXJyZW50RmlsZUluZm8sIGlzRXZhbGQpIHsNCiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbDsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuaXNFdmFsZCA9IGlzRXZhbGQ7DQogICAgfTsNCiAgICBVUkwucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdVcmwnLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmlzaXRvci52aXNpdCh0aGlzLnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKCd1cmwoJyk7DQogICAgICAgICAgICB0aGlzLnZhbHVlLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgb3V0cHV0LmFkZCgnKScpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHZhbCA9IHRoaXMudmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIHZhciByb290cGF0aDsNCiAgICAgICAgICAgIGlmICghdGhpcy5pc0V2YWxkKSB7DQogICAgICAgICAgICAgICAgLy8gQWRkIHRoZSByb290cGF0aCBpZiB0aGUgVVJMIHJlcXVpcmVzIGEgcmV3cml0ZQ0KICAgICAgICAgICAgICAgIHJvb3RwYXRoID0gdGhpcy5maWxlSW5mbygpICYmIHRoaXMuZmlsZUluZm8oKS5yb290cGF0aDsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJvb3RwYXRoID09PSAnc3RyaW5nJyAmJg0KICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdmFsLnZhbHVlID09PSAnc3RyaW5nJyAmJg0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnBhdGhSZXF1aXJlc1Jld3JpdGUodmFsLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbC5xdW90ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcm9vdHBhdGggPSBlc2NhcGVQYXRoKHJvb3RwYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB2YWwudmFsdWUgPSBjb250ZXh0LnJld3JpdGVQYXRoKHZhbC52YWx1ZSwgcm9vdHBhdGgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdmFsLnZhbHVlID0gY29udGV4dC5ub3JtYWxpemVQYXRoKHZhbC52YWx1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIEFkZCB1cmwgYXJncyBpZiBlbmFibGVkDQogICAgICAgICAgICAgICAgaWYgKGNvbnRleHQudXJsQXJncykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbC52YWx1ZS5tYXRjaCgvXlxzKmRhdGE6LykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxpbWl0ZXIgPSB2YWwudmFsdWUuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmxBcmdzID0gZGVsaW1pdGVyICsgY29udGV4dC51cmxBcmdzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC52YWx1ZS5pbmRleE9mKCcjJykgIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsLnZhbHVlID0gdmFsLnZhbHVlLnJlcGxhY2UoJyMnLCB1cmxBcmdzICsgIiMiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbC52YWx1ZSArPSB1cmxBcmdzOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBVUkwodmFsLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdHJ1ZSk7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgTWVkaWEgPSBmdW5jdGlvbiAodmFsdWUsIGZlYXR1cmVzLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICAgICAgdmFyIHNlbGVjdG9ycyA9IChuZXcgU2VsZWN0b3IoW10sIG51bGwsIG51bGwsIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbykpLmNyZWF0ZUVtcHR5U2VsZWN0b3JzKCk7DQogICAgICAgIHRoaXMuZmVhdHVyZXMgPSBuZXcgVmFsdWUoZmVhdHVyZXMpOw0KICAgICAgICB0aGlzLnJ1bGVzID0gW25ldyBSdWxlc2V0KHNlbGVjdG9ycywgdmFsdWUpXTsNCiAgICAgICAgdGhpcy5ydWxlc1swXS5hbGxvd0ltcG9ydHMgPSB0cnVlOw0KICAgICAgICB0aGlzLmNvcHlWaXNpYmlsaXR5SW5mbyh2aXNpYmlsaXR5SW5mbyk7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQoc2VsZWN0b3JzLCB0aGlzKTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5mZWF0dXJlcywgdGhpcyk7DQogICAgICAgIHRoaXMuc2V0UGFyZW50KHRoaXMucnVsZXMsIHRoaXMpOw0KICAgIH07DQogICAgTWVkaWEucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgQXRSdWxlKCksIHsNCiAgICAgICAgdHlwZTogJ01lZGlhJywNCiAgICAgICAgaXNSdWxlc2V0TGlrZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0sDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gKHZpc2l0b3IpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IHZpc2l0b3IudmlzaXQodGhpcy5mZWF0dXJlcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5ydWxlcykgew0KICAgICAgICAgICAgICAgIHRoaXMucnVsZXMgPSB2aXNpdG9yLnZpc2l0QXJyYXkodGhpcy5ydWxlcyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCgnQG1lZGlhICcsIHRoaXMuX2ZpbGVJbmZvLCB0aGlzLl9pbmRleCk7DQogICAgICAgICAgICB0aGlzLmZlYXR1cmVzLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgdGhpcy5vdXRwdXRSdWxlc2V0KGNvbnRleHQsIG91dHB1dCwgdGhpcy5ydWxlcyk7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICBpZiAoIWNvbnRleHQubWVkaWFCbG9ja3MpIHsNCiAgICAgICAgICAgICAgICBjb250ZXh0Lm1lZGlhQmxvY2tzID0gW107DQogICAgICAgICAgICAgICAgY29udGV4dC5tZWRpYVBhdGggPSBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBtZWRpYSA9IG5ldyBNZWRpYShudWxsLCBbXSwgdGhpcy5faW5kZXgsIHRoaXMuX2ZpbGVJbmZvLCB0aGlzLnZpc2liaWxpdHlJbmZvKCkpOw0KICAgICAgICAgICAgaWYgKHRoaXMuZGVidWdJbmZvKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlc1swXS5kZWJ1Z0luZm8gPSB0aGlzLmRlYnVnSW5mbzsNCiAgICAgICAgICAgICAgICBtZWRpYS5kZWJ1Z0luZm8gPSB0aGlzLmRlYnVnSW5mbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1lZGlhLmZlYXR1cmVzID0gdGhpcy5mZWF0dXJlcy5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgY29udGV4dC5tZWRpYVBhdGgucHVzaChtZWRpYSk7DQogICAgICAgICAgICBjb250ZXh0Lm1lZGlhQmxvY2tzLnB1c2gobWVkaWEpOw0KICAgICAgICAgICAgdGhpcy5ydWxlc1swXS5mdW5jdGlvblJlZ2lzdHJ5ID0gY29udGV4dC5mcmFtZXNbMF0uZnVuY3Rpb25SZWdpc3RyeS5pbmhlcml0KCk7DQogICAgICAgICAgICBjb250ZXh0LmZyYW1lcy51bnNoaWZ0KHRoaXMucnVsZXNbMF0pOw0KICAgICAgICAgICAgbWVkaWEucnVsZXMgPSBbdGhpcy5ydWxlc1swXS5ldmFsKGNvbnRleHQpXTsNCiAgICAgICAgICAgIGNvbnRleHQuZnJhbWVzLnNoaWZ0KCk7DQogICAgICAgICAgICBjb250ZXh0Lm1lZGlhUGF0aC5wb3AoKTsNCiAgICAgICAgICAgIHJldHVybiBjb250ZXh0Lm1lZGlhUGF0aC5sZW5ndGggPT09IDAgPyBtZWRpYS5ldmFsVG9wKGNvbnRleHQpIDoNCiAgICAgICAgICAgICAgICBtZWRpYS5ldmFsTmVzdGVkKGNvbnRleHQpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsVG9wOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXM7DQogICAgICAgICAgICAvLyBSZW5kZXIgYWxsIGRlcGVuZGVudCBNZWRpYSBibG9ja3MuDQogICAgICAgICAgICBpZiAoY29udGV4dC5tZWRpYUJsb2Nrcy5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9ycyA9IChuZXcgU2VsZWN0b3IoW10sIG51bGwsIG51bGwsIHRoaXMuZ2V0SW5kZXgoKSwgdGhpcy5maWxlSW5mbygpKSkuY3JlYXRlRW1wdHlTZWxlY3RvcnMoKTsNCiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgUnVsZXNldChzZWxlY3RvcnMsIGNvbnRleHQubWVkaWFCbG9ja3MpOw0KICAgICAgICAgICAgICAgIHJlc3VsdC5tdWx0aU1lZGlhID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICByZXN1bHQuY29weVZpc2liaWxpdHlJbmZvKHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJlbnQocmVzdWx0LCB0aGlzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGRlbGV0ZSBjb250ZXh0Lm1lZGlhQmxvY2tzOw0KICAgICAgICAgICAgZGVsZXRlIGNvbnRleHQubWVkaWFQYXRoOw0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbE5lc3RlZDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgdmFyIHZhbHVlOw0KICAgICAgICAgICAgdmFyIHBhdGggPSBjb250ZXh0Lm1lZGlhUGF0aC5jb25jYXQoW3RoaXNdKTsNCiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIG1lZGlhLXF1ZXJ5IGNvbmRpdGlvbnMgc2VwYXJhdGVkIHdpdGggYCxgIChPUikuDQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHZhbHVlID0gcGF0aFtpXS5mZWF0dXJlcyBpbnN0YW5jZW9mIFZhbHVlID8NCiAgICAgICAgICAgICAgICAgICAgcGF0aFtpXS5mZWF0dXJlcy52YWx1ZSA6IHBhdGhbaV0uZmVhdHVyZXM7DQogICAgICAgICAgICAgICAgcGF0aFtpXSA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gVHJhY2UgYWxsIHBlcm11dGF0aW9ucyB0byBnZW5lcmF0ZSB0aGUgcmVzdWx0aW5nIG1lZGlhLXF1ZXJ5Lg0KICAgICAgICAgICAgLy8NCiAgICAgICAgICAgIC8vIChhLCBiIGFuZCBjKSB3aXRoIG5lc3RlZCAoZCwgZSkgLT4NCiAgICAgICAgICAgIC8vICAgIGEgYW5kIGQNCiAgICAgICAgICAgIC8vICAgIGEgYW5kIGUNCiAgICAgICAgICAgIC8vICAgIGIgYW5kIGMgYW5kIGQNCiAgICAgICAgICAgIC8vICAgIGIgYW5kIGMgYW5kIGUNCiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBuZXcgVmFsdWUodGhpcy5wZXJtdXRlKHBhdGgpLm1hcChmdW5jdGlvbiAocGF0aCkgew0KICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLm1hcChmdW5jdGlvbiAoZnJhZ21lbnQpIHsgcmV0dXJuIGZyYWdtZW50LnRvQ1NTID8gZnJhZ21lbnQgOiBuZXcgQW5vbnltb3VzKGZyYWdtZW50KTsgfSk7DQogICAgICAgICAgICAgICAgZm9yIChpID0gcGF0aC5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGguc3BsaWNlKGksIDAsIG5ldyBBbm9ueW1vdXMoJ2FuZCcpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKHBhdGgpOw0KICAgICAgICAgICAgfSkpOw0KICAgICAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5mZWF0dXJlcywgdGhpcyk7DQogICAgICAgICAgICAvLyBGYWtlIGEgdHJlZS1ub2RlIHRoYXQgZG9lc24ndCBvdXRwdXQgYW55dGhpbmcuDQogICAgICAgICAgICByZXR1cm4gbmV3IFJ1bGVzZXQoW10sIFtdKTsNCiAgICAgICAgfSwNCiAgICAgICAgcGVybXV0ZTogZnVuY3Rpb24gKGFycikgew0KICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChhcnIubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyclswXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgICAgICB2YXIgcmVzdCA9IHRoaXMucGVybXV0ZShhcnIuc2xpY2UoMSkpOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyclswXS5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goW2FyclswXVtqXV0uY29uY2F0KHJlc3RbaV0pKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBidWJibGVTZWxlY3RvcnM6IGZ1bmN0aW9uIChzZWxlY3RvcnMpIHsNCiAgICAgICAgICAgIGlmICghc2VsZWN0b3JzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5ydWxlcyA9IFtuZXcgUnVsZXNldChjb3B5QXJyYXkoc2VsZWN0b3JzKSwgW3RoaXMucnVsZXNbMF1dKV07DQogICAgICAgICAgICB0aGlzLnNldFBhcmVudCh0aGlzLnJ1bGVzLCB0aGlzKTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIC8vDQogICAgLy8gQ1NTIEBpbXBvcnQgbm9kZQ0KICAgIC8vDQogICAgLy8gVGhlIGdlbmVyYWwgc3RyYXRlZ3kgaGVyZSBpcyB0aGF0IHdlIGRvbid0IHdhbnQgdG8gd2FpdA0KICAgIC8vIGZvciB0aGUgcGFyc2luZyB0byBiZSBjb21wbGV0ZWQsIGJlZm9yZSB3ZSBzdGFydCBpbXBvcnRpbmcNCiAgICAvLyB0aGUgZmlsZS4gVGhhdCdzIGJlY2F1c2UgaW4gdGhlIGNvbnRleHQgb2YgYSBicm93c2VyLA0KICAgIC8vIG1vc3Qgb2YgdGhlIHRpbWUgd2lsbCBiZSBzcGVudCB3YWl0aW5nIGZvciB0aGUgc2VydmVyIHRvIHJlc3BvbmQuDQogICAgLy8NCiAgICAvLyBPbiBjcmVhdGlvbiwgd2UgcHVzaCB0aGUgaW1wb3J0IHBhdGggdG8gb3VyIGltcG9ydCBxdWV1ZSwgdGhvdWdoDQogICAgLy8gYGltcG9ydCxwdXNoYCwgd2UgYWxzbyBwYXNzIGl0IGEgY2FsbGJhY2ssIHdoaWNoIGl0J2xsIGNhbGwgb25jZQ0KICAgIC8vIHRoZSBmaWxlIGhhcyBiZWVuIGZldGNoZWQsIGFuZCBwYXJzZWQuDQogICAgLy8NCiAgICB2YXIgSW1wb3J0ID0gZnVuY3Rpb24gKHBhdGgsIGZlYXR1cmVzLCBvcHRpb25zLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDsNCiAgICAgICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVzOw0KICAgICAgICB0aGlzLmFsbG93Um9vdCA9IHRydWU7DQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMubGVzcyAhPT0gdW5kZWZpbmVkIHx8IHRoaXMub3B0aW9ucy5pbmxpbmUpIHsNCiAgICAgICAgICAgIHRoaXMuY3NzID0gIXRoaXMub3B0aW9ucy5sZXNzIHx8IHRoaXMub3B0aW9ucy5pbmxpbmU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2YXIgcGF0aFZhbHVlID0gdGhpcy5nZXRQYXRoKCk7DQogICAgICAgICAgICBpZiAocGF0aFZhbHVlICYmIC9bI1wuXCZcP11jc3MoW1w/O10uKik/JC8udGVzdChwYXRoVmFsdWUpKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jc3MgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuY29weVZpc2liaWxpdHlJbmZvKHZpc2liaWxpdHlJbmZvKTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5mZWF0dXJlcywgdGhpcyk7DQogICAgICAgIHRoaXMuc2V0UGFyZW50KHRoaXMucGF0aCwgdGhpcyk7DQogICAgfTsNCiAgICBJbXBvcnQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdJbXBvcnQnLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlcykgew0KICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSB2aXNpdG9yLnZpc2l0KHRoaXMuZmVhdHVyZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5wYXRoID0gdmlzaXRvci52aXNpdCh0aGlzLnBhdGgpOw0KICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaXNQbHVnaW4gJiYgIXRoaXMub3B0aW9ucy5pbmxpbmUgJiYgdGhpcy5yb290KSB7DQogICAgICAgICAgICAgICAgdGhpcy5yb290ID0gdmlzaXRvci52aXNpdCh0aGlzLnJvb3QpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmNzcyAmJiB0aGlzLnBhdGguX2ZpbGVJbmZvLnJlZmVyZW5jZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgnQGltcG9ydCAnLCB0aGlzLl9maWxlSW5mbywgdGhpcy5faW5kZXgpOw0KICAgICAgICAgICAgICAgIHRoaXMucGF0aC5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlcykgew0KICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcgJyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMuZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoJzsnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZ2V0UGF0aDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuICh0aGlzLnBhdGggaW5zdGFuY2VvZiBVUkwpID8NCiAgICAgICAgICAgICAgICB0aGlzLnBhdGgudmFsdWUudmFsdWUgOiB0aGlzLnBhdGgudmFsdWU7DQogICAgICAgIH0sDQogICAgICAgIGlzVmFyaWFibGVJbXBvcnQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5wYXRoOw0KICAgICAgICAgICAgaWYgKHBhdGggaW5zdGFuY2VvZiBVUkwpIHsNCiAgICAgICAgICAgICAgICBwYXRoID0gcGF0aC52YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChwYXRoIGluc3RhbmNlb2YgUXVvdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHBhdGguY29udGFpbnNWYXJpYWJsZXMoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICBldmFsRm9ySW1wb3J0OiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7DQogICAgICAgICAgICBpZiAocGF0aCBpbnN0YW5jZW9mIFVSTCkgew0KICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBJbXBvcnQocGF0aC5ldmFsKGNvbnRleHQpLCB0aGlzLmZlYXR1cmVzLCB0aGlzLm9wdGlvbnMsIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbywgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbFBhdGg6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aC5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgdmFyIGZpbGVJbmZvID0gdGhpcy5fZmlsZUluZm87DQogICAgICAgICAgICBpZiAoIShwYXRoIGluc3RhbmNlb2YgVVJMKSkgew0KICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgcm9vdHBhdGggaWYgdGhlIFVSTCByZXF1aXJlcyBhIHJld3JpdGUNCiAgICAgICAgICAgICAgICB2YXIgcGF0aFZhbHVlID0gcGF0aC52YWx1ZTsNCiAgICAgICAgICAgICAgICBpZiAoZmlsZUluZm8gJiYNCiAgICAgICAgICAgICAgICAgICAgcGF0aFZhbHVlICYmDQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQucGF0aFJlcXVpcmVzUmV3cml0ZShwYXRoVmFsdWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGgudmFsdWUgPSBjb250ZXh0LnJld3JpdGVQYXRoKHBhdGhWYWx1ZSwgZmlsZUluZm8ucm9vdHBhdGgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGF0aC52YWx1ZSA9IGNvbnRleHQubm9ybWFsaXplUGF0aChwYXRoLnZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcGF0aDsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRvRXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVmZXJlbmNlIHx8IHRoaXMuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggfHwgcmVzdWx0Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5hZGRWaXNpYmlsaXR5QmxvY2soKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQuYWRkVmlzaWJpbGl0eUJsb2NrKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCiAgICAgICAgZG9FdmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHJ1bGVzZXQ7DQogICAgICAgICAgICB2YXIgcmVnaXN0cnk7DQogICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSB0aGlzLmZlYXR1cmVzICYmIHRoaXMuZmVhdHVyZXMuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaXNQbHVnaW4pIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5yb290ICYmIHRoaXMucm9vdC5ldmFsKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3QuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZS5tZXNzYWdlID0gJ1BsdWdpbiBlcnJvciBkdXJpbmcgZXZhbHVhdGlvbic7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTGVzc0Vycm9yKGUsIHRoaXMucm9vdC5pbXBvcnRzLCB0aGlzLnJvb3QuZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlZ2lzdHJ5ID0gY29udGV4dC5mcmFtZXNbMF0gJiYgY29udGV4dC5mcmFtZXNbMF0uZnVuY3Rpb25SZWdpc3RyeTsNCiAgICAgICAgICAgICAgICBpZiAocmVnaXN0cnkgJiYgdGhpcy5yb290ICYmIHRoaXMucm9vdC5mdW5jdGlvbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgcmVnaXN0cnkuYWRkTXVsdGlwbGUodGhpcy5yb290LmZ1bmN0aW9ucyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLnNraXApIHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc2tpcCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNraXAgPSB0aGlzLnNraXAoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2tpcCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmxpbmUpIHsNCiAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSBuZXcgQW5vbnltb3VzKHRoaXMucm9vdCwgMCwgew0KICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5pbXBvcnRlZEZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2U6IHRoaXMucGF0aC5fZmlsZUluZm8gJiYgdGhpcy5wYXRoLl9maWxlSW5mby5yZWZlcmVuY2UNCiAgICAgICAgICAgICAgICB9LCB0cnVlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlcyA/IG5ldyBNZWRpYShbY29udGVudHNdLCB0aGlzLmZlYXR1cmVzLnZhbHVlKSA6IFtjb250ZW50c107DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNzcykgew0KICAgICAgICAgICAgICAgIHZhciBuZXdJbXBvcnQgPSBuZXcgSW1wb3J0KHRoaXMuZXZhbFBhdGgoY29udGV4dCksIGZlYXR1cmVzLCB0aGlzLm9wdGlvbnMsIHRoaXMuX2luZGV4KTsNCiAgICAgICAgICAgICAgICBpZiAoIW5ld0ltcG9ydC5jc3MgJiYgdGhpcy5lcnJvcikgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmVycm9yOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3SW1wb3J0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5yb290KSB7DQogICAgICAgICAgICAgICAgcnVsZXNldCA9IG5ldyBSdWxlc2V0KG51bGwsIGNvcHlBcnJheSh0aGlzLnJvb3QucnVsZXMpKTsNCiAgICAgICAgICAgICAgICBydWxlc2V0LmV2YWxJbXBvcnRzKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzID8gbmV3IE1lZGlhKHJ1bGVzZXQucnVsZXMsIHRoaXMuZmVhdHVyZXMudmFsdWUpIDogcnVsZXNldC5ydWxlczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBKc0V2YWxOb2RlID0gZnVuY3Rpb24gKCkgeyB9Ow0KICAgIEpzRXZhbE5vZGUucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIGV2YWx1YXRlSmF2YVNjcmlwdDogZnVuY3Rpb24gKGV4cHJlc3Npb24sIGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQ7DQogICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7DQogICAgICAgICAgICB2YXIgZXZhbENvbnRleHQgPSB7fTsNCiAgICAgICAgICAgIGlmICghY29udGV4dC5qYXZhc2NyaXB0RW5hYmxlZCkgew0KICAgICAgICAgICAgICAgIHRocm93IHsgbWVzc2FnZTogJ0lubGluZSBKYXZhU2NyaXB0IGlzIG5vdCBlbmFibGVkLiBJcyBpdCBzZXQgaW4geW91ciBvcHRpb25zPycsDQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB0aGlzLmZpbGVJbmZvKCkuZmlsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmdldEluZGV4KCkgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLnJlcGxhY2UoL0BceyhbXHctXSspXH0vZywgZnVuY3Rpb24gKF8sIG5hbWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5qc2lmeShuZXcgVmFyaWFibGUoIkAiICsgbmFtZSwgdGhhdC5nZXRJbmRleCgpLCB0aGF0LmZpbGVJbmZvKCkpLmV2YWwoY29udGV4dCkpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSBuZXcgRnVuY3Rpb24oInJldHVybiAoIiArIGV4cHJlc3Npb24gKyAiKSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IG1lc3NhZ2U6ICJKYXZhU2NyaXB0IGV2YWx1YXRpb24gZXJyb3I6ICIgKyBlLm1lc3NhZ2UgKyAiIGZyb20gYCIgKyBleHByZXNzaW9uICsgImAiLA0KICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgdmFyaWFibGVzID0gY29udGV4dC5mcmFtZXNbMF0udmFyaWFibGVzKCk7DQogICAgICAgICAgICBmb3IgKHZhciBrIGluIHZhcmlhYmxlcykgew0KICAgICAgICAgICAgICAgIGlmICh2YXJpYWJsZXMuaGFzT3duUHJvcGVydHkoaykpIHsNCiAgICAgICAgICAgICAgICAgICAgLyoganNoaW50IGxvb3BmdW5jOnRydWUgKi8NCiAgICAgICAgICAgICAgICAgICAgZXZhbENvbnRleHRbay5zbGljZSgxKV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFyaWFibGVzW2tdLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgdG9KUzogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmV2YWwoY29udGV4dCkudG9DU1MoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IGV4cHJlc3Npb24uY2FsbChldmFsQ29udGV4dCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIHRocm93IHsgbWVzc2FnZTogIkphdmFTY3JpcHQgZXZhbHVhdGlvbiBlcnJvcjogJyIgKyBlLm5hbWUgKyAiOiAiICsgZS5tZXNzYWdlLnJlcGxhY2UoL1siXS9nLCAnXCcnKSArICInIiwNCiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZUluZm8oKS5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZ2V0SW5kZXgoKSB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCiAgICAgICAganNpZnk6IGZ1bmN0aW9uIChvYmopIHsNCiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iai52YWx1ZSkgJiYgKG9iai52YWx1ZS5sZW5ndGggPiAxKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAiWyIgKyBvYmoudmFsdWUubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2LnRvQ1NTKCk7IH0pLmpvaW4oJywgJykgKyAiXSI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnRvQ1NTKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgSmF2YVNjcmlwdCA9IGZ1bmN0aW9uIChzdHJpbmcsIGVzY2FwZWQsIGluZGV4LCBjdXJyZW50RmlsZUluZm8pIHsNCiAgICAgICAgdGhpcy5lc2NhcGVkID0gZXNjYXBlZDsNCiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gc3RyaW5nOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICB9Ow0KICAgIEphdmFTY3JpcHQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgSnNFdmFsTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdKYXZhU2NyaXB0JywNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmV2YWx1YXRlSmF2YVNjcmlwdCh0aGlzLmV4cHJlc3Npb24sIGNvbnRleHQpOw0KICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgcmVzdWx0Ow0KICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdudW1iZXInICYmICFpc05hTihyZXN1bHQpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24ocmVzdWx0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBRdW90ZWQoIlwiIiArIHJlc3VsdCArICJcIiIsIHJlc3VsdCwgdGhpcy5lc2NhcGVkLCB0aGlzLl9pbmRleCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFub255bW91cyhyZXN1bHQuam9pbignLCAnKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFub255bW91cyhyZXN1bHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIEFzc2lnbm1lbnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHsNCiAgICAgICAgdGhpcy5rZXkgPSBrZXk7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWw7DQogICAgfTsNCiAgICBBc3NpZ25tZW50LnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnQXNzaWdubWVudCcsDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gKHZpc2l0b3IpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2aXNpdG9yLnZpc2l0KHRoaXMudmFsdWUpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUuZXZhbCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXNzaWdubWVudCh0aGlzLmtleSwgdGhpcy52YWx1ZS5ldmFsKGNvbnRleHQpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0aGlzOw0KICAgICAgICB9LA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIG91dHB1dC5hZGQodGhpcy5rZXkgKyAiPSIpOw0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUuZ2VuQ1NTKSB7DQogICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQodGhpcy52YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgQ29uZGl0aW9uID0gZnVuY3Rpb24gKG9wLCBsLCByLCBpLCBuZWdhdGUpIHsNCiAgICAgICAgdGhpcy5vcCA9IG9wLnRyaW0oKTsNCiAgICAgICAgdGhpcy5sdmFsdWUgPSBsOw0KICAgICAgICB0aGlzLnJ2YWx1ZSA9IHI7DQogICAgICAgIHRoaXMuX2luZGV4ID0gaTsNCiAgICAgICAgdGhpcy5uZWdhdGUgPSBuZWdhdGU7DQogICAgfTsNCiAgICBDb25kaXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdDb25kaXRpb24nLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICB0aGlzLmx2YWx1ZSA9IHZpc2l0b3IudmlzaXQodGhpcy5sdmFsdWUpOw0KICAgICAgICAgICAgdGhpcy5ydmFsdWUgPSB2aXNpdG9yLnZpc2l0KHRoaXMucnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSAoZnVuY3Rpb24gKG9wLCBhLCBiKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChvcCkgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdhbmQnOiByZXR1cm4gYSAmJiBiOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICdvcic6IHJldHVybiBhIHx8IGI7DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKE5vZGUuY29tcGFyZShhLCBiKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgLTE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcCA9PT0gJzwnIHx8IG9wID09PSAnPTwnIHx8IG9wID09PSAnPD0nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wID09PSAnPScgfHwgb3AgPT09ICc+PScgfHwgb3AgPT09ICc9PCcgfHwgb3AgPT09ICc8PSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3AgPT09ICc+JyB8fCBvcCA9PT0gJz49JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkodGhpcy5vcCwgdGhpcy5sdmFsdWUuZXZhbChjb250ZXh0KSwgdGhpcy5ydmFsdWUuZXZhbChjb250ZXh0KSk7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5uZWdhdGUgPyAhcmVzdWx0IDogcmVzdWx0Ow0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIFVuaWNvZGVEZXNjcmlwdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICB9Ow0KICAgIFVuaWNvZGVEZXNjcmlwdG9yLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnVW5pY29kZURlc2NyaXB0b3InDQogICAgfSk7CgogICAgdmFyIE5lZ2F0aXZlID0gZnVuY3Rpb24gKG5vZGUpIHsNCiAgICAgICAgdGhpcy52YWx1ZSA9IG5vZGU7DQogICAgfTsNCiAgICBOZWdhdGl2ZS5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ05lZ2F0aXZlJywNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKCctJyk7DQogICAgICAgICAgICB0aGlzLnZhbHVlLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgaWYgKGNvbnRleHQuaXNNYXRoT24oKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAobmV3IE9wZXJhdGlvbignKicsIFtuZXcgRGltZW5zaW9uKC0xKSwgdGhpcy52YWx1ZV0pKS5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBOZWdhdGl2ZSh0aGlzLnZhbHVlLmV2YWwoY29udGV4dCkpOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIEV4dGVuZCA9IGZ1bmN0aW9uIChzZWxlY3Rvciwgb3B0aW9uLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7DQogICAgICAgIHRoaXMub3B0aW9uID0gb3B0aW9uOw0KICAgICAgICB0aGlzLm9iamVjdF9pZCA9IEV4dGVuZC5uZXh0X2lkKys7DQogICAgICAgIHRoaXMucGFyZW50X2lkcyA9IFt0aGlzLm9iamVjdF9pZF07DQogICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuX2ZpbGVJbmZvID0gY3VycmVudEZpbGVJbmZvOw0KICAgICAgICB0aGlzLmNvcHlWaXNpYmlsaXR5SW5mbyh2aXNpYmlsaXR5SW5mbyk7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgc3dpdGNoIChvcHRpb24pIHsNCiAgICAgICAgICAgIGNhc2UgJ2FsbCc6DQogICAgICAgICAgICAgICAgdGhpcy5hbGxvd0JlZm9yZSA9IHRydWU7DQogICAgICAgICAgICAgICAgdGhpcy5hbGxvd0FmdGVyID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgdGhpcy5hbGxvd0JlZm9yZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dBZnRlciA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuc2V0UGFyZW50KHRoaXMuc2VsZWN0b3IsIHRoaXMpOw0KICAgIH07DQogICAgRXh0ZW5kLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnRXh0ZW5kJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdGhpcy5zZWxlY3RvciA9IHZpc2l0b3IudmlzaXQodGhpcy5zZWxlY3Rvcik7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEV4dGVuZCh0aGlzLnNlbGVjdG9yLmV2YWwoY29udGV4dCksIHRoaXMub3B0aW9uLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgY2xvbmU6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEV4dGVuZCh0aGlzLnNlbGVjdG9yLCB0aGlzLm9wdGlvbiwgdGhpcy5nZXRJbmRleCgpLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgIH0sDQogICAgICAgIC8vIGl0IGNvbmNhdGVuYXRlcyAoam9pbnMpIGFsbCBzZWxlY3RvcnMgaW4gc2VsZWN0b3IgYXJyYXkNCiAgICAgICAgZmluZFNlbGZTZWxlY3RvcnM6IGZ1bmN0aW9uIChzZWxlY3RvcnMpIHsNCiAgICAgICAgICAgIHZhciBzZWxmRWxlbWVudHMgPSBbXSwgaSwgc2VsZWN0b3JFbGVtZW50czsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzZWxlY3RvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBzZWxlY3RvckVsZW1lbnRzID0gc2VsZWN0b3JzW2ldLmVsZW1lbnRzOw0KICAgICAgICAgICAgICAgIC8vIGR1cGxpY2F0ZSB0aGUgbG9naWMgaW4gZ2VuQ1NTIGZ1bmN0aW9uIGluc2lkZSB0aGUgc2VsZWN0b3Igbm9kZS4NCiAgICAgICAgICAgICAgICAvLyBmdXR1cmUgVE9ETyAtIG1vdmUgYm90aCBsb2dpY3MgaW50byB0aGUgc2VsZWN0b3Igam9pbmVyIHZpc2l0b3INCiAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgc2VsZWN0b3JFbGVtZW50cy5sZW5ndGggJiYgc2VsZWN0b3JFbGVtZW50c1swXS5jb21iaW5hdG9yLnZhbHVlID09PSAnJykgew0KICAgICAgICAgICAgICAgICAgICBzZWxlY3RvckVsZW1lbnRzWzBdLmNvbWJpbmF0b3IudmFsdWUgPSAnICc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNlbGZFbGVtZW50cyA9IHNlbGZFbGVtZW50cy5jb25jYXQoc2VsZWN0b3JzW2ldLmVsZW1lbnRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuc2VsZlNlbGVjdG9ycyA9IFtuZXcgU2VsZWN0b3Ioc2VsZkVsZW1lbnRzKV07DQogICAgICAgICAgICB0aGlzLnNlbGZTZWxlY3RvcnNbMF0uY29weVZpc2liaWxpdHlJbmZvKHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICBFeHRlbmQubmV4dF9pZCA9IDA7CgogICAgdmFyIFZhcmlhYmxlQ2FsbCA9IGZ1bmN0aW9uICh2YXJpYWJsZSwgaW5kZXgsIGN1cnJlbnRGaWxlSW5mbykgew0KICAgICAgICB0aGlzLnZhcmlhYmxlID0gdmFyaWFibGU7DQogICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuX2ZpbGVJbmZvID0gY3VycmVudEZpbGVJbmZvOw0KICAgICAgICB0aGlzLmFsbG93Um9vdCA9IHRydWU7DQogICAgfTsNCiAgICBWYXJpYWJsZUNhbGwucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdWYXJpYWJsZUNhbGwnLA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHJ1bGVzOw0KICAgICAgICAgICAgdmFyIGRldGFjaGVkUnVsZXNldCA9IG5ldyBWYXJpYWJsZSh0aGlzLnZhcmlhYmxlLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSkuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBMZXNzRXJyb3IoeyBtZXNzYWdlOiAiQ291bGQgbm90IGV2YWx1YXRlIHZhcmlhYmxlIGNhbGwgIiArIHRoaXMudmFyaWFibGUgfSk7DQogICAgICAgICAgICBpZiAoIWRldGFjaGVkUnVsZXNldC5ydWxlc2V0KSB7DQogICAgICAgICAgICAgICAgaWYgKGRldGFjaGVkUnVsZXNldC5ydWxlcykgew0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IGRldGFjaGVkUnVsZXNldDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZXRhY2hlZFJ1bGVzZXQpKSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVzID0gbmV3IFJ1bGVzZXQoJycsIGRldGFjaGVkUnVsZXNldCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGV0YWNoZWRSdWxlc2V0LnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IG5ldyBSdWxlc2V0KCcnLCBkZXRhY2hlZFJ1bGVzZXQudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRldGFjaGVkUnVsZXNldCA9IG5ldyBEZXRhY2hlZFJ1bGVzZXQocnVsZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGRldGFjaGVkUnVsZXNldC5ydWxlc2V0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGRldGFjaGVkUnVsZXNldC5jYWxsRXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRocm93IGVycm9yOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIE5hbWVzcGFjZVZhbHVlID0gZnVuY3Rpb24gKHJ1bGVDYWxsLCBsb29rdXBzLCBpbmRleCwgZmlsZUluZm8pIHsNCiAgICAgICAgdGhpcy52YWx1ZSA9IHJ1bGVDYWxsOw0KICAgICAgICB0aGlzLmxvb2t1cHMgPSBsb29rdXBzOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGZpbGVJbmZvOw0KICAgIH07DQogICAgTmFtZXNwYWNlVmFsdWUucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdOYW1lc3BhY2VWYWx1ZScsDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgaSwgbmFtZSwgcnVsZXMgPSB0aGlzLnZhbHVlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sb29rdXBzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgbmFtZSA9IHRoaXMubG9va3Vwc1tpXTsNCiAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgKiBFdmFsJ2QgRFJzIHJldHVybiBydWxlc2V0cy4NCiAgICAgICAgICAgICAgICAgKiBFdmFsJ2QgbWl4aW5zIHJldHVybiBydWxlcywgc28gbGV0J3MgbWFrZSBhIHJ1bGVzZXQgaWYgd2UgbmVlZCBpdC4NCiAgICAgICAgICAgICAgICAgKiBXZSBuZWVkIHRvIGRvIHRoaXMgYmVjYXVzZSBvZiBsYXRlIHBhcnNpbmcgb2YgdmFsdWVzDQogICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocnVsZXMpKSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVzID0gbmV3IFJ1bGVzZXQoW25ldyBTZWxlY3RvcigpXSwgcnVsZXMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlcy5sYXN0RGVjbGFyYXRpb24oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAobmFtZS5jaGFyQXQoMCkgPT09ICdAJykgew0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMSkgPT09ICdAJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICJAIiArIG5ldyBWYXJpYWJsZShuYW1lLnN1YnN0cigxKSkuZXZhbChjb250ZXh0KS52YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAocnVsZXMudmFyaWFibGVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGVzLnZhcmlhYmxlKG5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICghcnVsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ05hbWUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJ2YXJpYWJsZSAiICsgbmFtZSArICIgbm90IGZvdW5kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmdldEluZGV4KCkgfTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyaW5nKDAsIDIpID09PSAnJEAnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gIiQiICsgbmV3IFZhcmlhYmxlKG5hbWUuc3Vic3RyKDEpKS5ldmFsKGNvbnRleHQpLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuY2hhckF0KDApID09PSAnJCcgPyBuYW1lIDogIiQiICsgbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAocnVsZXMucHJvcGVydGllcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlcy5wcm9wZXJ0eShuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXJ1bGVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAicHJvcGVydHkgXCIiICsgbmFtZS5zdWJzdHIoMSkgKyAiXCIgbm90IGZvdW5kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmdldEluZGV4KCkgfTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvLyBQcm9wZXJ0aWVzIGFyZSBhbiBhcnJheSBvZiB2YWx1ZXMsIHNpbmNlIGEgcnVsZXNldCBjYW4gaGF2ZSBtdWx0aXBsZSBwcm9wcy4NCiAgICAgICAgICAgICAgICAgICAgLy8gV2UgcGljayB0aGUgbGFzdCBvbmUgKHRoZSAiY2FzY2FkZWQiIHZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGVzW3J1bGVzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocnVsZXMudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlcy5ldmFsKGNvbnRleHQpLnZhbHVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocnVsZXMucnVsZXNldCkgew0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGVzLnJ1bGVzZXQuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcnVsZXM7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMsIHJ1bGVzLCBjb25kaXRpb24sIHZhcmlhZGljLCBmcmFtZXMsIHZpc2liaWxpdHlJbmZvKSB7DQogICAgICAgIHRoaXMubmFtZSA9IG5hbWUgfHwgJ2Fub255bW91cyBtaXhpbic7DQogICAgICAgIHRoaXMuc2VsZWN0b3JzID0gW25ldyBTZWxlY3RvcihbbmV3IEVsZW1lbnQobnVsbCwgbmFtZSwgZmFsc2UsIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbyldKV07DQogICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOw0KICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjsNCiAgICAgICAgdGhpcy52YXJpYWRpYyA9IHZhcmlhZGljOw0KICAgICAgICB0aGlzLmFyaXR5ID0gcGFyYW1zLmxlbmd0aDsNCiAgICAgICAgdGhpcy5ydWxlcyA9IHJ1bGVzOw0KICAgICAgICB0aGlzLl9sb29rdXBzID0ge307DQogICAgICAgIHZhciBvcHRpb25hbFBhcmFtZXRlcnMgPSBbXTsNCiAgICAgICAgdGhpcy5yZXF1aXJlZCA9IHBhcmFtcy5yZWR1Y2UoZnVuY3Rpb24gKGNvdW50LCBwKSB7DQogICAgICAgICAgICBpZiAoIXAubmFtZSB8fCAocC5uYW1lICYmICFwLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBjb3VudCArIDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBvcHRpb25hbFBhcmFtZXRlcnMucHVzaChwLm5hbWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiBjb3VudDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgMCk7DQogICAgICAgIHRoaXMub3B0aW9uYWxQYXJhbWV0ZXJzID0gb3B0aW9uYWxQYXJhbWV0ZXJzOw0KICAgICAgICB0aGlzLmZyYW1lcyA9IGZyYW1lczsNCiAgICAgICAgdGhpcy5jb3B5VmlzaWJpbGl0eUluZm8odmlzaWJpbGl0eUluZm8pOw0KICAgICAgICB0aGlzLmFsbG93Um9vdCA9IHRydWU7DQogICAgfTsNCiAgICBEZWZpbml0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IFJ1bGVzZXQoKSwgew0KICAgICAgICB0eXBlOiAnTWl4aW5EZWZpbml0aW9uJywNCiAgICAgICAgZXZhbEZpcnN0OiB0cnVlLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMgJiYgdGhpcy5wYXJhbXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSB2aXNpdG9yLnZpc2l0QXJyYXkodGhpcy5wYXJhbXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHZpc2l0b3IudmlzaXRBcnJheSh0aGlzLnJ1bGVzKTsNCiAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbikgew0KICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uID0gdmlzaXRvci52aXNpdCh0aGlzLmNvbmRpdGlvbik7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGV2YWxQYXJhbXM6IGZ1bmN0aW9uIChjb250ZXh0LCBtaXhpbkVudiwgYXJncywgZXZhbGRBcmd1bWVudHMpIHsNCiAgICAgICAgICAgIC8qIGpzaGludCBib3NzOnRydWUgKi8NCiAgICAgICAgICAgIHZhciBmcmFtZSA9IG5ldyBSdWxlc2V0KG51bGwsIG51bGwpOw0KICAgICAgICAgICAgdmFyIHZhcmFyZ3M7DQogICAgICAgICAgICB2YXIgYXJnOw0KICAgICAgICAgICAgdmFyIHBhcmFtcyA9IGNvcHlBcnJheSh0aGlzLnBhcmFtcyk7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBqOw0KICAgICAgICAgICAgdmFyIHZhbDsNCiAgICAgICAgICAgIHZhciBuYW1lOw0KICAgICAgICAgICAgdmFyIGlzTmFtZWRGb3VuZDsNCiAgICAgICAgICAgIHZhciBhcmdJbmRleDsNCiAgICAgICAgICAgIHZhciBhcmdzTGVuZ3RoID0gMDsNCiAgICAgICAgICAgIGlmIChtaXhpbkVudi5mcmFtZXMgJiYgbWl4aW5FbnYuZnJhbWVzWzBdICYmIG1peGluRW52LmZyYW1lc1swXS5mdW5jdGlvblJlZ2lzdHJ5KSB7DQogICAgICAgICAgICAgICAgZnJhbWUuZnVuY3Rpb25SZWdpc3RyeSA9IG1peGluRW52LmZyYW1lc1swXS5mdW5jdGlvblJlZ2lzdHJ5LmluaGVyaXQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1peGluRW52ID0gbmV3IGNvbnRleHRzLkV2YWwobWl4aW5FbnYsIFtmcmFtZV0uY29uY2F0KG1peGluRW52LmZyYW1lcykpOw0KICAgICAgICAgICAgaWYgKGFyZ3MpIHsNCiAgICAgICAgICAgICAgICBhcmdzID0gY29weUFycmF5KGFyZ3MpOw0KICAgICAgICAgICAgICAgIGFyZ3NMZW5ndGggPSBhcmdzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJnc0xlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3NbaV07DQogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lID0gKGFyZyAmJiBhcmcubmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzTmFtZWRGb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHBhcmFtcy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZhbGRBcmd1bWVudHNbal0gJiYgbmFtZSA9PT0gcGFyYW1zW2pdLm5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbGRBcmd1bWVudHNbal0gPSBhcmcudmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUucHJlcGVuZFJ1bGUobmV3IERlY2xhcmF0aW9uKG5hbWUsIGFyZy52YWx1ZS5ldmFsKGNvbnRleHQpKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmFtZWRGb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hbWVkRm91bmQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnNwbGljZShpLCAxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdSdW50aW1lJywgbWVzc2FnZTogIk5hbWVkIGFyZ3VtZW50IGZvciAiICsgdGhpcy5uYW1lICsgIiAiICsgYXJnc1tpXS5uYW1lICsgIiBub3QgZm91bmQiIH07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBhcmdJbmRleCA9IDA7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKGV2YWxkQXJndW1lbnRzW2ldKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhcmcgPSBhcmdzICYmIGFyZ3NbYXJnSW5kZXhdOw0KICAgICAgICAgICAgICAgIGlmIChuYW1lID0gcGFyYW1zW2ldLm5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtc1tpXS52YXJpYWRpYykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyYXJncyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gYXJnSW5kZXg7IGogPCBhcmdzTGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJhcmdzLnB1c2goYXJnc1tqXS52YWx1ZS5ldmFsKGNvbnRleHQpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLnByZXBlbmRSdWxlKG5ldyBEZWNsYXJhdGlvbihuYW1lLCBuZXcgRXhwcmVzc2lvbih2YXJhcmdzKS5ldmFsKGNvbnRleHQpKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmcgJiYgYXJnLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2FzIGEgbWl4aW4gY2FsbCwgcGFzcyBpbiBhIGRldGFjaGVkIHJ1bGVzZXQgb2YgaXQncyBldmFsJ2QgcnVsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IG5ldyBEZXRhY2hlZFJ1bGVzZXQobmV3IFJ1bGVzZXQoJycsIHZhbCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyYW1zW2ldLnZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyYW1zW2ldLnZhbHVlLmV2YWwobWl4aW5FbnYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLnJlc2V0Q2FjaGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ1J1bnRpbWUnLCBtZXNzYWdlOiAid3JvbmcgbnVtYmVyIG9mIGFyZ3VtZW50cyBmb3IgIiArIHRoaXMubmFtZSArICIgKCIgKyBhcmdzTGVuZ3RoICsgIiBmb3IgIiArIHRoaXMuYXJpdHkgKyAiKSIgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLnByZXBlbmRSdWxlKG5ldyBEZWNsYXJhdGlvbihuYW1lLCB2YWwpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV2YWxkQXJndW1lbnRzW2ldID0gdmFsOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChwYXJhbXNbaV0udmFyaWFkaWMgJiYgYXJncykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSBhcmdJbmRleDsgaiA8IGFyZ3NMZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXZhbGRBcmd1bWVudHNbal0gPSBhcmdzW2pdLnZhbHVlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYXJnSW5kZXgrKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmcmFtZTsNCiAgICAgICAgfSwNCiAgICAgICAgbWFrZUltcG9ydGFudDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gIXRoaXMucnVsZXMgPyB0aGlzLnJ1bGVzIDogdGhpcy5ydWxlcy5tYXAoZnVuY3Rpb24gKHIpIHsNCiAgICAgICAgICAgICAgICBpZiAoci5tYWtlSW1wb3J0YW50KSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByLm1ha2VJbXBvcnRhbnQodHJ1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgRGVmaW5pdGlvbih0aGlzLm5hbWUsIHRoaXMucGFyYW1zLCBydWxlcywgdGhpcy5jb25kaXRpb24sIHRoaXMudmFyaWFkaWMsIHRoaXMuZnJhbWVzKTsNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERlZmluaXRpb24odGhpcy5uYW1lLCB0aGlzLnBhcmFtcywgdGhpcy5ydWxlcywgdGhpcy5jb25kaXRpb24sIHRoaXMudmFyaWFkaWMsIHRoaXMuZnJhbWVzIHx8IGNvcHlBcnJheShjb250ZXh0LmZyYW1lcykpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsQ2FsbDogZnVuY3Rpb24gKGNvbnRleHQsIGFyZ3MsIGltcG9ydGFudCkgew0KICAgICAgICAgICAgdmFyIF9hcmd1bWVudHMgPSBbXTsNCiAgICAgICAgICAgIHZhciBtaXhpbkZyYW1lcyA9IHRoaXMuZnJhbWVzID8gdGhpcy5mcmFtZXMuY29uY2F0KGNvbnRleHQuZnJhbWVzKSA6IGNvbnRleHQuZnJhbWVzOw0KICAgICAgICAgICAgdmFyIGZyYW1lID0gdGhpcy5ldmFsUGFyYW1zKGNvbnRleHQsIG5ldyBjb250ZXh0cy5FdmFsKGNvbnRleHQsIG1peGluRnJhbWVzKSwgYXJncywgX2FyZ3VtZW50cyk7DQogICAgICAgICAgICB2YXIgcnVsZXM7DQogICAgICAgICAgICB2YXIgcnVsZXNldDsNCiAgICAgICAgICAgIGZyYW1lLnByZXBlbmRSdWxlKG5ldyBEZWNsYXJhdGlvbignQGFyZ3VtZW50cycsIG5ldyBFeHByZXNzaW9uKF9hcmd1bWVudHMpLmV2YWwoY29udGV4dCkpKTsNCiAgICAgICAgICAgIHJ1bGVzID0gY29weUFycmF5KHRoaXMucnVsZXMpOw0KICAgICAgICAgICAgcnVsZXNldCA9IG5ldyBSdWxlc2V0KG51bGwsIHJ1bGVzKTsNCiAgICAgICAgICAgIHJ1bGVzZXQub3JpZ2luYWxSdWxlc2V0ID0gdGhpczsNCiAgICAgICAgICAgIHJ1bGVzZXQgPSBydWxlc2V0LmV2YWwobmV3IGNvbnRleHRzLkV2YWwoY29udGV4dCwgW3RoaXMsIGZyYW1lXS5jb25jYXQobWl4aW5GcmFtZXMpKSk7DQogICAgICAgICAgICBpZiAoaW1wb3J0YW50KSB7DQogICAgICAgICAgICAgICAgcnVsZXNldCA9IHJ1bGVzZXQubWFrZUltcG9ydGFudCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJ1bGVzZXQ7DQogICAgICAgIH0sDQogICAgICAgIG1hdGNoQ29uZGl0aW9uOiBmdW5jdGlvbiAoYXJncywgY29udGV4dCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uICYmICF0aGlzLmNvbmRpdGlvbi5ldmFsKG5ldyBjb250ZXh0cy5FdmFsKGNvbnRleHQsIFt0aGlzLmV2YWxQYXJhbXMoY29udGV4dCwgLyogdGhlIHBhcmFtZXRlciB2YXJpYWJsZXMgKi8gbmV3IGNvbnRleHRzLkV2YWwoY29udGV4dCwgdGhpcy5mcmFtZXMgPyB0aGlzLmZyYW1lcy5jb25jYXQoY29udGV4dC5mcmFtZXMpIDogY29udGV4dC5mcmFtZXMpLCBhcmdzLCBbXSldDQogICAgICAgICAgICAgICAgLmNvbmNhdCh0aGlzLmZyYW1lcyB8fCBbXSkgLy8gdGhlIHBhcmVudCBuYW1lc3BhY2UvbWl4aW4gZnJhbWVzDQogICAgICAgICAgICAgICAgLmNvbmNhdChjb250ZXh0LmZyYW1lcykpKSkgeyAvLyB0aGUgY3VycmVudCBlbnZpcm9ubWVudCBmcmFtZXMNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSwNCiAgICAgICAgbWF0Y2hBcmdzOiBmdW5jdGlvbiAoYXJncywgY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIGFsbEFyZ3NDbnQgPSAoYXJncyAmJiBhcmdzLmxlbmd0aCkgfHwgMDsNCiAgICAgICAgICAgIHZhciBsZW47DQogICAgICAgICAgICB2YXIgb3B0aW9uYWxQYXJhbWV0ZXJzID0gdGhpcy5vcHRpb25hbFBhcmFtZXRlcnM7DQogICAgICAgICAgICB2YXIgcmVxdWlyZWRBcmdzQ250ID0gIWFyZ3MgPyAwIDogYXJncy5yZWR1Y2UoZnVuY3Rpb24gKGNvdW50LCBwKSB7DQogICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsUGFyYW1ldGVycy5pbmRleE9mKHAubmFtZSkgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3VudCArIDE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMCk7DQogICAgICAgICAgICBpZiAoIXRoaXMudmFyaWFkaWMpIHsNCiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRBcmdzQ250IDwgdGhpcy5yZXF1aXJlZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhbGxBcmdzQ250ID4gdGhpcy5wYXJhbXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRBcmdzQ250IDwgKHRoaXMucmVxdWlyZWQgLSAxKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gY2hlY2sgcGF0dGVybnMNCiAgICAgICAgICAgIGxlbiA9IE1hdGgubWluKHJlcXVpcmVkQXJnc0NudCwgdGhpcy5hcml0eSk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmFtc1tpXS5uYW1lICYmICF0aGlzLnBhcmFtc1tpXS52YXJpYWRpYykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1tpXS52YWx1ZS5ldmFsKGNvbnRleHQpLnRvQ1NTKCkgIT0gdGhpcy5wYXJhbXNbaV0udmFsdWUuZXZhbChjb250ZXh0KS50b0NTUygpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBNaXhpbkNhbGwgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MsIGluZGV4LCBjdXJyZW50RmlsZUluZm8sIGltcG9ydGFudCkgew0KICAgICAgICB0aGlzLnNlbGVjdG9yID0gbmV3IFNlbGVjdG9yKGVsZW1lbnRzKTsNCiAgICAgICAgdGhpcy5hcmd1bWVudHMgPSBhcmdzIHx8IFtdOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICAgICAgdGhpcy5pbXBvcnRhbnQgPSBpbXBvcnRhbnQ7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5zZWxlY3RvciwgdGhpcyk7DQogICAgfTsNCiAgICBNaXhpbkNhbGwucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdNaXhpbkNhbGwnLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0b3IgPSB2aXNpdG9yLnZpc2l0KHRoaXMuc2VsZWN0b3IpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMuYXJndW1lbnRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIHRoaXMuYXJndW1lbnRzID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMuYXJndW1lbnRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBtaXhpbnM7DQogICAgICAgICAgICB2YXIgbWl4aW47DQogICAgICAgICAgICB2YXIgbWl4aW5QYXRoOw0KICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTsNCiAgICAgICAgICAgIHZhciBhcmc7DQogICAgICAgICAgICB2YXIgYXJnVmFsdWU7DQogICAgICAgICAgICB2YXIgcnVsZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZhbHNlOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICB2YXIgbTsNCiAgICAgICAgICAgIHZhciBmOw0KICAgICAgICAgICAgdmFyIGlzUmVjdXJzaXZlOw0KICAgICAgICAgICAgdmFyIGlzT25lRm91bmQ7DQogICAgICAgICAgICB2YXIgY2FuZGlkYXRlcyA9IFtdOw0KICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZTsNCiAgICAgICAgICAgIHZhciBjb25kaXRpb25SZXN1bHQgPSBbXTsNCiAgICAgICAgICAgIHZhciBkZWZhdWx0UmVzdWx0Ow0KICAgICAgICAgICAgdmFyIGRlZkZhbHNlRWl0aGVyQ2FzZSA9IC0xOw0KICAgICAgICAgICAgdmFyIGRlZk5vbmUgPSAwOw0KICAgICAgICAgICAgdmFyIGRlZlRydWUgPSAxOw0KICAgICAgICAgICAgdmFyIGRlZkZhbHNlID0gMjsNCiAgICAgICAgICAgIHZhciBjb3VudDsNCiAgICAgICAgICAgIHZhciBvcmlnaW5hbFJ1bGVzZXQ7DQogICAgICAgICAgICB2YXIgbm9Bcmd1bWVudHNGaWx0ZXI7DQogICAgICAgICAgICB0aGlzLnNlbGVjdG9yID0gdGhpcy5zZWxlY3Rvci5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgZnVuY3Rpb24gY2FsY0RlZkdyb3VwKG1peGluLCBtaXhpblBhdGgpIHsNCiAgICAgICAgICAgICAgICB2YXIgZiwgcCwgbmFtZXNwYWNlOw0KICAgICAgICAgICAgICAgIGZvciAoZiA9IDA7IGYgPCAyOyBmKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0W2ZdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEZ1bmMudmFsdWUoZik7DQogICAgICAgICAgICAgICAgICAgIGZvciAocCA9IDA7IHAgPCBtaXhpblBhdGgubGVuZ3RoICYmIGNvbmRpdGlvblJlc3VsdFtmXTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBtaXhpblBhdGhbcF07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZXNwYWNlLm1hdGNoQ29uZGl0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0W2ZdID0gY29uZGl0aW9uUmVzdWx0W2ZdICYmIG5hbWVzcGFjZS5tYXRjaENvbmRpdGlvbihudWxsLCBjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAobWl4aW4ubWF0Y2hDb25kaXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvblJlc3VsdFtmXSA9IGNvbmRpdGlvblJlc3VsdFtmXSAmJiBtaXhpbi5tYXRjaENvbmRpdGlvbihhcmdzLCBjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uUmVzdWx0WzBdIHx8IGNvbmRpdGlvblJlc3VsdFsxXSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uUmVzdWx0WzBdICE9IGNvbmRpdGlvblJlc3VsdFsxXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmRpdGlvblJlc3VsdFsxXSA/DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmVHJ1ZSA6IGRlZkZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZOb25lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gZGVmRmFsc2VFaXRoZXJDYXNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgYXJnID0gdGhpcy5hcmd1bWVudHNbaV07DQogICAgICAgICAgICAgICAgYXJnVmFsdWUgPSBhcmcudmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICBpZiAoYXJnLmV4cGFuZCAmJiBBcnJheS5pc0FycmF5KGFyZ1ZhbHVlLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICBhcmdWYWx1ZSA9IGFyZ1ZhbHVlLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgYXJnVmFsdWUubGVuZ3RoOyBtKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaCh7IHZhbHVlOiBhcmdWYWx1ZVttXSB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYXJncy5wdXNoKHsgbmFtZTogYXJnLm5hbWUsIHZhbHVlOiBhcmdWYWx1ZSB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBub0FyZ3VtZW50c0ZpbHRlciA9IGZ1bmN0aW9uIChydWxlKSB7IHJldHVybiBydWxlLm1hdGNoQXJncyhudWxsLCBjb250ZXh0KTsgfTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb250ZXh0LmZyYW1lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmICgobWl4aW5zID0gY29udGV4dC5mcmFtZXNbaV0uZmluZCh0aGlzLnNlbGVjdG9yLCBudWxsLCBub0FyZ3VtZW50c0ZpbHRlcikpLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgaXNPbmVGb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIC8vIFRvIG1ha2UgYGRlZmF1bHQoKWAgZnVuY3Rpb24gaW5kZXBlbmRlbnQgb2YgZGVmaW5pdGlvbiBvcmRlciB3ZSBoYXZlIHR3byAic3VicGFzc2VzIiBoZXJlLg0KICAgICAgICAgICAgICAgICAgICAvLyBBdCBmaXJzdCB3ZSBldmFsdWF0ZSBlYWNoIGd1YXJkICp0d2ljZSogKHdpdGggYGRlZmF1bHQoKSA9PSB0cnVlYCBhbmQgYGRlZmF1bHQoKSA9PSBmYWxzZWApLA0KICAgICAgICAgICAgICAgICAgICAvLyBhbmQgYnVpbGQgY2FuZGlkYXRlIGxpc3Qgd2l0aCBjb3JyZXNwb25kaW5nIGZsYWdzLiBUaGVuLCB3aGVuIHdlIGtub3cgYWxsIHBvc3NpYmxlIG1hdGNoZXMsDQogICAgICAgICAgICAgICAgICAgIC8vIHdlIG1ha2UgYSBmaW5hbCBkZWNpc2lvbi4NCiAgICAgICAgICAgICAgICAgICAgZm9yIChtID0gMDsgbSA8IG1peGlucy5sZW5ndGg7IG0rKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW4gPSBtaXhpbnNbbV0ucnVsZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1peGluUGF0aCA9IG1peGluc1ttXS5wYXRoOw0KICAgICAgICAgICAgICAgICAgICAgICAgaXNSZWN1cnNpdmUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZiA9IDA7IGYgPCBjb250ZXh0LmZyYW1lcy5sZW5ndGg7IGYrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoIShtaXhpbiBpbnN0YW5jZW9mIERlZmluaXRpb24pKSAmJiBtaXhpbiA9PT0gKGNvbnRleHQuZnJhbWVzW2ZdLm9yaWdpbmFsUnVsZXNldCB8fCBjb250ZXh0LmZyYW1lc1tmXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZWN1cnNpdmUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWN1cnNpdmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaXhpbi5tYXRjaEFyZ3MoYXJncywgY29udGV4dCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSB7IG1peGluOiBtaXhpbiwgZ3JvdXA6IGNhbGNEZWZHcm91cChtaXhpbiwgbWl4aW5QYXRoKSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGUuZ3JvdXAgIT09IGRlZkZhbHNlRWl0aGVyQ2FzZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goY2FuZGlkYXRlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRGdW5jLnJlc2V0KCk7DQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gWzAsIDAsIDBdOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgY2FuZGlkYXRlcy5sZW5ndGg7IG0rKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY291bnRbY2FuZGlkYXRlc1ttXS5ncm91cF0rKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRbZGVmTm9uZV0gPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UmVzdWx0ID0gZGVmRmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UmVzdWx0ID0gZGVmVHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY291bnRbZGVmVHJ1ZV0gKyBjb3VudFtkZWZGYWxzZV0pID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ1J1bnRpbWUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiQW1iaWd1b3VzIHVzZSBvZiBgZGVmYXVsdCgpYCBmb3VuZCB3aGVuIG1hdGNoaW5nIGZvciBgIiArIHRoaXMuZm9ybWF0KGFyZ3MpICsgImAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpLCBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZm9yIChtID0gMDsgbSA8IGNhbmRpZGF0ZXMubGVuZ3RoOyBtKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbbV0uZ3JvdXA7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNhbmRpZGF0ZSA9PT0gZGVmTm9uZSkgfHwgKGNhbmRpZGF0ZSA9PT0gZGVmYXVsdFJlc3VsdCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXhpbiA9IGNhbmRpZGF0ZXNbbV0ubWl4aW47DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1peGluIGluc3RhbmNlb2YgRGVmaW5pdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUnVsZXNldCA9IG1peGluLm9yaWdpbmFsUnVsZXNldCB8fCBtaXhpbjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1peGluID0gbmV3IERlZmluaXRpb24oJycsIFtdLCBtaXhpbi5ydWxlcywgbnVsbCwgZmFsc2UsIG51bGwsIG9yaWdpbmFsUnVsZXNldC52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1peGluLm9yaWdpbmFsUnVsZXNldCA9IG9yaWdpbmFsUnVsZXNldDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3UnVsZXMgPSBtaXhpbi5ldmFsQ2FsbChjb250ZXh0LCBhcmdzLCB0aGlzLmltcG9ydGFudCkucnVsZXM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFZpc2liaWxpdHlUb1JlcGxhY2VtZW50KG5ld1J1bGVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocnVsZXMsIG5ld1J1bGVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgeyBtZXNzYWdlOiBlLm1lc3NhZ2UsIGluZGV4OiB0aGlzLmdldEluZGV4KCksIGZpbGVuYW1lOiB0aGlzLmZpbGVJbmZvKCkuZmlsZW5hbWUsIHN0YWNrOiBlLnN0YWNrIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGVzOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzT25lRm91bmQpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdSdW50aW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIk5vIG1hdGNoaW5nIGRlZmluaXRpb24gd2FzIGZvdW5kIGZvciBgIiArIHRoaXMuZm9ybWF0KGFyZ3MpICsgImAiLA0KICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpLCBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5zZWxlY3Rvci50b0NTUygpLnRyaW0oKSArICIgaXMgdW5kZWZpbmVkIiwNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZ2V0SW5kZXgoKSwgZmlsZW5hbWU6IHRoaXMuZmlsZUluZm8oKS5maWxlbmFtZSB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBfc2V0VmlzaWJpbGl0eVRvUmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChyZXBsYWNlbWVudCkgew0KICAgICAgICAgICAgdmFyIGksIHJ1bGU7DQogICAgICAgICAgICBpZiAodGhpcy5ibG9ja3NWaXNpYmlsaXR5KCkpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcmVwbGFjZW1lbnQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZSA9IHJlcGxhY2VtZW50W2ldOw0KICAgICAgICAgICAgICAgICAgICBydWxlLmFkZFZpc2liaWxpdHlCbG9jaygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZm9ybWF0OiBmdW5jdGlvbiAoYXJncykgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0b3IudG9DU1MoKS50cmltKCkgKyAiKCIgKyAoYXJncyA/IGFyZ3MubWFwKGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgdmFyIGFyZ1ZhbHVlID0gJyc7DQogICAgICAgICAgICAgICAgaWYgKGEubmFtZSkgew0KICAgICAgICAgICAgICAgICAgICBhcmdWYWx1ZSArPSBhLm5hbWUgKyAiOiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhLnZhbHVlLnRvQ1NTKSB7DQogICAgICAgICAgICAgICAgICAgIGFyZ1ZhbHVlICs9IGEudmFsdWUudG9DU1MoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFyZ1ZhbHVlICs9ICc/Pz8nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gYXJnVmFsdWU7DQogICAgICAgICAgICB9KS5qb2luKCcsICcpIDogJycpICsgIikiOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIHRyZWUgPSB7DQogICAgICAgIE5vZGU6IE5vZGUsDQogICAgICAgIENvbG9yOiBDb2xvciwNCiAgICAgICAgQXRSdWxlOiBBdFJ1bGUsDQogICAgICAgIERldGFjaGVkUnVsZXNldDogRGV0YWNoZWRSdWxlc2V0LA0KICAgICAgICBPcGVyYXRpb246IE9wZXJhdGlvbiwNCiAgICAgICAgRGltZW5zaW9uOiBEaW1lbnNpb24sDQogICAgICAgIFVuaXQ6IFVuaXQsDQogICAgICAgIEtleXdvcmQ6IEtleXdvcmQsDQogICAgICAgIFZhcmlhYmxlOiBWYXJpYWJsZSwNCiAgICAgICAgUHJvcGVydHk6IFByb3BlcnR5LA0KICAgICAgICBSdWxlc2V0OiBSdWxlc2V0LA0KICAgICAgICBFbGVtZW50OiBFbGVtZW50LA0KICAgICAgICBBdHRyaWJ1dGU6IEF0dHJpYnV0ZSwNCiAgICAgICAgQ29tYmluYXRvcjogQ29tYmluYXRvciwNCiAgICAgICAgU2VsZWN0b3I6IFNlbGVjdG9yLA0KICAgICAgICBRdW90ZWQ6IFF1b3RlZCwNCiAgICAgICAgRXhwcmVzc2lvbjogRXhwcmVzc2lvbiwNCiAgICAgICAgRGVjbGFyYXRpb246IERlY2xhcmF0aW9uLA0KICAgICAgICBDYWxsOiBDYWxsLA0KICAgICAgICBVUkw6IFVSTCwNCiAgICAgICAgSW1wb3J0OiBJbXBvcnQsDQogICAgICAgIENvbW1lbnQ6IENvbW1lbnQsDQogICAgICAgIEFub255bW91czogQW5vbnltb3VzLA0KICAgICAgICBWYWx1ZTogVmFsdWUsDQogICAgICAgIEphdmFTY3JpcHQ6IEphdmFTY3JpcHQsDQogICAgICAgIEFzc2lnbm1lbnQ6IEFzc2lnbm1lbnQsDQogICAgICAgIENvbmRpdGlvbjogQ29uZGl0aW9uLA0KICAgICAgICBQYXJlbjogUGFyZW4sDQogICAgICAgIE1lZGlhOiBNZWRpYSwNCiAgICAgICAgVW5pY29kZURlc2NyaXB0b3I6IFVuaWNvZGVEZXNjcmlwdG9yLA0KICAgICAgICBOZWdhdGl2ZTogTmVnYXRpdmUsDQogICAgICAgIEV4dGVuZDogRXh0ZW5kLA0KICAgICAgICBWYXJpYWJsZUNhbGw6IFZhcmlhYmxlQ2FsbCwNCiAgICAgICAgTmFtZXNwYWNlVmFsdWU6IE5hbWVzcGFjZVZhbHVlLA0KICAgICAgICBtaXhpbjogew0KICAgICAgICAgICAgQ2FsbDogTWl4aW5DYWxsLA0KICAgICAgICAgICAgRGVmaW5pdGlvbjogRGVmaW5pdGlvbg0KICAgICAgICB9DQogICAgfTsKCiAgICB2YXIgQWJzdHJhY3RGaWxlTWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gQWJzdHJhY3RGaWxlTWFuYWdlcigpIHsNCiAgICAgICAgfQ0KICAgICAgICBBYnN0cmFjdEZpbGVNYW5hZ2VyLnByb3RvdHlwZS5nZXRQYXRoID0gZnVuY3Rpb24gKGZpbGVuYW1lKSB7DQogICAgICAgICAgICB2YXIgaiA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCc/Jyk7DQogICAgICAgICAgICBpZiAoaiA+IDApIHsNCiAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lLnNsaWNlKDAsIGopOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaiA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCcvJyk7DQogICAgICAgICAgICBpZiAoaiA8IDApIHsNCiAgICAgICAgICAgICAgICBqID0gZmlsZW5hbWUubGFzdEluZGV4T2YoJ1xcJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaiA8IDApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gZmlsZW5hbWUuc2xpY2UoMCwgaiArIDEpOw0KICAgICAgICB9Ow0KICAgICAgICBBYnN0cmFjdEZpbGVNYW5hZ2VyLnByb3RvdHlwZS50cnlBcHBlbmRFeHRlbnNpb24gPSBmdW5jdGlvbiAocGF0aCwgZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gLyhcLlthLXpdKiQpfChbXD87XS4qKSQvLnRlc3QocGF0aCkgPyBwYXRoIDogcGF0aCArIGV4dDsNCiAgICAgICAgfTsNCiAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlci5wcm90b3R5cGUudHJ5QXBwZW5kTGVzc0V4dGVuc2lvbiA9IGZ1bmN0aW9uIChwYXRoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy50cnlBcHBlbmRFeHRlbnNpb24ocGF0aCwgJy5sZXNzJyk7DQogICAgICAgIH07DQogICAgICAgIEFic3RyYWN0RmlsZU1hbmFnZXIucHJvdG90eXBlLnN1cHBvcnRzU3luYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlci5wcm90b3R5cGUuYWx3YXlzTWFrZVBhdGhzQWJzb2x1dGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH07DQogICAgICAgIEFic3RyYWN0RmlsZU1hbmFnZXIucHJvdG90eXBlLmlzUGF0aEFic29sdXRlID0gZnVuY3Rpb24gKGZpbGVuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gKC9eKD86W2Etei1dKzp8XC98XFx8IykvaSkudGVzdChmaWxlbmFtZSk7DQogICAgICAgIH07DQogICAgICAgIC8vIFRPRE86IHB1bGwgb3V0IC8gcmVwbGFjZT8NCiAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlci5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uIChiYXNlUGF0aCwgbGF0ZXJQYXRoKSB7DQogICAgICAgICAgICBpZiAoIWJhc2VQYXRoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVyUGF0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBiYXNlUGF0aCArIGxhdGVyUGF0aDsNCiAgICAgICAgfTsNCiAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlci5wcm90b3R5cGUucGF0aERpZmYgPSBmdW5jdGlvbiAodXJsLCBiYXNlVXJsKSB7DQogICAgICAgICAgICAvLyBkaWZmIGJldHdlZW4gdHdvIHBhdGhzIHRvIGNyZWF0ZSBhIHJlbGF0aXZlIHBhdGgNCiAgICAgICAgICAgIHZhciB1cmxQYXJ0cyA9IHRoaXMuZXh0cmFjdFVybFBhcnRzKHVybCk7DQogICAgICAgICAgICB2YXIgYmFzZVVybFBhcnRzID0gdGhpcy5leHRyYWN0VXJsUGFydHMoYmFzZVVybCk7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBtYXg7DQogICAgICAgICAgICB2YXIgdXJsRGlyZWN0b3JpZXM7DQogICAgICAgICAgICB2YXIgYmFzZVVybERpcmVjdG9yaWVzOw0KICAgICAgICAgICAgdmFyIGRpZmYgPSAnJzsNCiAgICAgICAgICAgIGlmICh1cmxQYXJ0cy5ob3N0UGFydCAhPT0gYmFzZVVybFBhcnRzLmhvc3RQYXJ0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgoYmFzZVVybFBhcnRzLmRpcmVjdG9yaWVzLmxlbmd0aCwgdXJsUGFydHMuZGlyZWN0b3JpZXMubGVuZ3RoKTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBtYXg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmIChiYXNlVXJsUGFydHMuZGlyZWN0b3JpZXNbaV0gIT09IHVybFBhcnRzLmRpcmVjdG9yaWVzW2ldKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJhc2VVcmxEaXJlY3RvcmllcyA9IGJhc2VVcmxQYXJ0cy5kaXJlY3Rvcmllcy5zbGljZShpKTsNCiAgICAgICAgICAgIHVybERpcmVjdG9yaWVzID0gdXJsUGFydHMuZGlyZWN0b3JpZXMuc2xpY2UoaSk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZVVybERpcmVjdG9yaWVzLmxlbmd0aCAtIDE7IGkrKykgew0KICAgICAgICAgICAgICAgIGRpZmYgKz0gJy4uLyc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdXJsRGlyZWN0b3JpZXMubGVuZ3RoIC0gMTsgaSsrKSB7DQogICAgICAgICAgICAgICAgZGlmZiArPSB1cmxEaXJlY3Rvcmllc1tpXSArICIvIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBkaWZmOw0KICAgICAgICB9Ow0KICAgICAgICAvLyBoZWxwZXIgZnVuY3Rpb24sIG5vdCBwYXJ0IG9mIEFQSQ0KICAgICAgICBBYnN0cmFjdEZpbGVNYW5hZ2VyLnByb3RvdHlwZS5leHRyYWN0VXJsUGFydHMgPSBmdW5jdGlvbiAodXJsLCBiYXNlVXJsKSB7DQogICAgICAgICAgICAvLyB1cmxQYXJ0c1sxXSA9IHByb3RvY29sOi8vaG9zdG5hbWUvIE9SIC8NCiAgICAgICAgICAgIC8vIHVybFBhcnRzWzJdID0gLyBpZiBwYXRoIHJlbGF0aXZlIHRvIGhvc3QgYmFzZQ0KICAgICAgICAgICAgLy8gdXJsUGFydHNbM10gPSBkaXJlY3Rvcmllcw0KICAgICAgICAgICAgLy8gdXJsUGFydHNbNF0gPSBmaWxlbmFtZQ0KICAgICAgICAgICAgLy8gdXJsUGFydHNbNV0gPSBwYXJhbWV0ZXJzDQogICAgICAgICAgICB2YXIgdXJsUGFydHNSZWdleCA9IC9eKCg/OlthLXotXSs6KT9cL3syfSg/OlteXC9cPyNdKlwvKXwoW1wvXFxdKSk/KCg/OlteXC9cXFw/I10qW1wvXFxdKSopKFteXC9cXFw/I10qKShbI1w/XS4qKT8kL2k7DQogICAgICAgICAgICB2YXIgdXJsUGFydHMgPSB1cmwubWF0Y2godXJsUGFydHNSZWdleCk7DQogICAgICAgICAgICB2YXIgcmV0dXJuZXIgPSB7fTsNCiAgICAgICAgICAgIHZhciByYXdEaXJlY3RvcmllcyA9IFtdOw0KICAgICAgICAgICAgdmFyIGRpcmVjdG9yaWVzID0gW107DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBiYXNlVXJsUGFydHM7DQogICAgICAgICAgICBpZiAoIXVybFBhcnRzKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgcGFyc2Ugc2hlZXQgaHJlZiAtICciICsgdXJsICsgIiciKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIFN0eWxlc2hlZXRzIGluIElFIGRvbid0IGFsd2F5cyByZXR1cm4gdGhlIGZ1bGwgcGF0aA0KICAgICAgICAgICAgaWYgKGJhc2VVcmwgJiYgKCF1cmxQYXJ0c1sxXSB8fCB1cmxQYXJ0c1syXSkpIHsNCiAgICAgICAgICAgICAgICBiYXNlVXJsUGFydHMgPSBiYXNlVXJsLm1hdGNoKHVybFBhcnRzUmVnZXgpOw0KICAgICAgICAgICAgICAgIGlmICghYmFzZVVybFBhcnRzKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IHBhcnNlIHBhZ2UgdXJsIC0gJyIgKyBiYXNlVXJsICsgIiciKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdXJsUGFydHNbMV0gPSB1cmxQYXJ0c1sxXSB8fCBiYXNlVXJsUGFydHNbMV0gfHwgJyc7DQogICAgICAgICAgICAgICAgaWYgKCF1cmxQYXJ0c1syXSkgew0KICAgICAgICAgICAgICAgICAgICB1cmxQYXJ0c1szXSA9IGJhc2VVcmxQYXJ0c1szXSArIHVybFBhcnRzWzNdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh1cmxQYXJ0c1szXSkgew0KICAgICAgICAgICAgICAgIHJhd0RpcmVjdG9yaWVzID0gdXJsUGFydHNbM10ucmVwbGFjZSgvXFwvZywgJy8nKS5zcGxpdCgnLycpOw0KICAgICAgICAgICAgICAgIC8vIGNvbGxhcHNlICcuLicgYW5kIHNraXAgJy4nDQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHJhd0RpcmVjdG9yaWVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyYXdEaXJlY3Rvcmllc1tpXSA9PT0gJy4uJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3JpZXMucG9wKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmF3RGlyZWN0b3JpZXNbaV0gIT09ICcuJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3JpZXMucHVzaChyYXdEaXJlY3Rvcmllc1tpXSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm5lci5ob3N0UGFydCA9IHVybFBhcnRzWzFdOw0KICAgICAgICAgICAgcmV0dXJuZXIuZGlyZWN0b3JpZXMgPSBkaXJlY3RvcmllczsNCiAgICAgICAgICAgIHJldHVybmVyLnJhd1BhdGggPSAodXJsUGFydHNbMV0gfHwgJycpICsgcmF3RGlyZWN0b3JpZXMuam9pbignLycpOw0KICAgICAgICAgICAgcmV0dXJuZXIucGF0aCA9ICh1cmxQYXJ0c1sxXSB8fCAnJykgKyBkaXJlY3Rvcmllcy5qb2luKCcvJyk7DQogICAgICAgICAgICByZXR1cm5lci5maWxlbmFtZSA9IHVybFBhcnRzWzRdOw0KICAgICAgICAgICAgcmV0dXJuZXIuZmlsZVVybCA9IHJldHVybmVyLnBhdGggKyAodXJsUGFydHNbNF0gfHwgJycpOw0KICAgICAgICAgICAgcmV0dXJuZXIudXJsID0gcmV0dXJuZXIuZmlsZVVybCArICh1cmxQYXJ0c1s1XSB8fCAnJyk7DQogICAgICAgICAgICByZXR1cm4gcmV0dXJuZXI7DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBBYnN0cmFjdEZpbGVNYW5hZ2VyOw0KICAgIH0oKSk7CgogICAgdmFyIEFic3RyYWN0UGx1Z2luTG9hZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBBYnN0cmFjdFBsdWdpbkxvYWRlcigpIHsNCiAgICAgICAgICAgIC8vIEltcGxlbWVudGVkIGJ5IE5vZGUuanMgcGx1Z2luIGxvYWRlcg0KICAgICAgICAgICAgdGhpcy5yZXF1aXJlID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgICAgICBBYnN0cmFjdFBsdWdpbkxvYWRlci5wcm90b3R5cGUuZXZhbFBsdWdpbiA9IGZ1bmN0aW9uIChjb250ZW50cywgY29udGV4dCwgaW1wb3J0cywgcGx1Z2luT3B0aW9ucywgZmlsZUluZm8pIHsNCiAgICAgICAgICAgIHZhciBsb2FkZXIsIHJlZ2lzdHJ5LCBwbHVnaW5PYmosIGxvY2FsTW9kdWxlLCBwbHVnaW5NYW5hZ2VyLCBmaWxlbmFtZSwgcmVzdWx0Ow0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlciA9IGNvbnRleHQucGx1Z2luTWFuYWdlcjsNCiAgICAgICAgICAgIGlmIChmaWxlSW5mbykgew0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmlsZUluZm8gPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gZmlsZUluZm87DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVJbmZvLmZpbGVuYW1lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBzaG9ydG5hbWUgPSAobmV3IHRoaXMubGVzcy5GaWxlTWFuYWdlcigpKS5leHRyYWN0VXJsUGFydHMoZmlsZW5hbWUpLmZpbGVuYW1lOw0KICAgICAgICAgICAgaWYgKGZpbGVuYW1lKSB7DQogICAgICAgICAgICAgICAgcGx1Z2luT2JqID0gcGx1Z2luTWFuYWdlci5nZXQoZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgIGlmIChwbHVnaW5PYmopIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy50cnlTZXRPcHRpb25zKHBsdWdpbk9iaiwgZmlsZW5hbWUsIHNob3J0bmFtZSwgcGx1Z2luT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW5PYmoudXNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luT2JqLnVzZS5jYWxsKHRoaXMuY29udGV4dCwgcGx1Z2luT2JqKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZS5tZXNzYWdlID0gZS5tZXNzYWdlIHx8ICdFcnJvciBkdXJpbmcgQHBsdWdpbiBjYWxsJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGVzc0Vycm9yKGUsIGltcG9ydHMsIGZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGx1Z2luT2JqOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxvY2FsTW9kdWxlID0gew0KICAgICAgICAgICAgICAgIGV4cG9ydHM6IHt9LA0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXI6IHBsdWdpbk1hbmFnZXIsDQogICAgICAgICAgICAgICAgZmlsZUluZm86IGZpbGVJbmZvDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgcmVnaXN0cnkgPSBmdW5jdGlvblJlZ2lzdHJ5LmNyZWF0ZSgpOw0KICAgICAgICAgICAgdmFyIHJlZ2lzdGVyUGx1Z2luID0gZnVuY3Rpb24gKG9iaikgew0KICAgICAgICAgICAgICAgIHBsdWdpbk9iaiA9IG9iajsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGxvYWRlciA9IG5ldyBGdW5jdGlvbignbW9kdWxlJywgJ3JlcXVpcmUnLCAncmVnaXN0ZXJQbHVnaW4nLCAnZnVuY3Rpb25zJywgJ3RyZWUnLCAnbGVzcycsICdmaWxlSW5mbycsIGNvbnRlbnRzKTsNCiAgICAgICAgICAgICAgICBsb2FkZXIobG9jYWxNb2R1bGUsIHRoaXMucmVxdWlyZShmaWxlbmFtZSksIHJlZ2lzdGVyUGx1Z2luLCByZWdpc3RyeSwgdGhpcy5sZXNzLnRyZWUsIHRoaXMubGVzcywgZmlsZUluZm8pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExlc3NFcnJvcihlLCBpbXBvcnRzLCBmaWxlbmFtZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIXBsdWdpbk9iaikgew0KICAgICAgICAgICAgICAgIHBsdWdpbk9iaiA9IGxvY2FsTW9kdWxlLmV4cG9ydHM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBwbHVnaW5PYmogPSB0aGlzLnZhbGlkYXRlUGx1Z2luKHBsdWdpbk9iaiwgZmlsZW5hbWUsIHNob3J0bmFtZSk7DQogICAgICAgICAgICBpZiAocGx1Z2luT2JqIGluc3RhbmNlb2YgTGVzc0Vycm9yKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbk9iajsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChwbHVnaW5PYmopIHsNCiAgICAgICAgICAgICAgICBwbHVnaW5PYmouaW1wb3J0cyA9IGltcG9ydHM7DQogICAgICAgICAgICAgICAgcGx1Z2luT2JqLmZpbGVuYW1lID0gZmlsZW5hbWU7DQogICAgICAgICAgICAgICAgLy8gRm9yIDwgMy54IChvciB1bnNwZWNpZmllZCBtaW5WZXJzaW9uKSAtIHNldE9wdGlvbnMoKSBiZWZvcmUgaW5zdGFsbCgpDQogICAgICAgICAgICAgICAgaWYgKCFwbHVnaW5PYmoubWluVmVyc2lvbiB8fCB0aGlzLmNvbXBhcmVWZXJzaW9uKCczLjAuMCcsIHBsdWdpbk9iai5taW5WZXJzaW9uKSA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy50cnlTZXRPcHRpb25zKHBsdWdpbk9iaiwgZmlsZW5hbWUsIHNob3J0bmFtZSwgcGx1Z2luT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gUnVuIG9uIGZpcnN0IGxvYWQNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmFkZFBsdWdpbihwbHVnaW5PYmosIGZpbGVJbmZvLmZpbGVuYW1lLCByZWdpc3RyeSk7DQogICAgICAgICAgICAgICAgcGx1Z2luT2JqLmZ1bmN0aW9ucyA9IHJlZ2lzdHJ5LmdldExvY2FsRnVuY3Rpb25zKCk7DQogICAgICAgICAgICAgICAgLy8gTmVlZCB0byBjYWxsIHNldE9wdGlvbnMgYWdhaW4gYmVjYXVzZSB0aGUgcGx1Z2luT2JqIG1pZ2h0IGhhdmUgZnVuY3Rpb25zDQogICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy50cnlTZXRPcHRpb25zKHBsdWdpbk9iaiwgZmlsZW5hbWUsIHNob3J0bmFtZSwgcGx1Z2luT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBSdW4gZXZlcnkgQHBsdWdpbiBjYWxsDQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbk9iai51c2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk9iai51c2UuY2FsbCh0aGlzLmNvbnRleHQsIHBsdWdpbk9iaik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZS5tZXNzYWdlID0gZS5tZXNzYWdlIHx8ICdFcnJvciBkdXJpbmcgQHBsdWdpbiBjYWxsJzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMZXNzRXJyb3IoZSwgaW1wb3J0cywgZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGVzc0Vycm9yKHsgbWVzc2FnZTogJ05vdCBhIHZhbGlkIHBsdWdpbicgfSwgaW1wb3J0cywgZmlsZW5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHBsdWdpbk9iajsNCiAgICAgICAgfTsNCiAgICAgICAgQWJzdHJhY3RQbHVnaW5Mb2FkZXIucHJvdG90eXBlLnRyeVNldE9wdGlvbnMgPSBmdW5jdGlvbiAocGx1Z2luLCBmaWxlbmFtZSwgbmFtZSwgb3B0aW9ucykgew0KICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgIXBsdWdpbi5zZXRPcHRpb25zKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiT3B0aW9ucyBoYXZlIGJlZW4gcHJvdmlkZWQgYnV0IHRoZSBwbHVnaW4gIiArIG5hbWUgKyAiIGRvZXMgbm90IHN1cHBvcnQgYW55IG9wdGlvbnMuIg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0T3B0aW9ucyAmJiBwbHVnaW4uc2V0T3B0aW9ucyhvcHRpb25zKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMZXNzRXJyb3IoZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIEFic3RyYWN0UGx1Z2luTG9hZGVyLnByb3RvdHlwZS52YWxpZGF0ZVBsdWdpbiA9IGZ1bmN0aW9uIChwbHVnaW4sIGZpbGVuYW1lLCBuYW1lKSB7DQogICAgICAgICAgICBpZiAocGx1Z2luKSB7DQogICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBwbHVnaW5zIGJlaW5nIGEgZnVuY3Rpb24NCiAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IHRoZSBwbHVnaW4gY2FuIGJlIG1vcmUgdXNhYmxlIHByb2dyYW1tYXRpY2FsbHkNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBsdWdpbiA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgICAgICBwbHVnaW4gPSBuZXcgcGx1Z2luKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChwbHVnaW4ubWluVmVyc2lvbikgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21wYXJlVmVyc2lvbihwbHVnaW4ubWluVmVyc2lvbiwgdGhpcy5sZXNzLnZlcnNpb24pIDwgMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJQbHVnaW4gIiArIG5hbWUgKyAiIHJlcXVpcmVzIHZlcnNpb24gIiArIHRoaXMudmVyc2lvblRvU3RyaW5nKHBsdWdpbi5taW5WZXJzaW9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9Ow0KICAgICAgICBBYnN0cmFjdFBsdWdpbkxvYWRlci5wcm90b3R5cGUuY29tcGFyZVZlcnNpb24gPSBmdW5jdGlvbiAoYVZlcnNpb24sIGJWZXJzaW9uKSB7DQogICAgICAgICAgICBpZiAodHlwZW9mIGFWZXJzaW9uID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIGFWZXJzaW9uID0gYVZlcnNpb24ubWF0Y2goL14oXGQrKVwuPyhcZCspP1wuPyhcZCspPy8pOw0KICAgICAgICAgICAgICAgIGFWZXJzaW9uLnNoaWZ0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFWZXJzaW9uLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKGFWZXJzaW9uW2ldICE9PSBiVmVyc2lvbltpXSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYVZlcnNpb25baV0pID4gcGFyc2VJbnQoYlZlcnNpb25baV0pID8gLTEgOiAxOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9Ow0KICAgICAgICBBYnN0cmFjdFBsdWdpbkxvYWRlci5wcm90b3R5cGUudmVyc2lvblRvU3RyaW5nID0gZnVuY3Rpb24gKHZlcnNpb24pIHsNCiAgICAgICAgICAgIHZhciB2ZXJzaW9uU3RyaW5nID0gJyc7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnNpb24ubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2ZXJzaW9uU3RyaW5nICs9ICh2ZXJzaW9uU3RyaW5nID8gJy4nIDogJycpICsgdmVyc2lvbltpXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uU3RyaW5nOw0KICAgICAgICB9Ow0KICAgICAgICBBYnN0cmFjdFBsdWdpbkxvYWRlci5wcm90b3R5cGUucHJpbnRVc2FnZSA9IGZ1bmN0aW9uIChwbHVnaW5zKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdWdpbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnByaW50VXNhZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnByaW50VXNhZ2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBBYnN0cmFjdFBsdWdpbkxvYWRlcjsNCiAgICB9KCkpOwoKICAgIHZhciBfdmlzaXRBcmdzID0geyB2aXNpdERlZXBlcjogdHJ1ZSB9Ow0KICAgIHZhciBfaGFzSW5kZXhlZCA9IGZhbHNlOw0KICAgIGZ1bmN0aW9uIF9ub29wKG5vZGUpIHsNCiAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGluZGV4Tm9kZVR5cGVzKHBhcmVudCwgdGlja2VyKSB7DQogICAgICAgIC8vIGFkZCAudHlwZUluZGV4IHRvIHRyZWUgbm9kZSB0eXBlcyBmb3IgbG9va3VwIHRhYmxlDQogICAgICAgIHZhciBrZXksIGNoaWxkOw0KICAgICAgICBmb3IgKGtleSBpbiBwYXJlbnQpIHsNCiAgICAgICAgICAgIC8qIGVzbGludCBndWFyZC1mb3ItaW46IDAgKi8NCiAgICAgICAgICAgIGNoaWxkID0gcGFyZW50W2tleV07DQogICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBjaGlsZCkgew0KICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzoNCiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGJvdW5kIGZ1bmN0aW9ucyBkaXJlY3RseSBvbiB0cmVlIHdoaWNoIGRvIG5vdCBoYXZlIGEgcHJvdG90eXBlDQogICAgICAgICAgICAgICAgICAgIC8vIG9yIGFyZW4ndCBub2Rlcw0KICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQucHJvdG90eXBlICYmIGNoaWxkLnByb3RvdHlwZS50eXBlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5wcm90b3R5cGUudHlwZUluZGV4ID0gdGlja2VyKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzoNCiAgICAgICAgICAgICAgICAgICAgdGlja2VyID0gaW5kZXhOb2RlVHlwZXMoY2hpbGQsIHRpY2tlcik7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0aWNrZXI7DQogICAgfQ0KICAgIHZhciBWaXNpdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBWaXNpdG9yKGltcGxlbWVudGF0aW9uKSB7DQogICAgICAgICAgICB0aGlzLl9pbXBsZW1lbnRhdGlvbiA9IGltcGxlbWVudGF0aW9uOw0KICAgICAgICAgICAgdGhpcy5fdmlzaXRJbkNhY2hlID0ge307DQogICAgICAgICAgICB0aGlzLl92aXNpdE91dENhY2hlID0ge307DQogICAgICAgICAgICBpZiAoIV9oYXNJbmRleGVkKSB7DQogICAgICAgICAgICAgICAgaW5kZXhOb2RlVHlwZXModHJlZSwgMSk7DQogICAgICAgICAgICAgICAgX2hhc0luZGV4ZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIFZpc2l0b3IucHJvdG90eXBlLnZpc2l0ID0gZnVuY3Rpb24gKG5vZGUpIHsNCiAgICAgICAgICAgIGlmICghbm9kZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG5vZGVUeXBlSW5kZXggPSBub2RlLnR5cGVJbmRleDsNCiAgICAgICAgICAgIGlmICghbm9kZVR5cGVJbmRleCkgew0KICAgICAgICAgICAgICAgIC8vIE1peGluQ2FsbCBhcmdzIGFyZW4ndCBhIG5vZGUgdHlwZT8NCiAgICAgICAgICAgICAgICBpZiAobm9kZS52YWx1ZSAmJiBub2RlLnZhbHVlLnR5cGVJbmRleCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2l0KG5vZGUudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBpbXBsID0gdGhpcy5faW1wbGVtZW50YXRpb247DQogICAgICAgICAgICB2YXIgZnVuYyA9IHRoaXMuX3Zpc2l0SW5DYWNoZVtub2RlVHlwZUluZGV4XTsNCiAgICAgICAgICAgIHZhciBmdW5jT3V0ID0gdGhpcy5fdmlzaXRPdXRDYWNoZVtub2RlVHlwZUluZGV4XTsNCiAgICAgICAgICAgIHZhciB2aXNpdEFyZ3MgPSBfdmlzaXRBcmdzOw0KICAgICAgICAgICAgdmFyIGZuTmFtZTsNCiAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IHRydWU7DQogICAgICAgICAgICBpZiAoIWZ1bmMpIHsNCiAgICAgICAgICAgICAgICBmbk5hbWUgPSAidmlzaXQiICsgbm9kZS50eXBlOw0KICAgICAgICAgICAgICAgIGZ1bmMgPSBpbXBsW2ZuTmFtZV0gfHwgX25vb3A7DQogICAgICAgICAgICAgICAgZnVuY091dCA9IGltcGxbZm5OYW1lICsgIk91dCJdIHx8IF9ub29wOw0KICAgICAgICAgICAgICAgIHRoaXMuX3Zpc2l0SW5DYWNoZVtub2RlVHlwZUluZGV4XSA9IGZ1bmM7DQogICAgICAgICAgICAgICAgdGhpcy5fdmlzaXRPdXRDYWNoZVtub2RlVHlwZUluZGV4XSA9IGZ1bmNPdXQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZnVuYyAhPT0gX25vb3ApIHsNCiAgICAgICAgICAgICAgICB2YXIgbmV3Tm9kZSA9IGZ1bmMuY2FsbChpbXBsLCBub2RlLCB2aXNpdEFyZ3MpOw0KICAgICAgICAgICAgICAgIGlmIChub2RlICYmIGltcGwuaXNSZXBsYWNpbmcpIHsNCiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ld05vZGU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHZpc2l0QXJncy52aXNpdERlZXBlciAmJiBub2RlKSB7DQogICAgICAgICAgICAgICAgaWYgKG5vZGUubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBjbnQgPSBub2RlLmxlbmd0aDsgaSA8IGNudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZVtpXS5hY2NlcHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlW2ldLmFjY2VwdCh0aGlzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChub2RlLmFjY2VwdCkgew0KICAgICAgICAgICAgICAgICAgICBub2RlLmFjY2VwdCh0aGlzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZnVuY091dCAhPSBfbm9vcCkgew0KICAgICAgICAgICAgICAgIGZ1bmNPdXQuY2FsbChpbXBsLCBub2RlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICB9Ow0KICAgICAgICBWaXNpdG9yLnByb3RvdHlwZS52aXNpdEFycmF5ID0gZnVuY3Rpb24gKG5vZGVzLCBub25SZXBsYWNpbmcpIHsNCiAgICAgICAgICAgIGlmICghbm9kZXMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgY250ID0gbm9kZXMubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICAvLyBOb24tcmVwbGFjaW5nDQogICAgICAgICAgICBpZiAobm9uUmVwbGFjaW5nIHx8ICF0aGlzLl9pbXBsZW1lbnRhdGlvbi5pc1JlcGxhY2luZykgew0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjbnQ7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2l0KG5vZGVzW2ldKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gUmVwbGFjaW5nDQogICAgICAgICAgICB2YXIgb3V0ID0gW107DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY250OyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgZXZhbGQgPSB0aGlzLnZpc2l0KG5vZGVzW2ldKTsNCiAgICAgICAgICAgICAgICBpZiAoZXZhbGQgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKCFldmFsZC5zcGxpY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goZXZhbGQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmFsZC5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGF0dGVuKGV2YWxkLCBvdXQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBvdXQ7DQogICAgICAgIH07DQogICAgICAgIFZpc2l0b3IucHJvdG90eXBlLmZsYXR0ZW4gPSBmdW5jdGlvbiAoYXJyLCBvdXQpIHsNCiAgICAgICAgICAgIGlmICghb3V0KSB7DQogICAgICAgICAgICAgICAgb3V0ID0gW107DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgY250LCBpLCBpdGVtLCBuZXN0ZWRDbnQsIGosIG5lc3RlZEl0ZW07DQogICAgICAgICAgICBmb3IgKGkgPSAwLCBjbnQgPSBhcnIubGVuZ3RoOyBpIDwgY250OyBpKyspIHsNCiAgICAgICAgICAgICAgICBpdGVtID0gYXJyW2ldOw0KICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghaXRlbS5zcGxpY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goaXRlbSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmb3IgKGogPSAwLCBuZXN0ZWRDbnQgPSBpdGVtLmxlbmd0aDsgaiA8IG5lc3RlZENudDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgIG5lc3RlZEl0ZW0gPSBpdGVtW2pdOw0KICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGVkSXRlbSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIW5lc3RlZEl0ZW0uc3BsaWNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChuZXN0ZWRJdGVtKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXN0ZWRJdGVtLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGF0dGVuKG5lc3RlZEl0ZW0sIG91dCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gb3V0Ow0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm4gVmlzaXRvcjsNCiAgICB9KCkpOwoKICAgIHZhciBJbXBvcnRTZXF1ZW5jZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgICAgIGZ1bmN0aW9uIEltcG9ydFNlcXVlbmNlcihvblNlcXVlbmNlckVtcHR5KSB7DQogICAgICAgICAgICB0aGlzLmltcG9ydHMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMudmFyaWFibGVJbXBvcnRzID0gW107DQogICAgICAgICAgICB0aGlzLl9vblNlcXVlbmNlckVtcHR5ID0gb25TZXF1ZW5jZXJFbXB0eTsNCiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnREZXB0aCA9IDA7DQogICAgICAgIH0NCiAgICAgICAgSW1wb3J0U2VxdWVuY2VyLnByb3RvdHlwZS5hZGRJbXBvcnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsNCiAgICAgICAgICAgIHZhciBpbXBvcnRTZXF1ZW5jZXIgPSB0aGlzLCBpbXBvcnRJdGVtID0gew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjaywNCiAgICAgICAgICAgICAgICBhcmdzOiBudWxsLA0KICAgICAgICAgICAgICAgIGlzUmVhZHk6IGZhbHNlDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdGhpcy5pbXBvcnRzLnB1c2goaW1wb3J0SXRlbSk7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGltcG9ydEl0ZW0uYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7DQogICAgICAgICAgICAgICAgaW1wb3J0SXRlbS5pc1JlYWR5ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBpbXBvcnRTZXF1ZW5jZXIudHJ5UnVuKCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KICAgICAgICBJbXBvcnRTZXF1ZW5jZXIucHJvdG90eXBlLmFkZFZhcmlhYmxlSW1wb3J0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7DQogICAgICAgICAgICB0aGlzLnZhcmlhYmxlSW1wb3J0cy5wdXNoKGNhbGxiYWNrKTsNCiAgICAgICAgfTsNCiAgICAgICAgSW1wb3J0U2VxdWVuY2VyLnByb3RvdHlwZS50cnlSdW4gPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLl9jdXJyZW50RGVwdGgrKzsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuaW1wb3J0cy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1wb3J0SXRlbSA9IHRoaXMuaW1wb3J0c1swXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW1wb3J0SXRlbS5pc1JlYWR5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRzID0gdGhpcy5pbXBvcnRzLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0SXRlbS5jYWxsYmFjay5hcHBseShudWxsLCBpbXBvcnRJdGVtLmFyZ3MpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhcmlhYmxlSW1wb3J0cy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWJsZUltcG9ydCA9IHRoaXMudmFyaWFibGVJbXBvcnRzWzBdOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZhcmlhYmxlSW1wb3J0cyA9IHRoaXMudmFyaWFibGVJbXBvcnRzLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZUltcG9ydCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnREZXB0aC0tOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnREZXB0aCA9PT0gMCAmJiB0aGlzLl9vblNlcXVlbmNlckVtcHR5KSB7DQogICAgICAgICAgICAgICAgdGhpcy5fb25TZXF1ZW5jZXJFbXB0eSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm4gSW1wb3J0U2VxdWVuY2VyOw0KICAgIH0oKSk7CgogICAgdmFyIEltcG9ydFZpc2l0b3IgPSBmdW5jdGlvbiAoaW1wb3J0ZXIsIGZpbmlzaCkgew0KICAgICAgICB0aGlzLl92aXNpdG9yID0gbmV3IFZpc2l0b3IodGhpcyk7DQogICAgICAgIHRoaXMuX2ltcG9ydGVyID0gaW1wb3J0ZXI7DQogICAgICAgIHRoaXMuX2ZpbmlzaCA9IGZpbmlzaDsNCiAgICAgICAgdGhpcy5jb250ZXh0ID0gbmV3IGNvbnRleHRzLkV2YWwoKTsNCiAgICAgICAgdGhpcy5pbXBvcnRDb3VudCA9IDA7DQogICAgICAgIHRoaXMub25jZUZpbGVEZXRlY3Rpb25NYXAgPSB7fTsNCiAgICAgICAgdGhpcy5yZWN1cnNpb25EZXRlY3RvciA9IHt9Ow0KICAgICAgICB0aGlzLl9zZXF1ZW5jZXIgPSBuZXcgSW1wb3J0U2VxdWVuY2VyKHRoaXMuX29uU2VxdWVuY2VyRW1wdHkuYmluZCh0aGlzKSk7DQogICAgfTsNCiAgICBJbXBvcnRWaXNpdG9yLnByb3RvdHlwZSA9IHsNCiAgICAgICAgaXNSZXBsYWNpbmc6IGZhbHNlLA0KICAgICAgICBydW46IGZ1bmN0aW9uIChyb290KSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgdGhlIGNvbnRlbnRzDQogICAgICAgICAgICAgICAgdGhpcy5fdmlzaXRvci52aXNpdChyb290KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmlzRmluaXNoZWQgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5fc2VxdWVuY2VyLnRyeVJ1bigpOw0KICAgICAgICB9LA0KICAgICAgICBfb25TZXF1ZW5jZXJFbXB0eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLmlzRmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLl9maW5pc2godGhpcy5lcnJvcik7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0SW1wb3J0OiBmdW5jdGlvbiAoaW1wb3J0Tm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2YXIgaW5saW5lQ1NTID0gaW1wb3J0Tm9kZS5vcHRpb25zLmlubGluZTsNCiAgICAgICAgICAgIGlmICghaW1wb3J0Tm9kZS5jc3MgfHwgaW5saW5lQ1NTKSB7DQogICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgY29udGV4dHMuRXZhbCh0aGlzLmNvbnRleHQsIGNvcHlBcnJheSh0aGlzLmNvbnRleHQuZnJhbWVzKSk7DQogICAgICAgICAgICAgICAgdmFyIGltcG9ydFBhcmVudCA9IGNvbnRleHQuZnJhbWVzWzBdOw0KICAgICAgICAgICAgICAgIHRoaXMuaW1wb3J0Q291bnQrKzsNCiAgICAgICAgICAgICAgICBpZiAoaW1wb3J0Tm9kZS5pc1ZhcmlhYmxlSW1wb3J0KCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VxdWVuY2VyLmFkZFZhcmlhYmxlSW1wb3J0KHRoaXMucHJvY2Vzc0ltcG9ydE5vZGUuYmluZCh0aGlzLCBpbXBvcnROb2RlLCBjb250ZXh0LCBpbXBvcnRQYXJlbnQpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ltcG9ydE5vZGUoaW1wb3J0Tm9kZSwgY29udGV4dCwgaW1wb3J0UGFyZW50KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgcHJvY2Vzc0ltcG9ydE5vZGU6IGZ1bmN0aW9uIChpbXBvcnROb2RlLCBjb250ZXh0LCBpbXBvcnRQYXJlbnQpIHsNCiAgICAgICAgICAgIHZhciBldmFsZEltcG9ydE5vZGU7DQogICAgICAgICAgICB2YXIgaW5saW5lQ1NTID0gaW1wb3J0Tm9kZS5vcHRpb25zLmlubGluZTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgZXZhbGRJbXBvcnROb2RlID0gaW1wb3J0Tm9kZS5ldmFsRm9ySW1wb3J0KGNvbnRleHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoIWUuZmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgZS5pbmRleCA9IGltcG9ydE5vZGUuZ2V0SW5kZXgoKTsNCiAgICAgICAgICAgICAgICAgICAgZS5maWxlbmFtZSA9IGltcG9ydE5vZGUuZmlsZUluZm8oKS5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gYXR0ZW1wdCB0byBldmFsIHByb3Blcmx5IGFuZCB0cmVhdCBhcyBjc3MNCiAgICAgICAgICAgICAgICBpbXBvcnROb2RlLmNzcyA9IHRydWU7DQogICAgICAgICAgICAgICAgLy8gaWYgdGhhdCBmYWlscywgdGhpcyBlcnJvciB3aWxsIGJlIHRocm93bg0KICAgICAgICAgICAgICAgIGltcG9ydE5vZGUuZXJyb3IgPSBlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGV2YWxkSW1wb3J0Tm9kZSAmJiAoIWV2YWxkSW1wb3J0Tm9kZS5jc3MgfHwgaW5saW5lQ1NTKSkgew0KICAgICAgICAgICAgICAgIGlmIChldmFsZEltcG9ydE5vZGUub3B0aW9ucy5tdWx0aXBsZSkgew0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmltcG9ydE11bHRpcGxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gdHJ5IGFwcGVuZGluZyBpZiB3ZSBoYXZlbid0IGRldGVybWluZWQgaWYgaXQgaXMgY3NzIG9yIG5vdA0KICAgICAgICAgICAgICAgIHZhciB0cnlBcHBlbmRMZXNzRXh0ZW5zaW9uID0gZXZhbGRJbXBvcnROb2RlLmNzcyA9PT0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1wb3J0UGFyZW50LnJ1bGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRQYXJlbnQucnVsZXNbaV0gPT09IGltcG9ydE5vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydFBhcmVudC5ydWxlc1tpXSA9IGV2YWxkSW1wb3J0Tm9kZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBvbkltcG9ydGVkID0gdGhpcy5vbkltcG9ydGVkLmJpbmQodGhpcywgZXZhbGRJbXBvcnROb2RlLCBjb250ZXh0KSwgc2VxdWVuY2VkT25JbXBvcnRlZCA9IHRoaXMuX3NlcXVlbmNlci5hZGRJbXBvcnQob25JbXBvcnRlZCk7DQogICAgICAgICAgICAgICAgdGhpcy5faW1wb3J0ZXIucHVzaChldmFsZEltcG9ydE5vZGUuZ2V0UGF0aCgpLCB0cnlBcHBlbmRMZXNzRXh0ZW5zaW9uLCBldmFsZEltcG9ydE5vZGUuZmlsZUluZm8oKSwgZXZhbGRJbXBvcnROb2RlLm9wdGlvbnMsIHNlcXVlbmNlZE9uSW1wb3J0ZWQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRDb3VudC0tOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VxdWVuY2VyLnRyeVJ1bigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgb25JbXBvcnRlZDogZnVuY3Rpb24gKGltcG9ydE5vZGUsIGNvbnRleHQsIGUsIHJvb3QsIGltcG9ydGVkQXRSb290LCBmdWxsUGF0aCkgew0KICAgICAgICAgICAgaWYgKGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoIWUuZmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgZS5pbmRleCA9IGltcG9ydE5vZGUuZ2V0SW5kZXgoKTsNCiAgICAgICAgICAgICAgICAgICAgZS5maWxlbmFtZSA9IGltcG9ydE5vZGUuZmlsZUluZm8oKS5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgaW1wb3J0VmlzaXRvciA9IHRoaXMsIGlubGluZUNTUyA9IGltcG9ydE5vZGUub3B0aW9ucy5pbmxpbmUsIGlzUGx1Z2luID0gaW1wb3J0Tm9kZS5vcHRpb25zLmlzUGx1Z2luLCBpc09wdGlvbmFsID0gaW1wb3J0Tm9kZS5vcHRpb25zLm9wdGlvbmFsLCBkdXBsaWNhdGVJbXBvcnQgPSBpbXBvcnRlZEF0Um9vdCB8fCBmdWxsUGF0aCBpbiBpbXBvcnRWaXNpdG9yLnJlY3Vyc2lvbkRldGVjdG9yOw0KICAgICAgICAgICAgaWYgKCFjb250ZXh0LmltcG9ydE11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZUltcG9ydCkgew0KICAgICAgICAgICAgICAgICAgICBpbXBvcnROb2RlLnNraXAgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0Tm9kZS5za2lwID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bGxQYXRoIGluIGltcG9ydFZpc2l0b3Iub25jZUZpbGVEZXRlY3Rpb25NYXApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydFZpc2l0b3Iub25jZUZpbGVEZXRlY3Rpb25NYXBbZnVsbFBhdGhdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIWZ1bGxQYXRoICYmIGlzT3B0aW9uYWwpIHsNCiAgICAgICAgICAgICAgICBpbXBvcnROb2RlLnNraXAgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHJvb3QpIHsNCiAgICAgICAgICAgICAgICBpbXBvcnROb2RlLnJvb3QgPSByb290Ow0KICAgICAgICAgICAgICAgIGltcG9ydE5vZGUuaW1wb3J0ZWRGaWxlbmFtZSA9IGZ1bGxQYXRoOw0KICAgICAgICAgICAgICAgIGlmICghaW5saW5lQ1NTICYmICFpc1BsdWdpbiAmJiAoY29udGV4dC5pbXBvcnRNdWx0aXBsZSB8fCAhZHVwbGljYXRlSW1wb3J0KSkgew0KICAgICAgICAgICAgICAgICAgICBpbXBvcnRWaXNpdG9yLnJlY3Vyc2lvbkRldGVjdG9yW2Z1bGxQYXRoXSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHZhciBvbGRDb250ZXh0ID0gdGhpcy5jb250ZXh0Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0Ow0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmlzaXRvci52aXNpdChyb290KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gb2xkQ29udGV4dDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpbXBvcnRWaXNpdG9yLmltcG9ydENvdW50LS07DQogICAgICAgICAgICBpZiAoaW1wb3J0VmlzaXRvci5pc0ZpbmlzaGVkKSB7DQogICAgICAgICAgICAgICAgaW1wb3J0VmlzaXRvci5fc2VxdWVuY2VyLnRyeVJ1bigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICB2aXNpdERlY2xhcmF0aW9uOiBmdW5jdGlvbiAoZGVjbE5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgaWYgKGRlY2xOb2RlLnZhbHVlLnR5cGUgPT09ICdEZXRhY2hlZFJ1bGVzZXQnKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZyYW1lcy51bnNoaWZ0KGRlY2xOb2RlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICB2aXNpdERlY2xhcmF0aW9uT3V0OiBmdW5jdGlvbiAoZGVjbE5vZGUpIHsNCiAgICAgICAgICAgIGlmIChkZWNsTm9kZS52YWx1ZS50eXBlID09PSAnRGV0YWNoZWRSdWxlc2V0Jykgew0KICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5mcmFtZXMuc2hpZnQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBdFJ1bGU6IGZ1bmN0aW9uIChhdFJ1bGVOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHRoaXMuY29udGV4dC5mcmFtZXMudW5zaGlmdChhdFJ1bGVOb2RlKTsNCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBdFJ1bGVPdXQ6IGZ1bmN0aW9uIChhdFJ1bGVOb2RlKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZnJhbWVzLnNoaWZ0KCk7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0TWl4aW5EZWZpbml0aW9uOiBmdW5jdGlvbiAobWl4aW5EZWZpbml0aW9uTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZnJhbWVzLnVuc2hpZnQobWl4aW5EZWZpbml0aW9uTm9kZSk7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0TWl4aW5EZWZpbml0aW9uT3V0OiBmdW5jdGlvbiAobWl4aW5EZWZpbml0aW9uTm9kZSkgew0KICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZyYW1lcy5zaGlmdCgpOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdFJ1bGVzZXQ6IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZnJhbWVzLnVuc2hpZnQocnVsZXNldE5vZGUpOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdFJ1bGVzZXRPdXQ6IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSkgew0KICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZyYW1lcy5zaGlmdCgpOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdE1lZGlhOiBmdW5jdGlvbiAobWVkaWFOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHRoaXMuY29udGV4dC5mcmFtZXMudW5zaGlmdChtZWRpYU5vZGUucnVsZXNbMF0pOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdE1lZGlhT3V0OiBmdW5jdGlvbiAobWVkaWFOb2RlKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZnJhbWVzLnNoaWZ0KCk7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBTZXRUcmVlVmlzaWJpbGl0eVZpc2l0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgICAgIGZ1bmN0aW9uIFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvcih2aXNpYmxlKSB7DQogICAgICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlOw0KICAgICAgICB9DQogICAgICAgIFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHJvb3QpIHsNCiAgICAgICAgICAgIHRoaXMudmlzaXQocm9vdCk7DQogICAgICAgIH07DQogICAgICAgIFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvci5wcm90b3R5cGUudmlzaXRBcnJheSA9IGZ1bmN0aW9uIChub2Rlcykgew0KICAgICAgICAgICAgaWYgKCFub2Rlcykgew0KICAgICAgICAgICAgICAgIHJldHVybiBub2RlczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBjbnQgPSBub2Rlcy5sZW5ndGg7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjbnQ7IGkrKykgew0KICAgICAgICAgICAgICAgIHRoaXMudmlzaXQobm9kZXNbaV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5vZGVzOw0KICAgICAgICB9Ow0KICAgICAgICBTZXRUcmVlVmlzaWJpbGl0eVZpc2l0b3IucHJvdG90eXBlLnZpc2l0ID0gZnVuY3Rpb24gKG5vZGUpIHsNCiAgICAgICAgICAgIGlmICghbm9kZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG5vZGUuY29uc3RydWN0b3IgPT09IEFycmF5KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlzaXRBcnJheShub2RlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbm9kZS5ibG9ja3NWaXNpYmlsaXR5IHx8IG5vZGUuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgbm9kZS5lbnN1cmVWaXNpYmlsaXR5KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBub2RlLmVuc3VyZUludmlzaWJpbGl0eSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbm9kZS5hY2NlcHQodGhpcyk7DQogICAgICAgICAgICByZXR1cm4gbm9kZTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvcjsNCiAgICB9KCkpOwoKICAgIC8qIGpzaGludCBsb29wZnVuYzp0cnVlICovDQogICAgdmFyIEV4dGVuZEZpbmRlclZpc2l0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgICAgIGZ1bmN0aW9uIEV4dGVuZEZpbmRlclZpc2l0b3IoKSB7DQogICAgICAgICAgICB0aGlzLl92aXNpdG9yID0gbmV3IFZpc2l0b3IodGhpcyk7DQogICAgICAgICAgICB0aGlzLmNvbnRleHRzID0gW107DQogICAgICAgICAgICB0aGlzLmFsbEV4dGVuZHNTdGFjayA9IFtbXV07DQogICAgICAgIH0NCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHJvb3QpIHsNCiAgICAgICAgICAgIHJvb3QgPSB0aGlzLl92aXNpdG9yLnZpc2l0KHJvb3QpOw0KICAgICAgICAgICAgcm9vdC5hbGxFeHRlbmRzID0gdGhpcy5hbGxFeHRlbmRzU3RhY2tbMF07DQogICAgICAgICAgICByZXR1cm4gcm9vdDsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXREZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChkZWNsTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRNaXhpbkRlZmluaXRpb24gPSBmdW5jdGlvbiAobWl4aW5EZWZpbml0aW9uTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRSdWxlc2V0ID0gZnVuY3Rpb24gKHJ1bGVzZXROb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIGlmIChydWxlc2V0Tm9kZS5yb290KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICB2YXIgajsNCiAgICAgICAgICAgIHZhciBleHRlbmQ7DQogICAgICAgICAgICB2YXIgYWxsU2VsZWN0b3JzRXh0ZW5kTGlzdCA9IFtdOw0KICAgICAgICAgICAgdmFyIGV4dGVuZExpc3Q7DQogICAgICAgICAgICAvLyBnZXQgJjpleHRlbmQoLmEpOyBydWxlcyB3aGljaCBhcHBseSB0byBhbGwgc2VsZWN0b3JzIGluIHRoaXMgcnVsZXNldA0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gcnVsZXNldE5vZGUucnVsZXMsIHJ1bGVDbnQgPSBydWxlcyA/IHJ1bGVzLmxlbmd0aCA6IDA7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcnVsZUNudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGVzZXROb2RlLnJ1bGVzW2ldIGluc3RhbmNlb2YgdHJlZS5FeHRlbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgYWxsU2VsZWN0b3JzRXh0ZW5kTGlzdC5wdXNoKHJ1bGVzW2ldKTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuZXh0ZW5kT25FdmVyeVBhdGggPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIG5vdyBmaW5kIGV2ZXJ5IHNlbGVjdG9yIGFuZCBhcHBseSB0aGUgZXh0ZW5kcyB0aGF0IGFwcGx5IHRvIGFsbCBleHRlbmRzDQogICAgICAgICAgICAvLyBhbmQgdGhlIG9uZXMgd2hpY2ggYXBwbHkgdG8gYW4gaW5kaXZpZHVhbCBleHRlbmQNCiAgICAgICAgICAgIHZhciBwYXRocyA9IHJ1bGVzZXROb2RlLnBhdGhzOw0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yUGF0aCA9IHBhdGhzW2ldLCBzZWxlY3RvciA9IHNlbGVjdG9yUGF0aFtzZWxlY3RvclBhdGgubGVuZ3RoIC0gMV0sIHNlbEV4dGVuZExpc3QgPSBzZWxlY3Rvci5leHRlbmRMaXN0Ow0KICAgICAgICAgICAgICAgIGV4dGVuZExpc3QgPSBzZWxFeHRlbmRMaXN0ID8gY29weUFycmF5KHNlbEV4dGVuZExpc3QpLmNvbmNhdChhbGxTZWxlY3RvcnNFeHRlbmRMaXN0KQ0KICAgICAgICAgICAgICAgICAgICA6IGFsbFNlbGVjdG9yc0V4dGVuZExpc3Q7DQogICAgICAgICAgICAgICAgaWYgKGV4dGVuZExpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kTGlzdCA9IGV4dGVuZExpc3QubWFwKGZ1bmN0aW9uIChhbGxTZWxlY3RvcnNFeHRlbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbGxTZWxlY3RvcnNFeHRlbmQuY2xvbmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBleHRlbmRMaXN0Lmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZm91bmRFeHRlbmRzID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kID0gZXh0ZW5kTGlzdFtqXTsNCiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kLmZpbmRTZWxmU2VsZWN0b3JzKHNlbGVjdG9yUGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGV4dGVuZC5ydWxlc2V0ID0gcnVsZXNldE5vZGU7DQogICAgICAgICAgICAgICAgICAgIGlmIChqID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQuZmlyc3RFeHRlbmRPblRoaXNTZWxlY3RvclBhdGggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsRXh0ZW5kc1N0YWNrW3RoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aCAtIDFdLnB1c2goZXh0ZW5kKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmNvbnRleHRzLnB1c2gocnVsZXNldE5vZGUuc2VsZWN0b3JzKTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRSdWxlc2V0T3V0ID0gZnVuY3Rpb24gKHJ1bGVzZXROb2RlKSB7DQogICAgICAgICAgICBpZiAoIXJ1bGVzZXROb2RlLnJvb3QpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRzLmxlbmd0aCA9IHRoaXMuY29udGV4dHMubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRNZWRpYSA9IGZ1bmN0aW9uIChtZWRpYU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgbWVkaWFOb2RlLmFsbEV4dGVuZHMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2gobWVkaWFOb2RlLmFsbEV4dGVuZHMpOw0KICAgICAgICB9Ow0KICAgICAgICBFeHRlbmRGaW5kZXJWaXNpdG9yLnByb3RvdHlwZS52aXNpdE1lZGlhT3V0ID0gZnVuY3Rpb24gKG1lZGlhTm9kZSkgew0KICAgICAgICAgICAgdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoID0gdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGUgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICBhdFJ1bGVOb2RlLmFsbEV4dGVuZHMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2goYXRSdWxlTm9kZS5hbGxFeHRlbmRzKTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGVPdXQgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSkgew0KICAgICAgICAgICAgdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoID0gdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIEV4dGVuZEZpbmRlclZpc2l0b3I7DQogICAgfSgpKTsNCiAgICB2YXIgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3IoKSB7DQogICAgICAgICAgICB0aGlzLl92aXNpdG9yID0gbmV3IFZpc2l0b3IodGhpcyk7DQogICAgICAgIH0NCiAgICAgICAgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAocm9vdCkgew0KICAgICAgICAgICAgdmFyIGV4dGVuZEZpbmRlciA9IG5ldyBFeHRlbmRGaW5kZXJWaXNpdG9yKCk7DQogICAgICAgICAgICB0aGlzLmV4dGVuZEluZGljZXMgPSB7fTsNCiAgICAgICAgICAgIGV4dGVuZEZpbmRlci5ydW4ocm9vdCk7DQogICAgICAgICAgICBpZiAoIWV4dGVuZEZpbmRlci5mb3VuZEV4dGVuZHMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJvb3QuYWxsRXh0ZW5kcyA9IHJvb3QuYWxsRXh0ZW5kcy5jb25jYXQodGhpcy5kb0V4dGVuZENoYWluaW5nKHJvb3QuYWxsRXh0ZW5kcywgcm9vdC5hbGxFeHRlbmRzKSk7DQogICAgICAgICAgICB0aGlzLmFsbEV4dGVuZHNTdGFjayA9IFtyb290LmFsbEV4dGVuZHNdOw0KICAgICAgICAgICAgdmFyIG5ld1Jvb3QgPSB0aGlzLl92aXNpdG9yLnZpc2l0KHJvb3QpOw0KICAgICAgICAgICAgdGhpcy5jaGVja0V4dGVuZHNGb3JOb25NYXRjaGVkKHJvb3QuYWxsRXh0ZW5kcyk7DQogICAgICAgICAgICByZXR1cm4gbmV3Um9vdDsNCiAgICAgICAgfTsNCiAgICAgICAgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLnByb3RvdHlwZS5jaGVja0V4dGVuZHNGb3JOb25NYXRjaGVkID0gZnVuY3Rpb24gKGV4dGVuZExpc3QpIHsNCiAgICAgICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5leHRlbmRJbmRpY2VzOw0KICAgICAgICAgICAgZXh0ZW5kTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGV4dGVuZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiAhZXh0ZW5kLmhhc0ZvdW5kTWF0Y2hlcyAmJiBleHRlbmQucGFyZW50X2lkcy5sZW5ndGggPT0gMTsNCiAgICAgICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGV4dGVuZCkgew0KICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICdfdW5rbm93bl8nOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gZXh0ZW5kLnNlbGVjdG9yLnRvQ1NTKHt9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfQ0KICAgICAgICAgICAgICAgIGlmICghaW5kaWNlc1tleHRlbmQuaW5kZXggKyAiICIgKyBzZWxlY3Rvcl0pIHsNCiAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tleHRlbmQuaW5kZXggKyAiICIgKyBzZWxlY3Rvcl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMS53YXJuKCJleHRlbmQgJyIgKyBzZWxlY3RvciArICInIGhhcyBubyBtYXRjaGVzIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUuZG9FeHRlbmRDaGFpbmluZyA9IGZ1bmN0aW9uIChleHRlbmRzTGlzdCwgZXh0ZW5kc0xpc3RUYXJnZXQsIGl0ZXJhdGlvbkNvdW50KSB7DQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gY2hhaW5pbmcgaXMgZGlmZmVyZW50IGZyb20gbm9ybWFsIGV4dGVuc2lvbi4uIGlmIHdlIGV4dGVuZCBhbiBleHRlbmQgdGhlbiB3ZSBhcmUgbm90IGp1c3QgY29weWluZywgYWx0ZXJpbmcNCiAgICAgICAgICAgIC8vIGFuZCBwYXN0aW5nIHRoZSBzZWxlY3RvciB3ZSB3b3VsZCBkbyBub3JtYWxseSwgYnV0IHdlIGFyZSBhbHNvIGFkZGluZyBhbiBleHRlbmQgd2l0aCB0aGUgc2FtZSB0YXJnZXQgc2VsZWN0b3INCiAgICAgICAgICAgIC8vIHRoaXMgbWVhbnMgdGhpcyBuZXcgZXh0ZW5kIGNhbiB0aGVuIGdvIGFuZCBhbHRlciBvdGhlciBleHRlbmRzDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gdGhpcyBtZXRob2QgZGVhbHMgd2l0aCBhbGwgdGhlIGNoYWluaW5nIHdvcmsgLSB3aXRob3V0IGl0LCBleHRlbmQgaXMgZmxhdCBhbmQgZG9lc24ndCB3b3JrIG9uIG90aGVyIGV4dGVuZCBzZWxlY3RvcnMNCiAgICAgICAgICAgIC8vIHRoaXMgaXMgYWxzbyB0aGUgbW9zdCBleHBlbnNpdmUuLiBhbmQgYSBtYXRjaCBvbiBvbmUgc2VsZWN0b3IgY2FuIGNhdXNlIGFuIGV4dGVuc2lvbiBvZiBhIHNlbGVjdG9yIHdlIGhhZCBhbHJlYWR5DQogICAgICAgICAgICAvLyBwcm9jZXNzZWQgaWYgd2UgbG9vayBhdCBlYWNoIHNlbGVjdG9yIGF0IGEgdGltZSwgYXMgaXMgZG9uZSBpbiB2aXNpdFJ1bGVzZXQNCiAgICAgICAgICAgIHZhciBleHRlbmRJbmRleDsNCiAgICAgICAgICAgIHZhciB0YXJnZXRFeHRlbmRJbmRleDsNCiAgICAgICAgICAgIHZhciBtYXRjaGVzOw0KICAgICAgICAgICAgdmFyIGV4dGVuZHNUb0FkZCA9IFtdOw0KICAgICAgICAgICAgdmFyIG5ld1NlbGVjdG9yOw0KICAgICAgICAgICAgdmFyIGV4dGVuZFZpc2l0b3IgPSB0aGlzOw0KICAgICAgICAgICAgdmFyIHNlbGVjdG9yUGF0aDsNCiAgICAgICAgICAgIHZhciBleHRlbmQ7DQogICAgICAgICAgICB2YXIgdGFyZ2V0RXh0ZW5kOw0KICAgICAgICAgICAgdmFyIG5ld0V4dGVuZDsNCiAgICAgICAgICAgIGl0ZXJhdGlvbkNvdW50ID0gaXRlcmF0aW9uQ291bnQgfHwgMDsNCiAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBjb21wYXJpbmcgZXZlcnkgZXh0ZW5kIHdpdGggZXZlcnkgdGFyZ2V0IGV4dGVuZC4NCiAgICAgICAgICAgIC8vIGEgdGFyZ2V0IGV4dGVuZCBpcyB0aGUgb25lIG9uIHRoZSBydWxlc2V0IHdlIGFyZSBsb29raW5nIGF0IGNvcHkvZWRpdC9wYXN0aW5nIGluIHBsYWNlDQogICAgICAgICAgICAvLyBlLmcuICAuYTpleHRlbmQoLmIpIHt9ICBhbmQgLmI6ZXh0ZW5kKC5jKSB7fSB0aGVuIHRoZSBmaXJzdCBleHRlbmQgZXh0ZW5kcyB0aGUgc2Vjb25kIG9uZQ0KICAgICAgICAgICAgLy8gYW5kIHRoZSBzZWNvbmQgaXMgdGhlIHRhcmdldC4NCiAgICAgICAgICAgIC8vIHRoZSBzZXBhcmF0aW9uIGludG8gdHdvIGxpc3RzIGFsbG93cyB1cyB0byBwcm9jZXNzIGEgc3Vic2V0IG9mIGNoYWlucyB3aXRoIGEgYmlnZ2VyIHNldCwgYXMgaXMgdGhlDQogICAgICAgICAgICAvLyBjYXNlIHdoZW4gcHJvY2Vzc2luZyBtZWRpYSBxdWVyaWVzDQogICAgICAgICAgICBmb3IgKGV4dGVuZEluZGV4ID0gMDsgZXh0ZW5kSW5kZXggPCBleHRlbmRzTGlzdC5sZW5ndGg7IGV4dGVuZEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICBmb3IgKHRhcmdldEV4dGVuZEluZGV4ID0gMDsgdGFyZ2V0RXh0ZW5kSW5kZXggPCBleHRlbmRzTGlzdFRhcmdldC5sZW5ndGg7IHRhcmdldEV4dGVuZEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kID0gZXh0ZW5kc0xpc3RbZXh0ZW5kSW5kZXhdOw0KICAgICAgICAgICAgICAgICAgICB0YXJnZXRFeHRlbmQgPSBleHRlbmRzTGlzdFRhcmdldFt0YXJnZXRFeHRlbmRJbmRleF07DQogICAgICAgICAgICAgICAgICAgIC8vIGxvb2sgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXMNCiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuZC5wYXJlbnRfaWRzLmluZGV4T2YodGFyZ2V0RXh0ZW5kLm9iamVjdF9pZCkgPj0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBhIG1hdGNoIGluIHRoZSB0YXJnZXQgZXh0ZW5kcyBzZWxmIHNlbGVjdG9yICh0aGUgYml0IGJlZm9yZSA6ZXh0ZW5kKQ0KICAgICAgICAgICAgICAgICAgICBzZWxlY3RvclBhdGggPSBbdGFyZ2V0RXh0ZW5kLnNlbGZTZWxlY3RvcnNbMF1dOw0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gZXh0ZW5kVmlzaXRvci5maW5kTWF0Y2goZXh0ZW5kLCBzZWxlY3RvclBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZC5oYXNGb3VuZE1hdGNoZXMgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgZm91bmQgYSBtYXRjaCwgc28gZm9yIGVhY2ggc2VsZiBzZWxlY3Rvci4uDQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQuc2VsZlNlbGVjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChzZWxmU2VsZWN0b3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IHRhcmdldEV4dGVuZC52aXNpYmlsaXR5SW5mbygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgdGhlIGV4dGVuZCBhcyB1c3VhbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yID0gZXh0ZW5kVmlzaXRvci5leHRlbmRTZWxlY3RvcihtYXRjaGVzLCBzZWxlY3RvclBhdGgsIHNlbGZTZWxlY3RvciwgZXh0ZW5kLmlzVmlzaWJsZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgbm93IHdlIGNyZWF0ZSBhIG5ldyBleHRlbmQgZnJvbSBpdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0V4dGVuZCA9IG5ldyAodHJlZS5FeHRlbmQpKHRhcmdldEV4dGVuZC5zZWxlY3RvciwgdGFyZ2V0RXh0ZW5kLm9wdGlvbiwgMCwgdGFyZ2V0RXh0ZW5kLmZpbGVJbmZvKCksIGluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0V4dGVuZC5zZWxmU2VsZWN0b3JzID0gbmV3U2VsZWN0b3I7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBleHRlbmQgb250byB0aGUgbGlzdCBvZiBleHRlbmRzIGZvciB0aGF0IHNlbGVjdG9yDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0b3JbbmV3U2VsZWN0b3IubGVuZ3RoIC0gMV0uZXh0ZW5kTGlzdCA9IFtuZXdFeHRlbmRdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY29yZCB0aGF0IHdlIG5lZWQgdG8gYWRkIGl0Lg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZHNUb0FkZC5wdXNoKG5ld0V4dGVuZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RXh0ZW5kLnJ1bGVzZXQgPSB0YXJnZXRFeHRlbmQucnVsZXNldDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBpdHMgcGFyZW50cyBmb3IgY2lyY3VsYXIgcmVmZXJlbmNlcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0V4dGVuZC5wYXJlbnRfaWRzID0gbmV3RXh0ZW5kLnBhcmVudF9pZHMuY29uY2F0KHRhcmdldEV4dGVuZC5wYXJlbnRfaWRzLCBleHRlbmQucGFyZW50X2lkcyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBwcm9jZXNzIHRoZSBzZWxlY3RvciBvbmNlLi4gaWYgd2UgaGF2ZSA6ZXh0ZW5kKC5hLC5iKSB0aGVuIG11bHRpcGxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXh0ZW5kcyB3aWxsIGxvb2sgYXQgdGhlIHNhbWUgc2VsZWN0b3IgcGF0aCwgc28gd2hlbiBleHRlbmRpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBrbm93IHRoYXQgYW55IG90aGVycyB3aWxsIGJlIGR1cGxpY2F0ZXMgaW4gdGVybXMgb2Ygd2hhdCBpcyBhZGRlZCB0byB0aGUgY3NzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEV4dGVuZC5maXJzdEV4dGVuZE9uVGhpc1NlbGVjdG9yUGF0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFeHRlbmQuZmlyc3RFeHRlbmRPblRoaXNTZWxlY3RvclBhdGggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRFeHRlbmQucnVsZXNldC5wYXRocy5wdXNoKG5ld1NlbGVjdG9yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChleHRlbmRzVG9BZGQubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgLy8gdHJ5IHRvIGRldGVjdCBjaXJjdWxhciByZWZlcmVuY2VzIHRvIHN0b3AgYSBzdGFjayBvdmVyZmxvdy4NCiAgICAgICAgICAgICAgICAvLyBtYXkgbm8gbG9uZ2VyIGJlIG5lZWRlZC4NCiAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZENoYWluQ291bnQrKzsNCiAgICAgICAgICAgICAgICBpZiAoaXRlcmF0aW9uQ291bnQgPiAxMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yT25lID0gJ3t1bmFibGUgdG8gY2FsY3VsYXRlfSc7DQogICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvclR3byA9ICd7dW5hYmxlIHRvIGNhbGN1bGF0ZX0nOw0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JPbmUgPSBleHRlbmRzVG9BZGRbMF0uc2VsZlNlbGVjdG9yc1swXS50b0NTUygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JUd28gPSBleHRlbmRzVG9BZGRbMF0uc2VsZWN0b3IudG9DU1MoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9DQogICAgICAgICAgICAgICAgICAgIHRocm93IHsgbWVzc2FnZTogImV4dGVuZCBjaXJjdWxhciByZWZlcmVuY2UgZGV0ZWN0ZWQuIE9uZSBvZiB0aGUgY2lyY3VsYXIgZXh0ZW5kcyBpcyBjdXJyZW50bHk6IiArIHNlbGVjdG9yT25lICsgIjpleHRlbmQoIiArIHNlbGVjdG9yVHdvICsgIikiIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIG5vdyBwcm9jZXNzIHRoZSBuZXcgZXh0ZW5kcyBvbiB0aGUgZXhpc3RpbmcgcnVsZXMgc28gdGhhdCB3ZSBjYW4gaGFuZGxlIGEgZXh0ZW5kaW5nIGIgZXh0ZW5kaW5nIGMgZXh0ZW5kaW5nDQogICAgICAgICAgICAgICAgLy8gZCBleHRlbmRpbmcgZS4uLg0KICAgICAgICAgICAgICAgIHJldHVybiBleHRlbmRzVG9BZGQuY29uY2F0KGV4dGVuZFZpc2l0b3IuZG9FeHRlbmRDaGFpbmluZyhleHRlbmRzVG9BZGQsIGV4dGVuZHNMaXN0VGFyZ2V0LCBpdGVyYXRpb25Db3VudCArIDEpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBleHRlbmRzVG9BZGQ7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUudmlzaXREZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChydWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLnByb3RvdHlwZS52aXNpdE1peGluRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChtaXhpbkRlZmluaXRpb25Ob2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IGZhbHNlOw0KICAgICAgICB9Ow0KICAgICAgICBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3IucHJvdG90eXBlLnZpc2l0U2VsZWN0b3IgPSBmdW5jdGlvbiAoc2VsZWN0b3JOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IGZhbHNlOw0KICAgICAgICB9Ow0KICAgICAgICBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3IucHJvdG90eXBlLnZpc2l0UnVsZXNldCA9IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICBpZiAocnVsZXNldE5vZGUucm9vdCkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBtYXRjaGVzOw0KICAgICAgICAgICAgdmFyIHBhdGhJbmRleDsNCiAgICAgICAgICAgIHZhciBleHRlbmRJbmRleDsNCiAgICAgICAgICAgIHZhciBhbGxFeHRlbmRzID0gdGhpcy5hbGxFeHRlbmRzU3RhY2tbdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMV07DQogICAgICAgICAgICB2YXIgc2VsZWN0b3JzVG9BZGQgPSBbXTsNCiAgICAgICAgICAgIHZhciBleHRlbmRWaXNpdG9yID0gdGhpczsNCiAgICAgICAgICAgIHZhciBzZWxlY3RvclBhdGg7DQogICAgICAgICAgICAvLyBsb29rIGF0IGVhY2ggc2VsZWN0b3IgcGF0aCBpbiB0aGUgcnVsZXNldCwgZmluZCBhbnkgZXh0ZW5kIG1hdGNoZXMgYW5kIHRoZW4gY29weSwgZmluZCBhbmQgcmVwbGFjZQ0KICAgICAgICAgICAgZm9yIChleHRlbmRJbmRleCA9IDA7IGV4dGVuZEluZGV4IDwgYWxsRXh0ZW5kcy5sZW5ndGg7IGV4dGVuZEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICBmb3IgKHBhdGhJbmRleCA9IDA7IHBhdGhJbmRleCA8IHJ1bGVzZXROb2RlLnBhdGhzLmxlbmd0aDsgcGF0aEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JQYXRoID0gcnVsZXNldE5vZGUucGF0aHNbcGF0aEluZGV4XTsNCiAgICAgICAgICAgICAgICAgICAgLy8gZXh0ZW5kaW5nIGV4dGVuZHMgaGFwcGVucyBpbml0aWFsbHksIGJlZm9yZSB0aGUgbWFpbiBwYXNzDQogICAgICAgICAgICAgICAgICAgIGlmIChydWxlc2V0Tm9kZS5leHRlbmRPbkV2ZXJ5UGF0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZExpc3QgPSBzZWxlY3RvclBhdGhbc2VsZWN0b3JQYXRoLmxlbmd0aCAtIDFdLmV4dGVuZExpc3Q7DQogICAgICAgICAgICAgICAgICAgIGlmIChleHRlbmRMaXN0ICYmIGV4dGVuZExpc3QubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gdGhpcy5maW5kTWF0Y2goYWxsRXh0ZW5kc1tleHRlbmRJbmRleF0sIHNlbGVjdG9yUGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxsRXh0ZW5kc1tleHRlbmRJbmRleF0uaGFzRm91bmRNYXRjaGVzID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbEV4dGVuZHNbZXh0ZW5kSW5kZXhdLnNlbGZTZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbiAoc2VsZlNlbGVjdG9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZGVkU2VsZWN0b3JzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkU2VsZWN0b3JzID0gZXh0ZW5kVmlzaXRvci5leHRlbmRTZWxlY3RvcihtYXRjaGVzLCBzZWxlY3RvclBhdGgsIHNlbGZTZWxlY3RvciwgYWxsRXh0ZW5kc1tleHRlbmRJbmRleF0uaXNWaXNpYmxlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yc1RvQWRkLnB1c2goZXh0ZW5kZWRTZWxlY3RvcnMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBydWxlc2V0Tm9kZS5wYXRocyA9IHJ1bGVzZXROb2RlLnBhdGhzLmNvbmNhdChzZWxlY3RvcnNUb0FkZCk7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUuZmluZE1hdGNoID0gZnVuY3Rpb24gKGV4dGVuZCwgaGF5c3RhY2tTZWxlY3RvclBhdGgpIHsNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyBsb29rIHRocm91Z2ggdGhlIGhheXN0YWNrIHNlbGVjdG9yIHBhdGggdG8gdHJ5IGFuZCBmaW5kIHRoZSBuZWVkbGUgLSBleHRlbmQuc2VsZWN0b3INCiAgICAgICAgICAgIC8vIHJldHVybnMgYW4gYXJyYXkgb2Ygc2VsZWN0b3IgbWF0Y2hlcyB0aGF0IGNhbiB0aGVuIGJlIHJlcGxhY2VkDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgdmFyIGhheXN0YWNrU2VsZWN0b3JJbmRleDsNCiAgICAgICAgICAgIHZhciBoYWNrc3RhY2tTZWxlY3RvcjsNCiAgICAgICAgICAgIHZhciBoYWNrc3RhY2tFbGVtZW50SW5kZXg7DQogICAgICAgICAgICB2YXIgaGF5c3RhY2tFbGVtZW50Ow0KICAgICAgICAgICAgdmFyIHRhcmdldENvbWJpbmF0b3I7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBleHRlbmRWaXNpdG9yID0gdGhpczsNCiAgICAgICAgICAgIHZhciBuZWVkbGVFbGVtZW50cyA9IGV4dGVuZC5zZWxlY3Rvci5lbGVtZW50czsNCiAgICAgICAgICAgIHZhciBwb3RlbnRpYWxNYXRjaGVzID0gW107DQogICAgICAgICAgICB2YXIgcG90ZW50aWFsTWF0Y2g7DQogICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdOw0KICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBoYXlzdGFjayBlbGVtZW50cw0KICAgICAgICAgICAgZm9yIChoYXlzdGFja1NlbGVjdG9ySW5kZXggPSAwOyBoYXlzdGFja1NlbGVjdG9ySW5kZXggPCBoYXlzdGFja1NlbGVjdG9yUGF0aC5sZW5ndGg7IGhheXN0YWNrU2VsZWN0b3JJbmRleCsrKSB7DQogICAgICAgICAgICAgICAgaGFja3N0YWNrU2VsZWN0b3IgPSBoYXlzdGFja1NlbGVjdG9yUGF0aFtoYXlzdGFja1NlbGVjdG9ySW5kZXhdOw0KICAgICAgICAgICAgICAgIGZvciAoaGFja3N0YWNrRWxlbWVudEluZGV4ID0gMDsgaGFja3N0YWNrRWxlbWVudEluZGV4IDwgaGFja3N0YWNrU2VsZWN0b3IuZWxlbWVudHMubGVuZ3RoOyBoYWNrc3RhY2tFbGVtZW50SW5kZXgrKykgew0KICAgICAgICAgICAgICAgICAgICBoYXlzdGFja0VsZW1lbnQgPSBoYWNrc3RhY2tTZWxlY3Rvci5lbGVtZW50c1toYWNrc3RhY2tFbGVtZW50SW5kZXhdOw0KICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBhbGxvdyBlbGVtZW50cyBiZWZvcmUgb3VyIG1hdGNoIHdlIGNhbiBhZGQgYSBwb3RlbnRpYWwgbWF0Y2ggZXZlcnkgdGltZS4gb3RoZXJ3aXNlIG9ubHkgYXQgdGhlIGZpcnN0IGVsZW1lbnQuDQogICAgICAgICAgICAgICAgICAgIGlmIChleHRlbmQuYWxsb3dCZWZvcmUgfHwgKGhheXN0YWNrU2VsZWN0b3JJbmRleCA9PT0gMCAmJiBoYWNrc3RhY2tFbGVtZW50SW5kZXggPT09IDApKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWxNYXRjaGVzLnB1c2goeyBwYXRoSW5kZXg6IGhheXN0YWNrU2VsZWN0b3JJbmRleCwgaW5kZXg6IGhhY2tzdGFja0VsZW1lbnRJbmRleCwgbWF0Y2hlZDogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsQ29tYmluYXRvcjogaGF5c3RhY2tFbGVtZW50LmNvbWJpbmF0b3IgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBvdGVudGlhbE1hdGNoZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBvdGVudGlhbE1hdGNoID0gcG90ZW50aWFsTWF0Y2hlc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdG9ycyBhZGQgIiAiIG9udG8gdGhlIGZpcnN0IGVsZW1lbnQuIFdoZW4gd2UgdXNlICYgaXQgam9pbnMgdGhlIHNlbGVjdG9ycyB0b2dldGhlciwgYnV0IGlmIHdlIGRvbid0DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIGVhY2ggc2VsZWN0b3IgaW4gaGF5c3RhY2tTZWxlY3RvclBhdGggaGFzIGEgc3BhY2UgYmVmb3JlIGl0IGFkZGVkIGluIHRoZSB0b0NTUyBwaGFzZS4gc28gd2UgbmVlZCB0bw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gd29yayBvdXQgd2hhdCB0aGUgcmVzdWx0aW5nIGNvbWJpbmF0b3Igd2lsbCBiZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q29tYmluYXRvciA9IGhheXN0YWNrRWxlbWVudC5jb21iaW5hdG9yLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldENvbWJpbmF0b3IgPT09ICcnICYmIGhhY2tzdGFja0VsZW1lbnRJbmRleCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENvbWJpbmF0b3IgPSAnICc7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCBtYXRjaCwgbnVsbCBvdXIgbWF0Y2ggdG8gaW5kaWNhdGUgZmFpbHVyZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFleHRlbmRWaXNpdG9yLmlzRWxlbWVudFZhbHVlc0VxdWFsKG5lZWRsZUVsZW1lbnRzW3BvdGVudGlhbE1hdGNoLm1hdGNoZWRdLnZhbHVlLCBoYXlzdGFja0VsZW1lbnQudmFsdWUpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBvdGVudGlhbE1hdGNoLm1hdGNoZWQgPiAwICYmIG5lZWRsZUVsZW1lbnRzW3BvdGVudGlhbE1hdGNoLm1hdGNoZWRdLmNvbWJpbmF0b3IudmFsdWUgIT09IHRhcmdldENvbWJpbmF0b3IpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2ggPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2gubWF0Y2hlZCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgYXJlIHN0aWxsIHZhbGlkIGFuZCBoYXZlIGZpbmlzaGVkLCB0ZXN0IHdoZXRoZXIgd2UgaGF2ZSBlbGVtZW50cyBhZnRlciBhbmQgd2hldGhlciB0aGVzZSBhcmUgYWxsb3dlZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvdGVudGlhbE1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2guZmluaXNoZWQgPSBwb3RlbnRpYWxNYXRjaC5tYXRjaGVkID09PSBuZWVkbGVFbGVtZW50cy5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvdGVudGlhbE1hdGNoLmZpbmlzaGVkICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghZXh0ZW5kLmFsbG93QWZ0ZXIgJiYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChoYWNrc3RhY2tFbGVtZW50SW5kZXggKyAxIDwgaGFja3N0YWNrU2VsZWN0b3IuZWxlbWVudHMubGVuZ3RoIHx8IGhheXN0YWNrU2VsZWN0b3JJbmRleCArIDEgPCBoYXlzdGFja1NlbGVjdG9yUGF0aC5sZW5ndGgpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWxNYXRjaCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbnVsbCB3ZSByZW1vdmUsIGlmIG5vdCwgd2UgYXJlIHN0aWxsIHZhbGlkLCBzbyBlaXRoZXIgcHVzaCBhcyBhIHZhbGlkIG1hdGNoIG9yIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocG90ZW50aWFsTWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG90ZW50aWFsTWF0Y2guZmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2gubGVuZ3RoID0gbmVlZGxlRWxlbWVudHMubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWxNYXRjaC5lbmRQYXRoSW5kZXggPSBoYXlzdGFja1NlbGVjdG9ySW5kZXg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvdGVudGlhbE1hdGNoLmVuZFBhdGhFbGVtZW50SW5kZXggPSBoYWNrc3RhY2tFbGVtZW50SW5kZXggKyAxOyAvLyBpbmRleCBhZnRlciBlbmQgb2YgbWF0Y2gNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2hlcy5sZW5ndGggPSAwOyAvLyB3ZSBkb24ndCBhbGxvdyBtYXRjaGVzIHRvIG92ZXJsYXAsIHNvIHN0YXJ0IG1hdGNoaW5nIGFnYWluDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChwb3RlbnRpYWxNYXRjaCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2hlcy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXM7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUuaXNFbGVtZW50VmFsdWVzRXF1YWwgPSBmdW5jdGlvbiAoZWxlbWVudFZhbHVlMSwgZWxlbWVudFZhbHVlMikgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50VmFsdWUxID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgZWxlbWVudFZhbHVlMiA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudFZhbHVlMSA9PT0gZWxlbWVudFZhbHVlMjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChlbGVtZW50VmFsdWUxIGluc3RhbmNlb2YgdHJlZS5BdHRyaWJ1dGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFZhbHVlMS5vcCAhPT0gZWxlbWVudFZhbHVlMi5vcCB8fCBlbGVtZW50VmFsdWUxLmtleSAhPT0gZWxlbWVudFZhbHVlMi5rZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnRWYWx1ZTEudmFsdWUgfHwgIWVsZW1lbnRWYWx1ZTIudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRWYWx1ZTEudmFsdWUgfHwgZWxlbWVudFZhbHVlMi52YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbGVtZW50VmFsdWUxID0gZWxlbWVudFZhbHVlMS52YWx1ZS52YWx1ZSB8fCBlbGVtZW50VmFsdWUxLnZhbHVlOw0KICAgICAgICAgICAgICAgIGVsZW1lbnRWYWx1ZTIgPSBlbGVtZW50VmFsdWUyLnZhbHVlLnZhbHVlIHx8IGVsZW1lbnRWYWx1ZTIudmFsdWU7DQogICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRWYWx1ZTEgPT09IGVsZW1lbnRWYWx1ZTI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbGVtZW50VmFsdWUxID0gZWxlbWVudFZhbHVlMS52YWx1ZTsNCiAgICAgICAgICAgIGVsZW1lbnRWYWx1ZTIgPSBlbGVtZW50VmFsdWUyLnZhbHVlOw0KICAgICAgICAgICAgaWYgKGVsZW1lbnRWYWx1ZTEgaW5zdGFuY2VvZiB0cmVlLlNlbGVjdG9yKSB7DQogICAgICAgICAgICAgICAgaWYgKCEoZWxlbWVudFZhbHVlMiBpbnN0YW5jZW9mIHRyZWUuU2VsZWN0b3IpIHx8IGVsZW1lbnRWYWx1ZTEuZWxlbWVudHMubGVuZ3RoICE9PSBlbGVtZW50VmFsdWUyLmVsZW1lbnRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudFZhbHVlMS5lbGVtZW50cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFZhbHVlMS5lbGVtZW50c1tpXS5jb21iaW5hdG9yLnZhbHVlICE9PSBlbGVtZW50VmFsdWUyLmVsZW1lbnRzW2ldLmNvbWJpbmF0b3IudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSAwIHx8IChlbGVtZW50VmFsdWUxLmVsZW1lbnRzW2ldLmNvbWJpbmF0b3IudmFsdWUgfHwgJyAnKSAhPT0gKGVsZW1lbnRWYWx1ZTIuZWxlbWVudHNbaV0uY29tYmluYXRvci52YWx1ZSB8fCAnICcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0VsZW1lbnRWYWx1ZXNFcXVhbChlbGVtZW50VmFsdWUxLmVsZW1lbnRzW2ldLnZhbHVlLCBlbGVtZW50VmFsdWUyLmVsZW1lbnRzW2ldLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9Ow0KICAgICAgICBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3IucHJvdG90eXBlLmV4dGVuZFNlbGVjdG9yID0gZnVuY3Rpb24gKG1hdGNoZXMsIHNlbGVjdG9yUGF0aCwgcmVwbGFjZW1lbnRTZWxlY3RvciwgaXNWaXNpYmxlKSB7DQogICAgICAgICAgICAvLyBmb3IgYSBzZXQgb2YgbWF0Y2hlcywgcmVwbGFjZSBlYWNoIG1hdGNoIHdpdGggdGhlIHJlcGxhY2VtZW50IHNlbGVjdG9yDQogICAgICAgICAgICB2YXIgY3VycmVudFNlbGVjdG9yUGF0aEluZGV4ID0gMCwgY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCA9IDAsIHBhdGggPSBbXSwgbWF0Y2hJbmRleCwgc2VsZWN0b3IsIGZpcnN0RWxlbWVudCwgbWF0Y2gsIG5ld0VsZW1lbnRzOw0KICAgICAgICAgICAgZm9yIChtYXRjaEluZGV4ID0gMDsgbWF0Y2hJbmRleCA8IG1hdGNoZXMubGVuZ3RoOyBtYXRjaEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoZXNbbWF0Y2hJbmRleF07DQogICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvclBhdGhbbWF0Y2gucGF0aEluZGV4XTsNCiAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnQgPSBuZXcgdHJlZS5FbGVtZW50KG1hdGNoLmluaXRpYWxDb21iaW5hdG9yLCByZXBsYWNlbWVudFNlbGVjdG9yLmVsZW1lbnRzWzBdLnZhbHVlLCByZXBsYWNlbWVudFNlbGVjdG9yLmVsZW1lbnRzWzBdLmlzVmFyaWFibGUsIHJlcGxhY2VtZW50U2VsZWN0b3IuZWxlbWVudHNbMF0uZ2V0SW5kZXgoKSwgcmVwbGFjZW1lbnRTZWxlY3Rvci5lbGVtZW50c1swXS5maWxlSW5mbygpKTsNCiAgICAgICAgICAgICAgICBpZiAobWF0Y2gucGF0aEluZGV4ID4gY3VycmVudFNlbGVjdG9yUGF0aEluZGV4ICYmIGN1cnJlbnRTZWxlY3RvclBhdGhFbGVtZW50SW5kZXggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGhbcGF0aC5sZW5ndGggLSAxXS5lbGVtZW50cyA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmVsZW1lbnRzLmNvbmNhdChzZWxlY3RvclBhdGhbY3VycmVudFNlbGVjdG9yUGF0aEluZGV4XS5lbGVtZW50cy5zbGljZShjdXJyZW50U2VsZWN0b3JQYXRoRWxlbWVudEluZGV4KSk7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RvclBhdGhFbGVtZW50SW5kZXggPSAwOw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0b3JQYXRoSW5kZXgrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbmV3RWxlbWVudHMgPSBzZWxlY3Rvci5lbGVtZW50cw0KICAgICAgICAgICAgICAgICAgICAuc2xpY2UoY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCwgbWF0Y2guaW5kZXgpDQogICAgICAgICAgICAgICAgICAgIC5jb25jYXQoW2ZpcnN0RWxlbWVudF0pDQogICAgICAgICAgICAgICAgICAgIC5jb25jYXQocmVwbGFjZW1lbnRTZWxlY3Rvci5lbGVtZW50cy5zbGljZSgxKSk7DQogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTZWxlY3RvclBhdGhJbmRleCA9PT0gbWF0Y2gucGF0aEluZGV4ICYmIG1hdGNoSW5kZXggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGhbcGF0aC5sZW5ndGggLSAxXS5lbGVtZW50cyA9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXRoW3BhdGgubGVuZ3RoIC0gMV0uZWxlbWVudHMuY29uY2F0KG5ld0VsZW1lbnRzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLmNvbmNhdChzZWxlY3RvclBhdGguc2xpY2UoY3VycmVudFNlbGVjdG9yUGF0aEluZGV4LCBtYXRjaC5wYXRoSW5kZXgpKTsNCiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5ldyB0cmVlLlNlbGVjdG9yKG5ld0VsZW1lbnRzKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RvclBhdGhJbmRleCA9IG1hdGNoLmVuZFBhdGhJbmRleDsNCiAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0b3JQYXRoRWxlbWVudEluZGV4ID0gbWF0Y2guZW5kUGF0aEVsZW1lbnRJbmRleDsNCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCA+PSBzZWxlY3RvclBhdGhbY3VycmVudFNlbGVjdG9yUGF0aEluZGV4XS5lbGVtZW50cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCA9IDA7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RvclBhdGhJbmRleCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjdXJyZW50U2VsZWN0b3JQYXRoSW5kZXggPCBzZWxlY3RvclBhdGgubGVuZ3RoICYmIGN1cnJlbnRTZWxlY3RvclBhdGhFbGVtZW50SW5kZXggPiAwKSB7DQogICAgICAgICAgICAgICAgcGF0aFtwYXRoLmxlbmd0aCAtIDFdLmVsZW1lbnRzID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdDQogICAgICAgICAgICAgICAgICAgIC5lbGVtZW50cy5jb25jYXQoc2VsZWN0b3JQYXRoW2N1cnJlbnRTZWxlY3RvclBhdGhJbmRleF0uZWxlbWVudHMuc2xpY2UoY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCkpOw0KICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RvclBhdGhJbmRleCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcGF0aCA9IHBhdGguY29uY2F0KHNlbGVjdG9yUGF0aC5zbGljZShjdXJyZW50U2VsZWN0b3JQYXRoSW5kZXgsIHNlbGVjdG9yUGF0aC5sZW5ndGgpKTsNCiAgICAgICAgICAgIHBhdGggPSBwYXRoLm1hcChmdW5jdGlvbiAoY3VycmVudFZhbHVlKSB7DQogICAgICAgICAgICAgICAgLy8gd2UgY2FuIHJlLXVzZSBlbGVtZW50cyBoZXJlLCBiZWNhdXNlIHRoZSB2aXNpYmlsaXR5IHByb3BlcnR5IG1hdHRlcnMgb25seSBmb3Igc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgdmFyIGRlcml2ZWQgPSBjdXJyZW50VmFsdWUuY3JlYXRlRGVyaXZlZChjdXJyZW50VmFsdWUuZWxlbWVudHMpOw0KICAgICAgICAgICAgICAgIGlmIChpc1Zpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZGVyaXZlZC5lbnN1cmVWaXNpYmlsaXR5KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkZXJpdmVkLmVuc3VyZUludmlzaWJpbGl0eSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gZGVyaXZlZDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcmV0dXJuIHBhdGg7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUudmlzaXRNZWRpYSA9IGZ1bmN0aW9uIChtZWRpYU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgdmFyIG5ld0FsbEV4dGVuZHMgPSBtZWRpYU5vZGUuYWxsRXh0ZW5kcy5jb25jYXQodGhpcy5hbGxFeHRlbmRzU3RhY2tbdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMV0pOw0KICAgICAgICAgICAgbmV3QWxsRXh0ZW5kcyA9IG5ld0FsbEV4dGVuZHMuY29uY2F0KHRoaXMuZG9FeHRlbmRDaGFpbmluZyhuZXdBbGxFeHRlbmRzLCBtZWRpYU5vZGUuYWxsRXh0ZW5kcykpOw0KICAgICAgICAgICAgdGhpcy5hbGxFeHRlbmRzU3RhY2sucHVzaChuZXdBbGxFeHRlbmRzKTsNCiAgICAgICAgfTsNCiAgICAgICAgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLnByb3RvdHlwZS52aXNpdE1lZGlhT3V0ID0gZnVuY3Rpb24gKG1lZGlhTm9kZSkgew0KICAgICAgICAgICAgdmFyIGxhc3RJbmRleCA9IHRoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aCAtIDE7DQogICAgICAgICAgICB0aGlzLmFsbEV4dGVuZHNTdGFjay5sZW5ndGggPSBsYXN0SW5kZXg7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGUgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2YXIgbmV3QWxsRXh0ZW5kcyA9IGF0UnVsZU5vZGUuYWxsRXh0ZW5kcy5jb25jYXQodGhpcy5hbGxFeHRlbmRzU3RhY2tbdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMV0pOw0KICAgICAgICAgICAgbmV3QWxsRXh0ZW5kcyA9IG5ld0FsbEV4dGVuZHMuY29uY2F0KHRoaXMuZG9FeHRlbmRDaGFpbmluZyhuZXdBbGxFeHRlbmRzLCBhdFJ1bGVOb2RlLmFsbEV4dGVuZHMpKTsNCiAgICAgICAgICAgIHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2gobmV3QWxsRXh0ZW5kcyk7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGVPdXQgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSkgew0KICAgICAgICAgICAgdmFyIGxhc3RJbmRleCA9IHRoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aCAtIDE7DQogICAgICAgICAgICB0aGlzLmFsbEV4dGVuZHNTdGFjay5sZW5ndGggPSBsYXN0SW5kZXg7DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3I7DQogICAgfSgpKTsKCiAgICB2YXIgSm9pblNlbGVjdG9yVmlzaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gSm9pblNlbGVjdG9yVmlzaXRvcigpIHsNCiAgICAgICAgICAgIHRoaXMuY29udGV4dHMgPSBbW11dOw0KICAgICAgICAgICAgdGhpcy5fdmlzaXRvciA9IG5ldyBWaXNpdG9yKHRoaXMpOw0KICAgICAgICB9DQogICAgICAgIEpvaW5TZWxlY3RvclZpc2l0b3IucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChyb290KSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlzaXRvci52aXNpdChyb290KTsNCiAgICAgICAgfTsNCiAgICAgICAgSm9pblNlbGVjdG9yVmlzaXRvci5wcm90b3R5cGUudmlzaXREZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChkZWNsTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgSm9pblNlbGVjdG9yVmlzaXRvci5wcm90b3R5cGUudmlzaXRNaXhpbkRlZmluaXRpb24gPSBmdW5jdGlvbiAobWl4aW5EZWZpbml0aW9uTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgSm9pblNlbGVjdG9yVmlzaXRvci5wcm90b3R5cGUudmlzaXRSdWxlc2V0ID0gZnVuY3Rpb24gKHJ1bGVzZXROb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0c1t0aGlzLmNvbnRleHRzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgdmFyIHBhdGhzID0gW107DQogICAgICAgICAgICB2YXIgc2VsZWN0b3JzOw0KICAgICAgICAgICAgdGhpcy5jb250ZXh0cy5wdXNoKHBhdGhzKTsNCiAgICAgICAgICAgIGlmICghcnVsZXNldE5vZGUucm9vdCkgew0KICAgICAgICAgICAgICAgIHNlbGVjdG9ycyA9IHJ1bGVzZXROb2RlLnNlbGVjdG9yczsNCiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3JzKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9ycyA9IHNlbGVjdG9ycy5maWx0ZXIoZnVuY3Rpb24gKHNlbGVjdG9yKSB7IHJldHVybiBzZWxlY3Rvci5nZXRJc091dHB1dCgpOyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuc2VsZWN0b3JzID0gc2VsZWN0b3JzLmxlbmd0aCA/IHNlbGVjdG9ycyA6IChzZWxlY3RvcnMgPSBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9ycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuam9pblNlbGVjdG9ycyhwYXRocywgY29udGV4dCwgc2VsZWN0b3JzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdG9ycykgew0KICAgICAgICAgICAgICAgICAgICBydWxlc2V0Tm9kZS5ydWxlcyA9IG51bGw7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJ1bGVzZXROb2RlLnBhdGhzID0gcGF0aHM7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIEpvaW5TZWxlY3RvclZpc2l0b3IucHJvdG90eXBlLnZpc2l0UnVsZXNldE91dCA9IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSkgew0KICAgICAgICAgICAgdGhpcy5jb250ZXh0cy5sZW5ndGggPSB0aGlzLmNvbnRleHRzLmxlbmd0aCAtIDE7DQogICAgICAgIH07DQogICAgICAgIEpvaW5TZWxlY3RvclZpc2l0b3IucHJvdG90eXBlLnZpc2l0TWVkaWEgPSBmdW5jdGlvbiAobWVkaWFOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0c1t0aGlzLmNvbnRleHRzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgbWVkaWFOb2RlLnJ1bGVzWzBdLnJvb3QgPSAoY29udGV4dC5sZW5ndGggPT09IDAgfHwgY29udGV4dFswXS5tdWx0aU1lZGlhKTsNCiAgICAgICAgfTsNCiAgICAgICAgSm9pblNlbGVjdG9yVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGUgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dHNbdGhpcy5jb250ZXh0cy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgIGlmIChhdFJ1bGVOb2RlLnJ1bGVzICYmIGF0UnVsZU5vZGUucnVsZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgYXRSdWxlTm9kZS5ydWxlc1swXS5yb290ID0gKGF0UnVsZU5vZGUuaXNSb290ZWQgfHwgY29udGV4dC5sZW5ndGggPT09IDAgfHwgbnVsbCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBKb2luU2VsZWN0b3JWaXNpdG9yOw0KICAgIH0oKSk7CgogICAgdmFyIENTU1Zpc2l0b3JVdGlscyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gQ1NTVmlzaXRvclV0aWxzKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHRoaXMuX3Zpc2l0b3IgPSBuZXcgVmlzaXRvcih0aGlzKTsNCiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0Ow0KICAgICAgICB9DQogICAgICAgIENTU1Zpc2l0b3JVdGlscy5wcm90b3R5cGUuY29udGFpbnNTaWxlbnROb25CbG9ja2VkQ2hpbGQgPSBmdW5jdGlvbiAoYm9keVJ1bGVzKSB7DQogICAgICAgICAgICB2YXIgcnVsZTsNCiAgICAgICAgICAgIGlmICghYm9keVJ1bGVzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBib2R5UnVsZXMubGVuZ3RoOyByKyspIHsNCiAgICAgICAgICAgICAgICBydWxlID0gYm9keVJ1bGVzW3JdOw0KICAgICAgICAgICAgICAgIGlmIChydWxlLmlzU2lsZW50ICYmIHJ1bGUuaXNTaWxlbnQodGhpcy5fY29udGV4dCkgJiYgIXJ1bGUuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhdHJ1bGUgY29udGFpbnMgc29tZXRoaW5nIHRoYXQgd2FzIHJlZmVyZW5jZWQgKGxpa2VseSBieSBleHRlbmQpDQogICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlZm9yZSBpdCBuZWVkcyB0byBiZSBzaG93biBpbiBvdXRwdXQgdG9vDQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgQ1NTVmlzaXRvclV0aWxzLnByb3RvdHlwZS5rZWVwT25seVZpc2libGVDaGlsZHMgPSBmdW5jdGlvbiAob3duZXIpIHsNCiAgICAgICAgICAgIGlmIChvd25lciAmJiBvd25lci5ydWxlcykgew0KICAgICAgICAgICAgICAgIG93bmVyLnJ1bGVzID0gb3duZXIucnVsZXMuZmlsdGVyKGZ1bmN0aW9uICh0aGluZykgeyByZXR1cm4gdGhpbmcuaXNWaXNpYmxlKCk7IH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICBDU1NWaXNpdG9yVXRpbHMucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAob3duZXIpIHsNCiAgICAgICAgICAgIHJldHVybiAob3duZXIgJiYgb3duZXIucnVsZXMpDQogICAgICAgICAgICAgICAgPyAob3duZXIucnVsZXMubGVuZ3RoID09PSAwKSA6IHRydWU7DQogICAgICAgIH07DQogICAgICAgIENTU1Zpc2l0b3JVdGlscy5wcm90b3R5cGUuaGFzVmlzaWJsZVNlbGVjdG9yID0gZnVuY3Rpb24gKHJ1bGVzZXROb2RlKSB7DQogICAgICAgICAgICByZXR1cm4gKHJ1bGVzZXROb2RlICYmIHJ1bGVzZXROb2RlLnBhdGhzKQ0KICAgICAgICAgICAgICAgID8gKHJ1bGVzZXROb2RlLnBhdGhzLmxlbmd0aCA+IDApIDogZmFsc2U7DQogICAgICAgIH07DQogICAgICAgIENTU1Zpc2l0b3JVdGlscy5wcm90b3R5cGUucmVzb2x2ZVZpc2liaWxpdHkgPSBmdW5jdGlvbiAobm9kZSwgb3JpZ2luYWxSdWxlcykgew0KICAgICAgICAgICAgaWYgKCFub2RlLmJsb2Nrc1Zpc2liaWxpdHkoKSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRW1wdHkobm9kZSkgJiYgIXRoaXMuY29udGFpbnNTaWxlbnROb25CbG9ja2VkQ2hpbGQob3JpZ2luYWxSdWxlcykpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBjb21waWxlZFJ1bGVzQm9keSA9IG5vZGUucnVsZXNbMF07DQogICAgICAgICAgICB0aGlzLmtlZXBPbmx5VmlzaWJsZUNoaWxkcyhjb21waWxlZFJ1bGVzQm9keSk7DQogICAgICAgICAgICBpZiAodGhpcy5pc0VtcHR5KGNvbXBpbGVkUnVsZXNCb2R5KSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5vZGUuZW5zdXJlVmlzaWJpbGl0eSgpOw0KICAgICAgICAgICAgbm9kZS5yZW1vdmVWaXNpYmlsaXR5QmxvY2soKTsNCiAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICB9Ow0KICAgICAgICBDU1NWaXNpdG9yVXRpbHMucHJvdG90eXBlLmlzVmlzaWJsZVJ1bGVzZXQgPSBmdW5jdGlvbiAocnVsZXNldE5vZGUpIHsNCiAgICAgICAgICAgIGlmIChydWxlc2V0Tm9kZS5maXJzdFJvb3QpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLmlzRW1wdHkocnVsZXNldE5vZGUpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFydWxlc2V0Tm9kZS5yb290ICYmICF0aGlzLmhhc1Zpc2libGVTZWxlY3RvcihydWxlc2V0Tm9kZSkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIENTU1Zpc2l0b3JVdGlsczsNCiAgICB9KCkpOw0KICAgIHZhciBUb0NTU1Zpc2l0b3IgPSBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICB0aGlzLl92aXNpdG9yID0gbmV3IFZpc2l0b3IodGhpcyk7DQogICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0Ow0KICAgICAgICB0aGlzLnV0aWxzID0gbmV3IENTU1Zpc2l0b3JVdGlscyhjb250ZXh0KTsNCiAgICB9Ow0KICAgIFRvQ1NTVmlzaXRvci5wcm90b3R5cGUgPSB7DQogICAgICAgIGlzUmVwbGFjaW5nOiB0cnVlLA0KICAgICAgICBydW46IGZ1bmN0aW9uIChyb290KSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlzaXRvci52aXNpdChyb290KTsNCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXREZWNsYXJhdGlvbjogZnVuY3Rpb24gKGRlY2xOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIGlmIChkZWNsTm9kZS5ibG9ja3NWaXNpYmlsaXR5KCkgfHwgZGVjbE5vZGUudmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gZGVjbE5vZGU7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0TWl4aW5EZWZpbml0aW9uOiBmdW5jdGlvbiAobWl4aW5Ob2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIC8vIG1peGluIGRlZmluaXRpb25zIGRvIG5vdCBnZXQgZXZhbCdkIC0gdGhpcyBtZWFucyB0aGV5IGtlZXAgc3RhdGUNCiAgICAgICAgICAgIC8vIHNvIHdlIGhhdmUgdG8gY2xlYXIgdGhhdCBzdGF0ZSBoZXJlIHNvIGl0IGlzbid0IHVzZWQgaWYgdG9DU1MgaXMgY2FsbGVkIHR3aWNlDQogICAgICAgICAgICBtaXhpbk5vZGUuZnJhbWVzID0gW107DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0RXh0ZW5kOiBmdW5jdGlvbiAoZXh0ZW5kTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0Q29tbWVudDogZnVuY3Rpb24gKGNvbW1lbnROb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIGlmIChjb21tZW50Tm9kZS5ibG9ja3NWaXNpYmlsaXR5KCkgfHwgY29tbWVudE5vZGUuaXNTaWxlbnQodGhpcy5fY29udGV4dCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gY29tbWVudE5vZGU7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0TWVkaWE6IGZ1bmN0aW9uIChtZWRpYU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgdmFyIG9yaWdpbmFsUnVsZXMgPSBtZWRpYU5vZGUucnVsZXNbMF0ucnVsZXM7DQogICAgICAgICAgICBtZWRpYU5vZGUuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpOw0KICAgICAgICAgICAgdmlzaXRBcmdzLnZpc2l0RGVlcGVyID0gZmFsc2U7DQogICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5yZXNvbHZlVmlzaWJpbGl0eShtZWRpYU5vZGUsIG9yaWdpbmFsUnVsZXMpOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdEltcG9ydDogZnVuY3Rpb24gKGltcG9ydE5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgaWYgKGltcG9ydE5vZGUuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGltcG9ydE5vZGU7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0QXRSdWxlOiBmdW5jdGlvbiAoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICBpZiAoYXRSdWxlTm9kZS5ydWxlcyAmJiBhdFJ1bGVOb2RlLnJ1bGVzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2l0QXRSdWxlV2l0aEJvZHkoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2l0QXRSdWxlV2l0aG91dEJvZHkoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBbm9ueW1vdXM6IGZ1bmN0aW9uIChhbm9ueW1vdXNOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIGlmICghYW5vbnltb3VzTm9kZS5ibG9ja3NWaXNpYmlsaXR5KCkpIHsNCiAgICAgICAgICAgICAgICBhbm9ueW1vdXNOb2RlLmFjY2VwdCh0aGlzLl92aXNpdG9yKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYW5vbnltb3VzTm9kZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBdFJ1bGVXaXRoQm9keTogZnVuY3Rpb24gKGF0UnVsZU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUgbmVzdGVkIHJ1bGVzZXQgYW5kIHRoYXQgb25lIGhhcyBubyBwYXRoLCB0aGVuIGl0IGlzDQogICAgICAgICAgICAvLyBqdXN0IGZha2UgcnVsZXNldA0KICAgICAgICAgICAgZnVuY3Rpb24gaGFzRmFrZVJ1bGVzZXQoYXRSdWxlTm9kZSkgew0KICAgICAgICAgICAgICAgIHZhciBib2R5UnVsZXMgPSBhdFJ1bGVOb2RlLnJ1bGVzOw0KICAgICAgICAgICAgICAgIHJldHVybiBib2R5UnVsZXMubGVuZ3RoID09PSAxICYmICghYm9keVJ1bGVzWzBdLnBhdGhzIHx8IGJvZHlSdWxlc1swXS5wYXRocy5sZW5ndGggPT09IDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Qm9keVJ1bGVzKGF0UnVsZU5vZGUpIHsNCiAgICAgICAgICAgICAgICB2YXIgbm9kZVJ1bGVzID0gYXRSdWxlTm9kZS5ydWxlczsNCiAgICAgICAgICAgICAgICBpZiAoaGFzRmFrZVJ1bGVzZXQoYXRSdWxlTm9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVSdWxlc1swXS5ydWxlczsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVSdWxlczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIGl0IGlzIHN0aWxsIHRydWUgdGhhdCBpdCBpcyBvbmx5IG9uZSBydWxlc2V0IGluIGFycmF5DQogICAgICAgICAgICAvLyB0aGlzIGlzIGxhc3Qgc3VjaCBtb21lbnQNCiAgICAgICAgICAgIC8vIHByb2Nlc3MgY2hpbGRzDQogICAgICAgICAgICB2YXIgb3JpZ2luYWxSdWxlcyA9IGdldEJvZHlSdWxlcyhhdFJ1bGVOb2RlKTsNCiAgICAgICAgICAgIGF0UnVsZU5vZGUuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpOw0KICAgICAgICAgICAgdmlzaXRBcmdzLnZpc2l0RGVlcGVyID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoIXRoaXMudXRpbHMuaXNFbXB0eShhdFJ1bGVOb2RlKSkgew0KICAgICAgICAgICAgICAgIHRoaXMuX21lcmdlUnVsZXMoYXRSdWxlTm9kZS5ydWxlc1swXS5ydWxlcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5yZXNvbHZlVmlzaWJpbGl0eShhdFJ1bGVOb2RlLCBvcmlnaW5hbFJ1bGVzKTsNCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBdFJ1bGVXaXRob3V0Qm9keTogZnVuY3Rpb24gKGF0UnVsZU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgaWYgKGF0UnVsZU5vZGUuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGF0UnVsZU5vZGUubmFtZSA9PT0gJ0BjaGFyc2V0Jykgew0KICAgICAgICAgICAgICAgIC8vIE9ubHkgb3V0cHV0IHRoZSBkZWJ1ZyBpbmZvIHRvZ2V0aGVyIHdpdGggc3Vic2VxdWVudCBAY2hhcnNldCBkZWZpbml0aW9ucw0KICAgICAgICAgICAgICAgIC8vIGEgY29tbWVudCAob3IgQG1lZGlhIHN0YXRlbWVudCkgYmVmb3JlIHRoZSBhY3R1YWwgQGNoYXJzZXQgYXRydWxlIHdvdWxkDQogICAgICAgICAgICAgICAgLy8gYmUgY29uc2lkZXJlZCBpbGxlZ2FsIGNzcyBhcyBpdCBoYXMgdG8gYmUgb24gdGhlIGZpcnN0IGxpbmUNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGFyc2V0KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChhdFJ1bGVOb2RlLmRlYnVnSW5mbykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSBuZXcgdHJlZS5Db21tZW50KCIvKiAiICsgYXRSdWxlTm9kZS50b0NTUyh0aGlzLl9jb250ZXh0KS5yZXBsYWNlKC9cbi9nLCAnJykgKyAiICovXG4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQuZGVidWdJbmZvID0gYXRSdWxlTm9kZS5kZWJ1Z0luZm87DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlzaXRvci52aXNpdChjb21tZW50KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuY2hhcnNldCA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYXRSdWxlTm9kZTsNCiAgICAgICAgfSwNCiAgICAgICAgY2hlY2tWYWxpZE5vZGVzOiBmdW5jdGlvbiAocnVsZXMsIGlzUm9vdCkgew0KICAgICAgICAgICAgaWYgKCFydWxlcykgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgcnVsZU5vZGUgPSBydWxlc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAoaXNSb290ICYmIHJ1bGVOb2RlIGluc3RhbmNlb2YgdHJlZS5EZWNsYXJhdGlvbiAmJiAhcnVsZU5vZGUudmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgeyBtZXNzYWdlOiAnUHJvcGVydGllcyBtdXN0IGJlIGluc2lkZSBzZWxlY3RvciBibG9ja3MuIFRoZXkgY2Fubm90IGJlIGluIHRoZSByb290JywNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBydWxlTm9kZS5nZXRJbmRleCgpLCBmaWxlbmFtZTogcnVsZU5vZGUuZmlsZUluZm8oKSAmJiBydWxlTm9kZS5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChydWxlTm9kZSBpbnN0YW5jZW9mIHRyZWUuQ2FsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IG1lc3NhZ2U6ICJGdW5jdGlvbiAnIiArIHJ1bGVOb2RlLm5hbWUgKyAiJyBkaWQgbm90IHJldHVybiBhIHJvb3Qgbm9kZSIsDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogcnVsZU5vZGUuZ2V0SW5kZXgoKSwgZmlsZW5hbWU6IHJ1bGVOb2RlLmZpbGVJbmZvKCkgJiYgcnVsZU5vZGUuZmlsZUluZm8oKS5maWxlbmFtZSB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocnVsZU5vZGUudHlwZSAmJiAhcnVsZU5vZGUuYWxsb3dSb290KSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IHsgbWVzc2FnZTogcnVsZU5vZGUudHlwZSArICIgbm9kZSByZXR1cm5lZCBieSBhIGZ1bmN0aW9uIGlzIG5vdCB2YWxpZCBoZXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBydWxlTm9kZS5nZXRJbmRleCgpLCBmaWxlbmFtZTogcnVsZU5vZGUuZmlsZUluZm8oKSAmJiBydWxlTm9kZS5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICB2aXNpdFJ1bGVzZXQ6IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICAvLyBhdCB0aGlzIHBvaW50IHJ1bGVzZXRzIGFyZSBuZXN0ZWQgaW50byBlYWNoIG90aGVyDQogICAgICAgICAgICB2YXIgcnVsZTsNCiAgICAgICAgICAgIHZhciBydWxlc2V0cyA9IFtdOw0KICAgICAgICAgICAgdGhpcy5jaGVja1ZhbGlkTm9kZXMocnVsZXNldE5vZGUucnVsZXMsIHJ1bGVzZXROb2RlLmZpcnN0Um9vdCk7DQogICAgICAgICAgICBpZiAoIXJ1bGVzZXROb2RlLnJvb3QpIHsNCiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaW52aXNpYmxlIHBhdGhzDQogICAgICAgICAgICAgICAgdGhpcy5fY29tcGlsZVJ1bGVzZXRQYXRocyhydWxlc2V0Tm9kZSk7DQogICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHJ1bGVzZXRzIGZyb20gdGhpcyBydWxlc2V0IGJvZHkgYW5kIGNvbXBpbGUgdGhlbSBzZXBhcmF0ZWx5DQogICAgICAgICAgICAgICAgdmFyIG5vZGVSdWxlcyA9IHJ1bGVzZXROb2RlLnJ1bGVzOw0KICAgICAgICAgICAgICAgIHZhciBub2RlUnVsZUNudCA9IG5vZGVSdWxlcyA/IG5vZGVSdWxlcy5sZW5ndGggOiAwOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZVJ1bGVDbnQ7KSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGUgPSBub2RlUnVsZXNbaV07DQogICAgICAgICAgICAgICAgICAgIGlmIChydWxlICYmIHJ1bGUucnVsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZpc2l0IGJlY2F1c2Ugd2UgYXJlIG1vdmluZyB0aGVtIG91dCBmcm9tIGJlaW5nIGEgY2hpbGQNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzZXRzLnB1c2godGhpcy5fdmlzaXRvci52aXNpdChydWxlKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBub2RlUnVsZXMuc3BsaWNlKGksIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVJ1bGVDbnQtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gYWNjZXB0IHRoZSB2aXNpdG9yIHRvIHJlbW92ZSBydWxlcyBhbmQgcmVmYWN0b3IgaXRzZWxmDQogICAgICAgICAgICAgICAgLy8gdGhlbiB3ZSBjYW4gZGVjaWRlIG5vZ3cgd2hldGhlciB3ZSB3YW50IGl0IG9yIG5vdA0KICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgYm9keQ0KICAgICAgICAgICAgICAgIGlmIChub2RlUnVsZUNudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUucnVsZXMgPSBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgeyAvLyBpZiAoISBydWxlc2V0Tm9kZS5yb290KSB7DQogICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpOw0KICAgICAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHJ1bGVzZXROb2RlLnJ1bGVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5fbWVyZ2VSdWxlcyhydWxlc2V0Tm9kZS5ydWxlcyk7DQogICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlRHVwbGljYXRlUnVsZXMocnVsZXNldE5vZGUucnVsZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gbm93IGRlY2lkZSB3aGV0aGVyIHdlIGtlZXAgdGhlIHJ1bGVzZXQNCiAgICAgICAgICAgIGlmICh0aGlzLnV0aWxzLmlzVmlzaWJsZVJ1bGVzZXQocnVsZXNldE5vZGUpKSB7DQogICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuZW5zdXJlVmlzaWJpbGl0eSgpOw0KICAgICAgICAgICAgICAgIHJ1bGVzZXRzLnNwbGljZSgwLCAwLCBydWxlc2V0Tm9kZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAocnVsZXNldHMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGVzZXRzWzBdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJ1bGVzZXRzOw0KICAgICAgICB9LA0KICAgICAgICBfY29tcGlsZVJ1bGVzZXRQYXRoczogZnVuY3Rpb24gKHJ1bGVzZXROb2RlKSB7DQogICAgICAgICAgICBpZiAocnVsZXNldE5vZGUucGF0aHMpIHsNCiAgICAgICAgICAgICAgICBydWxlc2V0Tm9kZS5wYXRocyA9IHJ1bGVzZXROb2RlLnBhdGhzDQogICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHApIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwWzBdLmVsZW1lbnRzWzBdLmNvbWJpbmF0b3IudmFsdWUgPT09ICcgJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcFswXS5lbGVtZW50c1swXS5jb21iaW5hdG9yID0gbmV3ICh0cmVlLkNvbWJpbmF0b3IpKCcnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBbaV0uaXNWaXNpYmxlKCkgJiYgcFtpXS5nZXRJc091dHB1dCgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBfcmVtb3ZlRHVwbGljYXRlUnVsZXM6IGZ1bmN0aW9uIChydWxlcykgew0KICAgICAgICAgICAgaWYgKCFydWxlcykgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHJlbW92ZSBkdXBsaWNhdGVzDQogICAgICAgICAgICB2YXIgcnVsZUNhY2hlID0ge307DQogICAgICAgICAgICB2YXIgcnVsZUxpc3Q7DQogICAgICAgICAgICB2YXIgcnVsZTsNCiAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgZm9yIChpID0gcnVsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgICAgICAgICBydWxlID0gcnVsZXNbaV07DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiB0cmVlLkRlY2xhcmF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcnVsZUNhY2hlW3J1bGUubmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVDYWNoZVtydWxlLm5hbWVdID0gcnVsZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVMaXN0ID0gcnVsZUNhY2hlW3J1bGUubmFtZV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZUxpc3QgaW5zdGFuY2VvZiB0cmVlLkRlY2xhcmF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZUxpc3QgPSBydWxlQ2FjaGVbcnVsZS5uYW1lXSA9IFtydWxlQ2FjaGVbcnVsZS5uYW1lXS50b0NTUyh0aGlzLl9jb250ZXh0KV07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZUNTUyA9IHJ1bGUudG9DU1ModGhpcy5fY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZUxpc3QuaW5kZXhPZihydWxlQ1NTKSAhPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlTGlzdC5wdXNoKHJ1bGVDU1MpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBfbWVyZ2VSdWxlczogZnVuY3Rpb24gKHJ1bGVzKSB7DQogICAgICAgICAgICBpZiAoIXJ1bGVzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGdyb3VwcyA9IHt9Ow0KICAgICAgICAgICAgdmFyIGdyb3Vwc0FyciA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNbaV07DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUubWVyZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHJ1bGUubmFtZTsNCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2tleV0gPyBydWxlcy5zcGxpY2UoaS0tLCAxKSA6DQogICAgICAgICAgICAgICAgICAgICAgICBncm91cHNBcnIucHVzaChncm91cHNba2V5XSA9IFtdKTsNCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2tleV0ucHVzaChydWxlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBncm91cHNBcnIuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHsNCiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSBncm91cFswXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlXzEgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1hXzEgPSBbbmV3IHRyZWUuRXhwcmVzc2lvbihzcGFjZV8xKV07DQogICAgICAgICAgICAgICAgICAgIGdyb3VwLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocnVsZS5tZXJnZSA9PT0gJysnKSAmJiAoc3BhY2VfMS5sZW5ndGggPiAwKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hXzEucHVzaChuZXcgdHJlZS5FeHByZXNzaW9uKHNwYWNlXzEgPSBbXSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VfMS5wdXNoKHJ1bGUudmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0XzEuaW1wb3J0YW50ID0gcmVzdWx0XzEuaW1wb3J0YW50IHx8IHJ1bGUuaW1wb3J0YW50Ow0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0XzEudmFsdWUgPSBuZXcgdHJlZS5WYWx1ZShjb21tYV8xKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH07CgogICAgdmFyIHZpc2l0b3JzID0gew0KICAgICAgICBWaXNpdG9yOiBWaXNpdG9yLA0KICAgICAgICBJbXBvcnRWaXNpdG9yOiBJbXBvcnRWaXNpdG9yLA0KICAgICAgICBNYXJrVmlzaWJsZVNlbGVjdG9yc1Zpc2l0b3I6IFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvciwNCiAgICAgICAgRXh0ZW5kVmlzaXRvcjogUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLA0KICAgICAgICBKb2luU2VsZWN0b3JWaXNpdG9yOiBKb2luU2VsZWN0b3JWaXNpdG9yLA0KICAgICAgICBUb0NTU1Zpc2l0b3I6IFRvQ1NTVmlzaXRvcg0KICAgIH07CgogICAgLy8gU3BsaXQgdGhlIGlucHV0IGludG8gY2h1bmtzLg0KICAgIGZ1bmN0aW9uIGNodW5rZXIgKGlucHV0LCBmYWlsKSB7DQogICAgICAgIHZhciBsZW4gPSBpbnB1dC5sZW5ndGg7DQogICAgICAgIHZhciBsZXZlbCA9IDA7DQogICAgICAgIHZhciBwYXJlbkxldmVsID0gMDsNCiAgICAgICAgdmFyIGxhc3RPcGVuaW5nOw0KICAgICAgICB2YXIgbGFzdE9wZW5pbmdQYXJlbjsNCiAgICAgICAgdmFyIGxhc3RNdWx0aUNvbW1lbnQ7DQogICAgICAgIHZhciBsYXN0TXVsdGlDb21tZW50RW5kQnJhY2U7DQogICAgICAgIHZhciBjaHVua3MgPSBbXTsNCiAgICAgICAgdmFyIGVtaXRGcm9tID0gMDsNCiAgICAgICAgdmFyIGNodW5rZXJDdXJyZW50SW5kZXg7DQogICAgICAgIHZhciBjdXJyZW50Q2h1bmtTdGFydEluZGV4Ow0KICAgICAgICB2YXIgY2M7DQogICAgICAgIHZhciBjYzI7DQogICAgICAgIHZhciBtYXRjaGVkOw0KICAgICAgICBmdW5jdGlvbiBlbWl0Q2h1bmsoZm9yY2UpIHsNCiAgICAgICAgICAgIHZhciBsZW4gPSBjaHVua2VyQ3VycmVudEluZGV4IC0gZW1pdEZyb207DQogICAgICAgICAgICBpZiAoKChsZW4gPCA1MTIpICYmICFmb3JjZSkgfHwgIWxlbikgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNodW5rcy5wdXNoKGlucHV0LnNsaWNlKGVtaXRGcm9tLCBjaHVua2VyQ3VycmVudEluZGV4ICsgMSkpOw0KICAgICAgICAgICAgZW1pdEZyb20gPSBjaHVua2VyQ3VycmVudEluZGV4ICsgMTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKGNodW5rZXJDdXJyZW50SW5kZXggPSAwOyBjaHVua2VyQ3VycmVudEluZGV4IDwgbGVuOyBjaHVua2VyQ3VycmVudEluZGV4KyspIHsNCiAgICAgICAgICAgIGNjID0gaW5wdXQuY2hhckNvZGVBdChjaHVua2VyQ3VycmVudEluZGV4KTsNCiAgICAgICAgICAgIGlmICgoKGNjID49IDk3KSAmJiAoY2MgPD0gMTIyKSkgfHwgKGNjIDwgMzQpKSB7DQogICAgICAgICAgICAgICAgLy8gYS16IG9yIHdoaXRlc3BhY2UNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN3aXRjaCAoY2MpIHsNCiAgICAgICAgICAgICAgICBjYXNlIDQwOiAvLyAoDQogICAgICAgICAgICAgICAgICAgIHBhcmVuTGV2ZWwrKzsNCiAgICAgICAgICAgICAgICAgICAgbGFzdE9wZW5pbmdQYXJlbiA9IGNodW5rZXJDdXJyZW50SW5kZXg7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGNhc2UgNDE6IC8vICkNCiAgICAgICAgICAgICAgICAgICAgaWYgKC0tcGFyZW5MZXZlbCA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdtaXNzaW5nIG9wZW5pbmcgYChgJywgY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgY2FzZSA1OTogLy8gOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmVuTGV2ZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRDaHVuaygpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGNhc2UgMTIzOiAvLyB7DQogICAgICAgICAgICAgICAgICAgIGxldmVsKys7DQogICAgICAgICAgICAgICAgICAgIGxhc3RPcGVuaW5nID0gY2h1bmtlckN1cnJlbnRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgY2FzZSAxMjU6IC8vIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKC0tbGV2ZWwgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnbWlzc2luZyBvcGVuaW5nIGB7YCcsIGNodW5rZXJDdXJyZW50SW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICghbGV2ZWwgJiYgIXBhcmVuTGV2ZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRDaHVuaygpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGNhc2UgOTI6IC8vIFwNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rZXJDdXJyZW50SW5kZXggPCBsZW4gLSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjaHVua2VyQ3VycmVudEluZGV4Kys7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgndW5lc2NhcGVkIGBcXGAnLCBjaHVua2VyQ3VycmVudEluZGV4KTsNCiAgICAgICAgICAgICAgICBjYXNlIDM0Og0KICAgICAgICAgICAgICAgIGNhc2UgMzk6DQogICAgICAgICAgICAgICAgY2FzZSA5NjogLy8gIiwgJyBhbmQgYA0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gMDsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudENodW5rU3RhcnRJbmRleCA9IGNodW5rZXJDdXJyZW50SW5kZXg7DQogICAgICAgICAgICAgICAgICAgIGZvciAoY2h1bmtlckN1cnJlbnRJbmRleCA9IGNodW5rZXJDdXJyZW50SW5kZXggKyAxOyBjaHVua2VyQ3VycmVudEluZGV4IDwgbGVuOyBjaHVua2VyQ3VycmVudEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNjMiA9IGlucHV0LmNoYXJDb2RlQXQoY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2MyID4gOTYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYzIgPT0gY2MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYzIgPT0gOTIpIHsgLy8gXA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVua2VyQ3VycmVudEluZGV4ID09IGxlbiAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ3VuZXNjYXBlZCBgXFxgJywgY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rZXJDdXJyZW50SW5kZXgrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoInVubWF0Y2hlZCBgIiArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2MpICsgImAiLCBjdXJyZW50Q2h1bmtTdGFydEluZGV4KTsNCiAgICAgICAgICAgICAgICBjYXNlIDQ3OiAvLyAvLCBjaGVjayBmb3IgY29tbWVudA0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW5MZXZlbCB8fCAoY2h1bmtlckN1cnJlbnRJbmRleCA9PSBsZW4gLSAxKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2MyID0gaW5wdXQuY2hhckNvZGVBdChjaHVua2VyQ3VycmVudEluZGV4ICsgMSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjYzIgPT0gNDcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vLCBmaW5kIGxuZmVlZA0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjaHVua2VyQ3VycmVudEluZGV4ID0gY2h1bmtlckN1cnJlbnRJbmRleCArIDI7IGNodW5rZXJDdXJyZW50SW5kZXggPCBsZW47IGNodW5rZXJDdXJyZW50SW5kZXgrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjMiA9IGlucHV0LmNoYXJDb2RlQXQoY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjYzIgPD0gMTMpICYmICgoY2MyID09IDEwKSB8fCAoY2MyID09IDEzKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNjMiA9PSA0Mikgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLyosIGZpbmQgKi8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNdWx0aUNvbW1lbnQgPSBjdXJyZW50Q2h1bmtTdGFydEluZGV4ID0gY2h1bmtlckN1cnJlbnRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY2h1bmtlckN1cnJlbnRJbmRleCA9IGNodW5rZXJDdXJyZW50SW5kZXggKyAyOyBjaHVua2VyQ3VycmVudEluZGV4IDwgbGVuIC0gMTsgY2h1bmtlckN1cnJlbnRJbmRleCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MyID0gaW5wdXQuY2hhckNvZGVBdChjaHVua2VyQ3VycmVudEluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2MyID09IDEyNSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TXVsdGlDb21tZW50RW5kQnJhY2UgPSBjaHVua2VyQ3VycmVudEluZGV4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2MyICE9IDQyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChjaHVua2VyQ3VycmVudEluZGV4ICsgMSkgPT0gNDcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rZXJDdXJyZW50SW5kZXggPT0gbGVuIC0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdtaXNzaW5nIGNsb3NpbmcgYCovYCcsIGN1cnJlbnRDaHVua1N0YXJ0SW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtlckN1cnJlbnRJbmRleCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGNhc2UgNDI6IC8vICosIGNoZWNrIGZvciB1bm1hdGNoZWQgKi8NCiAgICAgICAgICAgICAgICAgICAgaWYgKChjaHVua2VyQ3VycmVudEluZGV4IDwgbGVuIC0gMSkgJiYgKGlucHV0LmNoYXJDb2RlQXQoY2h1bmtlckN1cnJlbnRJbmRleCArIDEpID09IDQ3KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ3VubWF0Y2hlZCBgLypgJywgY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKGxldmVsICE9PSAwKSB7DQogICAgICAgICAgICBpZiAoKGxhc3RNdWx0aUNvbW1lbnQgPiBsYXN0T3BlbmluZykgJiYgKGxhc3RNdWx0aUNvbW1lbnRFbmRCcmFjZSA+IGxhc3RNdWx0aUNvbW1lbnQpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ21pc3NpbmcgY2xvc2luZyBgfWAgb3IgYCovYCcsIGxhc3RPcGVuaW5nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdtaXNzaW5nIGNsb3NpbmcgYH1gJywgbGFzdE9wZW5pbmcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKHBhcmVuTGV2ZWwgIT09IDApIHsNCiAgICAgICAgICAgIHJldHVybiBmYWlsKCdtaXNzaW5nIGNsb3NpbmcgYClgJywgbGFzdE9wZW5pbmdQYXJlbik7DQogICAgICAgIH0NCiAgICAgICAgZW1pdENodW5rKHRydWUpOw0KICAgICAgICByZXR1cm4gY2h1bmtzOw0KICAgIH0KCiAgICB2YXIgZ2V0UGFyc2VySW5wdXQgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgLy8gTGVzcyBpbnB1dCBzdHJpbmcNCiAgICAgICAgaW5wdXQ7DQogICAgICAgIHZhciAvLyBjdXJyZW50IGNodW5rDQogICAgICAgIGo7DQogICAgICAgIHZhciAvLyBob2xkcyBzdGF0ZSBmb3IgYmFja3RyYWNraW5nDQogICAgICAgIHNhdmVTdGFjayA9IFtdOw0KICAgICAgICB2YXIgLy8gZnVydGhlc3QgaW5kZXggdGhlIHBhcnNlciBoYXMgZ29uZSB0bw0KICAgICAgICBmdXJ0aGVzdDsNCiAgICAgICAgdmFyIC8vIGlmIHRoaXMgaXMgZnVydGhlc3Qgd2UgZ290IHRvLCB0aGlzIGlzIHRoZSBwcm9iYWJseSBjYXVzZQ0KICAgICAgICBmdXJ0aGVzdFBvc3NpYmxlRXJyb3JNZXNzYWdlOw0KICAgICAgICB2YXIgLy8gY2h1bmtpZmllZCBpbnB1dA0KICAgICAgICBjaHVua3M7DQogICAgICAgIHZhciAvLyBjdXJyZW50IGNodW5rDQogICAgICAgIGN1cnJlbnQ7DQogICAgICAgIHZhciAvLyBpbmRleCBvZiBjdXJyZW50IGNodW5rLCBpbiBgaW5wdXRgDQogICAgICAgIGN1cnJlbnRQb3M7DQogICAgICAgIHZhciBwYXJzZXJJbnB1dCA9IHt9Ow0KICAgICAgICB2YXIgQ0hBUkNPREVfU1BBQ0UgPSAzMjsNCiAgICAgICAgdmFyIENIQVJDT0RFX1RBQiA9IDk7DQogICAgICAgIHZhciBDSEFSQ09ERV9MRiA9IDEwOw0KICAgICAgICB2YXIgQ0hBUkNPREVfQ1IgPSAxMzsNCiAgICAgICAgdmFyIENIQVJDT0RFX1BMVVMgPSA0MzsNCiAgICAgICAgdmFyIENIQVJDT0RFX0NPTU1BID0gNDQ7DQogICAgICAgIHZhciBDSEFSQ09ERV9GT1JXQVJEX1NMQVNIID0gNDc7DQogICAgICAgIHZhciBDSEFSQ09ERV85ID0gNTc7DQogICAgICAgIGZ1bmN0aW9uIHNraXBXaGl0ZXNwYWNlKGxlbmd0aCkgew0KICAgICAgICAgICAgdmFyIG9sZGkgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgdmFyIG9sZGogPSBqOw0KICAgICAgICAgICAgdmFyIGN1cnIgPSBwYXJzZXJJbnB1dC5pIC0gY3VycmVudFBvczsNCiAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IHBhcnNlcklucHV0LmkgKyBjdXJyZW50Lmxlbmd0aCAtIGN1cnI7DQogICAgICAgICAgICB2YXIgbWVtID0gKHBhcnNlcklucHV0LmkgKz0gbGVuZ3RoKTsNCiAgICAgICAgICAgIHZhciBpbnAgPSBpbnB1dDsNCiAgICAgICAgICAgIHZhciBjOw0KICAgICAgICAgICAgdmFyIG5leHRDaGFyOw0KICAgICAgICAgICAgdmFyIGNvbW1lbnQ7DQogICAgICAgICAgICBmb3IgKDsgcGFyc2VySW5wdXQuaSA8IGVuZEluZGV4OyBwYXJzZXJJbnB1dC5pKyspIHsNCiAgICAgICAgICAgICAgICBjID0gaW5wLmNoYXJDb2RlQXQocGFyc2VySW5wdXQuaSk7DQogICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LmF1dG9Db21tZW50QWJzb3JiICYmIGMgPT09IENIQVJDT0RFX0ZPUldBUkRfU0xBU0gpIHsNCiAgICAgICAgICAgICAgICAgICAgbmV4dENoYXIgPSBpbnAuY2hhckF0KHBhcnNlcklucHV0LmkgKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRDaGFyID09PSAnLycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQgPSB7IGluZGV4OiBwYXJzZXJJbnB1dC5pLCBpc0xpbmVDb21tZW50OiB0cnVlIH07DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dE5ld0xpbmUgPSBpbnAuaW5kZXhPZignXG4nLCBwYXJzZXJJbnB1dC5pICsgMik7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dE5ld0xpbmUgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5ld0xpbmUgPSBlbmRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkgPSBuZXh0TmV3TGluZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQudGV4dCA9IGlucC5zdWJzdHIoY29tbWVudC5pbmRleCwgcGFyc2VySW5wdXQuaSAtIGNvbW1lbnQuaW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuY29tbWVudFN0b3JlLnB1c2goY29tbWVudCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXh0Q2hhciA9PT0gJyonKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dFN0YXJTbGFzaCA9IGlucC5pbmRleE9mKCcqLycsIHBhcnNlcklucHV0LmkgKyAyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0U3RhclNsYXNoID49IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50ID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogcGFyc2VySW5wdXQuaSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogaW5wLnN1YnN0cihwYXJzZXJJbnB1dC5pLCBuZXh0U3RhclNsYXNoICsgMiAtIHBhcnNlcklucHV0LmkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpbmVDb21tZW50OiBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuaSArPSBjb21tZW50LnRleHQubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUucHVzaChjb21tZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKChjICE9PSBDSEFSQ09ERV9TUEFDRSkgJiYgKGMgIT09IENIQVJDT0RFX0xGKSAmJiAoYyAhPT0gQ0hBUkNPREVfVEFCKSAmJiAoYyAhPT0gQ0hBUkNPREVfQ1IpKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnNsaWNlKGxlbmd0aCArIHBhcnNlcklucHV0LmkgLSBtZW0gKyBjdXJyKTsNCiAgICAgICAgICAgIGN1cnJlbnRQb3MgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgaWYgKCFjdXJyZW50Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIGlmIChqIDwgY2h1bmtzLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGNodW5rc1srK2pdOw0KICAgICAgICAgICAgICAgICAgICBza2lwV2hpdGVzcGFjZSgwKTsgLy8gc2tpcCBzcGFjZSBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgY2h1bmsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIHRoaW5ncyBjaGFuZ2VkDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZpbmlzaGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBvbGRpICE9PSBwYXJzZXJJbnB1dC5pIHx8IG9sZGogIT09IGo7DQogICAgICAgIH0NCiAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGN1cnJlbnRQb3MgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgc2F2ZVN0YWNrLnB1c2goeyBjdXJyZW50OiBjdXJyZW50LCBpOiBwYXJzZXJJbnB1dC5pLCBqOiBqIH0pOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlID0gZnVuY3Rpb24gKHBvc3NpYmxlRXJyb3JNZXNzYWdlKSB7DQogICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuaSA+IGZ1cnRoZXN0IHx8IChwYXJzZXJJbnB1dC5pID09PSBmdXJ0aGVzdCAmJiBwb3NzaWJsZUVycm9yTWVzc2FnZSAmJiAhZnVydGhlc3RQb3NzaWJsZUVycm9yTWVzc2FnZSkpIHsNCiAgICAgICAgICAgICAgICBmdXJ0aGVzdCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgZnVydGhlc3RQb3NzaWJsZUVycm9yTWVzc2FnZSA9IHBvc3NpYmxlRXJyb3JNZXNzYWdlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHN0YXRlID0gc2F2ZVN0YWNrLnBvcCgpOw0KICAgICAgICAgICAgY3VycmVudCA9IHN0YXRlLmN1cnJlbnQ7DQogICAgICAgICAgICBjdXJyZW50UG9zID0gcGFyc2VySW5wdXQuaSA9IHN0YXRlLmk7DQogICAgICAgICAgICBqID0gc3RhdGUuajsNCiAgICAgICAgfTsNCiAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgc2F2ZVN0YWNrLnBvcCgpOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UgPSBmdW5jdGlvbiAob2Zmc2V0KSB7DQogICAgICAgICAgICB2YXIgcG9zID0gcGFyc2VySW5wdXQuaSArIChvZmZzZXQgfHwgMCk7DQogICAgICAgICAgICB2YXIgY29kZSA9IGlucHV0LmNoYXJDb2RlQXQocG9zKTsNCiAgICAgICAgICAgIHJldHVybiAoY29kZSA9PT0gQ0hBUkNPREVfU1BBQ0UgfHwgY29kZSA9PT0gQ0hBUkNPREVfQ1IgfHwgY29kZSA9PT0gQ0hBUkNPREVfVEFCIHx8IGNvZGUgPT09IENIQVJDT0RFX0xGKTsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gU3BlY2lhbGl6YXRpb24gb2YgJCh0b2spDQogICAgICAgIHBhcnNlcklucHV0LiRyZSA9IGZ1bmN0aW9uICh0b2spIHsNCiAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5pID4gY3VycmVudFBvcykgew0KICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnNsaWNlKHBhcnNlcklucHV0LmkgLSBjdXJyZW50UG9zKTsNCiAgICAgICAgICAgICAgICBjdXJyZW50UG9zID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBtID0gdG9rLmV4ZWMoY3VycmVudCk7DQogICAgICAgICAgICBpZiAoIW0pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKG1bMF0ubGVuZ3RoKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBtLmxlbmd0aCA9PT0gMSA/IG1bMF0gOiBtOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC4kY2hhciA9IGZ1bmN0aW9uICh0b2spIHsNCiAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQXQocGFyc2VySW5wdXQuaSkgIT09IHRvaykgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2tpcFdoaXRlc3BhY2UoMSk7DQogICAgICAgICAgICByZXR1cm4gdG9rOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC4kc3RyID0gZnVuY3Rpb24gKHRvaykgew0KICAgICAgICAgICAgdmFyIHRva0xlbmd0aCA9IHRvay5sZW5ndGg7DQogICAgICAgICAgICAvLyBodHRwczovL2pzcGVyZi5jb20vc3RyaW5nLXN0YXJ0c3dpdGgvMjENCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rTGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckF0KHBhcnNlcklucHV0LmkgKyBpKSAhPT0gdG9rLmNoYXJBdChpKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBza2lwV2hpdGVzcGFjZSh0b2tMZW5ndGgpOw0KICAgICAgICAgICAgcmV0dXJuIHRvazsNCiAgICAgICAgfTsNCiAgICAgICAgcGFyc2VySW5wdXQuJHF1b3RlZCA9IGZ1bmN0aW9uIChsb2MpIHsNCiAgICAgICAgICAgIHZhciBwb3MgPSBsb2MgfHwgcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgIHZhciBzdGFydENoYXIgPSBpbnB1dC5jaGFyQXQocG9zKTsNCiAgICAgICAgICAgIGlmIChzdGFydENoYXIgIT09ICdcJycgJiYgc3RhcnRDaGFyICE9PSAnIicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIGN1cnJlbnRQb3NpdGlvbiA9IHBvczsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpICsgY3VycmVudFBvc2l0aW9uIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgbmV4dENoYXIgPSBpbnB1dC5jaGFyQXQoaSArIGN1cnJlbnRQb3NpdGlvbik7DQogICAgICAgICAgICAgICAgc3dpdGNoIChuZXh0Q2hhcikgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdcXCc6DQogICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXHInOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdcbic6DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBzdGFydENoYXI6DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gaW5wdXQuc3Vic3RyKGN1cnJlbnRQb3NpdGlvbiwgaSArIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2MgJiYgbG9jICE9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFdoaXRlc3BhY2UoaSArIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3N0YXJ0Q2hhciwgc3RyXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIFBlcm1pc3NpdmUgcGFyc2luZy4gSWdub3JlcyBldmVyeXRoaW5nIGV4Y2VwdCBtYXRjaGluZyB7fSBbXSAoKSBhbmQgcXVvdGVzDQogICAgICAgICAqIHVudGlsIG1hdGNoaW5nIHRva2VuIChvdXRzaWRlIG9mIGJsb2NrcykNCiAgICAgICAgICovDQogICAgICAgIHBhcnNlcklucHV0LiRwYXJzZVVudGlsID0gZnVuY3Rpb24gKHRvaykgew0KICAgICAgICAgICAgdmFyIHF1b3RlID0gJyc7DQogICAgICAgICAgICB2YXIgcmV0dXJuVmFsID0gbnVsbDsNCiAgICAgICAgICAgIHZhciBpbkNvbW1lbnQgPSBmYWxzZTsNCiAgICAgICAgICAgIHZhciBibG9ja0RlcHRoID0gMDsNCiAgICAgICAgICAgIHZhciBibG9ja1N0YWNrID0gW107DQogICAgICAgICAgICB2YXIgcGFyc2VHcm91cHMgPSBbXTsNCiAgICAgICAgICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7DQogICAgICAgICAgICB2YXIgc3RhcnRQb3MgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgdmFyIGxhc3RQb3MgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgdmFyIGkgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgdmFyIGxvb3AgPSB0cnVlOw0KICAgICAgICAgICAgdmFyIHRlc3RDaGFyOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2sgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgdGVzdENoYXIgPSBmdW5jdGlvbiAoY2hhcikgeyByZXR1cm4gY2hhciA9PT0gdG9rOyB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGVzdENoYXIgPSBmdW5jdGlvbiAoY2hhcikgeyByZXR1cm4gdG9rLnRlc3QoY2hhcik7IH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgdmFyIG5leHRDaGFyID0gaW5wdXQuY2hhckF0KGkpOw0KICAgICAgICAgICAgICAgIGlmIChibG9ja0RlcHRoID09PSAwICYmIHRlc3RDaGFyKG5leHRDaGFyKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWwgPSBpbnB1dC5zdWJzdHIobGFzdFBvcywgaSAtIGxhc3RQb3MpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUdyb3Vwcy5wdXNoKHJldHVyblZhbCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUdyb3Vwcy5wdXNoKCcgJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsID0gcGFyc2VHcm91cHM7DQogICAgICAgICAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKGkgLSBzdGFydFBvcyk7DQogICAgICAgICAgICAgICAgICAgIGxvb3AgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbkNvbW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0Q2hhciA9PT0gJyonICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2hhckF0KGkgKyAxKSA9PT0gJy8nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrRGVwdGgtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbkNvbW1lbnQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobmV4dENoYXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENoYXIgPSBpbnB1dC5jaGFyQXQoaSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VHcm91cHMucHVzaChpbnB1dC5zdWJzdHIobGFzdFBvcywgaSAtIGxhc3RQb3MgKyAxKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvcyA9IGkgKyAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnLyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJBdChpICsgMSkgPT09ICcqJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluQ29tbWVudCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrRGVwdGgrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdcJyc6DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICciJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZSA9IHBhcnNlcklucHV0LiRxdW90ZWQoaSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1b3RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlR3JvdXBzLnB1c2goaW5wdXQuc3Vic3RyKGxhc3RQb3MsIGkgLSBsYXN0UG9zKSwgcXVvdGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IHF1b3RlWzFdLmxlbmd0aCAtIDE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQb3MgPSBpICsgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKGkgLSBzdGFydFBvcyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbCA9IG5leHRDaGFyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAneyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTdGFjay5wdXNoKCd9Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tEZXB0aCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKCc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTdGFjay5wdXNoKCcpJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tEZXB0aCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnWyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTdGFjay5wdXNoKCddJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tEZXB0aCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnfSc6DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICcpJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ10nOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHBlY3RlZCA9IGJsb2NrU3RhY2sucG9wKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRDaGFyID09PSBleHBlY3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0RlcHRoLS07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIHRoZSBwYXJzZXIgdG8gdGhlIGVycm9yIGFuZCByZXR1cm4gZXhwZWN0ZWQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFdoaXRlc3BhY2UoaSAtIHN0YXJ0UG9zKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsID0gZXhwZWN0ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvb3AgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IGxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9vcCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSB3aGlsZSAobG9vcCk7DQogICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsID8gcmV0dXJuVmFsIDogbnVsbDsNCiAgICAgICAgfTsNCiAgICAgICAgcGFyc2VySW5wdXQuYXV0b0NvbW1lbnRBYnNvcmIgPSB0cnVlOw0KICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUgPSBbXTsNCiAgICAgICAgcGFyc2VySW5wdXQuZmluaXNoZWQgPSBmYWxzZTsNCiAgICAgICAgLy8gU2FtZSBhcyAkKCksIGJ1dCBkb24ndCBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBwYXJzZXIsDQogICAgICAgIC8vIGp1c3QgcmV0dXJuIHRoZSBtYXRjaC4NCiAgICAgICAgcGFyc2VySW5wdXQucGVlayA9IGZ1bmN0aW9uICh0b2spIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vanNwZXJmLmNvbS9zdHJpbmctc3RhcnRzd2l0aC8yMQ0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQXQocGFyc2VySW5wdXQuaSArIGkpICE9PSB0b2suY2hhckF0KGkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdG9rLnRlc3QoY3VycmVudCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIC8vIFNwZWNpYWxpemF0aW9uIG9mIHBlZWsoKQ0KICAgICAgICAvLyBUT0RPIHJlbW92ZSBvciBjaGFuZ2Ugc29tZSBjdXJyZW50Q2hhciBjYWxscyB0byBwZWVrQ2hhcg0KICAgICAgICBwYXJzZXJJbnB1dC5wZWVrQ2hhciA9IGZ1bmN0aW9uICh0b2spIHsgcmV0dXJuIGlucHV0LmNoYXJBdChwYXJzZXJJbnB1dC5pKSA9PT0gdG9rOyB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlucHV0LmNoYXJBdChwYXJzZXJJbnB1dC5pKTsgfTsNCiAgICAgICAgcGFyc2VySW5wdXQucHJldkNoYXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBpbnB1dC5jaGFyQXQocGFyc2VySW5wdXQuaSAtIDEpOyB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5nZXRJbnB1dCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlucHV0OyB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5wZWVrTm90TnVtZXJpYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBjID0gaW5wdXQuY2hhckNvZGVBdChwYXJzZXJJbnB1dC5pKTsNCiAgICAgICAgICAgIC8vIElzIHRoZSBmaXJzdCBjaGFyIG9mIHRoZSBkaW1lbnNpb24gMC05LCAnLicsICcrJyBvciAnLScNCiAgICAgICAgICAgIHJldHVybiAoYyA+IENIQVJDT0RFXzkgfHwgYyA8IENIQVJDT0RFX1BMVVMpIHx8IGMgPT09IENIQVJDT0RFX0ZPUldBUkRfU0xBU0ggfHwgYyA9PT0gQ0hBUkNPREVfQ09NTUE7DQogICAgICAgIH07DQogICAgICAgIHBhcnNlcklucHV0LnN0YXJ0ID0gZnVuY3Rpb24gKHN0ciwgY2h1bmtJbnB1dCwgZmFpbEZ1bmN0aW9uKSB7DQogICAgICAgICAgICBpbnB1dCA9IHN0cjsNCiAgICAgICAgICAgIHBhcnNlcklucHV0LmkgPSBqID0gY3VycmVudFBvcyA9IGZ1cnRoZXN0ID0gMDsNCiAgICAgICAgICAgIC8vIGNodW5raW5nIGFwcGFyZW50bHkgbWFrZXMgdGhpbmdzIHF1aWNrZXIgKGJ1dCBteSB0ZXN0cyBpbmRpY2F0ZQ0KICAgICAgICAgICAgLy8gaXQgbWlnaHQgYWN0dWFsbHkgbWFrZSB0aGluZ3Mgc2xvd2VyIGluIG5vZGUgYXQgbGVhc3QpDQogICAgICAgICAgICAvLyBhbmQgaXQgaXMgYSBub24tcGVyZmVjdCBwYXJzZSAtIGl0IGNhbid0IHJlY29nbmlzZQ0KICAgICAgICAgICAgLy8gdW5xdW90ZWQgdXJscywgbWVhbmluZyBpdCBjYW4ndCBkaXN0aW5ndWlzaCBjb21tZW50cw0KICAgICAgICAgICAgLy8gbWVhbmluZyBjb21tZW50cyB3aXRoIHF1b3RlcyBvciB7fSgpIGluIHRoZW0gZ2V0ICdjb3VudGVkJw0KICAgICAgICAgICAgLy8gYW5kIHRoZW4gbGVhZCB0byBwYXJzZSBlcnJvcnMuDQogICAgICAgICAgICAvLyBJbiBhZGRpdGlvbiBpZiB0aGUgY2h1bmtpbmcgY2h1bmtzIGluIHRoZSB3cm9uZyBwbGFjZSB3ZSBtaWdodA0KICAgICAgICAgICAgLy8gbm90IGJlIGFibGUgdG8gcGFyc2UgYSBwYXJzZXIgc3RhdGVtZW50IGluIG9uZSBnbw0KICAgICAgICAgICAgLy8gdGhpcyBpcyBvZmZpY2lhbGx5IGRlcHJlY2F0ZWQgYnV0IGNhbiBiZSBzd2l0Y2hlZCBvbiB2aWEgYW4gb3B0aW9uDQogICAgICAgICAgICAvLyBpbiB0aGUgY2FzZSBpdCBjYXVzZXMgdG9vIG11Y2ggcGVyZm9ybWFuY2UgaXNzdWVzLg0KICAgICAgICAgICAgaWYgKGNodW5rSW5wdXQpIHsNCiAgICAgICAgICAgICAgICBjaHVua3MgPSBjaHVua2VyKHN0ciwgZmFpbEZ1bmN0aW9uKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGNodW5rcyA9IFtzdHJdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY3VycmVudCA9IGNodW5rc1swXTsNCiAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKDApOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5lbmQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgbWVzc2FnZTsNCiAgICAgICAgICAgIHZhciBpc0ZpbmlzaGVkID0gcGFyc2VySW5wdXQuaSA+PSBpbnB1dC5sZW5ndGg7DQogICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuaSA8IGZ1cnRoZXN0KSB7DQogICAgICAgICAgICAgICAgbWVzc2FnZSA9IGZ1cnRoZXN0UG9zc2libGVFcnJvck1lc3NhZ2U7DQogICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuaSA9IGZ1cnRoZXN0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBpc0ZpbmlzaGVkOiBpc0ZpbmlzaGVkLA0KICAgICAgICAgICAgICAgIGZ1cnRoZXN0OiBwYXJzZXJJbnB1dC5pLA0KICAgICAgICAgICAgICAgIGZ1cnRoZXN0UG9zc2libGVFcnJvck1lc3NhZ2U6IG1lc3NhZ2UsDQogICAgICAgICAgICAgICAgZnVydGhlc3RSZWFjaGVkRW5kOiBwYXJzZXJJbnB1dC5pID49IGlucHV0Lmxlbmd0aCAtIDEsDQogICAgICAgICAgICAgICAgZnVydGhlc3RDaGFyOiBpbnB1dFtwYXJzZXJJbnB1dC5pXQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIHBhcnNlcklucHV0Ow0KICAgIH0pOwoKICAgIC8vDQogICAgLy8gbGVzcy5qcyAtIHBhcnNlcg0KICAgIC8vDQogICAgLy8gICAgQSByZWxhdGl2ZWx5IHN0cmFpZ2h0LWZvcndhcmQgcHJlZGljdGl2ZSBwYXJzZXIuDQogICAgLy8gICAgVGhlcmUgaXMgbm8gdG9rZW5pemF0aW9uL2xleGluZyBzdGFnZSwgdGhlIGlucHV0IGlzIHBhcnNlZA0KICAgIC8vICAgIGluIG9uZSBzd2VlcC4NCiAgICAvLw0KICAgIC8vICAgIFRvIG1ha2UgdGhlIHBhcnNlciBmYXN0IGVub3VnaCB0byBydW4gaW4gdGhlIGJyb3dzZXIsIHNldmVyYWwNCiAgICAvLyAgICBvcHRpbWl6YXRpb24gaGFkIHRvIGJlIG1hZGU6DQogICAgLy8NCiAgICAvLyAgICAtIE1hdGNoaW5nIGFuZCBzbGljaW5nIG9uIGEgaHVnZSBpbnB1dCBpcyBvZnRlbiBjYXVzZSBvZiBzbG93ZG93bnMuDQogICAgLy8gICAgICBUaGUgc29sdXRpb24gaXMgdG8gY2h1bmtpZnkgdGhlIGlucHV0IGludG8gc21hbGxlciBzdHJpbmdzLg0KICAgIC8vICAgICAgVGhlIGNodW5rcyBhcmUgc3RvcmVkIGluIHRoZSBgY2h1bmtzYCB2YXIsDQogICAgLy8gICAgICBgamAgaG9sZHMgdGhlIGN1cnJlbnQgY2h1bmsgaW5kZXgsIGFuZCBgY3VycmVudFBvc2AgaG9sZHMNCiAgICAvLyAgICAgIHRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjaHVuayBpbiByZWxhdGlvbiB0byBgaW5wdXRgLg0KICAgIC8vICAgICAgVGhpcyBnaXZlcyB1cyBhbiBhbG1vc3QgNHggc3BlZWQtdXAuDQogICAgLy8NCiAgICAvLyAgICAtIEluIG1hbnkgY2FzZXMsIHdlIGRvbid0IG5lZWQgdG8gbWF0Y2ggaW5kaXZpZHVhbCB0b2tlbnM7DQogICAgLy8gICAgICBmb3IgZXhhbXBsZSwgaWYgYSB2YWx1ZSBkb2Vzbid0IGhvbGQgYW55IHZhcmlhYmxlcywgb3BlcmF0aW9ucw0KICAgIC8vICAgICAgb3IgZHluYW1pYyByZWZlcmVuY2VzLCB0aGUgcGFyc2VyIGNhbiBlZmZlY3RpdmVseSAnc2tpcCcgaXQsDQogICAgLy8gICAgICB0cmVhdGluZyBpdCBhcyBhIGxpdGVyYWwuDQogICAgLy8gICAgICBBbiBleGFtcGxlIHdvdWxkIGJlICcxcHggc29saWQgIzAwMCcgLSB3aGljaCBldmFsdWF0ZXMgdG8gaXRzZWxmLA0KICAgIC8vICAgICAgd2UgZG9uJ3QgbmVlZCB0byBrbm93IHdoYXQgdGhlIGluZGl2aWR1YWwgY29tcG9uZW50cyBhcmUuDQogICAgLy8gICAgICBUaGUgZHJhd2JhY2ssIG9mIGNvdXJzZSBpcyB0aGF0IHlvdSBkb24ndCBnZXQgdGhlIGJlbmVmaXRzIG9mDQogICAgLy8gICAgICBzeW50YXgtY2hlY2tpbmcgb24gdGhlIENTUy4gVGhpcyBnaXZlcyB1cyBhIDUwJSBzcGVlZC11cCBpbiB0aGUgcGFyc2VyLA0KICAgIC8vICAgICAgYW5kIGEgc21hbGxlciBzcGVlZC11cCBpbiB0aGUgY29kZS1nZW4uDQogICAgLy8NCiAgICAvLw0KICAgIC8vICAgIFRva2VuIG1hdGNoaW5nIGlzIGRvbmUgd2l0aCB0aGUgYCRgIGZ1bmN0aW9uLCB3aGljaCBlaXRoZXIgdGFrZXMNCiAgICAvLyAgICBhIHRlcm1pbmFsIHN0cmluZyBvciByZWdleHAsIG9yIGEgbm9uLXRlcm1pbmFsIGZ1bmN0aW9uIHRvIGNhbGwuDQogICAgLy8gICAgSXQgYWxzbyB0YWtlcyBjYXJlIG9mIG1vdmluZyBhbGwgdGhlIGluZGljZXMgZm9yd2FyZHMuDQogICAgLy8NCiAgICB2YXIgUGFyc2VyID0gZnVuY3Rpb24gUGFyc2VyKGNvbnRleHQsIGltcG9ydHMsIGZpbGVJbmZvKSB7DQogICAgICAgIHZhciBwYXJzZXJzOw0KICAgICAgICB2YXIgcGFyc2VySW5wdXQgPSBnZXRQYXJzZXJJbnB1dCgpOw0KICAgICAgICBmdW5jdGlvbiBlcnJvcihtc2csIHR5cGUpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgIGluZGV4OiBwYXJzZXJJbnB1dC5pLA0KICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlSW5mby5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdTeW50YXgnLA0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZw0KICAgICAgICAgICAgfSwgaW1wb3J0cyk7DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZXhwZWN0KGFyZywgbXNnKSB7DQogICAgICAgICAgICAvLyBzb21lIG9sZGVyIGJyb3dzZXJzIHJldHVybiB0eXBlb2YgJ2Z1bmN0aW9uJyBmb3IgUmVnRXhwDQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gKGFyZyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSA/IGFyZy5jYWxsKHBhcnNlcnMpIDogcGFyc2VySW5wdXQuJHJlKGFyZyk7DQogICAgICAgICAgICBpZiAocmVzdWx0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVycm9yKG1zZyB8fCAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycNCiAgICAgICAgICAgICAgICA/ICJleHBlY3RlZCAnIiArIGFyZyArICInIGdvdCAnIiArIHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgKyAiJyINCiAgICAgICAgICAgICAgICA6ICd1bmV4cGVjdGVkIHRva2VuJykpOw0KICAgICAgICB9DQogICAgICAgIC8vIFNwZWNpYWxpemF0aW9uIG9mIGV4cGVjdCgpDQogICAgICAgIGZ1bmN0aW9uIGV4cGVjdENoYXIoYXJnLCBtc2cpIHsNCiAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcihhcmcpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVycm9yKG1zZyB8fCAiZXhwZWN0ZWQgJyIgKyBhcmcgKyAiJyBnb3QgJyIgKyBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpICsgIiciKTsNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBnZXREZWJ1Z0luZm8oaW5kZXgpIHsNCiAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9IGZpbGVJbmZvLmZpbGVuYW1lOw0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBsaW5lTnVtYmVyOiBnZXRMb2NhdGlvbihpbmRleCwgcGFyc2VySW5wdXQuZ2V0SW5wdXQoKSkubGluZSArIDEsDQogICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVuYW1lDQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiAgVXNlZCBhZnRlciBpbml0aWFsIHBhcnNpbmcgdG8gY3JlYXRlIG5vZGVzIG9uIHRoZSBmbHkNCiAgICAgICAgICoNCiAgICAgICAgICogIEBwYXJhbSB7U3RyaW5nfSBzdHIgICAgICAgICAgLSBzdHJpbmcgdG8gcGFyc2UNCiAgICAgICAgICogIEBwYXJhbSB7QXJyYXl9ICBwYXJzZUxpc3QgICAgLSBhcnJheSBvZiBwYXJzZXJzIHRvIHJ1biBpbnB1dCB0aHJvdWdoIGUuZy4gWyJ2YWx1ZSIsICJpbXBvcnRhbnQiXQ0KICAgICAgICAgKiAgQHBhcmFtIHtOdW1iZXJ9IGN1cnJlbnRJbmRleCAtIHN0YXJ0IG51bWJlciB0byBiZWdpbiBpbmRleGluZw0KICAgICAgICAgKiAgQHBhcmFtIHtPYmplY3R9IGZpbGVJbmZvICAgICAtIGZpbGVJbmZvIHRvIGF0dGFjaCB0byBjcmVhdGVkIG5vZGVzDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBwYXJzZU5vZGUoc3RyLCBwYXJzZUxpc3QsIGN1cnJlbnRJbmRleCwgZmlsZUluZm8sIGNhbGxiYWNrKSB7DQogICAgICAgICAgICB2YXIgcmVzdWx0Ow0KICAgICAgICAgICAgdmFyIHJldHVybk5vZGVzID0gW107DQogICAgICAgICAgICB2YXIgcGFyc2VyID0gcGFyc2VySW5wdXQ7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHBhcnNlci5zdGFydChzdHIsIGZhbHNlLCBmdW5jdGlvbiBmYWlsKG1zZywgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soew0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgY3VycmVudEluZGV4DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCBwID0gdm9pZCAwLCBpID0gdm9pZCAwOyAocCA9IHBhcnNlTGlzdFt4XSk7IHgrKykgew0KICAgICAgICAgICAgICAgICAgICBpID0gcGFyc2VyLmk7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHBhcnNlcnNbcF0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2luZGV4ID0gaSArIGN1cnJlbnRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2ZpbGVJbmZvID0gZmlsZUluZm87DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ob2Rlcy5wdXNoKHJlc3VsdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ob2Rlcy5wdXNoKG51bGwpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBlbmRJbmZvID0gcGFyc2VyLmVuZCgpOw0KICAgICAgICAgICAgICAgIGlmIChlbmRJbmZvLmlzRmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmV0dXJuTm9kZXMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgbnVsbCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTGVzc0Vycm9yKHsNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGUuaW5kZXggKyBjdXJyZW50SW5kZXgsDQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZQ0KICAgICAgICAgICAgICAgIH0sIGltcG9ydHMsIGZpbGVJbmZvLmZpbGVuYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLw0KICAgICAgICAvLyBUaGUgUGFyc2VyDQogICAgICAgIC8vDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBwYXJzZXJJbnB1dDogcGFyc2VySW5wdXQsDQogICAgICAgICAgICBpbXBvcnRzOiBpbXBvcnRzLA0KICAgICAgICAgICAgZmlsZUluZm86IGZpbGVJbmZvLA0KICAgICAgICAgICAgcGFyc2VOb2RlOiBwYXJzZU5vZGUsDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gUGFyc2UgYW4gaW5wdXQgc3RyaW5nIGludG8gYW4gYWJzdHJhY3Qgc3ludGF4IHRyZWUsDQogICAgICAgICAgICAvLyBAcGFyYW0gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgJ2xlc3MnIG1hcmt1cA0KICAgICAgICAgICAgLy8gQHBhcmFtIGNhbGxiYWNrIGNhbGwgYGNhbGxiYWNrYCB3aGVuIGRvbmUuDQogICAgICAgICAgICAvLyBAcGFyYW0gW2FkZGl0aW9uYWxEYXRhXSBBbiBvcHRpb25hbCBtYXAgd2hpY2ggY2FuIGNvbnRhaW5zIHZhcnMgLSBhIG1hcCAoa2V5LCB2YWx1ZSkgb2YgdmFyaWFibGVzIHRvIGFwcGx5DQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChzdHIsIGNhbGxiYWNrLCBhZGRpdGlvbmFsRGF0YSkgew0KICAgICAgICAgICAgICAgIHZhciByb290Ow0KICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG51bGw7DQogICAgICAgICAgICAgICAgdmFyIGdsb2JhbFZhcnM7DQogICAgICAgICAgICAgICAgdmFyIG1vZGlmeVZhcnM7DQogICAgICAgICAgICAgICAgdmFyIGlnbm9yZWQ7DQogICAgICAgICAgICAgICAgdmFyIHByZVRleHQgPSAnJzsNCiAgICAgICAgICAgICAgICBnbG9iYWxWYXJzID0gKGFkZGl0aW9uYWxEYXRhICYmIGFkZGl0aW9uYWxEYXRhLmdsb2JhbFZhcnMpID8gUGFyc2VyLnNlcmlhbGl6ZVZhcnMoYWRkaXRpb25hbERhdGEuZ2xvYmFsVmFycykgKyAiXG4iIDogJyc7DQogICAgICAgICAgICAgICAgbW9kaWZ5VmFycyA9IChhZGRpdGlvbmFsRGF0YSAmJiBhZGRpdGlvbmFsRGF0YS5tb2RpZnlWYXJzKSA/ICJcbiIgKyBQYXJzZXIuc2VyaWFsaXplVmFycyhhZGRpdGlvbmFsRGF0YS5tb2RpZnlWYXJzKSA6ICcnOw0KICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnBsdWdpbk1hbmFnZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHByZVByb2Nlc3NvcnMgPSBjb250ZXh0LnBsdWdpbk1hbmFnZXIuZ2V0UHJlUHJvY2Vzc29ycygpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByZVByb2Nlc3NvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHByZVByb2Nlc3NvcnNbaV0ucHJvY2VzcyhzdHIsIHsgY29udGV4dDogY29udGV4dCwgaW1wb3J0czogaW1wb3J0cywgZmlsZUluZm86IGZpbGVJbmZvIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChnbG9iYWxWYXJzIHx8IChhZGRpdGlvbmFsRGF0YSAmJiBhZGRpdGlvbmFsRGF0YS5iYW5uZXIpKSB7DQogICAgICAgICAgICAgICAgICAgIHByZVRleHQgPSAoKGFkZGl0aW9uYWxEYXRhICYmIGFkZGl0aW9uYWxEYXRhLmJhbm5lcikgPyBhZGRpdGlvbmFsRGF0YS5iYW5uZXIgOiAnJykgKyBnbG9iYWxWYXJzOw0KICAgICAgICAgICAgICAgICAgICBpZ25vcmVkID0gaW1wb3J0cy5jb250ZW50c0lnbm9yZWRDaGFyczsNCiAgICAgICAgICAgICAgICAgICAgaWdub3JlZFtmaWxlSW5mby5maWxlbmFtZV0gPSBpZ25vcmVkW2ZpbGVJbmZvLmZpbGVuYW1lXSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBpZ25vcmVkW2ZpbGVJbmZvLmZpbGVuYW1lXSArPSBwcmVUZXh0Lmxlbmd0aDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL1xyXG4/L2csICdcbicpOw0KICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBwb3RlbnRpYWwgVVRGIEJ5dGUgT3JkZXIgTWFyaw0KICAgICAgICAgICAgICAgIHN0ciA9IHByZVRleHQgKyBzdHIucmVwbGFjZSgvXlx1RkVGRi8sICcnKSArIG1vZGlmeVZhcnM7DQogICAgICAgICAgICAgICAgaW1wb3J0cy5jb250ZW50c1tmaWxlSW5mby5maWxlbmFtZV0gPSBzdHI7DQogICAgICAgICAgICAgICAgLy8gU3RhcnQgd2l0aCB0aGUgcHJpbWFyeSBydWxlLg0KICAgICAgICAgICAgICAgIC8vIFRoZSB3aG9sZSBzeW50YXggdHJlZSBpcyBoZWxkIHVuZGVyIGEgUnVsZXNldCBub2RlLA0KICAgICAgICAgICAgICAgIC8vIHdpdGggdGhlIGByb290YCBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZSwgc28gbm8gYHt9YCBhcmUNCiAgICAgICAgICAgICAgICAvLyBvdXRwdXQuIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgaW5wdXQgaXMgcGFyc2VkLg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnN0YXJ0KHN0ciwgY29udGV4dC5jaHVua0lucHV0LCBmdW5jdGlvbiBmYWlsKG1zZywgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUGFyc2UnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZUluZm8uZmlsZW5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGltcG9ydHMpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgdHJlZS5Ob2RlLnByb3RvdHlwZS5wYXJzZSA9IHRoaXM7DQogICAgICAgICAgICAgICAgICAgIHJvb3QgPSBuZXcgdHJlZS5SdWxlc2V0KG51bGwsIHRoaXMucGFyc2Vycy5wcmltYXJ5KCkpOw0KICAgICAgICAgICAgICAgICAgICB0cmVlLk5vZGUucHJvdG90eXBlLnJvb3ROb2RlID0gcm9vdDsNCiAgICAgICAgICAgICAgICAgICAgcm9vdC5yb290ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgcm9vdC5maXJzdFJvb3QgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICByb290LmZ1bmN0aW9uUmVnaXN0cnkgPSBmdW5jdGlvblJlZ2lzdHJ5LmluaGVyaXQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBMZXNzRXJyb3IoZSwgaW1wb3J0cywgZmlsZUluZm8uZmlsZW5hbWUpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gSWYgYGlgIGlzIHNtYWxsZXIgdGhhbiB0aGUgYGlucHV0Lmxlbmd0aCAtIDFgLA0KICAgICAgICAgICAgICAgIC8vIGl0IG1lYW5zIHRoZSBwYXJzZXIgd2Fzbid0IGFibGUgdG8gcGFyc2UgdGhlIHdob2xlDQogICAgICAgICAgICAgICAgLy8gc3RyaW5nLCBzbyB3ZSd2ZSBnb3QgYSBwYXJzaW5nIGVycm9yLg0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gV2UgdHJ5IHRvIGV4dHJhY3QgYSBcbiBkZWxpbWl0ZWQgc3RyaW5nLA0KICAgICAgICAgICAgICAgIC8vIHNob3dpbmcgdGhlIGxpbmUgd2hlcmUgdGhlIHBhcnNlIGVycm9yIG9jY3VycmVkLg0KICAgICAgICAgICAgICAgIC8vIFdlIHNwbGl0IGl0IHVwIGludG8gdHdvIHBhcnRzICh0aGUgcGFydCB3aGljaCBwYXJzZWQsDQogICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBwYXJ0IHdoaWNoIGRpZG4ndCksIHNvIHdlIGNhbiBjb2xvciB0aGVtIGRpZmZlcmVudGx5Lg0KICAgICAgICAgICAgICAgIHZhciBlbmRJbmZvID0gcGFyc2VySW5wdXQuZW5kKCk7DQogICAgICAgICAgICAgICAgaWYgKCFlbmRJbmZvLmlzRmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBlbmRJbmZvLmZ1cnRoZXN0UG9zc2libGVFcnJvck1lc3NhZ2U7DQogICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdVbnJlY29nbmlzZWQgaW5wdXQnOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEluZm8uZnVydGhlc3RDaGFyID09PSAnfScpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9ICcuIFBvc3NpYmx5IG1pc3Npbmcgb3BlbmluZyBcJ3tcJyc7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlbmRJbmZvLmZ1cnRoZXN0Q2hhciA9PT0gJyknKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSAnLiBQb3NzaWJseSBtaXNzaW5nIG9wZW5pbmcgXCcoXCcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZW5kSW5mby5mdXJ0aGVzdFJlYWNoZWRFbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9ICcuIFBvc3NpYmx5IG1pc3Npbmcgc29tZXRoaW5nJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BhcnNlJywNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZW5kSW5mby5mdXJ0aGVzdCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlSW5mby5maWxlbmFtZQ0KICAgICAgICAgICAgICAgICAgICB9LCBpbXBvcnRzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGZpbmlzaCA9IGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGUgPSBlcnJvciB8fCBlIHx8IGltcG9ydHMuZXJyb3I7DQogICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgTGVzc0Vycm9yKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBuZXcgTGVzc0Vycm9yKGUsIGltcG9ydHMsIGZpbGVJbmZvLmZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByb290KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgaWYgKGNvbnRleHQucHJvY2Vzc0ltcG9ydHMgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgIG5ldyB2aXNpdG9ycy5JbXBvcnRWaXNpdG9yKGltcG9ydHMsIGZpbmlzaCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5ydW4ocm9vdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmluaXNoKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyBIZXJlIGluLCB0aGUgcGFyc2luZyBydWxlcy9mdW5jdGlvbnMNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyBUaGUgYmFzaWMgc3RydWN0dXJlIG9mIHRoZSBzeW50YXggdHJlZSBnZW5lcmF0ZWQgaXMgYXMgZm9sbG93czoNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyAgIFJ1bGVzZXQgLT4gIERlY2xhcmF0aW9uIC0+IFZhbHVlIC0+IEV4cHJlc3Npb24gLT4gRW50aXR5DQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gSGVyZSdzIHNvbWUgTGVzcyBjb2RlOg0KICAgICAgICAgICAgLy8NCiAgICAgICAgICAgIC8vICAgIC5jbGFzcyB7DQogICAgICAgICAgICAvLyAgICAgIGNvbG9yOiAjZmZmOw0KICAgICAgICAgICAgLy8gICAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgLy8gICAgICB3aWR0aDogQHcgKyA0cHg7DQogICAgICAgICAgICAvLyAgICAgID4gLmNoaWxkIHsuLi59DQogICAgICAgICAgICAvLyAgICB9DQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gQW5kIGhlcmUncyB3aGF0IHRoZSBwYXJzZSB0cmVlIG1pZ2h0IGxvb2sgbGlrZToNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyAgICAgUnVsZXNldCAoU2VsZWN0b3IgJy5jbGFzcycsIFsNCiAgICAgICAgICAgIC8vICAgICAgICAgRGVjbGFyYXRpb24gKCJjb2xvciIsICBWYWx1ZSAoW0V4cHJlc3Npb24gW0NvbG9yICNmZmZdXSkpDQogICAgICAgICAgICAvLyAgICAgICAgIERlY2xhcmF0aW9uICgiYm9yZGVyIiwgVmFsdWUgKFtFeHByZXNzaW9uIFtEaW1lbnNpb24gMXB4XVtLZXl3b3JkICJzb2xpZCJdW0NvbG9yICMwMDBdXSkpDQogICAgICAgICAgICAvLyAgICAgICAgIERlY2xhcmF0aW9uICgid2lkdGgiLCAgVmFsdWUgKFtFeHByZXNzaW9uIFtPcGVyYXRpb24gIiArICIgW1ZhcmlhYmxlICJAdyJdW0RpbWVuc2lvbiA0cHhdXV0pKQ0KICAgICAgICAgICAgLy8gICAgICAgICBSdWxlc2V0IChTZWxlY3RvciBbRWxlbWVudCAnPicsICcuY2hpbGQnXSwgWy4uLl0pDQogICAgICAgICAgICAvLyAgICAgXSkNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyAgSW4gZ2VuZXJhbCwgbW9zdCBydWxlcyB3aWxsIHRyeSB0byBwYXJzZSBhIHRva2VuIHdpdGggdGhlIGAkcmUoKWAgZnVuY3Rpb24sIGFuZCBpZiB0aGUgcmV0dXJuDQogICAgICAgICAgICAvLyAgdmFsdWUgaXMgdHJ1bHksIHdpbGwgcmV0dXJuIGEgbmV3IG5vZGUsIG9mIHRoZSByZWxldmFudCB0eXBlLiBTb21ldGltZXMsIHdlIG5lZWQgdG8gY2hlY2sNCiAgICAgICAgICAgIC8vICBmaXJzdCwgYmVmb3JlIHBhcnNpbmcsIHRoYXQncyB3aGVuIHdlIHVzZSBgcGVlaygpYC4NCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICBwYXJzZXJzOiBwYXJzZXJzID0gew0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gVGhlIGBwcmltYXJ5YCBydWxlIGlzIHRoZSAqZW50cnkqIGFuZCAqZXhpdCogcG9pbnQgb2YgdGhlIHBhcnNlci4NCiAgICAgICAgICAgICAgICAvLyBUaGUgcnVsZXMgaGVyZSBjYW4gYXBwZWFyIGF0IGFueSBsZXZlbCBvZiB0aGUgcGFyc2UgdHJlZS4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIFRoZSByZWN1cnNpdmUgbmF0dXJlIG9mIHRoZSBncmFtbWFyIGlzIGFuIGludGVycGxheSBiZXR3ZWVuIHRoZSBgYmxvY2tgDQogICAgICAgICAgICAgICAgLy8gcnVsZSwgd2hpY2ggcmVwcmVzZW50cyBgeyAuLi4gfWAsIHRoZSBgcnVsZXNldGAgcnVsZSwgYW5kIHRoaXMgYHByaW1hcnlgIHJ1bGUsDQogICAgICAgICAgICAgICAgLy8gYXMgcmVwcmVzZW50ZWQgYnkgdGhpcyBzaW1wbGlmaWVkIGdyYW1tYXI6DQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyAgICAgcHJpbWFyeSAg4oaSICAocnVsZXNldCB8IGRlY2xhcmF0aW9uKSsNCiAgICAgICAgICAgICAgICAvLyAgICAgcnVsZXNldCAg4oaSICBzZWxlY3RvcisgYmxvY2sNCiAgICAgICAgICAgICAgICAvLyAgICAgYmxvY2sgICAg4oaSICAneycgcHJpbWFyeSAnfScNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIE9ubHkgYXQgb25lIHBvaW50IGlzIHRoZSBwcmltYXJ5IHJ1bGUgbm90IGNhbGxlZCBmcm9tIHRoZQ0KICAgICAgICAgICAgICAgIC8vIGJsb2NrIHJ1bGU6IGF0IHRoZSByb290IGxldmVsLg0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgcHJpbWFyeTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbWl4aW4gPSB0aGlzLm1peGluOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcm9vdCA9IFtdOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZTsNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRoaXMuY29tbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm9kZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5wdXNoKG5vZGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHByb2Nlc3MgY29tbWVudHMgYmVmb3JlIGRlY2lkaW5nIGlmIGZpbmlzaGVkDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuZmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5wZWVrKCd9JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSB0aGlzLmV4dGVuZFJ1bGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdCA9IHJvb3QuY29uY2F0KG5vZGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG1peGluLmRlZmluaXRpb24oKSB8fCB0aGlzLmRlY2xhcmF0aW9uKCkgfHwgbWl4aW4uY2FsbChmYWxzZSwgZmFsc2UpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlc2V0KCkgfHwgdGhpcy52YXJpYWJsZUNhbGwoKSB8fCB0aGlzLmVudGl0aWVzLmNhbGwoKSB8fCB0aGlzLmF0cnVsZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LnB1c2gobm9kZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmRTZW1pQ29sb24gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocGFyc2VySW5wdXQuJGNoYXIoJzsnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFNlbWlDb2xvbiA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRTZW1pQ29sb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByb290Ow0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8gY29tbWVudHMgYXJlIGNvbGxlY3RlZCBieSB0aGUgbWFpbiBwYXJzaW5nIG1lY2hhbmlzbSBhbmQgdGhlbiBhc3NpZ25lZCB0byBub2Rlcw0KICAgICAgICAgICAgICAgIC8vIHdoZXJlIHRoZSBjdXJyZW50IHN0cnVjdHVyZSBhbGxvd3MgaXQNCiAgICAgICAgICAgICAgICBjb21tZW50OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWVudCA9IHBhcnNlcklucHV0LmNvbW1lbnRTdG9yZS5zaGlmdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Db21tZW50KShjb21tZW50LnRleHQsIGNvbW1lbnQuaXNMaW5lQ29tbWVudCwgY29tbWVudC5pbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEVudGl0aWVzIGFyZSB0b2tlbnMgd2hpY2ggY2FuIGJlIGZvdW5kIGluc2lkZSBhbiBFeHByZXNzaW9uDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBlbnRpdGllczogew0KICAgICAgICAgICAgICAgICAgICBtaXhpbkxvb2t1cDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlcnMubWl4aW4uY2FsbCh0cnVlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gQSBzdHJpbmcsIHdoaWNoIHN1cHBvcnRzIGVzY2FwaW5nICIgYW5kICcNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICJtaWxreSB3YXkiICdoZVwncyB0aGUgb25lIScNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgcXVvdGVkOiBmdW5jdGlvbiAoZm9yY2VFc2NhcGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0VzY2FwZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcignficpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFc2NhcGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZvcmNlRXNjYXBlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBwYXJzZXJJbnB1dC4kcXVvdGVkKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0cikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuUXVvdGVkKShzdHIuY2hhckF0KDApLCBzdHIuc3Vic3RyKDEsIHN0ci5sZW5ndGggLSAyKSwgaXNFc2NhcGVkLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIGNhdGNoLWFsbCB3b3JkLCBzdWNoIGFzOg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgYmxhY2sgYm9yZGVyLWNvbGxhcHNlDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0gcGFyc2VySW5wdXQuJGNoYXIoJyUnKSB8fCBwYXJzZXJJbnB1dC4kcmUoL15cWz8oPzpbXHctXXxcXCg/OltBLUZhLWYwLTldezEsNn0gP3xbXkEtRmEtZjAtOV0pKStcXT8vKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyZWUuQ29sb3IuZnJvbUtleXdvcmQoaykgfHwgbmV3ICh0cmVlLktleXdvcmQpKGspOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIGZ1bmN0aW9uIGNhbGwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJnYigyNTUsIDAsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGFyZ3VtZW50cyBhcmUgcGFyc2VkIHdpdGggdGhlIGBlbnRpdGllcy5hcmd1bWVudHNgIHBhcnNlci4NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgY2FsbDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJnczsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmdW5jOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nhc2UtaW5zZW5zaXRpdmUtcmVnZXgtdnMtc3RydG9sb3dlci10aGVuLXJlZ2V4LzE4DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQucGVlaygvXnVybFwoL2kpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBhcnNlcklucHV0LiRyZSgvXihbXHctXSt8JXx+fHByb2dpZDpbXHdcLl0rKVwoLyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZVsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSB0aGlzLmN1c3RvbUZ1bmNDYWxsKG5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gZnVuYy5wYXJzZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzICYmIGZ1bmMuc3RvcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3M7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXMuYXJndW1lbnRzKGFyZ3MpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kY2hhcignKScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgnQ291bGQgbm90IHBhcnNlIGNhbGwgYXJndW1lbnRzIG9yIG1pc3NpbmcgXCcpXCcnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuQ2FsbCkobmFtZSwgYXJncywgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2luZyBydWxlcyBmb3IgZnVuY3Rpb25zIHdpdGggbm9uLXN0YW5kYXJkIGFyZ3MsIGUuZy46DQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vICAgICBib29sZWFuKG5vdCgyID4gMSkpDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vICAgICBUaGlzIGlzIGEgcXVpY2sgcHJvdG90eXBlLCB0byBiZSBtb2RpZmllZC9pbXByb3ZlZCB3aGVuDQogICAgICAgICAgICAgICAgICAgIC8vICAgICBtb3JlIGN1c3RvbS1wYXJzZWQgZnVuY3MgY29tZSAoZS5nLiBgc2VsZWN0b3IoLi4uKWApDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIGN1c3RvbUZ1bmNDYWxsOiBmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLyogSWRlYWxseSB0aGUgdGFibGUgaXMgdG8gYmUgbW92ZWQgb3V0IG9mIGhlcmUgZm9yIGZhc3RlciBwZXJmLiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dCBpdCdzIHF1aXRlIHRyaWNreSBzaW5jZSBpdCByZWxpZXMgb24gYWxsIHRoZXNlIGBwYXJzZXJzYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIGBleHBlY3RgIGF2YWlsYWJsZSBvbmx5IGhlcmUgKi8NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGE6IGYocGFyc2Vycy5pZUFscGhhLCB0cnVlKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sZWFuOiBmKGNvbmRpdGlvbiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lmJzogZihjb25kaXRpb24pDQogICAgICAgICAgICAgICAgICAgICAgICB9W25hbWUudG9Mb3dlckNhc2UoKV07DQogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmKHBhcnNlLCBzdG9wKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U6IHBhcnNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wOiBzdG9wIC8vIHdoZW4gdHJ1ZSAtIHN0b3AgYWZ0ZXIgcGFyc2UoKSBhbmQgcmV0dXJuIGl0cyByZXN1bHQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgY29udGludWUgZm9yIHBsYWluIGFyZ3MNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29uZGl0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZXhwZWN0KHBhcnNlcnMuY29uZGl0aW9uLCAnZXhwZWN0ZWQgY29uZGl0aW9uJyldOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGZ1bmN0aW9uIChwcmV2QXJncykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3NDb21tYSA9IHByZXZBcmdzIHx8IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3NTZW1pQ29sb24gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1NlbWlDb2xvblNlcGFyYXRlZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZBcmdzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZBcmdzID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnNlcnMuZGV0YWNoZWRSdWxlc2V0KCkgfHwgdGhpcy5hc3NpZ25tZW50KCkgfHwgcGFyc2Vycy5leHByZXNzaW9uKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS52YWx1ZSAmJiB2YWx1ZS52YWx1ZS5sZW5ndGggPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS52YWx1ZVswXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzQ29tbWEucHVzaCh2YWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcignLCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJzsnKSB8fCBpc1NlbWlDb2xvblNlcGFyYXRlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbWlDb2xvblNlcGFyYXRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKGFyZ3NDb21tYS5sZW5ndGggPCAxKSA/IGFyZ3NDb21tYVswXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgdHJlZS5WYWx1ZShhcmdzQ29tbWEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzU2VtaUNvbG9uLnB1c2godmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzQ29tbWEgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1NlbWlDb2xvblNlcGFyYXRlZCA/IGFyZ3NTZW1pQ29sb24gOiBhcmdzQ29tbWE7DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGxpdGVyYWw6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbigpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvcigpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdW90ZWQoKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5pY29kZURlc2NyaXB0b3IoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gQXNzaWdubWVudHMgYXJlIGFyZ3VtZW50IGVudGl0aWVzIGZvciBjYWxscy4NCiAgICAgICAgICAgICAgICAgICAgLy8gVGhleSBhcmUgcHJlc2VudCBpbiBpZSBmaWx0ZXIgcHJvcGVydGllcyBhcyBzaG93biBiZWxvdy4NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKCAqb3BhY2l0eT01MCogKQ0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gcGFyc2VySW5wdXQuJHJlKC9eXHcrKD89XHM/PSkvaSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWtleSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCc9JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZXJzLmVudGl0eSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Bc3NpZ25tZW50KShrZXksIHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgdXJsKCkgdG9rZW5zDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSBhIHNwZWNpZmljIHJ1bGUgZm9yIHVybHMsIGJlY2F1c2UgdGhleSBkb24ndCByZWFsbHkgYmVoYXZlIGxpa2UNCiAgICAgICAgICAgICAgICAgICAgLy8gc3RhbmRhcmQgZnVuY3Rpb24gY2FsbHMuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgdGhlIGFyZ3VtZW50IGRvZXNuJ3QgaGF2ZQ0KICAgICAgICAgICAgICAgICAgICAvLyB0byBiZSBlbmNsb3NlZCB3aXRoaW4gYSBzdHJpbmcsIHNvIGl0IGNhbid0IGJlIHBhcnNlZCBhcyBhbiBFeHByZXNzaW9uLg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICB1cmw6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5hdXRvQ29tbWVudEFic29yYiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kc3RyKCd1cmwoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5hdXRvQ29tbWVudEFic29yYiA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnF1b3RlZCgpIHx8IHRoaXMudmFyaWFibGUoKSB8fCB0aGlzLnByb3BlcnR5KCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC4kcmUoL14oPzooPzpcXFtcKFwpJyJdKXxbXlwoXCknIl0pKy8pIHx8ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuYXV0b0NvbW1lbnRBYnNvcmIgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0Q2hhcignKScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5VUkwpKCh2YWx1ZS52YWx1ZSAhPSBudWxsIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiB0cmVlLlZhcmlhYmxlIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiB0cmVlLlByb3BlcnR5KSA/DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiBuZXcgKHRyZWUuQW5vbnltb3VzKSh2YWx1ZSwgaW5kZXgpLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIFZhcmlhYmxlIGVudGl0eSwgc3VjaCBhcyBgQGZpbmtgLCBpbg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgd2lkdGg6IEBmaW5rICsgMnB4DQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSBhIGRpZmZlcmVudCBwYXJzZXIgZm9yIHZhcmlhYmxlIGRlZmluaXRpb25zLA0KICAgICAgICAgICAgICAgICAgICAvLyBzZWUgYHBhcnNlcnMudmFyaWFibGVgLg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgPT09ICdAJyAmJiAobmFtZSA9IHBhcnNlcklucHV0LiRyZSgvXkBAP1tcdy1dKy8pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoID0gcGFyc2VySW5wdXQuY3VycmVudENoYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2ggPT09ICcoJyB8fCBjaCA9PT0gJ1snICYmICFwYXJzZXJJbnB1dC5wcmV2Q2hhcigpLm1hdGNoKC9eXHMvKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIG1heSBiZSBhIFZhcmlhYmxlQ2FsbCBsb29rdXANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlcnMudmFyaWFibGVDYWxsKG5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5WYXJpYWJsZSkobmFtZSwgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gQSB2YXJpYWJsZSBlbnRpdHkgdXNpbmcgdGhlIHByb3RlY3RpdmUge30gZS5nLiBAe3Zhcn0NCiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVDdXJseTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cmx5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpID09PSAnQCcgJiYgKGN1cmx5ID0gcGFyc2VySW5wdXQuJHJlKC9eQFx7KFtcdy1dKylcfS8pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuVmFyaWFibGUpKCJAIiArIGN1cmx5WzFdLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIFByb3BlcnR5IGFjY2Vzc29yLCBzdWNoIGFzIGAkY29sb3JgLCBpbg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgYmFja2dyb3VuZC1jb2xvcjogJGNvbG9yDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuY3VycmVudENoYXIoKSA9PT0gJyQnICYmIChuYW1lID0gcGFyc2VySW5wdXQuJHJlKC9eXCRbXHctXSsvKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLlByb3BlcnR5KShuYW1lLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLyBBIHByb3BlcnR5IGVudGl0eSB1c2VpbmcgdGhlIHByb3RlY3RpdmUge30gZS5nLiAke3Byb3B9DQogICAgICAgICAgICAgICAgICAgIHByb3BlcnR5Q3VybHk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJseTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuY3VycmVudENoYXIoKSA9PT0gJyQnICYmIChjdXJseSA9IHBhcnNlcklucHV0LiRyZSgvXlwkXHsoW1x3LV0rKVx9LykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Qcm9wZXJ0eSkoIiQiICsgY3VybHlbMV0sIGluZGV4LCBmaWxlSW5mbyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIEEgSGV4YWRlY2ltYWwgY29sb3INCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICM0RjNDMkYNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gYHJnYmAgYW5kIGBoc2xgIGNvbG9ycyBhcmUgcGFyc2VkIHRocm91Z2ggdGhlIGBlbnRpdGllcy5jYWxsYCBwYXJzZXIuDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmdiOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgPT09ICcjJyAmJiAocmdiID0gcGFyc2VySW5wdXQuJHJlKC9eIyhbQS1GYS1mMC05XXs4fXxbQS1GYS1mMC05XXs2fXxbQS1GYS1mMC05XXszLDR9KShbXHcuI1xbXSk/LykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZ2JbMl0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuQ29sb3IpKHJnYlsxXSwgdW5kZWZpbmVkLCByZ2JbMF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgY29sb3JLZXl3b3JkOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV0b0NvbW1lbnRBYnNvcmIgPSBwYXJzZXJJbnB1dC5hdXRvQ29tbWVudEFic29yYjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmF1dG9Db21tZW50QWJzb3JiID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IHBhcnNlcklucHV0LiRyZSgvXltfQS1aYS16LV1bX0EtWmEtejAtOS1dKy8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuYXV0b0NvbW1lbnRBYnNvcmIgPSBhdXRvQ29tbWVudEFic29yYjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IHRyZWUuQ29sb3IuZnJvbUtleXdvcmQoayk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC4kc3RyKGspOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gQSBEaW1lbnNpb24sIHRoYXQgaXMsIGEgbnVtYmVyIGFuZCBhIHVuaXQNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIDAuNWVtIDk1JQ0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5wZWVrTm90TnVtZXJpYygpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VySW5wdXQuJHJlKC9eKFsrLV0/XGQqXC4/XGQrKSglfFthLXpfXSspPy9pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuRGltZW5zaW9uKSh2YWx1ZVsxXSwgdmFsdWVbMl0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIHVuaWNvZGUgZGVzY3JpcHRvciwgYXMgaXMgdXNlZCBpbiB1bmljb2RlLXJhbmdlDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIFUrMD8/ICBvciBVKzAwQTEtMDBBOQ0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICB1bmljb2RlRGVzY3JpcHRvcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgdWQgPSBwYXJzZXJJbnB1dC4kcmUoL15VXCtbMC05YS1mQS1GP10rKFwtWzAtOWEtZkEtRj9dKyk/Lyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLlVuaWNvZGVEZXNjcmlwdG9yKSh1ZFswXSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIEphdmFTY3JpcHQgY29kZSB0byBiZSBldmFsdWF0ZWQNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGB3aW5kb3cubG9jYXRpb24uaHJlZmANCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgamF2YXNjcmlwdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlc2NhcGUgPSBwYXJzZXJJbnB1dC4kY2hhcignficpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzUXVvdGUgPSBwYXJzZXJJbnB1dC4kY2hhcignYCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFqc1F1b3RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGpzID0gcGFyc2VySW5wdXQuJHJlKC9eW15gXSpgLyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoanMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkphdmFTY3JpcHQpKGpzLnN1YnN0cigwLCBqcy5sZW5ndGggLSAxKSwgQm9vbGVhbihlc2NhcGUpLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgnaW52YWxpZCBqYXZhc2NyaXB0IGRlZmluaXRpb24nKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBUaGUgdmFyaWFibGUgcGFydCBvZiBhIHZhcmlhYmxlIGRlZmluaXRpb24uIFVzZWQgaW4gdGhlIGBydWxlYCBwYXJzZXINCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICBAZmluazoNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIHZhcmlhYmxlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuY3VycmVudENoYXIoKSA9PT0gJ0AnICYmIChuYW1lID0gcGFyc2VySW5wdXQuJHJlKC9eKEBbXHctXSspXHMqOi8pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVbMV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gQ2FsbCBhIHZhcmlhYmxlIHZhbHVlIHRvIHJldHJpZXZlIGEgZGV0YWNoZWQgcnVsZXNldA0KICAgICAgICAgICAgICAgIC8vIG9yIGEgdmFsdWUgZnJvbSBhIGRldGFjaGVkIHJ1bGVzZXQncyBydWxlcy4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICBAZmluaygpOw0KICAgICAgICAgICAgICAgIC8vICAgICBAZmluazsNCiAgICAgICAgICAgICAgICAvLyAgICAgY29sb3I6IEBmaW5rW0Bjb2xvcl07DQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICB2YXJpYWJsZUNhbGw6IGZ1bmN0aW9uIChwYXJzZWROYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBsb29rdXBzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIHZhciBpblZhbHVlID0gISFwYXJzZWROYW1lOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHBhcnNlZE5hbWU7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgfHwgKHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgPT09ICdAJw0KICAgICAgICAgICAgICAgICAgICAgICAgJiYgKG5hbWUgPSBwYXJzZXJJbnB1dC4kcmUoL14oQFtcdy1dKykoXChccypcKSk/LykpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwcyA9IHRoaXMubWl4aW4ucnVsZUxvb2t1cHMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbG9va3VwcyAmJiAoKGluVmFsdWUgJiYgcGFyc2VySW5wdXQuJHN0cignKCknKSAhPT0gJygpJykgfHwgKG5hbWVbMl0gIT09ICcoKScpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoJ01pc3NpbmcgXCdbLi4uXVwnIGxvb2t1cCBpbiB2YXJpYWJsZSBjYWxsJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpblZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVbMV07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbCA9IG5ldyB0cmVlLlZhcmlhYmxlQ2FsbChuYW1lLCBpLCBmaWxlSW5mbyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluVmFsdWUgJiYgcGFyc2Vycy5lbmQoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0cmVlLk5hbWVzcGFjZVZhbHVlKGNhbGwsIGxvb2t1cHMsIGksIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIGV4dGVuZCBzeW50YXggLSB1c2VkIHRvIGV4dGVuZCBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIGV4dGVuZDogZnVuY3Rpb24gKGlzUnVsZSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHM7DQogICAgICAgICAgICAgICAgICAgIHZhciBlOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZXh0ZW5kTGlzdDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kc3RyKGlzUnVsZSA/ICcmOmV4dGVuZCgnIDogJzpleHRlbmQoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24gPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCEob3B0aW9uID0gcGFyc2VySW5wdXQuJHJlKC9eKGFsbCkoPz1ccyooXCl8LCkpLykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMuZWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyA9IFtlXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24gPSBvcHRpb24gJiYgb3B0aW9uWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50cykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdNaXNzaW5nIHRhcmdldCBzZWxlY3RvciBmb3IgOmV4dGVuZCgpLicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kID0gbmV3ICh0cmVlLkV4dGVuZCkobmV3ICh0cmVlLlNlbGVjdG9yKShlbGVtZW50cyksIG9wdGlvbiwgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbmRMaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kTGlzdC5wdXNoKGV4dGVuZCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRMaXN0ID0gW2V4dGVuZF07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKHBhcnNlcklucHV0LiRjaGFyKCcsJykpOw0KICAgICAgICAgICAgICAgICAgICBleHBlY3QoL15cKS8pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNSdWxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QoL147Lyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuZExpc3Q7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIGV4dGVuZFJ1bGUgLSB1c2VkIGluIGEgcnVsZSB0byBleHRlbmQgYWxsIHRoZSBwYXJlbnQgc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBleHRlbmRSdWxlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dGVuZCh0cnVlKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gTWl4aW5zDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBtaXhpbjogew0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIE1peGluIGNhbGwsIHdpdGggYW4gb3B0aW9uYWwgYXJndW1lbnQgbGlzdA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgI21peGlucyA+IC5zcXVhcmUoI2ZmZik7DQogICAgICAgICAgICAgICAgICAgIC8vICAgICAjbWl4aW5zLnNxdWFyZSgjZmZmKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5yb3VuZGVkKDRweCwgYmxhY2spOw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmJ1dHRvbjsNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2FuIGxvb2t1cCAvIHJldHVybiBhIHZhbHVlIHVzaW5nIHRoZSBsb29rdXAgc3ludGF4Og0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29sb3I6ICNtaXhpbi5zcXVhcmUoI2ZmZilbQGNvbG9yXTsNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGB3aGlsZWAgbG9vcCBpcyB0aGVyZSBiZWNhdXNlIG1peGlucyBjYW4gYmUNCiAgICAgICAgICAgICAgICAgICAgLy8gbmFtZXNwYWNlZCwgYnV0IHdlIG9ubHkgc3VwcG9ydCB0aGUgY2hpbGQgYW5kIGRlc2NlbmRhbnQNCiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0b3IgZm9yIG5vdy4NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgY2FsbDogZnVuY3Rpb24gKGluVmFsdWUsIGdldExvb2t1cCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltcG9ydGFudCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvb2t1cHM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3M7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFzUGFyZW5zOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgIT09ICcuJyAmJiBzICE9PSAnIycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7IC8vIHN0b3AgdXMgYWJzb3JiaW5nIHBhcnQgb2YgYW4gaW52YWxpZCBzZWxlY3Rvcg0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJygnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gdGhpcy5hcmdzKHRydWUpLmFyZ3M7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdENoYXIoJyknKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUGFyZW5zID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldExvb2t1cCAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwcyA9IHRoaXMucnVsZUxvb2t1cHMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldExvb2t1cCA9PT0gdHJ1ZSAmJiAhbG9va3Vwcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluVmFsdWUgJiYgIWxvb2t1cHMgJiYgIWhhc1BhcmVucykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzbid0IGEgdmFsaWQgaW4tdmFsdWUgbWl4aW4gY2FsbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpblZhbHVlICYmIHBhcnNlcnMuaW1wb3J0YW50KCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0YW50ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluVmFsdWUgfHwgcGFyc2Vycy5lbmQoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1peGluID0gbmV3ICh0cmVlLm1peGluLkNhbGwpKGVsZW1lbnRzLCBhcmdzLCBpbmRleCwgZmlsZUluZm8sICFsb29rdXBzICYmIGltcG9ydGFudCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb29rdXBzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRyZWUuTmFtZXNwYWNlVmFsdWUobWl4aW4sIGxvb2t1cHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1peGluOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgICAgICogTWF0Y2hpbmcgZWxlbWVudHMgZm9yIG1peGlucw0KICAgICAgICAgICAgICAgICAgICAgKiAoU3RhcnQgd2l0aCAuIG9yICMgYW5kIGNhbiBoYXZlID4gKQ0KICAgICAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50czsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtSW5kZXg7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmUgPSAvXlsjLl0oPzpbXHctXXxcXCg/OltBLUZhLWYwLTldezEsNn0gP3xbXkEtRmEtZjAtOV0pKSsvOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtSW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBwYXJzZXJJbnB1dC4kcmUocmUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9IG5ldyAodHJlZS5FbGVtZW50KShjLCBlLCBmYWxzZSwgZWxlbUluZGV4LCBmaWxlSW5mbyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZWxlbSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyA9IFtlbGVtXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHBhcnNlcklucHV0LiRjaGFyKCc+Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudHM7DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGFyZ3M6IGZ1bmN0aW9uIChpc0NhbGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllcyA9IHBhcnNlcnMuZW50aXRpZXM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuZXIgPSB7IGFyZ3M6IG51bGwsIHZhcmlhZGljOiBmYWxzZSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4cHJlc3Npb25zID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJnc1NlbWlDb2xvbiA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3NDb21tYSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2VtaUNvbG9uU2VwYXJhdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4cHJlc3Npb25Db250YWluc05hbWVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZUxvb3A7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJnOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4cGFuZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXNTZXAgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBhcnNlcnMuZGV0YWNoZWRSdWxlc2V0KCkgfHwgcGFyc2Vycy5leHByZXNzaW9uKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRzdHIoJy4uLicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5lci52YXJpYWRpYyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJzsnKSAmJiAhaXNTZW1pQ29sb25TZXBhcmF0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbWlDb2xvblNlcGFyYXRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXNTZW1pQ29sb25TZXBhcmF0ZWQgPyBhcmdzU2VtaUNvbG9uIDogYXJnc0NvbW1hKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wdXNoKHsgdmFyaWFkaWM6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBlbnRpdGllcy52YXJpYWJsZSgpIHx8IGVudGl0aWVzLnByb3BlcnR5KCkgfHwgZW50aXRpZXMubGl0ZXJhbCgpIHx8IGVudGl0aWVzLmtleXdvcmQoKSB8fCB0aGlzLmNhbGwodHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJnIHx8ICFoYXNTZXApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVMb29wID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnLnRocm93QXdheUNvbW1lbnRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZy50aHJvd0F3YXlDb21tZW50cygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGFyZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhcmlhYmxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmcudmFsdWUgJiYgYXJnLnZhbHVlLmxlbmd0aCA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmcudmFsdWVbMF07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAmJiAodmFsIGluc3RhbmNlb2YgdHJlZS5WYXJpYWJsZSB8fCB2YWwgaW5zdGFuY2VvZiB0cmVlLlByb3BlcnR5KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJzonKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cHJlc3Npb25zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZW1pQ29sb25TZXBhcmF0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ0Nhbm5vdCBtaXggOyBhbmQgLCBhcyBkZWxpbWl0ZXIgdHlwZXMnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbkNvbnRhaW5zTmFtZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZXJzLmRldGFjaGVkUnVsZXNldCgpIHx8IHBhcnNlcnMuZXhwcmVzc2lvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NhbGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ2NvdWxkIG5vdCB1bmRlcnN0YW5kIHZhbHVlIGZvciBuYW1lZCBhcmd1bWVudCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5lci5hcmdzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5lcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lTG9vcCA9IChuYW1lID0gdmFsLm5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlcklucHV0LiRzdHIoJy4uLicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVyLnZhcmlhZGljID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJzsnKSAmJiAhaXNTZW1pQ29sb25TZXBhcmF0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW1pQ29sb25TZXBhcmF0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXNTZW1pQ29sb25TZXBhcmF0ZWQgPyBhcmdzU2VtaUNvbG9uIDogYXJnc0NvbW1hKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHVzaCh7IG5hbWU6IGFyZy5uYW1lLCB2YXJpYWRpYzogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzQ2FsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVMb29wID0gdmFsLm5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb25zLnB1c2godmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzQ29tbWEucHVzaCh7IG5hbWU6IG5hbWVMb29wLCB2YWx1ZTogdmFsdWUsIGV4cGFuZDogZXhwYW5kIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcignLCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1NlcCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNTZXAgPSBwYXJzZXJJbnB1dC4kY2hhcignOycpID09PSAnOyc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1NlcCB8fCBpc1NlbWlDb2xvblNlcGFyYXRlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwcmVzc2lvbkNvbnRhaW5zTmFtZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdDYW5ub3QgbWl4IDsgYW5kICwgYXMgZGVsaW1pdGVyIHR5cGVzJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW1pQ29sb25TZXBhcmF0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwcmVzc2lvbnMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgKHRyZWUuVmFsdWUpKGV4cHJlc3Npb25zKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzU2VtaUNvbG9uLnB1c2goeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUsIGV4cGFuZDogZXhwYW5kIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbkNvbnRhaW5zTmFtZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVyLmFyZ3MgPSBpc1NlbWlDb2xvblNlcGFyYXRlZCA/IGFyZ3NTZW1pQ29sb24gOiBhcmdzQ29tbWE7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuZXI7DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIEEgTWl4aW4gZGVmaW5pdGlvbiwgd2l0aCBhIGxpc3Qgb2YgcGFyYW1ldGVycw0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgLnJvdW5kZWQgKEByYWRpdXM6IDJweCwgQGNvbG9yKSB7DQogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAuLi4NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gVW50aWwgd2UgaGF2ZSBhIGZpbmVyIGdyYWluZWQgc3RhdGUtbWFjaGluZSwgd2UgaGF2ZSB0bw0KICAgICAgICAgICAgICAgICAgICAvLyBkbyBhIGxvb2stYWhlYWQsIHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIGEgbWl4aW4gY2FsbC4NCiAgICAgICAgICAgICAgICAgICAgLy8gU2VlIHRoZSBgcnVsZWAgZnVuY3Rpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIFdlIHN0YXJ0IGJ5IG1hdGNoaW5nIGAucm91bmRlZCAoYCwgYW5kIHRoZW4gcHJvY2VlZCBvbiB0bw0KICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYXJndW1lbnQgbGlzdCwgd2hpY2ggaGFzIG9wdGlvbmFsIGRlZmF1bHQgdmFsdWVzLg0KICAgICAgICAgICAgICAgICAgICAvLyBXZSBzdG9yZSB0aGUgcGFyYW1ldGVycyBpbiBgcGFyYW1zYCwgd2l0aCBhIGB2YWx1ZWAga2V5LA0KICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIHZhbHVlLCBzdWNoIGFzIGluIHRoZSBjYXNlIG9mIGBAcmFkaXVzYC4NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gT25jZSB3ZSd2ZSBnb3Qgb3VyIHBhcmFtcyBsaXN0LCBhbmQgYSBjbG9zaW5nIGApYCwgd2UgcGFyc2UNCiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGB7Li4ufWAgYmxvY2suDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVzZXQ7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWRpYyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpICE9PSAnLicgJiYgcGFyc2VySW5wdXQuY3VycmVudENoYXIoKSAhPT0gJyMnKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnBlZWsoL15bXntdKlx9LykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHBhcnNlcklucHV0LiRyZSgvXihbIy5dKD86W1x3LV18XFwoPzpbQS1GYS1mMC05XXsxLDZ9ID98W15BLUZhLWYwLTldKSkrKVxzKlwoLyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbWF0Y2hbMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ0luZm8gPSB0aGlzLmFyZ3MoZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGFyZ0luZm8uYXJnczsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWRpYyA9IGFyZ0luZm8udmFyaWFkaWM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLm1peGluY2FsbCgiQHthfSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2tzIGEgYml0IGxpa2UgYSBtaXhpbiBkZWZpbml0aW9uLi4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHNvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLm1peGluY2FsbChAYToge3J1bGU6IHNldDt9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBoYXZlIHRvIGJlIG5pY2UgYW5kIHJlc3RvcmUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcpJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgnTWlzc2luZyBjbG9zaW5nIFwnKVwnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuY29tbWVudFN0b3JlLmxlbmd0aCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRzdHIoJ3doZW4nKSkgeyAvLyBHdWFyZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kID0gZXhwZWN0KHBhcnNlcnMuY29uZGl0aW9ucywgJ2V4cGVjdGVkIGNvbmRpdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlc2V0ID0gcGFyc2Vycy5ibG9jaygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydWxlc2V0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLm1peGluLkRlZmluaXRpb24pKG5hbWUsIHBhcmFtcywgcnVsZXNldCwgY29uZCwgdmFyaWFkaWMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgcnVsZUxvb2t1cHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvb2t1cHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpICE9PSAnWycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlID0gdGhpcy5sb29rdXBWYWx1ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcnVsZSAmJiBydWxlICE9PSAnJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rdXBzLnB1c2gocnVsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9va3Vwcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvb2t1cHM7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCdbJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBwYXJzZXJJbnB1dC4kcmUoL14oPzpbQCRdezAsMn0pW19hLXpBLVowLTktXSovKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJ10nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSB8fCBuYW1lID09PSAnJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEVudGl0aWVzIGFyZSB0aGUgc21hbGxlc3QgcmVjb2duaXplZCB0b2tlbiwNCiAgICAgICAgICAgICAgICAvLyBhbmQgY2FuIGJlIGZvdW5kIGluc2lkZSBhIHJ1bGUncyB2YWx1ZS4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIGVudGl0eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXMgPSB0aGlzLmVudGl0aWVzOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb21tZW50KCkgfHwgZW50aXRpZXMubGl0ZXJhbCgpIHx8IGVudGl0aWVzLnZhcmlhYmxlKCkgfHwgZW50aXRpZXMudXJsKCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLnByb3BlcnR5KCkgfHwgZW50aXRpZXMuY2FsbCgpIHx8IGVudGl0aWVzLmtleXdvcmQoKSB8fCB0aGlzLm1peGluLmNhbGwodHJ1ZSkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLmphdmFzY3JpcHQoKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gQSBEZWNsYXJhdGlvbiB0ZXJtaW5hdG9yLiBOb3RlIHRoYXQgd2UgdXNlIGBwZWVrKClgIHRvIGNoZWNrIGZvciAnfScsDQogICAgICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgYGJsb2NrYCBydWxlIHdpbGwgYmUgZXhwZWN0aW5nIGl0LCBidXQgd2Ugc3RpbGwgbmVlZCB0byBtYWtlIHN1cmUNCiAgICAgICAgICAgICAgICAvLyBpdCdzIHRoZXJlLCBpZiAnOycgd2FzIG9taXR0ZWQuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlcklucHV0LiRjaGFyKCc7JykgfHwgcGFyc2VySW5wdXQucGVlaygnfScpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBJRSdzIGFscGhhIGZ1bmN0aW9uDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyAgICAgYWxwaGEob3BhY2l0eT04OCkNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIGllQWxwaGE6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jYXNlLWluc2Vuc2l0aXZlLXJlZ2V4LXZzLXN0cnRvbG93ZXItdGhlbi1yZWdleC8xOA0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRyZSgvXm9wYWNpdHk9L2kpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZXJJbnB1dC4kcmUoL15cZCsvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBleHBlY3QocGFyc2Vycy5lbnRpdGllcy52YXJpYWJsZSwgJ0NvdWxkIG5vdCBwYXJzZSBhbHBoYScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAiQHsiICsgdmFsdWUubmFtZS5zbGljZSgxKSArICJ9IjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBleHBlY3RDaGFyKCcpJyk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdHJlZS5RdW90ZWQoJycsICJhbHBoYShvcGFjaXR5PSIgKyB2YWx1ZSArICIpIik7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEEgU2VsZWN0b3IgRWxlbWVudA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gICAgIGRpdg0KICAgICAgICAgICAgICAgIC8vICAgICArIGgxDQogICAgICAgICAgICAgICAgLy8gICAgICNzb2Nrcw0KICAgICAgICAgICAgICAgIC8vICAgICBpbnB1dFt0eXBlPSJ0ZXh0Il0NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEVsZW1lbnRzIGFyZSB0aGUgYnVpbGRpbmcgYmxvY2tzIGZvciBTZWxlY3RvcnMsDQogICAgICAgICAgICAgICAgLy8gdGhleSBhcmUgbWFkZSBvdXQgb2YgYSBgQ29tYmluYXRvcmAgKHNlZSBjb21iaW5hdG9yIHJ1bGUpLA0KICAgICAgICAgICAgICAgIC8vIGFuZCBhbiBlbGVtZW50IG5hbWUsIHN1Y2ggYXMgYSB0YWcgYSBjbGFzcywgb3IgYCpgLg0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgZWxlbWVudDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGM7DQogICAgICAgICAgICAgICAgICAgIHZhciB2Ow0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICBjID0gdGhpcy5jb21iaW5hdG9yKCk7DQogICAgICAgICAgICAgICAgICAgIGUgPSBwYXJzZXJJbnB1dC4kcmUoL14oPzpcZCtcLlxkK3xcZCspJS8pIHx8DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC4kcmUoL14oPzpbLiNdP3w6KikoPzpbXHctXXxbXlx4MDAtXHg5Zl18XFwoPzpbQS1GYS1mMC05XXsxLDZ9ID98W15BLUZhLWYwLTldKSkrLykgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LiRjaGFyKCcqJykgfHwgcGFyc2VySW5wdXQuJGNoYXIoJyYnKSB8fCB0aGlzLmF0dHJpYnV0ZSgpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC4kcmUoL15cKFteJigpQF0rXCkvKSB8fCBwYXJzZXJJbnB1dC4kcmUoL15bXC4jOl0oPz1AKS8pIHx8DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVudGl0aWVzLnZhcmlhYmxlQ3VybHkoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJygnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodiA9IHRoaXMuc2VsZWN0b3IoZmFsc2UpKSAmJiBwYXJzZXJJbnB1dC4kY2hhcignKScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBuZXcgKHRyZWUuUGFyZW4pKHYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoJ01pc3NpbmcgY2xvc2luZyBcJylcJycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkVsZW1lbnQpKGMsIGUsIGUgaW5zdGFuY2VvZiB0cmVlLlZhcmlhYmxlLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIENvbWJpbmF0b3JzIGNvbWJpbmUgZWxlbWVudHMgdG9nZXRoZXIsIGluIGEgU2VsZWN0b3IuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIG91ciBwYXJzZXIgaXNuJ3Qgd2hpdGUtc3BhY2Ugc2Vuc2l0aXZlLCBzcGVjaWFsIGNhcmUNCiAgICAgICAgICAgICAgICAvLyBoYXMgdG8gYmUgdGFrZW4sIHdoZW4gcGFyc2luZyB0aGUgZGVzY2VuZGFudCBjb21iaW5hdG9yLCBgIGAsDQogICAgICAgICAgICAgICAgLy8gYXMgaXQncyBhbiBlbXB0eSBzcGFjZS4gV2UgaGF2ZSB0byBjaGVjayB0aGUgcHJldmlvdXMgY2hhcmFjdGVyDQogICAgICAgICAgICAgICAgLy8gaW4gdGhlIGlucHV0LCB0byBzZWUgaWYgaXQncyBhIGAgYCBjaGFyYWN0ZXIuIE1vcmUgaW5mbyBvbiBob3cNCiAgICAgICAgICAgICAgICAvLyB3ZSBkZWFsIHdpdGggdGhpcyBpbiAqY29tYmluYXRvci5qcyouDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBjb21iaW5hdG9yOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBjID0gcGFyc2VySW5wdXQuY3VycmVudENoYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09ICcvJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNsYXNoZWRDb21iaW5hdG9yID0gcGFyc2VySW5wdXQuJHJlKC9eXC9bYS16XStcLy9pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGFzaGVkQ29tYmluYXRvcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuQ29tYmluYXRvcikoc2xhc2hlZENvbWJpbmF0b3IpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAnPicgfHwgYyA9PT0gJysnIHx8IGMgPT09ICd+JyB8fCBjID09PSAnfCcgfHwgYyA9PT0gJ14nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5pKys7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gJ14nICYmIHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgPT09ICdeJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAnXl4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuQ29tYmluYXRvcikoYyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VySW5wdXQuaXNXaGl0ZXNwYWNlKC0xKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Db21iaW5hdG9yKSgnICcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Db21iaW5hdG9yKShudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBBIENTUyBTZWxlY3Rvcg0KICAgICAgICAgICAgICAgIC8vIHdpdGggbGVzcyBleHRlbnNpb25zIGUuZy4gdGhlIGFiaWxpdHkgdG8gZXh0ZW5kIGFuZCBndWFyZA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gICAgIC5jbGFzcyA+IGRpdiArIGgxDQogICAgICAgICAgICAgICAgLy8gICAgIGxpIGE6aG92ZXINCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIFNlbGVjdG9ycyBhcmUgbWFkZSBvdXQgb2Ygb25lIG9yIG1vcmUgRWxlbWVudHMsIHNlZSBhYm92ZS4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBmdW5jdGlvbiAoaXNMZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50czsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZExpc3Q7DQogICAgICAgICAgICAgICAgICAgIHZhciBjOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFsbEV4dGVuZHM7DQogICAgICAgICAgICAgICAgICAgIHZhciB3aGVuOw0KICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uOw0KICAgICAgICAgICAgICAgICAgICBpc0xlc3MgPSBpc0xlc3MgIT09IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGlzTGVzcyAmJiAoZXh0ZW5kTGlzdCA9IHRoaXMuZXh0ZW5kKCkpKSB8fCAoaXNMZXNzICYmICh3aGVuID0gcGFyc2VySW5wdXQuJHN0cignd2hlbicpKSkgfHwgKGUgPSB0aGlzLmVsZW1lbnQoKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aGVuKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uID0gZXhwZWN0KHRoaXMuY29uZGl0aW9ucywgJ2V4cGVjdGVkIGNvbmRpdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY29uZGl0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ0NTUyBndWFyZCBjYW4gb25seSBiZSB1c2VkIGF0IHRoZSBlbmQgb2Ygc2VsZWN0b3InKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV4dGVuZExpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxsRXh0ZW5kcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxFeHRlbmRzID0gYWxsRXh0ZW5kcy5jb25jYXQoZXh0ZW5kTGlzdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxFeHRlbmRzID0gZXh0ZW5kTGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxsRXh0ZW5kcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignRXh0ZW5kIGNhbiBvbmx5IGJlIHVzZWQgYXQgdGhlIGVuZCBvZiBzZWxlY3RvcicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcGFyc2VySW5wdXQuY3VycmVudENoYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gW2VdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAneycgfHwgYyA9PT0gJ30nIHx8IGMgPT09ICc7JyB8fCBjID09PSAnLCcgfHwgYyA9PT0gJyknKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLlNlbGVjdG9yKShlbGVtZW50cywgYWxsRXh0ZW5kcywgY29uZGl0aW9uLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChhbGxFeHRlbmRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignRXh0ZW5kIG11c3QgYmUgdXNlZCB0byBleHRlbmQgYSBzZWxlY3RvciwgaXQgY2Fubm90IGJlIHVzZWQgb24gaXRzIG93bicpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzZWxlY3RvcnM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHM7DQogICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvcnM7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5zZWxlY3RvcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3JzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JzLnB1c2gocyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcnMgPSBbc107DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmNvbmRpdGlvbiAmJiBzZWxlY3RvcnMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJHdWFyZHMgYXJlIG9ubHkgY3VycmVudGx5IGFsbG93ZWQgb24gYSBzaW5nbGUgc2VsZWN0b3IuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmNvbmRpdGlvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJHdWFyZHMgYXJlIG9ubHkgY3VycmVudGx5IGFsbG93ZWQgb24gYSBzaW5nbGUgc2VsZWN0b3IuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3JzOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgYXR0cmlidXRlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJ1snKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllcyA9IHRoaXMuZW50aXRpZXM7DQogICAgICAgICAgICAgICAgICAgIHZhciBrZXk7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YWw7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5ID0gZW50aXRpZXMudmFyaWFibGVDdXJseSgpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gZXhwZWN0KC9eKD86W19BLVphLXowLTktXCpdKlx8KT8oPzpbX0EtWmEtejAtOS1dfFxcLikrLyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgb3AgPSBwYXJzZXJJbnB1dC4kcmUoL15bfH4qJF5dPz0vKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBlbnRpdGllcy5xdW90ZWQoKSB8fCBwYXJzZXJJbnB1dC4kcmUoL15bMC05XSslLykgfHwgcGFyc2VySW5wdXQuJHJlKC9eW1x3LV0rLykgfHwgZW50aXRpZXMudmFyaWFibGVDdXJseSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGV4cGVjdENoYXIoJ10nKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5BdHRyaWJ1dGUpKGtleSwgb3AsIHZhbCk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIFRoZSBgYmxvY2tgIHJ1bGUgaXMgdXNlZCBieSBgcnVsZXNldGAgYW5kIGBtaXhpbi5kZWZpbml0aW9uYC4NCiAgICAgICAgICAgICAgICAvLyBJdCdzIGEgd3JhcHBlciBhcm91bmQgdGhlIGBwcmltYXJ5YCBydWxlLCB3aXRoIGFkZGVkIGB7fWAuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBibG9jazogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRjaGFyKCd7JykgJiYgKGNvbnRlbnQgPSB0aGlzLnByaW1hcnkoKSkgJiYgcGFyc2VySW5wdXQuJGNoYXIoJ30nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGJsb2NrUnVsZXNldDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSB0aGlzLmJsb2NrKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChibG9jaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBuZXcgdHJlZS5SdWxlc2V0KG51bGwsIGJsb2NrKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2s7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBkZXRhY2hlZFJ1bGVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ0luZm87DQogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXM7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWRpYzsNCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJHJlKC9eWy4jXVwoLykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgICAgICAgICAgICogRFIgYXJncyBjdXJyZW50bHkgb25seSBpbXBsZW1lbnRlZCBmb3IgZWFjaCgpIGZ1bmN0aW9uLCBhbmQgbm90DQogICAgICAgICAgICAgICAgICAgICAgICAgKiB5ZXQgc2V0dGFibGUgYXMgYEBkcjogIyhAYXJnKSB7fWANCiAgICAgICAgICAgICAgICAgICAgICAgICAqIFRoaXMgc2hvdWxkIGJlIGRvbmUgd2hlbiBEUnMgYXJlIG1lcmdlZCB3aXRoIG1peGlucy4NCiAgICAgICAgICAgICAgICAgICAgICAgICAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2xlc3MvbGVzcy1tZXRhL2lzc3Vlcy8xNg0KICAgICAgICAgICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgICAgICAgICBhcmdJbmZvID0gdGhpcy5taXhpbi5hcmdzKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGFyZ0luZm8uYXJnczsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhZGljID0gYXJnSW5mby52YXJpYWRpYzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJyknKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrUnVsZXNldCA9IHRoaXMuYmxvY2tSdWxlc2V0KCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChibG9ja1J1bGVzZXQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdHJlZS5taXhpbi5EZWZpbml0aW9uKG51bGwsIHBhcmFtcywgYmxvY2tSdWxlc2V0LCBudWxsLCB2YXJpYWRpYyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRyZWUuRGV0YWNoZWRSdWxlc2V0KGJsb2NrUnVsZXNldCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBkaXYsIC5jbGFzcywgYm9keSA+IHAgey4uLn0NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIHJ1bGVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGVidWdJbmZvOw0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmR1bXBMaW5lTnVtYmVycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvID0gZ2V0RGVidWdJbmZvKHBhcnNlcklucHV0LmkpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9ycyA9IHRoaXMuc2VsZWN0b3JzKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RvcnMgJiYgKHJ1bGVzID0gdGhpcy5ibG9jaygpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZXNldCA9IG5ldyAodHJlZS5SdWxlc2V0KShzZWxlY3RvcnMsIHJ1bGVzLCBjb250ZXh0LnN0cmljdEltcG9ydHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuZHVtcExpbmVOdW1iZXJzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXNldC5kZWJ1Z0luZm8gPSBkZWJ1Z0luZm87DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVsZXNldDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgZGVjbGFyYXRpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWU7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc0RSOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCk7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgICAgIHZhciBtZXJnZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmFyaWFibGU7DQogICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAnLicgfHwgYyA9PT0gJyMnIHx8IGMgPT09ICcmJyB8fCBjID09PSAnOicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIG5hbWUgPSB0aGlzLnZhcmlhYmxlKCkgfHwgdGhpcy5ydWxlUHJvcGVydHkoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFyaWFibGUgPSB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZyc7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYXJpYWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5kZXRhY2hlZFJ1bGVzZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRFIgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmNvbW1lbnRTdG9yZS5sZW5ndGggPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgbmFtZSByZXR1cm5lZCBieSB0aGlzLnJ1bGVQcm9wZXJ0eSgpIGlzIGFsd2F5cyBhbiBhcnJheSBvZiB0aGUgZm9ybToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBbc3RyaW5nLTEsIC4uLiwgc3RyaW5nLW4sICIiXSBvciBbc3RyaW5nLTEsIC4uLiwgc3RyaW5nLW4sICIrIl0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVyZSBlYWNoIGl0ZW0gaXMgYSB0cmVlLktleXdvcmQgb3IgdHJlZS5WYXJpYWJsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlID0gIWlzVmFyaWFibGUgJiYgbmFtZS5sZW5ndGggPiAxICYmIG5hbWUucG9wKCkudmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3VzdG9tIHByb3BlcnR5IHZhbHVlcyBnZXQgcGVybWlzc2l2ZSBwYXJzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVbMF0udmFsdWUgJiYgbmFtZVswXS52YWx1ZS5zbGljZSgwLCAyKSA9PT0gJy0tJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucGVybWlzc2l2ZVZhbHVlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byBzdG9yZSB2YWx1ZXMgYXMgYW5vbnltb3VzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgbmVlZCB0aGUgdmFsdWUgbGF0ZXIgd2UnbGwgcmUtcGFyc2UgaXQgaW4gcnVsZXNldC5wYXJzZVZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5hbm9ueW1vdXNWYWx1ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFub255bW91cyB2YWx1ZXMgYWJzb3JiIHRoZSBlbmQgJzsnIHdoaWNoIGlzIHJlcXVpcmVkIGZvciB0aGVtIHRvIHdvcmsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5EZWNsYXJhdGlvbikobmFtZSwgdmFsdWUsIGZhbHNlLCBtZXJnZSwgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGFudCA9IHRoaXMuaW1wb3J0YW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzVmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXMgYSBsYXN0IHJlc29ydCwgdHJ5IHBlcm1pc3NpdmVWYWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucGVybWlzc2l2ZVZhbHVlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0aGlzLmVuZCgpIHx8IGhhc0RSKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuRGVjbGFyYXRpb24pKG5hbWUsIHZhbHVlLCBpbXBvcnRhbnQsIG1lcmdlLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBhbm9ueW1vdXNWYWx1ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBwYXJzZXJJbnB1dC4kcmUoL14oW14uI0BcJCtcLyciKmAoO3t9LV0qKTsvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkFub255bW91cykobWF0Y2hbMV0sIGluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICogVXNlZCBmb3IgY3VzdG9tIHByb3BlcnRpZXMsIGF0LXJ1bGVzLCBhbmQgdmFyaWFibGVzIChhcyBmYWxsYmFjaykNCiAgICAgICAgICAgICAgICAgKiBQYXJzZXMgYWxtb3N0IGFueXRoaW5nIGluc2lkZSBvZiB7fSBbXSAoKSAiIiBibG9ja3MNCiAgICAgICAgICAgICAgICAgKiB1bnRpbCBpdCByZWFjaGVzIG91dGVyLW1vc3QgdG9rZW5zLg0KICAgICAgICAgICAgICAgICAqDQogICAgICAgICAgICAgICAgICogRmlyc3QsIGl0IHdpbGwgdHJ5IHRvIHBhcnNlIGNvbW1lbnRzIGFuZCBlbnRpdGllcyB0byByZWFjaA0KICAgICAgICAgICAgICAgICAqIHRoZSBlbmQuIFRoaXMgaXMgbW9zdGx5IGxpa2UgdGhlIEV4cHJlc3Npb24gcGFyc2VyIGV4Y2VwdCBubw0KICAgICAgICAgICAgICAgICAqIG1hdGggaXMgYWxsb3dlZC4NCiAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICBwZXJtaXNzaXZlVmFsdWU6IGZ1bmN0aW9uICh1bnRpbFRva2Vucykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGU7DQogICAgICAgICAgICAgICAgICAgIHZhciBkb25lOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHZhciB0b2sgPSB1bnRpbFRva2VucyB8fCAnOyc7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdGVzdEN1cnJlbnRDaGFyKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXIgPSBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2sgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYXIgPT09IHRvazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2sudGVzdChjaGFyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAodGVzdEN1cnJlbnRDaGFyKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5jb21tZW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2goZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5lbnRpdHkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoZSk7DQogICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0ZXN0Q3VycmVudENoYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3ICh0cmVlLkV4cHJlc3Npb24pKHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlc2VydmUgc3BhY2UgYmVmb3JlICRwYXJzZVVudGlsIGFzIGl0IHdpbGwgbm90DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQucHJldkNoYXIoKSA9PT0gJyAnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IHRyZWUuQW5vbnltb3VzKCcgJywgaW5kZXgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2VySW5wdXQuJHBhcnNlVW50aWwodG9rKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJFeHBlY3RlZCAnIiArIHZhbHVlICsgIiciLCAnUGFyc2UnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDEgJiYgdmFsdWVbMF0gPT09ICcgJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdHJlZS5Bbm9ueW1vdXMoJycsIGluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdm9pZCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IHZhbHVlW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyZWF0IGFjdHVhbCBxdW90ZXMgYXMgbm9ybWFsIHF1b3RlZCB2YWx1ZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IHRyZWUuUXVvdGVkKGl0ZW1bMF0sIGl0ZW1bMV0sIHRydWUsIGluZGV4LCBmaWxlSW5mbykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IHZhbHVlLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmVhdCBsaWtlIHF1b3RlZCB2YWx1ZXMsIGJ1dCByZXBsYWNlIHZhcnMgbGlrZSB1bnF1b3RlZCBleHByZXNzaW9ucw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXVvdGUgPSBuZXcgdHJlZS5RdW90ZWQoJ1wnJywgaXRlbSwgdHJ1ZSwgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGUudmFyaWFibGVSZWdleCA9IC9AKFtcdy1dKykvZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGUucHJvcFJlZ2V4ID0gL1wkKFtcdy1dKykvZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocXVvdGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0cmVlLkV4cHJlc3Npb24ocmVzdWx0LCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEFuIEBpbXBvcnQgYXRydWxlDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyAgICAgQGltcG9ydCAibGliIjsNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIERlcGVuZGluZyBvbiBvdXIgZW52aXJvbm1lbnQsIGltcG9ydGluZyBpcyBkb25lIGRpZmZlcmVudGx5Og0KICAgICAgICAgICAgICAgIC8vIEluIHRoZSBicm93c2VyLCBpdCdzIGFuIFhIUiByZXF1ZXN0LCBpbiBOb2RlLCBpdCB3b3VsZCBiZSBhDQogICAgICAgICAgICAgICAgLy8gZmlsZS1zeXN0ZW0gb3BlcmF0aW9uLiBUaGUgZnVuY3Rpb24gdXNlZCBmb3IgaW1wb3J0aW5nIGlzDQogICAgICAgICAgICAgICAgLy8gc3RvcmVkIGluIGBpbXBvcnRgLCB3aGljaCB3ZSBwYXNzIHRvIHRoZSBJbXBvcnQgY29uc3RydWN0b3IuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAnaW1wb3J0JzogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGlyID0gcGFyc2VySW5wdXQuJHJlKC9eQGltcG9ydD9ccysvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAoZGlyID8gdGhpcy5pbXBvcnRPcHRpb25zKCkgOiBudWxsKSB8fCB7fTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGF0aCA9IHRoaXMuZW50aXRpZXMucXVvdGVkKCkgfHwgdGhpcy5lbnRpdGllcy51cmwoKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcyA9IHRoaXMubWVkaWFGZWF0dXJlcygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJzsnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5pID0gaW5kZXg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdtaXNzaW5nIHNlbWktY29sb24gb3IgdW5yZWNvZ25pc2VkIG1lZGlhIGZlYXR1cmVzIG9uIGltcG9ydCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcyA9IGZlYXR1cmVzICYmIG5ldyAodHJlZS5WYWx1ZSkoZmVhdHVyZXMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuSW1wb3J0KShwYXRoLCBmZWF0dXJlcywgb3B0aW9ucywgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkgPSBpbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignbWFsZm9ybWVkIGltcG9ydCBzdGF0ZW1lbnQnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgaW1wb3J0T3B0aW9uczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbzsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbk5hbWU7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBvcHRpb25zLCBzdXJyb3VuZGVkIGJ5IHBhcmVucw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLmltcG9ydE9wdGlvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25OYW1lID0gbzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcHRpb25OYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzcyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25OYW1lID0gJ2xlc3MnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdvbmNlJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbk5hbWUgPSAnbXVsdGlwbGUnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zW29wdGlvbk5hbWVdID0gdmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kY2hhcignLCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAobyk7DQogICAgICAgICAgICAgICAgICAgIGV4cGVjdENoYXIoJyknKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBpbXBvcnRPcHRpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdCA9IHBhcnNlcklucHV0LiRyZSgvXihsZXNzfGNzc3xtdWx0aXBsZXxvbmNlfGlubGluZXxyZWZlcmVuY2V8b3B0aW9uYWwpLyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvcHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRbMV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIG1lZGlhRmVhdHVyZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXMgPSB0aGlzLmVudGl0aWVzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGU7DQogICAgICAgICAgICAgICAgICAgIHZhciBwOw0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlbnRpdGllcy5rZXl3b3JkKCkgfHwgZW50aXRpZXMudmFyaWFibGUoKSB8fCBlbnRpdGllcy5taXhpbkxvb2t1cCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VySW5wdXQuJGNoYXIoJygnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB0aGlzLnByb3BlcnR5KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMudmFsdWUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJyknKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocCAmJiBlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5ldyAodHJlZS5QYXJlbikobmV3ICh0cmVlLkRlY2xhcmF0aW9uKShwLCBlLCBudWxsLCBudWxsLCBwYXJzZXJJbnB1dC5pLCBmaWxlSW5mbywgdHJ1ZSkpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5ldyAodHJlZS5QYXJlbikoZSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ2JhZGx5IGZvcm1lZCBtZWRpYSBmZWF0dXJlIGRlZmluaXRpb24nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ01pc3NpbmcgY2xvc2luZyBcJylcJycsICdQYXJzZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobm9kZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5FeHByZXNzaW9uKShub2Rlcyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIG1lZGlhRmVhdHVyZXM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzID0gdGhpcy5lbnRpdGllczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gW107DQogICAgICAgICAgICAgICAgICAgIHZhciBlOw0KICAgICAgICAgICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5tZWRpYUZlYXR1cmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGVudGl0aWVzLnZhcmlhYmxlKCkgfHwgZW50aXRpZXMubWl4aW5Mb29rdXAoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChlKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVzLmxlbmd0aCA+IDAgPyBmZWF0dXJlcyA6IG51bGw7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBtZWRpYTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZXM7DQogICAgICAgICAgICAgICAgICAgIHZhciBydWxlczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGVidWdJbmZvOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5kdW1wTGluZU51bWJlcnMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnSW5mbyA9IGdldERlYnVnSW5mbyhpbmRleCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJHN0cignQG1lZGlhJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzID0gdGhpcy5tZWRpYUZlYXR1cmVzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHRoaXMuYmxvY2soKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcnVsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignbWVkaWEgZGVmaW5pdGlvbnMgcmVxdWlyZSBibG9jayBzdGF0ZW1lbnRzIGFmdGVyIGFueSBmZWF0dXJlcycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IG5ldyAodHJlZS5NZWRpYSkocnVsZXMsIGZlYXR1cmVzLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuZHVtcExpbmVOdW1iZXJzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuZGVidWdJbmZvID0gZGVidWdJbmZvOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lZGlhOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gQSBAcGx1Z2luIGRpcmVjdGl2ZSwgdXNlZCB0byBpbXBvcnQgcGx1Z2lucyBkeW5hbWljYWxseS4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICBAcGx1Z2luIChhcmdzKSAibGliIjsNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIHBsdWdpbjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3M7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGlyID0gcGFyc2VySW5wdXQuJHJlKC9eQHBsdWdpbj9ccysvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXMucGx1Z2luQXJncygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5BcmdzOiBhcmdzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1BsdWdpbjogdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0geyBpc1BsdWdpbjogdHJ1ZSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwYXRoID0gdGhpcy5lbnRpdGllcy5xdW90ZWQoKSB8fCB0aGlzLmVudGl0aWVzLnVybCgpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJzsnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5pID0gaW5kZXg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdtaXNzaW5nIHNlbWktY29sb24gb24gQHBsdWdpbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkltcG9ydCkocGF0aCwgbnVsbCwgb3B0aW9ucywgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkgPSBpbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignbWFsZm9ybWVkIEBwbHVnaW4gc3RhdGVtZW50Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHBsdWdpbkFyZ3M6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBvcHRpb25zLCBzdXJyb3VuZGVkIGJ5IHBhcmVucw0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJygnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBwYXJzZXJJbnB1dC4kcmUoL15ccyooW15cKTtdKylcKVxzKi8pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1sxXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnc1sxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBBIENTUyBBdFJ1bGUNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICBAY2hhcnNldCAidXRmLTgiOw0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgYXRydWxlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHZhciBydWxlczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5vblZlbmRvclNwZWNpZmljTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc0lkZW50aWZpZXI7DQogICAgICAgICAgICAgICAgICAgIHZhciBoYXNFeHByZXNzaW9uOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaGFzVW5rbm93bjsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc0Jsb2NrID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzUm9vdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgIT09ICdAJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpc1snaW1wb3J0J10oKSB8fCB0aGlzLnBsdWdpbigpIHx8IHRoaXMubWVkaWEoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICBuYW1lID0gcGFyc2VySW5wdXQuJHJlKC9eQFthLXotXSsvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgbm9uVmVuZG9yU3BlY2lmaWNOYW1lID0gbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDEpID09ICctJyAmJiBuYW1lLmluZGV4T2YoJy0nLCAyKSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5vblZlbmRvclNwZWNpZmljTmFtZSA9ICJAIiArIG5hbWUuc2xpY2UobmFtZS5pbmRleE9mKCctJywgMikgKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vblZlbmRvclNwZWNpZmljTmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQGNoYXJzZXQnOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0lkZW50aWZpZXIgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Jsb2NrID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdAbmFtZXNwYWNlJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNFeHByZXNzaW9uID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNCbG9jayA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQGtleWZyYW1lcyc6DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdAY291bnRlci1zdHlsZSc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzSWRlbnRpZmllciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdAZG9jdW1lbnQnOg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQHN1cHBvcnRzJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNVbmtub3duID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Jvb3RlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNVbmtub3duID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoID0gMDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0lkZW50aWZpZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5lbnRpdHkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcigiZXhwZWN0ZWQgIiArIG5hbWUgKyAiIGlkZW50aWZpZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoYXNFeHByZXNzaW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZXhwcmVzc2lvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJleHBlY3RlZCAiICsgbmFtZSArICIgZXhwcmVzc2lvbiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhc1Vua25vd24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5wZXJtaXNzaXZlVmFsdWUoL15beztdLyk7DQogICAgICAgICAgICAgICAgICAgICAgICBoYXNCbG9jayA9IChwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpID09PSAneycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzQmxvY2sgJiYgcGFyc2VySW5wdXQuY3VycmVudENoYXIoKSAhPT0gJzsnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKG5hbWUgKyAiIHJ1bGUgaXMgbWlzc2luZyBibG9jayBvciBlbmRpbmcgc2VtaS1jb2xvbiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF2YWx1ZS52YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQmxvY2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzID0gdGhpcy5ibG9ja1J1bGVzZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAocnVsZXMgfHwgKCFoYXNCbG9jayAmJiB2YWx1ZSAmJiBwYXJzZXJJbnB1dC4kY2hhcignOycpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkF0UnVsZSkobmFtZSwgdmFsdWUsIHJ1bGVzLCBpbmRleCwgZmlsZUluZm8sIGNvbnRleHQuZHVtcExpbmVOdW1iZXJzID8gZ2V0RGVidWdJbmZvKGluZGV4KSA6IG51bGwsIGlzUm9vdGVkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCdhdC1ydWxlIG9wdGlvbnMgbm90IHJlY29nbmlzZWQnKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gQSBWYWx1ZSBpcyBhIGNvbW1hLWRlbGltaXRlZCBsaXN0IG9mIEV4cHJlc3Npb25zDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyAgICAgZm9udC1mYW1pbHk6IEJhc2tlcnZpbGxlLCBHZW9yZ2lhLCBzZXJpZjsNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEluIGEgUnVsZSwgYSBWYWx1ZSByZXByZXNlbnRzIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGA6YCwNCiAgICAgICAgICAgICAgICAvLyBhbmQgYmVmb3JlIHRoZSBgO2AuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4cHJlc3Npb25zID0gW107DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLmV4cHJlc3Npb24oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChlKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cHJlc3Npb25zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuVmFsdWUpKGV4cHJlc3Npb25zLCBpbmRleCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGltcG9ydGFudDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuY3VycmVudENoYXIoKSA9PT0gJyEnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VySW5wdXQuJHJlKC9eISAqaW1wb3J0YW50Lyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHN1YjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGU7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRjaGFyKCcoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLmFkZGl0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiBwYXJzZXJJbnB1dC4kY2hhcignKScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG5ldyAodHJlZS5FeHByZXNzaW9uKShbYV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucGFyZW5zID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoJ0V4cGVjdGVkIFwnKVwnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgbXVsdGlwbGljYXRpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG07DQogICAgICAgICAgICAgICAgICAgIHZhciBhOw0KICAgICAgICAgICAgICAgICAgICB2YXIgb3A7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcGVyYXRpb247DQogICAgICAgICAgICAgICAgICAgIHZhciBpc1NwYWNlZDsNCiAgICAgICAgICAgICAgICAgICAgbSA9IHRoaXMub3BlcmFuZCgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZWQgPSBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQucGVlaygvXlwvWypcL10vKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gcGFyc2VySW5wdXQuJGNoYXIoJy8nKSB8fCBwYXJzZXJJbnB1dC4kY2hhcignKicpIHx8IHBhcnNlcklucHV0LiRzdHIoJy4vJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLm9wZXJhbmQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJlbnNJbk9wID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnBhcmVuc0luT3AgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbiA9IG5ldyAodHJlZS5PcGVyYXRpb24pKG9wLCBbb3BlcmF0aW9uIHx8IG0sIGFdLCBpc1NwYWNlZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZWQgPSBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhdGlvbiB8fCBtOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBhZGRpdGlvbjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGE7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZXJhdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzU3BhY2VkOw0KICAgICAgICAgICAgICAgICAgICBtID0gdGhpcy5tdWx0aXBsaWNhdGlvbigpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZWQgPSBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcCA9IHBhcnNlcklucHV0LiRyZSgvXlstK11ccysvKSB8fCAoIWlzU3BhY2VkICYmIChwYXJzZXJJbnB1dC4kY2hhcignKycpIHx8IHBhcnNlcklucHV0LiRjaGFyKCctJykpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy5tdWx0aXBsaWNhdGlvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJlbnNJbk9wID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnBhcmVuc0luT3AgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbiA9IG5ldyAodHJlZS5PcGVyYXRpb24pKG9wLCBbb3BlcmF0aW9uIHx8IG0sIGFdLCBpc1NwYWNlZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZWQgPSBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhdGlvbiB8fCBtOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBjb25kaXRpb25zOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBhOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYjsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMuY29uZGl0aW9uKHRydWUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LnBlZWsoL14sXHMqKG5vdFxzKik/XCgvKSB8fCAhcGFyc2VySW5wdXQuJGNoYXIoJywnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHRoaXMuY29uZGl0aW9uKHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uID0gbmV3ICh0cmVlLkNvbmRpdGlvbikoJ29yJywgY29uZGl0aW9uIHx8IGEsIGIsIGluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25kaXRpb24gfHwgYTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgY29uZGl0aW9uOiBmdW5jdGlvbiAobmVlZHNQYXJlbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2ljYWw7DQogICAgICAgICAgICAgICAgICAgIHZhciBuZXh0Ow0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXJJbnB1dC4kc3RyKCdvcicpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY29uZGl0aW9uQW5kKG5lZWRzUGFyZW5zKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBsb2dpY2FsID0gb3IoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ2ljYWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSB0aGlzLmNvbmRpdGlvbihuZWVkc1BhcmVucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyAodHJlZS5Db25kaXRpb24pKGxvZ2ljYWwsIHJlc3VsdCwgbmV4dCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGNvbmRpdGlvbkFuZDogZnVuY3Rpb24gKG5lZWRzUGFyZW5zKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIHZhciBsb2dpY2FsOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbnNpZGVDb25kaXRpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZCA9IHNlbGYubmVnYXRlZENvbmRpdGlvbihuZWVkc1BhcmVucykgfHwgc2VsZi5wYXJlbnRoZXNpc0NvbmRpdGlvbihuZWVkc1BhcmVucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmQgJiYgIW5lZWRzUGFyZW5zKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYXRvbWljQ29uZGl0aW9uKG5lZWRzUGFyZW5zKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25kOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFuZCgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXJJbnB1dC4kc3RyKCdhbmQnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBpbnNpZGVDb25kaXRpb24oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBsb2dpY2FsID0gYW5kKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChsb2dpY2FsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gdGhpcy5jb25kaXRpb25BbmQobmVlZHNQYXJlbnMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgKHRyZWUuQ29uZGl0aW9uKShsb2dpY2FsLCByZXN1bHQsIG5leHQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBuZWdhdGVkQ29uZGl0aW9uOiBmdW5jdGlvbiAobmVlZHNQYXJlbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRzdHIoJ25vdCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5wYXJlbnRoZXNpc0NvbmRpdGlvbihuZWVkc1BhcmVucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm5lZ2F0ZSA9ICFyZXN1bHQubmVnYXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgcGFyZW50aGVzaXNDb25kaXRpb246IGZ1bmN0aW9uIChuZWVkc1BhcmVucykgew0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0cnlDb25kaXRpb25Gb2xsb3dlZEJ5UGFyZW50aGVzaXMobWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib2R5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keSA9IG1lLmNvbmRpdGlvbihuZWVkc1BhcmVucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJvZHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kY2hhcignKScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvZHk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHk7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kc3RyKCcoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBib2R5ID0gdHJ5Q29uZGl0aW9uRm9sbG93ZWRCeVBhcmVudGhlc2lzKHRoaXMpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYm9keSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYm9keTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBib2R5ID0gdGhpcy5hdG9taWNDb25kaXRpb24obmVlZHNQYXJlbnMpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWJvZHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcpJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoImV4cGVjdGVkICcpJyBnb3QgJyIgKyBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpICsgIiciKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvZHk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBhdG9taWNDb25kaXRpb246IGZ1bmN0aW9uIChuZWVkc1BhcmVucykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXMgPSB0aGlzLmVudGl0aWVzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGI7DQogICAgICAgICAgICAgICAgICAgIHZhciBjOw0KICAgICAgICAgICAgICAgICAgICB2YXIgb3A7DQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbmQoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRpdGlvbigpIHx8IGVudGl0aWVzLmtleXdvcmQoKSB8fCBlbnRpdGllcy5xdW90ZWQoKSB8fCBlbnRpdGllcy5taXhpbkxvb2t1cCgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbmQgPSBjb25kLmJpbmQodGhpcyk7DQogICAgICAgICAgICAgICAgICAgIGEgPSBjb25kKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJz4nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcignPScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gJz49JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gJz4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlcklucHV0LiRjaGFyKCc8JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJz0nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcCA9ICc8PSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcCA9ICc8JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZXJJbnB1dC4kY2hhcignPScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRjaGFyKCc+JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3AgPSAnPT4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZXJJbnB1dC4kY2hhcignPCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gJz08JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gJz0nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBjb25kKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG5ldyAodHJlZS5Db25kaXRpb24pKG9wLCBhLCBiLCBpbmRleCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ2V4cGVjdGVkIGV4cHJlc3Npb24nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbmV3ICh0cmVlLkNvbmRpdGlvbikoJz0nLCBhLCBuZXcgKHRyZWUuS2V5d29yZCkoJ3RydWUnKSwgaW5kZXgsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEFuIG9wZXJhbmQgaXMgYW55dGhpbmcgdGhhdCBjYW4gYmUgcGFydCBvZiBhbiBvcGVyYXRpb24sDQogICAgICAgICAgICAgICAgLy8gc3VjaCBhcyBhIENvbG9yLCBvciBhIFZhcmlhYmxlDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBvcGVyYW5kOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllcyA9IHRoaXMuZW50aXRpZXM7DQogICAgICAgICAgICAgICAgICAgIHZhciBuZWdhdGU7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5wZWVrKC9eLVtAXCRcKF0vKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbmVnYXRlID0gcGFyc2VySW5wdXQuJGNoYXIoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMuc3ViKCkgfHwgZW50aXRpZXMuZGltZW5zaW9uKCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLmNvbG9yKCkgfHwgZW50aXRpZXMudmFyaWFibGUoKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXMucHJvcGVydHkoKSB8fCBlbnRpdGllcy5jYWxsKCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLnF1b3RlZCh0cnVlKSB8fCBlbnRpdGllcy5jb2xvcktleXdvcmQoKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXMubWl4aW5Mb29rdXAoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5lZ2F0ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5wYXJlbnNJbk9wID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuZXcgKHRyZWUuTmVnYXRpdmUpKG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBFeHByZXNzaW9ucyBlaXRoZXIgcmVwcmVzZW50IG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zLA0KICAgICAgICAgICAgICAgIC8vIG9yIHdoaXRlLXNwYWNlIGRlbGltaXRlZCBFbnRpdGllcy4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICAxcHggc29saWQgYmxhY2sNCiAgICAgICAgICAgICAgICAvLyAgICAgQHZhciAqIDINCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzID0gW107DQogICAgICAgICAgICAgICAgICAgIHZhciBlOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGVsaW07DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLmNvbW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXMucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLmFkZGl0aW9uKCkgfHwgdGhpcy5lbnRpdHkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgdHJlZS5Db21tZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLnB1c2goZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3BlcmF0aW9ucyBkbyBub3QgYWxsb3cga2V5d29yZCAiLyIgZGltZW5zaW9uIChlLmcuIHNtYWxsLzIwcHgpIHNvIHdlIHN1cHBvcnQgdGhhdCBoZXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC5wZWVrKC9eXC9bXC8qXS8pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGltID0gcGFyc2VySW5wdXQuJGNoYXIoJy8nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGltKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdGllcy5wdXNoKG5ldyAodHJlZS5Bbm9ueW1vdXMpKGRlbGltLCBpbmRleCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChlKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0aWVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuRXhwcmVzc2lvbikoZW50aXRpZXMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHBhcnNlcklucHV0LiRyZSgvXihcKj8tP1tfYS16QS1aMC05LV0rKVxzKjovKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lWzFdOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBydWxlUHJvcGVydHk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gW107DQogICAgICAgICAgICAgICAgICAgIHZhciBzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgazsNCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgc2ltcGxlUHJvcGVydHkgPSBwYXJzZXJJbnB1dC4kcmUoL14oW19hLXpBLVowLTktXSspXHMqOi8pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc2ltcGxlUHJvcGVydHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBbbmV3ICh0cmVlLktleXdvcmQpKHNpbXBsZVByb3BlcnR5WzFdKV07DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1hdGNoKHJlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2h1bmsgPSBwYXJzZXJJbnB1dC4kcmUocmUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgucHVzaChpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5wdXNoKGNodW5rWzFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaCgvXihcKj8pLyk7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGNoKC9eKCg/Oltcdy1dKyl8KD86W0BcJF1ce1tcdy1dK1x9KSkvKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICgobmFtZS5sZW5ndGggPiAxKSAmJiBtYXRjaCgvXigoPzpcK198XCspPylccyo6LykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXQgbGFzdCwgd2UgaGF2ZSB0aGUgY29tcGxldGUgbWF0Y2ggbm93LiBtb3ZlIGZvcndhcmQsDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IG5hbWUgcGFydGljbGVzIHRvIHRyZWUgb2JqZWN0cyBhbmQgcmV0dXJuOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVbMF0gPT09ICcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5zaGlmdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LnNoaWZ0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbmFtZS5sZW5ndGg7IGsrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBuYW1lW2tdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVba10gPSAocy5jaGFyQXQoMCkgIT09ICdAJyAmJiBzLmNoYXJBdCgwKSAhPT0gJyQnKSA/DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyAodHJlZS5LZXl3b3JkKShzKSA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLmNoYXJBdCgwKSA9PT0gJ0AnID8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyAodHJlZS5WYXJpYWJsZSkoIkAiICsgcy5zbGljZSgyLCAtMSksIGluZGV4W2tdLCBmaWxlSW5mbykgOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3ICh0cmVlLlByb3BlcnR5KSgiJCIgKyBzLnNsaWNlKDIsIC0xKSwgaW5kZXhba10sIGZpbGVJbmZvKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH07DQogICAgUGFyc2VyLnNlcmlhbGl6ZVZhcnMgPSBmdW5jdGlvbiAodmFycykgew0KICAgICAgICB2YXIgcyA9ICcnOw0KICAgICAgICBmb3IgKHZhciBuYW1lXzEgaW4gdmFycykgew0KICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhcnMsIG5hbWVfMSkpIHsNCiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2YXJzW25hbWVfMV07DQogICAgICAgICAgICAgICAgcyArPSAoKG5hbWVfMVswXSA9PT0gJ0AnKSA/ICcnIDogJ0AnKSArIG5hbWVfMSArICI6ICIgKyB2YWx1ZSArICgoU3RyaW5nKHZhbHVlKS5zbGljZSgtMSkgPT09ICc7JykgPyAnJyA6ICc7Jyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHM7DQogICAgfTsKCiAgICBmdW5jdGlvbiBib29sZWFuKGNvbmRpdGlvbikgew0KICAgICAgICByZXR1cm4gY29uZGl0aW9uID8gS2V5d29yZC5UcnVlIDogS2V5d29yZC5GYWxzZTsNCiAgICB9DQogICAgLyoqDQogICAgICogRnVuY3Rpb25zIHdpdGggZXZhbEFyZ3Mgc2V0IHRvIGZhbHNlIGFyZSBzZW50IGNvbnRleHQNCiAgICAgKiBhcyB0aGUgZmlyc3QgYXJndW1lbnQuDQogICAgICovDQogICAgZnVuY3Rpb24gSWYoY29udGV4dCwgY29uZGl0aW9uLCB0cnVlVmFsdWUsIGZhbHNlVmFsdWUpIHsNCiAgICAgICAgcmV0dXJuIGNvbmRpdGlvbi5ldmFsKGNvbnRleHQpID8gdHJ1ZVZhbHVlLmV2YWwoY29udGV4dCkNCiAgICAgICAgICAgIDogKGZhbHNlVmFsdWUgPyBmYWxzZVZhbHVlLmV2YWwoY29udGV4dCkgOiBuZXcgQW5vbnltb3VzKTsNCiAgICB9DQogICAgSWYuZXZhbEFyZ3MgPSBmYWxzZTsNCiAgICBmdW5jdGlvbiBpc2RlZmluZWQoY29udGV4dCwgdmFyaWFibGUpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHZhcmlhYmxlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICByZXR1cm4gS2V5d29yZC5UcnVlOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICByZXR1cm4gS2V5d29yZC5GYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpc2RlZmluZWQuZXZhbEFyZ3MgPSBmYWxzZTsNCiAgICB2YXIgYm9vbGVhbiQxID0geyBpc2RlZmluZWQ6IGlzZGVmaW5lZCwgYm9vbGVhbjogYm9vbGVhbiwgJ2lmJzogSWYgfTsKCiAgICB2YXIgY29sb3JGdW5jdGlvbnM7DQogICAgZnVuY3Rpb24gY2xhbXAodmFsKSB7DQogICAgICAgIHJldHVybiBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCB2YWwpKTsNCiAgICB9DQogICAgZnVuY3Rpb24gaHNsYShvcmlnQ29sb3IsIGhzbCkgew0KICAgICAgICB2YXIgY29sb3IgPSBjb2xvckZ1bmN0aW9ucy5oc2xhKGhzbC5oLCBoc2wucywgaHNsLmwsIGhzbC5hKTsNCiAgICAgICAgaWYgKGNvbG9yKSB7DQogICAgICAgICAgICBpZiAob3JpZ0NvbG9yLnZhbHVlICYmDQogICAgICAgICAgICAgICAgL14ocmdifGhzbCkvLnRlc3Qob3JpZ0NvbG9yLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgIGNvbG9yLnZhbHVlID0gb3JpZ0NvbG9yLnZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgY29sb3IudmFsdWUgPSAncmdiJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBjb2xvcjsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB0b0hTTChjb2xvcikgew0KICAgICAgICBpZiAoY29sb3IudG9IU0wpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvci50b0hTTCgpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudCBjYW5ub3QgYmUgZXZhbHVhdGVkIHRvIGEgY29sb3InKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB0b0hTVihjb2xvcikgew0KICAgICAgICBpZiAoY29sb3IudG9IU1YpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvci50b0hTVigpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudCBjYW5ub3QgYmUgZXZhbHVhdGVkIHRvIGEgY29sb3InKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBudW1iZXIkMShuKSB7DQogICAgICAgIGlmIChuIGluc3RhbmNlb2YgRGltZW5zaW9uKSB7DQogICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChuLnVuaXQuaXMoJyUnKSA/IG4udmFsdWUgLyAxMDAgOiBuLnZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh0eXBlb2YgbiA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgIHJldHVybiBuOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhyb3cgew0KICAgICAgICAgICAgICAgIHR5cGU6ICdBcmd1bWVudCcsDQogICAgICAgICAgICAgICAgbWVzc2FnZTogJ2NvbG9yIGZ1bmN0aW9ucyB0YWtlIG51bWJlcnMgYXMgcGFyYW1ldGVycycNCiAgICAgICAgICAgIH07DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gc2NhbGVkKG4sIHNpemUpIHsNCiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBEaW1lbnNpb24gJiYgbi51bml0LmlzKCclJykpIHsNCiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG4udmFsdWUgKiBzaXplIC8gMTAwKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBudW1iZXIkMShuKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBjb2xvckZ1bmN0aW9ucyA9IHsNCiAgICAgICAgcmdiOiBmdW5jdGlvbiAociwgZywgYikgew0KICAgICAgICAgICAgdmFyIGEgPSAxOw0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBDb21tYS1sZXNzIHN5bnRheA0KICAgICAgICAgICAgICogICBlLmcuIHJnYigwIDEyOCAyNTUgLyA1MCUpDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgRXhwcmVzc2lvbikgew0KICAgICAgICAgICAgICAgIHZhciB2YWwgPSByLnZhbHVlOw0KICAgICAgICAgICAgICAgIHIgPSB2YWxbMF07DQogICAgICAgICAgICAgICAgZyA9IHZhbFsxXTsNCiAgICAgICAgICAgICAgICBiID0gdmFsWzJdOw0KICAgICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgICAqIEB0b2RvIC0gc2hvdWxkIHRoaXMgYmUgbm9ybWFsaXplZCBpbg0KICAgICAgICAgICAgICAgICAqICAgZnVuY3Rpb24gY2FsbGVyPyBPciBwYXJzZWQgZGlmZmVyZW50bHk/DQogICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgaWYgKGIgaW5zdGFuY2VvZiBPcGVyYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wID0gYjsNCiAgICAgICAgICAgICAgICAgICAgYiA9IG9wLm9wZXJhbmRzWzBdOw0KICAgICAgICAgICAgICAgICAgICBhID0gb3Aub3BlcmFuZHNbMV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JGdW5jdGlvbnMucmdiYShyLCBnLCBiLCBhKTsNCiAgICAgICAgICAgIGlmIChjb2xvcikgew0KICAgICAgICAgICAgICAgIGNvbG9yLnZhbHVlID0gJ3JnYic7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICByZ2JhOiBmdW5jdGlvbiAociwgZywgYiwgYSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBpZiAociBpbnN0YW5jZW9mIENvbG9yKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhID0gbnVtYmVyJDEoZyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhID0gci5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKHIucmdiLCBhLCAncmdiYScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgcmdiID0gW3IsIGcsIGJdLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gc2NhbGVkKGMsIDI1NSk7IH0pOw0KICAgICAgICAgICAgICAgIGEgPSBudW1iZXIkMShhKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKHJnYiwgYSwgJ3JnYmEnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7IH0NCiAgICAgICAgfSwNCiAgICAgICAgaHNsOiBmdW5jdGlvbiAoaCwgcywgbCkgew0KICAgICAgICAgICAgdmFyIGEgPSAxOw0KICAgICAgICAgICAgaWYgKGggaW5zdGFuY2VvZiBFeHByZXNzaW9uKSB7DQogICAgICAgICAgICAgICAgdmFyIHZhbCA9IGgudmFsdWU7DQogICAgICAgICAgICAgICAgaCA9IHZhbFswXTsNCiAgICAgICAgICAgICAgICBzID0gdmFsWzFdOw0KICAgICAgICAgICAgICAgIGwgPSB2YWxbMl07DQogICAgICAgICAgICAgICAgaWYgKGwgaW5zdGFuY2VvZiBPcGVyYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wID0gbDsNCiAgICAgICAgICAgICAgICAgICAgbCA9IG9wLm9wZXJhbmRzWzBdOw0KICAgICAgICAgICAgICAgICAgICBhID0gb3Aub3BlcmFuZHNbMV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JGdW5jdGlvbnMuaHNsYShoLCBzLCBsLCBhKTsNCiAgICAgICAgICAgIGlmIChjb2xvcikgew0KICAgICAgICAgICAgICAgIGNvbG9yLnZhbHVlID0gJ2hzbCc7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBoc2xhOiBmdW5jdGlvbiAoaCwgcywgbCwgYSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBpZiAoaCBpbnN0YW5jZW9mIENvbG9yKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhID0gbnVtYmVyJDEocyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhID0gaC5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKGgucmdiLCBhLCAnaHNsYScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgbTFfMTsNCiAgICAgICAgICAgICAgICB2YXIgbTJfMTsNCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBodWUoaCkgew0KICAgICAgICAgICAgICAgICAgICBoID0gaCA8IDAgPyBoICsgMSA6IChoID4gMSA/IGggLSAxIDogaCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChoICogNiA8IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtMV8xICsgKG0yXzEgLSBtMV8xKSAqIGggKiA2Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGggKiAyIDwgMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0yXzE7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaCAqIDMgPCAyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTFfMSArIChtMl8xIC0gbTFfMSkgKiAoMiAvIDMgLSBoKSAqIDY7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTFfMTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBoID0gKG51bWJlciQxKGgpICUgMzYwKSAvIDM2MDsNCiAgICAgICAgICAgICAgICBzID0gY2xhbXAobnVtYmVyJDEocykpOw0KICAgICAgICAgICAgICAgIGwgPSBjbGFtcChudW1iZXIkMShsKSk7DQogICAgICAgICAgICAgICAgYSA9IGNsYW1wKG51bWJlciQxKGEpKTsNCiAgICAgICAgICAgICAgICBtMl8xID0gbCA8PSAwLjUgPyBsICogKHMgKyAxKSA6IGwgKyBzIC0gbCAqIHM7DQogICAgICAgICAgICAgICAgbTFfMSA9IGwgKiAyIC0gbTJfMTsNCiAgICAgICAgICAgICAgICB2YXIgcmdiID0gWw0KICAgICAgICAgICAgICAgICAgICBodWUoaCArIDEgLyAzKSAqIDI1NSwNCiAgICAgICAgICAgICAgICAgICAgaHVlKGgpICogMjU1LA0KICAgICAgICAgICAgICAgICAgICBodWUoaCAtIDEgLyAzKSAqIDI1NQ0KICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICAgICAgYSA9IG51bWJlciQxKGEpOw0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IocmdiLCBhLCAnaHNsYScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfQ0KICAgICAgICB9LA0KICAgICAgICBoc3Y6IGZ1bmN0aW9uIChoLCBzLCB2KSB7DQogICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jdGlvbnMuaHN2YShoLCBzLCB2LCAxLjApOw0KICAgICAgICB9LA0KICAgICAgICBoc3ZhOiBmdW5jdGlvbiAoaCwgcywgdiwgYSkgew0KICAgICAgICAgICAgaCA9ICgobnVtYmVyJDEoaCkgJSAzNjApIC8gMzYwKSAqIDM2MDsNCiAgICAgICAgICAgIHMgPSBudW1iZXIkMShzKTsNCiAgICAgICAgICAgIHYgPSBudW1iZXIkMSh2KTsNCiAgICAgICAgICAgIGEgPSBudW1iZXIkMShhKTsNCiAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgdmFyIGY7DQogICAgICAgICAgICBpID0gTWF0aC5mbG9vcigoaCAvIDYwKSAlIDYpOw0KICAgICAgICAgICAgZiA9IChoIC8gNjApIC0gaTsNCiAgICAgICAgICAgIHZhciB2cyA9IFt2LA0KICAgICAgICAgICAgICAgIHYgKiAoMSAtIHMpLA0KICAgICAgICAgICAgICAgIHYgKiAoMSAtIGYgKiBzKSwNCiAgICAgICAgICAgICAgICB2ICogKDEgLSAoMSAtIGYpICogcyldOw0KICAgICAgICAgICAgdmFyIHBlcm0gPSBbWzAsIDMsIDFdLA0KICAgICAgICAgICAgICAgIFsyLCAwLCAxXSwNCiAgICAgICAgICAgICAgICBbMSwgMCwgM10sDQogICAgICAgICAgICAgICAgWzEsIDIsIDBdLA0KICAgICAgICAgICAgICAgIFszLCAxLCAwXSwNCiAgICAgICAgICAgICAgICBbMCwgMSwgMl1dOw0KICAgICAgICAgICAgcmV0dXJuIGNvbG9yRnVuY3Rpb25zLnJnYmEodnNbcGVybVtpXVswXV0gKiAyNTUsIHZzW3Blcm1baV1bMV1dICogMjU1LCB2c1twZXJtW2ldWzJdXSAqIDI1NSwgYSk7DQogICAgICAgIH0sDQogICAgICAgIGh1ZTogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih0b0hTTChjb2xvcikuaCk7DQogICAgICAgIH0sDQogICAgICAgIHNhdHVyYXRpb246IGZ1bmN0aW9uIChjb2xvcikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24odG9IU0woY29sb3IpLnMgKiAxMDAsICclJyk7DQogICAgICAgIH0sDQogICAgICAgIGxpZ2h0bmVzczogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih0b0hTTChjb2xvcikubCAqIDEwMCwgJyUnKTsNCiAgICAgICAgfSwNCiAgICAgICAgaHN2aHVlOiBmdW5jdGlvbiAoY29sb3IpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHRvSFNWKGNvbG9yKS5oKTsNCiAgICAgICAgfSwNCiAgICAgICAgaHN2c2F0dXJhdGlvbjogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih0b0hTVihjb2xvcikucyAqIDEwMCwgJyUnKTsNCiAgICAgICAgfSwNCiAgICAgICAgaHN2dmFsdWU6IGZ1bmN0aW9uIChjb2xvcikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24odG9IU1YoY29sb3IpLnYgKiAxMDAsICclJyk7DQogICAgICAgIH0sDQogICAgICAgIHJlZDogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihjb2xvci5yZ2JbMF0pOw0KICAgICAgICB9LA0KICAgICAgICBncmVlbjogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihjb2xvci5yZ2JbMV0pOw0KICAgICAgICB9LA0KICAgICAgICBibHVlOiBmdW5jdGlvbiAoY29sb3IpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKGNvbG9yLnJnYlsyXSk7DQogICAgICAgIH0sDQogICAgICAgIGFscGhhOiBmdW5jdGlvbiAoY29sb3IpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHRvSFNMKGNvbG9yKS5hKTsNCiAgICAgICAgfSwNCiAgICAgICAgbHVtYTogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihjb2xvci5sdW1hKCkgKiBjb2xvci5hbHBoYSAqIDEwMCwgJyUnKTsNCiAgICAgICAgfSwNCiAgICAgICAgbHVtaW5hbmNlOiBmdW5jdGlvbiAoY29sb3IpIHsNCiAgICAgICAgICAgIHZhciBsdW1pbmFuY2UgPSAoMC4yMTI2ICogY29sb3IucmdiWzBdIC8gMjU1KSArDQogICAgICAgICAgICAgICAgKDAuNzE1MiAqIGNvbG9yLnJnYlsxXSAvIDI1NSkgKw0KICAgICAgICAgICAgICAgICgwLjA3MjIgKiBjb2xvci5yZ2JbMl0gLyAyNTUpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24obHVtaW5hbmNlICogY29sb3IuYWxwaGEgKiAxMDAsICclJyk7DQogICAgICAgIH0sDQogICAgICAgIHNhdHVyYXRlOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCwgbWV0aG9kKSB7DQogICAgICAgICAgICAvLyBmaWx0ZXI6IHNhdHVyYXRlKDMuMik7DQogICAgICAgICAgICAvLyBzaG91bGQgYmUga2VwdCBhcyBpcywgc28gY2hlY2sgZm9yIGNvbG9yDQogICAgICAgICAgICBpZiAoIWNvbG9yLnJnYikgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGhzbCA9IHRvSFNMKGNvbG9yKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWV0aG9kICE9PSAndW5kZWZpbmVkJyAmJiBtZXRob2QudmFsdWUgPT09ICdyZWxhdGl2ZScpIHsNCiAgICAgICAgICAgICAgICBoc2wucyArPSBoc2wucyAqIGFtb3VudC52YWx1ZSAvIDEwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGhzbC5zICs9IGFtb3VudC52YWx1ZSAvIDEwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhzbC5zID0gY2xhbXAoaHNsLnMpOw0KICAgICAgICAgICAgcmV0dXJuIGhzbGEoY29sb3IsIGhzbCk7DQogICAgICAgIH0sDQogICAgICAgIGRlc2F0dXJhdGU6IGZ1bmN0aW9uIChjb2xvciwgYW1vdW50LCBtZXRob2QpIHsNCiAgICAgICAgICAgIHZhciBoc2wgPSB0b0hTTChjb2xvcik7DQogICAgICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCAhPT0gJ3VuZGVmaW5lZCcgJiYgbWV0aG9kLnZhbHVlID09PSAncmVsYXRpdmUnKSB7DQogICAgICAgICAgICAgICAgaHNsLnMgLT0gaHNsLnMgKiBhbW91bnQudmFsdWUgLyAxMDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBoc2wucyAtPSBhbW91bnQudmFsdWUgLyAxMDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoc2wucyA9IGNsYW1wKGhzbC5zKTsNCiAgICAgICAgICAgIHJldHVybiBoc2xhKGNvbG9yLCBoc2wpOw0KICAgICAgICB9LA0KICAgICAgICBsaWdodGVuOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCwgbWV0aG9kKSB7DQogICAgICAgICAgICB2YXIgaHNsID0gdG9IU0woY29sb3IpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgIT09ICd1bmRlZmluZWQnICYmIG1ldGhvZC52YWx1ZSA9PT0gJ3JlbGF0aXZlJykgew0KICAgICAgICAgICAgICAgIGhzbC5sICs9IGhzbC5sICogYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaHNsLmwgKz0gYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaHNsLmwgPSBjbGFtcChoc2wubCk7DQogICAgICAgICAgICByZXR1cm4gaHNsYShjb2xvciwgaHNsKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGFya2VuOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCwgbWV0aG9kKSB7DQogICAgICAgICAgICB2YXIgaHNsID0gdG9IU0woY29sb3IpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgIT09ICd1bmRlZmluZWQnICYmIG1ldGhvZC52YWx1ZSA9PT0gJ3JlbGF0aXZlJykgew0KICAgICAgICAgICAgICAgIGhzbC5sIC09IGhzbC5sICogYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaHNsLmwgLT0gYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaHNsLmwgPSBjbGFtcChoc2wubCk7DQogICAgICAgICAgICByZXR1cm4gaHNsYShjb2xvciwgaHNsKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmFkZWluOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCwgbWV0aG9kKSB7DQogICAgICAgICAgICB2YXIgaHNsID0gdG9IU0woY29sb3IpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgIT09ICd1bmRlZmluZWQnICYmIG1ldGhvZC52YWx1ZSA9PT0gJ3JlbGF0aXZlJykgew0KICAgICAgICAgICAgICAgIGhzbC5hICs9IGhzbC5hICogYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaHNsLmEgKz0gYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaHNsLmEgPSBjbGFtcChoc2wuYSk7DQogICAgICAgICAgICByZXR1cm4gaHNsYShjb2xvciwgaHNsKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmFkZW91dDogZnVuY3Rpb24gKGNvbG9yLCBhbW91bnQsIG1ldGhvZCkgew0KICAgICAgICAgICAgdmFyIGhzbCA9IHRvSFNMKGNvbG9yKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWV0aG9kICE9PSAndW5kZWZpbmVkJyAmJiBtZXRob2QudmFsdWUgPT09ICdyZWxhdGl2ZScpIHsNCiAgICAgICAgICAgICAgICBoc2wuYSAtPSBoc2wuYSAqIGFtb3VudC52YWx1ZSAvIDEwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGhzbC5hIC09IGFtb3VudC52YWx1ZSAvIDEwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhzbC5hID0gY2xhbXAoaHNsLmEpOw0KICAgICAgICAgICAgcmV0dXJuIGhzbGEoY29sb3IsIGhzbCk7DQogICAgICAgIH0sDQogICAgICAgIGZhZGU6IGZ1bmN0aW9uIChjb2xvciwgYW1vdW50KSB7DQogICAgICAgICAgICB2YXIgaHNsID0gdG9IU0woY29sb3IpOw0KICAgICAgICAgICAgaHNsLmEgPSBhbW91bnQudmFsdWUgLyAxMDA7DQogICAgICAgICAgICBoc2wuYSA9IGNsYW1wKGhzbC5hKTsNCiAgICAgICAgICAgIHJldHVybiBoc2xhKGNvbG9yLCBoc2wpOw0KICAgICAgICB9LA0KICAgICAgICBzcGluOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCkgew0KICAgICAgICAgICAgdmFyIGhzbCA9IHRvSFNMKGNvbG9yKTsNCiAgICAgICAgICAgIHZhciBodWUgPSAoaHNsLmggKyBhbW91bnQudmFsdWUpICUgMzYwOw0KICAgICAgICAgICAgaHNsLmggPSBodWUgPCAwID8gMzYwICsgaHVlIDogaHVlOw0KICAgICAgICAgICAgcmV0dXJuIGhzbGEoY29sb3IsIGhzbCk7DQogICAgICAgIH0sDQogICAgICAgIC8vDQogICAgICAgIC8vIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEhhbXB0b24gQ2F0bGluLCBOYXRhbGllIFdlaXplbmJhdW0sIGFuZCBDaHJpcyBFcHBzdGVpbg0KICAgICAgICAvLyBodHRwOi8vc2Fzcy1sYW5nLmNvbQ0KICAgICAgICAvLw0KICAgICAgICBtaXg6IGZ1bmN0aW9uIChjb2xvcjEsIGNvbG9yMiwgd2VpZ2h0KSB7DQogICAgICAgICAgICBpZiAoIXdlaWdodCkgew0KICAgICAgICAgICAgICAgIHdlaWdodCA9IG5ldyBEaW1lbnNpb24oNTApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHAgPSB3ZWlnaHQudmFsdWUgLyAxMDAuMDsNCiAgICAgICAgICAgIHZhciB3ID0gcCAqIDIgLSAxOw0KICAgICAgICAgICAgdmFyIGEgPSB0b0hTTChjb2xvcjEpLmEgLSB0b0hTTChjb2xvcjIpLmE7DQogICAgICAgICAgICB2YXIgdzEgPSAoKCh3ICogYSA9PSAtMSkgPyB3IDogKHcgKyBhKSAvICgxICsgdyAqIGEpKSArIDEpIC8gMi4wOw0KICAgICAgICAgICAgdmFyIHcyID0gMSAtIHcxOw0KICAgICAgICAgICAgdmFyIHJnYiA9IFtjb2xvcjEucmdiWzBdICogdzEgKyBjb2xvcjIucmdiWzBdICogdzIsDQogICAgICAgICAgICAgICAgY29sb3IxLnJnYlsxXSAqIHcxICsgY29sb3IyLnJnYlsxXSAqIHcyLA0KICAgICAgICAgICAgICAgIGNvbG9yMS5yZ2JbMl0gKiB3MSArIGNvbG9yMi5yZ2JbMl0gKiB3Ml07DQogICAgICAgICAgICB2YXIgYWxwaGEgPSBjb2xvcjEuYWxwaGEgKiBwICsgY29sb3IyLmFscGhhICogKDEgLSBwKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IocmdiLCBhbHBoYSk7DQogICAgICAgIH0sDQogICAgICAgIGdyZXlzY2FsZTogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jdGlvbnMuZGVzYXR1cmF0ZShjb2xvciwgbmV3IERpbWVuc2lvbigxMDApKTsNCiAgICAgICAgfSwNCiAgICAgICAgY29udHJhc3Q6IGZ1bmN0aW9uIChjb2xvciwgZGFyaywgbGlnaHQsIHRocmVzaG9sZCkgew0KICAgICAgICAgICAgLy8gZmlsdGVyOiBjb250cmFzdCgzLjIpOw0KICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGtlcHQgYXMgaXMsIHNvIGNoZWNrIGZvciBjb2xvcg0KICAgICAgICAgICAgaWYgKCFjb2xvci5yZ2IpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0eXBlb2YgbGlnaHQgPT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgbGlnaHQgPSBjb2xvckZ1bmN0aW9ucy5yZ2JhKDI1NSwgMjU1LCAyNTUsIDEuMCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodHlwZW9mIGRhcmsgPT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgZGFyayA9IGNvbG9yRnVuY3Rpb25zLnJnYmEoMCwgMCwgMCwgMS4wKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIEZpZ3VyZSBvdXQgd2hpY2ggaXMgYWN0dWFsbHkgbGlnaHQgYW5kIGRhcms6DQogICAgICAgICAgICBpZiAoZGFyay5sdW1hKCkgPiBsaWdodC5sdW1hKCkpIHsNCiAgICAgICAgICAgICAgICB2YXIgdCA9IGxpZ2h0Ow0KICAgICAgICAgICAgICAgIGxpZ2h0ID0gZGFyazsNCiAgICAgICAgICAgICAgICBkYXJrID0gdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhyZXNob2xkID09PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgIHRocmVzaG9sZCA9IDAuNDM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJlc2hvbGQgPSBudW1iZXIkMSh0aHJlc2hvbGQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGNvbG9yLmx1bWEoKSA8IHRocmVzaG9sZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBsaWdodDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBkYXJrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyBDaGFuZ2VzIG1hZGUgaW4gMi43LjAgLSBSZXZlcnRlZCBpbiAzLjAuMA0KICAgICAgICAvLyBjb250cmFzdDogZnVuY3Rpb24gKGNvbG9yLCBjb2xvcjEsIGNvbG9yMiwgdGhyZXNob2xkKSB7DQogICAgICAgIC8vICAgICAvLyBSZXR1cm4gd2hpY2ggb2YgYGNvbG9yMWAgYW5kIGBjb2xvcjJgIGhhcyB0aGUgZ3JlYXRlc3QgY29udHJhc3Qgd2l0aCBgY29sb3JgDQogICAgICAgIC8vICAgICAvLyBhY2NvcmRpbmcgdG8gdGhlIHN0YW5kYXJkIFdDQUcgY29udHJhc3QgcmF0aW8gY2FsY3VsYXRpb24uDQogICAgICAgIC8vICAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9XQ0FHMjAvI2NvbnRyYXN0LXJhdGlvZGVmDQogICAgICAgIC8vICAgICAvLyBUaGUgdGhyZXNob2xkIHBhcmFtIGlzIG5vIGxvbmdlciB1c2VkLCBpbiBsaW5lIHdpdGggU0FTUy4NCiAgICAgICAgLy8gICAgIC8vIGZpbHRlcjogY29udHJhc3QoMy4yKTsNCiAgICAgICAgLy8gICAgIC8vIHNob3VsZCBiZSBrZXB0IGFzIGlzLCBzbyBjaGVjayBmb3IgY29sb3INCiAgICAgICAgLy8gICAgIGlmICghY29sb3IucmdiKSB7DQogICAgICAgIC8vICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vICAgICBpZiAodHlwZW9mIGNvbG9yMSA9PT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgLy8gICAgICAgICBjb2xvcjEgPSBjb2xvckZ1bmN0aW9ucy5yZ2JhKDAsIDAsIDAsIDEuMCk7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vICAgICBpZiAodHlwZW9mIGNvbG9yMiA9PT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgLy8gICAgICAgICBjb2xvcjIgPSBjb2xvckZ1bmN0aW9ucy5yZ2JhKDI1NSwgMjU1LCAyNTUsIDEuMCk7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vICAgICB2YXIgY29udHJhc3QxLCBjb250cmFzdDI7DQogICAgICAgIC8vICAgICB2YXIgbHVtYSA9IGNvbG9yLmx1bWEoKTsNCiAgICAgICAgLy8gICAgIHZhciBsdW1hMSA9IGNvbG9yMS5sdW1hKCk7DQogICAgICAgIC8vICAgICB2YXIgbHVtYTIgPSBjb2xvcjIubHVtYSgpOw0KICAgICAgICAvLyAgICAgLy8gQ2FsY3VsYXRlIGNvbnRyYXN0IHJhdGlvcyBmb3IgZWFjaCBjb2xvcg0KICAgICAgICAvLyAgICAgaWYgKGx1bWEgPiBsdW1hMSkgew0KICAgICAgICAvLyAgICAgICAgIGNvbnRyYXN0MSA9IChsdW1hICsgMC4wNSkgLyAobHVtYTEgKyAwLjA1KTsNCiAgICAgICAgLy8gICAgIH0gZWxzZSB7DQogICAgICAgIC8vICAgICAgICAgY29udHJhc3QxID0gKGx1bWExICsgMC4wNSkgLyAobHVtYSArIDAuMDUpOw0KICAgICAgICAvLyAgICAgfQ0KICAgICAgICAvLyAgICAgaWYgKGx1bWEgPiBsdW1hMikgew0KICAgICAgICAvLyAgICAgICAgIGNvbnRyYXN0MiA9IChsdW1hICsgMC4wNSkgLyAobHVtYTIgKyAwLjA1KTsNCiAgICAgICAgLy8gICAgIH0gZWxzZSB7DQogICAgICAgIC8vICAgICAgICAgY29udHJhc3QyID0gKGx1bWEyICsgMC4wNSkgLyAobHVtYSArIDAuMDUpOw0KICAgICAgICAvLyAgICAgfQ0KICAgICAgICAvLyAgICAgaWYgKGNvbnRyYXN0MSA+IGNvbnRyYXN0Mikgew0KICAgICAgICAvLyAgICAgICAgIHJldHVybiBjb2xvcjE7DQogICAgICAgIC8vICAgICB9IGVsc2Ugew0KICAgICAgICAvLyAgICAgICAgIHJldHVybiBjb2xvcjI7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vIH0sDQogICAgICAgIGFyZ2I6IGZ1bmN0aW9uIChjb2xvcikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXMoY29sb3IudG9BUkdCKCkpOw0KICAgICAgICB9LA0KICAgICAgICBjb2xvcjogZnVuY3Rpb24gKGMpIHsNCiAgICAgICAgICAgIGlmICgoYyBpbnN0YW5jZW9mIFF1b3RlZCkgJiYNCiAgICAgICAgICAgICAgICAoL14jKFtBLUZhLWYwLTldezh9fFtBLUZhLWYwLTldezZ9fFtBLUZhLWYwLTldezMsNH0pJC9pLnRlc3QoYy52YWx1ZSkpKSB7DQogICAgICAgICAgICAgICAgdmFyIHZhbCA9IGMudmFsdWUuc2xpY2UoMSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcih2YWwsIHVuZGVmaW5lZCwgIiMiICsgdmFsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgoYyBpbnN0YW5jZW9mIENvbG9yKSB8fCAoYyA9IENvbG9yLmZyb21LZXl3b3JkKGMudmFsdWUpKSkgew0KICAgICAgICAgICAgICAgIGMudmFsdWUgPSB1bmRlZmluZWQ7DQogICAgICAgICAgICAgICAgcmV0dXJuIGM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aHJvdyB7DQogICAgICAgICAgICAgICAgdHlwZTogJ0FyZ3VtZW50JywNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnYXJndW1lbnQgbXVzdCBiZSBhIGNvbG9yIGtleXdvcmQgb3IgM3w0fDZ8OCBkaWdpdCBoZXggZS5nLiAjRkZGJw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSwNCiAgICAgICAgdGludDogZnVuY3Rpb24gKGNvbG9yLCBhbW91bnQpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvckZ1bmN0aW9ucy5taXgoY29sb3JGdW5jdGlvbnMucmdiKDI1NSwgMjU1LCAyNTUpLCBjb2xvciwgYW1vdW50KTsNCiAgICAgICAgfSwNCiAgICAgICAgc2hhZGU6IGZ1bmN0aW9uIChjb2xvciwgYW1vdW50KSB7DQogICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jdGlvbnMubWl4KGNvbG9yRnVuY3Rpb25zLnJnYigwLCAwLCAwKSwgY29sb3IsIGFtb3VudCk7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIHZhciBjb2xvciA9IGNvbG9yRnVuY3Rpb25zOwoKICAgIC8vIENvbG9yIEJsZW5kaW5nDQogICAgLy8gcmVmOiBodHRwOi8vd3d3LnczLm9yZy9UUi9jb21wb3NpdGluZy0xDQogICAgZnVuY3Rpb24gY29sb3JCbGVuZChtb2RlLCBjb2xvcjEsIGNvbG9yMikgew0KICAgICAgICB2YXIgYWIgPSBjb2xvcjEuYWxwaGE7IC8vIHJlc3VsdA0KICAgICAgICB2YXIgLy8gYmFja2Ryb3ANCiAgICAgICAgY2I7DQogICAgICAgIHZhciBhcyA9IGNvbG9yMi5hbHBoYTsNCiAgICAgICAgdmFyIC8vIHNvdXJjZQ0KICAgICAgICBjczsNCiAgICAgICAgdmFyIGFyOw0KICAgICAgICB2YXIgY3I7DQogICAgICAgIHZhciByID0gW107DQogICAgICAgIGFyID0gYXMgKyBhYiAqICgxIC0gYXMpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykgew0KICAgICAgICAgICAgY2IgPSBjb2xvcjEucmdiW2ldIC8gMjU1Ow0KICAgICAgICAgICAgY3MgPSBjb2xvcjIucmdiW2ldIC8gMjU1Ow0KICAgICAgICAgICAgY3IgPSBtb2RlKGNiLCBjcyk7DQogICAgICAgICAgICBpZiAoYXIpIHsNCiAgICAgICAgICAgICAgICBjciA9IChhcyAqIGNzICsgYWIgKiAoY2IgLQ0KICAgICAgICAgICAgICAgICAgICBhcyAqIChjYiArIGNzIC0gY3IpKSkgLyBhcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJbaV0gPSBjciAqIDI1NTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV3IENvbG9yKHIsIGFyKTsNCiAgICB9DQogICAgdmFyIGNvbG9yQmxlbmRNb2RlRnVuY3Rpb25zID0gew0KICAgICAgICBtdWx0aXBseTogZnVuY3Rpb24gKGNiLCBjcykgew0KICAgICAgICAgICAgcmV0dXJuIGNiICogY3M7DQogICAgICAgIH0sDQogICAgICAgIHNjcmVlbjogZnVuY3Rpb24gKGNiLCBjcykgew0KICAgICAgICAgICAgcmV0dXJuIGNiICsgY3MgLSBjYiAqIGNzOw0KICAgICAgICB9LA0KICAgICAgICBvdmVybGF5OiBmdW5jdGlvbiAoY2IsIGNzKSB7DQogICAgICAgICAgICBjYiAqPSAyOw0KICAgICAgICAgICAgcmV0dXJuIChjYiA8PSAxKSA/DQogICAgICAgICAgICAgICAgY29sb3JCbGVuZE1vZGVGdW5jdGlvbnMubXVsdGlwbHkoY2IsIGNzKSA6DQogICAgICAgICAgICAgICAgY29sb3JCbGVuZE1vZGVGdW5jdGlvbnMuc2NyZWVuKGNiIC0gMSwgY3MpOw0KICAgICAgICB9LA0KICAgICAgICBzb2Z0bGlnaHQ6IGZ1bmN0aW9uIChjYiwgY3MpIHsNCiAgICAgICAgICAgIHZhciBkID0gMTsNCiAgICAgICAgICAgIHZhciBlID0gY2I7DQogICAgICAgICAgICBpZiAoY3MgPiAwLjUpIHsNCiAgICAgICAgICAgICAgICBlID0gMTsNCiAgICAgICAgICAgICAgICBkID0gKGNiID4gMC4yNSkgPyBNYXRoLnNxcnQoY2IpDQogICAgICAgICAgICAgICAgICAgIDogKCgxNiAqIGNiIC0gMTIpICogY2IgKyA0KSAqIGNiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGNiIC0gKDEgLSAyICogY3MpICogZSAqIChkIC0gY2IpOw0KICAgICAgICB9LA0KICAgICAgICBoYXJkbGlnaHQ6IGZ1bmN0aW9uIChjYiwgY3MpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvckJsZW5kTW9kZUZ1bmN0aW9ucy5vdmVybGF5KGNzLCBjYik7DQogICAgICAgIH0sDQogICAgICAgIGRpZmZlcmVuY2U6IGZ1bmN0aW9uIChjYiwgY3MpIHsNCiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhjYiAtIGNzKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXhjbHVzaW9uOiBmdW5jdGlvbiAoY2IsIGNzKSB7DQogICAgICAgICAgICByZXR1cm4gY2IgKyBjcyAtIDIgKiBjYiAqIGNzOw0KICAgICAgICB9LA0KICAgICAgICAvLyBub24tdzNjIGZ1bmN0aW9uczoNCiAgICAgICAgYXZlcmFnZTogZnVuY3Rpb24gKGNiLCBjcykgew0KICAgICAgICAgICAgcmV0dXJuIChjYiArIGNzKSAvIDI7DQogICAgICAgIH0sDQogICAgICAgIG5lZ2F0aW9uOiBmdW5jdGlvbiAoY2IsIGNzKSB7DQogICAgICAgICAgICByZXR1cm4gMSAtIE1hdGguYWJzKGNiICsgY3MgLSAxKTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgZm9yICh2YXIgZiQxIGluIGNvbG9yQmxlbmRNb2RlRnVuY3Rpb25zKSB7DQogICAgICAgIGlmIChjb2xvckJsZW5kTW9kZUZ1bmN0aW9ucy5oYXNPd25Qcm9wZXJ0eShmJDEpKSB7DQogICAgICAgICAgICBjb2xvckJsZW5kW2YkMV0gPSBjb2xvckJsZW5kLmJpbmQobnVsbCwgY29sb3JCbGVuZE1vZGVGdW5jdGlvbnNbZiQxXSk7DQogICAgICAgIH0NCiAgICB9CgogICAgdmFyIGRhdGFVcmkgPSAoZnVuY3Rpb24gKGVudmlyb25tZW50KSB7DQogICAgICAgIHZhciBmYWxsYmFjayA9IGZ1bmN0aW9uIChmdW5jdGlvblRoaXMsIG5vZGUpIHsgcmV0dXJuIG5ldyBVUkwobm9kZSwgZnVuY3Rpb25UaGlzLmluZGV4LCBmdW5jdGlvblRoaXMuY3VycmVudEZpbGVJbmZvKS5ldmFsKGZ1bmN0aW9uVGhpcy5jb250ZXh0KTsgfTsNCiAgICAgICAgcmV0dXJuIHsgJ2RhdGEtdXJpJzogZnVuY3Rpb24gKG1pbWV0eXBlTm9kZSwgZmlsZVBhdGhOb2RlKSB7DQogICAgICAgICAgICAgICAgaWYgKCFmaWxlUGF0aE5vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhOb2RlID0gbWltZXR5cGVOb2RlOw0KICAgICAgICAgICAgICAgICAgICBtaW1ldHlwZU5vZGUgPSBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgbWltZXR5cGUgPSBtaW1ldHlwZU5vZGUgJiYgbWltZXR5cGVOb2RlLnZhbHVlOw0KICAgICAgICAgICAgICAgIHZhciBmaWxlUGF0aCA9IGZpbGVQYXRoTm9kZS52YWx1ZTsNCiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEZpbGVJbmZvID0gdGhpcy5jdXJyZW50RmlsZUluZm87DQogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREaXJlY3RvcnkgPSBjdXJyZW50RmlsZUluZm8ucmV3cml0ZVVybHMgPw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSA6IGN1cnJlbnRGaWxlSW5mby5lbnRyeVBhdGg7DQogICAgICAgICAgICAgICAgdmFyIGZyYWdtZW50U3RhcnQgPSBmaWxlUGF0aC5pbmRleE9mKCcjJyk7DQogICAgICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gJyc7DQogICAgICAgICAgICAgICAgaWYgKGZyYWdtZW50U3RhcnQgIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gZmlsZVBhdGguc2xpY2UoZnJhZ21lbnRTdGFydCk7DQogICAgICAgICAgICAgICAgICAgIGZpbGVQYXRoID0gZmlsZVBhdGguc2xpY2UoMCwgZnJhZ21lbnRTdGFydCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY2xvbmUodGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgICAgICBjb250ZXh0LnJhd0J1ZmZlciA9IHRydWU7DQogICAgICAgICAgICAgICAgdmFyIGZpbGVNYW5hZ2VyID0gZW52aXJvbm1lbnQuZ2V0RmlsZU1hbmFnZXIoZmlsZVBhdGgsIGN1cnJlbnREaXJlY3RvcnksIGNvbnRleHQsIGVudmlyb25tZW50LCB0cnVlKTsNCiAgICAgICAgICAgICAgICBpZiAoIWZpbGVNYW5hZ2VyKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFjayh0aGlzLCBmaWxlUGF0aE5vZGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgdXNlQmFzZTY0ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgLy8gZGV0ZWN0IHRoZSBtaW1ldHlwZSBpZiBub3QgZ2l2ZW4NCiAgICAgICAgICAgICAgICBpZiAoIW1pbWV0eXBlTm9kZSkgew0KICAgICAgICAgICAgICAgICAgICBtaW1ldHlwZSA9IGVudmlyb25tZW50Lm1pbWVMb29rdXAoZmlsZVBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWltZXR5cGUgPT09ICdpbWFnZS9zdmcreG1sJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlQmFzZTY0ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgYmFzZSA2NCB1bmxlc3MgaXQncyBhbiBBU0NJSSBvciBVVEYtOCBmb3JtYXQNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFyc2V0ID0gZW52aXJvbm1lbnQuY2hhcnNldExvb2t1cChtaW1ldHlwZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB1c2VCYXNlNjQgPSBbJ1VTLUFTQ0lJJywgJ1VURi04J10uaW5kZXhPZihjaGFyc2V0KSA8IDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZUJhc2U2NCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWltZXR5cGUgKz0gJztiYXNlNjQnOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB1c2VCYXNlNjQgPSAvO2Jhc2U2NCQvLnRlc3QobWltZXR5cGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgZmlsZVN5bmMgPSBmaWxlTWFuYWdlci5sb2FkRmlsZVN5bmMoZmlsZVBhdGgsIGN1cnJlbnREaXJlY3RvcnksIGNvbnRleHQsIGVudmlyb25tZW50KTsNCiAgICAgICAgICAgICAgICBpZiAoIWZpbGVTeW5jLmNvbnRlbnRzKSB7DQogICAgICAgICAgICAgICAgICAgIGxvZ2dlciQxLndhcm4oIlNraXBwZWQgZGF0YS11cmkgZW1iZWRkaW5nIG9mICIgKyBmaWxlUGF0aCArICIgYmVjYXVzZSBmaWxlIG5vdCBmb3VuZCIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsbGJhY2sodGhpcywgZmlsZVBhdGhOb2RlIHx8IG1pbWV0eXBlTm9kZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBidWYgPSBmaWxlU3luYy5jb250ZW50czsNCiAgICAgICAgICAgICAgICBpZiAodXNlQmFzZTY0ICYmICFlbnZpcm9ubWVudC5lbmNvZGVCYXNlNjQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrKHRoaXMsIGZpbGVQYXRoTm9kZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGJ1ZiA9IHVzZUJhc2U2NCA/IGVudmlyb25tZW50LmVuY29kZUJhc2U2NChidWYpIDogZW5jb2RlVVJJQ29tcG9uZW50KGJ1Zik7DQogICAgICAgICAgICAgICAgdmFyIHVyaSA9ICJkYXRhOiIgKyBtaW1ldHlwZSArICIsIiArIGJ1ZiArIGZyYWdtZW50Ow0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVVJMKG5ldyBRdW90ZWQoIlwiIiArIHVyaSArICJcIiIsIHVyaSwgZmFsc2UsIHRoaXMuaW5kZXgsIHRoaXMuY3VycmVudEZpbGVJbmZvKSwgdGhpcy5pbmRleCwgdGhpcy5jdXJyZW50RmlsZUluZm8pOw0KICAgICAgICAgICAgfSB9Ow0KICAgIH0pOwoKICAgIHZhciBnZXRJdGVtc0Zyb21Ob2RlID0gZnVuY3Rpb24gKG5vZGUpIHsNCiAgICAgICAgLy8gaGFuZGxlIG5vbi1hcnJheSB2YWx1ZXMgYXMgYW4gYXJyYXkgb2YgbGVuZ3RoIDENCiAgICAgICAgLy8gcmV0dXJuICd1bmRlZmluZWQnIGlmIGluZGV4IGlzIGludmFsaWQNCiAgICAgICAgdmFyIGl0ZW1zID0gQXJyYXkuaXNBcnJheShub2RlLnZhbHVlKSA/DQogICAgICAgICAgICBub2RlLnZhbHVlIDogQXJyYXkobm9kZSk7DQogICAgICAgIHJldHVybiBpdGVtczsNCiAgICB9Ow0KICAgIHZhciBsaXN0ID0gew0KICAgICAgICBfU0VMRjogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBuOw0KICAgICAgICB9LA0KICAgICAgICAnfic6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBleHByID0gW107DQogICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgew0KICAgICAgICAgICAgICAgIGV4cHJbX2ldID0gYXJndW1lbnRzW19pXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChleHByLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBleHByWzBdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShleHByKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXh0cmFjdDogZnVuY3Rpb24gKHZhbHVlcywgaW5kZXgpIHsNCiAgICAgICAgICAgIC8vICgxLWJhc2VkIGluZGV4KQ0KICAgICAgICAgICAgaW5kZXggPSBpbmRleC52YWx1ZSAtIDE7DQogICAgICAgICAgICByZXR1cm4gZ2V0SXRlbXNGcm9tTm9kZSh2YWx1ZXMpW2luZGV4XTsNCiAgICAgICAgfSwNCiAgICAgICAgbGVuZ3RoOiBmdW5jdGlvbiAodmFsdWVzKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihnZXRJdGVtc0Zyb21Ob2RlKHZhbHVlcykubGVuZ3RoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIENyZWF0ZXMgYSBMZXNzIGxpc3Qgb2YgaW5jcmVtZW50YWwgdmFsdWVzLg0KICAgICAgICAgKiBNb2RlbGVkIGFmdGVyIExvZGFzaCdzIHJhbmdlIGZ1bmN0aW9uLCBhbHNvIGV4aXN0cyBuYXRpdmVseSBpbiBQSFANCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFtIHtEaW1lbnNpb259IFtzdGFydD0xXQ0KICAgICAgICAgKiBAcGFyYW0ge0RpbWVuc2lvbn0gZW5kICAtIGUuZy4gMTAgb3IgMTBweCAtIHVuaXQgaXMgYWRkZWQgdG8gb3V0cHV0DQogICAgICAgICAqIEBwYXJhbSB7RGltZW5zaW9ufSBbc3RlcD0xXQ0KICAgICAgICAgKi8NCiAgICAgICAgcmFuZ2U6IGZ1bmN0aW9uIChzdGFydCwgZW5kLCBzdGVwKSB7DQogICAgICAgICAgICB2YXIgZnJvbTsNCiAgICAgICAgICAgIHZhciB0bzsNCiAgICAgICAgICAgIHZhciBzdGVwVmFsdWUgPSAxOw0KICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsNCiAgICAgICAgICAgIGlmIChlbmQpIHsNCiAgICAgICAgICAgICAgICB0byA9IGVuZDsNCiAgICAgICAgICAgICAgICBmcm9tID0gc3RhcnQudmFsdWU7DQogICAgICAgICAgICAgICAgaWYgKHN0ZXApIHsNCiAgICAgICAgICAgICAgICAgICAgc3RlcFZhbHVlID0gc3RlcC52YWx1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBmcm9tID0gMTsNCiAgICAgICAgICAgICAgICB0byA9IHN0YXJ0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZyb207IGkgPD0gdG8udmFsdWU7IGkgKz0gc3RlcFZhbHVlKSB7DQogICAgICAgICAgICAgICAgbGlzdC5wdXNoKG5ldyBEaW1lbnNpb24oaSwgdG8udW5pdCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKGxpc3QpOw0KICAgICAgICB9LA0KICAgICAgICBlYWNoOiBmdW5jdGlvbiAobGlzdCwgcnMpIHsNCiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICAgICAgICB2YXIgcnVsZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciBuZXdSdWxlczsNCiAgICAgICAgICAgIHZhciBpdGVyYXRvcjsNCiAgICAgICAgICAgIHZhciB0cnlFdmFsID0gZnVuY3Rpb24gKHZhbCkgew0KICAgICAgICAgICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBOb2RlKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwuZXZhbChfdGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHZhbDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBpZiAobGlzdC52YWx1ZSAmJiAhKGxpc3QgaW5zdGFuY2VvZiBRdW90ZWQpKSB7DQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdC52YWx1ZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBsaXN0LnZhbHVlLm1hcCh0cnlFdmFsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gW3RyeUV2YWwobGlzdC52YWx1ZSldOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGxpc3QucnVsZXNldCkgew0KICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gdHJ5RXZhbChsaXN0LnJ1bGVzZXQpLnJ1bGVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAobGlzdC5ydWxlcykgew0KICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gbGlzdC5ydWxlcy5tYXAodHJ5RXZhbCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGxpc3QpKSB7DQogICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBsaXN0Lm1hcCh0cnlFdmFsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gW3RyeUV2YWwobGlzdCldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHZhbHVlTmFtZSA9ICdAdmFsdWUnOw0KICAgICAgICAgICAgdmFyIGtleU5hbWUgPSAnQGtleSc7DQogICAgICAgICAgICB2YXIgaW5kZXhOYW1lID0gJ0BpbmRleCc7DQogICAgICAgICAgICBpZiAocnMucGFyYW1zKSB7DQogICAgICAgICAgICAgICAgdmFsdWVOYW1lID0gcnMucGFyYW1zWzBdICYmIHJzLnBhcmFtc1swXS5uYW1lOw0KICAgICAgICAgICAgICAgIGtleU5hbWUgPSBycy5wYXJhbXNbMV0gJiYgcnMucGFyYW1zWzFdLm5hbWU7DQogICAgICAgICAgICAgICAgaW5kZXhOYW1lID0gcnMucGFyYW1zWzJdICYmIHJzLnBhcmFtc1syXS5uYW1lOw0KICAgICAgICAgICAgICAgIHJzID0gcnMucnVsZXM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBycyA9IHJzLnJ1bGVzZXQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZXJhdG9yLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdmFyIGtleSA9IHZvaWQgMDsNCiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7DQogICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVyYXRvcltpXTsNCiAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIERlY2xhcmF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgIGtleSA9IHR5cGVvZiBpdGVtLm5hbWUgPT09ICdzdHJpbmcnID8gaXRlbS5uYW1lIDogaXRlbS5uYW1lWzBdLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGl0ZW0udmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBrZXkgPSBuZXcgRGltZW5zaW9uKGkgKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBpdGVtOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENvbW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG5ld1J1bGVzID0gcnMucnVsZXMuc2xpY2UoMCk7DQogICAgICAgICAgICAgICAgaWYgKHZhbHVlTmFtZSkgew0KICAgICAgICAgICAgICAgICAgICBuZXdSdWxlcy5wdXNoKG5ldyBEZWNsYXJhdGlvbih2YWx1ZU5hbWUsIHZhbHVlLCBmYWxzZSwgZmFsc2UsIHRoaXMuaW5kZXgsIHRoaXMuY3VycmVudEZpbGVJbmZvKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpbmRleE5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgbmV3UnVsZXMucHVzaChuZXcgRGVjbGFyYXRpb24oaW5kZXhOYW1lLCBuZXcgRGltZW5zaW9uKGkgKyAxKSwgZmFsc2UsIGZhbHNlLCB0aGlzLmluZGV4LCB0aGlzLmN1cnJlbnRGaWxlSW5mbykpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoa2V5TmFtZSkgew0KICAgICAgICAgICAgICAgICAgICBuZXdSdWxlcy5wdXNoKG5ldyBEZWNsYXJhdGlvbihrZXlOYW1lLCBrZXksIGZhbHNlLCBmYWxzZSwgdGhpcy5pbmRleCwgdGhpcy5jdXJyZW50RmlsZUluZm8pKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcnVsZXMucHVzaChuZXcgUnVsZXNldChbbmV3IChTZWxlY3RvcikoW25ldyBFbGVtZW50KCIiLCAnJicpXSldLCBuZXdSdWxlcywgcnMuc3RyaWN0SW1wb3J0cywgcnMudmlzaWJpbGl0eUluZm8oKSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBSdWxlc2V0KFtuZXcgKFNlbGVjdG9yKShbbmV3IEVsZW1lbnQoIiIsICcmJyldKV0sIHJ1bGVzLCBycy5zdHJpY3RJbXBvcnRzLCBycy52aXNpYmlsaXR5SW5mbygpKS5ldmFsKHRoaXMuY29udGV4dCk7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBNYXRoSGVscGVyID0gZnVuY3Rpb24gKGZuLCB1bml0LCBuKSB7DQogICAgICAgIGlmICghKG4gaW5zdGFuY2VvZiBEaW1lbnNpb24pKSB7DQogICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdBcmd1bWVudCcsIG1lc3NhZ2U6ICdhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJyB9Ow0KICAgICAgICB9DQogICAgICAgIGlmICh1bml0ID09IG51bGwpIHsNCiAgICAgICAgICAgIHVuaXQgPSBuLnVuaXQ7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBuID0gbi51bmlmeSgpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKGZuKHBhcnNlRmxvYXQobi52YWx1ZSkpLCB1bml0KTsNCiAgICB9OwoKICAgIHZhciBtYXRoRnVuY3Rpb25zID0gew0KICAgICAgICAvLyBuYW1lLCAgdW5pdA0KICAgICAgICBjZWlsOiBudWxsLA0KICAgICAgICBmbG9vcjogbnVsbCwNCiAgICAgICAgc3FydDogbnVsbCwNCiAgICAgICAgYWJzOiBudWxsLA0KICAgICAgICB0YW46ICcnLA0KICAgICAgICBzaW46ICcnLA0KICAgICAgICBjb3M6ICcnLA0KICAgICAgICBhdGFuOiAncmFkJywNCiAgICAgICAgYXNpbjogJ3JhZCcsDQogICAgICAgIGFjb3M6ICdyYWQnDQogICAgfTsNCiAgICBmb3IgKHZhciBmIGluIG1hdGhGdW5jdGlvbnMpIHsNCiAgICAgICAgaWYgKG1hdGhGdW5jdGlvbnMuaGFzT3duUHJvcGVydHkoZikpIHsNCiAgICAgICAgICAgIG1hdGhGdW5jdGlvbnNbZl0gPSBNYXRoSGVscGVyLmJpbmQobnVsbCwgTWF0aFtmXSwgbWF0aEZ1bmN0aW9uc1tmXSk7DQogICAgICAgIH0NCiAgICB9DQogICAgbWF0aEZ1bmN0aW9ucy5yb3VuZCA9IGZ1bmN0aW9uIChuLCBmKSB7DQogICAgICAgIHZhciBmcmFjdGlvbiA9IHR5cGVvZiBmID09PSAndW5kZWZpbmVkJyA/IDAgOiBmLnZhbHVlOw0KICAgICAgICByZXR1cm4gTWF0aEhlbHBlcihmdW5jdGlvbiAobnVtKSB7IHJldHVybiBudW0udG9GaXhlZChmcmFjdGlvbik7IH0sIG51bGwsIG4pOw0KICAgIH07CgogICAgdmFyIG1pbk1heCA9IGZ1bmN0aW9uIChpc01pbiwgYXJncykgew0KICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncyk7DQogICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHsNCiAgICAgICAgICAgIGNhc2UgMDogdGhyb3cgeyB0eXBlOiAnQXJndW1lbnQnLCBtZXNzYWdlOiAnb25lIG9yIG1vcmUgYXJndW1lbnRzIHJlcXVpcmVkJyB9Ow0KICAgICAgICB9DQogICAgICAgIHZhciBpOyAvLyBrZXkgaXMgdGhlIHVuaXQudG9TdHJpbmcoKSBmb3IgdW5pZmllZCBEaW1lbnNpb24gdmFsdWVzLA0KICAgICAgICB2YXIgajsNCiAgICAgICAgdmFyIGN1cnJlbnQ7DQogICAgICAgIHZhciBjdXJyZW50VW5pZmllZDsNCiAgICAgICAgdmFyIHJlZmVyZW5jZVVuaWZpZWQ7DQogICAgICAgIHZhciB1bml0Ow0KICAgICAgICB2YXIgdW5pdFN0YXRpYzsNCiAgICAgICAgdmFyIHVuaXRDbG9uZTsNCiAgICAgICAgdmFyIC8vIGVsZW1zIG9ubHkgY29udGFpbnMgb3JpZ2luYWwgYXJndW1lbnQgdmFsdWVzLg0KICAgICAgICBvcmRlciA9IFtdOw0KICAgICAgICB2YXIgdmFsdWVzID0ge307DQogICAgICAgIC8vIHZhbHVlIGlzIHRoZSBpbmRleCBpbnRvIHRoZSBvcmRlciBhcnJheS4NCiAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGN1cnJlbnQgPSBhcmdzW2ldOw0KICAgICAgICAgICAgaWYgKCEoY3VycmVudCBpbnN0YW5jZW9mIERpbWVuc2lvbikpIHsNCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzW2ldLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcmdzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzW2ldLnZhbHVlKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY3VycmVudFVuaWZpZWQgPSBjdXJyZW50LnVuaXQudG9TdHJpbmcoKSA9PT0gJycgJiYgdW5pdENsb25lICE9PSB1bmRlZmluZWQgPyBuZXcgRGltZW5zaW9uKGN1cnJlbnQudmFsdWUsIHVuaXRDbG9uZSkudW5pZnkoKSA6IGN1cnJlbnQudW5pZnkoKTsNCiAgICAgICAgICAgIHVuaXQgPSBjdXJyZW50VW5pZmllZC51bml0LnRvU3RyaW5nKCkgPT09ICcnICYmIHVuaXRTdGF0aWMgIT09IHVuZGVmaW5lZCA/IHVuaXRTdGF0aWMgOiBjdXJyZW50VW5pZmllZC51bml0LnRvU3RyaW5nKCk7DQogICAgICAgICAgICB1bml0U3RhdGljID0gdW5pdCAhPT0gJycgJiYgdW5pdFN0YXRpYyA9PT0gdW5kZWZpbmVkIHx8IHVuaXQgIT09ICcnICYmIG9yZGVyWzBdLnVuaWZ5KCkudW5pdC50b1N0cmluZygpID09PSAnJyA/IHVuaXQgOiB1bml0U3RhdGljOw0KICAgICAgICAgICAgdW5pdENsb25lID0gdW5pdCAhPT0gJycgJiYgdW5pdENsb25lID09PSB1bmRlZmluZWQgPyBjdXJyZW50LnVuaXQudG9TdHJpbmcoKSA6IHVuaXRDbG9uZTsNCiAgICAgICAgICAgIGogPSB2YWx1ZXNbJyddICE9PSB1bmRlZmluZWQgJiYgdW5pdCAhPT0gJycgJiYgdW5pdCA9PT0gdW5pdFN0YXRpYyA/IHZhbHVlc1snJ10gOiB2YWx1ZXNbdW5pdF07DQogICAgICAgICAgICBpZiAoaiA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgaWYgKHVuaXRTdGF0aWMgIT09IHVuZGVmaW5lZCAmJiB1bml0ICE9PSB1bml0U3RhdGljKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ0FyZ3VtZW50JywgbWVzc2FnZTogJ2luY29tcGF0aWJsZSB0eXBlcycgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFsdWVzW3VuaXRdID0gb3JkZXIubGVuZ3RoOw0KICAgICAgICAgICAgICAgIG9yZGVyLnB1c2goY3VycmVudCk7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZWZlcmVuY2VVbmlmaWVkID0gb3JkZXJbal0udW5pdC50b1N0cmluZygpID09PSAnJyAmJiB1bml0Q2xvbmUgIT09IHVuZGVmaW5lZCA/IG5ldyBEaW1lbnNpb24ob3JkZXJbal0udmFsdWUsIHVuaXRDbG9uZSkudW5pZnkoKSA6IG9yZGVyW2pdLnVuaWZ5KCk7DQogICAgICAgICAgICBpZiAoaXNNaW4gJiYgY3VycmVudFVuaWZpZWQudmFsdWUgPCByZWZlcmVuY2VVbmlmaWVkLnZhbHVlIHx8DQogICAgICAgICAgICAgICAgIWlzTWluICYmIGN1cnJlbnRVbmlmaWVkLnZhbHVlID4gcmVmZXJlbmNlVW5pZmllZC52YWx1ZSkgew0KICAgICAgICAgICAgICAgIG9yZGVyW2pdID0gY3VycmVudDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAob3JkZXIubGVuZ3RoID09IDEpIHsNCiAgICAgICAgICAgIHJldHVybiBvcmRlclswXTsNCiAgICAgICAgfQ0KICAgICAgICBhcmdzID0gb3JkZXIubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvQ1NTKHRoaXMuY29udGV4dCk7IH0pLmpvaW4odGhpcy5jb250ZXh0LmNvbXByZXNzID8gJywnIDogJywgJyk7DQogICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzKChpc01pbiA/ICdtaW4nIDogJ21heCcpICsgIigiICsgYXJncyArICIpIik7DQogICAgfTsNCiAgICB2YXIgbnVtYmVyID0gew0KICAgICAgICBtaW46IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBhcmdzID0gW107DQogICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgew0KICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG1pbk1heCh0cnVlLCBhcmdzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7IH0NCiAgICAgICAgfSwNCiAgICAgICAgbWF4OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgYXJncyA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsNCiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJldHVybiBtaW5NYXgoZmFsc2UsIGFyZ3MpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfQ0KICAgICAgICB9LA0KICAgICAgICBjb252ZXJ0OiBmdW5jdGlvbiAodmFsLCB1bml0KSB7DQogICAgICAgICAgICByZXR1cm4gdmFsLmNvbnZlcnRUbyh1bml0LnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgcGk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKE1hdGguUEkpOw0KICAgICAgICB9LA0KICAgICAgICBtb2Q6IGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihhLnZhbHVlICUgYi52YWx1ZSwgYS51bml0KTsNCiAgICAgICAgfSwNCiAgICAgICAgcG93OiBmdW5jdGlvbiAoeCwgeSkgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgeSA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgICAgICB4ID0gbmV3IERpbWVuc2lvbih4KTsNCiAgICAgICAgICAgICAgICB5ID0gbmV3IERpbWVuc2lvbih5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKCEoeCBpbnN0YW5jZW9mIERpbWVuc2lvbikgfHwgISh5IGluc3RhbmNlb2YgRGltZW5zaW9uKSkgew0KICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ0FyZ3VtZW50JywgbWVzc2FnZTogJ2FyZ3VtZW50cyBtdXN0IGJlIG51bWJlcnMnIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihNYXRoLnBvdyh4LnZhbHVlLCB5LnZhbHVlKSwgeC51bml0KTsNCiAgICAgICAgfSwNCiAgICAgICAgcGVyY2VudGFnZTogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBNYXRoSGVscGVyKGZ1bmN0aW9uIChudW0pIHsgcmV0dXJuIG51bSAqIDEwMDsgfSwgJyUnLCBuKTsNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBzdHJpbmcgPSB7DQogICAgICAgIGU6IGZ1bmN0aW9uIChzdHIpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUXVvdGVkKCciJywgc3RyIGluc3RhbmNlb2YgSmF2YVNjcmlwdCA/IHN0ci5ldmFsdWF0ZWQgOiBzdHIudmFsdWUsIHRydWUpOw0KICAgICAgICB9LA0KICAgICAgICBlc2NhcGU6IGZ1bmN0aW9uIChzdHIpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzKGVuY29kZVVSSShzdHIudmFsdWUpLnJlcGxhY2UoLz0vZywgJyUzRCcpLnJlcGxhY2UoLzovZywgJyUzQScpLnJlcGxhY2UoLyMvZywgJyUyMycpLnJlcGxhY2UoLzsvZywgJyUzQicpDQogICAgICAgICAgICAgICAgLnJlcGxhY2UoL1woL2csICclMjgnKS5yZXBsYWNlKC9cKS9nLCAnJTI5JykpOw0KICAgICAgICB9LA0KICAgICAgICByZXBsYWNlOiBmdW5jdGlvbiAoc3RyaW5nLCBwYXR0ZXJuLCByZXBsYWNlbWVudCwgZmxhZ3MpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBzdHJpbmcudmFsdWU7DQogICAgICAgICAgICByZXBsYWNlbWVudCA9IChyZXBsYWNlbWVudC50eXBlID09PSAnUXVvdGVkJykgPw0KICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50LnZhbHVlIDogcmVwbGFjZW1lbnQudG9DU1MoKTsNCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAocGF0dGVybi52YWx1ZSwgZmxhZ3MgPyBmbGFncy52YWx1ZSA6ICcnKSwgcmVwbGFjZW1lbnQpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBRdW90ZWQoc3RyaW5nLnF1b3RlIHx8ICcnLCByZXN1bHQsIHN0cmluZy5lc2NhcGVkKTsNCiAgICAgICAgfSwNCiAgICAgICAgJyUnOiBmdW5jdGlvbiAoc3RyaW5nIC8qIGFyZywgYXJnLCAuLi4gKi8pIHsNCiAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBzdHJpbmcudmFsdWU7DQogICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpKSB7DQogICAgICAgICAgICAgICAgLyoganNoaW50IGxvb3BmdW5jOnRydWUgKi8NCiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvJVtzZGFdL2ksIGZ1bmN0aW9uICh0b2tlbikgew0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAoKGFyZ3NbaV0udHlwZSA9PT0gJ1F1b3RlZCcpICYmDQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlbi5tYXRjaCgvcy9pKSkgPyBhcmdzW2ldLnZhbHVlIDogYXJnc1tpXS50b0NTUygpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW4ubWF0Y2goL1tBLVpdJC8pID8gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSA6IHZhbHVlOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIF9sb29wXzEoaSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvJSUvZywgJyUnKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUXVvdGVkKHN0cmluZy5xdW90ZSB8fCAnJywgcmVzdWx0LCBzdHJpbmcuZXNjYXBlZCk7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBzdmcgPSAoZnVuY3Rpb24gKGVudmlyb25tZW50KSB7DQogICAgICAgIHJldHVybiB7ICdzdmctZ3JhZGllbnQnOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7DQogICAgICAgICAgICAgICAgdmFyIHN0b3BzOw0KICAgICAgICAgICAgICAgIHZhciBncmFkaWVudERpcmVjdGlvblN2ZzsNCiAgICAgICAgICAgICAgICB2YXIgZ3JhZGllbnRUeXBlID0gJ2xpbmVhcic7DQogICAgICAgICAgICAgICAgdmFyIHJlY3RhbmdsZURpbWVuc2lvbiA9ICd4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIic7DQogICAgICAgICAgICAgICAgdmFyIHJlbmRlckVudiA9IHsgY29tcHJlc3M6IGZhbHNlIH07DQogICAgICAgICAgICAgICAgdmFyIHJldHVybmVyOw0KICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb25WYWx1ZSA9IGRpcmVjdGlvbi50b0NTUyhyZW5kZXJFbnYpOw0KICAgICAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgICAgIHZhciBjb2xvcjsNCiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb247DQogICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uVmFsdWU7DQogICAgICAgICAgICAgICAgdmFyIGFscGhhOw0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRocm93QXJndW1lbnREZXNjcmlwdG9yKCkgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdBcmd1bWVudCcsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnc3ZnLWdyYWRpZW50IGV4cGVjdHMgZGlyZWN0aW9uLCBzdGFydF9jb2xvciBbc3RhcnRfcG9zaXRpb25dLCBbY29sb3IgcG9zaXRpb24sXS4uLiwnICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGVuZF9jb2xvciBbZW5kX3Bvc2l0aW9uXSBvciBkaXJlY3Rpb24sIGNvbG9yIGxpc3QnIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1sxXS52YWx1ZS5sZW5ndGggPCAyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0FyZ3VtZW50RGVzY3JpcHRvcigpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHN0b3BzID0gYXJndW1lbnRzWzFdLnZhbHVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykgew0KICAgICAgICAgICAgICAgICAgICB0aHJvd0FyZ3VtZW50RGVzY3JpcHRvcigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc3RvcHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvblZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvIGJvdHRvbSc6DQogICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudERpcmVjdGlvblN2ZyA9ICd4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSInOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvIHJpZ2h0JzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50RGlyZWN0aW9uU3ZnID0gJ3gxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIic7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAndG8gYm90dG9tIHJpZ2h0JzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50RGlyZWN0aW9uU3ZnID0gJ3gxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICd0byB0b3AgcmlnaHQnOg0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnREaXJlY3Rpb25TdmcgPSAneDE9IjAlIiB5MT0iMTAwJSIgeDI9IjEwMCUiIHkyPSIwJSInOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VsbGlwc2UnOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdlbGxpcHNlIGF0IGNlbnRlcic6DQogICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudFR5cGUgPSAncmFkaWFsJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50RGlyZWN0aW9uU3ZnID0gJ2N4PSI1MCUiIGN5PSI1MCUiIHI9Ijc1JSInOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVjdGFuZ2xlRGltZW5zaW9uID0gJ3g9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSInOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdBcmd1bWVudCcsIG1lc3NhZ2U6ICdzdmctZ3JhZGllbnQgZGlyZWN0aW9uIG11c3QgYmUgXCd0byBib3R0b21cJywgXCd0byByaWdodFwnLCcgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIFwndG8gYm90dG9tIHJpZ2h0XCcsIFwndG8gdG9wIHJpZ2h0XCcgb3IgXCdlbGxpcHNlIGF0IGNlbnRlclwnJyB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm5lciA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEgMVwiPjwiICsgZ3JhZGllbnRUeXBlICsgIkdyYWRpZW50IGlkPVwiZ1wiICIgKyBncmFkaWVudERpcmVjdGlvblN2ZyArICI+IjsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RvcHMubGVuZ3RoOyBpICs9IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3BzW2ldIGluc3RhbmNlb2YgRXhwcmVzc2lvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBzdG9wc1tpXS52YWx1ZVswXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gc3RvcHNbaV0udmFsdWVbMV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IHN0b3BzW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSB1bmRlZmluZWQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoY29sb3IgaW5zdGFuY2VvZiBDb2xvcikgfHwgKCEoKGkgPT09IDAgfHwgaSArIDEgPT09IHN0b3BzLmxlbmd0aCkgJiYgcG9zaXRpb24gPT09IHVuZGVmaW5lZCkgJiYgIShwb3NpdGlvbiBpbnN0YW5jZW9mIERpbWVuc2lvbikpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0FyZ3VtZW50RGVzY3JpcHRvcigpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uVmFsdWUgPSBwb3NpdGlvbiA/IHBvc2l0aW9uLnRvQ1NTKHJlbmRlckVudikgOiBpID09PSAwID8gJzAlJyA6ICcxMDAlJzsNCiAgICAgICAgICAgICAgICAgICAgYWxwaGEgPSBjb2xvci5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuZXIgKz0gIjxzdG9wIG9mZnNldD1cIiIgKyBwb3NpdGlvblZhbHVlICsgIlwiIHN0b3AtY29sb3I9XCIiICsgY29sb3IudG9SR0IoKSArICJcIiIgKyAoYWxwaGEgPCAxID8gIiBzdG9wLW9wYWNpdHk9XCIiICsgYWxwaGEgKyAiXCIiIDogJycpICsgIi8+IjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuZXIgKz0gIjwvIiArIGdyYWRpZW50VHlwZSArICJHcmFkaWVudD48cmVjdCAiICsgcmVjdGFuZ2xlRGltZW5zaW9uICsgIiBmaWxsPVwidXJsKCNnKVwiIC8+PC9zdmc+IjsNCiAgICAgICAgICAgICAgICByZXR1cm5lciA9IGVuY29kZVVSSUNvbXBvbmVudChyZXR1cm5lcik7DQogICAgICAgICAgICAgICAgcmV0dXJuZXIgPSAiZGF0YTppbWFnZS9zdmcreG1sLCIgKyByZXR1cm5lcjsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVSTChuZXcgUXVvdGVkKCInIiArIHJldHVybmVyICsgIiciLCByZXR1cm5lciwgZmFsc2UsIHRoaXMuaW5kZXgsIHRoaXMuY3VycmVudEZpbGVJbmZvKSwgdGhpcy5pbmRleCwgdGhpcy5jdXJyZW50RmlsZUluZm8pOw0KICAgICAgICAgICAgfSB9Ow0KICAgIH0pOwoKICAgIHZhciBpc2EgPSBmdW5jdGlvbiAobiwgVHlwZSkgeyByZXR1cm4gKG4gaW5zdGFuY2VvZiBUeXBlKSA/IEtleXdvcmQuVHJ1ZSA6IEtleXdvcmQuRmFsc2U7IH07DQogICAgdmFyIGlzdW5pdCA9IGZ1bmN0aW9uIChuLCB1bml0KSB7DQogICAgICAgIGlmICh1bml0ID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ0FyZ3VtZW50JywgbWVzc2FnZTogJ21pc3NpbmcgdGhlIHJlcXVpcmVkIHNlY29uZCBhcmd1bWVudCB0byBpc3VuaXQuJyB9Ow0KICAgICAgICB9DQogICAgICAgIHVuaXQgPSB0eXBlb2YgdW5pdC52YWx1ZSA9PT0gJ3N0cmluZycgPyB1bml0LnZhbHVlIDogdW5pdDsNCiAgICAgICAgaWYgKHR5cGVvZiB1bml0ICE9PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgdGhyb3cgeyB0eXBlOiAnQXJndW1lbnQnLCBtZXNzYWdlOiAnU2Vjb25kIGFyZ3VtZW50IHRvIGlzdW5pdCBzaG91bGQgYmUgYSB1bml0IG9yIGEgc3RyaW5nLicgfTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKG4gaW5zdGFuY2VvZiBEaW1lbnNpb24pICYmIG4udW5pdC5pcyh1bml0KSA/IEtleXdvcmQuVHJ1ZSA6IEtleXdvcmQuRmFsc2U7DQogICAgfTsNCiAgICB2YXIgdHlwZXMgPSB7DQogICAgICAgIGlzcnVsZXNldDogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBpc2EobiwgRGV0YWNoZWRSdWxlc2V0KTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNjb2xvcjogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBpc2EobiwgQ29sb3IpOw0KICAgICAgICB9LA0KICAgICAgICBpc251bWJlcjogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBpc2EobiwgRGltZW5zaW9uKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNzdHJpbmc6IGZ1bmN0aW9uIChuKSB7DQogICAgICAgICAgICByZXR1cm4gaXNhKG4sIFF1b3RlZCk7DQogICAgICAgIH0sDQogICAgICAgIGlza2V5d29yZDogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBpc2EobiwgS2V5d29yZCk7DQogICAgICAgIH0sDQogICAgICAgIGlzdXJsOiBmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgcmV0dXJuIGlzYShuLCBVUkwpOw0KICAgICAgICB9LA0KICAgICAgICBpc3BpeGVsOiBmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgcmV0dXJuIGlzdW5pdChuLCAncHgnKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNwZXJjZW50YWdlOiBmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgcmV0dXJuIGlzdW5pdChuLCAnJScpOw0KICAgICAgICB9LA0KICAgICAgICBpc2VtOiBmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgcmV0dXJuIGlzdW5pdChuLCAnZW0nKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXN1bml0OiBpc3VuaXQsDQogICAgICAgIHVuaXQ6IGZ1bmN0aW9uICh2YWwsIHVuaXQpIHsNCiAgICAgICAgICAgIGlmICghKHZhbCBpbnN0YW5jZW9mIERpbWVuc2lvbikpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdBcmd1bWVudCcsDQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJ0aGUgZmlyc3QgYXJndW1lbnQgdG8gdW5pdCBtdXN0IGJlIGEgbnVtYmVyIiArICh2YWwgaW5zdGFuY2VvZiBPcGVyYXRpb24gPyAnLiBIYXZlIHlvdSBmb3Jnb3R0ZW4gcGFyZW50aGVzaXM/JyA6ICcnKSB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHVuaXQpIHsNCiAgICAgICAgICAgICAgICBpZiAodW5pdCBpbnN0YW5jZW9mIEtleXdvcmQpIHsNCiAgICAgICAgICAgICAgICAgICAgdW5pdCA9IHVuaXQudmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB1bml0ID0gdW5pdC50b0NTUygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHVuaXQgPSAnJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHZhbC52YWx1ZSwgdW5pdCk7DQogICAgICAgIH0sDQogICAgICAgICdnZXQtdW5pdCc6IGZ1bmN0aW9uIChuKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEFub255bW91cyhuLnVuaXQpOw0KICAgICAgICB9DQogICAgfTsKCiAgICB2YXIgZnVuY3Rpb25zID0gKGZ1bmN0aW9uIChlbnZpcm9ubWVudCkgew0KICAgICAgICB2YXIgZnVuY3Rpb25zID0geyBmdW5jdGlvblJlZ2lzdHJ5OiBmdW5jdGlvblJlZ2lzdHJ5LCBmdW5jdGlvbkNhbGxlcjogZnVuY3Rpb25DYWxsZXIgfTsNCiAgICAgICAgLy8gcmVnaXN0ZXIgZnVuY3Rpb25zDQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoYm9vbGVhbiQxKTsNCiAgICAgICAgZnVuY3Rpb25SZWdpc3RyeS5hZGQoJ2RlZmF1bHQnLCBkZWZhdWx0RnVuYy5ldmFsLmJpbmQoZGVmYXVsdEZ1bmMpKTsNCiAgICAgICAgZnVuY3Rpb25SZWdpc3RyeS5hZGRNdWx0aXBsZShjb2xvcik7DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoY29sb3JCbGVuZCk7DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoZGF0YVVyaShlbnZpcm9ubWVudCkpOw0KICAgICAgICBmdW5jdGlvblJlZ2lzdHJ5LmFkZE11bHRpcGxlKGxpc3QpOw0KICAgICAgICBmdW5jdGlvblJlZ2lzdHJ5LmFkZE11bHRpcGxlKG1hdGhGdW5jdGlvbnMpOw0KICAgICAgICBmdW5jdGlvblJlZ2lzdHJ5LmFkZE11bHRpcGxlKG51bWJlcik7DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoc3RyaW5nKTsNCiAgICAgICAgZnVuY3Rpb25SZWdpc3RyeS5hZGRNdWx0aXBsZShzdmcoKSk7DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUodHlwZXMpOw0KICAgICAgICByZXR1cm4gZnVuY3Rpb25zOw0KICAgIH0pOwoKICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVRyZWUgKHJvb3QsIG9wdGlvbnMpIHsNCiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307DQogICAgICAgIHZhciBldmFsZFJvb3Q7DQogICAgICAgIHZhciB2YXJpYWJsZXMgPSBvcHRpb25zLnZhcmlhYmxlczsNCiAgICAgICAgdmFyIGV2YWxFbnYgPSBuZXcgY29udGV4dHMuRXZhbChvcHRpb25zKTsNCiAgICAgICAgLy8NCiAgICAgICAgLy8gQWxsb3dzIHNldHRpbmcgdmFyaWFibGVzIHdpdGggYSBoYXNoLCBzbzoNCiAgICAgICAgLy8NCiAgICAgICAgLy8gICBgeyBjb2xvcjogbmV3IHRyZWUuQ29sb3IoJyNmMDEnKSB9YCB3aWxsIGJlY29tZToNCiAgICAgICAgLy8NCiAgICAgICAgLy8gICBuZXcgdHJlZS5EZWNsYXJhdGlvbignQGNvbG9yJywNCiAgICAgICAgLy8gICAgIG5ldyB0cmVlLlZhbHVlKFsNCiAgICAgICAgLy8gICAgICAgbmV3IHRyZWUuRXhwcmVzc2lvbihbDQogICAgICAgIC8vICAgICAgICAgbmV3IHRyZWUuQ29sb3IoJyNmMDEnKQ0KICAgICAgICAvLyAgICAgICBdKQ0KICAgICAgICAvLyAgICAgXSkNCiAgICAgICAgLy8gICApDQogICAgICAgIC8vDQogICAgICAgIGlmICh0eXBlb2YgdmFyaWFibGVzID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YXJpYWJsZXMpKSB7DQogICAgICAgICAgICB2YXJpYWJsZXMgPSBPYmplY3Qua2V5cyh2YXJpYWJsZXMpLm1hcChmdW5jdGlvbiAoaykgew0KICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhcmlhYmxlc1trXTsNCiAgICAgICAgICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIHRyZWUuVmFsdWUpKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgdHJlZS5FeHByZXNzaW9uKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgdHJlZS5FeHByZXNzaW9uKFt2YWx1ZV0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IHRyZWUuVmFsdWUoW3ZhbHVlXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdHJlZS5EZWNsYXJhdGlvbigiQCIgKyBrLCB2YWx1ZSwgZmFsc2UsIG51bGwsIDApOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBldmFsRW52LmZyYW1lcyA9IFtuZXcgdHJlZS5SdWxlc2V0KG51bGwsIHZhcmlhYmxlcyldOw0KICAgICAgICB9DQogICAgICAgIHZhciB2aXNpdG9ycyQxID0gWw0KICAgICAgICAgICAgbmV3IHZpc2l0b3JzLkpvaW5TZWxlY3RvclZpc2l0b3IoKSwNCiAgICAgICAgICAgIG5ldyB2aXNpdG9ycy5NYXJrVmlzaWJsZVNlbGVjdG9yc1Zpc2l0b3IodHJ1ZSksDQogICAgICAgICAgICBuZXcgdmlzaXRvcnMuRXh0ZW5kVmlzaXRvcigpLA0KICAgICAgICAgICAgbmV3IHZpc2l0b3JzLlRvQ1NTVmlzaXRvcih7IGNvbXByZXNzOiBCb29sZWFuKG9wdGlvbnMuY29tcHJlc3MpIH0pDQogICAgICAgIF07DQogICAgICAgIHZhciBwcmVFdmFsVmlzaXRvcnMgPSBbXTsNCiAgICAgICAgdmFyIHY7DQogICAgICAgIHZhciB2aXNpdG9ySXRlcmF0b3I7DQogICAgICAgIC8qKg0KICAgICAgICAgKiBmaXJzdCgpIC8gZ2V0KCkgYWxsb3dzIHZpc2l0b3JzIHRvIGJlIGFkZGVkIHdoaWxlIHZpc2l0aW5nDQogICAgICAgICAqDQogICAgICAgICAqIEB0b2RvIEFkZCBzY29waW5nIGZvciB2aXNpdG9ycyBqdXN0IGxpa2UgZnVuY3Rpb25zIGZvciBAcGx1Z2luOyByaWdodCBub3cgdGhleSdyZSBnbG9iYWwNCiAgICAgICAgICovDQogICAgICAgIGlmIChvcHRpb25zLnBsdWdpbk1hbmFnZXIpIHsNCiAgICAgICAgICAgIHZpc2l0b3JJdGVyYXRvciA9IG9wdGlvbnMucGx1Z2luTWFuYWdlci52aXNpdG9yKCk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI7IGkrKykgew0KICAgICAgICAgICAgICAgIHZpc2l0b3JJdGVyYXRvci5maXJzdCgpOw0KICAgICAgICAgICAgICAgIHdoaWxlICgodiA9IHZpc2l0b3JJdGVyYXRvci5nZXQoKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHYuaXNQcmVFdmFsVmlzaXRvcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgcHJlRXZhbFZpc2l0b3JzLmluZGV4T2YodikgPT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlRXZhbFZpc2l0b3JzLnB1c2godik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5ydW4ocm9vdCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCB2aXNpdG9ycyQxLmluZGV4T2YodikgPT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuaXNQcmVWaXNpdG9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0b3JzJDEudW5zaGlmdCh2KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0b3JzJDEucHVzaCh2KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZXZhbGRSb290ID0gcm9vdC5ldmFsKGV2YWxFbnYpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpc2l0b3JzJDEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHZpc2l0b3JzJDFbaV0ucnVuKGV2YWxkUm9vdCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gUnVuIGFueSByZW1haW5pbmcgdmlzaXRvcnMgYWRkZWQgYWZ0ZXIgZXZhbCBwYXNzDQogICAgICAgIGlmIChvcHRpb25zLnBsdWdpbk1hbmFnZXIpIHsNCiAgICAgICAgICAgIHZpc2l0b3JJdGVyYXRvci5maXJzdCgpOw0KICAgICAgICAgICAgd2hpbGUgKCh2ID0gdmlzaXRvckl0ZXJhdG9yLmdldCgpKSkgew0KICAgICAgICAgICAgICAgIGlmICh2aXNpdG9ycyQxLmluZGV4T2YodikgPT09IC0xICYmIHByZUV2YWxWaXNpdG9ycy5pbmRleE9mKHYpID09PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICB2LnJ1bihldmFsZFJvb3QpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZXZhbGRSb290Ow0KICAgIH0KCiAgICAvKioNCiAgICAgKiBQbHVnaW4gTWFuYWdlcg0KICAgICAqLw0KICAgIHZhciBQbHVnaW5NYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBQbHVnaW5NYW5hZ2VyKGxlc3MpIHsNCiAgICAgICAgICAgIHRoaXMubGVzcyA9IGxlc3M7DQogICAgICAgICAgICB0aGlzLnZpc2l0b3JzID0gW107DQogICAgICAgICAgICB0aGlzLnByZVByb2Nlc3NvcnMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMucG9zdFByb2Nlc3NvcnMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuaW5zdGFsbGVkUGx1Z2lucyA9IFtdOw0KICAgICAgICAgICAgdGhpcy5maWxlTWFuYWdlcnMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IgPSAtMTsNCiAgICAgICAgICAgIHRoaXMucGx1Z2luQ2FjaGUgPSB7fTsNCiAgICAgICAgICAgIHRoaXMuTG9hZGVyID0gbmV3IGxlc3MuUGx1Z2luTG9hZGVyKGxlc3MpOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBBZGRzIGFsbCB0aGUgcGx1Z2lucyBpbiB0aGUgYXJyYXkNCiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gcGx1Z2lucw0KICAgICAgICAgKi8NCiAgICAgICAgUGx1Z2luTWFuYWdlci5wcm90b3R5cGUuYWRkUGx1Z2lucyA9IGZ1bmN0aW9uIChwbHVnaW5zKSB7DQogICAgICAgICAgICBpZiAocGx1Z2lucykgew0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBsdWdpbihwbHVnaW5zW2ldKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIC8qKg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0gcGx1Z2luDQogICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZQ0KICAgICAgICAgKi8NCiAgICAgICAgUGx1Z2luTWFuYWdlci5wcm90b3R5cGUuYWRkUGx1Z2luID0gZnVuY3Rpb24gKHBsdWdpbiwgZmlsZW5hbWUsIGZ1bmN0aW9uUmVnaXN0cnkpIHsNCiAgICAgICAgICAgIHRoaXMuaW5zdGFsbGVkUGx1Z2lucy5wdXNoKHBsdWdpbik7DQogICAgICAgICAgICBpZiAoZmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbkNhY2hlW2ZpbGVuYW1lXSA9IHBsdWdpbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChwbHVnaW4uaW5zdGFsbCkgew0KICAgICAgICAgICAgICAgIHBsdWdpbi5pbnN0YWxsKHRoaXMubGVzcywgdGhpcywgZnVuY3Rpb25SZWdpc3RyeSB8fCB0aGlzLmxlc3MuZnVuY3Rpb25zLmZ1bmN0aW9uUmVnaXN0cnkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICAvKioNCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFtIGZpbGVuYW1lDQogICAgICAgICAqLw0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZmlsZW5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsdWdpbkNhY2hlW2ZpbGVuYW1lXTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEFkZHMgYSB2aXNpdG9yLiBUaGUgdmlzaXRvciBvYmplY3QgaGFzIG9wdGlvbnMgb24gaXRzZWxmIHRvIGRldGVybWluZQ0KICAgICAgICAgKiB3aGVuIGl0IHNob3VsZCBydW4uDQogICAgICAgICAqIEBwYXJhbSB2aXNpdG9yDQogICAgICAgICAqLw0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS5hZGRWaXNpdG9yID0gZnVuY3Rpb24gKHZpc2l0b3IpIHsNCiAgICAgICAgICAgIHRoaXMudmlzaXRvcnMucHVzaCh2aXNpdG9yKTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEFkZHMgYSBwcmUgcHJvY2Vzc29yIG9iamVjdA0KICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gcHJlUHJvY2Vzc29yDQogICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmlvcml0eSAtIGd1aWRlbGluZXMgMSA9IGJlZm9yZSBpbXBvcnQsIDEwMDAgPSBpbXBvcnQsIDIwMDAgPSBhZnRlciBpbXBvcnQNCiAgICAgICAgICovDQogICAgICAgIFBsdWdpbk1hbmFnZXIucHJvdG90eXBlLmFkZFByZVByb2Nlc3NvciA9IGZ1bmN0aW9uIChwcmVQcm9jZXNzb3IsIHByaW9yaXR5KSB7DQogICAgICAgICAgICB2YXIgaW5kZXhUb0luc2VydEF0Ow0KICAgICAgICAgICAgZm9yIChpbmRleFRvSW5zZXJ0QXQgPSAwOyBpbmRleFRvSW5zZXJ0QXQgPCB0aGlzLnByZVByb2Nlc3NvcnMubGVuZ3RoOyBpbmRleFRvSW5zZXJ0QXQrKykgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZVByb2Nlc3NvcnNbaW5kZXhUb0luc2VydEF0XS5wcmlvcml0eSA+PSBwcmlvcml0eSkgew0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnByZVByb2Nlc3NvcnMuc3BsaWNlKGluZGV4VG9JbnNlcnRBdCwgMCwgeyBwcmVQcm9jZXNzb3I6IHByZVByb2Nlc3NvciwgcHJpb3JpdHk6IHByaW9yaXR5IH0pOw0KICAgICAgICB9Ow0KICAgICAgICAvKioNCiAgICAgICAgICogQWRkcyBhIHBvc3QgcHJvY2Vzc29yIG9iamVjdA0KICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gcG9zdFByb2Nlc3Nvcg0KICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJpb3JpdHkgLSBndWlkZWxpbmVzIDEgPSBiZWZvcmUgY29tcHJlc3Npb24sIDEwMDAgPSBjb21wcmVzc2lvbiwgMjAwMCA9IGFmdGVyIGNvbXByZXNzaW9uDQogICAgICAgICAqLw0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS5hZGRQb3N0UHJvY2Vzc29yID0gZnVuY3Rpb24gKHBvc3RQcm9jZXNzb3IsIHByaW9yaXR5KSB7DQogICAgICAgICAgICB2YXIgaW5kZXhUb0luc2VydEF0Ow0KICAgICAgICAgICAgZm9yIChpbmRleFRvSW5zZXJ0QXQgPSAwOyBpbmRleFRvSW5zZXJ0QXQgPCB0aGlzLnBvc3RQcm9jZXNzb3JzLmxlbmd0aDsgaW5kZXhUb0luc2VydEF0KyspIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3N0UHJvY2Vzc29yc1tpbmRleFRvSW5zZXJ0QXRdLnByaW9yaXR5ID49IHByaW9yaXR5KSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucG9zdFByb2Nlc3NvcnMuc3BsaWNlKGluZGV4VG9JbnNlcnRBdCwgMCwgeyBwb3N0UHJvY2Vzc29yOiBwb3N0UHJvY2Vzc29yLCBwcmlvcml0eTogcHJpb3JpdHkgfSk7DQogICAgICAgIH07DQogICAgICAgIC8qKg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0gbWFuYWdlcg0KICAgICAgICAgKi8NCiAgICAgICAgUGx1Z2luTWFuYWdlci5wcm90b3R5cGUuYWRkRmlsZU1hbmFnZXIgPSBmdW5jdGlvbiAobWFuYWdlcikgew0KICAgICAgICAgICAgdGhpcy5maWxlTWFuYWdlcnMucHVzaChtYW5hZ2VyKTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0NCiAgICAgICAgICogQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgIFBsdWdpbk1hbmFnZXIucHJvdG90eXBlLmdldFByZVByb2Nlc3NvcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgcHJlUHJvY2Vzc29ycyA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByZVByb2Nlc3NvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBwcmVQcm9jZXNzb3JzLnB1c2godGhpcy5wcmVQcm9jZXNzb3JzW2ldLnByZVByb2Nlc3Nvcik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcHJlUHJvY2Vzc29yczsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0NCiAgICAgICAgICogQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgIFBsdWdpbk1hbmFnZXIucHJvdG90eXBlLmdldFBvc3RQcm9jZXNzb3JzID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIHBvc3RQcm9jZXNzb3JzID0gW107DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9zdFByb2Nlc3NvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBwb3N0UHJvY2Vzc29ycy5wdXNoKHRoaXMucG9zdFByb2Nlc3NvcnNbaV0ucG9zdFByb2Nlc3Nvcik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcG9zdFByb2Nlc3NvcnM7DQogICAgICAgIH07DQogICAgICAgIC8qKg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9DQogICAgICAgICAqIEBwcml2YXRlDQogICAgICAgICAqLw0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS5nZXRWaXNpdG9ycyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2l0b3JzOw0KICAgICAgICB9Ow0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS52aXNpdG9yID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBmaXJzdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBzZWxmLml0ZXJhdG9yID0gLTE7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnZpc2l0b3JzW3NlbGYuaXRlcmF0b3JdOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYuaXRlcmF0b3IgKz0gMTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYudmlzaXRvcnNbc2VsZi5pdGVyYXRvcl07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0NCiAgICAgICAgICogQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgIFBsdWdpbk1hbmFnZXIucHJvdG90eXBlLmdldEZpbGVNYW5hZ2VycyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVNYW5hZ2VyczsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIFBsdWdpbk1hbmFnZXI7DQogICAgfSgpKTsNCiAgICB2YXIgcG07DQogICAgdmFyIFBsdWdpbk1hbmFnZXJGYWN0b3J5ID0gZnVuY3Rpb24gKGxlc3MsIG5ld0ZhY3RvcnkpIHsNCiAgICAgICAgaWYgKG5ld0ZhY3RvcnkgfHwgIXBtKSB7DQogICAgICAgICAgICBwbSA9IG5ldyBQbHVnaW5NYW5hZ2VyKGxlc3MpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBwbTsNCiAgICB9OwoKICAgIGZ1bmN0aW9uIFNvdXJjZU1hcE91dHB1dCAoZW52aXJvbm1lbnQpIHsNCiAgICAgICAgdmFyIFNvdXJjZU1hcE91dHB1dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGZ1bmN0aW9uIFNvdXJjZU1hcE91dHB1dChvcHRpb25zKSB7DQogICAgICAgICAgICAgICAgdGhpcy5fY3NzID0gW107DQogICAgICAgICAgICAgICAgdGhpcy5fcm9vdE5vZGUgPSBvcHRpb25zLnJvb3ROb2RlOw0KICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRzTWFwID0gb3B0aW9ucy5jb250ZW50c01hcDsNCiAgICAgICAgICAgICAgICB0aGlzLl9jb250ZW50c0lnbm9yZWRDaGFyc01hcCA9IG9wdGlvbnMuY29udGVudHNJZ25vcmVkQ2hhcnNNYXA7DQogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc291cmNlTWFwRmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc291cmNlTWFwRmlsZW5hbWUgPSBvcHRpb25zLnNvdXJjZU1hcEZpbGVuYW1lLnJlcGxhY2UoL1xcL2csICcvJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dEZpbGVuYW1lID0gb3B0aW9ucy5vdXRwdXRGaWxlbmFtZTsNCiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZU1hcFVSTCA9IG9wdGlvbnMuc291cmNlTWFwVVJMOw0KICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcEJhc2VwYXRoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZU1hcEJhc2VwYXRoID0gb3B0aW9ucy5zb3VyY2VNYXBCYXNlcGF0aC5yZXBsYWNlKC9cXC9nLCAnLycpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zb3VyY2VNYXBSb290cGF0aCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VNYXBSb290cGF0aCA9IG9wdGlvbnMuc291cmNlTWFwUm9vdHBhdGgucmVwbGFjZSgvXFwvZywgJy8nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NvdXJjZU1hcFJvb3RwYXRoLmNoYXJBdCh0aGlzLl9zb3VyY2VNYXBSb290cGF0aC5sZW5ndGggLSAxKSAhPT0gJy8nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VNYXBSb290cGF0aCArPSAnLyc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZU1hcFJvb3RwYXRoID0gJyc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dFNvdXJjZUZpbGVzID0gb3B0aW9ucy5vdXRwdXRTb3VyY2VGaWxlczsNCiAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VNYXBHZW5lcmF0b3JDb25zdHJ1Y3RvciA9IGVudmlyb25tZW50LmdldFNvdXJjZU1hcEdlbmVyYXRvcigpOw0KICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVOdW1iZXIgPSAwOw0KICAgICAgICAgICAgICAgIHRoaXMuX2NvbHVtbiA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBTb3VyY2VNYXBPdXRwdXQucHJvdG90eXBlLnJlbW92ZUJhc2VwYXRoID0gZnVuY3Rpb24gKHBhdGgpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc291cmNlTWFwQmFzZXBhdGggJiYgcGF0aC5pbmRleE9mKHRoaXMuX3NvdXJjZU1hcEJhc2VwYXRoKSA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcodGhpcy5fc291cmNlTWFwQmFzZXBhdGgubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGguY2hhckF0KDApID09PSAnXFwnIHx8IHBhdGguY2hhckF0KDApID09PSAnLycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygxKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBPdXRwdXQucHJvdG90eXBlLm5vcm1hbGl6ZUZpbGVuYW1lID0gZnVuY3Rpb24gKGZpbGVuYW1lKSB7DQogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKC9cXC9nLCAnLycpOw0KICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gdGhpcy5yZW1vdmVCYXNlcGF0aChmaWxlbmFtZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLl9zb3VyY2VNYXBSb290cGF0aCB8fCAnJykgKyBmaWxlbmFtZTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBPdXRwdXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChjaHVuaywgZmlsZUluZm8sIGluZGV4LCBtYXBMaW5lcykgew0KICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBhZGRpbmcgZW1wdHkgc3RyaW5ncw0KICAgICAgICAgICAgICAgIGlmICghY2h1bmspIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgbGluZXMsIHNvdXJjZUxpbmVzLCBjb2x1bW5zLCBzb3VyY2VDb2x1bW5zLCBpOw0KICAgICAgICAgICAgICAgIGlmIChmaWxlSW5mbyAmJiBmaWxlSW5mby5maWxlbmFtZSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRTb3VyY2UgPSB0aGlzLl9jb250ZW50c01hcFtmaWxlSW5mby5maWxlbmFtZV07DQogICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB2YXJzL2Jhbm5lciBhZGRlZCB0byB0aGUgdG9wIG9mIHRoZSBmaWxlDQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jb250ZW50c0lnbm9yZWRDaGFyc01hcFtmaWxlSW5mby5maWxlbmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkanVzdCB0aGUgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4IC09IHRoaXMuX2NvbnRlbnRzSWdub3JlZENoYXJzTWFwW2ZpbGVJbmZvLmZpbGVuYW1lXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGp1c3QgdGhlIHNvdXJjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRTb3VyY2UgPSBpbnB1dFNvdXJjZS5zbGljZSh0aGlzLl9jb250ZW50c0lnbm9yZWRDaGFyc01hcFtmaWxlSW5mby5maWxlbmFtZV0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgICAgICAgKiBpZ25vcmUgZW1wdHkgY29udGVudCwgb3IgZmFpbHNhZmUNCiAgICAgICAgICAgICAgICAgICAgICogaWYgY29udGVudHMgbWFwIGlzIGluY29ycmVjdA0KICAgICAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0U291cmNlID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nzcy5wdXNoKGNodW5rKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpbnB1dFNvdXJjZSA9IGlucHV0U291cmNlLnN1YnN0cmluZygwLCBpbmRleCk7DQogICAgICAgICAgICAgICAgICAgIHNvdXJjZUxpbmVzID0gaW5wdXRTb3VyY2Uuc3BsaXQoJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgIHNvdXJjZUNvbHVtbnMgPSBzb3VyY2VMaW5lc1tzb3VyY2VMaW5lcy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbGluZXMgPSBjaHVuay5zcGxpdCgnXG4nKTsNCiAgICAgICAgICAgICAgICBjb2x1bW5zID0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgaWYgKGZpbGVJbmZvICYmIGZpbGVJbmZvLmZpbGVuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghbWFwTGluZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZU1hcEdlbmVyYXRvci5hZGRNYXBwaW5nKHsgZ2VuZXJhdGVkOiB7IGxpbmU6IHRoaXMuX2xpbmVOdW1iZXIgKyAxLCBjb2x1bW46IHRoaXMuX2NvbHVtbiB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsOiB7IGxpbmU6IHNvdXJjZUxpbmVzLmxlbmd0aCwgY29sdW1uOiBzb3VyY2VDb2x1bW5zLmxlbmd0aCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5ub3JtYWxpemVGaWxlbmFtZShmaWxlSW5mby5maWxlbmFtZSkgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VNYXBHZW5lcmF0b3IuYWRkTWFwcGluZyh7IGdlbmVyYXRlZDogeyBsaW5lOiB0aGlzLl9saW5lTnVtYmVyICsgaSArIDEsIGNvbHVtbjogaSA9PT0gMCA/IHRoaXMuX2NvbHVtbiA6IDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWw6IHsgbGluZTogc291cmNlTGluZXMubGVuZ3RoICsgaSwgY29sdW1uOiBpID09PSAwID8gc291cmNlQ29sdW1ucy5sZW5ndGggOiAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5ub3JtYWxpemVGaWxlbmFtZShmaWxlSW5mby5maWxlbmFtZSkgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2x1bW4gKz0gY29sdW1ucy5sZW5ndGg7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lTnVtYmVyICs9IGxpbmVzLmxlbmd0aCAtIDE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbHVtbiA9IGNvbHVtbnMubGVuZ3RoOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLl9jc3MucHVzaChjaHVuayk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgU291cmNlTWFwT3V0cHV0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jc3MubGVuZ3RoID09PSAwOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIFNvdXJjZU1hcE91dHB1dC5wcm90b3R5cGUudG9DU1MgPSBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZU1hcEdlbmVyYXRvciA9IG5ldyB0aGlzLl9zb3VyY2VNYXBHZW5lcmF0b3JDb25zdHJ1Y3Rvcih7IGZpbGU6IHRoaXMuX291dHB1dEZpbGVuYW1lLCBzb3VyY2VSb290OiBudWxsIH0pOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vdXRwdXRTb3VyY2VGaWxlcykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmaWxlbmFtZSBpbiB0aGlzLl9jb250ZW50c01hcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnRzTWFwLmhhc093blByb3BlcnR5KGZpbGVuYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLl9jb250ZW50c01hcFtmaWxlbmFtZV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnRzSWdub3JlZENoYXJzTWFwW2ZpbGVuYW1lXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBzb3VyY2Uuc2xpY2UodGhpcy5fY29udGVudHNJZ25vcmVkQ2hhcnNNYXBbZmlsZW5hbWVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc291cmNlTWFwR2VuZXJhdG9yLnNldFNvdXJjZUNvbnRlbnQodGhpcy5ub3JtYWxpemVGaWxlbmFtZShmaWxlbmFtZSksIHNvdXJjZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5fcm9vdE5vZGUuZ2VuQ1NTKGNvbnRleHQsIHRoaXMpOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jc3MubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTWFwVVJMID0gdm9pZCAwOw0KICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTWFwQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuX3NvdXJjZU1hcEdlbmVyYXRvci50b0pTT04oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvdXJjZU1hcFVSTCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwVVJMID0gdGhpcy5zb3VyY2VNYXBVUkw7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fc291cmNlTWFwRmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcFVSTCA9IHRoaXMuX3NvdXJjZU1hcEZpbGVuYW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlTWFwVVJMID0gc291cmNlTWFwVVJMOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZU1hcCA9IHNvdXJjZU1hcENvbnRlbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jc3Muam9pbignJyk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgcmV0dXJuIFNvdXJjZU1hcE91dHB1dDsNCiAgICAgICAgfSgpKTsNCiAgICAgICAgcmV0dXJuIFNvdXJjZU1hcE91dHB1dDsNCiAgICB9CgogICAgZnVuY3Rpb24gU291cmNlTWFwQnVpbGRlciAoU291cmNlTWFwT3V0cHV0LCBlbnZpcm9ubWVudCkgew0KICAgICAgICB2YXIgU291cmNlTWFwQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGZ1bmN0aW9uIFNvdXJjZU1hcEJ1aWxkZXIob3B0aW9ucykgew0KICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS50b0NTUyA9IGZ1bmN0aW9uIChyb290Tm9kZSwgb3B0aW9ucywgaW1wb3J0cykgew0KICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNYXBPdXRwdXQgPSBuZXcgU291cmNlTWFwT3V0cHV0KHsNCiAgICAgICAgICAgICAgICAgICAgY29udGVudHNJZ25vcmVkQ2hhcnNNYXA6IGltcG9ydHMuY29udGVudHNJZ25vcmVkQ2hhcnMsDQogICAgICAgICAgICAgICAgICAgIHJvb3ROb2RlOiByb290Tm9kZSwNCiAgICAgICAgICAgICAgICAgICAgY29udGVudHNNYXA6IGltcG9ydHMuY29udGVudHMsDQogICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcEZpbGVuYW1lOiB0aGlzLm9wdGlvbnMuc291cmNlTWFwRmlsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcFVSTDogdGhpcy5vcHRpb25zLnNvdXJjZU1hcFVSTCwNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RmlsZW5hbWU6IHRoaXMub3B0aW9ucy5zb3VyY2VNYXBPdXRwdXRGaWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwQmFzZXBhdGg6IHRoaXMub3B0aW9ucy5zb3VyY2VNYXBCYXNlcGF0aCwNCiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwUm9vdHBhdGg6IHRoaXMub3B0aW9ucy5zb3VyY2VNYXBSb290cGF0aCwNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0U291cmNlRmlsZXM6IHRoaXMub3B0aW9ucy5vdXRwdXRTb3VyY2VGaWxlcywNCiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwR2VuZXJhdG9yOiB0aGlzLm9wdGlvbnMuc291cmNlTWFwR2VuZXJhdG9yLA0KICAgICAgICAgICAgICAgICAgICBzb3VyY2VNYXBGaWxlSW5saW5lOiB0aGlzLm9wdGlvbnMuc291cmNlTWFwRmlsZUlubGluZSwNCiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZVNvdXJjZW1hcEFubm90YXRpb246IHRoaXMub3B0aW9ucy5kaXNhYmxlU291cmNlbWFwQW5ub3RhdGlvbg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHZhciBjc3MgPSBzb3VyY2VNYXBPdXRwdXQudG9DU1Mob3B0aW9ucyk7DQogICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VNYXAgPSBzb3VyY2VNYXBPdXRwdXQuc291cmNlTWFwOw0KICAgICAgICAgICAgICAgIHRoaXMuc291cmNlTWFwVVJMID0gc291cmNlTWFwT3V0cHV0LnNvdXJjZU1hcFVSTDsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNvdXJjZU1hcElucHV0RmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VNYXBJbnB1dEZpbGVuYW1lID0gc291cmNlTWFwT3V0cHV0Lm5vcm1hbGl6ZUZpbGVuYW1lKHRoaXMub3B0aW9ucy5zb3VyY2VNYXBJbnB1dEZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zb3VyY2VNYXBCYXNlcGF0aCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc291cmNlTWFwVVJMICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VNYXBVUkwgPSBzb3VyY2VNYXBPdXRwdXQucmVtb3ZlQmFzZXBhdGgodGhpcy5zb3VyY2VNYXBVUkwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gY3NzICsgdGhpcy5nZXRDU1NBcHBlbmRhZ2UoKTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS5nZXRDU1NBcHBlbmRhZ2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIHNvdXJjZU1hcFVSTCA9IHRoaXMuc291cmNlTWFwVVJMOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc291cmNlTWFwRmlsZUlubGluZSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3VyY2VNYXAgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcFVSTCA9ICJkYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LCIgKyBlbnZpcm9ubWVudC5lbmNvZGVCYXNlNjQodGhpcy5zb3VyY2VNYXApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVTb3VyY2VtYXBBbm5vdGF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHNvdXJjZU1hcFVSTCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIi8qIyBzb3VyY2VNYXBwaW5nVVJMPSIgKyBzb3VyY2VNYXBVUkwgKyAiICovIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIFNvdXJjZU1hcEJ1aWxkZXIucHJvdG90eXBlLmdldEV4dGVybmFsU291cmNlTWFwID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZU1hcDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS5zZXRFeHRlcm5hbFNvdXJjZU1hcCA9IGZ1bmN0aW9uIChzb3VyY2VNYXApIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZU1hcCA9IHNvdXJjZU1hcDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS5pc0lubGluZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZU1hcEZpbGVJbmxpbmU7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgU291cmNlTWFwQnVpbGRlci5wcm90b3R5cGUuZ2V0U291cmNlTWFwVVJMID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZU1hcFVSTDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS5nZXRPdXRwdXRGaWxlbmFtZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZU1hcE91dHB1dEZpbGVuYW1lOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIFNvdXJjZU1hcEJ1aWxkZXIucHJvdG90eXBlLmdldElucHV0RmlsZW5hbWUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlTWFwSW5wdXRGaWxlbmFtZTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICByZXR1cm4gU291cmNlTWFwQnVpbGRlcjsNCiAgICAgICAgfSgpKTsNCiAgICAgICAgcmV0dXJuIFNvdXJjZU1hcEJ1aWxkZXI7DQogICAgfQoKICAgIGZ1bmN0aW9uIFBhcnNlVHJlZSAoU291cmNlTWFwQnVpbGRlcikgew0KICAgICAgICB2YXIgUGFyc2VUcmVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgZnVuY3Rpb24gUGFyc2VUcmVlKHJvb3QsIGltcG9ydHMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJvb3QgPSByb290Ow0KICAgICAgICAgICAgICAgIHRoaXMuaW1wb3J0cyA9IGltcG9ydHM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBQYXJzZVRyZWUucHJvdG90eXBlLnRvQ1NTID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsNCiAgICAgICAgICAgICAgICB2YXIgZXZhbGRSb290Ow0KICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTsNCiAgICAgICAgICAgICAgICB2YXIgc291cmNlTWFwQnVpbGRlcjsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBldmFsZFJvb3QgPSB0cmFuc2Zvcm1UcmVlKHRoaXMucm9vdCwgb3B0aW9ucyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBMZXNzRXJyb3IoZSwgdGhpcy5pbXBvcnRzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXByZXNzID0gQm9vbGVhbihvcHRpb25zLmNvbXByZXNzKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXByZXNzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMS53YXJuKCdUaGUgY29tcHJlc3Mgb3B0aW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQuICcgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXZSByZWNvbW1lbmQgeW91IHVzZSBhIGRlZGljYXRlZCBjc3MgbWluaWZpZXIsIGZvciBpbnN0YW5jZSBzZWUgbGVzcy1wbHVnaW4tY2xlYW4tY3NzLicpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhciB0b0NTU09wdGlvbnMgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzczogY29tcHJlc3MsDQogICAgICAgICAgICAgICAgICAgICAgICBkdW1wTGluZU51bWJlcnM6IG9wdGlvbnMuZHVtcExpbmVOdW1iZXJzLA0KICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0VW5pdHM6IEJvb2xlYW4ob3B0aW9ucy5zdHJpY3RVbml0cyksDQogICAgICAgICAgICAgICAgICAgICAgICBudW1QcmVjaXNpb246IDgNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc291cmNlTWFwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VNYXBCdWlsZGVyID0gbmV3IFNvdXJjZU1hcEJ1aWxkZXIob3B0aW9ucy5zb3VyY2VNYXApOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNzcyA9IHNvdXJjZU1hcEJ1aWxkZXIudG9DU1MoZXZhbGRSb290LCB0b0NTU09wdGlvbnMsIHRoaXMuaW1wb3J0cyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuY3NzID0gZXZhbGRSb290LnRvQ1NTKHRvQ1NTT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IExlc3NFcnJvcihlLCB0aGlzLmltcG9ydHMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wbHVnaW5NYW5hZ2VyKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBwb3N0UHJvY2Vzc29ycyA9IG9wdGlvbnMucGx1Z2luTWFuYWdlci5nZXRQb3N0UHJvY2Vzc29ycygpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc3RQcm9jZXNzb3JzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuY3NzID0gcG9zdFByb2Nlc3NvcnNbaV0ucHJvY2VzcyhyZXN1bHQuY3NzLCB7IHNvdXJjZU1hcDogc291cmNlTWFwQnVpbGRlciwgb3B0aW9uczogb3B0aW9ucywgaW1wb3J0czogdGhpcy5pbXBvcnRzIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcCkgew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQubWFwID0gc291cmNlTWFwQnVpbGRlci5nZXRFeHRlcm5hbFNvdXJjZU1hcCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXN1bHQuaW1wb3J0cyA9IFtdOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGZpbGUgaW4gdGhpcy5pbXBvcnRzLmZpbGVzKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltcG9ydHMuZmlsZXMuaGFzT3duUHJvcGVydHkoZmlsZSkgJiYgZmlsZSAhPT0gdGhpcy5pbXBvcnRzLnJvb3RGaWxlbmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltcG9ydHMucHVzaChmaWxlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHJldHVybiBQYXJzZVRyZWU7DQogICAgICAgIH0oKSk7DQogICAgICAgIHJldHVybiBQYXJzZVRyZWU7DQogICAgfQoKICAgIGZ1bmN0aW9uIEltcG9ydE1hbmFnZXIgKGVudmlyb25tZW50KSB7DQogICAgICAgIC8vIEZpbGVJbmZvID0gew0KICAgICAgICAvLyAgJ3Jld3JpdGVVcmxzJyAtIG9wdGlvbiAtIHdoZXRoZXIgdG8gYWRqdXN0IFVSTCdzIHRvIGJlIHJlbGF0aXZlDQogICAgICAgIC8vICAnZmlsZW5hbWUnIC0gZnVsbCByZXNvbHZlZCBmaWxlbmFtZSBvZiBjdXJyZW50IGZpbGUNCiAgICAgICAgLy8gICdyb290cGF0aCcgLSBwYXRoIHRvIGFwcGVuZCB0byBub3JtYWwgVVJMcyBmb3IgdGhpcyBub2RlDQogICAgICAgIC8vICAnY3VycmVudERpcmVjdG9yeScgLSBwYXRoIHRvIHRoZSBjdXJyZW50IGZpbGUsIGFic29sdXRlDQogICAgICAgIC8vICAncm9vdEZpbGVuYW1lJyAtIGZpbGVuYW1lIG9mIHRoZSBiYXNlIGZpbGUNCiAgICAgICAgLy8gICdlbnRyeVBhdGgnIC0gYWJzb2x1dGUgcGF0aCB0byB0aGUgZW50cnkgZmlsZQ0KICAgICAgICAvLyAgJ3JlZmVyZW5jZScgLSB3aGV0aGVyIHRoZSBmaWxlIHNob3VsZCBub3QgYmUgb3V0cHV0IGFuZCBvbmx5IG91dHB1dCBwYXJ0cyB0aGF0IGFyZSByZWZlcmVuY2VkDQogICAgICAgIHZhciBJbXBvcnRNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgZnVuY3Rpb24gSW1wb3J0TWFuYWdlcihsZXNzLCBjb250ZXh0LCByb290RmlsZUluZm8pIHsNCiAgICAgICAgICAgICAgICB0aGlzLmxlc3MgPSBsZXNzOw0KICAgICAgICAgICAgICAgIHRoaXMucm9vdEZpbGVuYW1lID0gcm9vdEZpbGVJbmZvLmZpbGVuYW1lOw0KICAgICAgICAgICAgICAgIHRoaXMucGF0aHMgPSBjb250ZXh0LnBhdGhzIHx8IFtdOyAvLyBTZWFyY2ggcGF0aHMsIHdoZW4gaW1wb3J0aW5nDQogICAgICAgICAgICAgICAgdGhpcy5jb250ZW50cyA9IHt9OyAvLyBtYXAgLSBmaWxlbmFtZSB0byBjb250ZW50cyBvZiBhbGwgdGhlIGZpbGVzDQogICAgICAgICAgICAgICAgdGhpcy5jb250ZW50c0lnbm9yZWRDaGFycyA9IHt9OyAvLyBtYXAgLSBmaWxlbmFtZSB0byBsaW5lcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGVhY2ggZmlsZSB0byBpZ25vcmUNCiAgICAgICAgICAgICAgICB0aGlzLm1pbWUgPSBjb250ZXh0Lm1pbWU7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7DQogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsNCiAgICAgICAgICAgICAgICAvLyBEZXByZWNhdGVkPyBVbnVzZWQgb3V0c2lkZSBvZiBoZXJlLCBjb3VsZCBiZSB1c2VmdWwuDQogICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdOyAvLyBGaWxlcyB3aGljaCBoYXZlbid0IGJlZW4gaW1wb3J0ZWQgeWV0DQogICAgICAgICAgICAgICAgdGhpcy5maWxlcyA9IHt9OyAvLyBIb2xkcyB0aGUgaW1wb3J0ZWQgcGFyc2UgdHJlZXMuDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIEFkZCBhbiBpbXBvcnQgdG8gYmUgaW1wb3J0ZWQNCiAgICAgICAgICAgICAqIEBwYXJhbSBwYXRoIC0gdGhlIHJhdyBwYXRoDQogICAgICAgICAgICAgKiBAcGFyYW0gdHJ5QXBwZW5kRXh0ZW5zaW9uIC0gd2hldGhlciB0byB0cnkgYXBwZW5kaW5nIGEgZmlsZSBleHRlbnNpb24gKC5sZXNzIG9yIC5qcyBpZiB0aGUgcGF0aCBoYXMgbm8gZXh0ZW5zaW9uKQ0KICAgICAgICAgICAgICogQHBhcmFtIGN1cnJlbnRGaWxlSW5mbyAtIHRoZSBjdXJyZW50IGZpbGUgaW5mbyAodXNlZCBmb3IgaW5zdGFuY2UgdG8gd29yayBvdXQgcmVsYXRpdmUgcGF0aHMpDQogICAgICAgICAgICAgKiBAcGFyYW0gaW1wb3J0T3B0aW9ucyAtIGltcG9ydCBvcHRpb25zDQogICAgICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBjYWxsYmFjayBmb3Igd2hlbiBpdCBpcyBpbXBvcnRlZA0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBJbXBvcnRNYW5hZ2VyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKHBhdGgsIHRyeUFwcGVuZEV4dGVuc2lvbiwgY3VycmVudEZpbGVJbmZvLCBpbXBvcnRPcHRpb25zLCBjYWxsYmFjaykgew0KICAgICAgICAgICAgICAgIHZhciBpbXBvcnRNYW5hZ2VyID0gdGhpcywgcGx1Z2luTG9hZGVyID0gdGhpcy5jb250ZXh0LnBsdWdpbk1hbmFnZXIuTG9hZGVyOw0KICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaChwYXRoKTsNCiAgICAgICAgICAgICAgICB2YXIgZmlsZVBhcnNlZEZ1bmMgPSBmdW5jdGlvbiAoZSwgcm9vdCwgZnVsbFBhdGgpIHsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0TWFuYWdlci5xdWV1ZS5zcGxpY2UoaW1wb3J0TWFuYWdlci5xdWV1ZS5pbmRleE9mKHBhdGgpLCAxKTsgLy8gUmVtb3ZlIHRoZSBwYXRoIGZyb20gdGhlIHF1ZXVlDQogICAgICAgICAgICAgICAgICAgIHZhciBpbXBvcnRlZEVxdWFsc1Jvb3QgPSBmdWxsUGF0aCA9PT0gaW1wb3J0TWFuYWdlci5yb290RmlsZW5hbWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRPcHRpb25zLm9wdGlvbmFsICYmIGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHsgcnVsZXM6IFtdIH0sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlciQxLmluZm8oIlRoZSBmaWxlICIgKyBmdWxsUGF0aCArICIgd2FzIHNraXBwZWQgYmVjYXVzZSBpdCB3YXMgbm90IGZvdW5kIGFuZCB0aGUgaW1wb3J0IHdhcyBtYXJrZWQgb3B0aW9uYWwuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmxpbmUgaW1wb3J0cyBhcmVuJ3QgY2FjaGVkIGhlcmUuDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBzdGFydCB0byBjYWNoZSB0aGVtLCBwbGVhc2UgbWFrZSBzdXJlIHRoZXkgd29uJ3QgY29uZmxpY3Qgd2l0aCBub24taW5saW5lIGltcG9ydHMgb2YgdGhlDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBzYW1lIG5hbWUgYXMgdGhleSB1c2VkIHRvIGRvIGJlZm9yZSB0aGlzIGNvbW1lbnQgYW5kIHRoZSBjb25kaXRpb24gYmVsb3cgaGF2ZSBiZWVuIGFkZGVkLg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbXBvcnRNYW5hZ2VyLmZpbGVzW2Z1bGxQYXRoXSAmJiAhaW1wb3J0T3B0aW9ucy5pbmxpbmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRNYW5hZ2VyLmZpbGVzW2Z1bGxQYXRoXSA9IHsgcm9vdDogcm9vdCwgb3B0aW9uczogaW1wb3J0T3B0aW9ucyB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgIWltcG9ydE1hbmFnZXIuZXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRNYW5hZ2VyLmVycm9yID0gZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGUsIHJvb3QsIGltcG9ydGVkRXF1YWxzUm9vdCwgZnVsbFBhdGgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB2YXIgbmV3RmlsZUluZm8gPSB7DQogICAgICAgICAgICAgICAgICAgIHJld3JpdGVVcmxzOiB0aGlzLmNvbnRleHQucmV3cml0ZVVybHMsDQogICAgICAgICAgICAgICAgICAgIGVudHJ5UGF0aDogY3VycmVudEZpbGVJbmZvLmVudHJ5UGF0aCwNCiAgICAgICAgICAgICAgICAgICAgcm9vdHBhdGg6IGN1cnJlbnRGaWxlSW5mby5yb290cGF0aCwNCiAgICAgICAgICAgICAgICAgICAgcm9vdEZpbGVuYW1lOiBjdXJyZW50RmlsZUluZm8ucm9vdEZpbGVuYW1lDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB2YXIgZmlsZU1hbmFnZXIgPSBlbnZpcm9ubWVudC5nZXRGaWxlTWFuYWdlcihwYXRoLCBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSwgdGhpcy5jb250ZXh0LCBlbnZpcm9ubWVudCk7DQogICAgICAgICAgICAgICAgaWYgKCFmaWxlTWFuYWdlcikgew0KICAgICAgICAgICAgICAgICAgICBmaWxlUGFyc2VkRnVuYyh7IG1lc3NhZ2U6ICJDb3VsZCBub3QgZmluZCBhIGZpbGUtbWFuYWdlciBmb3IgIiArIHBhdGggfSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGxvYWRGaWxlQ2FsbGJhY2sgPSBmdW5jdGlvbiAobG9hZGVkRmlsZSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGx1Z2luOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWRGaWxlbmFtZSA9IGxvYWRlZEZpbGUuZmlsZW5hbWU7DQogICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50cyA9IGxvYWRlZEZpbGUuY29udGVudHMucmVwbGFjZSgvXlx1RkVGRi8sICcnKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyBvbiBhbiB1cGRhdGVkIHJvb3RwYXRoIGlmIHBhdGggb2YgaW1wb3J0ZWQgZmlsZSBpcyByZWxhdGl2ZSBhbmQgZmlsZQ0KICAgICAgICAgICAgICAgICAgICAvLyBpcyBpbiBhIChzdWJ8c3VwKSBkaXJlY3RvcnkNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gRXhhbXBsZXM6DQogICAgICAgICAgICAgICAgICAgIC8vIC0gSWYgcGF0aCBvZiBpbXBvcnRlZCBmaWxlIGlzICdtb2R1bGUvbmF2L25hdi5sZXNzJyBhbmQgcm9vdHBhdGggaXMgJ2xlc3MvJywNCiAgICAgICAgICAgICAgICAgICAgLy8gICB0aGVuIHJvb3RwYXRoIHNob3VsZCBiZWNvbWUgJ2xlc3MvbW9kdWxlL25hdi8nDQogICAgICAgICAgICAgICAgICAgIC8vIC0gSWYgcGF0aCBvZiBpbXBvcnRlZCBmaWxlIGlzICcuLi9taXhpbnMubGVzcycgYW5kIHJvb3RwYXRoIGlzICdsZXNzLycsDQogICAgICAgICAgICAgICAgICAgIC8vICAgdGhlbiByb290cGF0aCBzaG91bGQgYmVjb21lICdsZXNzLy4uLycNCiAgICAgICAgICAgICAgICAgICAgbmV3RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSA9IGZpbGVNYW5hZ2VyLmdldFBhdGgocmVzb2x2ZWRGaWxlbmFtZSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChuZXdGaWxlSW5mby5yZXdyaXRlVXJscykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3RmlsZUluZm8ucm9vdHBhdGggPSBmaWxlTWFuYWdlci5qb2luKChpbXBvcnRNYW5hZ2VyLmNvbnRleHQucm9vdHBhdGggfHwgJycpLCBmaWxlTWFuYWdlci5wYXRoRGlmZihuZXdGaWxlSW5mby5jdXJyZW50RGlyZWN0b3J5LCBuZXdGaWxlSW5mby5lbnRyeVBhdGgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsZU1hbmFnZXIuaXNQYXRoQWJzb2x1dGUobmV3RmlsZUluZm8ucm9vdHBhdGgpICYmIGZpbGVNYW5hZ2VyLmFsd2F5c01ha2VQYXRoc0Fic29sdXRlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdGaWxlSW5mby5yb290cGF0aCA9IGZpbGVNYW5hZ2VyLmpvaW4obmV3RmlsZUluZm8uZW50cnlQYXRoLCBuZXdGaWxlSW5mby5yb290cGF0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgbmV3RmlsZUluZm8uZmlsZW5hbWUgPSByZXNvbHZlZEZpbGVuYW1lOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RW52ID0gbmV3IGNvbnRleHRzLlBhcnNlKGltcG9ydE1hbmFnZXIuY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIG5ld0Vudi5wcm9jZXNzSW1wb3J0cyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBpbXBvcnRNYW5hZ2VyLmNvbnRlbnRzW3Jlc29sdmVkRmlsZW5hbWVdID0gY29udGVudHM7DQogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RmlsZUluZm8ucmVmZXJlbmNlIHx8IGltcG9ydE9wdGlvbnMucmVmZXJlbmNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdGaWxlSW5mby5yZWZlcmVuY2UgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRPcHRpb25zLmlzUGx1Z2luKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4gPSBwbHVnaW5Mb2FkZXIuZXZhbFBsdWdpbihjb250ZW50cywgbmV3RW52LCBpbXBvcnRNYW5hZ2VyLCBpbXBvcnRPcHRpb25zLnBsdWdpbkFyZ3MsIG5ld0ZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW4gaW5zdGFuY2VvZiBMZXNzRXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGFyc2VkRnVuYyhwbHVnaW4sIG51bGwsIHJlc29sdmVkRmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhcnNlZEZ1bmMobnVsbCwgcGx1Z2luLCByZXNvbHZlZEZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbXBvcnRPcHRpb25zLmlubGluZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhcnNlZEZ1bmMobnVsbCwgY29udGVudHMsIHJlc29sdmVkRmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW1wb3J0IChtdWx0aXBsZSkgcGFyc2UgdHJlZXMgYXBwYXJlbnRseSBnZXQgYWx0ZXJlZCBhbmQgY2FuJ3QgYmUgY2FjaGVkLg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IHRoaXMgaXMNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRNYW5hZ2VyLmZpbGVzW3Jlc29sdmVkRmlsZW5hbWVdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgIWltcG9ydE1hbmFnZXIuZmlsZXNbcmVzb2x2ZWRGaWxlbmFtZV0ub3B0aW9ucy5tdWx0aXBsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICFpbXBvcnRPcHRpb25zLm11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhcnNlZEZ1bmMobnVsbCwgaW1wb3J0TWFuYWdlci5maWxlc1tyZXNvbHZlZEZpbGVuYW1lXS5yb290LCByZXNvbHZlZEZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXJzZXIobmV3RW52LCBpbXBvcnRNYW5hZ2VyLCBuZXdGaWxlSW5mbykucGFyc2UoY29udGVudHMsIGZ1bmN0aW9uIChlLCByb290KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXJzZWRGdW5jKGUsIHJvb3QsIHJlc29sdmVkRmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB2YXIgbG9hZGVkRmlsZTsNCiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZTsNCiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNsb25lKHRoaXMuY29udGV4dCk7DQogICAgICAgICAgICAgICAgaWYgKHRyeUFwcGVuZEV4dGVuc2lvbikgew0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmV4dCA9IGltcG9ydE9wdGlvbnMuaXNQbHVnaW4gPyAnLmpzJyA6ICcubGVzcyc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpbXBvcnRPcHRpb25zLmlzUGx1Z2luKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubWltZSA9ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuc3luY0ltcG9ydCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkRmlsZSA9IHBsdWdpbkxvYWRlci5sb2FkUGx1Z2luU3luYyhwYXRoLCBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSwgY29udGV4dCwgZW52aXJvbm1lbnQsIGZpbGVNYW5hZ2VyKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UgPSBwbHVnaW5Mb2FkZXIubG9hZFBsdWdpbihwYXRoLCBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSwgY29udGV4dCwgZW52aXJvbm1lbnQsIGZpbGVNYW5hZ2VyKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuc3luY0ltcG9ydCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkRmlsZSA9IGZpbGVNYW5hZ2VyLmxvYWRGaWxlU3luYyhwYXRoLCBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSwgY29udGV4dCwgZW52aXJvbm1lbnQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IGZpbGVNYW5hZ2VyLmxvYWRGaWxlKHBhdGgsIGN1cnJlbnRGaWxlSW5mby5jdXJyZW50RGlyZWN0b3J5LCBjb250ZXh0LCBlbnZpcm9ubWVudCwgZnVuY3Rpb24gKGVyciwgbG9hZGVkRmlsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhcnNlZEZ1bmMoZXJyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRGaWxlQ2FsbGJhY2sobG9hZGVkRmlsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGxvYWRlZEZpbGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2FkZWRGaWxlLmZpbGVuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGFyc2VkRnVuYyhsb2FkZWRGaWxlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRGaWxlQ2FsbGJhY2sobG9hZGVkRmlsZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvbWlzZSkgew0KICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4obG9hZEZpbGVDYWxsYmFjaywgZmlsZVBhcnNlZEZ1bmMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICByZXR1cm4gSW1wb3J0TWFuYWdlcjsNCiAgICAgICAgfSgpKTsNCiAgICAgICAgcmV0dXJuIEltcG9ydE1hbmFnZXI7DQogICAgfQoKICAgIGZ1bmN0aW9uIFBhcnNlIChlbnZpcm9ubWVudCwgUGFyc2VUcmVlLCBJbXBvcnRNYW5hZ2VyKSB7DQogICAgICAgIHZhciBwYXJzZSA9IGZ1bmN0aW9uIChpbnB1dCwgb3B0aW9ucywgY2FsbGJhY2spIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uczsNCiAgICAgICAgICAgICAgICBvcHRpb25zID0gY29weU9wdGlvbnModGhpcy5vcHRpb25zLCB7fSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBvcHRpb25zID0gY29weU9wdGlvbnModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghY2FsbGJhY2spIHsNCiAgICAgICAgICAgICAgICB2YXIgc2VsZl8xID0gdGhpczsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgICAgICAgICAgICAgICBwYXJzZS5jYWxsKHNlbGZfMSwgaW5wdXQsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIG91dHB1dCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvdXRwdXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZhciBjb250ZXh0XzE7DQogICAgICAgICAgICAgICAgdmFyIHJvb3RGaWxlSW5mbyA9IHZvaWQgMDsNCiAgICAgICAgICAgICAgICB2YXIgcGx1Z2luTWFuYWdlcl8xID0gbmV3IFBsdWdpbk1hbmFnZXJGYWN0b3J5KHRoaXMsICFvcHRpb25zLnJlVXNlUGx1Z2luTWFuYWdlcik7DQogICAgICAgICAgICAgICAgb3B0aW9ucy5wbHVnaW5NYW5hZ2VyID0gcGx1Z2luTWFuYWdlcl8xOw0KICAgICAgICAgICAgICAgIGNvbnRleHRfMSA9IG5ldyBjb250ZXh0cy5QYXJzZShvcHRpb25zKTsNCiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yb290RmlsZUluZm8pIHsNCiAgICAgICAgICAgICAgICAgICAgcm9vdEZpbGVJbmZvID0gb3B0aW9ucy5yb290RmlsZUluZm87DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZW5hbWUgPSBvcHRpb25zLmZpbGVuYW1lIHx8ICdpbnB1dCc7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeVBhdGggPSBmaWxlbmFtZS5yZXBsYWNlKC9bXlwvXFxdKiQvLCAnJyk7DQogICAgICAgICAgICAgICAgICAgIHJvb3RGaWxlSW5mbyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHJld3JpdGVVcmxzOiBjb250ZXh0XzEucmV3cml0ZVVybHMsDQogICAgICAgICAgICAgICAgICAgICAgICByb290cGF0aDogY29udGV4dF8xLnJvb3RwYXRoIHx8ICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERpcmVjdG9yeTogZW50cnlQYXRoLA0KICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlQYXRoOiBlbnRyeVBhdGgsDQogICAgICAgICAgICAgICAgICAgICAgICByb290RmlsZW5hbWU6IGZpbGVuYW1lDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIC8vIGFkZCBpbiBhIG1pc3NpbmcgdHJhaWxpbmcgc2xhc2gNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RGaWxlSW5mby5yb290cGF0aCAmJiByb290RmlsZUluZm8ucm9vdHBhdGguc2xpY2UoLTEpICE9PSAnLycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RGaWxlSW5mby5yb290cGF0aCArPSAnLyc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGltcG9ydHNfMSA9IG5ldyBJbXBvcnRNYW5hZ2VyKHRoaXMsIGNvbnRleHRfMSwgcm9vdEZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICB0aGlzLmltcG9ydE1hbmFnZXIgPSBpbXBvcnRzXzE7DQogICAgICAgICAgICAgICAgLy8gVE9ETzogYWxsb3cgdGhlIHBsdWdpbnMgdG8gYmUganVzdCBhIGxpc3Qgb2YgcGF0aHMgb3IgbmFtZXMNCiAgICAgICAgICAgICAgICAvLyBEbyBhbiBhc3luYyBwbHVnaW4gcXVldWUgbGlrZSBsZXNzYw0KICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnBsdWdpbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQsIGNvbnRlbnRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5maWxlQ29udGVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzID0gcGx1Z2luLmZpbGVDb250ZW50LnJlcGxhY2UoL15cdUZFRkYvLCAnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbFJlc3VsdCA9IHBsdWdpbk1hbmFnZXJfMS5Mb2FkZXIuZXZhbFBsdWdpbihjb250ZW50cywgY29udGV4dF8xLCBpbXBvcnRzXzEsIHBsdWdpbi5vcHRpb25zLCBwbHVnaW4uZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmFsUmVzdWx0IGluc3RhbmNlb2YgTGVzc0Vycm9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhldmFsUmVzdWx0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyXzEuYWRkUGx1Z2luKHBsdWdpbik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBuZXcgUGFyc2VyKGNvbnRleHRfMSwgaW1wb3J0c18xLCByb290RmlsZUluZm8pDQogICAgICAgICAgICAgICAgICAgIC5wYXJzZShpbnB1dCwgZnVuY3Rpb24gKGUsIHJvb3QpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCByb290LCBpbXBvcnRzXzEsIG9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm4gcGFyc2U7DQogICAgfQoKICAgIGZ1bmN0aW9uIFJlbmRlciAoZW52aXJvbm1lbnQsIFBhcnNlVHJlZSwgSW1wb3J0TWFuYWdlcikgew0KICAgICAgICB2YXIgcmVuZGVyID0gZnVuY3Rpb24gKGlucHV0LCBvcHRpb25zLCBjYWxsYmFjaykgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zOw0KICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyh0aGlzLm9wdGlvbnMsIHt9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwge30pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykgew0KICAgICAgICAgICAgICAgIHZhciBzZWxmXzEgPSB0aGlzOw0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICAgICAgICAgIHJlbmRlci5jYWxsKHNlbGZfMSwgaW5wdXQsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIG91dHB1dCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvdXRwdXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMucGFyc2UoaW5wdXQsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIHJvb3QsIGltcG9ydHMsIG9wdGlvbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZVRyZWUgPSBuZXcgUGFyc2VUcmVlKHJvb3QsIGltcG9ydHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VUcmVlLnRvQ1NTKG9wdGlvbnMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIHJldHVybiByZW5kZXI7DQogICAgfQoKICAgIHZhciB2ZXJzaW9uID0gIjQuMS4yIjsKCiAgICBmdW5jdGlvbiBwYXJzZU5vZGVWZXJzaW9uKHZlcnNpb24pIHsKICAgICAgdmFyIG1hdGNoID0gdmVyc2lvbi5tYXRjaCgvXnYoXGR7MSwyfSlcLihcZHsxLDJ9KVwuKFxkezEsMn0pKD86LShbMC05QS1aYS16LS5dKykpPyg/OlwrKFswLTlBLVphLXotLl0rKSk/JC8pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG1heC1sZW4KICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHBhcnNlOiAnICsgdmVyc2lvbik7CiAgICAgIH0KCiAgICAgIHZhciByZXMgPSB7CiAgICAgICAgbWFqb3I6IHBhcnNlSW50KG1hdGNoWzFdLCAxMCksCiAgICAgICAgbWlub3I6IHBhcnNlSW50KG1hdGNoWzJdLCAxMCksCiAgICAgICAgcGF0Y2g6IHBhcnNlSW50KG1hdGNoWzNdLCAxMCksCiAgICAgICAgcHJlOiBtYXRjaFs0XSB8fCAnJywKICAgICAgICBidWlsZDogbWF0Y2hbNV0gfHwgJycsCiAgICAgIH07CgogICAgICByZXR1cm4gcmVzOwogICAgfQoKICAgIHZhciBwYXJzZU5vZGVWZXJzaW9uXzEgPSBwYXJzZU5vZGVWZXJzaW9uOwoKICAgIGZ1bmN0aW9uIGxlc3NSb290IChlbnZpcm9ubWVudCwgZmlsZU1hbmFnZXJzKSB7DQogICAgICAgIHZhciBzb3VyY2VNYXBPdXRwdXQsIHNvdXJjZU1hcEJ1aWxkZXIsIHBhcnNlVHJlZSwgaW1wb3J0TWFuYWdlcjsNCiAgICAgICAgZW52aXJvbm1lbnQgPSBuZXcgRW52aXJvbm1lbnQoZW52aXJvbm1lbnQsIGZpbGVNYW5hZ2Vycyk7DQogICAgICAgIHNvdXJjZU1hcE91dHB1dCA9IFNvdXJjZU1hcE91dHB1dChlbnZpcm9ubWVudCk7DQogICAgICAgIHNvdXJjZU1hcEJ1aWxkZXIgPSBTb3VyY2VNYXBCdWlsZGVyKHNvdXJjZU1hcE91dHB1dCwgZW52aXJvbm1lbnQpOw0KICAgICAgICBwYXJzZVRyZWUgPSBQYXJzZVRyZWUoc291cmNlTWFwQnVpbGRlcik7DQogICAgICAgIGltcG9ydE1hbmFnZXIgPSBJbXBvcnRNYW5hZ2VyKGVudmlyb25tZW50KTsNCiAgICAgICAgdmFyIHJlbmRlciA9IFJlbmRlcihlbnZpcm9ubWVudCwgcGFyc2VUcmVlKTsNCiAgICAgICAgdmFyIHBhcnNlID0gUGFyc2UoZW52aXJvbm1lbnQsIHBhcnNlVHJlZSwgaW1wb3J0TWFuYWdlcik7DQogICAgICAgIHZhciB2ID0gcGFyc2VOb2RlVmVyc2lvbl8xKCJ2IiArIHZlcnNpb24pOw0KICAgICAgICB2YXIgaW5pdGlhbCA9IHsNCiAgICAgICAgICAgIHZlcnNpb246IFt2Lm1ham9yLCB2Lm1pbm9yLCB2LnBhdGNoXSwNCiAgICAgICAgICAgIGRhdGE6IGRhdGEsDQogICAgICAgICAgICB0cmVlOiB0cmVlLA0KICAgICAgICAgICAgRW52aXJvbm1lbnQ6IEVudmlyb25tZW50LA0KICAgICAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlcjogQWJzdHJhY3RGaWxlTWFuYWdlciwNCiAgICAgICAgICAgIEFic3RyYWN0UGx1Z2luTG9hZGVyOiBBYnN0cmFjdFBsdWdpbkxvYWRlciwNCiAgICAgICAgICAgIGVudmlyb25tZW50OiBlbnZpcm9ubWVudCwNCiAgICAgICAgICAgIHZpc2l0b3JzOiB2aXNpdG9ycywNCiAgICAgICAgICAgIFBhcnNlcjogUGFyc2VyLA0KICAgICAgICAgICAgZnVuY3Rpb25zOiBmdW5jdGlvbnMoZW52aXJvbm1lbnQpLA0KICAgICAgICAgICAgY29udGV4dHM6IGNvbnRleHRzLA0KICAgICAgICAgICAgU291cmNlTWFwT3V0cHV0OiBzb3VyY2VNYXBPdXRwdXQsDQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyOiBzb3VyY2VNYXBCdWlsZGVyLA0KICAgICAgICAgICAgUGFyc2VUcmVlOiBwYXJzZVRyZWUsDQogICAgICAgICAgICBJbXBvcnRNYW5hZ2VyOiBpbXBvcnRNYW5hZ2VyLA0KICAgICAgICAgICAgcmVuZGVyOiByZW5kZXIsDQogICAgICAgICAgICBwYXJzZTogcGFyc2UsDQogICAgICAgICAgICBMZXNzRXJyb3I6IExlc3NFcnJvciwNCiAgICAgICAgICAgIHRyYW5zZm9ybVRyZWU6IHRyYW5zZm9ybVRyZWUsDQogICAgICAgICAgICB1dGlsczogdXRpbHMsDQogICAgICAgICAgICBQbHVnaW5NYW5hZ2VyOiBQbHVnaW5NYW5hZ2VyRmFjdG9yeSwNCiAgICAgICAgICAgIGxvZ2dlcjogbG9nZ2VyJDENCiAgICAgICAgfTsNCiAgICAgICAgLy8gQ3JlYXRlIGEgcHVibGljIEFQSQ0KICAgICAgICB2YXIgY3RvciA9IGZ1bmN0aW9uICh0KSB7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHZhciBvYmogPSBPYmplY3QuY3JlYXRlKHQucHJvdG90eXBlKTsNCiAgICAgICAgICAgICAgICB0LmFwcGx5KG9iaiwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG9iajsNCiAgICAgICAgICAgIH07DQogICAgICAgIH07DQogICAgICAgIHZhciB0Ow0KICAgICAgICB2YXIgYXBpID0gT2JqZWN0LmNyZWF0ZShpbml0aWFsKTsNCiAgICAgICAgZm9yICh2YXIgbiBpbiBpbml0aWFsLnRyZWUpIHsNCiAgICAgICAgICAgIC8qIGVzbGludCBndWFyZC1mb3ItaW46IDAgKi8NCiAgICAgICAgICAgIHQgPSBpbml0aWFsLnRyZWVbbl07DQogICAgICAgICAgICBpZiAodHlwZW9mIHQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICBhcGlbbi50b0xvd2VyQ2FzZSgpXSA9IGN0b3IodCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBhcGlbbl0gPSBPYmplY3QuY3JlYXRlKG51bGwpOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIG8gaW4gdCkgew0KICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQgZ3VhcmQtZm9yLWluOiAwICovDQogICAgICAgICAgICAgICAgICAgIGFwaVtuXVtvLnRvTG93ZXJDYXNlKCldID0gY3Rvcih0W29dKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIFNvbWUgb2YgdGhlIGZ1bmN0aW9ucyBhc3N1bWUgYSBgdGhpc2AgY29udGV4dCBvZiB0aGUgQVBJIG9iamVjdCwNCiAgICAgICAgICogd2hpY2ggY2F1c2VzIGl0IHRvIGZhaWwgd2hlbiB3cmFwcGVkIGZvciBFUzYgaW1wb3J0cy4NCiAgICAgICAgICoNCiAgICAgICAgICogQW4gYXNzdW1lZCBgdGhpc2Agc2hvdWxkIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4NCiAgICAgICAgICovDQogICAgICAgIGluaXRpYWwucGFyc2UgPSBpbml0aWFsLnBhcnNlLmJpbmQoYXBpKTsNCiAgICAgICAgaW5pdGlhbC5yZW5kZXIgPSBpbml0aWFsLnJlbmRlci5iaW5kKGFwaSk7DQogICAgICAgIHJldHVybiBhcGk7DQogICAgfQoKICAgIC8qIGdsb2JhbCB3aW5kb3csIFhNTEh0dHBSZXF1ZXN0ICovDQogICAgdmFyIG9wdGlvbnMkMTsNCiAgICB2YXIgbG9nZ2VyOw0KICAgIHZhciBmaWxlQ2FjaGUgPSB7fTsNCiAgICAvLyBUT0RPUyAtIG1vdmUgbG9nIHNvbWV3aGVyZS4gcGF0aERpZmYgYW5kIGRvaW5nIHNvbWV0aGluZyBzaW1pbGFyIGluIG5vZGUuIHVzZSBwYXRoRGlmZiBpbiB0aGUgb3RoZXIgYnJvd3NlciBmaWxlIGZvciB0aGUgaW5pdGlhbCBsb2FkDQogICAgdmFyIEZpbGVNYW5hZ2VyID0gZnVuY3Rpb24gKCkgeyB9Ow0KICAgIEZpbGVNYW5hZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IEFic3RyYWN0RmlsZU1hbmFnZXIoKSwgew0KICAgICAgICBhbHdheXNNYWtlUGF0aHNBYnNvbHV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0sDQogICAgICAgIGpvaW46IGZ1bmN0aW9uIChiYXNlUGF0aCwgbGF0ZXJQYXRoKSB7DQogICAgICAgICAgICBpZiAoIWJhc2VQYXRoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVyUGF0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RVcmxQYXJ0cyhsYXRlclBhdGgsIGJhc2VQYXRoKS5wYXRoOw0KICAgICAgICB9LA0KICAgICAgICBkb1hIUjogZnVuY3Rpb24gKHVybCwgdHlwZSwgY2FsbGJhY2ssIGVycmJhY2spIHsNCiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCiAgICAgICAgICAgIHZhciBhc3luYyA9IG9wdGlvbnMkMS5pc0ZpbGVQcm90b2NvbCA/IG9wdGlvbnMkMS5maWxlQXN5bmMgOiB0cnVlOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB4aHIub3ZlcnJpZGVNaW1lVHlwZSA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHhoci5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L2NzcycpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJYSFI6IEdldHRpbmcgJyIgKyB1cmwgKyAiJyIpOw0KICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgYXN5bmMpOw0KICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsIHR5cGUgfHwgJ3RleHQveC1sZXNzLCB0ZXh0L2NzczsgcT0wLjksICovKjsgcT0wLjUnKTsNCiAgICAgICAgICAgIHhoci5zZW5kKG51bGwpOw0KICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoeGhyLCBjYWxsYmFjaywgZXJyYmFjaykgew0KICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHhoci5yZXNwb25zZVRleHQsIHhoci5nZXRSZXNwb25zZUhlYWRlcignTGFzdC1Nb2RpZmllZCcpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGVycmJhY2sgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICAgICAgZXJyYmFjayh4aHIuc3RhdHVzLCB1cmwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChvcHRpb25zJDEuaXNGaWxlUHJvdG9jb2wgJiYgIW9wdGlvbnMkMS5maWxlQXN5bmMpIHsNCiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMCB8fCAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soeGhyLnJlc3BvbnNlVGV4dCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBlcnJiYWNrKHhoci5zdGF0dXMsIHVybCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoYXN5bmMpIHsNCiAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlUmVzcG9uc2UoeGhyLCBjYWxsYmFjaywgZXJyYmFjayk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaGFuZGxlUmVzcG9uc2UoeGhyLCBjYWxsYmFjaywgZXJyYmFjayk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHN1cHBvcnRzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJGaWxlQ2FjaGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGZpbGVDYWNoZSA9IHt9Ow0KICAgICAgICB9LA0KICAgICAgICBsb2FkRmlsZTogZnVuY3Rpb24gKGZpbGVuYW1lLCBjdXJyZW50RGlyZWN0b3J5LCBvcHRpb25zLCBlbnZpcm9ubWVudCkgew0KICAgICAgICAgICAgLy8gVE9ETzogQWRkIHByZWZpeCBzdXBwb3J0IGxpa2UgbGVzcy1ub2RlPw0KICAgICAgICAgICAgLy8gV2hhdCBhYm91dCBtdWx0aXBsZSBwYXRocz8NCiAgICAgICAgICAgIGlmIChjdXJyZW50RGlyZWN0b3J5ICYmICF0aGlzLmlzUGF0aEFic29sdXRlKGZpbGVuYW1lKSkgew0KICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gY3VycmVudERpcmVjdG9yeSArIGZpbGVuYW1lOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZmlsZW5hbWUgPSBvcHRpb25zLmV4dCA/IHRoaXMudHJ5QXBwZW5kRXh0ZW5zaW9uKGZpbGVuYW1lLCBvcHRpb25zLmV4dCkgOiBmaWxlbmFtZTsNCiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9Ow0KICAgICAgICAgICAgLy8gc2hlZXQgbWF5IGJlIHNldCB0byB0aGUgc3R5bGVzaGVldCBmb3IgdGhlIGluaXRpYWwgbG9hZCBvciBhIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBpbmNsdWRpbmcNCiAgICAgICAgICAgIC8vIHNvbWUgY29udGV4dCB2YXJpYWJsZXMgZm9yIGltcG9ydHMNCiAgICAgICAgICAgIHZhciBocmVmUGFydHMgPSB0aGlzLmV4dHJhY3RVcmxQYXJ0cyhmaWxlbmFtZSwgd2luZG93LmxvY2F0aW9uLmhyZWYpOw0KICAgICAgICAgICAgdmFyIGhyZWYgPSBocmVmUGFydHMudXJsOw0KICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VGaWxlQ2FjaGUgJiYgZmlsZUNhY2hlW2hyZWZdKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVzc1RleHQgPSBmaWxlQ2FjaGVbaHJlZl07DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IGNvbnRlbnRzOiBsZXNzVGV4dCwgZmlsZW5hbWU6IGhyZWYsIHdlYkluZm86IHsgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpIH0gfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoeyBmaWxlbmFtZTogaHJlZiwgbWVzc2FnZTogIkVycm9yIGxvYWRpbmcgZmlsZSAiICsgaHJlZiArICIgZXJyb3Igd2FzICIgKyBlLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc2VsZi5kb1hIUihocmVmLCBvcHRpb25zLm1pbWUsIGZ1bmN0aW9uIGRvWEhSQ2FsbGJhY2soZGF0YSwgbGFzdE1vZGlmaWVkKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIHBlciBmaWxlIGNhY2hlDQogICAgICAgICAgICAgICAgICAgIGZpbGVDYWNoZVtocmVmXSA9IGRhdGE7DQogICAgICAgICAgICAgICAgICAgIC8vIFVzZSByZW1vdGUgY29weSAocmUtcGFyc2UpDQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyBjb250ZW50czogZGF0YSwgZmlsZW5hbWU6IGhyZWYsIHdlYkluZm86IHsgbGFzdE1vZGlmaWVkOiBsYXN0TW9kaWZpZWQgfSB9KTsNCiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBkb1hIUkVycm9yKHN0YXR1cywgdXJsKSB7DQogICAgICAgICAgICAgICAgICAgIHJlamVjdCh7IHR5cGU6ICdGaWxlJywgbWVzc2FnZTogIiciICsgdXJsICsgIicgd2Fzbid0IGZvdW5kICgiICsgc3RhdHVzICsgIikiLCBocmVmOiBocmVmIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICB2YXIgRk0gPSAoZnVuY3Rpb24gKG9wdHMsIGxvZykgew0KICAgICAgICBvcHRpb25zJDEgPSBvcHRzOw0KICAgICAgICBsb2dnZXIgPSBsb2c7DQogICAgICAgIHJldHVybiBGaWxlTWFuYWdlcjsNCiAgICB9KTsKCiAgICAvLyBUT0RPOiBBZGQgdGVzdHMgZm9yIGJyb3dzZXIgQHBsdWdpbg0KICAgIC8qKg0KICAgICAqIEJyb3dzZXIgUGx1Z2luIExvYWRlcg0KICAgICAqLw0KICAgIHZhciBQbHVnaW5Mb2FkZXIgPSBmdW5jdGlvbiAobGVzcykgew0KICAgICAgICB0aGlzLmxlc3MgPSBsZXNzOw0KICAgICAgICAvLyBTaG91bGQgd2Ugc2hpbSB0aGlzLnJlcXVpcmUgZm9yIGJyb3dzZXI/IFByb2JhYmx5IG5vdD8NCiAgICB9Ow0KICAgIFBsdWdpbkxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBBYnN0cmFjdFBsdWdpbkxvYWRlcigpLCB7DQogICAgICAgIGxvYWRQbHVnaW46IGZ1bmN0aW9uIChmaWxlbmFtZSwgYmFzZVBhdGgsIGNvbnRleHQsIGVudmlyb25tZW50LCBmaWxlTWFuYWdlcikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHsNCiAgICAgICAgICAgICAgICBmaWxlTWFuYWdlci5sb2FkRmlsZShmaWxlbmFtZSwgYmFzZVBhdGgsIGNvbnRleHQsIGVudmlyb25tZW50KQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihmdWxmaWxsKS5jYXRjaChyZWplY3QpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgTG9nTGlzdGVuZXIgPSAoZnVuY3Rpb24gKGxlc3MsIG9wdGlvbnMpIHsNCiAgICAgICAgdmFyIGxvZ0xldmVsX2RlYnVnID0gNDsNCiAgICAgICAgdmFyIGxvZ0xldmVsX2luZm8gPSAzOw0KICAgICAgICB2YXIgbG9nTGV2ZWxfd2FybiA9IDI7DQogICAgICAgIHZhciBsb2dMZXZlbF9lcnJvciA9IDE7DQogICAgICAgIC8vIFRoZSBhbW91bnQgb2YgbG9nZ2luZyBpbiB0aGUgamF2YXNjcmlwdCBjb25zb2xlLg0KICAgICAgICAvLyAzIC0gRGVidWcsIGluZm9ybWF0aW9uIGFuZCBlcnJvcnMNCiAgICAgICAgLy8gMiAtIEluZm9ybWF0aW9uIGFuZCBlcnJvcnMNCiAgICAgICAgLy8gMSAtIEVycm9ycw0KICAgICAgICAvLyAwIC0gTm9uZQ0KICAgICAgICAvLyBEZWZhdWx0cyB0byAyDQogICAgICAgIG9wdGlvbnMubG9nTGV2ZWwgPSB0eXBlb2Ygb3B0aW9ucy5sb2dMZXZlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmxvZ0xldmVsIDogKG9wdGlvbnMuZW52ID09PSAnZGV2ZWxvcG1lbnQnID8gbG9nTGV2ZWxfaW5mbyA6IGxvZ0xldmVsX2Vycm9yKTsNCiAgICAgICAgaWYgKCFvcHRpb25zLmxvZ2dlcnMpIHsNCiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VycyA9IFt7DQogICAgICAgICAgICAgICAgICAgIGRlYnVnOiBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb2dMZXZlbCA+PSBsb2dMZXZlbF9kZWJ1Zykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGluZm86IGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmxvZ0xldmVsID49IGxvZ0xldmVsX2luZm8pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB3YXJuOiBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb2dMZXZlbCA+PSBsb2dMZXZlbF93YXJuKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKG1zZyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb2dMZXZlbCA+PSBsb2dMZXZlbF9lcnJvcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH1dOw0KICAgICAgICB9DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sb2dnZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBsZXNzLmxvZ2dlci5hZGRMaXN0ZW5lcihvcHRpb25zLmxvZ2dlcnNbaV0pOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIEVycm9yUmVwb3J0aW5nID0gKGZ1bmN0aW9uICh3aW5kb3csIGxlc3MsIG9wdGlvbnMpIHsNCiAgICAgICAgZnVuY3Rpb24gZXJyb3JIVE1MKGUsIHJvb3RIcmVmKSB7DQogICAgICAgICAgICB2YXIgaWQgPSAibGVzcy1lcnJvci1tZXNzYWdlOiIgKyBleHRyYWN0SWQocm9vdEhyZWYgfHwgJycpOw0KICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaT48bGFiZWw+e2xpbmV9PC9sYWJlbD48cHJlIGNsYXNzPSJ7Y2xhc3N9Ij57Y29udGVudH08L3ByZT48L2xpPic7DQogICAgICAgICAgICB2YXIgZWxlbSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgIHZhciB0aW1lcjsNCiAgICAgICAgICAgIHZhciBjb250ZW50Ow0KICAgICAgICAgICAgdmFyIGVycm9ycyA9IFtdOw0KICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gZS5maWxlbmFtZSB8fCByb290SHJlZjsNCiAgICAgICAgICAgIHZhciBmaWxlbmFtZU5vUGF0aCA9IGZpbGVuYW1lLm1hdGNoKC8oW15cL10rKFw/LiopPykkLylbMV07DQogICAgICAgICAgICBlbGVtLmlkID0gaWQ7DQogICAgICAgICAgICBlbGVtLmNsYXNzTmFtZSA9ICdsZXNzLWVycm9yLW1lc3NhZ2UnOw0KICAgICAgICAgICAgY29udGVudCA9ICI8aDM+IiArIChlLnR5cGUgfHwgJ1N5bnRheCcpICsgIkVycm9yOiAiICsgKGUubWVzc2FnZSB8fCAnVGhlcmUgaXMgYW4gZXJyb3IgaW4geW91ciAubGVzcyBmaWxlJykgKw0KICAgICAgICAgICAgICAgICgiPC9oMz48cD5pbiA8YSBocmVmPVwiIiArIGZpbGVuYW1lICsgIlwiPiIgKyBmaWxlbmFtZU5vUGF0aCArICI8L2E+ICIpOw0KICAgICAgICAgICAgdmFyIGVycm9ybGluZSA9IGZ1bmN0aW9uIChlLCBpLCBjbGFzc25hbWUpIHsNCiAgICAgICAgICAgICAgICBpZiAoZS5leHRyYWN0W2ldICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2godGVtcGxhdGUucmVwbGFjZSgvXHtsaW5lXH0vLCAocGFyc2VJbnQoZS5saW5lLCAxMCkgfHwgMCkgKyAoaSAtIDEpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1x7Y2xhc3NcfS8sIGNsYXNzbmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ce2NvbnRlbnRcfS8sIGUuZXh0cmFjdFtpXSkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBpZiAoZS5saW5lKSB7DQogICAgICAgICAgICAgICAgZXJyb3JsaW5lKGUsIDAsICcnKTsNCiAgICAgICAgICAgICAgICBlcnJvcmxpbmUoZSwgMSwgJ2xpbmUnKTsNCiAgICAgICAgICAgICAgICBlcnJvcmxpbmUoZSwgMiwgJycpOw0KICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gIm9uIGxpbmUgIiArIGUubGluZSArICIsIGNvbHVtbiAiICsgKGUuY29sdW1uICsgMSkgKyAiOjwvcD48dWw+IiArIGVycm9ycy5qb2luKCcnKSArICI8L3VsPiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZS5zdGFjayAmJiAoZS5leHRyYWN0IHx8IG9wdGlvbnMubG9nTGV2ZWwgPj0gNCkpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50ICs9ICI8YnIvPlN0YWNrIFRyYWNlPC9iciAvPiIgKyBlLnN0YWNrLnNwbGl0KCdcbicpLnNsaWNlKDEpLmpvaW4oJzxici8+Jyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbGVtLmlubmVySFRNTCA9IGNvbnRlbnQ7DQogICAgICAgICAgICAvLyBDU1MgZm9yIGVycm9yIG1lc3NhZ2VzDQogICAgICAgICAgICBicm93c2VyLmNyZWF0ZUNTUyh3aW5kb3cuZG9jdW1lbnQsIFsNCiAgICAgICAgICAgICAgICAnLmxlc3MtZXJyb3ItbWVzc2FnZSB1bCwgLmxlc3MtZXJyb3ItbWVzc2FnZSBsaSB7JywNCiAgICAgICAgICAgICAgICAnbGlzdC1zdHlsZS10eXBlOiBub25lOycsDQogICAgICAgICAgICAgICAgJ21hcmdpbi1yaWdodDogMTVweDsnLA0KICAgICAgICAgICAgICAgICdwYWRkaW5nOiA0cHggMDsnLA0KICAgICAgICAgICAgICAgICdtYXJnaW46IDA7JywNCiAgICAgICAgICAgICAgICAnfScsDQogICAgICAgICAgICAgICAgJy5sZXNzLWVycm9yLW1lc3NhZ2UgbGFiZWwgeycsDQogICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZTogMTJweDsnLA0KICAgICAgICAgICAgICAgICdtYXJnaW4tcmlnaHQ6IDE1cHg7JywNCiAgICAgICAgICAgICAgICAncGFkZGluZzogNHB4IDA7JywNCiAgICAgICAgICAgICAgICAnY29sb3I6ICNjYzc3Nzc7JywNCiAgICAgICAgICAgICAgICAnfScsDQogICAgICAgICAgICAgICAgJy5sZXNzLWVycm9yLW1lc3NhZ2UgcHJlIHsnLA0KICAgICAgICAgICAgICAgICdjb2xvcjogI2RkNjY2NjsnLA0KICAgICAgICAgICAgICAgICdwYWRkaW5nOiA0cHggMDsnLA0KICAgICAgICAgICAgICAgICdtYXJnaW46IDA7JywNCiAgICAgICAgICAgICAgICAnZGlzcGxheTogaW5saW5lLWJsb2NrOycsDQogICAgICAgICAgICAgICAgJ30nLA0KICAgICAgICAgICAgICAgICcubGVzcy1lcnJvci1tZXNzYWdlIHByZS5saW5lIHsnLA0KICAgICAgICAgICAgICAgICdjb2xvcjogI2ZmMDAwMDsnLA0KICAgICAgICAgICAgICAgICd9JywNCiAgICAgICAgICAgICAgICAnLmxlc3MtZXJyb3ItbWVzc2FnZSBoMyB7JywNCiAgICAgICAgICAgICAgICAnZm9udC1zaXplOiAyMHB4OycsDQogICAgICAgICAgICAgICAgJ2ZvbnQtd2VpZ2h0OiBib2xkOycsDQogICAgICAgICAgICAgICAgJ3BhZGRpbmc6IDE1cHggMCA1cHggMDsnLA0KICAgICAgICAgICAgICAgICdtYXJnaW46IDA7JywNCiAgICAgICAgICAgICAgICAnfScsDQogICAgICAgICAgICAgICAgJy5sZXNzLWVycm9yLW1lc3NhZ2UgYSB7JywNCiAgICAgICAgICAgICAgICAnY29sb3I6ICMxMGEnLA0KICAgICAgICAgICAgICAgICd9JywNCiAgICAgICAgICAgICAgICAnLmxlc3MtZXJyb3ItbWVzc2FnZSAuZXJyb3IgeycsDQogICAgICAgICAgICAgICAgJ2NvbG9yOiByZWQ7JywNCiAgICAgICAgICAgICAgICAnZm9udC13ZWlnaHQ6IGJvbGQ7JywNCiAgICAgICAgICAgICAgICAncGFkZGluZy1ib3R0b206IDJweDsnLA0KICAgICAgICAgICAgICAgICdib3JkZXItYm90dG9tOiAxcHggZGFzaGVkIHJlZDsnLA0KICAgICAgICAgICAgICAgICd9Jw0KICAgICAgICAgICAgXS5qb2luKCdcbicpLCB7IHRpdGxlOiAnZXJyb3ItbWVzc2FnZScgfSk7DQogICAgICAgICAgICBlbGVtLnN0eWxlLmNzc1RleHQgPSBbDQogICAgICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZicsDQogICAgICAgICAgICAgICAgJ2JvcmRlcjogMXB4IHNvbGlkICNlMDAnLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlJywNCiAgICAgICAgICAgICAgICAnYm9yZGVyLXJhZGl1czogNXB4JywNCiAgICAgICAgICAgICAgICAnLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHgnLA0KICAgICAgICAgICAgICAgICctbW96LWJvcmRlci1yYWRpdXM6IDVweCcsDQogICAgICAgICAgICAgICAgJ2NvbG9yOiAjZTAwJywNCiAgICAgICAgICAgICAgICAncGFkZGluZzogMTVweCcsDQogICAgICAgICAgICAgICAgJ21hcmdpbi1ib3R0b206IDE1cHgnDQogICAgICAgICAgICBdLmpvaW4oJzsnKTsNCiAgICAgICAgICAgIGlmIChvcHRpb25zLmVudiA9PT0gJ2RldmVsb3BtZW50Jykgew0KICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7DQogICAgICAgICAgICAgICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGJvZHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5LnJlcGxhY2VDaGlsZChlbGVtLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5pbnNlcnRCZWZvcmUoZWxlbSwgYm9keS5maXJzdENoaWxkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwgMTApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHJlbW92ZUVycm9ySFRNTChwYXRoKSB7DQogICAgICAgICAgICB2YXIgbm9kZSA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibGVzcy1lcnJvci1tZXNzYWdlOiIgKyBleHRyYWN0SWQocGF0aCkpOw0KICAgICAgICAgICAgaWYgKG5vZGUpIHsNCiAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlRXJyb3IocGF0aCkgew0KICAgICAgICAgICAgaWYgKCFvcHRpb25zLmVycm9yUmVwb3J0aW5nIHx8IG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgPT09ICdodG1sJykgew0KICAgICAgICAgICAgICAgIHJlbW92ZUVycm9ySFRNTChwYXRoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgPT09ICdjb25zb2xlJykgOw0KICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICBvcHRpb25zLmVycm9yUmVwb3J0aW5nKCdyZW1vdmUnLCBwYXRoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBlcnJvckNvbnNvbGUoZSwgcm9vdEhyZWYpIHsNCiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICd7bGluZX0ge2NvbnRlbnR9JzsNCiAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9IGUuZmlsZW5hbWUgfHwgcm9vdEhyZWY7DQogICAgICAgICAgICB2YXIgZXJyb3JzID0gW107DQogICAgICAgICAgICB2YXIgY29udGVudCA9IChlLnR5cGUgfHwgJ1N5bnRheCcpICsgIkVycm9yOiAiICsgKGUubWVzc2FnZSB8fCAnVGhlcmUgaXMgYW4gZXJyb3IgaW4geW91ciAubGVzcyBmaWxlJykgKyAiIGluICIgKyBmaWxlbmFtZTsNCiAgICAgICAgICAgIHZhciBlcnJvcmxpbmUgPSBmdW5jdGlvbiAoZSwgaSwgY2xhc3NuYW1lKSB7DQogICAgICAgICAgICAgICAgaWYgKGUuZXh0cmFjdFtpXSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHRlbXBsYXRlLnJlcGxhY2UoL1x7bGluZVx9LywgKHBhcnNlSW50KGUubGluZSwgMTApIHx8IDApICsgKGkgLSAxKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ce2NsYXNzXH0vLCBjbGFzc25hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXHtjb250ZW50XH0vLCBlLmV4dHJhY3RbaV0pKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgaWYgKGUubGluZSkgew0KICAgICAgICAgICAgICAgIGVycm9ybGluZShlLCAwLCAnJyk7DQogICAgICAgICAgICAgICAgZXJyb3JsaW5lKGUsIDEsICdsaW5lJyk7DQogICAgICAgICAgICAgICAgZXJyb3JsaW5lKGUsIDIsICcnKTsNCiAgICAgICAgICAgICAgICBjb250ZW50ICs9ICIgb24gbGluZSAiICsgZS5saW5lICsgIiwgY29sdW1uICIgKyAoZS5jb2x1bW4gKyAxKSArICI6XG4iICsgZXJyb3JzLmpvaW4oJ1xuJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZS5zdGFjayAmJiAoZS5leHRyYWN0IHx8IG9wdGlvbnMubG9nTGV2ZWwgPj0gNCkpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50ICs9ICJcblN0YWNrIFRyYWNlXG4iICsgZS5zdGFjazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxlc3MubG9nZ2VyLmVycm9yKGNvbnRlbnQpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGVycm9yKGUsIHJvb3RIcmVmKSB7DQogICAgICAgICAgICBpZiAoIW9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgfHwgb3B0aW9ucy5lcnJvclJlcG9ydGluZyA9PT0gJ2h0bWwnKSB7DQogICAgICAgICAgICAgICAgZXJyb3JIVE1MKGUsIHJvb3RIcmVmKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgPT09ICdjb25zb2xlJykgew0KICAgICAgICAgICAgICAgIGVycm9yQ29uc29sZShlLCByb290SHJlZik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5lcnJvclJlcG9ydGluZyA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcoJ2FkZCcsIGUsIHJvb3RIcmVmKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgYWRkOiBlcnJvciwNCiAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlRXJyb3INCiAgICAgICAgfTsNCiAgICB9KTsKCiAgICAvLyBDYWNoZSBzeXN0ZW0gaXMgYSBiaXQgb3V0ZGF0ZWQgYW5kIGNvdWxkIGRvIHdpdGggd29yaw0KICAgIHZhciBDYWNoZSA9IChmdW5jdGlvbiAod2luZG93LCBvcHRpb25zLCBsb2dnZXIpIHsNCiAgICAgICAgdmFyIGNhY2hlID0gbnVsbDsNCiAgICAgICAgaWYgKG9wdGlvbnMuZW52ICE9PSAnZGV2ZWxvcG1lbnQnKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNhY2hlID0gKHR5cGVvZiB3aW5kb3cubG9jYWxTdG9yYWdlID09PSAndW5kZWZpbmVkJykgPyBudWxsIDogd2luZG93LmxvY2FsU3RvcmFnZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChfKSB7IH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgc2V0Q1NTOiBmdW5jdGlvbiAocGF0aCwgbGFzdE1vZGlmaWVkLCBtb2RpZnlWYXJzLCBzdHlsZXMpIHsNCiAgICAgICAgICAgICAgICBpZiAoY2FjaGUpIHsNCiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oInNhdmluZyAiICsgcGF0aCArICIgdG8gY2FjaGUuIik7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXRJdGVtKHBhdGgsIHN0eWxlcyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXRJdGVtKHBhdGggKyAiOnRpbWVzdGFtcCIsIGxhc3RNb2RpZmllZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZ5VmFycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldEl0ZW0ocGF0aCArICI6dmFycyIsIEpTT04uc3RyaW5naWZ5KG1vZGlmeVZhcnMpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyAtIGNvdWxkIGRvIHdpdGggYWRkaW5nIG1vcmUgcm9idXN0IGVycm9yIGhhbmRsaW5nDQogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoImZhaWxlZCB0byBzYXZlIFwiIiArIHBhdGggKyAiXCIgdG8gbG9jYWwgc3RvcmFnZSBmb3IgY2FjaGluZy4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBnZXRDU1M6IGZ1bmN0aW9uIChwYXRoLCB3ZWJJbmZvLCBtb2RpZnlWYXJzKSB7DQogICAgICAgICAgICAgICAgdmFyIGNzcyA9IGNhY2hlICYmIGNhY2hlLmdldEl0ZW0ocGF0aCk7DQogICAgICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IGNhY2hlICYmIGNhY2hlLmdldEl0ZW0ocGF0aCArICI6dGltZXN0YW1wIik7DQogICAgICAgICAgICAgICAgdmFyIHZhcnMgPSBjYWNoZSAmJiBjYWNoZS5nZXRJdGVtKHBhdGggKyAiOnZhcnMiKTsNCiAgICAgICAgICAgICAgICBtb2RpZnlWYXJzID0gbW9kaWZ5VmFycyB8fCB7fTsNCiAgICAgICAgICAgICAgICB2YXJzID0gdmFycyB8fCAie30iOyAvLyBpZiBub3Qgc2V0LCB0cmVhdCBhcyB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBlbXB0eSBvYmplY3QNCiAgICAgICAgICAgICAgICBpZiAodGltZXN0YW1wICYmIHdlYkluZm8ubGFzdE1vZGlmaWVkICYmDQogICAgICAgICAgICAgICAgICAgIChuZXcgRGF0ZSh3ZWJJbmZvLmxhc3RNb2RpZmllZCkudmFsdWVPZigpID09PQ0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUodGltZXN0YW1wKS52YWx1ZU9mKCkpICYmDQogICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG1vZGlmeVZhcnMpID09PSB2YXJzKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFVzZSBsb2NhbCBjb3B5DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjc3M7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0pOwoKICAgIHZhciBJbWFnZVNpemUgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBpbWFnZVNpemUoKSB7DQogICAgICAgICAgICB0aHJvdyB7DQogICAgICAgICAgICAgICAgdHlwZTogJ1J1bnRpbWUnLA0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbWFnZSBzaXplIGZ1bmN0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBpbiBicm93c2VyIHZlcnNpb24gb2YgbGVzcycNCiAgICAgICAgICAgIH07DQogICAgICAgIH0NCiAgICAgICAgdmFyIGltYWdlRnVuY3Rpb25zID0gew0KICAgICAgICAgICAgJ2ltYWdlLXNpemUnOiBmdW5jdGlvbiAoZmlsZVBhdGhOb2RlKSB7DQogICAgICAgICAgICAgICAgaW1hZ2VTaXplKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICdpbWFnZS13aWR0aCc6IGZ1bmN0aW9uIChmaWxlUGF0aE5vZGUpIHsNCiAgICAgICAgICAgICAgICBpbWFnZVNpemUoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gLTE7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgJ2ltYWdlLWhlaWdodCc6IGZ1bmN0aW9uIChmaWxlUGF0aE5vZGUpIHsNCiAgICAgICAgICAgICAgICBpbWFnZVNpemUoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gLTE7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoaW1hZ2VGdW5jdGlvbnMpOw0KICAgIH0pOwoKICAgIC8vDQogICAgdmFyIHJvb3QgPSAoZnVuY3Rpb24gKHdpbmRvdywgb3B0aW9ucykgew0KICAgICAgICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7DQogICAgICAgIHZhciBsZXNzID0gbGVzc1Jvb3QoKTsNCiAgICAgICAgbGVzcy5vcHRpb25zID0gb3B0aW9uczsNCiAgICAgICAgdmFyIGVudmlyb25tZW50ID0gbGVzcy5lbnZpcm9ubWVudDsNCiAgICAgICAgdmFyIEZpbGVNYW5hZ2VyID0gRk0ob3B0aW9ucywgbGVzcy5sb2dnZXIpOw0KICAgICAgICB2YXIgZmlsZU1hbmFnZXIgPSBuZXcgRmlsZU1hbmFnZXIoKTsNCiAgICAgICAgZW52aXJvbm1lbnQuYWRkRmlsZU1hbmFnZXIoZmlsZU1hbmFnZXIpOw0KICAgICAgICBsZXNzLkZpbGVNYW5hZ2VyID0gRmlsZU1hbmFnZXI7DQogICAgICAgIGxlc3MuUGx1Z2luTG9hZGVyID0gUGx1Z2luTG9hZGVyOw0KICAgICAgICBMb2dMaXN0ZW5lcihsZXNzLCBvcHRpb25zKTsNCiAgICAgICAgdmFyIGVycm9ycyA9IEVycm9yUmVwb3J0aW5nKHdpbmRvdywgbGVzcywgb3B0aW9ucyk7DQogICAgICAgIHZhciBjYWNoZSA9IGxlc3MuY2FjaGUgPSBvcHRpb25zLmNhY2hlIHx8IENhY2hlKHdpbmRvdywgb3B0aW9ucywgbGVzcy5sb2dnZXIpOw0KICAgICAgICBJbWFnZVNpemUobGVzcy5lbnZpcm9ubWVudCk7DQogICAgICAgIC8vIFNldHVwIHVzZXIgZnVuY3Rpb25zIC0gRGVwcmVjYXRlPw0KICAgICAgICBpZiAob3B0aW9ucy5mdW5jdGlvbnMpIHsNCiAgICAgICAgICAgIGxlc3MuZnVuY3Rpb25zLmZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUob3B0aW9ucy5mdW5jdGlvbnMpOw0KICAgICAgICB9DQogICAgICAgIHZhciB0eXBlUGF0dGVybiA9IC9edGV4dFwvKHgtKT9sZXNzJC87DQogICAgICAgIGZ1bmN0aW9uIGNsb25lKG9iaikgew0KICAgICAgICAgICAgdmFyIGNsb25lZCA9IHt9Ow0KICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHsNCiAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7DQogICAgICAgICAgICAgICAgICAgIGNsb25lZFtwcm9wXSA9IG9ialtwcm9wXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gY2xvbmVkOw0KICAgICAgICB9DQogICAgICAgIC8vIG9ubHkgcmVhbGx5IG5lZWRlZCBmb3IgcGhhbnRvbQ0KICAgICAgICBmdW5jdGlvbiBiaW5kKGZ1bmMsIHRoaXNBcmcpIHsNCiAgICAgICAgICAgIHZhciBjdXJyeUFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOw0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGN1cnJ5QXJncy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGxvYWRTdHlsZXMobW9kaWZ5VmFycykgew0KICAgICAgICAgICAgdmFyIHN0eWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzdHlsZScpOw0KICAgICAgICAgICAgdmFyIHN0eWxlOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBzdHlsZSA9IHN0eWxlc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAoc3R5bGUudHlwZS5tYXRjaCh0eXBlUGF0dGVybikpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlT3B0aW9ucyA9IGNsb25lKG9wdGlvbnMpOw0KICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZU9wdGlvbnMubW9kaWZ5VmFycyA9IG1vZGlmeVZhcnM7DQogICAgICAgICAgICAgICAgICAgIHZhciBsZXNzVGV4dCA9IHN0eWxlLmlubmVySFRNTCB8fCAnJzsNCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VPcHRpb25zLmZpbGVuYW1lID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLywgJycpOw0KICAgICAgICAgICAgICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqLw0KICAgICAgICAgICAgICAgICAgICAvLyB1c2UgY2xvc3VyZSB0byBzdG9yZSBjdXJyZW50IHN0eWxlDQogICAgICAgICAgICAgICAgICAgIGxlc3MucmVuZGVyKGxlc3NUZXh0LCBpbnN0YW5jZU9wdGlvbnMsIGJpbmQoZnVuY3Rpb24gKHN0eWxlLCBlLCByZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLmFkZChlLCAnaW5saW5lJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXN1bHQuY3NzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gcmVzdWx0LmNzczsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sIG51bGwsIHN0eWxlKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGxvYWRTdHlsZVNoZWV0KHNoZWV0LCBjYWxsYmFjaywgcmVsb2FkLCByZW1haW5pbmcsIG1vZGlmeVZhcnMpIHsNCiAgICAgICAgICAgIHZhciBpbnN0YW5jZU9wdGlvbnMgPSBjbG9uZShvcHRpb25zKTsNCiAgICAgICAgICAgIGFkZERhdGFBdHRyKGluc3RhbmNlT3B0aW9ucywgc2hlZXQpOw0KICAgICAgICAgICAgaW5zdGFuY2VPcHRpb25zLm1pbWUgPSBzaGVldC50eXBlOw0KICAgICAgICAgICAgaWYgKG1vZGlmeVZhcnMpIHsNCiAgICAgICAgICAgICAgICBpbnN0YW5jZU9wdGlvbnMubW9kaWZ5VmFycyA9IG1vZGlmeVZhcnM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBsb2FkSW5pdGlhbEZpbGVDYWxsYmFjayhsb2FkZWRGaWxlKSB7DQogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBsb2FkZWRGaWxlLmNvbnRlbnRzOw0KICAgICAgICAgICAgICAgIHZhciBwYXRoID0gbG9hZGVkRmlsZS5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICB2YXIgd2ViSW5mbyA9IGxvYWRlZEZpbGUud2ViSW5mbzsNCiAgICAgICAgICAgICAgICB2YXIgbmV3RmlsZUluZm8gPSB7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnREaXJlY3Rvcnk6IGZpbGVNYW5hZ2VyLmdldFBhdGgocGF0aCksDQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBwYXRoLA0KICAgICAgICAgICAgICAgICAgICByb290RmlsZW5hbWU6IHBhdGgsDQogICAgICAgICAgICAgICAgICAgIHJld3JpdGVVcmxzOiBpbnN0YW5jZU9wdGlvbnMucmV3cml0ZVVybHMNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIG5ld0ZpbGVJbmZvLmVudHJ5UGF0aCA9IG5ld0ZpbGVJbmZvLmN1cnJlbnREaXJlY3Rvcnk7DQogICAgICAgICAgICAgICAgbmV3RmlsZUluZm8ucm9vdHBhdGggPSBpbnN0YW5jZU9wdGlvbnMucm9vdHBhdGggfHwgbmV3RmlsZUluZm8uY3VycmVudERpcmVjdG9yeTsNCiAgICAgICAgICAgICAgICBpZiAod2ViSW5mbykgew0KICAgICAgICAgICAgICAgICAgICB3ZWJJbmZvLnJlbWFpbmluZyA9IHJlbWFpbmluZzsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNzcyA9IGNhY2hlLmdldENTUyhwYXRoLCB3ZWJJbmZvLCBpbnN0YW5jZU9wdGlvbnMubW9kaWZ5VmFycyk7DQogICAgICAgICAgICAgICAgICAgIGlmICghcmVsb2FkICYmIGNzcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgd2ViSW5mby5sb2NhbCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBjc3MsIGRhdGEsIHNoZWV0LCB3ZWJJbmZvLCBwYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCB0ZXN0cyBhcm91bmQgaG93IHRoaXMgYmVoYXZlcyB3aGVuIHJlbG9hZGluZw0KICAgICAgICAgICAgICAgIGVycm9ycy5yZW1vdmUocGF0aCk7DQogICAgICAgICAgICAgICAgaW5zdGFuY2VPcHRpb25zLnJvb3RGaWxlSW5mbyA9IG5ld0ZpbGVJbmZvOw0KICAgICAgICAgICAgICAgIGxlc3MucmVuZGVyKGRhdGEsIGluc3RhbmNlT3B0aW9ucywgZnVuY3Rpb24gKGUsIHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZS5ocmVmID0gcGF0aDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0Q1NTKHNoZWV0LmhyZWYsIHdlYkluZm8ubGFzdE1vZGlmaWVkLCBpbnN0YW5jZU9wdGlvbnMubW9kaWZ5VmFycywgcmVzdWx0LmNzcyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQuY3NzLCBkYXRhLCBzaGVldCwgd2ViSW5mbywgcGF0aCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZpbGVNYW5hZ2VyLmxvYWRGaWxlKHNoZWV0LmhyZWYsIG51bGwsIGluc3RhbmNlT3B0aW9ucywgZW52aXJvbm1lbnQpDQogICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZpbGUpIHsNCiAgICAgICAgICAgICAgICBsb2FkSW5pdGlhbEZpbGVDYWxsYmFjayhsb2FkZWRGaWxlKTsNCiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBsb2FkU3R5bGVTaGVldHMoY2FsbGJhY2ssIHJlbG9hZCwgbW9kaWZ5VmFycykgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZXNzLnNoZWV0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGxvYWRTdHlsZVNoZWV0KGxlc3Muc2hlZXRzW2ldLCBjYWxsYmFjaywgcmVsb2FkLCBsZXNzLnNoZWV0cy5sZW5ndGggLSAoaSArIDEpLCBtb2RpZnlWYXJzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBpbml0UnVubmluZ01vZGUoKSB7DQogICAgICAgICAgICBpZiAobGVzcy5lbnYgPT09ICdkZXZlbG9wbWVudCcpIHsNCiAgICAgICAgICAgICAgICBsZXNzLndhdGNoVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChsZXNzLndhdGNoTW9kZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU1hbmFnZXIuY2xlYXJGaWxlQ2FjaGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRTdHlsZVNoZWV0cyhmdW5jdGlvbiAoZSwgY3NzLCBfLCBzaGVldCwgd2ViSW5mbykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5hZGQoZSwgZS5ocmVmIHx8IHNoZWV0LmhyZWYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5jcmVhdGVDU1Mod2luZG93LmRvY3VtZW50LCBjc3MsIHNoZWV0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMucG9sbCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8NCiAgICAgICAgLy8gV2F0Y2ggbW9kZQ0KICAgICAgICAvLw0KICAgICAgICBsZXNzLndhdGNoID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCFsZXNzLndhdGNoTW9kZSkgew0KICAgICAgICAgICAgICAgIGxlc3MuZW52ID0gJ2RldmVsb3BtZW50JzsNCiAgICAgICAgICAgICAgICBpbml0UnVubmluZ01vZGUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMud2F0Y2hNb2RlID0gdHJ1ZTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9Ow0KICAgICAgICBsZXNzLnVud2F0Y2ggPSBmdW5jdGlvbiAoKSB7IGNsZWFySW50ZXJ2YWwobGVzcy53YXRjaFRpbWVyKTsgdGhpcy53YXRjaE1vZGUgPSBmYWxzZTsgcmV0dXJuIGZhbHNlOyB9Ow0KICAgICAgICAvLw0KICAgICAgICAvLyBTeW5jaHJvbm91c2x5IGdldCBhbGwgPGxpbms+IHRhZ3Mgd2l0aCB0aGUgJ3JlbCcgYXR0cmlidXRlIHNldCB0bw0KICAgICAgICAvLyAic3R5bGVzaGVldC9sZXNzIi4NCiAgICAgICAgLy8NCiAgICAgICAgbGVzcy5yZWdpc3RlclN0eWxlc2hlZXRzSW1tZWRpYXRlbHkgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgbGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGluaycpOw0KICAgICAgICAgICAgbGVzcy5zaGVldHMgPSBbXTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAobGlua3NbaV0ucmVsID09PSAnc3R5bGVzaGVldC9sZXNzJyB8fCAobGlua3NbaV0ucmVsLm1hdGNoKC9zdHlsZXNoZWV0LykgJiYNCiAgICAgICAgICAgICAgICAgICAgKGxpbmtzW2ldLnR5cGUubWF0Y2godHlwZVBhdHRlcm4pKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgbGVzcy5zaGVldHMucHVzaChsaW5rc1tpXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICAvLw0KICAgICAgICAvLyBBc3luY2hyb25vdXNseSBnZXQgYWxsIDxsaW5rPiB0YWdzIHdpdGggdGhlICdyZWwnIGF0dHJpYnV0ZSBzZXQgdG8NCiAgICAgICAgLy8gInN0eWxlc2hlZXQvbGVzcyIsIHJldHVybmluZyBhIFByb21pc2UuDQogICAgICAgIC8vDQogICAgICAgIGxlc3MucmVnaXN0ZXJTdHlsZXNoZWV0cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgICAgIGxlc3MucmVnaXN0ZXJTdHlsZXNoZWV0c0ltbWVkaWF0ZWx5KCk7DQogICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgIH0pOyB9Ow0KICAgICAgICAvLw0KICAgICAgICAvLyBXaXRoIHRoaXMgZnVuY3Rpb24sIGl0J3MgcG9zc2libGUgdG8gYWx0ZXIgdmFyaWFibGVzIGFuZCByZS1yZW5kZXINCiAgICAgICAgLy8gQ1NTIHdpdGhvdXQgcmVsb2FkaW5nIGxlc3MtZmlsZXMNCiAgICAgICAgLy8NCiAgICAgICAgbGVzcy5tb2RpZnlWYXJzID0gZnVuY3Rpb24gKHJlY29yZCkgeyByZXR1cm4gbGVzcy5yZWZyZXNoKHRydWUsIHJlY29yZCwgZmFsc2UpOyB9Ow0KICAgICAgICBsZXNzLnJlZnJlc2ggPSBmdW5jdGlvbiAocmVsb2FkLCBtb2RpZnlWYXJzLCBjbGVhckZpbGVDYWNoZSkgew0KICAgICAgICAgICAgaWYgKChyZWxvYWQgfHwgY2xlYXJGaWxlQ2FjaGUpICYmIGNsZWFyRmlsZUNhY2hlICE9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgIGZpbGVNYW5hZ2VyLmNsZWFyRmlsZUNhY2hlKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgICAgICAgICAgIHZhciBzdGFydFRpbWU7DQogICAgICAgICAgICAgICAgdmFyIGVuZFRpbWU7DQogICAgICAgICAgICAgICAgdmFyIHRvdGFsTWlsbGlzZWNvbmRzOw0KICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdTaGVldHM7DQogICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gZW5kVGltZSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgLy8gU2V0IGNvdW50ZXIgZm9yIHJlbWFpbmluZyB1bnByb2Nlc3NlZCBzaGVldHMNCiAgICAgICAgICAgICAgICByZW1haW5pbmdTaGVldHMgPSBsZXNzLnNoZWV0cy5sZW5ndGg7DQogICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1NoZWV0cyA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxNaWxsaXNlY29uZHMgPSBlbmRUaW1lIC0gc3RhcnRUaW1lOw0KICAgICAgICAgICAgICAgICAgICBsZXNzLmxvZ2dlci5pbmZvKCdMZXNzIGhhcyBmaW5pc2hlZCBhbmQgbm8gc2hlZXRzIHdlcmUgbG9hZGVkLicpOw0KICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZTogZW5kVGltZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsTWlsbGlzZWNvbmRzOiB0b3RhbE1pbGxpc2Vjb25kcywNCiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0czogbGVzcy5zaGVldHMubGVuZ3RoDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gUmVsaWVzIG9uIGxlc3Muc2hlZXRzIGFycmF5LCBjYWxsYmFjayBzZWVtcyB0byBiZSBndWFyYW50ZWVkIHRvIGJlIGNhbGxlZCBmb3IgZXZlcnkgZWxlbWVudCBvZiB0aGUgYXJyYXkNCiAgICAgICAgICAgICAgICAgICAgbG9hZFN0eWxlU2hlZXRzKGZ1bmN0aW9uIChlLCBjc3MsIF8sIHNoZWV0LCB3ZWJJbmZvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5hZGQoZSwgZS5ocmVmIHx8IHNoZWV0LmhyZWYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2ViSW5mby5sb2NhbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlc3MubG9nZ2VyLmluZm8oIkxvYWRpbmcgIiArIHNoZWV0LmhyZWYgKyAiIGZyb20gY2FjaGUuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXNzLmxvZ2dlci5pbmZvKCJSZW5kZXJlZCAiICsgc2hlZXQuaHJlZiArICIgc3VjY2Vzc2Z1bGx5LiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5jcmVhdGVDU1Mod2luZG93LmRvY3VtZW50LCBjc3MsIHNoZWV0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxlc3MubG9nZ2VyLmluZm8oIkNTUyBmb3IgIiArIHNoZWV0LmhyZWYgKyAiIGdlbmVyYXRlZCBpbiAiICsgKG5ldyBEYXRlKCkgLSBlbmRUaW1lKSArICJtcyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnQgY29tcGxldGVkIHNoZWV0DQogICAgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdTaGVldHMtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBsYXN0IHJlbWFpbmluZyBzaGVldCB3YXMgcHJvY2Vzc2VkIGFuZCB0aGVuIGNhbGwgdGhlIHByb21pc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdTaGVldHMgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kcyA9IG5ldyBEYXRlKCkgLSBzdGFydFRpbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVzcy5sb2dnZXIuaW5mbygiTGVzcyBoYXMgZmluaXNoZWQuIENTUyBnZW5lcmF0ZWQgaW4gIiArIHRvdGFsTWlsbGlzZWNvbmRzICsgIm1zIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lOiBlbmRUaW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kczogdG90YWxNaWxsaXNlY29uZHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0czogbGVzcy5zaGVldHMubGVuZ3RoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwgcmVsb2FkLCBtb2RpZnlWYXJzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbG9hZFN0eWxlcyhtb2RpZnlWYXJzKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9Ow0KICAgICAgICBsZXNzLnJlZnJlc2hTdHlsZXMgPSBsb2FkU3R5bGVzOw0KICAgICAgICByZXR1cm4gbGVzczsNCiAgICB9KTsKCiAgICAvKioNCiAgICAgKiBLaWNrcyBvZmYgbGVzcyBhbmQgY29tcGlsZXMgYW55IHN0eWxlc2hlZXRzDQogICAgICogdXNlZCBpbiB0aGUgYnJvd3NlciBkaXN0cmlidXRlZCB2ZXJzaW9uIG9mIGxlc3MNCiAgICAgKiB0byBraWNrLXN0YXJ0IGxlc3MgdXNpbmcgdGhlIGJyb3dzZXIgYXBpDQogICAgICovDQogICAgdmFyIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucygpOw0KICAgIGlmICh3aW5kb3cubGVzcykgew0KICAgICAgICBmb3IgKHZhciBrZXkgaW4gd2luZG93Lmxlc3MpIHsNCiAgICAgICAgICAgIGlmICh3aW5kb3cubGVzcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7DQogICAgICAgICAgICAgICAgb3B0aW9uc1trZXldID0gd2luZG93Lmxlc3Nba2V5XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBhZGREZWZhdWx0T3B0aW9ucyh3aW5kb3csIG9wdGlvbnMpOw0KICAgIG9wdGlvbnMucGx1Z2lucyA9IG9wdGlvbnMucGx1Z2lucyB8fCBbXTsNCiAgICBpZiAod2luZG93LkxFU1NfUExVR0lOUykgew0KICAgICAgICBvcHRpb25zLnBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMuY29uY2F0KHdpbmRvdy5MRVNTX1BMVUdJTlMpOw0KICAgIH0NCiAgICB2YXIgbGVzcyA9IHJvb3Qod2luZG93LCBvcHRpb25zKTsNCiAgICB3aW5kb3cubGVzcyA9IGxlc3M7DQogICAgdmFyIGNzczsNCiAgICB2YXIgaGVhZDsNCiAgICB2YXIgc3R5bGU7DQogICAgLy8gQWx3YXlzIHJlc3RvcmUgcGFnZSB2aXNpYmlsaXR5DQogICAgZnVuY3Rpb24gcmVzb2x2ZU9yUmVqZWN0KGRhdGEpIHsNCiAgICAgICAgaWYgKGRhdGEuZmlsZW5hbWUpIHsNCiAgICAgICAgICAgIGNvbnNvbGUud2FybihkYXRhKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIW9wdGlvbnMuYXN5bmMpIHsNCiAgICAgICAgICAgIGhlYWQucmVtb3ZlQ2hpbGQoc3R5bGUpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChvcHRpb25zLm9uUmVhZHkpIHsNCiAgICAgICAgaWYgKC8hd2F0Y2gvLnRlc3Qod2luZG93LmxvY2F0aW9uLmhhc2gpKSB7DQogICAgICAgICAgICBsZXNzLndhdGNoKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gU2ltdWxhdGUgc3luY2hyb25vdXMgc3R5bGVzaGVldCBsb2FkaW5nIGJ5IGhpZGluZyBwYWdlIHJlbmRlcmluZw0KICAgICAgICBpZiAoIW9wdGlvbnMuYXN5bmMpIHsNCiAgICAgICAgICAgIGNzcyA9ICdib2R5IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50IH0nOw0KICAgICAgICAgICAgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsNCiAgICAgICAgICAgIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsNCiAgICAgICAgICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnOw0KICAgICAgICAgICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHsNCiAgICAgICAgICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOw0KICAgICAgICB9DQogICAgICAgIGxlc3MucmVnaXN0ZXJTdHlsZXNoZWV0c0ltbWVkaWF0ZWx5KCk7DQogICAgICAgIGxlc3MucGFnZUxvYWRGaW5pc2hlZCA9IGxlc3MucmVmcmVzaChsZXNzLmVudiA9PT0gJ2RldmVsb3BtZW50JykudGhlbihyZXNvbHZlT3JSZWplY3QsIHJlc29sdmVPclJlamVjdCk7DQogICAgfQoKICAgIHJldHVybiBsZXNzOwoKfSkpKTsK"},{"meta":{"name":"md5-wasm.min.js","url":"https://cdn.staticfile.org/md5-wasm/1.0.2/md5-wasm.min.js","ts":1642048881115,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKCl7dmFyIEIscSxRLEMsbyxFLG0sWixILGgsayxwLFIsSyxYLG49ITEsZT0hMSx0PSExO2NvbnN0IEk9ZnVuY3Rpb24oQSxCKXtBPUQud29yZHNUb0J5dGVzKGZ1bmN0aW9uKEEpeyhuZXcgRGF0ZSkuZ2V0VGltZSgpO2Zvcih2YXIgQixRLEMsbyxFLG4sZSx0LEksZyxyLHcsaSxzLGMsZixhLGIsTSx1LEc9MTczMjU4NDE5MyxsPS0yNzE3MzM4NzksVz0tMTczMjU4NDE5NCxkPTI3MTczMzg3OCxqPTgqQS5sZW5ndGgseT1ELmJ5dGVzVG9Xb3JkcyhBKSxKPTA7Sjx5Lmxlbmd0aDtKKyspeVtKXT0xNjcxMTkzNSYoeVtKXTw8OHx5W0pdPj4+MjQpfDQyNzgyNTUzNjAmKHlbSl08PDI0fHlbSl0+Pj44KTt5W2o+Pj41XXw9MTI4PDxqJTMyLHlbMTQrKDY0K2o+Pj45PDw0KV09ajtmb3IodmFyIHY9MDt2PHkubGVuZ3RoO3YrPTE2KWE9RyxiPWwsTT1XLHU9ZCxCPXlbdiswXT4+PjAsUT15W3YrMV0+Pj4wLEM9eVt2KzJdPj4+MCxvPXlbdiszXT4+PjAsRT15W3YrNF0+Pj4wLG49eVt2KzVdPj4+MCxlPXlbdis2XT4+PjAsdD15W3YrN10+Pj4wLEk9eVt2KzhdPj4+MCxnPXlbdis5XT4+PjAscj15W3YrMTBdPj4+MCx3PXlbdisxMV0+Pj4wLGk9eVt2KzEyXT4+PjAscz15W3YrMTNdPj4+MCxjPXlbdisxNF0+Pj4wLGY9eVt2KzE1XT4+PjAsRz1GKDcsMjUsRysobCZXfH5sJmQpK0ItNjgwODc2OTM2KStsLGQ9RigxMiwyMCxkKyhHJmx8fkcmVykrUS0zODk1NjQ1ODYpK0csVz1GKDE3LDE1LFcrKGQmR3x+ZCZsKStDKzYwNjEwNTgxOSkrZCxsPUYoMjIsMTAsbCsoVyZkfH5XJkcpK28tMTA0NDUyNTMzMCkrVyxHPUYoNywyNSxHKyhsJld8fmwmZCkrRS0xNzY0MTg4OTcpK2wsZD1GKDEyLDIwLGQrKEcmbHx+RyZXKStuKzEyMDAwODA0MjYpK0csVz1GKDE3LDE1LFcrKGQmR3x+ZCZsKStlLTE0NzMyMzEzNDEpK2QsbD1GKDIyLDEwLGwrKFcmZHx+VyZHKSt0LTQ1NzA1OTgzKStXLEc9Rig3LDI1LEcrKGwmV3x+bCZkKStJKzE3NzAwMzU0MTYpK2wsZD1GKDEyLDIwLGQrKEcmbHx+RyZXKStnLTE5NTg0MTQ0MTcpK0csVz1GKDE3LDE1LFcrKGQmR3x+ZCZsKStyLTQyMDYzKStkLGw9RigyMiwxMCxsKyhXJmR8flcmRykrdy0xOTkwNDA0MTYyKStXLEc9Rig3LDI1LEcrKGwmV3x+bCZkKStpKzE4MDQ2MDM2ODIpK2wsZD1GKDEyLDIwLGQrKEcmbHx+RyZXKStzLTQwMzQxMTAxKStHLFc9RigxNywxNSxXKyhkJkd8fmQmbCkrYy0xNTAyMDAyMjkwKStkLGw9RigyMiwxMCxsKyhXJmR8flcmRykrZisxMjM2NTM1MzI5KStXLEc9Rig1LDI3LEcrKGwmZHxXJn5kKStRLTE2NTc5NjUxMCkrbCxkPUYoOSwyMyxkKyhHJld8bCZ+VykrZS0xMDY5NTAxNjMyKStHLFc9RigxNCwxOCxXKyhkJmx8RyZ+bCkrdys2NDM3MTc3MTMpK2QsbD1GKDIwLDEyLGwrKFcmR3xkJn5HKStCLTM3Mzg5NzMwMikrVyxHPUYoNSwyNyxHKyhsJmR8VyZ+ZCkrbi03MDE1NTg2OTEpK2wsZD1GKDksMjMsZCsoRyZXfGwmflcpK3IrMzgwMTYwODMpK0csVz1GKDE0LDE4LFcrKGQmbHxHJn5sKStmLTY2MDQ3ODMzNSkrZCxsPUYoMjAsMTIsbCsoVyZHfGQmfkcpK0UtNDA1NTM3ODQ4KStXLEc9Rig1LDI3LEcrKGwmZHxXJn5kKStnKzU2ODQ0NjQzOCkrbCxkPUYoOSwyMyxkKyhHJld8bCZ+VykrYy0xMDE5ODAzNjkwKStHLFc9RigxNCwxOCxXKyhkJmx8RyZ+bCkrby0xODczNjM5NjEpK2QsbD1GKDIwLDEyLGwrKFcmR3xkJn5HKStJKzExNjM1MzE1MDEpK1csRz1GKDUsMjcsRysobCZkfFcmfmQpK3MtMTQ0NDY4MTQ2NykrbCxkPUYoOSwyMyxkKyhHJld8bCZ+VykrQy01MTQwMzc4NCkrRyxXPUYoMTQsMTgsVysoZCZsfEcmfmwpK3QrMTczNTMyODQ3MykrZCxsPUYoMjAsMTIsbCsoVyZHfGQmfkcpK2ktMTkyNjYwNzczNCkrVyxHPUYoNCwyOCxHKyhsXldeZCkrbi0zNzg1NTgpK2wsZD1GKDExLDIxLGQrKEdebF5XKStJLTIwMjI1NzQ0NjMpK0csVz1GKDE2LDE2LFcrKGReR15sKSt3KzE4MzkwMzA1NjIpK2QsbD1GKDIzLDksbCsoV15kXkcpK2MtMzUzMDk1NTYpK1csRz1GKDQsMjgsRysobF5XXmQpK1EtMTUzMDk5MjA2MCkrbCxkPUYoMTEsMjEsZCsoR15sXlcpK0UrMTI3Mjg5MzM1MykrRyxXPUYoMTYsMTYsVysoZF5HXmwpK3QtMTU1NDk3NjMyKStkLGw9RigyMyw5LGwrKFdeZF5HKStyLTEwOTQ3MzA2NDApK1csRz1GKDQsMjgsRysobF5XXmQpK3MrNjgxMjc5MTc0KStsLGQ9RigxMSwyMSxkKyhHXmxeVykrQi0zNTg1MzcyMjIpK0csVz1GKDE2LDE2LFcrKGReR15sKStvLTcyMjUyMTk3OSkrZCxsPUYoMjMsOSxsKyhXXmReRykrZSs3NjAyOTE4OSkrVyxHPUYoNCwyOCxHKyhsXldeZCkrZy02NDAzNjQ0ODcpK2wsZD1GKDExLDIxLGQrKEdebF5XKStpLTQyMTgxNTgzNSkrRyxXPUYoMTYsMTYsVysoZF5HXmwpK2YrNTMwNzQyNTIwKStkLGw9RigyMyw5LGwrKFdeZF5HKStDLTk5NTMzODY1MSkrVyxHPUYoNiwyNixHKyhXXihsfH5kKSkrQi0xOTg2MzA4NDQpK2wsZD1GKDEwLDIyLGQrKGxeKEd8flcpKSt0KzExMjY4OTE0MTUpK0csVz1GKDE1LDE3LFcrKEdeKGR8fmwpKStjLTE0MTYzNTQ5MDUpK2QsbD1GKDIxLDExLGwrKGReKFd8fkcpKStuLTU3NDM0MDU1KStXLEc9Rig2LDI2LEcrKFdeKGx8fmQpKStpKzE3MDA0ODU1NzEpK2wsZD1GKDEwLDIyLGQrKGxeKEd8flcpKStvLTE4OTQ5ODY2MDYpK0csVz1GKDE1LDE3LFcrKEdeKGR8fmwpKStyLTEwNTE1MjMpK2QsbD1GKDIxLDExLGwrKGReKFd8fkcpKStRLTIwNTQ5MjI3OTkpK1csRz1GKDYsMjYsRysoV14obHx+ZCkpK0krMTg3MzMxMzM1OSkrbCxkPUYoMTAsMjIsZCsobF4oR3x+VykpK2YtMzA2MTE3NDQpK0csVz1GKDE1LDE3LFcrKEdeKGR8fmwpKStlLTE1NjAxOTgzODApK2QsbD1GKDIxLDExLGwrKGReKFd8fkcpKStzKzEzMDkxNTE2NDkpK1csRz1GKDYsMjYsRysoV14obHx+ZCkpK0UtMTQ1NTIzMDcwKStsLGQ9RigxMCwyMixkKyhsXihHfH5XKSkrdy0xMTIwMjEwMzc5KStHLFc9RigxNSwxNyxXKyhHXihkfH5sKSkrQys3MTg3ODcyNTkpK2QsbD1GKDIxLDExLGwrKGReKFd8fkcpKStnLTM0MzQ4NTU1MSkrVyxHPUcrYT4+PjAsbD1sK2I+Pj4wLFc9VytNPj4+MCxkPWQrdT4+PjA7cmV0dXJuIEQuZW5kaWFuKFtHLGwsVyxkXSk7ZnVuY3Rpb24gRihBLEIsUSl7cmV0dXJuIFE8PEF8UT4+PkJ9fShBKSk7cmV0dXJuIEImJkIuYXNCeXRlcz9BOkQuYnl0ZXNUb0hleChBKX0sZz1mdW5jdGlvbihBLEIpe0E9RC53b3Jkc1RvQnl0ZXModyhBKSk7cmV0dXJuIEImJkIuYXNCeXRlcz9BOkQuYnl0ZXNUb0hleChBKX0sRD17cm90bDpmdW5jdGlvbihBLEIpe3JldHVybiBBPDxCfEE+Pj4zMi1CfSxyb3RyOmZ1bmN0aW9uKEEsQil7cmV0dXJuIEE8PDMyLUJ8QT4+PkJ9LGVuZGlhbjpmdW5jdGlvbihBKXtpZihBLmNvbnN0cnVjdG9yPT1OdW1iZXIpcmV0dXJuIDE2NzExOTM1JkQucm90bChBLDgpfDQyNzgyNTUzNjAmRC5yb3RsKEEsMjQpO2Zvcih2YXIgQj0wO0I8QS5sZW5ndGg7QisrKUFbQl09RC5lbmRpYW4oQVtCXSk7cmV0dXJuIEF9LGJ5dGVzVG9Xb3JkczpmdW5jdGlvbihBKXtmb3IodmFyIEI9W10sUT0wLEM9MDtRPEEubGVuZ3RoO1ErKyxDKz04KUJbQz4+PjVdfD1BW1FdPDwyNC1DJTMyO3JldHVybiBCfSx3b3Jkc1RvQnl0ZXM6ZnVuY3Rpb24oQSl7Zm9yKHZhciBCPVtdLFE9MDtRPDMyKkEubGVuZ3RoO1ErPTgpQi5wdXNoKEFbUT4+PjVdPj4+MjQtUSUzMiYyNTUpO3JldHVybiBCfSxieXRlc1RvSGV4OmZ1bmN0aW9uKEEpe2Zvcih2YXIgQj1bXSxRPTA7UTxBLmxlbmd0aDtRKyspQi5wdXNoKChBW1FdPj4+NCkudG9TdHJpbmcoMTYpKSxCLnB1c2goKDE1JkFbUV0pLnRvU3RyaW5nKDE2KSk7cmV0dXJuIEIuam9pbigiIil9LGhleFRvQnl0ZXM6ZnVuY3Rpb24oQSl7Zm9yKHZhciBCPVtdLFE9MDtRPEEubGVuZ3RoO1ErPTIpQi5wdXNoKHBhcnNlSW50KEEuc3Vic3RyKFEsMiksMTYpKTtyZXR1cm4gQn19LFU9NjE0NDAsTD1NYXRoLmZsb29yKDE2KlUqMS4wNjY2NjY2NjcpLHI9e307ZnVuY3Rpb24gdyhBLEIpeyhuZXcgRGF0ZSkuZ2V0VGltZSgpO3ZhciBRLEMsbyxFLG4sZSx0LEksZyxyLHcsaSxzLGMsZixhLGIsTSx1LEcsbCxXPTE3MzI1ODQxOTMsZD0tMjcxNzMzODc5LGo9LTE3MzI1ODQxOTQseT0yNzE3MzM4NzgsSj0wLHY9OCpBLmxlbmd0aCxGPWZ1bmN0aW9uKEEsQil7dmFyIFEsQyxvLEUsbj0tMSxlPU1hdGguZmxvb3IoKEEubGVuZ3RoLTEpLzQpLHQ9MDtmb3IoO2UtOD5uKys7KXQ9bjw8MixCW25dPUFbdCswXXxBW3QrMV08PDh8QVt0KzJdPDwxNnxBW3QrM108PDI0O24tLTtmb3IoO2U+bisrOylRPXZvaWQgMD09PUFbKHQ9bjw8MikrMF0/MDpBW3QrMF0sQz12b2lkIDA9PT1BW3QrMV0/MDpBW3QrMV0sbz12b2lkIDA9PT1BW3QrMl0/MDpBW3QrMl0sRT12b2lkIDA9PT1BW3QrM10/MDpBW3QrM10sQltuXT1RfEM8PDh8bzw8MTZ8RTw8MjQ7cmV0dXJuIGUrMX0oQSxxKTtmb3IocVt2Pj4+NV18PTEyODw8diUzMixGPTE1Kyg2NCsocVsxNCsoNjQrdj4+Pjk8PDQpXT12KT4+Pjk8PDQpLGw9cTtKPEY7KUY+SitMPyhwKFcpLFIoZCksSyhqKSxYKHkpLG0oVSksSis9MTYqVSxXPVooKSxkPUgoKSxqPWgoKSx5PWsoKSwwKTooYj1XLE09ZCx1PWosRz15LFE9bFtKKzBdPj4+MCxDPWxbSisxXT4+PjAsbz1sW0orMl0+Pj4wLEU9bFtKKzNdPj4+MCxuPWxbSis0XT4+PjAsZT1sW0orNV0+Pj4wLHQ9bFtKKzZdPj4+MCxJPWxbSis3XT4+PjAsZz1sW0orOF0+Pj4wLHI9bFtKKzldPj4+MCx3PWxbSisxMF0+Pj4wLGk9bFtKKzExXT4+PjAscz1sW0orMTJdPj4+MCxjPWxbSisxM10+Pj4wLGY9bFtKKzE0XT4+PjAsYT1sW0orMTVdPj4+MCxXPXgoNywyNSxXKyhkJmp8fmQmeSkrUS02ODA4NzY5MzYpK2QseT14KDEyLDIwLHkrKFcmZHx+VyZqKStDLTM4OTU2NDU4NikrVyxqPXgoMTcsMTUsaisoeSZXfH55JmQpK28rNjA2MTA1ODE5KSt5LGQ9eCgyMiwxMCxkKyhqJnl8fmomVykrRS0xMDQ0NTI1MzMwKStqLFc9eCg3LDI1LFcrKGQmanx+ZCZ5KStuLTE3NjQxODg5NykrZCx5PXgoMTIsMjAseSsoVyZkfH5XJmopK2UrMTIwMDA4MDQyNikrVyxqPXgoMTcsMTUsaisoeSZXfH55JmQpK3QtMTQ3MzIzMTM0MSkreSxkPXgoMjIsMTAsZCsoaiZ5fH5qJlcpK0ktNDU3MDU5ODMpK2osVz14KDcsMjUsVysoZCZqfH5kJnkpK2crMTc3MDAzNTQxNikrZCx5PXgoMTIsMjAseSsoVyZkfH5XJmopK3ItMTk1ODQxNDQxNykrVyxqPXgoMTcsMTUsaisoeSZXfH55JmQpK3ctNDIwNjMpK3ksZD14KDIyLDEwLGQrKGomeXx+aiZXKStpLTE5OTA0MDQxNjIpK2osVz14KDcsMjUsVysoZCZqfH5kJnkpK3MrMTgwNDYwMzY4MikrZCx5PXgoMTIsMjAseSsoVyZkfH5XJmopK2MtNDAzNDExMDEpK1csaj14KDE3LDE1LGorKHkmV3x+eSZkKStmLTE1MDIwMDIyOTApK3ksZD14KDIyLDEwLGQrKGomeXx+aiZXKSthKzEyMzY1MzUzMjkpK2osVz14KDUsMjcsVysoZCZ5fGomfnkpK0MtMTY1Nzk2NTEwKStkLHk9eCg5LDIzLHkrKFcmanxkJn5qKSt0LTEwNjk1MDE2MzIpK1csaj14KDE0LDE4LGorKHkmZHxXJn5kKStpKzY0MzcxNzcxMykreSxkPXgoMjAsMTIsZCsoaiZXfHkmflcpK1EtMzczODk3MzAyKStqLFc9eCg1LDI3LFcrKGQmeXxqJn55KStlLTcwMTU1ODY5MSkrZCx5PXgoOSwyMyx5KyhXJmp8ZCZ+aikrdyszODAxNjA4MykrVyxqPXgoMTQsMTgsaisoeSZkfFcmfmQpK2EtNjYwNDc4MzM1KSt5LGQ9eCgyMCwxMixkKyhqJld8eSZ+Vykrbi00MDU1Mzc4NDgpK2osVz14KDUsMjcsVysoZCZ5fGomfnkpK3IrNTY4NDQ2NDM4KStkLHk9eCg5LDIzLHkrKFcmanxkJn5qKStmLTEwMTk4MDM2OTApK1csaj14KDE0LDE4LGorKHkmZHxXJn5kKStFLTE4NzM2Mzk2MSkreSxkPXgoMjAsMTIsZCsoaiZXfHkmflcpK2crMTE2MzUzMTUwMSkraixXPXgoNSwyNyxXKyhkJnl8aiZ+eSkrYy0xNDQ0NjgxNDY3KStkLHk9eCg5LDIzLHkrKFcmanxkJn5qKStvLTUxNDAzNzg0KStXLGo9eCgxNCwxOCxqKyh5JmR8VyZ+ZCkrSSsxNzM1MzI4NDczKSt5LGQ9eCgyMCwxMixkKyhqJld8eSZ+Vykrcy0xOTI2NjA3NzM0KStqLFc9eCg0LDI4LFcrKGReal55KStlLTM3ODU1OCkrZCx5PXgoMTEsMjEseSsoV15kXmopK2ctMjAyMjU3NDQ2MykrVyxqPXgoMTYsMTYsaisoeV5XXmQpK2krMTgzOTAzMDU2MikreSxkPXgoMjMsOSxkKyhqXnleVykrZi0zNTMwOTU1NikraixXPXgoNCwyOCxXKyhkXmpeeSkrQy0xNTMwOTkyMDYwKStkLHk9eCgxMSwyMSx5KyhXXmReaikrbisxMjcyODkzMzUzKStXLGo9eCgxNiwxNixqKyh5XldeZCkrSS0xNTU0OTc2MzIpK3ksZD14KDIzLDksZCsoal55XlcpK3ctMTA5NDczMDY0MCkraixXPXgoNCwyOCxXKyhkXmpeeSkrYys2ODEyNzkxNzQpK2QseT14KDExLDIxLHkrKFdeZF5qKStRLTM1ODUzNzIyMikrVyxqPXgoMTYsMTYsaisoeV5XXmQpK0UtNzIyNTIxOTc5KSt5LGQ9eCgyMyw5LGQrKGpeeV5XKSt0Kzc2MDI5MTg5KStqLFc9eCg0LDI4LFcrKGReal55KStyLTY0MDM2NDQ4NykrZCx5PXgoMTEsMjEseSsoV15kXmopK3MtNDIxODE1ODM1KStXLGo9eCgxNiwxNixqKyh5XldeZCkrYSs1MzA3NDI1MjApK3ksZD14KDIzLDksZCsoal55XlcpK28tOTk1MzM4NjUxKStqLFc9eCg2LDI2LFcrKGpeKGR8fnkpKStRLTE5ODYzMDg0NCkrZCx5PXgoMTAsMjIseSsoZF4oV3x+aikpK0krMTEyNjg5MTQxNSkrVyxqPXgoMTUsMTcsaisoV14oeXx+ZCkpK2YtMTQxNjM1NDkwNSkreSxkPXgoMjEsMTEsZCsoeV4oanx+VykpK2UtNTc0MzQwNTUpK2osVz14KDYsMjYsVysoal4oZHx+eSkpK3MrMTcwMDQ4NTU3MSkrZCx5PXgoMTAsMjIseSsoZF4oV3x+aikpK0UtMTg5NDk4NjYwNikrVyxqPXgoMTUsMTcsaisoV14oeXx+ZCkpK3ctMTA1MTUyMykreSxkPXgoMjEsMTEsZCsoeV4oanx+VykpK0MtMjA1NDkyMjc5OSkraixXPXgoNiwyNixXKyhqXihkfH55KSkrZysxODczMzEzMzU5KStkLHk9eCgxMCwyMix5KyhkXihXfH5qKSkrYS0zMDYxMTc0NCkrVyxqPXgoMTUsMTcsaisoV14oeXx+ZCkpK3QtMTU2MDE5ODM4MCkreSxkPXgoMjEsMTEsZCsoeV4oanx+VykpK2MrMTMwOTE1MTY0OSkraixXPXgoNiwyNixXKyhqXihkfH55KSkrbi0xNDU1MjMwNzApK2QseT14KDEwLDIyLHkrKGReKFd8fmopKStpLTExMjAyMTAzNzkpK1csaj14KDE1LDE3LGorKFdeKHl8fmQpKStvKzcxODc4NzI1OSkreSxkPXgoMjEsMTEsZCsoeV4oanx+VykpK3ItMzQzNDg1NTUxKStqLEorPTE2LFc9VytiPj4+MCxkPWQrTT4+PjAsaj1qK3U+Pj4wLHk9eStHPj4+MCk7cmV0dXJuIEQuZW5kaWFuKFtXLGQsaix5XSk7ZnVuY3Rpb24geChBLEIsUSl7cmV0dXJuIFE8PEF8UT4+PkJ9fWNvbnN0IGk9KCJmdW5jdGlvbiIhPXR5cGVvZiBhdG9iJiYiZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZT9yZXF1aXJlKCJhdG9iIik6YXRvYikoIkFHRnpiUUVBQUFBQkpRWmdBWDhBWUFBQVlBSi9md0JnQ0g5L2YzOS9mMzkvQVg5Z0JIOS9mMzhCZjJBQUFYOENIZ0lIYVcxd2IzSjBjd05zYjJjQUFBZHBiWEJ2Y25SekEyMWxiUUlBQVFNek1nQUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBd1FGQlFVRkJRQUFBQUFBQmtnTGZ3RkJnY2FVdWdZTGZ3RkJpZGUyL240TGZ3RkIvcm5yeFhrTGZ3RkI5cWpKZ1FFTGZ3RkJBQXQvQVVFQUMzOEJRUUFMZndGQkFBdC9BVUVBQzM4QlFRQUxmd0ZCQUFzSHZBSWxCM0YxWVVaMWJHd0FKd2h2Ym1WR2RXeHNRUUFYQ0c5dVpVWjFiR3hDQUJnSWIyNWxSblZzYkVNQUdRaHZibVZHZFd4c1JBQWFCV3h2YjNCekFBRUViRzl2Y0FBQ0JXeHZiM0JCQUFNR2JHOXZjRUV4QUFRR2JHOXZjRUV5QUFVR2JHOXZjRUV6QUFZR2JHOXZjRUUwQUFjRmJHOXZjRUlBQ0Fac2IyOXdRakVBQ1Fac2IyOXdRaklBQ2dac2IyOXdRak1BQ3dac2IyOXdRalFBREFWc2IyOXdRd0FOQm14dmIzQkRNUUFPQm14dmIzQkRNZ0FQQm14dmIzQkRNd0FRQm14dmIzQkROQUFSQld4dmIzQkVBQklHYkc5dmNFUXhBQk1HYkc5dmNFUXlBQlFHYkc5dmNFUXpBQlVHYkc5dmNFUTBBQllFWjJWMFFRQXBCR2RsZEVJQUtnUm5aWFJEQUNzRVoyVjBSQUFzQkdkbGRGZ0FMUVJ6WlhSQkFDNEVjMlYwUWdBdkJITmxkRU1BTUFSelpYUkVBREVFYzJWMFdBQXlDc29QTWxzQkFYOUJBQ1FJSUFCQkJuUWhBUUpBQTBBakNDQUJSZzBCSXdBa0JDTUJKQVVqQWlRR0l3TWtCeEFDSXdRakFHb2tBQ01GSXdGcUpBRWpCaU1DYWlRQ0l3Y2pBMm9rQXlNSVFjQUFhaVFJREFBTEN5TUlJd3BxSkFvTEVRQWpDQ01LYWlRSkVBTVFDQkFORUJJTENnQVFCQkFGRUFZUUJ3dENBRUg0eUtxN2ZVRUFJd2xxS0FJQUVCZEIxdTZleG41QkJDTUphaWdDQUJBYVFkdmhnYUVDUVFnakNXb29BZ0FRR1VIdW5mZU5mRUVNSXdscUtBSUFFQmdMUVFCQnI1L3dxMzlCRUNNSmFpZ0NBQkFYUWFxTW43d0VRUlFqQ1dvb0FnQVFHa0dUak1IQmVrRVlJd2xxS0FJQUVCbEJnYXFhYWtFY0l3bHFLQUlBRUJnTFFBQkIyTEdDekFaQklDTUphaWdDQUJBWFFhL3ZrOXA0UVNRakNXb29BZ0FRR2tHeHQzMUJLQ01KYWlnQ0FCQVpRYjZ2ODhwNFFTd2pDV29vQWdBUUdBdEJBRUdpb3NEY0JrRXdJd2xxS0FJQUVCZEJrK1BoYkVFMEl3bHFLQUlBRUJwQmpvZmxzM3BCT0NNSmFpZ0NBQkFaUWFHUTBNMEVRVHdqQ1dvb0FnQVFHQXNLQUJBSkVBb1FDeEFNQzBJQVFlTEsrTEIvUVFRakNXb29BZ0FRRzBIQTVvS0NmRUVZSXdscUtBSUFFQjVCMGJUNXNnSkJMQ01KYWlnQ0FCQWRRYXFQMjgxK1FRQWpDV29vQWdBUUhBdEJBRUhkb0x5eGZVRVVJd2xxS0FJQUVCdEIwNmlRRWtFb0l3bHFLQUlBRUI1QmdjMkh4WDFCUENNSmFpZ0NBQkFkUWNqM3o3NStRUkFqQ1dvb0FnQVFIQXRDQUVIbW00ZVBBa0VrSXdscUtBSUFFQnRCMW8vY21YeEJPQ01KYWlnQ0FCQWVRWWViMUtaL1FRd2pDV29vQWdBUUhVSHRxZWlxQkVFZ0l3bHFLQUlBRUJ3TFFRQkJoZEtQejNwQk5DTUphaWdDQUJBYlFmakh2bWRCQ0NNSmFpZ0NBQkFlUWRtRnZMc0dRUndqQ1dvb0FnQVFIVUdLbWFucGVFRXdJd2xxS0FJQUVCd0xDZ0FRRGhBUEVCQVFFUXMvQUVIQzhtaEJGQ01KYWlnQ0FCQWZRWUh0eDd0NFFTQWpDV29vQWdBUUlrR2l3dlhzQmtFc0l3bHFLQUlBRUNGQmpQQ1ViMEU0SXdscUtBSUFFQ0FMUWdCQnhOVDdwWHBCQkNNSmFpZ0NBQkFmUWFtZis5NEVRUkFqQ1dvb0FnQVFJa0hnbHUyMWYwRWNJd2xxS0FJQUVDRkI4UGorOVh0QktDTUphaWdDQUJBZ0MwRUFRY2I5N2NRQ1FUUWpDV29vQWdBUUgwSDZ6NFRWZmtFQUl3bHFLQUlBRUNKQmhlRzhwMzFCRENNSmFpZ0NBQkFoUVlXNm9DUkJHQ01KYWlnQ0FCQWdDMElBUWJtZzA4NTlRU1FqQ1dvb0FnQVFIMEhscys2MmZrRXdJd2xxS0FJQUVDSkIrUG1KL1FGQlBDTUphaWdDQUJBaFFlV3NzYVY4UVFnakNXb29BZ0FRSUFzS0FCQVRFQlFRRlJBV0MwRUFRY1RFcEtGL1FRQWpDV29vQWdBUUkwR1gvNnVaQkVFY0l3bHFLQUlBRUNaQnA4ZlEzSHBCT0NNSmFpZ0NBQkFsUWJuQXptUkJGQ01KYWlnQ0FCQWtDMEVBUWNPejdhb0dRVEFqQ1dvb0FnQVFJMEdTbWJQNGVFRU1Jd2xxS0FJQUVDWkIvZWkvZjBFb0l3bHFLQUlBRUNWQjBidVJySGhCQkNNSmFpZ0NBQkFrQzBFQVFjLzhvZjBHUVNBakNXb29BZ0FRSTBIZ3piTnhRVHdqQ1dvb0FnQVFKa0dVaG9XWWVrRVlJd2xxS0FJQUVDVkJvYU9nOEFSQk5DTUphaWdDQUJBa0MwSUFRWUw5emJwL1FSQWpDV29vQWdBUUkwRzE1T3ZwZTBFc0l3bHFLQUlBRUNaQnU2WGYxZ0pCQ0NNSmFpZ0NBQkFsUVpHbm05eCtRU1FqQ1dvb0FnQVFKQXNyQVFGL1FYOGpBWE1qQTNFakFTTUNjWElqQUdvZ0FHb2dBV29pQWtFSGRDQUNRUmwyY2lNQmFpUUFDeXNCQVg5QmZ5TUNjeU1BY1NNQ0l3TnhjaU1CYWlBQWFpQUJhaUlDUVJaMElBSkJDblp5SXdKcUpBRUxLd0VCZjBGL0l3TnpJd0Z4SXdNakFIRnlJd0pxSUFCcUlBRnFJZ0pCRVhRZ0FrRVBkbklqQTJva0Fnc3JBUUYvUVg4akFITWpBbkVqQUNNQmNYSWpBMm9nQUdvZ0FXb2lBa0VNZENBQ1FSUjJjaU1BYWlRREN5c0JBWDhqQWtGL0l3TnpjU01CSXdOeGNpTUFhaUFBYWlBQmFpSUNRUVYwSUFKQkczWnlJd0ZxSkFBTEt3RUJmeU1EUVg4akFITnhJd0lqQUhGeUl3RnFJQUJxSUFGcUlnSkJGSFFnQWtFTWRuSWpBbW9rQVFzckFRRi9Jd0JCZnlNQmMzRWpBeU1CY1hJakFtb2dBR29nQVdvaUFrRU9kQ0FDUVJKMmNpTURhaVFDQ3lzQkFYOGpBVUYvSXdKemNTTUFJd0p4Y2lNRGFpQUFhaUFCYWlJQ1FRbDBJQUpCRjNaeUl3QnFKQU1MSlFFQmZ5TUJJd0p6SXdOekl3QnFJQUJxSUFGcUlnSkJCSFFnQWtFY2RuSWpBV29rQUFzbEFRRi9Jd0lqQTNNakFITWpBV29nQUdvZ0FXb2lBa0VYZENBQ1FRbDJjaU1DYWlRQkN5VUJBWDhqQXlNQWN5TUJjeU1DYWlBQWFpQUJhaUlDUVJCMElBSkJFSFp5SXdOcUpBSUxKUUVCZnlNQUl3RnpJd0p6SXdOcUlBQnFJQUZxSWdKQkMzUWdBa0VWZG5JakFHb2tBd3NvQVFGL1FYOGpBM01qQVhJakFuTWpBR29nQUdvZ0FXb2lBa0VHZENBQ1FScDJjaU1CYWlRQUN5Z0JBWDlCZnlNQWN5TUNjaU1EY3lNQmFpQUFhaUFCYWlJQ1FSVjBJQUpCQzNaeUl3SnFKQUVMS0FFQmYwRi9Jd0Z6SXdOeUl3QnpJd0pxSUFCcUlBRnFJZ0pCRDNRZ0FrRVJkbklqQTJva0Fnc29BUUYvUVg4akFuTWpBSElqQVhNakEyb2dBR29nQVdvaUFrRUtkQ0FDUVJaMmNpTUFhaVFEQ3lVQkFYOGdBQ0FBSUFFZ0FpQURFQ2hxSUFacUlBZHFJZ2dnQkhRZ0NDQUZkbklnQVdvTERRQkJmeUFEY3lBQmNpQUNjd3NFQUNNQUN3UUFJd0VMQkFBakFnc0VBQ01EQ3dRQUl3b0xCZ0FnQUNRQUN3WUFJQUFrQVFzR0FDQUFKQUlMQmdBZ0FDUURDd1lBSUFBa0Nnc0Fzd1VFYm1GdFpRR2VBek1BQTJ4dlp3RUZiRzl2Y0hNQ0JHeHZiM0FEQld4dmIzQkJCQVpzYjI5d1FURUZCbXh2YjNCQk1nWUdiRzl2Y0VFekJ3WnNiMjl3UVRRSUJXeHZiM0JDQ1Fac2IyOXdRakVLQm14dmIzQkNNZ3NHYkc5dmNFSXpEQVpzYjI5d1FqUU5CV3h2YjNCRERnWnNiMjl3UXpFUEJteHZiM0JETWhBR2JHOXZjRU16RVFac2IyOXdRelFTQld4dmIzQkVFd1pzYjI5d1JERVVCbXh2YjNCRU1oVUdiRzl2Y0VRekZnWnNiMjl3UkRRWENHOXVaVVoxYkd4QkdBaHZibVZHZFd4c1Foa0liMjVsUm5Wc2JFTWFDRzl1WlVaMWJHeEVHd2gwZDI5R2RXeHNRUndJZEhkdlJuVnNiRUlkQ0hSM2IwWjFiR3hESGdoMGQyOUdkV3hzUkI4SWRISmxSblZzYkVFZ0NIUnlaVVoxYkd4Q0lRaDBjbVZHZFd4c1F5SUlkSEpsUm5Wc2JFUWpDSEYxWVVaMWJHeEJKQWh4ZFdGR2RXeHNRaVVJY1hWaFJuVnNiRU1tQ0hGMVlVWjFiR3hFSndkeGRXRkdkV3hzS0FoeGRXRk1iMmRwWXlrRVoyVjBRU29FWjJWMFFpc0VaMlYwUXl3RVoyVjBSQzBFWjJWMFdDNEVjMlYwUVM4RWMyVjBRakFFYzJWMFF6RUVjMlYwUkRJRWMyVjBXQUtLQWpNQUFRQUFBUUlBQUFFSWJuVnRiRzl2Y0hNQ0FBTUFCQUFGQUFZQUJ3QUlBQWtBQ2dBTEFBd0FEUUFPQUE4QUVBQVJBQklBRXdBVUFCVUFGZ0FYQXdBQUFRQUNBVzRZQXdBQUFRQUNBVzRaQXdBQUFRQUNBVzRhQXdBQUFRQUNBVzRiQXdBQUFRQUNBVzRjQXdBQUFRQUNBVzRkQXdBQUFRQUNBVzRlQXdBQUFRQUNBVzRmQXdBQUFRQUNBVzRnQXdBQUFRQUNBVzRoQXdBQUFRQUNBVzRpQXdBQUFRQUNBVzRqQXdBQUFRQUNBVzRrQXdBQUFRQUNBVzRsQXdBQUFRQUNBVzRtQXdBQUFRQUNBVzRuQ1FBQUFRQUNBQU1BQkFBRkFBWUFCd0FJQVc0b0JBQUFBUUFDQUFNQUtRQXFBQ3NBTEFBdEFDNEJBQUF2QVFBQU1BRUFBREVCQUFBeUFRQUEiKTtyLnRoZW49ZnVuY3Rpb24oQSl7cmV0dXJuIEM9QSxjKCkscn0sci5jYXRjaD1mdW5jdGlvbihBKXtyZXR1cm4gbz1BLGYoKSxyfSwib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMmJihtb2R1bGUuZXhwb3J0cz1BKSwiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoIm1kNVdBU00iLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIEF9KSwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmKHdpbmRvdy5tZDVXQVNNPUEpLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiYoZ2xvYmFsLm1kNVdBU009QSk7ZnVuY3Rpb24gQShBKXtyZXR1cm4gRT0obmV3IERhdGUpLmdldFRpbWUoKSxBJiYib2JqZWN0Ij09dHlwZW9mIEE/ImZ1bmN0aW9uIj09dHlwZW9mIEJ1ZmZlciYmQS5jb25zdHJ1Y3Rvcj09PUJ1ZmZlcj90PUE6QS5jb25zdHJ1Y3Rvcj09PVVpbnQ4QXJyYXl8fEEuY29uc3RydWN0b3I9PT1BcnJheUJ1ZmZlcj90PUEuY29uc3RydWN0b3I9PT1BcnJheUJ1ZmZlcj9uZXcgVWludDhBcnJheShBKTpBOmYobmV3IFR5cGVFcnJvcigiRmlyc3QgcGFyYW1ldGVyIG11c3QgYmUgQnVmZmVyLCBBcnJheUJ1ZmZlciBvciBVaW50OEFycmF5IikpOmYobmV3IFR5cGVFcnJvcigiRmlyc3QgcGFyYW1ldGVyIG11c3QgYmUgQnVmZmVyLCBBcnJheUJ1ZmZlciBvciBVaW50OEFycmF5IikpLHQmJihBPXQubGVuZ3RoLFdlYkFzc2VtYmx5JiZBPkw/KEI9bmV3IFdlYkFzc2VtYmx5Lk1lbW9yeSh7aW5pdGlhbDozMmU2PEE/NjRlNjxBPzEyOGU2PEE/NDA5NjoyMDQ4OjEwMjQ6NTEyfSkscT1uZXcgVWludDMyQXJyYXkoQi5idWZmZXIpLChRPXtpbXBvcnRzOnt9fSkuaW1wb3J0cy5tZW09QixRLmltcG9ydHMubG9nPWNvbnNvbGUubG9nLFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGZ1bmN0aW9uKEEpe3ZhciBCLFEsQyxvPS0xO0I9QS5sZW5ndGgtMSxRPW5ldyBBcnJheUJ1ZmZlcihBLmxlbmd0aCksQz1uZXcgVWludDhBcnJheShRKTtmb3IoO0I+bysrOylDW29dPUEuY2hhckNvZGVBdChvKTtyZXR1cm4gQ30oaSkuYnVmZmVyLFEpLnRoZW4ocykpOmMoSSh0KSkpLHJ9ZnVuY3Rpb24gcyhBKXt2YXIgQj1BLmluc3RhbmNlLmV4cG9ydHM7bT1CLmxvb3BzLEIubG9vcCxaPUIuZ2V0QSxIPUIuZ2V0QixoPUIuZ2V0QyxrPUIuZ2V0RCxCLmdldFgscD1CLnNldEEsUj1CLnNldEIsSz1CLnNldEMsWD1CLnNldEQsQi5zZXRYLGMoZyh0KSl9ZnVuY3Rpb24gYyhBKXsobj1BP0E6bikmJkMmJiJmdW5jdGlvbiI9PXR5cGVvZiBDJiYoQyhuLChuZXcgRGF0ZSkuZ2V0VGltZSgpLUUpLEM9bnVsbCxuPSExKX1mdW5jdGlvbiBmKEEpeyhlPUE/QTplKSYmbyYmImZ1bmN0aW9uIj09dHlwZW9mIG8mJihvKGUpLG89bnVsbCxlPSExKX19KCk7"}]},{"name":"ClipConverter","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://www.youtube.com/*","*://www.clipconverter.cc/*"],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1630066351330,"data":{}},"enabled":false,"position":4,"file_url":"https://www.clipconverter.cc/extension/clipconverter.user.js","uuid":"fa9b967a-9f18-4b97-af90-3ed41e12f755","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIENsaXBDb252ZXJ0ZXIKLy8gQG5hbWVzcGFjZSAgIGh0dHBzOi8vd3d3LmNsaXBjb252ZXJ0ZXIuY2MvCi8vIEB2ZXJzaW9uICAgICAxLjUuMwovLyBAZGVzY3JpcHRpb24gVGhpcyB1c2Vyc2NyaXB0IGFzc2lzdHMgQ2xpcENvbnZlcnRlciBpbiBmZXRjaGluZyBkb3dubG9hZCBsaW5rcy4gCi8vIEBjb3B5cmlnaHQgICAyMDE1LCBDbGlwQ29udmVydGVyCi8vIEBpY29uICAgICAgICBodHRwczovL3d3dy5jbGlwY29udmVydGVyLmNjL2ltYWdlcy8xMjgucG5nCi8vIEBpY29uNjQgICAgICBodHRwczovL3d3dy5jbGlwY29udmVydGVyLmNjL2ltYWdlcy9hcHBsZXRvdWNoaWNvbi5wbmcKLy8gQGhvbWVwYWdlICAgIGh0dHBzOi8vd3d3LmNsaXBjb252ZXJ0ZXIuY2MvYWRkb24KLy8gQHVwZGF0ZVVSTCAgIGh0dHBzOi8vd3d3LmNsaXBjb252ZXJ0ZXIuY2MvZXh0ZW5zaW9uL2NsaXBjb252ZXJ0ZXIubWV0YS5qcwovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly93d3cuY2xpcGNvbnZlcnRlci5jYy9leHRlbnNpb24vY2xpcGNvbnZlcnRlci51c2VyLmpzCi8vIEBjb25uZWN0LXNyYyBjbGlwY29udmVydGVyLmNjCi8vIEBjb25uZWN0LXNyYyB5b3V0dWJlLmNvbQovLyBAbWF0Y2ggICAgICAgKjovL3d3dy55b3V0dWJlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAqOi8vd3d3LmNsaXBjb252ZXJ0ZXIuY2MvKgovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtZW5kCi8vIEBncmFudCAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyA9PS9Vc2VyU2NyaXB0PT0KCgoKCgppZigidW5kZWZpbmVkIiA9PSB0eXBlb2YgKGNsaXBjb252ZXJ0ZXIpKSB7Cgl2YXIgY2xpcGNvbnZlcnRlciA9IHsKCiAgICAgICAgdXNlclVybDogJ2h0dHBzOi8vd3d3LmNsaXBjb252ZXJ0ZXIuY2MvP3JlZj1hZGRvbiZ2ZXJzaW9uPTE1MyZicm93c2VyPXVzZXJzY3JpcHQnLAogICAgICAgIHNhdmVVcmw6ICdodHRwczovL3d3dy5jbGlwY29udmVydGVyLmNjL2FkZG9uc2F2ZT92ZXJzaW9uPTE1MyZicm93c2VyPXVzZXJzY3JpcHQnLAogICAgICAgIGN1cnJlbnRNZWRpYVVybDogbnVsbCwKICAgICAgIAogICAgICAgIAoKCQkKCQlnZXRQYXJhbSA6IGZ1bmN0aW9uIChkb2N1bWVudCwgdmFyaWFibGUpeyAgICAKCQkJIHZhciBxdWVyeSA9IGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSk7ICAgICAKCQkJIHZhciB2YXJzID0gcXVlcnkuc3BsaXQoIiYiKTsgICAgCgkJCSAgZm9yICh2YXIgaT0wO2k8dmFycy5sZW5ndGg7aSsrKSB7ICAgICAgCgkJCQkJdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KCI9Iik7ICAgICAKCQkJCQlpZihwYWlyWzBdID09IHZhcmlhYmxlKXtyZXR1cm4gcGFpclsxXTt9ICAKCQkJICAgfSAgICAgICByZXR1cm4oZmFsc2UpOyAgCgkJfSwKCQkJCQoJCWluaXQgOiBmdW5jdGlvbigpIHsKCgkJCWNsaXBjb252ZXJ0ZXIub25QYWdlTG9hZCgpOwoJCQkKCQl9LAoKCQlhZGRCdXR0b25zOiBmdW5jdGlvbihkb2N1bWVudCkgewoJCQkJdmFyIGljb24gPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUF5QnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU1DMWpNRFl3SURZeExqRXpORGMzTnl3Z01qQXhNQzh3TWk4eE1pMHhOem96TWpvd01DQWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZJaUI0Yld4dWN6cDRiWEJOVFQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wyMXRMeUlnZUcxc2JuTTZjM1JTWldZOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXpWSGx3WlM5U1pYTnZkWEpqWlZKbFppTWlJSGh0Y0RwRGNtVmhkRzl5Vkc5dmJEMGlRV1J2WW1VZ1VHaHZkRzl6YUc5d0lFTlROU0JYYVc1a2IzZHpJaUI0YlhCTlRUcEpibk4wWVc1alpVbEVQU0o0YlhBdWFXbGtPak01TkRVMFJESXdSRFExUmpFeFJFWkJOa1UzUTBGQ01rVTJPVUl6TkRZd0lpQjRiWEJOVFRwRWIyTjFiV1Z1ZEVsRVBTSjRiWEF1Wkdsa09qTTVORFUwUkRJeFJEUTFSakV4UkVaQk5rVTNRMEZDTWtVMk9VSXpORFl3SWo0Z1BIaHRjRTFOT2tSbGNtbDJaV1JHY205dElITjBVbVZtT21sdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNk16azBOVFJFTVVWRU5EVkdNVEZFUmtFMlJUZERRVUl5UlRZNVFqTTBOakFpSUhOMFVtVm1PbVJ2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2TXprME5UUkVNVVpFTkRWR01URkVSa0UyUlRkRFFVSXlSVFk1UWpNME5qQWlMejRnUEM5eVpHWTZSR1Z6WTNKcGNIUnBiMjQrSUR3dmNtUm1PbEpFUmo0Z1BDOTRPbmh0Y0cxbGRHRStJRHcvZUhCaFkydGxkQ0JsYm1ROUluSWlQejVoSFl2bEFBQUM5RWxFUVZSNDJueFRUVWhVVVJRKzk5NDM0K1RvT0RNMmpSWkRhdUppa2lJb2k0cWlSZENpUlJGRVZCZ1IvY0JBdEFwcVVZdWdYWnNLaEJZdUpDSXJDR29uU1lpQ2k0SkNySWhRa2Y3VTlNMmJjZDY4bi92WGVjOHhncUFMMzd2bm5udlA5NzV6enIya1VDaEFNQ2lsa0Vna1FzVGo4WHJHMkIxMDkxV3IxUW5IY1VCS0NjRnNXUmJZdGcyRWtKVTQrSGZFaEJCM1hkYzloY0VKempuOGJ4aC9MNUExNWZ2K0E4L3pEdVBTUXR4RDM1TFdlZ0x4Rk8zeC94Rms4YThQVWVaZXRJczFYdzdSam9HN2NUNkR1SS8yTFlSWVRjRlFuaGNhbk5JTTV0YU5HejR1ZFNBSVA2Sm1jOUNhNGQ1MVZFS1VVamYrS0tnMHBWY1NOMzlOMnBYS0NWL0tmdVJlaXk0Ym9ZZ1FKYXl3MEpUR2NSMlFYTVdDRGlOR3dyVHpJeDlBVVFZYjM0MUNldmdsRkIxbkd4ZHlBSVBhbUpMbklaMTVUWDJYR1dXcmlSdVI5UkxJQlZRaGtPQlVRTURXblMyZ1ZrMkx1UTZ0cElESTk5azVwMVFhODVaK2JiVzM3SGhrWHI3NXc4bHRXdmFTNlhscUxzNlF4Zm5uTmhldDJLbXZpQXJMbkxrRXloZEhpWlNaY210dTFzeHZCOTZ5WVVGUGZYN2hkMitmOWJ1MjNoYk1PR2gzYlI2cXR1UkFPNDZtMzJiZlNxVnNWS0paOGxndnlLclRMTXFWZnV3amFNTVFZbU5IaE8vYzc4bnNoZ3d2V3NmNVV1a2NVeUl0RThraHF6T3ZsZWZxMk5jcEhkYWdiWEE0dkZYK1l2R1o1dklZaVJvVndxZ0ZodUdEVkkzYWRSdVUxSGlFeEl4VTR3REVvaGU1ejkySXVZRDkwZGhHUmNKT1NlNWZFMmFwQjdseTZJOEY1R0VYc0FQQmpJY2R2MmoyR3Vra0lRMzF2Ync1aXhVMGdMbnYzNERDSTdRNWF5ck94M2g1ZVk5eXFsbmxlaFNsRXVrNkdxR2s2MFpVMVdHU3l5ZFFGeC9sTTlQZ2YvNElaUFV4UkR2ekVPMDVBREtXV0VzYVVxZEJlb2V3V1IzZ3VXa05PZ1dST29GcXJqQ1FmWExtRTNqanIwQXRXMEJZalVEWE5KTTFjYUR0ZWNEZkU4a2lhMmgrVjUrbTBkTjBmdWFrL0RJeHFMNVAvemtiRmhFSmdud2JFWFcxdHhGd1VoMXdNcU1LKzQ0VWlEbjNFeWJISCtPYmJnanJFVnh0Z0FyQytTM0FBUEZia3VDR3NNdlFBQUFBQUVsRlRrU3VRbUNDJzsKCQkJCXZhciBjbGlwY29udmVydGVycGF0aCA9IGNsaXBjb252ZXJ0ZXIudXNlclVybCArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuVVJMKTsKICAgICAgICAgICAgICAgIHZhciBkaXZfZW1iZWQgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIHRhcmdldD0gJ19ibGFuayc7CgoJCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21ldGEtY29udGVudHMnKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBkaXZfZW1iZWQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21ldGEtY29udGVudHMnKS5xdWVyeVNlbGVjdG9yKCcjdG9wLXJvdyB5dGQtdmlkZW8tb3duZXItcmVuZGVyZXIueXRkLXZpZGVvLXNlY29uZGFyeS1pbmZvLXJlbmRlcmVyICNzcG9uc29yLWJ1dHRvbicpOwogICAgICAgICAgICAgICAgICAgIGRpdl9lbWJlZC5pbm5lckhUTUwgKz0gJyA8cGFwZXItYnV0dG9uIHN1YnNjcmliZWQgaWQ9ImNsaXBjb252ZXJ0ZXIiIHN0eWxlPSJmbG9hdDpyaWdodCIgY2xhc3M9Inl0ZC1zdWJzY3JpYmUtYnV0dG9uLXJlbmRlcmVyIj48YSBocmVmPSInICsgY2xpcGNvbnZlcnRlcnBhdGggKyAnIiB0YXJnZXQ9IicgKyB0YXJnZXQgKyAnIiBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOiBub25lOyBjb2xvcjogaW5oZXJpdDsiIGNsYXNzPSJzdHlsZS1zY29wZSB5dGQtc3Vic2NyaWJlLWJ1dHRvbi1yZW5kZXJlciI+PGltZyAgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBib3R0b207IiBzcmM9IicgKyBpY29uICsgJyI+IDxzdHJvbmc+Q2xpcENvbnZlcnRlcjwvc3Ryb25nPjwvYT48L3BhcGVyLWJ1dHRvbj4nKyBkaXZfZW1iZWQuaW5uZXJIVE1MOwoJCQkJfSBlbHNlIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXRjaDgtc2VudGltZW50LWFjdGlvbnMnKSkgewoJCQkJCXZhciBkaXZfZW1iZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2F0Y2g4LXNlbnRpbWVudC1hY3Rpb25zJyk7CgkJCQkJdmFyIGJ1dHRvbmNsYXNzID0gInl0LXVpeC1idXR0b24geXQtdWl4LWJ1dHRvbi1kZWZhdWx0IHl0LXVpeC10b29sdGlwIjsKCQkJCQl2YXIgc3BhbmNsYXNzPSJ5dC11aXgtYnV0dG9uLWdyb3VwIjsKICAgICAgICAgICAgICAgICAgICBkaXZfZW1iZWQuaW5uZXJIVE1MID0gJyA8c3BhbiBpZD0iY2xpcGNvbnZlcnRlciIgY2xhc3M9IicgKyBzcGFuY2xhc3MgKyAnIj48YSBocmVmPSInICsgY2xpcGNvbnZlcnRlcnBhdGggKyAnIiB0YXJnZXQ9IicgKyB0YXJnZXQgKyAnIj48YnV0dG9uIGNsYXNzPSJzdGFydCAnICsgYnV0dG9uY2xhc3MgKyAnIiB0eXBlPSJidXR0b24iIHRpdGxlPSJSZWNvcmQgdmlkZW8gd2l0aCBDbGlwQ29udmVydGVyIj48aW1nIGFsdD0iIiBjbGFzcz0iIiBzdHlsZT0iIiBzcmM9IicgKyBpY29uICsgJyI+IDxzcGFuIGNsYXNzPSJ5dC11aXgtYnV0dG9uLWNvbnRlbnQiPjxzdHJvbmc+Q2xpcENvbnZlcnRlcjwvc3Ryb25nPjwvc3Bhbj48L2J1dHRvbj48L2E+JyArICc8YSBocmVmPSInICsgY2xpcGNvbnZlcnRlcnBhdGggKyAnJmZvcm1hdD1tcDMiIHRhcmdldD0iJyArIHRhcmdldCArICciPjxidXR0b24gY2xhc3M9IicgKyBidXR0b25jbGFzcyArICciIHR5cGU9ImJ1dHRvbiIgdGl0bGU9IlJlY29yZCBhdWRpbyBhcyBNUDMiPk1QMzwvc3Bhbj48L2J1dHRvbj48L2E+JyArICc8YSBocmVmPSInICsgY2xpcGNvbnZlcnRlcnBhdGggKyAnJmZvcm1hdD1tcDQiIHRhcmdldD0iJyArIHRhcmdldCArICciPjxidXR0b24gY2xhc3M9ImVuZCAnICsgYnV0dG9uY2xhc3MgKyAnIiB0eXBlPSJidXR0b24iIHRpdGxlPSJSZWNvcmQgdmlkZW8gYXMgTVA0Ij5NUDQ8L3NwYW4+PC9idXR0b24+PC9hPjwvc3Bhbj4nICsgZGl2X2VtYmVkLmlubmVySFRNTDsKCQkJCX0KCgoKCiAgICAgICAgICAgIAoKICAgICAgICAgICAgCgkKCQl9LAoKCQlvblBhZ2VMb2FkIDogZnVuY3Rpb24oKSB7CgkKCgkJCWlmKGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuZG9tYWluID09ICd3d3cueW91dHViZS5jb20nKSB7CgoJCQkJCXNldEludGVydmFsKGNsaXBjb252ZXJ0ZXIuY2hlY2ssIDEwMDApOwogICAgICAgICAgICAgICAgICAgIGNsaXBjb252ZXJ0ZXIuY2hlY2soKTsKCgkJCQkKCQkJCgoJCQl9IGVsc2UgaWYoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5kb21haW4gPT0gJ3d3dy5jbGlwY29udmVydGVyLmNjJykgewoKCQoJCQkJdmFyIGlucHV0X2Jyb3dzZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xpcGNvbnZlcnRlcl9hZGRvbl9icm93c2VyJyk7CgkJCQl2YXIgaW5wdXRfdmVyc2lvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGlwY29udmVydGVyX2FkZG9uX3ZlcnNpb24nKTsKCQkJCQoJCQkJaWYoaW5wdXRfYnJvd3NlciAmJiBpbnB1dF92ZXJzaW9uKSB7CgkJCQkJaW5wdXRfYnJvd3Nlci52YWx1ZT0nVXNlcnNjcmlwdCc7CgkJCQkJaW5wdXRfdmVyc2lvbi52YWx1ZT0nMS41LjInOwoJCQkJfQoKICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHsKCiAgICAgICAgICAgICAgICAgICAgaWYoZXZlbnQuZGF0YSAmJiBldmVudC5kYXRhLnlvdXR1YmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9ICJodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PSIgKyBldmVudC5kYXRhLnlvdXR1YmU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QudXJsID0gdXJsOwogICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Lm1ldGhvZD0iR0VUIjsKICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKC8+dmFyIHl0cGxheWVyKC4qPyk8XC9zY3JpcHQ+L2kudGVzdChyZXNwb25zZS5yZXNwb25zZVRleHQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsndXJsJyA6IHVybCwgJ3BsYXllcic6IC8+dmFyIHl0cGxheWVyKC4qPyk8XC9zY3JpcHQ+L2kuZXhlYyhyZXNwb25zZS5yZXNwb25zZVRleHQpWzFdLCAnY29kZSc6IHJlc3BvbnNlLnN0YXR1c30sICJodHRwczovL3d3dy5jbGlwY29udmVydGVyLmNjLyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoeyd1cmwnIDogdXJsLCAnZXJyb3InOiAnUGxheWVyIG5vdCBmb3VuZCcsICdjb2RlJzogcmVzcG9uc2Uuc3RhdHVzfSwgImh0dHBzOi8vd3d3LmNsaXBjb252ZXJ0ZXIuY2MvIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsndXJsJyA6IHVybCwgJ2Vycm9yJzogJ25ldHdvcmsgZXJyb3InLCAnY29kZSc6IC0xfSwgImh0dHBzOi8vd3d3LmNsaXBjb252ZXJ0ZXIuY2MvIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHJlcXVlc3QpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7CgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKCQkJfQoKCQl9LAogICAgICAgIAogICAgICAgIAogICAgICAgIGNoZWNrOiBmdW5jdGlvbigpIHsKCiAgICAgICAgICAgIGlmKGNsaXBjb252ZXJ0ZXIuY3VycmVudE1lZGlhVXJsICE9IGRvY3VtZW50LlVSTCAgJiYgdHlwZW9mIHl0cGxheWVyICE9ICd1bmRlZmluZWQnICYmIHl0cGxheWVyKSB7CiAgICAgICAgICAgICAgICAvLyBuZXcgdmlkZW8gZGV0ZWN0ZWQKICAgICAgICAgICAgICAgIGNsaXBjb252ZXJ0ZXIuY3VycmVudE1lZGlhVXJsID0gZG9jdW1lbnQuVVJMOwogICAgICAgICAgICAgICAgLy9jbGlwY29udmVydGVyLnNhdmVVcmxNYXAoKTsKICAgICAgICAgICAgICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGlwY29udmVydGVyJykpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xpcGNvbnZlcnRlcicpLm91dGVySFRNTD0iIjsKICAgICAgICAgICAgICAgIH0KCQkJfQoKICAgICAgICAgICAgaWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGlwY29udmVydGVyJykgJiYgdHlwZW9mIHl0cGxheWVyICE9ICd1bmRlZmluZWQnICYmIHl0cGxheWVyKSB7CiAgICAgICAgICAgICAgICBjbGlwY29udmVydGVyLmFkZEJ1dHRvbnMoZG9jdW1lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgfSwKCgogICAgc2F2ZVVybE1hcDogZnVuY3Rpb24oKSB7CiAKICAgICAgICB2YXIgdGl0bGUgPSAnJzsKCQl2YXIgdXJsbWFwID0gJyc7CiAgICAgICAgdmFyIHN0cyA9ICcnOwogICAgICAgIHZhciBjaGFubmVsID0gJyc7CgkJaWYodHlwZW9mIHl0cGxheWVyICE9ICd1bmRlZmluZWQnICYmIHl0cGxheWVyICYmIHl0cGxheWVyLmNvbmZpZyAmJiAgeXRwbGF5ZXIuY29uZmlnLmFyZ3MgJiYgeXRwbGF5ZXIuY29uZmlnLmFyZ3MudXJsX2VuY29kZWRfZm10X3N0cmVhbV9tYXApIHsKCQkJdXJsbWFwID0geXRwbGF5ZXIuY29uZmlnLmFyZ3MudXJsX2VuY29kZWRfZm10X3N0cmVhbV9tYXA7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZih5dHBsYXllci5jb25maWcuYXJncy5hZGFwdGl2ZV9mbXRzKQogICAgICAgICAgICAgICAgdXJsbWFwICs9ICIsIiArIHl0cGxheWVyLmNvbmZpZy5hcmdzLmFkYXB0aXZlX2ZtdHM7CiAgICAgICAgICAgIAogICAgICAgICAgICByZXN1bHQgPSAvInN0cyI6KFxkKykvLmV4ZWMoZG9jdW1lbnQuYm9keS5pbm5lckhUTUwpOwogICAgICAgICAgICBpZihyZXN1bHQpIHsKICAgICAgICAgICAgICAgIHN0cyA9IHJlc3VsdFsxXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2hhbm5lbCA9IHl0cGxheWVyLmNvbmZpZy5hcmdzLmF1dGhvcjsKCiAgICAgICAgICAgIHRpdGxlID0gKGRvY3VtZW50LnRpdGxlKTsKICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBnbV94aHIgPSB7fTsKICAgICAgICAgICAgZ21feGhyLnVybCA9IGNsaXBjb252ZXJ0ZXIuc2F2ZVVybDsKICAgICAgICAgICAgZ21feGhyLm1ldGhvZD0iUE9TVCI7CiAgICAgICAgICAgIGdtX3hoci5oZWFkZXJzID0ge307CiAgICAgICAgICAgIGdtX3hoci5oZWFkZXJzWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIjsKICAgICAgICAgICAgZ21feGhyLmRhdGEgPSAidXJsbWFwPSIgKyBlbmNvZGVVUklDb21wb25lbnQodXJsbWFwKSArICImdGl0bGU9IiArIGVuY29kZVVSSUNvbXBvbmVudCh0aXRsZSkgKyAiJnN0cz0iICsgIGVuY29kZVVSSUNvbXBvbmVudChzdHMpICsgIiZtZWRpYXVybD0iICsgIGVuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5VUkwpICsgIiZjaGFubmVsPSIgKyAgZW5jb2RlVVJJQ29tcG9uZW50KGNoYW5uZWwpOwoKCiAgICAgICAgICAgIGdtX3hoci5vbmxvYWQgPSBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYoY2xpcGNvbnZlcnRlci5nZXRQYXJhbShkb2N1bWVudCwgJ2NsaXBjb252ZXJ0ZXInKT09J2F1dG9zdGFydCcpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gY2xpcGNvbnZlcnRlci51c2VyVXJsICsgIiZ1cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5VUkwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKCgogICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdChnbV94aHIpOwogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgIAoJfTsKICAgIAp9CmNsaXBjb252ZXJ0ZXIuaW5pdCgpOw=="},{"name":"GitHub 汉化插件","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["http://*.github.com/*","https://*.github.com/*"],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1630066351412,"data":{}},"enabled":true,"position":5,"file_url":"https://openuserjs.org/install/52cik/GitHub_%E6%B1%89%E5%8C%96%E6%8F%92%E4%BB%B6.user.js","uuid":"2abf6de8-2a2b-4491-a3bc-498ae5e7152a","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBHaXRIdWIg5rGJ5YyW5o+S5Lu2Ci8vIEBkZXNjcmlwdGlvbiAg5rGJ5YyWIEdpdEh1YiDnlYzpnaLnmoTpg6jliIboj5zljZXlj4rlhoXlrrnjgIIKLy8gQGNvcHlyaWdodCAgICAyMDE2LCDmpbzmlZnkuLsgKGh0dHA6Ly93d3cuNTJjaWsuY29tLykKLy8gQGljb24gICAgICAgICBodHRwczovL2Fzc2V0cy1jZG4uZ2l0aHViLmNvbS9waW5uZWQtb2N0b2NhdC5zdmcKLy8gQHZlcnNpb24gICAgICAxLjYuNAovLyBAYXV0aG9yICAgICAgIOalvOaVmeS4uwovLyBAbGljZW5zZSAgICAgIE1JVAovLyBAaG9tZXBhZ2VVUkwgIGh0dHBzOi8vZ2l0aHViLmNvbS81MmNpay9naXRodWItaGFucwovLyBAbWF0Y2ggICAgICAgIGh0dHA6Ly8qLmdpdGh1Yi5jb20vKgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vKi5naXRodWIuY29tLyoKLy8gQHJlcXVpcmUgICAgICBodHRwczovLzUyY2lrLmdpdGh1Yi5pby9naXRodWItaGFucy9sb2NhbHMuanM/djEuNi4zCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtZW5kCi8vIEBncmFudCAgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgdmFyIGxhbmcgPSAnemgnOyAvLyDkuK3mlocKCiAgICAvLyAyMDE2LTA0LTE4IGdpdGh1YiDlsIYganF1ZXJ5IOS7pSBhbWQg5Yqg6L2977yM5LiN5pq06Zyy5Yiw5YWo5bGA5LqG44CCCiAgICAvLyB2YXIgJCA9IHJlcXVpcmUoJ2dpdGh1Yi9qcXVlcnknKVsnZGVmYXVsdCddOwoKICAgIC8vIOimgee/u+ivkeeahOmhtemdogogICAgdmFyIHBhZ2UgPSBnZXRQYWdlKCk7CgogICAgdHJhbnNUaXRsZSgpOyAvLyDpobXpnaLmoIfpopjnv7vor5EKICAgIHRpbWVFbGVtZW50KCk7IC8vIOaXtumXtOiKgueCuee/u+ivkQogICAgLy8gc2V0VGltZW91dChjb250cmlidXRpb25zLCAxMDApOyAvLyDotKHnjK7ml6Xljobnv7vor5EgKOaXpeWOhuaYr+WGheW1jOaIlmFqYXjnmoQsIOaJgOS7peWfuuS6juWbnuiwg+S6i+S7tuWkhOeQhikKICAgIHdhbGsoZG9jdW1lbnQuYm9keSk7IC8vIOeri+WNs+e/u+ivkemhtemdogoKICAgIC8vIDIwMTctMDMtMTkgZ2l0aHViIOWxj+iUvSByZXF1aXJlIOaUueS4uiBQcm9taXNlIOW9ouW8j+eahCBnaEltcG9ydAogICAgZGVmaW5lKCdnaXRodWItaGFucy1hamF4JywgWycuL2pxdWVyeSddLCBmdW5jdGlvbigkKSB7CiAgICAgICAgJChkb2N1bWVudCkuYWpheENvbXBsZXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdHJhbnNUaXRsZSgpOwogICAgICAgICAgICB3YWxrKGRvY3VtZW50LmJvZHkpOyAvLyBhamF4IOivt+axguWQjuWGjeasoee/u+ivkemhtemdogogICAgICAgIH0pOwogICAgfSk7CiAgICBnaEltcG9ydCgnZ2l0aHViLWhhbnMtYWpheCcpWydjYXRjaCddKGZ1bmN0aW9uKGUpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aHJvdyBlIH0pOwogICAgfSk7CgogICAgLyoqCiAgICAgKiDpgY3ljoboioLngrkKICAgICAqCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUg6IqC54K5CiAgICAgKi8KICAgIGZ1bmN0aW9uIHdhbGsobm9kZSkgewogICAgICAgIHZhciBub2RlcyA9IG5vZGUuY2hpbGROb2RlczsKCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBlbCA9IG5vZGVzW2ldOwogICAgICAgICAgICAvLyB0b2RvIDEuIOS/ruWkjeWkmuWxnuaAp+e/u+ivkemXrumimDsgMi4g5re75Yqg5LqL5Lu257+76K+RLCDlpoLorrrpooTop4jkv6Hmga87CgogICAgICAgICAgICBpZiAoZWwubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7IC8vIOWFg+e0oOiKgueCueWkhOeQhgoKICAgICAgICAgICAgICAgIC8vIOWFg+e0oOiKgueCueWxnuaAp+e/u+ivkQogICAgICAgICAgICAgICAgaWYgKGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykgeyAvLyDovpPlhaXmoYYg5oyJ6ZKuIOaWh+acrOWfnwogICAgICAgICAgICAgICAgICAgIGlmIChlbC50eXBlID09PSAnYnV0dG9uJyB8fCBlbC50eXBlID09PSAnc3VibWl0JykgewogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc0VsZW1lbnQoZWwsICd2YWx1ZScpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zRWxlbWVudChlbCwgJ3BsYWNlaG9sZGVyJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSkgeyAvLyDluKbmj5DnpLrnmoTlhYPntKDvvIznsbvkvLwgdG9vbHRpcCDmlYjmnpznmoQKICAgICAgICAgICAgICAgICAgICB0cmFuc0VsZW1lbnQoZWwsICdhcmlhLWxhYmVsJywgdHJ1ZSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29waWVkLWhpbnQnKSkgeyAvLyDlpI3liLbmiJDlip/mj5DnpLoKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNFbGVtZW50KGVsLmRhdGFzZXQsICdjb3BpZWRIaW50Jyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbC50YWdOYW1lID09PSAnT1BUR1JPVVAnKSB7IC8vIOe/u+ivkSA8b3B0Z3JvdXA+IOeahCBsYWJlbCDlsZ7mgKcKICAgICAgICAgICAgICAgICAgICB0cmFuc0VsZW1lbnQoZWwsICdsYWJlbCcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZS13aXRoJykpIHsgLy8g5oyJ6ZKu562J5b6F5o+Q56S6CiAgICAgICAgICAgICAgICAgICAgdHJhbnNFbGVtZW50KGVsLmRhdGFzZXQsICdkaXNhYmxlV2l0aCcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOi3s+i/hyByZWFkbWUsIOaWh+S7tuWIl+ihqCwg5Luj56CB5pi+56S6CiAgICAgICAgICAgICAgICBpZiAoZWwuaWQgIT09ICdyZWFkbWUnICYmICFJMThOLmNvbmYucmVJZ25vcmUudGVzdChlbC5jbGFzc05hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgd2FsayhlbCk7IC8vIOmBjeWOhuWtkOiKgueCuQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGVsLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkgeyAvLyDmlofmnKzoioLngrnnv7vor5EKICAgICAgICAgICAgICAgIHRyYW5zRWxlbWVudChlbCwgJ2RhdGEnKTsKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiDojrflj5bnv7vor5HpobXpnaIKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UGFnZSgpIHsKICAgICAgICAvLyDlhYjljLnphY0gYm9keSDnmoQgY2xhc3MKICAgICAgICB2YXIgcGFnZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lLm1hdGNoKEkxOE4uY29uZi5yZVBhZ2VDbGFzcyk7CgogICAgICAgIGlmICghcGFnZSkgeyAvLyDmianlsZUgdXJsIOWMuemFjQogICAgICAgICAgICBwYWdlID0gbG9jYXRpb24uaHJlZi5tYXRjaChJMThOLmNvbmYucmVQYWdlVXJsKTsKICAgICAgICB9CgogICAgICAgIGlmICghcGFnZSkgeyAvLyDmianlsZUgcGF0aG5hbWUg5Yy56YWNCiAgICAgICAgICAgIHBhZ2UgPSBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaChJMThOLmNvbmYucmVQYWdlUGF0aCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcGFnZSA/IHBhZ2VbMV0gfHwgJ2hvbWVwYWdlJyA6IGZhbHNlOyAvLyDlj5bpobXpnaIga2V5CiAgICB9CgogICAgLyoqCiAgICAgKiDnv7vor5HpobXpnaLmoIfpopgKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNUaXRsZSgpIHsKICAgICAgICB2YXIgdGl0bGUgPSB0cmFuc2xhdGUoZG9jdW1lbnQudGl0bGUsICd0aXRsZScpOwoKICAgICAgICBpZiAodGl0bGUgPT09IGZhbHNlKSB7IC8vIOaXoOe/u+ivkeWImemAgOWHugogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlOwogICAgfQoKCiAgICAvKioKICAgICAqIOe/u+ivkeiKgueCueWvueW6lOWxnuaAp+WGheWuuQogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBlbCDlr7nosaEKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCDlsZ7mgKflrZfmrrUKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNBdHRyIOaYr+WQpuaYryBhdHRyIOWxnuaApwogICAgICoKICAgICAqIEByZXR1cm5zIHtib29sZWFufQogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc0VsZW1lbnQoZWwsIGZpZWxkLCBpc0F0dHIpIHsKICAgICAgICB2YXIgdHJhbnNUZXh0ID0gZmFsc2U7IC8vIOe/u+ivkeWQjueahOaWh+acrAoKICAgICAgICBpZiAoaXNBdHRyID09PSB1bmRlZmluZWQpIHsgLy8g6Z2e5bGe5oCn57+76K+RCiAgICAgICAgICAgIHRyYW5zVGV4dCA9IHRyYW5zbGF0ZShlbFtmaWVsZF0sIHBhZ2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyYW5zVGV4dCA9IHRyYW5zbGF0ZShlbC5nZXRBdHRyaWJ1dGUoZmllbGQpLCBwYWdlKTsKICAgICAgICB9CgogICAgICAgIGlmICh0cmFuc1RleHQgPT09IGZhbHNlKSB7IC8vIOaXoOe/u+ivkeWImemAgOWHugogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvLyDmm7/mjaLnv7vor5HlkI7nmoTlhoXlrrkKICAgICAgICBpZiAoaXNBdHRyID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZWxbZmllbGRdID0gdHJhbnNUZXh0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShmaWVsZCwgdHJhbnNUZXh0KTsKICAgICAgICB9CiAgICB9CgoKICAgIC8qKgogICAgICog57+76K+R5paH5pysCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQg5b6F57+76K+R5a2X56ym5LiyCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGFnZSDpobXpnaLlrZfmrrUKICAgICAqCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfGJvb2xlYW59CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZSh0ZXh0LCBwYWdlKSB7IC8vIOe/u+ivkQogICAgICAgIHZhciBzdHI7CiAgICAgICAgdmFyIF9rZXkgPSB0ZXh0LnRyaW0oKTsgLy8g5Y676Zmk6aaW5bC+56m65qC855qEIGtleQogICAgICAgIHZhciBfa2V5X25lYXQgPSBfa2V5CiAgICAgICAgICAgIC5yZXBsYWNlKC9ceGEwL2csICcgJykgLy8g5pu/5o2iICZuYnNwOyDnqbrmoLzlr7zoh7TnmoQgYnVnCiAgICAgICAgICAgIC5yZXBsYWNlKC9cc3syLH0vZywgJyAnKTsgLy8g5Y676Zmk5aSa5L2Z5o2i6KGM56m65qC8562J5a2X56ym77yMKOivlemqjOa1i+ivlemYtuaute+8jOaciemXrumimOWGjeaBouWkjSkKCiAgICAgICAgaWYgKF9rZXlfbmVhdCA9PT0gJycpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gLy8g5YaF5a655Li656m65LiN57+76K+RCgogICAgICAgIHN0ciA9IHRyYW5zUGFnZSgncHViaWxjJywgX2tleV9uZWF0KTsgLy8g5YWs5YWx57+76K+RCgogICAgICAgIGlmIChzdHIgIT09IGZhbHNlICYmIHN0ciAhPT0gX2tleV9uZWF0KSB7IC8vIOWFrOWFsee/u+ivkeWujOaIkAogICAgICAgICAgICBzdHIgPSB0cmFuc1BhZ2UoJ3B1YmlsYycsIHN0cikgfHwgc3RyOyAgLy8g5LqM5qyh5YWs5YWx57+76K+R77yI5Li65LqG5byl6KGl5q2j5YiZ6YOo5YiG57+76K+R55qE5oOF5Ya177yJCiAgICAgICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoX2tleSwgc3RyKTsgIC8vIOabv+aNouWOn+Wtl+espu+8jOS/neeVmeepuueZvemDqOWIhgogICAgICAgIH0KCiAgICAgICAgaWYgKHBhZ2UgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IC8vIOacquefpemhtemdouS4jee/u+ivkQoKICAgICAgICBzdHIgPSB0cmFuc1BhZ2UocGFnZSwgX2tleV9uZWF0KTsgLy8g57+76K+R5bey55+l6aG16Z2iCiAgICAgICAgaWYgKHN0ciA9PT0gZmFsc2UgfHwgc3RyID09PSAnJykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSAvLyDmnKrnn6XlhoXlrrnkuI3nv7vor5EKCiAgICAgICAgc3RyID0gdHJhbnNQYWdlKCdwdWJpbGMnLCBzdHIpIHx8IHN0cjsgLy8g5LqM5qyh5YWs5YWx57+76K+R77yI5Li65LqG5byl6KGl5q2j5YiZ6YOo5YiG57+76K+R55qE5oOF5Ya177yJCiAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZShfa2V5LCBzdHIpOyAvLyDmm7/mjaLljp/lrZfnrKbvvIzkv53nlZnnqbrnmb3pg6jliIYKICAgIH0KCgogICAgLyoqCiAgICAgKiDnv7vor5HpobXpnaLlhoXlrrkKICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGFnZSDpobXpnaIKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkg5b6F57+76K+R5YaF5a65CiAgICAgKgogICAgICogQHJldHVybnMge3N0cmluZ3xib29sZWFufQogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc1BhZ2UocGFnZSwga2V5KSB7CiAgICAgICAgdmFyIHN0cjsgLy8g57+76K+R57uT5p6cCiAgICAgICAgdmFyIHJlczsgLy8g5q2j5YiZ5pWw57uECgogICAgICAgIC8vIOmdmeaAgee/u+ivkQogICAgICAgIHN0ciA9IEkxOE5bbGFuZ11bcGFnZV1bJ3N0YXRpYyddW2tleV07CiAgICAgICAgaWYgKHN0cikgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KCiAgICAgICAgLy8g5q2j5YiZ57+76K+RCiAgICAgICAgcmVzID0gSTE4TltsYW5nXVtwYWdlXS5yZWdleHA7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBzdHIgPSBrZXkucmVwbGFjZShyZXNbaV1bMF0sIHJlc1tpXVsxXSk7CiAgICAgICAgICAgICAgICBpZiAoc3RyICE9PSBrZXkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIOayoeaciee/u+ivkeadoeebrgogICAgfQoKCiAgICAvKioKICAgICAqIOaXtumXtOiKgueCuee/u+ivkQogICAgICovCiAgICBmdW5jdGlvbiB0aW1lRWxlbWVudCgpIHsKICAgICAgICBpZiAoIXdpbmRvdy5SZWxhdGl2ZVRpbWVFbGVtZW50KSB7IC8vIOmYsuatouaKpemUmQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgUmVsYXRpdmVUaW1lRWxlbWVudCRnZXRGb3JtYXR0ZWREYXRlID0gUmVsYXRpdmVUaW1lRWxlbWVudC5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVkRGF0ZTsKICAgICAgICB2YXIgVGltZUFnb0VsZW1lbnQkZ2V0Rm9ybWF0dGVkRGF0ZSA9IFRpbWVBZ29FbGVtZW50LnByb3RvdHlwZS5nZXRGb3JtYXR0ZWREYXRlOwogICAgICAgIC8vIHZhciBMb2NhbFRpbWVFbGVtZW50JGdldEZvcm1hdHRlZERhdGUgPSBMb2NhbFRpbWVFbGVtZW50LnByb3RvdHlwZS5nZXRGb3JtYXR0ZWREYXRlOwoKICAgICAgICB2YXIgUmVsYXRpdmVUaW1lID0gZnVuY3Rpb24gKHN0ciwgZWwpIHsgLy8g55u45a+55pe26Ze06Kej5p6QCiAgICAgICAgICAgIGlmICgvXm9uIChbXHcgXSspJC8udGVzdChzdHIpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ+S6jiAnICsgZWwudGl0bGUucmVwbGFjZSgvIC4rJC8sICcnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g5L2/55So5a2X5YW45YWs5YWx57+76K+R55qE56ys5LqM5Liq5q2j5YiZ57+76K+R55u45a+55pe26Ze0CiAgICAgICAgICAgIHZhciB0aW1lX2FnbyA9IEkxOE5bbGFuZ10ucHViaWxjLnJlZ2V4cFsxXTsKICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKHRpbWVfYWdvWzBdLCB0aW1lX2Fnb1sxXSk7CiAgICAgICAgfTsKCiAgICAgICAgUmVsYXRpdmVUaW1lRWxlbWVudC5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVkRGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHN0ciA9IFJlbGF0aXZlVGltZUVsZW1lbnQkZ2V0Rm9ybWF0dGVkRGF0ZS5jYWxsKHRoaXMpOwogICAgICAgICAgICByZXR1cm4gUmVsYXRpdmVUaW1lKHN0ciwgdGhpcyk7CiAgICAgICAgfTsKCiAgICAgICAgVGltZUFnb0VsZW1lbnQucHJvdG90eXBlLmdldEZvcm1hdHRlZERhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzdHIgPSBUaW1lQWdvRWxlbWVudCRnZXRGb3JtYXR0ZWREYXRlLmNhbGwodGhpcyk7CiAgICAgICAgICAgIHJldHVybiBSZWxhdGl2ZVRpbWUoc3RyLCB0aGlzKTsKICAgICAgICB9OwoKICAgICAgICBMb2NhbFRpbWVFbGVtZW50LnByb3RvdHlwZS5nZXRGb3JtYXR0ZWREYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy50aXRsZS5yZXBsYWNlKC8gLiskLywgJycpOwogICAgICAgIH07CgogICAgICAgIC8vIOmBjeWOhiB0aW1lIOWFg+e0oOi/m+ihjOe/u+ivkQogICAgICAgIC8vIDIwMTYtMDQtMTYgZ2l0aHViIOaUueeJiO+8jOS4jeWGjeeUqCB0aW1lIOagh+etvuS6huOAggogICAgICAgIHZhciB0aW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RpbWUsIHJlbGF0aXZlLXRpbWUsIHRpbWUtYWdvLCBsb2NhbC10aW1lJyk7CiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aW1lcywgZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIGlmIChlbC5nZXRGb3JtYXR0ZWREYXRlKSB7IC8vIOi3s+i/h+acquazqOWGjOeahCB0aW1lIOWFg+e0oAogICAgICAgICAgICAgICAgZWwudGV4dENvbnRlbnQgPSBlbC5nZXRGb3JtYXR0ZWREYXRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCgogICAgLyoqCiAgICAgKiDotKHnjK7ml6XljoYg5Z+65LqO5LqL5Lu257+76K+RCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbnRyaWJ1dGlvbnMoKSB7CiAgICAgICAgdmFyIHRpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N2Zy10aXAtb25lLWxpbmUnKTsKCiAgICAgICAgLy8g562J5b6FIEluY2x1ZGVGcmFnbWVudEVsZW1lbnQg5YWD57Sg5Yqg6L295a6M5q+V5ZCO57uR5a6a5LqL5Lu2CiAgICAgICAgLy8gdmFyIG9ic2VydmUgPSByZXF1aXJlKCdnaXRodWIvb2JzZXJ2ZScpLm9ic2VydmU7CgogICAgICAgIGRlZmluZSgnZ2l0aHViL2hhbnMtY29udHJpYnV0aW9ucycsIFsnLi9vYnNlcnZlJ10sIGZ1bmN0aW9uIChvYnNlcnZlKSB7CiAgICAgICAgICAgIG9ic2VydmUoIi5qcy1jYWxlbmRhci1ncmFwaC1zdmciLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgLy8g5bu25pe257uR5a6aIG1vdXNlb3ZlciDkuovku7bvvIzlkKbliJnmsqHms5Xnv7vor5EKICAgICAgICAgICAgICAgICAgICB2YXIgJGNhbGVuZGFyID0gJCgnLmpzLWNhbGVuZGFyLWdyYXBoJyk7CiAgICAgICAgICAgICAgICAgICAgd2FsaygkY2FsZW5kYXJbMF0pOyAvLyDnv7vor5Hml6Xljobpg6jliIYKCiAgICAgICAgICAgICAgICAgICAgJGNhbGVuZGFyLm9uKCdtb3VzZW92ZXInLCAnLmRheScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpcC5sZW5ndGggPT09IDApIHsgLy8g5rKh5pyJIHRpcCDlhYPntKDml7bpgIDlh7rpmLLmraLmiqXplJkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YSgpOyAvLyDojrflj5boioLngrnkuIrnmoQgZGF0YQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRpcCA9ICQodGlwWzBdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICR0aXAuaHRtbChkYXRhLmNvdW50ICsgJyDmrKHotKHnjK4gJyArIGRhdGEuZGF0ZSk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IC8vIOiOt+WPluWFg+e0oOS9jee9rgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHJlY3QubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldCAtIHRpcFswXS5vZmZzZXRXaWR0aCAvIDIgKyA1LjU7CgogICAgICAgICAgICAgICAgICAgICAgICAkdGlwLmNzcygnbGVmdCcsIGxlZnQpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgOTk5KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIGdoSW1wb3J0KCdnaXRodWIvaGFucy1jb250cmlidXRpb25zJylbJ2NhdGNoJ10oZnVuY3Rpb24oZSkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aHJvdyBlIH0pOwogICAgICAgIH0pOwogICAgfQoKfSkod2luZG93LCBkb2N1bWVudCk7Cg==","requires":[{"meta":{"name":"locals.js","url":"https://52cik.github.io/github-hans/locals.js?v1.6.3","ts":1642323440547,"mimetype":"text/javascript"},"source":"dmFyIEkxOE4gPSB7fTsKCkkxOE4uY29uZiA9IHsKICAgIC8qKgogICAgICog6KaB57+76K+R55qE6aG16Z2i5q2j5YiZCiAgICAgKi8KICAgIHJlUGFnZUNsYXNzOiAvXGIodmlzLXB1YmxpY3xwYWdlLShkYXNoYm9hcmR8cHJvZmlsZXxhY2NvdW50fG5ldy1yZXBvfGNyZWF0ZS1vcmcpfGhvbWVwYWdlfHNpZ251cHxzZXNzaW9uLWF1dGhlbnRpY2F0aW9ufG9hdXRoKVxiLywKCiAgICAvKioKICAgICAqIOWMuemFjSBwYXRobmFtZSDpobXpnaLnmoTmraPliJkKICAgICAqCiAgICAgKiDpgJrnn6XpobXpnaIgL25vdGlmaWNhdGlvbnMKICAgICAqIOWFs+azqOmhtemdoiAvd2F0Y2hpbmcKICAgICAqIOeCuei1numhtemdoiAvc3RhcnMKICAgICAqIOmXrumimOmhtemdoiAvaXNzdWVzCiAgICAgKiDmi4nlj5bor7fmsYIgL3B1bGxzCiAgICAgKiDmkJzntKLpobXpnaIgL3NlYXJjaAogICAgICog6LaL5Yq/6aG16Z2iIC90cmVuZGluZwogICAgICog5bGV56S66aG16Z2iIC9zaG93Y2FzZXMKICAgICAqIOWvvOWFpeS7k+W6kyAvbmV3L2ltcG9ydAogICAgICoKICAgICAqIOacqueZu+W9lemmlumhtSAvCiAgICAgKi8KICAgIHJlUGFnZVBhdGg6IC9cLyhub3RpZmljYXRpb25zfHdhdGNoaW5nfHN0YXJzfGlzc3Vlc3xzZWFyY2h8cHVsbHN8dHJlbmRpbmd8c2hvd2Nhc2VzfCR8bmV3XC9pbXBvcnQpLywKCiAgICAvKioKICAgICAqIOWMuemFjSB1cmwg6aG16Z2i55qE5q2j5YiZCiAgICAgKgogICAgICog5Luj56CB54mH5q616aG16Z2iIGdpc3QKICAgICAqLwogICAgcmVQYWdlVXJsOiAvKGdpc3QpXC5naXRodWIuY29tLywKCiAgICAvKioKICAgICAqIOW/veeVpeWMuuWfn+eahCBjbGFzcyDmraPliJkKICAgICAqCiAgICAgKiDpnaLljIXlsZEgYnJlYWRjcnVtYgogICAgICog5paH5Lu25YiX6KGoIGZpbGVzIGpzLW5hdmlnYXRpb24tY29udGFpbmVyIGpzLWFjdGl2ZS1uYXZpZ2F0aW9uLWNvbnRhaW5lcgogICAgICog5Luj56CB6auY5LquIGhpZ2hsaWdodCB0YWItc2l6ZSBqcy1maWxlLWxpbmUtY29udGFpbmVyCiAgICAgKiDku6PnoIHlt67lvIIgZGF0YSBoaWdobGlnaHQgYmxvYi13cmFwcGVyCiAgICAgKiB3aWtp5YaF5a65IG1hcmtkb3duLWJvZHkKICAgICAqLwogICAgcmVJZ25vcmU6IC8oYnJlYWRjcnVtYnxmaWxlcyBqcy1uYXZpZ2F0aW9uLWNvbnRhaW5lcnxoaWdobGlnaHQgdGFiLXNpemV8aGlnaGxpZ2h0IGJsb2Itd3JhcHBlcnxtYXJrZG93bi1ib2R5KS8sCn07CgpJMThOLnpoID0gewogICAgInRpdGxlIjogeyAvLyDmoIfpopjnv7vor5EKICAgICAgICAic3RhdGljIjogeyAvLyDpnZnmgIHnv7vor5EKICAgICAgICB9LAogICAgICAgICJyZWdleHAiOiBbIC8vIOato+WImee/u+ivkQogICAgICAgIF0sCiAgICB9LAoKICAgICJwdWJpbGMiOiB7IC8vIOWFrOWFseWMuuWfn+e/u+ivkQogICAgICAgICJzdGF0aWMiOiB7IC8vIOmdmeaAgee/u+ivkQogICAgICAgICAgICAvLyDmnKrnmbvlvZXpg6jliIYKICAgICAgICAgICAgIlBlcnNvbmFsIjogIuS4quS6uiIsCiAgICAgICAgICAgICJPcGVuIHNvdXJjZSI6ICLlvIDmupAiLAogICAgICAgICAgICAiQnVzaW5lc3MiOiAi5ZWG5LiaIiwKICAgICAgICAgICAgIlByaWNpbmciOiAi5a6a5Lu3IiwKICAgICAgICAgICAgIlN1cHBvcnQiOiAi5pSv5oyBIiwKICAgICAgICAgICAgIlNpZ24gaW4iOiAi55m75b2VIiwKICAgICAgICAgICAgIlNpZ24gdXAiOiAi5rOo5YaMIiwKCiAgICAgICAgICAgICJTZWFyY2ggR2l0SHViIjogIkdpdEh1YiDkuIDkuIvvvIzkvaDlsLHnn6XpgZMiLAogICAgICAgICAgICAiVGhpcyByZXBvc2l0b3J5IjogIuW9k+WJjeS7k+W6kyIsCiAgICAgICAgICAgICJTZWFyY2giOiAi5pCc57SiIiwKCiAgICAgICAgICAgICJQdWxsIFJlcXVlc3RzIjogIuaLieWPluivt+axgiIsCiAgICAgICAgICAgICJQdWxsIHJlcXVlc3RzIjogIuaLieWPluivt+axgiIsCiAgICAgICAgICAgICJJc3N1ZXMiOiAi6Zeu6aKYIiwKICAgICAgICAgICAgIk1hcmtldHBsYWNlIjogIuW5v+WcuiIsCiAgICAgICAgICAgICJHaXN0IjogIuS7o+eggeeJh+autSIsCiAgICAgICAgICAgICJZb3VyIGRhc2hib2FyZCI6ICLov5Tlm57pppbpobUiLAoKICAgICAgICAgICAgIllvdSBoYXZlIG5vIHVucmVhZCBub3RpZmljYXRpb25zIjogIuaCqOayoeacieacquivu+mAmuefpSIsCiAgICAgICAgICAgICJZb3UgaGF2ZSB1bnJlYWQgbm90aWZpY2F0aW9ucyI6ICLmgqjmnInmnKror7vpgJrnn6UiLAogICAgICAgICAgICAiQ3JlYXRlIG5ld+KApiI6ICLmlrDlu7rigKYiLAogICAgICAgICAgICAiVmlldyBwcm9maWxlIGFuZCBtb3JlIjogIuafpeeci+abtOWkmuS/oeaBryIsCgogICAgICAgICAgICAiTmV3IHJlcG9zaXRvcnkiOiAi5paw5bu65LuT5bqTIiwKICAgICAgICAgICAgIk5ldyBvcmdhbml6YXRpb24iOiAi5paw5bu657uE57uHIiwKICAgICAgICAgICAgIkltcG9ydCByZXBvc2l0b3J5IjogIuWvvOWFpeS7k+W6kyIsCiAgICAgICAgICAgICJOZXcgZ2lzdCI6ICLmlrDlu7rku6PnoIHniYfmrrUiLAogICAgICAgICAgICAiTmV3IGlzc3VlIjogIuaWsOW7uumXrumimCIsCgogICAgICAgICAgICAiU2lnbmVkIGluIGFzIjogIuaCqOWlvSIsCiAgICAgICAgICAgICJZb3VyIHByb2ZpbGUiOiAi5oKo55qE5Li76aG1IiwKICAgICAgICAgICAgIllvdXIgc3RhcnMiOiAi54K56LWe55qE6aG555uuIiwKICAgICAgICAgICAgIllvdXIgZ2lzdHMiOiAi5oKo55qE5Luj56CB54mH5q61IiwKICAgICAgICAgICAgIkV4cGxvcmUiOiAi5o6i57SiIiwKICAgICAgICAgICAgIkludGVncmF0aW9ucyI6ICLpm4bmiJAiLAogICAgICAgICAgICAiSGVscCI6ICLluK7liqkiLAogICAgICAgICAgICAiU2V0dGluZ3MiOiAi6K6+572uIiwKICAgICAgICAgICAgIlNpZ24gb3V0IjogIumAgOWHuiIsCgogICAgICAgICAgICAiU2hvd2Nhc2VzIjogIuWxleafnCIsCiAgICAgICAgICAgICJUcmVuZGluZyI6ICLotovlir8iLAogICAgICAgICAgICAiU3RhcnMiOiAi5bey6LWeIiwKCgogICAgICAgICAgICAiUHJldmlvdXMiOiAi5LiK5LiA6aG1IiwKICAgICAgICAgICAgIk5leHQiOiAi5LiL5LiA6aG1IiwKCiAgICAgICAgICAgICJQZXJpb2Q6IjogIuacgOi/kToiLAogICAgICAgICAgICAiRmlsdGVyIGFjdGl2aXR5IjogIumAieaLqeaXtumXtCIsCiAgICAgICAgICAgICIxIGRheSI6ICLkuIDlpKkiLAogICAgICAgICAgICAiMyBkYXlzIjogIuS4ieWkqSIsCiAgICAgICAgICAgICIxIHdlZWsiOiAi5LiA5ZGoIiwKICAgICAgICAgICAgIjEgbW9udGgiOiAi5LiA5Liq5pyIIiwKCiAgICAgICAgICAgICJDb25maXJtIHBhc3N3b3JkIHRvIGNvbnRpbnVlIjogIuehruiupOWvhueggeWQjuaJjeiDvee7p+e7reaTjeS9nCIsCiAgICAgICAgICAgICJQYXNzd29yZCI6ICLlr4bnoIEiLAogICAgICAgICAgICAiKEZvcmdvdCBwYXNzd29yZCkiOiAiKOW/mOiusOWvhueggSkiLAogICAgICAgICAgICAiQ29uZmlybSBwYXNzd29yZCI6ICLnu6fnu60iLAoKICAgICAgICAgICAgIlVwZGF0ZWQiOiAi5pu05pawIiwKICAgICAgICAgICAgIlRlcm1zIjogIuadoeasviIsCiAgICAgICAgICAgICJQcml2YWN5IjogIumakOengSIsCiAgICAgICAgICAgICJTZWN1cml0eSI6ICLlronlhagiLAogICAgICAgICAgICAiQ29udGFjdCI6ICLogZTns7siLAogICAgICAgICAgICAiU3RhdHVzIjogIueKtuaAgSIsCiAgICAgICAgICAgICJUcmFpbmluZyI6ICLln7norq0iLAogICAgICAgICAgICAiU2hvcCI6ICLllYblupciLAogICAgICAgICAgICAiQmxvZyI6ICLljZrlrqIiLAogICAgICAgICAgICAiQWJvdXQiOiAi5YWz5LqOIiwKCiAgICAgICAgICAgIC8vIOivhOiuuue8lui+keWZqOe/u+ivkQogICAgICAgICAgICAiV3JpdGUiOiAi57yW6L6RIiwKICAgICAgICAgICAgIlByZXZpZXciOiAi6aKE6KeIIiwKCiAgICAgICAgICAgICJBZGQgaGVhZGVyIHRleHQiOiAi5qCH6aKYIiwKICAgICAgICAgICAgIkFkZCBib2xkIHRleHQgPGNtZCtiPiI6ICLliqDnspcgPGNtZCtiPiIsCiAgICAgICAgICAgICJBZGQgaXRhbGljIHRleHQgPGNtZCtpPiI6ICLmlpzkvZMgPGNtZCtpPiIsCiAgICAgICAgICAgICJJbnNlcnQgYSBxdW90ZSI6ICLmj5LlhaXlvJXnlKgiLAogICAgICAgICAgICAiSW5zZXJ0IGNvZGUiOiAi5o+S5YWl5Luj56CBIiwKICAgICAgICAgICAgIkFkZCBhIGxpbmsgPGNtZCtrPiI6ICLov57mjqUgPGNtZCtrPiIsCiAgICAgICAgICAgICJBZGQgYSBidWxsZXRlZCBsaXN0IjogIua3u+WKoOaXoOW6j+WIl+ihqCIsCiAgICAgICAgICAgICJBZGQgYSBudW1iZXJlZCBsaXN0IjogIua3u+WKoOacieW6j+WIl+ihqCIsCiAgICAgICAgICAgICJBZGQgYSB0YXNrIGxpc3QiOiAi5re75Yqg5Lu75Yqh5YiX6KGoIiwKICAgICAgICAgICAgIkRpcmVjdGx5IG1lbnRpb24gYSB1c2VyIG9yIHRlYW0iOiAi55u05o6l5o+Q5Yiw55So5oi35oiW5Zui6ZifIiwKICAgICAgICAgICAgIlJlZmVyZW5jZSBhbiBpc3N1ZSBvciBwdWxsIHJlcXVlc3QiOiAi5Y+C6ICD6Zeu6aKY5oiW5ouJ5Y+W6K+35rGCIiwKICAgICAgICAgICAgIkxlYXZlIGEgY29tbWVudCI6ICLnlZnkuIvor4TorroiLAoKICAgICAgICAgICAgIkF0dGFjaCBmaWxlcyBieSBkcmFnZ2luZyAmIGRyb3BwaW5nLCI6ICLmi5bmi73mt7vliqDpmYTku7bvvIwiLAogICAgICAgICAgICAic2VsZWN0aW5nIHRoZW0iOiAi5oiW6YCJ5oup5paH5Lu2IiwKICAgICAgICAgICAgIiwgb3IgcGFzdGluZyBmcm9tIHRoZSBjbGlwYm9hcmQuIjogIu+8jOaIluWkjeWItueymOi0tOWGheWuueOAgiIsCiAgICAgICAgICAgICJTdHlsaW5nIHdpdGggTWFya2Rvd24gaXMgc3VwcG9ydGVkIjogIuaUr+aMgSBNYXJrZG93biDlip/og73lk6bjgIIiLAoKICAgICAgICAgICAgIkNsb3NlIGlzc3VlIjogIuWFs+mXremXrumimCIsCiAgICAgICAgICAgICJDb21tZW50IjogIuaPkOS6pCIsCiAgICAgICAgICAgICJTdWJtaXQgbmV3IGlzc3VlIjogIuaPkOS6pOaWsOmXrumimCIsCiAgICAgICAgICAgICJDb21tZW50IG9uIHRoaXMgY29tbWl0IjogIuaPkOS6pCIsCiAgICAgICAgICAgICJDbG9zZSBhbmQgY29tbWVudCI6ICLmj5DkuqTlubblhbPpl60iLAogICAgICAgICAgICAiUmVvcGVuIGFuZCBjb21tZW50IjogIuaPkOS6pOW5tumHjeaWsOaJk+W8gCIsCiAgICAgICAgICAgICJSZW9wZW4gaXNzdWUiOiAi6YeN5paw5omT5byA6Zeu6aKYIiwKCiAgICAgICAgICAgIC8vIOWFrOWFseWKqOS9nOivjQogICAgICAgICAgICAiRm9sbG93ZXJzIjogIueyieS4nSIsCiAgICAgICAgICAgICJGb2xsb3ciOiAi5YWz5rOoIiwKICAgICAgICAgICAgIlVuZm9sbG93IjogIuWPlua2iOWFs+azqCIsCiAgICAgICAgICAgICJXYXRjaCI6ICLlhbPms6giLAogICAgICAgICAgICAiVW53YXRjaCI6ICLlj5bmtojlhbPms6giLAogICAgICAgICAgICAiU3RhciI6ICLngrnotZ4iLAogICAgICAgICAgICAiVW5zdGFyIjogIuWPlua2iOeCuei1niIsCiAgICAgICAgICAgICJGb3JrIjogIua0vueUnyIsCgogICAgICAgICAgICAvLyDpgq7nrrHpqozor4Hmj5DnpLoKICAgICAgICAgICAgIlBsZWFzZSB2ZXJpZnkgeW91ciBlbWFpbCBhZGRyZXNzIHRvIGFjY2VzcyBhbGwgb2YgR2l0SHViJ3MgZmVhdHVyZXMuIjogIuivt+mqjOivgeaCqOeahOeUteWtkOmCruS7tuWcsOWdgOS7peS+v+W8gOWQr+aJgOaciSBHaXRIdWIg5Yqf6IO944CCIiwKICAgICAgICAgICAgIkNvbmZpZ3VyZSBlbWFpbCBzZXR0aW5ncyI6ICLkv67mlLnnlLXlrZDpgq7ku7borr7nva4iLAogICAgICAgICAgICAiWW91ciBlbWFpbCB3YXMgdmVyaWZpZWQuIjogIuaCqOeahOmCruS7tuWcsOWdgOmqjOivgeaIkOWKn++8gSIsCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EgKOWFrOWFseWMuuWfn+ato+WImeS8muS6jOasoeiwg+eUqOe/u+ivke+8jOS4uuS6huW8peihpemDqOWIhue/u+ivkeeahOaDheWGtSkKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOWMuemFjeaXtumXtOagvOW8jwogICAgICAgICAgICAgKgogICAgICAgICAgICAgKiBNYXIgMTksIDIwMTUg4oCTIE1hciAxOSwgMjAxNgogICAgICAgICAgICAgKiBKYW51YXJ5IDI2IOKAkyBNYXJjaCAxOQogICAgICAgICAgICAgKiBNYXJjaCAyNgogICAgICAgICAgICAgKgogICAgICAgICAgICAgKiDkuI3nn6XpgZPmmK/lkKbnqLPlrposIOaaguaXtuWFiOivleeUqOedgC4gMjAxNi0wMy0xOSAyMDo0Njo0NQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgWy8oSmFuKD86dWFyeSk/fEZlYig/OnJ1YXJ5KT98TWFyKD86Y2gpP3xBcHIoPzppbCk/fE1heSg/Oik/fEp1big/OmUpP3xKdWwoPzp5KT98QXVnKD86dXN0KT98U2VwKD86dGVtYmVyKT98T2N0KD86b2Jlcik/fE5vdig/OmVtYmVyKT98RGVjKD86ZW1iZXIpPykgKFxkKykoPzosIChcZCspfCkvZywgZnVuY3Rpb24gKGFsbCwgbW9udGgsIGRhdGUsIHllYXIpIHsKICAgICAgICAgICAgICAgIHZhciBtb250aEtleSA9IHsKICAgICAgICAgICAgICAgICAgICAiSmFuIjogIjHmnIgiLAogICAgICAgICAgICAgICAgICAgICJGZWIiOiAiMuaciCIsCiAgICAgICAgICAgICAgICAgICAgIk1hciI6ICIz5pyIIiwKICAgICAgICAgICAgICAgICAgICAiQXByIjogIjTmnIgiLAogICAgICAgICAgICAgICAgICAgICJNYXkiOiAiNeaciCIsCiAgICAgICAgICAgICAgICAgICAgIkp1biI6ICI25pyIIiwKICAgICAgICAgICAgICAgICAgICAiSnVsIjogIjfmnIgiLAogICAgICAgICAgICAgICAgICAgICJBdWciOiAiOOaciCIsCiAgICAgICAgICAgICAgICAgICAgIlNlcCI6ICI55pyIIiwKICAgICAgICAgICAgICAgICAgICAiT2N0IjogIjEw5pyIIiwKICAgICAgICAgICAgICAgICAgICAiTm92IjogIjEx5pyIIiwKICAgICAgICAgICAgICAgICAgICAiRGVjIjogIjEy5pyIIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiAoeWVhciA/IHllYXIgKyAn5bm0JyA6ICcnKSArIG1vbnRoS2V5W21vbnRoLnN1YnN0cmluZygwLCAzKV0gKyBkYXRlICsgJ+aXpSc7CiAgICAgICAgICAgIH1dLAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog55u45a+55pe26Ze05qC85byP5aSE55CGCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBbL2p1c3Qgbm93fChhbj98XGQrKSAoc2Vjb25kfG1pbnV0ZXxob3VyfGRheXxtb250aHx5ZWFyKXM/IGFnby8sIGZ1bmN0aW9uIChtLCBkLCB0KSB7CiAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ2p1c3Qgbm93JykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZFswXSA9PT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgZCA9ICcxJzsKICAgICAgICAgICAgICAgIH0gLy8gYSwgYW4g5L+u5pS55Li6IDEKCiAgICAgICAgICAgICAgICB2YXIgZHQgPSB7c2Vjb25kOiAn56eSJywgbWludXRlOiAn5YiG6ZKfJywgaG91cjogJ+Wwj+aXticsIGRheTogJ+WkqScsIG1vbnRoOiAn5Liq5pyIJywgeWVhcjogJ+W5tCd9OwoKICAgICAgICAgICAgICAgIHJldHVybiBkICsgJyAnICsgZHRbdF0gKyAn5LmL5YmNJzsKICAgICAgICAgICAgfV0sCgogICAgICAgICAgICAvLyDku5PlupPliKDpmaTmj5DnpLoKICAgICAgICAgICAgWy9Zb3VyIHJlcG9zaXRvcnkgIihbXiJdKykid2FzIHN1Y2Nlc3NmdWxseSBkZWxldGVkXC4vLCAi5oKo55qEIFwiJDFcIuS7k+W6k+W3suiiq+aIkOWKn+WIoOmZpOOAgiJdLAogICAgICAgICAgICAvLyDpgq7nrrHpqozor4Hmj5DnpLoKICAgICAgICAgICAgWy9BbiBlbWFpbCBjb250YWluaW5nIHZlcmlmaWNhdGlvbiBpbnN0cnVjdGlvbnMgd2FzIHNlbnQgdG8gKC4rKVwuLywgIumqjOivgemCruS7tuW3suWPkemAgeWIsCAkMeOAgiJdLAogICAgICAgICAgICAvLyDlpLTlg4/kuIvpnaLnmoTms6jlhozkv6Hmga8KICAgICAgICAgICAgWy9Kb2luZWQgb24vLCAi5rOo5YaM5LqOIl0sCiAgICAgICAgXSwKICAgIH0sCgogICAgInBhZ2UtZGFzaGJvYXJkIjogeyAvLyDlt7LnmbvlvZXnmoTpppbpobUKICAgICAgICAic3RhdGljIjogeyAvLyDpnZnmgIHnv7vor5EKICAgICAgICAgICAgLy8g5paw5omL5biu5YqpCiAgICAgICAgICAgICJMZWFybiBHaXQgYW5kIEdpdEh1YiB3aXRob3V0IGFueSBjb2RlISI6ICLkuobop6MgR2l0IOWSjCBHaXRIdWIg5peg6ZyA5Lu75L2V5Luj56CB77yBIiwKICAgICAgICAgICAgIlVzaW5nIHRoZSBIZWxsbyBXb3JsZCBndWlkZSwgeW914oCZbGwgY3JlYXRlIGEgcmVwb3NpdG9yeSwgc3RhcnQgYSBicmFuY2gsIjogIuS9v+eUqCBIZWxsbyBXb3JsZCDmjIfljZfvvIzmgqjlsIbliJvlu7rkuIDkuKrku5PlupPvvIzlvIDlp4vkuIDkuKrliIbmlK/vvIwiLAogICAgICAgICAgICAid3JpdGUgY29tbWVudHMsIGFuZCBvcGVuIGEgcHVsbCByZXF1ZXN0LiI6ICLlhpnor4TorrrvvIzlubbliJvlu7rkuIDkuKrmi4nlj5bor7fmsYLjgIIo5pWZ56iL5YaF5a655bCx5LiN57+76K+R5LqGLi4uKSIsCiAgICAgICAgICAgICJMZXQncyBnZXQgc3RhcnRlZCEiOiAi6K6p5oiR5Lus5byA5aeL5ZCn77yBIiwKICAgICAgICAgICAgIkhpZGUgdGhpcyBub3RpY2UgZm9yZXZlciI6ICLmsLjkuYXnmoTpmpDol4/or6Xkv6Hmga8iLAoKICAgICAgICAgICAgIldlbGNvbWUgdG8gR2l0SHViISBXaGF04oCZcyBuZXh0PyI6ICLmrKLov47mnaXliLAgR2l0SHVi77yB5LiL5LiA5q2l5bmy5LuA5LmI77yfIiwKICAgICAgICAgICAgIkNyZWF0ZSBhIHJlcG9zaXRvcnkiOiAi5Yib5bu65LiA5Liq5LuT5bqTIiwKICAgICAgICAgICAgIlRlbGwgdXMgYWJvdXQgeW91cnNlbGYiOiAi5LuL57uN5LiA5LiL5L2g6Ieq5bexIiwKICAgICAgICAgICAgIkJyb3dzZSBpbnRlcmVzdGluZyByZXBvc2l0b3JpZXMiOiAi5rWP6KeI5pyJ6Laj6LWE5paZ5bqTIiwKICAgICAgICAgICAgIm9uIFR3aXR0ZXIiOiAi5ZyoIFR3aXR0ZXIg5LiKIiwKCiAgICAgICAgICAgICJZb3UgZG9u4oCZdCBoYXZlIGFueSByZXBvc2l0b3JpZXMgeWV0ISI6ICLmgqjnm67liY3ov5jmsqHmnInku7vkvZXku5PlupPvvIEiLAogICAgICAgICAgICAiQ3JlYXRlIHlvdXIgZmlyc3QgcmVwb3NpdG9yeSI6ICLliJvlu7rmgqjnmoTnrKzkuIDkuKrku5PlupMiLAogICAgICAgICAgICAib3IiOiAi5oiW6ICFIiwKICAgICAgICAgICAgImxlYXJuIG1vcmUgYWJvdXQgR2l0IGFuZCBHaXRIdWIiOiAi5a2m5Lmg5pu05aSa5YWz5LqOIEdpdCDlkowgR2l0SHViIOefpeivhiIsCgogICAgICAgICAgICAvLyDlt7LmnInku5PlupPnmoTpobnnm64KICAgICAgICAgICAgIlJlcG9zaXRvcmllcyB5b3UgY29udHJpYnV0ZSB0byI6ICLmgqjotKHnjK7ov4fnmoTku5PlupMiLAogICAgICAgICAgICAiWW91ciByZXBvc2l0b3JpZXMiOiAi5oKo55qE5LuT5bqTIiwKICAgICAgICAgICAgIkZpbmQgYSByZXBvc2l0b3J54oCmIjogIuaQnOe0ouS7k+W6k+KApiIsCiAgICAgICAgICAgICJBbGwiOiAi5YWo6YOoIiwKICAgICAgICAgICAgIlB1YmxpYyI6ICLlhazlhbEiLAogICAgICAgICAgICAiUHJpdmF0ZSI6ICLnp4HmnIkiLAogICAgICAgICAgICAiU291cmNlcyI6ICLmupDnoIEiLAogICAgICAgICAgICAiRm9ya3MiOiAi5rS+55SfIiwKCiAgICAgICAgICAgICJWaWV3IjogIuafpeeciyIsCiAgICAgICAgICAgICJuZXcgYnJvYWRjYXN0IjogIuadoeaWsOWFrOWRiiIsCiAgICAgICAgICAgICJuZXcgYnJvYWRjYXN0cyI6ICLmnaHmlrDlhazlkYoiLAoKICAgICAgICAgICAgLy8g5Yqo5oCBIOeKtuaAgeivjQogICAgICAgICAgICAic3RhcnJlZCI6ICLotZ7kuoYiLAogICAgICAgICAgICAiZm9ya2VkIjogIua0vueUn+S6hiIsCiAgICAgICAgICAgICJmb3JrZWQgZnJvbSI6ICLmtL7nlJ/oh7MiLAogICAgICAgICAgICAiY3JlYXRlZCByZXBvc2l0b3J5IjogIuWIm+W7uuS6huS7k+W6kyIsCiAgICAgICAgICAgICJvcGVuZWQgcHVsbCByZXF1ZXN0IjogIuWPkei1t+S6huaLieWPluivt+axgiIsCiAgICAgICAgICAgICJjb21tZW50ZWQgb24gcHVsbCByZXF1ZXN0IjogIuivhOiuuuS6huaLieWPluivt+axgiIsCiAgICAgICAgICAgICJvcGVuZWQgaXNzdWUiOiAi5paw5bu66Zeu6aKYIiwKICAgICAgICAgICAgImNsb3NlIGlzc3VlIjogIuWFs+mXremXrumimCIsCiAgICAgICAgICAgICJhZGRlZCI6ICLmt7vliqDkuoYiLAogICAgICAgICAgICAidG8iOiAi5YiwIiwKICAgICAgICAgICAgInB1c2hlZCB0byI6ICLmjqjpgIHkuoYiLAogICAgICAgICAgICAiY2xvc2VkIGlzc3VlIjogIuWFs+mXreS6humXrumimCIsCiAgICAgICAgICAgICJtZXJnZWQgcHVsbCByZXF1ZXN0IjogIuWQiOW5tuS6huaLieWPluivt+axgiIsCiAgICAgICAgICAgICJjb21tZW50ZWQgb24gaXNzdWUiOiAi5o+Q5Lqk5LqG6K+E6K66IiwKCiAgICAgICAgICAgICJNb3JlIjogIuabtOWkmiIsCgoKICAgICAgICAgICAgIlN3aXRjaCBkYXNoYm9hcmQgY29udGV4dCI6ICLliIfmjaLpu5jorqTouqvku70iLAogICAgICAgICAgICAiTWFuYWdlIG9yZ2FuaXphdGlvbnMiOiAi566h55CG57uE57uHIiwKICAgICAgICAgICAgIkNyZWF0ZSBvcmdhbml6YXRpb24iOiAi5Yib5bu657uE57uHIiwKCiAgICAgICAgICAgIC8vIOmmluasoeWKoOWFpee7hOe7h+mAmuefpQogICAgICAgICAgICAiWW914oCZdmUgYmVlbiBhZGRlZCB0byB0aGUiOiAi5oKo5bey57uP6KKr5re75Yqg5YiwIiwKICAgICAgICAgICAgIm9yZ2FuaXphdGlvbiEiOiAi57uE57uH77yBIiwKICAgICAgICAgICAgIkhlcmUgYXJlIHNvbWUgcXVpY2sgdGlwcyBmb3IgYSBmaXJzdC10aW1lIG9yZ2FuaXphdGlvbiBtZW1iZXIuIjogIuS7peS4i+aYr+mmluasoeWKoOWFpee7hOe7h+eahOS4gOS6m+aPkOekuuOAgiIsCiAgICAgICAgICAgICJVc2UgdGhlIHN3aXRjaCBjb250ZXh0IGJ1dHRvbiBpbiB0aGUgdXBwZXIgbGVmdCBjb3JuZXIgb2YgdGhpcyBwYWdlIHRvIHN3aXRjaCBiZXR3ZWVuIHlvdXIgcGVyc29uYWwgY29udGV4dCAoIjogIuS9v+eUqOmhtemdouW3puS4iuinkueahOWIh+aNoui6q+S7veaMiemSru+8jOaCqOWPr+S7peWcqCgiLAogICAgICAgICAgICAiKSBhbmQgb3JnYW5pemF0aW9ucyB5b3UgYXJlIGEgbWVtYmVyIG9mLiI6ICIp5ZKM57uE57uH6Lqr5Lu95LmL6Ze06L+b6KGM5YiH5o2i44CCIiwKICAgICAgICAgICAgIkFmdGVyIHlvdSBzd2l0Y2ggY29udGV4dHMgeW914oCZbGwgc2VlIGFuIG9yZ2FuaXphdGlvbi1mb2N1c2VkIGRhc2hib2FyZCB0aGF0IGxpc3RzIG91dCBvcmdhbml6YXRpb24gcmVwb3NpdG9yaWVzIGFuZCBhY3Rpdml0aWVzLiI6ICLlvZPmgqjliIfmjaLouqvku73vvIzmgqjkvJrnnIvliLDkuIDkuKrnu4Tnu4fkuLrkuK3lv4PnmoTpobXpnaLvvIzlhbbkuK3liJflh7rkuobnu4Tnu4flupPlkozmtLvliqjjgIIiLAogICAgICAgIH0sCiAgICAgICAgInJlZ2V4cCI6IFsgLy8g5q2j5YiZ57+76K+RCiAgICAgICAgICAgIFsvU2hvdyAoXGQrKSBtb3JlIHJlcG9zaXRvcmllc+KApi8sICLmmL7npLogJDEg5Liq5pu05aSa55qE5LuT5bqT4oCmIl0sCiAgICAgICAgXSwKICAgIH0sCgogICAgInBhZ2UtcHJvZmlsZSI6IHsgLy8g5Liq5Lq66aaW6aG1CiAgICAgICAgInN0YXRpYyI6IHsgLy8g6Z2Z5oCB57+76K+RCiAgICAgICAgICAgICJVcGRhdGluZyB5b3VyIHByb2ZpbGUgd2l0aCB5b3VyIG5hbWUsIGxvY2F0aW9uLCBhbmQgYSBwcm9maWxlIHBpY3R1cmUgaGVscHMgb3RoZXIgR2l0SHViIHVzZXJzIGdldCB0byBrbm93IHlvdS4iOiAi5pu05paw5oKo55qE6LWE5paZ5L+h5oGv5YyF5ous5aeT5ZCN77yM5Zyw5Z2A77yM5aS05YOP562J6LWE5paZ77yM6K6p5YW25LuW55So5oi35pu05a655piT55qE5LqG6Kej5oKo44CCIiwKCiAgICAgICAgICAgICJKb2luZWQgb24iOiAi5rOo5YaM5LqOIiwKICAgICAgICAgICAgIkNoYW5nZSB5b3VyIGF2YXRhciI6ICLkv67mlLnlpLTlg48iLAogICAgICAgICAgICAiU3RhcnJlZCI6ICLotZ7kuoYiLAogICAgICAgICAgICAiRm9sbG93aW5nIjogIuWFs+azqCIsCiAgICAgICAgICAgICJPcmdhbml6YXRpb25zIjogIue7hOe7hyIsCiAgICAgICAgICAgICJDb250cmlidXRpb25zIjogIui0oeeMriIsCiAgICAgICAgICAgICJQdWJsaWMgY29udHJpYnV0aW9ucyI6ICLotKHnjK4iLAogICAgICAgICAgICAiT3ZlcnZpZXciOiAi5qaC6L+wIiwKICAgICAgICAgICAgIlJlcG9zaXRvcmllcyI6ICLku5PlupMiLAogICAgICAgICAgICAiUHVibGljIGFjdGl2aXR5IjogIuWKqOaAgSIsCiAgICAgICAgICAgICJFZGl0IHByb2ZpbGUiOiAi5L+u5pS56K6+572uIiwKICAgICAgICAgICAgIlBvcHVsYXIgcmVwb3NpdG9yaWVzIjogIua1geihjOeahOS7k+W6kyIsCiAgICAgICAgICAgICJQaW5uZWQgcmVwb3NpdG9yaWVzIjogIuWbuuWumueahOS7k+W6kyIsCiAgICAgICAgICAgICJDdXN0b21pemUgeW91ciBwaW5uZWQgcmVwb3NpdG9yaWVzIjogIuiHquWumuS5ieaCqOeahOWbuuWumuS7k+W6kyIsCiAgICAgICAgICAgICJSZXBvc2l0b3JpZXMgY29udHJpYnV0ZWQgdG8iOiAi6LSh54yu6L+H55qE5LuT5bqTIiwKICAgICAgICAgICAgIkNvbnRyaWJ1dGlvbiBhY3Rpdml0eSI6ICLotKHnjK7kv6Hmga8iLAoKICAgICAgICAgICAgIllvdSBjYW4gbm93IHBpbiB1cCB0byA2IHJlcG9zaXRvcmllcy4iOiAi5L2g546w5Zyo5Y+v5Lul6K6+572uNuS4quWbuuWumuS7k+W6k+OAgiIsCiAgICAgICAgICAgICJTZWxlY3QgdXAgdG8gZml2ZSBwdWJsaWMgcmVwb3NpdG9yaWVzIHlvdSdkIGxpa2UgdG8gc2hvdy4iOiAi5pyA5aSa5Y+v6YCJ5oup5LqU5Liq6KaB5pi+56S655qE5YWs5YWx5LuT5bqT44CCIiwKICAgICAgICAgICAgIlNob3c6IjogIuaYvuekujoiLAogICAgICAgICAgICAiWW91ciByZXBvc2l0b3JpZXMiOiAi5oKo55qE5LuT5bqTIiwKICAgICAgICAgICAgIlJlcG9zaXRvcmllcyB5b3UgY29udHJpYnV0ZSB0byI6ICLmgqjotKHnjK7ov4fnmoTku5PlupMiLAogICAgICAgICAgICAiU2F2ZSBwaW5uZWQgcmVwb3NpdG9yaWVzIjogIuS/neWtmOWbuuWumuS7k+W6kyIsCgogICAgICAgICAgICAiSmFuIjogIjHmnIgiLAogICAgICAgICAgICAiRmViIjogIjLmnIgiLAogICAgICAgICAgICAiTWFyIjogIjPmnIgiLAogICAgICAgICAgICAiQXByIjogIjTmnIgiLAogICAgICAgICAgICAiTWF5IjogIjXmnIgiLAogICAgICAgICAgICAiSnVuIjogIjbmnIgiLAogICAgICAgICAgICAiSnVsIjogIjfmnIgiLAogICAgICAgICAgICAiQXVnIjogIjjmnIgiLAogICAgICAgICAgICAiU2VwIjogIjnmnIgiLAogICAgICAgICAgICAiT2N0IjogIjEw5pyIIiwKICAgICAgICAgICAgIk5vdiI6ICIxMeaciCIsCiAgICAgICAgICAgICJEZWMiOiAiMTLmnIgiLAoKICAgICAgICAgICAgIkphbnVhcnkiOiAi5LiA5pyIIiwKICAgICAgICAgICAgIkZlYnJ1YXJ5IjogIuS6jOaciCIsCiAgICAgICAgICAgICJNYXJjaCI6ICLkuInmnIgiLAogICAgICAgICAgICAiQXByaWwiOiAi5Zub5pyIIiwKICAgICAgICAgICAgIk1heSI6ICLkupTmnIgiLAogICAgICAgICAgICAiSnVuZSI6ICLlha3mnIgiLAogICAgICAgICAgICAiSnVseSI6ICLkuIPmnIgiLAogICAgICAgICAgICAiQXVndXN0IjogIuWFq+aciCIsCiAgICAgICAgICAgICJTZXB0ZW1iZXIiOiAi5Lmd5pyIIiwKICAgICAgICAgICAgIk9jdG9iZXIiOiAi5Y2B5pyIIiwKICAgICAgICAgICAgIk5vdmVtYmVyIjogIuWNgeS4gOaciCIsCiAgICAgICAgICAgICJEZWNlbWJlciI6ICLljYHkuozmnIgiLAoKICAgICAgICAgICAgIk1vbiI6ICLlkajkuIAiLAogICAgICAgICAgICAiV2VkIjogIuWRqOS4iSIsCiAgICAgICAgICAgICJGcmkiOiAi5ZGo5LqUIiwKCiAgICAgICAgICAgICJJbmNsdWRlcyBjb250cmlidXRpb25zIGZyb20gcHJpdmF0ZSByZXBvc2l0b3JpZXMgeW91IGNhbiBhY2Nlc3MuIjogIuaCqOWPr+S7peiuv+mXruWMheaLrOengeS6uuS7k+W6k+OAgiIsCiAgICAgICAgICAgICJTdW1tYXJ5IG9mIHB1bGwgcmVxdWVzdHMsIGlzc3VlcyBvcGVuZWQsIGFuZCBjb21taXRzLiI6ICLljIXmi6wg5ouJ5Y+W6K+35rGCLCDmj5Dpl64sIOaPkOS6pC4iLAogICAgICAgICAgICAiTGVhcm4gaG93IHdlIGNvdW50IGNvbnRyaWJ1dGlvbnMiOiAi5oKo5oOz55+l6YGT5aaC5L2V6K6h566X6LSh54yu55qE5ZCXIiwKICAgICAgICAgICAgIkxlc3MiOiAi5bCRIiwKICAgICAgICAgICAgIk1vcmUiOiAi5aSaIiwKCiAgICAgICAgICAgIC8vICJDb250cmlidXRpb25zIGluIHRoZSBsYXN0IHllYXIiOiAi6L+H5Y675LiA5bm055qE6LSh54yuIiwKICAgICAgICAgICAgLy8gIkxvbmdlc3Qgc3RyZWFrIjogIuacgOmVv+i/nue7rei0oeeMruWkqeaVsCIsCiAgICAgICAgICAgIC8vICJDdXJyZW50IHN0cmVhayI6ICLlvZPliY3ov57nu63otKHnjK7lpKnmlbAiLAogICAgICAgICAgICAvLyAiTm8gcmVjZW50IGNvbnRyaWJ1dGlvbnMiOiAi5pyA6L+R5rKh5pyJ6LSh54yuIiwKCiAgICAgICAgICAgIC8vIDIwMTYtMDUtMjAg5pu05paw6LSh54yu5pel5Y6G6YOo5YiGCiAgICAgICAgICAgICJDb250cmlidXRpb24gc2V0dGluZ3MiOiAi6LSh54yu6K6+572uIiwKICAgICAgICAgICAgIlNlbGVjdCB3aGljaCBjb250cmlidXRpb25zIHRvIHNob3ciOiAi6YCJ5oup6KaB5pi+56S65ZOq4oCL4oCL5Lqb6LSh54yuIiwKICAgICAgICAgICAgIlB1YmxpYyBjb250cmlidXRpb25zIG9ubHkiOiAi5LuF5YWs5YWx55qE6LSh54yuIiwKICAgICAgICAgICAgIlZpc2l0b3JzIHRvIHlvdXIgcHJvZmlsZSB3aWxsIG9ubHkgc2VlIHlvdXIgY29udHJpYnV0aW9ucyB0byBwdWJsaWMgcmVwb3NpdG9yaWVzLiI6ICLorr/lrqLliLDmgqjnmoTkuKrkurrotYTmlpnlj6rkvJrnnIvliLDlhazlhbHku5PlupPpg6jliIbnmoTotKHnjK7jgIIiLAogICAgICAgICAgICAiUHVibGljIGFuZCBwcml2YXRlIGNvbnRyaWJ1dGlvbnMiOiAi5YWs5YWx5ZKM56eB5Lq66LSh54yuIiwKICAgICAgICAgICAgIlZpc2l0b3JzIHRvIHlvdXIgcHJvZmlsZSB3aWxsIHNlZSB5b3VyIHB1YmxpYyBhbmQgYW5vbnltaXplZCBwcml2YXRlIGNvbnRyaWJ1dGlvbnMuIjogIuiuv+WuouWIsOaCqOeahOS4quS6uui1hOaWmeWwhuS8mueci+WIsOaCqOeahOWFrOWFseWSjOWMv+WQjeeahOengeS6uui0oeeMruOAgiIsCiAgICAgICAgICAgICJWaXNpdG9ycyB3aWxsIG5vdyBzZWUgb25seSB5b3VyIHB1YmxpYyBjb250cmlidXRpb25zLiI6ICLorr/lrqLlj6rkvJrnnIvliLDmgqjlhazlhbHku5PlupPpg6jliIbnmoTotKHnjK7jgIIiLAogICAgICAgICAgICAiVmlzaXRvcnMgd2lsbCBub3cgc2VlIHlvdXIgcHVibGljIGFuZCBhbm9ueW1pemVkIHByaXZhdGUgY29udHJpYnV0aW9ucy4iOiAi6K6/5a6i5bCG55yL5Yiw5oKo55qE5YWs5YWx5ZKM5Yy/5ZCN55qE56eB5Lq66LSh54yu44CCIiwKCiAgICAgICAgICAgICJjb21taXRzIjogIuasoeaPkOS6pCIsCiAgICAgICAgICAgICJQdWxsIFJlcXVlc3QiOiAi5ouJ5Y+W6K+35rGCIiwKICAgICAgICAgICAgIlB1bGwgUmVxdWVzdHMiOiAi5ouJ5Y+W6K+35rGCIiwKICAgICAgICAgICAgIklzc3VlIHJlcG9ydGVkIjogIumXrumimOaKpeWRiiIsCiAgICAgICAgICAgICJJc3N1ZXMgcmVwb3J0ZWQiOiAi6Zeu6aKY5oql5ZGKIiwKCiAgICAgICAgICAgIC8vIOWKqOaAgSDnirbmgIHor40KICAgICAgICAgICAgInN0YXJyZWQiOiAi6LWe5LqGIiwKICAgICAgICAgICAgImZvcmtlZCI6ICLmlLbol4/kuoYiLAogICAgICAgICAgICAiZm9ya2VkIGZyb20iOiAi5pS26JeP6IezIiwKICAgICAgICAgICAgImNyZWF0ZWQgcmVwb3NpdG9yeSI6ICLliJvlu7rkuobku5PlupMiLAogICAgICAgICAgICAib3BlbmVkIHB1bGwgcmVxdWVzdCI6ICLlj5Hotbfkuobmi4nlj5bor7fmsYIiLAogICAgICAgICAgICAiY29tbWVudGVkIG9uIHB1bGwgcmVxdWVzdCI6ICLor4Torrrkuobmi4nlj5bor7fmsYIiLAogICAgICAgICAgICAib3BlbmVkIGlzc3VlIjogIuaWsOW7uumXrumimCIsCiAgICAgICAgICAgICJjbG9zZSBpc3N1ZSI6ICLlhbPpl63pl67popgiLAogICAgICAgICAgICAiYWRkZWQiOiAi5re75Yqg5LqGIiwKICAgICAgICAgICAgInRvIjogIuWIsCIsCiAgICAgICAgICAgICJwdXNoZWQgdG8iOiAi5o6o6YCB5LqGIiwKICAgICAgICAgICAgImNsb3NlZCBpc3N1ZSI6ICLlhbPpl63kuobpl67popgiLAogICAgICAgICAgICAibWVyZ2VkIHB1bGwgcmVxdWVzdCI6ICLlkIjlubbkuobmi4nlj5bor7fmsYIiLAogICAgICAgICAgICAiY29tbWVudGVkIG9uIGlzc3VlIjogIuaPkOS6pOS6huivhOiuuiIsCgogICAgICAgICAgICAvLyDku5PlupMgdGFiCiAgICAgICAgICAgICJGaW5kIGEgcmVwb3NpdG9yeeKApiI6ICLmkJzntKLku5PlupPigKYiLAogICAgICAgICAgICAiQWxsIjogIuWFqOmDqCIsCiAgICAgICAgICAgICJQdWJsaWMiOiAi5YWs5YWxIiwKICAgICAgICAgICAgIlByaXZhdGUiOiAi56eB5pyJIiwKICAgICAgICAgICAgIlNvdXJjZXMiOiAi5rqQ56CBIiwKICAgICAgICAgICAgIkZvcmtzIjogIua0vueUnyIsCiAgICAgICAgICAgICJNaXJyb3JzIjogIumVnOWDjyIsCiAgICAgICAgICAgICJOZXciOiAi5paw5bu6IiwKCiAgICAgICAgICAgICJCbG9jayBvciByZXBvcnQiOiAi6Zi75q2i5oiW5Li+5oqlIiwKICAgICAgICAgICAgIkxlYXJuIG1vcmUgYWJvdXQgYmxvY2tpbmcgYSB1c2VyLiI6ICLmn6XnnIvor6bnu4bnmoTpmLvmraLnlKjmiLfkv6Hmga/jgIIiLAogICAgICAgICAgICAiQmxvY2sgb3IgcmVwb3J0IHRoaXMgdXNlciI6ICLpmLvmraLmiJbkuL7miqXor6XnlKjmiLciLAogICAgICAgICAgICAiQmxvY2sgdXNlciI6ICLpmLvmraLor6XnlKjmiLciLAogICAgICAgICAgICAiSGlkZSBjb250ZW50IGFuZCBub3RpZmljYXRpb25zIGZyb20gdGhpcyB1c2VyLiI6ICLlsY/olL3miYDmnInmnaXoh6ror6XnlKjmiLfnmoTpgJrnn6Xmtojmga/jgIIiLAogICAgICAgICAgICAiUmVwb3J0IGFidXNlIjogIuS4vuaKpeivpeeUqOaItyIsCiAgICAgICAgICAgICJDb250YWN0IFN1cHBvcnQgYWJvdXQgdGhpcyB1c2VyJ3MgYmVoYXZpb3IuIjogIuWwhuivpeeUqOaIt+ihjOS4uuS4iuaKpeOAgiIsCgogICAgICAgICAgICAiU2VhcmNoIHJlcG9zaXRvcmllc+KApiI6ICLmkJzntKLov5nkupvmn6XlupPigKYiLAogICAgICAgICAgICAiU2VhcmNoIHN0YXJyZWQgcmVwb3NpdG9yaWVz4oCmIjogIuaQnOe0oueCuei1nueahOS7k+W6k+KApiIsCiAgICAgICAgICAgICJUeXBlOiI6ICLnsbvlnos6IiwKICAgICAgICAgICAgIlNlbGVjdCB0eXBlOiI6ICLpgInmi6nnsbvlnos6IiwKICAgICAgICAgICAgIkxhbmd1YWdlOiI6ICLor63oqIA6IiwKICAgICAgICAgICAgIlNlbGVjdCBsYW5ndWFnZToiOiAi6YCJ5oup6K+t6KiAOiIsCiAgICAgICAgICAgICJBbGwgbGFuZ3VhZ2VzIjogIuaJgOacieivreiogCIsCgogICAgICAgICAgICAiU29ydDoiOiAi5o6S5bqPOiIsCiAgICAgICAgICAgICJTb3J0IG9wdGlvbnMiOiAi5o6S5bqP6YCJ6aG5IiwKICAgICAgICAgICAgIlJlY2VudGx5IHN0YXJyZWQiOiAi5pyA6L+R5YWz5rOo55qEIiwKICAgICAgICAgICAgIlJlY2VudGx5IGFjdGl2ZSI6ICLmnIDov5HmtLvliqjnmoQiLAogICAgICAgICAgICAiTW9zdCBzdGFycyI6ICLmnIDlpJrotZ7nmoQiLAogICAgICAgICAgICAiVW5zdGFyIjogIuWPlua2iOeCuei1niIsCgogICAgICAgICAgICAiSnVtcCB0byI6ICLot7PovazliLAiLAogICAgICAgICAgICAiRmlyc3QgcHVsbCByZXF1ZXN0IjogIuesrOS4gOasoeaLieWPluivt+axgiIsCiAgICAgICAgICAgICJGaXJzdCBpc3N1ZSI6ICLnrKzkuIDmrKHmj5Dpl64iLAogICAgICAgICAgICAiRmlyc3QgcmVwb3NpdG9yeSI6ICLnrKzkuIDkuKrku5PlupMiLAogICAgICAgICAgICAiSm9pbmVkIEdpdEh1YiI6ICLliJrms6jlhowgR2l0SHViIiwKICAgICAgICAgICAgIlNob3cgbW9yZSBhY3Rpdml0eSI6ICLmmL7npLrmm7TlpJoiLAogICAgICAgIH0sCiAgICAgICAgInJlZ2V4cCI6IFsgLy8g5q2j5YiZ57+76K+RCiAgICAgICAgICAgIFsvQ3JlYXRlZCAoXGQrKVtcc1xyXG5dK2NvbW1pdHM/IGluW1xzXHJcbl0rKFxkKylbXHNcclxuXStyZXBvc2l0b3IoeXxpZXMpLywgIuWcqCAkMiDkuKrlupPkuK3liJvlu7rkuoYgJDEg5qyh5o+Q5LqkIl0sCiAgICAgICAgICAgIFsvQ3JlYXRlZCAoXGQrKVtcc1xyXG5dK3JlcG9zaXRvcih5fGllcykvLCAi5Yib5bu65LqGICQxIOS4quS7k+W6kyJdLAogICAgICAgICAgICBbL09wZW5lZCAoXGQrKVtcc1xyXG5dK290aGVyW1xzXHJcbl0rcHVsbCByZXF1ZXN0cz8vLCAi5Y+R6LW35LqGICQxIOS4quaLieWPluivt+axgiJdLAogICAgICAgICAgICBbL09wZW5lZCAoXGQrKVtcc1xyXG5dK290aGVyW1xzXHJcbl0raXNzdWVzLywgIuW8gOS6hiAkMSDkuKrlhbbku5bpl67popgiXSwKICAgICAgICAgICAgWy8oXGQrKSBjb21taXRzPy8sICIkMSDmrKHmj5DkuqQiXSwKICAgICAgICAgICAgWy9QdXNoZWQgKFxkKykgY29tbWl0cz8gdG8vLCAi5o6o6YCB5LqGICQxIOasoeaPkOS6pOWIsCJdLAogICAgICAgICAgICBbL0ZvbGxvdyAoW17igJldKynigJlzIGFjdGl2aXR5IGZlZWQvLCAi5YWz5rOoICQxIOeahCBmZWVkIl0sCiAgICAgICAgICAgIFsvKFteIF0rKSBoYXMgbm8gYWN0aXZpdHkgZHVyaW5nIHRoaXMgcGVyaW9kXC4vLCAiJDEg6L+R5pyf5rKh5pyJ5Lu75L2V5rS75Yqo44CCIl0sCiAgICAgICAgICAgIFsvKFtcc1xTXSs/KSBoYXMgbm8gYWN0aXZpdHkgeWV0IGZvciB0aGlzIHBlcmlvZFwuLywgIiQxIOi/keacn+ayoeacieS7u+S9lea0u+WKqOOAgiJdLAogICAgICAgICAgICBbLyhcZCspIHRvdGFsLywgIiQxIOasoSJdLAogICAgICAgICAgICBbLyhcZCspIGRheXM/LywgIiQxIOWkqSJdLAogICAgICAgICAgICBbLyhbXGQsXSspIGNvbnRyaWJ1dGlvbnMgaW4gdGhlIGxhc3QgeWVhci8sICIkMSDmrKHotKHnjK7lnKjov4fljrvnmoTkuIDlubTkuK0iXSwKICAgICAgICBdLAogICAgfSwKCiAgICAicGFnZS1hY2NvdW50IjogeyAvLyDkuKrkurrorr7nva4KICAgICAgICAic3RhdGljIjogeyAvLyDpnZnmgIHnv7vor5EKICAgICAgICAgICAgLy8g6I+c5Y2VCiAgICAgICAgICAgICJQZXJzb25hbCBzZXR0aW5ncyI6ICLkuKrkurrorr7nva4iLAogICAgICAgICAgICAiUHJvZmlsZSI6ICLln7rmnKzkv6Hmga8iLAogICAgICAgICAgICAiQWNjb3VudCI6ICLluJDmiLforr7nva4iLAogICAgICAgICAgICAiRW1haWxzIjogIumCrueuseiuvue9riIsCiAgICAgICAgICAgICJOb3RpZmljYXRpb25zIjogIumAmuefpeiuvue9riIsCiAgICAgICAgICAgICJCaWxsaW5nIjogIui0ouWKoeS/oeaBryIsCiAgICAgICAgICAgICJTU0ggYW5kIEdQRyBrZXlzIjogIlNTSCDlkowgR1BHIGtleXMiLAogICAgICAgICAgICAiU2VjdXJpdHkiOiAi5a6J5YWo5L+h5oGvIiwKICAgICAgICAgICAgIk9BdXRoIGFwcGxpY2F0aW9ucyI6ICLmjojmnYPlupTnlKgiLAogICAgICAgICAgICAiUGVyc29uYWwgYWNjZXNzIHRva2VucyI6ICLorr/pl67ku6TniYwiLAogICAgICAgICAgICAiUmVwb3NpdG9yaWVzIjogIuS7k+W6k+euoeeQhiIsCiAgICAgICAgICAgICJPcmdhbml6YXRpb25zIjogIue7hOe7h+euoeeQhiIsCiAgICAgICAgICAgICJTYXZlZCByZXBsaWVzIjogIuW/q+aNt+WbnuWkjSIsCgogICAgICAgICAgICAvLyBQcm9maWxlIOiPnOWNlQogICAgICAgICAgICAiUHVibGljIHByb2ZpbGUiOiAi5Z+65pys6LWE5paZIiwKICAgICAgICAgICAgIlByb2ZpbGUgcGljdHVyZSI6ICLmiJHnmoTlpLTlg48iLAogICAgICAgICAgICAiVXBsb2FkIG5ldyBwaWN0dXJlIjogIuS4iuS8oOaWsOWbvueJhyIsCiAgICAgICAgICAgICJZb3UgY2FuIGFsc28gZHJhZyBhbmQgZHJvcCBhIHBpY3R1cmUgZnJvbSB5b3VyIGNvbXB1dGVyLiI6ICLmgqjkuZ/lj6/ku6Xnm7TmjqXmi5bmi73nhafniYfplZzlg4/kuIrkvKAuIiwKICAgICAgICAgICAgIk5hbWUiOiAi5pi156ewIiwKICAgICAgICAgICAgIlB1YmxpYyBlbWFpbCI6ICLlhazlhbHpgq7nrrEiLAogICAgICAgICAgICAiRG9u4oCZdCBzaG93IG15IGVtYWlsIGFkZHJlc3MiOiAi5LiN5pi+56S65oiR55qE6YKu566xIiwKICAgICAgICAgICAgIllvdSBjYW4gYWRkIG9yIHJlbW92ZSB2ZXJpZmllZCBlbWFpbCBhZGRyZXNzZXMgaW4geW91ciI6ICLmgqjlj6/ku6Xmt7vliqDmiJbliKDpmaTpgq7ku7blnLDlnYDlnKjmgqjnmoQiLAogICAgICAgICAgICAicGVyc29uYWwgZW1haWwgc2V0dGluZ3MiOiAi6YKu566x6K6+572uIiwKICAgICAgICAgICAgIlVSTCI6ICLnvZHnq5kiLAogICAgICAgICAgICAiQ29tcGFueSI6ICLlhazlj7giLAogICAgICAgICAgICAiWW91IGNhbiI6ICLmgqjlj6/ku6UiLAogICAgICAgICAgICAib3RoZXIgdXNlcnMgYW5kIG9yZ2FuaXphdGlvbnMgdG8gbGluayB0byB0aGVtLiI6ICLlhbbku5bnlKjmiLflkoznu4Tnu4fpk77mjqXliLDku5bku6zjgIIiLAogICAgICAgICAgICAiTG9jYXRpb24iOiAi5Zyw5Z2AIiwKICAgICAgICAgICAgInlvdXIgY29tcGFueSdzIEdpdEh1YiBvcmdhbml6YXRpb24gdG8gbGluayBpdC4iOiAi6LS15YWs5Y+45ZKMR2l0SHVi55qE57uE57uH6IGU57O76LW35p2l44CCIiwKICAgICAgICAgICAgIlVwZGF0ZSBwcm9maWxlIjogIuabtOaWsOi1hOaWmSIsCiAgICAgICAgICAgICJQcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IjogIui1hOaWmeabtOaWsOaIkOWKn+OAgiIsCgogICAgICAgICAgICAiQ29udHJpYnV0aW9ucyI6ICLotKHnjK4iLAogICAgICAgICAgICAiSW5jbHVkZSBwcml2YXRlIGNvbnRyaWJ1dGlvbnMgb24gbXkgcHJvZmlsZSI6ICLlnKjmiJHnmoTkuLvpobXmmL7npLrnp4HkurrotKHnjK4iLAogICAgICAgICAgICAiR2V0IGNyZWRpdCBmb3IgYWxsIHlvdXIgd29yayBieSBzaG93aW5nIHRoZSBudW1iZXIgb2YgY29udHJpYnV0aW9ucyB0byBwcml2YXRlIHJlcG9zaXRvcmllcyBvbiB5b3VyIHByb2ZpbGUgd2l0aG91dCBhbnkgcmVwb3NpdG9yeSBvciBvcmdhbml6YXRpb24gaW5mb3JtYXRpb24uIjogIuaYvuekuuaJgOacieWMheaLrOengeS6uuS7k+W6k+eahOi0oeeMruWIsOaCqOeahOS4quS6uui1hOaWmemhtemdou+8jOS4jeWMheaLrOe7hOe7h+S7k+W6k+S/oeaBr+OAgiIsCiAgICAgICAgICAgICJMZWFybiBob3cgd2UgY291bnQgY29udHJpYnV0aW9ucyI6ICLmn6XnnIvlpoLnu5/orqHotKHnjK4iLAogICAgICAgICAgICAiVXBkYXRlIGNvbnRyaWJ1dGlvbnMiOiAi5pu05paw6LSh54yuIiwKCiAgICAgICAgICAgICJHaXRIdWIgRGV2ZWxvcGVyIFByb2dyYW0iOiAiR2l0SHViIOW8gOWPkeiAheiuoeWIkiIsCiAgICAgICAgICAgICJCdWlsZGluZyBhbiBhcHBsaWNhdGlvbiwgc2VydmljZSwgb3IgdG9vbCB0aGF0IGludGVncmF0ZXMgd2l0aCBHaXRIdWI/IjogIuaehOW7uuW6lOeUqOeoi+W6j+OAgeacjeWKoeaIluW3peWFtyzpm4bmiJDkuoZHaXRIdWLlkJfvvJ8iLAogICAgICAgICAgICAiSm9pbiB0aGUgR2l0SHViIERldmVsb3BlciBQcm9ncmFtIjogIuWKoOWFpSBHaXRIdWIg5byA5Y+R6ICF6K6h5YiSIiwKICAgICAgICAgICAgIiwgb3IgcmVhZCBtb3JlIGFib3V0IGl0IGF0IG91ciI6ICLmiJbkuobop6Pmm7TlpJrkv6Hmga/lnKjmiJHku6znmoQiLAogICAgICAgICAgICAiRGV2ZWxvcGVyIHNpdGUiOiAi5byA5Y+R6ICF56uZ54K5IiwKCiAgICAgICAgICAgICJKb2JzIHByb2ZpbGUiOiAi5bCx5Lia54q25oCBIiwKICAgICAgICAgICAgIkF2YWlsYWJsZSBmb3IgaGlyZSI6ICLmsYJIUuW4pui1sCIsCiAgICAgICAgICAgICJTYXZlIGpvYnMgcHJvZmlsZSI6ICLkv53lrZjnirbmgIEiLAoKCiAgICAgICAgICAgIC8vIEFjY291bnQgc2V0dGluZ3Mg6I+c5Y2VCiAgICAgICAgICAgICJDaGFuZ2UgcGFzc3dvcmQiOiAi5L+u5pS55a+G56CBIiwKICAgICAgICAgICAgIk9sZCBwYXNzd29yZCI6ICLml6fnmoTlr4bnoIEiLAogICAgICAgICAgICAiTmV3IHBhc3N3b3JkIjogIuaWsOeahOWvhueggSIsCiAgICAgICAgICAgICJDb25maXJtIG5ldyBwYXNzd29yZCI6ICLlho3mrKHovpPlhaXmlrDnmoTlr4bnoIEiLAogICAgICAgICAgICAiVXBkYXRlIHBhc3N3b3JkIjogIuabtOaWsCIsCiAgICAgICAgICAgICJJIGZvcmdvdCBteSBwYXNzd29yZCI6ICLmiJHlv5jorrDmiJHnmoTlr4bnoIHkuoYiLAogICAgICAgICAgICAiTG9va2luZyBmb3IgdHdvLWZhY3RvciBhdXRoZW50aWNhdGlvbj8gWW91IGNhbiBmaW5kIGl0IGluIjogIuS9v+eUqOWPjOmHjeiupOivge+8n+aCqOWPr+S7peWOuyIsCiAgICAgICAgICAgICJDaGFuZ2UgdXNlcm5hbWUiOiAi5L+u5pS555So5oi35ZCNIiwKICAgICAgICAgICAgIkNoYW5naW5nIHlvdXIgdXNlcm5hbWUgY2FuIGhhdmUiOiAi5L+u5pS55oKo55qE55So5oi35ZCN5Lya5a+86Ie0IiwKICAgICAgICAgICAgInVuaW50ZW5kZWQgc2lkZSBlZmZlY3RzIjogIuaEj+aDs+S4jeWIsOeahOWJr+S9nOeUqCIsCiAgICAgICAgICAgICJEZWxldGUgYWNjb3VudCI6ICLliKDpmaTluJDmiLciLAogICAgICAgICAgICAiT25jZSB5b3UgZGVsZXRlIHlvdXIgYWNjb3VudCwgdGhlcmUgaXMgbm8gZ29pbmcgYmFjay4gUGxlYXNlIGJlIGNlcnRhaW4uIjogIuS4gOaXpuaCqOWIoOmZpOS6huW4kOaIt++8jOWwseayoeWKnuazleaBouWkje+8jOivt+S4ieaAneiAjOihjOOAgiIsCiAgICAgICAgICAgICJEZWxldGUgeW91ciBhY2NvdW50IjogIuehruiupOWIoOmZpCIsCgogICAgICAgICAgICAvLyBFbWFpbHMg6I+c5Y2VCiAgICAgICAgICAgICJZb3VyIjogIuaCqOeahCIsCiAgICAgICAgICAgICJwcmltYXJ5IEdpdEh1YiBlbWFpbCBhZGRyZXNzIjogIkdpdEh1YiBFbWFpbCDkuLvluJDmiLciLAogICAgICAgICAgICAid2lsbCBiZSB1c2VkIGZvciBhY2NvdW50LXJlbGF0ZWQgbm90aWZpY2F0aW9ucyAoZS5nLiBhY2NvdW50IGNoYW5nZXMgYW5kIGJpbGxpbmcgcmVjZWlwdHMpIGFzIHdlbGwgYXMgYW55IHdlYi1iYXNlZCBHaXRIdWIgb3BlcmF0aW9ucyAoZS5nLiBlZGl0cyBhbmQgbWVyZ2VzKS4iOiAi5bCG6KKr55So5LqO5o6l5pS255u45YWz6YCa55+lICjkvovlpoLvvJrotKbljZXkv6Hmga8p77yM5Lul5Y+K5Lu75L2V5Z+65LqOIHdlYiDnmoQgR2l0SHViIOaTjeS9nCAo5L6L5aaC77ya57yW6L6R5oiW5ZCI5bm25pON5L2cKeOAgiIsCiAgICAgICAgICAgICJQcmltYXJ5IjogIuS4u+W4kOaItyIsCiAgICAgICAgICAgICJQcml2YXRlIjogIuengeaciSIsCiAgICAgICAgICAgICJQdWJsaWMiOiAi5YWs5byAIiwKICAgICAgICAgICAgIlRoaXMgZW1haWwgd2lsbCBiZSB1c2VkIGFzIHRoZSAnZnJvbScgYWRkcmVzcyBmb3Igd2ViLWJhc2VkIEdpdEh1YiBvcGVyYXRpb25zLiI6ICLor6Xpgq7nrrHlsIbooqvnlKjkvZwgXCLlj5Hku7bkurpcIuWcsOWdgCIsCiAgICAgICAgICAgICJZb3VyIHByaW1hcnkgZW1haWwgYWRkcmVzcyBpcyBub3cgcHVibGljLiI6ICLkuLvpgq7ku7blnLDlnYDnjrDlnKjmmK/lhazlvIDnmoTjgIIiLAogICAgICAgICAgICAiWW91ciBwcmltYXJ5IGVtYWlsIGFkZHJlc3MgaXMgbm93IHByaXZhdGUuIjogIuS4u+mCruS7tuWcsOWdgOeOsOWcqOaYr+S/neWvhueahOOAgiIsCiAgICAgICAgICAgICJTZXQgYXMgcHJpbWFyeSI6ICLorr7kuLrkuLvluJDmiLciLAogICAgICAgICAgICAiQWRkIGVtYWlsIGFkZHJlc3MiOiAi5re75YqgIEVtYWlsIOWcsOWdgCIsCiAgICAgICAgICAgICJBZGQiOiAi5re75YqgIiwKICAgICAgICAgICAgIktlZXAgbXkgZW1haWwgYWRkcmVzcyBwcml2YXRlIjogIuWwhuaIkeeahOmCruS7tuWcsOWdgOS/neWvhiIsCiAgICAgICAgICAgICJXZSB3aWxsIHVzZSI6ICLmiJHku6zlsIbkvb/nlKgiLAogICAgICAgICAgICAid2hlbiBwZXJmb3JtaW5nIHdlYi1iYXNlZCBHaXQgb3BlcmF0aW9ucyBhbmQgc2VuZGluZyBlbWFpbCBvbiB5b3VyIGJlaGFsZi4gSWYgeW91IHdhbnQgY29tbWFuZCBsaW5lIEdpdCBvcGVyYXRpb25zIHRvIHVzZSB5b3VyIHByaXZhdGUgZW1haWwgeW91IG11c3QiOiAi5L2c5Li66buY6K6kXCLlj5Hku7bkurpcIuWcsOWdgOS7peaCqOeahOWQjeS5ieWPkemAgeeUteWtkOmCruS7tuOAguWmguaenOaCqOaDs+WcqOWRveS7pOihjCBHaXQg55qE5pON5L2c5Lit5L2/55So5oKo55qE56eB5Lq66YKu5Lu25Zyw5Z2A77yM5oKo5b+F6aG75ZyoIiwKICAgICAgICAgICAgInNldCB5b3VyIGVtYWlsIGluIEdpdCI6ICJHaXQg5Lit6K6+572u5oKo55qE55S15a2Q6YKu5Lu25Zyw5Z2AIiwKICAgICAgICAgICAgIkVtYWlsIHByZWZlcmVuY2VzIjogIkVtYWlsIOWBj+Wlveiuvue9riIsCiAgICAgICAgICAgICJSZWNlaXZlIGFsbCBlbWFpbHMsIGV4Y2VwdCB0aG9zZSBJIHVuc3Vic2NyaWJlIGZyb20uIjogIuaOpeaUtuaJgOaciemCruS7tu+8jOmZpOS6humCo+S6m+aIkemAgOiuoueahOS/oeaBr+OAgiIsCiAgICAgICAgICAgICJXZSdsbCBvY2Nhc2lvbmFsbHkgY29udGFjdCB5b3Ugd2l0aCB0aGUgbGF0ZXN0IG5ld3MgYW5kIGhhcHBlbmluZ3MgZnJvbSB0aGUgR2l0SHViIFVuaXZlcnNlLiI6ICLmiJHku6zlsIbkvJrmioogR2l0SHViIFVuaXZlcnNlIOeahOacgOaWsOa2iOaBr+WSjOS6i+S7tuWPkemAgee7meaCqOOAgiIsCiAgICAgICAgICAgICJMZWFybiBtb3JlIjogIuafpeeci+abtOWkmiIsCiAgICAgICAgICAgICJPbmx5IHJlY2VpdmUgYWNjb3VudCByZWxhdGVkIGVtYWlscywgYW5kIHRob3NlIEkgc3Vic2NyaWJlIHRvLiI6ICLlj6rmjqXmlLbluJDmiLfnm7jlhbPnmoTnlLXlrZDpgq7ku7bvvIzku6Xlj4rmiJHnmoTorqLpmIXnmoTkv6Hmga/jgIIiLAogICAgICAgICAgICAiV2UnbGwgb25seSBzZW5kIHlvdSBsZWdhbCBvciBhZG1pbmlzdHJhdGl2ZSBlbWFpbHMsIGFuZCBhbnkgZW1haWxzIHlvdeKAmXZlIHNwZWNpZmljYWxseSBzdWJzY3JpYmVkIHRvLiI6ICLmiJHku6zlj6rlkJHmgqjlj5HpgIHms5XlvovmiJbooYzmlL/pgq7ku7bku6Xlj4rmgqjorqLpmIXkv6Hmga/jgIIiLAogICAgICAgICAgICAiU2F2ZSBlbWFpbCBwcmVmZXJlbmNlcyI6ICLkv53lrZjlgY/lpb0iLAogICAgICAgICAgICAiU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgeW91ciBlbWFpbCBwcmVmZXJlbmNlcy4iOiAiRW1haWwg5YGP5aW96K6+572u5L+u5pS55oiQ5Yqf44CCIiwKICAgICAgICAgICAgIkxvb2tpbmcgZm9yIGFjdGl2aXR5IG5vdGlmaWNhdGlvbiBjb250cm9scz8gQ2hlY2sgdGhlIjogIuaDs+imgeS6huino+abtOivpue7hueahOmAmuefpeiuvue9ru+8jOivt+WJjeW+gCIsCgogICAgICAgICAgICAvLyBOb3RpZmljYXRpb24gY2VudGVyIOiPnOWNlQogICAgICAgICAgICAiSG93IHlvdSByZWNlaXZlIG5vdGlmaWNhdGlvbnMiOiAi6YCa55+l6K6+572uIiwKICAgICAgICAgICAgIkF1dG9tYXRpYyB3YXRjaGluZyI6ICLoh6rliqjlhbPms6giLAogICAgICAgICAgICAiV2hlbiB5b3XigJlyZSBnaXZlbiBwdXNoIGFjY2VzcyB0byBhIHJlcG9zaXRvcnksIGF1dG9tYXRpY2FsbHkgcmVjZWl2ZSBub3RpZmljYXRpb25zIGZvciBpdC4iOiAi5b2T5oKo57uZ5LiA5Liq5LuT5bqT5o6o6YCB5p2D6ZmQ5pe277yM6Ieq5Yqo5o6l5pS255u45YWz6YCa55+l44CCIiwKICAgICAgICAgICAgIkF1dG9tYXRpY2FsbHkgd2F0Y2ggcmVwb3NpdG9yaWVzIjogIuiHquWKqOWFs+azqOS7k+W6kyIsCiAgICAgICAgICAgICJQYXJ0aWNpcGF0aW5nIjogIuWPguS4juivnemimCIsCiAgICAgICAgICAgICJXaGVuIHlvdSBwYXJ0aWNpcGF0ZSBpbiBhIGNvbnZlcnNhdGlvbiBvciBzb21lb25lIGJyaW5ncyB5b3UgaW4gd2l0aCBhbiI6ICLlvZPmnInkuroiLAogICAgICAgICAgICAiQG1lbnRpb24iOiAiQOeUqOaIt+WQjSIsCiAgICAgICAgICAgICJXYXRjaGluZyI6ICLlhbPms6jku5PlupMiLAogICAgICAgICAgICAiVXBkYXRlcyB0byBhbnkgcmVwb3NpdG9yaWVzIG9yIHRocmVhZHMgeW914oCZcmUgd2F0Y2hpbmcuIjogIuW9k+aCqOWFs+azqOeahOS7k+W6k+abtOaWsOaXtuOAgiIsCiAgICAgICAgICAgICJZb3VyIG5vdGlmaWNhdGlvbiBzZXR0aW5ncyBhcHBseSB0byB0aGUiOiAi6YCa55+l6K6+572u5bCG5bqU55So5YiwIiwKICAgICAgICAgICAgInJlcG9zaXRvcmllcyB5b3XigJlyZSB3YXRjaGluZyI6ICLmgqjlhbPms6jnmoTku5PlupMiLAogICAgICAgICAgICAiTm90aWZpY2F0aW9uIGVtYWlsIjogIuaOpeaUtumAmuefpeeahOmCrueusSIsCiAgICAgICAgICAgICJQcmltYXJ5IGVtYWlsIGFkZHJlc3MiOiAi5Li76YKu566x5Zyw5Z2AIiwKICAgICAgICAgICAgIlNhdmUiOiAi5L+d5a2YIiwKICAgICAgICAgICAgIkN1c3RvbSByb3V0aW5nIjogIuiHquWumuS5iSIsCiAgICAgICAgICAgICJZb3UgY2FuIHNlbmQgbm90aWZpY2F0aW9ucyB0byBkaWZmZXJlbnQiOiAi5oKo5Y+v5Lul5Y+R6YCB6YCa55+l5LiN5ZCM55qEIiwKICAgICAgICAgICAgInZlcmlmaWVkIjogIumqjOivgSIsCiAgICAgICAgICAgICJlbWFpbCBhZGRyZXNzZXMgZGVwZW5kaW5nIG9uIHRoZSBvcmdhbml6YXRpb24gdGhhdCBvd25zIHRoZSByZXBvc2l0b3J5LiI6ICLnlLXlrZDpgq7ku7blnLDlnYDlj5blhrPkuo7nu4Tnu4fmi6XmnInku5PlupPjgIIiLAoKICAgICAgICAgICAgLy8gQmlsbGluZyDoj5zljZUKICAgICAgICAgICAgIkJpbGxpbmcgb3ZlcnZpZXciOiAi6LSi5Yqh5L+h5oGvIiwKICAgICAgICAgICAgIlBsYW4iOiAi5pa55qGIIiwKICAgICAgICAgICAgIkZyZWUiOiAi5YWN6LS5IiwKICAgICAgICAgICAgIkNoYW5nZSBwbGFuIjogIuS/ruaUueaWueahiCIsCiAgICAgICAgICAgICJwZXIgbW9udGggZm9yIjogIuavj+aciCAtIiwKICAgICAgICAgICAgIkxlYXJuIG1vcmUgYWJvdXQgR2l0IExGUyI6ICLku4DkuYjmmK8gR2l0IExGUyAo5aSn5paH5Lu25a2Y5YKoKe+8nyIsCiAgICAgICAgICAgICJQdXJjaGFzZSBtb3JlIjogIui0reS5sOabtOWkmiIsCiAgICAgICAgICAgICJCaWxsaW5nIGN5Y2xlIjogIue7k+eul+WRqOacnyIsCiAgICAgICAgICAgICJCYW5kd2lkdGgiOiAi5bim5a69IiwKICAgICAgICAgICAgIkJhbmR3aWR0aCBxdW90YSByZXNldHMgZXZlcnkgYmlsbGluZyBjeWNsZSI6ICLluKblrr3phY3pop3mr4/kuKrlkajmnJ/ph43nva4iLAogICAgICAgICAgICAiU3RvcmFnZSI6ICLlrZjlgqgiLAogICAgICAgICAgICAiUGF5bWVudCI6ICLmlK/ku5jmlrnlvI8iLAogICAgICAgICAgICAiTm8gcGF5bWVudCBtZXRob2Qgb24gZmlsZS4iOiAi5rKh5pyJ6K6+572u5pSv5LuY5pa55byPIiwKICAgICAgICAgICAgIkFkZCBwYXltZW50IG1ldGhvZCI6ICLmt7vliqDmlK/ku5jmlrnlvI8iLAogICAgICAgICAgICAiQ291cG9uIjogIuS8mOaDoOWIuCIsCiAgICAgICAgICAgICJZb3UgZG9u4oCZdCBoYXZlIGFuIGFjdGl2ZSBjb3Vwb24uIjogIuayoeacieWPr+eUqOeahOS8mOaDoOWIuCIsCiAgICAgICAgICAgICJSZWRlZW0gYSBjb3Vwb24iOiAi5YWR5o2i5LyY5oOg5Yi4IiwKICAgICAgICAgICAgIlBheW1lbnQgaGlzdG9yeSI6ICLmlK/ku5jorrDlvZUiLAogICAgICAgICAgICAiQW1vdW50cyBzaG93biBpbiBVU0QiOiAi5Lul576O5YWD5pi+56S6IiwKICAgICAgICAgICAgIllvdSBoYXZlIG5vdCBtYWRlIGFueSBwYXltZW50cy4iOiAi5rKh5pyJ5pSv5LuY6K6w5b2VIiwKCiAgICAgICAgICAgIC8vIFNlY3VyaXR5IOiPnOWNlQogICAgICAgICAgICAiVHdvLWZhY3RvciBhdXRoZW50aWNhdGlvbiI6ICLlj4zph43orqTor4EiLAogICAgICAgICAgICAiU3RhdHVzOiI6ICLnirbmgIE6IiwKICAgICAgICAgICAgIk9mZiI6ICLmnKrlvIDlkK8iLAogICAgICAgICAgICAiU2V0IHVwIHR3by1mYWN0b3IgYXV0aGVudGljYXRpb24iOiAi6K6+572u5Y+M6YeN6K6k6K+BIiwKICAgICAgICAgICAgInByb3ZpZGVzIGFub3RoZXIgbGF5ZXIgb2Ygc2VjdXJpdHkgdG8geW91ciBhY2NvdW50LiI6ICLkuLrmgqjnmoTluJDmiLfmj5Dkvpvkuoblj6bkuIDlsYLlronlhajkv53pmpzjgIIiLAogICAgICAgICAgICAiU2Vzc2lvbnMiOiAi5Lya6K+d5L+h5oGvIiwKICAgICAgICAgICAgIlRoaXMgaXMgYSBsaXN0IG9mIGRldmljZXMgdGhhdCBoYXZlIGxvZ2dlZCBpbnRvIHlvdXIgYWNjb3VudC4gUmV2b2tlIGFueSBzZXNzaW9ucyB0aGF0IHlvdSBkbyBub3QgcmVjb2duaXplLiI6ICLov5nmmK/mgqjnmbvpmYbnmoTorr7lpIfkvJror53liJfooajvvIzlpoLmnpzkuI3mmK/mgqjmnKzkurrmk43kvZzvvIzlj6/ku6XlhbPpl63or6XkvJror53jgIIiLAogICAgICAgICAgICAiWW91ciBjdXJyZW50IHNlc3Npb24iOiAi5oKo5b2T5YmN55qE5Lya6K+dIiwKICAgICAgICAgICAgIkxvY2F0aW9uOiI6ICLlnLDlnYAiLAogICAgICAgICAgICAiU2lnbmVkIGluOiI6ICLnmbvpmYbkuo4iLAogICAgICAgICAgICAiTGFzdCBhY2Nlc3NlZCBvbiI6ICLmnIDlkI7orr/pl67ml7bpl7QiLAogICAgICAgICAgICAiUmV2b2tlIjogIuazqOmUgCIsCiAgICAgICAgICAgICJTZWN1cml0eSBoaXN0b3J5IjogIuaTjeS9nOiusOW9lSIsCiAgICAgICAgICAgICJUaGlzIGlzIGEgc2VjdXJpdHkgbG9nIG9mIGltcG9ydGFudCBldmVudHMgaW52b2x2aW5nIHlvdXIgYWNjb3VudC4iOiAi6L+Z5piv5oKo5biQ5oi355qE5pON5L2c5pel5b+XIiwKCiAgICAgICAgICAgIC8vIEFwcGxpY2F0aW9ucyDoj5zljZUKICAgICAgICAgICAgIkF1dGhvcml6ZWQgYXBwbGljYXRpb25zIjogIuW3suaOiOadg+eahOW6lOeUqCIsCiAgICAgICAgICAgICJEZXZlbG9wZXIgYXBwbGljYXRpb25zIjogIuW8gOWPkeiAheW6lOeUqCIsCiAgICAgICAgICAgICJSZXZva2UgYWxsIjogIuazqOmUgOWFqOmDqCIsCiAgICAgICAgICAgICJZb3UgaGF2ZSBncmFudGVkIHRoZSBmb2xsb3dpbmcgYXBwbGljYXRpb25zIGFjY2VzcyB0byB5b3VyIGFjY291bnQuIFJlYWQgbW9yZSBhYm91dCBjb25uZWN0aW5nIHdpdGggdGhpcmQtcGFydHkgYXBwbGljYXRpb25zIGF0IjogIuaCqOW3suaOiOadg+S4i+adpeW6lOeUqOiuv+mXruaCqOeahOW4kOaIt+S/oeaBr++8jOWmgumcgOS6huino+abtOWkmuivt+mYheivuyIsCiAgICAgICAgICAgICJTb3J0IjogIuaOkuW6jyIsCiAgICAgICAgICAgICJTb3J0IGJ5IjogIuaOkuW6j+aWueW8jyIsCiAgICAgICAgICAgICJBbHBoYWJldGljYWwiOiAi5a2X5q+N5o6S5bqPIiwKICAgICAgICAgICAgIlJlY2VudGx5IHVzZWQiOiAi5pyA6L+R5L2/55SoIiwKICAgICAgICAgICAgIkxlYXN0IHJlY2VudGx5IHVzZWQiOiAi5pyA5bCR5L2/55SoIiwKICAgICAgICAgICAgIk5vIERldmVsb3BlciBBcHBsaWNhdGlvbnMiOiAi5pqC5peg5byA5Y+R6ICF55qE5bqU55SoIiwKICAgICAgICAgICAgIkRldmVsb3BlciBhcHBsaWNhdGlvbnMgYXJlIHVzZWQgdG8gYWNjZXNzIHRoZSI6ICLlvIDlj5HogIXlupTnlKjmmK/nlKjkuo7orr/pl64iLAogICAgICAgICAgICAiLiBUbyBnZXQgc3RhcnRlZCB5b3Ugc2hvdWxkIjogIuOAgummluWFiOaCqOW6lOivpSIsCiAgICAgICAgICAgICJyZWdpc3RlciBhbiBhcHBsaWNhdGlvbiI6ICLms6jlhozkuIDkuKrlupTnlKgiLAogICAgICAgICAgICAiUmVnaXN0ZXIgbmV3IGFwcGxpY2F0aW9uIjogIuazqOWGjOW6lOeUqCIsCiAgICAgICAgICAgICJSZWdpc3RlciBhIG5ldyBPQXV0aCBhcHBsaWNhdGlvbiI6ICLms6jlhozkuIDkuKogT0F1dGgg5bqU55SoIiwKICAgICAgICAgICAgIkFwcGxpY2F0aW9uIG5hbWUiOiAi5bqU55So5ZCNIiwKICAgICAgICAgICAgIlNvbWV0aGluZyB1c2VycyB3aWxsIHJlY29nbml6ZSBhbmQgdHJ1c3QiOiAi6K6p55So5oi36K+G5Yir5ZKM5L+h5Lu7IiwKICAgICAgICAgICAgIkhvbWVwYWdlIFVSTCI6ICLkuLvpobXlnLDlnYAiLAogICAgICAgICAgICAiVGhlIGZ1bGwgVVJMIHRvIHlvdXIgYXBwbGljYXRpb24gaG9tZXBhZ2UiOiAi5oKo55qE5bqU55So5Li76aG15Zyw5Z2AIiwKICAgICAgICAgICAgIkFwcGxpY2F0aW9uIGRlc2NyaXB0aW9uIjogIuW6lOeUqOaPj+i/sCIsCiAgICAgICAgICAgICJBcHBsaWNhdGlvbiBkZXNjcmlwdGlvbiBpcyBvcHRpb25hbCI6ICLlupTnlKjmj4/ov7AgKOWPr+mAiSkiLAogICAgICAgICAgICAiVGhpcyBpcyBkaXNwbGF5ZWQgdG8gYWxsIHBvdGVudGlhbCB1c2VycyBvZiB5b3VyIGFwcGxpY2F0aW9uIjogIue7meaCqOeahOebruagh+eUqOaIt+acgOebtOaOpeeahOS/oeaBryIsCiAgICAgICAgICAgICJBdXRob3JpemF0aW9uIGNhbGxiYWNrIFVSTCI6ICLorqTor4Hlm57osIPlnLDlnYAiLAogICAgICAgICAgICAiWW91ciBhcHBsaWNhdGlvbuKAmXMgY2FsbGJhY2sgVVJMLiBSZWFkIG91ciI6ICLmgqjnmoTlupTnlKjmjojmnYPlm57osIPlnLDlnYDjgILor6bmg4Xor7fpmIXor7siLAogICAgICAgICAgICAiT0F1dGggZG9jdW1lbnRhdGlvbiI6ICJPQXV0aCDmlofmoaMiLAogICAgICAgICAgICAiZm9yIG1vcmUgaW5mb3JtYXRpb24iOiAi44CCIiwKICAgICAgICAgICAgIlJlZ2lzdGVyIGFwcGxpY2F0aW9uIjogIuazqOWGjOW6lOeUqCIsCiAgICAgICAgICAgICJEcmFnICYgZHJvcCI6ICLmi5bmi73kuIrkvKAiLAogICAgICAgICAgICAib3IiOiAi5oiW6ICFIiwKICAgICAgICAgICAgImNob29zZSBhbiBpbWFnZSI6ICLpgInmi6nlm77niYciLAoKICAgICAgICAgICAgLy8gUGVyc29uYWwgYWNjZXNzIHRva2VucyDpobXpnaIKICAgICAgICAgICAgIkdlbmVyYXRlIG5ldyB0b2tlbiI6ICLliJvlu7rmlrDnmoTlr4bku6QiLAogICAgICAgICAgICAiVG9rZW5zIHlvdSBoYXZlIGdlbmVyYXRlZCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFjY2VzcyB0aGUiOiAi5a+G5Luk5Y+v5Lul55So5p2l6K6/6ZeuIiwKICAgICAgICAgICAgIkZ1bGwgY29udHJvbCBvZiBwcml2YXRlIHJlcG9zaXRvcmllcyI6ICLlrozlhajmjqfliLbnp4HmnInku5PlupMiLAogICAgICAgICAgICAiRWRpdCI6ICLnvJbovpEiLAogICAgICAgICAgICAiRGVsZXRlIjogIuWIoOmZpCIsCiAgICAgICAgICAgICJQZXJzb25hbCBhY2Nlc3MgdG9rZW5zIGZ1bmN0aW9uIGxpa2Ugb3JkaW5hcnkgT0F1dGggYWNjZXNzIHRva2Vucy4gVGhleSBjYW4gYmUgdXNlZCBpbnN0ZWFkIG9mIGEgcGFzc3dvcmQgZm9yIEdpdCBvdmVyIEhUVFBTLCBvciBjYW4gYmUgdXNlZCB0byI6ICLorr/pl67ku6TniYzlip/og73nsbvkvLzkuo5PQXV0aO+8jOS7luWPr+S7peS7o+abv+Wvhueggee7mSBHaXQgSHR0cHMg6K6/6Zeu77yMIiwKICAgICAgICAgICAgImF1dGhlbnRpY2F0ZSB0byB0aGUgQVBJIG92ZXIgQmFzaWMgQXV0aGVudGljYXRpb24iOiAi5oiW55So5p2l6L+b6KGMQVBJ6LCD55So55qE6aqM6K+BIiwKCiAgICAgICAgICAgIC8vIE9yZ2FuaXphdGlvbnMg6aG16Z2iCiAgICAgICAgICAgICJZb3UgYXJlIG5vdCBhIG1lbWJlciBvZiBhbnkgb3JnYW5pemF0aW9ucy4iOiAi5oKo5pqC5peg5Lu75L2V57uE57uH44CCIiwKICAgICAgICAgICAgIlRyYW5zZm9ybSBhY2NvdW50IjogIui0puaIt+WPmOabtCIsCiAgICAgICAgICAgICJBY2NvdW50IHRyYW5zZm9ybWF0aW9uIHdhcm5pbmciOiAi6LSm5oi35Y+Y5pu06K2m5ZGKIiwKICAgICAgICAgICAgIldoYXQgeW91IGFyZSBhYm91dCB0byBkbyBpcyBhbiBpcnJldmVyc2libGUgYW5kIGRlc3RydWN0aXZlIHByb2Nlc3MuIFBsZWFzZSBiZSBhd2FyZToiOiAi6L+Z5bCG5piv5LiA5Liq5LiN5Y+v6YCG6L2s55qE6L+H56iL77yM6K+356Gu6K6k77yaIiwKICAgICAgICAgICAgIkFueSB1c2VyLXNwZWNpZmljIGluZm9ybWF0aW9uIChPQXV0aCB0b2tlbnMsIFNTSCBrZXlzLCBKb2IgUHJvZmlsZSwgZXRjKSB3aWxsIGJlIGVyYXNlZCI6ICLku7vkvZXnlKjmiLfnibnlrprnmoTkv6Hmga/vvIhPQXV0aCB0b2tlbnMsIFNTSCBrZXlzLCBKb2IgUHJvZmlsZSwg562J77yJ5bCG6KKr5Yig6Zmk44CCIiwKICAgICAgICAgICAgImNyZWF0ZSBhIG5ldyBwZXJzb25hbCBhY2NvdW50IjogIuWIm+W7uuS4gOS4quaWsOeahOS4quS6uuW4kOaItyIsCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EKICAgICAgICAgICAgWy9UaGlzIGVtYWlsIHdpbGwgbm90IGJlIHVzZWQgYXMgdGhlICdmcm9tJyBhZGRyZXNzIGZvciB3ZWItYmFzZWQgR2l0SHViIG9wZXJhdGlvbnMgLSB3ZSB3aWxsIGluc3RlYWQgdXNlIChbXkBdK0B1c2Vycy5ub3JlcGx5LmdpdGh1Yi5jb20pLi8sICLor6Xpgq7nrrHkuI3kvJrooqvnlKjkvZwgXCLlj5Hku7bkurpcIuWcsOWdgO+8jOaIkeS7rOS8muaUueeUqCAoJDEpIOS9nOS4uum7mOiupCBcIuWPkeS7tuS6ulwi5Zyw5Z2A44CCIl0sCiAgICAgICAgICAgIFsvWW91ciBwcmltYXJ5IGVtYWlsIHdhcyBjaGFuZ2VkIHRvIChbXkBdK0BbXlxuXSspXC4vLCAi5oKo55qEIEVtYWlsIOS4u+W4kOaIt+W3sue7j+abtOaUueS4uiAkMSJdLAogICAgICAgICAgICBbLyhcZCspIHByaXZhdGUgcmVwb3NpdG9yaWVzP1wuLywgIiQxIOS4quengeacieS7k+W6ky4iXSwKICAgICAgICAgICAgWy8oXGQrKSBkYXRhIHBhY2tzPy8sICIkMSDmlbDmja7ljIUiXSwKICAgICAgICAgICAgWy8oXGQrKSBkYXlzPyBsZWZ0LFxuXHMrYmlsbGVkIG1vbnRobHkvLCAiJDHlpKksIOaMieaciCJdLAogICAgICAgICAgICBbL1VzaW5nXG5ccysoW1xkLl0rKSBvZlxuXHMrKFxkKykgR0JcL21vbnRoLywgIu+8hCQxLCAkMkdCL+aciCJdLAogICAgICAgICAgICBbL1VzaW5nXG5ccysoW1xkLl0rKSBvZlxuXHMrKFxkKykgR0IvLCAi77yEJDEsICQyR0IiXSwKICAgICAgICAgICAgWy8oXGQrKSBBdXRob3JpemVkIGFwcGxpY2F0aW9ucz8vLCAiJDEg5Liq5o6I5p2D5bqU55SoIl0sCiAgICAgICAgICAgIFsvVHVybiAoXHcrKSBpbnRvIGFuIG9yZ2FuaXphdGlvbi8sICLlj5jmm7QgJDEg5Li65LiA5Liq57uE57uHIl0sCiAgICAgICAgICAgIFsvWW91IHdpbGwgbm8gbG9uZ2VyIGJlIGFibGUgdG8gc2lnbiBpbnRvIChcdyspIFwoYWxsIGFkbWluaXN0cmF0aXZlIHByaXZpbGVnZXMgd2lsbCBiZSBiZXN0b3dlZCB1cG9uIHRoZSBvd25lcnMgeW91IGNob29zZVwpLywgIuaCqOWwhuS4jeiDveS9nOS4uui0puaIt+eZu+W9leWIsCAkMeOAgu+8iOaJgOacieeuoeeQhuadg+mZkOWwhui1i+S6iOaCqOmAieaLqeeahOaJgOacieiAhe+8iSJdLAogICAgICAgICAgICBbL0FueSBjb21taXRzIGNyZWRpdGVkIHRvIChcdyspIHdpbGwgbm8gbG9uZ2VyIGJlIGxpbmtlZCB0byB0aGlzIEdpdEh1YiBhY2NvdW50LywgIuS7u+S9leaPkOS6pOW9kuWKn+S6jiAkMSDlsIbkuI3lho3pk77mjqXliLDov5nkuKogR2l0SHViIOW4kOaItyJdLAogICAgICAgICAgICBbL0lmIHlvdSBhcmUgdXNpbmcgKFx3KykgYXMgYSBwZXJzb25hbCBhY2NvdW50LCB5b3Ugc2hvdWxkLywgIuWmguaenOaCqOato+WcqOS9v+eUqCAkMSDkvZzkuLrkuKrkurrluJDmiLfvvIzmgqjlupQiXSwKICAgICAgICAgICAgWy9iZWZvcmUgdHJhbnNmb3JtaW5nIChcdyspIGludG8gYW4gb3JnYW5pemF0aW9uLi8sICLlnKjovazljJYgJDEg57uE57uH5LmL5YmN44CCIl0sCiAgICAgICAgXSwKICAgIH0sCgogICAgInBhZ2UtbmV3LXJlcG8iOiB7IC8vIOaWsOW7uuS7k+W6kwogICAgICAgICJzdGF0aWMiOiB7IC8vIOmdmeaAgee/u+ivkQogICAgICAgICAgICAiQ3JlYXRlIGEgbmV3IHJlcG9zaXRvcnkiOiAi5Yib5bu65LiA5Liq5paw55qE5LuT5bqTIiwKICAgICAgICAgICAgIkEgcmVwb3NpdG9yeSBjb250YWlucyBhbGwgdGhlIGZpbGVzIGZvciB5b3VyIHByb2plY3QsIGluY2x1ZGluZyB0aGUgcmV2aXNpb24gaGlzdG9yeS4iOiAi5LuT5bqT5YyF5ZCr6aG555uu5Lit55qE5omA5pyJ5paH5Lu277yM5YyF5ous5L+u6K6i5Y6G5Y+y6K6w5b2V44CCIiwKICAgICAgICAgICAgIk93bmVyIjogIuWIm+W7uuiAhSIsCiAgICAgICAgICAgICJSZXBvc2l0b3J5IG5hbWUiOiAi5LuT5bqT5ZCNIiwKICAgICAgICAgICAgIkdyZWF0IHJlcG9zaXRvcnkgbmFtZXMgYXJlIHNob3J0IGFuZCBtZW1vcmFibGUuIE5lZWQgaW5zcGlyYXRpb24/IEhvdyBhYm91dCI6ICLkuIDkuKrlpb3nmoTku5PlupPlkI3lupTor6XmmK/nroDljZXlrrnmmJPooqvorrDkvY/nmoTvvIzpnIDopoHmnaXngrnngbXmhJ/lkJfvvJ/ov5nkuKrlkI3lrZfmgI7kuYjmoLciLAogICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAi5o+P6L+wIiwKICAgICAgICAgICAgIihvcHRpb25hbCkiOiAiKOWPr+mAiSkiLAogICAgICAgICAgICAiUHVibGljIjogIuWFrOWFsSAo5YWN6LS5KSIsCiAgICAgICAgICAgICJBbnlvbmUgY2FuIHNlZSB0aGlzIHJlcG9zaXRvcnkuIFlvdSBjaG9vc2Ugd2hvIGNhbiBjb21taXQuIjogIuS7u+S9leS6uumDveWPr+S7peeci+WIsOi/meS4quS7k+W6k++8jOaCqOWPr+S7pemAieaLqeiwgeiDveaPkOS6pOOAgiIsCiAgICAgICAgICAgICJQcml2YXRlIjogIuengeaciSAo5pS26LS5KSIsCiAgICAgICAgICAgICJZb3UgY2hvb3NlIHdobyBjYW4gc2VlIGFuZCBjb21taXQgdG8gdGhpcyByZXBvc2l0b3J5LiI6ICLmgqjlj6/ku6XpgInmi6nosIHlj6/ku6XnnIvlkozmj5DkuqTliLDor6Xku5PlupPjgIIiLAogICAgICAgICAgICAiSW5pdGlhbGl6ZSB0aGlzIHJlcG9zaXRvcnkgd2l0aCBhIFJFQURNRSI6ICLkvb/nlKggUkVBRE1FLm1kIOWIneWni+WMluS7k+W6kyIsCiAgICAgICAgICAgICJUaGlzIHdpbGwgbGV0IHlvdSBpbW1lZGlhdGVseSBjbG9uZSB0aGUgcmVwb3NpdG9yeSB0byB5b3VyIGNvbXB1dGVyLiBTa2lwIHRoaXMgc3RlcCBpZiB5b3XigJlyZSBpbXBvcnRpbmcgYW4gZXhpc3RpbmcgcmVwb3NpdG9yeS4iOiAi6L+Z5bCG6K6p5oKo5Y+v5Lul56uL5Yi75YWL6ZqG6K+l5LuT5bqT5Yiw5oKo55qE55S16ISR44CC5aaC5p6c5oKo6KaB5o+Q5Lqk5bey5pyJ55qE5LuT5bqT77yM6K+35b+955Wl6L+Z5Liq6YCJ6aG544CCIiwKICAgICAgICAgICAgIkFkZCAuZ2l0aWdub3JlOiI6ICLmt7vliqAgLmdpdGlnbm9yZSDmlofku7YiLAogICAgICAgICAgICAiRmlsdGVyIGlnbm9yZXPigKYiOiAi562b6YCJ5b+955Wl5paH5Lu24oCmIiwKICAgICAgICAgICAgIkFkZCBhIGxpY2Vuc2U6IjogIua3u+WKoOWPkeW4g+iuuOWPryIsCiAgICAgICAgICAgICJGaWx0ZXIgbGljZW5zZXPigKYiOiAi562b6YCJ6K645Y+v4oCmIiwKICAgICAgICAgICAgIk5vbmUiOiAi5pegIiwKICAgICAgICAgICAgIk5lZWQgaGVscCBwaWNraW5nIGEgbGljZW5zZT8gV2XigJl2ZSBidWlsdCBhIHNpdGUganVzdCBmb3IgeW91LiI6ICLpnIDopoHluK7mgqjmjJHpgInkuIDkuKrorrjlj6/lkJfvvJ/miJHku6zkuLrmgqjkvpvkuoblj4LogIPpobXpnaLjgIIiLAogICAgICAgICAgICAiQ3JlYXRlIHJlcG9zaXRvcnkiOiAi5Yib5bu65LuT5bqTIiwKICAgICAgICAgICAgIkNyZWF0aW5nIHJlcG9zaXRvcnnigKYiOiAi5Yib5bu65LuT5bqT5Lit4oCmIiwKICAgICAgICB9LAogICAgICAgICJyZWdleHAiOiBbIC8vIOato+WImee/u+ivkQogICAgICAgIF0sCiAgICB9LAoKICAgICJuZXcvaW1wb3J0IjogeyAvLyDlr7zlhaXku5PlupMKICAgICAgICAic3RhdGljIjogeyAvLyDpnZnmgIHnv7vor5EKICAgICAgICAgICAgLy8g56ys5LiA6aG1CiAgICAgICAgICAgICJJbXBvcnQgeW91ciBwcm9qZWN0IHRvIEdpdEh1YiI6ICLlr7zlhaXmgqjnmoTpobnnm67liLAgR2l0SHViIiwKICAgICAgICAgICAgIkltcG9ydCBhbGwgdGhlIGZpbGVzLCBpbmNsdWRpbmcgdGhlIHJldmlzaW9uIGhpc3RvcnksIGZyb20gYW5vdGhlciB2ZXJzaW9uIGNvbnRyb2wgc3lzdGVtLiI6ICLlr7zlhaXnmoTmiYDmnInmlofku7bvvIzljIXmi6zkv67orqLljoblj7LorrDlvZXvvIzku47lj6bkuIDkuKrniYjmnKzmjqfliLbns7vnu5/jgIIiLAogICAgICAgICAgICAiWW91ciBvbGQgcmVwb3NpdG9yeeKAmXMgY2xvbmUgVVJMIjogIuS9oOeahOiAgeS7k+W6kyBVUkwg5Zyw5Z2AIiwKICAgICAgICAgICAgIkxlYXJuIG1vcmUgYWJvdXQgdGhlIHR5cGVzIG9mIjogIuS7k+W6k+abtOWkmuexu+Wei+eahOW4ruWKqSIsCiAgICAgICAgICAgICJzdXBwb3J0ZWQgVkNTIjogIuaUr+aMgSBWQ1MiLAogICAgICAgICAgICAiWW91ciBuZXcgcmVwb3NpdG9yeSBkZXRhaWxzIjogIuaWsOS7k+W6k+aPj+i/sCIsCiAgICAgICAgICAgICJPd25lciI6ICLmiYDmnInogIUiLAogICAgICAgICAgICAiTmFtZSI6ICLku5PlupPlkI0iLAogICAgICAgICAgICAiWW91ciBuZXcgcmVwb3NpdG9yeSB3aWxsIGJlIjogIuaWsOS7k+W6k+WwhuS8miIsCiAgICAgICAgICAgICJwdWJsaWMiOiAi5YWs5byAIiwKICAgICAgICAgICAgIi4gSW4gb3JkZXIgdG8gbWFrZSB0aGlzIHJlcG9zaXRvcnkgcHJpdmF0ZSwgeW914oCZbGwgbmVlZCB0byI6ICLlpoLmnpzmg7Pkvb/ov5nkuKrku5PlupPovazkuLrnp4HmnInnmoTvvIzkvaDpnIDopoEiLAogICAgICAgICAgICAidXBncmFkZSB5b3VyIGFjY291bnQiOiAi5Y2H57qn5biQ5oi3IiwKICAgICAgICAgICAgIkNhbmNlbCI6ICLlj5bmtogiLAogICAgICAgICAgICAiQmVnaW4gaW1wb3J0IjogIuW8gOWni+WvvOWFpSIsCiAgICAgICAgICAgICJQcmVwYXJpbmcgaW1wb3J04oCmIjogIuWHhuWkh+WvvOWFpeKApiIsCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EKICAgICAgICBdLAogICAgfSwKCiAgICAicGFnZS1jcmVhdGUtb3JnIjogeyAvLyDmlrDlu7rnu4Tnu4cKICAgICAgICAic3RhdGljIjogeyAvLyDpnZnmgIHnv7vor5EKICAgICAgICB9LAogICAgICAgICJyZWdleHAiOiBbIC8vIOato+WImee/u+ivkQogICAgICAgIF0sCiAgICB9LAoKICAgICJ2aXMtcHVibGljIjogeyAvLyDku5PlupPpobUKICAgICAgICAic3RhdGljIjogeyAvLyDpnZnmgIHnv7vor5EKICAgICAgICAgICAgLy8g5a+85YWl5LuT5bqTIOesrOS6jOmhtQogICAgICAgICAgICAiUHJlcGFyaW5nIHlvdXIgbmV3IHJlcG9zaXRvcnkiOiAi5YeG5aSH5paw55qE5a2Y5YKo5bqTIiwKICAgICAgICAgICAgIlRoZXJlIGlzIG5vIG5lZWQgdG8ga2VlcCB0aGlzIHdpbmRvdyBvcGVuLCB3ZeKAmWxsIGVtYWlsIHlvdSB3aGVuIHRoZSBpbXBvcnQgaXMgZG9uZS4iOiAi5rKh5pyJ5b+F6KaB5Zyo6L+Z5Liq56qX5Y+j5YK7562J77yM5b2T5a+85YWl5a6M5oiQ5pe277yM5oiR5Lus5Lya5ZCR5oKo5Y+R6YCB55S15a2Q6YKu5Lu244CCIiwKICAgICAgICAgICAgIkRldGVjdGluZyB5b3VyIHByb2plY3TigJlzIHZlcnNpb24gY29udHJvbCBzeXN0ZW3igKYiOiAi5qOA5rWL6aG555uu55qE54mI5pys5o6n5Yi257O757uf4oCmIiwKICAgICAgICAgICAgIkltcG9ydGluZyAgY29tbWl0cyBhbmQgcmV2aXNpb24gaGlzdG9yeeKApiI6ICLlr7zlhaXmj5DkuqTlkozljoblj7LniYjmnKzigKYiLAogICAgICAgICAgICAiSW1wb3J0aW5nIGNvbXBsZXRlISBZb3VyIG5ldyByZXBvc2l0b3J5IjogIuWvvOWFpeWujOaIkO+8jOaCqOeahOaWsOS7k+W6kyIsCiAgICAgICAgICAgICJpcyByZWFkeS4iOiAi5bey57uP5bCx57uq44CCIiwKCiAgICAgICAgICAgIC8vIOS7k+W6k+mhtemdogogICAgICAgICAgICAiV2hlcmUgc2hvdWxkIHdlIGZvcmsgdGhpcyByZXBvc2l0b3J5PyI6ICLmgqjmg7Pmioror6Xku5PlupPmtL7nlJ/liLDlk6rkuKrop5LoibLkuIvvvJ8iLAoKICAgICAgICAgICAgIkNvZGUiOiAi5Luj56CBIiwKICAgICAgICAgICAgIlB1bHNlIjogIue7n+iuoSIsCiAgICAgICAgICAgICJHcmFwaHMiOiAi5Zu+6KGoIiwKICAgICAgICAgICAgIlByb2plY3RzIjogIumhueebriIsCgogICAgICAgICAgICAvLyDku5PlupPmj4/ov7DnvJbovpEKICAgICAgICAgICAgIk5vIGRlc2NyaXB0aW9uIG9yIHdlYnNpdGUgcHJvdmlkZWQuIjogIuayoeacieaPkOS+m+ivtOaYjuWSjOe9keermeS/oeaBry4iLAogICAgICAgICAgICAiRWRpdCI6ICLnvJbovpEiLAogICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAi5o+P6L+wIiwKICAgICAgICAgICAgIlNob3J0IGRlc2NyaXB0aW9uIG9mIHRoaXMgcmVwb3NpdG9yeSI6ICLnroDnn63nmoTmj4/ov7DkuIvmgqjnmoTku5PlupMiLAogICAgICAgICAgICAiV2Vic2l0ZSI6ICLnvZHlnYAiLAogICAgICAgICAgICAiV2Vic2l0ZSBmb3IgdGhpcyByZXBvc2l0b3J5IChvcHRpb25hbCkiOiAi6L+Z5Liq5LuT5bqT55qE572R5Z2AICjlj6/pgIkpIiwKICAgICAgICAgICAgIlNhdmUiOiAi5L+d5a2YIiwKICAgICAgICAgICAgIm9yIjogIuaIliIsCiAgICAgICAgICAgICJDYW5jZWwiOiAi5Y+W5raIIiwKCiAgICAgICAgICAgIC8vIOWFs+azqOmAmuefpeiuvue9rgogICAgICAgICAgICAiTm90aWZpY2F0aW9ucyI6ICLpgJrnn6XnsbvlnosiLAogICAgICAgICAgICAiTm90IHdhdGNoaW5nIjogIuWPlua2iOWFs+azqCIsCiAgICAgICAgICAgICJXYXRjaGluZyI6ICLlhbPms6giLAogICAgICAgICAgICAiSWdub3JpbmciOiAi5b+955WlIiwKICAgICAgICAgICAgIkJlIG5vdGlmaWVkIHdoZW4gcGFydGljaXBhdGluZyBvciBAbWVudGlvbmVkLiI6ICLku4Xlj4LkuI7kuqTosIjmiJZA5oiR5pe26YCa55+l5oiRLiIsCiAgICAgICAgICAgICJCZSBub3RpZmllZCBvZiBhbGwgY29udmVyc2F0aW9ucy4iOiAi5omA5pyJ5Lqk6LCI6YO96YCa55+l5oiRLiIsCiAgICAgICAgICAgICJOZXZlciBiZSBub3RpZmllZC4iOiAi5b+955Wl5Lu75L2V6YCa55+lLiIsCgogICAgICAgICAgICAiY29tbWl0IjogIuasoeaPkOS6pCIsCiAgICAgICAgICAgICJjb21taXRzIjogIuasoeaPkOS6pCIsCiAgICAgICAgICAgICJicmFuY2giOiAi5YiG5pSvIiwKICAgICAgICAgICAgImJyYW5jaGVzIjogIuWIhuaUryIsCiAgICAgICAgICAgICJyZWxlYXNlIjogIuasoeWPkeW4gyIsCiAgICAgICAgICAgICJyZWxlYXNlcyI6ICLmrKHlj5HluIMiLAogICAgICAgICAgICAiY29udHJpYnV0b3IiOiAi5Liq6LSh54yu6ICFIiwKICAgICAgICAgICAgImNvbnRyaWJ1dG9ycyI6ICLkuKrotKHnjK7ogIUiLAogICAgICAgICAgICAiQ29weSB0byBjbGlwYm9hcmQiOiAi5aSN5Yi25Yiw5Ymq5YiH5p2/IiwKICAgICAgICAgICAgIkNvcGllZCEiOiAi5aSN5Yi25oiQ5YqfISIsCgogICAgICAgICAgICAiWW91ciByZWNlbnRseSBwdXNoZWQgYnJhbmNoZXM6IjogIuaCqOacgOi/keaOqOmAgeeahOWIhuaUrzoiLAogICAgICAgICAgICAiKGxlc3MgdGhhbiBhIG1pbnV0ZSBhZ28pIjogIuS4jeWIsOS4gOWIhumSn+WJjSIsCiAgICAgICAgICAgICJDb21wYXJlICYgcHVsbCByZXF1ZXN0IjogIuavlOi+gyAmIOaLieWPluivt+axgiIsCgogICAgICAgICAgICAiTmV3IHB1bGwgcmVxdWVzdCI6ICLlj5Hotbfmi4nlj5bor7fmsYIiLAogICAgICAgICAgICAiQ3JlYXRlIG5ldyBmaWxlIjogIuaWsOW7uuaWh+S7tiIsCiAgICAgICAgICAgICJVcGxvYWQgZmlsZXMiOiAi5LiK5Lyg5paH5Lu2IiwKICAgICAgICAgICAgIkZpbmQgZmlsZSI6ICLmn6Xmib7mlofku7YiLAogICAgICAgICAgICAiQ29weSBwYXRoIjogIuWkjeWItui3r+W+hCIsCiAgICAgICAgICAgICJDbG9uZSBvciBkb3dubG9hZCI6ICLlhYvpmobmiJbkuIvovb0iLAogICAgICAgICAgICAiRG93bmxvYWQgWklQIjogIuS4i+i9vSBaSVAiLAogICAgICAgICAgICAiSGlzdG9yeSI6ICLljoblj7LorrDlvZUiLAoKICAgICAgICAgICAgIlVzZSBTU0giOiAi5L2/55SoIFNTSCIsCiAgICAgICAgICAgICJVc2UgSFRUUFMiOiAi5L2/55SoIEhUVFBTIiwKICAgICAgICAgICAgIk9wZW4gaW4gRGVza3RvcCI6ICLku47moYzpnaLniYjmiZPlvIAiLAoKICAgICAgICAgICAgIkNsb25lIHdpdGggU1NIIjogIumAmui/hyBTU0gg5YWL6ZqGIiwKICAgICAgICAgICAgIkNsb25lIHdpdGggSFRUUFMiOiAi6YCa6L+HIEhUVFBTIOWFi+mahiIsCiAgICAgICAgICAgICJVc2UgYW4gU1NIIGtleSBhbmQgcGFzc3BocmFzZSBmcm9tIGFjY291bnQuIjogIuS9v+eUqCBTU0gg5a+G6ZKl5ZKM5a+G56CB6K6/6Zeu44CCIiwKICAgICAgICAgICAgIlVzZSBHaXQgb3IgY2hlY2tvdXQgd2l0aCBTVk4gdXNpbmcgdGhlIHdlYiBVUkwuIjogIuS9v+eUqCBnaXQg5oiWIHN2biDmo4Dlh7ror6Xku5PlupPjgIIiLAoKICAgICAgICAgICAgIkJyYW5jaDoiOiAi5YiG5pSvOiIsCiAgICAgICAgICAgICJTd2l0Y2ggYnJhbmNoZXMvdGFncyI6ICLpgInmi6nliIbmlK/miJbmoIfnrb4iLAogICAgICAgICAgICAiQnJhbmNoZXMiOiAi5YiG5pSvIiwKICAgICAgICAgICAgIlRhZ3MiOiAi5qCH562+IiwKICAgICAgICAgICAgIk5vdGhpbmcgdG8gc2hvdyI6ICLmmoLml6AiLAoKICAgICAgICAgICAgIkZpbGUgdXBsb2FkaW5nIGlzIG5vdyBhdmFpbGFibGUiOiAi546w5Zyo5Y+v5Lul5LiK5Lyg5paH5Lu25LqGIiwKICAgICAgICAgICAgIllvdSBjYW4gbm93IGRyYWcgYW5kIGRyb3AgZmlsZXMgaW50byB5b3VyIHJlcG9zaXRvcmllcy4iOiAi5oKo5Y+v5Lul55u05o6l5ouW5ou95paH5Lu25Yiw6K+l5LuT5bqT55WM6Z2i6L+b6KGM5LiK5Lyg44CCIiwKICAgICAgICAgICAgIkxlYXJuIG1vcmUiOiAi5p+l55yL6K+m5oOFIiwKICAgICAgICAgICAgIkRpc21pc3MiOiAi5oiR55+l6YGT5LqGIiwKCiAgICAgICAgICAgIC8vIOWFs+azqOiAhemhtemdogogICAgICAgICAgICAiV2F0Y2hlcnMiOiAi5YWz5rOo6ICFIiwKCiAgICAgICAgICAgIC8vIOeCuei1nuiAhemhtemdogogICAgICAgICAgICAiU3RhcmdhemVycyI6ICLngrnotZ7nmoTkuroiLAogICAgICAgICAgICAiQWxsIjogIuWFqOmDqCIsCiAgICAgICAgICAgICJZb3Uga25vdyI6ICLmgqjlhbPms6jnmoQiLAoKICAgICAgICAgICAgLy8gaXNzdWVzIOmhtemdogogICAgICAgICAgICAib3BlbmVkIHRoaXMiOiAi5omT5byA6L+Z5LiqIiwKICAgICAgICAgICAgIklzc3VlIjogIumXrumimCIsCiAgICAgICAgICAgICJhZGRlZCBhIGNvbW1pdCB0aGF0IGNsb3NlZCB0aGlzIGlzc3VlIjogIuWcqOaPkOS6pOaXtuWFs+mXreS6hui/meS4qumXrumimCIsCiAgICAgICAgICAgICJjbG9zZWQgdGhpcyBpbiI6ICLlhbPpl63kuo4iLAogICAgICAgICAgICAiYWRkZWQgdGhlIjogIua3u+WKoOS6hiIsCiAgICAgICAgICAgICJhZGRlZCI6ICLmt7vliqAiLAogICAgICAgICAgICAiYW5kIHJlbW92ZWQiOiAi5bm256e76Zmk5LqGIiwKICAgICAgICAgICAgImxhYmVsIjogIuagh+etviIsCiAgICAgICAgICAgICJsYWJlbHMiOiAi5qCH562+IiwKICAgICAgICAgICAgInNlbGYtYXNzaWduZWQgdGhpcyI6ICLoh6rlt7Hlj5fnkIbkuobor6Xpl67popgiLAogICAgICAgICAgICAiZWRpdGVkIjogIue8lui+keeahCIsCiAgICAgICAgICAgICJhZGRlZCB0aGlzIHRvIHRoZSI6ICLmt7vliqDliLAiLAogICAgICAgICAgICAibWlsZXN0b25lIjogIumHjOeoi+eikSIsCiAgICAgICAgICAgICJjbG9zZWQgdGhpcyI6ICLlhbPpl63kuoYiLAogICAgICAgICAgICAicmVvcGVuZWQgdGhpcyI6ICLph43mlrDmiZPlvIDkuoYiLAogICAgICAgICAgICAiVGhpcyB3YXMgcmVmZXJlbmNlZCI6ICLov5nmmK/lvJXnlKgiLAoKICAgICAgICAgICAgIk5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkLiI6ICLmsqHmnInlhbfkvZPmj4/ov7DjgIIiLAogICAgICAgICAgICAiQWRkIHlvdXIgcmVhY3Rpb24iOiAi5re75Yqg5oKo55qE6KGo5oOFIiwKICAgICAgICAgICAgIlBpY2sgeW91ciByZWFjdGlvbiI6ICLpgInmi6nmgqjnmoTooajmg4UiLAogICAgICAgICAgICAiTGVhdmUgYSBjb21tZW50IjogIuWPkeihqOivhOiuuiIsCiAgICAgICAgICAgICJNaWxlc3RvbmUiOiAi6YeM56iL56KRIiwKICAgICAgICAgICAgIlVuc3Vic2NyaWJlIjogIuWPlua2iOiuoumYhSIsCiAgICAgICAgICAgICJBdHRhY2ggZmlsZXMgYnkgZHJhZ2dpbmcgJiBkcm9wcGluZywiOiAi5ouW5ou95re75Yqg6ZmE5Lu277yMIiwKICAgICAgICAgICAgInNlbGVjdGluZyB0aGVtIjogIuaIlumAieaLqeaWh+S7tu+8jCIsCiAgICAgICAgICAgICIsIG9yIHBhc3RpbmcgZnJvbSB0aGUgY2xpcGJvYXJkLiI6ICLmiJblpI3liLbpu4/otLTlhoXlrrnjgIIiLAogICAgICAgICAgICAiU3R5bGluZyB3aXRoIE1hcmtkb3duIGlzIHN1cHBvcnRlZCI6ICLmlK/mjIEgTWFya2Rvd24g5Yqf6IO944CCIiwKICAgICAgICAgICAgIkNsb3NlIGlzc3VlIjogIuWFs+mXremXrumimCIsCiAgICAgICAgICAgICJDb21tZW50IjogIuaPkOS6pCIsCgogICAgICAgICAgICAiRmlsdGVycyI6ICLnrZvpgIkiLAogICAgICAgICAgICAiT3BlbiBpc3N1ZXMgYW5kIHB1bGwgcmVxdWVzdHMiOiAi5byA5pS+55qE6Zeu6aKY5oiW5ouJ5Y+W6K+35rGCIiwKICAgICAgICAgICAgIllvdXIgaXNzdWVzIjogIuaCqOaPkOWHuueahOmXrumimCIsCiAgICAgICAgICAgICJZb3VyIHB1bGwgcmVxdWVzdHMiOiAi5oKo55qE5ouJ5Y+W6K+35rGCIiwKICAgICAgICAgICAgIkV2ZXJ5dGhpbmcgYXNzaWduZWQgdG8geW91IjogIuS7u+S9leWFs+S6juaCqOeahCIsCiAgICAgICAgICAgICJFdmVyeXRoaW5nIG1lbnRpb25pbmcgeW91IjogIuaPkOWPiuaCqOeahCIsCiAgICAgICAgICAgICJWaWV3IGFkdmFuY2VkIHNlYXJjaCBzeW50YXgiOiAi5p+l55yL6auY57qn5pCc57Si6K+t5rOVIiwKCiAgICAgICAgICAgICJMYWJlbHMiOiAi5qCH562+IiwKICAgICAgICAgICAgIk5vbmUgeWV0IjogIuaaguaXoCIsCiAgICAgICAgICAgICJNaWxlc3RvbmVzIjogIumHjOeoi+eikSIsCiAgICAgICAgICAgICJObyBtaWxlc3RvbmUiOiAi5peg6YeM56iL56KRIiwKICAgICAgICAgICAgIkF1dGhvciI6ICLkvZzogIUiLAogICAgICAgICAgICAiQXNzaWduZWUiOiAi5Y+X55CG5Lq6IiwKICAgICAgICAgICAgIkFzc2lnbmVlcyI6ICLlj5fnkIbkuroiLAogICAgICAgICAgICAiTm8gb25l4oCUIjogIuaXoOS6uiAtICIsCiAgICAgICAgICAgICJhc3NpZ24geW91cnNlbGYiOiAiIOWPl+eQhuiHquW3sSIsCiAgICAgICAgICAgICJObyBvbmUgYXNzaWduZWQiOiAi5peg5Lq65Y+X55CGIiwKICAgICAgICAgICAgIlNvcnQiOiAi5o6S5bqPIiwKCiAgICAgICAgICAgICJGaWx0ZXIgYnkgYXV0aG9yIjogIuetm+mAieeUqOaItyIsCiAgICAgICAgICAgICJGaWx0ZXIgdXNlcnMiOiAi562b6YCJ55So5oi35ZCNIiwKICAgICAgICAgICAgIkZpbHRlciBieSBsYWJlbCI6ICLnrZvpgInmoIfnrb4iLAogICAgICAgICAgICAiRmlsdGVyIGxhYmVscyI6ICLnrZvpgInmoIfnrb4iLAogICAgICAgICAgICAiVW5sYWJlbGVkIjogIuaXoOagh+etviIsCiAgICAgICAgICAgICJGaWx0ZXIgYnkgbWlsZXN0b25lIjogIuetm+mAiemHjOeoi+eikSIsCiAgICAgICAgICAgICJGaWx0ZXIgbWlsZXN0b25lcyI6ICLnrZvpgInph4znqIvnopEiLAogICAgICAgICAgICAiSXNzdWVzIHdpdGggbm8gbWlsZXN0b25lIjogIuaXoOmHjOeoi+eikSIsCiAgICAgICAgICAgICJGaWx0ZXIgYnkgd2hv4oCZcyBhc3NpZ25lZCI6ICLnrZvpgInku6PnkIbkuroiLAogICAgICAgICAgICAiQXNzaWduZWQgdG8gbm9ib2R5IjogIuaXoOS7o+eQhuS6uiIsCiAgICAgICAgICAgICJTb3J0IGJ5IjogIuaOkuW6jyIsCiAgICAgICAgICAgICJOZXdlc3QiOiAi5pyA5paw55qEIiwKICAgICAgICAgICAgIk9sZGVzdCI6ICLmnIDogIHnmoQiLAogICAgICAgICAgICAiTW9zdCBjb21tZW50ZWQiOiAi5pyA5aSa6K+E6K66IiwKICAgICAgICAgICAgIkxlYXN0IGNvbW1lbnRlZCI6ICLmnIDlsJHor4TorroiLAogICAgICAgICAgICAiUmVjZW50bHkgdXBkYXRlZCI6ICLmnIDov5Hmm7TmlrAiLAogICAgICAgICAgICAiTGVhc3QgcmVjZW50bHkgdXBkYXRlZCI6ICLmnIDml6nmm7TmlrAiLAogICAgICAgICAgICAiVmlldyBhbGwgaXNzdWVzIGluIHRoaXMgbWlsZXN0b25lIjogIuafpeeci+i/meS4qumHjOeoi+eikeeahOaJgOaciemXrumimCIsCgogICAgICAgICAgICAvLyBOZXcgY29sbGFib3JhdG9yIOmhtemdogogICAgICAgICAgICAiTmV3IGNvbGxhYm9yYXRvciI6ICLmt7vliqDlkIjkvZzogIUiLAogICAgICAgICAgICAiQ29sbGFib3JhdG9ycyI6ICLlkIjkvZzogIUiLAogICAgICAgICAgICAiUHVzaCBhY2Nlc3MgdG8gdGhlIHJlcG9zaXRvcnkiOiAi5b2T5YmN5LuT5bqT55qE5o6o6YCB5p2D6ZmQIiwKICAgICAgICAgICAgIlRoaXMgcmVwb3NpdG9yeSBkb2VzbuKAmXQgaGF2ZSBhbnkgY29sbGFib3JhdG9ycyB5ZXQuIFVzZSB0aGUgZm9ybSBiZWxvdyB0byBhZGQgYSBjb2xsYWJvcmF0b3IuIjogIuW9k+WJjeS7k+W6k+ayoeacieWQiOS9nOiAhe+8jOaCqOWPr+S7peWcqOS4i+mdoui+k+WFpeahhua3u+WKoOWQiOS9nOiAheOAgiIsCiAgICAgICAgICAgICJTZWFyY2ggYnkgdXNlcm5hbWUsIGZ1bGwgbmFtZSBvciBlbWFpbCBhZGRyZXNzIjogIuaQnOe0oueUqOaIt+WQjSwg5YWo5ZCNLCDpgq7nrrHlnLDlnYDvvJoiLAogICAgICAgICAgICAiQWRkIGNvbGxhYm9yYXRvciI6ICLmt7vliqDlkIjkvZzogIUiLAoKICAgICAgICAgICAgLy8gVXBsb2FkIGZpbGVzIOmhtemdogogICAgICAgICAgICAiRHJhZyBmaWxlcyBoZXJlIHRvIGFkZCB0aGVtIHRvIHlvdXIgcmVwb3NpdG9yeSI6ICLmi5bmi73mlofku7bmt7vliqDliLDlvZPliY3ku5PlupMiLAogICAgICAgICAgICAiRHJhZyBhZGRpdGlvbmFsIGZpbGVzIGhlcmUgdG8gYWRkIHRoZW0gdG8geW91ciByZXBvc2l0b3J5IjogIuaLluaLveWFtuS7luaWh+S7tua3u+WKoOWIsOW9k+WJjeS7k+W6kyIsCiAgICAgICAgICAgICJEcm9wIHRvIHVwbG9hZCB5b3VyIGZpbGVzIjogIuaLluaLveS4iuS8oOaCqOeahOaWh+S7tiIsCiAgICAgICAgICAgICJPciI6ICLmiJYiLAogICAgICAgICAgICAiY2hvb3NlIHlvdXIgZmlsZXMiOiAi6YCJ5oup5paH5Lu2IiwKICAgICAgICAgICAgIllvd3phLCB0aGF04oCZcyBhIGJpZyBmaWxlLiBUcnkgYWdhaW4gd2l0aCBhIGZpbGUgc21hbGxlciB0aGFuIDI1TUIuIjogIuaIkeWLkuS4quaTpu+8jOi/meS5iOWkp+eahOaWh+S7tu+8jOWNleaWh+S7tuS4jeW+l+i2hei/hzI1TUIiLAogICAgICAgICAgICAiWW93emEsIHRoYXTigJlzIGEgbG90IG9mIGZpbGVzLiBUcnkgYWdhaW4gd2l0aCBmZXdlciB0aGFuIDEwMCBmaWxlcy4iOiAi5oiR5YuS5Liq5pOm77yM6L+Z5LmI5aSa5paH5Lu277yM5LiA5qyh5LiN6IO96LaF6L+HMTAw5LiqIiwKICAgICAgICAgICAgIlRoaXMgZmlsZSBpcyBlbXB0eS4iOiAi6L+Z5Liq5paH5Lu25piv56m655qEIiwKICAgICAgICAgICAgIlNvbWV0aGluZyB3ZW50IHJlYWxseSB3cm9uZywgYW5kIHdlIGNhbuKAmXQgcHJvY2VzcyB0aGF0IGZpbGUuIjogIumBh+WIsOmUmeivr++8jOaIkeS7rOWkhOeQhuS4jeS6hui/meS4quaWh+S7tuOAgiIsCiAgICAgICAgICAgICJVcGxvYWRpbmciOiAi5paH5Lu25LiK5Lyg5LitIiwKICAgICAgICAgICAgIm9mIjogIiIsCiAgICAgICAgICAgICJmaWxlcyI6ICIiLAogICAgICAgICAgICAiQ29tbWl0IGNoYW5nZXMiOiAi5o+Q5Lqk5Y+Y5pu0IiwKICAgICAgICAgICAgIkFkZCBmaWxlcyB2aWEgdXBsb2FkIjogIumAmui/h+a3u+WKoOaWh+S7tuS4iuS8oCIsCiAgICAgICAgICAgICJPcHRpb25hbCBleHRlbmRlZCBkZXNjcmlwdGlvbiI6ICLlj6/pgInnmoTmj4/ov7AiLAogICAgICAgICAgICAiQWRkIGFuIG9wdGlvbmFsIGV4dGVuZGVkIGRlc2NyaXB0aW9u4oCmIjogIua3u+WKoOaPj+i/sC4uLiAo5Y+v6YCJKSIsCiAgICAgICAgICAgICJDb21taXQgZGlyZWN0bHkgdG8gdGhlIjogIuaPkOS6pOWIsCIsCiAgICAgICAgICAgICJDcmVhdGUgYSI6ICLliJvlu7oiLAogICAgICAgICAgICAibmV3IGJyYW5jaCI6ICLmlrDliIbmlK8iLAogICAgICAgICAgICAiZm9yIHRoaXMgY29tbWl0IGFuZCBzdGFydCBhIHB1bGwgcmVxdWVzdC4iOiAi5Li66L+Z5Liq5o+Q5Lqk77yM5bm25LiU5Y+R6LW35LiA5Liq5ouJ5Y+W6K+35rGC44CCIiwKICAgICAgICAgICAgIkxlYXJuIG1vcmUgYWJvdXQgcHVsbCByZXF1ZXN0cy4iOiAi5LqG6Kej5pu05aSa5ouJ5Y+W6K+35rGC44CCIiwKCiAgICAgICAgICAgIC8vIEZpbmQgZmlsZSDpobXpnaIKICAgICAgICAgICAgIllvdeKAmXZlIGFjdGl2YXRlZCB0aGUiOiAi5oKo5bey5r+A5rS7IiwKICAgICAgICAgICAgImZpbGUgZmluZGVyIjogIuaWh+S7tuaQnOe0ouaooeW8jyIsCiAgICAgICAgICAgICIuIFN0YXJ0IHR5cGluZyB0byBmaWx0ZXIgdGhlIGZpbGUgbGlzdC4gVXNlIjogIuOAgui+k+WFpeWFs+mUruivjeafpeaJvuaCqOeahOaWh+S7tuOAguS9v+eUqCIsCiAgICAgICAgICAgICJhbmQiOiAi5ZKMIiwKICAgICAgICAgICAgInRvIG5hdmlnYXRlLCI6ICLpgInmi6nmlofku7YiLAogICAgICAgICAgICAidG8gdmlldyBmaWxlcywiOiAi5p+l55yL5paH5Lu2IiwKICAgICAgICAgICAgInRvIGV4aXQuIjogIui/lOWbnuOAgiIsCgogICAgICAgICAgICAvLyDmi4nlj5bor7fmsYLkv6Hmga/mj5DnpLoKICAgICAgICAgICAgIllvdXIgcmVjZW50bHkgcHVzaGVkIGJyYW5jaGVzOiI6ICLkvaDmnIDov5HmjqjpgIHnmoTliIbmlK86IiwKICAgICAgICAgICAgIkNvbXBhcmUgJiBwdWxsIHJlcXVlc3QiOiAi5q+U6L6DICYg5ouJ5Y+W6K+35rGCIiwKCiAgICAgICAgICAgIC8vIFB1bGwgUmVxdWVzdHMg6aG16Z2iCiAgICAgICAgICAgICJUaGVyZSBhcmVu4oCZdCBhbnkgb3BlbiBwdWxsIHJlcXVlc3RzLiI6ICLmmoLml6Dmi4nlj5bor7fmsYLjgIIiLAogICAgICAgICAgICAiVGhlcmUgYXJlbuKAmXQgYW55IG9wZW4gaXNzdWVzLiI6ICLmmoLml6DlvIDmlL7nmoTpl67popjjgIIiLAogICAgICAgICAgICAiVXNlIHRoZSBsaW5rcyBhYm92ZSB0byBmaW5kIHdoYXQgeW914oCZcmUgbG9va2luZyBmb3IsIG9yIHRyeSI6ICLkvb/nlKjkuIrpnaLnmoTpk77mjqXmnaXmib7liLDmgqjopoHmib7nmoTvvIzmiJbogIXlsJ3or5UiLAogICAgICAgICAgICAiYSBuZXcgc2VhcmNoIHF1ZXJ5IjogIuaWsOeahOaQnOe0ouafpeivoiIsCiAgICAgICAgICAgICIuIFRoZSBGaWx0ZXJzIG1lbnUgaXMgYWxzbyBzdXBlciBoZWxwZnVsIGZvciBxdWlja2x5IGZpbmRpbmcgaXNzdWVzIG1vc3QgcmVsZXZhbnQgdG8geW91LiI6ICLjgILmkJzntKLmoI/kuZ/mmK/lv6vpgJ/mib7liLDpl67popjmnIDnm7jlhbPnmoTmgqjotoXnuqfmnInluK7liqnnmoTjgIIiLAoKICAgICAgICAgICAgIkNvbnZlcnNhdGlvbiI6ICLkuqTosIgiLAogICAgICAgICAgICAiRmlsZXMgY2hhbmdlZCI6ICLmm7TmlLnnmoTmlofku7YiLAogICAgICAgICAgICAiY29tbWVudGVkIjogIuivhOiuuiIsCiAgICAgICAgICAgICJtZXJnZWQgY29tbWl0IjogIuS7peWQiOW5tuaPkOS6pCIsCiAgICAgICAgICAgICJpbnRvIjogIuWIsCIsCiAgICAgICAgICAgICJmcm9tIjogIuadpeiHqiIsCgogICAgICAgICAgICAiUmV2ZXJ0IjogIui/mOWOnyIsCgogICAgICAgICAgICAiQXZvaWQgYnVncyBieSBhdXRvbWF0aWNhbGx5IHJ1bm5pbmcgeW91ciB0ZXN0cy4iOiAi6YCa6L+H5oyB57ut6ZuG5oiQ5rWL6K+V5p2l6YG/5YWNQlVH44CCIiwKICAgICAgICAgICAgIkNvbnRpbnVvdXMgaW50ZWdyYXRpb24gY2FuIGhlbHAgY2F0Y2ggYnVncyBieSBydW5uaW5nIHlvdXIgdGVzdHMgYXV0b21hdGljYWxseS4iOiAi5oyB57ut6ZuG5oiQ5Y+v5Lul6YCa6L+H6Ieq5Yqo6L+Q6KGM5oKo55qE5rWL6K+V5pyJ5Yqp5LqO5o2V6I636ZSZ6K+v44CCIiwKICAgICAgICAgICAgIk1lcmdlIHlvdXIgY29kZSB3aXRoIGNvbmZpZGVuY2UgdXNpbmcgb25lIG9mIG91ciBjb250aW51b3VzIGludGVncmF0aW9uIHByb3ZpZGVycy4iOiAi5ZCI5bm25oKo55qE5Luj56CB5L2/55So5oiR5Lus5L+h5Lu755qE5oyB57ut6ZuG5oiQ5L6b5bqU5ZWG44CCIiwKCiAgICAgICAgICAgICJBZGQgbW9yZSBjb21taXRzIGJ5IHB1c2hpbmcgdG8gdGhlIjogIua3u+WKoOabtOWkmuadpeiHs+S6jiIsCiAgICAgICAgICAgICJicmFuY2ggb24iOiAi5YiG5pSv55qE5o+Q5Lqk5o6o6YCB5YiwIiwKCiAgICAgICAgICAgICJUaGlzIGJyYW5jaCBoYXMgbm8gY29uZmxpY3RzIHdpdGggdGhlIGJhc2UgYnJhbmNoIjogIuivpeWIhuaUr+S4jmJhc2XmlK/msqHmnInlhrLnqoEiLAogICAgICAgICAgICAiTWVyZ2luZyBjYW4gYmUgcGVyZm9ybWVkIGF1dG9tYXRpY2FsbHkuIjogIuWPr+S7peiHquWKqOWcsOaJp+ihjOWQiOW5tuOAgiIsCiAgICAgICAgICAgICJZb3UgY2FuIGFsc28iOiAi5oKo5Lmf5Y+v5Lul5ZyoIiwKICAgICAgICAgICAgIm9wZW4gdGhpcyBpbiBHaXRIdWIgRGVza3RvcCI6ICJHaXRIdWLmoYzpnaLniYjmnKwiLAogICAgICAgICAgICAib3IgdmlldyI6ICLmiZPlvIDvvIzmiJbpgJrov4ciLAogICAgICAgICAgICAiY29tbWFuZCBsaW5lIGluc3RydWN0aW9ucyI6ICLlkb3ku6TooYzmn6XnnIsiLAoKICAgICAgICAgICAgLy8vLyDnm7TmjqXmj5DkuqTmi4nlj5bor7fmsYIKICAgICAgICAgICAgIk9wZW4gYSBwdWxsIHJlcXVlc3QiOiAi5paw5bu65LiA5Liq5ouJ5Y+W6K+35rGCIiwKICAgICAgICAgICAgIkNyZWF0ZSBhIG5ldyBwdWxsIHJlcXVlc3QgYnkgY29tcGFyaW5nIGNoYW5nZXMgYWNyb3NzIHR3byBicmFuY2hlcy4gSWYgeW91IG5lZWQgdG8sIHlvdSBjYW4gYWxzbyI6ICLpgJrov4fmr5TovoPkuKTkuKrliIbmlK/nmoTmm7TmlLnmnaXliJvlu7rkuIDkuKrmlrDnmoTmi4nor7fmsYLjgILlpoLmnpzpnIDopoHvvIzov5jlj6/ku6UiLAogICAgICAgICAgICAiQWJsZSB0byBtZXJnZS4iOiAi5Y+v6KKr5ZCI5bm244CCIiwKICAgICAgICAgICAgIlRoZXNlIGJyYW5jaGVzIGNhbiBiZSBhdXRvbWF0aWNhbGx5IG1lcmdlZC4iOiAi6K+l5YiG5pSv5Y+v6KKr6Ieq5Yqo5ZCI5bm244CCIiwKICAgICAgICAgICAgImZpbGUgY2hhbmdlZCI6ICLkuKrmlofku7blj5jmm7QiLAogICAgICAgICAgICAiZmlsZXMgY2hhbmdlZCI6ICLkuKrmlofku7blj5jmm7QiLAogICAgICAgICAgICAiY29tbWl0IGNvbW1lbnQiOiAi5qyh5o+Q5LqkIiwKICAgICAgICAgICAgImNvbW1pdCBjb21tZW50cyI6ICLmrKHmj5DkuqQiLAogICAgICAgICAgICAiTm8gY29tbWl0IGNvbW1lbnRzIGZvciB0aGlzIHJhbmdlIjogIuivpeiMg+WbtOWPmOabtOayoeacieaPkOS6pOazqOmHiiIsCgogICAgICAgICAgICAiQ29tcGFyaW5nIGNoYW5nZXMiOiAi5q+U6L6D5Y+Y5pu0IiwKICAgICAgICAgICAgIkNob29zZSB0d28gYnJhbmNoZXMgdG8gc2VlIHdoYXTigJlzIGNoYW5nZWQgb3IgdG8gc3RhcnQgYSBuZXcgcHVsbCByZXF1ZXN0LiBJZiB5b3UgbmVlZCB0bywgeW91IGNhbiBhbHNvIjogIumAieaLqeS4pOS4quWIhuaUr++8jOeci+eci+WPkeeUn+S6huS7gOS5iOaUueWPmO+8jOaIluWPkei1t+S4gOS4quaWsOeahOaLieivt+axguOAguWmguaenOS9oOmcgOimge+8jOS9oOS5n+WPr+S7pSIsCiAgICAgICAgICAgICJiYXNlIGZvcms6IjogIuWfuua0vueUnzoiLAogICAgICAgICAgICAiVGhlcmUgaXNu4oCZdCBhbnl0aGluZyB0byBjb21wYXJlLiI6ICLmsqHmnInku7vkvZXkuJzopb/lj6/mr5TovoPjgIIiLAogICAgICAgICAgICAiaXMgdXAgdG8gZGF0ZSB3aXRoIGFsbCBjb21taXRzIGZyb20iOiAi5bey5piv5pyA5paw77yM5o+Q5Lqk5LqOIiwKICAgICAgICAgICAgIi4gVHJ5IjogIuOAguWwneivlSIsCiAgICAgICAgICAgICJzd2l0Y2hpbmcgdGhlIGJhc2UiOiAi5YiH5o2i5Z+656GA5bqTIiwKICAgICAgICAgICAgImZvciB5b3VyIGNvbXBhcmlzb24uIjogIuadpei/m+ihjOavlOi+g+OAgiIsCgogICAgICAgICAgICAvLyBwcm9qZWN0cyDpobXpnaIKICAgICAgICAgICAgIlRoaXMgcmVwb3NpdG9yeSBkb2Vzbid0IGhhdmUgYW55IHByb2plY3RzIHlldCI6ICLor6Xku5PlupPnm67liY3msqHmnInku7vkvZXpobnnm64iLAogICAgICAgICAgICAiQ3JlYXRlIGEgcHJvamVjdCI6ICLliJvlu7rkuIDkuKrpobnnm64iLAoKICAgICAgICAgICAgLy8gd2lraSDpobXpnaIKICAgICAgICAgICAgIldpa2lzIHByb3ZpZGUgYSBwbGFjZSBpbiB5b3VyIHJlcG9zaXRvcnkgdG8gbGF5IG91dCB0aGUgcm9hZG1hcCBvZiB5b3VyIHByb2plY3QsIHNob3cgdGhlIGN1cnJlbnQgc3RhdHVzLCBhbmQgZG9jdW1lbnQgc29mdHdhcmUgYmV0dGVyLCB0b2dldGhlci4iOiAid2lraSDkuLrmgqjnmoTku5PlupPmj5DkvpvkuobkuIDkuKrmm7Tlpb3nmoTmlofmoaPotYTmlpnjgIIiLAogICAgICAgICAgICAiQ3JlYXRlIHRoZSBmaXJzdCBwYWdlIjogIuWIm+W7uuesrOS4gOS4qumhtemdoiIsCgogICAgICAgICAgICAiQ3JlYXRlIG5ldyBwYWdlIjogIuWIm+W7uuaWsOmhtemdoiIsCiAgICAgICAgICAgICJXcml0ZSI6ICLnvJbovpEiLAogICAgICAgICAgICAiUHJldmlldyI6ICLpooTop4giLAogICAgICAgICAgICAiRWRpdCBtb2RlOiI6ICLnvJbovpHmqKHlvI86IiwKICAgICAgICAgICAgIkVkaXQgTWVzc2FnZSI6ICLmj5DkuqTkv6Hmga8iLAogICAgICAgICAgICAiU2F2ZSBQYWdlIjogIuS/neWtmOmhtemdoiIsCgogICAgICAgICAgICAvLyBzZXR0aW5ncyDpobXpnaIKICAgICAgICAgICAgIldlYmhvb2tzICYgc2VydmljZXMiOiAiV2Vi6ZKp5a2QICYg5pyN5YqhIiwKICAgICAgICAgICAgIkRlcGxveSBrZXlzIjogIumDqOe9suWvhumSpSIsCgogICAgICAgICAgICAiT3B0aW9ucyI6ICLln7rmnKzpgInpobkiLAogICAgICAgICAgICAiUmVwb3NpdG9yeSBuYW1lIjogIuS7k+W6k+WQjSIsCiAgICAgICAgICAgICJSZW5hbWUiOiAi6YeN5ZG95ZCNIiwKICAgICAgICAgICAgIkZlYXR1cmVzIjogIueJueaApyIsCiAgICAgICAgICAgICJHaXRIdWIgV2lraXMgaXMgYSBzaW1wbGUgd2F5IHRvIGxldCBvdGhlcnMgY29udHJpYnV0ZSBjb250ZW50LiBBbnkgR2l0SHViIHVzZXIgY2FuIGNyZWF0ZSBhbmQgZWRpdCBwYWdlcyB0byB1c2UgZm9yIGRvY3VtZW50YXRpb24sIGV4YW1wbGVzLCBzdXBwb3J0LCBvciBhbnl0aGluZyB5b3Ugd2lzaC4iOiAiR2l0SHViIFdpa2lzIOaYr+S4gOS4queugOWNleeahOaWueazleiuqeWIq+S6uui0oeeMruWGheWuueOAgkdpdEh1YiDnmoTku7vkvZXnlKjmiLfpg73lj6/ku6XliJvlu7rlkoznvJbovpHpobXpnaLkuK3kvb/nlKjnmoTmlofmoaPvvIznpLrkvovvvIzmlK/mjIHmiJbku7vkvZXmgqjmg7PjgIIiLAogICAgICAgICAgICAiUmVzdHJpY3QgZWRpdGluZyB0byBjb2xsYWJvcmF0b3JzIG9ubHkiOiAi57yW6L6R6ZmQ5Yi25Y+q5pyJ5ZCI5L2c6ICF5Y+v5LulIiwKICAgICAgICAgICAgIlB1YmxpYyB3aWtpcyB3aWxsIHN0aWxsIGJlIHJlYWRhYmxlIGJ5IGV2ZXJ5b25lLiI6ICLlhazlhbEgd2lraXMg5LuN54S25Lya5Y+X5Yiw5aSn5a6255qE5Y+v6K+75oCnIiwKICAgICAgICAgICAgIkdpdEh1YiBJc3N1ZXMgYWRkcyBsaWdodHdlaWdodCBpc3N1ZSB0cmFja2luZyB0aWdodGx5IGludGVncmF0ZWQgd2l0aCB5b3VyIHJlcG9zaXRvcnkuIEFkZCBpc3N1ZXMgdG8gbWlsZXN0b25lcywgbGFiZWwgaXNzdWVzLCBhbmQgY2xvc2UgJiByZWZlcmVuY2UgaXNzdWVzIGZyb20gY29tbWl0IG1lc3NhZ2VzLiI6ICJHaXRIdWIg5LiO5oKo55qE5a2Y5YKo5bqT5re75Yqg6L276YeP57qn6Zeu6aKY6Lef6Liq57Sn5a+G6ZuG5oiQ55qE6Zeu6aKY44CC5re75Yqg6YeM56iL56KR55qE6Zeu6aKY77yM5qCH562+6Zeu6aKY77yM5bm25a+G5YiH5LiO5Y+C6ICD6Zeu6aKY5o+Q5Lqk5raI5oGv44CCIiwKCiAgICAgICAgICAgICJNZXJnZSBidXR0b24iOiAi5ZCI5bm25oyJ6ZKuIiwKICAgICAgICAgICAgIldoZW4gbWVyZ2luZyBwdWxsIHJlcXVlc3RzLCB5b3UgY2FuIGFsbG93IG1lcmdlIGNvbW1pdHMsIHNxdWFzaGluZywgb3IgYm90aC4iOiAi5b2T5ZCI5bm25ouJ5Y+W6K+35rGC5pe277yM5oKo5Y+v5Lul5YWB6K645ZCI5bm25o+Q5Lqk77yM5Y6L57yp44CCIiwKICAgICAgICAgICAgIkFsbG93IG1lcmdlIGNvbW1pdHMiOiAi5YWB6K645ZCI5bm25o+Q5LqkIiwKICAgICAgICAgICAgIkFkZCBhbGwgY29tbWl0cyBmcm9tIHRoZSBoZWFkIGJyYW5jaCB0byB0aGUgYmFzZSBicmFuY2ggd2l0aCBhIG1lcmdlIGNvbW1pdC4iOiAi5LuOaGVhZOWIhuaUr+eahOaJgOacieaPkOS6pOWQiOW5tuaPkOS6pOWIsGJhc2XliIbmlK/jgIIiLAogICAgICAgICAgICAiQWxsb3cgc3F1YXNoIG1lcmdpbmciOiAi5YWB6K645Y6L57yp5ZCI5bm2IiwKICAgICAgICAgICAgIkNvbWJpbmUgYWxsIGNvbW1pdHMgZnJvbSB0aGUgaGVhZCBicmFuY2ggaW50byBhIHNpbmdsZSBjb21taXQgaW4gdGhlIGJhc2UgYnJhbmNoLiI6ICLku45oZWFk5YiG5pSv55qE5omA5pyJ5o+Q5Lqk5Y6L57yp5o+Q5Lqk5YiwYmFzZeWIhuaUr+OAgiIsCiAgICAgICAgICAgICJZb3UgbXVzdCBzZWxlY3QgYXQgbGVhc3Qgb25lIG9wdGlvbiI6ICLmgqjoh7PlsJHopoHpgInmi6nkuIDkuKrpgInpobnjgIIiLAoKICAgICAgICAgICAgIkdpdEh1YiBQYWdlcyI6ICJHaXRIdWIg6aG555uu5ryU56S66aG16Z2iIiwKICAgICAgICAgICAgIllvdXIgc2l0ZSBpcyBwdWJsaXNoZWQgYXQiOiAi5oKo55qE5ryU56S65Zyw5Z2A5Li6OiIsCiAgICAgICAgICAgICJZb3VyIHNpdGUgaXMgcmVhZHkgdG8gYmUgcHVibGlzaGVkIGF0IjogIuaCqOeahOa8lOekuuWcsOWdgOS4ujoiLAogICAgICAgICAgICAiaXMgZGVzaWduZWQgdG8gaG9zdCB5b3VyIHBlcnNvbmFsLCBvcmdhbml6YXRpb24sIG9yIHByb2plY3QgcGFnZXMgZnJvbSBhIEdpdEh1YiByZXBvc2l0b3J5LiI6ICLkuLrmgqjnp4HkurrvvIznu4Tnu4fmiJbku5PlupPpobnnm67mj5DkvpvpnZnmgIF3ZWLpobXpnaLjgIIiLAogICAgICAgICAgICAiU291cmNlIjogIua6kCIsCiAgICAgICAgICAgICJZb3VyIEdpdEh1YiBQYWdlcyBzaXRlIGlzIGN1cnJlbnRseSBiZWluZyBidWlsdCBmcm9tIHRoZSI6ICLkvaDnmoQgR2l0SHViIFBhZ2VzIOe9keermeebruWJjeato+WcqOW7uueri+WcqCIsCiAgICAgICAgICAgICJicmFuY2guIjogIuWIhuaUr+OAgiIsCiAgICAgICAgICAgICJTZWxlY3Qgc291cmNlIjogIumAieaLqea6kCIsCiAgICAgICAgICAgICJVc2UgdGhlIjogIuS9v+eUqCIsCiAgICAgICAgICAgICJicmFuY2ggZm9yIEdpdEh1YiBQYWdlcy4iOiAi5YiG5pSv5L2c5Li6IEdpdEh1YiBQYWdlcyIsCiAgICAgICAgICAgICJEaXNhYmxlIEdpdEh1YiBQYWdlcy4iOiAi56aB55SoIEdpdEh1YiBQYWdlcyIsCiAgICAgICAgICAgICJDdXN0b20gZG9tYWluIjogIuiHquWumuS5ieWfn+WQjSIsCiAgICAgICAgICAgICJDdXN0b20gZG9tYWlucyBhbGxvdyB5b3UgdG8gc2VydmUgeW91ciBzaXRlIGZyb20gYSBkb21haW4gb3RoZXIgdGhhbiI6ICLoh6rlrprkuYnln5/lkI3kuZ/orrjkvaDnlKjlhbbku5bln5/lkI3orr/pl64iLAogICAgICAgICAgICAiVXBkYXRlIHlvdXIgc2l0ZSI6ICLmm7TmlrDmgqjnmoTnq5nngrkiLAogICAgICAgICAgICAiVG8gdXBkYXRlIHlvdXIgc2l0ZSwgcHVzaCB5b3VyIEhUTUwgb3IiOiAi5pu05paw5oKo55qE56uZ54K577yM5Y+v5Lul55u05o6l5o6o6YCBIGh0bWwg5oiW6ICF5L2/55SoIiwKICAgICAgICAgICAgInVwZGF0ZXMgdG8geW91ciI6ICLmm7TmlrDliLAiLAogICAgICAgICAgICAiYnJhbmNoLiBSZWFkIHRoZSI6ICLliIbmlK/jgILor6bmg4Xor7fpmIXor7siLAogICAgICAgICAgICAiUGFnZXMgaGVscCBhcnRpY2xlIjogIua8lOekuumhtemdouW4ruWKqSIsCiAgICAgICAgICAgICJmb3IgbW9yZSBpbmZvcm1hdGlvbi4iOiAi6I635Y+W5pu05aSa5L+h5oGvIiwKICAgICAgICAgICAgIk92ZXJ3cml0ZSBzaXRlIjogIuimhueblueOsOacieermeeCuSIsCiAgICAgICAgICAgICJSZXBsYWNlIHlvdXIgZXhpc3Rpbmcgc2l0ZSBieSB1c2luZyBvdXIgYXV0b21hdGljIHBhZ2UgZ2VuZXJhdG9yLiBBdXRob3IgeW91ciBjb250ZW50IGluIG91ciBNYXJrZG93biBlZGl0b3IsIHNlbGVjdCBhIHRoZW1lLCB0aGVuIHB1Ymxpc2guIjogIumAmui/h+S9v+eUqOaIkeS7rOeahOiHquWKqOmhtemdoueUn+aIkOWZqOabv+aNoueOsOacieeahOe9keermeOAguaCqOWPr+S7peWcqOaIkeS7rOeahCBNYXJrZG93biDnvJbovpHlmajvvIzpgInmi6nkuIDkuKrkuLvpopjvvIznhLblkI7lj5HluIPjgIIiLAogICAgICAgICAgICAiTGF1bmNoIGF1dG9tYXRpYyBwYWdlIGdlbmVyYXRvciI6ICLlkK/liqjoh6rliqjnlJ/miJDlmagiLAogICAgICAgICAgICAiRW5mb3JjZSBIVFRQUyI6ICLlvLrliLYgSFRUUFMiLAogICAgICAgICAgICAi4oCUIFVuYXZhaWxhYmxlIGZvciB5b3VyIHNpdGUgYmVjYXVzZSB5b3UgaGF2ZSBhIGN1c3RvbSBkb21haW4gY29uZmlndXJlZCAoIjogIi0g5peg5rOV5Li65oKo55qE572R56uZ5byA5ZCv77yM5Zug5Li65oKo6YWN572u5LqG5LiA5Liq6Ieq5a6a5LmJ5Z+f5ZCNICgiLAogICAgICAgICAgICAiSFRUUFMgcHJvdmlkZXMgYSBsYXllciBvZiBlbmNyeXB0aW9uIHRoYXQgcHJldmVudHMgb3RoZXJzIGZyb20gc25vb3Bpbmcgb24gb3IgdGFtcGVyaW5nIHdpdGggdHJhZmZpYyB0byB5b3VyIHNpdGUuIjogIkhUVFBTIOaPkOS+m+S6huS4gOWxguWKoOWvhu+8jOmYsuatouS7luS6uuWBt+eqpeaIluevoeaUueeahOS6pOmAmuWIsOaCqOeahOe9keermeOAgiIsCiAgICAgICAgICAgICJXaGVuIEhUVFBTIGlzIGVuZm9yY2VkLCB5b3VyIHNpdGUgd2lsbCBvbmx5IGJlIHNlcnZlZCBvdmVyIEhUVFBTLiI6ICLlvZPlvIDlkK/lvLrliLYgSFRUUFMg5ZCO77yM5oKo55qE572R56uZ5bCG5Y+q6IO96YCa6L+HIEhUVFBTIOiuv+mXruOAgiIsCgogICAgICAgICAgICAiRGFuZ2VyIFpvbmUiOiAi5Y2x6Zmp5Yy6IiwKICAgICAgICAgICAgIk1ha2UgdGhpcyByZXBvc2l0b3J5IHByaXZhdGUiOiAi5bCG6K+l5LuT5bqT6K6+5Li656eB5pyJ5LuT5bqTIiwKICAgICAgICAgICAgIlB1YmxpYyBmb3JrcyBjYW7igJl0IGJlIG1hZGUgcHJpdmF0ZS4gUGxlYXNlIjogIua0vueUn+eahOeahOS7k+W6k++8jOaXoOazlei9rOS4uuengeacie+8jOivtyIsCiAgICAgICAgICAgICJkdXBsaWNhdGUgdGhlIHJlcG9zaXRvcnkiOiAi5aSN5Yi25LiA5Lu96K+l5LuT5bqT44CCIiwKICAgICAgICAgICAgIk1ha2UgcHJpdmF0ZSI6ICLovazkuLrnp4HmnIkiLAogICAgICAgICAgICAiUGxlYXNlIjogIuivtyIsCiAgICAgICAgICAgICJ1cGdyYWRlIHlvdXIgcGxhbiI6ICLmm7TmlrDmgqjnmoTnp4HmnInku5PlupPorqHliJIiLAogICAgICAgICAgICAidG8gbWFrZSB0aGlzIHJlcG9zaXRvcnkgcHJpdmF0ZS4iOiAi6K6p6L+Z5Liq5LuT5bqT6L2s5Li656eB5pyJ44CCIiwKICAgICAgICAgICAgIlRyYW5zZmVyIG93bmVyc2hpcCI6ICLovazorqnmiYDmnInmnYMiLAogICAgICAgICAgICAiVHJhbnNmZXIiOiAi6L2s6K6pIiwKICAgICAgICAgICAgIlRyYW5zZmVyIHRoaXMgcmVwb3NpdG9yeSB0byBhbm90aGVyIHVzZXIgb3IgdG8gYW4gb3JnYW5pemF0aW9uIHdoZXJlIHlvdSBoYXZlIGFkbWluIHJpZ2h0cy4iOiAi5q2k5a2Y5YKo5bqT6L2s56e75Yiw5YW25LuW55So5oi35oiW57uE57uH77yM5Zyo6L+Z6YeM5oKo5YW35pyJ566h55CG5ZGY5p2D6ZmQ44CCIiwKICAgICAgICAgICAgIkRlbGV0ZSB0aGlzIHJlcG9zaXRvcnkiOiAi5Yig6Zmk5q2k5LuT5bqTIiwKICAgICAgICAgICAgIk9uY2UgeW91IGRlbGV0ZSBhIHJlcG9zaXRvcnksIHRoZXJlIGlzIG5vIGdvaW5nIGJhY2suIFBsZWFzZSBiZSBjZXJ0YWluLiI6ICLkuIDml6bliKDpmaTmgqjnmoTku5PlupPvvIzlsIbml6Dms5Xmib7lm57jgILor7fmgqjkuInmgJ3jgIIiLAoKICAgICAgICAgICAgIkRlZmF1bHQgYnJhbmNoIjogIum7mOiupOWIhuaUryIsCiAgICAgICAgICAgICJUaGUgZGVmYXVsdCBicmFuY2ggaXMgY29uc2lkZXJlZCB0aGUg4oCcYmFzZeKAnSBicmFuY2ggaW4geW91ciByZXBvc2l0b3J5LCBhZ2FpbnN0IHdoaWNoIGFsbCBwdWxsIHJlcXVlc3RzIGFuZCBjb2RlIGNvbW1pdHMgYXJlIGF1dG9tYXRpY2FsbHkgbWFkZSwgdW5sZXNzIHlvdSBzcGVjaWZ5IGEgZGlmZmVyZW50IGJyYW5jaC4iOiAi6buY6K6k5YiG5pSv6KKr6K6k5Li65piv4oCc5Z+65Zyw4oCd5YiG5pSv5Zyo5oKo55qE6LWE5paZ5bqT77yM5a+55omA5pyJ5ouJ5Y+W6K+35rGC5ZKM5Luj56CB55qE5o+Q5Lqk5piv6Ieq5Yqo6L+b6KGM55qE77yM6Zmk6Z2e5oKo5oyH5a6a5LiA5Liq5LiN5ZCM55qE5YiG5pSv44CCIiwKICAgICAgICAgICAgIlVwZGF0ZSI6ICLmm7TmlrAiLAogICAgICAgICAgICAiU3dpdGNoIGRlZmF1bHQgYnJhbmNoIjogIumAieaLqem7mOiupOWIhuaUryIsCiAgICAgICAgICAgICJGaWx0ZXIgYnJhbmNoZXMiOiAi5pCc57Si5YiG5pSvIiwKICAgICAgICAgICAgIlByb3RlY3RlZCBicmFuY2hlcyI6ICLlj5fkv53miqTnmoTliIbmlK8iLAogICAgICAgICAgICAiUHJvdGVjdCBicmFuY2hlcyB0byBkaXNhYmxlIGZvcmNlIHB1c2hpbmcsIHByZXZlbnQgYnJhbmNoZXMgZnJvbSBiZWluZyBkZWxldGVkLCBhbmQgb3B0aW9uYWxseSByZXF1aXJlIHN0YXR1cyBjaGVja3MgYmVmb3JlIG1lcmdpbmcuIE5ldyB0byBwcm90ZWN0ZWQgYnJhbmNoZXM/IjogIuWPl+S/neaKpOWIhuaUr+emgeeUqOW8uuWItuaOqOmAge+8jOmBv+WFjeWIoOmZpOWIhuaUr+acuuaehO+8jOWQiOW5tuWPr+mAieimgeaxguWJjeeKtuaAgeajgOafpeOAguWIm+W7uuaWsOeahOWPl+S/neaKpOeahOWIhuaUr+acuuaehO+8nyIsCiAgICAgICAgICAgICJMZWFybiBtb3JlLiI6ICLmn6XnnIvmm7TlpJrkv6Hmga8iLAogICAgICAgICAgICAiTm8gcHJvdGVjdGVkIGJyYW5jaGVzIHlldC4iOiAi5pqC5peg5Y+X5L+d5oqk5YiG5pSvIiwKCiAgICAgICAgICAgICJBcmUgeW91IEFCU09MVVRFTFkgc3VyZT8iOiAi5oKo56Gu5a6a5LiA5a6a5Lul5Y+K6IKv5a6a77yfIiwKICAgICAgICAgICAgIlVuZXhwZWN0ZWQgYmFkIHRoaW5ncyB3aWxsIGhhcHBlbiBpZiB5b3UgZG9u4oCZdCByZWFkIHRoaXMhIjogIuivt+S7lOe7humYheivu+S7peS4i+aPkOekuuS/oeaBr++8ge+8ge+8gSIsCiAgICAgICAgICAgICJUaGlzIGFjdGlvbiI6ICLor6Xmk43kvZzmmK8iLAogICAgICAgICAgICAiQ0FOTk9UIjogIuS4jeWPr+mAhueahCIsCiAgICAgICAgICAgICJiZSB1bmRvbmUuIFRoaXMgd2lsbCBwZXJtYW5lbnRseSBkZWxldGUgdGhlIjogIu+8jOaCqOWwhuawuOS5heWIoOmZpCIsCiAgICAgICAgICAgICJyZXBvc2l0b3J5LCB3aWtpLCBpc3N1ZXMsIGFuZCBjb21tZW50cywgYW5kIHJlbW92ZSBhbGwgY29sbGFib3JhdG9yIGFzc29jaWF0aW9ucy4iOiAi5LuT5bqT77yMd2lrae+8jOmXrumimOWSjOaPkOS6pOWGheWuue+8jOW5tuS4lOenu+mZpOaJgOacieWQiOS9nOiAheOAgiIsCiAgICAgICAgICAgICJQbGVhc2UgdHlwZSBpbiB0aGUgbmFtZSBvZiB0aGUgcmVwb3NpdG9yeSB0byBjb25maXJtLiI6ICLor7fmgqjovpPlhaXor6Xku5PlupPlkI3ku6Xnoa7orqTliKDpmaTlroPjgIIiLAogICAgICAgICAgICAiSSB1bmRlcnN0YW5kIHRoZSBjb25zZXF1ZW5jZXMsIGRlbGV0ZSB0aGlzIHJlcG9zaXRvcnkiOiAi5oiR56Gu5a6a5LiA5a6a5Lul5Y+K6IKv5a6a5Yig6Zmk5a6DIiwKCiAgICAgICAgICAgIC8vIENvbXBhcmUgY2hhbmdlcyDpobXpnaIKICAgICAgICAgICAgIkNvbXBhcmUgY2hhbmdlcyI6ICLlj5jmm7Tmr5TovoMiLAogICAgICAgICAgICAiQ29tcGFyZSBjaGFuZ2VzIGFjcm9zcyBicmFuY2hlcywgY29tbWl0cywgdGFncywgYW5kIG1vcmUgYmVsb3cuIElmIHlvdSBuZWVkIHRvLCB5b3UgY2FuIGFsc28iOiAi5q+U6L6D6Leo5YiG5pSv77yM5o+Q5Lqk77yM5qCH562+77yM5ZKM5pu05aSa55qE5Y+Y5pu044CC5aaC5p6c5oKo6ZyA6KaB77yM5Lmf5Y+v5LulIiwKICAgICAgICAgICAgImNvbXBhcmUgYWNyb3NzIGZvcmtzIjogIuavlOi+g+a0vueUn+W6k+WSjOa6kOS7k+W6kyIsCiAgICAgICAgICAgICJiYXNlOiI6ICLln7rnoYDlupM6IiwKICAgICAgICAgICAgImNvbXBhcmU6IjogIuavlOi+g+W6kzoiLAogICAgICAgICAgICAiQ3JlYXRlIHB1bGwgcmVxdWVzdCI6ICLliJvlu7rmi4nlj5bor7fmsYIiLAogICAgICAgICAgICAiQ2hvb3NlIGRpZmZlcmVudCBicmFuY2hlcyBvciBmb3JrcyBhYm92ZSB0byBkaXNjdXNzIGFuZCByZXZpZXcgY2hhbmdlcy4iOiAi6YCJ5oup5LiN5ZCM55qE5YiG5pSv5oiW5rS+55Sf5p2l6K6o6K665ZKM5p+l55yL5Y+Y5YyW44CCIiwKICAgICAgICAgICAgIkNvbXBhcmUgYW5kIHJldmlldyBqdXN0IGFib3V0IGFueXRoaW5nIjogIuavlOi+g+WSjOWuoeafpeS7u+S9leaWh+S7tiIsCiAgICAgICAgICAgICJCcmFuY2hlcywgdGFncywgY29tbWl0IHJhbmdlcywgYW5kIHRpbWUgcmFuZ2VzLiBJbiB0aGUgc2FtZSByZXBvc2l0b3J5IGFuZCBhY3Jvc3MgZm9ya3MuIjogIuWIhuaUr++8jOagh+etvu+8jOaPkOS6pOiMg+WbtOWSjOaXtumXtOiMg+WbtOOAguWcqOWQjOS4gOS7k+W6k+WSjOa0vueUn+eahOS7k+W6k+OAgiIsCiAgICAgICAgICAgICJFeGFtcGxlIGNvbXBhcmlzb25zIjogIuavlOi+g+S+i+WtkCIsCgogICAgICAgICAgICAvLyDmlrDlu7rnqbrku5PlupMKICAgICAgICAgICAgIlF1aWNrIHNldHVwIjogIuW/q+mAn+WuieijhSIsCiAgICAgICAgICAgICLigJQgaWYgeW914oCZdmUgZG9uZSB0aGlzIGtpbmQgb2YgdGhpbmcgYmVmb3JlIjogIi0g5aaC5p6c5oKo5Lul5YmN5YGa6L+H6L+Z5qC355qE5LqLIiwKICAgICAgICAgICAgIlNldCB1cCBpbiBEZXNrdG9wIjogIuWuieijheWIsOahjOmdoiIsCiAgICAgICAgICAgICJXZSByZWNvbW1lbmQgZXZlcnkgcmVwb3NpdG9yeSBpbmNsdWRlIGEiOiAi5oiR5Lus5o6o6I2Q5q+P5Liq5LuT5bqT6YO95YyF5ousIiwKICAgICAgICAgICAgIiwgYW5kIjogIu+8jOWSjCIsCiAgICAgICAgICAgICLigKZvciBjcmVhdGUgYSBuZXcgcmVwb3NpdG9yeSBvbiB0aGUgY29tbWFuZCBsaW5lIjogIuKApuaIluWcqOWRveS7pOihjOS4iuWIm+W7uuS4gOS4quaWsOeahOS7k+W6kyIsCiAgICAgICAgICAgICLigKZvciBwdXNoIGFuIGV4aXN0aW5nIHJlcG9zaXRvcnkgZnJvbSB0aGUgY29tbWFuZCBsaW5lIjogIuKApuaIluS7juWRveS7pOihjOS4reaOqOmAgeeOsOacieeahOS7k+W6kyIsCiAgICAgICAgICAgICLigKZvciBpbXBvcnQgY29kZSBmcm9tIGFub3RoZXIgcmVwb3NpdG9yeSI6ICLigKbmiJbku47lj6bkuIDkuKrku5PlupPlupPlr7zlhaXku6PnoIEiLAogICAgICAgICAgICAiWW91IGNhbiBpbml0aWFsaXplIHRoaXMgcmVwb3NpdG9yeSB3aXRoIGNvZGUgZnJvbSBhIFN1YnZlcnNpb24sIE1lcmN1cmlhbCwgb3IgVEZTIHByb2plY3QuIjogIuaCqOWPr+S7peWIneWni+WMluatpOS7k+W6k+S7juS4gOS4qiBTdWJ2ZXJzaW9u77yMTWVyY3VyaWFsIOaIliBURlMg6aG555uu44CCIiwKICAgICAgICAgICAgIkltcG9ydCBjb2RlIjogIuWvvOWFpeS7o+eggSIsCgogICAgICAgICAgICAvLyBjb21taXRzIOmhtemdogogICAgICAgICAgICAiY29tbWl0dGVkIjogIuaPkOS6pOS6jiIsCiAgICAgICAgICAgICJNZXJnZSBwdWxsIHJlcXVlc3QiOiAi5ZCI5bm25ouJ5Y+W6K+35rGCIiwKICAgICAgICAgICAgIkNvbmZpcm0gbWVyZ2UiOiAi56Gu6K6k5ZCI5bm2IiwKICAgICAgICAgICAgIkNsb3NlIHB1bGwgcmVxdWVzdCI6ICLlhbPpl63mi4nlj5bor7fmsYIiLAoKICAgICAgICAgICAgIkNvcHkgdGhlIGZ1bGwgU0hBIjogIuWkjeWItuWujOaVtOeahCBTSEEiLAogICAgICAgICAgICAiQnJvd3NlIHRoZSByZXBvc2l0b3J5IGF0IHRoaXMgcG9pbnQgaW4gdGhlIGhpc3RvcnkiOiAi5rWP6KeI6K+l6Zi25q6155qE5Y6G5Y+y5LuT5bqT5YaF5a65IiwKCiAgICAgICAgICAgICJOZXdlciI6ICLmlrDnmoQiLAogICAgICAgICAgICAiT2xkZXIiOiAi5pen55qEIiwKCiAgICAgICAgICAgIC8vIGJyYW5jaGVzIOmhtemdogogICAgICAgICAgICAiT3ZlcnZpZXciOiAi5qaC6L+wIiwKICAgICAgICAgICAgIllvdXJzIjogIuaCqOeahCIsCiAgICAgICAgICAgICJBY3RpdmUiOiAi5rS76LeD55qEIiwKICAgICAgICAgICAgIlN0YWxlIjogIumZiOaXp+eahCIsCiAgICAgICAgICAgICJBbGwgYnJhbmNoZXMiOiAi5omA5pyJ5YiG5pSvIiwKICAgICAgICAgICAgIlNlYXJjaCBicmFuY2hlc+KApiI6ICLmkJzntKLliIbmlK/igKYiLAoKICAgICAgICAgICAgIllvdXIgYnJhbmNoZXMiOiAi5oKo55qE5YiG5pSvIiwKICAgICAgICAgICAgIllvdSBoYXZlbuKAmXQgcHVzaGVkIGFueSBicmFuY2hlcyB0byB0aGlzIHJlcG9zaXRvcnkuIjogIuaCqOayoeacieaOqOmAgeS7u+S9leWIhuaUr+WIsOivpeS7k+W6k+OAgiIsCiAgICAgICAgICAgICJBY3RpdmUgYnJhbmNoZXMiOiAi5rS76LeD55qE5YiG5pSvIiwKICAgICAgICAgICAgIlRoZXJlIGFyZW7igJl0IGFueSBhY3RpdmUgYnJhbmNoZXMuIjogIuayoeacieS7u+S9lea0u+i3g+eahOWIhuaUr+OAgiIsCiAgICAgICAgICAgICJTdGFsZSBicmFuY2hlcyI6ICLpmYjml6fnmoTliIbmlK8iLAogICAgICAgICAgICAiVGhlcmUgYXJlbuKAmXQgYW55IHN0YWxlIGJyYW5jaGVzLiI6ICLmsqHmnInku7vkvZXpmYjml6fnmoTliIbmlK/jgIIiLAogICAgICAgICAgICAiVmlldyBtb3JlIGFjdGl2ZSBicmFuY2hlcyI6ICLmn6XnnIvmm7TlpJrmtLvot4PnmoTliIbmlK8iLAogICAgICAgICAgICAiVmlldyBtb3JlIHN0YWxlIGJyYW5jaGVzIjogIuafpeeci+abtOWkmumZiOaXp+eahOWIhuaUryIsCiAgICAgICAgICAgICJDb21wYXJlIjogIuavlOi+gyIsCiAgICAgICAgICAgICJDaGFuZ2UgZGVmYXVsdCBicmFuY2giOiAi5pu05pS56buY6K6k5YiG5pSvIiwKCiAgICAgICAgICAgIC8vIFJlbGVhc2VzIOmhtemdogogICAgICAgICAgICAiUmVsZWFzZXMiOiAi5Y+R5biDIiwKICAgICAgICAgICAgIlByZS1yZWxlYXNlIjogIumihOWPkeW4gyIsCiAgICAgICAgICAgICJEb3dubG9hZHMiOiAi5LiL6L29IiwKICAgICAgICAgICAgIk5vdGVzIjogIuivtOaYjiIsCiAgICAgICAgICAgICJUaGVyZSBhcmVu4oCZdCBhbnkgcmVsZWFzZXMgaGVyZSI6ICLmsqHmnInku7vkvZXlj5HluIPlhoXlrrkiLAogICAgICAgICAgICAiQ3JlYXRlIGEgbmV3IHJlbGVhc2UiOiAi5Yib5bu65LiA5Liq5Y+R5biDIiwKICAgICAgICAgICAgIlJlbGVhc2VzIGFyZSBwb3dlcmVkIGJ5IjogIuWPkeW4g+aYr+mAmui/h+WcqOS7k+W6k+S4reagh+iusCIsCiAgICAgICAgICAgICJ0YWdnaW5nIHNwZWNpZmljIHBvaW50cyBvZiBoaXN0b3J5IjogIueJueWumuWOhuWPsueJiOacrCIsCiAgICAgICAgICAgICJpbiBhIHJlcG9zaXRvcnkuIFRoZXnigJlyZSBncmVhdCBmb3IgbWFya2luZyByZWxlYXNlIHBvaW50cyBsaWtlIjogIu+8jOeUqOS6juWPkeW4g+eahOeJiOacrOexu+S8vCIsCgogICAgICAgICAgICAiTGF0ZXN0IHJlbGVhc2UiOiAi5pyA5paw5Y+R5biDIiwKICAgICAgICAgICAgIlJlYWQgcmVsZWFzZSBub3RlcyI6ICLpmIXor7vlj5HluIPor7TmmI4iLAogICAgICAgICAgICAicmVsZWFzZWQgdGhpcyI6ICLlj5HluIPlroMiLAogICAgICAgICAgICAidGFnZ2VkIHRoaXMiOiAi5qCH5rOoIiwKCiAgICAgICAgICAgICJEcmFmdCBhIG5ldyByZWxlYXNlIjogIui1t+iNieaWsOeJiOacrOWPkeW4gyIsCiAgICAgICAgICAgICJBZGQgcmVsZWFzZSBub3RlcyI6ICLmt7vliqDlj5HluIPor7TmmI4iLAogICAgICAgICAgICAiRWRpdCByZWxlYXNlIG5vdGVzIjogIue8lui+keWPkeW4g+ivtOaYjiIsCiAgICAgICAgICAgICIoTm8gcmVsZWFzZSBub3RlcykiOiAiKOayoeacieWPkeW4g+ivtOaYjikiLAogICAgICAgICAgICAiUmVsZWFzZSBub3RlcyI6ICLlj5HluIPor7TmmI4iLAoKICAgICAgICAgICAgIkVkaXQgdGFnIjogIuS/ruaUueagh+etviIsCiAgICAgICAgICAgICJFZGl0IHJlbGVhc2UiOiAi5L+u5pS55Y+R5biDIiwKICAgICAgICAgICAgIkRlbGV0ZSI6ICLliKDpmaQiLAogICAgICAgICAgICAiQXJlIHlvdSBzdXJlPyI6ICLmgqjnoa7lrprkuIDlrprku6Xlj4rogq/lrprlkJfvvJ8iLAogICAgICAgICAgICAiVGhpcyB3aWxsIGRlbGV0ZSB0aGUgaW5mb3JtYXRpb24gZm9yIHRoaXMgdGFnLiI6ICLlsIbliKDpmaTor6XmoIfnrb7nmoTmiYDmnInkv6Hmga/jgIIiLAogICAgICAgICAgICAiRGVsZXRlIHRoaXMgdGFnIjogIuWIoOmZpOatpOagh+etviIsCiAgICAgICAgICAgICJZb3VyIHRhZyB3YXMgcmVtb3ZlZCI6ICLmoIfnrb7liKDpmaTmiJDlip/vvIEiLAoKICAgICAgICAgICAgIkV4aXN0aW5nIHRhZyI6ICLlt7LlrZjlnKjnmoTmoIfnrb4iLAogICAgICAgICAgICAiTWFya2Rvd24gc3VwcG9ydGVkIjogIk1hcmtkb3duIOivreazleaUr+aMgSIsCiAgICAgICAgICAgICJBdHRhY2ggYmluYXJpZXMgYnkgZHJvcHBpbmcgdGhlbSBoZXJlIG9yIjogIuaLluaLveaWh+S7tuWIsOi/meadpea3u+WKoOmZhOS7tiIsCiAgICAgICAgICAgICJUaGlzIGlzIGEgcHJlLXJlbGVhc2UiOiAi6L+Z5piv5LiA5Liq6aKE5Y+R5biD54mI5pysIiwKICAgICAgICAgICAgIldl4oCZbGwgcG9pbnQgb3V0IHRoYXQgdGhpcyByZWxlYXNlIGlzIGlkZW50aWZpZWQgYXMgbm9uLXByb2R1Y3Rpb24gcmVhZHkuIjogIuaIkeS7rOS8muaMh+WumuivpeeJiOacrOS4uuacquato+W8j+WPkeW4g+OAgiIsCiAgICAgICAgICAgICJVcGRhdGUgcmVsZWFzZSI6ICLmm7TmlrDlj5HluIMiLAogICAgICAgICAgICAiUHVibGlzaCByZWxlYXNlIjogIuWPkeW4g+eJiOacrCIsCiAgICAgICAgICAgICJTYXZlIGRyYWZ0IjogIuS/neWtmOiNieeovyIsCiAgICAgICAgICAgICJTYXZlZCEiOiAi5bey5L+d5a2YIiwKICAgICAgICAgICAgIlNhdmluZyBkcmFmdCBmYWlsZWQuIFRyeSBhZ2Fpbj8iOiAi5L+d5a2Y5aSx6LSl77yM5YaN6K+V5LiA5qyh77yfIiwKCiAgICAgICAgICAgIC8vIOWbvuihqOmhtemdogogICAgICAgICAgICAiQ29udHJpYnV0b3JzIjogIui0oeeMruiAhSIsCiAgICAgICAgICAgICJUcmFmZmljIjogIua1gemHjyIsCiAgICAgICAgICAgICJDb21taXRzIjogIuaPkOS6pCIsCiAgICAgICAgICAgICJDb2RlIGZyZXF1ZW5jeSI6ICLpopHnjociLAogICAgICAgICAgICAiUHVuY2ggY2FyZCI6ICLml7bliLsiLAogICAgICAgICAgICAiTmV0d29yayI6ICLnvZHnu5wiLAogICAgICAgICAgICAiTWVtYmVycyI6ICLmiJDlkZgiLAoKICAgICAgICAgICAgIkNvbnRyaWJ1dGlvbnMgdG8gbWFzdGVyLCBleGNsdWRpbmcgbWVyZ2UgY29tbWl0cyI6ICLlr7nkuLvliIbmlK/nmoTotKHnjK7vvIzkuI3ljIXmi6zlkIjlubbmj5DkuqQiLAogICAgICAgICAgICAiQ29udHJpYnV0aW9uczoiOiAi6LSh54yu6ICFOiIsCiAgICAgICAgICAgICJGaWx0ZXIgY29udHJpYnV0aW9ucyI6ICLnrZvpgInotKHnjK7ogIUiLAogICAgICAgICAgICAiQWRkaXRpb25zIjogIua3u+WKoOaVsOmHjyIsCiAgICAgICAgICAgICJEZWxldGlvbnMiOiAi5Yig6Zmk5pWw6YePIiwKCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EKICAgICAgICAgICAgWy9IVFRQU1xzKyhyZWNvbW1lbmRlZCkvLCAiSFRUUFMgKOaOqOiNkCkiXSwKICAgICAgICAgICAgWy9TYXZlICguKz8pIHRvIHlvdXIgY29tcHV0ZXIgYW5kIHVzZSBpdCBpbiBHaXRIdWIgRGVza3RvcC4vLCAi5L2/55SoIEdpdEh1YiDmoYzpnaLniYjvvIzkv53lrZggJDEg5Yiw5oKo55qE55S16ISR44CCIl0sCiAgICAgICAgICAgIFsvKFtcZCxdKykgT3Blbi8sICIkMSDkuKrlvIDmlL7nmoQiXSwKICAgICAgICAgICAgWy8oW1xkLF0rKSBDbG9zZWQvLCAiJDEg5Liq5YWz6Zet55qEIl0sCiAgICAgICAgICAgIFsvVmlldyBhbGwgaXNzdWVzIG9wZW5lZCBieSAoLispLywgIuafpeeci+aJgOaciSAkMSDnmoTpl67popgiXSwKICAgICAgICAgICAgWy9XZWxjb21lIHRvIHRoZSAoW14gXSspIHdpa2khLywgIuasoui/juiuv+mXriAkMSDnmoQgd2lraSJdLAogICAgICAgICAgICBbLyhbXGQsXSspIHBhcnRpY2lwYW50cz8vLCAiJDEg5Y+C5LiO6ICFIl0sCiAgICAgICAgICAgIFsvQ29tbWl0cyBvbiAoLispLywgIuaPkOS6pOS6jiAkMSJdLAogICAgICAgICAgICAvLyBidWcgWy9mcm9tICguKykvLCAi5LuOICQxIl0sCiAgICAgICAgICAgIFsvd2FudHMgdG8gbWVyZ2UgKFtcZCxdKykgY29tbWl0cz8gaW50by8sICLpnIDopoHlkIjlubYgJDEg5qyh5o+Q5Lqk5YiwIl0sCiAgICAgICAgICAgIFsvKFtcZCxdKykgY29tbWl0cz8vLCAiJDEg5qyh5o+Q5LqkIl0sCiAgICAgICAgICAgIFsvdG8gKFteXG5dKylbXG5cc10rc2luY2UgdGhpcyByZWxlYXNlLywgIuWIsCAkMSDliIbmlK/lnKjmraTlj5HluIPkuK3jgIIiXSwKICAgICAgICAgICAgWy/CtyAoW1xkLF0rKSBjb21tZW50cz8vLCAiJDEg5qyh5o+Q5LqkIl0KICAgICAgICBdLAogICAgfSwKCiAgICAiaG9tZXBhZ2UiOiB7IC8vIOacqueZu+W9lemmlumhtQogICAgICAgICJzdGF0aWMiOiB7IC8vIOmdmeaAgee/u+ivkQogICAgICAgICAgICAiUGljayBhIHVzZXJuYW1lIjogIumAieaLqeS4gOS4queUqOaIt+WQjSIsCiAgICAgICAgICAgICJZb3VyIGVtYWlsIGFkZHJlc3MiOiAi5oKo55qE6YKu5Lu25Zyw5Z2AIiwKICAgICAgICAgICAgIkNyZWF0ZSBhIHBhc3N3b3JkIjogIuWIm+W7uuS4gOS4quWvhueggSIsCiAgICAgICAgICAgICJTaWduIHVwIGZvciBHaXRIdWIiOiAi5rOo5YaMIEdpdEh1YiIsCgogICAgICAgICAgICAiVXNlIGF0IGxlYXN0IG9uZSBsZXR0ZXIsIG9uZSBudW1lcmFsLCBhbmQgc2V2ZW4gY2hhcmFjdGVycy4iOiAi5a+G56CB6ZyA6KaB5a2X5q+N5ZKM5pWw5a2X57uE5oiQ55qEIDcg5L2N5Lul5LiK5a2X56ym5Liy44CCIiwKICAgICAgICAgICAgIkJ5IGNsaWNraW5nIFwiU2lnbiB1cCBmb3IgR2l0SHViXCIsIHlvdSBhZ3JlZSB0byBvdXIiOiAi54K55Ye7IOKAnOazqOWGjCBHaXRIdWLigJ3vvIzooajnpLrmgqjlkIzmhI/miJHku6znmoQiLAogICAgICAgICAgICAidGVybXMgb2Ygc2VydmljZSI6ICLmnI3liqHmnaHmrL4iLAogICAgICAgICAgICAiYW5kIjogIuWSjCIsCiAgICAgICAgICAgICJwcml2YWN5IHBvbGljeSI6ICLpmpDnp4HmlL/nrZbmnaHmrL4iLAogICAgICAgICAgICAiV2UnbGwgb2NjYXNpb25hbGx5IHNlbmQgeW91IGFjY291bnQgcmVsYXRlZCBlbWFpbHMuIjogIuaIkeS7rOS8muWBtuWwlOWPkemAgeaCqOeahOW4kOaIt+ebuOWFs+eahOeUteWtkOmCruS7tuOAgiIsCgogICAgICAgICAgICAiSG93IHBlb3BsZSBidWlsZCBzb2Z0d2FyZSI6ICLkurrku6zlpoLkvZXmnoTlu7rova/ku7YiLAogICAgICAgICAgICAiTWlsbGlvbnMgb2YgZGV2ZWxvcGVycyB1c2UgR2l0SHViIHRvIGJ1aWxkIHBlcnNvbmFsIHByb2plY3RzLCBzdXBwb3J0IHRoZWlyIGJ1c2luZXNzZXMsIGFuZCB3b3JrIHRvZ2V0aGVyIG9uIG9wZW4gc291cmNlIHRlY2hub2xvZ2llcy4iOiAi5pWw5Lul55m+5LiH6K6h55qE5byA5Y+R5Lq65ZGY5L2/55SoIEdpdEh1YiDlu7rnq4vkuKrkurrpobnnm67vvIzmlK/mjIHku5bku6znmoTkvIHkuJrvvIzlhbHlkIzlnKjlvIDmlL7mupDnoIHmioDmnK/jgIIiLAoKICAgICAgICAgICAgIkludHJvZHVjaW5nIHVubGltaXRlZCI6ICLlvJXlhaXml6DpmZDliLbnmoQiLAogICAgICAgICAgICAicHJpdmF0ZSByZXBvc2l0b3JpZXMiOiAi56eB5Lq65LuT5bqTIiwKICAgICAgICAgICAgIkFsbCBvZiBvdXIgcGFpZCBwbGFucyBvbiBHaXRIdWIuY29tIG5vdyBpbmNsdWRlIHVubGltaXRlZCBwcml2YXRlIHJlcG9zaXRvcmllcy4iOiAi5omA5pyJ5Zyo5oiR5LusIEdpdEh1Yi5jb20g5LiK55qE5LuY6LS555So5oi377yM5oiR5Lus5bCG5o+Q5L6b5peg6ZmQ5Yi255qE56eB5Lq65LuT5bqT44CCIiwKICAgICAgICAgICAgIlNpZ24gdXAiOiAi5rOo5YaMIiwKICAgICAgICAgICAgInRvIGdldCBzdGFydGVkIG9yIjogIuW8gOWni+S9v+eUqOaIliIsCiAgICAgICAgICAgICJyZWFkIG1vcmUgYWJvdXQgdGhpcyBjaGFuZ2Ugb24gb3VyIGJsb2ciOiAi6ZiF6K+75pu05aSa5L+h5oGv5Zyo5oiR5Lus55qE5Y2a5a6i5LiKIiwKCiAgICAgICAgICAgICJXZWxjb21lIGhvbWUsIGRldmVsb3BlcnMiOiAi5qyi6L+O5Zue5p2l77yM5byA5Y+R6ICF5LusIiwKICAgICAgICAgICAgIkdpdEh1YiBmb3N0ZXJzIGEgZmFzdCwgZmxleGlibGUsIGFuZCBjb2xsYWJvcmF0aXZlIGRldmVsb3BtZW50IHByb2Nlc3MgdGhhdCBsZXRzIHlvdSB3b3JrIG9uIHlvdXIgb3duIG9yIHdpdGggb3RoZXJzLiI6ICJHaXRIdWIg5o+Q5L6b5LqG5LiA5Liq5b+r6YCf77yM54G15rS75ZKM5Y2P5L2c5byA5Y+R6L+H56iL77yM6K6p5oKo5a+56Ieq5bex5oiW5LiO5LuW5Lq65ZCI5L2c44CCIiwKCiAgICAgICAgICAgICJGb3IgZXZlcnl0aGluZyB5b3UgYnVpbGQiOiAi5Li65oKo5omT6YCgIiwKICAgICAgICAgICAgIkhvc3QgYW5kIG1hbmFnZSB5b3VyIGNvZGUgb24gR2l0SHViLiBZb3UgY2FuIGtlZXAgeW91ciB3b3JrIHByaXZhdGUgb3Igc2hhcmUgaXQgd2l0aCB0aGUgd29ybGQuIjogIuS4u+acuuWSjOeuoeeQhuaCqOeahOS7o+eggeWcqCBHaXRIdWIg5LiK44CC5oKo5Y+v5Lul5oqK5oKo55qE5bel5L2c5oiW56eB5Lq65LiO5LiW55WM5YiG5Lqr44CCIiwKICAgICAgICAgICAgIkEgYmV0dGVyIHdheSB0byB3b3JrIjogIuS4gOS4quabtOWlveeahOW3peS9nOaWueW8jyIsCiAgICAgICAgICAgICJGcm9tIGhvYmJ5aXN0cyB0byBwcm9mZXNzaW9uYWxzLCBHaXRIdWIgaGVscHMgZGV2ZWxvcGVycyBzaW1wbGlmeSB0aGUgd2F5IHRoZXkgYnVpbGQgc29mdHdhcmUuIjogIuS7juS4muS9meeIseWlveiAheWIsOS4k+S4muS6uuWjq++8jEdpdEh1YiDluK7liqnlvIDlj5HkurrlkZjnroDljJbnmoTmlrnlvI/mnoTlu7rova/ku7bjgIIiLAogICAgICAgICAgICAiTWlsbGlvbnMgb2YgcHJvamVjdHMiOiAi5pWw5Lul55m+5LiH6K6h55qE6aG555uuIiwKICAgICAgICAgICAgIkdpdEh1YiBpcyBob21lIHRvIG1pbGxpb25zIG9mIG9wZW4gc291cmNlIHByb2plY3RzLiBUcnkgb25lIG91dCBvciBnZXQgaW5zcGlyZWQgdG8gY3JlYXRlIHlvdXIgb3duLiI6ICJHaXRIdWIg5piv5pWw55m+5LiH5byA5rqQ6aG555uu55qE5a625Zut44CC5bCd6K+V5LiA5Liq5oiW6I635b6X54G15oSf5p2l5Yib6YCg5oKo6Ieq5bex55qE6aG555uu44CCIiwKICAgICAgICAgICAgIk9uZSBwbGF0Zm9ybSwgZnJvbSBzdGFydCB0byBmaW5pc2giOiAi5LiA5Liq5bmz5Y+w77yM5LuO5aeL6Iez57uIIiwKICAgICAgICAgICAgIldpdGggaHVuZHJlZHMgb2YgaW50ZWdyYXRpb25zLCBHaXRIdWIgaXMgZmxleGlibGUgZW5vdWdoIHRvIGJlIGF0IHRoZSBjZW50ZXIgb2YgeW91ciBkZXZlbG9wbWVudCBwcm9jZXNzLiI6ICLmiJDnmb7kuIrljYPnmoTpm4bmiJDvvIxHaXRIdWIg5piv6Laz5aSf54G15rS755qE77yM6IO95aSf5Zyo5oKo55qE5Y+R5bGV6L+H56iL55qE5Lit5b+D44CCIiwKCiAgICAgICAgICAgICJXaG8gdXNlcyBHaXRIdWI/IjogIuiwgeWcqOS9v+eUqCBHaXRIdWIgPyIsCiAgICAgICAgICAgICJJbmRpdmlkdWFscyI6ICLkuKrkuroiLAogICAgICAgICAgICAiVXNlIEdpdEh1YiB0byBjcmVhdGUgYSBwZXJzb25hbCBwcm9qZWN0LCB3aGV0aGVyIHlvdSB3YW50IHRvIGV4cGVyaW1lbnQgd2l0aCBhIG5ldyBwcm9ncmFtbWluZyBsYW5ndWFnZSBvciBob3N0IHlvdXIgbGlmZeKAmXMgd29yay4iOiAi5L2/55SoIEdpdEh1YiDmnaXliJvlu7rkuIDkuKrkuKrkurrpobnnm67vvIzkuI3nrqHmgqjmg7PopoHlsJ3or5XkuIDkuKrmlrDnmoTnvJbnqIvor63oqIDmiJbkuLvmnLrlnKjmgqjnlJ/mtLvlj4rlt6XkvZzjgIIiLAogICAgICAgICAgICAiQ29tbXVuaXRpZXMiOiAi56S+5Yy6IiwKICAgICAgICAgICAgIkdpdEh1YiBob3N0cyBvbmUgb2YgdGhlIGxhcmdlc3QgY29sbGVjdGlvbnMgb2Ygb3BlbiBzb3VyY2Ugc29mdHdhcmUuIENyZWF0ZSwgbWFuYWdlLCBhbmQgd29yayBvbiBzb21lIG9mIHRvZGF54oCZcyBtb3N0IGluZmx1ZW50aWFsIHRlY2hub2xvZ2llcy4iOiAiR2l0SHViIOS4u+acuuaYr+acgOWkp+eahOW8gOaUvua6kOeggei9r+S7tueahOmbhuWQiOS5i+S4gOOAguWIm+W7uu+8jOeuoeeQhu+8jOS7peWPiuWcqOS4gOS6m+W9k+S7iuacgOWFt+W9seWTjeWKm+eahOaKgOacr+W3peS9nOOAgiIsCiAgICAgICAgICAgICJCdXNpbmVzc2VzIjogIuS8geS4miIsCiAgICAgICAgICAgICJCdXNpbmVzc2VzIG9mIGFsbCBzaXplcyB1c2UgR2l0SHViIHRvIHN1cHBvcnQgdGhlaXIgZGV2ZWxvcG1lbnQgcHJvY2VzcyBhbmQgc2VjdXJlbHkgYnVpbGQgc29mdHdhcmUuIjogIuWQhOenjeinhOaooeeahOS8geS4muS9v+eUqOeahCBHaXRIdWIg5pSv5oyB5YW25Y+R5bGV6L+H56iL5Lit77yM5a6J5YWo5Zyw5p6E5bu66L2v5Lu244CCIiwKCiAgICAgICAgICAgICJHaXRIdWIgaXMgcHJvdWQgdG8gaG9zdCBwcm9qZWN0cyBhbmQgb3JnYW5pemF0aW9ucyBsaWtlIjogIkdpdEh1YiDmmK/oh6rosarlnLDkuL7lip7pobnnm67lkoznu4Tnu4fvvIzlpoIiLAogICAgICAgICAgICAiUHVibGljIHByb2plY3RzIGFyZSBhbHdheXMgZnJlZS4gV29yayB0b2dldGhlciBhY3Jvc3MgdW5saW1pdGVkIHByaXZhdGUgcmVwb3NpdG9yaWVzIGZvciAkNyAvIG1vbnRoLiI6ICLlhazlhbHpobnnm67mmK/lhY3otLnnmoTjgILnp4Hkurrpobnnm67pnIDopoHmlK/ku5ggNyDnvo7lhYPkuIDkuKrmnIjnmoTotLnnlKjjgIIiLAogICAgICAgIH0sCiAgICAgICAgInJlZ2V4cCI6IFsgLy8g5q2j5YiZ57+76K+RCiAgICAgICAgXSwKICAgIH0sCgogICAgInNlc3Npb24tYXV0aGVudGljYXRpb24iOiB7IC8vIOeZu+W9lemhtQogICAgICAgICJzdGF0aWMiOiB7IC8vIOmdmeaAgee/u+ivkQogICAgICAgICAgICAiU2lnbiBpbiB0byBHaXRIdWIiOiAi55m75b2VIEdpdEh1YiDluJDmiLciLAogICAgICAgICAgICAiVXNlcm5hbWUgb3IgZW1haWwgYWRkcmVzcyI6ICLnlKjmiLflkI0v6YKu566xIiwKICAgICAgICAgICAgIlBhc3N3b3JkIjogIuWvhueggSIsCiAgICAgICAgICAgICJGb3Jnb3QgcGFzc3dvcmQ/IjogIuW/mOiusOWvhueggSIsCiAgICAgICAgICAgICJTaWduIGluIjogIueZu+W9lSIsCiAgICAgICAgICAgICJOZXcgdG8gR2l0SHViPyI6ICLnrKzkuIDmrKHmnaUgR2l0SHViPyIsCiAgICAgICAgICAgICJDcmVhdGUgYW4gYWNjb3VudCI6ICLpgqPlsLHms6jlhozkuKrluJDmiLflkKciLAogICAgICAgIH0sCiAgICAgICAgInJlZ2V4cCI6IFsgLy8g5q2j5YiZ57+76K+RCiAgICAgICAgXSwKICAgIH0sCgogICAgInNpZ251cCI6IHsgLy8g5rOo5YaM6aG1CiAgICAgICAgInN0YXRpYyI6IHsgLy8g6Z2Z5oCB57+76K+RCiAgICAgICAgICAgICJKb2luIEdpdEh1YiI6ICLliqDlhaUgR2l0SHViIiwKICAgICAgICAgICAgIlRoZSBiZXN0IHdheSB0byBkZXNpZ24sIGJ1aWxkLCBhbmQgc2hpcCBzb2Z0d2FyZS4iOiAi5pyA5LyY55qE5pa55byP5p2l6K6+6K6h44CB5p6E5bu65ZKM5a2Y5YKo6L2v5Lu2IiwKCiAgICAgICAgICAgICJTdGVwIDE6IjogIuesrOS4gOatpToiLAogICAgICAgICAgICAiU2V0IHVwIGEgcGVyc29uYWwgYWNjb3VudCI6ICLlu7rnq4vkuKrkurrotKbmiLciLAogICAgICAgICAgICAiU3RlcCAyOiI6ICLnrKzkuozmraU6IiwKICAgICAgICAgICAgIkNob29zZSB5b3VyIHBsYW4iOiAi6YCJ5oup5oKo55qE5pa55qGIIiwKICAgICAgICAgICAgIlN0ZXAgMzoiOiAi56ys5LiJ5q2lOiIsCiAgICAgICAgICAgICJHbyB0byB5b3VyIGRhc2hib2FyZCI6ICLljrvliLDmgqjnmoTpppbpobUiLAoKICAgICAgICAgICAgLy8gU3RlcCAxOgogICAgICAgICAgICAiQ3JlYXRlIHlvdXIgcGVyc29uYWwgYWNjb3VudCI6ICLliJvlu7rmgqjnmoTkuKrkurrotKbmiLciLAogICAgICAgICAgICAiVXNlcm5hbWUiOiAi55So5oi35ZCNICjkuZ/mmK/mgqjkuKrkurrpppbpobXnmoTkuoznuqflnLDlnYApIiwKICAgICAgICAgICAgIlRoaXMgd2lsbCBiZSB5b3VyIHVzZXJuYW1lIOKAlCB5b3UgY2FuIGVudGVyIHlvdXIgb3JnYW5pemF0aW9u4oCZcyB1c2VybmFtZSBuZXh0LiI6ICLov5nlsIbmmK/mgqjnmoTnlKjmiLflkI0gLSDkuZ/lj6/ku6XmmK/mgqjnu4Tnu4fmiJblhazlj7jnmoTlkI3np7DjgIIiLAogICAgICAgICAgICAiRW1haWwgQWRkcmVzcyI6ICJFbWFpbCDlnLDlnYAiLAogICAgICAgICAgICAiWW91IHdpbGwgb2NjYXNpb25hbGx5IHJlY2VpdmUgYWNjb3VudCByZWxhdGVkIGVtYWlscy4gV2UgcHJvbWlzZSBub3QgdG8gc2hhcmUgeW91ciBlbWFpbCB3aXRoIGFueW9uZS4iOiAi6K+l6YKu566x55So5LqO5o6l5pS255u45YWz55qE6YCa55+l6YKu5Lu244CC5oiR5Lus5om/6K+65LiN5YWs5byA5oKo55qE55S15a2Q6YKu5Lu257uZ5Lu75L2V5Lq644CCIiwKICAgICAgICAgICAgIlBhc3N3b3JkIjogIuWvhueggSIsCiAgICAgICAgICAgICJVc2UgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXIsIG9uZSBudW1lcmFsLCBhbmQgc2V2ZW4gY2hhcmFjdGVycy4iOiAi5a+G56CB6ZyA6KaB5a2X5q+N5ZKM5pWw5a2X57uE5oiQ55qEIDcg5L2N5Lul5LiK5a2X56ym5Liy44CCIiwKICAgICAgICAgICAgIkJ5IGNsaWNraW5nIG9uIFwiQ3JlYXRlIGFuIGFjY291bnRcIiBiZWxvdywgeW91IGFyZSBhZ3JlZWluZyB0byB0aGUiOiAi54K55Ye75LiL6Z2i55qE4oCc5Yib5bu66LSm5oi34oCd77yM6KGo56S65oKo5ZCM5oSP5oiR5Lus55qEIiwKICAgICAgICAgICAgIlRlcm1zIG9mIFNlcnZpY2UiOiAi5pyN5Yqh5p2h5qy+IiwKICAgICAgICAgICAgImFuZCB0aGUiOiAi5ZKMIiwKICAgICAgICAgICAgIlByaXZhY3kgUG9saWN5IjogIumakOengeaUv+etliIsCiAgICAgICAgICAgICJDcmVhdGUgYW4gYWNjb3VudCI6ICLliJvlu7rotKbmiLciLAoKICAgICAgICAgICAgIllvdeKAmWxsIGxvdmUgR2l0SHViIjogIuaCqOWwhuS8mueIseS4iiBHaXRIdWIiLAogICAgICAgICAgICAiVW5saW1pdGVkIjogIuaXoOmZkOWkmueahCIsCiAgICAgICAgICAgICJjb2xsYWJvcmF0b3JzIjogIuWQiOS9nOiAhSIsCiAgICAgICAgICAgICJwdWJsaWMgcmVwb3NpdG9yaWVzIjogIuWFrOWFseS7k+W6kyIsCiAgICAgICAgICAgICJHcmVhdCBjb21tdW5pY2F0aW9uIjogIuiJr+WlveeahOayn+mAmiIsCiAgICAgICAgICAgICJGcmljdGlvbi1sZXNzIGRldmVsb3BtZW50IjogIuaXoOaRqeaTpuW8gOWPkSIsCiAgICAgICAgICAgICJPcGVuIHNvdXJjZSBjb21tdW5pdHkiOiAi5byA5rqQ56S+5Yy6IiwKCiAgICAgICAgICAgIC8vIFN0ZXAgMjoKICAgICAgICAgICAgIldlbGNvbWUgdG8gR2l0SHViIjogIuasoui/juadpeWIsCBHaXRIdWIiLAogICAgICAgICAgICAiWW914oCZdmUgdGFrZW4geW91ciBmaXJzdCBzdGVwIGludG8gYSBsYXJnZXIgd29ybGQsIjogIuaCqOW3sue7j+i/iOWHuuS6huesrOS4gOatpei/m+WFpeWIsOabtOWkp+eahOS4lueVjO+8jCIsCiAgICAgICAgICAgICJDaG9vc2UgeW91ciBwZXJzb25hbCBwbGFuIjogIumAieaLqeaCqOeahOS4quS6uuaWueahiCIsCiAgICAgICAgICAgICJVbmxpbWl0ZWQgcHVibGljIHJlcG9zaXRvcmllcyBmb3IgZnJlZS4iOiAi5peg6ZmQ55qE5YWs5YWx5LuT5bqT5YWN6LS55L2/55SoIiwKICAgICAgICAgICAgIlVubGltaXRlZCBwcml2YXRlIHJlcG9zaXRvcmllcyI6ICLml6DpmZDnmoTnp4Hkurrku5PlupMiLAogICAgICAgICAgICAiZm9yIjogIumcgCIsCiAgICAgICAgICAgICIkNy9tb250aC4iOiAiJDcv5pyIIiwKICAgICAgICAgICAgIsKlNDYuMDYvbW9udGguIjogIsKlNDYuMDYv5pyILiIsCiAgICAgICAgICAgICIodmlldyBpbiBDTlkpIjogIijmmL7npLrkurrmsJHluIHku7fmoLwpIiwKICAgICAgICAgICAgIih2aWV3IGluIFVTRCkiOiAiKOaYvuekuue+juWFg+S7t+agvCkiLAogICAgICAgICAgICAiRG9u4oCZdCB3b3JyeSwgeW91IGNhbiBjYW5jZWwgb3IgdXBncmFkZSBhdCBhbnkgdGltZS4iOiAi5Yir5ouF5b+D77yM5L2g5Y+v5Lul6ZqP5pe25Y2H57qn5oiW5Y+W5raI6L+Z5Liq5pa55qGI44CCIiwKICAgICAgICAgICAgIkNoYXJnZXMgdG8geW91ciBhY2NvdW50IHdpbGwgYmUgbWFkZSBpbiAiOiAi5rGH546H6Zeu6aKY6K+05piO77yM5LiN57+76K+R5LqGLi4uIiwKICAgICAgICAgICAgIlNlY3VyZSI6ICLlronlhagiLAogICAgICAgICAgICAiRW50ZXIgeW91ciBiaWxsaW5nIGRldGFpbHMiOiAi6L6T5YWl5oKo55qE5biQ5Y2V5piO57uGIiwKICAgICAgICAgICAgIlBheSB3aXRoIjogIuaUr+S7mOaWueW8jyIsCiAgICAgICAgICAgICJDcmVkaXQgY2FyZCI6ICLkv6HnlKjljaEiLAogICAgICAgICAgICAiUGF5UGFsIGFjY291bnQiOiAiUGF5UGFsIOi0puaItyIsCiAgICAgICAgICAgICJDcmVkaXQgY2FyZCBudW1iZXIiOiAi5L+h55So5Y2h5Y+3IiwKICAgICAgICAgICAgIkFjY2VwdGVkIGNhcmRzIjogIuaUr+aMgeeahOWNoSIsCiAgICAgICAgICAgICJIZWxwIG1lIHNldCB1cCBhbiBvcmdhbml6YXRpb24gbmV4dCI6ICLluK7miJHlu7rnq4vkuIDkuKrnu4Tnu4ciLAogICAgICAgICAgICAiT3JnYW5pemF0aW9ucyBhcmUgc2VwYXJhdGUgZnJvbSBwZXJzb25hbCBhY2NvdW50cyBhbmQgYXJlIGJlc3Qgc3VpdGVkIGZvciBidXNpbmVzc2VzIHdobyBuZWVkIHRvIG1hbmFnZSBwZXJtaXNzaW9ucyBmb3IgbWFueSBlbXBsb3llZXMuIjogIue7hOe7h+aYr+eLrOeri+S6juS4quS6uui0puaIt++8jOaYr+acgOmAguWQiOmcgOimgeeuoeeQhuadg+mZkOWvueiuuOWkmuWRmOW3peeahOS8geS4muOAgiIsCiAgICAgICAgICAgICJMZWFybiBtb3JlIGFib3V0IG9yZ2FuaXphdGlvbnMuIjogIumYheivu+abtOWkmuWFs+S6jue7hOe7h+eahOS/oeaBr+OAgiIsCiAgICAgICAgICAgICJGaW5pc2ggc2lnbiB1cCI6ICLlrozmiJDms6jlhowiLAoKICAgICAgICAgICAgIkJvdGggcGxhbnMgaW5jbHVkZToiOiAi6L+Z5Lik56eN5pa55qGI5YyF5ous77yaIiwKICAgICAgICAgICAgIkNvbGxhYm9yYXRpdmUgY29kZSByZXZpZXciOiAi5Y2P5L2c5Luj56CB5a6h5p+lIiwKICAgICAgICAgICAgIklzc3VlIHRyYWNraW5nIjogIumXrumimOi3n+i4qiIsCiAgICAgICAgICAgICJVbmxpbWl0ZWQgcHVibGljIHJlcG9zaXRvcmllcyI6ICLml6DpmZDliLbnmoTlhazlhbHku5PlupMiLAogICAgICAgICAgICAiSm9pbiBhbnkgb3JnYW5pemF0aW9uIjogIuWKoOWFpeS7u+S9lee7hOe7hyIsCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EKICAgICAgICBdLAogICAgfSwKCiAgICAibm90aWZpY2F0aW9ucyI6IHsgLy8g6YCa55+l6aG16Z2iCiAgICAgICAgInN0YXRpYyI6IHsgLy8g6Z2Z5oCB57+76K+RCiAgICAgICAgICAgICJNYXJrIGFsbCBhcyByZWFkIjogIuWFqOmDqOagh+S4uuW3suivuyIsCiAgICAgICAgICAgICJBcmUgeW91IHN1cmU/IjogIuaCqOehruWumuWQl++8nyIsCiAgICAgICAgICAgICJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbWFyayBhbGwgdW5yZWFkIG5vdGlmaWNhdGlvbnMgYXMgcmVhZD8iOiAi5L2g56Gu5a6a6KaB5bCG5omA5pyJ55qE5pyq6K+76YCa55+l5qCH6K6w5Li65bey6K+777yfIiwKICAgICAgICAgICAgIk1hcmsgYWxsIG5vdGlmaWNhdGlvbnMgYXMgcmVhZCI6ICLlhajpg6jmoIfkuLrlt7Lor7siLAoKICAgICAgICAgICAgIk5vdGlmaWNhdGlvbnMiOiAi6YCa55+lIiwKICAgICAgICAgICAgIldhdGNoaW5nIjogIuWFs+azqOeahOS7k+W6kyIsCiAgICAgICAgICAgICJVbnJlYWQiOiAi5pyq6K+7IiwKICAgICAgICAgICAgIlBhcnRpY2lwYXRpbmciOiAi5Y+C5LiO6K+d6aKYIiwKICAgICAgICAgICAgIkFsbCBub3RpZmljYXRpb25zIjogIuaJgOaciemAmuefpSIsCgogICAgICAgICAgICAiTm8gbmV3IG5vdGlmaWNhdGlvbnMuIjogIuayoeacieaWsOeahOmAmuefpeOAgiIsCiAgICAgICAgICAgICJEZXBlbmRpbmcgb24iOiAi5qC55o2uIiwKICAgICAgICAgICAgInlvdXIgbm90aWZpY2F0aW9uIHNldHRpbmdzIjogIuaCqOeahOmAmuefpeiuvue9riIsCiAgICAgICAgICAgICIsIHlvdeKAmWxsIHNlZSB1cGRhdGVzIGhlcmUgZm9yIHlvdXIgY29udmVyc2F0aW9ucyBpbiB3YXRjaGVkIHJlcG9zaXRvcmllcy4iOiAi77yM5oKo5bCG55yL5Yiw5oKo5YWz5rOo5LuT5bqT55qE5pu05paw5L+h5oGv44CCIiwKICAgICAgICB9LAogICAgICAgICJyZWdleHAiOiBbIC8vIOato+WImee/u+ivkQogICAgICAgIF0sCiAgICB9LAoKICAgICJ3YXRjaGluZyI6IHsgLy8g5YWz5rOo55qE5LuT5bqT6aG16Z2iCiAgICAgICAgInN0YXRpYyI6IHsgLy8g6Z2Z5oCB57+76K+RCiAgICAgICAgICAgICJOb3RpZmljYXRpb25zIjogIumAmuefpSIsCiAgICAgICAgICAgICJXYXRjaGluZyI6ICLlhbPms6jnmoTku5PlupMiLAoKICAgICAgICAgICAgIldhdGNoZWQgcmVwb3NpdG9yaWVzIjogIuWFs+azqOeahOS7k+W6kyIsCiAgICAgICAgICAgICJTb3J0ZWQgYnkgbW9zdCByZWNlbnRseSB3YXRjaGVkLiI6ICLmjInmnIDov5HlhbPms6jmjpLluo8iLAogICAgICAgICAgICAiVW53YXRjaCBhbGwiOiAi5Y+W5raI5omA5pyJ5YWz5rOoIiwKICAgICAgICAgICAgIk5vdGlmaWNhdGlvbiBzZXR0aW5ncyI6ICLpgJrnn6Xorr7nva4iLAogICAgICAgICAgICAiWW91IGNhbiBjaGFuZ2UgaG93IHlvdSByZWNlaXZlIG5vdGlmaWNhdGlvbnMgZnJvbSB5b3VyIGFjY291bnQgc2V0dGluZ3MuIjogIuaCqOWPr+S7peS/ruaUueaOpeaUtumAmuefpeeahOaWueW8j+OAgiIsCiAgICAgICAgICAgICJDaGFuZ2Ugbm90aWZpY2F0aW9uIHNldHRpbmdzIjogIuS/ruaUuemAmuefpeiuvue9riIsCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EKICAgICAgICBdLAogICAgfSwKCiAgICAic3RhcnMiOiB7IC8vIOeCuei1numhtemdogogICAgICAgICJzdGF0aWMiOiB7IC8vIOmdmeaAgee/u+ivkQogICAgICAgICAgICAiQWxsIHN0YXJzIjogIuaJgOacieS7k+W6kyIsCiAgICAgICAgICAgICJZb3VyIHJlcG9zaXRvcmllcyI6ICLmgqjnmoTku5PlupMiLAogICAgICAgICAgICAiT3RoZXJzJyByZXBvc2l0b3JpZXMiOiAi5YW25LuW5LuT5bqTIiwKCiAgICAgICAgICAgICJGaWx0ZXIgYnkgbGFuZ3VhZ2VzIjogIuetm+mAieivreiogCIsCiAgICAgICAgICAgICJKdW1wIHRvIGEgZnJpZW5kIjogIuWOu+WlveWfuuWPi+mCoyIsCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EKICAgICAgICBdLAogICAgfSwKCiAgICAidHJlbmRpbmciOiB7IC8vIOi2i+WKv+mhtemdogogICAgICAgICJzdGF0aWMiOiB7IC8vIOmdmeaAgee/u+ivkQogICAgICAgICAgICAiVHJlbmRpbmcgaW4gb3BlbiBzb3VyY2UiOiAi5byA5rqQ6LaL5Yq/IiwKICAgICAgICAgICAgIlNlZSB3aGF0IHRoZSBHaXRIdWIgY29tbXVuaXR5IGlzIG1vc3QgZXhjaXRlZCBhYm91dCB0b2RheS4iOiAi55yL55yLIEdpdEh1YiDnpL7ljLrku4rlpKnmnIDlj5flhbPms6jnmoTpobnnm67jgIIiLAogICAgICAgICAgICAiU2VlIHdoYXQgdGhlIEdpdEh1YiBjb21tdW5pdHkgaXMgbW9zdCBleGNpdGVkIGFib3V0IHRoaXMgd2Vlay4iOiAi55yL55yLIEdpdEh1YiDnpL7ljLrmnKzlkajmnIDlj5flhbPms6jnmoTpobnnm67jgIIiLAogICAgICAgICAgICAiU2VlIHdoYXQgdGhlIEdpdEh1YiBjb21tdW5pdHkgaXMgbW9zdCBleGNpdGVkIGFib3V0IHRoaXMgbW9udGguIjogIueci+eciyBHaXRIdWIg56S+5Yy65pys5pyI5pyA5Y+X5YWz5rOo55qE6aG555uu44CCIiwKCiAgICAgICAgICAgICJUcmVuZGluZyBkZXZlbG9wZXJzIjogIuW8gOWPkeiAhei2i+WKvyIsCiAgICAgICAgICAgICJUaGVzZSBhcmUgdGhlIG9yZ2FuaXphdGlvbnMgYW5kIGRldmVsb3BlcnMgYnVpbGRpbmcgdGhlIGhvdCB0b29scyB0b2RheS4iOiAi6L+Z5piv5LuK5aSp5Yib5bu654Ot6Zeo6aG555uu55qE57uE57uH5ZKM5byA5Y+R5Lq65ZGY44CCIiwKICAgICAgICAgICAgIlRoZXNlIGFyZSB0aGUgb3JnYW5pemF0aW9ucyBhbmQgZGV2ZWxvcGVycyBidWlsZGluZyB0aGUgaG90IHRvb2xzIHRoaXMgd2Vlay4iOiAi6L+Z5piv5pys5ZGo5Yib5bu654Ot6Zeo6aG555uu55qE57uE57uH5ZKM5byA5Y+R5Lq65ZGY44CCIiwKICAgICAgICAgICAgIlRoZXNlIGFyZSB0aGUgb3JnYW5pemF0aW9ucyBhbmQgZGV2ZWxvcGVycyBidWlsZGluZyB0aGUgaG90IHRvb2xzIHRoaXMgbW9udGguIjogIui/meaYr+acrOaciOWIm+W7uueDremXqOmhueebrueahOe7hOe7h+WSjOW8gOWPkeS6uuWRmOOAgiIsCgogICAgICAgICAgICAiUmVwb3NpdG9yaWVzIjogIuS7k+W6kyIsCiAgICAgICAgICAgICJEZXZlbG9wZXJzIjogIuW8gOWPkeiAhSIsCgogICAgICAgICAgICAiVHJlbmRpbmc6IjogIui2i+WKvzoiLAogICAgICAgICAgICAiQWRqdXN0IHRpbWUgc3BhbiI6ICLosIPmlbTnmoTml7bpl7Tot6jluqYiLAogICAgICAgICAgICAidG9kYXkiOiAi5LuK5aSpIiwKICAgICAgICAgICAgInRoaXMgd2VlayI6ICLmnKzlkagiLAogICAgICAgICAgICAidGhpcyBtb250aCI6ICLmnKzmnIgiLAoKICAgICAgICAgICAgIkFsbCBsYW5ndWFnZXMiOiAi5omA5pyJ6K+t6KiAIiwKICAgICAgICAgICAgIlVua25vd24gbGFuZ3VhZ2VzIjogIuacquefpeivreiogCIsCgogICAgICAgICAgICAiT3RoZXI6IjogIuWFtuS7ljoiLAogICAgICAgICAgICAiTGFuZ3VhZ2VzIjogIuivreiogCIsCiAgICAgICAgICAgICJPdGhlciBMYW5ndWFnZXMiOiAi5YW25LuW6K+t6KiAIiwKICAgICAgICAgICAgIkZpbHRlciBMYW5ndWFnZXMiOiAi562b6YCJ6K+t6KiAIiwKICAgICAgICB9LAogICAgICAgICJyZWdleHAiOiBbIC8vIOato+WImee/u+ivkQogICAgICAgICAgICBbLyhbXGQsXSspIHN0YXJzIHRvZGF5KFteQl0rKVtcdyBdKy8sICLku4rlpKkgJDEg6LWeJDLliJvlu7rogIUiXSwKICAgICAgICAgICAgWy8oW1xkLF0rKSBzdGFycyB0aGlzIHdlZWsoW15CXSspW1x3IF0rLywgIuacrOWRqCAkMSDotZ4kMuWIm+W7uuiAhSJdLAogICAgICAgICAgICBbLyhbXGQsXSspIHN0YXJzIHRoaXMgbW9udGgoW15CXSspW1x3IF0rLywgIuacrOaciCAkMSDotZ4kMuWIm+W7uuiAhSJdLAogICAgICAgIF0sCiAgICB9LAoKICAgICJzaG93Y2FzZXMiOiB7IC8vIOWxleekuumhtemdogogICAgICAgICJzdGF0aWMiOiB7IC8vIOmdmeaAgee/u+ivkQogICAgICAgICAgICAiT3BlbiBzb3VyY2Ugc2hvd2Nhc2VzIjogIuW8gOa6kOWxleekuiIsCiAgICAgICAgICAgICJCcm93c2UgcG9wdWxhciByZXBvc2l0b3JpZXMgYmFzZWQgb24gdGhlIHRvcGljIHRoYXQgaW50ZXJlc3RzIHlvdSBtb3N0LiI6ICLmtY/op4jng63pl6jku5PlupPln7rkuo7kvaDmnIDmhJ/lhbTotqPnmoTor53popjjgIIiLAogICAgICAgICAgICAiU2VhcmNoIHNob3djYXNlcyI6ICLmkJzntKLlsZXnpLoiLAogICAgICAgIH0sCiAgICB9LAoKCiAgICAiaXNzdWVzIjogeyAvLyDpl67popjpobXpnaIKICAgICAgICAic3RhdGljIjogeyAvLyDpnZnmgIHnv7vor5EKICAgICAgICAgICAgIkNyZWF0ZWQiOiAi5bey5Yib5bu6IiwKICAgICAgICAgICAgIkFzc2lnbmVkIjogIuW3suWIhumFjSIsCiAgICAgICAgICAgICJNZW50aW9uZWQiOiAi5o+Q5Yiw55qEIiwKCiAgICAgICAgICAgICJWaXNpYmlsaXR5IjogIuWPr+ingeaApyIsCiAgICAgICAgICAgICJSZXBvc2l0b3J5IHZpc2liaWxpdHkiOiAi5LuT5bqT5Y+v6KeB5oCnIiwKICAgICAgICAgICAgIlByaXZhdGUgcmVwb3NpdG9yaWVzIG9ubHkiOiAi5Y+q5pyJ56eB5pyJ5LuT5bqTIiwKICAgICAgICAgICAgIlB1YmxpYyByZXBvc2l0b3JpZXMgb25seSI6ICLlj6rmnInlhazlhbHlupMiLAoKICAgICAgICAgICAgIk9yZ2FuaXphdGlvbiI6ICLnu4Tnu4ciLAogICAgICAgICAgICAiRmlsdGVyIGJ5IG9yZ2FuaXphdGlvbiBvciBvd25lciI6ICLpgJrov4fnu4Tnu4fmiJbmiYDmnInogIXnrZvpgIkiLAogICAgICAgICAgICAiRmlsdGVyIG9yZ2FuaXphdGlvbnMiOiAi562b6YCJ57uE57uHIiwKCiAgICAgICAgICAgICJTb3J0IjogIuaOkuW6jyIsCiAgICAgICAgICAgICJTb3J0IGJ5IjogIuaOkuW6j+aWueW8jyIsCiAgICAgICAgICAgICJOZXdlc3QiOiAi5pyA5paw55qEIiwKICAgICAgICAgICAgIk9sZGVzdCI6ICLmnIDogIHnmoQiLAogICAgICAgICAgICAiTW9zdCBjb21tZW50ZWQiOiAi5pyA5aSa6K+E6K66IiwKICAgICAgICAgICAgIkxlYXN0IGNvbW1lbnRlZCI6ICLmnIDlsJHor4TorroiLAogICAgICAgICAgICAiUmVjZW50bHkgdXBkYXRlZCI6ICLmnIDov5Hmm7TmlrAiLAogICAgICAgICAgICAiTGVhc3QgcmVjZW50bHkgdXBkYXRlZCI6ICLmnIDml6nmm7TmlrAiLAogICAgICAgICAgICAiTW9zdCByZWFjdGlvbnMiOiAi5pyA5aSa5Zue5bqUIiwKCiAgICAgICAgICAgICJObyByZXN1bHRzIG1hdGNoZWQgeW91ciBzZWFyY2guIjogIuayoeacieespuWQiOaCqOeahOaQnOe0oue7k+aenOOAgiIsCiAgICAgICAgICAgICJVc2UgdGhlIGxpbmtzIGFib3ZlIHRvIGZpbmQgd2hhdCB5b3XigJlyZSBsb29raW5nIGZvciwgb3IgdHJ5IjogIuS9v+eUqOS4iumdoueahOmTvuaOpeaJvuWIsOaCqOimgeaJvueahOWGheWuue+8jOaIluWwneivlSIsCiAgICAgICAgICAgICJhIG5ldyBzZWFyY2ggcXVlcnkiOiAi5paw55qE5pCc57Si5p+l6K+iIiwKICAgICAgICAgICAgIi4gVGhlIEZpbHRlcnMgbWVudSBpcyBhbHNvIHN1cGVyIGhlbHBmdWwgZm9yIHF1aWNrbHkgZmluZGluZyBpc3N1ZXMgbW9zdCByZWxldmFudCB0byB5b3UuIjogIuOAgui/h+a7pOiPnOWNleS5n+aYr+W/q+mAn+aJvuWIsOmXrumimOacgOebuOWFs+eahOaCqOi2hee6p+acieW4ruWKqeeahOOAgiIsCiAgICAgICAgICAgICJQcm9UaXAhIjogIuS4k+S4muaPkOekuu+8gSIsCiAgICAgICAgICAgICJVcGRhdGVkIGluIHRoZSBsYXN0IHRocmVlIGRheXMiOiAi5pu05paw5LqG5pyA5ZCO5LiJ5aSp77yaIiwKICAgICAgICB9LAogICAgICAgICJyZWdleHAiOiBbIC8vIOato+WImee/u+ivkQogICAgICAgICAgICBbLyhcZCspIE9wZW4vLCAiJDEg5pyq5aSE55CGIl0sCiAgICAgICAgICAgIFsvKFxkKykgQ2xvc2VkLywgIiQxIOW3suWkhOeQhiJdLAogICAgICAgIF0sCiAgICB9LAoKCiAgICAic2VhcmNoIjogeyAvLyDmkJzntKLpobXpnaIKICAgICAgICAic3RhdGljIjogeyAvLyDpnZnmgIHnv7vor5EKICAgICAgICAgICAgIlNlYXJjaCBtb3JlIHRoYW4iOiAi6L+Z6YeM5pyJ6LaF6L+HIiwKICAgICAgICAgICAgInJlcG9zaXRvcmllcyI6ICLnmoTku5PlupPkvpvmgqjmkJzntKIiLAoKICAgICAgICAgICAgIlJlcG9zaXRvcmllcyI6ICLku5PlupMiLAogICAgICAgICAgICAiQ29kZSI6ICLku6PnoIEiLAogICAgICAgICAgICAiVXNlcnMiOiAi55So5oi3IiwKCiAgICAgICAgICAgICJMYW5ndWFnZXMiOiAi6K+t6KiAIiwKCiAgICAgICAgICAgICJBZHZhbmNlZCBzZWFyY2giOiAi6auY57qn5pCc57SiIiwKICAgICAgICAgICAgIkNoZWF0IHNoZWV0IjogIuaQnOe0ouaKgOW3pyIsCiAgICAgICAgICAgICJZb3UgY291bGQgdHJ5IGFuIjogIuaCqOWPr+S7peivleS4gOivlSIsCiAgICAgICAgICAgICJhZHZhbmNlZCBzZWFyY2giOiAi6auY57qn5pCc57SiIiwKCiAgICAgICAgICAgICJTb3J0OiI6ICLmjpLluo86IiwKICAgICAgICAgICAgIlNvcnQgb3B0aW9ucyI6ICLmjpLluo/pgInpobkiLAogICAgICAgICAgICAiQmVzdCBtYXRjaCI6ICLmnIDkvbPljLnphY0iLAogICAgICAgICAgICAiTW9zdCBzdGFycyI6ICLmnIDlpJrotZ4iLAogICAgICAgICAgICAiRmV3ZXN0IHN0YXJzIjogIuacgOWwkei1niIsCiAgICAgICAgICAgICJNb3N0IGZvcmtzIjogIuacgOWkmua0vueUnyIsCiAgICAgICAgICAgICJGZXdlc3QgZm9ya3MiOiAi5pyA5bCR5rS+55SfIiwKICAgICAgICAgICAgIlJlY2VudGx5IHVwZGF0ZWQiOiAi5pyA6L+R5pu05pawIiwKICAgICAgICAgICAgIkxlYXN0IHJlY2VudGx5IHVwZGF0ZWQiOiAi5pyA5pep5pu05pawIiwKCiAgICAgICAgICAgIC8vIOmrmOe6p+aQnOe0ogogICAgICAgICAgICAiQWR2YW5jZWQgb3B0aW9ucyI6ICLpq5jnuqfpgInpobkiLAogICAgICAgICAgICAiRnJvbSB0aGVzZSBvd25lcnMiOiAi5oyH5a6a5L2c6ICFIiwKICAgICAgICAgICAgIkluIHRoZXNlIHJlcG9zaXRvcmllcyI6ICLmjIflrprku5PlupMiLAogICAgICAgICAgICAiQ3JlYXRlZCBvbiB0aGUgZGF0ZXMiOiAi5Yib5bu65pel5pyfIiwKICAgICAgICAgICAgIldyaXR0ZW4gaW4gdGhpcyBsYW5ndWFnZSI6ICLkvb/nlKjor63oqIAiLAogICAgICAgICAgICAiQW55IExhbmd1YWdlIjogIuS7u+S9leivreiogCIsCiAgICAgICAgICAgICJQb3B1bGFyIjogIua1geihjOeahCIsCiAgICAgICAgICAgICJFdmVyeXRoaW5nIGVsc2UiOiAi5YW25LuW6K+t6KiAIiwKCiAgICAgICAgICAgICJSZXBvc2l0b3JpZXMgb3B0aW9ucyI6ICLku5PlupPpgInpobkiLAogICAgICAgICAgICAiV2l0aCB0aGlzIG1hbnkgc3RhcnMiOiAi5oyH5a6a6KKr6LWe5pWwIiwKICAgICAgICAgICAgIldpdGggdGhpcyBtYW55IGZvcmtzIjogIuaMh+Wumua0vueUn+aVsCIsCiAgICAgICAgICAgICJPZiB0aGlzIHNpemUiOiAi5LuT5bqT5aSn5bCPIiwKICAgICAgICAgICAgIlB1c2hlZCB0byI6ICLmjqjpgIHkuo4iLAogICAgICAgICAgICAiUmV0dXJuIHJlcG9zaXRvcmllcyI6ICLmkJzntKLnu5PmnpwiLAogICAgICAgICAgICAibm90IjogIuS4jSIsCiAgICAgICAgICAgICJhbmQiOiAi6KaBIiwKICAgICAgICAgICAgIm9ubHkiOiAi5Y+qIiwKICAgICAgICAgICAgImluY2x1ZGluZyBmb3Jrcy4iOiAi5YyF5ous6KKr5rS+55Sf55qE5LuT5bqT44CCIiwKCiAgICAgICAgICAgICJDb2RlIG9wdGlvbnMiOiAi5Luj56CB6YCJ6aG5IiwKICAgICAgICAgICAgIldpdGggdGhpcyBleHRlbnNpb24iOiAi5paH5Lu25ZCO57yAIiwKICAgICAgICAgICAgIk9mIHRoaXMgZmlsZSBzaXplIjogIuaWh+S7tuWkp+WwjyIsCiAgICAgICAgICAgICJJbiB0aGlzIHBhdGgiOiAi5paH5Lu26Lev5b6EIiwKICAgICAgICAgICAgIlJldHVybiBjb2RlIGZyb20gZm9ya2VkIHJlcG9zaXRvcmllcyI6ICLmkJzntKLnu5PmnpzljIXmi6zooqvmtL7nlJ/nmoTku5PlupPjgIIiLAoKICAgICAgICAgICAgIklzc3VlcyBvcHRpb25zIjogIumXrumimOmAiemhuSIsCiAgICAgICAgICAgICJJbiB0aGUgc3RhdGUiOiAi6Zeu6aKY54q25oCBIiwKICAgICAgICAgICAgIldpdGggdGhpcyBtYW55IGNvbW1lbnRzIjogIuivhOiuuuaVsOmHjyIsCiAgICAgICAgICAgICJXaXRoIHRoZSBsYWJlbHMiOiAi6Zeu6aKY5qCH562+IiwKICAgICAgICAgICAgIk9wZW5lZCBieSB0aGUgYXV0aG9yIjogIuaPkOmXruS6uiIsCiAgICAgICAgICAgICJNZW50aW9uaW5nIHRoZSB1c2VycyI6ICLmj5DliLDosIEiLAogICAgICAgICAgICAiQXNzaWduZWQgdG8gdGhlIHVzZXJzIjogIuWIhumFjee7meiwgSIsCiAgICAgICAgICAgICJVcGRhdGVkIGJlZm9yZSB0aGUgZGF0ZSI6ICLmm7TmlrDkuo4iLAoKICAgICAgICAgICAgIlVzZXJzIG9wdGlvbnMiOiAi55So5oi36YCJ6aG5IiwKICAgICAgICAgICAgIldpdGggdGhpcyBmdWxsIG5hbWUiOiAi55So5oi35YWo56ewIiwKICAgICAgICAgICAgIkZyb20gdGhpcyBsb2NhdGlvbiI6ICLmnaXoh6rlk6rph4wiLAogICAgICAgICAgICAiV2l0aCB0aGlzIG1hbnkgZm9sbG93ZXJzIjogIuacieWkmuWwkeeyieS4nSIsCiAgICAgICAgICAgICJXaXRoIHRoaXMgbWFueSBwdWJsaWMgcmVwb3NpdG9yaWVzIjogIuacieWkmuWwkeWFrOWFseS7k+W6kyIsCiAgICAgICAgICAgICJXb3JraW5nIGluIHRoaXMgbGFuZ3VhZ2UiOiAi5pOF6ZW/5LuA5LmI6K+t6KiAIiwKCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EKICAgICAgICAgICAgWy9XZeKAmXZlIGZvdW5kIChbXGQsXSspIHJlcG9zaXRvcnkgcmVzdWx0cy8sICLmiJHku6zkuLrmgqjmib7liLAgJDEg5Liq55u45YWz57uT5p6cIl0sCiAgICAgICAgICAgIFsvV2UgY291bGRu4oCZdCBmaW5kIGFueSByZXBvc2l0b3JpZXMgbWF0Y2hpbmcgJyguKyknLywgIuaIkeS7rOayoeacieaJvuWIsOS7u+S9leS4jiAnJDEnIOebuOWFs+eahOe7k+aenCJdLAogICAgICAgIF0sCiAgICB9LAoKCiAgICAiZ2lzdCI6IHsgLy8g5Luj56CB54mH5q616aG16Z2iCiAgICAgICAgInN0YXRpYyI6IHsgLy8g6Z2Z5oCB57+76K+RCiAgICAgICAgICAgICJTZWFyY2jigKYiOiAi5pCc57Si5Luj56CB54mH5q614oCmIiwKICAgICAgICAgICAgIkFsbCBnaXN0cyI6ICLmiYDmnInniYfmrrUiLAogICAgICAgICAgICAiTmV3IGdpc3QiOiAi5paw5bu654mH5q61IiwKICAgICAgICAgICAgIllvdXIgZ2lzdHMiOiAi5oKo55qE54mH5q61IiwKICAgICAgICAgICAgIlN0YXJyZWQgZ2lzdHMiOiAi5bey6LWe54mH5q61IiwKICAgICAgICAgICAgIllvdXIgR2l0SHViIHByb2ZpbGUiOiAi6K6+572uIiwKCiAgICAgICAgICAgICJWaWV3IHByb2ZpbGUgYW5kIG1vcmUiOiAi5p+l55yL5pu05aSa5L+h5oGvIiwKICAgICAgICAgICAgIlNlZSBhbGwgb2YgeW91ciBnaXN0cyI6ICLmn6XnnIvmgqjnmoTmiYDmnInniYfmrrUiLAogICAgICAgICAgICAiSW5zdGFudGx5IHNoYXJlIGNvZGUsIG5vdGVzLCBhbmQgc25pcHBldHMuIjogIuWNs+aXtuWIhuS6q+aCqOeahOS7o+egge+8jOeslOiusO+8jOeJh+aute+8jOS7peWPiueBteaEn+OAgiIsCiAgICAgICAgICAgICJHaXN0IGRlc2NyaXB0aW9u4oCmIjogIueJh+auteaPj+i/sCIsCgogICAgICAgICAgICAiRmlsZW5hbWUgaW5jbHVkaW5nIGV4dGVuc2lvbuKApiI6ICLmlofku7blkI0gKOWMheaLrOaJqeWxleWQjSkiLAogICAgICAgICAgICAiSW5kZW50IG1vZGUiOiAi57yp6L+b5qih5byPIiwKICAgICAgICAgICAgIlNwYWNlcyI6ICLnqbrmoLwiLAogICAgICAgICAgICAiVGFicyI6ICJUQUIiLAogICAgICAgICAgICAiSW5kZW50IHNpemUiOiAi57yp6L+b5aSn5bCPIiwKICAgICAgICAgICAgIkxpbmUgd3JhcCBtb2RlIjogIuaNouihjOaooeW8jyIsCiAgICAgICAgICAgICJObyB3cmFwIjogIuaXoOaNouihjCIsCiAgICAgICAgICAgICJTb2Z0IHdyYXAiOiAi6L2v5o2i6KGMIiwKICAgICAgICAgICAgIkFkZCBmaWxlIjogIua3u+WKoOaWh+S7tiIsCiAgICAgICAgICAgICJDcmVhdGUgc2VjcmV0IGdpc3QiOiAi5Yib5bu656eB5pyJ54mH5q61IiwKICAgICAgICAgICAgIlNlY3JldCBnaXN0cyBhcmUgaGlkZGVuIGZyb20gc2VhcmNoIGVuZ2luZXMgYnV0IHZpc2libGUgdG8gYW55b25lIHlvdSBnaXZlIHRoZSBVUkwuIjogIuengeacieeJh+auteaQnOe0ouW8leaTjuaYr+aQnOS4jeWIsOeahO+8jOS9huaYr+aCqOWPr+S7peWIhuS6q+aCqOeahCB1cmwg57uZ5LuW5Lus44CCIiwKICAgICAgICAgICAgIkNyZWF0ZSBwdWJsaWMgZ2lzdCI6ICLliJvlu7rlhazlhbHniYfmrrUiLAoKICAgICAgICAgICAgLy8gQWxsIGdpc3RzIOmhtemdogogICAgICAgICAgICAiU29ydDoiOiAi5o6S5bqPOiIsCiAgICAgICAgICAgICJTb3J0IG9wdGlvbnMiOiAi5o6S5bqP6YCJ6aG5IiwKICAgICAgICAgICAgIlJlY2VudGx5IGNyZWF0ZWQiOiAi5pyA6L+R5Yib5bu655qEIiwKICAgICAgICAgICAgIkxlYXN0IHJlY2VudGx5IGNyZWF0ZWQiOiAi5pyA5pep5Yib5bu655qEIiwKICAgICAgICAgICAgIlJlY2VudGx5IHVwZGF0ZWQiOiAi5pyA6L+R5pu05paw55qEIiwKICAgICAgICAgICAgIkxlYXN0IHJlY2VudGx5IHVwZGF0ZWQiOiAi5pyA5pep5pu05paw55qEIiwKICAgICAgICAgICAgIkZpbHRlcjoiOiAi562b6YCJOiIsCiAgICAgICAgICAgICJGaWx0ZXIgb3B0aW9ucyI6ICLnrZvpgInpgInpobkiLAogICAgICAgICAgICAiUHVibGljICYgU2VjcmV0IjogIuWFrOWFsSAmIOengeaciSIsCiAgICAgICAgICAgICJQdWJsaWMgb25seSI6ICLku4XlhazlhbEiLAogICAgICAgICAgICAiU2VjcmV0IG9ubHkiOiAi5LuF56eB5pyJIiwKICAgICAgICAgICAgImZvcmtlZCBmcm9tIjogIua0vueUn+iHqiIsCiAgICAgICAgICAgICJDcmVhdGVkIjogIuWIm+W7uuS6jiIsCiAgICAgICAgICAgICJWaWV3IjogIuafpeeciyIsCiAgICAgICAgICAgICJOZXdlciI6ICLmlrDnmoQiLAogICAgICAgICAgICAiT2xkZXIiOiAi5pen55qEIiwKCiAgICAgICAgICAgIC8vIFZpZXcg5Luj56CBIOmhtemdogogICAgICAgICAgICAiRWRpdCI6ICLnvJbovpEiLAogICAgICAgICAgICAiRGVsZXRlIjogIuWIoOmZpCIsCiAgICAgICAgICAgICJTdGFyIjogIueCuei1niIsCiAgICAgICAgICAgICJVbnN0YXIiOiAi5Y+W5raI54K56LWeIiwKICAgICAgICAgICAgIlVzZXIgYWN0aW9ucyI6ICLnlKjmiLfmk43kvZwiLAogICAgICAgICAgICAiUmVwb3J0IGFidXNlIjogIuS4vuaKpeivpeeUqOaItyIsCgogICAgICAgICAgICAiQ29kZSI6ICLku6PnoIEiLAogICAgICAgICAgICAiUmV2aXNpb25zIjogIuS/ruiuoiIsCiAgICAgICAgICAgICJTdGFycyI6ICLooqvotZ4iLAogICAgICAgICAgICAiRm9ya3MiOiAi5rS+55SfIiwKCiAgICAgICAgICAgIC8vIOS7o+eggemhtemdogogICAgICAgICAgICAiV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBkbz8iOiAi5oKo5oOz5YGa5LuA5LmI77yfIiwKICAgICAgICAgICAgIkVtYmVkIHRoaXMgZ2lzdCBpbiB5b3VyIHdlYnNpdGUuIjogIkVtYmVkIOWPr+W1jOWFpeWIsOaCqOeahOe9kemhteS4reOAgiIsCiAgICAgICAgICAgICJDb3B5IHNoYXJhYmxlIFVSTCBmb3IgdGhpcyBnaXN0LiI6ICLlpI3liLYgVVJMIOWFseS6q+i/meS4queJh+auteOAgiIsCiAgICAgICAgICAgICJDbG9uZSB3aXRoIEdpdCBvciBjaGVja291dCB3aXRoIFNWTiB1c2luZyB0aGUgcmVwb3NpdG9yeSdzIHdlYiBhZGRyZXNzLiI6ICJHaXQg5YWL6ZqG5oiWIFNWTiDmo4Dlh7ror6Xku5PlupPmiYDkvb/nlKjnmoQgd2ViIOWcsOWdgOOAgiIsCiAgICAgICAgICAgICJDbG9uZSB3aXRoIGFuIFNTSCBrZXkgYW5kIHBhc3NwaHJhc2UgZnJvbSB5b3VyIEdpdEh1YiBzZXR0aW5ncy4iOiAi5L2/55SoIFNTSCDlr4bpkqXlhYvpmoYiLAogICAgICAgICAgICAiTGVhcm4gbW9yZSBhYm91dCBjbG9uZSBVUkxzIjogIuabtOWkmueahOWFi+mahuaWueazlSIsCgogICAgICAgICAgICAiQ29weSB0byBjbGlwYm9hcmQiOiAi5aSN5Yi25Yiw5Ymq5YiH5p2/IiwKICAgICAgICAgICAgIkNvcGllZCEiOiAi5aSN5Yi25oiQ5YqfISIsCiAgICAgICAgICAgICJEb3dubG9hZCBaSVAiOiAi5LiL6L29IFpJUCIsCiAgICAgICAgICAgICJQZXJtYWxpbmsiOiAi5rC45LmF6ZO+5o6lIiwKICAgICAgICAgICAgIlJhdyI6ICLmupDnoIEiLAoKICAgICAgICAgICAgLy8g5L+u6K6i6aG16Z2iCiAgICAgICAgICAgICJVbmlmaWVkIjogIuWQjOWxjyIsCiAgICAgICAgICAgICJTcGxpdCI6ICLliIblsY8iLAogICAgICAgICAgICAiY3JlYXRlZCI6ICLliJvlu7oiLAogICAgICAgICAgICAidGhpcyBnaXN0IjogIuivpeeJh+auteS6jiIsCgogICAgICAgICAgICAvLyDnvJbovpHku6PnoIHpobXpnaIKICAgICAgICAgICAgIkVkaXRpbmciOiAi57yW6L6RIiwKICAgICAgICAgICAgIk1ha2Ugc2VjcmV0IjogIui9rOS4uuengeaciSIsCiAgICAgICAgICAgICJDYW5jZWwiOiAi5Y+W5raIIiwKICAgICAgICAgICAgIlVwZGF0ZSBwdWJsaWMgZ2lzdCI6ICLmm7TmlrDniYfmrrUiLAoKICAgICAgICAgICAgLy8g5bey6LWe6aG16Z2iCiAgICAgICAgICAgICJTdGFycmVkIjogIui1nuS6hiIsCiAgICAgICAgICAgICJZb3UgZG9u4oCZdCBoYXZlIGFueSBzdGFycmVkIGdpc3RzIHlldC4iOiAi5oKo6L+Y5rKh5pyJ6LWe6L+H5Lu75L2V54mH5q6144CCIiwKICAgICAgICB9LAogICAgICAgICJyZWdleHAiOiBbIC8vIOato+WImee/u+ivkQogICAgICAgICAgICBbL1ZpZXcgKFteIF0rKSBvbiBHaXRIdWIvLCAi5p+l55yLICQxIOeahCBHaXRIdWIiXSwKICAgICAgICAgICAgWy8oXGQrKSBmaWxlcz8vLCAiJDEg5paH5Lu2Il0sCiAgICAgICAgICAgIFsvKFxkKykgZm9ya3M/LywgIiQxIOa0vueUnyJdLAogICAgICAgICAgICBbLyhcZCspIGNvbW1lbnRzPy8sICIkMSDor4TorroiXSwKICAgICAgICAgICAgWy8oXGQrKSBzdGFycz8vLCAiJDEg6LWeIl0sCiAgICAgICAgICAgIFsvU2F2ZSAoLis/KSB0byB5b3VyIGNvbXB1dGVyIGFuZCB1c2UgaXQgaW4gR2l0SHViIERlc2t0b3AuLywgIuS9v+eUqCBHaXRIdWIg5qGM6Z2i54mI77yM5L+d5a2YICQxIOWIsOaCqOeahOeUteiEkeOAgiJdLAogICAgICAgIF0sCiAgICB9LAoKICAgICJvYXV0aCI6IHsgLy8g5bqU55So5o6I5p2DCiAgICAgICAgInN0YXRpYyI6IHsgLy8g6Z2Z5oCB57+76K+RCiAgICAgICAgICAgICJBdXRob3JpemUgYXBwbGljYXRpb24iOiAi5bqU55So5o6I5p2DIiwKICAgICAgICAgICAgImJ5IjogIueahCIsCiAgICAgICAgICAgICJ3b3VsZCBsaWtlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHlvdXIgYWNjb3VudCI6ICLmg7Porr/pl67mgqjnmoTluJDmiLciLAogICAgICAgICAgICAiUmV2aWV3IHBlcm1pc3Npb25zIjogIuafpeeci+adg+mZkCIsCiAgICAgICAgICAgICJQdWJsaWMgZGF0YSBvbmx5IjogIuS7heWFrOWFseaVsOaNriIsCiAgICAgICAgICAgICJMaW1pdGVkIGFjY2VzcyB0byB5b3VyIHB1YmxpYyBkYXRhIjogIuS7hemZkOiuv+mXruaCqOeahOWFrOWFseaVsOaNriIsCiAgICAgICAgICAgICJUaGlzIGFwcGxpY2F0aW9uIHdpbGwgYmUgYWJsZSB0byBpZGVudGlmeSB5b3UgYW5kIHJlYWQgcHVibGljIGluZm9ybWF0aW9uLiI6ICLmraTlupTnlKjnqIvluo/lsIbog73or4bliKvmgqjnmoTouqvku73lkozor7vlj5bmgqjnmoTlhazlhbHkv6Hmga/jgIIiLAogICAgICAgICAgICAiTGVhcm4gbW9yZSI6ICLmm7TlpJoiLAoKICAgICAgICAgICAgIlZpc2l0IGFwcGxpY2F0aW9u4oCZcyB3ZWJzaXRlIjogIuiuv+mXruW6lOeUqOWumOe9kSIsCiAgICAgICAgICAgICJMZWFybiBtb3JlIGFib3V0IE9BdXRoIjogIuafpeeci+abtOWkmuaOiOadg+S/oeaBryIsCiAgICAgICAgfSwKICAgICAgICAicmVnZXhwIjogWyAvLyDmraPliJnnv7vor5EKICAgICAgICBdLAogICAgfSwKfTsKCgovLyDlhazlhbHlpI3nlKjnv7vor5Hpg6jliIYKSTE4Ti56aC5wdWxscyA9IEkxOE4uemguaXNzdWVzOwo="}]},{"name":"Yet Another Weibo Filter","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":true,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["miaopai.com","sina.cn","sina.com.cn","sinaimg.cn","sinajs.cn","t.cn","weibo.com"],"orig_excludes":["*://weibo.com/a/bind/*","*://account.weibo.com/*","*://kefu.weibo.com/*","*://photo.weibo.com/*","*://security.weibo.com/*","*://verified.weibo.com/*","*://vip.weibo.com/*","*://open.weibo.com/*","*://passport.weibo.com/*"],"orig_includes":["*://weibo.com/*","*://*.weibo.com/*","*://t.cn/*"],"orig_matches":["*://*.weibo.com/*","*://t.cn/*"],"orig_noframes":true,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"local::globalConfig":"s{\"short_url_wo_confirm\":false}","local::user3655689037Config":"s{\"script_update_whatsnew.last\":96,\"filter_follow_check\":false,\"filter_follow_check.frequency\":259200000,\"uncheck_follow_presenter\":true,\"show_article_without_follow\":true,\"filter_homepage_newest_feeds\":false,\"filter_homepage_single_group\":false,\"filter_homepage_multi_group\":false,\"filter_homepage_auto_load\":false,\"filter_homepage_desktop_notify\":false,\"filter_profile_show_all\":false,\"filter_manually_hide\":false,\"pause_filter\":false,\"filter_original_discover\":false,\"filter_original_follower\":false,\"filter_my_feed\":true,\"filter_my_original\":false,\"filter_mention_me\":false,\"filter_ad_feed\":false,\"filter_fans_top\":false,\"filter_weibo_product\":false,\"filter_tb_tm_feed\":false,\"filter_weibo_pay\":false,\"filter_user_like\":false,\"filter_fake_weibo\":false,\"filter_deleted_forward\":false,\"filter_comment_and_forward\":false,\"filter_vote\":false,\"filter_red_pack\":false,\"filter_image_tag\":false,\"filter_koi_forward\":false,\"filter_app_item\":false,\"filter_wenda\":false,\"filter_wenwo_dr\":false,\"filter_yizhibo\":false,\"filter_paid\":false,\"filter_multiple_topics_feed\":false,\"filter_fast_forward\":false,\"filter_Place\":false,\"filter_Movie\":false,\"filter_Book\":false,\"filter_Topic\":false,\"filter_Music\":false,\"filter_Stock\":false,\"flooding_author\":false,\"flooding_forward\":false,\"comment_layout_by_time\":false,\"comment_layout_hide_sub\":false,\"filter_comment_show_my\":false,\"filter_comment_face_count\":false,\"filter_comment_face_type\":false,\"filter_comment_wo_content\":false,\"filter_comment_with_forward\":false,\"clean_icons_level\":false,\"clean_icons_member\":false,\"clean_icons_approve\":false,\"clean_icons_approve_co\":false,\"clean_icons_approve_dead\":false,\"clean_icons_bigfun\":false,\"clean_icons_club\":false,\"clean_icons_v_girl\":false,\"clean_icons_supervisor\":false,\"clean_icons_taobao\":false,\"clean_icons_cheng\":false,\"clean_icons_gongyi\":false,\"clean_icons_zongyika\":false,\"clean_icons_others\":false,\"clean_follow_single\":false,\"clean_follow_at_me\":false,\"clean_follow_discover\":false,\"clean_follow_fast_forward\":false,\"clean_follow_video\":false,\"clean_follow_recommend\":false,\"clean_nav_logo_img\":false,\"clean_nav_main\":false,\"clean_nav_tv\":false,\"clean_nav_hot\":false,\"clean_nav_game\":false,\"clean_nav_hot_search\":false,\"clean_nav_notice_new\":false,\"clean_nav_new\":false,\"clean_left_level\":false,\"clean_left_home\":false,\"clean_left_fav\":false,\"clean_left_like\":false,\"clean_left_hot\":false,\"clean_left_tv\":false,\"clean_left_new_feed\":false,\"clean_left_friends\":false,\"clean_left_group_to_me\":false,\"clean_left_special\":false,\"clean_left_whisper\":false,\"clean_left_v_plus\":false,\"clean_left_new\":false,\"clean_left_news\":false,\"clean_left_count\":false,\"clean_middle_recommended_topic\":false,\"clean_middle_feed_recommend\":false,\"clean_middle_member_tip\":false,\"clean_right_info\":false,\"clean_right_v7_entry\":false,\"clean_right_ranks\":false,\"clean_right_hot_topic\":false,\"clean_right_interest\":false,\"clean_right_member\":false,\"clean_right_groups\":false,\"clean_right_recom_group_user\":false,\"clean_right_hongbao_rank\":false,\"clean_right_att_feed\":false,\"clean_right_notice\":false,\"clean_feed_recommend\":false,\"clean_feed_feed_outer_tip\":false,\"clean_feed_feed_inner_tip\":false,\"clean_feed_feed_tip\":false,\"clean_feed_group_tip\":false,\"clean_feed_vip_background\":false,\"clean_feed_last_pic\":false,\"clean_feed_pic_tag\":false,\"clean_feed_son_title\":false,\"clean_feed_card\":false,\"clean_feed_article_pay\":false,\"clean_feed_tag\":false,\"clean_feed_related_link\":false,\"clean_feed_source\":false,\"clean_feed_pop\":false,\"clean_feed_like\":false,\"clean_feed_like_comment\":false,\"clean_feed_like_attitude\":false,\"clean_feed_forward\":false,\"clean_feed_favorite\":false,\"clean_feed_promote_other\":false,\"clean_feed_report\":false,\"clean_feed_use_card_background\":false,\"clean_profile_move_things\":false,\"clean_profile_cover\":false,\"clean_profile_bg_img\":false,\"clean_profile_badge_icon\":false,\"clean_profile_verify\":false,\"clean_profile_edit_person_info\":false,\"clean_profile_stats\":false,\"clean_profile_my_data\":false,\"clean_profile_suggest_user\":false,\"clean_profile_group\":false,\"clean_profile_relation\":false,\"clean_profile_album\":false,\"clean_profile_hot_topic\":false,\"clean_profile_hot_weibo\":false,\"clean_profile_recommend_feed\":false,\"clean_profile_user_list\":false,\"clean_profile_hongbao\":false,\"clean_profile_wenwo_dr\":false,\"clean_profile_timeline\":false,\"clean_message_help\":false,\"clean_message_feedback\":false,\"clean_other_ads\":false,\"clean_other_music\":false,\"clean_other_template\":false,\"clean_other_home_tip\":false,\"clean_other_footer\":false,\"clean_other_im\":false,\"clean_other_im_news\":false,\"clean_other_back_top\":false,\"clean_other_tip\":false,\"clean_other_related_feeds\":false,\"clean_other_related_video\":false,\"clean_other_related_article\":false,\"clean_other_send_weibo\":false,\"layout_nav_auto_hide\":false,\"layout_nav_classical\":false,\"layout_nav_hide_name\":false,\"layout_left_messages\":false,\"layout_side_merge\":false,\"layout_side_position\":false,\"layout_side_show_all_groups\":false,\"layout_left_move\":true,\"layout_right_move\":true,\"layout_other_move\":true,\"chat_page_disable_unload_prompt\":false,\"font_family\":false,\"layout_avatar_shape\":false,\"layout_fast_face\":false,\"layout_locale_timezone\":false,\"feed_absolute_time\":false,\"hide_hot_topic_large_read\":false,\"layout_theme_apply\":false,\"layout_nav_dark\":false,\"layout_theme_color\":false,\"custom_css\":true,\"custom_css.css\":\"\",\"feed_no_space\":false,\"feed_source_at_bottom\":false,\"feed_author_content_nowrap\":false,\"feed_small_image\":false,\"feed_increase_width\":false,\"feed_button_order\":false,\"feed_button_order_comment\":false,\"feed_font_size\":false,\"feed_long_expand\":false,\"feed_long_expand.count\":200,\"feed_long_expand.br\":30,\"feed_content_line_break\":false,\"feed_link_use_url\":false,\"feed_unicode_emoji\":false,\"show_vote_result\":false,\"feed_no_custom_source\":false,\"view_edit_info\":false,\"view_article_inline\":false,\"link_with_face\":false,\"feed_view_original\":false,\"feed_view_original.open\":\"page\",\"feed_download_image\":false,\"feed_download_image.name\":\"index\",\"image_preview_all\":false,\"feed_no_animated_image\":false,\"feed_built_in_video_player\":false,\"feed_disable_tag_dialog\":false,\"feed_low_reading_warn\":false,\"feed_only_mode\":false,\"script_import_export\":false,\"script_update_whatsnew\":true,\"script_enable_debug\":false,\"script_debug_regex\":false,\"script_update_whatsnew.lastWeibo\":6,\"filter_weibo_product_like\":false,\"clean_right_hot_topic_top\":false,\"clean_feed_fast_repost\":false,\"layout_nav_hide_avatar\":false,\"layout_left_liked.like\":false,\"layout_left_liked\":false,\"hide_hot_topic_large_read.quota\":20,\"feed_render\":true,\"link_with_face.clean\":false,\"link_with_face.link\":false,\"feed_built_in_video_player.volume\":100,\"feed_built_in_video_player.memorize\":false,\"feed_built_in_video_player.quality\":\"auto\",\"feed_link_new_tab.author\":true,\"feed_link_new_tab.mention\":true,\"feed_link_new_tab.topic\":true,\"feed_link_new_tab.picture\":true,\"feed_link_new_tab.detail\":true,\"feed_link_new_tab.comments\":true,\"feed_link_new_tab.card\":true,\"feed_link_new_tab\":false,\"filter_content_text_show.items\":[],\"filter_content_regex_show.items\":[],\"filter_author_id_show.items\":[],\"filter_original_id_show.items\":[],\"filter_mention_name_show.items\":[],\"filter_topic_text_show.items\":[],\"filter_source_text_show.items\":[],\"filter_content_text_hide.items\":[],\"filter_content_regex_hide.items\":[],\"filter_author_id_hide.items\":[],\"filter_original_id_hide.items\":[],\"filter_mention_name_hide.items\":[],\"filter_topic_text_hide.items\":[],\"filter_source_text_hide.items\":[],\"filter_content_text_fold.items\":[],\"filter_content_regex_fold.items\":[],\"filter_author_id_fold.items\":[],\"filter_original_id_fold.items\":[],\"filter_mention_name_fold.items\":[],\"filter_topic_text_fold.items\":[],\"filter_source_text_fold.items\":[],\"filter_author_forward_id_show.items\":[],\"filter_author_forward_id_hide.items\":[],\"filter_author_forward_id_fold.items\":[]}","local::user3655689037Follow":"s{\"fetchData\":{\"weiboVersion\":6},\"lastList\":null,\"lastChange\":null}","local::user3655689037Hide":"s{\"hideList\":[]}","local::user3739099753Config":"s{\"script_update_whatsnew.last\":97,\"filter_homepage_newest_feeds\":true,\"filter_homepage_single_group\":false,\"filter_homepage_multi_group\":false,\"clean_other_ads\":true,\"clean_other_music\":true,\"clean_other_template\":true,\"clean_other_home_tip\":true,\"clean_other_footer\":true,\"clean_other_im\":true,\"clean_other_im_news\":true,\"clean_other_back_top\":true,\"clean_other_tip\":true,\"clean_other_related_feeds\":true,\"clean_other_related_video\":true,\"clean_other_related_article\":true,\"clean_other_send_weibo\":true,\"clean_message_help\":true,\"clean_message_feedback\":true,\"clean_profile_hongbao\":true,\"clean_profile_wenwo_dr\":true,\"clean_profile_stats\":true,\"clean_profile_my_data\":true,\"clean_profile_edit_person_info\":false,\"clean_feed_promote_other\":true,\"clean_right_hongbao_rank\":true,\"clean_right_member\":true,\"clean_right_notice\":true,\"clean_right_recom_group_user\":true,\"clean_right_ranks\":true,\"clean_right_interest\":true,\"clean_middle_member_tip\":true,\"clean_left_v_plus\":true,\"clean_left_whisper\":true,\"clean_icons_zongyika\":false,\"clean_icons_taobao\":false,\"clean_icons_club\":false,\"clean_icons_approve_co\":false,\"clean_icons_level\":false,\"clean_icons_member\":false,\"clean_icons_approve_dead\":false,\"clean_icons_v_girl\":false,\"clean_icons_cheng\":false,\"clean_icons_others\":false,\"clean_icons_bigfun\":false,\"clean_icons_supervisor\":false,\"clean_icons_gongyi\":false,\"clean_icons_approve\":false,\"layout_nav_auto_hide\":false,\"clean_left_friends\":true,\"clean_left_group_to_me\":true,\"clean_left_tv\":true,\"clean_left_home\":false,\"clean_left_hot\":true,\"clean_left_level\":true,\"clean_left_like\":true,\"image_preview_all\":true,\"image_preview_all.count\":\"4x0\",\"filter_follow_check\":false,\"filter_follow_check.frequency\":259200000,\"uncheck_follow_presenter\":true,\"show_article_without_follow\":true,\"filter_homepage_auto_load\":false,\"filter_homepage_desktop_notify\":false,\"filter_profile_show_all\":false,\"filter_manually_hide\":false,\"pause_filter\":false,\"filter_original_discover\":false,\"filter_original_follower\":false,\"filter_my_feed\":true,\"filter_my_original\":false,\"filter_mention_me\":false,\"filter_ad_feed\":false,\"filter_fans_top\":false,\"filter_weibo_product\":false,\"filter_tb_tm_feed\":false,\"filter_weibo_pay\":false,\"filter_user_like\":false,\"filter_fake_weibo\":false,\"filter_deleted_forward\":false,\"filter_comment_and_forward\":false,\"filter_vote\":false,\"filter_red_pack\":false,\"filter_image_tag\":false,\"filter_koi_forward\":false,\"filter_app_item\":false,\"filter_wenda\":false,\"filter_wenwo_dr\":false,\"filter_yizhibo\":false,\"filter_paid\":false,\"filter_multiple_topics_feed\":false,\"filter_Place\":false,\"filter_Movie\":false,\"filter_Book\":false,\"filter_Topic\":false,\"filter_Music\":false,\"filter_Stock\":false,\"flooding_author\":false,\"flooding_forward\":false,\"comment_layout_by_time\":false,\"comment_layout_hide_sub\":false,\"filter_comment_show_my\":false,\"filter_comment_face_count\":false,\"filter_comment_face_type\":false,\"filter_comment_wo_content\":false,\"filter_comment_with_forward\":false,\"clean_follow_single\":false,\"clean_follow_at_me\":false,\"clean_follow_discover\":false,\"clean_follow_whisper\":false,\"clean_follow_video\":false,\"clean_follow_recommend\":false,\"clean_nav_logo_img\":false,\"clean_nav_main\":false,\"clean_nav_tv\":false,\"clean_nav_hot\":false,\"clean_nav_game\":false,\"clean_nav_hot_search\":false,\"clean_nav_notice_new\":false,\"clean_nav_new\":false,\"clean_left_fav\":false,\"clean_left_new_feed\":false,\"clean_left_special\":false,\"clean_left_new\":false,\"clean_left_news\":false,\"clean_left_count\":false,\"clean_middle_recommended_topic\":false,\"clean_middle_feed_recommend\":false,\"clean_right_info\":false,\"clean_right_hot_topic\":false,\"clean_right_groups\":false,\"clean_right_att_feed\":false,\"clean_feed_recommend\":true,\"clean_feed_feed_outer_tip\":false,\"clean_feed_feed_tip\":false,\"clean_feed_group_tip\":false,\"clean_feed_vip_background\":false,\"clean_feed_last_pic\":false,\"clean_feed_pic_tag\":false,\"clean_feed_son_title\":false,\"clean_feed_card\":false,\"clean_feed_article_pay\":false,\"clean_feed_tag\":false,\"clean_feed_related_link\":false,\"clean_feed_source\":false,\"clean_feed_pop\":false,\"clean_feed_like\":false,\"clean_feed_like_comment\":false,\"clean_feed_like_attitude\":false,\"clean_feed_forward\":false,\"clean_feed_favorite\":false,\"clean_feed_report\":false,\"clean_feed_use_card_background\":false,\"clean_profile_move_things\":false,\"clean_profile_cover\":false,\"clean_profile_bg_img\":false,\"clean_profile_badge_icon\":false,\"clean_profile_verify\":false,\"clean_profile_suggest_user\":false,\"clean_profile_group\":false,\"clean_profile_relation\":false,\"clean_profile_album\":false,\"clean_profile_hot_topic\":false,\"clean_profile_hot_weibo\":false,\"clean_profile_recommend_feed\":false,\"clean_profile_user_list\":false,\"clean_profile_timeline\":false,\"layout_nav_classical\":false,\"layout_nav_hide_name\":false,\"layout_left_messages\":false,\"layout_side_merge\":false,\"layout_side_position\":false,\"layout_side_show_all_groups\":false,\"layout_left_move\":true,\"layout_right_move\":true,\"layout_other_move\":true,\"chat_page_disable_unload_prompt\":false,\"font_family\":false,\"layout_avatar_shape\":false,\"layout_fast_face\":false,\"layout_locale_timezone\":false,\"feed_absolute_time\":false,\"layout_theme_apply\":false,\"layout_nav_dark\":false,\"layout_theme_color\":false,\"custom_css\":true,\"custom_css.css\":\"\",\"feed_no_space\":false,\"feed_source_at_bottom\":false,\"feed_author_content_nowrap\":false,\"feed_small_image\":false,\"feed_increase_width\":false,\"feed_button_order\":false,\"feed_button_order_comment\":false,\"feed_font_size\":false,\"feed_long_expand\":false,\"feed_content_line_break\":false,\"feed_link_use_url\":false,\"feed_unicode_emoji\":false,\"show_vote_result\":false,\"feed_no_custom_source\":false,\"view_edit_info\":false,\"view_article_inline\":false,\"feed_view_original\":false,\"feed_view_original.open\":\"page\",\"feed_download_image\":false,\"feed_download_image.name\":\"index\",\"image_preview_all.more\":\"text\",\"feed_no_animated_image\":false,\"feed_built_in_video_player\":false,\"feed_disable_tag_dialog\":false,\"feed_low_reading_warn\":false,\"feed_only_mode\":false,\"script_import_export\":false,\"script_update_whatsnew\":true,\"feed_built_in_video_player.volume\":100,\"feed_built_in_video_player.memorize\":false,\"feed_built_in_video_player.quality\":\"auto\",\"script_enable_debug\":false,\"script_debug_regex\":false,\"filter_content_text_show.items\":[],\"filter_content_regex_show.items\":[],\"filter_author_id_show.items\":[],\"filter_original_id_show.items\":[],\"filter_mention_name_show.items\":[],\"filter_topic_text_show.items\":[],\"filter_source_text_show.items\":[],\"filter_content_text_hide.items\":[],\"filter_content_regex_hide.items\":[],\"filter_author_id_hide.items\":[],\"filter_original_id_hide.items\":[],\"filter_mention_name_hide.items\":[],\"filter_topic_text_hide.items\":[],\"filter_source_text_hide.items\":[],\"filter_content_text_fold.items\":[],\"filter_content_regex_fold.items\":[],\"filter_author_id_fold.items\":[],\"filter_original_id_fold.items\":[],\"filter_mention_name_fold.items\":[],\"filter_topic_text_fold.items\":[],\"filter_source_text_fold.items\":[],\"filter_author_forward_id_show.items\":[],\"filter_author_forward_id_hide.items\":[],\"filter_author_forward_id_fold.items\":[],\"filter_fast_forward\":false,\"clean_follow_fast_forward\":false,\"hide_hot_topic_large_read\":false,\"feed_long_expand.count\":200,\"feed_long_expand.br\":30,\"link_with_face\":false,\"script_update_whatsnew.lastWeibo\":6,\"filter_weibo_product_like\":false,\"hide_hot_topic_large_read.quota\":20,\"feed_render\":true,\"link_with_face.clean\":false,\"link_with_face.link\":false,\"filter_homepage_multi_group.count\":50,\"filter_homepage_multi_group.more\":\"clear\",\"filter_homepage_multi_group.unread\":false,\"filter_homepage_multi_group.groups\":[],\"filter_homepage_desktop_notify.whitelist\":false,\"filter_homepage_single_group.group\":\"whisper\",\"filter_original_follower.count\":10,\"filter_original_follower.account\":[],\"layout_nav_hide_name.act\":\"hidden\",\"layout_left_messages.like\":false,\"layout_left_messages.dm\":false,\"layout_left_messages.msgbox\":false,\"layout_left_messages.group\":false,\"layout_left_messages.dmsub\":false,\"layout_side_merge.side\":\"left\",\"layout_side_position.side\":\"left\",\"font_family.west\":\"Times\",\"font_family.chinese\":\"中易宋体\",\"layout_avatar_shape.shape\":\"square\",\"layout_theme_apply.skin\":\"skin058\",\"layout_theme_color.color2\":\"#ffffff\",\"layout_theme_color.transparency2\":30,\"layout_theme_color.color1\":\"#f6f6f6\",\"layout_theme_color.transparency1\":30,\"layout_theme_color.color3\":\"#ffffff\",\"layout_theme_color.transparency3\":30,\"feed_small_image.repost\":false,\"feed_increase_width.width\":750,\"feed_button_order.0\":\"pop\",\"feed_button_order.1\":\"favorite\",\"feed_button_order.2\":\"forward\",\"feed_button_order.3\":\"comment\",\"feed_button_order.4\":\"like\",\"feed_button_order_comment.0\":\"report\",\"feed_button_order_comment.1\":\"delete\",\"feed_button_order_comment.2\":\"conversition\",\"feed_button_order_comment.3\":\"reply\",\"feed_button_order_comment.4\":\"like\",\"feed_font_size.ratio\":\"120\",\"feed_content_line_break.text\":\"⏎\",\"feed_view_original.direct\":false,\"feed_download_image.direct\":false,\"feed_low_reading_warn.count\":100,\"feed_only_mode.width\":600,\"feed_only_mode.key\":119,\"feed_only_mode.button\":false,\"filter_comment_text_show.items\":[],\"filter_comment_text_hide.items\":[],\"filter_comment_regex_show.items\":[],\"filter_comment_regex_hide.items\":[],\"filter_comment_name_show.items\":[],\"filter_comment_name_hide.items\":[],\"filter_comment_face_count.count\":8,\"filter_comment_face_type.count\":4,\"clean_feed_fast_repost\":false,\"nav_use_link\":false,\"side_left_use_link\":false,\"feed_link_new_tab.author\":true,\"feed_link_new_tab.mention\":true,\"feed_link_new_tab.topic\":true,\"feed_link_new_tab.picture\":true,\"feed_link_new_tab.detail\":true,\"feed_link_new_tab.comments\":true,\"feed_link_new_tab\":false,\"clean_right_hot_topic_top\":false,\"clean_feed_feed_inner_tip\":false,\"layout_nav_hide_avatar\":false,\"layout_left_liked\":false,\"clean_right_v7_entry\":false,\"layout_left_liked.like\":false,\"feed_link_new_tab.card\":true}","local::user3739099753Follow":"s{\"fetchData\":{\"weiboVersion\":6},\"lastList\":null,\"lastChange\":null}","local::user3739099753Hide":"s{\"hideList\":[]}","local::user6487367156Config":"s{\"filter_follow_check\":false,\"filter_follow_check.frequency\":259200000,\"uncheck_follow_presenter\":true,\"show_article_without_follow\":true,\"filter_homepage_newest_feeds\":false,\"filter_homepage_single_group\":false,\"filter_homepage_multi_group\":false,\"filter_homepage_auto_load\":false,\"filter_homepage_desktop_notify\":false,\"filter_profile_show_all\":false,\"filter_manually_hide\":false,\"pause_filter\":false,\"filter_original_discover\":false,\"filter_original_follower\":false,\"filter_my_feed\":true,\"filter_my_original\":false,\"filter_mention_me\":false,\"filter_ad_feed\":false,\"filter_fans_top\":false,\"filter_weibo_product\":false,\"filter_tb_tm_feed\":false,\"filter_weibo_pay\":false,\"filter_user_like\":false,\"filter_fake_weibo\":false,\"filter_deleted_forward\":false,\"filter_comment_and_forward\":false,\"filter_vote\":false,\"filter_red_pack\":false,\"filter_image_tag\":false,\"filter_koi_forward\":false,\"filter_app_item\":false,\"filter_wenda\":false,\"filter_wenwo_dr\":false,\"filter_yizhibo\":false,\"filter_paid\":false,\"filter_multiple_topics_feed\":false,\"filter_fast_forward\":false,\"filter_Place\":false,\"filter_Movie\":false,\"filter_Book\":false,\"filter_Topic\":false,\"filter_Music\":false,\"filter_Stock\":false,\"flooding_author\":false,\"flooding_forward\":false,\"comment_layout_by_time\":false,\"comment_layout_hide_sub\":false,\"filter_comment_show_my\":false,\"filter_comment_face_count\":false,\"filter_comment_face_type\":false,\"filter_comment_wo_content\":false,\"filter_comment_with_forward\":false,\"clean_icons_level\":false,\"clean_icons_member\":false,\"clean_icons_approve\":false,\"clean_icons_approve_co\":false,\"clean_icons_approve_dead\":false,\"clean_icons_bigfun\":false,\"clean_icons_club\":false,\"clean_icons_v_girl\":false,\"clean_icons_supervisor\":false,\"clean_icons_taobao\":false,\"clean_icons_cheng\":false,\"clean_icons_gongyi\":false,\"clean_icons_zongyika\":false,\"clean_icons_others\":false,\"clean_follow_single\":false,\"clean_follow_at_me\":false,\"clean_follow_discover\":false,\"clean_follow_fast_forward\":false,\"clean_follow_video\":false,\"clean_follow_recommend\":false,\"clean_nav_logo_img\":false,\"clean_nav_main\":false,\"clean_nav_tv\":false,\"clean_nav_hot\":false,\"clean_nav_game\":false,\"clean_nav_hot_search\":false,\"clean_nav_notice_new\":false,\"clean_nav_new\":false,\"clean_left_level\":false,\"clean_left_home\":false,\"clean_left_fav\":false,\"clean_left_like\":false,\"clean_left_hot\":false,\"clean_left_tv\":false,\"clean_left_new_feed\":false,\"clean_left_friends\":false,\"clean_left_group_to_me\":false,\"clean_left_special\":false,\"clean_left_whisper\":false,\"clean_left_v_plus\":false,\"clean_left_new\":false,\"clean_left_news\":false,\"clean_left_count\":false,\"clean_middle_recommended_topic\":false,\"clean_middle_feed_recommend\":false,\"clean_middle_member_tip\":false,\"clean_right_info\":false,\"clean_right_ranks\":false,\"clean_right_hot_topic\":false,\"clean_right_interest\":false,\"clean_right_member\":false,\"clean_right_groups\":false,\"clean_right_recom_group_user\":false,\"clean_right_hongbao_rank\":false,\"clean_right_att_feed\":false,\"clean_right_notice\":false,\"clean_feed_recommend\":false,\"clean_feed_feed_outer_tip\":false,\"clean_feed_feed_tip\":false,\"clean_feed_group_tip\":false,\"clean_feed_vip_background\":false,\"clean_feed_last_pic\":false,\"clean_feed_pic_tag\":false,\"clean_feed_son_title\":false,\"clean_feed_card\":false,\"clean_feed_article_pay\":false,\"clean_feed_tag\":false,\"clean_feed_related_link\":false,\"clean_feed_source\":false,\"clean_feed_pop\":false,\"clean_feed_like\":false,\"clean_feed_like_comment\":false,\"clean_feed_like_attitude\":false,\"clean_feed_forward\":false,\"clean_feed_favorite\":false,\"clean_feed_promote_other\":false,\"clean_feed_report\":false,\"clean_feed_use_card_background\":false,\"clean_profile_move_things\":false,\"clean_profile_cover\":false,\"clean_profile_bg_img\":false,\"clean_profile_badge_icon\":false,\"clean_profile_verify\":false,\"clean_profile_edit_person_info\":false,\"clean_profile_stats\":false,\"clean_profile_my_data\":false,\"clean_profile_suggest_user\":false,\"clean_profile_group\":false,\"clean_profile_relation\":false,\"clean_profile_album\":false,\"clean_profile_hot_topic\":false,\"clean_profile_hot_weibo\":false,\"clean_profile_recommend_feed\":false,\"clean_profile_user_list\":false,\"clean_profile_hongbao\":false,\"clean_profile_wenwo_dr\":false,\"clean_profile_timeline\":false,\"clean_message_help\":false,\"clean_message_feedback\":false,\"clean_other_ads\":false,\"clean_other_music\":false,\"clean_other_template\":false,\"clean_other_home_tip\":false,\"clean_other_footer\":false,\"clean_other_im\":false,\"clean_other_im_news\":false,\"clean_other_back_top\":false,\"clean_other_tip\":false,\"clean_other_related_feeds\":false,\"clean_other_related_video\":false,\"clean_other_related_article\":false,\"clean_other_send_weibo\":false,\"layout_nav_auto_hide\":false,\"layout_nav_classical\":false,\"layout_nav_hide_name\":false,\"layout_left_messages\":false,\"layout_side_merge\":false,\"layout_side_position\":false,\"layout_side_show_all_groups\":false,\"layout_left_move\":true,\"layout_right_move\":true,\"layout_other_move\":true,\"chat_page_disable_unload_prompt\":false,\"font_family\":false,\"layout_avatar_shape\":false,\"layout_fast_face\":false,\"layout_locale_timezone\":false,\"feed_absolute_time\":false,\"hide_hot_topic_large_read\":false,\"layout_theme_apply\":false,\"layout_nav_dark\":false,\"layout_theme_color\":false,\"custom_css\":true,\"custom_css.css\":\"\",\"feed_no_space\":false,\"feed_source_at_bottom\":false,\"feed_author_content_nowrap\":false,\"feed_small_image\":false,\"feed_increase_width\":false,\"feed_button_order\":false,\"feed_button_order_comment\":false,\"feed_font_size\":false,\"feed_long_expand\":false,\"feed_long_expand.count\":200,\"feed_long_expand.br\":30,\"feed_content_line_break\":false,\"feed_link_use_url\":false,\"feed_unicode_emoji\":false,\"show_vote_result\":false,\"feed_no_custom_source\":false,\"view_edit_info\":false,\"view_article_inline\":false,\"link_with_face\":false,\"feed_view_original\":false,\"feed_view_original.open\":\"page\",\"feed_download_image\":false,\"feed_download_image.name\":\"index\",\"image_preview_all\":false,\"feed_no_animated_image\":false,\"feed_built_in_video_player\":false,\"feed_disable_tag_dialog\":false,\"feed_low_reading_warn\":false,\"feed_only_mode\":false,\"script_import_export\":false,\"script_update_whatsnew\":true,\"script_enable_debug\":false,\"script_debug_regex\":false,\"script_update_whatsnew.last\":84,\"script_update_whatsnew.lastWeibo\":6,\"filter_content_text_show.items\":[],\"filter_content_regex_show.items\":[],\"filter_author_id_show.items\":[],\"filter_original_id_show.items\":[],\"filter_mention_name_show.items\":[],\"filter_topic_text_show.items\":[],\"filter_source_text_show.items\":[],\"filter_content_text_hide.items\":[],\"filter_content_regex_hide.items\":[],\"filter_author_id_hide.items\":[],\"filter_original_id_hide.items\":[],\"filter_mention_name_hide.items\":[],\"filter_topic_text_hide.items\":[],\"filter_source_text_hide.items\":[],\"filter_content_text_fold.items\":[],\"filter_content_regex_fold.items\":[],\"filter_author_id_fold.items\":[],\"filter_original_id_fold.items\":[],\"filter_mention_name_fold.items\":[],\"filter_topic_text_fold.items\":[],\"filter_source_text_fold.items\":[]}","local::user6487367156Follow":"s{\"fetchData\":{\"weiboVersion\":6},\"lastList\":null,\"lastChange\":null}","local::user6487367156Hide":"s{\"hideList\":[]}","sync::globalConfig":"s{}","sync::user3655689037Config":"s{\"script_update_whatsnew.last\":58}","sync::user3655689037Follow":"s{}","sync::user3655689037Hide":"s{}","sync::user3739099753Config":"s{\"script_update_whatsnew.last\":63,\"filter_homepage_newest_feeds\":true,\"filter_homepage_single_group\":false,\"filter_homepage_multi_group\":false,\"clean_other_ads\":true,\"clean_other_music\":true,\"clean_other_template\":true,\"clean_other_home_tip\":true,\"clean_other_footer\":true,\"clean_other_im\":true,\"clean_other_im_news\":true,\"clean_other_back_top\":true,\"clean_other_tip\":true,\"clean_other_related_feeds\":true,\"clean_other_related_video\":true,\"clean_other_related_article\":true,\"clean_other_send_weibo\":true,\"clean_message_help\":true,\"clean_message_feedback\":true,\"clean_profile_hongbao\":true,\"clean_profile_wenwo_dr\":true,\"clean_profile_stats\":true,\"clean_profile_my_data\":true,\"clean_profile_edit_person_info\":false,\"clean_feed_promote_other\":true,\"clean_right_hongbao_rank\":true,\"clean_right_member\":true,\"clean_right_notice\":true,\"clean_right_recom_group_user\":true,\"clean_right_ranks\":true,\"clean_right_interest\":true,\"clean_middle_member_tip\":true,\"clean_left_v_plus\":true,\"clean_left_whisper\":true,\"clean_icons_zongyika\":false,\"clean_icons_taobao\":false,\"clean_icons_club\":false,\"clean_icons_approve_co\":false,\"clean_icons_level\":false,\"clean_icons_member\":false,\"clean_icons_approve_dead\":false,\"clean_icons_v_girl\":false,\"clean_icons_cheng\":false,\"clean_icons_others\":false,\"clean_icons_bigfun\":false,\"clean_icons_supervisor\":false,\"clean_icons_gongyi\":false,\"clean_icons_approve\":false,\"layout_nav_auto_hide\":false,\"clean_left_friends\":true,\"clean_left_group_to_me\":true,\"clean_left_tv\":true,\"clean_left_home\":false,\"clean_left_hot\":true,\"clean_left_level\":true,\"clean_left_like\":true,\"image_preview_all\":true,\"image_preview_all.count\":\"4x0\",\"filter_follow_check\":false,\"filter_follow_check.frequency\":259200000,\"uncheck_follow_presenter\":true,\"show_article_without_follow\":true,\"filter_homepage_auto_load\":false,\"filter_homepage_desktop_notify\":false,\"filter_profile_show_all\":false,\"filter_manually_hide\":false,\"pause_filter\":false,\"filter_original_discover\":false,\"filter_original_follower\":false,\"filter_my_feed\":true,\"filter_my_original\":false,\"filter_mention_me\":false,\"filter_ad_feed\":false,\"filter_fans_top\":false,\"filter_weibo_product\":false,\"filter_tb_tm_feed\":false,\"filter_weibo_pay\":false,\"filter_user_like\":false,\"filter_fake_weibo\":false,\"filter_deleted_forward\":false,\"filter_comment_and_forward\":false,\"filter_vote\":false,\"filter_red_pack\":false,\"filter_image_tag\":false,\"filter_koi_forward\":false,\"filter_app_item\":false,\"filter_wenda\":false,\"filter_wenwo_dr\":false,\"filter_yizhibo\":false,\"filter_paid\":false,\"filter_multiple_topics_feed\":false,\"filter_Place\":false,\"filter_Movie\":false,\"filter_Book\":false,\"filter_Topic\":false,\"filter_Music\":false,\"filter_Stock\":false,\"flooding_author\":false,\"flooding_forward\":false,\"comment_layout_by_time\":false,\"comment_layout_hide_sub\":false,\"filter_comment_show_my\":false,\"filter_comment_face_count\":false,\"filter_comment_face_type\":false,\"filter_comment_wo_content\":false,\"filter_comment_with_forward\":false,\"clean_follow_single\":false,\"clean_follow_at_me\":false,\"clean_follow_discover\":false,\"clean_follow_whisper\":false,\"clean_follow_video\":false,\"clean_follow_recommend\":false,\"clean_nav_logo_img\":false,\"clean_nav_main\":false,\"clean_nav_tv\":false,\"clean_nav_hot\":false,\"clean_nav_game\":false,\"clean_nav_hot_search\":false,\"clean_nav_notice_new\":false,\"clean_nav_new\":false,\"clean_left_fav\":false,\"clean_left_new_feed\":false,\"clean_left_special\":false,\"clean_left_new\":false,\"clean_left_news\":false,\"clean_left_count\":false,\"clean_middle_recommended_topic\":false,\"clean_middle_feed_recommend\":false,\"clean_right_info\":false,\"clean_right_hot_topic\":false,\"clean_right_groups\":false,\"clean_right_att_feed\":false,\"clean_feed_recommend\":false,\"clean_feed_feed_outer_tip\":false,\"clean_feed_feed_tip\":false,\"clean_feed_group_tip\":false,\"clean_feed_vip_background\":false,\"clean_feed_last_pic\":false,\"clean_feed_pic_tag\":false,\"clean_feed_son_title\":false,\"clean_feed_card\":false,\"clean_feed_article_pay\":false,\"clean_feed_tag\":false,\"clean_feed_related_link\":false,\"clean_feed_source\":false,\"clean_feed_pop\":false,\"clean_feed_like\":false,\"clean_feed_like_comment\":false,\"clean_feed_like_attitude\":false,\"clean_feed_forward\":false,\"clean_feed_favorite\":false,\"clean_feed_report\":false,\"clean_feed_use_card_background\":false,\"clean_profile_move_things\":false,\"clean_profile_cover\":false,\"clean_profile_bg_img\":false,\"clean_profile_badge_icon\":false,\"clean_profile_verify\":false,\"clean_profile_suggest_user\":false,\"clean_profile_group\":false,\"clean_profile_relation\":false,\"clean_profile_album\":false,\"clean_profile_hot_topic\":false,\"clean_profile_hot_weibo\":false,\"clean_profile_recommend_feed\":false,\"clean_profile_user_list\":false,\"clean_profile_timeline\":false,\"layout_nav_classical\":false,\"layout_nav_hide_name\":false,\"layout_left_messages\":false,\"layout_side_merge\":false,\"layout_side_position\":false,\"layout_side_show_all_groups\":false,\"layout_left_move\":true,\"layout_right_move\":true,\"layout_other_move\":true,\"chat_page_disable_unload_prompt\":false,\"font_family\":false,\"layout_avatar_shape\":false,\"layout_fast_face\":false,\"layout_locale_timezone\":false,\"feed_absolute_time\":false,\"layout_theme_apply\":false,\"layout_nav_dark\":false,\"layout_theme_color\":false,\"custom_css\":true,\"custom_css.css\":\"\",\"feed_no_space\":false,\"feed_source_at_bottom\":false,\"feed_author_content_nowrap\":false,\"feed_small_image\":false,\"feed_increase_width\":false,\"feed_button_order\":false,\"feed_button_order_comment\":false,\"feed_font_size\":false,\"feed_long_expand\":false,\"feed_content_line_break\":false,\"feed_link_use_url\":false,\"feed_unicode_emoji\":false,\"show_vote_result\":false,\"feed_no_custom_source\":false,\"view_edit_info\":false,\"view_article_inline\":false,\"feed_view_original\":false,\"feed_view_original.open\":\"page\",\"feed_download_image\":false,\"feed_download_image.name\":\"index\",\"image_preview_all.more\":\"text\",\"feed_no_animated_image\":false,\"feed_built_in_video_player\":false,\"feed_disable_tag_dialog\":false,\"feed_low_reading_warn\":false,\"feed_only_mode\":false,\"script_import_export\":false,\"script_update_whatsnew\":true,\"feed_built_in_video_player.volume\":100,\"feed_built_in_video_player.memorize\":false,\"feed_built_in_video_player.quality\":\"auto\",\"script_enable_debug\":false,\"script_debug_regex\":false,\"filter_content_text_show.items\":[],\"filter_content_regex_show.items\":[],\"filter_author_id_show.items\":[],\"filter_original_id_show.items\":[],\"filter_mention_name_show.items\":[],\"filter_topic_text_show.items\":[],\"filter_source_text_show.items\":[],\"filter_content_text_hide.items\":[],\"filter_content_regex_hide.items\":[],\"filter_author_id_hide.items\":[],\"filter_original_id_hide.items\":[],\"filter_mention_name_hide.items\":[],\"filter_topic_text_hide.items\":[],\"filter_source_text_hide.items\":[],\"filter_content_text_fold.items\":[],\"filter_content_regex_fold.items\":[],\"filter_author_id_fold.items\":[],\"filter_original_id_fold.items\":[],\"filter_mention_name_fold.items\":[],\"filter_topic_text_fold.items\":[],\"filter_source_text_fold.items\":[],\"filter_author_forward_id_show.items\":[],\"filter_author_forward_id_hide.items\":[],\"filter_author_forward_id_fold.items\":[]}","sync::user3739099753Follow":"s{\"fetchData\":{},\"lastList\":null,\"lastChange\":null}","sync::user3739099753Hide":"s{\"hideList\":[]}"},"ts":1641548080679},"enabled":true,"position":6,"file_url":"https://greasyfork.org/scripts/3249-yet-another-weibo-filter/code/Yet%20Another%20Weibo%20Filter.user.js","uuid":"a8266d90-a6a2-4069-98cc-32cac90ae263","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgIFlldCBBbm90aGVyIFdlaWJvIEZpbHRlcgovLyBAbmFtZTp6aCAgICAgICAgICAg6I2v5pa5IChZQVdGKQovLyBAbmFtZTp6aC1DTiAgICAgICAg6I2v5pa5IChZQVdGKQovLyBAbmFtZTp6aC1ISyAgICAgICAg6Jel5pa5IChZQVdGKQovLyBAbmFtZTp6aC1UVyAgICAgICAg6Jel5pa5IChZQVdGKQovLyBAbmFtZTplbiAgICAgICAgICAgWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyIChZQVdGKQovLyBAZGVzY3JpcHRpb24gICAgICAgU2luYSBXZWlibyBmZWVkIGZpbHRlciBieSBrZXl3b3JkcywgYXV0aG9ycywgdG9waWNzLCBzb3VyY2UsIGV0Yy47IE1vZGlmeWluZyB3ZWJwYWdlIGxheW91dAovLyBAZGVzY3JpcHRpb246emggICAgWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyIChZQVdGKSDmlrDmtarlvq7ljZrmoLnmja7lhbPplK7or43jgIHkvZzogIXjgIHor53popjjgIHmnaXmupDnrYnov4fmu6Tlvq7ljZrvvJvkv67mlLnniYjpnaIKLy8gQGRlc2NyaXB0aW9uOnpoLUNOIFlldCBBbm90aGVyIFdlaWJvIEZpbHRlciAoWUFXRikg5paw5rWq5b6u5Y2a5qC55o2u5YWz6ZSu6K+N44CB5L2c6ICF44CB6K+d6aKY44CB5p2l5rqQ562J6L+H5ruk5b6u5Y2a77yb5L+u5pS554mI6Z2iCi8vIEBkZXNjcmlwdGlvbjp6aC1ISyBZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXIgKFlBV0YpIOaWsOa1quW+ruWNmuagueaTmumXnOmNteipnuOAgeS9nOiAheOAgeipsemhjOOAgeS+hua6kOetieevqemBuOW+ruWNmu+8m+S/ruaUueeJiOmdogovLyBAZGVzY3JpcHRpb246emgtVFcgWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyIChZQVdGKSDmlrDmtarlvq7ljZrmoLnmk5rpl5zpjbXoqZ7jgIHkvZzogIXjgIHoqbHpoYzjgIHkvobmupDnrYnnr6npgbjlvq7ljZrvvJvkv67mlLnniYjpnaIKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFNpbmEgV2VpYm8gZmVlZCBmaWx0ZXIgYnkga2V5d29yZHMsIGF1dGhvcnMsIHRvcGljcywgc291cmNlLCBldGMuOyBNb2RpZnlpbmcgd2VicGFnZSBsYXlvdXQKLy8gQG5hbWVzcGFjZSAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS90aWFuc2gKLy8gQHZlcnNpb24gICAgICAgICAgIDQuMC45OAovLyBAbWF0Y2ggICAgICAgICAgICAgKjovLyoud2VpYm8uY29tLyoKLy8gQG1hdGNoICAgICAgICAgICAgICo6Ly90LmNuLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICo6Ly93ZWliby5jb20vKgovLyBAaW5jbHVkZSAgICAgICAgICAgKjovLyoud2VpYm8uY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICo6Ly90LmNuLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICo6Ly93ZWliby5jb20vYS9iaW5kLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICo6Ly9hY2NvdW50LndlaWJvLmNvbS8qCi8vIEBleGNsdWRlICAgICAgICAgICAqOi8va2VmdS53ZWliby5jb20vKgovLyBAZXhjbHVkZSAgICAgICAgICAgKjovL3Bob3RvLndlaWJvLmNvbS8qCi8vIEBleGNsdWRlICAgICAgICAgICAqOi8vc2VjdXJpdHkud2VpYm8uY29tLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICo6Ly92ZXJpZmllZC53ZWliby5jb20vKgovLyBAZXhjbHVkZSAgICAgICAgICAgKjovL3ZpcC53ZWliby5jb20vKgovLyBAZXhjbHVkZSAgICAgICAgICAgKjovL29wZW4ud2VpYm8uY29tLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICo6Ly9wYXNzcG9ydC53ZWliby5jb20vKgovLyBAbm9mcmFtZXMKLy8gQHJ1bi1hdCAgICAgICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBncmFudCAgICAgICAgICAgICBHTS5pbmZvCi8vIEBncmFudCAgICAgICAgICAgICBHTS54bWxIdHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgICAgICAgR00uYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lcgovLyBAZ3JhbnQgICAgICAgICAgICAgR00ubGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgICAgICAgR00uZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgICAgIEdNLnNldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgICBHTS5kZWxldGVWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgICAgR00ubm90aWZpY2F0aW9uCi8vIEBncmFudCAgICAgICAgICAgICBHTS5yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBncmFudCAgICAgICAgICAgICBHTV9pbmZvCi8vIEBncmFudCAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgICAgICAgR01fYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lcgovLyBAZ3JhbnQgICAgICAgICAgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgICBHTV9kZWxldGVWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgICAgR01fbm90aWZpY2F0aW9uCi8vIEBncmFudCAgICAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBub2NvbXBhdAovLyBAY29ubmVjdCAgICAgICAgICAgbWlhb3BhaS5jb20KLy8gQGNvbm5lY3QgICAgICAgICAgIHNpbmEuY24KLy8gQGNvbm5lY3QgICAgICAgICAgIHNpbmEuY29tLmNuCi8vIEBjb25uZWN0ICAgICAgICAgICBzaW5haW1nLmNuCi8vIEBjb25uZWN0ICAgICAgICAgICBzaW5hanMuY24KLy8gQGNvbm5lY3QgICAgICAgICAgIHQuY24KLy8gQGNvbm5lY3QgICAgICAgICAgIHdlaWJvLmNvbQovLyBAaWNvbiAgICAgICAgICAgICAgZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFFZ0FBQUJJQ0FNQUFBQmlNME4xQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUFGelVrZENBSzdPSE9rQUFBQmRVRXhVUlV4cGNlbU5TZW1OU2VtTlNlbU5TZW1OU2VtTlNlbU5TZW1OU2VtTlNka3RPdW1OU2VtTlNlbU5TZW1OU2VtTlNlbU5TZGt0T3RrdE90a3RPdGt0T3RrdE90a3RPdGt0T3RrdE90a3RPdGt0T3RrdE90a3RPdW1OU2RrdE9zWm9BaFVBQUFBZGRGSk9Vd0Fna0lBUTRNQkFZUEJBMEtBd2NMQlEwQkJnSUhEZ2dEQ3c4SkRBVDJjNnBRQUFBaUZKUkVGVVdNUE5sOWx5d3lBTVJjTU9NUWE3U2RNVi8vOW5OazRucVJjSmhPdk9WSTkrT0piRTVVb2NEbjhWckJOUnAzc283WVdSR3pCV0pTQWEzbFp5Zk1MQ1ZiRjR5a1ZqeWUxSmhWQjJqNFMrVVIwRnBCTWhOQ3VERWlsY0tJSWNqWlNpM0tPMFc2Y0tVZ2hVVUhMNW5rdEhKcVc4RUd6NmZ5VG1yN2RXODJER0s4K01FYjdaU0FMWU5pSWtVMjB1TW9EdTR0cTlqS3JaWW5sU0FDUy96WVNCdm5mYi9IenRNMDV1STYxMUZqZk9tTmI5WGdNSXFTazAxcGhnRFRUUjJncUJtL2o0cmZKZHFVK0sybEhIV2Y3c3NKVE0rb3pGdk1TRzFpVlY5RmJtS0FmWEVqeERVQzZLUVR5RFo3S1dOYUFaeVJMYWJVaU9xQWozQkI4bExab1NXSnZBNTZMRVV1b3F0eTJCcVpMRFNoSm9kUXpacGRDYmE4eXRINTNIclhVdTc3SzlScXlydk5hVjVwdEZRR1J5L1g3OENRS3BRZGF5NnpFTTAramZYbDVYcEFqWE5tdVNYb0RHdUh5Y005dE9CL01oMERWZWNDY1RpSEJoME5BL1lmdTNSazRCQVMxSUNnSVpFbWpva1MzVjFZS0daK1FlVjRNdVR6dUJwaW41WDRGNnNFZE5QV2g0MUNiQjQrL0lvQ1AwYjE0blNCd1VZQjlSMWFBV2ZnSnBFb2lCcTRkYldDY0JOUG01UUVhN0lKM2F6OVl3V2F6RDBtcFJ6dnQ2NFpzdTZIRTVYbERRMi93UkViVzM2RUFlVzBlNUlzV1hkTXlCemhXZ2tBSDFOVTl5ZHFENVVXbER1S2xyWTJVenVkc01xQytPWUw1d0JBVDBlU3FsOUNoT3l4eG9UT3BVcW00VXBiNnJhOGpFNWJYaXVUTms0N1FYaUU3NkFuYWNJbEpmMVc1WkFBQUFBRWxGVGtTdVFtQ0MKLy8gQGF1dGhvciAgICAgICAgICAgIOeUsOeUnyBodHRwOi8vd2VpYm8uY29tL3RzaDkwCi8vIEBsaWNlbnNlICAgICAgICAgICBNUEwtMi4wCi8vIEBob21lcGFnZVVSTCAgICAgICBodHRwczovL3RpYW5zaC5naXRodWIuaW8veWF3Zi8KLy8gQHN1cHBvcnRVUkwgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS90aWFuc2gveWF3Zi9pc3N1ZXMKLy8gPT0vVXNlclNjcmlwdD09CgovKiEKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiAqLwoKLy8jcmVnaW9uIGN1c3RvbSBpbXBsZW1lbnRhdGlvbiBHTTQgcG9seWZpbGwKLyogZ2xvYmFsIEdNICovCi8qIGdsb2JhbCBHTV9nZXRWYWx1ZSwgR01fc2V0VmFsdWUsIEdNX2xpc3RWYWx1ZXMsIEdNX2RlbGV0ZVZhbHVlIEdNX2FkZFZhbHVlQ2hhbmdlTGlzdGVuZXIgKi8KLyogZ2xvYmFsIEdNX2luZm8gR01feG1saHR0cFJlcXVlc3QsIEdNX25vdGlmaWNhdGlvbiwgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCAqLwo7IChmdW5jdGlvbiAoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgbGV0IGJhc2UgPSB7fTsKICB0cnkgewogICAgaWYgKHR5cGVvZiBHTSA9PT0gJ29iamVjdCcpIHsKICAgICAgYmFzZSA9IEdNOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICB9IGVsc2UgewogICAgICBHTSA9IGJhc2U7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIH0KICB9IGNhdGNoIChlKSB7IC8qIEdNIG5vdCByZWFkeSAqLyB9CgoKICBpZiAodHlwZW9mIGJhc2UuaW5mbyAhPT0gJ29iamVjdCcpIHsKICAgIHRyeSB7CiAgICAgIGJhc2UuaW5mbyA9IEdNX2luZm87CiAgICAgIGNvbnN0IHZlcnNpb24gPSBiYXNlLmluZm8uc2NyaXB0LnZlcnNpb247CiAgICAgIGNvbnN0IG51bWJlciA9IE51bWJlcih2ZXJzaW9uLnNwbGl0KCcuJylbMl0pOwogICAgICBpZiAoIW51bWJlcikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICB9IGNhdGNoIChpbmZvRXhjZXB0aW9uKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignR01faW5mbyBpcyBub3QgYXZhaWxhYmxlLicpOwogICAgfQogIH0KCiAgaWYgKHR5cGVvZiBiYXNlLmdldFZhbHVlICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX2dldFZhbHVlICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignR01fZ2V0VmFsdWUgaXMgbm90IGF2YWlsYWJsZS4nKTsKICAgIH0KICAgIGJhc2UuZ2V0VmFsdWUgPSBhc3luYyBmdW5jdGlvbiBnZXRWYWx1ZShuYW1lLCBkZWZhdWx0VmFsdWUpIHsKICAgICAgcmV0dXJuIEdNX2dldFZhbHVlKG5hbWUsIGRlZmF1bHRWYWx1ZSk7CiAgICB9OwogIH0KCiAgaWYgKHR5cGVvZiBiYXNlLnNldFZhbHVlICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX3NldFZhbHVlICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignR01fc2V0VmFsdWUgaXMgbm90IGF2YWlsYWJsZS4nKTsKICAgIH0KICAgIGJhc2Uuc2V0VmFsdWUgPSBhc3luYyBmdW5jdGlvbiBzZXRWYWx1ZShuYW1lLCB2YWx1ZSkgewogICAgICByZXR1cm4gR01fc2V0VmFsdWUobmFtZSwgdmFsdWUpOwogICAgfTsKICB9CgogIGlmICh0eXBlb2YgYmFzZS5saXN0VmFsdWVzICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX2xpc3RWYWx1ZXMgIT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdHTV9saXN0VmFsdWVzIGlzIG5vdCBhdmFpbGFibGUuJyk7CiAgICB9CiAgICBiYXNlLmxpc3RWYWx1ZXMgPSBhc3luYyBmdW5jdGlvbiBsaXN0VmFsdWVzKCkgewogICAgICByZXR1cm4gR01fbGlzdFZhbHVlcygpOwogICAgfTsKICB9CgogIGlmICh0eXBlb2YgYmFzZS5kZWxldGVWYWx1ZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgaWYgKHR5cGVvZiBHTV9kZWxldGVWYWx1ZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dNX2RlbGV0ZVZhbHVlIGlzIG5vdCBhdmFpbGFibGUuJyk7CiAgICB9CiAgICBiYXNlLmRlbGV0ZVZhbHVlID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlVmFsdWUobmFtZSkgewogICAgICByZXR1cm4gR01fZGVsZXRlVmFsdWUobmFtZSk7CiAgICB9OwogIH0KCiAgaWYgKHR5cGVvZiBiYXNlLmFkZFZhbHVlQ2hhbmdlTGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHsKICAgIGlmICh0eXBlb2YgR01fYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBHTS5hZGRWYWx1ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lcihuYW1lLCBjYWxsYmFjaykgewogICAgICAgIEdNX2FkZFZhbHVlQ2hhbmdlTGlzdGVuZXIobmFtZSwgY2FsbGJhY2spOwogICAgICB9OwogICAgfQogIH0KCiAgaWYgKHR5cGVvZiBiYXNlLnhtbEh0dHBSZXF1ZXN0ICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX3htbGh0dHBSZXF1ZXN0ICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignR01feG1saHR0cFJlcXVlc3QgaXMgbm90IGF2YWlsYWJsZS4nKTsKICAgIH0KICAgIEdNLnhtbEh0dHBSZXF1ZXN0ID0gZnVuY3Rpb24geG1sSHR0cFJlcXVlc3QoZGV0YWlscykgewogICAgICByZXR1cm4gR01feG1saHR0cFJlcXVlc3QoZGV0YWlscyk7CiAgICB9OwogIH0KCiAgaWYgKHR5cGVvZiBHTS5ub3RpZmljYXRpb24gIT09ICdmdW5jdGlvbicpIHsKICAgIGlmICh0eXBlb2YgR01fbm90aWZpY2F0aW9uID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIEdNLm5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIG5vdGlmaWNhdGlvbihkZXRhaWxzLCBvbmRvbmUpIHsKICAgICAgICByZXR1cm4gR01fbm90aWZpY2F0aW9uKGRldGFpbHMsIG9uZG9uZSk7CiAgICAgIH07CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBOb3RpZmljYXRpb24gPT09ICdmdW5jdGlvbicpIHsKICAgICAgR00ubm90aWZpY2F0aW9uID0gZnVuY3Rpb24gbm90aWZpY2F0aW9uKGRldGFpbHMsIG9uZG9uZSkgewogICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oZGV0YWlscy50aXRsZSwgewogICAgICAgICAgYm9keTogZGV0YWlscy50ZXh0LAogICAgICAgICAgaWNvbjogZGV0YWlscy5pbWFnZSwKICAgICAgICB9KTsKICAgICAgICBpZiAoZGV0YWlscy5vbmNsaWNrKSB7CiAgICAgICAgICBub3RpZmljYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRldGFpbHMub25jbGljaygpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChkZXRhaWxzLm9uZG9uZSkgewogICAgICAgICAgbm90aWZpY2F0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkZXRhaWxzLm9uZG9uZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0KCiAgaWYgKHR5cGVvZiBHTS5yZWdpc3Rlck1lbnVDb21tYW5kICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgR00ucmVnaXN0ZXJNZW51Q29tbWFuZCA9IGZ1bmN0aW9uIHJlZ2lzdGVyTWVudUNvbW1hbmQoY2FwdGlvbiwgY29tbWFuZEZ1bmMsIGFjY2Vzc0tleSkgewogICAgICAgIHJldHVybiBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKGNhcHRpb24sIGNvbW1hbmRGdW5jLCBhY2Nlc3NLZXkpOwogICAgICB9OwogICAgfQogIH0KCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gY3VzdG9tIGltcGxlbWVudGF0aW9uIGludGVyZXN0cwovKioKICog5Z+65pys5LiK5rKh5pyJ55So5oi35Lya5a+55YW06Laj5o6o6I2Q5oSf5YW06LajCiAqIOiAjOS4lOWFtOi2o+aOqOiNkOS8muWcqOayoeacieaYjuehruaPkOekuueUqOaIt+eahOaDheWGteS4i+WFs+azqOS4gOaJuei0puWPtwogKiDnlKjmiLflnKjmk43kvZzml7bnlJroh7PkuI3kvJrooqvmj5DnpLrlsIbkvJrlhbPms6jotKblj7fvvIzku6Xlj4rkvJrlhbPms6jlk6rkupvotKblj7cKICog5Zug5q2k6L+Z5Liq6ISa5pys6K+V5Zu+5bGP6JS96K+l6aG16Z2i77yM5LiU5LiN5Lya5o+Q5L6b5Lu75L2V6K6+572uCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGlmIChbCiAgICAnaHR0cHM6Ly93ZWliby5jb20vbmd1aWRlLycsCiAgICAnaHR0cHM6Ly93d3cud2VpYm8uY29tL25ndWlkZS8nLAogIF0uc29tZShwcmVmaXggPT4gbG9jYXRpb24uaHJlZi5zdGFydHNXaXRoKHByZWZpeCkpKSB7CiAgICBsb2NhdGlvbi5ocmVmID0gJy9ob21lJzsKICAgIHRocm93IG5ldyBFcnJvcignWUFXRiB8IG5ndWlkZSBwYWdlIGZvdW5kLCBza2lwIGZvbGxvd2luZyBleGVjdXRpb25zJyk7CiAgfQoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBjdXN0b20gaW1wbGVtZW50YXRpb24gbm9mcmFtZXMKOyAoZnVuY3Rpb24gKCkgewogIC8vIOS4jeaYr+avj+S4queMtOWtkOmDveaUr+aMgSBub2ZyYW1lc++8jOaJgOS7pemineWkluajgOafpeS4gOS4iwogIGlmICh0b3AgIT09IHNlbGYpIHRocm93IG5ldyBFcnJvcignWUFXRiB8IE5vdCBpbiB0b3AgZnJhbWUsIHN0b3AuJyk7Cn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcmVwbGFjZW1lbnQgb2YgeWFvZmFuZzovL2NvbW1vbi9nbG9iYWwvZW52LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgZW52ID0geWF3Zi5lbnYgPSB7fTsKCiAgZW52Lm5hbWUgPSAnVXNlclNjcmlwdCc7CgogIGNvbnN0IGNvbmZpZyA9IGVudi5jb25maWcgPSB7fTsKCiAgLy8gU1RLIOebuOWFs+aTjeS9nOaXoOazleaPkOS+m++8jOWboOS4uueMtOWtkOaXoOazleS/neivgSBkb2N1bWVudC1zdGFydAogIGNvbmZpZy5zdGtXcmFwU3VwcG9ydGVkID0gZmFsc2U7CiAgY29uZmlnLnN0a0luZm9TdXBwb3J0ZWQgPSBmYWxzZTsKICBjb25maWcuY29udGV4dE1lbnVTdXBwb3J0ZWQgPSBmYWxzZTsKICBjb25maWcucmVxdWVzdEJsb2NraW5nU3VwcG9ydGVkID0gZmFsc2U7CiAgY29uZmlnLmNoYXRJblBhZ2VTdXBwb3J0ZWQgPSBmYWxzZTsKCiAgY29uZmlnLmV4dGVybmFsTWVudVN1cHBvcnRlZCA9IEJvb2xlYW4oR00ucmVnaXN0ZXJNZW51Q29tbWFuZCk7CgogIGNvbmZpZy5jb25zb2xlUHJlZml4ID0gJ1lBV0YnOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiByZXBsYWNlbWVudCBvZiB5YW9mYW5nOi8vY29tbW9uL2Jyb3dzZXIvYnJvd3Nlci5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IGJyb3dzZXJJbmZvID0geWF3Zi5icm93c2VySW5mbyA9IHt9OwoKICBjb25zdCBicm93c2VyTmFtZSA9IFsnRmlyZWZveCcsICdDaHJvbWUnXS5maW5kKG5hbWUgPT4gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhuYW1lKSk7CiAgYnJvd3NlckluZm8ubmFtZSA9IGJyb3dzZXJOYW1lIHx8ICdVbmtub3duJzsKCiAgaWYgKGJyb3dzZXJOYW1lID09PSAnRmlyZWZveCcpIHsKICAgIHRyeSB7CiAgICAgIGJyb3dzZXJJbmZvLmZ1bGxWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRmlyZWZveFwvKFtcZC5dKykvKVsxXTsKICAgICAgYnJvd3NlckluZm8ubWFqb3JWZXJzaW9uID0gcGFyc2VJbnQoYnJvd3NlckluZm8uZnVsbFZlcnNpb24sIDEwKTsKICAgIH0gY2F0Y2ggKGZ4VWFFcnIpIHsgLyogaWdub3JlICovIH0KICB9CiAgaWYgKGJyb3dzZXJOYW1lID09PSAnQ2hyb21lJykgewogICAgdHJ5IHsKICAgICAgYnJvd3NlckluZm8uZnVsbFZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcLyhbXGQuXSspLylbMV07CiAgICAgIGJyb3dzZXJJbmZvLm1ham9yVmVyc2lvbiA9IHBhcnNlSW50KGJyb3dzZXJJbmZvLmZ1bGxWZXJzaW9uLCAxMCk7CiAgICB9IGNhdGNoIChDclVhRXJyKSB7IC8qIGlnbm9yZSAqLyB9CiAgfQoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29tbW9uL3V0aWwvZnVuY3Rvb2xzLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgPz8ge307CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCA/PyB7fTsKICBjb25zdCBmdW5jdG9vbHMgPSB1dGlsLmZ1bmN0b29scyA9IHV0aWwuZnVuY3Rvb2xzID8/IHt9OwoKICAvKioKICAgKiBAdGVtcGxhdGUgVAogICAqIEBwYXJhbSB7VCAmIEZ1bmN0aW9ufSBmCiAgICogQHJldHVybnMge1R9CiAgICovCiAgZnVuY3Rvb2xzLm9uY2UgPSBmdW5jdGlvbiAoZikgewogICAgbGV0IGV4ZWN1dGVkID0gZmFsc2UsIHZhbHVlID0gbnVsbDsKICAgIGNvbnN0IG5hbWUgPSBmLm5hbWUsIGxlbmd0aCA9IGYubGVuZ3RoOwogICAgY29uc3Qgd3JhcCA9IGZ1bmN0aW9uICguLi5hcmdzKSB7CiAgICAgIGlmIChleGVjdXRlZCkgcmV0dXJuIHZhbHVlOwogICAgICB2YWx1ZSA9IGYoLi4uYXJncyk7CiAgICAgIGYgPSBudWxsOwogICAgICBleGVjdXRlZCA9IHRydWU7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod3JhcCwgJ25hbWUnLCB7IGdldDogKCkgPT4gbmFtZSB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3cmFwLCAnbGVuZ3RoJywgeyBnZXQ6ICgpID0+IGxlbmd0aCB9KTsKICAgIHJldHVybiB3cmFwOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb21tb24vdXRpbC91cmxzLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgPz8ge307CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCA/PyB7fTsKICBjb25zdCB1cmxzID0gdXRpbC51cmxzID0gdXRpbC51cmxzID8/IHt9OwoKICAvKioKICAgKiBAcGFyYW0ge0Jsb2J9IGJsb2IKICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAqLwogIHVybHMuYmxvYlRvRGF0YVVybCA9IGZ1bmN0aW9uIChibG9iKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7CiAgICAgIH0pOwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTsKICAgIH0pOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwvcHJpb3JpdHkuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2YgPSB3aW5kb3cueWF3ZiA/PyB7fTsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsID0geWF3Zi51dGlsID8/IHt9OwoKICB1dGlsLnByaW9yaXR5ID0gewogICAgRklSU1Q6IDEwMDAsCiAgICBISUdIOiA1MDAsCiAgICBCRUZPUkU6IDEwMCwKICAgIERFRkFVTFQ6IDAsCiAgICBBRlRFUjogLTEwMCwKICAgIExPVzogLTUwMCwKICAgIExBU1Q6IC0xMDAwLAogIH07CgoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL2RlYnVnLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgPz8ge307CiAgY29uc3QgZW52ID0geWF3Zi5lbnY7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCA/PyB7fTsKCiAgY29uc3QgcHJlZml4ID0gZW52LmNvbmZpZy5jb25zb2xlUHJlZml4OwogIGNvbnN0IHBlbmRpbmcgPSBbXTsKICBjb25zdCBwZW5kaW5nT3V0cHV0ID0gKC4uLmFyZ3MpID0+IHsgcGVuZGluZy5wdXNoKGFyZ3MpOyB9OwogIGNvbnN0IG91dHB1dCA9IChtZXNzYWdlLCAuLi5hcmdzKSA9PiB7CiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7CiAgICAgIGNvbnNvbGUubG9nKGAke3ByZWZpeH0gfCAke21lc3NhZ2V9YCwgLi4uYXJncyk7CiAgICB9IGVsc2UgaWYgKG1lc3NhZ2UgIT09IHZvaWQgMCkgewogICAgICBjb25zb2xlLmxvZyhgJHtwcmVmaXh9IHxgLCBtZXNzYWdlLCAuLi5hcmdzKTsKICAgIH0KICB9OwogIGNvbnN0IG5vb3AgPSAoKSA9PiB7IH07CgogIGxldCBkZWJ1ZyA9IHBlbmRpbmdPdXRwdXQ7CiAgbGV0IGRlYnVnRW5hYmxlZCA9IG51bGw7CgoKICAvKiogQHR5cGUge01hcDxGdW5jdGlvbiwgbnVtYmVyPn0gKi8KICBjb25zdCB0aW1lVXNhZ2UgPSBuZXcgTWFwKCk7CiAgLyoqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYwogICAqLwogIHV0aWwucGVyZm9ybWFuY2UgPSBmdW5jdGlvbiAoZnVuYywgLi4uYXJncykgewogICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICBjb25zdCByZXN1bHQgPSBmdW5jKC4uLmFyZ3MpOwogICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lOwogICAgaWYgKGRlYnVnRW5hYmxlZCAhPT0gZmFsc2UpIHsKICAgICAgaWYgKCF0aW1lVXNhZ2UuaGFzKGZ1bmMpKSB0aW1lVXNhZ2Uuc2V0KGZ1bmMsIGR1cmF0aW9uKTsKICAgICAgZWxzZSB0aW1lVXNhZ2Uuc2V0KGZ1bmMsIHRpbWVVc2FnZS5nZXQoZnVuYykgKyBkdXJhdGlvbik7CiAgICAgIHNob3dQZXJmb3JtYW5jZSgpOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICBsZXQgc2hvd1BlcmZvcm1hbmNlUGVuZGluZyA9IG51bGw7CiAgY29uc3Qgc2hvd1BlcmZvcm1hbmNlID0gZnVuY3Rpb24gc2hvd1BlcmZvcm1hbmNlKCkgewogICAgaWYgKHNob3dQZXJmb3JtYW5jZVBlbmRpbmcgPT09IGZhbHNlKSB7CiAgICAgIHNob3dQZXJmb3JtYW5jZVBlbmRpbmcgPSB0cnVlOwogICAgfQogICAgaWYgKHNob3dQZXJmb3JtYW5jZVBlbmRpbmcpIHJldHVybjsKICAgIHNob3dQZXJmb3JtYW5jZVBlbmRpbmcgPSBmYWxzZTsKICAgIHV0aWwuZGVidWcoJ1BlcmZvcm1hbmNlIG1lYW5zdXJlOiAnLCB0aW1lVXNhZ2UpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHNob3dOZXh0ID0gc2hvd1BlcmZvcm1hbmNlUGVuZGluZyA9PT0gdHJ1ZTsKICAgICAgc2hvd1BlcmZvcm1hbmNlUGVuZGluZyA9IG51bGw7CiAgICAgIGlmIChzaG93TmV4dCkgc2hvd1BlcmZvcm1hbmNlKCk7CiAgICB9LCAxMGUzKTsKICB9OwoKICBjb25zdCBzZXRFbmFibGVkID0gZnVuY3Rpb24gKGVuYWJsZWQpIHsKICAgIGNvbnN0IG1lc3NhZ2VzID0gcGVuZGluZy5zcGxpY2UoMCk7CiAgICBkZWJ1Z0VuYWJsZWQgPSBlbmFibGVkOwogICAgaWYgKGVuYWJsZWQpIHsKICAgICAgbWVzc2FnZXMuZm9yRWFjaChhcmdzID0+IHsgb3V0cHV0KC4uLmFyZ3MpOyB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICBkZWJ1ZyA9IG91dHB1dDsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgfSBlbHNlIHsKICAgICAgdGltZVVzYWdlLmNsZWFyKCk7CiAgICAgIGRlYnVnID0gbm9vcDsKICAgIH0KICB9OwoKICB1dGlsLmRlYnVnID0gKC4uLmFyZ3MpID0+IGRlYnVnKC4uLmFyZ3MpOwogIHV0aWwuZGVidWcuc2V0RW5hYmxlZCA9IHNldEVuYWJsZWQ7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwvaTE4bi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmID8/IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgPz8ge307CgogIGxldCBsYW5ndWFnZSA9IHV0aWwubGFuZ3VhZ2UgPSBudWxsOwogIGNvbnN0IGkxOG4gPSBuZXcgUHJveHkoT2JqZWN0LmNyZWF0ZShudWxsKSwgewogICAgZ2V0OiAoc2VsZiwga2V5KSA9PiB7CiAgICAgIHJldHVybiAoc2VsZltrZXldIHx8IHt9KVtsYW5ndWFnZSB8fCAnY24nXSB8fCBudWxsOwogICAgfSwKICAgIHNldDogKHNlbGYsIGtleSwgdmFsdWUpID0+IHsKICAgICAgY29uc3QgZW50cnkgPSBzZWxmW2tleV0gPSB7fTsKICAgICAgZW50cnkuY24gPSB2YWx1ZS5jbjsKICAgICAgZW50cnkudHcgPSB2YWx1ZS50dyB8fCBlbnRyeS5jbjsKICAgICAgZW50cnkuaGsgPSB2YWx1ZS5oayB8fCBlbnRyeS50dzsKICAgICAgZW50cnkuZW4gPSB2YWx1ZS5lbiB8fCBlbnRyeS5jbjsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogIH0pOwoKICBpMThuLmxhbmd1YWdlID0gewogICAgZW46ICdlbicsCiAgICBjbjogJ2NuJywKICAgIGhrOiAnaGsnLAogICAgdHc6ICd0dycsCiAgfTsKICBpMThuLmxhbmd1YWdlQ29kZSA9IHsKICAgIGVuOiAnZW4nLAogICAgY246ICd6aC1DTicsCiAgICBoazogJ3poLUhLJywKICAgIHR3OiAnemgtVFcnLAogIH07CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1dGlsLCAnaTE4bicsIHsKICAgIGdldDogKCkgPT4gaTE4biwKICAgIHNldDogbGFuZyA9PiB7CiAgICAgIGNvbnN0IGxvd2VyID0gKCcnICsgbGFuZykudG9Mb3dlckNhc2UoKTsKICAgICAgaWYgKGxvd2VyID09PSAnemgtY24nKSBsYW5ndWFnZSA9ICdjbic7CiAgICAgIGVsc2UgaWYgKGxvd2VyID09PSAnemgtaGsnKSBsYW5ndWFnZSA9ICdoayc7CiAgICAgIGVsc2UgaWYgKGxvd2VyID09PSAnemgtdHcnKSBsYW5ndWFnZSA9ICd0dyc7CiAgICAgIGVsc2UgaWYgKGxvd2VyID09PSAnZW4nKSBsYW5ndWFnZSA9ICdlbic7CiAgICAgIGVsc2UgcmV0dXJuOwogICAgICB1dGlsLmxhbmd1YWdlID0gbGFuZ3VhZ2U7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL3N0cmluZ3MuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCA/PyB7fTsKCiAgY29uc3Qgc3RyaW5ncyA9IHV0aWwuc3RyaW5ncyA9IHt9OwoKICAvKioKICAgKiDlsIblvq7ljZrkuK3luKbmnInigJzkuIfigJ3miJbigJzkur/igJ3nmoTlrZfkuLLovazmjaLkuLrmlbDlrZcKICAgKiDlvq7ljZrnmoTigJzkuIfigJ3igJzkur/igJ3msqHmnInpkojlr7nkuI3lkIzor63oqIDlgZrlpITnkIbvvIznuYHkvZPlrZflkozoi7HmlofnlKjmiLfkuZ/kvJrnnIvliLDov5nkuKTkuKrlrZcKICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyCiAgICogQHJldHVybnMge251bWJlcn0KICAgKi8KICBzdHJpbmdzLnBhcnNlaW50ID0gc3RyID0+IHsKICAgIHJldHVybiBOdW1iZXIoc3RyLnJlcGxhY2UoJ+S4hycsICdlNCcpLnJlcGxhY2UoJ+S6vycsICdlOCcpKTsKICB9OwoKICAvKioKICAgKiDnlJ/miJDkuIDkuKrpmo/mnLrlrZfnrKbkuLIKICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAqLwogIHN0cmluZ3MucmFuZEtleSA9ICgpID0+IHsKICAgIGNvbnN0IHJhbmQgPSBuZXcgVWludDhBcnJheSg2NCk7CiAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHJhbmQpOwogICAgcmV0dXJuIFsuLi5yYW5kXS5tYXAodmFsdWUgPT4gdmFsdWUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIDApKS5qb2luKCcnKTsKICB9OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL2Nzcy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmID8/IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgPz8ge307CiAgY29uc3QgY3NzID0gdXRpbC5jc3MgPSB1dGlsLmNzcyA/PyB7fTsKCiAgY3NzLmFkZCA9IGZ1bmN0aW9uIChjc3MpIHsKICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBzdHlsZS50ZXh0Q29udGVudCA9IGNzczsKICAgIGxldCByZW1vdmVkID0gZmFsc2U7CiAgICBsZXQgcmVhZHkgPSBQcm9taXNlLnJlc29sdmUoKTsKICAgIGlmICh0YXJnZXQpIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICBlbHNlIHsKICAgICAgcmVhZHkgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGFkZFN0eWxlKCkgewogICAgICAgICAgaWYgKHJlbW92ZWQpIHsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAgICAgaWYgKCF0YXJnZXQpIHNldFRpbWVvdXQoYWRkU3R5bGUsIDEwKTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0KICAgIGNvbnN0IHJlbW92ZSA9ICgpID0+IHsKICAgICAgaWYgKCFzdHlsZS5wYXJlbnROb2RlKSByZXR1cm47CiAgICAgIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpOwogICAgICByZW1vdmVkID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBhcHBlbmQgPSBjc3MgPT4gewogICAgICBzdHlsZS50ZXh0Q29udGVudCArPSAnXG4nICsgY3NzOwogICAgfTsKICAgIHJldHVybiB7IGFwcGVuZCwgcmVtb3ZlLCByZWFkeSB9OwogIH07CgogIGNvbnN0IHN0eWxlID0gY3NzLmFkZCgnJyk7CiAgY3NzLmFwcGVuZCA9IGZ1bmN0aW9uIChjc3MpIHsKICAgIHN0eWxlLmFwcGVuZCgnXG4nICsgY3NzKTsKICB9OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL2luamVjdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmID8/IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgPz8ge307CgogIGNvbnN0IHN0cmluZ3MgPSB1dGlsLnN0cmluZ3M7CgogIGxldCBpZEluZGV4ID0gMDsKICBjb25zdCBpZCA9IHR5cGUgPT4gYCR7dHlwZX1fJHsrK2lkSW5kZXh9XyR7c3RyaW5ncy5yYW5kS2V5KCl9YDsKCiAgY29uc3QgYmFzZUtleSA9ICdfeWF3Zl8nICsgc3RyaW5ncy5yYW5kS2V5KCk7CiAgY29uc3QgcmVwbHlLZXkgPSBiYXNlS2V5ICsgJ19hY2snOwoKICBjbGFzcyBDYWxsYmFjayB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5pZCA9IGlkKCdjYWxsYmFjaycpOwogICAgfQogICAgaW52b2tlKC4uLnBhcmFtcykgewogICAgICBjb25zdCByZXNwID0gbmV3IEN1c3RvbUV2ZW50KHJlcGx5S2V5LCB7CiAgICAgICAgZGV0YWlsOiBKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdjYWxsYmFjaycsIGNhbGxiYWNrOiB0aGlzLmlkLCBwYXJhbXMgfSksCiAgICAgIH0pOwogICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChyZXNwKTsKICAgIH0KICB9OwoKICAvKiogQHR5cGUge01hcDxzdHJpbmcsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IGFueT59ICovCiAgY29uc3QgY2FsbGJhY2tzID0gbmV3IE1hcCgpOwogIGxldCBmaXJzdENhbGwgPSB0cnVlOwoKICBjb25zdCBpbml0ID0gZnVuY3Rpb24gKFtiYXNlS2V5LCByZXBseUtleV0pIHsKICAgIGxldCBpbnZva2VJbmRleCA9IDA7CiAgICAvKiogQHR5cGUge01hcDxudW1iZXIsICh2YWx1ZTogYW55KSA9PiBhbnk+fSAqLwogICAgY29uc3QgcmVzb2x2ZXIgPSBuZXcgTWFwKCk7CiAgICAvKiogQHR5cGUge01hcDxzdHJpbmcsIFNldDwoKSA9PiBhbnk+Pn0gKi8KICAgIGNvbnN0IGNhbGxiYWNrcyA9IG5ldyBNYXAoKTsKICAgIGNvbnN0IGludm9rZSA9IGZ1bmN0aW9uICh7IG1ldGhvZDoga2V5IH0pIHsKICAgICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uICguLi5wYXJhbXMpIHsKICAgICAgICBjb25zdCBpZCA9ICsraW52b2tlSW5kZXg7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICByZXNvbHZlci5zZXQoaWQsIHJlc29sdmUpOwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGJhc2VLZXksIHsKICAgICAgICAgIGRldGFpbDogSlNPTi5zdHJpbmdpZnkoeyBpZCwgbWV0aG9kOiBrZXksIHBhcmFtcyB9KSwKICAgICAgICB9KTsKICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgIH07CiAgICBjb25zdCBjYWxsYmFjayA9IGZ1bmN0aW9uICh7IGNhbGxiYWNrOiBrZXkgfSkgewogICAgICBjb25zdCBjb2xsZWN0aW9uID0gbmV3IFNldCgpOwogICAgICBjYWxsYmFja3Muc2V0KGtleSwgY29sbGVjdGlvbik7CiAgICAgIHJldHVybiB7CiAgICAgICAgYWRkQ2FsbGJhY2s6IGZ1bmN0aW9uIChmdW5jKSB7IGNvbGxlY3Rpb24uYWRkKGZ1bmMpOyB9LAogICAgICAgIHJlbW92ZUNhbGxiYWNrOiBmdW5jdGlvbiAoZnVuYykgeyBjb2xsZWN0aW9uLmRlbGV0ZShmdW5jKTsgfSwKICAgICAgfTsKICAgIH07CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihyZXBseUtleSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGNvbnN0IGRldGFpbCA9IEpTT04ucGFyc2UoZXZlbnQuZGV0YWlsKTsKICAgICAgaWYgKGRldGFpbC50eXBlID09PSAncmVzcG9uc2UnKSB7CiAgICAgICAgcmVzb2x2ZXIuZ2V0KGRldGFpbC5pZCkoZGV0YWlsLmVycm9yID8gUHJvbWlzZS5yZWplY3QoZGV0YWlsLmVycm9yKSA6IGRldGFpbC5yZXN1bHQpOwogICAgICAgIHJlc29sdmVyLmRlbGV0ZShkZXRhaWwuaWQpOwogICAgICB9IGVsc2UgaWYgKGRldGFpbC50eXBlID09PSAnY2FsbGJhY2snKSB7CiAgICAgICAgQXJyYXkuZnJvbShjYWxsYmFja3MuZ2V0KGRldGFpbC5jYWxsYmFjaykgPz8gW10pLmZvckVhY2goZnVuYyA9PiB7CiAgICAgICAgICB0cnkgeyBmdW5jKC4uLmRldGFpbC5wYXJhbXMpOyB9IGNhdGNoIChlKSB7IC8qICovIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBjb25zdCBydW4gPSBmdW5jdGlvbiAoZnVuYywgcGFyYW1zKSB7CiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocGFyYW1zLCBmdW5jdGlvbiAoa2V5LCB2YWwpIHsKICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIHZhbC5fdHlwZSA9PT0gJ21ldGhvZCcgJiYgdmFsLmludm9rZSA9PT0gYmFzZUtleSkgewogICAgICAgICAgcmV0dXJuIGludm9rZSh2YWwpOwogICAgICAgIH0gZWxzZSBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIHZhbC5fdHlwZSA9PT0gJ2NhbGxiYWNrJyAmJiB2YWwuaW52b2tlID09PSBiYXNlS2V5KSB7CiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodmFsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHZhbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gZnVuYyguLi5wYXJzZWQpOwogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csIGJhc2VLZXksIHsKICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHJ1biwKICAgIH0pOwogIH07CgogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGJhc2VLZXksIGZ1bmN0aW9uIChldmVudCkgewogICAgY29uc3QgZGV0YWlsID0gSlNPTi5wYXJzZShldmVudC5kZXRhaWwpOwogICAgY29uc3QgeyBpZCwgbWV0aG9kLCBwYXJhbXMgfSA9IGRldGFpbDsKICAgIGxldCByZXN1bHQgPSBudWxsLCBlcnJvciA9IG51bGw7CiAgICB0cnkgewogICAgICByZXN1bHQgPSBjYWxsYmFja3MuZ2V0KG1ldGhvZCkoLi4ucGFyYW1zKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZXJyb3IgPSBlOwogICAgfQogICAgY29uc3QgcmVzcCA9IG5ldyBDdXN0b21FdmVudChiYXNlS2V5ICsgJ19hY2snLCB7CiAgICAgIGRldGFpbDogSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAncmVzcG9uc2UnLCBpZCwgZXJyb3IsIHJlc3VsdCB9KSwKICAgIH0pOwogICAgd2luZG93LmRpc3BhdGNoRXZlbnQocmVzcCk7CiAgfSk7CgogIGNvbnN0IHNlcmlhbGl6ZSA9IGZ1bmN0aW9uIChwYXJhbSkgewogICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KEpTT04uc3RyaW5naWZ5KHBhcmFtLCBmdW5jdGlvbiAoa2V5LCB2YWwpIHsKICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBjb25zdCBrZXkgPSBpZCgnbWV0aG9kJyk7CiAgICAgICAgY2FsbGJhY2tzLnNldChrZXksIHZhbCk7CiAgICAgICAgcmV0dXJuIHsgX3R5cGU6ICdtZXRob2QnLCBtZXRob2Q6IGtleSwgaW52b2tlOiBiYXNlS2V5IH07CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgdmFsIGluc3RhbmNlb2YgQ2FsbGJhY2spIHsKICAgICAgICBjb25zdCBrZXkgPSB2YWwuaWQ7CiAgICAgICAgcmV0dXJuIHsgX3R5cGU6ICdjYWxsYmFjaycsIGNhbGxiYWNrOiBrZXksIGludm9rZTogYmFzZUtleSB9OwogICAgICB9CiAgICAgIHJldHVybiB2YWw7CiAgICB9KSk7CiAgfTsKCiAgdXRpbC5pbmplY3QgPSBmdW5jdGlvbiAoZnVuYywgLi4ucGFyYW1zKSB7CiAgICBpZiAodHlwZW9mIGZ1bmMgIT09ICdmdW5jdGlvbicpIHJldHVybiBQcm9taXNlLnJlamVjdCgpOwogICAgY29uc3Qgc2V0dXBTY3JpcHQgPSBmaXJzdENhbGwgPyBgKCR7aW5pdH0oJHtKU09OLnN0cmluZ2lmeShbYmFzZUtleSwgcmVwbHlLZXldKX0pKTtgIDogJyc7IGZpcnN0Q2FsbCA9IGZhbHNlOwogICAgY29uc3QgZXhlY3V0ZVNjcmlwdCA9IHNldHVwU2NyaXB0ICsgYHdpbmRvd1ske0pTT04uc3RyaW5naWZ5KGJhc2VLZXkpfV0oJHtmdW5jfSwke3NlcmlhbGl6ZShwYXJhbXMpfSk7YDsKICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnRleHRDb250ZW50ID0gZXhlY3V0ZVNjcmlwdDsKICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgIHJlc29sdmUoKTsKICAgICAgICBzY3JpcHQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChzY3JpcHQpOwogICAgICB9KTsKICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIGVsc2Ugc2V0VGltZW91dChmdW5jdGlvbiBpbmplY3RTY3JpcHQoKSB7CiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICBpZiAoIXRhcmdldCkgc2V0VGltZW91dChpbmplY3RTY3JpcHQsIDEwKTsKICAgICAgICBlbHNlIHRhcmdldC5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICB9LCAxMCk7CiAgICB9KTsKICB9OwogIHV0aWwuaW5qZWN0LkNhbGxiYWNrID0gQ2FsbGJhY2s7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwva2V5Ym9hcmQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2YgPSB3aW5kb3cueWF3ZiA/PyB7fTsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsID0geWF3Zi51dGlsID8/IHt9OwogIGNvbnN0IGtleWJvYXJkID0gdXRpbC5rZXlib2FyZCA9IHt9OwoKICBjb25zdCBDVFJMID0gMiAqKiAzMiwgU0hJRlQgPSBDVFJMICogMiwgQUxUID0gU0hJRlQgKiAyLCBNRVRBID0gQUxUICogMiwgS0VZID0gQ1RSTCAtIDEsIE1BWCA9IE1FVEEgKiAyIC0gMTsKICBjb25zdCBuYW1lbGlzdCA9ICcjMDsjMTsjMjtDYW5jZWw7IzQ7IzU7SGVscDsjNztCYWNrU3BhY2U7VEFCOyMxMDsjMTE7Q2xlYXI7RW50ZXI7RW50ZXJTcGVjaWFsOyMxNTs7OztQYXVzZTtDYXBzTG9jaztLYW5hO0Vpc3U7SnVuamE7RmluYWw7SGFuamE7IzI2O0VzYztDb252ZXJ0O05vbmNvbnZlcnQ7QWNjZXB0O01vZGVDaGFuZ2U7U3BhY2U7UGFnZVVwO1BhZ2VEb3duO0VuZDtIb21lO0xlZnQ7VXA7UmlnaHQ7RG93bjtTZWxlY3Q7UHJpbnQ7RXhlY3V0ZTtQcmludFNjcmVlbjtJbnNlcnQ7RGVsZXRlOyM0NzswOzE7MjszOzQ7NTs2Ozc7ODs5O0NvbG9uO1NlbWljb2xvbjtMZXNzVGhhbjtFcXVhbHM7R3JlYXRlclRoYW47UXVlc3Rpb25NYXJrO0F0O0E7QjtDO0Q7RTtGO0c7SDtJO0o7SztMO007TjtPO1A7UTtSO1M7VDtVO1Y7VztYO1k7WjtXaW47IzkyO0NvbnRleHRNZW51OyM5NDtTbGVlcDtOdW1QYWQwO051bVBhZDE7TnVtUGFkMjtOdW1QYWQzO051bVBhZDQ7TnVtUGFkNTtOdW1QYWQ2O051bVBhZDc7TnVtUGFkODtOdW1QYWQ5O011bHRpcGx5O0FkZDtTZXBhcmF0b3I7U3VidHJhY3Q7RGVjaW1hbDtEaXZpZGU7RjE7RjI7RjM7RjQ7RjU7RjY7Rjc7Rjg7Rjk7RjEwO0YxMTtGMTI7RjEzO0YxNDtGMTU7RjE2O0YxNztGMTg7RjE5O0YyMDtGMjE7RjIyO0YyMztGMjQ7IzEzNjsjMTM3OyMxMzg7IzEzOTsjMTQwOyMxNDE7IzE0MjsjMTQzO051bUxvY2s7U2Nyb2xsTG9jSztXSU5fT0VNX0ZKX0pJU0hPO1dJTl9PRU1fRkpfTUFTU0hPVTtXSU5fT0VNX0ZKX1RPVVJPS1U7V0lOX09FTV9GSl9MT1lBO1dJTl9PRU1fRkpfUk9ZQTsjMTUxOyMxNTI7IzE1MzsjMTU0OyMxNTU7IzE1NjsjMTU3OyMxNTg7IzE1OTtDaXJjdW1mbGV4O0V4Y2xhbWF0aW9uO0RvdWJsZVF1b3RlO0hhc2g7RG9sbGFyO1BlcmNlbnQ7QW1wZXJzYW5kO1VuZGVyc2NvcmU7T3BlblBhcmVuO0Nsb3NlUGFyZW47QXN0ZXJpc2s7UGx1cztQaXBlO0h5cGhlbk1pbnVzO09wZW5DdXJseUJyYWNrZXQ7Q2xvc2VDdXJseUJyYWNrZXQ7VGlsZGU7IzE3NzsjMTc4OyMxNzk7IzE4MDtWb2x1bWVNdXRlO1ZvbHVtZURvd247Vm9sdW1lVXA7IzE4NDsjMTg1OyMxODY7IzE4NztDb21tYTsjMTg5O1BlcmlvZDtTbGFzaDtCYWNrUXVvdGU7IzE5MzsjMTk0OyMxOTU7IzE5NjsjMTk3OyMxOTg7IzE5OTsjMjAwOyMyMDE7IzIwMjsjMjAzOyMyMDQ7IzIwNTsjMjA2OyMyMDc7IzIwODsjMjA5OyMyMTA7IzIxMTsjMjEyOyMyMTM7IzIxNDsjMjE1OyMyMTY7IzIxNzsjMjE4O09wZW5CcmFja2V0O0JhY2tTbGFzaDtDbG9zZUJyYWNrZXQ7UXVvdGU7IzIyMzs7QWx0R3I7IzIyNjtXSU5fSUNPX0hFTFA7V0lOX0lDT18wMDsjMjI5O1dJTl9JQ09fQ0xFQVI7IzIzMTsjMjMyO1dJTl9PRU1fUkVTRVQ7V0lOX09FTV9KVU1QO1dJTl9PRU1fUEExO1dJTl9PRU1fUEEyO1dJTl9PRU1fUEEzO1dJTl9PRU1fV1NDVFJMO1dJTl9PRU1fQ1VTRUw7V0lOX09FTV9BVFROO1dJTl9PRU1fRklOSVNIO1dJTl9PRU1fQ09QWTtXSU5fT0VNX0FVVE87V0lOX09FTV9FTkxXO1dJTl9PRU1fQkFDS1RBQjtBdHRuO0Nyc2VsO0V4c2VsO0VyZW9mO1BsYXk7Wm9vbTsjMjUyO1BBMTtXSU5fT0VNX0NMRUFSOyMyNTUnLnNwbGl0KCc7Jyk7CgogIC8vIOS4gOS6m+W4uOeUqOW4uOmHjwogIGtleWJvYXJkLmNvZGUgPSBPYmplY3QuYXNzaWduKC4uLm5hbWVsaXN0Lm1hcCgobmFtZSwgaW5kZXgpID0+ICh7IFtuYW1lLnRvVXBwZXJDYXNlKCldOiBpbmRleCB9KSkpOwogIGtleWJvYXJkLmFsdGVyID0geyBDVFJMLCBTSElGVCwgQUxULCBNRVRBLCBLRVksIE1BWCB9OwoKICAvLyDlr7nkuIDkuKrmjInplK7kuovku7blgZrnvJblj7cKICBrZXlib2FyZC5ldmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoIWU/LmtleUNvZGUpIHJldHVybiBudWxsOwogICAgcmV0dXJuIChlLmtleUNvZGUgPj4+IDApICsKICAgICAgZS5jdHJsS2V5ICogQ1RSTCArCiAgICAgIGUuc2hpZnRLZXkgKiBTSElGVCArCiAgICAgIGUuYWx0S2V5ICogQUxUICsKICAgICAgZS5tZXRhS2V5ICogTUVUQTsKICB9OwogIC8vIOe7meS4gOS4que8luWPt++8jOi9rOaNouS4uumUruWQjQogIGtleWJvYXJkLm5hbWUgPSBmdW5jdGlvbiAobikgewogICAgcmV0dXJuIFsKICAgICAgbiAvIENUUkwgJiAxID8gJ0N0cmwnIDogJycsCiAgICAgIG4gLyBTSElGVCAmIDEgPyAnU2hpZnQnIDogJycsCiAgICAgIG4gLyBBTFQgJiAxID8gJ0FsdCcgOiAnJywKICAgICAgbiAvIE1FVEEgJiAxID8gJ01ldGEnIDogJycsCiAgICAgIChuID4+PiAwKSA8IDI1NiA/IG5hbWVsaXN0W24gPj4+IDBdIDogYCMke24gPj4+IDB9YCwKICAgIF0uZmlsdGVyKHggPT4geCkuam9pbignLScpLnJlcGxhY2UoLy0kL2csICcnKTsKICB9OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL3VpLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgPz8ge307CgogIGNvbnN0IGtleWJvYXJkID0gdXRpbC5rZXlib2FyZDsKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBjb25zdCB1aSA9IHV0aWwudWkgPSB1dGlsLnVpID8/IHt9OwoKICBpMThuLm9rQnV0dG9uVGl0bGUgPSB7CiAgICBjbjogJ+ehruWumicsCiAgICB0dzogJ+eiuuWumicsCiAgICBlbjogJ0NvbmZpcm0nLAogIH07CiAgaTE4bi5jYW5jZWxCdXR0b25UaXRsZSA9IHsKICAgIGNuOiAn5Y+W5raIJywKICAgIHR3OiAn5Y+W5raIJywKICAgIGVuOiAnQ2FuY2VsJywKICB9OwogIGkxOG4uY2xvc2VCdXR0b25UaXRsZSA9IHsKICAgIGNuOiAn5YWz6ZetJywKICAgIHR3OiAn6Zec6ZaJJywKICAgIGVuOiAnQ2xvc2UnLAogIH07CgogIGNvbnN0IGRpYWxvZ1N0YWNrID0gW107CiAgLyoqCiAgICog5pi+56S65LiA5Liq5a+56K+d5qGGCiAgICogQHBhcmFtIHt7IGlkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIHJlbmRlcjogRnVuY3Rpb24sIGJ1dHRvbjogeyBbdHlwZTogc3RyaW5nXTogRnVuY3Rpb24/IH0/LCBiYXI6IGJvb2xlYW4/IH19CiAgICovCiAgdWkuZGlhbG9nID0gZnVuY3Rpb24gKHsgaWQsIHRpdGxlLCByZW5kZXIsIGJ1dHRvbiwgYmFyIH0pIHsKICAgIC8vIOWIneWni+WMliBET00KICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gYAo8ZGl2IGNsYXNzPSJXX2xheWVyIHlhd2YtZGlhbG9nIj4KICA8ZGl2IHRhYmluZGV4PSIwIj48L2Rpdj4KICA8ZGl2IGNsYXNzPSJjb250ZW50IiBub2RlLXR5cGU9ImF1dG9IZWlnaHQiPgogICAgPGRpdiBjbGFzcz0iV19sYXllcl90aXRsZSB5YXdmLWRpYWxvZy10aXRsZSIgbm9kZS10eXBlPSJ0aXRsZSI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJXX2xheWVyX2Nsb3NlIj48YSBjbGFzcz0iV19maWNvbiBmaWNvbl9jbG9zZSBTX2ZpY29uIHlhd2YtZGlhbG9nLWNsb3NlIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBub2RlLXR5cGU9ImNsb3NlIj5YPC9hPjwvZGl2PgogICAgPGRpdiBub2RlLXR5cGU9ImlubmVyIiBjbGFzcz0ieWF3Zi1kaWFsb2ctY29udGVudCI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJXX2xheWVyX2J0biBTX2JnMSB5YXdmLWRpYWxvZy1idXR0b25zIj4KICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgY2xhc3M9IldfYnRuX2EgYnRuXzM0cHggeWF3Zi1kaWFsb2ctYnV0dG9uLW9rIiBub2RlLXR5cGU9Im9rIiBhY3Rpb24tdHlwZT0ib2siPjxzcGFuPjwvc3Bhbj48L2E+CiAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIGNsYXNzPSJXX2J0bl9iIGJ0bl8zNHB4IHlhd2YtZGlhbG9nLWJ1dHRvbi1jYW5jZWwiIG5vZGUtdHlwZT0iY2FuY2VsIiBhY3Rpb24tdHlwZT0iY2FuY2VsIj48c3Bhbj48L3NwYW4+PC9hPgogICAgPC9kaXY+CiAgPC9kaXY+CjwvZGl2PgpgOwogICAgfSBlbHNlIHsKICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gYAo8ZGl2IGNsYXNzPSJ3b28tYm94LWZsZXggd29vLWJveC1hbGlnbkNlbnRlciB3b28tYm94LWp1c3RpZnlDZW50ZXIgd29vLW1vZGFsLXdyYXAiPgogIDxkaXYgY2xhc3M9Indvby1tb2RhbC1tYWluIHlhd2YtZGlhbG9nIj4KICAgIDxpIGNsYXNzPSJ3b28tZm9udCB3b28tZm9udC0tY3Jvc3MgeWF3Zi1kaWFsb2ctY2xvc2UiPjwvaT4KICAgIDxkaXYgY2xhc3M9Indvby1ib3gtZmxleCB3b28tYm94LWNvbHVtbiB3b28tYm94LWFsaWduQ2VudGVyIHdvby1kaWFsb2ctbWFpbiIgYXJpYS1tb2RhbD0idHJ1ZSIgdGFiaW5kZXg9IjAiIHJvbGU9ImFsZXJ0ZGlhbG9nIj4KICAgICAgPGRpdiBjbGFzcz0id29vLWRpYWxvZy10aXRsZSB5YXdmLWRpYWxvZy10aXRsZSI+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9Indvby1kaWFsb2ctYm9keSB5YXdmLWRpYWxvZy1jb250ZW50Ij4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9Indvby1kaWFsb2ctY3RybCB5YXdmLWRpYWxvZy1idXR0b25zIj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1saW5lIHdvby1idXR0b24tc2Vjb25kYXJ5IHdvby1idXR0b24tbSB3b28tYnV0dG9uLXJvdW5kIHdvby1kaWFsb2ctYnRuIHlhd2YtZGlhbG9nLWJ1dHRvbi1jYW5jZWwiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLXdyYXAiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLWNvbnRlbnQiPjwvc3Bhbj48L3NwYW4+PC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0id29vLWJ1dHRvbi1tYWluIHdvby1idXR0b24tZmxhdCB3b28tYnV0dG9uLXByaW1hcnkgd29vLWJ1dHRvbi1tIHdvby1idXR0b24tcm91bmQgd29vLWRpYWxvZy1idG4geWF3Zi1kaWFsb2ctYnV0dG9uLW9rIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi13cmFwIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi1jb250ZW50Ij48L3NwYW4+PC9zcGFuPjwvYnV0dG9uPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgogIDxkaXYgY2xhc3M9Indvby1tb2RhbC1tYXNrIHlhd2YtZGlhbG9nLW1hc2siPjwvZGl2Pgo8L2Rpdj4KYDsKICAgIH0KICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGUuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZCwgdHJ1ZSk7CiAgICBjb25zdCBkaWFsb2cgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZGlhbG9nJykgfHwgY29udGFpbmVyOwogICAgZGlhbG9nLmlkID0gaWQ7CiAgICBjb25zdCB0aXRsZU5vZGUgPSBkaWFsb2cucXVlcnlTZWxlY3RvcignLnlhd2YtZGlhbG9nLXRpdGxlJyk7CiAgICBjb25zdCBidXR0b25Db2xsZWN0aW9uTm9kZSA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcueWF3Zi1kaWFsb2ctYnV0dG9ucycpOwogICAgY29uc3Qgb2tCdXR0b24gPSBkaWFsb2cucXVlcnlTZWxlY3RvcignLnlhd2YtZGlhbG9nLWJ1dHRvbi1vaycpOwogICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWRpYWxvZy1idXR0b24tY2FuY2VsJyk7CiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcueWF3Zi1kaWFsb2ctY2xvc2UnKTsKICAgIGNvbnN0IG1hc2sgPSB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcgPyBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZGlhbG9nLW1hc2snKSA6IG51bGw7CiAgICBjb25zdCBjb250ZW50Tm9kZSA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcueWF3Zi1kaWFsb2ctY29udGVudCcpOwogICAgLy8g5aGr5YWl5YaF5a65CiAgICB0aXRsZU5vZGUudGV4dENvbnRlbnQgPSB0aXRsZTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgdGl0bGVOb2RlLmNsYXNzTGlzdC5hZGQoJ3dvby1kaWFsb2ctYmFyJyk7CiAgICB9CiAgICBva0J1dHRvbi50ZXh0Q29udGVudCA9IGkxOG4ub2tCdXR0b25UaXRsZTsKICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9IGkxOG4uY2FuY2VsQnV0dG9uVGl0bGU7CiAgICBjbG9zZUJ1dHRvbi50aXRsZSA9IGkxOG4uY2xvc2VCdXR0b25UaXRsZTsKICAgIHJlbmRlcihjb250ZW50Tm9kZSwgT2JqZWN0LmFzc2lnbih7fSwgLi4uWwogICAgICB7IGNsb3NlOiBjbG9zZUJ1dHRvbiB9LAogICAgICBidXR0b24/Lm9rID8geyBvazogb2tCdXR0b24gfSA6IHt9LAogICAgICBidXR0b24/LmNhbmNlbCA/IHsgY2FuY2VsOiBjYW5jZWxCdXR0b24gfSA6IHt9LAogICAgXSkpOwogICAgLy8g5a6a5L2N5a+56K+d5qGG55qE5L2N572uCiAgICBjb25zdCBsYXN0UG9zID0geyB4OiAwLCB5OiAwIH07CiAgICBjb25zdCBzZXRQb3MgPSBmdW5jdGlvbiAoeyB4LCB5IH0pIHsKICAgICAgY29uc3QgbGVmdCA9IE1hdGgubWluKE1hdGgubWF4KDAsIHgpLCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC0gZGlhbG9nLmNsaWVudFdpZHRoIC0gMik7CiAgICAgIGNvbnN0IHRvcCA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/CiAgICAgICAgTWF0aC5taW4oTWF0aC5tYXgod2luZG93LnBhZ2VZT2Zmc2V0LCB5KSwgd2luZG93LnBhZ2VZT2Zmc2V0ICsgd2luZG93LmlubmVySGVpZ2h0IC0gZGlhbG9nLmNsaWVudEhlaWdodCAtIDIpIDoKICAgICAgICBNYXRoLm1pbihNYXRoLm1heCgwLCB5KSwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQgLSBkaWFsb2cuY2xpZW50SGVpZ2h0IC0gMik7CiAgICAgIGlmIChsZWZ0ICsgJ3B4JyAhPT0gZGlhbG9nLnN0eWxlLmxlZnQpIGRpYWxvZy5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7CiAgICAgIGlmICh0b3AgKyAncHgnICE9PSBkaWFsb2cuc3R5bGUudG9wKSBkaWFsb2cuc3R5bGUudG9wID0gdG9wICsgJ3B4JzsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obGFzdFBvcywgeyB4OiBsZWZ0LCB5OiB0b3AgfSk7CiAgICB9OwogICAgLy8g572R6aG15rua5Yqo5pe257u05oyB5Zyo6aG16Z2i5YaFCiAgICBjb25zdCByZXNldFBvcyA9ICgpID0+IHsgc2V0UG9zKGxhc3RQb3MpOyB9OwogICAgY29uc3QgZHJhZ01vdmVTdGFydCA9IChmdW5jdGlvbiBtb3VzZURyYWcoKSB7CiAgICAgIGNvbnN0IG1vdXNlU3RhcnQgPSB7fTsKICAgICAgLy8g5ouW5ou956e75YqoCiAgICAgIGNvbnN0IGRyYWdNb3ZlID0gZXZlbnQgPT4gewogICAgICAgIHNldFBvcyh7CiAgICAgICAgICB4OiBldmVudC5zY3JlZW5YIC0gbW91c2VTdGFydC54LAogICAgICAgICAgeTogZXZlbnQuc2NyZWVuWSAtIG1vdXNlU3RhcnQueSwKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLy8g5ouW5ou957uT5p2fCiAgICAgIGNvbnN0IGRyYWdNb3ZlRG9uZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnTW92ZSk7CiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGRyYWdNb3ZlRG9uZSk7CiAgICAgICAgZGlhbG9nLmNsYXNzTGlzdC5yZW1vdmUoJ3lhd2YtZHJhZycpOwogICAgICAgIGlmIChkaWFsb2cucmVsZWFzZUNhcHR1cmUpIHsgZGlhbG9nLnJlbGVhc2VDYXB0dXJlKCk7IH0KICAgICAgfTsKICAgICAgLy8g5byA5aeL5ouW5ou9CiAgICAgIGNvbnN0IGRyYWdNb3ZlU3RhcnQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIE9iamVjdC5hc3NpZ24obW91c2VTdGFydCwgewogICAgICAgICAgeDogZS5zY3JlZW5YIC0gbGFzdFBvcy54LAogICAgICAgICAgeTogZS5zY3JlZW5ZIC0gbGFzdFBvcy55LAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWdNb3ZlKTsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhZ01vdmVEb25lKTsKICAgICAgICBkaWFsb2cuY2xhc3NMaXN0LmFkZCgneWF3Zi1kcmFnJyk7CiAgICAgIH07CiAgICAgIHJldHVybiBkcmFnTW92ZVN0YXJ0OwogICAgfSgpKTsKICAgIC8vIOagh+mimOagj+WPr+S7peaLluaLvQogICAgaWYgKHRpdGxlTm9kZSkgewogICAgICB0aXRsZU5vZGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZHJhZ01vdmVTdGFydCk7CiAgICB9CiAgICAvLyDog4zmma/pga7nvakKICAgIGNvbnN0IGNvdmVyID0geWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgOiBudWxsOwogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICBjb3Zlci5zZXRBdHRyaWJ1dGUoJ25vZGUtdHlwZScsICdvdXRlcicpOwogICAgICBjb3Zlci5jbGFzc05hbWUgPSAneWF3Zi1kaWFsb2ctb3V0ZXInOwogICAgfQogICAgLy8g5ZON5bqU6byg5qCHCiAgICBpZiAoIWJ1dHRvbj8ub2sgJiYgIWJ1dHRvbj8uY2FuY2VsKSB7CiAgICAgIGJ1dHRvbkNvbGxlY3Rpb25Ob2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYnV0dG9uQ29sbGVjdGlvbk5vZGUpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKGJ1dHRvbi5vaykgb2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICBidXR0b24ub2soKTsKICAgICAgfSk7CiAgICAgIGVsc2UgYnV0dG9uQ29sbGVjdGlvbk5vZGUucmVtb3ZlQ2hpbGQob2tCdXR0b24pOwogICAgICBpZiAoYnV0dG9uLmNhbmNlbCkgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgYnV0dG9uLmNhbmNlbCgpOwogICAgICB9KTsKICAgICAgZWxzZSBidXR0b25Db2xsZWN0aW9uTm9kZS5yZW1vdmVDaGlsZChjYW5jZWxCdXR0b24pOwogICAgfQogICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgIChidXR0b24/LmNsb3NlID8/IGhpZGUpKCk7CiAgICB9KTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgbWFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgIChidXR0b24/LmNsb3NlID8/IGhpZGUpKCk7CiAgICAgIH0pOwogICAgfQogICAgLy8g5ZON5bqU5oyJ6ZSuCiAgICBjb25zdCBrZXlzID0gZXZlbnQgPT4gewogICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICBpZiAoZGlhbG9nU3RhY2tbZGlhbG9nU3RhY2subGVuZ3RoIC0gMV0gIT09IGRpYWxvZykgcmV0dXJuOwogICAgICBjb25zdCBjb2RlID0ga2V5Ym9hcmQuZXZlbnQoZXZlbnQpOwogICAgICBpZiAoY29kZSA9PT0ga2V5Ym9hcmQuY29kZS5FTlRFUiAmJiBidXR0b24gJiYgYnV0dG9uLm9rKSBidXR0b24ub2soZXZlbnQpOwogICAgICBlbHNlIGlmIChjb2RlID09PSBrZXlib2FyZC5jb2RlLkVTQykgewogICAgICAgIChidXR0b24/LmNhbmNlbCA/PyBidXR0b24/LmNsb3NlID8/IGhpZGUpKGV2ZW50KTsKICAgICAgfSBlbHNlIHJldHVybjsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9OwogICAgY29uc3Qgc3RvcEtleXMgPSBldmVudCA9PiB7CiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgfTsKICAgIC8vIOWFs+mXreWvueivneahhgogICAgY29uc3QgaGlkZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgZGlhbG9nLmNsYXNzTGlzdC5hZGQoJ1VJX2FuaW1hdGVkJywgJ1VJX3NwZWVkX2Zhc3QnLCAnVUlfYW5pX2JvdW5jZU91dCcpOwogICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5cyk7CiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHN0b3BLZXlzKTsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzZXRQb3MpOwogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzZXRQb3MpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNvdmVyKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGNvbnRhaW5lci5yZW1vdmUoKTsgfSwgMjAwKTsKICAgICAgZGlhbG9nU3RhY2suc3BsaWNlKGRpYWxvZ1N0YWNrLmluZGV4T2YoZGlhbG9nKSwgMSk7CiAgICB9OwogICAgY29uc3QgcmVzZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICh7IHgsIHkgfSA9IHt9KSB7CiAgICAgIGlmICh4ID09IG51bGwpIHggPSAod2luZG93LmlubmVyV2lkdGggLSBkaWFsb2cuY2xpZW50V2lkdGgpIC8gMjsKICAgICAgaWYgKHkgPT0gbnVsbCkgeSA9ICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBkaWFsb2cuY2xpZW50SGVpZ2h0KSAvIDI7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBzZXRQb3MoeyB4LCB5OiB5ICsgd2luZG93LnBhZ2VZT2Zmc2V0IH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFBvcyh7IHgsIHkgfSk7CiAgICAgIH0KICAgIH07CiAgICAvLyDmmL7npLrlr7nor53moYYKICAgIGNvbnN0IHNob3cgPSBmdW5jdGlvbiAoeyB4LCB5IH0gPSB7fSkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvdmVyKTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpOwogICAgICByZXNldFBvc2l0aW9uKHsgeCwgeSB9KTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleXMpOwogICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBzdG9wS2V5cyk7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHJlc2V0UG9zKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2V0UG9zKTsKICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBkaWFsb2cuY2xhc3NMaXN0LnJlbW92ZSgnVUlfYW5pX2JvdW5jZU91dCcpOwogICAgICAgIGRpYWxvZy5jbGFzc0xpc3QuYWRkKCdVSV9hbmltYXRlZCcsICdVSV9zcGVlZF9mYXN0JywgJ1VJX2FuaV9ib3VuY2VJbicpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgZGlhbG9nLmNsYXNzTGlzdC5yZW1vdmUoJ1VJX2FuaW1hdGVkJywgJ1VJX3NwZWVkX2Zhc3QnLCAnVUlfYW5pX2JvdW5jZUluJyk7CiAgICAgICAgfSwgMjAwKTsKICAgICAgfQogICAgICBkaWFsb2dTdGFjay5wdXNoKGRpYWxvZyk7CiAgICB9OwogICAgcmV0dXJuIHsgaGlkZSwgc2hvdywgcmVzZXRQb3NpdGlvbiwgZG9tOiBkaWFsb2cgfTsKICB9OwoKICBjb25zdCBwcmVkZWZpbmVkRGlhbG9nID0gKGJ1dHRvbnMsIHsgaWNvbjogZGVmYXVsdEljb24gfSkgPT4gewogICAgLyoqCiAgICAgKiBpY29uIHBhcmFtIGlzIGRlcHJlY2F0ZWQgaW4gdjcKICAgICAqIEBwYXJhbSB7eyBpZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcsIGljb246IHN0cmluZyB9fQogICAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj8+fQogICAgICovCiAgICBjb25zdCBpbm5lciA9ICh7IGlkLCB0aXRsZSwgdGV4dCwgaWNvbiA9IGRlZmF1bHRJY29uIH0pID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICBjb25zdCByZW5kZXIgPSBmdW5jdGlvbiAoZG9tKSB7CiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpOwogICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGAKPGRpdiBjbGFzcz0ibGF5ZXJfcG9pbnQiPgogIDxkbCBjbGFzcz0icG9pbnQgY2xlYXJmaXgiPgogICAgPGR0IG5vZGUtdHlwZT0iaWNvbiI+PHNwYW4gY2xhc3M9IldfaWNvbiB5YXdmLWRpYWxvZy1pY29uIj48L3NwYW4+PC9kdD4KICAgIDxkZCBub2RlLXR5cGU9InRleHQiPjxwIGNsYXNzPSJTX3R4dDEgeWF3Zi1kaWFsb2ctdGV4dCI+PC9wPjwvZGQ+CiAgPC9kbD4KPC9kaXY+CmA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGAKPGRpdiBjbGFzcz0id29vLWRpYWxvZy1tZXNzYWdlIHlhd2YtZGlhbG9nLXRleHQiPjwvZGl2PgpgOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLCB0cnVlKTsKICAgICAgICBjb25zdCBpY29uRWxlbWVudCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnlhd2YtZGlhbG9nLWljb24nKTsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICBpY29uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGBpY29uXyR7aWNvbn1CYCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHRleHRFbGVtZW50ID0geWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gY29udGVudC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1kaWFsb2ctdGV4dCcpIDogY29udGVudDsKICAgICAgICB0ZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgICAgZG9tLmFwcGVuZENoaWxkKGNvbnRlbnQpOwogICAgICB9OwogICAgICBjb25zdCB2YWx1ZSA9IHJlc3VsdCA9PiAoKSA9PiB7CiAgICAgICAgZGlhbG9nLmhpZGUoKTsKICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgIH07CiAgICAgIGNvbnN0IGJ1dHRvbiA9IE9iamVjdC5hc3NpZ24oewogICAgICAgIGNsb3NlOiB2YWx1ZShudWxsKSwKICAgICAgfSwgLi4uT2JqZWN0LmtleXMoYnV0dG9ucykubWFwKGtleSA9PiAoewogICAgICAgIFtrZXldOiB2YWx1ZShidXR0b25zW2tleV0pLAogICAgICB9KSkpOwogICAgICBjb25zdCBkaWFsb2cgPSB1aS5kaWFsb2coeyBpZCwgdGl0bGUsIHJlbmRlciwgYnV0dG9uIH0pOwogICAgICBkaWFsb2cuc2hvdygpOwogICAgfSk7CiAgICByZXR1cm4gaW5uZXI7CiAgfTsKCiAgdWkuYWxlcnQgPSBwcmVkZWZpbmVkRGlhbG9nKHsgb2s6IHRydWUgfSwgeyBpY29uOiAnYXNrJyB9KTsKICB1aS5jb25maXJtID0gcHJlZGVmaW5lZERpYWxvZyh7IG9rOiB0cnVlLCBjYW5jZWw6IGZhbHNlIH0sIHsgaWNvbjogJ3F1ZXN0aW9uJyB9KTsKCiAgLyoqCiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gYnViYmxlQ29udGVudAogICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHJlZmVyZW5jZQogICAqLwogIHVpLmJ1YmJsZSA9IGZ1bmN0aW9uIChidWJibGVDb250ZW50LCByZWZlcmVuY2UpIHsKICAgIGNvbnN0IGJ1YmJsZSA9IChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGAKPGRpdiBjbGFzcz0iV19sYXllciBXX2xheWVyX3BvcCB5YXdmLWJ1YmJsZSI+CiAgPGRpdiBjbGFzcz0iY29udGVudCBsYXllcl9taW5pX2luZm8iPgogICAgPGRpdiBjbGFzcz0ibWFpbl90eHQgeWF3Zi1idWJibGUtdGV4dCI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJXX2xheWVyX2Fycm93Ij48c3BhbiBjbGFzcz0iV19hcnJvd19ib3IiIG5vZGUtdHlwZT0iYXJyb3ciPjxpIGNsYXNzPSJTX2xpbmUzIj48L2k+PGVtIGNsYXNzPSJTX2JnMl9iciI+PC9lbT48L3NwYW4+PGRpdj48L2Rpdj48L2Rpdj4KICA8L2Rpdj4KPC9kaXY+CmA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gYAo8ZGl2IGNsYXNzPSJ3b28tcG9wLW1haW4geWF3Zi1idWJibGUiPgo8ZGl2IGNsYXNzPSJ5YXdmLWJ1YmJsZS10ZXh0Ij48L2Rpdj4KPC9kaXY+CmA7CiAgICAgIH0KICAgICAgY29uc3QgYnViYmxlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLCB0cnVlKTsKICAgICAgaWYgKCEoYnViYmxlQ29udGVudCBpbnN0YW5jZW9mIE5vZGUpKSB7CiAgICAgICAgYnViYmxlQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGJ1YmJsZUNvbnRlbnQgKyAnJyk7CiAgICAgIH0KICAgICAgYnViYmxlLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWJ1YmJsZS10ZXh0JykuYXBwZW5kQ2hpbGQoYnViYmxlQ29udGVudCk7CiAgICAgIHJldHVybiBidWJibGU7CiAgICB9KCkpOwogICAgY29uc3QgYXJyb3cgPSB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPyBidWJibGUucXVlcnlTZWxlY3RvcignLldfYXJyb3dfYm9yJykgOiBudWxsOwogICAgY29uc3QgcmVmZXJlbmNlTGlzdCA9IFtdOwogICAgY29uc3QgZGVCb3VuZCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICBsZXQgYnVzeSA9IGZhbHNlOwogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChidXN5KSByZXR1cm47IGJ1c3kgPSB0cnVlOwogICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gewogICAgICAgICAgYnVzeSA9IGZhbHNlOwogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgIH07CiAgICBjb25zdCB0cmFja1Njcm9sbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICBmb3IgKGxldCByZWYgPSByZWZlcmVuY2U7IHJlZjsgcmVmID0gcmVmLm9mZnNldFBhcmVudCkgewogICAgICAgIHJlZmVyZW5jZUxpc3QucHVzaChyZWZlcmVuY2UpOwogICAgICAgIHJlZi5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjYWxsYmFjayk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBkZVRyYWNrU2Nyb2xsID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgIHJlZmVyZW5jZUxpc3Quc3BsaWNlKDApLmZvckVhY2gocmVmID0+IHsKICAgICAgICByZWYucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgY2FsbGJhY2spOwogICAgICB9KTsKICAgIH07CiAgICBjb25zdCB1cGRhdGVQb3NpdGlvbiA9IGRlQm91bmQoZnVuY3Rpb24gKCkgewogICAgICBjb25zdCByZWN0ID0gcmVmZXJlbmNlLmdldENsaWVudFJlY3RzKClbMF07CiAgICAgIGlmICghcmVjdCkgcmV0dXJuOwogICAgICBjb25zdCB0b3AwID0gcmVjdC50b3AgLSBidWJibGUuY2xpZW50SGVpZ2h0IC0gODsKICAgICAgY29uc3QgdG9wMSA9IHRvcDAgKyB3aW5kb3cucGFnZVlPZmZzZXQ7CiAgICAgIGNvbnN0IHRvcDIgPSByZWN0LmJvdHRvbSArIDggKyB3aW5kb3cucGFnZVlPZmZzZXQ7CiAgICAgIGNvbnN0IGxlZnQgPSB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPwogICAgICAgIHJlY3QubGVmdCAtIDMyICsgcmVjdC53aWR0aCArIHdpbmRvdy5wYWdlWE9mZnNldCA6CiAgICAgICAgcmVjdC5sZWZ0IC0gYnViYmxlLmNsaWVudFdpZHRoIC8gMiArIHJlY3Qud2lkdGggKyB3aW5kb3cucGFnZVhPZmZzZXQ7CiAgICAgIGNvbnN0IGF0VG9wID0gdG9wMCA+IDA7CiAgICAgIGNvbnN0IHRvcCA9IGF0VG9wID8gdG9wMSA6IHRvcDI7CiAgICAgIGlmIChwYXJzZUludChidWJibGUuc3R5bGUubGVmdCwgMTApICE9PSBsZWZ0KSB7CiAgICAgICAgYnViYmxlLnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JzsKICAgICAgfQogICAgICBpZiAocGFyc2VJbnQoYnViYmxlLnN0eWxlLnRvcCwgMTApICE9PSB0b3ApIHsKICAgICAgICBidWJibGUuc3R5bGUudG9wID0gdG9wICsgJ3B4JzsKICAgICAgfQogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgY29uc3QgYWRkQ2xhc3MgPSBhdFRvcCA/ICdXX2Fycm93X2Jvcl9iJyA6ICdXX2Fycm93X2Jvcl90JzsKICAgICAgICBjb25zdCByZW1vdmVDbGFzcyA9IGF0VG9wID8gJ1dfYXJyb3dfYm9yX3QnIDogJ1dfYXJyb3dfYm9yX2InOwogICAgICAgIGlmICghYXJyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKGFkZENsYXNzKSkgewogICAgICAgICAgYXJyb3cuY2xhc3NMaXN0LmFkZChhZGRDbGFzcyk7CiAgICAgICAgfQogICAgICAgIGlmIChhcnJvdy5jbGFzc0xpc3QuY29udGFpbnMocmVtb3ZlQ2xhc3MpKSB7CiAgICAgICAgICBhcnJvdy5jbGFzc0xpc3QucmVtb3ZlKHJlbW92ZUNsYXNzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgY29uc3Qgc2hvdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidWJibGUpOwogICAgICBkZVRyYWNrU2Nyb2xsKHVwZGF0ZVBvc2l0aW9uKTsKICAgICAgdHJhY2tTY3JvbGwodXBkYXRlUG9zaXRpb24pOwogICAgICB1cGRhdGVQb3NpdGlvbigpOwogICAgfTsKICAgIGNvbnN0IGhpZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGRlVHJhY2tTY3JvbGwodXBkYXRlUG9zaXRpb24pOwogICAgICBpZiAoYnViYmxlLnBhcmVudE5vZGUpIHsKICAgICAgICBidWJibGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChidWJibGUpOwogICAgICB9CiAgICB9OwogICAgbGV0IG1vdXNlSW4gPSBudWxsOwogICAgY29uc3QgZW50ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmIChtb3VzZUluID09PSBudWxsKSBzaG93KCk7CiAgICAgICAgbW91c2VJbiA9IHRydWU7CiAgICAgIH0sIDApOwogICAgfTsKICAgIGNvbnN0IGxlYXZlID0gZnVuY3Rpb24gKCkgewogICAgICBtb3VzZUluID0gZmFsc2U7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChtb3VzZUluID09PSBmYWxzZSkgewogICAgICAgICAgaGlkZSgpOwogICAgICAgICAgbW91c2VJbiA9IG51bGw7CiAgICAgICAgfQogICAgICB9LCAzMDApOwogICAgfTsKICAgIHJlZmVyZW5jZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZW50ZXIpOwogICAgYnViYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBlbnRlcik7CiAgICByZWZlcmVuY2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGxlYXZlKTsKICAgIGJ1YmJsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgbGVhdmUpOwogIH07CgogIC8vIFY3IG9ubHkKICBjb25zdCBpY29ucyA9IHsKICAgIGNoZWNrYm94OiAnPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMCAwdjE2aDE2VjBIMHptMTQuMzk4IDIuOWEuNjY3LjY2NyAwIDAgMSAuNTIzIDEuMTI5bC04LjY4NiA4LjYwNGMtLjI2LjI1OC0uNjc3LjI1OC0uOTM3IDBMMS40MDggOC43OGEuNjY3LjY2NyAwIDEgMSAuOTM5LS45NDdsMy40MiAzLjM5IDguMjE1LTguMTRhLjY2Ny42NjcgMCAwIDEgLjQxNi0uMTgyeiIvPjwvc3ZnPicsCiAgICBzdWNjZXNzOiAnPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTUxMiAwYTUxMiA1MTIgMCAxIDAgMCAxMDI0QTUxMiA1MTIgMCAxIDAgNTEyIDB6bTI2NS4zOTMgMjkyLjAwNmMxNi43NS0uMiAzMy40MTcgNS45MTMgNDYuMDIzIDE4LjQxOCAyNS4yNCAyNS4wMzggMjQuNjk0IDY2LjEzNC0xLjE3NiA5MS43OTVMNTA5LjgzNiA3MTIuMDhhNjYuOTUgNjYuOTUgMCAwIDEtNDMuMjkzIDE5LjQ2N2wtLjE5LjAxYTYzLjA2IDYzLjA2IDAgMCAxLTcuNTg0LjQ0M2MtMTcuODEyIDAtMzMuOTM4LTcuMTY4LTQ1LjYwNC0xOC43NTRsLTIxMy4yMi0yMTEuNTA0QzE4OC44MzggNDkwLjI1IDE4MiA0NzQuNjIzIDE4MiA0NTcuNDEyYzAtMzUuNCAyOC45My02NC4xIDY0LjYyLTY0LjEgMTcuMzUgMCAzMy4xMDcgNi43ODMgNDQuNzE1IDE3LjgyMmwxNjkuNTggMTY4LjIxN0w3MzAuODc3IDMxMS42YzEyLjkzNS0xMi44MyAyOS43NjYtMTkuMzc0IDQ2LjUxNi0xOS41ODR6Ii8+PC9zdmc+JywKICAgIHdhcm46ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNTEyIDBhNTEyIDUxMiAwIDEgMCAwIDEwMjRBNTEyIDUxMiAwIDEgMCA1MTIgMHptLTEuMzQ2IDE1MmwyLjcyLjA1NXYuMDAybC4xMzUuMDA0YzM2LjU5MyAxLjUxIDY1LjgwMyAzMS45IDY1LjgwMyA2OS4xOTMgMCAzNy4yNC0yOS4xNDIgNjcuNjE3LTY1LjgxNiA2OS4xOTNsLjA3LS4wMDItLjEzNy4wMDZjLjAyMi0uMDAxLjA0NC0uMDAzLjA2Ni0uMDA0YTY4LjYgNjguNiAwIDAgMS0yLjg0LjA1OWMtMzcuOTE3IDAtNjguNjU0LTMxLjAwNC02OC42NTQtNjkuMjUyUzQ3Mi43MzcgMTUyIDUxMC42NTQgMTUyem0yLjcyIDI0OS4yNjhjMzcuODgyIDAgNjguNjI3IDMxLjYyMiA2OC42MjcgNzAuNjF2MzI5LjU2OEM1ODIgODQwLjM3OCA1NTEuMjU1IDg3MiA1MTMuMzczIDg3MmMtMzcuOTM3IDAtNjguNjI3LTMxLjYyMi02OC42MjctNzAuNTU1VjQ3MS44NzdjMC0zOC45ODcgMzAuNy03MC42MSA2OC42MjctNzAuNjF6Ii8+PC9zdmc+JywKICAgIGVycm9yOiAnPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTUxMiAwYTUxMiA1MTIgMCAxIDAgMCAxMDI0QTUxMiA1MTIgMCAxIDAgNTEyIDB6bS0xLjM3MyAxNTJjMzcuOTM3IDAgNjguNjI3IDMxLjYyMiA2OC42MjcgNzAuNTU1djMyOS41NjhjMCAzOC45ODctMzAuNyA3MC42MS02OC42MjcgNzAuNjEtMzcuODgyIDAtNjguNjI3LTMxLjYyMi02OC42MjctNzAuNjFWMjIyLjU1NUM0NDIgMTgzLjYyMiA0NzIuNzQ1IDE1MiA1MTAuNjI3IDE1MnptMi43MiA1ODEuNDk0YzM3LjkxNyAwIDY4LjY1NCAzMS4wMDQgNjguNjU0IDY5LjI1MlM1NTEuMjYzIDg3MiA1MTMuMzQ2IDg3MmE2Ni42OSA2Ni42OSAwIDAgMS0yLjcxOS0uMDU1di0uMDAybC0uMTM1LS4wMDRjLTM2LjU5My0xLjUxLTY1LjgwMy0zMS45LTY1LjgwMy02OS4xOTMgMC0zNy4yNCAyOS4xNDItNjcuNjE3IDY1LjgxNi02OS4xOTNsLS4wNy4wMDIuMTM3LS4wMDZjLS4wMjIuMDAxLS4wNDQuMDAzLS4wNjYuMDA0YTY4LjYgNjguNiAwIDAgMSAyLjg0LS4wNTl6Ii8+PC9zdmc+JywKICAgIGhlbHA6ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNTEyIDBhNTEyIDUxMiAwIDEgMCAwIDEwMjRBNTEyIDUxMiAwIDEgMCA1MTIgMHptMy42OCAxNjJjNTkuNiAwIDExNC42MTMgMjEuMzYgMTUxLjMwNyA1NC4wNkM3MDMuNjUzIDI0Ny44MzIgNzIyIDI5MS40MjQgNzIyIDM0Ni44MDNjMCA0NS40MTUtMTEuOTIgODIuNjMyLTMzLjkyIDExMS43MS01LjczMyA2LjI2LTIwLjI0IDE5Ljk1OC00My4yIDQwLjQybC00My44MTQgMzkuNDA4QzU3MS4zNiA1NjkuNzggNTYwIDYwMC40ODUgNTYwIDYyMi4yNjZ2MTIuNzE1aC0uMTA3Yy0xLjc2IDI3LjItMjQuNTg3IDQ4LjctNTIuNDggNDguN3MtNTAuNzItMjEuNTAyLTUyLjQ4LTQ4LjdoLS4zOTh2LTEyLjcxNWMwLTM0LjUyNCA1LjQ5Mi01Mi4zNDcgMTguMzQ2LTc2Ljg4IDExLjkyLTI0LjUwNCA0Ni40NTMtNjIuMzY4IDEwNi4wNTMtMTE1LjAyNWwxMS4wMTQtMTIuNzE1YzE2LjUwNi0xOS45ODUgMjQuNzczLTQxLjc2NSAyNC43NzMtNjQuNDczIDAtMjkuOTc4LTguMjY2LTU2Ljg5Ny0yNC43NzMtNzQuMTU4LTE3LjQxMy0xNy4yMzQtNDMuMDkyLTMzLjA5Mi03NC4yNjYtMzMuMDkyLTQwLjM3MyAwLTY4LjggMjIuNzktODYuMjEzIDQ4LjIyLTE1LjYgMjAuODgzLTIyLjkzNCA1MC44Ni0yMi45MzQgODguOTggMCAyOC42MDItMjMuMzg4IDUxLjc1OC01Mi4yNjggNTEuNzU4LTI4Ljg1MyAwLTUyLjI2Ni0yMy4xNTYtNTIuMjY2LTUxLjc1OCAwLTY3LjE5NiAxOS4yNTMtMTE5Ljg1IDU5LjYtMTU3Ljk5NkM0MDEuMDQgMTg3IDQ0Ny44MTMgMTYyIDUxNS42OCAxNjJ6bS04LjI3IDU3My4yNDJhNTguMDggNTguMDggMCAwIDEgMS43OTEuMDI5YzMyLjcwNS43NDcgNTguOTQ3IDI4LjgzIDU4Ljk0NyA2My4zNjNzLTI2LjI0MiA2Mi42MTctNTguODggNjMuMzYzbC0uMDY2LjAwMnYtLjAzYy0uNTM0LjAxOC0xLjE2LjAzLTEuNzkuMDMtMzMuMjU1IDAtNjAuMjE1LTI4LjM3NS02MC4yMTUtNjMuMzhzMjYuOTYtNjMuMzggNjAuMjE1LTYzLjM4eiIvPjwvc3ZnPicsCiAgfTsKICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7CiAgdWkuaWNvbiA9IGZ1bmN0aW9uICh0eXBlKSB7CiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpY29ucywgdHlwZSkpIHJldHVybiBudWxsOwogICAgcmV0dXJuIHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaWNvbnNbdHlwZV0sICdpbWFnZS9zdmcreG1sJyk7CiAgfTsKCiAgY3NzLmFwcGVuZChgCi55YXdmLVdCVjYgLnlhd2YtZGlhbG9nLXRpdGxlIHsKICBjdXJzb3I6IG1vdmU7Cn0KLnlhd2YtV0JWNiAueWF3Zi1kaWFsb2ctb3V0ZXIgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDBweDsKICBsZWZ0OiAwcHg7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IG5vbmUgcmVwZWF0IHNjcm9sbCAwJSAwJSByZ2IoMCwgMCwgMCk7CiAgb3BhY2l0eTogMC4zOwogIHotaW5kZXg6IDk5OTk7Cn0KLnlhd2YtV0JWNiAueWF3Zi1kaWFsb2cueWF3Zi1kcmFnIHsKICBvcGFjaXR5OiAwLjY3OwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICB1c2VyLXNlbGVjdDogbm9uZTsKfQoueWF3Zi1XQlY2IC55YXdmLWJ1YmJsZSB7CiAgbWF4LXdpZHRoOiA0MDBweDsKfQpgKTsKCiAgY3NzLmFwcGVuZChgCi55YXdmLVdCVjcgLnlhd2YtZGlhbG9nIHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdHJhbnNpdGlvbjogbm9uZTsKfQoueWF3Zi1XQlY3IC55YXdmLWRpYWxvZyAud29vLWRpYWxvZy1tYWluIHsKICBtYXgtd2lkdGg6IG5vbmU7Cn0KLnlhd2YtV0JWNyAueWF3Zi1kaWFsb2ctdGV4dCB7CiAgbWF4LXdpZHRoOiA0MDBweDsKfQoueWF3Zi1XQlY3IC55YXdmLWRpYWxvZy10aXRsZSB7CiAgY3Vyc29yOiBtb3ZlOwp9Ci55YXdmLVdCVjcgLnlhd2YtZGlhbG9nLW91dGVyIHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiAwcHg7CiAgbGVmdDogMHB4OwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBiYWNrZ3JvdW5kOiBub25lIHJlcGVhdCBzY3JvbGwgMCUgMCUgcmdiKDAsIDAsIDApOwogIG9wYWNpdHk6IDAuMzsKICB6LWluZGV4OiA5OTk5Owp9Ci55YXdmLVdCVjcgLnlhd2YtZGlhbG9nLnlhd2YtZHJhZyB7CiAgb3BhY2l0eTogMC42NzsKICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7CiAgdXNlci1zZWxlY3Q6IG5vbmU7Cn0KLnlhd2YtV0JWNyAueWF3Zi1idWJibGUgewogIG1heC13aWR0aDogNDAwcHg7CiAgZm9udC1zaXplOiAxNHB4OwogIHBhZGRpbmc6IDhweCAxNnB4OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KLnlhd2YtV0JWNyAueWF3Zi1kaWFsb2ctY2xvc2UgewogIHBhZGRpbmc6IDhweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAxMHB4OwogIHJpZ2h0OiAxMHB4OwogIHotaW5kZXg6IDE7CiAgY3Vyc29yOiBwb2ludGVyOwp9CmApOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL2RvbS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmID8/IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgPz8ge307CiAgY29uc3QgZG9tID0gdXRpbC5kb20gPSB1dGlsLmRvbSA/PyB7fTsKCgogIC8qKgogICAqIEBwYXJhbSB7c3RyaW5nfSBodG1sCiAgICogQHJldHVybnMge0RvY3VtZW50RnJhZ21lbnR9CiAgICovCiAgY29uc3QgcGFyc2VIdG1sID0gZnVuY3Rpb24gKGh0bWwpIHsKICAgIGNvbnN0IHRhZyA9ICdzdHVwaWQtaW5uZXItaHRtbC1hc3NpZ24tdmFsaWRhdG9yJzsKICAgIGNvbnN0IHBhaXJlZCA9IGA8JHt0YWd9PmAgKyBodG1sICsgYDwvJHt0YWd9PmA7CiAgICBjb25zdCBkb20gPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHBhaXJlZCwgJ3RleHQvaHRtbCcpOwogICAgY29uc3QgcmVzdWx0ID0gZG9tLnF1ZXJ5U2VsZWN0b3IodGFnKTsKICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgd2hpbGUgKHJlc3VsdC5maXJzdENoaWxkKSBmcmFnbWVudC5hcHBlbmRDaGlsZChyZXN1bHQuZmlyc3RDaGlsZCk7CiAgICByZXR1cm4gZnJhZ21lbnQ7CiAgfTsKCiAgLyoqCiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50CiAgICogQHBhcmFtIHtzdHJpbmd9IGlubmVySHRtbAogICAqLwogIGNvbnN0IHN0dXBpZElubmVySHRtbEFzc2lnbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBpbm5lckh0bWwpIHsKICAgIGNvbnN0IGZyYWdtZW50ID0gcGFyc2VIdG1sKGlubmVySHRtbCk7CiAgICBlbGVtZW50LmlubmVySFRNTCA9ICcnOwogICAgZWxlbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7CiAgICByZXR1cm4gZWxlbWVudDsKICB9OwogIGRvbS5jb250ZW50ID0gc3R1cGlkSW5uZXJIdG1sQXNzaWduOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL3RpbWUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2YgPSB3aW5kb3cueWF3ZiA/PyB7fTsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsID0geWF3Zi51dGlsID8/IHt9OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IHRpbWUgPSB1dGlsLnRpbWUgPSB7fTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICB0aW1lTW9udGhEYXk6IHsgY246ICd7MX3mnIh7Mn3ml6UgezN9Ons0fScsIGVuOiAnezF9LXsyfSB7M306ezR9JyB9LAogICAgdGltZVRvZGF5OiB7IGNuOiAn5LuK5aSpJywgdHc6ICfku4rlpKknLCBlbjogJ1RvZGF5JyB9LAogICAgdGltZU1pbnV0ZUJlZm9yZTogeyBjbjogJ+WIhumSn+WJjScsIHR3OiAn5YiG6ZCY5YmNJywgZW46ICcgbWlucyBhZ28nIH0sCiAgICB0aW1lU2Vjb25kQmVmb3JlOiB7IGNuOiAn56eS5YmNJywgdHc6ICfnp5LliY0nLCBlbjogJyBzZWNzIGFnbycgfSwKICB9KTsKCiAgY29uc3QgdGltZVRvUGFydHMgPSAodGltZSwgbG9jYWxlID0gJ2N1cnJlbnQnKSA9PiB7CiAgICBjb25zdCBvZmZzZXQgPSBsb2NhbGUgPT09ICdjdXJyZW50JyA/IG5ldyBEYXRlKHRpbWUpLmdldFRpbWV6b25lT2Zmc2V0KCkgOgogICAgICBsb2NhbGUgPT09ICdjc3QnID8gLTQ4MCA6IDA7CiAgICByZXR1cm4gbmV3IERhdGUodGltZSAtIG9mZnNldCAqIDZlNCkudG9JU09TdHJpbmcoKS5tYXRjaCgvXGQrL2cpOwogIH07CgogIHRpbWUucGFyc2UgPSBmdW5jdGlvbiAodGV4dCkgewogICAgbGV0IHBhcnNlRGF0ZSA9IG51bGw7CiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpOwogICAgY29uc3QgW2N5LCBjbSwgY2RdID0gdGltZVRvUGFydHMobm93LCAnY3N0Jyk7CiAgICBpZiAoL15cZCstXGQrLVxkKyBcZCs6XGQrJC8udGVzdCh0ZXh0KSkgewogICAgICBjb25zdCBbeSwgbSwgZCwgaCwgdV0gPSB0ZXh0Lm1hdGNoKC9cZCsvZyk7CiAgICAgIHBhcnNlRGF0ZSA9IERhdGUuVVRDKHksIG0gLSAxLCBkLCBoLCB1KSAtIDI4OGU1OwogICAgfSBlbHNlIGlmICgvXig/OlxkKy1cZCt8XGQr5pyIXGQr5pelKVxzKlxkKzpcZCskLy50ZXN0KHRleHQpKSB7CiAgICAgIGNvbnN0IFttLCBkLCBoLCB1XSA9IHRleHQubWF0Y2goL1xkKy9nKTsKICAgICAgcGFyc2VEYXRlID0gRGF0ZS5VVEMoY3ksIG0gLSAxLCBkLCBoLCB1KSAtIDI4OGU1OwogICAgfSBlbHNlIGlmICgvXig/OuS7iuWkqXx0b2RheSlccypcZCs6XGQrJC9pLnRlc3QodGV4dCkpIHsKICAgICAgY29uc3QgW2gsIHVdID0gdGV4dC5tYXRjaCgvXGQrL2cpOwogICAgICBwYXJzZURhdGUgPSBEYXRlLlVUQyhjeSwgY20gLSAxLCBjZCwgaCwgdSkgLSAyODhlNTsKICAgIH0gZWxzZSBpZiAoL15ccypcZCtccyooPzrliIbpkp/liY185YiG6ZCY5YmNfG1pbnMgYWdvKS8udGVzdCh0ZXh0KSkgewogICAgICBjb25zdCBtaW4gPSB0ZXh0Lm1hdGNoKC9cZCsvZyk7CiAgICAgIHBhcnNlRGF0ZSA9IG5vdyAtIG1pbiAqIDZlNDsKICAgIH0gZWxzZSBpZiAoL15ccypcZCtccyooPzrnp5LliY18c2VjcyBhZ28pLy50ZXN0KHRleHQpKSB7CiAgICAgIGNvbnN0IHNlYyA9IHRleHQubWF0Y2goL1xkKy9nKTsKICAgICAgcGFyc2VEYXRlID0gbm93IC0gc2VjICogMWUzOwogICAgfQogICAgcmV0dXJuIHBhcnNlRGF0ZSA/IG5ldyBEYXRlKHBhcnNlRGF0ZSkgOiBudWxsOwogIH07CgogIGNvbnN0IGZvcm1hdHRlciA9IEludGwuRGF0ZVRpbWVGb3JtYXQoCiAgICB7IGNuOiAnemgtQ04nLCBoazogJ3poLUhLJywgdHc6ICd6aC1UVycsIGVuOiAnZW4tVVMnIH1bdXRpbC5sYW5ndWFnZV0sCiAgICB7CiAgICAgIHllYXI6ICdudW1lcmljJywKICAgICAgbW9udGg6ICdudW1lcmljJywKICAgICAgZGF5OiAnbnVtZXJpYycsCiAgICAgIHdlZWtkYXk6ICdsb25nJywKICAgICAgaG91cjogJzItZGlnaXQnLAogICAgICBtaW51dGU6ICcyLWRpZ2l0JywKICAgICAgdGltZVpvbmVOYW1lOiAnbG9uZycsCiAgICB9CiAgKTsKCiAgY29uc3Qgbm93ID0gdGltZS5ub3cgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5ub3coKSAtIHRpbWUuZGlmZik7CiAgfTsKCiAgdGltZS5mb3JtYXQgPSBmdW5jdGlvbiAodGltZSwgeyBmb3JtYXQgPSAnYXV0bycsIGxvY2FsZSA9ICdjdXJyZW50JyB9ID0ge30pIHsKICAgIGNvbnN0IHJlZiA9IG5vdygpOwogICAgY29uc3QgW2l5LCBpbSwgaWQsIGloLCBpdV0gPSB0aW1lVG9QYXJ0cyh0aW1lLCBsb2NhbGUpOwogICAgY29uc3QgW255LCBubSwgbmQsIG5oLCBfbnVdID0gdGltZVRvUGFydHMocmVmLCBsb2NhbGUpOwogICAgY29uc3QgZGlmZiA9IChyZWYgLSB0aW1lKSAvIDFlMzsKICAgIGlmIChmb3JtYXQgPT09ICdmdWxsJykgewogICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdCh0aW1lKTsKICAgIH0gZWxzZSBpZiAoaXkgIT09IG55IHx8IGZvcm1hdCA9PT0gJ3llYXInKSB7CiAgICAgIHJldHVybiBgJHtpeX0tJHtpbX0tJHtpZH0gJHtpaH06JHtpdX1gOwogICAgfSBlbHNlIGlmIChpbSAhPT0gbm0gfHwgaWQgIT09IG5kIHx8IGZvcm1hdCA9PT0gJ21vbnRoJykgewogICAgICByZXR1cm4gaTE4bi50aW1lTW9udGhEYXkucmVwbGFjZSgvXHtcZFx9L2csIG4gPT4gWytpbSwgK2lkLCBpaCwgaXVdW25bMV0gLSAxXSk7CiAgICB9IGVsc2UgaWYgKGloICE9PSBuaCAmJiBkaWZmID4gMzYwMCB8fCBmb3JtYXQgPT09ICd0b2RheScpIHsKICAgICAgcmV0dXJuIGAke2kxOG4udGltZVRvZGF5fSAke2lofToke2l1fWA7CiAgICB9IGVsc2UgaWYgKGRpZmYgPiA1MCB8fCBmb3JtYXQgPT09ICdtaW51dGUnKSB7CiAgICAgIHJldHVybiBNYXRoLmNlaWwoZGlmZiAvIDYwKSArIGkxOG4udGltZU1pbnV0ZUJlZm9yZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBNYXRoLm1heChNYXRoLmNlaWwoZGlmZiAvIDEwKSwgMSkgKiAxMCArIGkxOG4udGltZVNlY29uZEJlZm9yZTsKICAgIH0KICB9OwoKICB0aW1lLmRpZmYgPSAwOwogIHRpbWUuc2V0RGlmZiA9IGZ1bmN0aW9uIChkaWZmKSB7CiAgICB0aW1lLmRpZmYgPSArZGlmZiB8fCAwOwogIH07CgogIHRpbWUuaXNDc3RFcXVpdmFsZW50ID0gZnVuY3Rpb24gKCkgewogICAgY29uc3QgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsKICAgIHJldHVybiBbLi4uQXJyYXkoMzY2KV0uZXZlcnkoKF8sIGkpID0+IG5ldyBEYXRlKHllYXIsIDAsIGkpLmdldFRpbWV6b25lT2Zmc2V0KCkgPT09IC00ODApOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwvbWlkLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IGJhc2U2MiA9IHV0aWwuYmFzZTYyID0ge307CgogIGNvbnN0IGJhc2U2MkRpY3QgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonOwoKICBiYXNlNjIuZGVjb2RlID0gZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIFsuLi5zdHJdLnJlZHVjZSgocHJldiwgY2gpID0+IHsKICAgICAgcmV0dXJuIHByZXYgKiA2MiArIGJhc2U2MkRpY3QuaW5kZXhPZihjaCk7CiAgICB9LCAwKTsKICB9OwoKICBiYXNlNjIuZW5jb2RlID0gZnVuY3Rpb24gdG9TdHJpbmcobnVtKSB7CiAgICBpZiAobnVtID09PSAwKSByZXR1cm4gJzAnOwogICAgaWYgKG51bSA8IDYyKSByZXR1cm4gYmFzZTYyRGljdFtudW1dOwogICAgcmV0dXJuIHRvU3RyaW5nKE1hdGguZmxvb3IobnVtIC8gNjIpKSArIGJhc2U2MkRpY3RbbnVtICUgNjJdOwogIH07CgogIGNvbnN0IG1pZCA9IHV0aWwubWlkID0ge307CgogIG1pZC5lbmNvZGUgPSBmdW5jdGlvbiAoYmFzZTEwbWlkKSB7CiAgICByZXR1cm4gYmFzZTEwbWlkLm1hdGNoKC8uezEsN30oPz0oPzouezd9KSokKS9nKQogICAgICAubWFwKHRydW5jID0+IGJhc2U2Mi5lbmNvZGUoTnVtYmVyKHRydW5jKSkucGFkU3RhcnQoNCwgMCkpCiAgICAgIC5qb2luKCcnKS5yZXBsYWNlKC9eMCsvLCAnJyk7CiAgfTsKCiAgbWlkLmRlY29kZSA9IGZ1bmN0aW9uIChiYXNlNjJtaWQpIHsKICAgIHJldHVybiBiYXNlNjJtaWQubWF0Y2goLy57MSw0fSg/PSg/Oi57NH0pKiQpL2cpCiAgICAgIC5tYXAodHJ1bmMgPT4gU3RyaW5nKGJhc2U2Mi5kZWNvZGUodHJ1bmMpKS5wYWRTdGFydCg3LCAwKSkKICAgICAgLmpvaW4oJycpLnJlcGxhY2UoL14wKy8sICcnKTsKICB9OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL2NyYy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwoKICBjb25zdCBjcmMgPSB1dGlsLmNyYyA9IHt9OwoKICBjb25zdCB0YWJsZSA9IG5ldyBVaW50MzJBcnJheSgyNTYpOwogIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHsKICAgIGxldCByZW0gPSBpID4+PiAwOwogICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqKyspIHsKICAgICAgaWYgKHJlbSAmIDEpIHJlbSA9ICgocmVtID4+PiAxKSBeIDB4ZWRiODgzMjApID4+PiAwOwogICAgICBlbHNlIHJlbSA+Pj49IDE7CiAgICB9CiAgICB0YWJsZVtpXSA9IHJlbTsKICB9CgogIGNvbnN0IHBhcnNlU3RyaW5nID0gZnVuY3Rpb24gKHN0cikgewogICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpOwogICAgcmV0dXJuIGVuY29kZXIuZW5jb2RlKHN0cik7CiAgfTsKCiAgLyoqCiAgICogQHBhcmFtIHtVaW50OEFycmF5fHN0cmluZ30gYnVmZmVyCiAgICogQHBhcmFtIHtudW1iZXJ9IGNyYwogICAqLwogIGNyYy5jcmMzMiA9IGZ1bmN0aW9uIChidWZmZXIsIGNyYykgewogICAgY29uc3QgYnl0ZXMgPSBidWZmZXIgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gYnVmZmVyIDogcGFyc2VTdHJpbmcoU3RyaW5nKGJ1ZmZlcikpOwogICAgY3JjID0gfmNyYyA+Pj4gMDsKICAgIGJ5dGVzLmZvckVhY2goYnl0ZSA9PiB7CiAgICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdGFibGVbKGNyYyAmIDB4ZmYpIF4gYnl0ZV07CiAgICB9KTsKICAgIGNyYyA9IH5jcmMgPj4+IDA7CiAgICByZXR1cm4gY3JjOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIGN1c3RvbSBpbXBsZW1lbnRhdGlvbiB1dGlsL3RhcmJhbGwKOyAoZnVuY3Rpb24gKCkgewogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgfHwge307CgogIC8vIOaJk+WMheW3peWFtwogIGNvbnN0IHRhcmJhbGwgPSB1dGlsLnRhcmJhbGwgPSB7fTsKCiAgLy8g5bCG5LiA5Liq5paH5Lu26L2s5Li6IHRhcmJhbGwKICB0YXJiYWxsLmZpbGUgPSBmdW5jdGlvbiAoZmlsZUluZm8sIGJ1ZmZlcikgewogICAgY29uc3QgZmlsZW5hbWUgPSBmaWxlSW5mby5maWxlbmFtZSwgY29udGVudCA9IGZpbGVJbmZvLmNvbnRlbnQsIG10aW1lID0gZmlsZUluZm8ubXRpbWU7CiAgICBjb25zdCBjaGVja3N1bSA9IHsgdmFsdWU6ICcgJy5yZXBlYXQoOCksIHNpemU6IDggfTsKICAgIGNvbnN0IGZpZWxkcyA9IFsKICAgICAgLy8g5paH5Lu25ZCN6ZmQ5Yi25LiN6LaF6L+HIDEwMCDkuKrlrZfnrKYKICAgICAgeyB2YWx1ZTogdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVuYW1lKSksIHNpemU6IDEwMCB9LCAvLyBmaWxlbmFtZQogICAgICB7IHZhbHVlOiAnMDAwMDY0NCcsIHNpemU6IDggfSwgLy8gbW9kZQogICAgICB7IHZhbHVlOiAnMDAwMDAwMCcsIHNpemU6IDggfSwgLy8gdWlkCiAgICAgIHsgdmFsdWU6ICcwMDAwMDAwJywgc2l6ZTogOCB9LCAvLyBnaWQKICAgICAgLy8g5paH5Lu25aSn5bCP5LiN6LaF6L+HIDhHaUIKICAgICAgeyB2YWx1ZTogY29udGVudC5ieXRlTGVuZ3RoLnRvU3RyaW5nKDgpLnBhZFN0YXJ0KDExLCAnMCcpLCBzaXplOiAxMiB9LCAvLyBzaXplCiAgICAgIC8vIOS/ruaUueaXtumXtOebtOaOpeeUqOW9k+WJjeaXtumXtAogICAgICB7IHZhbHVlOiBNYXRoLmZsb29yKCttdGltZSAvIDEwMDApLnRvU3RyaW5nKDgpLnBhZFN0YXJ0KDExLCAnMCcpLCBzaXplOiAxMiB9LCAvLyBtdGltZQogICAgICBjaGVja3N1bSwgLy8gY2hrc3VtCiAgICAgIHsgdmFsdWU6ICcwJywgc2l6ZTogMSB9LCAvLyB0eXBlCiAgICAgIHsgdmFsdWU6ICcnLCBzaXplOiAxMDAgfSwgLy8gbGluZSBmaWxlbmFtZQogICAgICB7IHZhbHVlOiAndXN0YXInLCBzaXplOiA2IH0sIC8vIHVzdGFyCiAgICAgIHsgdmFsdWU6ICcwMCcsIHNpemU6IDIgfSwgLy8gdXN0YXIgdmVyc2lvbgogICAgXTsKICAgIGJ1ZmZlci5maWxsKDApOwogICAgY29uc3Qgd3JpdGVGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkgewogICAgICBjb25zdCBkYXRhID0gQXJyYXkuZnJvbShmaWVsZC52YWx1ZSkubWFwKGZ1bmN0aW9uIChjaGFyKSB7IHJldHVybiBjaGFyLmNoYXJDb2RlQXQoKTsgfSk7CiAgICAgIGJ1ZmZlci5zZXQoZGF0YSwgZmllbGQub2Zmc2V0KTsKICAgIH07CiAgICBmaWVsZHMucmVkdWNlKGZ1bmN0aW9uIChvZmZzZXQsIGZpZWxkKSB7IGZpZWxkLm9mZnNldCA9IG9mZnNldDsgcmV0dXJuIG9mZnNldCArIGZpZWxkLnNpemU7IH0sIDApOwogICAgZmllbGRzLmZvckVhY2god3JpdGVGaWVsZCk7CiAgICBjaGVja3N1bS52YWx1ZSA9IEFycmF5LmZyb20oYnVmZmVyLnNsaWNlKDAsIDUxMikpLnJlZHVjZShmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCArIHk7IH0pLnRvU3RyaW5nKDgpLnBhZFN0YXJ0KDYsICcwJykgKyAnXDAnOwogICAgd3JpdGVGaWVsZChjaGVja3N1bSk7CiAgICBidWZmZXIuc2V0KG5ldyBVaW50OEFycmF5KGNvbnRlbnQpLCA1MTIpOwogICAgcmV0dXJuIGJ1ZmZlcjsKICB9OwoKICAvLyDlsIbkuIDnu4Tmlofku7bmiZPljIUKICB0YXJiYWxsLmZpbGVzID0gZnVuY3Rpb24gKGZpbGVzKSB7CiAgICBjb25zdCB0YXJTaXplID0gZmlsZXMucmVkdWNlKGZ1bmN0aW9uIChvZmZzZXQsIGZpbGUpIHsKICAgICAgY29uc3Qgc2l6ZSA9IGZpbGUuY29udGVudC5ieXRlTGVuZ3RoOwogICAgICBmaWxlLnRhclNpemUgPSAoc2l6ZSA+PiA5IDw8IDkpICsgKHNpemUgJSA1MTIgPyA1MTIgOiAwKSArIDUxMjsKICAgICAgZmlsZS5vZmZzZXQgPSBvZmZzZXQ7CiAgICAgIHJldHVybiBvZmZzZXQgKyBmaWxlLnRhclNpemU7CiAgICB9LCAwKSArIDEwMjQ7CiAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIodGFyU2l6ZSk7CiAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgIHV0aWwudGFyYmFsbC5maWxlKGZpbGUsIG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgZmlsZS5vZmZzZXQsIGZpbGUudGFyU2l6ZSkpOwogICAgfSk7CiAgICByZXR1cm4gYnVmZmVyOwogIH07Cn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcGxveWZpbGwgb2YgYnJvd3Nlci5ydW50aW1lLmdldE1hbmlmZXN0CjsgKGZ1bmN0aW9uICgpIHsKICBjb25zdCBicm93c2VyID0gd2luZG93LndlQnJvd3NlciA9IHdpbmRvdy53ZUJyb3dzZXIgfHwge307CiAgY29uc3QgcnVudGltZSA9IGJyb3dzZXIucnVudGltZSA9IGJyb3dzZXIucnVudGltZSB8fCB7fTsKICBydW50aW1lLmdldE1hbmlmZXN0ID0gZnVuY3Rpb24gKCkgewogICAgY29uc3QgaW5mbyA9IEdNLmluZm87CiAgICByZXR1cm4gewogICAgICBuYW1lOiBpbmZvLnNjcmlwdC5uYW1lLAogICAgICB2ZXJzaW9uOiBpbmZvLnNjcmlwdC52ZXJzaW9uLnNwbGl0KCcuJykuc2xpY2UoMCwgMykuam9pbignLicpLAogICAgfTsKICB9Owp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb21tb24vbmV0d29yay9uZXR3b3JrLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgPz8ge307CiAgY29uc3QgbmV0d29yayA9IHlhd2YubmV0d29yayA9IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIG5ldHdvcmsuZ2V0VW5pcXVlS2V5ID0gKGZ1bmN0aW9uICgpIHsKICAgIGxldCBsYXN0ID0gMDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAnJyArIChsYXN0ID0gTWF0aC5tYXgobGFzdCArIDEsIERhdGUubm93KCkpKTsKICAgIH07CiAgfSgpKTsKCiAgbmV0d29yay5mYWtlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gJ1NUS18nICsgbmV0d29yay5nZXRVbmlxdWVLZXkoKTsKICB9OwoKICAvKioKICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzcAogICAqLwogIG5ldHdvcmsucGFyc2VKc29uID0gZnVuY3Rpb24gKHJlc3ApIHsKICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3AKICAgICAgLnJlcGxhY2UoL14oPzp0cnlce1tee10qXCgpP1x7LywgJ3snKQogICAgICAucmVwbGFjZSgvfSg/OlwpXHMqOz9ccyp9Y2F0Y2hcKGVcKVx7XH07Pyk/JC8sICd9JykKICAgICk7CiAgfTsKCiAgbmV0d29yay5qc29ucCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBjb25zdCBrZXkgPSAneWF3Zl9qc29ucF8nICsgY2FsbGJhY2s7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGtleSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKGV2ZW50LmRldGFpbC5kYXRhKSB7CiAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kZXRhaWwuZGF0YSk7CiAgICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywga2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgY2FsbGJhY2ssIHsKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoa2V5LCB7CiAgICAgICAgICAgICAgZGV0YWlsOiB7IGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpIH0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbY2FsbGJhY2tdOwogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgICBjb25zdCByZWplY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChrZXksIHsgZGV0YWlsOiB7IH0gfSk7CiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICBzY3JpcHQuc3JjID0gdXJsOwogICAgICAgIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgc2NyaXB0LnJlbW92ZSgpOwogICAgICAgICAgc2V0VGltZW91dChyZWplY3QsIDMwMDApOwogICAgICAgIH0pOwogICAgICAgIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHJlamVjdCk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICB9LCB1cmwsIGNhbGxiYWNrLCBrZXkpOwogICAgfSk7CiAgfTsKCgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHJlcGxhY2VtZW50IG9mIHlhb2Zhbmc6Ly9jb21tZW50L25ldHdvcmsuZmV0Y2guanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgbmV0d29yayA9IHlhd2YubmV0d29yazsKCiAgbmV0d29yay5mZXRjaFRleHQgPSBhc3luYyBmdW5jdGlvbiAodXJsKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBHTS54bWxIdHRwUmVxdWVzdCh7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICB1cmw6IG5ldyBVUkwodXJsLCBsb2NhdGlvbi5ocmVmKS5ocmVmLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIHJlc29sdmUocmVzcC5yZXNwb25zZVRleHQpOwogICAgICAgIH0sCiAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIHJlamVjdChyZXNwLnN0YXR1c1RleHQpOwogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgbmV0d29yay5mZXRjaEpzb24gPSBhc3luYyBmdW5jdGlvbiAodXJsKSB7CiAgICByZXR1cm4gSlNPTi5wYXJzZShhd2FpdCBuZXR3b3JrLmZldGNoVGV4dCh1cmwpKTsKICB9OwoKICBuZXR3b3JrLmZldGNoQmxvYiA9IGFzeW5jIGZ1bmN0aW9uICh1cmwpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIEdNLnhtbEh0dHBSZXF1ZXN0KHsKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIHVybDogbmV3IFVSTCh1cmwsIGxvY2F0aW9uLmhyZWYpLmhyZWYsCiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgcmVzb2x2ZShyZXNwLnJlc3BvbnNlKTsKICAgICAgICB9LAogICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICByZWplY3QocmVzcC5zdGF0dXNUZXh0KTsKICAgICAgICB9LAogICAgICB9KTsKICAgIH0pOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3JlcXVlc3QvdXNlcmluZm8uanMKLyoqCiAqIOi/meS4quaWh+S7tueUqOadpee7tOaKpOeUqOaIt+S/oeaBrwogKi8KOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPz8ge307CgogIC8qKiBAdHlwZWRlZiB7e2lkOm51bWJlcixuYW1lOnN0cmluZyxhdmF0YXI6c3RyaW5nLGZvbGxvd2VlOm51bWJlcixmb2xsb3dlcjpudW1iZXJ9fSBVc2VySW5mbyAqLwogIC8qKiBAdHlwZSB7TWFwPG51bWJlcixVc2VySW5mbz59ICovCiAgY29uc3QgdXNlckluZm9DYWNoZUJ5SWQgPSBuZXcgTWFwKCk7CiAgLyoqIEB0eXBlIHtNYXA8c3RyaW5nLFVzZXJJbmZvPn0gKi8KICBjb25zdCB1c2VySW5mb0NhY2hlQnlOYW1lID0gbmV3IE1hcCgpOwogIGNvbnN0IGJhc2VVcmwgPSBuZXcgVVJMKHsKICAgIHVzZXJDYXJkOiAnLy93ZWliby5jb20vYWovdjYvdXNlci9uZXdjYXJkJywKICAgIHVzZXJDYXJkX2Ficm9hZDogJy8vd3d3LndlaWJvLmNvbS9hai92Ni91c2VyL25ld2NhcmQnLAogIC8vIGRvY3VtZW50LmRvbWFpbiDln7rkuo4gU1RLLmxpYi5jYXJkLnVzZXJjYXJkLmJhc2VjYXJkIOW5tumdnueslOivrwogIH1bZG9jdW1lbnQuZG9tYWluID09PSAnd3d3LndlaWJvLmNvbScgPyAndXNlckNhcmRfYWJyb2FkJyA6ICd1c2VyQ2FyZCddLCBsb2NhdGlvbi5ocmVmKTsKCiAgbGV0IGxhc3RSZXF1ZXN0ID0gUHJvbWlzZS5yZXNvbHZlKCk7CgogIC8qKgogICAqIEBwYXJhbSB7e2lkOm51bWJlcj8sbmFtZTpzdHJpbmc/fX0KICAgKiBAcmV0dXJuIHtVc2VySW5mb30KICAgKi8KICBjb25zdCB1c2VySW5mbyA9IGFzeW5jIGZ1bmN0aW9uIHVzZXJJbmZvKHsgaWQgPSBudWxsLCBuYW1lID0gbnVsbCB9KSB7CiAgICBhd2FpdCBsYXN0UmVxdWVzdDsKICAgIGlmICghaWQgJiYgIW5hbWUpIHRocm93IFR5cGVFcnJvcignUmVxdWVzdCB1c2VyaW5mbyB3aXRob3V0IGlkIG9yIG5hbWUuJyk7CiAgICBpZiAoaWQgJiYgdXNlckluZm9DYWNoZUJ5SWQuaGFzKGlkKSkgewogICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VySW5mb0NhY2hlQnlJZC5nZXQoaWQpKSk7CiAgICB9CiAgICBpZiAobmFtZSAmJiB1c2VySW5mb0NhY2hlQnlOYW1lLmhhcyhuYW1lKSkgewogICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VySW5mb0NhY2hlQnlOYW1lLmdldChuYW1lKSkpOwogICAgfQogICAgY29uc3QgdXJsID0gbmV3IFVSTChiYXNlVXJsKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdhand2cicsICc2Jyk7CiAgICBpZiAoaWQpIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdpZCcsIGlkKTsKICAgIGVsc2UgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ25hbWUnLCBuYW1lKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd0eXBlJywgJzEnKTsKICAgIGNvbnN0IGNhbGxiYWNrID0gbmV0d29yay5mYWtlQ2FsbGJhY2soKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjYWxsYmFjaycsIGNhbGxiYWNrKTsKICAgIHRyeSB7CiAgICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXR3b3JrLmpzb25wKHVybCwgY2FsbGJhY2spOwogICAgICBsYXN0UmVxdWVzdCA9IHJlcXVlc3Q7CiAgICAgIGNvbnN0IHsgZGF0YTogaHRtbCB9ID0gYXdhaXQgcmVxdWVzdDsKICAgICAgLy8g5oiR5LuN54S25peg5rOV55CG6Kej5LiA5Liq5L2/55SoIEpTT04g5YyF6KO5IEhUTUwg55qEIEFQSQogICAgICBjb25zdCB1c2VyY2FyZCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpOwogICAgICByZXR1cm4gKGZ1bmN0aW9uIHBhcnNlVXNlckluZm9SZXNwb25zZSgpIHsKICAgICAgICBjb25zdCBhdmF0YXIgPSB1c2VyY2FyZC5xdWVyeVNlbGVjdG9yKCcucGljX2JveCBpbWcnKS5zcmM7CiAgICAgICAgY29uc3QgbmFtZSA9IHVzZXJjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5uYW1lIGFbdWlkXScpLmdldEF0dHJpYnV0ZSgndGl0bGUnKTsKICAgICAgICAvLyDomb3nhLbkuIDoiKzmnaXor7TmmK/nlLHmlbDnoIHnu4TmiJDnmoTvvIzkvYbmmK8gJENPTkZJRy51aWQg5piv5a2X56ym5Liy57G75Z6L77yM5omA5Lul5oiR5Lus6YG15a6I5b6u5Y2a55qE57G75Z6L57qm5a6a5L2/55So5a2X56ym5Liy57G75Z6LCiAgICAgICAgY29uc3QgaWQgPSB1c2VyY2FyZC5xdWVyeVNlbGVjdG9yKCcubmFtZSBhW3VpZF0nKS5nZXRBdHRyaWJ1dGUoJ3VpZCcpOwogICAgICAgIGNvbnN0IGZvbGxvd2VlID0gdXRpbC5zdHJpbmdzLnBhcnNlaW50KHVzZXJjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jX2ZvbGxvdyBlbScpLnRleHRDb250ZW50KTsKICAgICAgICBjb25zdCBmb2xsb3dlciA9IHV0aWwuc3RyaW5ncy5wYXJzZWludCh1c2VyY2FyZC5xdWVyeVNlbGVjdG9yKCcuY19mYW5zIGVtJykudGV4dENvbnRlbnQpOwogICAgICAgIGNvbnN0IGRhdGEgPSB7IGF2YXRhciwgaWQsIG5hbWUsIGZvbGxvd2VlLCBmb2xsb3dlciB9OwogICAgICAgIHVzZXJJbmZvQ2FjaGVCeUlkLnNldChpZCwgZGF0YSk7CiAgICAgICAgdXNlckluZm9DYWNoZUJ5TmFtZS5zZXQobmFtZSwgZGF0YSk7CiAgICAgICAgdXRpbC5kZWJ1ZygnRmV0Y2ggdXNlciBpbmZvIGdldDogJW8nLCBkYXRhKTsKICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgfSgpKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8vIOWPr+iDveaYr+eUqOaIt+S4jeWtmOWcqO+8jOS5n+WPr+iDveaYr+WFtuWug+mXrumimAogICAgICB1dGlsLmRlYnVnKCdGZXRjaCB1c2VyIGluZm8gZmFpbGVkOiByZXF1ZXN0ICVvLCBlcnJvcjogJW8nLCB1cmwsIGVycm9yKTsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfTsKICByZXF1ZXN0LnVzZXJJbmZvID0gdXNlckluZm87Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3JlcXVlc3QvdXNlcnN1Z2dlc3QuanMKLyoqCiAqIOW9k+i+k+WFpeeUqOaIt+WQjeaXtu+8jOe7meWHuuS4gOS4queUqOaIt+WIl+ihqOS7peS+m+mAieaLqQogKi8KOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPz8ge307CgogIGNvbnN0IHVzZXJTdWdnZXN0Q2FjaGUgPSBuZXcgTWFwKCk7CgogIGNvbnN0IHVzZXJTdWdnZXN0QnlUb3AgPSBhc3luYyBmdW5jdGlvbiAoa2V5KSB7CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCdodHRwczovL3Mud2VpYm8uY29tL2FqYXgvdG9wc3VnZ2VzdC5waHAnKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdfaycsIG5ldHdvcmsuZ2V0VW5pcXVlS2V5KCkpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ190JywgMSk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnX3YnLCBuZXR3b3JrLmZha2VDYWxsYmFjaygpKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdrZXknLCBrZXkpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3VpZCcsIHlhd2YuaW5pdC5wYWdlLiRDT05GSUcudWlkKTsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgbmV0d29yay5mZXRjaFRleHQodXJsKTsKICAgIGNvbnN0IHVzZXJzID0gQXJyYXkuZnJvbShuZXR3b3JrLnBhcnNlSnNvbihyZXNwKS5kYXRhPy51c2VyID8/IFtdKTsKICAgIGNvbnN0IHJlc3VsdCA9IHVzZXJzLm1hcCh1c2VyID0+ICh7CiAgICAgIGlkOiB1c2VyLnVfaWQgKyAnJywKICAgICAgbmFtZTogdXNlci51X25hbWUsCiAgICAgIGF2YXRhcjogdXNlci51X3BpYywKICAgIH0pKTsKICAgIHV0aWwuZGVidWcoJ0dvdCBzdWdnZXN0aW9uIHVzZXJzIGZvciAlbyBmcm9tIHRvcDogJW8nLCBrZXksIHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgY29uc3QgdXNlclN1Z2dlc3RCeUZvbGxvdyA9IGFzeW5jIGZ1bmN0aW9uIChrZXkpIHsKICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vd2VpYm8uY29tL2FqL3JlbGF0aW9uL2F0dGVudGlvbicpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19ybmQnLCBuZXR3b3JrLmdldFVuaXF1ZUtleSgpKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdfdCcsIDApOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Fqd3ZyJywgNik7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncScsIGtleSk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgndHlwZScsIDApOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoSnNvbih1cmwpOwogICAgY29uc3QgdXNlcnMgPSBBcnJheS5mcm9tKHJlc3AuZGF0YSk7CiAgICBjb25zdCByZXN1bHQgPSB1c2Vycy5tYXAodXNlciA9PiAoewogICAgICBpZDogdXNlci51aWQgKyAnJywKICAgICAgbmFtZTogdXNlci5zY3JlZW5fbmFtZSwKICAgIH0pKTsKICAgIHV0aWwuZGVidWcoJ0dvdCBzdWdnZXN0aW9uIHVzZXJzIGZvciAlbyBmcm9tIGF0dGVudGlvbjogJW8nLCBrZXksIHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgY29uc3QgdXNlclN1Z2dlc3QgPSBhc3luYyBmdW5jdGlvbiB1c2VyU3VnZ2VzdChrZXkpIHsKICAgIGNvbnN0IHN1Z2dlc3RzID0gYXdhaXQgUHJvbWlzZS5hbGwoWwogICAgICB1c2VyU3VnZ2VzdEJ5Rm9sbG93KGtleSkudGhlbih1c2VycyA9PiB1c2VycywgKCkgPT4gW10pLAogICAgICB1c2VyU3VnZ2VzdEJ5VG9wKGtleSkudGhlbih1c2VycyA9PiB1c2VycywgKCkgPT4gW10pLAogICAgXSk7CiAgICBjb25zdCBsaXN0ID0gc3VnZ2VzdHMucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSwgW10pLm1hcCh1c2VyID0+ICh7CiAgICAgIGlkOiB1c2VyLmlkLAogICAgICBuYW1lOiB1c2VyLm5hbWUsCiAgICB9KSk7CiAgICBjb25zdCByZXN1bHQgPSBbLi4ubmV3IE1hcChsaXN0Lm1hcCh1c2VyID0+IFt1c2VyLmlkLCB1c2VyXSkpLnZhbHVlcygpXTsKICAgIHV0aWwuZGVidWcoJ0dvdCBzdWdnZXN0aW9uIHVzZXJzIGZvciAlbzogJW8nLCBrZXksIHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgY29uc3QgdXNlclN1Z2dlc3RDYWNoZWQgPSBhc3luYyBmdW5jdGlvbiB1c2VyU3VnZ2VzdENhY2hlZChrZXkpIHsKICAgIGlmICh1c2VyU3VnZ2VzdENhY2hlLmhhcyhrZXkpKSB7CiAgICAgIHJldHVybiB1c2VyU3VnZ2VzdENhY2hlLmdldChrZXkpOwogICAgfQogICAgY29uc3QgcHJvbWlzZSA9IHVzZXJTdWdnZXN0KGtleSk7CiAgICB1c2VyU3VnZ2VzdENhY2hlLnNldChrZXksIHByb21pc2UpOwogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvbWlzZTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdXNlclN1Z2dlc3RDYWNoZS5kZWxldGUoa2V5KTsKICAgICAgcmV0dXJuIFtdOwogICAgfQogIH07CiAgcmVxdWVzdC51c2VyU3VnZ2VzdCA9IHVzZXJTdWdnZXN0Q2FjaGVkOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L3RvcGljc3VnZ2VzdC5qcwovKioKICog5b2T6L6T5YWl6K+d6aKY5pe277yM57uZ5Ye65LiA5Liq6K+d6aKY5YiX6KGo5Lul5L6b6YCJ5oupCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCA/PyB7fTsKCiAgY29uc3QgdG9waWNTdWdnZXN0ID0gYXN5bmMgZnVuY3Rpb24gKGtleSkgewogICAgY29uc3QgdXJsID0gbmV3IFVSTCgnaHR0cHM6Ly93ZWliby5jb20vYWovbWJsb2cvdG9waWM/Jyk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnYWp3dnInLCA2KTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdxJywga2V5KTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdfX3JuZCcsICtuZXcgRGF0ZSgpKTsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgbmV0d29yay5mZXRjaEpzb24odXJsKTsKICAgIGNvbnN0IHRvcGljcyA9IG5ldyBTZXQoQXJyYXkuZnJvbShyZXNwLmRhdGEpLm1hcCgoeyB0b3BpYyB9KSA9PiB7CiAgICAgIHRvcGljID0gdG9waWMucmVwbGFjZSgvXFvotoXor51cXSQvLCAnJyk7CiAgICAgIGlmICgvXFsuKlxdLy50ZXN0KHRvcGljKSkgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiB0b3BpYzsKICAgIH0pLmZpbHRlcih0b3BpYyA9PiB0b3BpYykpOwogICAgY29uc3QgcmVzdWx0ID0gWy4uLnRvcGljc107CiAgICB1dGlsLmRlYnVnKCdHb3Qgc3VnZ2VzdGlvbiB0b3BpY3MgZm9yICVvIGZyb20gdG9wOiAlbycsIGtleSwgcmVzdWx0KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICByZXF1ZXN0LnRvcGljU3VnZ2VzdCA9IHRvcGljU3VnZ2VzdDsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC9sb25nZmVlZC5qcwovKioKICog5om+5Yiw5LiA5p2h6LaF6ZW/5b6u5Y2a55qE5YWo5paHCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCA/PyB7fTsKCiAgLy8g6L+Z5LiA5qyh5oiR5Lus5LiN5YaN57yT5a2Y6ZW/5b6u5Y2a55qE5Y6f5paH5LqG77yM5Zug5Li6546w5Zyo5b6u5Y2a56We5LuW5aaI5Y+v5Lul57yW6L6R5LqGCiAgY29uc3QgZ2V0TG9uZ1RleHQgPSBhc3luYyBmdW5jdGlvbiAobWlkKSB7CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCdodHRwczovL3dlaWJvLmNvbS9wL2FqL21ibG9nL2dldGxvbmd0ZXh0Jyk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnYWp3dnInLCA2KTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdtaWQnLCBtaWQpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19fcm5kJywgK25ldyBEYXRlKCkpOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoSnNvbih1cmwpOwogICAgY29uc3QgeyBodG1sIH0gPSByZXNwPy5kYXRhID8/IHt9OyBpZiAoIWh0bWwpIHJldHVybiBudWxsOwogICAgdXRpbC5kZWJ1ZygnR290IGxvbmd0ZXh0IGZvciAlbzogJW8nLCBtaWQsIHsgaHRtbCB9KTsKICAgIHJldHVybiBodG1sOwogIH07CiAgcmVxdWVzdC5nZXRMb25nVGV4dCA9IGdldExvbmdUZXh0OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L2dyb3VwbGlzdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCA/PyB7fTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBmdW5jdG9vbHMgPSB1dGlsLmZ1bmN0b29sczsKCiAgaTE4bi53aGlzcGVyR3JvdXBOYW1lID0gewogICAgY246ICfmgoTmgoTlhbPms6gnLAogIH07CgogIGNvbnN0IGdyb3VwTGlzdFY2ID0gZnVuY3Rvb2xzLm9uY2UoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vd2VpYm8uY29tL2FqL2YvZ3JvdXAvbGlzdCc7CiAgICB1dGlsLmRlYnVnKCdmZXRjaCB1cmwgJXMnLCB1cmwpOwogICAgY29uc3QgcmVzcCA9IGF3YWl0IG5ldHdvcmsuZmV0Y2hKc29uKHVybCk7CiAgICBjb25zdCBncm91cHMgPSByZXNwLmRhdGEubWFwKGZ1bmN0aW9uIChncm91cCkgewogICAgICByZXR1cm4gewogICAgICAgIGlkOiAnZycgKyBncm91cC5naWQsCiAgICAgICAgbmFtZTogZ3JvdXAuZ25hbWUsCiAgICAgICAgdHlwZTogJ2dyb3VwJywKICAgICAgfTsKICAgIH0pOwogICAgY29uc3Qgc3BlY2lhbCA9IFt7CiAgICAgIGlkOiAnd2hpc3BlcicsCiAgICAgIG5hbWU6IGkxOG4ud2hpc3Blckdyb3VwTmFtZSwKICAgICAgdHlwZTogJ3doaXNwZXInLAogICAgfV07CiAgICByZXR1cm4gWy4uLnNwZWNpYWwsIC4uLmdyb3Vwc107CiAgfSk7CiAgcmVxdWVzdC5ncm91cExpc3QgPSBncm91cExpc3RWNjsKCiAgY29uc3QgZ3JvdXBMaXN0VjcgPSBmdW5jdG9vbHMub25jZShhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCcvYWpheC9mZWVkL2FsbEdyb3Vwcz9pc19uZXdfc2VnbWVudD0xJmZldGNoX2hvdD0xJywgbG9jYXRpb24uaHJlZikuaHJlZjsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpOwogICAgcmV0dXJuIHJlc3AuZ3JvdXBzWzFdLmdyb3VwOyAvLyBbMV0g5piv6Ieq5a6a5LmJ5YiG57uE77yM5LuW5Lus5Luj56CB5bCx6L+Z5qC3CiAgfSk7CiAgcmVxdWVzdC5ncm91cExpc3RWNyA9IGdyb3VwTGlzdFY3OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L2ZlZWRzYnlncm91cC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCA/PyB7fTsKCiAgY29uc3QgZG9tID0gdXRpbC5kb207CgogIGNsYXNzIE9yZGVyTWlzbWF0Y2hDb3VudCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5idWZmZXIgPSBbXTsKICAgICAgdGhpcy5sZHMgPSBbMV07CiAgICAgIHRoaXMubGRzbSA9IDA7CiAgICB9CiAgICBhcHBlbmRJdGVtcyhpdGVtcykgewogICAgICBjb25zdCBidWZmZXIgPSB0aGlzLmJ1ZmZlcjsKICAgICAgY29uc3QgbGRzID0gdGhpcy5sZHM7CiAgICAgIGJ1ZmZlci5wdXNoKC4uLml0ZW1zKTsKICAgICAgZm9yIChsZXQgaSA9IGxkcy5sZW5ndGgsIGwgPSBidWZmZXIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgbGV0IG0gPSAxLCB2ID0gYnVmZmVyW2ldOwogICAgICAgIGZvciAobGV0IGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGxldCBuID0gbGRzW2pdICsgMTsKICAgICAgICAgIGlmICh2ID49IGJ1ZmZlcltqXSkgY29udGludWU7CiAgICAgICAgICBpZiAobiA+IG0pIG0gPSBuOwogICAgICAgIH0KICAgICAgICBsZHNbaV0gPSBtOwogICAgICAgIGlmIChtID4gdGhpcy5sZHNtKSB0aGlzLmxkc20gPSBtOwogICAgICB9CiAgICB9CiAgICBlcnJvcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmxkcy5sZW5ndGggLSB0aGlzLmxkc207CiAgICB9CiAgfQoKICBjbGFzcyBGZWVkc0J5R3JvdXBMb2FkZXIgewogICAgY29uc3RydWN0b3IoZ3JvdXAsIHBhcmFtcykgewogICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7CgogICAgICB0aGlzLnNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKTsKICAgICAgWydnaWQnLCAnd2hpc3BlcicsICdtaW5faWQnLCAnZW5kX2lkJ10uZm9yRWFjaChrZXkgPT4gdGhpcy5zZWFyY2guZGVsZXRlKGtleSkpOwogICAgICBpZiAoZ3JvdXAuaWQuc3RhcnRzV2l0aCgnZycpKSB7CiAgICAgICAgdGhpcy5zZWFyY2guc2V0KCdnaWQnLCBncm91cC5pZC5zbGljZSgxKSk7CiAgICAgIH0gZWxzZSBpZiAoZ3JvdXAuaWQgPT09ICd3aGlzcGVyJykgewogICAgICAgIHRoaXMuc2VhcmNoLnNldCgnd2hpc3BlcicsIDEpOwogICAgICB9CgogICAgICB0aGlzLm5leHRQYWdlID0gMTsKICAgICAgLyoqIEB0eXBlIHt7IHR5cGU6ICJmZWVkIiwgZGF0ZTogbnVtYmVyLCBtaWQ6IHN0cmluZywgZG9tOiBFbGVtZW50IH1bXX0gKi8KICAgICAgdGhpcy5wZW5kaW5nRmVlZHMgPSBbXTsKICAgICAgdGhpcy5idWZmZXJTaXplID0gMjA7CiAgICAgIHRoaXMub3JkZXJNaXNtYXRjaCA9IG5ldyBPcmRlck1pc21hdGNoQ291bnQoKTsKICAgICAgLyoqIEB0eXBlIHt7IG1pZDogc3RyaW5nIH1bXVtdfSAqLwogICAgICB0aGlzLmZlZWRzQnlQYWdlID0gW107CiAgICB9CiAgICBhc3luYyBwZWVrKCkgewogICAgICBhd2FpdCB0aGlzLmxvYWRNb3JlKCk7CiAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdGZWVkc1swXTsKICAgIH0KICAgIGFzeW5jIG5leHQoKSB7CiAgICAgIGF3YWl0IHRoaXMubG9hZE1vcmUoKTsKICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ0ZlZWRzLnNoaWZ0KCk7CiAgICB9CiAgICBhc3luYyBoYXNOZXh0KCkgewogICAgICBhd2FpdCB0aGlzLmxvYWRNb3JlKCk7CiAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdGZWVkcy5sZW5ndGggPiAwOwogICAgfQogICAgYXN5bmMgbG9hZE1vcmUoKSB7CiAgICAgIGlmICh0aGlzLm5leHRQYWdlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRyeSB7CiAgICAgICAgd2hpbGUgKHRoaXMucGVuZGluZ0ZlZWRzLmxlbmd0aCA8IHRoaXMuYnVmZmVyU2l6ZSkgewogICAgICAgICAgY29uc3QgbmV3TG9hZGVkID0gYXdhaXQgdGhpcy5sb2FkTmV4dFBhZ2UoKTsKICAgICAgICAgIGNvbnN0IGVycm9ycyA9IHRoaXMub3JkZXJNaXNtYXRjaC5lcnJvcnMoKTsKICAgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IE1hdGgubWF4KHRoaXMuYnVmZmVyU2l6ZSwgZXJyb3JzICogMyArIDIwKTsKICAgICAgICAgIGlmICghbmV3TG9hZGVkKSB7IHRoaXMubmV4dFBhZ2UgPSBudWxsOyBicmVhazsgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMubmV4dFBhZ2UgPSBudWxsOwogICAgICB9CiAgICB9CiAgICBhc3luYyBsb2FkTmV4dFBhZ2UoKSB7CiAgICAgIHRoaXMubmV4dFBhZ2UrKzsKICAgICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh0aGlzLnNlYXJjaCk7CiAgICAgIGlmICh0aGlzLmZlZWRzQnlQYWdlLmxlbmd0aCkgewogICAgICAgIGNvbnN0IGxhc3RQYWdlID0gdGhpcy5mZWVkc0J5UGFnZVt0aGlzLmZlZWRzQnlQYWdlLmxlbmd0aCAtIDFdOwogICAgICAgIHNlYXJjaC5zZXQoJ21pbl9pZCcsIGxhc3RQYWdlWzBdLm1pZCk7CiAgICAgICAgc2VhcmNoLnNldCgnZW5kX2lkJywgbGFzdFBhZ2VbbGFzdFBhZ2UubGVuZ3RoIC0gMV0ubWlkKTsKICAgICAgfQogICAgICBjb25zdCBob3N0bmFtZSA9IChsb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ3d3dy53ZWliby5jb20nID8gJ3d3dy4nIDogJycpICsgJ3dlaWJvLmNvbSc7CiAgICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7aG9zdG5hbWV9L2FqL21ibG9nL2ZzZWFyY2g/YCArIHNlYXJjaDsKICAgICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbmV0d29yay5mZXRjaEpzb24odXJsKTsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGRvbS5jb250ZW50KGNvbnRhaW5lciwgcmVzdWx0LmRhdGEpOwogICAgICBjb25zdCBmZWVkRWxlbWVudHMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZmVlZF90eXBlW21pZF0nKSk7CiAgICAgIGNvbnN0IGZlZWRzID0gZmVlZEVsZW1lbnRzLm1hcChpdGVtID0+IHsKICAgICAgICBjb25zdCBkYXRlaXRlbSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iZmVlZF9saXN0X2l0ZW1fZGF0ZSJdW2RhdGVdJyk7IGlmICghZGF0ZWl0ZW0pIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IGRhdGUgPSBOdW1iZXIoZGF0ZWl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRlJykpOyBpZiAoIWRhdGUpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IG1pZCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdmbWlkJykgfHwgaXRlbS5nZXRBdHRyaWJ1dGUoJ21pZCcpOwogICAgICAgIGlmICghbWlkKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4geyB0eXBlOiAnZmVlZCcsIGRhdGUsIG1pZCwgZG9tOiBpdGVtLmNsb25lTm9kZSh0cnVlKSB9OwogICAgICB9KS5maWx0ZXIoZmVlZCA9PiBmZWVkKTsKICAgICAgdGhpcy5mZWVkc0J5UGFnZS5wdXNoKGZlZWRzKTsKICAgICAgdGhpcy5wZW5kaW5nRmVlZHMucHVzaCguLi5mZWVkcyk7CiAgICAgIHRoaXMucGVuZGluZ0ZlZWRzLnNvcnQoKGEsIGIpID0+IGIuZGF0ZSAtIGEuZGF0ZSk7CiAgICAgIHRoaXMub3JkZXJNaXNtYXRjaC5hcHBlbmRJdGVtcyhmZWVkcy5tYXAoKHsgZGF0ZSB9KSA9PiBkYXRlKSk7CiAgICAgIHJldHVybiBmZWVkcy5sZW5ndGg7CiAgICB9CiAgfQoKICBjb25zdCBmZWVkc0J5R3JvdXAgPSBmdW5jdGlvbiAoZ3JvdXAsIHBhcmFtcykgewogICAgY29uc3QgbG9hZGVyID0gbmV3IEZlZWRzQnlHcm91cExvYWRlcihncm91cCwgcGFyYW1zKTsKICAgIHJldHVybiB7CiAgICAgIG5leHQ6ICgpID0+IGxvYWRlci5uZXh0KCksCiAgICAgIGhhc05leHQ6ICgpID0+IGxvYWRlci5oYXNOZXh0KCksCiAgICAgIHBlZWs6ICgpID0+IGxvYWRlci5wZWVrKCksCiAgICB9OwogIH07CiAgcmVxdWVzdC5mZWVkc0J5R3JvdXAgPSBmZWVkc0J5R3JvdXA7CgogIGNsYXNzIEZlZWRzQnlHcm91cHNMb2FkZXIgewogICAgY29uc3RydWN0b3IoZ3JvdXBzLCBwYXJhbXMpIHsKICAgICAgdGhpcy5sb2FkZXJzID0gQXJyYXkuZnJvbShncm91cHMpLm1hcChncm91cCA9PiBuZXcgRmVlZHNCeUdyb3VwTG9hZGVyKGdyb3VwLCBwYXJhbXMpKTsKICAgICAgdGhpcy5rbm93biA9IG5ldyBTZXQoKTsKICAgIH0KICAgIGFzeW5jIGdldExhc3QoKSB7CiAgICAgIGNvbnN0IGxvYWRlcnMgPSB0aGlzLmxvYWRlcnM7CiAgICAgIGlmIChsb2FkZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7CiAgICAgIC8qKiBAdHlwZSB7eyBsb2FkZXI6IEZlZWRzQnlHcm91cExvYWRlciwgZmVlZDogeyB0eXBlOiAiZmVlZCIsIGRhdGU6IG51bWJlciwgbWlkOiBzdHJpbmcsIGRvbTogRWxlbWVudCB9fHsgdHlwZTogImRvbmUiLCBncm91cDogeyBpZDogc3RyaW5nIH0gfSB9W119ICovCiAgICAgIGNvbnN0IGZlZWRzID0gKGF3YWl0IFByb21pc2UuYWxsKGxvYWRlcnMubWFwKGFzeW5jIGxvYWRlciA9PiB7CiAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgIGNvbnN0IGZlZWQgPSBhd2FpdCBsb2FkZXIucGVlaygpOwogICAgICAgICAgaWYgKCFmZWVkKSByZXR1cm4geyBsb2FkZXIsIGZlZWQ6IHsgdHlwZTogJ2RvbmUnLCBncm91cDogbG9hZGVyLmdyb3VwIH0gfTsKICAgICAgICAgIGlmICghdGhpcy5rbm93bi5oYXMoZmVlZC5taWQpKSB7CiAgICAgICAgICAgIHJldHVybiB7IGxvYWRlciwgZmVlZCB9OwogICAgICAgICAgfQogICAgICAgICAgYXdhaXQgbG9hZGVyLm5leHQoKTsKICAgICAgICB9CiAgICAgIH0pKSk7CiAgICAgIGNvbnN0IGVtcHR5ID0gZmVlZHMuZmluZCh2ID0+IHYuZmVlZC50eXBlID09PSAnZG9uZScpOwogICAgICBpZiAoZW1wdHkpIHJldHVybiBlbXB0eTsKICAgICAgY29uc3QgbGFzdCA9IGZlZWRzLnJlZHVjZSgoYSwgYikgPT4gYS5mZWVkLmRhdGUgPiBiLmZlZWQuZGF0ZSA/IGEgOiBiKTsKICAgICAgcmV0dXJuIGxhc3Q7CiAgICB9CiAgICBhc3luYyBwZWVrKCkgewogICAgICBjb25zdCB7IGZlZWQgfSA9IGF3YWl0IHRoaXMuZ2V0TGFzdCgpOwogICAgICByZXR1cm4gZmVlZDsKICAgIH0KICAgIGFzeW5jIG5leHQoKSB7CiAgICAgIGNvbnN0IHsgbG9hZGVyLCBmZWVkIH0gPSBhd2FpdCB0aGlzLmdldExhc3QoKTsKICAgICAgaWYgKGZlZWQudHlwZSA9PT0gJ2ZlZWQnKSB7CiAgICAgICAgYXdhaXQgbG9hZGVyLm5leHQoKTsKICAgICAgICB0aGlzLmtub3duLmFkZChmZWVkLm1pZCk7CiAgICAgICAgcmV0dXJuIGZlZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkZXJzLnNwbGljZSh0aGlzLmxvYWRlcnMuaW5kZXhPZihsb2FkZXIpLCAxKTsKICAgICAgICByZXR1cm4gZmVlZDsKICAgICAgfQogICAgfQogICAgYXN5bmMgaGFzTmV4dCgpIHsKICAgICAgcmV0dXJuIHRoaXMubG9hZGVycy5sZW5ndGggPiAwOwogICAgfQogICAgaXNTaG93bihmZWVkKSB7CiAgICAgIHJldHVybiB0aGlzLmtub3duLmhhcyhmZWVkLm1pZCk7CiAgICB9CiAgICBhZGRTaG93bihmZWVkKSB7CiAgICAgIHJldHVybiB0aGlzLmtub3duLmFkZChmZWVkLm1pZCk7CiAgICB9CiAgfQoKICBjb25zdCBmZWVkc0J5R3JvdXBzID0gZnVuY3Rpb24gKGdyb3VwcywgcGFyYW1zKSB7CiAgICBjb25zdCBsb2FkZXIgPSBuZXcgRmVlZHNCeUdyb3Vwc0xvYWRlcihncm91cHMsIHBhcmFtcyk7CiAgICByZXR1cm4gewogICAgICBuZXh0OiAoKSA9PiBsb2FkZXIubmV4dCgpLAogICAgICBoYXNOZXh0OiAoKSA9PiBsb2FkZXIuaGFzTmV4dCgpLAogICAgICBwZWVrOiAoKSA9PiBsb2FkZXIucGVlaygpLAogICAgICBpc1Nob3duOiBmZWVkID0+IGxvYWRlci5pc1Nob3duKGZlZWQpLAogICAgICBhZGRTaG93bjogZmVlZCA9PiBsb2FkZXIuYWRkU2hvd24oZmVlZCksCiAgICB9OwogIH07CiAgcmVxdWVzdC5mZWVkc0J5R3JvdXBzID0gZmVlZHNCeUdyb3VwczsKCiAgY2xhc3MgRmVlZHNCeUdyb3Vwc1VucmVhZENvdW50IHsKICAgIGNvbnN0cnVjdG9yKGdyb3Vwcywgc3RrSW5mbykgewogICAgICB0aGlzLmdyb3VwcyA9IEFycmF5LmZyb20oZ3JvdXBzKQogICAgICAgIC5maWx0ZXIoZ3JvdXAgPT4gZ3JvdXAuaWQuc3RhcnRzV2l0aCgnZycpKQogICAgICAgIC5tYXAoZ3JvdXAgPT4gZ3JvdXAuaWQuc2xpY2UoMSkpOwogICAgICB0aGlzLnN0a0luZm8gPSBzdGtJbmZvOwogICAgICB0aGlzLmNhbGxiYWNrcyA9IG5ldyBTZXQoKTsKICAgICAgdGhpcy53b3JraW5nID0gZmFsc2U7CiAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7CiAgICB9CiAgICB3YXRjaChjYWxsYmFjaykgewogICAgICB0aGlzLmNhbGxiYWNrcy5hZGQoY2FsbGJhY2spOwogICAgICBpZiAoIXRoaXMud29ya2luZykgdGhpcy5zY2hlZHVsZSgpOwogICAgfQogICAgdW53YXRjaChjYWxsYmFjaykgewogICAgICB0aGlzLmNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spOwogICAgfQogICAgYXN5bmMgc2NoZWR1bGUoKSB7CiAgICAgIGlmICh0aGlzLmNhbGxiYWNrcy5zaXplID09PSAwKSB0aGlzLndvcmtpbmcgPSBmYWxzZTsKICAgICAgdGhpcy53b3JraW5nID0gdHJ1ZTsKICAgICAgaWYgKCF0aGlzLnBhdXNlZCkgewogICAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IHRoaXMuY2hlY2soKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5zY2hlZHVsZSgpOyB9LCAzMGUzKTsKICAgICAgICBpZiAodGhpcy5wYXVzZWQpIHJldHVybjsKICAgICAgICB0aGlzLmNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNhbGxiYWNrKHN0YXR1cyk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIGNoZWNrIHVucmVhZCBmZWVkczogJW8nLCBlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5zY2hlZHVsZSgpOyB9LCAzMGUzKTsKICAgICAgfQogICAgfQogICAgYXN5bmMgY2hlY2soKSB7CiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vcm0uYXBpLndlaWJvLmNvbS8yL3JlbWluZC91bnJlYWRfaGludC5qc29uJyk7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzb3VyY2UnLCB0aGlzLnN0a0luZm8uc291cmNlKTsKICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3dpdGhfdXJsJywgMSk7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdhcHBrZXlzJywgJycpOwogICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZ3JvdXBfaWRzJywgdGhpcy5ncm91cHMuam9pbignLCcpKTsKICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NhbGxiYWNrJywgbmV0d29yay5mYWtlQ2FsbGJhY2soKSk7CiAgICAgIHV0aWwuZGVidWcoJ0NoZWNrIHVucmVhZCBieSBncm91cHM6ICVvJywgdXJsKTsKICAgICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IG5ldHdvcmsuZmV0Y2hUZXh0KHVybCk7CiAgICAgIGNvbnN0IGRhdGEgPSBuZXR3b3JrLnBhcnNlSnNvbihyZXNwKS5kYXRhOwogICAgICBjb25zdCBncm91cFN0YXR1cyA9IE9iamVjdC5hc3NpZ24oLi4uZGF0YS5ncm91cHMpOwogICAgICBjb25zdCByZXN1bHQgPSBPYmplY3QuYXNzaWduKC4uLnRoaXMuZ3JvdXBzLm1hcChncm91cCA9PiAoeyBbJ3N0YXR1c18nICsgZ3JvdXBdOiBOdW1iZXIoZ3JvdXBTdGF0dXNbZ3JvdXBdKSB9KSkpOwogICAgICByZXN1bHQuc3RhdHVzID0gdGhpcy5ncm91cHMucmVkdWNlKChwLCBncm91cCkgPT4gcCArIGdyb3VwU3RhdHVzW2dyb3VwXSwgMCk7CiAgICAgIGlmIChyZXN1bHQuc3RhdHVzKSB7CiAgICAgICAgdXRpbC5kZWJ1ZygnQ2hlY2sgdW5yZWFkIGJ5IGdyb3VwcyBnb3QgdW5yZWFkOiAlbycsIHJlc3VsdC5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICBwYXVzZSgpIHsgdGhpcy5wYXVzZWQgPSB0cnVlOyB9CiAgICBydW4oKSB7IHRoaXMucGF1c2VkID0gZmFsc2U7IH0KICB9CgogIGNvbnN0IHVucmVhZEJ5R3JvdXBzID0gZnVuY3Rpb24gKGdyb3Vwcywgc3RrSW5mbykgewogICAgY29uc3QgbG9hZGVyID0gbmV3IEZlZWRzQnlHcm91cHNVbnJlYWRDb3VudChncm91cHMsIHN0a0luZm8pOwogICAgcmV0dXJuIHsKICAgICAgd2F0Y2goY2FsbGJhY2spIHsgbG9hZGVyLndhdGNoKGNhbGxiYWNrKTsgfSwKICAgICAgdW53YXRjaChjYWxsYmFjaykgeyBsb2FkZXIudW53YXRjaChjYWxsYmFjayk7IH0sCiAgICAgIHBhdXNlKCkgeyBsb2FkZXIucGF1c2UoKTsgfSwKICAgICAgcnVuKCkgeyBsb2FkZXIucnVuKCk7IH0sCiAgICB9OwogIH07CiAgcmVxdWVzdC51bnJlYWRCeUdyb3VwcyA9IHVucmVhZEJ5R3JvdXBzOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L2ZvbGxvd2luZy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCA/PyB7fTsKCiAgY29uc3QgY2F0Y2hlZCA9IGYgPT4gZnVuY3Rpb24gKC4uLmFyZ3MpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBmLmNhbGwodGhpcywgLi4uYXJncyk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHV0aWwuZGVidWcoZSk7IHJldHVybiBudWxsOwogICAgfQogIH07CgogIGNvbnN0IGdldEZvbGxvd2luZ1BhZ2VWNiA9IGFzeW5jIGZ1bmN0aW9uICh1aWQsIHBhZ2VVcmwpIHsKICAgIGNvbnN0IHVybCA9IHBhZ2VVcmwgfHwgYGh0dHBzOi8vd2VpYm8uY29tLyR7dWlkfS9teWZvbGxvd2A7CiAgICB1dGlsLmRlYnVnKCdGZXRjaCBGb2xsb3c6IGZldGNoIHBhZ2UgJXMnLCB1cmwpOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoVGV4dCh1cmwpOwogICAgY29uc3QgcmUgPSAvPHNjcmlwdD5GTVwudmlld1woeyJucyI6InBsXC5yZWxhdGlvblwubXlGb2xsb3dcLmluZGV4Ii4qImh0bWwiOig/PS4qKD86bWVtYmVyX2JveHxXQl9lbXB0eSkpKCIuKiIpfVwpPFwvc2NyaXB0PlxuLzsKICAgIGNvbnN0IGRvbSA9IHV0aWwuZG9tLmNvbnRlbnQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIEpTT04ucGFyc2UocmVzcC5tYXRjaChyZSlbMV0pKTsKCiAgICAvLyDlpoLmnpzlnKjojrflj5bov4fnqIvkuK3nlKjmiLfmiYvliqjlj5bmtojkuobkuIDkupvlhbPms6jvvIzlj6/og73lr7zoh7TmnIDlkI7lh6DpobXmmK/nqbrnmb3nmoQKICAgIC8vIOWFtuWunueci+WIsOi/meenjeaDheWGteWwseivtOaYjuWHuumXrumimOS6hgogICAgY29uc3QgZW1wdHkgPSBkb20ucXVlcnlTZWxlY3RvcignLldCX2VtcHR5Jyk7CiAgICBpZiAoZW1wdHkpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBhbGxQYWdlczogW10sCiAgICAgICAgZm9sbG93SW5QYWdlOiBbXSwKICAgICAgfTsKICAgIH0KCiAgICBjb25zdCBhbGxQYWdlcyA9IChmdW5jdGlvbiAoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFnZUxpbmsgPSBkb20ucXVlcnlTZWxlY3RvcignLldfcGFnZXMgYS5wYWdlW2hyZWZdJyk7CiAgICAgICAgY29uc3QgdXJsVGVtcGxhdGUgPSBuZXcgVVJMKHBhZ2VMaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpLCB1cmwpLmhyZWY7CiAgICAgICAgY29uc3QgcGFnZUxpbmtzID0gZG9tLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XX3BhZ2VzIC5wYWdlJyk7CiAgICAgICAgY29uc3QgcGFnZUNvdW50ID0gTnVtYmVyKHBhZ2VMaW5rc1twYWdlTGlua3MubGVuZ3RoIC0gMl0udGV4dENvbnRlbnQpIHx8IDE7CgogICAgICAgIHJldHVybiBBcnJheS5mcm9tKEFycmF5KHBhZ2VDb3VudCkpLm1hcCgoXywgaW5kZXgpID0+IHsKICAgICAgICAgIHJldHVybiB1cmxUZW1wbGF0ZS5yZXBsYWNlKC9fcGFnZT1cZCsvLCAnX3BhZ2U9JyArIChpbmRleCArIDEpKTsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8vIG9ubHkgb25lIHBhZ2UKICAgICAgfQogICAgICByZXR1cm4gW3VybF07CiAgICB9KCkpOwoKICAgIGNvbnN0IGZvbGxvd0l0ZW0gPSBBcnJheS5mcm9tKGRvbS5xdWVyeVNlbGVjdG9yQWxsKCcubWVtYmVyX2JveCAubWVtYmVyX3dyYXAgLm1vZF9waWMgLnBpY19ib3ggYSA+IGltZycpKTsKICAgIGNvbnN0IGZvbGxvd0luUGFnZSA9IGZvbGxvd0l0ZW0ubWFwKGltZyA9PiB7CiAgICAgIGNvbnN0IHRpdGxlID0gaW1nLnRpdGxlOwogICAgICBjb25zdCBhdmF0YXIgPSBuZXcgVVJMKGltZy5zcmMsICdodHRwczovL3dlaWJvLmNvbScpLmhyZWY7CiAgICAgIHJldHVybiAoY2F0Y2hlZChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g5YWz5rOo5LqG5LiA5Liq55So5oi3CiAgICAgICAgY29uc3QgaWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGltZy5nZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJykgPz8gJycpLmdldCgnaWQnKTsKICAgICAgICBpZiAoIWlkKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBocmVmID0gYGh0dHBzOi8vd2VpYm8uY29tL3UvJHtpZH1gOwogICAgICAgIGNvbnN0IG5hbWUgPSBpbWcuZ2V0QXR0cmlidXRlKCdhbHQnKTsKICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IG5hbWUgIT09IHRpdGxlID8gYEAke25hbWV9ICgke3RpdGxlfSlgIDogJ0AnICsgbmFtZTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWQ6IGB1c2VyLSR7aWR9YCwKICAgICAgICAgIHR5cGU6ICd1c2VyJywKICAgICAgICAgIHVzZXI6IGlkLAogICAgICAgICAgdXJsOiBocmVmLAogICAgICAgICAgYXZhdGFyLAogICAgICAgICAgbmFtZSwKICAgICAgICAgIGRlc2NyaXB0aW9uLAogICAgICAgIH07CiAgICAgIH0pKCkpID8/IChjYXRjaGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyDlhbPms6jkuobkuIDmlK/ogqHnpagKICAgICAgICBjb25zdCBpZCA9IGltZy5wYXJlbnROb2RlLmhyZWYubWF0Y2goL3dlaWJvLmNvbVwvcFwvMjMwNjc3KFthLXpBLVpcZF0rKS8pPy5bMV07CiAgICAgICAgaWYgKCFpZCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgaHJlZiA9IGBodHRwczovL3dlaWJvLmNvbS9wLzIzMDY3NyR7aWR9YDsKICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGAkJHt0aXRsZX0kYDsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWQ6ICdzdG9jay0nICsgaWQsCiAgICAgICAgICB0eXBlOiAnc3RvY2snLAogICAgICAgICAgc3RvY2s6IGlkLAogICAgICAgICAgdXJsOiBocmVmLAogICAgICAgICAgYXZhdGFyOiBhdmF0YXIsCiAgICAgICAgICBuYW1lOiBkZXNjcmlwdGlvbiwKICAgICAgICAgIGRlc2NyaXB0aW9uLAogICAgICAgIH07CiAgICAgIH0pKCkpID8/IChjYXRjaGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyDlhbPms6jkuobkuIDkuKror53popgKICAgICAgICBjb25zdCByZWYgPSBpbWcucGFyZW50Tm9kZS5ocmVmLm1hdGNoKC9odWF0aS53ZWliby5jb20vKTsKICAgICAgICBpZiAoIXJlZikgcmV0dXJuIG51bGw7CiAgICAgICAgLy8g5Y6f5pys55qE6ZO+5o6l5YyF5ZCr55qE5piv57yW5Y+377yM6L+Z6YeM5o2i5oiQ6K+d6aKY5paH5pys77yM5Zug5Li66K+d6aKY5paH5pys5q+U57yW5Y+35pu05Zu65a6a77ya57yW5Y+35Y+v5Lul6KKr5Yig6Zmk77yM5paH5pys5peg5rOV5L+u5pS5CiAgICAgICAgY29uc3QgaHJlZiA9IGBodHRwczovL3dlaWJvLmNvbS9rLyR7dGl0bGV9YDsKICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGAjJHt0aXRsZX0jYDsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWQ6ICd0b3BpYy0nICsgdGl0bGUsCiAgICAgICAgICB0eXBlOiAndG9waWMnLAogICAgICAgICAgdG9waWM6IHRpdGxlLAogICAgICAgICAgdXJsOiBocmVmLAogICAgICAgICAgYXZhdGFyOiBhdmF0YXIsCiAgICAgICAgICBuYW1lOiBkZXNjcmlwdGlvbiwKICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiwKICAgICAgICB9OwogICAgICB9KSgpKSA/PyAoY2F0Y2hlZChmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgbGluayA9IGltZy5jbG9zZXN0KCdbaHJlZl0nKTsKICAgICAgICBjb25zdCBocmVmID0gbGluaz8uZ2V0QXR0cmlidXRlKCdocmVmJykgPz8gYXZhdGFyOwogICAgICAgIC8vIOacquefpeWFs+azqOWGheWuuQogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogJ3Vua25vd24tJyArIGhyZWYsCiAgICAgICAgICB0eXBlOiAndW5rbm93bicsCiAgICAgICAgICB1cmw6IGhyZWYsCiAgICAgICAgICBhdmF0YXI6IGF2YXRhciwKICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aXRsZSwKICAgICAgICAgIG5hbWU6IHRpdGxlLAogICAgICAgIH07CiAgICAgIH0pKCkpOwogICAgfSk7CgogICAgaWYgKCFmb2xsb3dJblBhZ2UubGVuZ3RoKSB7CiAgICAgIHRocm93IEVycm9yKCdBIHBhZ2Ugd2l0aCBubyBmb2xsb3dpbmcgaXRlbXMgb3IgZW1wdHkgbm90aWNlLicpOwogICAgfQogICAgdXRpbC5kZWJ1ZygnRmV0Y2ggZm9sbG93OiBnb3QgJW8gaW4gcGFnZScsIGZvbGxvd0luUGFnZS5sZW5ndGgpOwoKICAgIHJldHVybiB7IGFsbFBhZ2VzLCBmb2xsb3dJblBhZ2UgfTsKICB9OwoKICBjb25zdCBnZXRGb2xsb3dpbmdQYWdlVjcgPSBhc3luYyBmdW5jdGlvbiAodWlkLCBwYWdlKSB7CiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93ZWliby5jb20vYWpheC9mcmllbmRzaGlwcy9mcmllbmRzP3BhZ2U9JHtwYWdlID8/IDF9JnVpZD0ke3VpZH1gOwogICAgdXRpbC5kZWJ1ZygnRmV0Y2ggRm9sbG93OiBmZXRjaCBwYWdlICVzJywgdXJsKTsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgbmV0d29yay5mZXRjaEpzb24odXJsKTsKICAgIGlmICghcmVzcCB8fCAhQXJyYXkuaXNBcnJheShyZXNwLnVzZXJzKSB8fCAhcmVzcC51c2Vycy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBhbGxQYWdlczogW10sCiAgICAgICAgZm9sbG93SW5QYWdlOiBbXSwKICAgICAgfTsKICAgIH0KICAgIGNvbnN0IHBhZ2VzID0gcmVzcC5uZXh0X2N1cnNvciA/IE1hdGguY2VpbChyZXNwLnRvdGFsX251bWJlciAvIChyZXNwLm5leHRfY3Vyc29yIC0gcmVzcC5wcmV2aW91c19jdXJzb3IpKSA6IHBhZ2U7CiAgICBjb25zdCBhbGxQYWdlcyA9IEFycmF5LmZyb20oQXJyYXkocGFnZXMpKS5tYXAoKF8sIGkpID0+IGkgKyAxKTsKICAgIC8vIFY3IOeahOWFs+azqOWIl+ihqOeOsOWcqOWPquiDveeci+WIsOeUqOaItwogICAgY29uc3QgZm9sbG93SW5QYWdlID0gcmVzcC51c2Vycy5tYXAodXNlciA9PiB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IGB1c2VyLSR7dXNlci5pZHN0cn1gLAogICAgICAgIHR5cGU6ICd1c2VyJywKICAgICAgICB1c2VyOiB1c2VyLmlkc3RyLAogICAgICAgIHVybDogbmV3IFVSTCh1c2VyLnByb2ZpbGVfdXJsLCAnaHR0cHM6Ly93ZWliby5jb20vJykuaHJlZiwKICAgICAgICBhdmF0YXI6IHVzZXIuYXZhdGFyX2xhcmdlLAogICAgICAgIG5hbWU6IHVzZXIuc2NyZWVuX25hbWUsCiAgICAgICAgZGVzY3JpcHRpb246ICdAJyArIHVzZXIuc2NyZWVuX25hbWUsCiAgICAgIH07CiAgICB9KTsKICAgIHV0aWwuZGVidWcoJ0ZldGNoIGZvbGxvdzogZ290ICVvIGluIHBhZ2UnLCBmb2xsb3dJblBhZ2UubGVuZ3RoKTsKICAgIHJldHVybiB7IGFsbFBhZ2VzLCBmb2xsb3dJblBhZ2UgfTsKICB9OwoKICByZXF1ZXN0LmdldEZvbGxvd2luZ1BhZ2UgPSBhc3luYyBmdW5jdGlvbiAodWlkLCBwYWdlID0gbnVsbCkgewogICAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCAxNjsgYXR0ZW1wdCsrKSB7CiAgICAgIGlmIChhdHRlbXB0ICE9PSAwKSB7CiAgICAgICAgdXRpbC5kZWJ1ZygnUmV0cnkgZmV0Y2hpbmcgdXNlciBmb2xsb3dpbmcgZGF0YTsgYXR0ZW1wdCAlZCcsIGF0dGVtcHQgKyAxKTsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIC8vIOi/meeahCBhd2FpdCDkuI3og73nnIHmjonvvIzkuI3nhLYgY2F0Y2gg5bCx5oqT5LiN5L2P6L+Z5Liq6L+U5Zue57uT5p6c5LqGCiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgcmV0dXJuIGF3YWl0IGdldEZvbGxvd2luZ1BhZ2VWNih1aWQsIHBhZ2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gYXdhaXQgZ2V0Rm9sbG93aW5nUGFnZVY3KHVpZCwgcGFnZSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgZmV0Y2hpbmcgdXNlciBmb2xsb3dpbmcgZGF0YTogJW8nLCBlKTsKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsgc2V0VGltZW91dChyZXNvbHZlLCAzMGUzICogTWF0aC5taW4oOCwgYXR0ZW1wdCkpOyB9KTsKICAgICAgfQogICAgfQogICAgdXRpbC5kZWJ1ZygnQWJvcnRlZCBmZXRjaGluZyB1c2VyIGZvbGxvd2luZyBkYXRhLCB0b28gbWFueSBmYWlsZWQgYXR0ZW1wdHMuJyk7CiAgICB0aHJvdyBFcnJvcignTmV0d29yayBlcnJvciB3aGlsZSBmZXRjaGluZyBmb2xsb3dpbmcgZGF0YScpOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3JlcXVlc3Qvdm90ZWRldGFpbC5qcwovKioKICog6I635Y+W5oqV56Wo55qE6K+m5oOFCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCA/PyB7fTsKCiAgY29uc3Qgdm90ZURldGFpbCA9IGFzeW5jIGZ1bmN0aW9uICh2b3RlSWQpIHsKICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vdm90ZS53ZWliby5jb20vaDUvaW5kZXgvaW5kZXgnKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd2b3RlX2lkJywgdm90ZUlkKTsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgbmV0d29yay5mZXRjaFRleHQodXJsKTsKICAgIGNvbnN0IGRvbSA9IChuZXcgRE9NUGFyc2VyKCkpLnBhcnNlRnJvbVN0cmluZyhyZXNwLCAndGV4dC9odG1sJyk7CiAgICBjb25zdCBzY3JpcHRzID0gZG9tLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdDpub3QoW3NyY10pJyk7CiAgICBjb25zdCBkYXRhID0gWy4uLnNjcmlwdHNdLnJlZHVjZSgoZGF0YSwgc2NyaXB0KSA9PiB7CiAgICAgIGlmIChkYXRhKSByZXR1cm4gZGF0YTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzY3JpcHQudGV4dENvbnRlbnQubWF0Y2goL1x7W1xzXFNdKlx9LylbMF0pOwogICAgICAgIGlmICghZGF0YS52b3RlX2luZm8pIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sIG51bGwpOwogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmVxdWVzdC52b3RlRGV0YWlsID0gdm90ZURldGFpbDsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC9mZWVkZmF2b3JpdGUuanMKLyoqCiAqIOaUtuiXj+S4gOadoeW+ruWNmgogKi8KOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0ID8/IHt9OwoKICBjb25zdCBzdHJpbmdzID0gdXRpbC5zdHJpbmdzOwoKICBjb25zdCBmZWVkRmF2b3JpdGUgPSBmdW5jdGlvbiAoZmVlZCwgeyAkQ09ORklHIH0pIHsKICAgIGNvbnN0IG1pZCA9IGZlZWQuZ2V0QXR0cmlidXRlKCdtaWQnKTsKICAgIGNvbnN0IHVybCA9IFN0cmluZyhuZXcgVVJMKCcvYWovZmF2L21ibG9nL2FkZD9hand2cj02JywgbG9jYXRpb24uaHJlZikpOwogICAgY29uc3QgYm9keSA9IFN0cmluZyhuZXcgVVJMU2VhcmNoUGFyYW1zKFsKICAgICAgWydtaWQnLCBtaWRdLAogICAgICAuLi5uZXcgVVJMU2VhcmNoUGFyYW1zKGZlZWQuZ2V0QXR0cmlidXRlKCdkYXRhLW1hcmsnKSksCiAgICAgIFsnbG9jYXRpb24nLCAkQ09ORklHLmxvY2F0aW9uXSwKICAgICAgLi4ubmV3IFVSTFNlYXJjaFBhcmFtcyhmZWVkLmdldEF0dHJpYnV0ZSgnZGlzcy1kYXRhJykpLAogICAgXSkpOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzXG5QT1NUXG4lcycsIHVybCwgYm9keSk7CiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgIGNvbnN0IGtleSA9ICdmZWVkX2Zhdm9yaXRlXycgKyBzdHJpbmdzLnJhbmRLZXkoKTsKICAgICAgY29uc3QgbGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBjb25zdCBzdWNjZXNzID0gZXZlbnQuZGV0YWlsLnN1Y2Nlc3MgPT09ICd0cnVlJzsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihrZXksIGxpc3RlbmVyLCB0cnVlKTsKICAgICAgICByZXNvbHZlKHN1Y2Nlc3MpOwogICAgICB9OwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihrZXksIGxpc3RlbmVyLCB0cnVlKTsKICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHsgdXJsLCBib2R5IH0sIGtleSkgewogICAgICAgIGxldCBzdWNjZXNzID0gZmFsc2U7CiAgICAgICAgOyAoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKHVybCwgewogICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoYm9keSksCiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJywKICAgICAgICAgICAgfSkudGhlbihyZXNwID0+IHJlc3AuanNvbigpKTsKICAgICAgICAgICAgc3VjY2VzcyA9IHJlc3AuY29kZSA9PT0gJzEwMDAwMCc7CiAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH0KICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGtleSwgewogICAgICAgICAgICBkZXRhaWw6IHsgc3VjY2VzczogSlNPTi5zdHJpbmdpZnkoc3VjY2VzcykgfSwKICAgICAgICAgIH0pOwogICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgIH0oKSk7CiAgICAgIH0sIHsgdXJsLCBib2R5IH0sIGtleSk7CiAgICB9KTsKICB9OwogIHJlcXVlc3QuZmVlZEZhdm9yaXRlID0gZmVlZEZhdm9yaXRlOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L2ltYWdlLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgbmV0d29yayA9IHlhd2YubmV0d29yazsKCiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCA/PyB7fTsKCiAgY29uc3QgZ2V0SW1hZ2UgPSBmdW5jdGlvbiAodXJsKSB7CiAgICB1dGlsLmRlYnVnKCdmZXRjaCB1cmwgJXMnLCB1cmwpOwogICAgcmV0dXJuIG5ldHdvcmsuZmV0Y2hCbG9iKHVybCwgeyBjcmVkZW50aWFsczogJ29taXQnIH0pOwogIH07CiAgcmVxdWVzdC5nZXRJbWFnZSA9IGdldEltYWdlOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L2ZlZWRoaXN0b3J5LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgbmV0d29yayA9IHlhd2YubmV0d29yazsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0ID8/IHt9OwoKICBjb25zdCB0aW1lID0gdXRpbC50aW1lOwoKICBjb25zdCBwYWdlU2l6ZSA9IDEwOwogIGNvbnN0IGZlZWRIaXN0b3J5UGFnZSA9IGFzeW5jIGZ1bmN0aW9uIChtaWQsIHBhZ2UpIHsKICAgIGNvbnN0IGhvc3QgPSBsb2NhdGlvbi5ob3N0bmFtZTsKICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYGh0dHBzOi8vJHtob3N0fS9wL2FqL3Y2L2hpc3Rvcnk/YWp3dnI9NiZkb21haW49MTAwNTA1YCk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnbWlkJywgbWlkKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwYWdlJywgcGFnZSk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncGFnZV9zaXplJywgcGFnZVNpemUpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19fcm5kJywgRGF0ZS5ub3coKSk7CiAgICB1dGlsLmRlYnVnKCdmZXRjaCB1cmwgJXMnLCB1cmwgKyAnJyk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgbmV0d29yay5mZXRjaEpzb24odXJsICsgJycpOwogICAgY29uc3QgZGF0YSA9IHJlc3AuZGF0YTsKICAgIGNvbnN0IGNvdW50ID0gZGF0YS50b3RhbF9udW07CiAgICBjb25zdCBkb20gPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGRhdGEuaHRtbCwgJ3RleHQvaHRtbCcpOwogICAgY29uc3QgaGlzdG9yeUxpc3QgPSBbLi4uZG9tLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mZWVkX2RldGFpbCcpXS5tYXAoaGlzdG9yeSA9PiB7CiAgICAgIGNvbnN0IGZyb20gPSBoaXN0b3J5LnF1ZXJ5U2VsZWN0b3IoJy5XQl9mcm9tJyk7CiAgICAgIGNvbnN0IGRhdGUgPSB0aW1lLnBhcnNlKGZyb20ucXVlcnlTZWxlY3RvcignYScpLnRleHRDb250ZW50LnRyaW0oKSk7CiAgICAgIGZyb20ucmVtb3ZlKCk7CiAgICAgIGNvbnN0IHRleHQgPSBoaXN0b3J5LnF1ZXJ5U2VsZWN0b3IoJy5XQl90ZXh0Jyk7CiAgICAgIC8vIOaIkeS5n+S4jeefpemBk+S4uuS7gOS5iOacq+WwvuacieS4gOS4qumbtuWuveepuuagvO+8jOiAjOS4lOmbtuWuveepuuagvOWJjei/mOWPr+iDveacieepuuagvAogICAgICBjb25zdCBzb3VyY2UgPSB0ZXh0LnRleHRDb250ZW50LnJlcGxhY2UoL15bXHNdKnxbXHNcdTIwMGJdKiQvZywgJycpOwogICAgICB0ZXh0LnRleHRDb250ZW50ID0gc291cmNlOwogICAgICBjb25zdCBpbWdzID0gQXJyYXkuZnJvbShoaXN0b3J5LnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9waWMgaW1nJykpOwogICAgICBpZiAoaW1ncy5sZW5ndGgpIHsKICAgICAgICBjb25zdCBvbGQgPSBoaXN0b3J5LnF1ZXJ5U2VsZWN0b3IoJy5XQl9tZWRpYV93cmFwJyk7CiAgICAgICAgY29uc3QgbWVkaWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBtZWRpYS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0JfbWVkaWFfd3JhcCBjbGVhcmZpeCI+PGRpdiBjbGFzcz0ibWVkaWFfYm94Ij48dWwgY2xhc3M9IldCX21lZGlhX2EgY2xlYXJmaXgiPjxsaSBjbGFzcz0iV0JfcGljIFNfYmcxIFNfbGluZTIiIGFjdGlvbi10eXBlPSJmbF9waWNzIj48L2xpPjwvdWw+PC9kaXY+PC9kaXY+JzsKICAgICAgICBjb25zdCB1bCA9IG1lZGlhLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7CiAgICAgICAgY29uc3QgbGkgPSB1bC5yZW1vdmVDaGlsZCh1bC5maXJzdENoaWxkKTsKICAgICAgICB1bC5jbGFzc0xpc3QuYWRkKCdXQl9tZWRpYV9hX20nICsgaW1ncy5sZW5ndGgpOwogICAgICAgIGlmIChpbWdzLmxlbmd0aCA+IDEpIHVsLmNsYXNzTGlzdC5hZGQoJ1dCX21lZGlhX2FfbW4nKTsKICAgICAgICBpbWdzLmZvckVhY2goKGltZywgaW5kZXgpID0+IHsKICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGxpLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdsaV8nICsgKGluZGV4ICsgMSkpOwogICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGltZyk7CiAgICAgICAgICBjb25zdCBhY3Rpb25EYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcygnaXNQcml2YXRlPTAmcmVsYXRpb249MCcpOwogICAgICAgICAgYWN0aW9uRGF0YS5zZXQoJ3BpY19pZCcsIGltZy5zcmMucmVwbGFjZSgvXi4qXC98XC4uKiQvZywgJycpKTsKICAgICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJywgYWN0aW9uRGF0YSk7CiAgICAgICAgICB1bC5hcHBlbmRDaGlsZChjb250YWluZXIpOwogICAgICAgIH0pOwogICAgICAgIG9sZC5yZXBsYWNlV2l0aChtZWRpYS5maXJzdENoaWxkKTsKICAgICAgfQogICAgICByZXR1cm4geyBkYXRlLCBkb206IGhpc3RvcnksIHRleHQ6IHNvdXJjZSwgaW1ncyB9OwogICAgfSk7CiAgICByZXR1cm4geyBjb3VudCwgbGlzdDogaGlzdG9yeUxpc3QgfTsKICB9OwoKICBjb25zdCBmZWVkSGlzdG9yeSA9IGFzeW5jIGZ1bmN0aW9uIChtaWQpIHsKICAgIGNvbnN0IHsgY291bnQsIGxpc3QgfSA9IGF3YWl0IGZlZWRIaXN0b3J5UGFnZShtaWQsIDEpOwogICAgY29uc3QgcGFnZXMgPSBNYXRoLmNlaWwoY291bnQgLyBwYWdlU2l6ZSk7CiAgICBmb3IgKGxldCBpID0gMjsgaSA8PSBwYWdlczsgaSsrKSB7CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmZWVkSGlzdG9yeVBhZ2UobWlkLCBpKTsKICAgICAgbGlzdC5wdXNoKC4uLmRhdGEubGlzdCk7CiAgICB9CiAgICBsaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgIGl0ZW0uaW5kZXggPSBsaXN0Lmxlbmd0aCAtIGluZGV4OwogICAgfSk7CiAgICByZXR1cm4gbGlzdDsKICB9OwogIHJlcXVlc3QuZmVlZEhpc3RvcnkgPSBmZWVkSGlzdG9yeTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC9hbGxpbWFnZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCA/PyB7fTsKCiAgY29uc3QgZ2V0QWxsSW1hZ2VzID0gYXN5bmMgZnVuY3Rpb24gKGF1dGhvciwgbWlkKSB7CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGBodHRwczovL3dlaWJvLmNvbS8ke2F1dGhvcn0vJHt1dGlsLm1pZC5lbmNvZGUobWlkKX1gKTsKICAgIGNvbnN0IGh0bWwgPSBhd2FpdCBuZXR3b3JrLmZldGNoVGV4dCh1cmwgKyAnJyk7CiAgICBjb25zdCBkb21QYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7CiAgICBjb25zdCBwYWdlID0gZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyhodG1sLCAndGV4dC9odG1sJyk7CiAgICBjb25zdCBzY3JpcHRzID0gQXJyYXkuZnJvbShwYWdlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpKTsKICAgIGNvbnN0IGZlZWRNb2RlbCA9IHNjcmlwdHMucmVkdWNlKChmZWVkTW9kZWwsIHNjcmlwdCkgPT4gewogICAgICBpZiAoZmVlZE1vZGVsKSByZXR1cm4gZmVlZE1vZGVsOwogICAgICBjb25zdCBjb250ZW50ID0gc2NyaXB0LnRleHRDb250ZW50Lm1hdGNoKC9eXHMqRk1cLnZpZXdcKChcey4qXH0pXCk7P1xzKiQvKTsKICAgICAgaWYgKCFjb250ZW50KSByZXR1cm4gbnVsbDsKICAgICAgY29uc3QgbW9kZWwgPSBKU09OLnBhcnNlKGNvbnRlbnRbMV0pOwogICAgICBpZiAobW9kZWwubnMgIT09ICdwbC5jb250ZW50LndlaWJvRGV0YWlsLmluZGV4JykgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiBtb2RlbDsKICAgIH0sIG51bGwpOwogICAgaWYgKCFmZWVkTW9kZWwpIHJldHVybiBudWxsOwogICAgY29uc3QgZmVlZCA9IGRvbVBhcnNlci5wYXJzZUZyb21TdHJpbmcoZmVlZE1vZGVsLmh0bWwsICd0ZXh0L2h0bWwnKS5xdWVyeVNlbGVjdG9yKCdbbWlkXScpOwogICAgY29uc3QgaW1ncyA9IEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfcGljIGltZycpKTsKICAgIHJldHVybiBpbWdzLm1hcChpbWcgPT4gaW1nLnNyYy5yZXBsYWNlKC9eaHR0cHM6LywgJycpKTsKICB9OwogIHJlcXVlc3QuZ2V0QWxsSW1hZ2VzID0gZ2V0QWxsSW1hZ2VzOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L2FydGljbGUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPz8ge307CgogIGNvbnN0IGlnbm9yZUVycm9yID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICB0cnkgeyByZXR1cm4gY2FsbGJhY2soKTsgfSBjYXRjaCAoZSkgeyAvKiBpZ25vcmUgKi8gfQogICAgcmV0dXJuIG51bGw7CiAgfTsKCiAgY29uc3QgZmVlZENhcmQgPSBmdW5jdGlvbiAobWlkKSB7CiAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd4LWlmcmFtZScpOwogICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgYGh0dHBzOi8vY2FyZC53ZWliby5jb20vYXJ0aWNsZS92My9jYXJkaWZyYW1lP3R5cGU9ZmVlZCZpZD0ke21pZH1gKTsKICAgIGlmcmFtZS5jbGFzc05hbWUgPSAnY2FyZCBmZWVkLWNhcmQnOwogICAgcmV0dXJuIGlmcmFtZTsKICB9OwoKICBjb25zdCBtZWRpYUNhcmQgPSBmdW5jdGlvbiAoaWQpIHsKICAgIGNvbnN0IG1lZGlhVHlwZSA9IHsgMTAwMTIwOiAnbW92aWUnIH1baWQuc2xpY2UoMCwgNildOwogICAgaWYgKCFtZWRpYVR5cGUpIHJldHVybiBudWxsOwogICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgneC1pZnJhbWUnKTsKICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGBodHRwczovL2NhcmQud2VpYm8uY29tL2FydGljbGUvdjMvY2FyZGlmcmFtZT90eXBlPW1vdmllJmlkPTEwMjI6JHtpZH1gKTsKICAgIGlmcmFtZS5jbGFzc05hbWUgPSBgY2FyZCBtZWRpYS1jYXJkICR7bWVkaWFUeXBlfS1tZWRpYS1jYXJkYDsKICAgIHJldHVybiBpZnJhbWU7CiAgfTsKCiAgY29uc3Qgc2NyaXB0VmlkZW8gPSBmdW5jdGlvbiAoc2NyaXB0KSB7CiAgICB0cnkgewogICAgICBjb25zdCBtYXRjaCA9IHNjcmlwdC5tYXRjaCgva3J2XC5pbml0XChceyg/Oig/PS4qc3JjWyciXT9ccyo6XHMqKCIuKj8oPyFcXCkuIikpKSg/Oig/PS4qcG9zdGVyWyciXT9ccyo6XHMqKCIuKj8oPyFcXCkuIikpKS8pOwogICAgICBjb25zdCBbXywgc3JjLCBwb3N0ZXJdID0gbWF0Y2g7CiAgICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsKICAgICAgdmlkZW8uY29udHJvbHMgPSB0cnVlOwogICAgICB2aWRlby5zcmMgPSBKU09OLnBhcnNlKHNyYyk7CiAgICAgIHZpZGVvLnBvc3RlciA9IEpTT04ucGFyc2UocG9zdGVyKTsKICAgICAgcmV0dXJuIHZpZGVvOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9OwoKICBjb25zdCB3aGl0ZUxpc3RUYWdzID0gWwogICAgJ2EnLAogICAgJ3AnLCAnaDEnLCAnaDInLCAnaDMnLCAnaDQnLCAnaDUnLCAnaDYnLAogICAgJ29sJywgJ3VsJywgJ2xpJywKICAgICdzdXAnLCAnc3ViJywKICAgICdpbWcnLAogICAgJ3RhYmxlJywgJ3RoZWFkJywgJ3Rib2R5JywgJ3Rmb290JywgJ3RyJywgJ3RoJywgJ3RkJywKICAgICdibG9ja3F1b3RlJywgJ3F1b3RlJywKICAgICdicicsICdocicsCiAgICAnc3BhbicsICdkaXYnLAogIF07CiAgY29uc3Qgd2hpdGVMaXN0QXR0cmlidXRlID0gdGFnTmFtZSA9PiBbCiAgICAuLi4oewogICAgICBpbWc6IFsnc3JjJ10sCiAgICB9W3RhZ05hbWVdID8/IFtdKSwKICBdOwogIGNvbnN0IHdoaXRlTGlzdFN0eWxlID0gewogICAgJ3RleHQtYWxpZ24nOiAvXig/OmxlZnR8cmlnaHR8Y2VudGVyfGp1c3RpZnkpJC8sCiAgICAnZm9udC1zdHlsZSc6IC9eaXRhbGljJC8sCiAgICAnZm9udC13ZWlnaHQnOiAvXmJvbGQkLywKICAgICd0ZXh0LWRlY29yYXRpb24tbGluZSc6IC9eKD86dW5kZXJsaW5lfGxpbmUtdGhyb3VnaCkkLywKICAgIGNvbG9yOiBmdW5jdGlvbiAoY29sb3IpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBbciwgZywgYl0gPSBjb2xvci5tYXRjaCgvcmdiYT9cKCguKilcKS8pWzFdLnNwbGl0KCcsJykubWFwKE51bWJlcik7CiAgICAgICAgaWYgKE1hdGgubWF4KHIsIGcsIGIpIDwgNDUpIHJldHVybiAndmFyKC0tdGV4dC1jb2xvciknOwogICAgICAgIHJldHVybiBgcmdiKCR7cn0sICR7Z30sICR7Yn0pYDsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAogIH07CiAgY29uc3QgcGFyc2VTcGVjaWFsRWxlbWVudHMgPSBmdW5jdGlvbiAoLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi9jb250YWluZXIpIHsKICAgIC8qKiBAdHlwZSB7TWFwPEhUTUxFbGVtZW50LCBIVE1MRWxlbWVudD59ICovCiAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSBuZXcgTWFwKCk7CiAgICBjb25zdCByZXBsYWNlRWxlbWVudCA9IChzb3VyY2UsIHJlc3VsdCkgPT4gewogICAgICBjb25zdCBwbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3gtc2FuaXRpemUtcGxhY2Vob2xkZXInKTsKICAgICAgcGxhY2Vob2xkZXJzLnNldChwbGFjZWhvbGRlciwgcmVzdWx0KTsKICAgICAgc291cmNlLnJlcGxhY2VXaXRoKHBsYWNlaG9sZGVyKTsKICAgIH07CiAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZmVlZFtkYXRhLW1pZF0nKSkuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgLy8g5byV55So5LiA5p2h5b6u5Y2aCiAgICAgIGNvbnN0IGNhcmQgPSBpZ25vcmVFcnJvcigoKSA9PiBmZWVkQ2FyZChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1taWQnKSkpOwogICAgICByZXBsYWNlRWxlbWVudChlbGVtZW50LCBjYXJkKTsKICAgIH0pOwogICAgQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNhcmRib3gnKSkuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgLy8g5byV55So55S15b2x566A5LuLCiAgICAgIC8qKiBAdHlwZSB7SFRNTEFuY2hvckVsZW1lbnR9ICovCiAgICAgIGNvbnN0IGxpbmsgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZl49Imh0dHBzOi8vd2VpYm8uY29tL3AvIl0nKTsKICAgICAgaWYgKGxpbmspIHsKICAgICAgICBjb25zdCBpZCA9IGxpbmsuaHJlZi5zcGxpdCgnLycpLnBvcCgpOwogICAgICAgIGNvbnN0IG1lZGlhID0gaWQgJiYgaWdub3JlRXJyb3IoKCkgPT4gbWVkaWFDYXJkKGlkKSk7CiAgICAgICAgcmVwbGFjZUVsZW1lbnQoZWxlbWVudCwgbWVkaWEpOwogICAgICB9CiAgICB9KTsKICAgIEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpKS5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAvLyDmj5LlhaXkuIDmrrXop4bpopEKICAgICAgaWYgKC9rcnYuaW5pdFwoXHsuKlx9XCkvLnRlc3QoZWxlbWVudC50ZXh0Q29udGVudCkpIHsKICAgICAgICBjb25zdCB2aWRlbyA9IGlnbm9yZUVycm9yKCgpID0+IHNjcmlwdFZpZGVvKGVsZW1lbnQudGV4dENvbnRlbnQpKTsKICAgICAgICByZXBsYWNlRWxlbWVudChlbGVtZW50LCB2aWRlbyk7CiAgICAgIH0KICAgICAgcmVwbGFjZUVsZW1lbnQoZWxlbWVudCwgbnVsbCk7CiAgICB9KTsKICAgIHJldHVybiBwbGFjZWhvbGRlcnM7CiAgfTsKICBjb25zdCBzYW5pdGl6ZUFuY2hvckVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgbGV0IHVybDsKICAgIHRyeSB7IHVybCA9IG5ldyBVUkwoZWxlbWVudC5ocmVmKTsgfSBjYXRjaCAoZSkgeyB1cmwgPSBudWxsOyB9CiAgICBpZiAoIXVybCB8fCAhWydodHRwOicsICdodHRwczonXS5pbmNsdWRlcyh1cmwucHJvdG9jb2wpKSB7CiAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIHJldHVybiBzcGFuOwogICAgfQogICAgY29uc3QgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgYW5jaG9yLmhyZWYgPSB1cmwuaHJlZjsKICAgIGFuY2hvci5yZWZlcnJlclBvbGljeSA9ICduby1yZWZlcnJlcic7CiAgICBhbmNob3IudGFyZ2V0ID0gJ19ibGFuayc7CiAgICByZXR1cm4gYW5jaG9yOwogIH07CiAgY29uc3QgYW5vdGhlclRhZyA9IGZ1bmN0aW9uICh0YWdOYW1lLCBvcmkpIHsKICAgIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7CiAgICBpZiAob3JpLmhhc0F0dHJpYnV0ZSgnc3R5bGUnKSkgcmVzdWx0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBvcmkuZ2V0QXR0cmlidXRlKCdzdHlsZScpKTsKICAgIHdoaWxlIChvcmkuZmlyc3RDaGlsZCkgcmVzdWx0LmFwcGVuZENoaWxkKG9yaS5maXJzdENoaWxkKTsKICAgIG9yaS5yZXBsYWNlV2l0aChyZXN1bHQpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwogIGNvbnN0IHNhbml0aXplQ29udGVudCA9IGZ1bmN0aW9uICgvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL2VsZW1lbnQpIHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgY29uc3QgcGxhY2Vob2xkZXJzID0gcGFyc2VTcGVjaWFsRWxlbWVudHMoY29udGFpbmVyKTsKICAgIC8vIOaKiuWxnuaAp+aNouaIkCBDU1MKICAgIFt7IGh0bWw6ICdjb2xvcicsIGNzczogJ2NvbG9yJyB9LCB7IGh0bWw6ICdhbGlnbicsIGNzczogJ3RleHRBbGlnbicgfV0uZm9yRWFjaCgoeyBodG1sLCBjc3MgfSkgPT4gewogICAgICBbLi4uY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoYFske2h0bWx9XWApXS5mb3JFYWNoKGUgPT4gZS5zdHlsZVtjc3NdID0gZS5nZXRBdHRyaWJ1dGUoaHRtbCkpOwogICAgfSk7CiAgICAvLyDmioogZm9udCDmoIfnrb7mjaLmiJAgc3BhbgogICAgWy4uLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdmb250JyldLmZvckVhY2goZSA9PiB7CiAgICAgIGFub3RoZXJUYWcoJ3NwYW4nLCBlKTsKICAgIH0pOwogICAgLy8g5oqK5qCH562+5o2i5oiQIENTUwogICAgWwogICAgICB7IHRhZzogJ2InLCBjc3M6IHsgYXR0cjogJ2ZvbnQtd2VpZ2h0JywgdmFsdWU6ICdib2xkJyB9IH0sCiAgICAgIHsgdGFnOiAnZGVsJywgY3NzOiB7IGF0dHI6ICd0ZXh0LWRlY29yYXRpb24nLCB2YWx1ZTogJ2xpbmUtdGhyb3VnaCcgfSB9LAogICAgICB7IHRhZzogJ2VtJywgY3NzOiB7IGF0dHI6ICdmb250LXN0eWxlJywgdmFsdWU6ICdpdGFsaWMnIH0gfSwKICAgICAgeyB0YWc6ICdpJywgY3NzOiB7IGF0dHI6ICdmb250LXN0eWxlJywgdmFsdWU6ICdpdGFsaWMnIH0gfSwKICAgICAgeyB0YWc6ICdzJywgY3NzOiB7IGF0dHI6ICd0ZXh0LWRlY29yYXRpb24nLCB2YWx1ZTogJ2xpbmUtdGhyb3VnaCcgfSB9LAogICAgICB7IHRhZzogJ3N0cmlrZScsIGNzczogeyBhdHRyOiAndGV4dC1kZWNvcmF0aW9uJywgdmFsdWU6ICdsaW5lLXRocm91Z2gnIH0gfSwKICAgICAgeyB0YWc6ICdzdHJvbmcnLCBjc3M6IHsgYXR0cjogJ2ZvbnQtd2VpZ2h0JywgdmFsdWU6ICdib2xkJyB9IH0sCiAgICAgIHsgdGFnOiAndScsIGNzczogeyBhdHRyOiAndGV4dC1kZWNvcmF0aW9uJywgdmFsdWU6ICd1bmRlcmxpbmUnIH0gfSwKICAgIF0uZm9yRWFjaCgoeyB0YWcsIGNzczogeyBhdHRyLCB2YWx1ZSB9IH0pID0+IHsKICAgICAgWy4uLmNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpXS5mb3JFYWNoKGUgPT4gewogICAgICAgIGFub3RoZXJUYWcoJ3NwYW4nLCBlKS5zdHlsZS5zZXRQcm9wZXJ0eShhdHRyLCB2YWx1ZSk7CiAgICAgIH0pOwogICAgfSk7CiAgICAvLyDmiorlm77niYfphY3lrZfmjaLmiJAgZmlndXJlCiAgICBpZiAoZWxlbWVudC5tYXRjaGVzKCcucGljYm94JykpIGRvIHsKICAgICAgY29uc3Qgb3JpID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbWdbc3JjXScpOwogICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBpY2luZm8nKTsKICAgICAgaWYgKCFvcmkpIGJyZWFrOwogICAgICBjb25zdCBmaWd1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWd1cmUnKTsKICAgICAgY29uc3QgaW1nID0gZmlndXJlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKTsKICAgICAgaW1nLnNyYyA9IG9yaS5zcmM7CiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uVGV4dCA9IGRlc2NyaXB0aW9uPy50ZXh0Q29udGVudC50cmltKCk7CiAgICAgIGlmIChkZXNjcmlwdGlvblRleHQpIHsKICAgICAgICBjb25zdCBmaWdjYXB0aW9uID0gZmlndXJlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZ2NhcHRpb24nKSk7CiAgICAgICAgZmlnY2FwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uVGV4dDsKICAgICAgfQogICAgICByZXR1cm4gW2ZpZ3VyZV07CiAgICB9IHdoaWxlIChmYWxzZSk7CiAgICAvLyDmnIDlkI7liankuIvnmoTlhYPntKDlho3lgZrkuIDmrKHmtojmr5IKICAgIHJldHVybiBbLi4uY29udGFpbmVyLmNoaWxkTm9kZXNdLm1hcChmdW5jdGlvbiBzYW5pdGl6ZShub2RlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHBsYWNlaG9sZGVycy5oYXMobm9kZSkpIHJldHVybiBwbGFjZWhvbGRlcnMuZ2V0KG5vZGUpOwogICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkgewogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5vZGUudGV4dENvbnRlbnQpOwogICAgICAgIH0KICAgICAgICBjb25zdCBlbGVtZW50ID0gbm9kZTsKICAgICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUpIHJldHVybiBudWxsOwogICAgICAgIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IG9yaVRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICBjb25zdCB0YWdOYW1lID0gd2hpdGVMaXN0VGFncy5pbmNsdWRlcyhvcmlUYWdOYW1lKSA/IG9yaVRhZ05hbWUgOiAnc3Bhbic7CiAgICAgICAgaWYgKHRhZ05hbWUgPT09ICdhJykgewogICAgICAgICAgY29uc3QgYW5jaG9yID0gc2FuaXRpemVBbmNob3JFbGVtZW50KGVsZW1lbnQpOwogICAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkTm9kZXMpLmZvckVhY2gobm9kZSA9PiBhbmNob3IuYXBwZW5kQ2hpbGQoc2FuaXRpemUobm9kZSkpKTsKICAgICAgICAgIHJldHVybiBhbmNob3I7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7CiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHdoaXRlTGlzdEF0dHJpYnV0ZSh0YWdOYW1lKTsKICAgICAgICBBcnJheS5mcm9tKGVsZW1lbnQuYXR0cmlidXRlcykuZm9yRWFjaChhdHRyaWJ1dGUgPT4gewogICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuaW5jbHVkZXMoYXR0cmlidXRlLm5hbWUpKSB7CiAgICAgICAgICAgIHJlc3VsdC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLm5hbWUsIGF0dHJpYnV0ZS52YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbGVtZW50LnN0eWxlOwogICAgICAgIEFycmF5LmZyb20oc3R5bGUpLmZvckVhY2gocHJvcCA9PiB7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJvcCk7CiAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSB3aGl0ZUxpc3RTdHlsZVtwcm9wXTsKICAgICAgICAgIGlmICh0ZXN0VmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgICAgaWYgKCF0ZXN0VmFsdWUudGVzdCh2YWx1ZSkpIHJldHVybjsKICAgICAgICAgICAgcmVzdWx0LnN0eWxlLnNldFByb3BlcnR5KHByb3AsIHZhbHVlKTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRlc3RWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBjb25zdCBwYXJzZWQgPSB0ZXN0VmFsdWUodmFsdWUpOwogICAgICAgICAgICBpZiAocGFyc2VkID09PSBudWxsKSByZXR1cm47CiAgICAgICAgICAgIHJlc3VsdC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLCBwYXJzZWQpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIEFycmF5LmZyb20oZWxlbWVudC5jaGlsZE5vZGVzKS5mb3JFYWNoKG5vZGUgPT4gewogICAgICAgICAgY29uc3Qgc2FuaXRpemVkID0gc2FuaXRpemUobm9kZSk7CiAgICAgICAgICBpZiAoc2FuaXRpemVkKSByZXN1bHQuYXBwZW5kQ2hpbGQoc2FuaXRpemVkKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgIEFycmF5LmZyb20oZWxlbWVudC5jaGlsZE5vZGVzKS5mb3JFYWNoKG5vZGUgPT4gewogICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWQgPSBzYW5pdGl6ZShub2RlKTsKICAgICAgICAgICAgaWYgKHNhbml0aXplZCkgcmVzdWx0LmFwcGVuZENoaWxkKHNhbml0aXplZCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSBjYXRjaCAoZTIpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShub2RlLnRleHRDb250ZW50KTsKICAgICAgICAgIH0gY2F0Y2ggKGUzKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSkuZmlsdGVyKHggPT4geCk7CiAgfTsKCiAgY29uc3QgcGFyc2VDb250ZW50ID0gZnVuY3Rpb24gKC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR9ICovY29udGVudCkgewogICAgY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBbLi4uY29udGVudC5jaGlsZHJlbl0uZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgc2FuaXRpemVDb250ZW50KGVsZW1lbnQpLmZvckVhY2gobm9kZSA9PiByZXN1bHQuYXBwZW5kQ2hpbGQobm9kZSkpOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0LmlubmVySFRNTDsKICB9OwoKICBjb25zdCBwYXJzZUFydGljbGUgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHsKICAgIGNvbnN0IGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbm9kZS10eXBlPSJhcnRpY2xlQ29udGVudCJdJyk7CiAgICBjb25zdCByZXN1bHQgPSB7fTsKICAgIHJlc3VsdC50aXRsZSA9IGlnbm9yZUVycm9yKCgpID0+IGFydGljbGUucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iYXJ0aWNsZVRpdGxlIl0nKS50ZXh0Q29udGVudCk7CiAgICByZXN1bHQuYXV0aG9yID0gaWdub3JlRXJyb3IoKCkgPT4gewogICAgICBjb25zdCBhdXRob3IgPSB7fTsKICAgICAgYXV0aG9yLmF2YXRhciA9IGFydGljbGUucXVlcnlTZWxlY3RvcignLmF1dGhvcmluZm8gaW1nJykuc3JjOwogICAgICBhdXRob3IubmFtZSA9IGFydGljbGUucXVlcnlTZWxlY3RvcignLmF1dGhvcmluZm8gYScpLnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgYXV0aG9yLnVpZCA9IGFydGljbGUucXVlcnlTZWxlY3RvcignLmF1dGhvcmluZm8gYScpLmhyZWYuc3BsaXQoJy8nKS5wb3AoKTsKICAgICAgYXV0aG9yLmlubmVyID0gaWdub3JlRXJyb3IoKCkgPT4gewogICAgICAgIGNvbnN0IGlubmVyID0ge307CiAgICAgICAgY29uc3QgYXV0aG9yMiA9IGFydGljbGUucXVlcnlTZWxlY3RvcignLmF1dGhvcmluZm8gLmF1dGhvcjJpbicpOwogICAgICAgIGlmICghYXV0aG9yMikgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgbGluayA9IGF1dGhvcjIucXVlcnlTZWxlY3RvcignYVtocmVmXj0iL3UvIl0nKTsKICAgICAgICBpZiAobGluaykgewogICAgICAgICAgaW5uZXIubmFtZSA9IGxpbmsudGV4dENvbnRlbnQudHJpbSgpOwogICAgICAgICAgaW5uZXIudWlkID0gbGluay5ocmVmLnNwbGl0KCcvJykucG9wKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlubmVyLm5hbWUgPSBhdXRob3IyLnRleHRDb250ZW50LnRyaW0oKS5yZXBsYWNlKC9eXHMqXFMrXHMrLywgJycpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaW5uZXI7CiAgICAgIH0pOwogICAgICByZXR1cm4gYXV0aG9yOwogICAgfSk7CiAgICByZXN1bHQuZmVlZCA9IGlnbm9yZUVycm9yKCgpID0+IHsKICAgICAgY29uc3QgZmFrZUZlZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZCBbbWlkXScpOwogICAgICBjb25zdCBtaWQgPSBmYWtlRmVlZC5nZXRBdHRyaWJ1dGUoJ21pZCcpOwogICAgICBjb25zdCBjb21tZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2FjdGlvbi10eXBlPSJmbF9jb21tZW50Il0nKTsKICAgICAgY29uc3Qgb3VpZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoY29tbWVudC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykpLmdldCgnb3VpZCcpOwogICAgICByZXR1cm4gYGh0dHBzOi8vd2VpYm8uY29tLyR7b3VpZH0vJHt1dGlsLm1pZC5lbmNvZGUobWlkKX1gOwogICAgfSk7CiAgICByZXN1bHQudGltZSA9IGlnbm9yZUVycm9yKCgpID0+IGFydGljbGUucXVlcnlTZWxlY3RvcignLnRpbWUnKS50ZXh0Q29udGVudCk7CiAgICByZXN1bHQubGVhZCA9IGlnbm9yZUVycm9yKCgpID0+IGFydGljbGUucXVlcnlTZWxlY3RvcignLnByZWZhY2UnKS50ZXh0Q29udGVudCk7CiAgICByZXN1bHQuY292ZXIgPSBpZ25vcmVFcnJvcigoKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbm9kZS10eXBlPSJhcnRpY2xlSGVhZGVyUGljIl0nKS5zcmMpOwogICAgcmVzdWx0LnNvdXJjZSA9IGlnbm9yZUVycm9yKCgpID0+IGFydGljbGUucXVlcnlTZWxlY3RvcignLmF1dGhvcmluZm8gLmRlbCBhW3N1ZGEtdWF0cmFjayo9ImhlYWRsaW5lX3BjX3RyZW5kX291cmxfY2xpY2siXScpLmhyZWYpOwogICAgcmVzdWx0LmNyZWF0ZVRpbWUgPSBpZ25vcmVFcnJvcigoKSA9PiBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy50aW1lJykudGV4dENvbnRlbnQpOwogICAgcmVzdWx0LmNvbnRlbnQgPSBpZ25vcmVFcnJvcigoKSA9PiBwYXJzZUNvbnRlbnQoYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCdbbm9kZS10eXBlPSJjb250ZW50Qm9keSJdJykpKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgY29uc3QgZ2V0QXJ0aWNsZSA9IGFzeW5jIGZ1bmN0aW9uIChpZCkgewogICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vd2VpYm8uY29tL3R0YXJ0aWNsZS9wL3Nob3c/aWQ9JyArIGlkOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoVGV4dCh1cmwpOwogICAgLyoqIEB0eXBlIHtIVE1MRG9jdW1lbnR9ICovCiAgICBjb25zdCBkb20gPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHJlc3AsICd0ZXh0L2h0bWwnKTsKICAgIHJldHVybiBwYXJzZUFydGljbGUoZG9tKTsKICB9OwogIHJlcXVlc3QuZ2V0QXJ0aWNsZSA9IGdldEFydGljbGU7CgogIGNvbnN0IGdldEFydGljbGVDYXJkID0gYXN5bmMgZnVuY3Rpb24gKHNyYykgewogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgc3JjKTsKICAgIGNvbnN0IG9yaUh0bWwgPSBhd2FpdCBuZXR3b3JrLmZldGNoVGV4dChzcmMpOwogICAgY29uc3QgaHRtbCA9IG9yaUh0bWwucmVwbGFjZSgvPGhlYWQ+LywgJzxoZWFkPjxiYXNlIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwczovL2NhcmQud2VpYm8uY29tLyIgLz48bWV0YSBuYW1lPSJyZWZlcnJlciIgY29udGVudD0ibm8tcmVmZXJyZXIiIC8+Jyk7CiAgICByZXR1cm4gaHRtbDsKICB9OwogIHJlcXVlc3QuZ2V0QXJ0aWNsZUNhcmQgPSBnZXRBcnRpY2xlQ2FyZDsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcGxveWZpbGwgb2YgYnJvd3Nlci5zdG9yYWdlCjsgKGZ1bmN0aW9uICgpIHsKICBjb25zdCBicm93c2VyID0gd2luZG93LndlQnJvd3NlciA9IHdpbmRvdy53ZUJyb3dzZXIgfHwge307CgogIGNvbnN0IHN0b3JhZ2UgPSB7fTsKICBicm93c2VyLnN0b3JhZ2UgPSBzdG9yYWdlOwoKICBjb25zdCBzdXBwb3J0T25DaGFuZ2VkID0gQm9vbGVhbihHTS5hZGRWYWx1ZUNoYW5nZUxpc3RlbmVyKTsKCiAgY29uc3Qgb25DaGFuZ2VMaXN0ZW5lcnMgPSBbXTsKICBjb25zdCB0cmlnZ2VyT25DaGFuZ2UgPSBmdW5jdGlvbiAoeyBjaGFuZ2VzLCBhcmVhTmFtZSB9KSB7CiAgICBvbkNoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBsaXN0ZW5lcihKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNoYW5nZXMpKSwgYXJlYU5hbWUpOwogICAgICB9IGNhdGNoIChlKSB7IC8qIGlnbm9yZSAqLyB9CiAgICB9KTsKICB9OwoKICBjb25zdCBjb2xsZWN0ZWRLZXlzID0gbmV3IFNldCgpOwogIGNvbnN0IGNvbGxlY3RWYWx1ZXMgPSBmdW5jdGlvbiAoZ21rZXkpIHsKICAgIGlmICghc3VwcG9ydE9uQ2hhbmdlZCkgcmV0dXJuOwogICAgaWYgKGNvbGxlY3RlZEtleXMuaGFzKGdta2V5KSkgcmV0dXJuOwogICAgY29sbGVjdGVkS2V5cy5hZGQoZ21rZXkpOwogICAgR00uYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lcihnbWtleSwgZnVuY3Rpb24gKGdta2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHsKICAgICAgY29uc3QgYXJlYU5hbWUgPSBnbWtleS5zbGljZSgwLCBnbWtleS5pbmRleE9mKCc6OicpKTsKICAgICAgY29uc3Qga2V5ID0gZ21rZXkuc2xpY2UoZ21rZXkuaW5kZXhPZignOjonKSArIDIpOwogICAgICB0cmlnZ2VyT25DaGFuZ2UoewogICAgICAgIGNoYW5nZXM6IHsKICAgICAgICAgIFtrZXldOiB7CiAgICAgICAgICAgIG9sZFZhbHVlOiBKU09OLnBhcnNlKG9sZFZhbHVlKSwKICAgICAgICAgICAgbmV3VmFsdWU6IEpTT04ucGFyc2UobmV3VmFsdWUpLAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIGFyZWFOYW1lLAogICAgICB9KTsKICAgIH0pOwogIH07CgogIGNvbnN0IHN0b3JhZ2VBcmVhID0gZnVuY3Rpb24gKGFyZWEpIHsKICAgIGNvbnN0IHByZWZpeCA9IGFyZWEgKyAnOjonOwogICAgLyoqCiAgICAgKiBAcGFyYW0ge2FueX0ga2V5cwogICAgICovCiAgICBjb25zdCBnZXQgPSBhc3luYyBmdW5jdGlvbiAoa2V5cykgewogICAgICBjb25zdCBrZXlMaXN0ID0gW107CiAgICAgIGlmICh0eXBlb2Yga2V5cyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBrZXlMaXN0LnB1c2goeyBrZXk6IGtleXMsIGRlZmF1bHRWYWx1ZTogdm9pZCAwIH0pOwogICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoa2V5cykpIHsKICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykgcmV0dXJuOwogICAgICAgICAga2V5TGlzdC5wdXNoKHsga2V5LCBkZWZhdWx0VmFsdWU6IHZvaWQgMCB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChrZXlzIGluc3RhbmNlb2YgT2JqZWN0KSB7CiAgICAgICAgT2JqZWN0LmtleXMoa2V5cykuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAga2V5TGlzdC5wdXNoKHsga2V5LCBkZWZhdWx0VmFsdWU6IGtleXNba2V5XSB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChrZXlzID09IG51bGwpIHsKICAgICAgICAoYXdhaXQgR00ubGlzdFZhbHVlcygpKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICBpZiAoIWtleS5zdGFydHNXaXRoKHByZWZpeCkpIHJldHVybjsKICAgICAgICAgIGtleUxpc3QucHVzaCh7CiAgICAgICAgICAgIGtleToga2V5LnNsaWNlKHByZWZpeC5sZW5ndGgpLAogICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHZvaWQgMCwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGNvbnN0IGFsbEdldCA9IGtleUxpc3QubWFwKGFzeW5jICh7IGtleSwgZGVmYXVsdFZhbHVlIH0pID0+IHsKICAgICAgICBjb2xsZWN0VmFsdWVzKHByZWZpeCArIGtleSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgR00uZ2V0VmFsdWUocHJlZml4ICsga2V5KTsKICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gZGVmYXVsdFZhbHVlOwogICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiB2b2lkIDA7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwoYWxsR2V0KTsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIC4uLmtleUxpc3QubWFwKCh7IGtleSB9LCBpbmRleCkgPT4gKAogICAgICAgIHJlc3VsdFtpbmRleF0gIT09ICh2b2lkIDApID8gKHsgW2tleV06IHJlc3VsdFtpbmRleF0gfSkgOiB7fQogICAgICApKSk7CiAgICB9OwogICAgY29uc3QgZ2V0Qnl0ZXNJblVzZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkJyk7CiAgICB9OwogICAgY29uc3Qgc2V0ID0gYXN5bmMgZnVuY3Rpb24gKGtleXMpIHsKICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IFtdOwogICAgICBPYmplY3Qua2V5cyhrZXlzKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgc2VyaWFsaXplZC5wdXNoKHsga2V5LCB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoa2V5c1trZXldKSB9KTsKICAgICAgfSk7CiAgICAgIGNvbnN0IGFsbFNldCA9IHNlcmlhbGl6ZWQubWFwKCh7IGtleSwgdmFsdWUgfSkgPT4gewogICAgICAgIGNvbGxlY3RWYWx1ZXMocHJlZml4ICsga2V5KTsKICAgICAgICByZXR1cm4gR00uc2V0VmFsdWUocHJlZml4ICsga2V5LCB2YWx1ZSk7CiAgICAgIH0pOwogICAgICBhd2FpdCBQcm9taXNlLmFsbChhbGxTZXQpOwogICAgfTsKICAgIGNvbnN0IHJlbW92ZSA9IGFzeW5jIGZ1bmN0aW9uIChrZXlzKSB7CiAgICAgIGNvbnN0IGtleUxpc3QgPSBbXTsKICAgICAgaWYgKHR5cGVvZiBrZXlzID09PSAnc3RyaW5nJykgewogICAgICAgIGtleUxpc3QucHVzaChrZXlzKTsKICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGtleXMpKSB7CiAgICAgICAga2V5TGlzdC5wdXNoKC4uLmtleXMpOwogICAgICB9CiAgICAgIGNvbnN0IGFsbERlbGV0ZSA9IGtleUxpc3QubWFwKGtleSA9PiB7CiAgICAgICAgcmV0dXJuIEdNLmRlbGV0ZVZhbHVlKHByZWZpeCArIGtleSk7CiAgICAgIH0pOwogICAgICBhd2FpdCBQcm9taXNlLmFsbChhbGxEZWxldGUpOwogICAgfTsKICAgIGNvbnN0IGNsZWFyID0gYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICBjb25zdCBrZXlzID0gYXdhaXQgR00ubGlzdFZhbHVlcygpOwogICAgICByZXR1cm4gcmVtb3ZlKGtleXMuZmlsdGVyKGtleSA9PiBrZXkuc3RhcnRzV2l0aChwcmVmaXgpKSk7CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgZ2V0LAogICAgICBnZXRCeXRlc0luVXNlLAogICAgICBzZXQsCiAgICAgIHJlbW92ZSwKICAgICAgY2xlYXIsCiAgICB9OwogIH07CgogIHN0b3JhZ2Uuc3luYyA9IHN0b3JhZ2VBcmVhKCdzeW5jJyk7CiAgc3RvcmFnZS5sb2NhbCA9IHN0b3JhZ2VBcmVhKCdsb2NhbCcpOwoKICBjb25zdCBvbkNoYW5nZWQgPSBzdG9yYWdlLm9uQ2hhbmdlZCA9IHt9OwogIG9uQ2hhbmdlZC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikgewogICAgaWYgKG9uQ2hhbmdlTGlzdGVuZXJzLmluY2x1ZGVzKGxpc3RlbmVyKSkgcmV0dXJuOwogICAgb25DaGFuZ2VMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CiAgfTsKICBvbkNoYW5nZWQucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgIGNvbnN0IGluZGV4ID0gb25DaGFuZ2VMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7CiAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgIG9uQ2hhbmdlTGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfTsKICBvbkNoYW5nZWQuaGFzTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgIHJldHVybiBvbkNoYW5nZUxpc3RlbmVycy5pbmNsdWRlcyhsaXN0ZW5lcik7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvc3RvcmFnZS9zdG9yYWdlLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgYnJvd3NlciA9IHdpbmRvdy53ZUJyb3dzZXI7CiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgPz8ge307CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCA/PyB7fTsKCiAgY29uc3Qgc3RvcmFnZSA9IHlhd2Yuc3RvcmFnZSA9IHt9OwoKICAvKioKICAgKiDlvZPorr7nva7pobnlj5jljJbml7bnu5nlh7rpkojlr7nmn5DkuKrorr7nva7nmoTlm57osIMKICAgKiDmtY/op4jlmajmj5DkvpvnmoTmjqXlj6PkvJrpkojlr7nmiYDmnInorr7nva7pobnnu5nlm57osIPvvIzkvYbmmK/miJHku6zmmL7nhLblj6rpnIDopoHnibnlrprnmoTorr7nva7pobnvvIzmiYDku6XljIXoo4XkuIDlsYIKICAgKi8KICBjbGFzcyBTdG9yYWdlV2F0Y2hlciB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgLyoqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBNYXA8c3RyaW5nLCBTZXQ8RnVuY3Rpb24+Pj59ICovCiAgICAgIHRoaXMud2F0Y2hlciA9IHsgbG9jYWw6IG5ldyBNYXAoKSwgc3luYzogbmV3IE1hcCgpIH07CiAgICAgIGJyb3dzZXIuc3RvcmFnZS5vbkNoYW5nZWQuYWRkTGlzdGVuZXIoKGNoYW5nZXMsIGFyZWEpID0+IHsKICAgICAgICBjb25zdCB3YXRjaGVyID0gdGhpcy53YXRjaGVyW2FyZWFdOwogICAgICAgIE9iamVjdC5rZXlzKGNoYW5nZXMpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgIGlmICghd2F0Y2hlci5oYXMoa2V5KSkgcmV0dXJuOwogICAgICAgICAgY29uc3QgeyBvbGRWYWx1ZSwgbmV3VmFsdWUgfSA9IGNoYW5nZXNba2V5XTsKICAgICAgICAgIHdhdGNoZXIuZ2V0KGtleSkuZm9yRWFjaChjYWxsYmFjayA9PiB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgY2FsbGJhY2sobmV3VmFsdWUsIG9sZFZhbHVlKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIGludm9rZSBzdG9yYWdlIHdhdGNoZXIgJXMuJXMgLT4gJW86XG4lbycsIGFyZWEsIGtleSwgY2FsbGJhY2ssIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSB7U3RvcmFnZUl0ZW19IHN0b3JhZ2UKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICAgKi8KICAgIGFkZExpc3RlbmVyKHN0b3JhZ2UsIGNhbGxiYWNrKSB7CiAgICAgIGNvbnN0IHdhdGNoZXIgPSB0aGlzLndhdGNoZXJbc3RvcmFnZS5hcmVhXTsKICAgICAgaWYgKCF3YXRjaGVyLmhhcyhzdG9yYWdlLmtleSkpIHdhdGNoZXIuc2V0KHN0b3JhZ2Uua2V5LCBuZXcgU2V0KCkpOwogICAgICB3YXRjaGVyLmdldChzdG9yYWdlLmtleSkuYWRkKGNhbGxiYWNrKTsKICAgICAgY29uc3QgcmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF3YXRjaGVyLmhhcyhzdG9yYWdlLmtleSkpIHJldHVybiBmYWxzZTsKICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB3YXRjaGVyLmdldChzdG9yYWdlLmtleSk7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7CiAgICAgICAgaWYgKGNhbGxiYWNrcy5zaXplID09PSAwKSB3YXRjaGVyLmRlbGV0ZShzdG9yYWdlLmtleSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgICAgcmV0dXJuIHsgcmVtb3ZlTGlzdGVuZXIgfTsKICAgIH0KICB9CgogIGNvbnN0IHdhdGNoZXIgPSBuZXcgU3RvcmFnZVdhdGNoZXIoKTsKCiAgLyoqCiAgICog5o+P6L+w5a+55bqU5rWP6KeI5Zmo55qE5LiA5Liq6K6+572u6aG5CiAgICog6K6+572u6aG555qE5YC85oC75piv5LiA5Liq5a+56LGh77yM5a+56LGh55qE5LiN5ZCM6ZSu5a+55bqU5YW25LuW55qE5ZCr5LmJCiAgICovCiAgY2xhc3MgU3RvcmFnZUl0ZW0gewogICAgLyoqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5CiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9jYWwKICAgICAqLwogICAgY29uc3RydWN0b3Ioa2V5LCBpc0xvY2FsID0gZmFsc2UpIHsKICAgICAgdGhpcy5hcmVhID0gaXNMb2NhbCA/ICdsb2NhbCcgOiAnc3luYyc7CiAgICAgIHRoaXMua2V5ID0ga2V5OwogICAgICB0aGlzLmxhc3QgPSBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgdGhpcy5wcm9jZXNzaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlOwogICAgICAvKiogQHR5cGUgQXJyYXk8RnVuY3Rpb24+ICovCiAgICAgIHRoaXMud2F0Y2hlciA9IFtdOwogICAgICB3YXRjaGVyLmFkZExpc3RlbmVyKHRoaXMsIG5ld1ZhbHVlID0+IHsKICAgICAgICAvKgogICAgICAgICAqIOWmguaenOW9k+WJjeato+acieS7u+S9leaTjeS9nO+8jOmCo+S5iOi/meS4qiBvbkNoYW5nZSDlj6/og73mmK/miJHku6zoh6rlt7Hop6blj5HnmoTvvIwKICAgICAgICAgKiDogIzkuJTmnInlj6/og73ov5nkuKogb25DaGFuZ2Ug6L+Y5LiN5piv5pyA5paw55qE77yI5q+U5aaC5oiR5Lus6L+e57ut6LCD55So5LqG5Yeg5qyhIHNldO+8jOWPquacieacgOWQjuS4gOasoeaYr+acieaEj+S5ieeahO+8iQogICAgICAgICAqIOmCo+S5iOaIkeS7rOaOqOi/nyBvbkNoYW5nZSDkuovku7bnmoTlj5HnlJ/vvIznrYnliLDmiJHku6znmoTmlbDmja7lhpnlhaXlrozmiJDkuYvlkI7vvIzlho3or7vlj5bmnIDmlrDnmoTmlbDmja7mo4Dmn6Ugb25DaGFuZ2UKICAgICAgICAgKiDlpoLmnpzlvZPliY3msqHmnInmk43kvZzvvIzpgqPkuYjor7TmmI4gb25DaGFuZ2Ug5Y+v6IO95p2l6Ieq5LqO5YW25LuW6aG16Z2iCiAgICAgICAgICog6L+Z5pe25YCZ5oiR5Lus5bCx5Y+v5Lul5pS+5b+D5aSn6IOG5Zyw6Kem5Y+RIG9uQ2hhbmdlIOS6hgogICAgICAgICAqLwogICAgICAgIGlmICh0aGlzLnByb2Nlc3NpbmcpIHsKICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLm9uQ2hhbmdlKG5ld1ZhbHVlKTsKICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBydW4oY2FsbGJhY2spIHsKICAgICAgLyoKICAgICAgICog5b2T5omn6KGM5byC5q2l5pON5L2c5pe277yM5oiR5Lus6aaW5YWI5qCH6K6wIHByb2Nlc3Npbmcg5Lul6Zi75q2iIG9uQ2hhbmdlCiAgICAgICAqIOaOpeS4i+adpeato+W4uOaJp+ihjOaTjeS9nAogICAgICAgKi8KICAgICAgdGhpcy5wcm9jZXNzaW5nID0gdHJ1ZTsKICAgICAgY29uc3QgbGFzdCA9IHRoaXMubGFzdCA9IHRoaXMubGFzdC50aGVuKGNhbGxiYWNrKS50aGVuKHZhbHVlID0+IHZhbHVlLCBlcnJvciA9PiB7CiAgICAgICAgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgaGFuZGxpbmcgc3RvcmFnZTogJW8nLCBlcnJvcik7CiAgICAgIH0pOwogICAgICBsYXN0LnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIGlmIChsYXN0ICE9PSB0aGlzLmxhc3QpIHJldHVybjsKICAgICAgICAvKgogICAgICAgICAqIOWbnuiwg+acieaXtuWAmeacieW7tui/n++8jOaJgOS7peaIkeS7rOi/hyA1IOenkuWGjeajgOafpe+8jOWPr+S7pei/h+a7pOaOieaXoOaViOeahOWbnuiwgwogICAgICAgICAqIOW5tuS4jeaYr+S7gOS5iOW+iOWlveeahOino+WGs+WKnuazle+8jOS9huaYr+WPjeato+aIkeS5n+ayoeaJvuWIsOabtOWlveeahOino+WGs+WKnuazlQogICAgICAgICAqLwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDAwKSk7CiAgICAgICAgLyoKICAgICAgICAgKiDlpoLmnpzmoIforrDkvY3kuI3mmK/miJHku6zorr7nva7nmoTvvIzpgqPkuYjor7TmmI7lnKjmraTkuYvlkI7lj4josIPnlKjkuoYgcnVuCiAgICAgICAgICog6YKj5LmI6L+Z5Liq5pe25YCZIHByb2Nlc3Npbmcg5LiN5bqU6YeN572uCiAgICAgICAgICovCiAgICAgICAgaWYgKGxhc3QgIT09IHRoaXMubGFzdCkgcmV0dXJuOwogICAgICAgIC8qCiAgICAgICAgICog5aaC5p6c5Zyo5YaZ5YWl6L+H56iL5Lit77yM5pyJIG9uQ2hhbmdlIOWbnuaKpeWbnuadpe+8jOmCo+S5iCBkaXJ0eSDooqvnva7kvY0KICAgICAgICAgKiDmraTml7bmiJHku6zkuLvliqjmi4nljrvkuIDpgY3lgLzmnaXop6blj5Egb25DaGFuZ2UKICAgICAgICAgKiDms6jmhI/vvIzmraTml7Ygb25DaGFuZ2Ug5Y+v6IO96KKr5peg5oSP5LmJ5Zyw6Kem5Y+R5LqG5LiA5qyh77yM5omA5Lul6ZyA6KaB5Zyo5LiK5LiA5bGC6L+H5ruk6L+Z56eN5a6e6ZmF5rKh5Y+Y5YyW55qEIG9uQ2hhbmdlCiAgICAgICAgICovCiAgICAgICAgdGhpcy5wcm9jZXNzaW5nID0gZmFsc2U7CiAgICAgICAgaWYgKCF0aGlzLmRpcnR5KSByZXR1cm47CiAgICAgICAgY29uc3QgeyBbdGhpcy5rZXldOiB2YWx1ZSB9ID0gYXdhaXQgYnJvd3Nlci5zdG9yYWdlW3RoaXMuYXJlYV0uZ2V0KHRoaXMua2V5KTsKICAgICAgICAvKgogICAgICAgICAqIG9uQ2hhbmdlIOWcqCBsYXN0IOeahOa1geeoi+WGhe+8jOS8muWcqOe7k+adn+WJjemYu+atouS7u+S9leWQjue7reaTjeS9nAogICAgICAgICAqLwogICAgICAgIGF3YWl0IHRoaXMub25DaGFuZ2UodmFsdWUpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMubGFzdDsKICAgIH0KICAgIGFzeW5jIG9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgdGhpcy53YXRjaGVyLmZvckVhY2god2F0Y2hlciA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHdhdGNoZXIodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIGludm9rZSBzdHJvYWdlIHdhdGNoZXI6ICVvJywgZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIGFzeW5jIGdldCgpIHsKICAgICAgbGV0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnJ1bigoKSA9PiAoCiAgICAgICAgYnJvd3Nlci5zdG9yYWdlW3RoaXMuYXJlYV0uZ2V0KHRoaXMua2V5KQogICAgICApKTsKICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVkICYmIHRoaXMuYXJlYSA9PT0gJ2xvY2FsJyAmJiAhT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwocmVzdWx0cywgdGhpcy5rZXkpKSB7CiAgICAgICAgcmVzdWx0cyA9IGF3YWl0IHRoaXMucnVuKGFzeW5jICgpID0+IHsKICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2Uuc3luYy5nZXQodGhpcy5rZXkpOwogICAgICAgICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldChkYXRhKTsKICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgICByZXR1cm4gcmVzdWx0c1t0aGlzLmtleV07CiAgICB9CiAgICAvKiogQHBhcmFtIHsqfSB2YWx1ZSAqLwogICAgYXN5bmMgc2V0KHZhbHVlKSB7CiAgICAgIGNvbnN0IHRva2VuID0gdGhpcy5sYXN0U2V0VG9rZW4gPSB7fTsKICAgICAgYXdhaXQgdGhpcy5ydW4oKCkgPT4gewogICAgICAgIGlmICh0b2tlbiAhPT0gdGhpcy5sYXN0U2V0VG9rZW4pIHJldHVybiBudWxsOwogICAgICAgIHRoaXMubGFzdFNldFRva2VuID0gbnVsbDsKICAgICAgICByZXR1cm4gYnJvd3Nlci5zdG9yYWdlW3RoaXMuYXJlYV0uc2V0KHsgW3RoaXMua2V5XTogdmFsdWUgfSk7CiAgICAgIH0pOwogICAgfQogICAgYXN5bmMgcmVtb3ZlKCkgewogICAgICBhd2FpdCB0aGlzLnJ1bigoKSA9PiAoCiAgICAgICAgYnJvd3Nlci5zdG9yYWdlW3RoaXMuYXJlYV0ucmVtb3ZlKHRoaXMua2V5KQogICAgICApKTsKICAgIH0KICAgIC8qKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAqLwogICAgYWRkTGlzdGVuZXIoY2FsbGJhY2spIHsKICAgICAgdGhpcy53YXRjaGVyLnB1c2goY2FsbGJhY2spOwogICAgfQogIH0KCiAgc3RvcmFnZS5TdG9yYWdlID0gZnVuY3Rpb24gKGtleSwgaXNMb2NhbCA9IGZhbHNlKSB7CiAgICByZXR1cm4gbmV3IFN0b3JhZ2VJdGVtKGtleSwgaXNMb2NhbCk7CiAgfTsKCiAgY2xhc3MgQ29uZmlnQ29sbGVjdGlvbiB7CiAgICAvKioKICAgICAqIEBwYXJhbSB7U3RvcmFnZUl0ZW19IHN0b3JhZ2UKICAgICAqLwogICAgY29uc3RydWN0b3Ioc3RvcmFnZSkgewogICAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlOwogICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcsIFNldDxGdW5jdGlvbj4+fSAqLwogICAgICB0aGlzLndhdGNoZXIgPSBuZXcgTWFwKCk7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTsKICAgIH0KICAgIHRyaWdnZXJPbkNoYW5nZWQoa2V5LCBuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy53YXRjaGVyLmdldChrZXkpOwogICAgICBpZiAoIWNhbGxiYWNrcz8uc2l6ZSkgcmV0dXJuOwogICAgICBjb25zdCBjbG9uZWROZXdWYWx1ZSA9IG5ld1ZhbHVlICYmIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpKTsKICAgICAgY29uc3QgY2xvbmVkT2xkVmFsdWUgPSBvbGRWYWx1ZSAmJiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9sZFZhbHVlKSk7CiAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgY2FsbGJhY2soY2xvbmVkTmV3VmFsdWUsIGNsb25lZE9sZFZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSBjYWxsIGNvbmZpZyBvbmNoYW5nZSBjYWxsYmFjazogJW8sICVzIFslbywgJW9dJywgdGhpcy5zdG9yYWdlLCBrZXksIGNsb25lZE5ld1ZhbHVlLCBjbG9uZWRPbGRWYWx1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIGFzeW5jIGluaXQoKSB7CiAgICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm47CiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIHRoaXMudmFsdWUgPSBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0KCk7CiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnb2JqZWN0JykgYnJlYWs7CiAgICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlLnNldCh7fSk7CiAgICAgIH0KICAgICAgdGhpcy5zdG9yYWdlLmFkZExpc3RlbmVyKG5ld1ZhbHVlcyA9PiB7CiAgICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy52YWx1ZTsKICAgICAgICBjb25zdCBrZXlzID0gbmV3IFNldChPYmplY3Qua2V5cyh2YWx1ZXMpLmNvbmNhdChPYmplY3Qua2V5cyhuZXdWYWx1ZXMpKSk7CiAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IG5ld1ZhbHVlc1trZXldOwogICAgICAgICAgY29uc3Qgc3RyTmV3VmFsdWUgPSBuZXdWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpOwogICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB2YWx1ZXNba2V5XTsKICAgICAgICAgIGNvbnN0IHN0ck9sZFZhbHVlID0gb2xkVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IEpTT04uc3RyaW5naWZ5KG9sZFZhbHVlKTsKICAgICAgICAgIGlmIChzdHJOZXdWYWx1ZSA9PT0gc3RyT2xkVmFsdWUpIHJldHVybjsKICAgICAgICAgIHZhbHVlc1trZXldID0gc3RyTmV3VmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IEpTT04ucGFyc2Uoc3RyTmV3VmFsdWUpOwogICAgICAgICAgdGhpcy50cmlnZ2VyT25DaGFuZ2VkKGtleSwgc3RyTmV3VmFsdWUgJiYgSlNPTi5wYXJzZShzdHJOZXdWYWx1ZSksIG9sZFZhbHVlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKiogQHBhcmFtIHtzdHJpbmd9IGtleSAqLwogICAgZ2V0KGtleSkgewogICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHRocm93IEVycm9yKCdDb25maWcgc2hvdWxkIGluaXRpYWxpemVkIGZpcnN0Jyk7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlW2tleV0gJiYgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlW2tleV0pKTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleQogICAgICogQHBhcmFtIHsqfSB2YWx1ZQogICAgICovCiAgICBzZXQoa2V5LCB2YWx1ZSkgewogICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHRocm93IEVycm9yKCdDb25maWcgc2hvdWxkIGluaXRpYWxpemVkIGZpcnN0Jyk7CiAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMudmFsdWU7CiAgICAgIGNvbnN0IG9sZFZhbHVlID0gdmFsdWVzW2tleV07CiAgICAgIGNvbnN0IHN0ck9sZFZhbHVlID0gb2xkVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IEpTT04uc3RyaW5naWZ5KG9sZFZhbHVlKTsKICAgICAgY29uc3Qgc3RyTmV3VmFsdWUgPSB2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpOwogICAgICBpZiAoc3RyTmV3VmFsdWUgIT09IHN0ck9sZFZhbHVlKSB7CiAgICAgICAgaWYgKHN0ck5ld1ZhbHVlKSB2YWx1ZXNba2V5XSA9IEpTT04ucGFyc2Uoc3RyTmV3VmFsdWUpOwogICAgICAgIGVsc2UgZGVsZXRlIHZhbHVlc1trZXldOwogICAgICAgIHRoaXMuc3RvcmFnZS5zZXQodmFsdWVzKTsKICAgICAgICAvKgogICAgICAgICAqIOaIkeS7rOS4jeW/heetieWAvOecn+eahOWGmeWFpeS6hu+8jOWwseWPr+S7peinpuWPkSBvbkNoYW5nZQogICAgICAgICAqIOi/meagt+S8muS8mOWMluWJjeerr+eahOa4suafk+aViOaenAogICAgICAgICAqIOWPjeato+Wwseeul+ecn+eahOWGmeaMguS6hu+8jOaIkeS5n+ayoei+me+8iOaRiuaJi++8iQogICAgICAgICAqLwogICAgICAgIHRoaXMudHJpZ2dlck9uQ2hhbmdlZChrZXksIHZhbHVlLCBvbGRWYWx1ZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0ck5ld1ZhbHVlICYmIEpTT04ucGFyc2Uoc3RyTmV3VmFsdWUpOwogICAgfQogICAgLyoqIEBwYXJhbSB7c3RyaW5nfSBrZXkgKi8KICAgIHJlbW92ZShrZXkpIHsKICAgICAgcmV0dXJuIHRoaXMuc2V0KGtleSwgdm9pZCAwKTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleQogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAgICAqLwogICAgYWRkTGlzdGVuZXIoa2V5LCBjYWxsYmFjaykgewogICAgICBjb25zdCB3YXRjaGVyID0gdGhpcy53YXRjaGVyOwogICAgICBpZiAoIXdhdGNoZXIuaGFzKGtleSkpIHdhdGNoZXIuc2V0KGtleSwgbmV3IFNldCgpKTsKICAgICAgd2F0Y2hlci5nZXQoa2V5KS5hZGQoY2FsbGJhY2spOwogICAgICBjb25zdCByZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIXdhdGNoZXIuaGFzKGtleSkpIHJldHVybiBmYWxzZTsKICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB3YXRjaGVyLmdldChrZXkpOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spOwogICAgICAgIGlmIChjYWxsYmFja3Muc2l6ZSA9PT0gMCkgd2F0Y2hlci5kZWxldGUoa2V5KTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwogICAgICByZXR1cm4geyByZW1vdmVMaXN0ZW5lciB9OwogICAgfQogICAgLyoqIEBwYXJhbSB7c3RyaW5nfSBrZXkgKi8KICAgIGtleShrZXkpIHsKICAgICAgcmV0dXJuIG5ldyBDb25maWdLZXkodGhpcywga2V5KTsKICAgIH0KICAgIGFzeW5jIGltcG9ydENvbmZpZyhkYXRhKSB7CiAgICAgIHRoaXMudmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlLnNldCh0aGlzLnZhbHVlKTsKICAgIH0KICAgIGV4cG9ydCgpIHsKICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZSkpOwogICAgfQogICAgYXN5bmMgcmVzZXQoKSB7CiAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZS5zZXQoe30pOwogICAgfQogIH0KCiAgY2xhc3MgQ29uZmlnS2V5IHsKICAgIC8qKgogICAgICogQHBhcmFtIHtDb25maWdDb2xsZWN0aW9ufSBjb25maWcKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkKICAgICAqLwogICAgY29uc3RydWN0b3IoY29uZmlnLCBrZXkpIHsKICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7CiAgICAgIHRoaXMua2V5ID0ga2V5OwogICAgfQogICAgZ2V0KCkgeyByZXR1cm4gdGhpcy5jb25maWcuZ2V0KHRoaXMua2V5KTsgfQogICAgc2V0KHZhbHVlKSB7IHJldHVybiB0aGlzLmNvbmZpZy5zZXQodGhpcy5rZXksIHZhbHVlKTsgfQogICAgcmVtb3ZlKCkgeyByZXR1cm4gdGhpcy5jb25maWcucmVtb3ZlKHRoaXMua2V5KTsgfQogICAgYWRkTGlzdGVuZXIoY2FsbGJhY2spIHsKICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmFkZExpc3RlbmVyKHRoaXMua2V5LCBjYWxsYmFjayk7CiAgICB9CiAgfQoKICBzdG9yYWdlLkNvbmZpZyA9IGZ1bmN0aW9uIChzdG9yYWdlKSB7CiAgICByZXR1cm4gbmV3IENvbmZpZ0NvbGxlY3Rpb24oc3RvcmFnZSk7CiAgfTsKCn0oKSk7CgovLyDlsIbmlbDmja7ku44gc3luYyDnp7vliqjliLAgbG9jYWwKOyAoYXN5bmMgZnVuY3Rpb24gKCkgewogIGNvbnN0IGJyb3dzZXIgPSB3aW5kb3cud2VCcm93c2VyOwogIGNvbnN0IFtzeW5jU3RvcmFnZSwgbG9jYWxTdG9yYWdlXSA9IGF3YWl0IFByb21pc2UuYWxsKFsKICAgIGJyb3dzZXIuc3RvcmFnZS5zeW5jLmdldCgpLAogICAgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmdldCgpLAogIF0pOwogIGNvbnN0IFtzeW5jS2V5cywgbG9jYWxLZXlzXSA9IFtzeW5jU3RvcmFnZSwgbG9jYWxTdG9yYWdlXS5tYXAoc3RvcmFnZSA9PiBPYmplY3Qua2V5cyhzdG9yYWdlIHx8IHt9KSk7CiAgY29uc3Qgc3luY09ubHlLZXlzID0gc3luY0tleXMuZmlsdGVyKGtleSA9PiAhbG9jYWxLZXlzLmluY2x1ZGVzKGtleSkpOwogIGNvbnN0IHVwZGF0ZU9iamVjdCA9IE9iamVjdC5hc3NpZ24oe30sIC4uLnN5bmNPbmx5S2V5cy5tYXAoa2V5ID0+ICh7IFtrZXldOiBzeW5jU3RvcmFnZVtrZXldIH0pKSk7CiAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh1cGRhdGVPYmplY3QpOwp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3N0b3JhZ2UvY29uZmlnLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgPz8ge307CgogIGNvbnN0IHN0b3JhZ2UgPSB5YXdmLnN0b3JhZ2U7CiAgY29uc3QgY29uZmlnID0geWF3Zi5jb25maWcgPSB5YXdmLmNvbmZpZyA/PyB7fTsKICBjb25zdCBwb29scyA9IGNvbmZpZy5wb29scyA9IFtdOwoKICBjb25maWcuaW5pdCA9IGFzeW5jIGZ1bmN0aW9uICh1aWQpIHsKICAgIGNvbnN0IHVzZXJQcm9taXNlID0gdWlkICE9IG51bGwgPyBjb25maWcucG9vbCgnQ29uZmlnJywgeyB1aWQsIGlzTG9jYWw6IHRydWUgfSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7CiAgICBjb25zdCBnbG9iYWxQcm9taXNlID0gY29uZmlnLnBvb2woJ0NvbmZpZycsIHsgaXNMb2NhbDogdHJ1ZSB9KTsKICAgIGNvbnN0IFt1c2VyLCBnbG9iYWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3VzZXJQcm9taXNlLCBnbG9iYWxQcm9taXNlXSk7CiAgICBPYmplY3QuYXNzaWduKGNvbmZpZywgeyB1c2VyLCBnbG9iYWwgfSk7CiAgfTsKCiAgY29uZmlnLnBvb2wgPSBhc3luYyBmdW5jdGlvbiAocG9vbE5hbWUsIGNvbmZpZyA9IHt9KSB7CiAgICBjb25zdCB7IHVpZCA9IG51bGwsIGlzTG9jYWwgPSBmYWxzZSB9ID0gY29uZmlnOwogICAgY29uc3QgcHJlZml4ID0gdWlkID8gYHVzZXIke3VpZH1gIDogJ2dsb2JhbCc7CiAgICBjb25zdCBuYW1lID0gcHJlZml4ICsgcG9vbE5hbWU7CiAgICBjb25zdCBzdG9yYWdlSXRlbSA9IHN0b3JhZ2UuU3RvcmFnZShuYW1lLCBpc0xvY2FsKTsKICAgIGNvbnN0IHBvb2wgPSBzdG9yYWdlLkNvbmZpZyhzdG9yYWdlSXRlbSk7CiAgICBPYmplY3QuYXNzaWduKHBvb2wsIGNvbmZpZyk7CiAgICBhd2FpdCBwb29sLmluaXQoKTsKICAgIHBvb2xzLnB1c2gocG9vbCk7CiAgICByZXR1cm4gcG9vbDsKICB9OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9zaG9ydHVybC9yZWRpcmVjdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIC8vIOiEmuacrOeJiOmcgOimgei/meihjO+8jOaJgOS7pei/memHjOWnkeS4lOWKoOS4igogIGlmIChsb2NhdGlvbi5ob3N0ICE9PSAndC5jbicpIHJldHVybjsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGNvbmZpZyA9IHlhd2YuY29uZmlnOwoKICAvKiogQHR5cGUge1Byb21pc2V9ICovCiAgY29uc3QgY29uZmlnUHJvbWlzZSA9IGNvbmZpZy5pbml0KCk7CgogIGNvbnN0IGhpZGVBbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogIGhpZGVBbGwudGV4dENvbnRlbnQgPSBgCmJvZHkgeyBkaXNwbGF5OiBub25lOyB9Cmh0bWwgeyBiYWNrZ3JvdW5kOiAjZjlmOWZhOyB9CkBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIHsgaHRtbCB7IGJhY2tncm91bmQ6ICMyYTJhMmU7IH0gfQpgOwogIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChoaWRlQWxsKTsKCiAgY29uc3QgZml4VXJsID0gZnVuY3Rpb24gKHVybCkgewogICAgLy8g5pi+56S655qE5a2X56ym57yW56CB5piv6ZSZ55qECiAgICAvLyDljp/mnKwgVVRGLTgg57yW56CB55qE572R5Z2A55SoIExhdGluLTEg5bGV56S655qECiAgICBsZXQgZml4RW5jb2RpbmdVcmwgPSB1cmw7CiAgICB0cnkgewogICAgICBjb25zdCBjb2RlUG9pbnRzID0gWy4uLnVybF0ubWFwKHggPT4geC5jaGFyQ29kZUF0KCkpOwogICAgICBpZiAoY29kZVBvaW50cy5ldmVyeShjb2RlID0+IGNvZGUgPCAyNTYpKSB7CiAgICAgICAgZml4RW5jb2RpbmdVcmwgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoY29kZVBvaW50cykpOwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGZpeEVuY29kaW5nVXJsID0gdXJsOwogICAgfQogICAgaWYgKCEvaHR0cHM/OlwvXC8uKi9pLnRlc3QoZml4RW5jb2RpbmdVcmwpKSByZXR1cm4gbnVsbDsKICAgIHJldHVybiBmaXhFbmNvZGluZ1VybDsKICB9OwoKICBjb25zdCBvbkxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICBjb25maWdQcm9taXNlLnRoZW4oKCkgPT4gewogICAgICBjb25zdCB1c2VSZWRpcmVjdCA9IGNvbmZpZy5nbG9iYWwua2V5KCdzaG9ydF91cmxfd29fY29uZmlybScpLmdldCgpOwogICAgICBpZiAoIXVzZVJlZGlyZWN0KSByZXR1cm4gZmFsc2U7CiAgICAgIGxldCB1cmwgPSBbCiAgICAgICAgKCkgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wZW4tdXJsIGEnKS5ocmVmLAogICAgICAgICgpID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saW5rJykudGV4dENvbnRlbnQudHJpbSgpLAogICAgICAgICgpID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51cmxfdmlld19jb2RlJykudGV4dENvbnRlbnQudHJpbSgpLAogICAgICBdLnJlZHVjZSgodXJsLCBnZXR0ZXIpID0+IHsKICAgICAgICBpZiAodXJsKSByZXR1cm4gdXJsOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gZml4VXJsKGdldHRlcigpKTsKICAgICAgICB9IGNhdGNoIChlKSB7IHJldHVybiBudWxsOyB9CiAgICAgIH0sIG51bGwpOwogICAgICBpZiAoIXVybCkgcmV0dXJuIGZhbHNlOwogICAgICBsb2NhdGlvbi5yZXBsYWNlKHVybCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSkudGhlbihyID0+IHIsICgpID0+IGZhbHNlKS50aGVuKHJlZGlyZWN0ID0+IHsKICAgICAgaWYgKCFyZWRpcmVjdCkgaGlkZUFsbC5yZW1vdmUoKTsKICAgIH0pOwogIH07CgogIGlmIChbJ2NvbXBsZXRlJywgJ2xvYWRlZCcsICdpbnRlcmFjdGl2ZSddLmluY2x1ZGVzKGRvY3VtZW50LnJlYWR5U3RhdGUpKSB7CiAgICBzZXRUaW1lb3V0KG9uTG9hZCwgMCk7CiAgfSBlbHNlIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBvbkxvYWQpOwogIH0KCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gY3VzdG9tIGltcGxlbWVudGF0aW9uIHJlZGlyZWN0CjsgKGZ1bmN0aW9uICgpIHsKICBpZiAobG9jYXRpb24uaG9zdCAhPT0gJ3QuY24nKSByZXR1cm47CiAgdGhyb3cgbmV3IEVycm9yKCdZQVdGIHwgdC5jbiBwYWdlIGZvdW5kLCBza2lwIGZvbGxvd2luZyBleGVjdXRpb25zJyk7Cn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvaW5pdC9wYWdlLmpzCi8qCiAqIOajgOafpeW9k+WJjemhtemdoueahOexu+WeiwogKi8KOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdCA9IHlhd2YuaW5pdCA/PyB7fTsKCiAgY29uc3QgcGFnZSA9IGluaXQucGFnZSA9IGluaXQucGFnZSA/PyB7fTsKCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHkKICBwYWdlLnR5cGVWNiA9IGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTsKICAgIC8vIOWvvOiniOmhtemdogogICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9uZ3VpZGUnKSkgcmV0dXJuICduZ3VpZGUnOwogICAgLy8g5pCc57Si6aG16Z2iCiAgICBpZiAobG9jYXRpb24uaG9zdCA9PT0gJ3Mud2VpYm8uY29tJykgcmV0dXJuICdzZWFyY2gnOwogICAgLy8g5Y+R546w6aG16Z2iCiAgICBpZiAobG9jYXRpb24uaG9zdCA9PT0gJ2Qud2VpYm8uY29tJykgcmV0dXJuICdkaXNjb3Zlcic7CiAgICAvLyDlpLTmnaHmlofnq6AKICAgIGlmICgvXC90dGFydGljbGVcLy8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHJldHVybiAndHRhcnRpY2xlJzsKICAgIGNvbnN0ICRDT05GSUcgPSBwYWdlLiRDT05GSUc7IGlmICghJENPTkZJRykgcmV0dXJuIG51bGw7CiAgICBpZiAoJENPTkZJRy5icFR5cGUgPT09ICdwYWdlJykgewogICAgICAvLyDlnLDngrkKICAgICAgaWYgKCRDT05GSUcuZG9tYWluID09PSAnMTAwMTAxJykgcmV0dXJuICdwbGFjZSc7CiAgICAgIC8vIOeUteW9sQogICAgICBpZiAoJENPTkZJRy5kb21haW4gPT09ICcxMDAxMjAnKSByZXR1cm4gJ21vdmllJzsKICAgICAgLy8g5Zu+5LmmCiAgICAgIGlmICgkQ09ORklHLmRvbWFpbiA9PT0gJzEwMDIwMicpIHJldHVybiAnYm9vayc7CiAgICAgIC8vIOS4quS6uuS4u+mhtQogICAgICBpZiAoJENPTkZJRy5kb21haW4gPT09ICcxMDA1MDUnKSByZXR1cm4gJ3Byb2ZpbGUnOwogICAgICAvLyDkuKrkurrkuLvpobXvvIjkvIHkuJrorqTor4HnlKjmiLfvvIkKICAgICAgaWYgKCRDT05GSUcuZG9tYWluID09PSAnMTAwNjA2JykgcmV0dXJuICdwcm9maWxlJzsKICAgICAgLy8g6K+d6aKY6aG177yI6LaF6K+d77yJCiAgICAgIGlmICgkQ09ORklHLmRvbWFpbiA9PT0gJzEwMDgwOCcpIHJldHVybiAndG9waWMnOwogICAgICAvLyDpn7PkuZAKICAgICAgaWYgKCRDT05GSUcuZG9tYWluID09PSAnMTAxNTE1JykgcmV0dXJuICdtdXNpYyc7CiAgICAgIC8vIOiCoeelqAogICAgICBpZiAoJENPTkZJRy5kb21haW4gPT09ICcyMzA2NzcnKSByZXR1cm4gJ3N0b2NrJzsKICAgIH0KICAgIGlmICgkQ09ORklHLmJwVHlwZSA9PT0gJ21haW4nKSB7CiAgICAgIC8vIOi1ngogICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2xpa2Uvb3V0Ym94JykpIHJldHVybiAnbGlrZSc7CiAgICAgIC8vIOaUtuiXjwogICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2ZhdicpKSByZXR1cm4gJ2Zhdic7CiAgICAgIC8vIOmmlumhtQogICAgICBpZiAoL1wvaG9tZSQvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgaWYgKHNlYXJjaC5nZXQoJ2dpZCcpID4gMCkgcmV0dXJuICdncm91cCc7CiAgICAgICAgcmV0dXJuICdob21lJzsKICAgICAgfQogICAgICAvLyDlpb3lj4vlnIgKICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9mcmllbmRzJykpIHJldHVybiAnZnJpZW5kcyc7CiAgICB9CiAgICAvLyBVbmtub3duCiAgICByZXR1cm4gbnVsbDsKICB9OwoKICBwYWdlLnJvdXRlID0gbnVsbDsKICBwYWdlLnVwZGF0ZSA9IGZ1bmN0aW9uIChyb3V0ZSkgewogICAgcGFnZS5yb3V0ZSA9IHJvdXRlOwogIH07CiAgcGFnZS50eXBlVjcgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aCgnL3R2LycpKSByZXR1cm4gJ3R2JzsKICAgIGNvbnN0IHJvdXRlID0gcGFnZS5yb3V0ZTsKICAgIGlmIChyb3V0ZS5uYW1lID09PSAncHJvZmlsZScpIHJldHVybiAncHJvZmlsZSc7CiAgICBpZiAocm91dGUubmFtZSA9PT0gJ2xpa2UnKSByZXR1cm4gJ2xpa2UnOwogICAgaWYgKHJvdXRlLm5hbWUgPT09ICdjb2xsZWN0JykgcmV0dXJuICdmYXYnOwogICAgaWYgKHJvdXRlLm5hbWUgPT09ICdteWdyb3VwcycpIHsKICAgICAgLy8g5pyA5paw5b6u5Y2aCiAgICAgIGlmICgvXjExMDAwLy50ZXN0KHJvdXRlLnF1ZXJ5LmdpZCkpIHJldHVybiAnaG9tZSc7CiAgICAgIC8vIOWIhue7hAogICAgICByZXR1cm4gJ2dyb3VwJzsKICAgIH0KICAgIGlmIChyb3V0ZS5uYW1lID09PSAnd2VpYm8nKSB7CiAgICAgIGNvbnN0IGNoYW5uZWwgPSByb3V0ZS5tZXRhPy5jaGFubmVsOwogICAgICAvLyDng63pl6gKICAgICAgaWYgKGNoYW5uZWwgPT09ICdob3QnKSByZXR1cm4gJ2Rpc2NvdmVyJzsKICAgICAgLy8g6aaW6aG1CiAgICAgIGlmIChjaGFubmVsID09PSAnaG9tZScpIHJldHVybiAnaG9tZSc7CiAgICB9CiAgICBpZiAocm91dGUuY2hhbm5lbCA9PT0gJ3N3ZWlib0RlZmF1bHQnKSByZXR1cm4gJ3NlYXJjaCc7CiAgICBpZiAocm91dGUuY2hhbm5lbCA9PT0gJ3N3ZWlibycpIHJldHVybiAnc2VhcmNoJzsKICAgIGlmIChyb3V0ZS5jaGFubmVsID09PSAnc3VzZXJEZWZhdWx0JykgcmV0dXJuICdzZWFyY2gnOwogICAgcmV0dXJuIG51bGw7CiAgfTsKICBwYWdlLm9pZCA9IGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHJvdXRlID0gcGFnZS5yb3V0ZTsKICAgIHJldHVybiByb3V0ZS5uYW1lID09PSAncHJvZmlsZScgPyByb3V0ZS5wYXJhbXMuaWQgOiBudWxsOwogIH07CiAgcGFnZS51aWQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcGFnZS5jb25maWcudXNlci5pZHN0cjsKICB9OwoKICBwYWdlLnR5cGUgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgIHJldHVybiBwYWdlLnR5cGVWNigpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHBhZ2UudHlwZVY3KCk7CiAgICB9CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvaW5pdC9pbml0LmpzCi8qCiAqIOWIneWni+WMluebuOWFs+a1geeoiwogKgogKiDliJ3lp4vljJbmtYHnqIsKICogUmVhZHk6CiAqICAg5b2T6I635Y+W5YiwICRDT05GSUcg5Y+C5pWw5pe25bC95b+r6LCD55SoCiAqIExvYWQ6CiAqICAg5b2TIERPTUNvbnRlbnRMb2FkZWQg5pe26LCD55So77yM5q2k5pe2IERPTSDmoJHlj6/nlKgKICogICBMb2FkIOaAu+aYr+WcqCBSZWFkeSDkuYvlkI4KICogRGVpbml0OgogKiAgIOW9k+WHuumUmeaXtuiwg+eUqO+8jOatpOaXtuW6lOW9k+a2iOmZpOS5i+WJjeihjOS4uueahOWQhOenjeWJr+S9nOeUqAogKiAgIERlaW5pdCDlj6/og73kuI3op6blj5EgUmVhZHnvvIzkuZ/lj6/og73lnKggUmVhZHkg5LmL5ZCOCiAqICAgRGVpbml0IOS4jiBMb2FkIOS6kuaWpQogKgogKiDlpoLmnpzms6jlhoznmoTlm57osIPov5Tlm57kuIDkuKogdGhlbmFibGUg5a+56LGh77yM6YKj5LmI5Lya562J5a6D6Kej5Yaz5YaN57un57ut5ZCO57ut55qE5Zue6LCDCiAqIOWmguaenOS4jeW4jOacm+iuqeWQjumdoueahOmAu+i+keW8guatpei/m+ihjO+8jOivt+S4jeimgeebtOaOpeeUqCBhc3luYyDlh73mlbDvvIzogIzmmK/lnKjmma7pgJrlh73mlbDph4zlho3lhpnkuIDkuKogYXN5bmMKICovCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdCA9IHlhd2YuaW5pdCA/PyB7fTsKICB5YXdmLldFSUJPX1ZFUlNJT04gPSAwOwoKICBjb25zdCBwYWdlID0gaW5pdC5wYWdlID0gaW5pdC5wYWdlID8/IHt9OwoKICBjb25zdCB2YWxpZFBhZ2VSZWFkeVY2ID0gJENPTkZJRyA9PiB7CiAgICAvLyDlv4XpobvnmoTlj4LmlbAKICAgIGlmICghJENPTkZJRykgcmV0dXJuIGZhbHNlOwogICAgaWYgKCEkQ09ORklHLnVpZCkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCEkQ09ORklHLm5pY2spIHJldHVybiBmYWxzZTsKICAgIGlmICgkQ09ORklHLmlzbG9naW4gPT09ICcwJykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgY29uc3QgdmFsaWRQYWdlUmVhZHlWNyA9IGNvbmZpZyA9PiB7CiAgICAvLyDlv4XpobvnmoTlj4LmlbAKICAgIGlmICghY29uZmlnKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIWNvbmZpZy51c2VyKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIWNvbmZpZy51c2VyLmlkc3RyKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIWNvbmZpZy51c2VyLnNjcmVlbl9uYW1lKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICBjb25zdCB2YWxpZFBhZ2VEb20gPSAoKSA9PiB7CiAgICAvLyDlpoLmnpzmnInnmbvlvZXmjInpkq7vvIzliJnor7TmmI7msqHmnInnmbvlvZXvvIzmraTml7bkuI3lt6XkvZwKICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ25fbG9naW4nKSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLyoqIEB0eXBlIHtib29sZWFuP30gKi8KICBsZXQgc3RhdHVzID0gbnVsbDsKICAvKiogQHR5cGUge1NldDx7IGNhbGxiYWNrOiBGdW5jdGlvbiwgcHJpb3JpdHk6IG51bWJlciB9Pn0gKi8KICBjb25zdCBvblJlYWR5Q2FsbGJhY2sgPSBuZXcgU2V0KCk7CiAgLyoqIEB0eXBlIHtTZXQ8eyBjYWxsYmFjazogRnVuY3Rpb24sIHByaW9yaXR5OiBudW1iZXIgfT59ICovCiAgY29uc3Qgb25Mb2FkQ2FsbGJhY2sgPSBuZXcgU2V0KCk7CiAgLyoqIEB0eXBlIHtTZXQ8eyBjYWxsYmFjazogRnVuY3Rpb24sIHByaW9yaXR5OiBudW1iZXIgfT59ICovCiAgY29uc3Qgb25Db25maWdDaGFuZ2VDYWxsYmFjayA9IG5ldyBTZXQoKTsKICAvKiogQHR5cGUge1NldDx7IGNhbGxiYWNrOiBGdW5jdGlvbiwgcHJpb3JpdHk6IG51bWJlciB9Pn0gKi8KICBjb25zdCBvbkRlaW5pdENhbGxiYWNrID0gbmV3IFNldCgpOwoKICBjb25zdCBub29wID0gKCkgPT4geyB9OwoKICAvKioKICAgKiBAcGFyYW0ge1NldDx7IGNhbGxiYWNrOiBGdW5jdGlvbiwgcHJpb3JpdHk6IG51bWJlciB9Pn0gc2V0CiAgICovCiAgY29uc3QgcnVuU2V0ID0gYXN5bmMgc2V0ID0+IHsKICAgIGNvbnN0IGxpc3QgPSBbLi4uc2V0LnZhbHVlcygpXS5zb3J0KChwLCBxKSA9PiBxLnByaW9yaXR5IC0gcC5wcmlvcml0eSk7CiAgICBmb3IgKGNvbnN0IHsgY2FsbGJhY2sgfSBvZiBsaXN0KSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FsbGJhY2soKTsKICAgICAgICBpZiAodHlwZW9mIHJlc3VsdD8udGhlbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgaW5pdGlhbGl6aW5nOlxuJW8nLCBlKTsKICAgICAgfQogICAgfQogICAgc2V0LmNsZWFyKCk7CiAgfTsKCiAgY29uc3QgZ2VuVjZMaWtlQ29uZmlnQnlWN0NvbmZpZyA9IGNvbmZpZyA9PiAoewogICAgdWlkOiBjb25maWcudXNlci5pZHN0ciwKICAgIG5hbWU6IGNvbmZpZy51c2VyLnNjcmVlbl9uYW1lLAogICAgb2lkOiBudWxsLCAvLyDml6DmlbDmja4KICAgIGRvbWFpbjogJycsIC8vIOaXoOaVsOaNrgogICAgYnBUeXBlOiAnJywgLy8g5peg5pWw5o2uCiAgICBsb2NhdGlvbjogJycsIC8vIOaXoOaVsOaNrgogICAgbGFuZzogJ3poLUNOJywKICAgIHNraW46IG51bGwsIC8vIOaXoOaVsOaNrgogIH0pOwoKICBpbml0LnN0YXR1cyA9ICgpID0+IHN0YXR1czsKICAvLyDop6blj5EgUmVhZHkKICBpbml0LnJlYWR5ID0gYXN5bmMgJENPTkZJRyA9PiB7CiAgICBzdGF0dXMgPSB0cnVlOwogICAgaW5pdC5yZWFkeSA9IGluaXQuZGVpbml0ID0gbm9vcDsKICAgIHV0aWwuZGVidWcoJ3lhd2Ygb25yZWFkeScpOwogICAgYXdhaXQgcnVuU2V0KG9uUmVhZHlDYWxsYmFjayk7CiAgICBpZiAoWydjb21wbGV0ZScsICdsb2FkZWQnLCAnaW50ZXJhY3RpdmUnXS5pbmNsdWRlcyhkb2N1bWVudC5yZWFkeVN0YXRlKSkgewogICAgICBzZXRUaW1lb3V0KGluaXQuZGNsLCAwKTsKICAgIH0gZWxzZSB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0LmRjbCk7CiAgICB9CiAgfTsKICAvLyDop6blj5EgQ29uZmlnQ2hhbmdlCiAgaW5pdC5jb25maWdDaGFuZ2UgPSBhc3luYyBjb25maWcgPT4gewogICAgdXRpbC5kZWJ1ZygneWF3ZiBvbmNvbmZpZ2NoYW5nZTogJW8nLCBjb25maWcpOwogICAgaWYgKHZhbGlkUGFnZVJlYWR5VjYoY29uZmlnKSkgewogICAgICBpZiAoIXlhd2YuV0VJQk9fVkVSU0lPTikgewogICAgICAgIHlhd2YuV0VJQk9fVkVSU0lPTiA9IDY7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3lhd2YtV0JWNicpOwogICAgICB9CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDYpIHJldHVybjsKICAgICAgcGFnZS4kQ09ORklHID0gY29uZmlnOwogICAgICBhd2FpdCBydW5TZXQob25Db25maWdDaGFuZ2VDYWxsYmFjayk7CiAgICAgIGF3YWl0IGluaXQucmVhZHkoY29uZmlnKTsKICAgIH0gZWxzZSBpZiAodmFsaWRQYWdlUmVhZHlWNyhjb25maWcpKSB7CiAgICAgIGlmICgheWF3Zi5XRUlCT19WRVJTSU9OKSB7CiAgICAgICAgeWF3Zi5XRUlCT19WRVJTSU9OID0gNzsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneWF3Zi1XQlY3Jyk7CiAgICAgIH0KICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNykgcmV0dXJuOwogICAgICBpZiAoIXBhZ2Uucm91dGUpIHJldHVybjsKICAgICAgcGFnZS5jb25maWcgPSBjb25maWc7CiAgICAgIHBhZ2UuJENPTkZJRyA9IGdlblY2TGlrZUNvbmZpZ0J5VjdDb25maWcoY29uZmlnKTsKICAgICAgYXdhaXQgcnVuU2V0KG9uQ29uZmlnQ2hhbmdlQ2FsbGJhY2spOwogICAgICBhd2FpdCBpbml0LnJlYWR5KGNvbmZpZyk7CiAgICB9IGVsc2UgewogICAgICBhd2FpdCBpbml0LmRlaW5pdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgfTsKICAvLyDop6blj5EgRGVpbml0CiAgaW5pdC5kZWluaXQgPSBhc3luYyAoKSA9PiB7CiAgICBzdGF0dXMgPSBmYWxzZTsKICAgIGluaXQuZGVpbml0ID0gaW5pdC5yZWFkeSA9IGluaXQuZGNsID0gbm9vcDsKICAgIHV0aWwuZGVidWcoJ3lhd2YgZGVpbml0Jyk7CiAgICBhd2FpdCBydW5TZXQob25EZWluaXRDYWxsYmFjayk7CiAgfTsKICAvLyDop6blj5EgTG9hZAogIGluaXQuZGNsID0gYXN5bmMgKCkgPT4gewogICAgaWYgKCF2YWxpZFBhZ2VEb20oKSkgewogICAgICBhd2FpdCBpbml0LmRlaW5pdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICBzdGF0dXMgPSB7fTsKICAgIGluaXQuZGNsID0gbm9vcDsKICAgIHV0aWwuZGVidWcoJ3lhd2Ygb25sb2FkJyk7CiAgICBhd2FpdCBydW5TZXQob25Mb2FkQ2FsbGJhY2spOwogIH07CgogIGNvbnN0IHJlZ2lzdGVyID0gY2FsbGJhY2tDb2xsZWN0aW9uID0+ICgKICAgIChjYWxsYmFjaywgeyBwcmlvcml0eSA9IHV0aWwucHJpb3JpdHkuREVGQVVMVCB9ID0ge30pID0+IHsKICAgICAgaWYgKHN0YXR1cyA9PT0gbnVsbCkgewogICAgICAgIGNhbGxiYWNrQ29sbGVjdGlvbi5hZGQoeyBjYWxsYmFjaywgcHJpb3JpdHkgfSk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzKSB7CiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihjYWxsYmFjayk7CiAgICAgIH0KICAgIH0KICApOwoKICBpbml0Lm9uUmVhZHkgPSByZWdpc3RlcihvblJlYWR5Q2FsbGJhY2spOwogIGluaXQub25Mb2FkID0gcmVnaXN0ZXIob25Mb2FkQ2FsbGJhY2spOwogIGluaXQub25Db25maWdDaGFuZ2UgPSByZWdpc3RlcihvbkNvbmZpZ0NoYW5nZUNhbGxiYWNrKTsKICBpbml0Lm9uRGVpbml0ID0gcmVnaXN0ZXIob25EZWluaXRDYWxsYmFjayk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L2luaXQvc2V0dXAuanMKLyoqCiAqIOi/meS4quaWh+S7tueUqOS6juS7jue9kemhteS4reiOt+WPliAkQ09ORklHIOWPguaVsAogKiDnvZHpobXkuK3nmoQgJENPTkZJRyDlj4LmlbDljIXlkKvohJrmnKzpnIDopoHnmoTkuIrkuIvmloflj4LmlbDvvIzlpoIKICog5b2T5YmN55So5oi3IGlk44CB5pi156ew77yM5b2T5YmN6aG16Z2i55So5oi3IGlk77yM5b2T5YmN5Li76aKY562J562JCiAqIOaIkeS7rOmcgOimgeW9k+WJjeeUqOaItyBpZCDmiY3og73or7vlj5bnlKjmiLfnmoTorr7nva7ku47ogIznu6fnu63lkI7pnaLnmoTlt6XkvZwKICovCgo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CgogIGNvbnN0IHN0cmluZ3MgPSB1dGlsLnN0cmluZ3M7CgogIGNvbnN0IHJhbmRTdHIgPSBzdHJpbmdzLnJhbmRLZXkoKTsKICBjb25zdCBrZXkgPSBgeWF3Zl8ke3JhbmRTdHJ9YDsKICB1dGlsLmluamVjdChmdW5jdGlvbiAoa2V5KSB7CiAgICBsZXQgbGFzdFJlcG9ydCA9IG51bGw7CiAgICBjb25zdCByZXBvcnRSZXN1bHQgPSBhc3luYyB2YWx1ZSA9PiB7CiAgICAgIGxhc3RSZXBvcnQgPSBsYXN0UmVwb3J0ID8gbGFzdFJlcG9ydC50aGVuKFByb21pc2UucmVzb2x2ZSgpKSA6IFByb21pc2UucmVzb2x2ZSgpOwogICAgICBhd2FpdCBsYXN0UmVwb3J0OwogICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChrZXksIHsKICAgICAgICBkZXRhaWw6IHsgJENPTkZJRzogSlNPTi5zdHJpbmdpZnkodmFsdWUpIH0sCiAgICAgIH0pOwogICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9OwogICAgbGV0IGhvbGRlciA9IG51bGw7CiAgICBpZiAoJyRDT05GSUcnIGluIHdpbmRvdykgewogICAgICAvLyBGYWlsZWQgdG8gbG9hZCBZQVdGIGJlZm9yZSAkQ09ORklHIG9iamVjdCByZWFkeS4gU29tZSBmZWF0dXJlIG1heSBub3Qgd29yay4KICAgICAgY29uc3Qgb25Eb21Db250ZW50TG9hZGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHdpbmRvdy4kQ09ORklHID0gbmV3IFByb3h5KHdpbmRvdy4kQ09ORklHLCB7CiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzZWxmLCBwcm9wZXJ0eSwgdmFsdWUpIHsKICAgICAgICAgICAgc2VsZltwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgcmVwb3J0UmVzdWx0KHdpbmRvdy4kQ09ORklHKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICAgIHJlcG9ydFJlc3VsdCh3aW5kb3cuJENPTkZJRyk7CiAgICAgIH07CiAgICAgIGlmIChbJ2NvbXBsZXRlJywgJ2xvYWRlZCcsICdpbnRlcmFjdGl2ZSddLmluY2x1ZGVzKGRvY3VtZW50LnJlYWR5U3RhdGUpKSB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IG9uRG9tQ29udGVudExvYWRlZCgpOyB9LCAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgb25Eb21Db250ZW50TG9hZGVkKTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgcHJveGllZCA9IHZvaWQgMDsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICckQ09ORklHJywgewogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICBnZXQoKSB7IHJldHVybiBwcm94aWVkOyB9LAogICAgICBzZXQodmFsdWUpIHsKICAgICAgICBsZXQgJENPTkZJRzsKICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LCAnJENPTkZJRycpOwogICAgICAgIHByb3BlcnR5LmVudW1lcmFibGUgPSB0cnVlOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICckQ09ORklHJywgcHJvcGVydHkpOwogICAgICAgIGlmIChob2xkZXIpIHsKICAgICAgICAgIGhvbGRlci4kQ09ORklHID0gdmFsdWU7CiAgICAgICAgICAkQ09ORklHID0gaG9sZGVyLiRDT05GSUc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICRDT05GSUcgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgcHJveGllZCA9IG5ldyBQcm94eSgkQ09ORklHLCB7CiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzZWxmLCBwcm9wZXJ0eSwgdmFsdWUpIHsKICAgICAgICAgICAgc2VsZltwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgcmVwb3J0UmVzdWx0KCRDT05GSUcpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgICAgcmVwb3J0UmVzdWx0KHZhbHVlKTsKICAgICAgfSwKICAgIH0pOwogICAgY29uc3Qgb25sb2FkID0gKCkgPT4gewogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9ubG9hZCk7CiAgICAgIHJlcG9ydFJlc3VsdCgpOwogICAgfTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgb25sb2FkKTsKICB9LCBrZXkpOwoKICBsZXQgbGFzdENvbmZpZyA9IHZvaWQgMDsKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihrZXksIGZ1bmN0aW9uIChldmVudCkgewogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBpZiAoIWV2ZW50LmRldGFpbC4kQ09ORklHKSByZXR1cm47CiAgICBjb25zdCAkQ09ORklHID0gSlNPTi5wYXJzZShldmVudC5kZXRhaWwuJENPTkZJRyk7CiAgICBpZiAoZXZlbnQuZGV0YWlsLiRDT05GSUcgPT09IGxhc3RDb25maWcpIHJldHVybjsKICAgIGxhc3RDb25maWcgPSBldmVudC5kZXRhaWwuJENPTkZJRzsKICAgIGluaXQuY29uZmlnQ2hhbmdlKCRDT05GSUcpOwogIH0sIHRydWUpOwoKfSgpKTsKCi8vIFRPRE8hCi8vIE5FRUQgQ0xFQU4gVVAKCjsgKGZ1bmN0aW9uICgpIHsKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBzdHJpbmdzID0gdXRpbC5zdHJpbmdzOwogIGNvbnN0IHJhbmRTdHIgPSBzdHJpbmdzLnJhbmRLZXkoKTsKICBjb25zdCBrZXkgPSBgeWF3Zl8ke3JhbmRTdHJ9YDsKCiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoa2V5LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGlmIChldmVudC5kZXRhaWwucm91dGUpIHsKICAgICAgY29uc3Qgcm91dGUgPSBKU09OLnBhcnNlKGV2ZW50LmRldGFpbC5yb3V0ZSk7CiAgICAgIGluaXQucGFnZS51cGRhdGUocm91dGUpOwogICAgfQogICAgaWYgKGV2ZW50LmRldGFpbC5jb25maWcpIHsKICAgICAgY29uc3QgY29uZmlnID0gSlNPTi5wYXJzZShldmVudC5kZXRhaWwuY29uZmlnKTsKICAgICAgaW5pdC5jb25maWdDaGFuZ2UoY29uZmlnKTsKICAgIH0KICB9LCB0cnVlKTsKCiAgdXRpbC5pbmplY3Qucm9vdEtleSA9IGB5YXdmXyR7c3RyaW5ncy5yYW5kS2V5KCl9YDsKICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwga2V5KSB7CiAgICBsZXQgcm9vdFZtID0gbnVsbDsKCiAgICBjb25zdCBrZWJhYkNhc2UgPSBmdW5jdGlvbiAod29yZCkgewogICAgICBpZiAodHlwZW9mIHdvcmQgIT09ICdzdHJpbmcnKSByZXR1cm4gd29yZDsKICAgICAgcmV0dXJuIHdvcmQucmVwbGFjZSgvLi9nLCAoY2hhciwgaW5kZXgpID0+IHsKICAgICAgICBjb25zdCBsb3dlciA9IGNoYXIudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoY2hhciA9PT0gbG93ZXIgfHwgaW5kZXggPT09IDApIHJldHVybiBsb3dlcjsKICAgICAgICBlbHNlIHJldHVybiAnLScgKyBsb3dlcjsKICAgICAgfSk7CiAgICB9OwogICAgLy8g5Y+R546w5Lu75L2VIFZ1ZSDlhYPntKDnmoTml7blgJnkuIrmiqXmtojmga/ku6Xmlrnkvr/lhbbku5bmqKHlnZfkv67mlLnor6XlhYPntKAKICAgIGNvbnN0IHJlcG9ydE5ld05vZGUgPSBmdW5jdGlvbiAoeyB0YWcsIG5vZGUsIHJlcGxhY2UsIHJvb3QgPSBmYWxzZSB9KSB7CiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd5YXdmLVZ1ZU5vZGVJbnNlcnRlZCcsIHsKICAgICAgICBidWJibGVzOiB0cnVlLAogICAgICAgIGRldGFpbDogeyB0YWcsIHJlcGxhY2UsIHJvb3QgfSwKICAgICAgfSk7CiAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9OwogICAgY29uc3Qgcm91dGVSZXBvcnRPYmplY3QgPSBmdW5jdGlvbiAodm0pIHsKICAgICAgcmV0dXJuIHZtLiRyb3V0ZSA/IHsKICAgICAgICBuYW1lOiB2bS4kcm91dGUubmFtZSwKICAgICAgICBmdWxsUGF0aDogdm0uJHJvdXRlLmZ1bGxQYXRoLAogICAgICAgIHBhdGg6IHZtLiRyb3V0ZS5wYXRoLAogICAgICAgIHBhcmFtczogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2bS4kcm91dGUucGFyYW1zKSksCiAgICAgICAgcXVlcnk6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodm0uJHJvdXRlLnF1ZXJ5KSksCiAgICAgICAgbWV0YTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2bS4kcm91dGUubWV0YSkpLAogICAgICB9IDogbnVsbDsKICAgIH07CiAgICAvLyDlj5HnjrAgVnVlIOagueWFg+e0oOeahOaXtuWAmeWQr+WKqOiEmuacrOeahOWIneWni+WMlgogICAgY29uc3QgcmVwb3J0Um9vdE5vZGUgPSBmdW5jdGlvbiAobm9kZSkgewogICAgICBjb25zdCB2bSA9IG5vZGUuX192dWVfXzsKICAgICAgcm9vdFZtID0gdm07CiAgICAgIGNvbnN0IGNvbmZpZyA9IHZtLmNvbmZpZzsKICAgICAgY29uc3Qgcm91dGUgPSByb3V0ZVJlcG9ydE9iamVjdCh2bSk7CiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGtleSwgewogICAgICAgIGRldGFpbDogewogICAgICAgICAgY29uZmlnOiBKU09OLnN0cmluZ2lmeShjb25maWcpLAogICAgICAgICAgcm91dGU6IEpTT04uc3RyaW5naWZ5KHJvdXRlKSwKICAgICAgICB9LAogICAgICB9KTsKICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgIH07CiAgICBjb25zdCByZXBvcnRSb3V0ZUNoYW5nZSA9IGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChrZXksIHsKICAgICAgICBkZXRhaWw6IHsgcm91dGU6IEpTT04uc3RyaW5naWZ5KHJvdXRlKSB9LAogICAgICB9KTsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgfTsKICAgIGxldCB1bndhdGNoUm91dGVDaGFuZ2UgPSBudWxsOwogICAgY29uc3QgbGlzdGVuUm91dGVDaGFuZ2UgPSBmdW5jdGlvbiAobm9kZSkgewogICAgICBpZiAodW53YXRjaFJvdXRlQ2hhbmdlKSB1bndhdGNoUm91dGVDaGFuZ2UoKTsKICAgICAgY29uc3Qgdm0gPSBub2RlLl9fdnVlX187CiAgICAgIHVud2F0Y2hSb3V0ZUNoYW5nZSA9IHZtLiR3YXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJvdXRlUmVwb3J0T2JqZWN0KHZtKSk7CiAgICAgIH0sIGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgIHJlcG9ydFJvdXRlQ2hhbmdlKEpTT04ucGFyc2Uocm91dGUpKTsKICAgICAgfSk7CiAgICB9OwoKICAgIGNvbnN0IGdldFRhZyA9IGZ1bmN0aW9uICh2bSkgewogICAgICBjb25zdCBuYW1lID0ga2ViYWJDYXNlKHZtLiRvcHRpb25zLm5hbWUgfHwgdm0uJG9wdGlvbnMuX2NvbXBvbmVudFRhZyk7CiAgICAgIHJldHVybiBuYW1lOwogICAgfTsKICAgIC8qKiBAdHlwZSB7V2Vha01hcDxPYmplY3QsIE5vZGU+fSAqLwogICAgY29uc3Qgdm1Ub0h0bWxOb2RlID0gbmV3IFdlYWtNYXAoKTsKICAgIGNvbnN0IHNlZW5FbGVtZW50ID0gbmV3IFdlYWtTZXQoKTsKICAgIGNvbnN0IG1hcmtFbGVtZW50ID0gZnVuY3Rpb24gKG5vZGUsIHZtKSB7CiAgICAgIGlmICghdm0gfHwgdm0uJGVsICE9PSBub2RlKSByZXR1cm47CiAgICAgIGNvbnN0IHRhZyA9IGdldFRhZyh2bSk7CiAgICAgIGlmICh0YWcgJiYgbm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHsKICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoJ3lhd2YtY29tcG9uZW50LXRhZycpKSB7CiAgICAgICAgICBjb25zdCB0YWdzID0gWy4uLm5ldyBTZXQoWy4uLm5vZGUuZ2V0QXR0cmlidXRlKCd5YXdmLWNvbXBvbmVudC10YWcnKS5zcGxpdCgnICcpLCB0YWddKS52YWx1ZXMoKV0uam9pbignICcpOwogICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29tcG9uZW50LXRhZycsIHRhZ3MpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgneWF3Zi1jb21wb25lbnQtdGFnJywgdGFnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3Qga2V5ID0gdm0uJHZub2RlPy5rZXk7CiAgICAgIGlmIChrZXkgIT0gbnVsbCAmJiBub2RlIGluc3RhbmNlb2YgRWxlbWVudCkgewogICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd5YXdmLWNvbXBvbmVudC1rZXknLCBrZXkpOwogICAgICB9CiAgICAgIGlmICh0YWcpIHsKICAgICAgICBpZiAodm1Ub0h0bWxOb2RlLmhhcyh2bSkpIHsKICAgICAgICAgIGNvbnN0IG9sZCA9IHZtVG9IdG1sTm9kZS5nZXQodm0pOwogICAgICAgICAgaWYgKG9sZCAhPT0gbm9kZSkgewogICAgICAgICAgICByZXBvcnROZXdOb2RlKHsgdGFnLCBub2RlLCByZXBsYWNlOiB0cnVlIH0pOwogICAgICAgICAgICB2bVRvSHRtbE5vZGUuc2V0KHZtLCBub2RlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVwb3J0TmV3Tm9kZSh7IHRhZywgbm9kZSwgcmVwbGFjZTogZmFsc2UgfSk7CiAgICAgICAgICB2bVRvSHRtbE5vZGUuc2V0KHZtLCBub2RlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBlYWNoVm1Gb3JOb2RlID0gZnVuY3Rpb24qIChub2RlKSB7CiAgICAgIGZvciAobGV0IHZtID0gbm9kZS5fX3Z1ZV9fOyB2bSAmJiB2bS4kZWwgPT09IG5vZGU7IHZtID0gdm0uJHBhcmVudCkgewogICAgICAgIHlpZWxkIHZtOwogICAgICB9CiAgICAgIGZvciAobGV0IHZtID0gbm9kZS5fX3Z1ZV9fOyA7IHZtID0gdm0uJGNoaWxkcmVuWzBdKSB7CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZtLiRjaGlsZHJlbikpIGJyZWFrOwogICAgICAgIGlmICh2bS4kY2hpbGRyZW4ubGVuZ3RoICE9PSAxKSBicmVhazsKICAgICAgICBjb25zdCBjaGlsZCA9IHZtLiRjaGlsZHJlblswXTsKICAgICAgICBpZiAoIWNoaWxkIHx8IGNoaWxkLiRlbCAhPT0gbm9kZSkgYnJlYWs7CiAgICAgICAgeWllbGQgY2hpbGQ7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBlYWNoTW91bnRlZE5vZGUgPSBmdW5jdGlvbiAobm9kZSkgewogICAgICBjb25zdCB2bSA9IG5vZGUuX192dWVfXzsKICAgICAgaWYgKCF2bSkgcmV0dXJuOwogICAgICAvLyDlpoLmnpzlj5HnjrDmoLnlhYPntKDvvIzpgqPkuYjliJ3lp4vljJbohJrmnKwKICAgICAgaWYgKHZtLiRwYXJlbnQgPT0gbnVsbCkgewogICAgICAgIHJlcG9ydFJvb3ROb2RlKG5vZGUpOwogICAgICAgIGxpc3RlblJvdXRlQ2hhbmdlKG5vZGUpOwogICAgICB9CiAgICAgIGZvciAobGV0IHZtaSBvZiBlYWNoVm1Gb3JOb2RlKG5vZGUpKSB7CiAgICAgICAgbWFya0VsZW1lbnQobm9kZSwgdm1pKTsKICAgICAgfQogICAgICBpZiAoc2VlbkVsZW1lbnQuaGFzKG5vZGUpKSByZXR1cm47CiAgICAgIHNlZW5FbGVtZW50LmFkZChub2RlKTsKICAgICAgbGV0IF9fdnVlX18gPSBub2RlLl9fdnVlX187CiAgICAgIGRlbGV0ZSBub2RlLl9fdnVlX187CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCAnX192dWVfXycsIHsKICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgc2V0KG4pIHsKICAgICAgICAgIF9fdnVlX18gPSBuOwogICAgICAgICAgbWFya0VsZW1lbnQobm9kZSwgbik7CiAgICAgICAgfSwKICAgICAgICBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gX192dWVfXzsKICAgICAgICB9LAogICAgICB9KTsKICAgIH07CiAgICAvKiogQHR5cGUge011dGF0aW9uQ2FsbGJhY2t9ICovCiAgICBjb25zdCBvYnNlcnZlTmV3Tm9kZXMgPSBmdW5jdGlvbiAocmVjb3JkcykgewogICAgICBBcnJheS5mcm9tKHJlY29yZHMpLmZvckVhY2gocmVjb3JkID0+IHsKICAgICAgICBBcnJheS5mcm9tKHJlY29yZC5hZGRlZE5vZGVzKS5mb3JFYWNoKG5vZGUgPT4gewogICAgICAgICAgY29uc3Qgbm9kZXMgPSBbbm9kZV07CiAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHsKICAgICAgICAgICAgbm9kZXMucHVzaCguLi5ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykpOwogICAgICAgICAgfQogICAgICAgICAgbm9kZXMuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgICAgZWFjaE1vdW50ZWROb2RlKG5vZGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIob2JzZXJ2ZU5ld05vZGVzKTsKICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsKCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCByb290S2V5LCB7IHZhbHVlOiB7fSwgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiBmYWxzZSB9KTsKICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwID8/IHt9OwoKICAgIHZ1ZVNldHVwLmdldFJvb3RWbSA9ICgpID0+IHJvb3RWbTsKCiAgICB2dWVTZXR1cC5rZWJhYkNhc2UgPSBrZWJhYkNhc2U7CiAgICBjb25zdCBlYWNoQ29tcG9uZW50Vk0gPSB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0gPSBmdW5jdGlvbiAodGFnLCBjYWxsYmFjaywgeyBtb3VudGVkID0gdHJ1ZSwgd2F0Y2ggPSB0cnVlIH0gPSB7fSkgewogICAgICBjb25zdCBzZWVuID0gbmV3IFdlYWtTZXQoKTsKICAgICAgY29uc3QgZm91bmQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICAgICAgZm9yIChsZXQgdm0gb2YgZWFjaFZtRm9yTm9kZSh0YXJnZXQpKSB7CiAgICAgICAgICBpZiAoZ2V0VGFnKHZtKSA9PT0ga2ViYWJDYXNlKHRhZykpIHsKICAgICAgICAgICAgaWYgKHNlZW4uaGFzKHZtKSkgY29udGludWU7CiAgICAgICAgICAgIHNlZW4uYWRkKHZtKTsKICAgICAgICAgICAgY2FsbGJhY2sodm0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKHdhdGNoKSB7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3lhd2YtVnVlTm9kZUluc2VydGVkJywgZXZlbnQgPT4gewogICAgICAgICAgaWYgKHRhZyAhPT0gZXZlbnQuZGV0YWlsLnRhZykgcmV0dXJuOwogICAgICAgICAgZm91bmQoZXZlbnQudGFyZ2V0KTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAobW91bnRlZCkgewogICAgICAgIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbeWF3Zi1jb21wb25lbnQtdGFnfj0iJHt0YWd9Il1gKV0uZm9yRWFjaChmb3VuZCk7CiAgICAgIH0KICAgIH07CiAgICB2dWVTZXR1cC5nZXRDb21wb25lbnRzQnlUYWdOYW1lID0gZnVuY3Rpb24gKHRhZykgewogICAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgICAgZWFjaENvbXBvbmVudFZNKHRhZywgcmVzdWx0LnB1c2guYmluZChyZXN1bHQpLCB7IHdhdGNoOiBmYWxzZSB9KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CgogICAgdnVlU2V0dXAuY2xvc2VzdCA9IGZ1bmN0aW9uICh2bSwgdGFnKSB7CiAgICAgIGZvciAobGV0IHAgPSB2bTsgcDsgcCA9IHAuJHBhcmVudCkgewogICAgICAgIGlmIChnZXRUYWcocCkgPT09IGtlYmFiQ2FzZSh0YWcpKSB7CiAgICAgICAgICByZXR1cm4gcDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwoKICAgIC8vIOS4i+mdoui/meS4gOS4sumDveayoea1i+ivlei/hwogICAgY29uc3QgY2hpbGRBcnJheSA9IGZ1bmN0aW9uIChlbGVtZW50LCBjcmVhdGVDaGlsZHJlbikgewogICAgICBpZiAoQXJyYXkuaXNBcnJheShlbGVtZW50KSkgewogICAgICAgIHJldHVybiBlbGVtZW50OwogICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuY29tcG9uZW50T3B0aW9ucykgewogICAgICAgIGlmICghZWxlbWVudC5jb21wb25lbnRPcHRpb25zLmNoaWxkcmVuICYmIGNyZWF0ZUNoaWxkcmVuKSB7CiAgICAgICAgICBlbGVtZW50LmNvbXBvbmVudE9wdGlvbnMuY2hpbGRyZW4gPSBbXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVsZW1lbnQuY29tcG9uZW50T3B0aW9ucy5jaGlsZHJlbjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIWVsZW1lbnQuY2hpbGRyZW4gJiYgY3JlYXRlQ2hpbGRyZW4pIHsKICAgICAgICAgIGVsZW1lbnQuY2hpbGRyZW4gPSBbXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW47CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBwYXJzZUNsYXNzID0gY2xhc3NOYW1lID0+IHsKICAgICAgaWYgKGNsYXNzTmFtZSA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjbGFzc05hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KGNsYXNzTmFtZS50cmltKCkuc3BsaXQoL1xzKy8pKV0uam9pbignICcpOwogICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2xhc3NOYW1lKSkgewogICAgICAgIHJldHVybiBwYXJzZUNsYXNzKGNsYXNzTmFtZS5tYXAocGFyc2VDbGFzcykuam9pbignICcpKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiBwYXJzZUNsYXNzKE9iamVjdC5rZXlzKGNsYXNzTmFtZSkuZmlsdGVyKGtleSA9PiBjbGFzc05hbWVba2V5XSkuam9pbignICcpKTsKICAgICAgfQogICAgICByZXR1cm4gJyc7CiAgICB9OwogICAgY29uc3QgZ2V0Vk5vZGVUYWcgPSBmdW5jdGlvbiAodm5vZGUpIHsKICAgICAgaWYgKCF2bm9kZS5jb21wb25lbnRPcHRpb25zKSByZXR1cm4gdm5vZGUudGFnOwogICAgICBjb25zdCBvcHQgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgICBjb25zdCB0YWcgPSBvcHQuQ3Rvcj8ub3B0aW9ucz8ubmFtZSA/PyBvcHQudGFnOwogICAgICByZXR1cm4gJ3gtJyArIGtlYmFiQ2FzZSh0YWcpOwogICAgfTsKICAgIGNvbnN0IGJ1aWxkTm9kZXMgPSBmdW5jdGlvbiBidWlsZE5vZGVzKHZub2RlKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkgewogICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgneC15YXdmLWZyYWdtZW50Jyk7CiAgICAgICAgZnJhZ21lbnQuX192bm9kZV9fID0gdm5vZGU7CiAgICAgICAgdm5vZGUuZm9yRWFjaChjaGlsZCA9PiB7IGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkTm9kZXMoY2hpbGQpKTsgfSk7CiAgICAgICAgcmV0dXJuIGZyYWdtZW50OwogICAgICB9CiAgICAgIGNvbnN0IHRhZyA9IGdldFZOb2RlVGFnKHZub2RlKTsKICAgICAgaWYgKHRhZyA9PSBudWxsICYmIHZub2RlLnRleHQpIHsKICAgICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodm5vZGUudGV4dCk7CiAgICAgICAgbm9kZS5fX3Zub2RlX18gPSB2bm9kZTsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgICBpZiAodGFnID09IG51bGwpIHsKICAgICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJyk7CiAgICAgICAgbm9kZS5fX3Zub2RlX18gPSB2bm9kZTsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgICBub2RlLl9fdm5vZGVfXyA9IHZub2RlOwogICAgICBjb25zdCBkYXRhID0gdm5vZGUuZGF0YSA/PyB7fTsKICAgICAgY29uc3QgY2xhc3NOYW1lID0gcGFyc2VDbGFzcyhkYXRhLmNsYXNzKTsKICAgICAgaWYgKGNsYXNzTmFtZSkgbm9kZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7CiAgICAgIGNvbnN0IHN0YXRpY0NsYXNzTmFtZSA9IHBhcnNlQ2xhc3MoZGF0YS5zdGF0aWNDbGFzcyk7CiAgICAgIGlmIChzdGF0aWNDbGFzc05hbWUpIG5vZGUuY2xhc3NOYW1lICs9ICcgJyArIHN0YXRpY0NsYXNzTmFtZTsKICAgICAgY29uc3QgY2hpbGRyZW4gPSBjaGlsZEFycmF5KHZub2RlKTsKICAgICAgaWYgKGNoaWxkcmVuKSBjaGlsZHJlbi5mb3JFYWNoKHZub2RlID0+IHsKICAgICAgICBub2RlLmFwcGVuZENoaWxkKGJ1aWxkTm9kZXModm5vZGUpKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBub2RlOwogICAgfTsKICAgIGNvbnN0IHZOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgcmV0dXJuIG5vZGUuX192bm9kZV9fOwogICAgfTsKICAgIGNvbnN0IGluc2VydEJlZm9yZSA9IGZ1bmN0aW9uIChwYXJlbnROb2RlLCBuZXdWTm9kZSwgcmVmTm9kZSwgbmV3Tm9kZSkgewogICAgICBpZiAocmVmTm9kZSA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiBhcHBlbmRDaGlsZChwYXJlbnROb2RlLCBuZXdWTm9kZSk7CiAgICAgIH0KICAgICAgaWYgKG5ld05vZGUgPT0gbnVsbCkgbmV3Tm9kZSA9IGJ1aWxkTm9kZXMobmV3Vk5vZGUpOwogICAgICBjb25zdCByZWZWTm9kZSA9IHZOb2RlKHJlZk5vZGUpOwogICAgICBjb25zdCBwYXJlbnRWTm9kZSA9IHZOb2RlKHBhcmVudE5vZGUpOwogICAgICBjb25zdCBjaGlsZHJlbiA9IGNoaWxkQXJyYXkocGFyZW50Vk5vZGUpOwogICAgICBjb25zdCBpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YocmVmVk5vZGUpOwogICAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIG5ld1ZOb2RlKTsKICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmTm9kZSk7CiAgICAgIHJldHVybiBuZXdOb2RlOwogICAgfTsKICAgIGNvbnN0IGFwcGVuZENoaWxkID0gZnVuY3Rpb24gKHBhcmVudE5vZGUsIG5ld1ZOb2RlLCBuZXdOb2RlKSB7CiAgICAgIGNvbnN0IHBhcmVudFZOb2RlID0gdk5vZGUocGFyZW50Tm9kZSk7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gY2hpbGRBcnJheShwYXJlbnRWTm9kZSwgdHJ1ZSk7CiAgICAgIGlmIChuZXdOb2RlID09IG51bGwpIG5ld05vZGUgPSBidWlsZE5vZGVzKG5ld1ZOb2RlKTsKICAgICAgY2hpbGRyZW4ucHVzaChuZXdWTm9kZSk7CiAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobmV3Tm9kZSk7CiAgICAgIHJldHVybiBuZXdOb2RlOwogICAgfTsKICAgIGNvbnN0IHJlbW92ZUNoaWxkID0gZnVuY3Rpb24gKHBhcmVudE5vZGUsIHRhcmdldE5vZGUpIHsKICAgICAgY29uc3QgdGFyZ2V0Vk5vZGUgPSB2Tm9kZSh0YXJnZXROb2RlKTsKICAgICAgY29uc3QgcGFyZW50Vk5vZGUgPSB2Tm9kZShwYXJlbnROb2RlKTsKICAgICAgY29uc3QgY2hpbGRyZW4gPSBjaGlsZEFycmF5KHBhcmVudFZOb2RlKTsKICAgICAgY29uc3QgaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKHRhcmdldFZOb2RlKTsKICAgICAgY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTsKICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YXJnZXROb2RlKTsKICAgICAgcmV0dXJuIHRhcmdldFZOb2RlOwogICAgfTsKICAgIGNvbnN0IHdyYXBOb2RlID0gZnVuY3Rpb24gKGNocm9vdCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKHJlZk5vZGUsIG5ld1ZOb2RlKSB7CiAgICAgICAgY29uc3QgbmV3Tm9kZSA9IGJ1aWxkTm9kZXMobmV3Vk5vZGUpOwogICAgICAgIGNvbnN0IHJlZlZOb2RlID0gdk5vZGUocmVmTm9kZSk7CiAgICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IHJlZk5vZGUucGFyZW50Tm9kZTsKICAgICAgICBpZiAoIXBhcmVudE5vZGUpIHsKICAgICAgICAgIGNocm9vdChuZXdWTm9kZSk7CiAgICAgICAgICBhcHBlbmRDaGlsZChuZXdOb2RlLCByZWZWTm9kZSwgcmVmTm9kZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGluc2VydEJlZm9yZShwYXJlbnROb2RlLCBuZXdWTm9kZSwgcmVmTm9kZSwgbmV3Tm9kZSk7CiAgICAgICAgICByZW1vdmVDaGlsZChwYXJlbnROb2RlLCByZWZOb2RlKTsKICAgICAgICAgIGFwcGVuZENoaWxkKG5ld05vZGUsIHJlZlZOb2RlLCByZWZOb2RlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ld05vZGU7CiAgICAgIH07CiAgICB9OwogICAgY29uc3QgY2hhbmdlUm9vdCA9IGZ1bmN0aW9uIChjaHJvb3QpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyb290Tm9kZSkgewogICAgICAgIGNvbnN0IHBhcmVudE5vZGUgPSByb290Tm9kZS5wYXJlbnROb2RlOwogICAgICAgIGlmIChwYXJlbnROb2RlKSB7CiAgICAgICAgICByZW1vdmVDaGlsZChwYXJlbnROb2RlLCByb290Tm9kZSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHJvb3RWTm9kZSA9IHZOb2RlKHJvb3ROb2RlKTsKICAgICAgICBjaHJvb3Qocm9vdFZOb2RlKTsKICAgICAgICByZXR1cm4gcm9vdE5vZGU7CiAgICAgIH07CiAgICB9OwogICAgY29uc3QgY2xhc3NNb2RpZnkgPSBmdW5jdGlvbiAobm9kZSwgYWRkLCByZW1vdmUpIHsKICAgICAgY29uc3Qgdm5vZGUgPSB2Tm9kZShub2RlKTsKICAgICAgdm5vZGUuZGF0YSA9IHZub2RlLmRhdGEgPz8ge307CiAgICAgIGNvbnN0IGFkZGVkID0gcGFyc2VDbGFzcyhbcGFyc2VDbGFzcyh2bm9kZS5kYXRhLmNsYXNzKSwgLi4uYWRkXS5qb2luKCcgJykpOwogICAgICBjb25zdCByZW1vdmVkID0gYWRkZWQuc3BsaXQoL1xzKy8pLmZpbHRlcihjID0+ICFyZW1vdmUuaW5jbHVkZXMoYykpLmpvaW4oJyAnKTsKICAgICAgdm5vZGUuZGF0YS5jbGFzcyA9IHJlbW92ZWQ7CiAgICAgIG5vZGUuY2xhc3NOYW1lID0gcmVtb3ZlZDsKICAgIH07CiAgICBjb25zdCBhZGRDbGFzcyA9IGZ1bmN0aW9uIChub2RlLCAuLi5jbGFzc05hbWVzKSB7CiAgICAgIGNsYXNzTW9kaWZ5KG5vZGUsIGNsYXNzTmFtZXMuZmlsdGVyKHggPT4geCAmJiB0eXBlb2YgeCA9PT0gJ3N0cmluZycpLCBbXSk7CiAgICB9OwogICAgY29uc3QgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAobm9kZSwgLi4uY2xhc3NOYW1lcykgewogICAgICBjbGFzc01vZGlmeShub2RlLCBbXSwgY2xhc3NOYW1lcy5maWx0ZXIoeCA9PiB4ICYmIHR5cGVvZiB4ID09PSAnc3RyaW5nJykpOwogICAgfTsKICAgIGNvbnN0IGFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSwgY2FsbGJhY2ssIGNvbmZpZ3MgPSB7fSwgbmF0aXZlT24gPSBmYWxzZSkgewogICAgICBjb25zdCB2bm9kZSA9IHZOb2RlKG5vZGUpOwogICAgICBjb25zdCBvblN0ciA9IG5hdGl2ZU9uID8gJ25hdGl2ZU9uJyA6ICdvbic7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgdm5vZGUuZGF0YSA9IHt9OwogICAgICBpZiAoIXZub2RlLmRhdGFbb25TdHJdKSB2bm9kZS5kYXRhW29uU3RyXSA9IHt9OwogICAgICBjb25zdCBvbiA9IHZub2RlLmRhdGFbb25TdHJdOwogICAgICBjb25zdCB2dWVOYW1lID0gKGNvbmZpZ3MucGFzc2l2ZSA/ICcmJyA6ICcnKSArIChjb25maWdzLm9uY2UgPyAnficgOiAnJykgKyAoY29uZmlncy5jYXB0dXJlID8gJyEnIDogJycpICsgbmFtZTsKICAgICAgaWYgKCFvblt2dWVOYW1lXSkgb25bdnVlTmFtZV0gPSBjYWxsYmFjazsKICAgICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkob25bdnVlTmFtZV0pKSBvblt2dWVOYW1lXSA9IFtvblt2dWVOYW1lXSwgY2FsbGJhY2tdOwogICAgICBlbHNlIG9uW3Z1ZU5hbWVdLnB1c2goY2FsbGJhY2spOwogICAgfTsKICAgIGNvbnN0IHJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSwgY2FsbGJhY2sgPSBudWxsLCBjb25maWdzID0ge30sIG5hdGl2ZU9uID0gZmFsc2UpIHsKICAgICAgY29uc3Qgdm5vZGUgPSB2Tm9kZShub2RlKTsKICAgICAgY29uc3Qgb25TdHIgPSBuYXRpdmVPbiA/ICduYXRpdmVPbicgOiAnb24nOwogICAgICBpZiAoIXZub2RlLmRhdGEpIHJldHVybjsKICAgICAgaWYgKCF2bm9kZS5kYXRhW29uU3RyXSkgcmV0dXJuOwogICAgICBjb25zdCBvbiA9IHZub2RlLmRhdGFbb25TdHJdOwogICAgICBjb25zdCB2dWVOYW1lID0gKGNvbmZpZ3MucGFzc2l2ZSA/ICcmJyA6ICcnKSArIChjb25maWdzLm9uY2UgPyAnficgOiAnJykgKyAoY29uZmlncy5jYXB0dXJlID8gJyEnIDogJycpICsgbmFtZTsKICAgICAgaWYgKCFvblt2dWVOYW1lXSkgcmV0dXJuOwogICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbCkgewogICAgICAgIGRlbGV0ZSBvblt2dWVOYW1lXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob25bdnVlTmFtZV0pKSB7CiAgICAgICAgICBpZiAob25bdnVlTmFtZV0gPT09IGNhbGxiYWNrKSBkZWxldGUgb25bdnVlTmFtZV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9uW3Z1ZU5hbWVdID0gb25bdnVlTmFtZV0uZmlsdGVyKGMgPT4gYyAhPT0gY2FsbGJhY2spOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGNvbnN0IGdldEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSwgY29uZmlncyA9IHt9LCBuYXRpdmVPbiA9IGZhbHNlKSB7CiAgICAgIGNvbnN0IHZub2RlID0gdk5vZGUobm9kZSk7CiAgICAgIGNvbnN0IG9uU3RyID0gbmF0aXZlT24gPyAnbmF0aXZlT24nIDogJ29uJzsKICAgICAgaWYgKCF2bm9kZS5kYXRhKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKCF2bm9kZS5kYXRhW29uU3RyXSkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IG9uID0gdm5vZGUuZGF0YVtvblN0cl07CiAgICAgIGNvbnN0IHZ1ZU5hbWUgPSAoY29uZmlncy5wYXNzaXZlID8gJyYnIDogJycpICsgKGNvbmZpZ3Mub25jZSA/ICd+JyA6ICcnKSArIChjb25maWdzLmNhcHR1cmUgPyAnIScgOiAnJykgKyBuYW1lOwogICAgICBpZiAoIW9uW3Z1ZU5hbWVdKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIG9uW3Z1ZU5hbWVdOwogICAgfTsKICAgIGNvbnN0IGhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7CiAgICAgIGNvbnN0IHZub2RlID0gdk5vZGUobm9kZSk7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoIXZub2RlLmRhdGEuYXR0cnMpIHJldHVybiBmYWxzZTsKICAgICAgY29uc3QgdmFsdWUgPSB2bm9kZS5kYXRhLmF0dHJzW25hbWVdOwogICAgICBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09IG51bGwpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgY29uc3QgZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUpIHsKICAgICAgY29uc3Qgdm5vZGUgPSB2Tm9kZShub2RlKTsKICAgICAgaWYgKCF2bm9kZS5kYXRhKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKCF2bm9kZS5kYXRhLmF0dHJzKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIHZub2RlLmRhdGEuYXR0cnNbbmFtZV07CiAgICB9OwogICAgY29uc3Qgc2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUsIHZhbHVlKSB7CiAgICAgIGNvbnN0IHZub2RlID0gdk5vZGUobm9kZSk7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgcmV0dXJuOwogICAgICBpZiAoIXZub2RlLmRhdGEuYXR0cnMpIHJldHVybjsKICAgICAgdm5vZGUuZGF0YS5hdHRyc1tuYW1lXSA9IHZhbHVlOwogICAgfTsKICAgIGNvbnN0IHJlbW92ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7CiAgICAgIGNvbnN0IHZub2RlID0gdk5vZGUobm9kZSk7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgcmV0dXJuOwogICAgICBpZiAoIXZub2RlLmRhdGEuYXR0cnMpIHJldHVybjsKICAgICAgZGVsZXRlIHZub2RlLmRhdGEuYXR0cnNbbmFtZV07CiAgICB9OwogICAgY29uc3QgdHJhbnNmb3JtU2xvdCA9IGZ1bmN0aW9uIChub2RlLCBzbG90TmFtZSwgdHJhbnNmb3JtZXIpIHsKICAgICAgY29uc3Qgdm5vZGUgPSB2Tm9kZShub2RlKTsKICAgICAgY29uc3Qgc2xvdHMgPSB2bm9kZS5kYXRhPy5zY29wZWRTbG90czsKICAgICAgaWYgKCFzbG90cz8uW3Nsb3ROYW1lXSkgcmV0dXJuOwogICAgICBzbG90c1tzbG90TmFtZV0gPSB0cmFuc2Zvcm1SZW5kZXIoc2xvdHNbc2xvdE5hbWVdLCB0cmFuc2Zvcm1lcik7CiAgICB9OwogICAgY29uc3QgYnVpbGRlciA9IGZ1bmN0aW9uIChjcmVhdGVFbGVtZW50KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAocm9vdCkgewogICAgICAgIGNvbnN0IHJlcGxhY2VSb290ID0gbmV3Um9vdCA9PiB7IHJvb3QgPSBuZXdSb290OyB9OwogICAgICAgIGNvbnN0IG5vZGVTdHJ1Y3QgPSBidWlsZE5vZGVzKHJvb3QpOwogICAgICAgIGNvbnN0IE5vZGVzID0gewogICAgICAgICAgdk5vZGUsCiAgICAgICAgICByZXBsYWNlUm9vdCwKICAgICAgICAgIGluc2VydEJlZm9yZSwKICAgICAgICAgIHJlbW92ZUNoaWxkLAogICAgICAgICAgYXBwZW5kQ2hpbGQsCiAgICAgICAgICB3cmFwTm9kZTogd3JhcE5vZGUocmVwbGFjZVJvb3QpLAogICAgICAgICAgdW53cmFwTm9kZTogY2hhbmdlUm9vdChyZXBsYWNlUm9vdCksCiAgICAgICAgICBhZGRDbGFzcywKICAgICAgICAgIHJlbW92ZUNsYXNzLAogICAgICAgICAgZ2V0RXZlbnRMaXN0ZW5lciwKICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIsCiAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyLAogICAgICAgICAgc2V0QXR0cmlidXRlLAogICAgICAgICAgaGFzQXR0cmlidXRlLAogICAgICAgICAgZ2V0QXR0cmlidXRlLAogICAgICAgICAgcmVtb3ZlQXR0cmlidXRlLAogICAgICAgICAgY3JlYXRlRWxlbWVudCwKICAgICAgICAgIGg6IGNyZWF0ZUVsZW1lbnQsCiAgICAgICAgICB0cmFuc2Zvcm1TbG90LAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG5vZGVTdHJ1Y3QsCiAgICAgICAgICBOb2RlcywKICAgICAgICAgIGdldFJvb3Q6ICgpID0+IHJvb3QsCiAgICAgICAgfTsKICAgICAgfTsKICAgIH07CgogICAgY29uc3QgdHJhbnNmb3JtUmVuZGVyID0gZnVuY3Rpb24gKG9yaWdpbmFsUmVuZGVyLCB0cmFuc2Zvcm1lciwgeyByYXcgPSBmYWxzZSB9ID0ge30pIHsKICAgICAgaWYgKHJhdykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoY3JlYXRlRWxlbWVudCkgewogICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVyKG9yaWdpbmFsUmVuZGVyKS5jYWxsKHRoaXMsIGNyZWF0ZUVsZW1lbnQsIHsgYnVpbGRlcjogYnVpbGRlcihjcmVhdGVFbGVtZW50KSB9KTsKICAgICAgICB9OwogICAgICB9CiAgICAgIGNvbnN0IHdyYXBwZWQgPSBmdW5jdGlvbiByZW5kZXIoY3JlYXRlRWxlbWVudCkgewogICAgICAgIGNvbnN0IHsgbm9kZVN0cnVjdCwgTm9kZXMsIGdldFJvb3QgfSA9IGJ1aWxkZXIoY3JlYXRlRWxlbWVudCkob3JpZ2luYWxSZW5kZXIuY2FsbCh0aGlzLCBjcmVhdGVFbGVtZW50KSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRyYW5zZm9ybWVyLmNhbGwodGhpcywgbm9kZVN0cnVjdCwgTm9kZXMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1lBV0YgRXJyb3Igd2hpbGUgaW5qZWN0IHJlbmRlciBbJW9dOiAlbycsIHRyYW5zZm9ybWVyLCBlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGdldFJvb3QoKTsKICAgICAgfTsKICAgICAgd3JhcHBlZC5vcmlnaW5hbFJlbmRlciA9IG9yaWdpbmFsUmVuZGVyOwogICAgICByZXR1cm4gd3JhcHBlZDsKICAgIH07CiAgICBjb25zdCB0cmFuc2Zvcm1Db21wb25lbnRSZW5kZXIgPSB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRSZW5kZXIgPSBmdW5jdGlvbiAodm0sIHRyYW5zZm9ybWVyLCBjb25maWdzID0ge30pIHsKICAgICAgdm0uJG9wdGlvbnMucmVuZGVyID0gdHJhbnNmb3JtUmVuZGVyKHZtLiRvcHRpb25zLnJlbmRlciwgdHJhbnNmb3JtZXIsIGNvbmZpZ3MpOwogICAgfTsKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUgPSBmdW5jdGlvbiAodGFnLCB0cmFuc2Zvcm1lciwgY29uZmlncyA9IHt9KSB7CiAgICAgIGVhY2hDb21wb25lbnRWTSh0YWcsIGZ1bmN0aW9uICh2bSkgewogICAgICAgIHRyYW5zZm9ybUNvbXBvbmVudFJlbmRlcih2bSwgdHJhbnNmb3JtZXIsIGNvbmZpZ3MpOwogICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICB9KTsKICAgIH07CgogICAgY29uc3QgaXNTaW1wbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5hbHRLZXkgfHwgZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQubWV0YUtleSkgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDEpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgY29uc3QgbWZzcCA9IHRhcmdldC5jbG9zZXN0KCdhLnlhd2YtbGluay1tZnNwJyk7CiAgICAgIGlmIChtZnNwKSB7CiAgICAgICAgaWYgKCFpc1NpbXBsZUNsaWNrKGV2ZW50KSkgewogICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnN0IG5tZnBkID0gdGFyZ2V0LmNsb3Nlc3QoJ2EueWF3Zi1saW5rLW5tZnBkJyk7CiAgICAgIGlmIChubWZwZCkgewogICAgICAgIGlmIChpc1NpbXBsZUNsaWNrKGV2ZW50KSkgewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIHsgY2FwdHVyZTogdHJ1ZSB9KTsKICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBrZXkpOwp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L2luaXQvcmVhZHkuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CgogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKCiAgaW5pdC5vblJlYWR5KGFzeW5jICgpID0+IHsKICAgIGNvbnN0ICRDT05GSUcgPSBpbml0LnBhZ2UuJENPTkZJRzsKICAgIGF3YWl0IGNvbmZpZy5pbml0KCRDT05GSUcudWlkKTsKICAgIHV0aWwuaTE4biA9ICRDT05GSUcubGFuZzsKICAgIHV0aWwudGltZS5zZXREaWZmKCRDT05GSUcudGltZURpZmYgfHwgMCk7CiAgfSwgeyBwcmlvcml0eTogcHJpb3JpdHkuRklSU1QgfSk7CgogIHV0aWwuZGVidWcoJ3lhd2YgbG9hZGluZywgaGlkZSBhbGwnKTsKICBjb25zdCBoaWRlQWxsID0gY3NzLmFkZCgnLldCX21pbmlibG9nIHsgdmlzaWJpbGl0eTogaGlkZGVuOyBvcGFjaXR5OiAwOyB9Jyk7CiAgaW5pdC5vblJlYWR5KCgpID0+IHsKICAgIGhpZGVBbGwucmVtb3ZlKCk7CiAgICB1dGlsLmRlYnVnKCd5YXdmIGxvYWRlZCwgZGlzYWJsZSBoaWRlIGFsbCcpOwogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkxBU1QgfSk7CiAgaW5pdC5vbkRlaW5pdCgoKSA9PiB7CiAgICBoaWRlQWxsLnJlbW92ZSgpOwogICAgdXRpbC5kZWJ1ZygneWF3ZiB1bmxvYWRlZCwgZGlzYWJsZSBoaWRlIGFsbCcpOwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiByZXBsYWNlbWVudCBvZiB5YW9mYW5nOi8vY29udGVudC9iYWNrZW5kL2Rvd25sb2FkLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgZG93bmxvYWQgPSB5YXdmLmRvd25sb2FkID0ge307CgogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IHZhbGlkRmlsZW5hbWUgPSAoZnVuY3Rpb24gKCkgewogICAgY29uc3QgcmVnT3RoZXJDaGFyYWN0ZXJzID0gL14oPzpcdUQ4MzRbXHVEQ0Y2LVx1RENGRlx1REQyN1x1REQyOFx1REQ3My1cdUREN0FcdURERTktXHVEREZGXHVERTQ2LVx1REVGRlx1REY1Ny1cdURGNUZcdURGNzItXHVERkZGXXxcdUQ4MzZbXHVERThDLVx1REU5QVx1REVBMFx1REVCMC1cdURGRkZdfFx1RDgzQ1tcdURDMkMtXHVEQzJGXHVEQzk0LVx1REM5Rlx1RENBRlx1RENCMFx1RENDMFx1RENEMFx1RENGNi1cdURDRkZcdUREMEQtXHVERDBGXHVERDJGXHVERDZDLVx1REQ2Rlx1REQ5Qi1cdURERTVcdURFMDMtXHVERTBGXHVERTNCLVx1REUzRlx1REU0OS1cdURFNEZcdURFNTItXHVERUZGXXxcdUQ4MUFbXHVERTM5LVx1REUzRlx1REU1Rlx1REU2QS1cdURFNkRcdURFNzAtXHVERUNGXHVERUVFXHVERUVGXHVERUY2LVx1REVGRlx1REY0Ni1cdURGNEZcdURGNUFcdURGNjJcdURGNzgtXHVERjdDXHVERjkwLVx1REZGRl18XHVEODA5W1x1REM2Rlx1REM3NS1cdURDN0ZcdURENDQtXHVERkZGXXxcdUQ4MUJbXHVEQzAwLVx1REVGRlx1REY0NS1cdURGNEZcdURGN0YtXHVERjhFXHVERkEwLVx1REZGRl18XHVEODZFW1x1REMxRVx1REMxRl18XHVEODNEW1x1REQ3QVx1RERBNFx1REVEMS1cdURFREZcdURFRUQtXHVERUVGXHVERUY0LVx1REVGRlx1REY3NC1cdURGN0ZcdURGRDUtXHVERkZGXXxcdUQ4MDFbXHVEQzlFXHVEQzlGXHVEQ0FBLVx1RENGRlx1REQyOC1cdUREMkZcdURENjQtXHVERDZFXHVERDcwLVx1RERGRlx1REYzNy1cdURGM0ZcdURGNTYtXHVERjVGXHVERjY4LVx1REZGRl18XHVEODAwW1x1REMwQ1x1REMyN1x1REMzQlx1REMzRVx1REM0RVx1REM0Rlx1REM1RS1cdURDN0ZcdURDRkItXHVEQ0ZGXHVERDAzLVx1REQwNlx1REQzNC1cdUREMzZcdUREOEQtXHVERDhGXHVERDlDLVx1REQ5Rlx1RERBMS1cdUREQ0ZcdURERkUtXHVERTdGXHVERTlELVx1REU5Rlx1REVEMS1cdURFREZcdURFRkMtXHVERUZGXHVERjI0LVx1REYyRlx1REY0Qi1cdURGNEZcdURGN0ItXHVERjdGXHVERjlFXHVERkM0LVx1REZDN1x1REZENi1cdURGRkZdfFx1RDg2OVtcdURFRDctXHVERUZGXXxcdUQ4M0JbXHVEQzAwLVx1RERGRlx1REUwNFx1REUyMFx1REUyM1x1REUyNVx1REUyNlx1REUyOFx1REUzM1x1REUzOFx1REUzQVx1REUzQy1cdURFNDFcdURFNDMtXHVERTQ2XHVERTQ4XHVERTRBXHVERTRDXHVERTUwXHVERTUzXHVERTU1XHVERTU2XHVERTU4XHVERTVBXHVERTVDXHVERTVFXHVERTYwXHVERTYzXHVERTY1XHVERTY2XHVERTZCXHVERTczXHVERTc4XHVERTdEXHVERTdGXHVERThBXHVERTlDLVx1REVBMFx1REVBNFx1REVBQVx1REVCQy1cdURFRUZcdURFRjItXHVERkZGXXxcdUQ4N0VbXHVERTFFLVx1REZGRl18XHVEQjQwW1x1REMwMC1cdURDRkZcdURERjAtXHVERkZGXXxcdUQ4MDRbXHVEQzRFLVx1REM1MVx1REM3MC1cdURDN0VcdURDQkRcdURDQzItXHVEQ0NGXHVEQ0U5LVx1RENFRlx1RENGQS1cdURDRkZcdUREMzVcdURENDQtXHVERDRGXHVERDc3LVx1REQ3Rlx1RERDRVx1RERDRlx1RERFMFx1RERGNS1cdURERkZcdURFMTJcdURFM0UtXHVERTdGXHVERTg3XHVERTg5XHVERThFXHVERTlFXHVERUFBLVx1REVBRlx1REVFQi1cdURFRUZcdURFRkEtXHVERUZGXHVERjA0XHVERjBEXHVERjBFXHVERjExXHVERjEyXHVERjI5XHVERjMxXHVERjM0XHVERjNBXHVERjNCXHVERjQ1XHVERjQ2XHVERjQ5XHVERjRBXHVERjRFXHVERjRGXHVERjUxLVx1REY1Nlx1REY1OC1cdURGNUNcdURGNjRcdURGNjVcdURGNkQtXHVERjZGXHVERjc1LVx1REZGRl18XHVEODNBW1x1RENDNVx1RENDNlx1RENENy1cdURGRkZdfFx1RDgwRFtcdURDMkYtXHVERkZGXXxcdUQ4NkRbXHVERjM1LVx1REYzRl18W1x1RDgwN1x1RDgwQVx1RDgwQlx1RDgwRS1cdUQ4MTBcdUQ4MTItXHVEODE5XHVEODFDLVx1RDgyQlx1RDgyRFx1RDgyRVx1RDgzMC1cdUQ4MzNcdUQ4MzctXHVEODM5XHVEODNGXHVEODc0LVx1RDg3RFx1RDg3Ri1cdURCM0ZcdURCNDEtXHVEQkZGXVtcdURDMDAtXHVERkZGXXxcdUQ4MDZbXHVEQzAwLVx1REM5Rlx1RENGMy1cdURDRkVcdUREMDAtXHVERUJGXHVERUY5LVx1REZGRl18XHVEODAzW1x1REM0OS1cdURDN0ZcdURDQjMtXHVEQ0JGXHVEQ0YzLVx1RENGOVx1REQwMC1cdURFNUZcdURFN0YtXHVERkZGXXxcdUQ4MzVbXHVEQzU1XHVEQzlEXHVEQ0EwXHVEQ0ExXHVEQ0EzXHVEQ0E0XHVEQ0E3XHVEQ0E4XHVEQ0FEXHVEQ0JBXHVEQ0JDXHVEQ0M0XHVERDA2XHVERDBCXHVERDBDXHVERDE1XHVERDFEXHVERDNBXHVERDNGXHVERDQ1XHVERDQ3LVx1REQ0OVx1REQ1MVx1REVBNlx1REVBN1x1REZDQ1x1REZDRF18XHVEODA1W1x1REMwMC1cdURDN0ZcdURDQzgtXHVEQ0NGXHVEQ0RBLVx1REQ3Rlx1RERCNlx1RERCN1x1RERERS1cdURERkZcdURFNDUtXHVERTRGXHVERTVBLVx1REU3Rlx1REVCOC1cdURFQkZcdURFQ0EtXHVERUZGXHVERjFBLVx1REYxQ1x1REYyQy1cdURGMkZcdURGNDAtXHVERkZGXXxcdUQ4MDJbXHVEQzA2XHVEQzA3XHVEQzA5XHVEQzM2XHVEQzM5LVx1REMzQlx1REMzRFx1REMzRVx1REM1Nlx1REM5Ri1cdURDQTZcdURDQjAtXHVEQ0RGXHVEQ0YzXHVEQ0Y2LVx1RENGQVx1REQxQy1cdUREMUVcdUREM0EtXHVERDNFXHVERDQwLVx1REQ3Rlx1RERCOC1cdUREQkJcdURERDBcdURERDFcdURFMDRcdURFMDctXHVERTBCXHVERTE0XHVERTE4XHVERTM0LVx1REUzN1x1REUzQi1cdURFM0VcdURFNDgtXHVERTRGXHVERTU5LVx1REU1Rlx1REVBMC1cdURFQkZcdURFRTctXHVERUVBXHVERUY3LVx1REVGRlx1REYzNi1cdURGMzhcdURGNTZcdURGNTdcdURGNzMtXHVERjc3XHVERjkyLVx1REY5OFx1REY5RC1cdURGQThcdURGQjAtXHVERkZGXXxcdUQ4MDhbXHVERjlBLVx1REZGRl18XHVEODJGW1x1REM2Qi1cdURDNkZcdURDN0QtXHVEQzdGXHVEQzg5LVx1REM4Rlx1REM5QVx1REM5Qlx1RENBMC1cdURGRkZdfFx1RDgyQ1tcdURDMDItXHVERkZGXXxcdUQ4MTFbXHVERTQ3LVx1REZGRl18XHVEODNFW1x1REMwQy1cdURDMEZcdURDNDgtXHVEQzRGXHVEQzVBLVx1REM1Rlx1REM4OC1cdURDOEZcdURDQUUtXHVERDBGXHVERDE5LVx1REQ3Rlx1REQ4NS1cdUREQkZcdUREQzEtXHVERkZGXXxcdUQ4NzNbXHVERUEyLVx1REZGRl18W1wwLVx4MUZceDdGLVx4OUZceEFEXHUwMzc4XHUwMzc5XHUwMzgwLVx1MDM4M1x1MDM4Qlx1MDM4RFx1MDNBMlx1MDUzMFx1MDU1N1x1MDU1OFx1MDU2MFx1MDU4OFx1MDU4Qlx1MDU4Q1x1MDU5MFx1MDVDOC1cdTA1Q0ZcdTA1RUItXHUwNUVGXHUwNUY1LVx1MDYwNVx1MDYxQ1x1MDYxRFx1MDZERFx1MDcwRVx1MDcwRlx1MDc0Qlx1MDc0Q1x1MDdCMi1cdTA3QkZcdTA3RkItXHUwN0ZGXHUwODJFXHUwODJGXHUwODNGXHUwODVDXHUwODVEXHUwODVGLVx1MDg5Rlx1MDhCNS1cdTA4RTJcdTA5ODRcdTA5OERcdTA5OEVcdTA5OTFcdTA5OTJcdTA5QTlcdTA5QjFcdTA5QjMtXHUwOUI1XHUwOUJBXHUwOUJCXHUwOUM1XHUwOUM2XHUwOUM5XHUwOUNBXHUwOUNGLVx1MDlENlx1MDlEOC1cdTA5REJcdTA5REVcdTA5RTRcdTA5RTVcdTA5RkMtXHUwQTAwXHUwQTA0XHUwQTBCLVx1MEEwRVx1MEExMVx1MEExMlx1MEEyOVx1MEEzMVx1MEEzNFx1MEEzN1x1MEEzQVx1MEEzQlx1MEEzRFx1MEE0My1cdTBBNDZcdTBBNDlcdTBBNEFcdTBBNEUtXHUwQTUwXHUwQTUyLVx1MEE1OFx1MEE1RFx1MEE1Ri1cdTBBNjVcdTBBNzYtXHUwQTgwXHUwQTg0XHUwQThFXHUwQTkyXHUwQUE5XHUwQUIxXHUwQUI0XHUwQUJBXHUwQUJCXHUwQUM2XHUwQUNBXHUwQUNFXHUwQUNGXHUwQUQxLVx1MEFERlx1MEFFNFx1MEFFNVx1MEFGMi1cdTBBRjhcdTBBRkEtXHUwQjAwXHUwQjA0XHUwQjBEXHUwQjBFXHUwQjExXHUwQjEyXHUwQjI5XHUwQjMxXHUwQjM0XHUwQjNBXHUwQjNCXHUwQjQ1XHUwQjQ2XHUwQjQ5XHUwQjRBXHUwQjRFLVx1MEI1NVx1MEI1OC1cdTBCNUJcdTBCNUVcdTBCNjRcdTBCNjVcdTBCNzgtXHUwQjgxXHUwQjg0XHUwQjhCLVx1MEI4RFx1MEI5MVx1MEI5Ni1cdTBCOThcdTBCOUJcdTBCOURcdTBCQTAtXHUwQkEyXHUwQkE1LVx1MEJBN1x1MEJBQi1cdTBCQURcdTBCQkEtXHUwQkJEXHUwQkMzLVx1MEJDNVx1MEJDOVx1MEJDRVx1MEJDRlx1MEJEMS1cdTBCRDZcdTBCRDgtXHUwQkU1XHUwQkZCLVx1MEJGRlx1MEMwNFx1MEMwRFx1MEMxMVx1MEMyOVx1MEMzQS1cdTBDM0NcdTBDNDVcdTBDNDlcdTBDNEUtXHUwQzU0XHUwQzU3XHUwQzVCLVx1MEM1Rlx1MEM2NFx1MEM2NVx1MEM3MC1cdTBDNzdcdTBDODBcdTBDODRcdTBDOERcdTBDOTFcdTBDQTlcdTBDQjRcdTBDQkFcdTBDQkJcdTBDQzVcdTBDQzlcdTBDQ0UtXHUwQ0Q0XHUwQ0Q3LVx1MENERFx1MENERlx1MENFNFx1MENFNVx1MENGMFx1MENGMy1cdTBEMDBcdTBEMDRcdTBEMERcdTBEMTFcdTBEM0JcdTBEM0NcdTBENDVcdTBENDlcdTBENEYtXHUwRDU2XHUwRDU4LVx1MEQ1RVx1MEQ2NFx1MEQ2NVx1MEQ3Ni1cdTBENzhcdTBEODBcdTBEODFcdTBEODRcdTBEOTctXHUwRDk5XHUwREIyXHUwREJDXHUwREJFXHUwREJGXHUwREM3LVx1MERDOVx1MERDQi1cdTBEQ0VcdTBERDVcdTBERDdcdTBERTAtXHUwREU1XHUwREYwXHUwREYxXHUwREY1LVx1MEUwMFx1MEUzQi1cdTBFM0VcdTBFNUMtXHUwRTgwXHUwRTgzXHUwRTg1XHUwRTg2XHUwRTg5XHUwRThCXHUwRThDXHUwRThFLVx1MEU5M1x1MEU5OFx1MEVBMFx1MEVBNFx1MEVBNlx1MEVBOFx1MEVBOVx1MEVBQ1x1MEVCQVx1MEVCRVx1MEVCRlx1MEVDNVx1MEVDN1x1MEVDRVx1MEVDRlx1MEVEQVx1MEVEQlx1MEVFMC1cdTBFRkZcdTBGNDhcdTBGNkQtXHUwRjcwXHUwRjk4XHUwRkJEXHUwRkNEXHUwRkRCLVx1MEZGRlx1MTBDNlx1MTBDOC1cdTEwQ0NcdTEwQ0VcdTEwQ0ZcdTEyNDlcdTEyNEVcdTEyNEZcdTEyNTdcdTEyNTlcdTEyNUVcdTEyNUZcdTEyODlcdTEyOEVcdTEyOEZcdTEyQjFcdTEyQjZcdTEyQjdcdTEyQkZcdTEyQzFcdTEyQzZcdTEyQzdcdTEyRDdcdTEzMTFcdTEzMTZcdTEzMTdcdTEzNUJcdTEzNUNcdTEzN0QtXHUxMzdGXHUxMzlBLVx1MTM5Rlx1MTNGNlx1MTNGN1x1MTNGRVx1MTNGRlx1MTY5RC1cdTE2OUZcdTE2RjktXHUxNkZGXHUxNzBEXHUxNzE1LVx1MTcxRlx1MTczNy1cdTE3M0ZcdTE3NTQtXHUxNzVGXHUxNzZEXHUxNzcxXHUxNzc0LVx1MTc3Rlx1MTdERVx1MTdERlx1MTdFQS1cdTE3RUZcdTE3RkEtXHUxN0ZGXHUxODBFXHUxODBGXHUxODFBLVx1MTgxRlx1MTg3OC1cdTE4N0ZcdTE4QUItXHUxOEFGXHUxOEY2LVx1MThGRlx1MTkxRlx1MTkyQy1cdTE5MkZcdTE5M0MtXHUxOTNGXHUxOTQxLVx1MTk0M1x1MTk2RVx1MTk2Rlx1MTk3NS1cdTE5N0ZcdTE5QUMtXHUxOUFGXHUxOUNBLVx1MTlDRlx1MTlEQi1cdTE5RERcdTFBMUNcdTFBMURcdTFBNUZcdTFBN0RcdTFBN0VcdTFBOEEtXHUxQThGXHUxQTlBLVx1MUE5Rlx1MUFBRVx1MUFBRlx1MUFCRi1cdTFBRkZcdTFCNEMtXHUxQjRGXHUxQjdELVx1MUI3Rlx1MUJGNC1cdTFCRkJcdTFDMzgtXHUxQzNBXHUxQzRBLVx1MUM0Q1x1MUM4MC1cdTFDQkZcdTFDQzgtXHUxQ0NGXHUxQ0Y3XHUxQ0ZBLVx1MUNGRlx1MURGNi1cdTFERkJcdTFGMTZcdTFGMTdcdTFGMUVcdTFGMUZcdTFGNDZcdTFGNDdcdTFGNEVcdTFGNEZcdTFGNThcdTFGNUFcdTFGNUNcdTFGNUVcdTFGN0VcdTFGN0ZcdTFGQjVcdTFGQzVcdTFGRDRcdTFGRDVcdTFGRENcdTFGRjBcdTFGRjFcdTFGRjVcdTFGRkZcdTIwMEItXHUyMDBGXHUyMDJBLVx1MjAyRVx1MjA2MC1cdTIwNkZcdTIwNzJcdTIwNzNcdTIwOEZcdTIwOUQtXHUyMDlGXHUyMEJGLVx1MjBDRlx1MjBGMS1cdTIwRkZcdTIxOEMtXHUyMThGXHUyM0ZCLVx1MjNGRlx1MjQyNy1cdTI0M0ZcdTI0NEItXHUyNDVGXHUyQjc0XHUyQjc1XHUyQjk2XHUyQjk3XHUyQkJBLVx1MkJCQ1x1MkJDOVx1MkJEMi1cdTJCRUJcdTJCRjAtXHUyQkZGXHUyQzJGXHUyQzVGXHUyQ0Y0LVx1MkNGOFx1MkQyNlx1MkQyOC1cdTJEMkNcdTJEMkVcdTJEMkZcdTJENjgtXHUyRDZFXHUyRDcxLVx1MkQ3RVx1MkQ5Ny1cdTJEOUZcdTJEQTdcdTJEQUZcdTJEQjdcdTJEQkZcdTJEQzdcdTJEQ0ZcdTJERDdcdTJEREZcdTJFNDMtXHUyRTdGXHUyRTlBXHUyRUY0LVx1MkVGRlx1MkZENi1cdTJGRUZcdTJGRkMtXHUyRkZGXHUzMDQwXHUzMDk3XHUzMDk4XHUzMTAwLVx1MzEwNFx1MzEyRS1cdTMxMzBcdTMxOEZcdTMxQkItXHUzMUJGXHUzMUU0LVx1MzFFRlx1MzIxRlx1MzJGRlx1NERCNi1cdTREQkZcdTlGRDYtXHU5RkZGXHVBNDhELVx1QTQ4Rlx1QTRDNy1cdUE0Q0ZcdUE2MkMtXHVBNjNGXHVBNkY4LVx1QTZGRlx1QTdBRVx1QTdBRlx1QTdCOC1cdUE3RjZcdUE4MkMtXHVBODJGXHVBODNBLVx1QTgzRlx1QTg3OC1cdUE4N0ZcdUE4QzUtXHVBOENEXHVBOERBLVx1QThERlx1QThGRVx1QThGRlx1QTk1NC1cdUE5NUVcdUE5N0QtXHVBOTdGXHVBOUNFXHVBOURBLVx1QTlERFx1QTlGRlx1QUEzNy1cdUFBM0ZcdUFBNEVcdUFBNEZcdUFBNUFcdUFBNUJcdUFBQzMtXHVBQURBXHVBQUY3LVx1QUIwMFx1QUIwN1x1QUIwOFx1QUIwRlx1QUIxMFx1QUIxNy1cdUFCMUZcdUFCMjdcdUFCMkZcdUFCNjYtXHVBQjZGXHVBQkVFXHVBQkVGXHVBQkZBLVx1QUJGRlx1RDdBNC1cdUQ3QUZcdUQ3QzctXHVEN0NBXHVEN0ZDLVx1RjhGRlx1RkE2RVx1RkE2Rlx1RkFEQS1cdUZBRkZcdUZCMDctXHVGQjEyXHVGQjE4LVx1RkIxQ1x1RkIzN1x1RkIzRFx1RkIzRlx1RkI0Mlx1RkI0NVx1RkJDMi1cdUZCRDJcdUZENDAtXHVGRDRGXHVGRDkwXHVGRDkxXHVGREM4LVx1RkRFRlx1RkRGRVx1RkRGRlx1RkUxQS1cdUZFMUZcdUZFNTNcdUZFNjdcdUZFNkMtXHVGRTZGXHVGRTc1XHVGRUZELVx1RkYwMFx1RkZCRi1cdUZGQzFcdUZGQzhcdUZGQzlcdUZGRDBcdUZGRDFcdUZGRDhcdUZGRDlcdUZGREQtXHVGRkRGXHVGRkU3XHVGRkVGLVx1RkZGQlx1RkZGRVx1RkZGRl0pJC9nOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBjb25zdCByZWdXaW5kb3dzUmVzZXJ2ZWRGaWxlbmFtZSA9IC9eKD89Q09OfFBSTnxBVVh8TlVMfENPTVsxLTldfExQVFsxLTldJCkvaTsKICAgIGNvbnN0IHJlZ0ZpbGVuYW1lVW5oYXBweUNoYXJhY3RlcnMgPSAvXltccy4tXSt8Wzw+OiIvXFx8PypdfFwuKD89LipcLil8Wy87I118W1xzLl0rJC9nOwogICAgY29uc3QgZGVmYXVsdEZpbGVuYW1lID0gJ18nOwogICAgcmV0dXJuIGZpbGVuYW1lID0+IHsKICAgICAgY29uc3QgdmFsaWQgPSAoZmlsZW5hbWUgKyAnJykKICAgICAgICAubWF0Y2goLy4vdWcpLm1hcChjaGFyYWN0ZXIgPT4gY2hhcmFjdGVyLnJlcGxhY2UocmVnT3RoZXJDaGFyYWN0ZXJzLCAnXycpKS5qb2luKCcnKQogICAgICAgIC5yZXBsYWNlKHJlZ0ZpbGVuYW1lVW5oYXBweUNoYXJhY3RlcnMsICdfJykKICAgICAgICAucmVwbGFjZShyZWdXaW5kb3dzUmVzZXJ2ZWRGaWxlbmFtZSwgJ18nKSB8fAogICAgICAgIGRlZmF1bHRGaWxlbmFtZTsKICAgICAgaWYgKHZhbGlkID09PSBmaWxlbmFtZSkgcmV0dXJuIGZpbGVuYW1lOwogICAgICByZXR1cm4gdmFsaWRGaWxlbmFtZSh2YWxpZCk7CiAgICB9OwogIH0oKSk7CgogIGRvd25sb2FkLmZpbGVuYW1lID0gdmFsaWRGaWxlbmFtZTsKCiAgLyoqCiAgICogQHBhcmFtIHt7IGJsb2I6IEJsb2IsIGZpbGVuYW1lOiBzdHJpbmcgfX0KICAgKi8KICBkb3dubG9hZC5ibG9iID0gYXN5bmMgZnVuY3Rpb24gKHsgYmxvYiwgZmlsZW5hbWUgfSkgewogICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICBsaW5rLmRvd25sb2FkID0gZmlsZW5hbWU7CiAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgbGluay5jbGljaygpOwogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgIGNvbnN0IHJldm9rZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgcmV2b2tlKTsKICAgIH07CiAgICBzZXRUaW1lb3V0KHJldm9rZSwgNjBlMyk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgcmV2b2tlKTsKICB9OwoKICAvKioKICAgKiBAcGFyYW0ge3sgdXJsOiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcgfVtdfQogICAqLwogIGRvd25sb2FkLnVybHMgPSBhc3luYyBmdW5jdGlvbiAoZmlsZXMpIHsKICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBQcm9taXNlLmFsbChmaWxlcy5tYXAoZnVuY3Rpb24gKHsgdXJsLCBmaWxlbmFtZSB9LCBpbmRleCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIEdNLnhtbEh0dHBSZXF1ZXN0KHsKICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJywKICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgY29uc3QgbXRpbWUgPSAocmVzcC5yZXNwb25zZUhlYWRlcnMubWF0Y2goL15MYXN0LU1vZGlmaWVkOiAoLiopJC9taSkgfHwgW10pWzFdOwogICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICBmaWxlbmFtZSwKICAgICAgICAgICAgICBjb250ZW50OiByZXNwLnJlc3BvbnNlLAogICAgICAgICAgICAgIG10aW1lOiBuZXcgRGF0ZShtdGltZSB8fCBEYXRlLm5vdygpKSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZWplY3QoKTsKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSkpOwoKICAgIGNvbnN0IHByZWZpeCA9IGNvbnRlbnRbMF0uZmlsZW5hbWUuc3BsaXQoJy8nKS5yZWR1Y2UoKHJlc3VsdCwgcGFydCkgPT4gewogICAgICBpZiAoY29udGVudC5zb21lKGl0ZW0gPT4gIWl0ZW0uZmlsZW5hbWUuc3RhcnRzV2l0aChyZXN1bHQgKyAnLycgKyBwYXJ0KSkpIHJldHVybiByZXN1bHQ7CiAgICAgIHJldHVybiByZXN1bHQgKyAnLycgKyBwYXJ0OwogICAgfSk7CiAgICBjb250ZW50LmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGl0ZW0uZmlsZW5hbWUgPSBpdGVtLmZpbGVuYW1lLnNsaWNlKHByZWZpeC5sZW5ndGgpLnJlcGxhY2UoL15cLy8sICcnKTsKICAgIH0pOwogICAgY29uc3QgdGFyYmFsbCA9IHV0aWwudGFyYmFsbC5maWxlcyhjb250ZW50KTsKICAgIGxldCBibG9iID0gbmV3IEJsb2IoW3RhcmJhbGxdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi94LXRhcicgfSk7CiAgICBkb3dubG9hZC5ibG9iKHsgYmxvYiwgZmlsZW5hbWU6IChwcmVmaXggfHwgY29udGVudFswXS5maWxlbmFtZSkgKyAnLnRhcicgfSk7CgogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHJlcGxhY2VtZW50IG9mIHlhb2Zhbmc6Ly9jb250ZW50L2JhY2tlbmQvbm90aWZpY2F0aW9ucy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSB5YXdmLm5vdGlmaWNhdGlvbnMgPSB7fTsKCiAgbm90aWZpY2F0aW9ucy5zaG93ID0gZnVuY3Rpb24gKHsgdGl0bGUsIGNvbnRlbnQsIGljb24gPSBudWxsLCBkdXJhdGlvbiA9IEluZmluaXR5IH0pIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIEdNLm5vdGlmaWNhdGlvbih7CiAgICAgICAgdGl0bGUsCiAgICAgICAgdGV4dDogY29udGVudCwKICAgICAgICBpbWFnZTogaWNvbiwKICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0sCiAgICAgICAgb25kb25lOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICB9LAogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcmVwbGFjZW1lbnQgb2YgeWFvZmFuZzovL2NvbnRlbnQvYmFja2VuZC9mb250bGlzdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwoKICBjb25zdCBmb250TGlzdCA9IHlhd2YuZm9udExpc3QgPSB7fTsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwoKICBjb25zdCBmdW5jdG9vbHMgPSB1dGlsLmZ1bmN0b29sczsKCiAgY29uc3QgdGV4dFdpZHRoID0gKGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IGZvbnRzaXplID0gMTQ7CiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCiAgICAvLyBodHRwczovL2J1Z3ppbC5sYS81NjEzNjEKICAgIHJldHVybiBmdW5jdGlvbiAoZm9udG5hbWUsIHRleHQpIHsKICAgICAgY29udGV4dC5mb250ID0gJ2JvbGQgJyArIGZvbnRzaXplICsgJ3B4ICcgKyBmb250bmFtZTsKICAgICAgcmV0dXJuIGNvbnRleHQubWVhc3VyZVRleHQodGV4dCkud2lkdGg7CiAgICB9OwogIH0oKSk7CgogIGNvbnN0IHNhbXBsZVRleHRXaWR0aCA9IGZ1bmN0aW9uIChmb250bmFtZSkgewogICAgY29uc3Qgc2FtcGxlVGV4dCA9IFsKICAgICAgJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnLAogICAgICAnNzUzMTkwMjQ2OCcsCiAgICAgICcsLiEtJywKICAgICAgJ+WkqeWcsOeOhOm7hO+8jOWuh+Wumea0quiNkuOAgicsCiAgICAgICfnn6XmiYDlhYjlvozvvIzliYfov5HpgZPnn6PjgIInLAogICAgXS5qb2luKCcnKTsKICAgIHJldHVybiB0ZXh0V2lkdGgoZm9udG5hbWUsIHNhbXBsZVRleHQpOwogIH07CgogIGNvbnN0IGJhc2ljRm9udHMgPSBbCiAgICAnbW9ub3NwYWNlJywgJ3NhbnMtc2VyaWYnLCAnc2FucycsICdTeW1ib2wnLCAnQXJpYWwnLCAnRml4ZWQnLAogICAgJ1RpbWVzJywgJ1RpbWVzIE5ldyBSb21hbicsICflrovkvZMnLCAn6buR5L2TJywgJ01pY3Jvc29mdCBZYUhlaScsCiAgXTsKCiAgY29uc3Qgc2V0dXBCYXNlbGluZSA9IGZ1bmN0b29scy5vbmNlKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBiYXNpY0ZvbnRzLm1hcChmb250bmFtZSA9PiBzYW1wbGVUZXh0V2lkdGgoZm9udG5hbWUpKTsKICB9KTsKCiAgY29uc3QgY2hlY2tGb250ID0gYXN5bmMgZnVuY3Rpb24gKGNzc05hbWUpIHsKICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOwogICAgY29uc3QgYmFzZWxpbmUgPSBzZXR1cEJhc2VsaW5lKCk7CiAgICByZXR1cm4gYmFzaWNGb250cy5zb21lKChmb250bmFtZSwgaW5kZXgpID0+ICgKICAgICAgc2FtcGxlVGV4dFdpZHRoKGAke2Nzc05hbWV9LCR7Zm9udG5hbWV9YCkgIT09IGJhc2VsaW5lW2luZGV4XQogICAgKSk7CiAgfTsKCiAgY29uc3QgY2hlY2tBbGxGb250cyA9IGZ1bmN0b29scy5vbmNlKGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IGNoZWNrbGlzdCA9IHsKICAgICAgd2VzdDogWwogICAgICAgIFsnVGltZXMnLCAnVGltZXMnXSwKICAgICAgICBbJyJUaW1lcyBOZXcgUm9tYW4iJywgJ1RpbWVzIE5ldyBSb21hbiddLAogICAgICAgIFsnR2VvcmdpYScsICdHZW9yZ2lhJ10sCiAgICAgICAgWydBcmlhbCcsICdBcmlhbCddLAogICAgICAgIFsnSGVsdmV0aWNhJywgJ0hlbHZldGljYSddLAogICAgICAgIFsnVmVyZGFuYScsICdWZXJkYW5hJ10sCiAgICAgICAgWyciLlNGTlNEaXNwbGF5LVJlZ3VsYXIiJywgJ1NhbiBGcmFuY2lzY28nXSwKICAgICAgXSwKICAgICAgY2hpbmVzZTogWwogICAgICAgIFsnIlNpbVN1biIsICLlrovkvZMiJywgJ+S4reaYk+Wui+S9kyddLAogICAgICAgIFsnIkhlaXRpIFNDIiwgIum7keS9ky3nroAiJywgJ+m7keS9ky3nroAnXSwKICAgICAgICBbJyJQaW5nRmFuZyBTQyIsICLoi7nmlrkt566AIicsICfoi7nmlrkt566AJ10sCiAgICAgICAgWyciU1RIZWl0aSIsICLljY7mlofpu5HkvZMiJywgJ+WNjuaWh+m7keS9kyddLAogICAgICAgIFsnIkhpcmFnaW5vIFNhbnMgR0IiLCAi5Yas6Z2S6buR5L2T566A5L2T5Lit5paHIicsICflhqzpnZLpu5HkvZMnXSwKICAgICAgICBbJyJNaWNyb3NvZnQgWWFIZWkiLCAi5b6u6L2v6ZuF6buRIicsICflvq7ova/pm4Xpu5EnXSwKICAgICAgICBbJyJEZW5nWGlhbiIsICLnrYnnur8iJywgJ+etiee6vyddLAogICAgICAgIFsnIldlblF1YW5ZaSBaZW4gSGVpIiwgIuaWh+aziempv+ato+m7kSInLCAn5paH5rOJ6am/5q2j6buRJ10sCiAgICAgICAgWyciV2VuUXVhbllpIE1pY3JvIEhlaSIsICLmlofms4npqb/lvq7nsbPpu5EiJywgJ+aWh+aziempv+W+ruexs+m7kSddLAogICAgICAgIFsnIk5vdG8gU2FucyBDSksgU0MiLCAiU291cmNlIEhhbiBTYW5zIFNDIiwgIuaAnea6kOm7keS9kyBTQyInLCAn5oCd5rqQ6buR5L2TJ10sCiAgICAgICAgWyciTm90byBTZXJpZiBDSksgU0MiLCAiU291cmNlIEhhbiBTZXJpZiBTQyIsICLmgJ3mupDlrovkvZMgU0MiJywgJ+aAnea6kOWui+S9kyddLAogICAgICAgIFsnIlNpbUthaSIsICLmpbfkvZMiJywgJ+S4reaYk+alt+S9kyddLAogICAgICAgIFsnIlBNaW5nTGlVIiwgIuaWsOe0sOaYjumrlCInLCAn5paw57Sw5piO6auUJ10sCiAgICAgICAgWyciTWluZ0xpVSIsICLntLDmmI7pq5QiJywgJ+e0sOaYjumrlCddLAogICAgICAgIFsnIkhlaXRpIFRDIiwgIum7kemrlC3nuYEiJywgJ+m7kemrlC3nuYEnXSwKICAgICAgICBbJyJQaW5nRmFuZyBUQyIsICLomIvmlrkt57mBIicsICfomIvmlrkt57mBJ10sCiAgICAgICAgWyciUGluZ0ZhbmcgSEsiLCAi6JiL5pa5Lea4ryInLCAn6JiL5pa5Lea4ryddLAogICAgICAgIFsnIkxpSGVpIFBybyBNZWRpdW0iLCAi5YS36buRIFBybyInLCAn5YS36buRIFBybyddLAogICAgICAgIFsnIk1pY3Jvc29mdCBKaGVuZ0hlaSIsICLlvq7ou5/mraPpu5Hpq5QiJywgJ+W+rui7n+ato+m7kemrlCddLAogICAgICAgIFsnIk5vdG8gU2FucyBDSksgVEMiLCAiU291cmNlIEhhbiBTYW5zIFRDIiwgIuaAnea6kOm7kemrlCBUQyInLCAn5oCd5rqQ6buR6auUJ10sCiAgICAgICAgWyciTm90byBTZXJpZiBDSksgVEMiLCAiU291cmNlIEhhbiBTZXJpZiBUQyIsICLmgJ3mupDlrovpq5QgVEMiJywgJ+aAnea6kOWui+mrlCddLAogICAgICAgIFsnIkRGS2FpLVNCIiwgIkJpYXVLYWkiLCAi5qiZ5qW36auUIicsICfmqJnmpbfpq5QnXSwKICAgICAgXSwKICAgIH07CiAgICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhjaGVja2xpc3QpLm1hcChhc3luYyBrZXkgPT4gewogICAgICBjb25zdCBhdmFpbGFibGUgPSBhd2FpdCBQcm9taXNlLmFsbChjaGVja2xpc3Rba2V5XS5tYXAoKFtjc3NOYW1lXSkgPT4gY2hlY2tGb250KGNzc05hbWUpKSk7CiAgICAgIGNoZWNrbGlzdFtrZXldID0gY2hlY2tsaXN0W2tleV0uZmlsdGVyKChmb250LCBpbmRleCkgPT4gYXZhaWxhYmxlW2luZGV4XSk7CiAgICB9KSk7CiAgICByZXR1cm4gY2hlY2tsaXN0OwogIH0pOwoKCiAgZm9udExpc3QuZ2V0ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGNoZWNrQWxsRm9udHMoKTsKICB9OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiByZXBsYWNlbWVudCBvZiB5YW9mYW5nOi8vY29udGVudC9iYWNrZW5kL3ZpZXdpbWFnZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGNvbnN0IGltYWdlVmlld2VyID0geWF3Zi5pbWFnZVZpZXdlciA9IHt9OwoKICBpMThuLnZpZXdPcmlnaW5hbFRpdGxlID0gewogICAgY246ICfmn6XnnIvlm77niYcgLSBZQVdGJywKICAgIHR3OiAn5qqi6KaW5ZyW54mHIC0gWUFXRicsCiAgICBlbjogJ1ZpZXcgSW1hZ2VzIC0gWUFXRicsCiAgfTsKCiAgY29uc3QgcGFnZSA9IGluZm8gPT4gYAo8IURPQ1RZUEUgaHRtbD4KPGh0bWw+CjxoZWFkPjxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPjx0aXRsZT4ke2kxOG4udmlld09yaWdpbmFsVGl0bGV9PC90aXRsZT48c3R5bGU+CiAgYm9keSwgI2Nob3NlIHsgYmFja2dyb3VuZDogIzIyMjsgfQogIGJvZHksIGJvZHkgKiB7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IHVzZXItc2VsZWN0OiBub25lOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IH0KICAjdmlld2VyIHsgYmFja2dyb3VuZDogaHNsKDAsIDAlLCA5MCUpOyB9CiAgLm5vcm1hbCAjdmlld2VyIHsgd2lkdGg6IGF1dG87IGhlaWdodDogYXV0bzsgY3Vyc29yOiBhdXRvOyB9CiAgLm92ZXIgI3ZpZXdlci5sYXJnZSB7IHdpZHRoOiBhdXRvOyBoZWlnaHQ6IGF1dG87IGN1cnNvcjogem9vbS1vdXQ7IH0KICAub3ZlciAjdmlld2VyLmZpdCB7IG1heC13aWR0aDogMTAwdnc7IG1heC1oZWlnaHQ6IGNhbGMoMTAwJSAtIDIwcHgpOyBjdXJzb3I6IHpvb20taW47IH0KICAjY29udGFpbmVyIHsgdG9wOiAwOyBvdmVyZmxvdzogYXV0bzsgd2lkdGg6IDEwMHZ3OyBoZWlnaHQ6IGNhbGMoMTAwdmggLSAxMDFweCk7IH0KICAjY29udGFpbmVyLmxlZnQsICNjb250YWluZXIubGVmdCAjdmlld2VyIHsgY3Vyc29yOiB1cmwoImh0dHBzOi8vaW1nLnQuc2luYWpzLmNuL3Q2L3N0eWxlL2ltYWdlcy9jb21tb24vcGljX3ByZXYuY3VyIiksIGF1dG87IH0KICAjY29udGFpbmVyLnJpZ2h0LCAjY29udGFpbmVyLnJpZ2h0ICN2aWV3ZXIgeyBjdXJzb3I6IHVybCgiaHR0cHM6Ly9pbWcudC5zaW5hanMuY24vdDYvc3R5bGUvaW1hZ2VzL2NvbW1vbi9waWNfbmV4dC5jdXIiKSwgYXV0bzsgfQogIC5zaW5nbGUgI2NvbnRhaW5lciwgLnNpbmdsZSAjaW1nYXJlYSB7IGhlaWdodDogMTAwdmg7IH0KICAjaW1nYXJlYSB7IGRpc3BsYXk6IHRhYmxlLWNlbGw7IHBvc2l0aW9uOiByZWxhdGl2ZTsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgdGV4dC1hbGlnbjogY2VudGVyOyB3aWR0aDogMTAwdnc7IGhlaWdodDogY2FsYygxMDB2aCAtIDEwMXB4KTsgfQogICNjaG9zZSB7IHBvc2l0aW9uOiBmaXhlZDsgY2xlYXI6IGJvdGg7IHdpZHRoOiAxMDAlOyBib3R0b206IDA7IGhlaWdodDogMTAwcHg7IG92ZXJmbG93OiBhdXRvOyBvdmVyZmxvdy14OiBoaWRkZW47IGJvcmRlci10b3A6IDFweCBzb2xpZCAjYWFhOyB9CiAgLnNpbmdsZSAjY2hvc2UgeyBkaXNwbGF5OiBub25lOyB9CiAgI2Nob3NlIGEgeyBkaXNwbGF5OiBibG9jazsgaGVpZ2h0OiA4MHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHdpZHRoOiA4MHB4OyBmbG9hdDogbGVmdDsgbWFyZ2luOiAxMHB4OyB9CiAgI2Nob3NlIGEuY3VycmVudCB7IG91dGxpbmU6IDJweCBzb2xpZCByZWQ7IH0KICAjY2hvc2UgaW1nIHsgbWF4LWhlaWdodDogODBweDsgbWF4LXdpZHRoOiA4MHB4OyB9CiAgQC1tb3otZG9jdW1lbnQgdXJsLXByZWZpeCgpIHsKICAgIGJvZHkgeyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImNocm9tZTovL2dsb2JhbC9za2luL21lZGlhL2ltYWdlZG9jLWRhcmtub2lzZS5wbmciKTsgIH0KICAgICN2aWV3ZXIgeyBiYWNrZ3JvdW5kOiBoc2woMCwgMCUsIDkwJSkgdXJsKCJjaHJvbWU6Ly9nbG9iYWwvc2tpbi9tZWRpYS9pbWFnZWRvYy1saWdodG5vaXNlLnBuZyIpIHJlcGVhdCBzY3JvbGwgMCAwOyB9CiAgfQo8L3N0eWxlPjxzY3JpcHQ+Y29uc3QgaW5mbyA9ICR7SlNPTi5zdHJpbmdpZnkoaW5mbyl9Ozwvc2NyaXB0PjwvaGVhZD4KPGJvZHk+PGRpdiBpZD0iY29udGFpbmVyIiB0YWJpbmRleD0iMSI+PGRpdiBpZD0iaW1nYXJlYSIgdGFiaW5kZXg9Ii0xIj48aW1nIGlkPSJ2aWV3ZXIiIGNsYXNzPSJsYXJnZSIgLz48L2Rpdj48L2Rpdj48ZGl2IGlkPSJjaG9zZSIgdGFiaW5kZXg9Ii0xIj48c2NyaXB0PgogIGluZm8uaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGltYWdlLCBpKSB7CiAgICBjb25zdCB1cmwgPSBpbWFnZS5yZXBsYWNlKC9sYXJnZS8sICdzcXVhcmUnKTsKICAgIGRvY3VtZW50LndyaXRlKCc8YSBpZD0iaW1nJyArIGkgKyAnIiBocmVmPSJqYXZhc2NyaXB0OjsiIG9uY2xpY2s9InJldHVybiBnb3RvKCcgKyBpICsgJykgJiYgZmFsc2UiPjxpbWcgc3JjPSInICsgdXJsICsgJyI+PC9hPicpOwogIH0pOwo8L3NjcmlwdD48L2Rpdj48c2NyaXB0PgogIGZ1bmN0aW9uIHJlc2l6ZSgpIHsKICAgIGNvbnN0IHdpZHRoID0gdmlld2VyLm5hdHVyYWxXaWR0aDsKICAgIGNvbnN0IGhlaWdodCA9IHZpZXdlci5uYXR1cmFsSGVpZ2h0OwogICAgaWYgKHdpZHRoID4gY29udGFpbmVyLmNsaWVudFdpZHRoIHx8IGhlaWdodCA+IGNvbnRhaW5lci5jbGllbnRIZWlnaHQpIGltZ2FyZWEuY2xhc3NOYW1lID0gJ292ZXInOwogICAgZWxzZSBpbWdhcmVhLmNsYXNzTmFtZSA9ICdub3JtYWwnOwogICAgZm9jdXMoKTsKICB9CiAgZnVuY3Rpb24gc2hvdygpIHsKICAgIGNvbnN0IHVybCA9IGluZm8uaW1hZ2VzW2luZm8uY3VycmVudF07CiAgICBpZiAodmlld2VyLnNyYyA9PT0gdXJsKSByZXR1cm47CiAgICB2aWV3ZXIuc3JjID0gJyc7CiAgICB2aWV3ZXIuc3JjID0gdXJsOwogICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IDA7CiAgICBjb250YWluZXIuc2Nyb2xsTGVmdCA9IDA7CiAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNjaG9zZSBhJykpLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKGEuaWQgPT09ICdpbWcnICsgaW5mby5jdXJyZW50KSBhLmNsYXNzTmFtZSA9ICdjdXJyZW50JzsKICAgICAgZWxzZSBhLmNsYXNzTmFtZSA9ICcnOwogICAgfSk7CiAgICBmb2N1cygpOwogIH0KICBmdW5jdGlvbiBmb2N1cygpIHsgY29udGFpbmVyLmZvY3VzKCk7IH0KICBpZiAoaW5mby5pbWFnZXMubGVuZ3RoID09PSAxKSBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSA9ICdzaW5nbGUnOwogIGZ1bmN0aW9uIHByZXZJbWcoKSB7IGdvdG8oaW5mby5jdXJyZW50IC0gMSk7IH0KICBmdW5jdGlvbiBuZXh0SW1nKCkgeyBnb3RvKGluZm8uY3VycmVudCArIDEpOyB9CiAgZnVuY3Rpb24gZ290byhuKSB7CiAgICB3aGlsZSAobiA8IDApIG4gKz0gaW5mby5pbWFnZXMubGVuZ3RoOwogICAgbiA9IG4gJSBpbmZvLmltYWdlcy5sZW5ndGg7CiAgICBpbmZvLmN1cnJlbnQgPSBuOwogICAgc2hvdygpOwogIH0KICBmdW5jdGlvbiBjaGVja0xSKHgpIHsKICAgIGlmIChpbmZvLmltYWdlcy5sZW5ndGggPT09IDEpIHJldHVybiAnbWlkJzsKICAgIGxldCBwb3MgPSAnbWlkJywgdyA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDsKICAgIGlmICh4IDwgMTAwICYmIHggPCB3ICogMC4yKSBwb3MgPSAnbGVmdCc7CiAgICBpZiAoeCA+IHcgLSAxMDAgJiYgeCA+IHcgKiAwLjgpIHBvcyA9ICdyaWdodCc7CiAgICBpZiAoY29udGFpbmVyLmNsYXNzTmFtZSAhPT0gcG9zKSBjb250YWluZXIuY2xhc3NOYW1lID0gcG9zOwogICAgcmV0dXJuIHBvczsKICB9CiAgZnVuY3Rpb24gaW5pdEV2ZW50cygpIHsKICAgIHZpZXdlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IHNob3coKTsgc2V0VGltZW91dChyZXNpemUsIDApOyB9OwogICAgaW1nYXJlYS5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uIChlKSB7IGNoZWNrTFIoZS5jbGllbnRYKTsgfTsKICAgIGltZ2FyZWEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICBjb25zdCBwb3MgPSBjaGVja0xSKGUuY2xpZW50WCk7CiAgICAgIGlmIChwb3MgPT09ICdsZWZ0JykgcHJldkltZygpOyBlbHNlIGlmIChwb3MgPT09ICdyaWdodCcpIG5leHRJbWcoKTsgZWxzZSByZXR1cm4gdHJ1ZTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgZm9jdXMoKTsKICAgIH0sIHRydWUpOwogICAgdmlld2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICBpZiAoaW1nYXJlYS5jbGFzc05hbWUgPT09ICdub3JtYWwnKSByZXR1cm47CiAgICAgIGlmICh2aWV3ZXIuY2xhc3NOYW1lID09PSAnbGFyZ2UnKSB2aWV3ZXIuY2xhc3NOYW1lID0gJ2ZpdCc7CiAgICAgIGVsc2Ugdmlld2VyLmNsYXNzTmFtZSA9ICdsYXJnZSc7CiAgICB9KTsKICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHJlc2l6ZTsKICAgIHdpbmRvdy5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkgewogICAgICBjb25zdCBrZXkgPSBlLmtleUNvZGUsIG4gPSBrZXkgJiAxNTsKICAgICAgaWYgKGtleSA9PT0gMzMpIHByZXZJbWcoKTsgZWxzZSBpZiAoa2V5ID09PSAzNCkgbmV4dEltZygpOwogICAgICBlbHNlIGlmIChbNDgsIDk2XS5pbmRleE9mKGtleSAmIC0xNikgIT09IC0xKSB7CiAgICAgICAgaWYgKG4gPiAwICYmIG4gPD0gaW5mby5pbWFnZXMubGVuZ3RoKSBnb3RvKG4gLSAxKTsKICAgICAgfSBlbHNlIHJldHVybjsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgfTsKICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IHNob3coKTsgZm9jdXMoKTsgfTsKICAgIGNvbnRhaW5lci5vbmJsdXIgPSBmdW5jdGlvbiAoKSB7IHNldFRpbWVvdXQoZm9jdXMsIDApOyB9OwogIH0KICBpbml0RXZlbnRzKCk7Cjwvc2NyaXB0PjwvYm9keT4KPC9odG1sPgpgOwoKICBpbWFnZVZpZXdlci5vcGVuID0gZnVuY3Rpb24gKHsgaW1hZ2VzLCBjdXJyZW50IH0pIHsKICAgIGNvbnN0IGh0bWwgPSBwYWdlKHsgaW1hZ2VzLCBjdXJyZW50OiBjdXJyZW50IC0gMSB9KTsKICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbaHRtbF0sIHsgdHlwZTogJ3RleHQvaHRtbCcgfSk7CiAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgd2luZG93Lm9wZW4odXJsKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IH0sIDMwMDApOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIGN1c3RvbSBpbXBsZW1lbnRhdGlvbiBiYWNrZW5kL2V4dGVybmFsTWVudQo7IChmdW5jdGlvbiAoKSB7CiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGV4dGVybmFsTWVudSA9IHlhd2YuZXh0ZXJuYWxNZW51ID0ge307CgogIGV4dGVybmFsTWVudS5hZGQgPSBmdW5jdGlvbiAoeyB0aXRsZSwgY2FsbGJhY2sgfSkgewogICAgR00ucmVnaXN0ZXJNZW51Q29tbWFuZCh0aXRsZSwgY2FsbGJhY2spOwogIH07Cn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gaW1wbGVtZW50YXRpb24gZm9yIGNoYXQgcGFnZQo7IChmdW5jdGlvbiAoKSB7Ci8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqLwppZiAoIS9eaHR0cHM6XC9cL2FwaS53ZWliby5jb21cL2NoYXQvLnRlc3QobG9jYXRpb24uaHJlZikpIHJldHVybjsKLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L2NoYXQvaW5pdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKCiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdCA9IHt9OwoKICBpbml0LnVzZXJDb25maWcgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgIGluaXQuc2V0VXNlckRhdGEgPSBhc3luYyBmdW5jdGlvbiAodXNlckRhdGEpIHsKICAgICAgY29uc3QgaWQgPSB1c2VyRGF0YS5pZDsKICAgICAgYXdhaXQgY29uZmlnLmluaXQoaWQpOwogICAgICByZXNvbHZlKGNvbmZpZy51c2VyKTsKICAgIH07CiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHJlcGxhY2VtZW50IG9mIHlhb2Zhbmc6Ly9jb250ZW50L2NoYXQvaW5qZWN0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CgogIDsgKGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHVzZXJEYXRhVXJsID0gJy93ZWJpbS8yL2FjY291bnQvcHJvZmlsZS9iYXNpYy5qc29uP3NvdXJjZT0yMDk2Nzg5OTMmdD0nICsgRGF0ZS5ub3coKTsKICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZmV0Y2godXNlckRhdGFVcmwpLnRoZW4ocmVzcCA9PiByZXNwLmpzb24oKSk7CiAgICBpbml0LnNldFVzZXJEYXRhKHVzZXJEYXRhKTsKICB9KCkpOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9jaGF0L3J1bGUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgOyAoYXN5bmMgZnVuY3Rpb24gYXZhdGFyU2hhcGUoKSB7CiAgICBjb25zdCB1c2VyQ29uZmlnID0gYXdhaXQgaW5pdC51c2VyQ29uZmlnOwogICAgY29uc3QgaXNFbmFibGVkID0gdXNlckNvbmZpZy5rZXkoJ2xheW91dF9hdmF0YXJfc2hhcGUnKS5nZXQoKTsKICAgIGlmICghaXNFbmFibGVkKSByZXR1cm47CiAgICBjb25zdCBzaGFwZSA9IHVzZXJDb25maWcua2V5KCdsYXlvdXRfYXZhdGFyX3NoYXBlLnNoYXBlJykuZ2V0KCk7CiAgICBpZiAoc2hhcGUgPT09ICdzcXVhcmUnKSB7CiAgICAgIC8vIOaYr+eahO+8jOS7luS7rOWwseaYr+acieeahOaLvOaIkOS6hiBhdmF0YXIg5pyJ55qE5ou85oiQ5LqGIGF2YXRvciDvvJvpobrkvr/kuIDor7TvvIzliY3pnaLkuIDkuKrmi7zlvpflr7kKICAgICAgY3NzLmFwcGVuZChgCiNhcHAgLmF2YXRhciwgI2FwcCAuYXZhdG9yIHsgYm9yZGVyLXJhZGl1czogMDsgfQpgKTsKICAgIH0KICB9KCkpOwoKICBjb25zdCBuZXdUYWJEZWZhdWx0ID0gZnVuY3Rpb24gKCkgewogICAgY29uc3QgYmFzZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Jhc2UnKTsKICAgIGJhc2UudGFyZ2V0ID0gJ19ibGFuayc7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhc2UpOwogIH07CiAgaWYgKHNlbGYgIT09IHRvcCkgewogICAgaWYgKGRvY3VtZW50LmJvZHkpIHsKICAgICAgbmV3VGFiRGVmYXVsdCgpOwogICAgfSBlbHNlIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGV2ZW50ID0+IHsKICAgICAgICBuZXdUYWJEZWZhdWx0KCk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgY29uc3QgZGlzYWJsZVVubG9hZFByb21wdCA9IGZ1bmN0aW9uICgpIHsKICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIGRpc2FibGVCZWZvcmVVbmxvYWQoKSB7CiAgICAgIGlmICghd2luZG93Lm9uYmVmb3JldW5sb2FkKSB7CiAgICAgICAgc2V0VGltZW91dChkaXNhYmxlQmVmb3JlVW5sb2FkLCAxMDApOwogICAgICB9IGVsc2UgewogICAgICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IG51bGw7CiAgICAgICAgd2luZG93Lm9udW5sb2FkID0gbnVsbDsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgOyAoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgY29uc3QgdXNlckNvbmZpZyA9IGF3YWl0IGluaXQudXNlckNvbmZpZzsKCiAgICBjb25zdCBydWxlcyA9IFt7CiAgICAgIGtleTogJ2NsZWFuX2ljb25zX2FwcHJvdmUnLAogICAgICBhaW5pdDogKCkgPT4gY3NzLmFwcGVuZCgnLmF2YXRvci1ib3ggLm0taWNvbiBpbWdbc3JjJD0iZ2c9PSJdIHsgZGlzcGxheTogbm9uZTsgfScpLAogICAgfSwgewogICAgICBrZXk6ICdjbGVhbl9pY29uc19hcHByb3ZlX2NvJywKICAgICAgYWluaXQ6ICgpID0+IGNzcy5hcHBlbmQoJy5hdmF0b3ItYm94IC5tLWljb24gaW1nW3NyYyQ9IlFtQ0MiXSB7IGRpc3BsYXk6IG5vbmU7IH0nKSwKICAgIH0sIHsKICAgICAga2V5OiAnY2xlYW5faWNvbnNfY2x1YicsCiAgICAgIGFpbml0OiAoKSA9PiBjc3MuYXBwZW5kKCcuYXZhdG9yLWJveCAubS1pY29uIGltZ1tzcmMkPSJDWUlJIl0geyBkaXNwbGF5OiBub25lOyB9JyksCiAgICB9LCB7CiAgICAgIGtleTogJ2NsZWFuX2ljb25zX3ZfZ2lybCcsCiAgICAgIGFpbml0OiAoKSA9PiBjc3MuYXBwZW5kKCcuYXZhdG9yLWJveCAubS1pY29uIGltZ1tzcmMkPSJZSUk9Il0geyBkaXNwbGF5OiBub25lOyB9JyksCiAgICB9LCB7CiAgICAgIGtleTogJ2NsZWFuX2ljb25zX2JpZ2Z1bicsCiAgICAgIGFpbml0OiAoKSA9PiBjc3MuYXBwZW5kKCcjYXBwIC5pY29uLWFyZWEgPiBpLnRmIHsgZGlzcGxheTogbm9uZTsgfScpLAogICAgfV07CiAgICBydWxlcy5mb3JFYWNoKCh7IGtleSwgYWluaXQgfSkgPT4gewogICAgICBjb25zdCBpc0VuYWJsZWQgPSB1c2VyQ29uZmlnLmtleShrZXkpLmdldCgpOwogICAgICBpZiAoaXNFbmFibGVkKSBhaW5pdCgpOwogICAgfSk7CgogICAgaWYgKHNlbGYgIT09IHRvcCB8fCB1c2VyQ29uZmlnLmtleSgnY2hhdF9wYWdlX2Rpc2FibGVfdW5sb2FkX3Byb21wdCcpLmdldCgpKSB7CiAgICAgIGRpc2FibGVVbmxvYWRQcm9tcHQoKTsKICAgIH0KCiAgfSgpKTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgp0aHJvdyBuZXcgRXJyb3IoJ1lBV0YgfCBjaGF0IHBhZ2UgZm91bmQsIHNraXAgZm9sbG93aW5nIGV4ZWN1dGlvbnMnKTsKLyogZXNsaW50LWVuYWJsZSBpbmRlbnQgKi8KfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlc2V0L3J1bGUuanMKLyoqCiAqIOi/meS4quaWh+S7tueUqOS6juaPj+i/sOS4gOadoeinhOWImQogKgogKiB5YXdmLnJ1bGUuPHJ1bGVUeXBlPihkZXRhaWxzOiBvYmplY3QpIOaWsOW7uuS4gOadoeinhOWImQogKiA8cnVsZVR5cGU+OgogKiAgIFJ1bGU6IOaZrumAmuinhOWIme+8jOaZrumAmuinhOWImeW6lOW9k+WxnuS6juS4gOS4qiBHcm91cAogKiAgIFRleHQ6IOe6r+aWh+acrO+8iOS7heeUqOS6juWxleekuu+8jOS4gOiIrOS4jeaJv+aLheWKn+iDve+8ie+8jOe6r+aWh+acrOaYr+aZrumAmuinhOWImeeahOS4gOS4queJueS+iwogKiAgIFRhYjog5qCH562+6aG177yM5piv5pyA6aG25bGC55qE6KeE5YiZ77yM5YW25Lit5YyF5ZCr6Iul5bmyIEdyb3VwCiAqICAgR3JvdXA6IOinhOWImeWIhue7hO+8iOWwj+agh+mimO+8ie+8jOWxnuS6juS4gOS4qiBUYWLvvIzlhbbkuK3ljIXlkKvoi6XlubIgUnVsZQogKgogKiDmma7pgJrop4TliJkgUnVsZSDmmK/kuIDkuKogQm9vbGVhbkNvbmZpZ0l0ZW3vvIzkvJrpu5jorqTluKbkuIDkuKrlvIDlhbMKICogICDlpoLmnpzkuI3luIzmnJvmmL7npLrlvIDlhbPvvIzliJnpnIDopoHlnKggZGV0YWlscyDph4zmjIflrpogYWx3YXlzOiB0cnVlIOatpOaXtuiupOS4ugogKgogKiBDb25maWdJdGVtIOeUqOS6juaPj+i/sOS4gOS4queVjOmdouWFg+e0oO+8jOaIluS4gOS4quWvueW6lOeahOiuvue9rumhuQogKiB5YXdmLnJ1bGUuY2xhc3MuQ29uZmlnSXRlbSDnmoTmnoTpgKDlh73mlbDkuIDoiKzkuI3pnIDopoHku47lpJbpg6josIPnlKgKICog5LiA5p2hIFJ1bGUg5oiW6ICFIFJ1bGUg55qEIHJlZiDlsZ7mgKfvvIzmmK/kuIDkuKogQ29uZmlnSXRlbQogKiByZWYg5bGe5oCn5LiL55qEIENvbmZpZ0l0ZW0g55qE57G75Z6L55Sx5p6E6YCg5pe25a+56LGh55qEIHR5cGUg5bGe5oCn5Yaz5a6a77yaCiAqICAgYm9vbGVhbjog5aSN6YCJ5qGGCiAqICAgc2VsZWN0OiDkuIvmi4nljZXpgInmoYYKICogICBudW1iZXI6IOaVsOWtl+i+k+WFpeahhgogKiAgIHJhbmdlOiDmlbDlrZfovpPlhaXmoYblkozkuIDkuKrojIPlm7TpgInmi6kKICogICBidWJibGU6IOaPkOekuuaWh+WtlwogKiAgIHN0cmluZ3M6IOWkmuS4quWtl+espuS4sgogKiAgIHJlZ2V4ZW46IOWkmuS4quato+WImeihqOi+vuW8jwogKiAgIHVzZXJzOiDlpJrkuKrnlKjmiLfvvIhpZO+8iQogKiAgIHVzZXJuYW1lczog5aSa5Liq55So5oi35ZCNCiAqICAgdG9waWNzOiDlpJrkuKror53popgKICogICBrZXk6IOS4gOS4qumUruebmOaMiemUrgogKgogKiBDb25maWdJdGVtIOeahOWxnuaAp+WSjOaWueazleWMheaLrO+8mgogKiDmmL7npLrnm7jlhbMKICogICB0ZW1wbGF0ZSgpIO+8iOWPr+mAie+8iSDnlKjkuo7mmL7npLrnmoTmqKHmnb8KICogICByZW5kZXIoaXNSb290OiBib29sZWFuKSDvvIjlj6/pgInvvIkg5pi+56S655qE5Ye95pWw77yM5aaC5p6c57y655yB5YiZ5L2/55SoIHRlbXBsYXRlIOWxnuaAp+agueaNruinhOWImeeUn+aIkAogKiAgIGFmdGVyUmVuZGVyKGNvbnRhaW5lcjogRWxlbWVudCkg77yI5Y+v6YCJ77yJIOWcqOiwg+eUqCByZW5kZXIg5ZCO5Y+v55So6L+Z5Liq5Ye95pWw5a+55Lqn55Sf55qEIERPTSDlgZrov5vkuIDmraXkv67mlLkKICogICB0ZXh0KGlzUm9vdDogYm9vbGVhbikg77yI5Y+v6YCJ77yJIOaYvuekuueahOaWh+acrO+8jOWmguaenOe8uuecgeWImeS9v+eUqCB0ZW1wbGF0ZSDmiJYgcmVuZGVyIOagueaNruinhOWImeeUn+aIkAogKiDorr7nva7nm7jlhbMKICogICBpbml0aWFsKCk6IGFueSDorr7nva7nmoTpu5jorqTlgLwKICogICBub3JtYWxpemUodmFsdWU6IGFueSk6IGFueSDlr7norr7nva7lgLzov5vooYzop4TojIPljJYKICogICBnZXRDb25maWcoKTogYW55IOiOt+WPluiuvue9rgogKiAgIHNldENvbmZpZyh2YWx1ZTogYW55KTogYW55IOWGmeWFpeaWsOiuvue9rgogKiAgIGFkZENvbmZpZ0xpc3RlbmVyKGNhbGxiYWNrOiAobmV3VmFsdWU6IGFueSwgb2xkVmFsdWU6IGFueSkgPT4gdm9pZCkg5b2T6K6+572u5pS55Y+Y5pe25Zue6LCDCiAqICAgcmVtb3ZlQ29uZmlnTGlzdGVuZXIoY2FsbGJhY2spIOWPlua2iOa3u+WKoOeahOiuvue9ruaUueWPmOeahOWbnuiwgwogKgogKiBCb29sZWFuQ29uZmlnSXRlbSDnu6fmib/oh6ogQ29uZmlnSXRlbSDljIXmi6zlsZ7mgKflkozmlrnms5XvvJoKICogICBhbHdheXMoKTogYm9vbGVhbiA9IGZhbHNlIOWmguaenOivpeWxnuaAp+S4uiB0cnVl77yM6YKj5LmI5pi+56S65pe25LiN5bim5aSN6YCJ5qGG77yM5rKh5pyJ5a+55bqU55qE6K6+572u6aG577yM5qOA5p+l5pe25oC75piv5bey5ZCv55SoCiAqICAgaXNFbmFibGVkKCk6IGJvb2xlYW4g5qOA5p+l5piv5ZCm5bey5ZCv55SoCiAqCiAqIFNlbGVjdENvbmZpZ0l0ZW0g57un5om/6IeqIENvbmZpZ0l0ZW0KICogICDmjIflrpogc2VsZWN0IOWxnuaAp+S4uiBBcnJheTx7IG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9Pu+8jOWPr+S7peeUqOS6jua4suafk+mAieaLqeahhgogKgogKiBOdW1iZXJDb25maWdJdGVtIOe7p+aJv+iHqiBDb25maWdJdGVtCiAqICAg5oyH5a6aIG1pbiwgbWF4LCBzdGVwIOWxnuaAp++8jOexu+WeiyBudW1iZXLvvIzlj6/nlKjkuo7ovpPlhaXkuIDkuKrmlbDlrZcKICoKICogUmFuZ2VDb25maWdJdGVtIOe7p+aJv+iHqiBOdW1iZXJDb25maWdJdGVtCiAqICAg55u45q+UIE51bWJlciDlpJrkuobkuIDkuKrmi5bliqjmnaHku6Xmlrnkvr/ovpPlhaUKICoKICogQnViYmxlQ29uZmlnSXRlbSDnu6fmib/oh6ogQ29uZmlnSXRlbQogKiAgIOS4jeWtmOWCqOaVsOaNru+8jOS7heeUqOadpeWxleekuuS4gOS4quawlOazoeW8ueeqlwogKiAgIOS9v+eUqCBpY29uIOWxnuaAp+aPj+i/sOWbvuagh+exu+Wei++8jOaooeadv+WGheWuueWwhuS8mua4suafk+WIsOawlOazoeS4rQogKgogKiBSdWxlSXRlbSDnu6fmib/oh6ogQm9vbGVhbkNvbmZpZ0l0ZW0g5YyF5ous5bGe5oCn5ZKM5pa55rOV77yaCiAqICAgcGFyZW50IOaehOmAoOaXtuWmguaMh+WumiBwYXJlbnTvvIzliJnkvJrlsIbor6Xop4TliJnliqDlhaXliLDlhbbniLbkurLnmoTlrZDpm4blkIjkuK0KICogICBjaGlsZHJlbjogQXJyYXk8UnVsZUl0ZW0+IOaehOmAoOaXtuiHquWKqOWIneWni+WMlueahOaVsOe7hO+8jOeUqOS6jue7tOaKpOWFtuWtkOmbhuWQiAogKiAgIHR5cGU6IHN0cmluZyA9ICJub3JtYWwiOiDop4TliJnnmoTnsbvlnovvvIznlKjkuo7moIforrAgVGFiIOWSjCBHcm91cAogKgogKiBUYWIsIEdyb3VwIOe7p+aJv+iHqiBSdWxlSXRlbe+8mgogKiAgIOi/meS4pOS4quS8muiHquWKqOW4puaciSBhbHdheXMgPT4gdHJ1Ze+8jOS4lOacieeJueauiueahCB0eXBl77yM5pyJ54m55q6K55qE5riy5p+T6YC76L6RCiAqCiAqIFJ1bGUg57un5om/6IeqIFJ1bGVJdGVt77yM5Zyo5aSW6YOo5p6E6YCg5pe25L2/55SoIHlhd2YucnVsZS5SdWxlIOaehOmAoOWZqOaehOmAoO+8iOaXoOmcgCBuZXcg5YWz6ZSu5a2X77yJ77yM5YyF5ous77yaCiAqICAgY3NzOiBzdHJpbmcgfCAoKSA9PiBzdHJpbmcg6L+Z5p2h6KeE5YiZ5rOo5YaM55qEIENTU++8jOaXoOiuuuinhOWImeaYr+WQpuWQr+eUqOWdh+S8mueUn+aViAogKiAgIGFjc3M6IHN0cmluZyB8ICgpID0+IHN0cmluZyDov5nmnaHop4TliJnms6jlhoznmoQgQ1NT77yM5LuF5ZCv55So6K+l5p2h6KeE5YiZ5ZCO55Sf5pWICiAqICAgaW5pdDogKCkgPT4gdm9pZCDlvZPliJ3lp4vljJbml7bosIPnlKjvvIzml6Dorrrop4TliJnmmK/lkKblkK/nlKjlnYfkvJrnlJ/mlYgKICogICBhaW5pdDogKCkgPT4gdm9pZCDlvZPliJ3lp4vljJbml7bosIPnlKjvvIzku4XlkK/nlKjor6XmnaHop4TliJnlkI7nlJ/mlYgKICoKICogVGV4dCDnu6fmib/oh6ogUnVsZe+8jOWcqOWklumDqOaehOmAoOaXtuS9v+eUqCB5YXdmLnJ1bGUuVGV4dCDmnoTpgKDlmajmnoTpgKDvvIjml6DpnIAgbmV3IOWFs+mUruWtl++8ie+8mgogKiAgIOWunueOsOS6hueJueauiueahOa4suafk+mAu+i+kQogKgogKiB5YXdmLnJ1bGUudGFiczogQXJyYXk8VGFiPiDnlKjkuo7nu7TmiqTmiYDmnInms6jlhoznmoTmoIfnrb7pobUKICogeWF3Zi5ydWxlLnF1ZXJ5KHsKICogICBiYXNlOiBBcnJheTxSdWxlSXRlbT4gPSB5YXdmLnJ1bGUudGFicwogKiB9KTogQXJyYXk8UnVsZT4g55So5LqO5qC55o2u562b6YCJ5p2h5Lu25YiX5Ye65a+55bqU55qE6KeE5YiZCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKCiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3Q7CgogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwogIGNvbnN0IHVpID0gdXRpbC51aTsKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IHByaW9yaXR5ID0gdXRpbC5wcmlvcml0eTsKICBjb25zdCBrZXlib2FyZCA9IHV0aWwua2V5Ym9hcmQ7CgogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGUgPSB7fTsKICBjb25zdCBydWxlcyA9IHlhd2YucnVsZXMgPSB7fTsKICBjb25zdCB0YWJzID0gcnVsZS50YWJzID0gW107CgogIHJ1bGVzLmFsbCA9IG5ldyBNYXAoKTsKICBydWxlLmNsYXNzID0ge307CiAgcnVsZS50eXBlcyA9IHt9OwoKICAvKioKICAgKiDov5nph4znu7TmiqTkuIDkuKrln7rmnKznmoTorr7nva7pobkKICAgKiDmiJHku6zlnKjov5nkuIDlsYLnu7TmiqTvvJoKICAgKiAgIOWfuuS6jiB0ZW1wbGF0ZSDlsZ7mgKfnmoTpgJrnlKjmuLLmn5PpgLvovpEKICAgKiAgIOWfuuS6jiByZWYg5bGe5oCn55qE54i25a2Q5YWz57O777yI55So5LqO5riy5p+T77yJCiAgICogQGNvbnN0cnVjdG9yCiAgICogQHBhcmFtIHtvYmplY3R9IHNlbGYKICAgKi8KICBjb25zdCBCYXNlQ29uZmlnSXRlbSA9IGZ1bmN0aW9uIEJhc2VDb25maWdJdGVtKHNlbGYpIHsKICAgIGlmICghc2VsZi5yZWYpIHNlbGYucmVmID0ge307CiAgICBPYmplY3Qua2V5cyhzZWxmLnJlZikuZm9yRWFjaChrZXkgPT4gewogICAgICBpZiAoc2VsZi5yZWZba2V5XSBpbnN0YW5jZW9mIEJhc2VDb25maWdJdGVtKSByZXR1cm47CiAgICAgIGlmICghc2VsZi5yZWZba2V5XS5pZCkgc2VsZi5yZWZba2V5XS5pZCA9IGtleTsKICAgICAgc2VsZi5yZWZba2V5XSA9IGNvbmZpZ0l0ZW1CdWlsZGVyKHNlbGYucmVmW2tleV0sIHNlbGYpOwogICAgfSk7CiAgICAvLyDlpoLmnpzkvb/nlKggT2JqZWN0LmFzc2lnbiDlsIYgc2VsZiDkuIrnmoTlhoXlrrnmi7fotJ3liLAgdGhpcyDkuIoKICAgIC8vICAg5bCG5Lya5Lii5aSxIHNlbGYg5LiK55qE5omA5pyJ55qEIGdldHRlciAvIHNldHRlcgogICAgLy8gICDkuJTlvZPljp/lnovkuIrmnIkgc2V0dGVyIOaXtuS8muWPkeeUn+mUmeivrwogICAgLy8g5Zug5q2k5oiR5Lus5Li6IHNlbGYg6K6+572u5q2j56Gu55qEIF9fcHJvdG9fX++8jOW5tuebtOaOpei/lOWbniBzZWxmCiAgICAvLyDlj6ropoHlrZDnsbvkuI3lnKggc3VwZXIg5LmL5YmN6K6/6ZeuIHRoaXPvvIzov5nmoLflgZrmmK/lvojlronlhajnmoQKICAgIC8vIOS4gOiIrOS4jeaOqOiNkOi/meenjeWBmuazle+8jOS9huaYr+i/memHjOeUqOi1t+adpeWunuWcqOaYr+aEn+inieWkquWlveS6hgogICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHNlbGYsIE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKSk7CiAgICByZXR1cm4gc2VsZjsKICB9OwogIC8qKgogICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICovCiAgQmFzZUNvbmZpZ0l0ZW0ucHJvdG90eXBlLnRlbXBsYXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJyc7IH07CgogIC8qKiBAcGFyYW0ge2Jvb2xlYW59IGZ1bGxEb20gKi8KICBjb25zdCBwYXJzZVRlbXBsYXRlID0gZnVuY3Rpb24gKGZ1bGxEb20pIHsKICAgIC8qKgogICAgICogQHR5cGVkZWYge3sgdHlwZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH19IFRlbXBsYXRlVG9rZW4KICAgICAqLwogICAgLyoqIEB0eXBlIHsodGVtcGxhdGU6IHN0cmluZykgPT4gQXJyYXk8VGVtcGxhdGVUb2tlbj59ICovCiAgICBjb25zdCB0b2tlbml6ZSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSkgewogICAgICBjb25zdCBwYXJzZVJlZyA9IG5ldyBSZWdFeHAoWwogICAgICAgIFN0cmluZy5yYXdgXHtceyhbXlx9XSspXH1cfWAsIC8vIHt7Y2hpbGR9fQogICAgICAgIFN0cmluZy5yYXdgXFtcWyhbXlxdXSspXF1cXWAsIC8vIFtbcnVsZV1dCiAgICAgICAgU3RyaW5nLnJhd2AoXHxcfHxcfClgLCAvLyB8fCBvciB8CiAgICAgICAgU3RyaW5nLnJhd2AoW15cfFxbXHtcJl0rfCZbXjtdKzspYCwgLy8gdGV4dAogICAgICBdLm1hcChyZWcgPT4gYCg/OiR7cmVnfSlgKS5qb2luKCd8JyksICdnJyk7CiAgICAgIC8qKiBAdHlwZSB7c3RyaW5nP1tdW119ICovCiAgICAgIGNvbnN0IG1hdGNoZXMgPSBbXTsKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICBjb25zdCBtYXRjaCA9IHBhcnNlUmVnLmV4ZWModGVtcGxhdGUpOwogICAgICAgIGlmICghbWF0Y2gpIGJyZWFrOwogICAgICAgIG1hdGNoZXMucHVzaChbLi4ubWF0Y2hdKTsKICAgICAgfQogICAgICBjb25zdCB0b2tlbnMgPSBtYXRjaGVzLm1hcCgoW18sIC4uLnR5cGVkXSkgPT4gewogICAgICAgIGNvbnN0IHR5cGVzID0gWydjaGlsZCcsICdydWxlJywgJ3NwbGl0dGVyJywgJ3RleHQnXTsKICAgICAgICBjb25zdCBpbmRleCA9IHR5cGVkLmZpbmRJbmRleCh4ID0+IHgpOwogICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiB7IHR5cGU6IHR5cGVzW2luZGV4XSwgdmFsdWU6IHR5cGVkW2luZGV4XSB9OwogICAgICB9KS5maWx0ZXIodG9rZW4gPT4gdG9rZW4pOwogICAgICByZXR1cm4gdG9rZW5zOwogICAgfTsKCiAgICAvKiogQHR5cGUgeyh0b2tlbnM6IEFycmF5PFRlbXBsYXRlVG9rZW4+LCBhY2NlcHRUeXBlczogSXRlcmFibGU8c3RyaW5nPikgPT4gQXJyYXk8VGVtcGxhdGVUb2tlbj59ICovCiAgICBjb25zdCBmaWx0ZXJlZFRva2VucyA9IGZ1bmN0aW9uICh0b2tlbnMsIGFjY2VwdFR5cGVzKSB7CiAgICAgIGNvbnN0IHR5cGVzID0gbmV3IFNldChhY2NlcHRUeXBlcyk7CiAgICAgIHJldHVybiB0b2tlbnMuZmlsdGVyKHRva2VuID0+IHRva2VuICYmIHR5cGVzLmhhcyh0b2tlbi50eXBlKSk7CiAgICB9OwoKICAgIC8qKgogICAgICogQHR5cGVkZWYgeyh0b2tlbjogVGVtcGxhdGVUb2tlbiwgcmVmZXJlbmNlOiBOb2RlLCByZWY6IFVpSXRlbUNvbGxlY3Rpb24pID0+IE5vZGV9IFRlbXBsYXRlVG9rZW5SZW5kZXIKICAgICAqLwogICAgLyoqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBUZW1wbGF0ZVRva2VuUmVuZGVyPn0gKi8KICAgIGNvbnN0IHRva2VuUmVuZGVyID0ge307CgogICAgLyoqIEB0eXBlIHtUZW1wbGF0ZVRva2VuUmVuZGVyfSAqLwogICAgdG9rZW5SZW5kZXIuY2hpbGQgPSBmdW5jdGlvbiAodG9rZW4sIHJlZmVyZW5jZSwgcmVmLCBtb2RlKSB7CiAgICAgIGNvbnN0IGNoaWxkID0gcmVmW3Rva2VuLnZhbHVlXTsKICAgICAgaWYgKCFjaGlsZCkgcmV0dXJuIHJlZmVyZW5jZTsKICAgICAgaWYgKG1vZGUgIT09ICd0ZXh0JykgewogICAgICAgIGNvbnN0IGNoaWxkRG9tID0gY2hpbGQuZ2V0UmVuZGVyUmVzdWx0KG1vZGUgPT09ICdyZWN1cnNpdmUnKTsKICAgICAgICBpZiAoY2hpbGREb20gaW5zdGFuY2VvZiBOb2RlKSB7CiAgICAgICAgICByZWZlcmVuY2UuYXBwZW5kQ2hpbGQoY2hpbGREb20pOwogICAgICAgICAgcmV0dXJuIHJlZmVyZW5jZTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjaGlsZERvbSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgcmV0dXJuIGNoaWxkRG9tKHJlZmVyZW5jZSk7CiAgICAgICAgfSBlbHNlIHJldHVybiByZWZlcmVuY2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGNoaWxkLnRleHQoKTsKICAgICAgICByZWZlcmVuY2UuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpOwogICAgICAgIHJldHVybiByZWZlcmVuY2U7CiAgICAgIH0KICAgIH07CiAgICAvKiogQHR5cGUge1RlbXBsYXRlVG9rZW5SZW5kZXJ9ICovCiAgICB0b2tlblJlbmRlci5ydWxlID0gZnVuY3Rpb24gKHRva2VuLCByZWZlcmVuY2UsIHJlZiwgbW9kZSkgewogICAgICBjb25zdCByZWZSdWxlID0gcnVsZXMuYWxsLmdldCh0b2tlbi52YWx1ZSk7CiAgICAgIGlmICghcmVmUnVsZSkgewogICAgICAgIHV0aWwuZGVidWcoJ1JlZmVyZW5jZWQgcnVsZSAlcyBkb2VzIG5vdCBmb3VuZC4nLCB0b2tlbi52YWx1ZSk7CiAgICAgIH0KICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0JykgewogICAgICAgIHJlZmVyZW5jZS5hcHBlbmRDaGlsZChyZWZSdWxlLnRleHQoZmFsc2UpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZWZlcmVuY2UuYXBwZW5kQ2hpbGQocmVmUnVsZS5yZW5kZXIoZmFsc2UpKTsKICAgICAgfQogICAgICByZXR1cm4gcmVmZXJlbmNlOwogICAgfTsKICAgIC8qKiBAdHlwZSB7VGVtcGxhdGVUb2tlblJlbmRlcn0gKi8KICAgIHRva2VuUmVuZGVyLnNwbGl0dGVyID0gZnVuY3Rpb24gKHRva2VuLCByZWZlcmVuY2UsIHJlZiwgbW9kZSkgewogICAgICBjb25zdCBwYXJlbnQgPSByZWZlcmVuY2UucGFyZW50Tm9kZTsKICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGxhYmVsLCByZWZlcmVuY2UubmV4dFNpYmxpbmcpOwogICAgICBpZiAodG9rZW4udmFsdWUgPT09ICd8fCcpIHsKICAgICAgICBjb25zdCBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7CiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShiciwgcmVmZXJlbmNlLm5leHRTaWJsaW5nKTsKICAgICAgfQogICAgICByZXR1cm4gbGFiZWw7CiAgICB9OwogICAgLyoqIEB0eXBlIHtUZW1wbGF0ZVRva2VuUmVuZGVyfSAqLwogICAgdG9rZW5SZW5kZXIudGV4dCA9IGZ1bmN0aW9uICh0b2tlbiwgcmVmZXJlbmNlLCByZWYsIG1vZGUpIHsKICAgICAgY29uc3QgdGV4dCA9IHRva2VuLnZhbHVlLnN0YXJ0c1dpdGgoJyYnKSA/IHsKICAgICAgICAnJmFtcDsnOiAnJicsCiAgICAgIH1bdG9rZW4udmFsdWVdIDogdG9rZW4udmFsdWU7CiAgICAgIHJlZmVyZW5jZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSk7CiAgICAgIHJldHVybiByZWZlcmVuY2U7CiAgICB9OwogICAgLyoqIEB0eXBlIHtBcnJheTxzdHJpbmc+fSAqLwogICAgbGV0IGFjY2VwdFR5cGVzID0gW107CiAgICBjb25zdCBpdGVtUmVuZGVyID0gZnVuY3Rpb24gKHRlbXBsYXRlLCByZWYsIG1vZGUgPSBudWxsKSB7CiAgICAgIGNvbnN0IHR5cGVzID0gbW9kZSAmJiAoYWNjZXB0VHlwZXMgPSB7CiAgICAgICAgbm9ybWFsOiBbJ2NoaWxkJywgJ3NwbGl0dGVyJywgJ3RleHQnXSwKICAgICAgICByZWN1cnNpdmU6IFsnY2hpbGQnLCAnc3BsaXR0ZXInLCAndGV4dCcsICdydWxlJ10sCiAgICAgICAgdGV4dDogWydjaGlsZCcsICd0ZXh0J10sCiAgICAgIH1bbW9kZSA/PyAnbm9ybWFsJ10pIHx8IGFjY2VwdFR5cGVzLmZpbHRlcih0eXBlID0+IHR5cGUgIT09ICdydWxlJyk7CiAgICAgIGNvbnN0IHJlZmVyZW5jZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWl0ZW0nKTsKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJlZmVyZW5jZSk7CiAgICAgIGNvbnN0IHRva2VucyA9IGZpbHRlcmVkVG9rZW5zKHRva2VuaXplKHRlbXBsYXRlKSwgdHlwZXMpOwogICAgICB0b2tlbnMucmVkdWNlKChyZWZlcmVuY2UsIHRva2VuKSA9PiAoCiAgICAgICAgdG9rZW5SZW5kZXJbdG9rZW4udHlwZV0odG9rZW4sIHJlZmVyZW5jZSwgcmVmLCBtb2RlKQogICAgICApLCByZWZlcmVuY2UpOwogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfTsKCiAgICBjb25zdCBydWxlUmVuZGVyID0gZnVuY3Rpb24gKGlzUm9vdCA9IHRydWUpIHsKICAgICAgaWYgKCF0aGlzLnRlbXBsYXRlKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlKCk7CiAgICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmOwogICAgICBjb25zdCBtb2RlID0gZnVsbERvbSA/IGlzUm9vdCA/ICdyZWN1cnNpdmUnIDogJ25vcm1hbCcgOiAndGV4dCc7CiAgICAgIHJldHVybiBpdGVtUmVuZGVyKHRlbXBsYXRlLCByZWYsIG1vZGUpOwogICAgfTsKCiAgICByZXR1cm4gcnVsZVJlbmRlcjsKICB9OwoKICAvKioKICAgKiByZW5kZXIg5piv6YCa55So55qE5Z+65LqOIHRlbXBsYXRlIOeahOa4suafk+mAu+i+kQogICAqLwogIEJhc2VDb25maWdJdGVtLnByb3RvdHlwZS5yZW5kZXIgPSBwYXJzZVRlbXBsYXRlKHRydWUpOwogIC8qKgogICAqIHRleHQg5piv6YCa55So55qE5qOA5p+l5YyF5ZCr5paH5a2X55qE6YC76L6RCiAgICovCiAgQmFzZUNvbmZpZ0l0ZW0ucHJvdG90eXBlLnRleHQgPSAoKHBhcnNlID0+IGZ1bmN0aW9uIChpc1Jvb3QgPSB0cnVlKSB7CiAgICBsZXQgcmVzdWx0OwogICAgaWYgKHRoaXMudGVtcGxhdGUpIHJlc3VsdCA9IHBhcnNlLmNhbGwodGhpcywgaXNSb290KTsKICAgIGVsc2UgcmVzdWx0ID0gdGhpcy5yZW5kZXIoaXNSb290KTsKICAgIHJldHVybiByZXN1bHQ/LnRleHRDb250ZW50LnRyaW0oKSA/PyAnJzsKICB9KShwYXJzZVRlbXBsYXRlKGZhbHNlKSkpOwogIC8qKgogICAqIOa4suafk+WMheaLrCByZW5kZXIg5ZKM5LiA5Liq5Y+v6YCJ55qEIGFmdGVyUmVuZGVyCiAgICog6L+Z6YeM5YyF6KOF5Lik5Liq5Ye95pWw77yM5aaC5p6c6ZyA6KaB6YeN6L295riy5p+T6YC76L6R77yM5bqU6K+l6YeN6L29IHJlbmRlcgogICAqIOWmguaenOmcgOimgeiOt+W+l+a4suafk+e7k+aenO+8jOW6lOivpeS9v+eUqOi/meS4quaWueazlQogICAqLwogIEJhc2VDb25maWdJdGVtLnByb3RvdHlwZS5nZXRSZW5kZXJSZXN1bHQgPSBmdW5jdGlvbiAoaXNSb290ID0gdHJ1ZSkgewogICAgbGV0IG5vZGUgPSB0aGlzLnJlbmRlcihpc1Jvb3QpOwogICAgaWYgKHR5cGVvZiB0aGlzLmFmdGVyUmVuZGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIG5vZGUgPSB0aGlzLmFmdGVyUmVuZGVyKG5vZGUpOwogICAgfQogICAgcmV0dXJuIG5vZGU7CiAgfTsKCiAgY29uc3QgbmV4dENvbmZpZ0lkID0gKGZ1bmN0aW9uICgpIHsKICAgIGxldCBsYXN0SW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxZTcpICogMTA7CiAgICAvKioKICAgICAqIEByZXR1cm4ge3N0cmluZ30g6L+U5Zue5LiA5Liq5Zyo5q2k5qyh6L+Q6KGM5Lit5ZSv5LiA55qE5YC877yM55So5p2l5qCH6K+G54us56uL55qE6K6+572u6aG5CiAgICAgKi8KICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGxhc3RJbmRleCArPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApOwogICAgICBjb25zdCByYW5kID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7CiAgICAgIGNvbnN0IGluZGV4ID0gbGFzdEluZGV4LnRvU3RyaW5nKDM2KTsKICAgICAgcmV0dXJuIGB5YXdmLSR7cmFuZH0tJHtpbmRleH1gOwogICAgfTsKICB9KCkpOwoKICAvKioKICAgKiDkuIDkuKrlj6/og73luKbmnInorr7nva7nmoTpobnnm64KICAgKiDmiJHku6zlnKjov5nkuIDlsYLnu7TmiqTmiYDmnInlkozorr7nva7mnInlhbPnmoTlhoXlrrnvvIzljIXmi6wKICAgKiAgIOiuvue9rueahOivu+WGmQogICAqICAg6K6+572u55qE5ZCI5rOV5oCn6aqM6K+BCiAgICogICDorr7nva7mm7TmlrDml7blm57osIPmm7TmlrDmlbDmja7nmoTmuLLmn5PpgLvovpEKICAgKi8KICBjbGFzcyBDb25maWdJdGVtIGV4dGVuZHMgQmFzZUNvbmZpZ0l0ZW0gewogICAgLyoqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbSDlrZDorr7nva7pobkKICAgICAqIEBwYXJhbSB7Q29uZmlnSXRlbX0gY29udGV4dCDniLborr7nva7pobnvvIhpdGVtIOW6lOW9k+WcqOaYr+ivpeiuvue9rumhueeahCByZWYg5Lit77yJCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGl0ZW0sIGNvbnRleHQpIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICAgIGlmIChjb250ZXh0KSB7CiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICAgICAgICBpZiAodGhpcy5pZCkgdGhpcy5pZCA9IGNvbnRleHQuaWQgKyAnLicgKyB0aGlzLmlkOwogICAgICB9CiAgICAgIHRoaXMuY29uZmlnSWQgPSBuZXh0Q29uZmlnSWQoKTsKICAgICAgdGhpcy5jb25maWdJbml0aWFsaXplZCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJucyB7YW55fSDooajnpLrorr7nva7nmoTliJ3lp4vlgLwKICAgICAqLwogICAgZ2V0IGluaXRpYWwoKSB7IHJldHVybiBudWxsOyB9CiAgICAvKioKICAgICAqIEBwYXJhbSB7YW55fSDmnKrmoLzlvI/ljJbnmoTorr7nva7pobkKICAgICAqIEByZXR1cm5zIHthbnl9IOagueaNruivpeiuvue9rumhueWFgeiuuOeahOWPluWAvOagvOW8j+WMluWQjueahOiuvue9rumhue+8jOatpOaXtuiuvue9rumhueaAu+aYr+WQiOazleeahAogICAgICovCiAgICBub3JtYWxpemUodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9CiAgICAvKioKICAgICAqIOmHjei9vei/meS4quWHveaVsOadpeaMh+WumuS9v+eUqOS7gOS5iOadpeWtmOWCqAogICAgICog6buY6K6k5L+d5a2Y5Zyo5b2T5YmN55So5oi35LmL5LiLCiAgICAgKi8KICAgIGdldCBjb25maWdQb29sKCkgewogICAgICByZXR1cm4gY29uZmlnLnVzZXI7CiAgICB9CiAgICAvKioKICAgICAqIOWIneWni+WMluiuvue9rumhuQogICAgICog6L+Z5Liq5Ye95pWw5LuF5bqU55SxIGluaXRDb25maWcg6LCD55SoCiAgICAgKi8KICAgIHByZXBhckNvbmZpZygpIHsKICAgICAgaWYgKHRoaXMuY29uZmlnKSByZXR1cm4gdGhpcy5jb25maWc7CiAgICAgIGlmICghdGhpcy5pZCkgdGhyb3cgRXJyb3IoJ2lkIGlzIHJlcXVpcmVkIHRvIGluaXQgY29uZmlnJyk7CiAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5jb25maWdQb29sLmtleSh0aGlzLmlkKTsKICAgICAgcmV0dXJuIHRoaXMuY29uZmlnOwogICAgfQogICAgLyoqCiAgICAgKiDkuIDkuKrpobnnm67kuI3kuIDlrprmgLvmmK/pnIDopoHljIXlkKvorr7nva7pobkKICAgICAqIOWmguaenOayoeacieiwg+eUqOi/h+S7u+S9lSBnZXRDb25maWcsIHNldENvbmZpZyDnrYnmlrnms5XvvIzliJnkuI3kvJrkuLror6Xpobnnm67liIbphY3orr7nva7pobkKICAgICAqIOWcqOesrOS4gOasoeiwg+eUqOS7u+S9leWSjOiuvue9rumhueebuOWFs+eahOaWueazleaXtu+8jOaIkeS7rOivleWbvuWIhumFjeiuvue9rumhuQogICAgICovCiAgICBpbml0Q29uZmlnKCkgewogICAgICBpZiAodGhpcy5jb25maWdJbml0aWFsaXplZCkgcmV0dXJuOwogICAgICB0aGlzLmNvbmZpZ0luaXRpYWxpemVkID0gdHJ1ZTsKICAgICAgdGhpcy5wcmVwYXJDb25maWcoKTsKICAgICAgdGhpcy5hZGRDb25maWdVaUxpc3RlbmVyKCk7CiAgICB9CiAgICAvKioKICAgICAqIOWIneWni+WMluiuvue9rumhueWPmOWMluaXtuWvuSBVSSDnmoTlj43ppogKICAgICAqIOi/meS4quWHveaVsOS7heW6lOeUsSBpbml0Q29uZmlnIOiwg+eUqAogICAgICovCiAgICBhZGRDb25maWdVaUxpc3RlbmVyKCkgewogICAgICB0aGlzLmluaXRDb25maWcoKTsKICAgICAgdGhpcy5jb25maWcuYWRkTGlzdGVuZXIobmV3VmFsdWUgPT4gewogICAgICAgIHRoaXMucmVuZGVyQWxsVmFsdWVzKCk7CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiDor7vlj5borr7nva7pobkKICAgICAqIEByZXR1cm4ge2FueX0g5b2T5YmN6K6+572u6aG555qE5YC8CiAgICAgKi8KICAgIGdldENvbmZpZygpIHsKICAgICAgdGhpcy5pbml0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jb25maWcuZ2V0KCk7CiAgICAgIGNvbnN0IHN0cmluZ2lmeVZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpOwogICAgICBjb25zdCBub3JtYWxpemUgPSB0aGlzLm5vcm1hbGl6ZSh2YWx1ZSk7CiAgICAgIGNvbnN0IHN0cmluZ2lmeU5vcm1hbGl6ZSA9IG5vcm1hbGl6ZSA9PSBudWxsID8gbm9ybWFsaXplIDogSlNPTi5zdHJpbmdpZnkobm9ybWFsaXplKTsKICAgICAgaWYgKHN0cmluZ2lmeVZhbHVlICE9PSBzdHJpbmdpZnlOb3JtYWxpemUpIHsKICAgICAgICB0aGlzLmNvbmZpZy5zZXQobm9ybWFsaXplKTsKICAgICAgfQogICAgICByZXR1cm4gbm9ybWFsaXplOwogICAgfQogICAgLyoqCiAgICAgKiDlhpnlhaXorr7nva7pobkKICAgICAqIEBwYXJhbSB7YW55fSB2YWx1ZSDlvZPliY3orr7nva7pobnnmoTlgLwKICAgICAqIEByZXR1cm4ge2FueX0g5a6e6ZmF5YaZ5YWl55qE5YC877yI57uP6L+H5qC85byP5YyW77yJCiAgICAgKi8KICAgIHNldENvbmZpZyh2YWx1ZSkgewogICAgICB0aGlzLmluaXRDb25maWcoKTsKICAgICAgY29uc3Qgbm9ybWFsaXplID0gdGhpcy5ub3JtYWxpemUodmFsdWUpOwogICAgICB0aGlzLmNvbmZpZy5zZXQobm9ybWFsaXplKTsKICAgICAgcmV0dXJuIG5vcm1hbGl6ZTsKICAgIH0KICAgIC8qKgogICAgICog5b2T6K6+572u6aG55Y+Y5YyW5pe255qE5Zue6LCDCiAgICAgKiDms6jmhI/kuI3opoHlnKjlm57osIPlh73mlbDkuK3kv53nlZnorr7nva7pobnmuLLmn5Plh7rmnaXnmoTmlofmoaPoioLngrnnmoTlvJXnlKjvvIzlkKbliJnlj6/og73pgKDmiJDlnoPlnL7lm57mlLblpLHmlYgKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIOW9k+iuvue9rumhueWPmOWMluaXtueahOWbnuiwg+WHveaVsAogICAgICogQHJldHVybiB7e3JlbW92ZUNvbmZpZ0xpc3RlbmVyOiBGdW5jdGlvbn19CiAgICAgKi8KICAgIGFkZENvbmZpZ0xpc3RlbmVyKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuaW5pdENvbmZpZygpOwogICAgICBjb25zdCB7IHJlbW92ZUxpc3RlbmVyIH0gPSB0aGlzLmNvbmZpZy5hZGRMaXN0ZW5lcihjYWxsYmFjayk7CiAgICAgIHJldHVybiB7IHJlbW92ZUNvbmZpZ0xpc3RlbmVyOiByZW1vdmVMaXN0ZW5lciB9OwogICAgfQogICAgcmVuZGVyKC4uLmFyZ3MpIHsKICAgICAgY29uc3Qgbm9kZSA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgLy8g5Zyo5riy5p+T5pe25qCH6K6w6K+l5YWD57Sg55qE6K6+572uIGlkCiAgICAgIC8vIOW9k+mcgOimgeabtOaWsOiuvue9ruaXtuWPr+S7peaWueS+v+WcsOS7jueVjOmdouS4iuaJvuWIsOivpeWFg+e0oAogICAgICBub2RlLnNldEF0dHJpYnV0ZSgneWF3Zi1jb25maWctaXRlbScsIHRoaXMuY29uZmlnSWQpOwogICAgICByZXR1cm4gbm9kZTsKICAgIH0KICAgIC8qKgogICAgICog5qC55o2u6K6+572uIGlkIOaJvuWIsOaJgOacieivpeiuvue9rumhuea4suafk+eahOWunuS+iwogICAgICovCiAgICBnZXRSZW5kZXJJdGVtcygpIHsKICAgICAgY29uc3Qgc2VsZWN0b3IgPSBgW3lhd2YtY29uZmlnLWl0ZW09IiR7dGhpcy5jb25maWdJZH0iXWA7CiAgICAgIHJldHVybiBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTsKICAgIH0KICAgIC8qKgogICAgICog5pu05paw5riy5p+T6aG555qE5YC8CiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIKICAgICAqLwogICAgcmVuZGVyVmFsdWUoY29udGFpbmVyKSB7CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9CiAgICAvKioKICAgICAqIOabtOaWsOa4suafk+aJgOacieWunuS+iwogICAgICovCiAgICByZW5kZXJBbGxWYWx1ZXMoKSB7CiAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRSZW5kZXJJdGVtcygpOwogICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5yZW5kZXJWYWx1ZShpdGVtKSk7CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuQ29uZmlnSXRlbSA9IENvbmZpZ0l0ZW07CgogIC8qKgogICAqIOS4gOS4quayoeacieeVjOmdoueahOiuvue9rumhuQogICAqLwogIGNsYXNzIE9mZnNjcmVlbkNvbmZpZ0l0ZW0gZXh0ZW5kcyBDb25maWdJdGVtIHsKICAgIGFkZENvbmZpZ1VpTGlzdGVuZXIoKSB7IC8qIOWboOS4uuayoeaciSBVSe+8jOaJgOS7peS7gOS5iOmDveS4jeWBmiAqLyB9CiAgICByZW5kZXIoKSB7IHJldHVybiBudWxsOyB9CiAgICB0ZXh0KCkgeyByZXR1cm4gJyc7IH0KICAgIGdldFJlbmRlckl0ZW1zKCkgeyByZXR1cm4gbnVsbDsgfQogICAgZ2V0UmVuZGVyUmVzdWx0KCkgeyByZXR1cm4gbnVsbDsgfQogICAgcmVuZGVyVmFsdWUoKSB7IHJldHVybiBudWxsOyB9CiAgfQogIHJ1bGUuY2xhc3MuT2Zmc2NyZWVuQ29uZmlnSXRlbSA9IE9mZnNjcmVlbkNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy5vZmZzY3JlZW4gPSBPZmZzY3JlZW5Db25maWdJdGVtOwoKICAvKioKICAgKiDkuIDkuKrluIPlsJTorr7nva7pobkKICAgKiDmnInkuKogY2hlY2tib3gKICAgKiDkvb/nlKjpu5jorqTnmoTmuLLmn5PpgLvovpHvvIzlpI3pgInmoYbliqDliLDmnIDliY3pnaIKICAgKi8KICBjbGFzcyBCb29sZWFuQ29uZmlnSXRlbSBleHRlbmRzIENvbmZpZ0l0ZW0gewogICAgY29uc3RydWN0b3IoaXRlbSwgcGFyZW50KSB7CiAgICAgIHN1cGVyKGl0ZW0sIHBhcmVudCk7CiAgICB9CiAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICBub3JtYWxpemUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLmluaXRpYWw7CiAgICAgIHJldHVybiAhIXZhbHVlOwogICAgfQogICAgaXNFbmFibGVkKCkgewogICAgICByZXR1cm4gdGhpcy5hbHdheXMgfHwgdGhpcy5nZXRDb25maWcoKTsKICAgIH0KICAgIHJlbmRlciguLi5hcmdzKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgaWYgKHRoaXMuYWx3YXlzKSByZXR1cm4gY29udGFpbmVyOwogICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgY2hlY2tib3guY2xhc3NMaXN0LmFkZCgnV19jaGVja2JveCcsICd5YXdmLWNvbmZpZy1jaGVja2JveCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNoZWNrYm94Jyk7CiAgICAgIH0KICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pbnB1dCcsIHRoaXMuY29uZmlnSWQpOwogICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHsKICAgICAgICAgIHRoaXMucmVuZGVyVmFsdWUoY29udGFpbmVyKTsKICAgICAgICB9IGVsc2UgdGhpcy5zZXRDb25maWcoY2hlY2tib3guY2hlY2tlZCk7CiAgICAgIH0pOwogICAgICBjb25zdCBsYWJlbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpOwogICAgICBsYWJlbC5pbnNlcnRCZWZvcmUoY2hlY2tib3gsIGxhYmVsLmZpcnN0Q2hpbGQpOwogICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNykgewogICAgICAgIGNvbnN0IGNvbnRhaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgY29udGFpbi5jbGFzc05hbWUgPSAneWF3Zi1jb25maWctY2hlY2tib3gtd3JhcCc7CiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBpY29uLmNsYXNzTmFtZSA9ICd5YXdmLWNvbmZpZy1jaGVja2JveC1pY29uJzsKICAgICAgICBjaGVja2JveC5yZXBsYWNlV2l0aChjb250YWluKTsKICAgICAgICBjb250YWluLmFwcGVuZChjaGVja2JveCk7CiAgICAgICAgY29udGFpbi5hcHBlbmQoaWNvbik7CiAgICAgICAgaWNvbi5hcHBlbmQodWkuaWNvbignY2hlY2tib3gnKS5kb2N1bWVudEVsZW1lbnQpOwogICAgICB9CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9CiAgICByZW5kZXJWYWx1ZShjb250YWluZXIpIHsKICAgICAgY29udGFpbmVyID0gc3VwZXIucmVuZGVyVmFsdWUoY29udGFpbmVyKTsKICAgICAgY29uc3Qgc2VsZWN0b3IgPSBgaW5wdXRbdHlwZT0iY2hlY2tib3giXVt5YXdmLWNvbmZpZy1pbnB1dD0iJHt0aGlzLmNvbmZpZ0lkfSJdYDsKICAgICAgY29uc3QgY2hlY2tib3ggPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGlmIChjaGVja2JveCAmJiBjaGVja2JveC5jaGVja2VkICE9PSBjb25maWcpIHsKICAgICAgICBjaGVja2JveC5jaGVja2VkID0gY29uZmlnOwogICAgICB9CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuQm9vbGVhbkNvbmZpZ0l0ZW0gPSBCb29sZWFuQ29uZmlnSXRlbTsKICBydWxlLnR5cGVzLmJvb2xlYW4gPSBCb29sZWFuQ29uZmlnSXRlbTsKCiAgLyoqCiAgICog5LiA5Liq5aSa6YCJ5LiA6K6+572u6aG5CiAgICog5pyJ5LiqIHNlbGVjdCDkuIvmi4npgInmi6nmoYYKICAgKiDpnIDopoHphY3nva4gc2VsZWN0IOWxnuaAp+S4uiBBcnJheTx7IHZhbHVlOiBzdHJpbmcsIG5hbWU6IHN0cmluZyB9PiDnlKjkuo7lgJnpgInpobkKICAgKiDkuI3kvb/nlKjpu5jorqTnmoTmuLLmn5PpgLvovpEKICAgKi8KICBjbGFzcyBTZWxlY3RDb25maWdJdGVtIGV4dGVuZHMgQ29uZmlnSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtLCBwYXJlbnQpIHsKICAgICAgc3VwZXIoaXRlbSwgcGFyZW50KTsKICAgICAgY29uc3Qgc2VsZWN0ID0gdGhpcy5zZWxlY3Q7CiAgICAgIGlmICghc2VsZWN0IHx8ICFBcnJheS5pc0FycmF5KHNlbGVjdCkgJiYgdHlwZW9mIHNlbGVjdC50aGVuICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdgc2VsZWN0YCBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIHNlbGVjdCBjb25maWcgaXRlbScpOwogICAgICB9CiAgICAgIGlmICghQXJyYXkuaXNBcnJheShzZWxlY3QpICYmIHR5cGVvZiBzZWxlY3QudGhlbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIFByb21pc2UucmVzb2x2ZShzZWxlY3QpLnRoZW4oaXRlbXMgPT4gewogICAgICAgICAgdGhpcy5zZWxlY3QgPSBpdGVtczsKICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ0luaXRpYWxpemVkKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIGdldCBpbml0aWFsKCkgewogICAgICBjb25zdCBzZWxlY3QgPSB0aGlzLnNlbGVjdDsKICAgICAgaWYgKCFzZWxlY3QpIHJldHVybiBudWxsOwogICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2VsZWN0KSkgcmV0dXJuIG51bGw7CiAgICAgIGlmICghc2VsZWN0WzBdKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIHNlbGVjdFswXS52YWx1ZTsKICAgIH0KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICBjb25zdCBzZWxlY3QgPSB0aGlzLnNlbGVjdDsKICAgICAgaWYgKHNlbGVjdCAmJiAhQXJyYXkuaXNBcnJheShzZWxlY3QpICYmIHR5cGVvZiBzZWxlY3QudGhlbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHZhbHVlOwogICAgICBpZiAoIXNlbGVjdCB8fCAhQXJyYXkuaXNBcnJheShzZWxlY3QpKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKHNlbGVjdC5maW5kKGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gdmFsdWUpKSByZXR1cm4gdmFsdWU7CiAgICAgIHJldHVybiB0aGlzLmluaXRpYWw7CiAgICB9CiAgICByZW5kZXIoKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgneWF3Zi1jb25maWctaXRlbScsIHRoaXMuY29uZmlnSWQpOwogICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctc2VsZWN0Jyk7CiAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ3dvby1pbnB1dC1tYWluJyk7CiAgICAgIH0KICAgICAgY29uc3QgcmVuZGVyT3B0aW9ucyA9IGl0ZW1zID0+IHsKICAgICAgICBpdGVtcy5mb3JFYWNoKCh7IHRleHQsIHZhbHVlLCBzdHlsZSA9IG51bGwgfSkgPT4gewogICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgICBvcHRpb24udmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7CiAgICAgICAgICBvcHRpb24udGV4dCA9IHR5cGVvZiB0ZXh0ID09PSAnZnVuY3Rpb24nID8gdGV4dCgpIDogdGV4dDsKICAgICAgICAgIGlmIChzdHlsZSkgb3B0aW9uLnN0eWxlICs9ICc7JyArIHN0eWxlOwogICAgICAgICAgc2VsZWN0LmFkZChvcHRpb24pOwogICAgICAgIH0pOwogICAgICAgIHNlbGVjdC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0Q29uZmlnKCkpOwogICAgICB9OwogICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnNlbGVjdCkpIHJlbmRlck9wdGlvbnModGhpcy5zZWxlY3QpOwogICAgICBlbHNlIFByb21pc2UucmVzb2x2ZSh0aGlzLnNlbGVjdCkudGhlbihpdGVtcyA9PiB7CiAgICAgICAgcmVuZGVyT3B0aW9ucyhpdGVtcyk7CiAgICAgIH0pOwogICAgICBzZWxlY3Quc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pbnB1dCcsIHRoaXMuY29uZmlnSWQpOwogICAgICBzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZXZlbnQgPT4gewogICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSB7CiAgICAgICAgICB0aGlzLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgICAgfSBlbHNlIHRoaXMuc2V0Q29uZmlnKEpTT04ucGFyc2Uoc2VsZWN0LnZhbHVlKSk7CiAgICAgIH0pOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZWN0KTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNykgewogICAgICAgIGNvbnN0IHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICB3cmFwLmNsYXNzTmFtZSA9ICd3b28taW5wdXQtd3JhcCc7CiAgICAgICAgc2VsZWN0LnJlcGxhY2VXaXRoKHdyYXApOwogICAgICAgIHdyYXAuYXBwZW5kKHNlbGVjdCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICAgIHJlbmRlclZhbHVlKGNvbnRhaW5lcikgewogICAgICBjb250YWluZXIgPSBzdXBlci5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICBjb25zdCBzZWxlY3RvciA9IGBzZWxlY3RbeWF3Zi1jb25maWctaW5wdXQ9IiR7dGhpcy5jb25maWdJZH0iXWA7CiAgICAgIGNvbnN0IHNlbGVjdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgY29uc3QgY29uZmlnU3RyID0gSlNPTi5zdHJpbmdpZnkoY29uZmlnKTsKICAgICAgaWYgKHNlbGVjdCAmJiBzZWxlY3QudmFsdWUgIT09IGNvbmZpZ1N0cikgewogICAgICAgIHNlbGVjdC52YWx1ZSA9IGNvbmZpZ1N0cjsKICAgICAgfQogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogIH0KICBydWxlLmNsYXNzLlNlbGVjdENvbmZpZ0l0ZW0gPSBTZWxlY3RDb25maWdJdGVtOwogIHJ1bGUudHlwZXMuc2VsZWN0ID0gU2VsZWN0Q29uZmlnSXRlbTsKCiAgLyoqCiAgICog5LiA5Liq6L6T5YWl5qGGCiAgICog5LiN5pq06Zyy57uZ5aSW6Z2i55u05o6l5L2/55SoCiAgICovCiAgY2xhc3MgSW5wdXRDb25maWdJdGVtIGV4dGVuZHMgQ29uZmlnSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtLCBwYXJlbnQpIHsKICAgICAgc3VwZXIoaXRlbSwgcGFyZW50KTsKICAgIH0KICAgIGdldCBpbml0aWFsKCkgeyByZXR1cm4gJyc7IH0KICAgIGdldCBpbnB1dFR5cGUoKSB7IHJldHVybiAndGV4dCc7IH0KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgeyByZXR1cm4gJycgKyB2YWx1ZTsgfQogICAgc3RyaW5naWZ5KHZhbHVlKSB7IHJldHVybiAnJyArIHZhbHVlOyB9CiAgICByZW5kZXIoKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgneWF3Zi1jb25maWctaXRlbScsIHRoaXMuY29uZmlnSWQpOwogICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctaW5wdXQnKTsKICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnd29vLWlucHV0LW1haW4nKTsKICAgICAgfQogICAgICBpbnB1dC50eXBlID0gdGhpcy5pbnB1dFR5cGU7CiAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHsKICAgICAgICAgIHRoaXMucmVuZGVyVmFsdWUoY29udGFpbmVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLnNldENvbmZpZ1Rva2VuID0ge307CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMuc2V0Q29uZmlnVG9rZW4gIT09IHRva2VuKSByZXR1cm47CiAgICAgICAgICAgIHRoaXMuc2V0Q29uZmlnKGlucHV0LnZhbHVlKTsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGlucHV0KSB7CiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBldmVudCA9PiB7CiAgICAgICAgdGhpcy5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICB9KTsKICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pbnB1dCcsIHRoaXMuY29uZmlnSWQpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHdyYXAuY2xhc3NOYW1lID0gJ3dvby1pbnB1dC13cmFwJzsKICAgICAgICBpbnB1dC5yZXBsYWNlV2l0aCh3cmFwKTsKICAgICAgICB3cmFwLmFwcGVuZChpbnB1dCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICAgIHJlbmRlclZhbHVlKGNvbnRhaW5lcikgewogICAgICBjb250YWluZXIgPSBzdXBlci5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICBjb25zdCBzZWxlY3RvciA9IGBpbnB1dFt5YXdmLWNvbmZpZy1pbnB1dD0iJHt0aGlzLmNvbmZpZ0lkfSJdYDsKICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGhhc0ZvY3VzID0gaW5wdXQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICAgIGlmIChpbnB1dCAmJiAhaGFzRm9jdXMgJiYgaW5wdXQudmFsdWUgIT09IHRoaXMuc3RyaW5naWZ5KGNvbmZpZykpIHsKICAgICAgICBpbnB1dC52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5KGNvbmZpZyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICB9CiAgcnVsZS5jbGFzcy5JbnB1dENvbmZpZ0l0ZW0gPSBJbnB1dENvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy5pbnB1dCA9IElucHV0Q29uZmlnSXRlbTsKCiAgLyoqCiAgICog5LiA5Liq5pWw5a2X6L6T5YWl5qGGCiAgICog5YWB6K645a6a5LmJIG1pbiwgbWF4LCBzdGVwIOWxnuaApwogICAqIOWvueW6lOS4gOS4qiBudW1iZXIg6L6T5YWl5qGGCiAgICovCiAgY2xhc3MgTnVtYmVyQ29uZmlnSXRlbSBleHRlbmRzIElucHV0Q29uZmlnSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtLCBwYXJlbnQpIHsKICAgICAgc3VwZXIoaXRlbSwgcGFyZW50KTsKICAgIH0KICAgIGdldCBpbnB1dFR5cGUoKSB7IHJldHVybiAnbnVtYmVyJzsgfQogICAgZ2V0IGluaXRpYWwoKSB7IHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh0aGlzLm1pbiwgMCksIHRoaXMubWF4KTsgfQogICAgZ2V0IG1pbigpIHsgcmV0dXJuIDA7IH0KICAgIGdldCBtYXgoKSB7IHJldHVybiBJbmZpbml0eTsgfQogICAgZ2V0IHN0ZXAoKSB7IHJldHVybiAxOyB9CiAgICBub3JtYWxpemUodmFsdWUpIHsKICAgICAgbGV0IG51bWJlciA9ICt2YWx1ZTsKICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobnVtYmVyKSkgcmV0dXJuIHRoaXMuaW5pdGlhbDsKICAgICAgaWYgKCt0aGlzLm1pbiA9PT0gdGhpcy5taW4gJiYgbnVtYmVyIDwgdGhpcy5taW4pIG51bWJlciA9IHRoaXMubWluOwogICAgICBpZiAoK3RoaXMubWF4ID09PSB0aGlzLm1heCAmJiBudW1iZXIgPiB0aGlzLm1heCkgbnVtYmVyID0gdGhpcy5tYXg7CiAgICAgIGlmICgrdGhpcy5zdGVwID09PSB0aGlzLnN0ZXAgJiYgTnVtYmVyLmlzRmluaXRlKHRoaXMuc3RlcCkpIHsKICAgICAgICBudW1iZXIgLT0gKG51bWJlciAtIHRoaXMubWluKSAlIHRoaXMuc3RlcDsKICAgICAgfQogICAgICByZXR1cm4gbnVtYmVyOwogICAgfQogICAgcmVuZGVyKCkgewogICAgICBjb25zdCBjb250YWluZXIgPSBzdXBlci5yZW5kZXIoKTsKICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLW51bWJlcicpOwogICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpOwogICAgICBpZiAoK3RoaXMubWluID09PSB0aGlzLm1pbiAmJiB0aGlzLm1pbiAhPT0gLUluZmluaXR5KSBpbnB1dC5taW4gPSB0aGlzLm1pbjsKICAgICAgaWYgKCt0aGlzLm1heCA9PT0gdGhpcy5tYXggJiYgdGhpcy5tYXggIT09IEluZmluaXR5KSBpbnB1dC5tYXggPSB0aGlzLm1heDsKICAgICAgaWYgKCt0aGlzLnN0ZXAgPT09IHRoaXMuc3RlcCAmJiBOdW1iZXIuaXNGaW5pdGUodGhpcy5zdGVwKSkgaW5wdXQuc3RlcCA9IHRoaXMuc3RlcDsKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICB9CiAgcnVsZS5jbGFzcy5OdW1iZXJDb25maWdJdGVtID0gTnVtYmVyQ29uZmlnSXRlbTsKICBydWxlLnR5cGVzLm51bWJlciA9IE51bWJlckNvbmZpZ0l0ZW07CgogIC8qKgogICAqIOiMg+WbtOi+k+WFpeahhgogICAqIOWSjOaVsOWtl+i+k+WFpeahhuayoeS7gOS5iOW3ruWIq++8jOmZpOS6huWkmuS6huS4gOS4quiMg+WbtOaLluWKqOadoQogICAqIOS7heW9kyBtaW7jgIFtYXgg6YO96K6+572u5LqG5pe25omN5Lya5pyJ5pWICiAgICovCiAgY2xhc3MgUmFuZ2VDb25maWdJdGVtIGV4dGVuZHMgTnVtYmVyQ29uZmlnSXRlbSB7CiAgICByZW5kZXIoLi4uYXJncykgewogICAgICBjb25zdCBjb250YWluZXIgPSBzdXBlci5yZW5kZXIoLi4uYXJncyk7CiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWl0ZW0nLCB0aGlzLmNvbmZpZ0lkKTsKICAgICAgaWYgKCt0aGlzLm1pbiAhPT0gdGhpcy5taW4pIHJldHVybiBjb250YWluZXI7CiAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHRoaXMubWluKSkgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgaWYgKCt0aGlzLm1heCAhPT0gdGhpcy5tYXgpIHJldHVybiBjb250YWluZXI7CiAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHRoaXMubWF4KSkgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgaWYgKCt0aGlzLnN0ZXAgIT09IHRoaXMuc3RlcCkgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGhpcy5zdGVwKSkgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLXJhbmdlJyk7CiAgICAgIGNvbnN0IHJhbmdlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgcmFuZ2VyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLXJhbmdlLXdyYXAnKTsKICAgICAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICByYW5nZS50eXBlID0gJ3JhbmdlJzsKICAgICAgcmFuZ2VyLmFwcGVuZENoaWxkKHJhbmdlKTsKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJhbmdlcik7CiAgICAgIHJhbmdlLm1pbiA9IHRoaXMubWluOwogICAgICByYW5nZS5tYXggPSB0aGlzLm1heDsKICAgICAgcmFuZ2Uuc3RlcCA9IHRoaXMuc3RlcDsKICAgICAgcmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHsKICAgICAgICAgIHRoaXMucmVuZGVyVmFsdWUoY29udGFpbmVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLnNldENvbmZpZ1Rva2VuID0ge307CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMuc2V0Q29uZmlnVG9rZW4gIT09IHRva2VuKSByZXR1cm47CiAgICAgICAgICAgIHRoaXMuc2V0Q29uZmlnKCtyYW5nZS52YWx1ZSk7CiAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBldmVudCA9PiB7CiAgICAgICAgdGhpcy5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICB9KTsKICAgICAgcmFuZ2UudmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICByYW5nZS5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWlucHV0JywgdGhpcy5jb25maWdJZCk7CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9CiAgICByZW5kZXJWYWx1ZShjb250YWluZXIpIHsKICAgICAgY29udGFpbmVyID0gc3VwZXIucmVuZGVyVmFsdWUoY29udGFpbmVyKTsKICAgICAgY29uc3Qgc2VsZWN0b3IgPSBgaW5wdXRbdHlwZT0icmFuZ2UiXVt5YXdmLWNvbmZpZy1pbnB1dD0iJHt0aGlzLmNvbmZpZ0lkfSJdYDsKICAgICAgY29uc3QgcmFuZ2UgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGhhc0ZvY3VzID0gcmFuZ2UgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICAgIGlmIChyYW5nZSAmJiAhaGFzRm9jdXMgJiYgK3JhbmdlLnZhbHVlICE9PSBjb25maWcpIHsKICAgICAgICByYW5nZS52YWx1ZSA9IGNvbmZpZzsKICAgICAgfQogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogIH0KICBydWxlLmNsYXNzLlJhbmdlQ29uZmlnSXRlbSA9IFJhbmdlQ29uZmlnSXRlbTsKICBydWxlLnR5cGVzLnJhbmdlID0gUmFuZ2VDb25maWdJdGVtOwoKICAvKioKICAgKiDkuIDkuKrpopzoibLpgInmi6nmoYYKICAgKiDlr7nlupTkuIDkuKogY29sb3Ig6L6T5YWl5qGGCiAgICovCiAgY2xhc3MgQ29sb3JDb25maWdJdGVtIGV4dGVuZHMgSW5wdXRDb25maWdJdGVtIHsKICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHBhcmVudCkgewogICAgICBzdXBlcihpdGVtLCBwYXJlbnQpOwogICAgfQogICAgZ2V0IGluaXRpYWwoKSB7IHJldHVybiAnI2ZmZmZmZic7IH0KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIHRoaXMuaW5pdGlhbDsKICAgICAgaWYgKCEvI1swLTlhLWZdezZ9L2kudGVzdCh2YWx1ZSkpIHJldHVybiB0aGlzLmluaXRpYWw7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIHJlbmRlcigpIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gc3VwZXIucmVuZGVyKCk7CiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xvcicpOwogICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpOwogICAgICBpbnB1dC50eXBlID0gJ2NvbG9yJzsKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICB9CiAgcnVsZS5jbGFzcy5Db2xvckNvbmZpZ0l0ZW0gPSBDb2xvckNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy5jb2xvciA9IENvbG9yQ29uZmlnSXRlbTsKCiAgaTE4bi5rZXlib2FyZERpc2FibGVkID0gewogICAgY246ICfvvIjlt7LnpoHnlKjvvIknLAogICAgdHc6ICfvvIjlt7LlgZznlKjvvIknLAogICAgZW46ICcoRGlzYWJsZWQpJywKICB9OwoKICAvKioKICAgKiDkuIDkuKrorr7nva7mjInplK7nmoTorr7nva7pobkKICAgKi8KICBjbGFzcyBLZXlib2FyZENvbmZpZ0l0ZW0gZXh0ZW5kcyBDb25maWdJdGVtIHsKICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHBhcmVudCkgewogICAgICBzdXBlcihpdGVtLCBwYXJlbnQpOwogICAgfQogICAgZ2V0IGluaXRpYWwoKSB7IHJldHVybiBudWxsOyB9CiAgICBub3JtYWxpemUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHJldHVybiB0aGlzLmluaXRpYWw7CiAgICAgIGlmICh2YWx1ZSA8IDAgfHwgdmFsdWUgPiBrZXlib2FyZC5hbHRlci5NQVgpIHJldHVybiB0aGlzLmluaXRpYWw7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIHJlbmRlcigpIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pdGVtJywgdGhpcy5jb25maWdJZCk7CiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1rZXknKTsKICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgICBidXR0b24uY2xhc3NOYW1lID0gJ3dvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWxpbmUgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tcyB3b28tYnV0dG9uLXJvdW5kJzsKICAgICAgfQogICAgICBidXR0b24udHlwZSA9ICdidXR0b24nOwogICAgICBidXR0b24udGV4dENvbnRlbnQgPSBrZXlib2FyZC5uYW1lKHRoaXMuZ2V0Q29uZmlnKCkpOwogICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGNvZGUgPSBrZXlib2FyZC5ldmVudChldmVudCk7CiAgICAgICAgaWYgKGNvZGUgPT09IGtleWJvYXJkLmNvZGUuVEFCKSByZXR1cm47CiAgICAgICAgaWYgKGNvZGUgPT09IGtleWJvYXJkLmNvZGUuVEFCICsga2V5Ym9hcmQuYWx0ZXIuU0hJRlQpIHJldHVybjsKICAgICAgICBpZiAoY29kZSA9PT0ga2V5Ym9hcmQuY29kZS5FU0MpIHsKICAgICAgICAgIHRoaXMuc2V0Q29uZmlnKG51bGwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNldENvbmZpZyhjb2RlKTsKICAgICAgICB9CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfSwgdHJ1ZSk7CiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWlucHV0JywgdGhpcy5jb25maWdJZCk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pOwogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogICAgcmVuZGVyVmFsdWUoY29udGFpbmVyKSB7CiAgICAgIGNvbnRhaW5lciA9IHN1cGVyLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgIGNvbnN0IHNlbGVjdG9yID0gYGJ1dHRvblt0eXBlPSJidXR0b24iXVt5YXdmLWNvbmZpZy1pbnB1dD0iJHt0aGlzLmNvbmZpZ0lkfSJdYDsKICAgICAgY29uc3QgYnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBjb25zdCB0ZXh0ID0gY29uZmlnID8ga2V5Ym9hcmQubmFtZShjb25maWcpIDogaTE4bi5rZXlib2FyZERpc2FibGVkOwogICAgICBpZiAoYnV0dG9uICYmIGJ1dHRvbi50ZXh0Q29udGVudCAhPT0gdGV4dCkgewogICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICB9CiAgcnVsZS5jbGFzcy5LZXlib2FyZENvbmZpZ0l0ZW0gPSBLZXlib2FyZENvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy5rZXkgPSBLZXlib2FyZENvbmZpZ0l0ZW07CgogIC8qKgogICAqIOS4gOS4quaWh+acrOi+k+WFpeahhgogICAqIOWvueW6lOS4gOS4qiB0ZXh0YXJlYSDovpPlhaXmoYYKICAgKi8KICBjbGFzcyBUZXh0Q29uZmlnSXRlbSBleHRlbmRzIENvbmZpZ0l0ZW0gewogICAgY29uc3RydWN0b3IoaXRlbSwgcGFyZW50KSB7CiAgICAgIHN1cGVyKGl0ZW0sIHBhcmVudCk7CiAgICB9CiAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuICcnOyB9CiAgICBub3JtYWxpemUodmFsdWUpIHsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiB0aGlzLmluaXRpYWw7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIHJlbmRlcigpIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pdGVtJywgdGhpcy5jb25maWdJZCk7CiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy10ZXh0Jyk7CiAgICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIHRleHRhcmVhLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLXRleHRhcmVhJywgJ1dfaW5wdXQnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSAneWF3Zi1jb25maWctdGV4dGFyZWEgd29vLWlucHV0LW1haW4nOwogICAgICB9CiAgICAgIHRleHRhcmVhLnZhbHVlID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHRleHRhcmVhLnZhbHVlID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgICBlbHNlIHRoaXMuc2V0Q29uZmlnKHRleHRhcmVhLnZhbHVlKTsKICAgICAgfSk7CiAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBldmVudCA9PiB7CiAgICAgICAgdGhpcy5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICB9KTsKICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pbnB1dCcsIHRoaXMuY29uZmlnSWQpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dGFyZWEpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHdyYXAuY2xhc3NOYW1lID0gJ3dvby1pbnB1dC13cmFwJzsKICAgICAgICB0ZXh0YXJlYS5yZXBsYWNlV2l0aCh3cmFwKTsKICAgICAgICB3cmFwLmFwcGVuZCh0ZXh0YXJlYSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICAgIHJlbmRlclZhbHVlKGNvbnRhaW5lcikgewogICAgICBjb250YWluZXIgPSBzdXBlci5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICBjb25zdCBzZWxlY3RvciA9IGB0ZXh0YXJlYVt5YXdmLWNvbmZpZy1pbnB1dD0iJHt0aGlzLmNvbmZpZ0lkfSJdYDsKICAgICAgY29uc3QgdGV4dGFyZWEgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGlmICh0ZXh0YXJlYSAmJiB0ZXh0YXJlYS52YWx1ZSAhPT0gY29uZmlnKSB7CiAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBjb25maWc7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICB9CiAgcnVsZS5jbGFzcy5UZXh0Q29uZmlnSXRlbSA9IFRleHRDb25maWdJdGVtOwogIHJ1bGUudHlwZXMudGV4dCA9IFRleHRDb25maWdJdGVtOwoKICAvKioKICAgKiDmmL7npLrkuIDkuKrlsI/lm77moIfvvIzpvKDmoIfliJLkuIrljrvlj6/ku6XmmL7npLrlvLnlh7rotbfms6EKICAgKiDov5nkuKrpobnnm67kuI3lr7nlupTorr7nva7lgLwKICAgKi8KICBjbGFzcyBCdWJibGVDb25maWdJdGVtIGV4dGVuZHMgQmFzZUNvbmZpZ0l0ZW0gewogICAgY29uc3RydWN0b3IoaXRlbSwgcGFyZW50KSB7CiAgICAgIHN1cGVyKGl0ZW0sIHBhcmVudCk7CiAgICB9CiAgICByZW5kZXIoLi4uYXJncykgewogICAgICBjb25zdCBjb250ZW50ID0gc3VwZXIucmVuZGVyKC4uLmFyZ3MpOwogICAgICBjb25zdCBjb250ZW50TGFiZWwgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7CiAgICAgIGNvbnRlbnRMYWJlbC5yZXBsYWNlV2l0aCguLi5BcnJheS5mcm9tKGNvbnRlbnRMYWJlbC5jaGlsZE5vZGVzKSk7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgY29uc3QgaWNvblR5cGUgPSB0aGlzLmljb24gPz8gJ2Fzayc7CiAgICAgIGxldCBpY29uOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTsKICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ1dfaWNvbicsICd5YXdmLWJ1YmJsZS1pY29uJywgYGljb25fJHtpY29uVHlwZX1TYCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgaWNvblR5cGVWNyA9IHsKICAgICAgICAgIGFzazogJ2hlbHAnLAogICAgICAgICAgd2FybjogJ3dhcm4nLAogICAgICAgICAgc3VjYzogJ3N1Y2Nlc3MnLAogICAgICAgIH1baWNvblR5cGVdOwogICAgICAgIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBpY29uLmNsYXNzTmFtZSA9ICd5YXdmLWJ1YmJsZS1pY29uJzsKICAgICAgICBjb25zdCBzdmcgPSBpY29uLmFwcGVuZENoaWxkKHVpLmljb24oaWNvblR5cGVWNykuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdjbGFzcycsIGB3b28tdGlwLWljb24gd29vLXRpcC0ke2ljb25UeXBlVjd9RmlsbGApOwogICAgICB9CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTsKICAgICAgdWkuYnViYmxlKGNvbnRlbnQsIGljb24pOwogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogIH0KICBydWxlLmNsYXNzLkJ1YmJsZUNvbmZpZ0l0ZW0gPSBCdWJibGVDb25maWdJdGVtOwogIHJ1bGUudHlwZXMuYnViYmxlID0gQnViYmxlQ29uZmlnSXRlbTsKCiAgaTE4bi5jb2xsZWN0aW9uQWRkQnV0dG9uID0gewogICAgY246ICfmt7vliqAnLAogICAgdHc6ICfmlrDlop4nLAogICAgZW46ICdBZGQnLAogIH07CgogIGNsYXNzIENvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgQ29uZmlnSXRlbSB7CiAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuIFtdOyB9CiAgICBub3JtYWxpemUodmFsdWUpIHsKICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIFtdOwogICAgICByZXR1cm4gdmFsdWUubWFwKGl0ZW0gPT4gdGhpcy5ub3JtYWxpemVJdGVtKGl0ZW0pKS5maWx0ZXIoaXRlbSA9PiBpdGVtICE9IG51bGwpOwogICAgfQogICAgbm9ybWFsaXplSXRlbShpdGVtKSB7IHJldHVybiBpdGVtOyB9CiAgICB0cmFjayhpdGVtLCBpbmRleCA9IC0xKSB7IHJldHVybiAnJyArIGluZGV4OyB9CiAgICByZW5kZXJMaXN0aXRlbShpdGVtLCBpbmRleCkgewogICAgICBjb25zdCBsaXN0aXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBsaXN0aXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0nLCAnV19idG5fYicsICdXX2J0bl90YWcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsaXN0aXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0nKTsKICAgICAgfQogICAgICBjb25zdCB0cmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gdGhpcy50cmFjayhpdGVtLCBpbmRleCkgOiB0aGlzLnRyYWNrKGl0ZW0pOwogICAgICBsaXN0aXRlbS5kYXRhc2V0Lnlhd2ZUcmFjayA9IHRyYWNrOwogICAgICBjb25zdCBkZWxldGVJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBkZWxldGVJdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlJyk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBkZWxldGVJdGVtLmlubmVySFRNTCA9ICc8YSBjbGFzcz0iV19maWNvbiBmaWNvbl9jbG9zZSBTX2ZpY29uIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij5YPC9hPic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGVsZXRlSXRlbS5pbm5lckhUTUwgPSAnPGkgY2xhc3M9Indvby1mb250IHdvby1mb250LS1jcm9zcyIgeWF3Zi1jb21wb25lbnQtdGFnPSJ3b28tZm9udGljb24iPjwvaT4nOwogICAgICB9CiAgICAgIGxpc3RpdGVtLmFwcGVuZENoaWxkKGRlbGV0ZUl0ZW0pOwogICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtLWNvbnRlbnQnKTsKICAgICAgY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlckl0ZW0oaXRlbSkpOwogICAgICBsaXN0aXRlbS5hcHBlbmRDaGlsZChjb250ZW50KTsKICAgICAgcmV0dXJuIGxpc3RpdGVtOwogICAgfQogICAgcmVuZGVyKCkgewogICAgICByZXR1cm4gcmVmZXJlbmNlID0+IHsKICAgICAgICAvKiogQHR5cGUge0hUTUxMYWJlbEVsZW1lbnR9ICovCiAgICAgICAgY29uc3QgbGFiZWwgPSByZWZlcmVuY2U7CiAgICAgICAgLy8g5oiR5Lus5riy5p+T5LiA5Liq6L6T5YWl5qGGCiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgIGlucHV0LnR5cGUgPSAndGV4dCc7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctY29sbGVjdGlvbi1pbnB1dCcsICdXX2lucHV0Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlucHV0LmNsYXNzTmFtZSA9ICd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWlucHV0IHdvby1pbnB1dC1tYWluJzsKICAgICAgICB9CiAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgICAgIGNvbnN0IHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIHdyYXAuY2xhc3NOYW1lID0gJ3dvby1pbnB1dC13cmFwJzsKICAgICAgICAgIGlucHV0LnJlcGxhY2VXaXRoKHdyYXApOwogICAgICAgICAgd3JhcC5hcHBlbmQoaW5wdXQpOwogICAgICAgIH0KICAgICAgICAvLyDlnKjlvZPliY3moIfnrb7liY3pnaLol4/kuIDkuKrooajljZXlhYPntKDvvIznlKjkuo7lpITnkIbnlKjmiLfovpPlhaXmj5DkuqQKICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpOwogICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctY29sbGVjdGlvbi1mb3JtJyk7CiAgICAgICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ29uc3VibWl0JywgJycpOwogICAgICAgIGxhYmVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGZvcm0sIGxhYmVsKTsKICAgICAgICBjb25zdCBmb3JtSWQgPSBmb3JtLmlkID0gbmV4dENvbmZpZ0lkKCk7CiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdmb3JtJywgZm9ybUlkKTsKICAgICAgICAvLyDlnKjlvZPliY3moIfnrb7lkI7pnaLmlL7kuIDkuKrmj5DkuqTmjInpkq4KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGNvbnN0IHN1Ym1pdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgc3VibWl0LnNldEF0dHJpYnV0ZSgnZm9ybScsIGZvcm1JZCk7CiAgICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICAgIHN1Ym1pdC5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXN1Ym1pdCcsICdXX2J0bl9hJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdWJtaXQuY2xhc3NOYW1lID0gJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24tc3VibWl0IHdvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWxpbmUgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tcyB3b28tYnV0dG9uLXJvdW5kJzsKICAgICAgICAgIH0KICAgICAgICAgIHN1Ym1pdC50ZXh0Q29udGVudCA9IGkxOG4uY29sbGVjdGlvbkFkZEJ1dHRvbjsKICAgICAgICAgIGxhYmVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN1Ym1pdCwgbGFiZWwubmV4dFNpYmxpbmcpOwogICAgICAgIH0sIDApOwogICAgICAgIC8vIOWkhOeQhuaPkOS6pOaXtueahOaTjeS9nAogICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYXN5bmMgZXZlbnQgPT4gewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IGlucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgIGlmICghdXNlcklucHV0KSByZXR1cm47CiAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHRoaXMucGFyc2VVc2VySW5wdXQodXNlcklucHV0KTsKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW1zKSkgewogICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5hZGRJdGVtKGl0ZW0pKTsKICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJzsKICAgICAgICAgIH0KICAgICAgICAgIGlucHV0LmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHsKICAgICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgICBjb25zdCBjb2RlID0ga2V5Ym9hcmQuZXZlbnQoZXZlbnQpOwogICAgICAgICAgaWYgKGNvZGUgPT09IGtleWJvYXJkLmNvZGUuRU5URVIpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmdldFN1Z2dlc3Rpb25JdGVtcyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgdGhpcy5yZW5kZXJTdWdnZXN0aW9uSXRlbXMoaW5wdXQpOwogICAgICAgIH0KCiAgICAgICAgLy8g5pi+56S65omA5pyJ6aG555uu57uE5oiQ55qE5YiX6KGoCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24taXRlbXMnKTsKICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pdGVtJywgdGhpcy5jb25maWdJZCk7CiAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWxpc3QnKTsKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGlzdCk7CiAgICAgICAgcmVmZXJlbmNlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgICB0aGlzLmdldENvbmZpZygpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICBjb25zdCBsaXN0aXRlbSA9IHRoaXMucmVuZGVyTGlzdGl0ZW0oaXRlbSwgaW5kZXgpOwogICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChsaXN0aXRlbSk7CiAgICAgICAgfSk7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGRlbGV0ZUl0ZW0gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlJyk7CiAgICAgICAgICBpZiAoIWRlbGV0ZUl0ZW0pIHJldHVybjsKICAgICAgICAgIGNvbnN0IGxpc3RpdGVtID0gZGVsZXRlSXRlbS5wYXJlbnROb2RlOwogICAgICAgICAgY29uc3QgdHJhY2sgPSBsaXN0aXRlbS5kYXRhc2V0Lnlhd2ZUcmFjazsKICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbSh0cmFjayk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CiAgICBhc3luYyBwYXJzZVVzZXJJbnB1dCh2YWx1ZSkgewogICAgICByZXR1cm4gW3ZhbHVlXTsKICAgIH0KICAgIGFzeW5jIHBhcnNlRmFzdEl0ZW0odmFsdWUsIHR5cGUpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyc2VVc2VySW5wdXQodmFsdWUpOwogICAgfQogICAgYWRkSXRlbSh2YWx1ZSkgewogICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBjb25zdCB0cmFjayA9IHRoaXMudHJhY2sodmFsdWUpOwogICAgICBjb25zdCBpbmRleCA9IHZhbHVlcy5maW5kSW5kZXgoKGl0ZW0sIGluZGV4KSA9PiB0aGlzLnRyYWNrKGl0ZW0sIGluZGV4KSA9PT0gdHJhY2spOwogICAgICBpZiAoaW5kZXggIT09IC0xKSB2YWx1ZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdmFsdWVzLnB1c2godmFsdWUpOwogICAgICB0aGlzLnNldENvbmZpZyh2YWx1ZXMpOwogICAgfQogICAgcmVtb3ZlSXRlbSh0cmFjaykgewogICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBjb25zdCBpbmRleCA9IHZhbHVlcy5maW5kSW5kZXgoKGl0ZW0sIGluZGV4KSA9PiB0aGlzLnRyYWNrKGl0ZW0sIGluZGV4KSA9PT0gdHJhY2spOwogICAgICBpZiAoaW5kZXggIT09IC0xKSB2YWx1ZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5zZXRDb25maWcodmFsdWVzKTsKICAgIH0KICAgIHJlbmRlckl0ZW0oaXRlbSkgewogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbSk7CiAgICB9CiAgICB1cGRhdGVJdGVtKGNvbnRhaW5lciwgaXRlbSkgewogICAgICBjb250YWluZXIudGV4dENvbnRlbnQgPSBpdGVtOwogICAgfQogICAgcmVuZGVyVmFsdWUoY29udGFpbmVyKSB7CiAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGxpc3QgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tbGlzdCcpOwogICAgICBjb25zdCBsaXN0aXRlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24taXRlbScpOwogICAgICBjb25zdCBsaXN0aXRlbU1hcCA9IG5ldyBNYXAoKTsKICAgICAgWy4uLmxpc3RpdGVtc10uZm9yRWFjaChsaXN0aXRlbSA9PiB7CiAgICAgICAgbGlzdGl0ZW1NYXAuc2V0KGxpc3RpdGVtLmRhdGFzZXQueWF3ZlRyYWNrLCBsaXN0aXRlbSk7CiAgICAgIH0pOwogICAgICBsaXN0LmlubmVySFRNTCA9ICcnOwogICAgICB2YWx1ZXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7CiAgICAgICAgY29uc3QgdHJhY2sgPSB0aGlzLnRyYWNrKHZhbHVlLCBpbmRleCk7CiAgICAgICAgaWYgKGxpc3RpdGVtTWFwLmhhcyh0cmFjaykpIHsKICAgICAgICAgIGNvbnN0IGxpc3RpdGVtID0gbGlzdGl0ZW1NYXAuZ2V0KHRyYWNrKTsKICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBsaXN0aXRlbS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtLWNvbnRlbnQnKTsKICAgICAgICAgIHRoaXMudXBkYXRlSXRlbShjb250ZW50LCB2YWx1ZSk7CiAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGxpc3RpdGVtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgbGlzdGl0ZW0gPSB0aGlzLnJlbmRlckxpc3RpdGVtKHZhbHVlLCBpbmRleCk7CiAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGxpc3RpdGVtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0ge0hUTUxJbnB1dEVsZW1lbnR9IGlucHV0CiAgICAgKi8KICAgIHJlbmRlclN1Z2dlc3Rpb25JdGVtcyhpbnB1dCkgewogICAgICBjb25zdCBzdWdnZXN0aW9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIHN1Z2dlc3Rpb25Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnbGF5ZXJfbWVudV9saXN0JywgJ3lhd2YtY29sbGVjdGlvbi1zdWdnZXN0aW9uJyk7CiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25MaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgc3VnZ2VzdGlvbkxpc3QuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb2xsZWN0aW9uLXN1Z2dlc3Rpb24tbGlzdCcpOwogICAgICBzdWdnZXN0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHN1Z2dlc3Rpb25MaXN0KTsKICAgICAgLyoqIEB0eXBlIHtIVE1MTElFbGVtZW50W119ICovCiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25JdGVtcyA9IFtdOwogICAgICBsZXQgc3VnZ2VzdGlvbkl0ZW1zU2hvd24gPSBmYWxzZTsKICAgICAgY29uc3QgaGlkZVN1Z2dlc3Rpb25JdGVtcyA9ICgpID0+IHsKICAgICAgICBzdWdnZXN0aW9uSXRlbXNTaG93biA9IGZhbHNlOwogICAgICAgIGlmICghc3VnZ2VzdGlvbkNvbnRhaW5lci5wYXJlbnROb2RlKSByZXR1cm47CiAgICAgICAgc3VnZ2VzdGlvbkNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN1Z2dlc3Rpb25Db250YWluZXIpOwogICAgICB9OwogICAgICBjb25zdCBvbGRQb3NpdGlvbiA9IEFycmF5KDMpLmZpbGwoTmFOKTsKICAgICAgY29uc3QgdXBkYXRlUG9zaXRpb24gPSAoKSA9PiB7CiAgICAgICAgaWYgKCFzdWdnZXN0aW9uSXRlbXNTaG93bikgcmV0dXJuOwogICAgICAgIGNvbnN0IHJlY3RzID0gaW5wdXQuZ2V0Q2xpZW50UmVjdHMoKTsKICAgICAgICBpZiAoIXJlY3RzPy5bMF0pIHJldHVybjsKICAgICAgICBjb25zdCB7IGxlZnQsIHdpZHRoLCBib3R0b20gfSA9IHJlY3RzWzBdOwogICAgICAgIGNvbnN0IFtvbGRMZWZ0LCBvbGRXaWR0aCwgb2xkQm90dG9tXSA9IG9sZFBvc2l0aW9uOwogICAgICAgIGlmIChsZWZ0ICE9PSBvbGRMZWZ0KSBzdWdnZXN0aW9uQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBNYXRoLnJvdW5kKGxlZnQpICsgJ3B4JzsKICAgICAgICBpZiAod2lkdGggIT09IG9sZFdpZHRoKSBzdWdnZXN0aW9uQ29udGFpbmVyLnN0eWxlLm1pbldpZHRoID0gKE1hdGgucm91bmQod2lkdGgpIC0gNCkgKyAncHgnOwogICAgICAgIGlmIChib3R0b20gIT09IG9sZEJvdHRvbSkgc3VnZ2VzdGlvbkNvbnRhaW5lci5zdHlsZS50b3AgPSBNYXRoLnJvdW5kKGJvdHRvbSkgKyAncHgnOwogICAgICAgIG9sZFBvc2l0aW9uLnNwbGljZSgwLCAzLCBsZWZ0LCB3aWR0aCwgYm90dG9tKTsKICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZVBvc2l0aW9uKTsKICAgICAgfTsKICAgICAgY29uc3Qgc2hvd1N1Z2dlc3Rpb25JdGVtcyA9IGl0ZW1zID0+IHsKICAgICAgICBzdWdnZXN0aW9uTGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICBzdWdnZXN0aW9uSXRlbXMuc3BsaWNlKDApOwogICAgICAgIHN1Z2dlc3Rpb25JdGVtcy5wdXNoKC4uLml0ZW1zLm1hcChpdGVtID0+IHsKICAgICAgICAgIGNvbnN0IGxpc3RpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICAgIGxpc3RpdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtbGlzdC1zdWdnZXN0aW9uLWl0ZW0nKTsKICAgICAgICAgIGxpc3RpdGVtLmRhdGFzZXQueWF3ZlN1Z2dlc3Rpb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoaXRlbSk7CiAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgbGluay5ocmVmID0gJ2phdmFzY3JpcHQ6dm9pZCgwKTsnOwogICAgICAgICAgbGlzdGl0ZW0uYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICB0aGlzLnJlbmRlclN1Z2dlc3Rpb25JdGVtKGxpbmssIGl0ZW0pOwogICAgICAgICAgc3VnZ2VzdGlvbkxpc3QuYXBwZW5kQ2hpbGQobGlzdGl0ZW0pOwogICAgICAgICAgcmV0dXJuIGxpc3RpdGVtOwogICAgICAgIH0pKTsKICAgICAgICBpZiAoaXRlbXMubGVuZ3RoKSBzdWdnZXN0aW9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIGVsc2Ugc3VnZ2VzdGlvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGlmICghc3VnZ2VzdGlvbkNvbnRhaW5lci5wYXJlbnROb2RlKSB7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN1Z2dlc3Rpb25Db250YWluZXIpOwogICAgICAgIH0KICAgICAgICBzdWdnZXN0aW9uSXRlbXNTaG93biA9IHRydWU7CiAgICAgICAgdXBkYXRlUG9zaXRpb24oKTsKICAgICAgfTsKICAgICAgY29uc3QgdXBkYXRlSW5wdXRTdWdnZXN0aW9uID0gYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IGlucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICBjb25zdCBoYXNGb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGlucHV0OwogICAgICAgIGlmICghaGFzRm9jdXMpIHsKICAgICAgICAgIGhpZGVTdWdnZXN0aW9uSXRlbXMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCB0aGlzLmdldFN1Z2dlc3Rpb25JdGVtcyh1c2VySW5wdXQpOwogICAgICAgICAgaWYgKHVzZXJJbnB1dCAhPT0gaW5wdXQudmFsdWUudHJpbSgpKSByZXR1cm47CiAgICAgICAgICBzaG93U3VnZ2VzdGlvbkl0ZW1zKGl0ZW1zKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlSW5wdXRTdWdnZXN0aW9uKTsKICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB1cGRhdGVJbnB1dFN1Z2dlc3Rpb24pOwogICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdXBkYXRlSW5wdXRTdWdnZXN0aW9uKTsKICAgICAgY29uc3QgY2hvc2VTdWdnZXN0aW9uTGlzdEl0ZW0gPSBsaXN0aXRlbSA9PiB7CiAgICAgICAgY29uc3QgaXRlbSA9IEpTT04ucGFyc2UobGlzdGl0ZW0uZGF0YXNldC55YXdmU3VnZ2VzdGlvbkRhdGEpOwogICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLm5vcm1hbGl6ZUl0ZW0odGhpcy5wYXJzZVN1Z2dlc3Rpb25JdGVtKGl0ZW0pKTsKICAgICAgICBpZiAobm9ybWFsaXplZCA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgIHRoaXMuYWRkSXRlbShub3JtYWxpemVkKTsKICAgICAgICBpbnB1dC52YWx1ZSA9ICcnOwogICAgICAgIHVwZGF0ZUlucHV0U3VnZ2VzdGlvbigpOwogICAgICB9OwogICAgICBjb25zdCBnZXRGb2N1cyA9ICgpID0+IHN1Z2dlc3Rpb25JdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ3lhd2YtY3VycmVudCcpKTsKICAgICAgY29uc3Qgc2V0Rm9jdXMgPSBjdXJyZW50ID0+IHN1Z2dlc3Rpb25JdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtID09PSBjdXJyZW50KSB7CiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY3VycmVudCcpOwogICAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgaXRlbS5jbGFzc0xpc3QuYWRkKCdjdXInKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLWN1cnJlbnQnKTsKICAgICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnY3VyJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc3Qga2V5ZG93bkV2ZW50SGFuZGxlciA9IGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBoYW5kbGVyID0gewogICAgICAgICAgW2tleWJvYXJkLmNvZGUuRU5URVJdOiAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBnZXRGb2N1cygpOwogICAgICAgICAgICBpZiAoIWN1cnJlbnQpIHJldHVybjsKICAgICAgICAgICAgY2hvc2VTdWdnZXN0aW9uTGlzdEl0ZW0oY3VycmVudCk7CiAgICAgICAgICB9LAogICAgICAgICAgW2tleWJvYXJkLmNvZGUuVVBdOiAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG9sZCA9IGdldEZvY3VzKCk7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBvbGQ/LnByZXZpb3VzU2libGluZyA/PyBzdWdnZXN0aW9uSXRlbXNbc3VnZ2VzdGlvbkl0ZW1zLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBpZiAoY3VycmVudCkgc2V0Rm9jdXMoY3VycmVudCk7CiAgICAgICAgICB9LAogICAgICAgICAgW2tleWJvYXJkLmNvZGUuRE9XTl06ICgpID0+IHsKICAgICAgICAgICAgY29uc3Qgb2xkID0gZ2V0Rm9jdXMoKTsKICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IG9sZD8ubmV4dFNpYmxpbmcgPz8gc3VnZ2VzdGlvbkl0ZW1zWzBdOwogICAgICAgICAgICBpZiAoY3VycmVudCkgc2V0Rm9jdXMoY3VycmVudCk7CiAgICAgICAgICB9LAogICAgICAgIH1ba2V5Ym9hcmQuZXZlbnQoZXZlbnQpXTsKICAgICAgICBpZiAoIWhhbmRsZXIpIHJldHVybjsKICAgICAgICBoYW5kbGVyKCk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfTsKICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd25FdmVudEhhbmRsZXIpOwogICAgICBzdWdnZXN0aW9uTGlzdC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBldmVudCA9PiB7CiAgICAgICAgY29uc3QgbGlzdGl0ZW0gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGkueWF3Zi1saXN0LXN1Z2dlc3Rpb24taXRlbScpOwogICAgICAgIGNob3NlU3VnZ2VzdGlvbkxpc3RJdGVtKGxpc3RpdGVtKTsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9KTsKICAgICAgc3VnZ2VzdGlvbkxpc3QuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZXZlbnQgPT4gewogICAgICAgIGlmICghKGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm47CiAgICAgICAgY29uc3QgbGlzdGl0ZW0gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGkueWF3Zi1saXN0LXN1Z2dlc3Rpb24taXRlbScpOwogICAgICAgIHNldEZvY3VzKGxpc3RpdGVtKTsKICAgICAgfSk7CiAgICB9OwogICAgcGFyc2VTdWdnZXN0aW9uSXRlbShpdGVtKSB7IHJldHVybiBpdGVtOyB9CiAgfQogIHJ1bGUuY2xhc3MuQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gPSBDb2xsZWN0aW9uQ29uZmlnSXRlbTsKCiAgY2xhc3MgU3RyaW5nQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gZXh0ZW5kcyBDb2xsZWN0aW9uQ29uZmlnSXRlbSB7CiAgICBub3JtYWxpemVJdGVtKGl0ZW0pIHsgcmV0dXJuICgnJyArIGl0ZW0pLnRyaW0oKTsgfQogICAgdHJhY2soaXRlbSwgaW5kZXggPSAtMSkgeyByZXR1cm4gaXRlbTsgfQogICAgcmVuZGVyKC4uLmFyZ3MpIHsKICAgICAgY29uc3QgcmVuZGVyID0gc3VwZXIucmVuZGVyKC4uLmFyZ3MpOwogICAgICByZXR1cm4gcmVmZXJlbmNlID0+IHsKICAgICAgICByZW5kZXIocmVmZXJlbmNlKTsKICAgICAgICBjb25zdCBjb250YWluZXIgPSByZWZlcmVuY2UucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtcycpOwogICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXN0cmluZycpOwogICAgICB9OwogICAgfQogICAgdXBkYXRlSXRlbSgpIHsKICAgICAgLy8gdHJhY2sg6L+U5Zue55qE5piv5a2X5Liy5pys6Lqr77yM5aaC5p6cIHRyYWNrIOWvueW6lOWtl+S4suS4jeW6lOivpeacieWPmOWMlu+8jOaJgOS7peaXoOmcgOabtOaWsAogICAgfQogIH0KICBydWxlLmNsYXNzLlN0cmluZ0NvbGxlY3Rpb25Db25maWdJdGVtID0gU3RyaW5nQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy5zdHJpbmdzID0gU3RyaW5nQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CgogIGNsYXNzIFJlZ0V4cENvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgU3RyaW5nQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgY29uc3RydWN0b3IoaXRlbSwgcGFyZW50KSB7CiAgICAgIHN1cGVyKGl0ZW0sIHBhcmVudCk7CiAgICAgIHRoaXMuY29uZmlnQ2FjaGVEaXJ0eSA9IHRydWU7CiAgICB9CiAgICBpbml0Q29uZmlnKCkgewogICAgICBpZiAodGhpcy5jb25maWdJbml0aWFsaXplZCkgcmV0dXJuOwogICAgICBzdXBlci5pbml0Q29uZmlnKCk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4gewogICAgICAgIHRoaXMuY29uZmlnQ2FjaGVEaXJ0eSA9IHRydWU7CiAgICAgIH0pOwogICAgfQogICAgbm9ybWFsaXplSXRlbSh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHJldHVybiBudWxsOwogICAgICBpZiAodHlwZW9mIHZhbHVlLnNvdXJjZSAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsOwogICAgICBpZiAodHlwZW9mIHZhbHVlLmZsYWdzICE9PSAnc3RyaW5nJyAmJiB2YWx1ZS5mbGFncyAhPT0gdm9pZCAwKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3QgeyBzb3VyY2UsIGZsYWdzIH0gPSB2YWx1ZTsKICAgICAgcmV0dXJuIHsgc291cmNlLCBmbGFncyB9OwogICAgfQogICAgdHJhY2soeyBzb3VyY2UsIGZsYWdzIH0sIGluZGV4ID0gLTEpIHsgcmV0dXJuIGAvJHtzb3VyY2V9LyR7ZmxhZ3N9YDsgfQogICAgcmVuZGVySXRlbSh7IHNvdXJjZSwgZmxhZ3MgfSkgewogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYC8ke3NvdXJjZX0vJHtmbGFnc31gKTsKICAgIH0KICAgIGFzeW5jIHBhcnNlVXNlcklucHV0KHZhbHVlKSB7CiAgICAgIGxldCByZWdleHAgPSBudWxsOwogICAgICB0cnkgewogICAgICAgIHJlZ2V4cCA9IG5ldyBSZWdFeHAoLi4udmFsdWUubWF0Y2goL15cLyguKilcLyhbYS16QS1aXSopJC8pLnNsaWNlKDEpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZWdleHAgPSBuZXcgUmVnRXhwKHZhbHVlLCAnbXUnKTsKICAgICAgICB9IGNhdGNoIChlMikgeyAvKiBlbXB0eSAqLyB9CiAgICAgIH0KICAgICAgaWYgKCFyZWdleHApIHJldHVybiBudWxsOwogICAgICBjb25zdCB7IHNvdXJjZSwgZmxhZ3MgfSA9IHJlZ2V4cDsKICAgICAgaWYgKHNvdXJjZSA9PT0gJyg/OiknKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIFt7IHNvdXJjZSwgZmxhZ3MgfV07CiAgICB9CiAgICAvLyDmiJHku6zlgqjlrZjkuIDku73nvJbor5Hlpb3nmoTmraPliJnooajovr7lvI/vvIzov5nmoLflj6/ku6Xmlrnkvr/kvb/nlKgKICAgIGdldENvbmZpZ0NvbXBpbGVkKCkgewogICAgICB0aGlzLnVwZGF0ZUNvbmZpZ0NhY2hlKCk7CiAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0NhY2hlOwogICAgfQogICAgdXBkYXRlQ29uZmlnQ2FjaGUoKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuY29uZmlnQ2FjaGUpICYmICF0aGlzLmNvbmZpZ0NhY2hlRGlydHkpIHJldHVybjsKICAgICAgdGhpcy5yZWJ1aWxkQ29uZmlnQ2FjaGUoKTsKICAgIH0KICAgIHNldENvbmZpZyguLi5hcmdzKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHN1cGVyLnNldENvbmZpZyguLi5hcmdzKTsKICAgICAgdGhpcy5yZWJ1aWxkQ29uZmlnQ2FjaGVMYXRlcigpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmVidWlsZENvbmZpZ0NhY2hlKCkgewogICAgICB0aGlzLmNvbmZpZ0NhY2hlID0gdGhpcy5nZXRDb25maWcoKS5tYXAoaXRlbSA9PiB0aGlzLmNvbXBpbGVSZWdFeHAoaXRlbSkpOwogICAgICB0aGlzLmNvbmZpZ0NhY2hlRGlydHkgPSBmYWxzZTsKICAgIH0KICAgIHJlYnVpbGRDb25maWdDYWNoZUxhdGVyKCkgewogICAgICB0aGlzLmNvbmZpZ0NhY2hlRGlydHkgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpZiAodGhpcy5jb25maWdDYWNoZURpcnR5KSB7CiAgICAgICAgICB0aGlzLnJlYnVpbGRDb25maWdDYWNoZSgpOwogICAgICAgIH0KICAgICAgfSwgMCk7CiAgICB9CiAgICBhZGRJdGVtKHZhbHVlKSB7CiAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHRyYWNrID0gdGhpcy50cmFjayh2YWx1ZSk7CiAgICAgIGNvbnN0IGluZGV4ID0gdmFsdWVzLmZpbmRJbmRleCgoaXRlbSwgaW5kZXgpID0+IHRoaXMudHJhY2soaXRlbSwgaW5kZXgpID09PSB0cmFjayk7CiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICB2YWx1ZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7CiAgICAgIHN1cGVyLnNldENvbmZpZyh2YWx1ZXMpOwogICAgfQogICAgcmVtb3ZlSXRlbSh0cmFjaykgewogICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBjb25zdCBpbmRleCA9IHZhbHVlcy5maW5kSW5kZXgoKGl0ZW0sIGluZGV4KSA9PiB0aGlzLnRyYWNrKGl0ZW0sIGluZGV4KSA9PT0gdHJhY2spOwogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgdmFsdWVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgICAgc3VwZXIuc2V0Q29uZmlnKHZhbHVlcyk7CiAgICB9CiAgICBjb21waWxlUmVnRXhwKHsgc291cmNlLCBmbGFncyB9KSB7CiAgICAgIHJldHVybiBSZWdFeHAoc291cmNlLCBmbGFncyk7CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuUmVnRXhwQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gPSBSZWdFeHBDb2xsZWN0aW9uQ29uZmlnSXRlbTsKICBydWxlLnR5cGVzLnJlZ2V4ZW4gPSBSZWdFeHBDb2xsZWN0aW9uQ29uZmlnSXRlbTsKCiAgY2xhc3MgVXNlcklkQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gZXh0ZW5kcyBDb2xsZWN0aW9uQ29uZmlnSXRlbSB7CiAgICBub3JtYWxpemVJdGVtKHZhbHVlKSB7CiAgICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JykgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IGlkID0gU3RyaW5nKHZhbHVlLmlkKTsKICAgICAgaWYgKCFpZCB8fCAhK2lkKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIHsgaWQgfTsKICAgIH0KICAgIHRyYWNrKHsgaWQgfSwgaW5kZXggPSAtMSkgeyByZXR1cm4gaWQ7IH0KICAgIHJlbmRlciguLi5hcmdzKSB7CiAgICAgIGNvbnN0IHJlbmRlciA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgcmV0dXJuIHJlZmVyZW5jZSA9PiB7CiAgICAgICAgcmVuZGVyKHJlZmVyZW5jZSk7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmVmZXJlbmNlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24taXRlbXMnKTsKICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkJyk7CiAgICAgIH07CiAgICB9CiAgICByZW5kZXJJdGVtKHsgaWQgfSkgewogICAgICBjb25zdCB1c2VyaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICB1c2VyaXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy11c2VyLWl0ZW0nKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIHVzZXJpdGVtLnNldEF0dHJpYnV0ZSgndXNlcmNhcmQnLCBgaWQ9JHtpZH1gKTsKICAgICAgfQogICAgICBjb25zdCB1c2VyYXZhdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIHVzZXJhdmF0YXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctdXNlci1hdmF0YXInKTsKICAgICAgdXNlcml0ZW0uYXBwZW5kQ2hpbGQodXNlcmF2YXRhcik7CiAgICAgIGNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIHVzZXJuYW1lLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLXVzZXItbmFtZScpOwogICAgICB1c2VyaXRlbS5hcHBlbmRDaGlsZCh1c2VybmFtZSk7CiAgICAgIHJlcXVlc3QudXNlckluZm8oeyBpZCB9KS50aGVuKCh7IG5hbWUsIGF2YXRhciB9KSA9PiB7CiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgaW1nLnNyYyA9IGF2YXRhcjsKICAgICAgICBpbWcuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctdXNlci1hdmF0YXItaW1nJyk7CiAgICAgICAgdXNlcmF2YXRhci5hcHBlbmRDaGlsZChpbWcpOwogICAgICAgIHVzZXJuYW1lLnRleHRDb250ZW50ID0gbmFtZTsKICAgICAgfSk7CiAgICAgIHJldHVybiB1c2VyaXRlbTsKICAgIH0KICAgIGFzeW5jIHBhcnNlVXNlcklucHV0KHZhbHVlKSB7CiAgICAgIGNvbnN0IHVzZXJuYW1lID0gdmFsdWUucmVwbGFjZSgvXkAvLCAnJyk7CiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCByZXF1ZXN0LnVzZXJJbmZvKHsgbmFtZTogdXNlcm5hbWUgfSk7CiAgICAgIGlmICghdXNlcj8uaWQpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gW3sgaWQ6IHVzZXIuaWQgfV07CiAgICB9CiAgICBhc3luYyBwYXJzZUZhc3RJdGVtKHZhbHVlLCB0eXBlKSB7CiAgICAgIHJldHVybiBbdmFsdWVdOwogICAgfQogICAgdXBkYXRlSXRlbSgpIHsKICAgIH0KICAgIGFzeW5jIGdldFN1Z2dlc3Rpb25JdGVtcyh1c2VySW5wdXQpIHsKICAgICAgcmV0dXJuIHJlcXVlc3QudXNlclN1Z2dlc3QodXNlcklucHV0LnJlcGxhY2UoL15ALywgJycpKTsKICAgIH0KICAgIHJlbmRlclN1Z2dlc3Rpb25JdGVtKGxpc3RpdGVtLCBpdGVtKSB7CiAgICAgIGxpc3RpdGVtLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGl0ZW0ubmFtZSkpOwogICAgfQogIH0KICBydWxlLmNsYXNzLlVzZXJJZENvbGxlY3Rpb25Db25maWdJdGVtID0gVXNlcklkQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy51c2VycyA9IFVzZXJJZENvbGxlY3Rpb25Db25maWdJdGVtOwoKICBjbGFzcyBVc2VyTmFtZUNvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgU3RyaW5nQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgYXN5bmMgZ2V0U3VnZ2VzdGlvbkl0ZW1zKHVzZXJJbnB1dCkgewogICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHJlcXVlc3QudXNlclN1Z2dlc3QodXNlcklucHV0LnJlcGxhY2UoL15ALywgJycpKTsKICAgICAgcmV0dXJuIHVzZXJzLm1hcCh1c2VyID0+IHVzZXIubmFtZSk7CiAgICB9CiAgICByZW5kZXJTdWdnZXN0aW9uSXRlbShsaXN0aXRlbSwgaXRlbSkgewogICAgICBsaXN0aXRlbS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtKSk7CiAgICB9CiAgICByZW5kZXJJdGVtKHZhbHVlKSB7CiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnQCcgKyB2YWx1ZSk7CiAgICB9CiAgICBhc3luYyBwYXJzZVVzZXJJbnB1dCh1c2VySW5wdXQpIHsKICAgICAgcmV0dXJuIFt1c2VySW5wdXQudHJpbSgpLnJlcGxhY2UoL15APy8sICcnKV07CiAgICB9CiAgICBhc3luYyBwYXJzZUZhc3RJdGVtKHZhbHVlKSB7CiAgICAgIHJldHVybiBbdmFsdWUubmFtZV07CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuVXNlck5hbWVDb2xsZWN0aW9uQ29uZmlnSXRlbSA9IFVzZXJOYW1lQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy51c2VybmFtZXMgPSBVc2VyTmFtZUNvbGxlY3Rpb25Db25maWdJdGVtOwoKICBjbGFzcyBUb3BpY0NvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgU3RyaW5nQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgYXN5bmMgZ2V0U3VnZ2VzdGlvbkl0ZW1zKHVzZXJJbnB1dCkgewogICAgICBjb25zdCB0b3BpY3MgPSBhd2FpdCByZXF1ZXN0LnRvcGljU3VnZ2VzdCh1c2VySW5wdXQucmVwbGFjZSgvIy9nLCAnJykpOwogICAgICByZXR1cm4gdG9waWNzOwogICAgfQogICAgcmVuZGVyU3VnZ2VzdGlvbkl0ZW0obGlzdGl0ZW0sIGl0ZW0pIHsKICAgICAgbGlzdGl0ZW0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbSkpOwogICAgfQogICAgcmVuZGVySXRlbSh2YWx1ZSkgewogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyMnICsgdmFsdWUgKyAnIycpOwogICAgfQogICAgYXN5bmMgcGFyc2VVc2VySW5wdXQodXNlcklucHV0KSB7CiAgICAgIHJldHVybiBbdXNlcklucHV0LnRyaW0oKS5yZXBsYWNlKC8jL2csICcnKV07CiAgICB9CiAgICBhc3luYyBwYXJzZUZhc3RJdGVtKHZhbHVlKSB7CiAgICAgIHJldHVybiBbdmFsdWVdOwogICAgfQogIH0KICBydWxlLmNsYXNzLlRvcGljQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gPSBUb3BpY0NvbGxlY3Rpb25Db25maWdJdGVtOwogIHJ1bGUudHlwZXMudG9waWNzID0gVG9waWNDb2xsZWN0aW9uQ29uZmlnSXRlbTsKCiAgLy8g6L+Z5Liq55uu5YmN5LiN5pSv5oyBIFY3CiAgY2xhc3MgR3JvdXBJZENvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgbm9ybWFsaXplSXRlbSh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHJldHVybiBudWxsOwogICAgICBjb25zdCBpZCA9IFN0cmluZyh2YWx1ZS5pZCk7CiAgICAgIHJldHVybiB7IGlkIH07CiAgICB9CiAgICB0cmFjayh7IGlkIH0sIGluZGV4ID0gLTEpIHsgcmV0dXJuIGlkOyB9CiAgICByZW5kZXIoLi4uYXJncykgewogICAgICBjb25zdCByZW5kZXIgPSBzdXBlci5yZW5kZXIoLi4uYXJncyk7CiAgICAgIHJldHVybiByZWZlcmVuY2UgPT4gewogICAgICAgIHJlbmRlcihyZWZlcmVuY2UpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJlZmVyZW5jZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW1zJyk7CiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24tZ3JvdXAtaWQnKTsKICAgICAgfTsKICAgIH0KICAgIHJlbmRlckl0ZW0odmFsdWUpIHsKICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgOyAoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGdyb3VwcyA9IGF3YWl0IHJlcXVlc3QuZ3JvdXBMaXN0KCk7CiAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHMuZmluZChncm91cCA9PiBncm91cC5pZCA9PT0gdmFsdWUuaWQpOwogICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBncm91cC5uYW1lOwogICAgICB9KCkpOwogICAgICByZXR1cm4gc3BhbjsKICAgIH0KICAgIGFzeW5jIHBhcnNlR3JvdXBJbnB1dCh2YWx1ZSkgewogICAgICBjb25zdCBncm91cHMgPSBhd2FpdCByZXF1ZXN0Lmdyb3VwTGlzdCgpOwogICAgICBjb25zdCBncm91cCA9IGdyb3Vwcy5maW5kKGdyb3VwID0+IGdyb3VwLm5hbWUgPT09IHZhbHVlKTsKICAgICAgcmV0dXJuIFt7IGlkOiBncm91cC5pZCB9XTsKICAgIH0KICAgIGFzeW5jIHBhcnNlRmFzdEl0ZW0odmFsdWUsIHR5cGUpIHsKICAgICAgcmV0dXJuIFt2YWx1ZV07CiAgICB9CiAgICB1cGRhdGVJdGVtKCkgewogICAgfQogICAgYXN5bmMgZ2V0U3VnZ2VzdGlvbkl0ZW1zKHVzZXJJbnB1dCkgewogICAgICBjb25zdCBncm91cHMgPSBhd2FpdCByZXF1ZXN0Lmdyb3VwTGlzdCgpOwogICAgICByZXR1cm4gZ3JvdXBzLmZpbHRlcihncm91cCA9PiBncm91cC5uYW1lLmluY2x1ZGVzKHVzZXJJbnB1dCkpOwogICAgfQogICAgcmVuZGVyU3VnZ2VzdGlvbkl0ZW0obGlzdGl0ZW0sIGl0ZW0pIHsKICAgICAgbGlzdGl0ZW0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbS5uYW1lKSk7CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuR3JvdXBJZENvbGxlY3Rpb25Db25maWdJdGVtID0gR3JvdXBJZENvbGxlY3Rpb25Db25maWdJdGVtOwogIHJ1bGUudHlwZXMuZ3JvdXBzID0gR3JvdXBJZENvbGxlY3Rpb25Db25maWdJdGVtOwoKICBjb25zdCBjb25maWdJdGVtQnVpbGRlciA9IGZ1bmN0aW9uIChpdGVtLCBwYXJlbnQpIHsKICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7CiAgICBjb25zdCBjb25zdHJ1Y3RvciA9IHJ1bGUudHlwZXNbaXRlbS50eXBlXTsKICAgIGlmICghY29uc3RydWN0b3IpIHsKICAgICAgcmV0dXJuIG5ldyBDb25maWdJdGVtKGl0ZW0sIHBhcmVudCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV3IGNvbnN0cnVjdG9yKGl0ZW0sIHBhcmVudCk7CiAgICB9CiAgfTsKCiAgLyoqCiAgICog5o+P6L+w5LiA5Liq5Ye6546w5Zyo6K6+572u56qX5Y+j5Lit55qE6aG555uuCiAgICovCiAgY2xhc3MgUnVsZUl0ZW0gZXh0ZW5kcyBCb29sZWFuQ29uZmlnSXRlbSB7CiAgICBnZXQgdHlwZSgpIHsgcmV0dXJuICdub3JtYWwnOyB9CiAgICBnZXQgZGlzYWJsZWQoKSB7IHJldHVybiBmYWxzZTsgfQogICAgY29uc3RydWN0b3IoaXRlbSkgewogICAgICBzdXBlcihpdGVtLCBudWxsKTsKICAgICAgaWYgKHRoaXMucGFyZW50KSB7CiAgICAgICAgdGhpcy5wYXJlbnQuY2hpbGRyZW4ucHVzaCh0aGlzKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICog5o+P6L+w6K6+572u56qX5Y+j55qE5LiA5Liq5qCH562+6aG1CiAgICovCiAgY2xhc3MgVGFiIGV4dGVuZHMgUnVsZUl0ZW0gewogICAgY29uc3RydWN0b3IoaXRlbSkgewogICAgICBzdXBlcihpdGVtKTsKICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdOwogICAgICB0YWJzLnB1c2godGhpcyk7CiAgICB9CiAgICBnZXQgdHlwZSgpIHsgcmV0dXJuICd0YWInOyB9CiAgICBnZXQgYWx3YXlzKCkgeyByZXR1cm4gdHJ1ZTsgfQogICAgcmVuZGVyKCkgewogICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBzcGFuLnRleHRDb250ZW50ID0gdGhpcy50ZW1wbGF0ZSgpOwogICAgICByZXR1cm4gc3BhbjsKICAgIH0KICB9CiAgcnVsZS5UYWIgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIG5ldyBUYWIoaXRlbSk7CiAgfTsKICBydWxlLmNsYXNzLlRhYiA9IFRhYjsKICAvLyDov5nkuKrmoIfnrb7pobXkuI3kvJrlnKjorr7nva7nqpflj6PkuK3mmL7npLrvvIzkvYbmmK/kvJrlh7rnjrDlnKjmkJzntKLnu5Pmnpzph4zpnaIKICBydWxlLnZ0YWIgPSBydWxlLlRhYih7IHR5cGU6ICd2dGFiJyB9KTsKCiAgLyoqCiAgICog5o+P6L+w56qX5Y+j55qE5LiA57uE6K6+572u77yM5LiA57uE6K6+572u5pyJ5LiA5Liq5Yqg57KX5paH5a2X5pi+56S655qE5qCH6aKYCiAgICovCiAgY2xhc3MgR3JvdXAgZXh0ZW5kcyBSdWxlSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIGlmICghKGl0ZW0ucGFyZW50IGluc3RhbmNlb2YgVGFiKSkgewogICAgICAgIHRocm93IFR5cGVFcnJvcignR3JvdXAgbXVzdCBpbiBzb21lIFRhYicpOwogICAgICB9CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgICB0aGlzLmNoaWxkcmVuID0gW107CiAgICB9CiAgICBnZXQgdHlwZSgpIHsgcmV0dXJuICdncm91cCc7IH0KICAgIGdldCBhbHdheXMoKSB7IHJldHVybiB0cnVlOyB9CiAgICByZW5kZXIoLi4uYXJncykgewogICAgICBjb25zdCBub2RlID0gc3VwZXIucmVuZGVyKC4uLmFyZ3MpOwogICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWdyb3VwJyk7CiAgICAgIHJldHVybiBub2RlOwogICAgfQogIH0KICBydWxlLmNsYXNzLkdyb3VwID0gR3JvdXA7CiAgcnVsZS5Hcm91cCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gbmV3IEdyb3VwKGl0ZW0pOwogIH07CgogIC8qKgogICAqIOaPj+i/sOS4gOadoeiuvue9rgogICAqIOiuvue9ruS8muiwg+eUqCBleGVjdXRlIOWIneWni+WMluS4gOasoQogICAqIOS4jeimgemHjei9vSBleGVjdXRlIOWunueOsOmAu+i+ke+8jOebuOWPje+8jOW6lOivpemHjei9veS7peS4i+WHoOS4quWxnuaAp++8mgogICAqICAgY3NzOiBzdHJpbmcg5o+P6L+w6K+l6K6+572u6ZyA6KaB5Yqg5YWl55qEIENTU++8jOaXoOiuuuaYr+WQpuaJk+W8gOiuvue9ruWdh+S8mueUn+aViAogICAqICAgYWNzczogc3RyaW5nIOS7heW9k+ivpeiuvue9ruaJk+W8gOaXtuWKoOWFpei/meS6myBDU1MKICAgKiAgIGluaXQ6IEZ1bmN0aW9uIOWIneWni+WMluaXtuS8muWbnuiwg+S4gOasoQogICAqICAgYWluaXQ6IEZ1bmN0aW9uIOS7heW9k+ivpeiuvue9ruaJk+W8gOaXtu+8jOWIneWni+WMluaXtuWbnuiwg+S4gOasoQogICAqLwogIGNsYXNzIFJ1bGUgZXh0ZW5kcyBSdWxlSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIGlmICghKGl0ZW0ucGFyZW50IGluc3RhbmNlb2YgR3JvdXApKSB7CiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdSdWxlIG11c3QgaW4gc29tZSBHcm91cCcpOwogICAgICB9CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgICBydWxlcy5hbGwuc2V0KHRoaXMuaWQsIHRoaXMpOwogICAgfQogICAgLyoqIEB0eXBlIHtudW1iZXJ8bnVtYmVyW119ICovCiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gNjsgfSAvLyDlpoLmnpzmsqHmnInnibnmroror7TmmI7vvIzov5nmnaHop4TliJnlj6rmlK/mjIHml6fniYjvvIh2Nu+8ieW+ruWNmgogICAgaXNXZWlib1ZlcnNpb25TdXBwb3J0ZWQoKSB7CiAgICAgIGNvbnN0IHZlcnNpb25zID0gQXJyYXkuaXNBcnJheSh0aGlzLndlaWJvVmVyc2lvbikgPyB0aGlzLndlaWJvVmVyc2lvbiA6IFt0aGlzLndlaWJvVmVyc2lvbl07CiAgICAgIHJldHVybiB2ZXJzaW9ucy5pbmNsdWRlcyh5YXdmLldFSUJPX1ZFUlNJT04pOwogICAgfQogICAgcmVuZGVyKC4uLmFyZ3MpIHsKICAgICAgY29uc3Qgbm9kZSA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1ydWxlJyk7CiAgICAgIGlmICghdGhpcy5pc1dlaWJvVmVyc2lvblN1cHBvcnRlZCgpKSB7CiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1ydWxlLXVuc3VwcG9ydCcpOwogICAgICB9CiAgICAgIHJldHVybiBub2RlOwogICAgfQogICAgZXhlY3V0ZSgpIHsKICAgICAgaWYgKCF0aGlzLmlzV2VpYm9WZXJzaW9uU3VwcG9ydGVkKCkpIHJldHVybjsKICAgICAgY29uc3QgZW5hYmxlZCA9IHRoaXMuaXNFbmFibGVkKCk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgc3R5bGVzID0gW107CiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNzcyA9PT0gJ3N0cmluZycpIHN0eWxlcy5wdXNoKHRoaXMuY3NzKTsKICAgICAgICBpZiAodHlwZW9mIHRoaXMuY3NzID09PSAnZnVuY3Rpb24nKSBzdHlsZXMucHVzaCh0aGlzLmNzcygpKTsKICAgICAgICBpZiAoZW5hYmxlZCkgewogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmFjc3MgPT09ICdzdHJpbmcnKSBzdHlsZXMucHVzaCh0aGlzLmFjc3MpOwogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmFjc3MgPT09ICdmdW5jdGlvbicpIHN0eWxlcy5wdXNoKHRoaXMuYWNzcygpKTsKICAgICAgICB9CiAgICAgICAgaWYgKHN0eWxlcy5sZW5ndGgpIHJ1bGUuc3R5bGUuYXBwZW5kKHN0eWxlcy5qb2luKCdcbicpKTsKICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5pdCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5pbml0KCk7CiAgICAgICAgaWYgKGVuYWJsZWQpIHsKICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5haW5pdCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5haW5pdCgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIGV4ZWN1dGUgcnVsZSAlbzogJW8nLCB0aGlzLCBlKTsKICAgICAgfQogICAgfQogIH0KICBydWxlLmNsYXNzLlJ1bGUgPSBSdWxlOwogIHJ1bGUuUnVsZSA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICBjb25zdCByZXN1bHQgPSBuZXcgUnVsZShpdGVtKTsKICAgIGlmIChydWxlLmluaXRlZCkgcmVzdWx0LmV4ZWN1dGUoKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgLyoqCiAgICog6K6+572u5Lit55qE5LiA5Liq57qv5paH5pys6aG577yM6L+Z5Liq6K6+572u6aG55rKh5pyJ5aSN6YCJ5qGGCiAgICog57un5om/6Ieq5pyJ5aSN6YCJ5qGG55qE6K6+572u6aG577yM5q2k5pe26K6k5Li66K+l5aSN6YCJ5qGG5piv5oC76KKr6YCJ5Lit55qECiAgICovCiAgY2xhc3MgVGV4dCBleHRlbmRzIFJ1bGUgewogICAgY29uc3RydWN0b3IoaXRlbSkgewogICAgICBzdXBlcihpdGVtKTsKICAgICAgdGhpcy5hbHdheXMgPSB0cnVlOwogICAgfQogICAgcmVuZGVyKC4uLmFyZ3MpIHsKICAgICAgY29uc3Qgbm9kZSA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy10ZXh0Jyk7CiAgICAgIHJldHVybiBub2RlOwogICAgfQogIH0KICBydWxlLlRleHQgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIG5ldyBUZXh0KGl0ZW0pOwogIH07CiAgcnVsZS5jbGFzcy5UZXh0ID0gVGV4dDsKCiAgLyoqCiAgICog5LuO5omA5pyJ6K6+572u6aG55Lit5qC55o2u5p2h5Lu2562b6YCJ5Ye65LiA5Lqb6K6+572u6aG5CiAgICog5LmL5ZCO5Y+v55So5LqO5bGV56S65a+56K+d5qGG562J5pON5L2cCiAgICogQHBhcmFtIHt7IGJhc2U6IFRhYltdLCBmaWx0ZXI6IChydWxlOiBSdWxlKSA9PiBib29sZWFuIH19IGJhc2Ug5o+P6L+w5pCc57Si6IyD5Zu0CiAgICovCiAgcnVsZS5xdWVyeSA9IGZ1bmN0aW9uICh7CiAgICBiYXNlID0gdGFicywKICAgIGZpbHRlciA9IG51bGwsCiAgICBpbmNsdWRlSGlkZGVuID0gZmFsc2UsCiAgfSA9IHt9KSB7CiAgICBjb25zdCByZXN1bHQgPSBuZXcgU2V0KCk7CiAgICA7IChmdW5jdGlvbiBxdWVyeShpdGVtcykgewogICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLmhpZGRlbiAmJiAhaW5jbHVkZUhpZGRlbikgcmV0dXJuOwogICAgICAgIGlmIChpdGVtLmRpc2FibGVkKSByZXR1cm47CiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBUYWIgfHwgaXRlbSBpbnN0YW5jZW9mIEdyb3VwKSB7CiAgICAgICAgICBxdWVyeShpdGVtLmNoaWxkcmVuKTsKICAgICAgICB9CiAgICAgICAgaWYgKCEoaXRlbSBpbnN0YW5jZW9mIFJ1bGUpKSByZXR1cm47CiAgICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyKGl0ZW0pKSByZXR1cm47CiAgICAgICAgcmVzdWx0LmFkZChpdGVtKTsKICAgICAgfSk7CiAgICB9KGJhc2UpKTsKICAgIHJldHVybiBbLi4ucmVzdWx0XTsKICB9OwoKICBydWxlLmluaXRlZCA9IGZhbHNlOwogIHJ1bGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgIHJ1bGUuc3R5bGUgPSBjc3MuYWRkKCcnKTsKICAgIHJ1bGUuaW5pdGVkID0gdHJ1ZTsKICAgIHJ1bGUucXVlcnkoeyBpbmNsdWRlSGlkZGVuOiB0cnVlIH0pLmZvckVhY2gocnVsZSA9PiBydWxlLmV4ZWN1dGUoKSk7CiAgfTsKCiAgaW5pdC5vblJlYWR5KCgpID0+IHsKICAgIHJ1bGUuaW5pdCgpOwogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkRFRkFVTFQgfSk7CgogIGNzcy5hcHBlbmQoYAoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1ncm91cCB7IGRpc3BsYXk6IGJsb2NrOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxNXB4IDEwcHggNXB4OyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLXJ1bGUgeyBkaXNwbGF5OiBibG9jazsgbWFyZ2luOiA1cHggMjBweDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1ydWxlLXVuc3VwcG9ydCB7IG9wYWNpdHk6IDAuNTsgfQoueWF3Zi1XQlY2IC55YXdmLWJ1YmJsZSAueWF3Zi1jb25maWctcnVsZSB7IGRpc3BsYXk6IGlubGluZTsgbWFyZ2luOiAwOyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLXJ1bGUgPiBsYWJlbCArIGxhYmVsIHsgbWFyZ2luLWxlZnQ6IDhweDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1ydWxlID4gYnIgKyBsYWJlbCB7IG1hcmdpbi1sZWZ0OiAyMHB4OyB9Ci55YXdmLVdCVjYgLnlhd2YtYnViYmxlLWljb24geyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBtYXJnaW4tbGVmdDogMnB4OyBtYXJnaW4tcmlnaHQ6IDJweDsgfQoueWF3Zi1XQlY2IC55YXdmLWJ1YmJsZS10ZXh0IC55YXdmLWJ1YmJsZS1pY29uIHsgZGlzcGxheTogbm9uZTsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1zZWxlY3QgeyBoZWlnaHQ6IDIwcHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctbnVtYmVyIGlucHV0W3R5cGU9Im51bWJlciJdIHsgd2lkdGg6IDQ1cHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctcmFuZ2UgeyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctcmFuZ2Utd3JhcCB7IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgcmlnaHQ6IDA7IG1hcmdpbjogMDsgYm90dG9tOiBjYWxjKDEwMCUgKyAycHgpOyBoZWlnaHQ6IDgwcHg7IGJhY2tncm91bmQ6ICNmMGYwZjA7IGJhY2tncm91bmQ6IE1lbnU7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctcmFuZ2U6Zm9jdXMtd2l0aGluIC55YXdmLWNvbmZpZy1yYW5nZS13cmFwIHsgZGlzcGxheTogYmxvY2s7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctcmFuZ2UgaW5wdXRbdHlwZT0icmFuZ2UiXSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7IG1hcmdpbjogYXV0bzsgd2lkdGg6IDc1cHg7IHJpZ2h0OiAtMjBweDsgbGVmdDogLTIwcHg7IHRyYW5zZm9ybTogcm90YXRlKC05MGRlZyk7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sb3IgaW5wdXRbdHlwZT0iY29sb3IiXSB7IHdpZHRoOiA0NXB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBoZWlnaHQ6IDIwcHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctdGV4dCB0ZXh0YXJlYSB7IHdpZHRoOiBjYWxjKDEwMCUgLSAyMHB4KTsgcGFkZGluZy1sZWZ0OiAxMHB4OyBwYWRkaW5nLXJpZ2h0OiAxMHB4OyBtaW4taGVpZ2h0OiAxMjBweDsgcmVzaXplOiB2ZXJ0aWNhbDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWlucHV0IHsgbWFyZ2luOiA1cHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogNXB4OyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tbGlzdCAueWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtIHsgcGFkZGluZzogMCA1cHggMCAyMHB4OyBtaW4td2lkdGg6IDA7IGhlaWdodDogMjBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IGN1cnNvcjogZGVmYXVsdDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXJlbW92ZSB7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgZGlzcGxheTogZmxvdy1yb290OyB3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4OyBsaW5lLWhlaWdodDogMjBweDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0tY29udGVudCB7IG1heC13aWR0aDogNTAwcHg7IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBvdmVyZmxvdzogaGlkZGVuOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tdXNlci1pZCAueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHsgbWFyZ2luLWxlZnQ6IC01cHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0geyB3aWR0aDogOTBweDsgaGVpZ2h0OiA1MHB4OyBwYWRkaW5nOiAxcHggMjBweCAxcHggNTZweDsgdGV4dC1hbGlnbjogbGVmdDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlIHsgcmlnaHQ6IDA7IGxlZnQ6IGF1dG87IHRleHQtYWxpZ246IGNlbnRlcjsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlIGEgeyBwb3NpdGlvbjogc3RhdGljOyBtYXJnaW46IDA7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy11c2VyLWF2YXRhciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMXB4OyB0b3A6IDFweDsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLXVzZXItYXZhdGFyLWltZyB7IHdpZHRoOiA1MHB4OyBoZWlnaHQ6IDUwcHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy11c2VyLW5hbWUgeyBtYXgtd2lkdGg6IDEwMCU7IHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgbWF4LWhlaWdodDogNDBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbi55YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbiB7IHotaW5kZXg6IDEwMDAwOyBwb3NpdGlvbjogZml4ZWQ7IH0KLnlhd2YtV0JWNiAueWF3Zi1saXN0LXN1Z2dlc3Rpb24taXRlbSBhIHsgbWluLWhlaWdodDogMTUuNnB4OyB9CmApOwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtV0JWNyBsYWJlbDpob3ZlciAueWF3Zi1jb25maWctY2hlY2tib3gtd3JhcCAueWF3Zi1jb25maWctY2hlY2tib3gtaWNvbiwKLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY2hlY2tib3gtd3JhcDpob3ZlciAueWF3Zi1jb25maWctY2hlY2tib3gtaWNvbiB7IGJvcmRlci1jb2xvcjogdmFyKC0tdy1jaGVja2JveC1jaGVjay1jb2xvcik7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY2hlY2tib3gtd3JhcCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgcG9zaXRpb246IHJlbGF0aXZlOyB3aWR0aDogdmFyKC0tdy1jaGVja2JveC1zaXplKTsgaGVpZ2h0OiB2YXIoLS13LWNoZWNrYm94LXNpemUpOyBvdmVyZmxvdzogaGlkZGVuOyBtYXJnaW4tcmlnaHQ6IDRweDsgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNoZWNrYm94IHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAtMTAwcHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY2hlY2tib3gtaWNvbiB7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXctY2hlY2tib3gtYm9yZGVyKTsgY29sb3I6IHZhcigtLXctY2hlY2tib3gtY2hlY2stY29sb3IpOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNoZWNrYm94LWljb24geyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jaGVja2JveC1pY29uIHN2ZyB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtMXB4OyBsZWZ0OiAtMXB4OyByaWdodDogLTFweDsgYm90dG9tOiAtMXB4OyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNoZWNrYm94Om5vdCg6Y2hlY2tlZCkgfiAueWF3Zi1jb25maWctY2hlY2tib3gtaWNvbiBzdmcgeyBkaXNwbGF5OiBub25lOyB9CgoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1ncm91cCB7IGRpc3BsYXk6IGJsb2NrOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxNXB4IDEwcHggNXB4OyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLXJ1bGUgeyBkaXNwbGF5OiBibG9jazsgbWFyZ2luOiA1cHggMjBweDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1ydWxlLXVuc3VwcG9ydCB7IG9wYWNpdHk6IDAuNTsgfQoueWF3Zi1XQlY3IC55YXdmLWJ1YmJsZSAueWF3Zi1jb25maWctcnVsZSB7IGRpc3BsYXk6IGlubGluZTsgbWFyZ2luOiAwOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLXJ1bGUgPiBsYWJlbCArIGxhYmVsIHsgbWFyZ2luLWxlZnQ6IDhweDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1ydWxlID4gYnIgKyBsYWJlbCB7IG1hcmdpbi1sZWZ0OiAyMHB4OyB9Ci55YXdmLVdCVjcgLnlhd2YtYnViYmxlLWljb24geyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBtYXJnaW4tbGVmdDogMnB4OyBtYXJnaW4tcmlnaHQ6IDJweDsgZGlzcGxheTogaW5saW5lOyB9Ci55YXdmLVdCVjcgLnlhd2YtYnViYmxlLXRleHQgLnlhd2YtYnViYmxlLWljb24geyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLXNlbGVjdCB7IGhlaWdodDogMjBweDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1udW1iZXIgaW5wdXRbdHlwZT0ibnVtYmVyIl0geyB3aWR0aDogNDVweDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1yYW5nZSB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1yYW5nZS13cmFwIHsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyByaWdodDogMDsgbWFyZ2luOiAwOyBib3R0b206IGNhbGMoMTAwJSArIDJweCk7IGhlaWdodDogODBweDsgYmFja2dyb3VuZDogI2YwZjBmMDsgYmFja2dyb3VuZDogTWVudTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1yYW5nZTpmb2N1cy13aXRoaW4gLnlhd2YtY29uZmlnLXJhbmdlLXdyYXAgeyBkaXNwbGF5OiBibG9jazsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1yYW5nZSBpbnB1dFt0eXBlPSJyYW5nZSJdIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGJvdHRvbTogMDsgbWFyZ2luOiBhdXRvOyB3aWR0aDogNzVweDsgcmlnaHQ6IC0yMHB4OyBsZWZ0OiAtMjBweDsgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xvciBpbnB1dFt0eXBlPSJjb2xvciJdIHsgd2lkdGg6IDQ1cHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGhlaWdodDogMjBweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy10ZXh0IHRleHRhcmVhIHsgd2lkdGg6IDEwMCU7IG1pbi1oZWlnaHQ6IDEyMHB4OyByZXNpemU6IHZlcnRpY2FsOyBwYWRkaW5nLWxlZnQ6IHZhcigtLXctaW5wdXQtaW5kZW50KTsgcGFkZGluZy1yaWdodDogdmFyKC0tdy1pbnB1dC1pbmRlbnQpOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tc3VibWl0LAoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1rZXkgYnV0dG9uIHsgcGFkZGluZzogNHB4IDE2cHg7IG1hcmdpbjogMCA0cHg7IHZlcnRpY2FsLWFsaWduOiBib3R0b207IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogNXB4OyBwYWRkaW5nOiAwOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tbGlzdCAueWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtIHsgcGFkZGluZzogMCA1cHggMCAyMHB4OyBtaW4td2lkdGg6IDA7IGhlaWdodDogMjBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IGN1cnNvcjogZGVmYXVsdDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBwb3NpdGlvbjogcmVsYXRpdmU7IG1hcmdpbi1sZWZ0OiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXctYi1saW5lLXByaW1hcnktYm9yZGVyKTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXJlbW92ZSB7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMnB4OyBsZWZ0OiAwOyBkaXNwbGF5OiBmbG93LXJvb3Q7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7IGxpbmUtaGVpZ2h0OiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGN1cnNvcjogcG9pbnRlcjsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0tY29udGVudCB7IG1heC13aWR0aDogNTAwcHg7IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBvdmVyZmxvdzogaGlkZGVuOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tdXNlci1pZCAueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHsgbWFyZ2luLWxlZnQ6IC01cHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0geyB3aWR0aDogOTBweDsgaGVpZ2h0OiA1MHB4OyBwYWRkaW5nOiAxcHggMjBweCAxcHggNTZweDsgdGV4dC1hbGlnbjogbGVmdDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlIHsgcmlnaHQ6IDA7IGxlZnQ6IGF1dG87IHRleHQtYWxpZ246IGNlbnRlcjsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlIGEgeyBwb3NpdGlvbjogc3RhdGljOyBtYXJnaW46IDA7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy11c2VyLWF2YXRhciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMXB4OyB0b3A6IDFweDsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLXVzZXItYXZhdGFyLWltZyB7IHdpZHRoOiA1MHB4OyBoZWlnaHQ6IDUwcHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy11c2VyLW5hbWUgeyBtYXgtd2lkdGg6IDEwMCU7IHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgbWF4LWhlaWdodDogNDBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbi55YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbiB7IHotaW5kZXg6IDEwMDAwOyBwb3NpdGlvbjogZml4ZWQ7IGJhY2tncm91bmQ6IHZhcigtLXctY2FyZC1iYWNrZ3JvdW5kKTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tdy1sYXllci1ib3JkZXIpOyBib3JkZXItcmFkaXVzOiB2YXIoLS13LWxheWVyLXJhZGl1cyk7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb2xsZWN0aW9uLXN1Z2dlc3Rpb24tbGlzdCB7IG1hcmdpbjogMDsgcGFkZGluZzogMTBweCAwOyBsaXN0LXN0eWxlOiBub25lOyB9Ci55YXdmLVdCVjcgLnlhd2YtbGlzdC1zdWdnZXN0aW9uLWl0ZW0geyBsaW5lLWhlaWdodDogMjBweDsgcGFkZGluZzogNXB4IDEwcHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1saXN0LXN1Z2dlc3Rpb24taXRlbS55YXdmLWN1cnJlbnQgeyBsaW5lLWhlaWdodDogMjBweDsgcGFkZGluZzogNXB4IDEwcHg7IGJhY2tncm91bmQ6IHZhcigtLXctcG9wLWl0ZW0taG92ZXIpOyB9Ci55YXdmLVdCVjcgLnlhd2YtbGlzdC1zdWdnZXN0aW9uLWl0ZW0gYSB7IG1pbi1oZWlnaHQ6IDE1LjZweDsgY29sb3I6IGluaGVyaXQ7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1pdGVtIC53b28taW5wdXQtd3JhcCB7IGhlaWdodDogMjBweDsgbGluZS1oZWlnaHQ6IDIwcHg7IC0tdy1pbnB1dC1oZWlnaHQ6IDIwcHg7IGJveC1zaXppbmc6IGNvbnRlbnQtYm94OyBtYXJnaW4tbGVmdDogNHB4OyBtYXJnaW4tcmlnaHQ6IDRweDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1pdGVtIC53b28taW5wdXQtd3JhcC53b28taW5wdXQtdGV4dCB7IGhlaWdodDogYXV0bzsgd2lkdGg6IDEwMCU7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctaXRlbSAud29vLWlucHV0LXdyYXAgaW5wdXQsCi55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWl0ZW0gLndvby1pbnB1dC13cmFwIHNlbGVjdCB7IHZlcnRpY2FsLWFsaWduOiBib3R0b207IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctaXRlbSAueWF3Zi1jb25maWctc2VsZWN0IC53b28taW5wdXQtd3JhcCB7IHBhZGRpbmctcmlnaHQ6IDM2cHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1pdGVtIC55YXdmLWNvbmZpZy1zZWxlY3QgLndvby1pbnB1dC13cmFwOjpiZWZvcmUgeyBjb250ZW50OiAiICI7IGRpc3BsYXk6IGJsb2NrOyB3aWR0aDogMDsgaGVpZ2h0OiAwOyBib3JkZXItdG9wOiA0cHggc29saWQgY3VycmVudENvbG9yOyBib3JkZXItbGVmdDogNHB4IHNvbGlkIHRyYW5zcGFyZW50OyBib3JkZXItcmlnaHQ6IDRweCBzb2xpZCB0cmFuc3BhcmVudDsgcG9zaXRpb246IGFic29sdXRlOyByaWdodDogMTRweDsgdG9wOiBjYWxjKDUwJSAtIDJweCk7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctdGV4dCAud29vLWlucHV0LXdyYXAgeyB3aWR0aDogNTIwcHg7IGhlaWdodDogYXV0bzsgcGFkZGluZzogMDsgfQpgKTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZXNldC9vYnNlcnZlci5qcwovKioKICog6L+Z5Liq5paH5Lu255So5LqO5qOA5p+l6aG16Z2i5Lit5piv5ZCm5pyJ5paw5YWD57Sg5re75Yqg5oiW5YWD57Sg5Y+Y5YyW77yM5bm26Ieq5Yqo6Kem5Y+R5ZCE57G75Zue6LCDCiAqIOeUseS6juW+ruWNmuS8mumikee5geabtOaWsOeVjOmdouS4iuaYvuekuueahOaXpeacn++8iMOXw5fliIbpkp/liY3vvInmlofmnKzvvIwKICogICDov5nph4znibnliKvov4fmu6Tmjonkuobml6XmnJ/mmL7npLrnmoTnm7jlhbPlj5jljJbvvIzlpoLmnpzku4XljIXmi6zmraTnsbvlj5jljJbliJnkuI3op6blj5Hlm57osIMKICogeWF3Zi5vYnNlcnZlci5kb20uYWRkKGNhbGxiYWNrOiBGdW5jdGlvbikg5re75Yqg5LiA5Liq5Zue6LCDCiAqIHlhd2Yub2JzZXJ2ZXIuZG9tLnJlbW92ZShjYWxsYmFjazogRnVuY3Rpb24pIOWPlua2iOS4gOS4quWbnuiwgwogKi8KOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CgogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyID0geWF3Zi5vYnNlcnZlciA/PyB7fTsKICBvYnNlcnZlci5kb20gPSB7fTsKCiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwogIGNvbnN0IHBlcmZvcm1hbmNlID0gdXRpbC5wZXJmb3JtYW5jZTsKCiAgLyoqIEB0eXBlIHtBcnJheTxGdW5jdGlvbj59ICovCiAgY29uc3QgY2FsbGJhY2tzID0gW107CgogIC8qKgogICAqIOW9k+mhtemdouacieS7u+S9leWPmOWMluaXtuWbnuiwgwogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICovCiAgb2JzZXJ2ZXIuZG9tLmFkZCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spOwogICAgcmV0dXJuIGNhbGxiYWNrOwogIH07CgogIC8qKgogICAqIOenu+mZpOS5i+WJjea3u+WKoOeahOWbnuiwgwogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICovCiAgb2JzZXJ2ZXIuZG9tLnJlbW92ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09PSBjYWxsYmFjayk7CiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiBmb3VuZDsKICAgICAgY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIGZvdW5kID0gdHJ1ZTsKICAgIH0KICB9OwoKICBjb25zdCBhY3QgPSBmdW5jdGlvbiAoKSB7CiAgICBjYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgcGVyZm9ybWFuY2UoY2FsbGJhY2spOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgaGFuZGxpbmcgbXV0YXRpb24gY2FsbGJhY2s6ICVvICVvJywgY2FsbGJhY2ssIGUpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvKiogQHR5cGUge2Jvb2xlYW4/fSAqLwogIGxldCBzdGF0dXMgPSBudWxsOwogIC8qKiBAdHlwZSB7TXV0YXRpb25DYWxsYmFja30gKi8KICBjb25zdCBvbk11dGF0aW9uID0gZnVuY3Rpb24gKG11dGF0aW9uKSB7CiAgICBpZiAobXV0YXRpb24gJiYgbXV0YXRpb24uZXZlcnkoZnVuY3Rpb24gaXNEYXRlKHgpIHsKICAgICAgbGV0IHRhcmdldCA9IHgudGFyZ2V0OwogICAgICByZXR1cm4gdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0ZScpIHx8IHRhcmdldC5oYXNBdHRyaWJ1dGUoJ3lhd2YtZGF0ZScpOwogICAgfSkpIHJldHVybjsKICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSBzdGF0dXMgPSB0cnVlOwogICAgaWYgKHN0YXR1cyAhPT0gbnVsbCkgcmV0dXJuOwogICAgYWN0KCk7IHN0YXR1cyA9IGZhbHNlOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChzdGF0dXMgPT09IHRydWUpIGFjdCgpOwogICAgICBzdGF0dXMgPSBudWxsOwogICAgfSwgMTAwKTsKICB9OwoKICBjb25zdCBvYnNlcnZlID0gZnVuY3Rpb24gKCkgewogICAgb25NdXRhdGlvbigpOwogICAgKG5ldyBNdXRhdGlvbk9ic2VydmVyKG9uTXV0YXRpb24pKQogICAgICAub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsKICB9OwoKICBpbml0Lm9uTG9hZChmdW5jdGlvbiAoKSB7CiAgICBvYnNlcnZlKCk7CiAgfSwgeyBwcmlvcml0eTogcHJpb3JpdHkuTEFTVCArIHByaW9yaXR5LkFGVEVSICogMiB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZXNldC9maWx0ZXIuanMKLyoqCiAqIOi/meS4quaWh+S7tueUqOS6juiHquWKqOajgOafpemhtemdouS4reWHuueOsOeahOW+ruWNmuWSjOivhOiuuu+8jOW5tuinpuWPkei/h+a7pOinhOWImQogKiDmtonlj4rlh73mlbDljIXmi6wKICogICB5YXdmLm9ic2VydmVyLjx0eXBlPi48YWN0aW9uPgogKiA8dHlwZT46IGZlZWQgLyBjb21tZW50IOWkhOeQhuW+ruWNmiAvIOivhOiuugogKiA8YWN0aW9uPjoKICogICBhZGQocnVsZTogZmVlZCA9PiBzdHJpbmcsIHsgcHJpb3JpdHk6IG51bWJlciB9KTog5re75Yqg5LiA5Liq6KeE5YiZCiAqICAgb25CZWZvcmUoY2FsbGJhY2s6IGZlZWQgPT4gUHJvbWlzZT8pCiAqICAgb25BZnRlcihjYWxsYmFjazogZmVlZCA9PiBQcm9taXNlPywgcmVzdWx0KQogKiAgIG9uRmluYWxseShjYWxsYmFjazogZmVlZCA9PiBQcm9taXNlPywgcmVzdWx0KQogKiAgIG9uRG9uZSgpCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKCiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3Qgc3RyaW5ncyA9IHV0aWwuc3RyaW5nczsKCiAgLyoqCiAgICog55So5LqO5pS26ZuG6ZKI5a+55b6u5Y2a5oiW6K+E6K6655qE6L+H5ruk6KeE5YiZ77yM5bm25qC55o2u5LyY5YWI57qn6YCQ5LiA5qOA5p+lCiAgICovCiAgY2xhc3MgRmlsdGVyQ29sbGVjdGlvbiB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgLyoqIEB0eXBlIHtBcnJheTx7IHByaW9yaXR5OiBudW1iZXIsIGZpbHRlcjogRnVuY3Rpb259Pn0gKi8KICAgICAgdGhpcy5maWx0ZXJzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbHRlcgogICAgICogQHBhcmFtIHtudW1iZXJ9IHByaW9yaXR5CiAgICAgKi8KICAgIGFkZChmaWx0ZXIsIHByaW9yaXR5ID0gMCkgewogICAgICB0aGlzLmZpbHRlcnMucHVzaCh7IGZpbHRlciwgcHJpb3JpdHkgfSk7CiAgICAgIHRoaXMuZmlsdGVycy5zb3J0KCh4LCB5KSA9PiB5LnByaW9yaXR5IC0geC5wcmlvcml0eSk7CiAgICB9CiAgICBhc3luYyBmaWx0ZXIoLi4ucGFyYW1zKSB7CiAgICAgIGZvciAoY29uc3QgeyBmaWx0ZXIgfSBvZiB0aGlzLmZpbHRlcnMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IHJldCA9IGZpbHRlciguLi5wYXJhbXMpOwogICAgICAgICAgaWYgKHJldCAmJiAhcmV0LnJlc3VsdCAmJiB0eXBlb2YgcmV0LnRoZW4gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmV0ID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKHJldCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZW9mIHJldCA9PT0gJ3N0cmluZycpIHJldCA9IHsgcmVzdWx0OiByZXQgfTsKICAgICAgICAgIGlmICghcmV0IHx8ICFyZXQucmVzdWx0KSBjb250aW51ZTsKICAgICAgICAgIGNvbnN0IHsgcmVzdWx0LCByZWFzb24gPSBudWxsIH0gPSByZXQ7CiAgICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJlc3VsdCArICcnLCByZWFzb246IHJlYXNvbiArICcnLCBmaWx0ZXIgfTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB1dGlsLmRlYnVnKCdFeGNlcHRpb24gd2hpbGUgcGFyc2luZyBydWxlICVvOlxucGFyYW1zOiAlb1xuZXhjZXB0aW9uOiAlb1xuJW8nLCBmaWx0ZXIsIHBhcmFtcywgZSwgZS5zdGFjayk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB7IHJlc3VsdDogbnVsbCB9OwogICAgfQogIH0KCiAgLyoqCiAgICog5Zyo5Y+R546w5LiA5p2h5paw55qE6ZyA6KaB6L+H5ruk55qE5b6u5Y2a5oiW6K+E6K665pe277yM5Lya5L6d5qyh6LCD55So77yaCiAgICogICAxLiBvbkJlZm9yZShmZWVkKQogICAqICAgMi4g6YCQ5Liq6LCD55So6L+H5ruk6KeE5YiZCiAgICogICAzLiDlpoLmnpzov4fmu6Top4TliJnooajmmI7mnKrooqvpmpDol48gb25BZnRlcihmZWVkLCB7IHJlc3VsdCwgcmVhc29uIH0pCiAgICogICA0LiBvbkZpbmFsbHkoZmVlZCwgeyByZXN1bHQsIHJlYXNvbiB9KQogICAqIOaJgOacieWFg+e0oOWujOaIkOWkhOeQhuaXtuiwg+eUqCBvbkRvbmUKICAgKiDmiYDmnInlm57osIPlpoLmnpzov5Tlm54gUHJvbWlzZe+8jOWImeS8muetieW+hSBQcm9taXNlIOe7k+adn+WGjei/m+WFpeS4i+S4gOmYtuautQogICAqLwogIGNsYXNzIEZpbHRlck9ic2VydmVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmJlZm9yZSA9IFtdOwogICAgICB0aGlzLmFmdGVyID0gW107CiAgICAgIHRoaXMuZmluYWxseSA9IFtdOwogICAgICB0aGlzLmRvbmUgPSBbXTsKICAgICAgdGhpcy5maWx0ZXJzID0gbmV3IEZpbHRlckNvbGxlY3Rpb24oKTsKICAgICAgdGhpcy5wZW5kaW5nID0gW107CiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOwogICAgICB0aGlzLmNsZWFuID0gbnVsbDsKICAgIH0KICAgIGZpbHRlcihmaWx0ZXIsIHsgcHJpb3JpdHkgPSAwIH0gPSB7fSkgewogICAgICB0aGlzLmZpbHRlcnMuYWRkKGZpbHRlciwgcHJpb3JpdHkpOwogICAgfQogICAgLyoqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBjYWxsYmFja3MgKi8KICAgIGFzeW5jIGludm9rZUNhbGxiYWNrcyhjYWxsYmFja3MsIC4uLmFyZ3MpIHsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tzLm1hcChjYWxsYmFjayA9PiAoCiAgICAgICAgbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoY2FsbGJhY2soLi4uYXJncykpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSBmaWx0ZXIgY2FsbGJhY2s6ICVvICVvJywgY2FsbGJhY2ssIGUpOwogICAgICAgICAgfQogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pCiAgICAgICkpKTsKICAgIH0KICAgIGFzeW5jIGFjdGl2ZShpdGVtcywgaXNBcHBlbmQgPSB0cnVlKSB7CiAgICAgIGlmIChpc0FwcGVuZCkgewogICAgICAgIHRoaXMucGVuZGluZy5wdXNoKC4uLml0ZW1zKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBlbmRpbmcudW5zaGlmdCguLi5pdGVtcyk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYnVzeSkgewogICAgICAgIGlmICghdGhpcy5jbGVhbikgewogICAgICAgICAgdGhpcy5jbGVhbiA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGF3YWl0IHRoaXMuY2xlYW47CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuYnVzeSA9IHRydWU7CiAgICAgIGNvbnN0IHByb21pc2VzID0gW107CiAgICAgIHdoaWxlICh0aGlzLnBlbmRpbmcubGVuZ3RoKSB7CiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMucGVuZGluZy5zaGlmdCgpOwogICAgICAgIHByb21pc2VzLnB1c2goKGFzeW5jICgpID0+IHsKICAgICAgICAgIGF3YWl0IHRoaXMuaW52b2tlQ2FsbGJhY2tzKHRoaXMuYmVmb3JlLCBpdGVtKTsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZmlsdGVycy5maWx0ZXIoaXRlbSk7CiAgICAgICAgICBjb25zdCBjYWxsQWZ0ZXIgPSB0aGlzLmFwcGx5KGl0ZW0sIHJlc3VsdCk7CiAgICAgICAgICBpZiAoY2FsbEFmdGVyKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW52b2tlQ2FsbGJhY2tzKHRoaXMuYWZ0ZXIsIGl0ZW0sIHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgICBhd2FpdCB0aGlzLmludm9rZUNhbGxiYWNrcyh0aGlzLmZpbmFsbHksIGl0ZW0sIHJlc3VsdCk7CiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpOwogICAgICAgIH0pKCkpOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7CiAgICAgICAgaWYgKCF0aGlzLmJ1c3kpIGJyZWFrOwogICAgICB9CiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgICAgYXdhaXQgdGhpcy5pbnZva2VDYWxsYmFja3ModGhpcy5kb25lKTsKICAgICAgdGhpcy5idXN5ID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5hY3RpdmUodGhpcy5wZW5kaW5nLnNwbGljZSgwKSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmNsZWFuKSB0aGlzLmNsZWFuID0gbnVsbDsKICAgICAgaWYgKHRoaXMucmVzb2x2ZSkgewogICAgICAgIHRoaXMucmVzb2x2ZSgpOwogICAgICAgIHRoaXMucmVzb2x2ZSA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIGFzeW5jIHJlcnVuKCkgewogICAgICBjb25zdCBsYXN0UmVydW4gPSB0aGlzLmxhc3RSZXJ1biA9IHt9OwogICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpOwogICAgICBpZiAodGhpcy5sYXN0UmVydW4gIT09IGxhc3RSZXJ1bikgcmV0dXJuOwogICAgICB0aGlzLnJlYXBwbHkoKTsKICAgIH0KICAgIG9uQmVmb3JlKGNhbGxiYWNrKSB7IHRoaXMuYmVmb3JlLnB1c2goY2FsbGJhY2spOyB9CiAgICBvbkFmdGVyKGNhbGxiYWNrKSB7IHRoaXMuYWZ0ZXIucHVzaChjYWxsYmFjayk7IH0KICAgIG9uRmluYWxseShjYWxsYmFjaykgeyB0aGlzLmZpbmFsbHkucHVzaChjYWxsYmFjayk7IH0KICAgIG9uRG9uZShjYWxsYmFjaykgeyB0aGlzLmRvbmUucHVzaChjYWxsYmFjayk7IH0KICB9CgogIC8qKgogICAqIOmSiOWvueW+ruWNmueahOi/h+a7pOinhOWImQogICAqIOWvueW6lOiEmuacrOeJiCBvYnNlcnZlci53ZWliby4qCiAgICovCiAgb2JzZXJ2ZXIuZmVlZCA9IG5ldyBGaWx0ZXJPYnNlcnZlcigpOwoKICAvKioKICAgKiDpkojlr7nor4TorrrnmoTov4fmu6Top4TliJkKICAgKiDlr7nlupTohJrmnKzniYggb2JzZXJ2ZXIuY29tbWVudAogICAqLwogIG9ic2VydmVyLmNvbW1lbnQgPSBuZXcgRmlsdGVyT2JzZXJ2ZXIoKTsKCiAgY29uc3QgaGlkZUZlZWRDc3MgPSBjc3MuYWRkKGAKLnlhd2YtV0JWNiBbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9pdGVtIl06bm90KFt5YXdmLWZlZWRdKSwKLnlhd2YtV0JWNiBbbm9kZS10eXBlPSJmZWVkX2xpc3QiXSAuV0JfZmVlZF90eXBlOm5vdChbeWF3Zi1mZWVkXSksCi55YXdmLVdCVjYgLmxpc3RfdWxbbm9kZS10eXBlPSJmZWVkX2xpc3RfY29tbWVudExpc3QiXSAubGlzdF9saTpub3QoW3lhd2YtY29tbWVudF0pLAoueWF3Zi1XQlY2IC5saXN0X3VsW25vZGUtdHlwZT0iY29tbWVudF9saXN0Il0gLmxpc3RfbGk6bm90KFt5YXdmLWNvbW1lbnRdKQoueWF3Zi1XQlY2IHsgdmlzaWJpbGl0eTogaGlkZGVuOyBvcGFjaXR5OiAwOyB9Ci55YXdmLVdCVjYgW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfaXRlbSJdOm5vdChbeWF3Zi1mZWVkXSkgW25vZGUtdHlwZT0iZmVlZF9saXN0Il0gLldCX2ZlZWRfdHlwZTpub3QoW3lhd2YtZmVlZF0pIHsgZGlzcGxheTogbm9uZTsgfQoueWF3Zi1XQlY2IFt5YXdmLWZlZWRdOm5vdChbeWF3Zi1mZWVkLWRpc3BsYXldKSwgW3lhd2YtY29tbWVudF06bm90KFt5YXdmLWNvbW1lbnQtZGlzcGxheV0pIHsgdmlzaWJpbGl0eTogaGlkZGVuOyBvcGFjaXR5OiAwOyB9Ci55YXdmLVdCVjYgW3lhd2YtY29tbWVudC1kaXNwbGF5PSJoaWRlIl0sIFt5YXdmLWZlZWQtZGlzcGxheT0iaGlkZSJdIHsgZGlzcGxheTogbm9uZTsgfQoueWF3Zi1XQlY2IFt5YXdmLWZlZWQtZGlzcGxheT0iZm9sZCJdIHsgcG9zaXRpb246IHJlbGF0aXZlOyB9Ci55YXdmLVdCVjYgW3lhd2YtZmVlZC1kaXNwbGF5PSJmb2xkIl0gPiAqIHsgZGlzcGxheTogbm9uZTsgfQoueWF3Zi1XQlY2IFt5YXdmLWZlZWQtZGlzcGxheT0iZm9sZCJdOjpiZWZvcmUgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHggMjBweDsgZGlzcGxheTogYmxvY2s7IG9wYWNpdHk6IDAuNjsgbGluZS1oZWlnaHQ6IDE2cHg7IH0KLnlhd2YtV0JWNiAuV0JfZmVlZF90eXBlW3lhd2YtZmVlZC1kaXNwbGF5PSJmb2xkIl0gLldCX2ZlZWRfZGV0YWlsIHsgZGlzcGxheTogbm9uZTsgfQoueWF3Zi1XQlY2IC5XQl9mZWVkX3R5cGVbeWF3Zi1mZWVkLWRpc3BsYXk9ImZvbGQiXTpob3ZlciAuV0JfZmVlZF9kZXRhaWw6bm90KDpob3ZlcikgeyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgcGFkZGluZzogMCAyMHB4IDI3cHg7IH0KLnlhd2YtV0JWNiAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3R5cGVbeWF3Zi1mZWVkLWRpc3BsYXk9ImZvbGQiXS5XQl9mZWVkX3ZpcGNvdmVyOmhvdmVyIC5XQl9mZWVkX2RldGFpbCB7IHBhZGRpbmctdG9wOiAwOyB9Ci55YXdmLVdCVjYgLldCX2ZlZWRfdHlwZVt5YXdmLWZlZWQtZGlzcGxheT0iZm9sZCJdIC5XQl9mZWVkX2hhbmRsZSB7IGRpc3BsYXk6IG5vbmU7IH0KCi55YXdmLVdCVjcgYXJ0aWNsZVtjbGFzcyo9IkZlZWQiXTpub3QoLnlhd2YtZmVlZC1maWx0ZXIpID4gKiwKLnlhd2YtV0JWNyBhcnRpY2xlW2NsYXNzKj0iRmVlZCJdLnlhd2YtZmVlZC1maWx0ZXItbG9hZGluZyA+ICosCi55YXdmLVdCVjcgYXJ0aWNsZVtjbGFzcyo9IkZlZWQiXS55YXdmLWZlZWQtZmlsdGVyLXJ1bm5pbmcgPiAqIHsgdmlzaWJpbGl0eTogaGlkZGVuOyB9Ci55YXdmLVdCVjcgYXJ0aWNsZVtjbGFzcyo9IkZlZWQiXTpub3QoLnlhd2YtZmVlZC1maWx0ZXIpOjpiZWZvcmUsCi55YXdmLVdCVjcgYXJ0aWNsZVtjbGFzcyo9IkZlZWQiXS55YXdmLWZlZWQtZmlsdGVyLWxvYWRpbmc6OmJlZm9yZSwKLnlhd2YtV0JWNyBhcnRpY2xlW2NsYXNzKj0iRmVlZCJdLnlhd2YtZmVlZC1maWx0ZXItcnVubmluZzo6YmVmb3JlIHsgY29udGVudDogIiAiOyBkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMDBweDsgcmlnaHQ6IDEwMHB4OyB0b3A6IDUwJTsgaGVpZ2h0OiAxNDBweDsgbWF4LWhlaWdodDogY2FsYygxMDAlIC0gMjBweCk7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsgYmFja2dyb3VuZC1pbWFnZTogcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHRyYW5zcGFyZW50IDAgMjBweCwgdmFyKC0tdy1wYW5lbC1iYWNrZ3JvdW5kKSAyMHB4IDYwcHgpLCBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHZhcigtLXctbWFpbikgNDAlLCB0cmFuc3BhcmVudCA1MCUsIHZhcigtLXctbWFpbikgNjAlKTsgYW5pbWF0aW9uOiB5YXdmLWZlZWQtZmlsdGVyLXJ1bm5pbmcgMnMgMXMgbGluZWFyIGluZmluaXRlOyBiYWNrZ3JvdW5kLXNpemU6IDIwMCUgMTAwJTsgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdDsgb3BhY2l0eTogMC4xOyB9IApAa2V5ZnJhbWVzIHlhd2YtZmVlZC1maWx0ZXItcnVubmluZyB7IDAlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMTIwJTsgfSAxMDAlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwJTsgfSB9Ci55YXdmLVdCVjcgLnlhd2YtcmVzaXplLXNlbnNvciwKLnlhd2YtV0JWNyAueWF3Zi1yZXNpemUtc2Vuc29yLWV4cGFuZCwKLnlhd2YtV0JWNyAueWF3Zi1yZXNpemUtc2Vuc29yLXNocmluayB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBvdmVyZmxvdzogaGlkZGVuOyB6LWluZGV4OiAtMTsgdmlzaWJpbGl0eTogaGlkZGVuOyB9Ci55YXdmLVdCVjcgLnlhd2YtcmVzaXplLXNlbnNvci1leHBhbmQgLnlhd2YtcmVzaXplLXNlbnNvci1jaGlsZCB7IHdpZHRoOiAxMDAwMDAwMHB4OyBoZWlnaHQ6IDEwMDAwMDAwcHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1yZXNpemUtc2Vuc29yLXNocmluayAueWF3Zi1yZXNpemUtc2Vuc29yLWNoaWxkIHsgd2lkdGg6IDIwMCU7IGhlaWdodDogMjAwJTsgfQoueWF3Zi1XQlY3IC55YXdmLXJlc2l6ZS1zZW5zb3ItY2hpbGQgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgdHJhbnNpdGlvbjogMHM7IH0KYCk7CgogIGluaXQub25Mb2FkKGZ1bmN0aW9uICgpIHsKICAgIGNzcy5hcHBlbmQoYC55YXdmLVdCVjYgW3lhd2YtZmVlZC1kaXNwbGF5PSJmb2xkIl06OmJlZm9yZSB7IGNvbnRlbnQ6ICR7aTE4bi5mb2xkUmVhc29ufTsgfWApOwogIH0pOwogIGluaXQub25EZWluaXQoKCkgPT4gewogICAgaGlkZUZlZWRDc3MucmVtb3ZlKCk7CiAgfSk7CgogIGluaXQub25Mb2FkKGZ1bmN0aW9uICgpIHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgb2JzZXJ2ZXIuZmVlZC5hcHBseSA9IGZ1bmN0aW9uIChmZWVkLCB7IHJlc3VsdCwgZmlsdGVyID0gbnVsbCwgcmVhc29uID0gbnVsbCB9KSB7CiAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1kaXNwbGF5JywgcmVzdWx0ID8/ICd1bnNldCcpOwogICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0ICE9PSAndW5zZXQnKSB7CiAgICAgICAgICBjb25zdCBhdXRob3IgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9kZXRhaWwgPiAuV0JfaW5mbyA+IC5XX2ZiW3VzZXJjYXJkXScpIHx8CiAgICAgICAgICAgIGZlZWQucXVlcnlTZWxlY3RvcignLmNhcmQtZmVlZCAuaW5mbyAubmFtZScpOwogICAgICAgICAgY29uc3QgYXV0aG9yTmFtZSA9IGF1dGhvcj8udGV4dENvbnRlbnQ7CiAgICAgICAgICBpZiAoYXV0aG9yTmFtZSkgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1hdXRob3InLCBhdXRob3JOYW1lKTsKICAgICAgICAgIGlmIChyZWFzb24pIGZlZWQuc2V0QXR0cmlidXRlKCd5YXdmLWZlZWQtcmVhc29uJywgcmVhc29uKTsKICAgICAgICAgIHV0aWwuZGVidWcoJ0ZlZWQgZmlsdGVyICVvIC0+ICVvIGJ5ICVvIGR1ZSB0byAlbycsIGZlZWQsIHJlc3VsdCwgZmlsdGVyLCByZWFzb24pOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0ID09PSAnaGlkZScpIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuZmVlZC5yZWFwcGx5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IHBhcnNlZCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3lhd2YtZmVlZC1kaXNwbGF5XScpKTsKICAgICAgICBwYXJzZWQuZm9yRWFjaChmZWVkID0+IHsKICAgICAgICAgIGZlZWQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmZvbGRFdmVudEhhbmRsZXIpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZShwYXJzZWQsIGZhbHNlKTsKICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5hcHBseSA9IGZ1bmN0aW9uIChjb21tZW50LCB7IHJlc3VsdCwgZmlsdGVyID0gbnVsbCwgcmVhc29uID0gbnVsbCB9KSB7CiAgICAgICAgY29tbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29tbWVudC1kaXNwbGF5JywgcmVzdWx0ID8/ICd1bnNldCcpOwogICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0ICE9PSAndW5zZXQnKSB7CiAgICAgICAgICB1dGlsLmRlYnVnKCdDb21tZW50IGZpbHRlciAlbyAtPiAlbyBieSAlbyBkdWUgdG8gJW8nLCBjb21tZW50LCByZXN1bHQsIGZpbHRlciwgcmVhc29uKTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2hpZGUnKSByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH07CiAgICAgIG9ic2VydmVyLmNvbW1lbnQucmVhcHBseSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBwYXJzZWQgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1t5YXdmLWNvbW1lbnQtZGlzcGxheV0nKSk7CiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlKHBhcnNlZCwgZmFsc2UpOwogICAgICB9OwogICAgICBjb25zdCByZW1vdmVIaWRkZW5JdGVtID0gZnVuY3Rpb24gKGl0ZW0sIHsgcmVzdWx0IH0pIHsKICAgICAgICBpZiAocmVzdWx0ICE9PSAnaGlkZScpIHJldHVybjsKICAgICAgICBpdGVtLnJlbW92ZSgpOwogICAgICB9OwogICAgICBjb25zdCB1bmZvbGRFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBjb25zdCBmZWVkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ1ttaWRdJyk7CiAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1kaXNwbGF5JywgJ3VuZm9sZCcpOwogICAgICAgIGZlZWQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmZvbGRFdmVudEhhbmRsZXIpOwogICAgICB9OwogICAgICBjb25zdCBmb2xkRmVlZFVuZm9sZCA9IGZ1bmN0aW9uIChmZWVkLCB7IHJlc3VsdCB9KSB7CiAgICAgICAgaWYgKHJlc3VsdCAhPT0gJ2ZvbGQnKSByZXR1cm47CiAgICAgICAgZmVlZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVuZm9sZEV2ZW50SGFuZGxlcik7CiAgICAgIH07CiAgICAgIG9ic2VydmVyLmZlZWQub25GaW5hbGx5KHJlbW92ZUhpZGRlbkl0ZW0pOwogICAgICBvYnNlcnZlci5mZWVkLm9uRmluYWxseShmb2xkRmVlZFVuZm9sZCk7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQub25GaW5hbGx5KHJlbW92ZUhpZGRlbkl0ZW0pOwoKICAgICAgLy8g6Ieq5Yqo5qOA5rWL6aG16Z2i5Lit55qE5b6u5Y2a5bm26Kem5Y+R6L+H5ruk6KeE5YiZCiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gZmVlZEZpbHRlcigpIHsKICAgICAgICBjb25zdCBmZWVkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoWwogICAgICAgICAgJ1thY3Rpb24tdHlwZT0iZmVlZF9saXN0X2l0ZW0iXTpub3QoW3lhd2YtZmVlZF0pJywKICAgICAgICAgICdbbm9kZS10eXBlPSJmZWVkX2xpc3QiXSAuV0JfZmVlZF90eXBlOm5vdChbeWF3Zi1mZWVkXSknLAogICAgICAgIF0uam9pbignLCcpKTsKICAgICAgICBpZiAoIWZlZWRzLmxlbmd0aCkgcmV0dXJuOwogICAgICAgIGZlZWRzLmZvckVhY2goZmVlZCA9PiBmZWVkLnNldEF0dHJpYnV0ZSgneWF3Zi1mZWVkJywgJycpKTsKICAgICAgICBvYnNlcnZlci5mZWVkLmFjdGl2ZShmZWVkcyk7CiAgICAgIH0pOwogICAgICAvLyDoh6rliqjmo4DmtYvpobXpnaLkuK3nmoTor4Torrrlubbop6blj5Hov4fmu6Top4TliJkKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBjb21tZW50RmlsdGVyKCkgewogICAgICAgIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChbCiAgICAgICAgICAnLmxpc3RfdWxbbm9kZS10eXBlPSJmZWVkX2xpc3RfY29tbWVudExpc3QiXSAubGlzdF9saTpub3QoW3lhd2YtY29tbWVudF0pJywKICAgICAgICAgICcubGlzdF91bFtub2RlLXR5cGU9ImNvbW1lbnRfbGlzdCJdIC5saXN0X2xpOm5vdChbeWF3Zi1jb21tZW50XSkgJywKICAgICAgICBdLmpvaW4oJywnKSk7CiAgICAgICAgaWYgKCFjb21tZW50cy5sZW5ndGgpIHJldHVybjsKICAgICAgICBjb21tZW50cy5mb3JFYWNoKGNvbW1lbnQgPT4gY29tbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29tbWVudCcsICcnKSk7CiAgICAgICAgb2JzZXJ2ZXIuY29tbWVudC5hY3RpdmUoY29tbWVudHMpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8qCiAgICAgICAqIOW+ruWNmuihqOekuiBGZWVkIOeahOe7k+aehOS9k+W+iOWlh+WmmQogICAgICAgKiDlroPnmoQgaWRzdHIg5bGe5oCn77yM5piv5LiqIHN0cmluZ++8jOaYr+W9k+WJjeW+ruWNmueahCBtaWTvvIzkuZ/lj6/og73mmK/lv6vovaznmoTljp/lvq7ljZogaWQKICAgICAgICog5a6D55qEIGlkIOWxnuaAp++8jOWkp+mDqOWIhuaDheWGteS4i+aYr+S4qiBudW1iZXLvvIzooajnpLrlvZPliY3lvq7ljZrnmoQgbWlk77yM5YG25bCU5piv5Liq5a2X56ym5Liy77yM6KGo56S65b+r6L2s5b6u5Y2a55qE5b2T5YmNIGlkCiAgICAgICAqIOWug+eahCBtaWQg5bGe5oCn77yM5piv5LiqIHN0cmluZ++8jOaYryBpZCDlsZ7mgKfnmoTlrZfnrKbkuLLlvaLlvI8KICAgICAgICog5a6D55qEIG1ibG9naWQg5pivIDYyIOi/m+WItuaNoueul+WQjueahCBpZHN0cgogICAgICAgKi8KCiAgICAgIGNvbnN0IHJhbmRTdHIgPSBzdHJpbmdzLnJhbmRLZXkoKTsKICAgICAgY29uc3Qga2V5ID0gYHlhd2ZfZmVlZEZpbHRlcl8ke3JhbmRTdHJ9YDsKCiAgICAgIC8vIOW9k+acieS4gOadoeWujOaIkOi/h+a7pOinhOWImeWIpOaWreaXtu+8jOS6pOe7memhtemdouiEmuacrOWkhOeQhgogICAgICBvYnNlcnZlci5mZWVkLmFwcGx5ID0gZnVuY3Rpb24gKGRhdGEsIHsgcmVzdWx0LCBmaWx0ZXIgPSBudWxsLCByZWFzb24gPSBudWxsIH0pIHsKICAgICAgICBjb25zdCBtaWQgPSBkYXRhLm1pZDsKICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChrZXksIHsKICAgICAgICAgIGRldGFpbDogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246ICdyZXN1bHQnLCBtaWQsIHJlc3VsdDogeyByZXN1bHQ6IHJlc3VsdCA/PyAndW5zZXQnLCByZWFzb24gfSB9KSwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgaWYgKHJlc3VsdCkgdXRpbC5kZWJ1ZygnRmVlZCBmaWx0ZXIgJW8gLT4gJW8gYnkgJW8gZHVlIHRvICVvJywgZGF0YSwgcmVzdWx0LCBmaWx0ZXIsIHJlYXNvbik7CiAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2hpZGUnKSByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH07CiAgICAgIC8vIOWmguaenOmcgOimgemHjeaWsOinpuWPkei/h+a7pOinhOWIme+8jOmCo+S5iOiuqemhtemdouiEmuacrOmHjeaWsOinpuWPkeS4gOasoQogICAgICBvYnNlcnZlci5mZWVkLnJlYXBwbHkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoa2V5LCB7IGRldGFpbDogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246ICdyZXJ1bicgfSkgfSk7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICB9OwogICAgICBjb25zdCBmZWVkVHJpZ2dlclBlbmRpbmcgPSBbXTsKICAgICAgLy8g5b2T6aG16Z2i6ISa5pys5qOA5rWL5Yiw5LiA5p2h6ZyA6KaB6L+H5ruk55qE5b6u5Y2a5pe277yM5o+Q5Lqk6L+H5rukCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGtleSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgY29uc3QgZGV0YWlsID0gSlNPTi5wYXJzZShldmVudC5kZXRhaWwpOwogICAgICAgIGlmIChkZXRhaWwuYWN0aW9uID09PSAndHJpZ2dlcicpIHsKICAgICAgICAgIGZlZWRUcmlnZ2VyUGVuZGluZy5wdXNoKGRldGFpbC5kYXRhKTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAoZmVlZFRyaWdnZXJQZW5kaW5nLmxlbmd0aCkgewogICAgICAgICAgICAgIG9ic2VydmVyLmZlZWQuYWN0aXZlKGZlZWRUcmlnZ2VyUGVuZGluZy5zcGxpY2UoMCkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAwKTsKICAgICAgICB9CiAgICAgIH0sIHRydWUpOwogICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwga2V5KSB7CiAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgIC8vIOWxleW8gOW+ruWNmuato+aWhwogICAgICAgIGNvbnN0IGxvbmdDb250ZW50RXhwYW5kRm9yRGV0YWlsID0gYXN5bmMgZnVuY3Rpb24gKHZtLCBmZWVkRGV0YWlsKSB7CiAgICAgICAgICBpZiAoIWZlZWREZXRhaWw/LmlzTG9uZ1RleHQpIHJldHVybjsKICAgICAgICAgIGlmIChmZWVkRGV0YWlsLmxvbmdUZXh0Q29udGVudF9yYXcpIHJldHVybjsKICAgICAgICAgIGlmIChbdHJ1ZSwgZmFsc2VdLmluY2x1ZGVzKGZlZWREZXRhaWwuX3lhd2ZfTG9uZ1RleHRDb250ZW50TG9hZGluZykpIHJldHVybjsKICAgICAgICAgIHZtLiRzZXQoZmVlZERldGFpbCwgJ195YXdmX0xvbmdUZXh0Q29udGVudExvYWRpbmcnLCB0cnVlKTsKICAgICAgICAgIHZtLiRzZXQoZmVlZERldGFpbCwgJ2xvbmdUZXh0Q29udGVudF9yYXcnLCBudWxsKTsKICAgICAgICAgIHZtLiRzZXQoZmVlZERldGFpbCwgJ2xvbmdUZXh0Q29udGVudCcsIG51bGwpOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHZtLiRodHRwLmdldCgnL2FqYXgvc3RhdHVzZXMvbG9uZ3RleHQnLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOiBmZWVkRGV0YWlsLmlkc3RyIH0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoIXJlc3AuZGF0YSB8fCAhcmVzcC5kYXRhLm9rIHx8ICFyZXNwLmRhdGEuZGF0YSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgICAgICAgIGlmIChkYXRhPy5sb25nVGV4dENvbnRlbnQpIHsKICAgICAgICAgICAgICBmZWVkRGV0YWlsLmxvbmdUZXh0Q29udGVudF9yYXcgPSBkYXRhLmxvbmdUZXh0Q29udGVudDsKICAgICAgICAgICAgICBpZiAoZGF0YS51cmxfc3RydWN0KSBmZWVkRGV0YWlsLnVybF9zdHJ1Y3QgPSBkYXRhLnVybF9zdHJ1Y3Q7CiAgICAgICAgICAgICAgaWYgKGRhdGEudG9waWNfc3RydWN0KSBmZWVkRGV0YWlsLnRvcGljX3N0cnVjdCA9IGRhdGEudG9waWNfc3RydWN0OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBmZWVkRGV0YWlsLl95YXdmX0xvbmdUZXh0Q29udGVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IGxvbmdDb250ZW50RXhwYW5kID0gYXN5bmMgZnVuY3Rpb24gKHZtLCBmZWVkKSB7CiAgICAgICAgICBhd2FpdCBsb25nQ29udGVudEV4cGFuZEZvckRldGFpbCh2bSwgZmVlZCk7CiAgICAgICAgICBhd2FpdCBsb25nQ29udGVudEV4cGFuZEZvckRldGFpbCh2bSwgZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzKTsKICAgICAgICB9OwogICAgICAgIC8vIOinpuWPkei/h+a7pOW5tuetieW+hei/h+a7pOe7k+aenOWbnuadpQogICAgICAgIGNvbnN0IHBlbmRpbmdGZWVkcyA9IG5ldyBNYXAoKTsKICAgICAgICBjb25zdCB0cmlnZ2VyRmlsdGVyID0gZnVuY3Rpb24gKHZtLCBmZWVkKSB7CiAgICAgICAgICBjb25zdCBtaWQgPSBmZWVkLm1pZDsKICAgICAgICAgIGZlZWQuX3lhd2ZfRmlsdGVyU3RhdHVzID0gJ3J1bm5pbmcnOwogICAgICAgICAgY29uc3QgY2xlYW5VcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcGVuZGluZ0ZlZWRzLmRlbGV0ZShtaWQpOwogICAgICAgICAgICB2bS4kb2ZmKCdob29rOmJlZm9yZURlc3Ryb3knLCBjbGVhblVwKTsKICAgICAgICAgIH07CiAgICAgICAgICB2bS4kb25jZSgnaG9vazpiZWZvcmVEZXN0cm95JywgY2xlYW5VcCk7CiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUZpbHRlclJlc3VsdCA9IGZ1bmN0aW9uICh7IHJlc3VsdCwgcmVhc29uIH0pIHsKICAgICAgICAgICAgICBjbGVhblVwKCk7CiAgICAgICAgICAgICAgZmVlZC5feWF3Zl9GaWx0ZXJTdGF0dXMgPSByZXN1bHQ7CiAgICAgICAgICAgICAgZmVlZC5feWF3Zl9GaWx0ZXJSZWFzb24gPSByZWFzb247CiAgICAgICAgICAgICAgcmVzb2x2ZSh7IHJlc3VsdCwgcmVhc29uIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgICBwZW5kaW5nRmVlZHMuc2V0KG1pZCwgaGFuZGxlRmlsdGVyUmVzdWx0KTsKICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoa2V5LCB7CiAgICAgICAgICAgICAgZGV0YWlsOiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ3RyaWdnZXInLCBtaWQsIGRhdGE6IGZlZWQgfSksCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIC8vIOWkhOeQhui/h+a7pOe7k+aenAogICAgICAgIGNvbnN0IGFwcGx5RmlsdGVyUmVzdWx0ID0gZnVuY3Rpb24gKHZtLCBmZWVkLCB7IHJlc3VsdCwgcmVhc29uIH0pIHsKICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdoaWRlJykgewogICAgICAgICAgICBjb25zdCBpbmRleCA9IHZtLmRhdGEuaW5kZXhPZihmZWVkKTsKICAgICAgICAgICAgdm0uZGF0YS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdmZWVkJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICBjb25zdCBmZWVkU2Nyb2xsID0gdnVlU2V0dXAuY2xvc2VzdCh2bSwgJ2ZlZWQtc2Nyb2xsJyk7CgogICAgICAgICAgLy8g5Zyo5riy5p+T5LiA5p2hIGZlZWQg5pe277yM6aKd5aSW5o+S5YWl6L+H5ruk54q25oCB55qE5qCH6K+GCiAgICAgICAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRSZW5kZXIodm0sIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICAgICAgICBjb25zdCB7IHZOb2RlLCBhZGRDbGFzcyB9ID0gTm9kZXM7CgogICAgICAgICAgICAvLyDlpoLmnpzmn5DkuKogZmVlZCDkuI3lnKggZmVlZC1zY3JvbGwg6YeM6Z2iCiAgICAgICAgICAgIC8vIOmCo+S5iOaIkeS7rOS4jeS8muaKiuWug+Wwsei/meS5iOe7memakOiXj+i1t+adpQogICAgICAgICAgICBjb25zdCB1bmRlckZpbHRlciA9IGZlZWRTY3JvbGwgIT0gbnVsbCAmJiB0aGlzLmRhdGEubWlkID4gMDsKCiAgICAgICAgICAgIGNvbnN0IGZlZWQgPSBub2RlU3RydWN0OwogICAgICAgICAgICBjb25zdCB2bm9kZSA9IHZOb2RlKGZlZWQpOwoKICAgICAgICAgICAgaWYgKCF2bm9kZS5rZXkgJiYgdGhpcy5kYXRhLm1pZCkgewogICAgICAgICAgICAgIHZub2RlLmtleSA9ICd5YXdmLWZlZWQtJyArIHRoaXMuZGF0YS5taWQ7CiAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5vcmlfbWlkKSB7CiAgICAgICAgICAgICAgICB2bm9kZS5rZXkgPSAneWF3Zi1mZWVkLScgKyB0aGlzLmRhdGEubWlkICsgJy0nICsgdGhpcy5kYXRhLm9yaV9taWQ7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZub2RlLmtleSA9ICd5YXdmLWZlZWQtJyArIHRoaXMuZGF0YS5taWQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBhZGRDbGFzcyhmZWVkLCAneWF3Zi1mZWVkLWZpbHRlcicpOwogICAgICAgICAgICBpZiAodW5kZXJGaWx0ZXIpIHsKICAgICAgICAgICAgICBhZGRDbGFzcyhmZWVkLCBgeWF3Zi1mZWVkLWZpbHRlci0ke3RoaXMuZGF0YS5feWF3Zl9GaWx0ZXJTdGF0dXMgfHwgJ2xvYWRpbmcnfWApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGFkZENsYXNzKGZlZWQsICd5YXdmLWZlZWQtZmlsdGVyLWlnbm9yZScpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy5kYXRhLm1pZCkgewogICAgICAgICAgICAgIHZub2RlLmRhdGEuYXR0cnNbJ2RhdGEtZmVlZC1hdXRob3ItbmFtZSddID0gdGhpcy5kYXRhLnVzZXIuc2NyZWVuX25hbWU7CiAgICAgICAgICAgICAgdm5vZGUuZGF0YS5hdHRyc1snZGF0YS1mZWVkLW1pZCddID0gdGhpcy5kYXRhLm1pZDsKICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLnJldHdlZXRlZF9zdGF0dXMpIHsKICAgICAgICAgICAgICAgIHZub2RlLmRhdGEuYXR0cnNbJ2RhdGEtZmVlZC1vbWlkJ10gPSB0aGlzLmRhdGEucmV0d2VldGVkX3N0YXR1cy5taWQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEub3JpX21pZCkgewogICAgICAgICAgICAgICAgdm5vZGUuZGF0YS5hdHRyc1snZGF0YS1mZWVkLWZtaWQnXSA9IHRoaXMuZGF0YS5pZHN0cjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5feWF3Zl9GaWx0ZXJSZWFzb24pIHsKICAgICAgICAgICAgICAgIHZub2RlLmRhdGEuYXR0cnNbJ2RhdGEteWF3Zi1maWx0ZXItcmVhc29uJ10gPSB0aGlzLmRhdGEuX3lhd2ZfRmlsdGVyUmVhc29uOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdm5vZGU7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgIH0pOwogICAgICAgIGxldCBoZWlnaHRJbmRleCA9IDA7CiAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdzY3JvbGwnLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIGNvbnN0IHdyYXBSYWYgPSBmdW5jdGlvbiAoZikgewogICAgICAgICAgICBsZXQgZGlydHkgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoZGlydHkpIHJldHVybjsKICAgICAgICAgICAgICBkaXJ0eSA9IHRydWU7CiAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGRpcnR5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9OwogICAgICAgICAgLy8gdm0uX19wcm90b19fLnNpemVEZXBlbmRlbmNpZXMg6YeM6Z2i5a2Y55qE5piv5Y6f5pys5YWz5b+D55qE5bGe5oCnCiAgICAgICAgICAvLyDpgqPkuKrmsqHku4DkuYjnu5/kuIDnmoTlpb3lip7ms5Xnu5nmlLnov4fmnaXvvIzkvYbmmK/miJHku6zlj6/ku6XlnKggdm0g6Ieq5bex6Lqr5LiK6K6+572u6L+Z5Liq5bGe5oCn5p2l6KaG55uW5a6DCiAgICAgICAgICAvLyDlm6DkuLrorr7nva7nmoTov5nkuKrlsZ7mgKfmiJHku6zlubbkuI3mnJ/mnJvku6XlkI7ov5jmnInlj5jljJbvvIzmiYDku6XmiJHku6zkuI3pnIDopoHorqnlroPov4cgVnVlIOeahOeUn+WRveWRqOacnyAkZm9yY2VVcGRhdGUg5bCx5piv5LqGCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodm0sICdzaXplRGVwZW5kZW5jaWVzJywgeyB2YWx1ZTogWydfeWF3Zl9IZWlnaHQnXSwgY29uZmlndXJhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsKICAgICAgICAgIGNvbnN0IHNlbnNvclByZWZpeCA9ICd5YXdmX3Jlc2l6ZV9zZW5zb3JfZWxlbWVudF8nOwogICAgICAgICAgY29uc3QgZ2V0SXRlbUZyb21TZW5zb3IgPSBzZW5zb3IgPT4gewogICAgICAgICAgICBpZiAoIXNlbnNvcj8uaWQpIHJldHVybiBudWxsOwogICAgICAgICAgICBjb25zdCBpbmRleCA9IE51bWJlci5wYXJzZUludChzZW5zb3IuaWQuc2xpY2Uoc2Vuc29yUHJlZml4Lmxlbmd0aCksIDEwKTsKICAgICAgICAgICAgLy8g5Zyo5pyJ5b6u5Y2a6KKr6ZqQ6JeP5ZCO77yM5b6u5Y2a55u45a+555qE57Si5byV5Lya5Y+R55Sf5Y+Y5YyWCiAgICAgICAgICAgIC8vIOaXoOazleS+nei1luW+ruWNmueahOe0ouW8leehruWumuWvueW6lOeahOW+ruWNmgogICAgICAgICAgICAvLyDmiYDku6XmiJHku6zkuI3nlKggdm0uZGF0YVtpbmRleF0g6ICM5Y+q6IO96L+Z5qC35om+5LiA6YGNCiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB2bT8uZGF0YT8uZmluZD8uKGl0ZW0gPT4gaXRlbS5feWF3Zl9IZWlnaHRJbmRleCA9PT0gaW5kZXgpOwogICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihlbnRyaWVzID0+IHsKICAgICAgICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHsKICAgICAgICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZW50cnk7CiAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGdldEl0ZW1Gcm9tU2Vuc29yKHRhcmdldCk7CiAgICAgICAgICAgICAgaWYgKGl0ZW0pIGl0ZW0uX3lhd2ZfSGVpZ2h0ID0gdGFyZ2V0LmNsaWVudEhlaWdodDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIOWmguaenOWPr+S7peaKiiBzZW5zb3Ig5YGa5oiQ57uE5Lu255qE6K+d77yM5YW25a6e5Y+q6KaBIG1vdW50IOaXtuWkhOeQhuS4gOS4i+WwseihjOS6hu+8jOS4jei/h+i/memHjOaYr+ayoeWKnuazlQogICAgICAgICAgY29uc3QgdXBkYXRlU2Vuc29yID0gd3JhcFJhZihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IGFsbFNlbnNvciA9IE9iamVjdC5rZXlzKHZtLiRyZWZzKS5maWx0ZXIoa2V5ID0+IGtleS5zdGFydHNXaXRoKHNlbnNvclByZWZpeCkpOwogICAgICAgICAgICBhbGxTZW5zb3IubWFwKGtleSA9PiBOdW1iZXIucGFyc2VJbnQoa2V5LnNsaWNlKHNlbnNvclByZWZpeC5sZW5ndGgpLCAxMCkpLmZvckVhY2goaW5kZXggPT4gewogICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHZtLiRyZWZzW3NlbnNvclByZWZpeCArIGluZGV4XTsKICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuOwogICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoY29udGFpbmVyKTsKICAgICAgICAgICAgICBjb25zdCBpdGVtID0gZ2V0SXRlbUZyb21TZW5zb3IoY29udGFpbmVyKTsKICAgICAgICAgICAgICBpZiAoaXRlbSkgaXRlbS5feWF3Zl9IZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0OwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgdm0uJHNjb3BlZFNsb3RzLmNvbnRlbnQgPSAoZnVuY3Rpb24gKGNvbnRlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgY29uc3QgY3JlYXRlRWxlbWVudCA9IHZtLl9zZWxmLl9jLCBoID0gY3JlYXRlRWxlbWVudDsKICAgICAgICAgICAgICBjb25zdCByYXcgPSBjb250ZW50LmNhbGwodGhpcywgZGF0YSk7CiAgICAgICAgICAgICAgLy8g57uZ5q+P5Liq5YWD57Sg5LiA5Liq5ZSv5LiA55qE5qCH6K+G55So5LqO5a+55bqU6auY5bqm5qOA5rWL5ZmoCiAgICAgICAgICAgICAgLy8g5oiR5Lus5rKh5Yqe5rOV55So546w5oiQ55qEIG1pZCDmiJYgY29tbWVudF9pZO+8jOWboOS4uuaIkeS7rOW5tuS4jeefpemBk+WFg+e0oOaYr+S7gOS5iOexu+WeiwogICAgICAgICAgICAgIC8vIOWFg+e0oOacieWPr+iDveaYryBmZWVk77yM5L2G5Lmf5pyJ5Y+v6IO95piv5YW25LuW5Lu75L2V5Lic6KW/CiAgICAgICAgICAgICAgaWYgKCFkYXRhLml0ZW0uX3lhd2ZfSGVpZ2h0SW5kZXgpIHsKICAgICAgICAgICAgICAgIGRhdGEuaXRlbS5feWF3Zl9IZWlnaHRJbmRleCA9ICsraGVpZ2h0SW5kZXg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZGF0YS5pdGVtLl95YXdmX0hlaWdodEluZGV4OwogICAgICAgICAgICAgIGNvbnN0IHJlc2l6ZVNlbnNvciA9IGgoJ2RpdicsIHsKICAgICAgICAgICAgICAgIGNsYXNzOiAneWF3Zi1yZXNpemUtc2Vuc29yJywKICAgICAgICAgICAgICAgIHJlZjogc2Vuc29yUHJlZml4ICsgaW5kZXgsCiAgICAgICAgICAgICAgICBrZXk6IHNlbnNvclByZWZpeCArIGluZGV4LAogICAgICAgICAgICAgICAgYXR0cnM6IHsgaWQ6IHNlbnNvclByZWZpeCArIGluZGV4IH0sCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW3Jhd107CiAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocmVzaXplU2Vuc29yKTsKICAgICAgICAgICAgICB1cGRhdGVTZW5zb3IoKTsKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9OwogICAgICAgICAgfSh2bS4kc2NvcGVkU2xvdHMuY29udGVudCkpOwogICAgICAgICAgdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuZGF0YTsgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodm0uZGF0YSkpIHJldHVybjsKICAgICAgICAgICAgdm0uZGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0ZW0sICdfeWF3Zl9IZWlnaHQnKTsKICAgICAgICAgICAgICBpZiAoIWRlc2NyaXB0b3IpIHsKICAgICAgICAgICAgICAgIHZtLiRzZXQoaXRlbSwgJ195YXdmX0hlaWdodCcsIDApOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWRlc2NyaXB0b3Iuc2V0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gdm0uX3lhd2ZfSGVpZ2h0OwogICAgICAgICAgICAgICAgZGVsZXRlIHZtLl95YXdmX0hlaWdodDsKICAgICAgICAgICAgICAgIHZtLiRzZXQoaXRlbSwgJ195YXdmX0hlaWdodCcsIHNpemUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgIH0pOwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGtleSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICBjb25zdCBkZXRhaWwgPSBKU09OLnBhcnNlKGV2ZW50LmRldGFpbCk7CiAgICAgICAgICBpZiAoZGV0YWlsLmFjdGlvbiA9PT0gJ3JlcnVuJykgewogICAgICAgICAgICAvLyDlr7nnjrDmnInnmoTlhYPntKDlho3mnaXkuIDmrKEKICAgICAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdmZWVkLXNjcm9sbCcsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgICAgIFsuLi52bS5kYXRhXS5mb3JFYWNoKGFzeW5jIGZlZWQgPT4gewogICAgICAgICAgICAgICAgaWYgKFsnbG9hZGluZycsICdydW5uaW5nJ10uaW5jbHVkZXMoZmVlZC5feWF3Zl9GaWx0ZXJTdGF0dXMpKSByZXR1cm47CiAgICAgICAgICAgICAgICBjb25zdCB7IHJlc3VsdCwgcmVhc29uIH0gPSBhd2FpdCB0cmlnZ2VyRmlsdGVyKHZtLCBmZWVkKTsKICAgICAgICAgICAgICAgIGFwcGx5RmlsdGVyUmVzdWx0KHZtLCBmZWVkLCB7IHJlc3VsdCwgcmVhc29uIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LCB7IHdhdGNoOiBmYWxzZSB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoZGV0YWlsLmFjdGlvbiA9PT0gJ3Jlc3VsdCcpIHsKICAgICAgICAgICAgLy8g5bqU55So6L+H5ruk57uT5p6cCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBwZW5kaW5nRmVlZHMuZ2V0KGRldGFpbC5taWQpOwogICAgICAgICAgICBpZiAoaGFuZGxlcikgaGFuZGxlcihkZXRhaWwucmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9LCB0cnVlKTsKICAgICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2ZlZWQtc2Nyb2xsJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAvLyDlvZMgZmVlZC1zY3JvbGwg5YaFIGZlZWQg5YiX6KGo5Y+Y5YyW5pe277yM5oiR5Lus5oqK6YKj5Lqb5rKh6KeB6L+H55qE5YWo6YO95qCH6K6w5LiA5LiLCiAgICAgICAgICB2bS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5kYXRhOyB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IGZlZWRzID0gWy4uLnZtLmRhdGFdOwogICAgICAgICAgICBmZWVkcy5mb3JFYWNoKGFzeW5jIGZlZWQgPT4gewogICAgICAgICAgICAgIGlmICghKGZlZWQubWlkID4gMCkpIHJldHVybjsKICAgICAgICAgICAgICBpZiAoZmVlZC5feWF3Zl9GaWx0ZXJBcHBseSkgcmV0dXJuOwogICAgICAgICAgICAgIHZtLiRzZXQoZmVlZCwgJ195YXdmX0ZpbHRlclN0YXR1cycsICdsb2FkaW5nJyk7CiAgICAgICAgICAgICAgdm0uJHNldChmZWVkLCAnX3lhd2ZfRmlsdGVyUmVhc29uJywgbnVsbCk7CiAgICAgICAgICAgICAgdm0uJHNldChmZWVkLCAnX3lhd2ZfRmlsdGVyQXBwbHknLCB0cnVlKTsKICAgICAgICAgICAgICBhd2FpdCBsb25nQ29udGVudEV4cGFuZCh2bSwgZmVlZCk7CiAgICAgICAgICAgICAgY29uc3QgeyByZXN1bHQsIHJlYXNvbiB9ID0gYXdhaXQgdHJpZ2dlckZpbHRlcih2bSwgZmVlZCk7CiAgICAgICAgICAgICAgYXBwbHlGaWx0ZXJSZXN1bHQodm0sIGZlZWQsIHsgcmVzdWx0LCByZWFzb24gfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwgeyBpbW1lZGlhdGU6IHRydWUgfSk7CiAgICAgICAgfSk7CgoKICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSwga2V5KTsKICAgIH0KICB9LCB7IHByaW9yaXR5OiBwcmlvcml0eS5MQVNUIH0pOwoKICBpMThuLmZvbGRSZWFzb24gPSB7CiAgICBjbjogJyLlt7Lmipjlj6AgQCIgYXR0cih5YXdmLWZlZWQtYXV0aG9yKSAiIOeahOS4gOadoeW+ruWNmiInLAogICAgdHc6ICci5bey5oqY55aKIEAiIGF0dHIoeWF3Zi1mZWVkLWF1dGhvcikgIiDnmoTkuIDmop3lvq7ljZoiJywKICAgIGVuOiAnIkEgZmVlZCBwb3N0ZWQgYnkgQCIgYXR0cih5YXdmLWZlZWQtYXV0aG9yKScsCiAgfTsKCiAgLy8g5Y2V5p2h5b6u5Y2a6aG16Z2i5rC46L+c5LiN5bqU5b2T6ZqQ6JeP5b6u5Y2aCiAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gc2luZ2xlV2VpYm9QYWdlVW5zZXRSdWxlKCkgewogICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tpZF49IlBsX09mZmljaWFsX1dlaWJvRGV0YWlsX18iXScpID8gJ3Vuc2V0JyA6IG51bGw7CiAgfSwgeyBwcmlvcml0eTogMWU2IH0pOwogIC8vIOWktOadoeaWh+eroOaYr+S4gOadoeW+ruWNmu+8jOexu+S8vOS6juWNleadoeW+ruWNmu+8jOS4jeW6lOW9k+makOiXjwogIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHNpbmdsZVdlaWJvUGFnZVVuc2V0UnVsZShmZWVkKSB7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OICE9PSA2KSByZXR1cm4gbnVsbDsKICAgIHJldHVybiBmZWVkLm1hdGNoZXMoJy5XQl9hcnRpY2FsIConKSA/ICd1bnNldCcgOiBudWxsOwogIH0sIHsgcHJpb3JpdHk6IDFlNiB9KTsKICAvLyDml6Dorrrlm6DkuLrkvZXnp43ljp/lm6DvvIzlkIzkuIDpobXpnaLkuIrlkIzkuIDmnaHlvq7ljZrkuI3lupTlh7rnjrDkuKTmrKEKICAvLyAyMDIw5bm0N+aciOWQju+8jOS4iuS4gOihjOazqOmHiuaYr+mUmeeahO+8jOWboOS4uuW/q+i9rOS5i+WQjuS7luS7rOeahCBtaWQg5piv5LiA5qC355qE77yM6ZyA6KaB55SoIGZtaWQg5Yy65YiGCiAgLy8g5LiN6L+H5bCx566X5piv5b+r6L2s55qE77yM5bGV56S65Yeg5qyh5Lmf5rKh5pyJ5Lu75L2V5oSP5LmJ77yM5omA5Lul6L+Z5q616YC76L6R5L+d5oyB5LiN5Y+YCiAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gaGlkZUR1cGxpY2F0ZShmZWVkKSB7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OICE9PSA2KSByZXR1cm4gbnVsbDsKICAgIGNvbnN0IG1pZCA9IGZlZWQuZ2V0QXR0cmlidXRlKCdtaWQnKTsKICAgIGlmICghbWlkKSByZXR1cm4gbnVsbDsKICAgIGNvbnN0IGFsbCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLldCX2ZlZWRfdHlwZVttaWRdJykpOwogICAgaWYgKGFsbC5maW5kKHRoYXQgPT4gdGhhdCAhPT0gZmVlZCAmJiB0aGF0LmdldEF0dHJpYnV0ZSgnbWlkJykgPT09IG1pZCkpIHJldHVybiAnaGlkZSc7CiAgICByZXR1cm4gbnVsbDsKICB9LCB7IHByaW9yaXR5OiAxZTYgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGVzZXQvZGlhbG9nLmpzCi8qKgogKiDov5nkuKrmlofku7bnlKjkuo7mmL7npLrkuIDkuKrmmL7npLrkuoboi6XlubLmnaHop4TliJnnmoTlr7nor53moYYKICovCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IHVpID0gdXRpbC51aTsKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IHRhYnMgPSBydWxlLnRhYnM7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY29uZmlnRGlhbG9nVGl0bGU6IHsKICAgICAgY246ICforr7nva4gLSDoja/mlrkgKFlBV0YpJywKICAgICAgdHc6ICfoqK3lrpogLSDol6XmlrkgKFlBV0YpJywKICAgICAgZW46ICdTZXR0aW5ncyAtIFlBV0YgKFlldCBBbm90aGVyIFdlaWJvIEZpbHRlciknLAogICAgfSwKICAgIHNlYXJjaEVtcHR5SW5wdXQ6IHsgY246ICfplK7lhaXku6XmkJzntKLorr7nva7pobknLCB0dzogJ+mNteWFpeS7peaQnOWwi+ioreWumumghScsIGVuOiAnVHlwZSB0byBzZWFyY2ggc2V0dGluZ3MnIH0sCiAgICBzZWFyY2hFbXB0eVJlc3VsdDogeyBjbjogJ+acquaJvuWIsOS4juaCqOi+k+WFpeWMuemFjeeahOiuvue9rumhuScsIHR3OiAn5pyq5om+5Yiw6IiH5oKo6Ly45YWl5Yy56YWN55qE6Kit572u6aCFJywgZW46ICdObyBNYXRjaGVkIFNldHRpbmdzJyB9LAogIH0pOwoKICAvKiogQHR5cGUge3sgW2U6IHN0cmluZ106ICgpID0+IEhUTUxFbGVtZW50IH19ICovCiAgY29uc3QgY29uZmlnRG9tID0ge307CiAgY29uZmlnRG9tLmxlZnQgPSAoKSA9PiB7CiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJXQl9taW5pdGFiIHlhd2YtY29uZmlnLWhlYWRlciIgbm9kZS10eXBlPSJ5YXdmLWNvbmZpZy1oZWFkZXIiPjx1bCBjbGFzcz0ibWluaXRiX3VsIFNfbGluZTEgU19iZzEgY2xlYXJmaXgiPjwvdWw+PC9kaXY+JzsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi1jb25maWctaGVhZGVyIj48dWwgY2xhc3M9Indvby1ib3gtZmxleCB3b28tdGFiLW5hdiI+PC91bD48L2Rpdj4nOwogICAgfQogICAgcmV0dXJuIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7CiAgfTsKICBjb25maWdEb20uc2VhcmNoID0gKCkgPT4gewogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8bGkgY2xhc3M9Im1pbml0Yl9pdGVtIFNfbGluZTEgeWF3Zi1jb25maWctdGFiIHlhd2YtY29uZmlnLXRhYi1zZWFyY2giPjxsYWJlbCBjbGFzcz0ibWluaXRiX2xrIFNfdHh0MSI+PGlucHV0IGlkPSJ5YXdmLWNvbmZpZy1zZWFyY2giIGNsYXNzPSJ5YXdmLWNvbmZpZy1zZWFyY2giIHR5cGU9InNlYXJjaCI+PHNwYW4gY2xhc3M9Inlhd2YtY29uZmlnLXNlYXJjaC1sb2dvIFdfZmljb24gU190eHQyIj5mPC9zcGFuPjwvbGFiZWw+PC9saT4nOwogICAgfSBlbHNlIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8bGkgY2xhc3M9Indvby10YWItaXRlbS1tYWluIHlhd2YtY29uZmlnLXRhYiB5YXdmLWNvbmZpZy10YWItc2VhcmNoIj48bGFiZWw+PGlucHV0IGlkPSJ5YXdmLWNvbmZpZy1zZWFyY2giIGNsYXNzPSJ3b28taW5wdXQtbWFpbiB5YXdmLWNvbmZpZy1zZWFyY2giIHR5cGU9InNlYXJjaCI+PGkgZGF0YS12LTI2MjE9IiIgY2xhc3M9Indvby1mb250IGljb24gd29vLWZvbnQtLXNlYXJjaCB5YXdmLWNvbmZpZy1zZWFyY2gtbG9nbyI+PC9pPjwvbGFiZWw+PC9saT4nOwogICAgfQogICAgcmV0dXJuIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7CiAgfTsKICBjb25maWdEb20uaXRlbSA9IHRpdGxlID0+IHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGxpIGNsYXNzPSJtaW5pdGJfaXRlbSBTX2xpbmUxIHlhd2YtY29uZmlnLXRhYiI+PGEgY2xhc3M9Im1pbml0Yl9sayBTX3R4dDEgU19iZzEgU19iZzIiIGFjdGlvbi10eXBlPSJ0YWJfaXRlbSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PC9hPjwvbGk+JzsKICAgICAgY29uc3QgdGV4dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhJyk7CiAgICAgIHRleHQuYXBwZW5kQ2hpbGQodGl0bGUpOwogICAgfSBlbHNlIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8bGkgY2xhc3M9Indvby10YWItaXRlbS1tYWluIHlhd2YtY29uZmlnLXRhYiI+PGJ1dHRvbj48L2J1dHRvbj48L2xpPic7CiAgICAgIGNvbnN0IHRleHQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignYnV0dG9uJyk7CiAgICAgIHRleHQuYXBwZW5kQ2hpbGQodGl0bGUpOwogICAgfQogICAgcmV0dXJuIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7CiAgfTsKICBjb25maWdEb20ucmlnaHQgPSAoKSA9PiB7CiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IG5vZGUtdHlwZT0ieWF3Zi1jb25maWctYm9keSIgY2xhc3M9Inlhd2YtY29uZmlnLWJvZHkgeWF3Zi13aW5kb3ctYm9keSI+PC9kaXY+JzsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi1jb25maWctYm9keSB5YXdmLXdpbmRvdy1ib2R5Ij48L2Rpdj4nOwogICAgfQogICAgcmV0dXJuIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7CiAgfTsKICBjb25maWdEb20ubGF5ZXIgPSAoKSA9PiB7CiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ5YXdmLWNvbmZpZy1sYXllciI+PC9kaXY+JzsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi1jb25maWctbGF5ZXIiPjwvZGl2Pic7CiAgICB9CiAgICByZXR1cm4gY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTsKICB9OwoKICBjb25zdCByZW5kZXJUaXAgPSAobGF5ZXIsIHRleHQpID0+IHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgbGF5ZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9IldCX2VtcHR5Ij48ZGl2IGNsYXNzPSJXQl9pbm5lcndyYXAiPjxkaXYgY2xhc3M9ImVtcHR5X2NvbiBjbGVhcmZpeCI+PHAgY2xhc3M9Imljb25fYmVkIj48aSBjbGFzcz0iV19pY29uIGljb25fd2FybkIiPjwvaT48L3A+PHAgY2xhc3M9InRleHQgeWF3Zi10aXAtdGV4dCI+PC9wPjwvZGl2PjwvZGl2PjwvZGl2Pic7CiAgICB9IGVsc2UgewogICAgICBsYXllci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0id29vLXRpcC1tYWluIHdvby10aXAtdmVydGljYWwgeWF3Zi1lbXB0eS10aXAiPjxzcGFuIGNsYXNzPSJ3b28tdGlwLWljb24gd29vLXRpcC13YXJuRmlsbCB5YXdmLWVtcHR5LXRpcC1pY29uIj48L3NwYW4+PHNwYW4gY2xhc3M9Indvby10aXAtdGV4dCB5YXdmLXRpcC10ZXh0Ij48L3A+PC9kaXY+JzsKICAgICAgbGF5ZXIucXVlcnlTZWxlY3RvcignLndvby10aXAtaWNvbicpLmFwcGVuZENoaWxkKHVpLmljb24oJ3dhcm4nKS5kb2N1bWVudEVsZW1lbnQpLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnd29vLXRpcC1pY29uJyk7CiAgICB9CiAgICBsYXllci5xdWVyeVNlbGVjdG9yKCcueWF3Zi10aXAtdGV4dCcpLnRleHRDb250ZW50ID0gdGV4dDsKICB9OwoKICBjb25zdCByZW5kZXJTZWFyY2ggPSAobGF5ZXIsIGlucHV0LCBmaWx0ZXIpID0+IHsKICAgIGNvbnN0IHNlYXJjaFRleHRzID0gKGlucHV0Lm1hdGNoKC9cUysvZykgfHwgW10pLmZpbHRlcih4ID0+ICF4LmluY2x1ZGVzKCc6JykpLm1hcCh0ID0+IHQudG9VcHBlckNhc2UoKSk7CiAgICBjb25zdCBbX3Zlck1hdGNoLCB2ZXJPcCwgdmVyTnVtXSA9IGlucHV0Lm1hdGNoKC9cYnZlcig/OnNpb24pPzooWz48XT89PykoXGQrKVxiLykgfHwgW107CiAgICBjb25zdCB2ZXJzaW9uVGVzdCA9IHsKICAgICAgJz4nOiB2ID0+IHYgPiB2ZXJOdW0sCiAgICAgICc8JzogdiA9PiB2IDwgdmVyTnVtLAogICAgICAnPj0nOiB2ID0+IHYgPj0gdmVyTnVtLAogICAgICAnPD0nOiB2ID0+IHYgPD0gdmVyTnVtLAogICAgICAnPSc6IHYgPT4gdiA9PT0gK3Zlck51bSwKICAgICAgJyc6IHYgPT4gdiA9PT0gK3Zlck51bSwKICAgIH1bdmVyT3BdID8/ICgoKSA9PiB0cnVlKTsKICAgIGNvbnN0IFtfd2J2ZXJNYXRjaCwgd2JWZXJOdW1dID0gaW5wdXQubWF0Y2goL1xid2VpYm86dihbNjddKVxiLykgPz8gW107CiAgICBjb25zdCB3ZWlib1ZlcnNpb25UZXN0ID0gd2JWZXJOdW0gPyAodiA9PiBBcnJheS5pc0FycmF5KHYpID8gdi5pbmNsdWRlcygrd2JWZXJOdW0pIDogdiA9PT0gK3diVmVyTnVtKSA6ICgpID0+IHRydWU7CiAgICBsYXllci5pbm5lckhUTUwgPSAnJzsKICAgIGlmICghc2VhcmNoVGV4dHMubGVuZ3RoICYmIHZlck51bSA9PSBudWxsICYmIHdiVmVyTnVtID09IG51bGwpIHsKICAgICAgcmVuZGVyVGlwKGxheWVyLCBpMThuLnNlYXJjaEVtcHR5SW5wdXQpOwogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBpdGVtcyA9IHJ1bGUucXVlcnkoewogICAgICBmaWx0ZXI6IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKCFpdGVtLnZlcnNpb24pIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoIXZlcnNpb25UZXN0KGl0ZW0udmVyc2lvbikpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoIXdlaWJvVmVyc2lvblRlc3QoaXRlbS53ZWlib1ZlcnNpb24pKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicgJiYgIWZpbHRlcihpdGVtKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGNvbnN0IHRleHQgPSBpdGVtLnRleHQoKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGlmIChzZWFyY2hUZXh0cy5zb21lKHQgPT4gIXRleHQuaW5jbHVkZXModCkpKSByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0sCiAgICB9KTsKICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHsKICAgICAgcmVuZGVyVGlwKGxheWVyLCBpMThuLnNlYXJjaEVtcHR5UmVzdWx0KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmVuZGVyKGxheWVyLCBpdGVtcyk7CiAgfTsKCiAgLyoqCiAgICogQHBhcmFtIHtFbGVtZW50fSBpbm5lcgogICAqIEBwYXJhbSB7QXJyYXk8VGFiPn0gdGFicwogICAqLwogIGNvbnN0IHJlbmRlclRhYnMgPSBmdW5jdGlvbiAoaW5uZXIsIHRhYnMsIHsgaW5pdGlhbCA9IG51bGwsIGZpbHRlciA9IG51bGwgfSA9IHt9KSB7CiAgICBpbm5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1pbm5lcicpOwogICAgY29uc3QgbGVmdCA9IGlubmVyLmFwcGVuZENoaWxkKGNvbmZpZ0RvbS5sZWZ0KCkpOwogICAgY29uc3QgcmlnaHQgPSBpbm5lci5hcHBlbmRDaGlsZChjb25maWdEb20ucmlnaHQoKSk7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgIGNvbnN0IHY3VGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIHY3VGlwLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ0aXAgd29vLWJveC1mbGV4IHdvby1ib3gtYWxpZ25DZW50ZXIgd29vLWJveC1qdXN0aWZ5Q2VudGVyIHdvby10aXAtbWFpbiB3b28tdGlwLWZsYXQgd29vLXRpcC1lcnJvciIgc3R5bGU9InBhZGRpbmc6IDEwcHg7Ij48c3BhbiBjbGFzcz0id29vLXRpcC10ZXh0Ij7oja/mlrnvvIhZQVdG77yJ6ZKI5a+55b6u5Y2a5paw54mI77yIVjfvvInnmoTmlK/mjIHmraPlnKjlvIDlj5HkuK3vvIHnm67liY3nu53lpKflpJrmlbDlip/og73mmoLkuI3mlK/mjIHmlrDniYjvvIHvvIHmrKLov47liLAgPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL3RpYW5zaC95YW9mYW5nIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciI+6aG555uu5Li76aG1PC9hPiDotKHnjK7ku6PnoIHvvIE8L3NwYW4+PC9kaXY+JzsKICAgICAgY29uc3QgdGV4dCA9IHY3VGlwLnF1ZXJ5U2VsZWN0b3IoJy53b28tdGlwLXRleHQnKTsKICAgICAgdGV4dC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZSh1aS5pY29uKCdlcnJvcicpLmRvY3VtZW50RWxlbWVudCwgdGV4dCkuc2V0QXR0cmlidXRlKCdzdHlsZScsICd3aWR0aDogMzJweDsgaGVpZ2h0OiAzMnB4OycpOwogICAgICByaWdodC5hcHBlbmRDaGlsZCh2N1RpcC5maXJzdENoaWxkKTsKICAgIH0KICAgIGNvbnN0IHRhYmxpc3QgPSBsZWZ0LnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7CiAgICBjb25zdCBzZWFyY2ggPSB0YWJsaXN0LmFwcGVuZENoaWxkKGNvbmZpZ0RvbS5zZWFyY2goKSk7CiAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNlYXJjaC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpOwogICAgY29uc3QgcmVuZGVyVGFicyA9IHRhYnMuZmlsdGVyKHRhYiA9PiB0YWIudHlwZSA9PT0gJ3RhYicpOwogICAgLyoqIEB0eXBlIHtFbGVtZW50P30gKi8KICAgIGxldCBjdXJyZW50ID0gbnVsbDsKICAgIC8qKiBAdHlwZSB7V2Vha01hcDxFbGVtZW50LCBGdW5jdGlvbj59ICovCiAgICBjb25zdCB0YWJJbml0ID0gbmV3IFdlYWtNYXAoKTsKICAgIGNvbnN0IHRhYkxheWVyID0gcmVuZGVyVGFicy5tYXAodGFiID0+IHsKICAgICAgY29uc3QgbGF5ZXIgPSByaWdodC5hcHBlbmRDaGlsZChjb25maWdEb20ubGF5ZXIoKSk7CiAgICAgIHJldHVybiBsYXllcjsKICAgIH0pOwogICAgY29uc3QgaGlkZUFsbExheWVyID0gZnVuY3Rpb24gKCkgewogICAgICBbLi4udGFiTGF5ZXIsIHNlYXJjaExheWVyXS5mb3JFYWNoKGxheWVyID0+IHsKICAgICAgICBpZiAobGF5ZXIuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSB7CiAgICAgICAgICBsYXllci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgdGFiTGVmdCA9IHJlbmRlclRhYnMubWFwKCh0YWIsIGluZGV4KSA9PiB7CiAgICAgIGNvbnN0IGxheWVyID0gdGFiTGF5ZXJbaW5kZXhdOwogICAgICBjb25zdCB0YWJMZWZ0ID0gdGFibGlzdC5hcHBlbmRDaGlsZChjb25maWdEb20uaXRlbSh0YWIuZ2V0UmVuZGVyUmVzdWx0KCkpKTsKICAgICAgdGFiSW5pdC5zZXQodGFiTGVmdCwgKCkgPT4gewogICAgICAgIGhpZGVBbGxMYXllcigpOwogICAgICAgIGxheWVyLmlubmVySFRNTCA9ICcnOwogICAgICAgIHJlbmRlcihsYXllciwgcnVsZS5xdWVyeSh7IGJhc2U6IFt0YWJdLCBmaWx0ZXIgfSkpOwogICAgICAgIGxheWVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRhYkxlZnQ7CiAgICB9KTsKICAgIGNvbnN0IHNlYXJjaExheWVyID0gcmlnaHQuYXBwZW5kQ2hpbGQoY29uZmlnRG9tLmxheWVyKCkpOwogICAgc2VhcmNoTGF5ZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctbGF5ZXItc2VhcmNoJyk7CiAgICB0YWJJbml0LnNldChzZWFyY2gsICgpID0+IHsKICAgICAgaGlkZUFsbExheWVyKCk7CiAgICAgIHNlYXJjaExheWVyLmlubmVySFRNTCA9ICcnOwogICAgICByZW5kZXJTZWFyY2goc2VhcmNoTGF5ZXIsIHNlYXJjaElucHV0LnZhbHVlLCBmaWx0ZXIpOwogICAgICBzZWFyY2hMYXllci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgIH0pOwogICAgY29uc3Qgc2V0Q3VycmVudCA9IHRhYkxlZnQgPT4gewogICAgICBpZiAoY3VycmVudCA9PT0gdGFiTGVmdCkgcmV0dXJuOwogICAgICBjb25zdCBjdXJyZW50Q2xhc3NOYW1lID0geWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gJ2N1cnJlbnQnIDogJ3dvby10YWItYWN0aXZlJzsKICAgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi1jdXJyZW50JywgY3VycmVudENsYXNzTmFtZSk7CiAgICAgIGN1cnJlbnQgPSB0YWJMZWZ0OwogICAgICB0YWJMZWZ0LmNsYXNzTGlzdC5hZGQoJ3lhd2YtY3VycmVudCcsIGN1cnJlbnRDbGFzc05hbWUpOwogICAgICBpZiAoc2VhcmNoICE9PSB0YWJMZWZ0ICYmIHNlYXJjaElucHV0LnZhbHVlKSBzZWFyY2hJbnB1dC52YWx1ZSA9ICcnOwogICAgICB0YWJJbml0LmdldCh0YWJMZWZ0KSgpOwogICAgICByaWdodC5zY3JvbGxUbygwLCAwKTsKICAgIH07CiAgICAvLyDoh6rliqjpgInkuK3nm67moIfpgInpobnljaHvvIzmiJbnrKzkuIDkuKrpgInpobnljaEKICAgIHNldEN1cnJlbnQodGFiTGVmdFsoaW5pdGlhbCAmJiByZW5kZXJUYWJzLmluZGV4T2YoaW5pdGlhbCkgKyAxIHx8IDEpIC0gMV0pOwogICAgbGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgY29uc3QgdGFiTGVmdCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcueWF3Zi1jb25maWctdGFiJyk7CiAgICAgIGlmICghdGFiTGVmdCkgcmV0dXJuOwogICAgICBpZiAodGFiTGVmdCA9PT0gc2VhcmNoKSByZXR1cm47CiAgICAgIHNldEN1cnJlbnQodGFiTGVmdCk7CiAgICB9KTsKICAgIC8vIOW9k+WcqOaQnOe0ouahhumHjOmdoui+k+WFpeWGheWuueeahOaXtuWAme+8jOmAieS4reaQnOe0ouahhuW5tuWIt+aWsOe7k+aenAogICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBldmVudCA9PiB7CiAgICAgIGlmICghc2VhcmNoSW5wdXQudmFsdWUgJiYgY3VycmVudCAhPT0gc2VhcmNoKSByZXR1cm47CiAgICAgIGlmIChjdXJyZW50ICE9PSBzZWFyY2gpIHNldEN1cnJlbnQoc2VhcmNoKTsKICAgICAgZWxzZSB0YWJJbml0LmdldChzZWFyY2gpKCk7CiAgICB9KTsKICB9OwoKICBjb25zdCByZW5kZXIgPSBmdW5jdGlvbiAoaW5uZXIsIGl0ZW1zKSB7CiAgICBjb25zdCBncm91cHMgPSBuZXcgTWFwKCk7CiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoIWdyb3Vwcy5oYXMoaXRlbS5wYXJlbnQpKSB7CiAgICAgICAgZ3JvdXBzLnNldChpdGVtLnBhcmVudCwgW10pOwogICAgICB9CiAgICAgIGdyb3Vwcy5nZXQoaXRlbS5wYXJlbnQpLnB1c2goaXRlbSk7CiAgICB9KTsKICAgIFsuLi5ncm91cHMuZW50cmllcygpXS5mb3JFYWNoKChbZ3JvdXAsIGl0ZW1zXSkgPT4gewogICAgICB0cnkgewogICAgICAgIGlubmVyLmFwcGVuZENoaWxkKGdyb3VwLmdldFJlbmRlclJlc3VsdCgpKTsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctZ3JvdXAtaXRlbXMnKTsKICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgbGV0IG5vZGUgPSBpdGVtLmdldFJlbmRlclJlc3VsdCgpOwogICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgIH0pOwogICAgICAgIGlubmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSByZW5kZXIgY29uZmlnIGxpc3Q6JywgZSk7CiAgICAgIH0KICAgIH0pOwogIH07CiAgcnVsZS5yZW5kZXIgPSByZW5kZXI7CgogIHJ1bGUuZGlhbG9nID0gZnVuY3Rpb24gKHRhYiA9IG51bGwsIGZpbHRlciA9IG51bGwpIHsKICAgIHRyeSB7CiAgICAgIHVpLmRpYWxvZyh7CiAgICAgICAgaWQ6ICd5YXdmLWNvbmZpZycsCiAgICAgICAgdGl0bGU6IGkxOG4uY29uZmlnRGlhbG9nVGl0bGUsCiAgICAgICAgcmVuZGVyOiBpbm5lciA9PiB7CiAgICAgICAgICByZW5kZXJUYWJzKGlubmVyLCB0YWJzLCB7IGluaXRpYWw6IHRhYiwgZmlsdGVyIH0pOwogICAgICAgIH0sCiAgICAgICAgYmFyOiB0cnVlLAogICAgICB9KS5zaG93KCk7CiAgICB9IGNhdGNoIChlKSB7IHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIHNob3dpbmcgcnVsZSBkaWFsb2cgJW8nLCBlKTsgfQogIH07CgogIGNzcy5hcHBlbmQoYAoueWF3Zi1XQlY2ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaW5uZXIgeyBwYWRkaW5nOiAwIDAgMCAxNjBweDsgd2lkdGg6IDY0MHB4OyBoZWlnaHQ6IDQ4MHB4OyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDE2MHB4OyBoZWlnaHQ6IDQ4MHB4OyB0b3A6IDA7IGxlZnQ6IDA7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciB1bCB7IGhlaWdodDogNDUwcHg7IHdpZHRoOiAxMjBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgcGFkZGluZzogMjBweCAwIDEwcHggNDBweDsgYm94LXNoYWRvdzogLTRweCAwIDJweCAtMnB4IHJnYmEoNjQsIDY0LCA2NCwgMC4xNSkgaW5zZXQsIDAgNHB4IDJweCAtMnB4IHJnYmEoNjQsIDY0LCA2NCwgMC4xNSkgaW5zZXQ7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBsaSB7IGRpc3BsYXk6IGJsb2NrOyB3aWR0aDogMTIwcHg7IGhlaWdodDogMjVweDsgYm9yZGVyLXN0eWxlOiBzb2xpZCBub25lOyBtYXJnaW4tdG9wOiAtMXB4OyB9Ci55YXdmLVdCVjYgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgYSwKLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBsYWJlbCB7IHdpZHRoOiAxMDBweDsgcGFkZGluZzogMCAxMHB4OyBwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDE7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciAueWF3Zi1jb25maWctdGFiOm5vdCguY3VycmVudCkgYSB7IGJhY2tncm91bmQ6IG5vbmUgdHJhbnNwYXJlbnQ7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciAueWF3Zi1jb25maWctc2VhcmNoIHsgLW1vei1hcHBlYXJhbmNlOiBub25lOyAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7IGJhY2tncm91bmQ6IG5vbmUgdHJhbnNwYXJlbnQ7IGJvcmRlcjogbWVkaXVtIG5vbmU7IGhlaWdodDogMjVweDsgcGFkZGluZzogMCAwIDAgMzBweDsgdGV4dC1hbGlnbjogcmlnaHQ7IHdpZHRoOiA3MHB4OyBib3gtc2l6aW5nOiBjb250ZW50LWJveDsgcG9zaXRpb246IHJlbGF0aXZlOyB6LWluZGV4OiAyOyB9Ci55YXdmLVdCVjYgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1zZWFyY2gtbG9nbyB7IGNsZWFyOiBib3RoOyBkaXNwbGF5OiBibG9jazsgZmxvYXQ6IGxlZnQ7IGxlZnQ6IDQ1cHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAtMjdweDsgdHJhbnNpdGlvbjogbGVmdCBsaW5lYXIgMC4yczsgY3Vyc29yOiB0ZXh0OyBmb250LXdlaWdodDogbm9ybWFsOyB9Ci55YXdmLVdCVjYgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgbGkuY3VycmVudCAueWF3Zi1jb25maWctc2VhcmNoLWxvZ28sCi55YXdmLVdCVjYgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1zZWFyY2g6Zm9jdXMgfiAueWF3Zi1jb25maWctc2VhcmNoLWxvZ28geyBsZWZ0OiAxNXB4OyB9Ci55YXdmLVdCVjYgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1ib2R5IHsgcGFkZGluZzogMTBweCAyMHB4IDIwcHg7IHdpZHRoOiA2MDBweDsgbWF4LWhlaWdodDogNDUwcHg7IG92ZXJmbG93OiBhdXRvOyBib3gtc2hhZG93OiAwIDRweCAycHggLTJweCByZ2JhKDY0LCA2NCwgNjQsIDAuMTUpIGluc2V0OyBwb3NpdGlvbjogcmVsYXRpdmU7IGxpbmUtaGVpZ2h0OiAyMHB4OyB9Ci55YXdmLVdCVjYgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1sYXllciB7IHBhZGRpbmctYm90dG9tOiAyMHB4OyBtaW4taGVpZ2h0OiA0MDBweDsgfQoueWF3Zi1XQlY2ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctbGF5ZXIuY3VycmVudCB7IGRpc3BsYXk6IGJsb2NrOyB9CmApOwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgeyB3aWR0aDogODAwcHg7IGZvbnQtc2l6ZTogMTRweDsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaW5uZXIgeyBwYWRkaW5nOiAwIDAgMCAxNjBweDsgd2lkdGg6IDY0MHB4OyBoZWlnaHQ6IDQ4MHB4OyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDE2MHB4OyBoZWlnaHQ6IDQ4MHB4OyB0b3A6IDA7IGxlZnQ6IDA7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciB1bCB7IGhlaWdodDogNDQycHg7IHdpZHRoOiAxMjBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgcGFkZGluZzogMjBweCAwIDIwcHggNDBweDsgYm9yZGVyLXJpZ2h0OiAxMHB4IHNvbGlkIHZhcigtLWZyYW1lLWJhY2tncm91bmQpOyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgbGkgeyBkaXNwbGF5OiBibG9jazsgd2lkdGg6IDEyMHB4OyBoZWlnaHQ6IDI1cHg7IGxpbmUtaGVpZ2h0OiAyNXB4OyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgbGkueWF3Zi1jdXJyZW50IHsgYm94LXNoYWRvdzogLTJweCAwIHZhcigtLXctYnJhbmQpIGluc2V0OyBmb250LXdlaWdodDogYm9sZDsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIGxpOmhvdmVyIGJ1dHRvbiB7IGJhY2tncm91bmQ6IHZhcigtLXctaG92ZXIpICFpbXBvcnRhbnQ7IGJvcmRlci1yYWRpdXM6IDE1cHg7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBidXR0b24sCi55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgbGFiZWwgeyB3aWR0aDogMTIwcHg7IHBhZGRpbmc6IDA7IGJvcmRlcjogbm9uZTsgYmFja2dyb3VuZDogbm9uZTsgcG9zaXRpb246IHJlbGF0aXZlOyB6LWluZGV4OiAxOyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgYnV0dG9uIHsgY29sb3I6IGluaGVyaXQ7IG91dGxpbmU6IG5vbmU7IGN1cnNvcjogcG9pbnRlcjsgZm9udDogaW5oZXJpdDsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIC55YXdmLWNvbmZpZy1zZWFyY2ggeyAtbW96LWFwcGVhcmFuY2U6IG5vbmU7IC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsgYmFja2dyb3VuZDogbm9uZSB0cmFuc3BhcmVudDsgaGVpZ2h0OiAyNXB4OyBwYWRkaW5nOiAwIDEwcHggICAwIDMwcHg7IHRleHQtYWxpZ246IHJpZ2h0OyB3aWR0aDogODBweDsgYm94LXNpemluZzogY29udGVudC1ib3g7IHBvc2l0aW9uOiByZWxhdGl2ZTsgei1pbmRleDogMjsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctc2VhcmNoLWxvZ28geyBjbGVhcjogYm90aDsgZGlzcGxheTogYmxvY2s7IGZsb2F0OiBsZWZ0OyBsZWZ0OiA1NXB4OyBwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogLTE4cHg7IHRyYW5zaXRpb246IGxlZnQgbGluZWFyIDAuMnM7IGN1cnNvcjogdGV4dDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIGxpLnlhd2YtY3VycmVudCAueWF3Zi1jb25maWctc2VhcmNoLWxvZ28sCi55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1zZWFyY2g6Zm9jdXMgfiAueWF3Zi1jb25maWctc2VhcmNoLWxvZ28geyBsZWZ0OiAxNXB4OyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1ib2R5IHsgcGFkZGluZzogMTBweCAyMHB4IDIwcHg7IHdpZHRoOiA2MDBweDsgbWF4LWhlaWdodDogNDUwcHg7IG92ZXJmbG93OiBhdXRvOyBwb3NpdGlvbjogcmVsYXRpdmU7IGxpbmUtaGVpZ2h0OiAyMHB4OyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1sYXllciB7IHBhZGRpbmctYm90dG9tOiAyMHB4OyBtaW4taGVpZ2h0OiA0MDBweDsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctbGF5ZXIueWF3Zi1jdXJyZW50IHsgZGlzcGxheTogYmxvY2s7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLndvby1kaWFsb2ctbWFpbiB7IHdpZHRoOiA4MDBweDsgbWF4LXdpZHRoOiBub25lOyBwYWRkaW5nOiAwOyBvdmVyZmxvdzogaGlkZGVuOyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC53b28tZGlhbG9nLXRpdGxlIHsgbWFyZ2luLWJvdHRvbTogMDsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAud29vLXRhYi1uYXYgeyBtYXJnaW46IDA7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtZW1wdHktdGlwIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWVtcHR5LXRpcC1pY29uIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogMCBhdXRvIDIwcHg7IHBhZGRpbmctdG9wOiAxNTBweDsgfQpgKTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZXNldC9tZW51LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwoKICBjb25zdCBwYWdlbWVudSA9IHlhd2YucGFnZW1lbnUgPSB7fTsKCiAgbGV0IGNvbnRhaW5lclJlc29sdmU7CiAgY29uc3QgY29udGFpbmVyUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgY29udGFpbmVyUmVzb2x2ZSA9IHJlc29sdmU7CiAgfSk7CgogIGxldCBpdGVtcyA9IFtdOwoKICBjb25zdCBsaW5lID0gZnVuY3Rpb24gKCkgewogICAgY29uc3QgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpOwogICAgdWwuaW5uZXJIVE1MID0gJzxsaSBjbGFzcz0ibGluZSBTX2xpbmUxIHlhd2YtY29uZmlnLW1lbnVsaW5lIj48L2xpPic7CiAgICByZXR1cm4gdWwuZmlyc3RDaGlsZDsKICB9OwoKICBwYWdlbWVudS5hZGQgPSBhc3luYyBmdW5jdGlvbiAoeyB0aXRsZSwgaHJlZiA9IG51bGwsIG9uQ2xpY2ssIG9yZGVyID0gSW5maW5pdHksIHNlY3Rpb24gPSAwIH0pIHsKICAgIGNvbnN0IHVsID0gYXdhaXQgY29udGFpbmVyUHJvbWlzZTsKICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgIGxpLmlubmVySFRNTCA9ICc8YSB0YXJnZXQ9Il90b3AiPjwvYT4nOwogICAgY29uc3QgYSA9IGxpLmZpcnN0Q2hpbGQ7CiAgICBhLmhyZWYgPSBocmVmIHx8ICdqYXZhc2NyaXB0OnZvaWQoMCk7JzsKICAgIGEudGV4dENvbnRlbnQgPSB0eXBlb2YgdGl0bGUgPT09ICdmdW5jdGlvbicgPyB0aXRsZSgpIDogdGl0bGU7CiAgICBsaS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgb25DbGljayhldmVudCk7CiAgICB9KTsKICAgIGNvbnN0IGluZGV4ID0gaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5zZWN0aW9uID4gc2VjdGlvbiB8fCBpdGVtLnNlY3Rpb24gPT09IHNlY3Rpb24gJiYgaXRlbS5vcmRlciA+IG9yZGVyKTsKICAgIGlmIChpbmRleCAhPT0gLTEpIHVsLmluc2VydEJlZm9yZShsaSwgaXRlbXNbaW5kZXhdLmxpKTsKICAgIGVsc2UgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgaWYgKGluZGV4ID4gMCAmJiBpdGVtc1tpbmRleCAtIDFdLnNlY3Rpb24gPT09IHNlY3Rpb24pIHsKICAgICAgaWYgKGxpLnByZXZpb3VzU2libGluZy5tYXRjaGVzKCcubGluZScpKSB1bC5yZW1vdmVDaGlsZChsaS5wcmV2aW91c1NpYmxpbmcpOwogICAgfQogICAgaWYgKGluZGV4ICE9PSAtMSAmJiBpdGVtc1tpbmRleF0uc2VjdGlvbiAhPT0gc2VjdGlvbikgewogICAgICBpZiAoIWxpLm5leHRTaWJsaW5nLm1hdGNoZXMoJy5saW5lJykpIHVsLmluc2VydEJlZm9yZShsaW5lKCksIGxpLm5leHRTaWJsaW5nKTsKICAgIH0KICAgIGl0ZW1zLnNwbGljZShpbmRleCwgMCwgeyBsaSwgb3JkZXIsIHNlY3Rpb24gfSk7CiAgICBjb25zdCBzZXRUZXh0ID0gZnVuY3Rpb24gKG5ld1RleHQpIHsKICAgICAgbGkuZmlyc3RDaGlsZC50ZXh0Q29udGVudCA9IHR5cGVvZiBuZXdUZXh0ID09PSAnZnVuY3Rpb24nID8gbmV3VGV4dCgpIDogbmV3VGV4dDsKICAgIH07CiAgICByZXR1cm4geyBkb206IGxpLCB0ZXh0OiBzZXRUZXh0IH07CiAgfTsKCiAgcGFnZW1lbnUucmVhZHkgPSBmdW5jdGlvbiAodWwpIHsKICAgIGNvbnRhaW5lclJlc29sdmUodWwpOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbW1vbi9mZWVkLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGVudiA9IHlhd2YuZW52OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IHJ1bGVzID0geWF3Zi5ydWxlczsKCiAgY29uc3QgdWkgPSB1dGlsLnVpOwogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIGNvbnN0IGNvbnRleHRtZW51ID0geWF3Zi5jb250ZXh0bWVudTsKCiAgY29uc3QgZmFzdEhhbmRsZXJzID0gbmV3IE1hcCgpOwoKICBjb25zdCBmZWVkQ29sbGVjdGlvbkJhbGwgPSBmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICByZXR1cm4gewogICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW4uY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctZmVlZC1iYWxsJyk7CiAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1mZWVkLScgKyBhY3Rpb24pOwogICAgICAgIHJldHVybiBzcGFuOwogICAgICB9LAogICAgfTsKICB9OwoKICBjb25zdCBncm91cHMgPSBmdW5jdGlvbiAoewogICAgYmFzZUNsYXNzOiBCYXNlLAogICAgdGFiOiB0YWJOYW1lLAogICAga2V5LAogICAgdGl0bGUsCiAgICB0eXBlLAogICAgYmVmb3JlOiB7IGhpZGU6IGJlZm9yZUhpZGUgPSBudWxsLCBzaG93OiBiZWZvcmVTaG93ID0gbnVsbCwgZm9sZDogYmVmb3JlRm9sZCA9IG51bGwgfSA9IHt9LAogICAgZGV0YWlsczogeyBoaWRlID0gbnVsbCwgc2hvdyA9IG51bGwsIGZvbGQgPSBudWxsIH0sCiAgICBmYXN0ID0gbnVsbCwKICAgIHZlcnNpb24sCiAgfSkgewogICAgY29uc3QgdGFiID0gcnVsZXNbdGFiTmFtZV07CgogICAgLy8g5Yib5bu65LiA5Liq5YiG57uECiAgICBjb25zdCBncm91cCA9IHRhYltrZXldID0ge307CiAgICBncm91cFtrZXldID0gcnVsZS5Hcm91cCh7CiAgICAgIHBhcmVudDogdGFiW3RhYk5hbWVdLAogICAgICB0ZW1wbGF0ZTogdGl0bGUsCiAgICB9KTsKCiAgICAvLyDkvp3mrKHliJvlu7rkuInnp43nsbvlnovnmoTov4fmu6Top4TliJkKICAgIGNvbnN0IGFjdGlvbnMgPSBbCiAgICAgIHsgYWN0aW9uOiAnc2hvdycsIGRldGFpbHM6IHNob3csIGJlZm9yZTogYmVmb3JlU2hvdyB9LAogICAgICB7IGFjdGlvbjogJ2hpZGUnLCBkZXRhaWxzOiBoaWRlLCBiZWZvcmU6IGJlZm9yZUhpZGUgfSwKICAgICAgeyBhY3Rpb246ICdmb2xkJywgZGV0YWlsczogZm9sZCwgYmVmb3JlOiBiZWZvcmVGb2xkIH0sCiAgICBdLmZpbHRlcihpdGVtID0+IGl0ZW0uZGV0YWlscyk7CgogICAgYWN0aW9ucy5mb3JFYWNoKCh7IGFjdGlvbiwgZGV0YWlsczogeyB0aXRsZSwgcHJpb3JpdHkgPSBudWxsIH0sIGJlZm9yZSB9KSA9PiB7CiAgICAgIGlmICh0eXBlb2YgYmVmb3JlID09PSAnZnVuY3Rpb24nKSBiZWZvcmUoKTsKICAgICAgZ3JvdXBbYWN0aW9uXSA9IG5ldyBCYXNlKHsKICAgICAgICBpZDogWydmaWx0ZXInLCB0YWJOYW1lLCBrZXksIGFjdGlvbl0uam9pbignXycpLAogICAgICAgIHZlcnNpb24sCiAgICAgICAgcGFyZW50OiBncm91cFtrZXldLAogICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSA9PT0gbnVsbCA/IHsKICAgICAgICAgIHNob3c6IDFlNSwKICAgICAgICAgIGhpZGU6IDAsCiAgICAgICAgICBmb2xkOiAtMWU1LAogICAgICAgIH1bYWN0aW9uXSA6IHByaW9yaXR5LAogICAgICAgIHRlbXBsYXRlOiAoKSA9PiAne3tiYWxsfX0nICsgdGl0bGUoKSwKICAgICAgICByZWY6IHsKICAgICAgICAgIGl0ZW1zOiB7IHR5cGUgfSwKICAgICAgICAgIGJhbGw6IGZlZWRDb2xsZWN0aW9uQmFsbChhY3Rpb24pLAogICAgICAgIH0sCiAgICAgICAgYWx3YXlzOiB0cnVlLAogICAgICAgIGZlZWRBY3Rpb246IGFjdGlvbiwKICAgICAgfSk7CiAgICB9KTsKCiAgICBpZiAoZmFzdCkgewogICAgICBjb25zdCB7CiAgICAgICAgdHlwZXM6IFthY3RpdmVUeXBlcywgYWxsVHlwZXNdLAogICAgICAgIHJhZGlvR3JvdXAsCiAgICAgICAgcmVuZGVyLAogICAgICB9ID0gZmFzdDsKICAgICAgWwogICAgICAgIC4uLmFjdGl2ZVR5cGVzLm1hcCh0eXBlID0+ICh7IHR5cGUsIGFjdGl2ZTogdHJ1ZSB9KSksCiAgICAgICAgLi4uYWxsVHlwZXMubWFwKHR5cGUgPT4gKHsgdHlwZSwgYWN0aXZlOiBmYWxzZSB9KSksCiAgICAgIF0uZm9yRWFjaCgoeyB0eXBlLCBhY3RpdmUgfSkgPT4gewogICAgICAgIGNvbnN0IGhhbmRsZXIgPSB7CiAgICAgICAgICBhY3RpdmUsCiAgICAgICAgICByYWRpb0dyb3VwLAogICAgICAgICAgcmVuZGVyLAogICAgICAgICAgcnVsZXM6IGFjdGlvbnMubWFwKCh7IGFjdGlvbiB9KSA9PiAoeyBhY3Rpb24sIHJ1bGU6IGdyb3VwW2FjdGlvbl0gfSkpLAogICAgICAgIH07CiAgICAgICAgaWYgKCFmYXN0SGFuZGxlcnMuaGFzKHR5cGUpKSBmYXN0SGFuZGxlcnMuc2V0KHR5cGUsIFtdKTsKICAgICAgICBmYXN0SGFuZGxlcnMuZ2V0KHR5cGUpLnB1c2goaGFuZGxlcik7CiAgICAgIH0pOwogICAgfQogIH07CiAgcnVsZS5ncm91cHMgPSBncm91cHM7CgogIGNzcy5hcHBlbmQoYAoueWF3Zi1jb25maWctZmVlZC1iYWxsIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogMC44ZW07IGhlaWdodDogMC44ZW07IGJvcmRlci1yYWRpdXM6IDFlbTsgbWFyZ2luLXJpZ2h0OiAwLjVlbTsgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IGJhY2tncm91bmQ6IHZhcigtLXlhd2YtYmFsbC1jb2xvcik7IGJveC1zaGFkb3c6IDAgMCAycHggdmFyKC0teWF3Zi1iYWxsLWNvbG9yKTsgb3BhY2l0eTogMC44OyB9Ci55YXdmLWNvbmZpZy1mZWVkLXNob3cgeyAtLXlhd2YtYmFsbC1jb2xvcjogIzNlYzYzZTsgfQoueWF3Zi1jb25maWctZmVlZC1oaWRlIHsgLS15YXdmLWJhbGwtY29sb3I6ICNjNjNlM2U7IH0KLnlhd2YtY29uZmlnLWZlZWQtZm9sZCB7IC0teWF3Zi1iYWxsLWNvbG9yOiAjYzZjNjNlOyB9CmApOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGZhc3RBZGREaWFsb2dUaXRsZTogewogICAgICBjbjogJ+WIm+W7uui/h+a7pOinhOWImScsCiAgICAgIHR3OiAn5Ym15bu656+p6YG46KaP5YmHJywKICAgICAgZW46ICdDcmVhdGUgRmlsdGVyIFJ1bGVzJywKICAgIH0sCiAgICBmYXN0QWRkRGlhbG9nRGVzY3JpcHRpb246IHsKICAgICAgY246ICfor7fpgInmi6nopoHliJvlu7rnmoTov4fmu6Top4TliJknLAogICAgICB0dzogJ+iri+mBuOaTh+imgeWJteW7uueahOmBjua/vuimj+WJhycsCiAgICAgIGVuOiAnU2VsZWN0IEZpbHRlciBSdWxlcyB0byBDcmVhdGUnLAogICAgfSwKICAgIGZhc3RBZGRTaG93OiB7CiAgICAgIGNuOiAn5pi+56S6JywKICAgICAgdHc6ICfpoa/npLonLAogICAgICBlbjogJ3Nob3cnLAogICAgfSwKICAgIGZhc3RBZGRIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JePJywKICAgICAgdHc6ICfpmrHol48nLAogICAgICBlbjogJ2hpZGUnLAogICAgfSwKICAgIGZhc3RBZGRGb2xkOiB7CiAgICAgIGNuOiAn5oqY5Y+gJywKICAgICAgdHc6ICfmipjnloonLAogICAgICBlbjogJ2ZvbGQnLAogICAgfSwKICB9KTsKCiAgLy8g5pi+56S65LiA5Liq55So5LqO5b+r6YCf5Yib5bu66KeE5YiZ55qE5a+56K+d5qGGCiAgY29uc3QgYXNrRmFzdCA9IGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW1zKSB7CiAgICBjb25zdCBpdGVtcyA9IFtdOwogICAgY29uc3QgcmVuZGVyID0gZnVuY3Rpb24gKGlubmVyKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1mYXN0LWFkZC1ib2R5Jyk7CiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGkxOG4uZmFzdEFkZERpYWxvZ0Rlc2NyaXB0aW9uOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pOwogICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgIHVsLmNsYXNzTGlzdC5hZGQoJ3lhd2YtZmFzdC1hZGQtbGlzdCcpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpOwogICAgICBzZWxlY3RlZEl0ZW1zLmZvckVhY2gob3JpZ2luYWxJdGVtID0+IHsKICAgICAgICBjb25zdCBoYW5kbGVycyA9IGZhc3RIYW5kbGVycy5nZXQob3JpZ2luYWxJdGVtLnR5cGUpID8/IFtdOwogICAgICAgIGhhbmRsZXJzLmZvckVhY2goKHsgYWN0aXZlLCByZW5kZXIsIHJ1bGVzLCByYWRpb0dyb3VwIH0pID0+IHsKICAgICAgICAgIGNvbnN0IGl0ZW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9yaWdpbmFsSXRlbSkpOwogICAgICAgICAgaXRlbXMucHVzaChpdGVtKTsKICAgICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTsKICAgICAgICAgIGxpLmFwcGVuZENoaWxkKGxhYmVsKTsKICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnOwogICAgICAgICAgaXRlbS5hY3RpdmUgPSBjaGVja2JveC5jaGVja2VkID0gYWN0aXZlOwogICAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgIGl0ZW0uYWN0aXZlID0gY2hlY2tib3guY2hlY2tlZDsKICAgICAgICAgICAgaWYgKGl0ZW0uYWN0aXZlICYmIHJhZGlvR3JvdXApIHsKICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKHRoYXRJdGVtID0+IHsKICAgICAgICAgICAgICAgIGlmICh0aGF0SXRlbSA9PT0gaXRlbSkgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKHRoYXRJdGVtLnJhZGlvR3JvdXAgIT09IGl0ZW0ucmFkaW9Hcm91cCkgcmV0dXJuOwogICAgICAgICAgICAgICAgdGhhdEl0ZW0uc2V0QWN0aXZlKGZhbHNlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocmFkaW9Hcm91cCkgaXRlbS5yYWRpb0dyb3VwID0gcmFkaW9Hcm91cDsKICAgICAgICAgIGl0ZW0uc2V0QWN0aXZlID0gYWN0aXZlID0+IHsKICAgICAgICAgICAgaXRlbS5hY3RpdmUgPSBjaGVja2JveC5jaGVja2VkID0gYWN0aXZlOwogICAgICAgICAgfTsKICAgICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKGNoZWNrYm94KTsKICAgICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKHJlbmRlcihpdGVtKSk7CiAgICAgICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKICAgICAgICAgIHJ1bGVzLmZvckVhY2goKHsgYWN0aW9uLCBydWxlIH0pID0+IHsKICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGFjdGlvbjsKICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBpMThuW3sKICAgICAgICAgICAgICBzaG93OiAnZmFzdEFkZFNob3cnLAogICAgICAgICAgICAgIGhpZGU6ICdmYXN0QWRkSGlkZScsCiAgICAgICAgICAgICAgZm9sZDogJ2Zhc3RBZGRGb2xkJywKICAgICAgICAgICAgfVthY3Rpb25dXTsKICAgICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7CiAgICAgICAgICB9KTsKICAgICAgICAgIGxpLmFwcGVuZENoaWxkKHNlbGVjdCk7CiAgICAgICAgICBzZWxlY3QudmFsdWUgPSAnaGlkZSc7CiAgICAgICAgICBpdGVtLmdldFJ1bGUgPSAoKSA9PiBydWxlcy5maW5kKHJ1bGUgPT4gcnVsZS5hY3Rpb24gPT09IHNlbGVjdC52YWx1ZSkucnVsZTsKICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGV2ZW50ID0+IHsKICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpKSByZXR1cm47CiAgICAgICAgQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JykpLmZvckVhY2goc2VsZWN0ID0+IHsKICAgICAgICAgIGlmIChzZWxlY3QudmFsdWUgPT09IHRhcmdldC52YWx1ZSkgcmV0dXJuOwogICAgICAgICAgY29uc3QgdGFyZ2V0T3B0aW9uID0gWy4uLnNlbGVjdC5vcHRpb25zXS5maW5kKG9wdGlvbiA9PiBvcHRpb24udmFsdWUgPT09IHRhcmdldC52YWx1ZSk7CiAgICAgICAgICBjb25zdCBzZXRWYWx1ZSA9IHRhcmdldE9wdGlvbiA/IHRhcmdldE9wdGlvbi52YWx1ZSA6ICdoaWRlJzsKICAgICAgICAgIHNlbGVjdC52YWx1ZSA9IHNldFZhbHVlOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgaW5uZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgIH07CiAgICBjb25zdCBmYXN0QWRkRGlhbG9nID0gdWkuZGlhbG9nKHsKICAgICAgaWQ6ICd5YXdmLWZhc3QtYWRkJywKICAgICAgdGl0bGU6IGkxOG4uZmFzdEFkZERpYWxvZ1RpdGxlLAogICAgICByZW5kZXIsCiAgICAgIGJ1dHRvbjogewogICAgICAgIG9rOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmYXN0QWRkRGlhbG9nLmhpZGUoKTsKICAgICAgICAgIGl0ZW1zLmZvckVhY2goYXN5bmMgKHsgYWN0aXZlLCBnZXRSdWxlLCB0eXBlLCB2YWx1ZSB9KSA9PiB7CiAgICAgICAgICAgIGlmICghYWN0aXZlKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHsgcmVmOiB7IGl0ZW1zOiBydWxlSXRlbSB9IH0gPSBnZXRSdWxlKCk7CiAgICAgICAgICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gYXdhaXQgcnVsZUl0ZW0ucGFyc2VGYXN0SXRlbSh2YWx1ZSwgdHlwZSk7CiAgICAgICAgICAgIHBhcnNlUmVzdWx0LmZvckVhY2goaXRlbSA9PiBydWxlSXRlbS5hZGRJdGVtKGl0ZW0pKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgY2FuY2VsOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmYXN0QWRkRGlhbG9nLmhpZGUoKTsKICAgICAgICB9LAogICAgICB9LAogICAgfSk7CiAgICBmYXN0QWRkRGlhbG9nLnNob3coKTsKICB9OwoKICAvKioKICAgKiDnu7TmiqTnlKjkuo7lv6vpgJ/liJvlu7rop4TliJnnmoTlr7nor53moYYKICAgKiBAdHlwZSB7QXJyYXk8KHRhcmdldDogRWxlbWVudCB8IFNlbGVjdGlvbikgPT4gQXJyYXk8eyB0aXRsZTogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIHZhbHVlOiBhbnkgfT4+fQogICAqLwogIGNvbnN0IGZhc3RMaXN0ZW5lcnMgPSBbXTsKICBydWxlLmFkZEZhc3RMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikgewogICAgZmFzdExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTsKICB9OwogIGNvbnN0IHJ1bkZhc3RMaXN0ZW5lcnMgPSBhc3luYyBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChmYXN0TGlzdGVuZXJzLm1hcChsaXN0ZW5lciA9PiBsaXN0ZW5lcih0YXJnZXQpKSk7CiAgICByZXR1cm4gcmVzcG9uc2VzLnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYiksIFtdKTsKICB9OwoKICAvKioKICAgKiDnlKjmnaXnu7TmiqTmiYDmnInlkozmtojmga/mtYHov4fmu6Top4TliJnlj7PplK7oj5zljZUKICAgKi8KICA7IChhc3luYyBmdW5jdGlvbiAoKSB7CgogICAgaWYgKCFlbnYuY29uZmlnLmNvbnRleHRNZW51U3VwcG9ydGVkKSByZXR1cm47CgogICAgY29udGV4dG1lbnUuYWRkTGlzdGVuZXIoYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGlmIChpbml0LnBhZ2UudHlwZSgpID09PSAnc2VhcmNoJykgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgICBsZXQgdXNlU2VsZWN0aW9uID0gdHJ1ZTsKICAgICAgaWYgKCEoc2VsZWN0aW9uICsgJycpKSB1c2VTZWxlY3Rpb24gPSBmYWxzZTsKICAgICAgZm9yIChsZXQgaSA9IDA7IHVzZVNlbGVjdGlvbiAmJiBpIDwgc2VsZWN0aW9uLnJhbmdlQ291bnQ7IGkrKykgewogICAgICAgIGNvbnN0IHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoaSk7CiAgICAgICAgY29uc3QgaXNDaGlsZCA9IFtyYW5nZS5zdGFydENvbnRhaW5lciwgcmFuZ2UuZW5kQ29udGFpbmVyXS5ldmVyeShlID0+IHsKICAgICAgICAgIGZvciAoOyBlID09PSB0YXJnZXQ7IGUgPSBlLnBhcmVudE5vZGUpIGlmICghZSkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKCFpc0NoaWxkKSB1c2VTZWxlY3Rpb24gPSBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHJ1bkZhc3RMaXN0ZW5lcnModXNlU2VsZWN0aW9uID8gc2VsZWN0aW9uIDogdGFyZ2V0KTsKICAgICAgcmV0dXJuIGl0ZW1zLm1hcCgoeyB0aXRsZSwgdHlwZSwgdmFsdWUgfSkgPT4gKHsKICAgICAgICB0aXRsZSwKICAgICAgICBvbmNsaWNrOiAoKSA9PiB7CiAgICAgICAgICBhc2tGYXN0KFt7IHR5cGUsIHZhbHVlIH1dKTsKICAgICAgICB9LAogICAgICB9KSk7CiAgICB9KTsKCiAgfSgpKTsKCiAgLyoqCiAgICog5ouW5ou955u45YWzCiAgICovCiAgOyAoYXN5bmMgZnVuY3Rpb24gKCkgewoKICAgIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgICBkcm9wQXJlYVRpdGxlOiB7CiAgICAgICAgY246ICfmi5bmlL7oh7PmraRcbuW/q+mAn+WIm+W7uui/h+a7pOinhOWImScsCiAgICAgICAgdHc6ICfmi5bmlL7oh7PmraRcbuW/q+mAn+WJteW7uuevqemBuOimj+WJhycsCiAgICAgICAgZW46ICdEcm9wIEhlcmVcbkNyZWF0ZSBGaWx0ZXIgUnVsZXMnLAogICAgICB9LAogICAgICBkcm9wQXJlYUNvbnRlbnQ6IHsKICAgICAgICBjbjogJ+aCqOWPr+S7peWwhuaWh+acrOOAgeW4kOWPt+WQjeOAgeWktOWDj+OAgeivnemimOOAgeadpea6kOetieaLluaUvuiHs+atpOWkhOS7peWIm+W7uui/h+a7pOinhOWImScsCiAgICAgICAgdHc6ICfmgqjlj6/ku6XlsIfmlofmnKzjgIHluLPomZ/lkI3jgIHpoK3lg4/jgIHoqbHpoYzjgIHkvobmupDnrYnmi5bmlL7oh7PmraTomZXku6XlibXlu7rpgY7mv77opo/liYcnLAogICAgICAgIGVuOiAnYnkgZHJhZ2dpbmcgdGV4dCwgYWNjb3VudCBuYW1lcywgYXZhdGFycywgdG9waWNzLCBzb3VyY2VzLCBldGMuJywKICAgICAgfSwKICAgIH0pOwoKICAgIGNvbnN0IGRyYWdJdGVtcyA9IFtdOwogICAgY29uc3QgZHJvcEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGxldCBkcmFnSW5kZXggPSAwLCBpbkFyZWEgPSBmYWxzZTsKICAgIGNvbnN0IHNob3dEcm9wQXJlYSA9IGZ1bmN0aW9uICgpIHsKICAgICAgZHJhZ0luZGV4Kys7CiAgICAgIGlmICghZHJvcEFyZWEpIHJldHVybjsKICAgICAgZHJvcEFyZWEuY2xhc3NMaXN0LmFkZCgneWF3Zi1kcmFnJyk7CiAgICAgIGlmIChkcm9wQXJlYS5wYXJlbnROb2RlKSBkcm9wQXJlYS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3lhd2YtZHJvcC1hcmVhLWFjdGl2ZScpOwogICAgfTsKICAgIGNvbnN0IGhpZGVEcm9wQXJlYSA9IGZ1bmN0aW9uICgpIHsKICAgICAgZHJhZ0luZGV4Kys7CiAgICAgIGluQXJlYSA9IGZhbHNlOwogICAgICBpZiAoIWRyb3BBcmVhKSByZXR1cm47CiAgICAgIGRyb3BBcmVhLmNsYXNzTGlzdC5yZW1vdmUoJ3lhd2YtZHJhZycsICd5YXdmLWRyYWctaW4nKTsKICAgICAgaWYgKGRyb3BBcmVhLnBhcmVudE5vZGUpIGRyb3BBcmVhLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi1kcm9wLWFyZWEtYWN0aXZlJyk7CiAgICB9OwogICAgY29uc3QgZW50ZXJEcm9wQXJlYSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaW5BcmVhID0gdHJ1ZTsKICAgICAgaWYgKCFkcm9wQXJlYSkgcmV0dXJuOwogICAgICBkcm9wQXJlYS5jbGFzc0xpc3QuYWRkKCd5YXdmLWRyYWctaW4nKTsKICAgIH07CiAgICBjb25zdCBsZWF2ZURyb3BBcmVhID0gZnVuY3Rpb24gKCkgewogICAgICBpbkFyZWEgPSBmYWxzZTsKICAgICAgaWYgKCFkcm9wQXJlYSkgcmV0dXJuOwogICAgICBkcm9wQXJlYS5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLWRyYWctaW4nKTsKICAgIH07CgogICAgY29uc3QgZHJhZ1N0YXJ0SGFuZGxlciA9IGFzeW5jIGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgY29uc3QgY3VycmVudERyYWdJbmRleCA9ICsrZHJhZ0luZGV4OwogICAgICBsZXQgdXNlU2VsZWN0aW9uID0gZmFsc2U7CiAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBUZXh0KSB1c2VTZWxlY3Rpb24gPSB0cnVlOwogICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHJ1bkZhc3RMaXN0ZW5lcnModXNlU2VsZWN0aW9uID8gc2VsZWN0aW9uIDogdGFyZ2V0KTsKICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybjsKICAgICAgaWYgKGN1cnJlbnREcmFnSW5kZXggIT09IGRyYWdJbmRleCkgcmV0dXJuOwogICAgICBkcmFnSXRlbXMuc3BsaWNlKDApOwogICAgICBkcmFnSXRlbXMucHVzaCguLi5pdGVtcyk7CiAgICAgIHNob3dEcm9wQXJlYSgpOwogICAgfTsKICAgIGNvbnN0IGRyYWdFbmRIYW5kbGVyID0gZnVuY3Rpb24gKCkgewogICAgICBkcmFnSXRlbXMuc3BsaWNlKDApOwogICAgICBoaWRlRHJvcEFyZWEoKTsKICAgIH07CiAgICBsZXQgZHJhZ0VudGVyQ291bnQgPSAwOwogICAgY29uc3QgZHJhZ0VudGVySGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBkcmFnRW50ZXJDb3VudCsrOwogICAgICBlbnRlckRyb3BBcmVhKCk7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9OwogICAgY29uc3QgZHJhZ0xlYXZlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBpZiAoIS0tZHJhZ0VudGVyQ291bnQpIGxlYXZlRHJvcEFyZWEoKTsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH07CiAgICBjb25zdCBkcmFnT3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH07CiAgICBjb25zdCBkcm9wSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAoaW5BcmVhKSB7CiAgICAgICAgY29uc3QgaXRlbXMgPSBkcmFnSXRlbXMuc3BsaWNlKDApOwogICAgICAgIGFza0Zhc3QoaXRlbXMubWFwKCh7IHR5cGUsIHZhbHVlIH0pID0+ICh7IHR5cGUsIHZhbHVlIH0pKSk7CiAgICAgIH0KICAgICAgZHJhZ0VuZEhhbmRsZXIoKTsKICAgIH07CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBkcmFnU3RhcnRIYW5kbGVyKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBkcmFnRW5kSGFuZGxlcik7CiAgICBkcm9wQXJlYS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBkcmFnRW50ZXJIYW5kbGVyKTsKICAgIGRyb3BBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGRyYWdMZWF2ZUhhbmRsZXIpOwogICAgZHJvcEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBkcmFnT3ZlckhhbmRsZXIpOwogICAgZHJvcEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGRyb3BIYW5kbGVyKTsKCiAgICBkcm9wQXJlYS5jbGFzc0xpc3QuYWRkKCdnbl90b3BtZW51bGlzdCcsICd5YXdmLWRyb3AtYXJlYScpOwogICAgZHJvcEFyZWEuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9IldfbGF5ZXJfYXJyb3ciPjxzcGFuIGNsYXNzPSJXX2Fycm93X2JvciBXX2Fycm93X2Jvcl90Ij48aSBjbGFzcz0iU19saW5lMyI+PC9pPjxlbSBjbGFzcz0iU19iZzJfYnIiPjwvZW0+PC9zcGFuPjwvZGl2Pic7CgogICAgY29uc3QgZHJvcEFyZWFDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBkcm9wQXJlYUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgneWF3Zi1kcm9wLWNvbnRlbnQnKTsKICAgIGRyb3BBcmVhLmFwcGVuZENoaWxkKGRyb3BBcmVhQ29udGVudCk7CiAgICBkcm9wQXJlYUNvbnRlbnQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9Inlhd2YtZHJvcC10aXRsZSI+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1kcm9wLXRleHQiPjwvZGl2Pic7CgogICAgaW5pdC5vbkxvYWQoZnVuY3Rpb24gYWRkRHJvcEFyZWEoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBjb25zdCByZWZlcmVuY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1nbl9zZXRfbGlzdCcpOwogICAgICAgIGlmICghcmVmZXJlbmNlKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KGFkZERyb3BBcmVhLCAxMDApOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBkcm9wQXJlYUNvbnRlbnQucXVlcnlTZWxlY3RvcignLnlhd2YtZHJvcC10aXRsZScpLnRleHRDb250ZW50ID0gaTE4bi5kcm9wQXJlYVRpdGxlOwogICAgICAgIGRyb3BBcmVhQ29udGVudC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1kcm9wLXRleHQnKS50ZXh0Q29udGVudCA9IGkxOG4uZHJvcEFyZWFDb250ZW50OwogICAgICAgIHJlZmVyZW5jZS5hcHBlbmRDaGlsZChkcm9wQXJlYSk7CiAgICAgIH0KICAgIH0pOwoKICB9KCkpOwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtZmFzdC1hZGQtYm9keSB7IHBhZGRpbmc6IDIwcHg7IH0KLnlhd2YtZmFzdC1hZGQtbGlzdCB7IHBhZGRpbmc6IDIwcHg7IH0KLnlhd2YtZHJvcC1hcmVhIHsgd2lkdGg6IDIyNHB4OyBoZWlnaHQ6IDIyNHB4OyB0b3A6IDM0cHg7IHJpZ2h0OiAtMTE5cHg7IGRpc3BsYXk6IG5vbmU7IG9wYWNpdHk6IDAuODsgfQoueWF3Zi1kcm9wLWFyZWEueWF3Zi1kcmFnIHsgZGlzcGxheTogYmxvY2s7IH0KLnlhd2YtZHJvcC1hcmVhLnlhd2YtZHJhZy1pbiB7IG9wYWNpdHk6IDE7IH0KLldCX2dsb2JhbF9uYXYgLmduX3RvcG1lbnVsaXN0Lnlhd2YtZHJvcC1hcmVhIC5XX2xheWVyX2Fycm93IC5XX2Fycm93X2Jvcl90IHsgcmlnaHQ6IDEyMnB4OyB9Ci55YXdmLWRyb3AtY29udGVudCB7IG1hcmdpbjogMjBweDsgYm9yZGVyOiA1cHggZGFzaGVkICM2NjY7IGJvcmRlci1yYWRpdXM6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgd2hpdGUtc3BhY2U6IHdyYXA7IHdpZHRoOiAxMzRweDsgaGVpZ2h0OiAxMzRweDsgcGFkZGluZzogMjBweDsgbWFyZ2luOiAyMHB4OyBsaW5lLWhlaWdodDogMS41OyB9Ci55YXdmLWRyb3AtdGl0bGUgeyBmb250LXNpemU6IDE2cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IG1hcmdpbjogMCAwIDIwcHg7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IHVzZXItc2VsZWN0OiBub25lOyB9Ci55YXdmLWRyb3AtYXJlYS1hY3RpdmUgLmduX3RvcG1lbnVsaXN0X3lhd2YgeyBkaXNwbGF5OiBub25lOyB9CmApOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9jb21tb24vcGFyc2UuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCBwYWdlID0gaW5pdC5wYWdlOwoKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkVjYgPSB7fTsKICBjb25zdCBjb21tZW50UGFyc2VyID0geWF3Zi5jb21tZW50VjYgPSB7fTsKCiAgLy8g5paH5pysCiAgLy8g5paH5pys5YiG5Li65a6M5pW05qih5byP77yI55So5LqO5q2j5YiZ5Yy56YWN77yJ5ZKM566A5piT5qih5byP77yI55So5LqO5YWz6ZSu6K+N77yJCiAgLy8g5a6M5pW05qih5byP5LiL5Lqn55Sf55qE5paH5pys5pu05aSN5p2C77yM5Y+v55So5LqO5pu05aSN5p2C55qE6L+H5ruk6KeE5YiZCiAgLy8g566A5Y2V5qih5byP5LiL5Lqn55Sf55qE5paH5pys5pu056ym5ZCI5LiA6Iis55So5oi355qE55CG6Kej77yM5pu06YCC5ZCI5pmu6YCa55So5oi35L2/55SoCiAgLyoqCiAgICog5om+5Yiw5LiA57uEIE5vZGUg55qE5YWs5YWx56WW5YWICiAgICogQHBhcmFtIHtOb2RlW119IG5vZGVzCiAgICovCiAgY29uc3QgY29tbW9uUGFyZW50ID0gZnVuY3Rpb24gKC4uLm5vZGVzKSB7CiAgICBpZiAobm9kZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEpIHJldHVybiBub2Rlc1swXTsKICAgIGNvbnN0IGZpcnN0UGFyZW50cyA9IFtdOwogICAgbGV0IHBhcmVudEluZGV4ID0gMDsKICAgIGZvciAobGV0IFtyXSA9IG5vZGVzOyByOyByID0gci5wYXJlbnRFbGVtZW50KSBmaXJzdFBhcmVudHMucHVzaChyKTsKICAgIGZvciAobGV0IGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGZvciAobGV0IHAgPSBub2Rlc1tpXTsgdHJ1ZTsgcCA9IHAucGFyZW50RWxlbWVudCkgewogICAgICAgIGlmICghcCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgaW5kZXggPSBmaXJzdFBhcmVudHMuaW5kZXhPZihwLCBwYXJlbnRJbmRleCk7CiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgY29udGludWU7CiAgICAgICAgcGFyZW50SW5kZXggPSBpbmRleDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZpcnN0UGFyZW50c1twYXJlbnRJbmRleF07CiAgfTsKCiAgLyoqCiAgICog5qOA5p+l5LiA5Liq6IqC54K55piv5LiN5piv5Y+m5LiA5Liq6IqC54K555qE56WW5YWI6IqC54K5CiAgICogQHBhcmFtIHtOb2RlfE5vZGVMaXN0fE5vZGVbXX0gcGFyZW50CiAgICogQHBhcmFtIHtOb2RlfE5vZGVMaXN0fE5vZGVbXX0gY2hpbGQKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGNvbnN0IGNvbnRhaW5zID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQpIHsKICAgIGlmICghcGFyZW50IHx8ICFjaGlsZCkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCEoY2hpbGQgaW5zdGFuY2VvZiBOb2RlKSkgewogICAgICBjb25zdCBjaGlsZHJlbiA9IEFycmF5LmZyb20oY2hpbGQpOwogICAgICByZXR1cm4gY2hpbGRyZW4uZXZlcnkoY2hpbGQgPT4gY29udGFpbnMocGFyZW50LCBjaGlsZCkpOwogICAgfQogICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vZGUpIHsKICAgICAgcmV0dXJuIHBhcmVudC5jb250YWlucyhjaGlsZCk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBwYXJlbnRzID0gbmV3IFNldChBcnJheS5mcm9tKHBhcmVudCkpOwogICAgICBmb3IgKGxldCBlID0gY2hpbGQ7IGU7IGUgPSBlLnBhcmVudEVsZW1lbnQpIHsKICAgICAgICBpZiAocGFyZW50cy5oYXMoZSkpIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfTsKCiAgLyoqCiAgICog5qOA5p+l5p+Q5Liq5YWD57Sg5piv5ZCm5piv5LiA5p2h5b6u5Y2aCiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50CiAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICovCiAgY29uc3QgaXNGZWVkRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybiBmYWxzZTsKICAgIGlmICghZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ21pZCcpKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICAvKioKICAgKiDmo4Dmn6Xmn5DkuKrlhYPntKDmmK/lkKbmmK/kuIDmnaHmkJzntKLpobXpnaLnmoTlvq7ljZoKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgKi8KICBjb25zdCBpc1NlYXJjaEZlZWRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgIGlmICghaXNGZWVkRWxlbWVudChlbGVtZW50KSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCFlbGVtZW50Lm1hdGNoZXMoJy5jYXJkLXdyYXAnKSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCFlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWZlZWQnKSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLyoqCiAgICog5qOA5p+l5p+Q5Liq5YWD57Sg5piv5ZCm5piv5LiA5p2h6K+E6K66CiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50CiAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICovCiAgY29uc3QgaXNDb21tZW50RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybiBmYWxzZTsKICAgIGlmICghZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2NvbW1lbnRfaWQnKSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLyoqCiAgICog5qOA5p+l5p+Q5Liq5YWD57Sg5piv5ZCm5piv5LiA5p2h6L2s5Y+R55qE5b6u5Y2aCiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50CiAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICovCiAgY29uc3QgaXNGb3J3YXJkRmVlZEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgaWYgKCFpc0ZlZWRFbGVtZW50KGVsZW1lbnQpKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIWVsZW1lbnQuaGFzQXR0cmlidXRlKCdvbWlkJykpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIC8qKgogICAqIOajgOafpeafkOS4quWFg+e0oOaYr+WQpuaYr+S4gOadoeexu+S8vOeugOWNlei9rOWPkeeahOW+ruWNmgogICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudAogICAqIEByZXR1cm5zIHtib29sZWFufQogICAqLwogIGNvbnN0IGlzRmFzdEZlZWRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgIGlmICghaXNGZWVkRWxlbWVudChlbGVtZW50KSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCFlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZm1pZCcpKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICAvKioKICAgKiDmo4Dmn6Xmn5DkuKrlhYPntKDmmK/lkKbmmK/kuIDmnaHlv6vovaznmoTlvq7ljZoKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgKi8KICBjb25zdCBpc0Zhc3RGb3J3YXJkRmVlZEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgaWYgKCFpc0Zhc3RGZWVkRWxlbWVudChlbGVtZW50KSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpc2Zhc3Rmb3J3YXJkJykgIT09ICcxJykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLyoqCiAgICog6I635Y+W5LiA5p2h5b6u5Y2a5Lit5omA5pyJ5YaF5a6555u45YWz55qE6IqC54K5CiAgICogQHBhcmFtIHtFbGVtZW50fSBmZWVkCiAgICogQHJldHVybnMge0VsZW1lbnRbXX0KICAgKi8KICBjb25zdCBmZWVkQ29udGVudEVsZW1lbnRzID0gZnVuY3Rpb24gKGZlZWQsIHsgZGV0YWlsID0gZmFsc2UsIHNob3J0ID0gZmFsc2UsIGxvbmcgPSB0cnVlIH0gPSB7fSkgewogICAgaWYgKCFpc0ZlZWRFbGVtZW50KGZlZWQpKSByZXR1cm4gbnVsbDsKICAgIGNvbnN0IGNvbnRlbnQgPSBmZWVkUGFyc2VyLmNvbnRlbnQuZG9tKGZlZWQsIHRydWUsIGZhbHNlKTsKICAgIGNvbnN0IGNvbnRlbnRGdWxsID0gZmVlZFBhcnNlci5jb250ZW50LmRvbShmZWVkLCB0cnVlLCB0cnVlKTsKICAgIGxldCBwb3N0ID0gY29udGVudEZ1bGwgPyAhc2hvcnQgPyBbY29udGVudEZ1bGxdIDogbG9uZyA/IFtjb250ZW50LCBjb250ZW50RnVsbF0gOiBbY29udGVudF0gOiBbY29udGVudF07CiAgICBpZiAoZGV0YWlsKSB7CiAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5hdXRob3IuZG9tKGZlZWQpOwogICAgICBjb25zdCBbc291cmNlXSA9IGZlZWRQYXJzZXIuc291cmNlLmRvbShmZWVkLCB0cnVlKTsKICAgICAgY29uc3QgW2RhdGVdID0gZmVlZFBhcnNlci5kYXRlLmRvbShmZWVkLCB0cnVlKTsKICAgICAgcG9zdCA9IFthdXRob3IsIC4uLnBvc3QsIHNvdXJjZSwgZGF0ZV07CiAgICB9CiAgICBpZiAoZmVlZC5oYXNBdHRyaWJ1dGUoJ2ZtaWQnKSkgewogICAgICBjb25zdCBbZmF1dGhvcl0gPSBmZWVkUGFyc2VyLmZhdXRob3IuZG9tKGZlZWQpOwogICAgICBwb3N0LnVuc2hpZnQoZmF1dGhvcik7CiAgICB9CiAgICBpZiAoZmVlZC5oYXNBdHRyaWJ1dGUoJ29taWQnKSkgewogICAgICBjb25zdCByZWFzb24gPSBmZWVkUGFyc2VyLmNvbnRlbnQuZG9tKGZlZWQsIGZhbHNlLCBmYWxzZSk7CiAgICAgIGNvbnN0IHJlYXNvbkZ1bGwgPSBmZWVkUGFyc2VyLmNvbnRlbnQuZG9tKGZlZWQsIGZhbHNlLCB0cnVlKTsKICAgICAgbGV0IG9yaSA9IHJlYXNvbkZ1bGwgPyAhc2hvcnQgPyBbcmVhc29uRnVsbF0gOiBsb25nID8gW3JlYXNvbiwgcmVhc29uRnVsbF0gOiBbcmVhc29uXSA6IFtyZWFzb25dOwogICAgICBpZiAoZGV0YWlsKSB7CiAgICAgICAgY29uc3QgW29yaWdpbmFsXSA9IGZlZWRQYXJzZXIub3JpZ2luYWwuZG9tKGZlZWQpOwogICAgICAgIGNvbnN0IFtzb3VyY2VPcmldID0gZmVlZFBhcnNlci5zb3VyY2UuZG9tKGZlZWQsIGZhbHNlKTsKICAgICAgICBjb25zdCBbZGF0ZU9yaV0gPSBmZWVkUGFyc2VyLmRhdGUuZG9tKGZlZWQsIGZhbHNlKTsKICAgICAgICBvcmkgPSBbb3JpZ2luYWwsIC4uLm9yaSwgc291cmNlT3JpLCBkYXRlT3JpXTsKICAgICAgfQogICAgICByZXR1cm4gWy4uLnBvc3QsIG51bGwsIC4uLm9yaV07CiAgICB9CiAgICByZXR1cm4gcG9zdDsKICB9OwoKICAvKioKICAgKiDojrflj5bkuIDmnaHlvq7ljZrkuK3miYDmnInlhoXlrrnnm7jlhbPnmoToioLngrkKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbW1lbnQKICAgKiBAcmV0dXJucyB7RWxlbWVudFtdfQogICAqLwogIGNvbnN0IGNvbW1lbnRDb250ZW50RWxlbWVudHMgPSBmdW5jdGlvbiAoY29tbWVudCkgewogICAgaWYgKCFpc0NvbW1lbnRFbGVtZW50KGNvbW1lbnQpKSByZXR1cm4gbnVsbDsKICAgIGNvbnN0IHRleHQgPSBjb21tZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl90ZXh0Jyk7CiAgICByZXR1cm4gW3RleHRdOwogIH07CgogIC8qKgogICAqIOiOt+WPluiKgueCueaJgOWcqOeahOW+ruWNmgogICAqIEBwYXJhbSB7Tm9kZX0gbm9kZQogICAqIEByZXR1cm5zIHtFbGVtZW50fQogICAqLwogIGNvbnN0IGZlZWRDb250YWluZXIgPSBmdW5jdGlvbiAobm9kZSkgewogICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbDsKICAgIGlmICgobm9kZSBpbnN0YW5jZW9mIE5vZGUpICYmICEobm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7CiAgICAgIHJldHVybiBmZWVkQ29udGFpbmVyKG5vZGUucGFyZW50Tm9kZSk7CiAgICB9CiAgICByZXR1cm4gbm9kZS5jbG9zZXN0KCdbbWlkXScpOwogIH07CiAgZmVlZFBhcnNlci5mZWVkTm9kZSA9IG5vZGUgPT4gZmVlZENvbnRhaW5lcihub2RlKTsKCiAgLyoqCiAgICog6I635Y+W6IqC54K55omA5Zyo55qE6K+E6K66CiAgICogQHBhcmFtIHtOb2RlfSBub2RlCiAgICogQHJldHVybnMge0VsZW1lbnR9CiAgICovCiAgY29uc3QgY29tbWVudENvbnRhaW5lciA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICBpZiAoIW5vZGUpIHJldHVybiBudWxsOwogICAgaWYgKChub2RlIGluc3RhbmNlb2YgTm9kZSkgJiYgIShub2RlIGluc3RhbmNlb2YgRWxlbWVudCkpIHsKICAgICAgcmV0dXJuIGNvbW1lbnRDb250YWluZXIobm9kZS5wYXJlbnROb2RlKTsKICAgIH0KICAgIHJldHVybiBub2RlLmNsb3Nlc3QoJ1tjb21tZW50X2lkXScpOwogIH07CiAgZmVlZFBhcnNlci5jb21tZW50Tm9kZSA9IG5vZGUgPT4gZmVlZENvbnRhaW5lcihub2RlKTsKCiAgY29uc3QgdGV4dFBhcnNlciA9IGZ1bmN0aW9uIChkZXRhaWwsIGNvbnRhaW5lclR5cGUpIHsKICAgIGNvbnN0IHBhcnNlcnMgPSBbXTsKICAgIC8qKgogICAgICog5pmu6YCa5paH5pys77yI5paH5pys4pyT77yM5q2j5YiZ4pyT77yJCiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUKICAgICAqLwogICAgY29uc3QgdGV4dCA9IG5vZGUgPT4gewogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHsKICAgICAgICByZXR1cm4gbm9kZS50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXHMvZywgJyAnKTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH07CiAgICBwYXJzZXJzLnB1c2godGV4dCk7CiAgICAvKioKICAgICAqIOWxleW8gC/mlLbotbflhajmlofvvIjkuI3orqHlhaXlhoXlrrnvvIkKICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAgICovCiAgICBjb25zdCBmb2xkID0gbm9kZSA9PiB7CiAgICAgIGlmIChub2RlLm1hdGNoZXMoJ2FbYWN0aW9uLXR5cGU9ImZsX3VuZm9sZCJdLCBhW2FjdGlvbi10eXBlPSJmbF9mb2xkIl0nKSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH07CiAgICBwYXJzZXJzLnB1c2goZm9sZCk7CiAgICAvKioKICAgICAqIOaNouihjOespiA8YnI+IO+8iOaWh+acrOKck++8jOato+WImeKck++8iQogICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlCiAgICAgKi8KICAgIGNvbnN0IGxpbmVCcmVhayA9IG5vZGUgPT4gewogICAgICBpZiAobm9kZS5tYXRjaGVzKCdiciwgLnlhd2YtbGluZS1icmVhaycpKSB7CiAgICAgICAgcmV0dXJuICdcbic7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKGxpbmVCcmVhayk7CiAgICAvKioKICAgICAqICPor53popgj77yI5paH5pys4pyT77yM5q2j5YiZ4pyT77yJCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUKICAgICAqLwogICAgY29uc3QgdG9waWMgPSBub2RlID0+IHsKICAgICAgbGV0IHRvcGljID0gbnVsbDsKICAgICAgaWYgKG5vZGUubWF0Y2hlcygnYVtzdWRhLXVhdHJhY2sqPSIxMDIyLXRvcGljIl0nKSAmJiBub2RlLnRpdGxlKSB7CiAgICAgICAgdG9waWMgPSBub2RlLnRpdGxlLnJlcGxhY2UoL15bXHMjXSt8W1xzI10rJC9nLCAnJyk7CiAgICAgICAgaWYgKG5vZGUucXVlcnlTZWxlY3RvcignLmZpY29uX3N1cGVydG9waWMnKSkgdG9waWMgPSAnXHVlNjI3JyArIHRvcGljOwogICAgICB9CiAgICAgIGlmICghdG9waWMgJiYgbm9kZS5tYXRjaGVzKCdhLmFfdG9waWMsIGFbc3VkYS11YXRyYWNrKj0iMTAyMi10b3BpYyJdJykpIHsKICAgICAgICB0b3BpYyA9IG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSgvXltccyNdK3xbXHMjXSskL2csICcnKTsKICAgICAgfQogICAgICBpZiAoIXRvcGljICYmIG5vZGUubWF0Y2hlcygnYVtzdWRhLXVhdHJhY2sqPSIxMDIyLXN0b2NrIl0nKSkgewogICAgICAgIHRvcGljID0gbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKC9eW1xzJF0rfFtccyRdKyQvZywgJycpOwogICAgICB9CiAgICAgIGlmICh0b3BpYykgewogICAgICAgIGNvbnN0IFtfLCBzdXBlclRvcGljLCB0ZXh0XSA9IHRvcGljLm1hdGNoKC9eKD89KFx1ZTYyNz98LipcW+i2heivnVxdfC4q6LaF6K+dJCkpW1x1ZTYyN1xzXSooLio/KSg/Olxb6LaF6K+dXF186LaF6K+dKT8kLyk7CiAgICAgICAgaWYgKHN1cGVyVG9waWMgJiYgZGV0YWlsKSByZXR1cm4gYCAjJHt0ZXh0fVvotoXor51dIyBgOwogICAgICAgIGlmIChkZXRhaWwpIHJldHVybiBgICMke3RleHR9IyBgOwogICAgICAgIHJldHVybiBgIyR7dGV4dH0jYDsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH07CiAgICBwYXJzZXJzLnB1c2godG9waWMpOwogICAgLyoqCiAgICAgKiAk6IKh56WoJO+8iOaWh+acrOKck++8jOato+WImeKck++8iQogICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlCiAgICAgKi8KICAgIGNvbnN0IHN0b2NrID0gbm9kZSA9PiB7CiAgICAgIGlmIChub2RlLm1hdGNoZXMoJ2Fbc3VkYS11YXRyYWNrKj0iMTAyMi1zdG9jayJdJykpIHsKICAgICAgICBjb25zdCB0ZXh0ID0gbm9kZS50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXlwkP3xcJD8kL2csICcnKTsKICAgICAgICBpZiAoZGV0YWlsKSByZXR1cm4gYCAkJHt0ZXh0fSQgYDsKICAgICAgICByZXR1cm4gYCQke3RleHR9JGA7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKHN0b2NrKTsKICAgIC8qKgogICAgICogW+ihqOaDhV3vvIjmlofmnKzinJPvvIzmraPliJninJPvvIkKICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAgICovCiAgICBjb25zdCBlbW90aW9uID0gbm9kZSA9PiB7CiAgICAgIGlmIChub2RlLm1hdGNoZXMoJ2ltZ1t0eXBlPSJmYWNlIl1bYWx0XScpKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IG5vZGUuZ2V0QXR0cmlidXRlKCdhbHQnKS50cmltKCkKICAgICAgICAgIC5yZXBsYWNlKC9eXFs/LywgJ1snKS5yZXBsYWNlKC9cXT8kLywgJ10nKTsKICAgICAgICBpZiAoZGV0YWlsKSByZXR1cm4gYCAke3RleHR9IGA7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKGVtb3Rpb24pOwoKICAgIC8qKgogICAgICog5aaC5p6c5oiR5Lus5ou/5Yiw5LiA5Liq5L2c6ICF5oiW6ICF5Y6f5L2c6ICF55qE6ZO+5o6l77yM5oiR5Lus6L+Y5Y+v5Lul5ou/5Yiw5LuW55qE6YKj5Lqb5bCP5Zu+5qCHCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUKICAgICAqLwogICAgY29uc3QgdXNlckljb25zID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgY29uc3QgaXNTZWFyY2ggPSBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWRDb250YWluZXIobm9kZSkpOwogICAgICBjb25zdCBpdGVtcyA9IFtdOwogICAgICBpZiAoaXNTZWFyY2gpIHsKICAgICAgICBjb25zdCBzaWJsaW5nID0gWy4uLm5vZGUucGFyZW50Tm9kZS5jaGlsZHJlbl07CiAgICAgICAgaXRlbXMucHVzaCguLi5zaWJsaW5nLmZpbHRlcihpdGVtID0+IGl0ZW0ubWF0Y2hlcygnYVt0aXRsZV0nKSkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGljb25zID0gW107CiAgICAgICAgZm9yIChsZXQgbmV4dCA9IG5vZGU7IG5leHQ7IG5leHQgPSBuZXh0Lm5leHRFbGVtZW50U2libGluZykgewogICAgICAgICAgaWYgKG5leHQubWF0Y2hlcygnLnNwX2t6JykpIGJyZWFrOwogICAgICAgICAgaWYgKG5leHQubWF0Y2hlcygnW3RpdGxlXScpKSBpY29ucy5wdXNoKG5leHQpOwogICAgICAgICAgY29uc3QgaW5uZXIgPSBuZXh0LnF1ZXJ5U2VsZWN0b3IoJy5XX2ljb25bdGl0bGVdJyk7CiAgICAgICAgICBpZiAoaW5uZXIpIGljb25zLnB1c2goaW5uZXIpOwogICAgICAgIH0KICAgICAgICBpdGVtcy5wdXNoKC4uLmljb25zKTsKICAgICAgfQogICAgICBjb25zdCBpY29ucyA9IGl0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IG5vZGUgJiYgaXRlbS50aXRsZS50cmltKCkpOwogICAgICByZXR1cm4gaWNvbnMubWFwKGljb24gPT4gYFske2ljb24udGl0bGUudHJpbSgpfV1gKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBA5L2c6ICF77yI5paH5pys4pyX77yM5q2j5YiZ4pyT77yJCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUKICAgICAqLwogICAgY29uc3QgYXV0aG9yID0gbm9kZSA9PiB7CiAgICAgIGlmICghbm9kZS5tYXRjaGVzKCcuV0JfZGV0YWlsID4gLldCX2luZm8gPiAuV19mYlt1c2VyY2FyZF0nKSkgcmV0dXJuIG51bGw7CiAgICAgIGlmICghZGV0YWlsKSByZXR1cm4gJyc7CiAgICAgIGNvbnN0IG5hbWUgPSAnQCcgKyBub2RlLnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgY29uc3QgaWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG5vZGUuZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJyk7CiAgICAgIGNvbnN0IGxpbmsgPSAnaHR0cHM6Ly93ZWliby5jb20vdS8nICsgaWQ7CiAgICAgIGNvbnN0IGljb25zID0gdXNlckljb25zKG5vZGUpOwogICAgICByZXR1cm4gW25hbWUsIGxpbmssIC4uLmljb25zXS5qb2luKCcgJyk7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKGF1dGhvcik7CiAgICAvKioKICAgICAqIEDljp/kvZzvvIjmlofmnKzinJfvvIzmraPliJninJPvvIkKICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAgICovCiAgICBjb25zdCBvcmlnaW5hbCA9IG5vZGUgPT4gewogICAgICBpZiAoIW5vZGUubWF0Y2hlcygnLldCX2V4cGFuZCA+IC5XQl9pbmZvID4gLldfZmJbdXNlcmNhcmRdJykpIHJldHVybiBudWxsOwogICAgICBpZiAoIWRldGFpbCkgcmV0dXJuICcnOwogICAgICBjb25zdCBuYW1lID0gbm9kZS50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXkA/LywgJ0AnKTsKICAgICAgY29uc3QgaWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG5vZGUuZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJyk7CiAgICAgIGNvbnN0IGxpbmsgPSAnaHR0cHM6Ly93ZWliby5jb20vdS8nICsgaWQ7CiAgICAgIGNvbnN0IGljb25zID0gdXNlckljb25zKG5vZGUpOwogICAgICByZXR1cm4gW25hbWUsIGxpbmssIC4uLmljb25zXS5qb2luKCcgJyk7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKG9yaWdpbmFsKTsKICAgIC8qKgogICAgICogQOaPkOWIsO+8iOaWh+acrOKck++8jOato+WImeKck++8iQogICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlCiAgICAgKi8KICAgIGNvbnN0IG1lbnRpb24gPSBub2RlID0+IHsKICAgICAgaWYgKG5vZGUubWF0Y2hlcygnYVt1c2VyY2FyZF0nKSkgewogICAgICAgIHJldHVybiBub2RlLnRleHRDb250ZW50LnRyaW0oKS5yZXBsYWNlKC9eQD8vLCAnQCcpICsgJyAnOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIHBhcnNlcnMucHVzaChtZW50aW9uKTsKICAgIC8qKgogICAgICog5p2l5rqQ77yI5paH5pys4pyX77yM5q2j5YiZ4pyT77yJCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUKICAgICAqLwogICAgY29uc3Qgc291cmNlID0gbm9kZSA9PiB7CiAgICAgIGlmICghbm9kZS5tYXRjaGVzKCcuV0JfZnJvbSBhOm5vdChbZGF0ZV0pOm5vdChbeWF3Zi1kYXRlXSknKSkgcmV0dXJuIG51bGw7CiAgICAgIGlmICghZGV0YWlsKSByZXR1cm4gJyc7CiAgICAgIHJldHVybiAobm9kZS50aXRsZSB8fCBub2RlLnRleHRDb250ZW50KS50cmltKCk7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKHNvdXJjZSk7CiAgICAvKioKICAgICAqIOaXtumXtO+8iOaWh+acrOKcl++8jOato+WImeKck++8iQogICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlCiAgICAgKi8KICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5vZGUgPT4gewogICAgICBpZiAoIW5vZGUubWF0Y2hlcygnYVtkYXRlXSwgYVt5YXdmLWRhdGVdJykpIHJldHVybiBudWxsOwogICAgICBpZiAoIWRldGFpbCkgcmV0dXJuICcnOwogICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKyhub2RlLmdldEF0dHJpYnV0ZSgnZGF0ZScpIHx8IG5vZGUuZ2V0QXR0cmlidXRlKCd5YXdmLWRhdGUnKSkpOwogICAgICAvLyDlsIbml7bpl7TmoLzlvI/ljJbkuLrkuJzlhavljLrnmoQgSVNPIDg2MDEg5LiyCiAgICAgIGRhdGUuc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpICsgOCk7CiAgICAgIGlmICgoZGF0ZS5nZXRVVENGdWxsWWVhcigpICsgJycpLmxlbmd0aCAhPT0gNCkgcmV0dXJuICcnOwogICAgICByZXR1cm4gWwogICAgICAgIGRhdGUuZ2V0VVRDRnVsbFllYXIoKSwKICAgICAgICAnLScsIChkYXRlLmdldFVUQ01vbnRoKCkgKyAxICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAgICctJywgKGRhdGUuZ2V0VVRDRGF0ZSgpICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAgICdUJywgKGRhdGUuZ2V0VVRDSG91cnMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgICAnOicsIChkYXRlLmdldFVUQ01pbnV0ZXMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgICAnOicsIChkYXRlLmdldFVUQ1NlY29uZHMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgICAnLicsIChkYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpICsgJycpLnBhZFN0YXJ0KDMsIDApLAogICAgICAgICcrMDgwMCcsCiAgICAgIF0uam9pbignJyk7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKHRpbWVzdGFtcCk7CiAgICAvKioKICAgICAqIOmTvuaOpQogICAgICogVVJM77yI5paH5pys4pyX77yM5q2j5YiZ4pyT77yJCiAgICAgKiDmoIfpopjvvIjmlofmnKzinJPvvIzmraPliJninJPvvIkKICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAgICovCiAgICBjb25zdCBsaW5rID0gbm9kZSA9PiB7CiAgICAgIGNvbnN0IG91dHB1dCA9IFtdOwogICAgICBpZiAoIW5vZGUubWF0Y2hlcygnYVthY3Rpb24tdHlwZT0iZmVlZF9saXN0X3VybCJdJykpIHJldHVybiBudWxsOwogICAgICBpZiAobm9kZS5tYXRjaGVzKCdbc3VkYS11YXRyYWNrKj0iMTAyMi10b3BpYyJdJykpIHJldHVybiBudWxsOwogICAgICBpZiAoZGV0YWlsKSB7CiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChub2RlLmhyZWYudHJpbSgpKTsKICAgICAgICBpZiAodXJsLmhvc3QgKyB1cmwucGF0aG5hbWUgPT09ICdmZWVkLm1peC5zaW5hLmNvbS5jbi9saW5rX2NhcmQvcmVkaXJlY3QnKSB7CiAgICAgICAgICBvdXRwdXQucHVzaCh1cmwuc2VhcmNoUGFyYW1zLmdldCgndXJsJykpOwogICAgICAgIH0gZWxzZSBvdXRwdXQucHVzaCh1cmwuaHJlZik7CiAgICAgICAgb3V0cHV0LnB1c2goJ1x1ZmZmOScpOwogICAgICAgIGNvbnN0IGljb24gPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5XX2ZpY29uJyk7CiAgICAgICAgaWYgKGljb24pIG91dHB1dC5wdXNoKGljb24udGV4dENvbnRlbnQpOwogICAgICB9CiAgICAgIGlmIChub2RlLm1hdGNoZXMoJ1t0aXRsZV0nKSkgewogICAgICAgIG91dHB1dC5wdXNoKG5vZGUuZ2V0QXR0cmlidXRlKCd0aXRsZScpLnRyaW0oKSk7CiAgICAgIH0KICAgICAgaWYgKGRldGFpbCkgewogICAgICAgIG91dHB1dC5wdXNoKCdcdWZmZmInKTsKICAgICAgfQogICAgICBpZiAob3V0cHV0Lmxlbmd0aCkgcmV0dXJuICcgJyArIG91dHB1dC5qb2luKCcgJykgKyAnICc7CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIHBhcnNlcnMucHVzaChsaW5rKTsKCiAgICAvKioKICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZQogICAgICogQHJldHVybnMge3N0cmluZ30KICAgICAqLwogICAgY29uc3QgYWxsUGFyc2VyID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgcmV0dXJuIHBhcnNlcnMucmVkdWNlKChyZXN1bHQsIHBhcnNlcikgPT4gewogICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgcmV0dXJuIHJlc3VsdDsKICAgICAgICByZXR1cm4gcGFyc2VyKG5vZGUpOwogICAgICB9LCBudWxsKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUKICAgICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICAgKi8KICAgIGNvbnN0IHBhcnNlTm9kZSA9IGZ1bmN0aW9uIHBhcnNlTm9kZShub2RlLCBpc1NlYXJjaCA9IG51bGwpIHsKICAgICAgY29uc3QgdGV4dCA9IGFsbFBhcnNlcihub2RlKTsKICAgICAgaWYgKHRleHQgIT0gbnVsbCkgcmV0dXJuIHRleHQ7CiAgICAgIGlmIChub2RlLmhhc0NoaWxkTm9kZXMoKSkgewogICAgICAgIHJldHVybiBbLi4ubm9kZS5jaGlsZE5vZGVzXS5tYXAobm9kZSA9PiBwYXJzZU5vZGUobm9kZSkpLmpvaW4oJycpOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH07CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsZWN0aW9uCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119CiAgICAgKi8KICAgIGNvbnN0IHBhcnNlU2VsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGlvbikgewogICAgICBjb25zdCByYW5nZXMgPSBbLi4uQXJyYXkoc2VsZWN0aW9uLnJhbmdlQ291bnQpXQogICAgICAgIC5tYXAoKF8sIGkpID0+IHNlbGVjdGlvbi5nZXRSYW5nZUF0KGkpKTsKICAgICAgY29uc3QgcmFuZ2VFbGVtZW50cyA9IHJhbmdlcy5tYXAocmFuZ2UgPT4gewogICAgICAgIHJldHVybiBjb21tb25QYXJlbnQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLmVuZENvbnRhaW5lcik7CiAgICAgIH0pOwogICAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJUeXBlID09PSAnZmVlZCcgPyBmZWVkQ29udGFpbmVyIDogY29tbWVudENvbnRhaW5lcjsKICAgICAgY29uc3QgY29udGVudEVsZW1lbnRzID0gY29udGFpbmVyVHlwZSA9PT0gJ2ZlZWQnID8gZmVlZENvbnRlbnRFbGVtZW50cyA6IGNvbW1lbnRDb250ZW50RWxlbWVudHM7CiAgICAgIGNvbnN0IGZlZWQgPSBjb250YWluZXIoY29tbW9uUGFyZW50KC4uLnJhbmdlRWxlbWVudHMpKTsKICAgICAgaWYgKCFmZWVkKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3QgZWxlbWVudHMgPSBjb250ZW50RWxlbWVudHMoZmVlZCwgeyBkZXRhaWwsIHNob3J0OiB0cnVlLCBsb25nOiB0cnVlIH0pOwogICAgICBpZiAoIWVsZW1lbnRzKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKHJhbmdlRWxlbWVudHMuc29tZShyZSA9PiAhY29udGFpbnMoZWxlbWVudHMsIHJlKSkpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gcmFuZ2VzLm1hcCgocmFuZ2UsIHJhbmdlSW5kZXgpID0+IHsKICAgICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBbcmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLmVuZENvbnRhaW5lcl07CiAgICAgICAgaWYgKHN0YXJ0ID09PSBlbmQpIHsKICAgICAgICAgIGlmIChzdGFydCBpbnN0YW5jZW9mIFRleHQpIHsKICAgICAgICAgICAgcmV0dXJuIHN0YXJ0LnRleHRDb250ZW50LnNsaWNlKHJhbmdlLnN0YXJ0T2Zmc2V0LCByYW5nZS5lbmRPZmZzZXQpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHBhcnNlTm9kZShzdGFydCk7CiAgICAgICAgfQogICAgICAgIGxldCBzdGF0dXMgPSAwOwogICAgICAgIHJldHVybiAoZnVuY3Rpb24gcGFyc2VOb2RlKG5vZGUpIHsKICAgICAgICAgIGlmIChub2RlID09PSBzdGFydCAmJiBub2RlIGluc3RhbmNlb2YgVGV4dCkgewogICAgICAgICAgICByZXR1cm4gbm9kZS50ZXh0Q29udGVudC5zbGljZShyYW5nZS5zdGFydE9mZnNldCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobm9kZSA9PT0gZW5kICYmIG5vZGUgaW5zdGFuY2VvZiBUZXh0KSB7CiAgICAgICAgICAgIHJldHVybiBub2RlLnRleHRDb250ZW50LnNsaWNlKDAsIHJhbmdlLmVuZE9mZnNldCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB0ZXh0ID0gYWxsUGFyc2VyKG5vZGUpOwogICAgICAgICAgaWYgKHRleHQpIHsKICAgICAgICAgICAgaWYgKG5vZGUgPT09IHN0YXJ0KSBzdGF0dXMgPSAxOwogICAgICAgICAgICBpZiAobm9kZSA9PT0gZW5kKSBzdGF0dXMgPSAyOwogICAgICAgICAgICByZXR1cm4gc3RhdHVzID09PSAxIHx8IG5vZGUgPT09IGVuZCA/IHRleHQgOiAnJzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChub2RlLmhhc0NoaWxkTm9kZXMoKSkgewogICAgICAgICAgICByZXR1cm4gWy4uLm5vZGUuY2hpbGROb2Rlc10ubWFwKG5vZGUgPT4gcGFyc2VOb2RlKG5vZGUpKS5qb2luKCcnKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9KHJhbmdlRWxlbWVudHNbcmFuZ2VJbmRleF0pKTsKICAgICAgfSk7CiAgICB9OwoKICAgIC8qKiBAdHlwZSB7V2Vha01hcDxOb2RlLCBzdHJpbmc+fSAqLwogICAgY29uc3Qgbm9kZUNhY2hlID0gbmV3IFdlYWtNYXAoKTsKCiAgICAvKioKICAgICAqLy8qKgogICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldAogICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAgKi8vKioKICAgICogQHBhcmFtIHtTZWxlY3Rpb259IHRhcmdldAogICAgKiBAcmV0dXJucyB7c3RyaW5nW119CiAgICAqLwogICAgY29uc3QgcGFyc2VyID0gZnVuY3Rpb24gKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTm9kZSkgewogICAgICAgIGlmIChub2RlQ2FjaGUuaGFzKHRhcmdldCkpIHJldHVybiBub2RlQ2FjaGUuZ2V0KHRhcmdldCk7CiAgICAgICAgY29uc3QgdGV4dCA9IHBhcnNlTm9kZSh0YXJnZXQpOwogICAgICAgIG5vZGVDYWNoZS5zZXQodGFyZ2V0LCB0ZXh0KTsKICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgfQogICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgU2VsZWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlU2VsZWN0aW9uKHRhcmdldCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwoKICAgIHJldHVybiBwYXJzZXI7CiAgfTsKCiAgY29uc3QgZnVsbFRleHRQYXJzZXIgPSB0ZXh0UGFyc2VyKHRydWUsICdmZWVkJyk7CiAgY29uc3Qgc2ltcGxlVGV4dFBhcnNlciA9IHRleHRQYXJzZXIoZmFsc2UsICdmZWVkJyk7CiAgY29uc3QgY29tbWVudFRleHRQYXJzZXIgPSB0ZXh0UGFyc2VyKGZhbHNlLCAnY29tbWVudCcpOwoKICBjb25zdCBub2RlVGV4dFBhcnNlciA9ICh0YXJnZXQsIGRldGFpbCkgPT4gewogICAgY29uc3QgcGFyc2VyID0gZGV0YWlsID8gZnVsbFRleHRQYXJzZXIgOiBzaW1wbGVUZXh0UGFyc2VyOwogICAgY29uc3QgZWxlbWVudHMgPSBmZWVkQ29udGVudEVsZW1lbnRzKHRhcmdldCwgeyBkZXRhaWwsIGxvbmc6IHRydWUgfSk7CiAgICBpZiAoZWxlbWVudHMpIHsKICAgICAgY29uc3QgdGV4dHMgPSBlbGVtZW50cy5tYXAoZWxlbWVudCA9PiBwYXJzZXIoZWxlbWVudCkgPz8gJycpOwogICAgICByZXR1cm4gdGV4dHMuam9pbihkZXRhaWwgPyAnXHUyMDI4JyA6ICdcbicpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHBhcnNlcih0YXJnZXQpOwogICAgfQogIH07CgogIGNvbnN0IHRleHQgPSBmZWVkUGFyc2VyLnRleHQgPSB7fTsKICB0ZXh0LmRldGFpbCA9IGVsZW1lbnQgPT4gbm9kZVRleHRQYXJzZXIoZWxlbWVudCwgdHJ1ZSk7CiAgdGV4dC5zaW1wbGUgPSBlbGVtZW50ID0+IG5vZGVUZXh0UGFyc2VyKGVsZW1lbnQsIGZhbHNlKTsKCiAgLy8g5YaF5a655Yy65Z+fCiAgY29uc3QgY29udGVudCA9IGZlZWRQYXJzZXIuY29udGVudCA9IHt9OwogIGNvbnRlbnQuZG9tID0gKGZlZWQsIGlzTWFpbiwgaXNGdWxsKSA9PiB7CiAgICBjb25zdCBpc1NlYXJjaCA9IGlzU2VhcmNoRmVlZEVsZW1lbnQoZmVlZCk7CiAgICBpZiAoaXNGdWxsID09PSBmYWxzZSkgewogICAgICBpZiAoaXNNYWluICYmICFpc1NlYXJjaCkgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9jb250ZW50Il0nKTsKICAgICAgfSBlbHNlIGlmICghaXNNYWluICYmICFpc1NlYXJjaCkgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9yZWFzb24iXScpOwogICAgICB9IGVsc2UgaWYgKGlzTWFpbikgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50ID4gW25vZGUtdHlwZT0iZmVlZF9saXN0X2NvbnRlbnQiXScpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9mb3J3YXJkQ29udGVudCJdID4gW25vZGUtdHlwZT0iZmVlZF9saXN0X2NvbnRlbnQiXScpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGlzRnVsbCA9PT0gdHJ1ZSkgewogICAgICBpZiAoaXNNYWluICYmICFpc1NlYXJjaCkgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9jb250ZW50X2Z1bGwiXScpOwogICAgICB9IGVsc2UgaWYgKCFpc01haW4gJiYgIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIGZlZWQucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iZmVlZF9saXN0X3JlYXNvbl9mdWxsIl0nKTsKICAgICAgfSBlbHNlIGlmIChpc01haW4pIHsKICAgICAgICByZXR1cm4gZmVlZC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCA+IFtub2RlLXR5cGU9ImZlZWRfbGlzdF9jb250ZW50X2Z1bGwiXScpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9mb3J3YXJkQ29udGVudCJdID4gW25vZGUtdHlwZT0iZmVlZF9saXN0X2NvbnRlbnRfZnVsbCJdJyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjb250ZW50LmRvbShmZWVkLCB0cnVlKSB8fCBjb250ZW50LmRvbShmZWVkLCBmYWxzZSk7CiAgICB9CiAgfTsKCiAgLy8g5L2c6ICF77yI6L+Z5p2h5b6u5Y2a5piv6LCB5Y+R55qE77yJCiAgLy8g5a+55LqO5b+r6L2s5b6u5Y2a77yM5piv6L+Z5p2h5b6u5Y2a6L2s5Y+R6Ieq55qE5L2c6ICFCiAgY29uc3QgYXV0aG9yID0gZmVlZFBhcnNlci5hdXRob3IgPSB7fTsKICBhdXRob3IuZG9tID0gZmVlZCA9PiB7CiAgICBpZiAoIShmZWVkIGluc3RhbmNlb2YgTm9kZSkpIHJldHVybiBbXTsKICAgIGlmICghaXNTZWFyY2hGZWVkRWxlbWVudChmZWVkKSkgewogICAgICBjb25zdCBhdXRob3IgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9kZXRhaWwgPiAuV0JfaW5mbyA+IC5XX2ZiW3VzZXJjYXJkXScpOwogICAgICByZXR1cm4gYXV0aG9yID8gW2F1dGhvcl0gOiBbXTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGF1dGhvciA9IGZlZWQucXVlcnlTZWxlY3RvcignLmNhcmQtZmVlZCAuaW5mbyAubmFtZScpOwogICAgICByZXR1cm4gYXV0aG9yID8gW2F1dGhvcl0gOiBbXTsKICAgIH0KICB9OwogIGF1dGhvci5pZCA9IGZlZWQgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IGF1dGhvci5kb20oZmVlZCk7CiAgICBpZiAoIWlzU2VhcmNoRmVlZEVsZW1lbnQoZmVlZCkpIHsKICAgICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiBuZXcgVVJMU2VhcmNoUGFyYW1zKGRvbS5nZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJykpLmdldCgnaWQnKSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZG9tTGlzdC5tYXAoZG9tID0+IHsKICAgICAgICBjb25zdCB1aWQgPSBkb20ucGF0aG5hbWUubWF0Y2goL15cLyg/OnVcLyk/KFxkKykvKT8uWzFdOwogICAgICAgIHJldHVybiBTdHJpbmcoTnVtYmVyLnBhcnNlSW50KHVpZCwgMTApKTsKICAgICAgfSkuZmlsdGVyKHVpZCA9PiArdWlkKTsKICAgIH0KICB9OwogIGF1dGhvci5uYW1lID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gYXV0aG9yLmRvbShmZWVkKTsKICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gZG9tLnRleHRDb250ZW50LnRyaW0oKSk7CiAgfTsKICBhdXRob3IuYXZhdGFyID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gYXV0aG9yLmRvbShmZWVkKTsKICAgIGlmIChkb21MaXN0Lmxlbmd0aCAhPT0gMSkgcmV0dXJuIG51bGw7CiAgICBpZiAoIWlzU2VhcmNoRmVlZEVsZW1lbnQoZmVlZCkpIHsKICAgICAgY29uc3QgaW1nID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZmFjZSBpbWcnKTsKICAgICAgcmV0dXJuIGltZy5zcmM7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBpbWcgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWZlZWQgLmF2YXRvciBpbWcnKTsKICAgICAgcmV0dXJuIGltZy5zcmM7CiAgICB9CiAgfTsKCiAgLy8g5b+r6L2s5L2c6ICFCiAgY29uc3QgZmF1dGhvciA9IGZlZWRQYXJzZXIuZmF1dGhvciA9IHt9OwogIGZhdXRob3IuZG9tID0gZmVlZCA9PiB7CiAgICBpZiAoIShmZWVkIGluc3RhbmNlb2YgTm9kZSkpIHJldHVybiBbXTsKICAgIGlmICghaXNTZWFyY2hGZWVkRWxlbWVudChmZWVkKSkgewogICAgICBjb25zdCBmYXV0aG9yID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuc3Bfa3ogfiBhW3VzZXJjYXJkXScpOwogICAgICByZXR1cm4gZmF1dGhvciA/IFtmYXV0aG9yXSA6IFtdOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogIH07CiAgZmF1dGhvci5pZCA9IGZlZWQgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IGZhdXRob3IuZG9tKGZlZWQpOwogICAgaWYgKCFpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpKSB7CiAgICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb20uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJykpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogIH07CiAgZmF1dGhvci5uYW1lID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gZmF1dGhvci5kb20oZmVlZCk7CiAgICBjb25zdCAkQ09ORklHID0gcGFnZS4kQ09ORklHOwogICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiB7CiAgICAgIGNvbnN0IGlkID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb20uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJyk7CiAgICAgIGlmIChpZCA9PT0gJENPTkZJRy51aWQpIHJldHVybiAkQ09ORklHLm5pY2s7CiAgICAgIHJldHVybiBkb20udGV4dENvbnRlbnQudHJpbSgpOwogICAgfSk7CiAgfTsKCiAgLy8g5Y6f5L2c6ICF77yI5LiA5p2h6KKr6L2s5Y+R55qE5b6u5Y2a5pyA5pep5p2l6Ieq6LCB77yJCiAgY29uc3Qgb3JpZ2luYWwgPSBmZWVkUGFyc2VyLm9yaWdpbmFsID0ge307CiAgb3JpZ2luYWwuZG9tID0gZmVlZCA9PiB7CiAgICBpZiAoIShmZWVkIGluc3RhbmNlb2YgTm9kZSkpIHJldHVybiBbXTsKICAgIGlmICghaXNTZWFyY2hGZWVkRWxlbWVudChmZWVkKSkgewogICAgICBjb25zdCBvcmlnaW5hbCA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX2V4cGFuZCA+IC5XQl9pbmZvID4gLldfZmJbdXNlcmNhcmRdJyk7CiAgICAgIHJldHVybiBvcmlnaW5hbCA/IFtvcmlnaW5hbF0gOiBbXTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IG9yaWdpbmFsID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb21tZW50IC5uYW1lJyk7CiAgICAgIHJldHVybiBvcmlnaW5hbCA/IFtvcmlnaW5hbF0gOiBbXTsKICAgIH0KICB9OwogIG9yaWdpbmFsLmlkID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gb3JpZ2luYWwuZG9tKGZlZWQpOwogICAgaWYgKCFpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpKSB7CiAgICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb20uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJykpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiB7CiAgICAgICAgY29uc3QgdWlkID0gZG9tLnBhdGhuYW1lLm1hdGNoKC9eXC8oPzp1XC8pPyhcZCspLyk/LlsxXTsKICAgICAgICByZXR1cm4gU3RyaW5nKE51bWJlci5wYXJzZUludCh1aWQsIDEwKSk7CiAgICAgIH0pLmZpbHRlcih1aWQgPT4gK3VpZCk7CiAgICB9CiAgfTsKICBvcmlnaW5hbC5uYW1lID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gb3JpZ2luYWwuZG9tKGZlZWQpOwogICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiBkb20udGV4dENvbnRlbnQudHJpbSgpLnJlcGxhY2UoL15ALywgJycpKTsKICB9OwoKICAvLyDmj5DliLDvvIjlvq7ljZrkuK3mj5DliLDnmoTkurrvvIzovazlj5Hot6/lvoTkuK3nmoTkurrlkIzlsZ7kuo7mj5DliLDvvIkKICBjb25zdCBtZW50aW9uID0gZmVlZFBhcnNlci5tZW50aW9uID0ge307CiAgbWVudGlvbi5kb20gPSAoZmVlZCwgeyBzaG9ydCA9IGZhbHNlLCBsb25nID0gdHJ1ZSB9ID0ge30pID0+IHsKICAgIGNvbnN0IGNvbnRlbnRzID0gZmVlZENvbnRlbnRFbGVtZW50cyhmZWVkLCB7IHNob3J0LCBsb25nIH0pOwogICAgaWYgKCFpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpKSB7CiAgICAgIGNvbnN0IGRvbUxpc3QgPSBjb250ZW50cy5tYXAoY29udGVudCA9PiB7CiAgICAgICAgaWYgKCFjb250ZW50KSByZXR1cm4gW107CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWYqPSJsb2M9YXQiXVt1c2VyY2FyZCo9Im5hbWUiXScpKTsKICAgICAgfSkucmVkdWNlKCh4LCB5KSA9PiB4LmNvbmNhdCh5KSk7CiAgICAgIHJldHVybiBkb21MaXN0OwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgbGlua0xpc3QgPSBjb250ZW50cy5tYXAoY29udGVudCA9PiAoCiAgICAgICAgY29udGVudCA/IEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdhJykpIDogW10KICAgICAgKSkucmVkdWNlKCh4LCB5KSA9PiB4LmNvbmNhdCh5KSk7CiAgICAgIGNvbnN0IGRvbUxpc3QgPSBsaW5rTGlzdC5maWx0ZXIobGluayA9PiB7CiAgICAgICAgaWYgKCFbJ3dlaWJvLmNvbScsICd3d3cud2VpYm8uY29tJ10uaW5jbHVkZXMobGluay5ob3N0bmFtZSkpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoIS9cL25cLy8udGVzdChsaW5rLnBhdGhuYW1lKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmICghL15ALy50ZXN0KGxpbmsudGV4dENvbnRlbnQudHJpbSgpKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIGRvbUxpc3Q7CiAgICB9CiAgfTsKICBtZW50aW9uLm5hbWUgPSAoZmVlZCwgeyBzaG9ydCA9IGZhbHNlLCBsb25nID0gdHJ1ZSB9ID0ge30pID0+IHsKICAgIGNvbnN0IGRvbUxpc3QgPSBtZW50aW9uLmRvbShmZWVkLCB7IHNob3J0LCBsb25nIH0pOwogICAgaWYgKCFpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpKSB7CiAgICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb20uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ25hbWUnKSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZG9tTGlzdC5tYXAoZG9tID0+IGRlY29kZVVSSUNvbXBvbmVudChkb20ucGF0aG5hbWUuc3BsaXQoJy8nKVsyXSkpOwogICAgfQogIH07CgogIC8vIOivnemimO+8iOWMheaLrOivnemimOWSjOi2heivne+8iQogIGNvbnN0IHRvcGljID0gZmVlZFBhcnNlci50b3BpYyA9IHt9OwogIHRvcGljLmRvbSA9IChmZWVkLCB7IHNob3J0ID0gZmFsc2UsIGxvbmcgPSB0cnVlIH0gPSB7fSkgPT4gewogICAgY29uc3QgaXNTZWFyY2ggPSBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpOwogICAgY29uc3QgY29udGVudHMgPSBmZWVkQ29udGVudEVsZW1lbnRzKGZlZWQsIHsgc2hvcnQsIGxvbmcgfSk7CiAgICBjb25zdCBkb21MaXN0ID0gW107CiAgICBjb250ZW50cy5mb3JFYWNoKGNvbnRlbnQgPT4gewogICAgICBpZiAoIWNvbnRlbnQpIHJldHVybjsKICAgICAgaWYgKCFpc1NlYXJjaCkgewogICAgICAgIGNvbnN0IHRvcGljcyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbChbCiAgICAgICAgICAnYVtzdWRhLXVhdHJhY2sqPSIxMDIyLXRvcGljIl0nLAogICAgICAgICAgJ2EuYV90b3BpYycsCiAgICAgICAgXS5qb2luKCcsJykpOwogICAgICAgIGRvbUxpc3QucHVzaCguLi50b3BpY3MpOwogICAgICAgIGNvbnN0IHNvdXJjZXMgPSBzb3VyY2UuZG9tKGZlZWQpOwogICAgICAgIHNvdXJjZXMuZm9yRWFjaChzb3VyY2UgPT4gewogICAgICAgICAgaWYgKC9eaHR0cHM6XC9cL2h1YXRpLndlaWJvLmNvbVwva1wvW14vPyNdKyQvLnRlc3Qoc291cmNlLmhyZWYpKSBkb21MaXN0LnB1c2goc291cmNlKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBsaW5rcyA9IEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdhJykpOwogICAgICAgIGxpbmtzLmZvckVhY2gobGluayA9PiB7CiAgICAgICAgICBsZXQgaXNUb3BpYyA9IGZhbHNlOwogICAgICAgICAgaWYgKGxpbmsuaG9zdG5hbWUgPT09ICdzLndlaWJvLmNvbScpIHsKICAgICAgICAgICAgaXNUb3BpYyA9IC9eIy4qIyQvLnRlc3QobGluay50ZXh0Q29udGVudC50cmltKCkpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxpbmsuaG9zdG5hbWUgPT09ICdodWF0aS53ZWliby5jb20nKSB7CiAgICAgICAgICAgIGlzVG9waWMgPSAvXlxzKlx1ZTYyNy8udGVzdChsaW5rLnRleHRDb250ZW50KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc1RvcGljKSBkb21MaXN0LnB1c2gobGluayk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGRvbUxpc3Q7CiAgfTsKICB0b3BpYy50ZXh0ID0gKGZlZWQsIHsgc2hvcnQgPSBmYWxzZSwgbG9uZyA9IHRydWUgfSA9IHt9KSA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gdG9waWMuZG9tKGZlZWQsIHsgc2hvcnQsIGxvbmcgfSk7CiAgICByZXR1cm4gZG9tTGlzdC5tYXAoZG9tID0+IHsKICAgICAgaWYgKGRvbSBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50KSB7CiAgICAgICAgaWYgKC9eaHR0cHM6XC9cL2h1YXRpLndlaWJvLmNvbVwva1wvW14vPyNdKyQvLnRlc3QoZG9tLmhyZWYpKSB7CiAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGRvbS5ocmVmLnNwbGl0KCcvJykucG9wKCkpLnRyaW0oKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3QgdGV4dCA9IGRvbS50aXRsZSB8fCBkb20udGV4dENvbnRlbnQ7CiAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1sjXHVlNjI3XXxcW+i2heivnVxdJC9nLCAnJykudHJpbSgpOwogICAgfSk7CiAgfTsKCiAgLy8g6ZO+5o6l77yI6Zmk6LaF6K+d5aSW5omA5pyJ55qE6ZO+5o6l77yM5YyF5ous5aSW56uZ6ZO+5o6l44CB6KeG6aKR44CB5paH56ug562J77yJCiAgY29uc3QgbGluayA9IGZlZWRQYXJzZXIubGluayA9IHt9OwogIGxpbmsuZG9tID0gKGZlZWQsIHsgc2hvcnQgPSBmYWxzZSwgbG9uZyA9IHRydWUgfSA9IHt9KSA9PiB7CiAgICBjb25zdCBpc1NlYXJjaCA9IGlzU2VhcmNoRmVlZEVsZW1lbnQoZmVlZCk7CiAgICBjb25zdCBjb250ZW50cyA9IGZlZWRDb250ZW50RWxlbWVudHMoZmVlZCwgeyBzaG9ydCwgbG9uZyB9KTsKICAgIGNvbnN0IGRvbUxpc3QgPSBbXS5jb25jYXQoLi4uY29udGVudHMubWFwKGNvbnRlbnQgPT4gewogICAgICBpZiAoIWNvbnRlbnQpIHJldHVybiBbXTsKICAgICAgaWYgKCFpc1NlYXJjaCkgewogICAgICAgIHJldHVybiBBcnJheS5mcm9tKGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnYVthY3Rpb24tdHlwZT0iZmVlZF9saXN0X3VybCJdJykpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGxpbmtzID0gQXJyYXkuZnJvbShjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKSk7CiAgICAgICAgcmV0dXJuIGxpbmtzLmZpbHRlcihsaW5rID0+ICgKICAgICAgICAgIGxpbmsucXVlcnlTZWxlY3RvcignLndiaWNvbicpLnRleHRDb250ZW50LnRyaW0oKSA9PT0gJ08nCiAgICAgICAgKSk7CiAgICAgIH0KICAgIH0pKTsKICAgIGNvbnN0IHRvcGljcyA9IG5ldyBTZXQoZmVlZFBhcnNlci50b3BpYy5kb20oZmVlZCwgeyBzaG9ydCwgbG9uZyB9KSk7CiAgICByZXR1cm4gZG9tTGlzdC5maWx0ZXIobGluayA9PiBsaW5rICYmICF0b3BpY3MuaGFzKGxpbmspKTsKICB9OwogIGxpbmsudGV4dCA9IChmZWVkLCB7IHNob3J0ID0gZmFsc2UsIGxvbmcgPSB0cnVlIH0gPSB7fSkgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IGxpbmsuZG9tKGZlZWQsIHsgc2hvcnQsIGxvbmcgfSk7CiAgICByZXR1cm4gZG9tTGlzdC5tYXAoZG9tID0+IHsKICAgICAgY29uc3QgdGV4dCA9IGRvbS50aXRsZSB8fCBkb20udGV4dENvbnRlbnQ7CiAgICAgIHJldHVybiB0ZXh0OwogICAgfSk7CiAgfTsKCiAgLy8g5p2l5rqQCiAgY29uc3Qgc291cmNlID0gZmVlZFBhcnNlci5zb3VyY2UgPSB7fTsKICBzb3VyY2UuZG9tID0gKGZlZWQsIGlzTWFpbikgPT4gewogICAgY29uc3QgaXNTZWFyY2ggPSBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpOwogICAgaWYgKGlzTWFpbiA9PT0gdHJ1ZSkgewogICAgICBpZiAoIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZGV0YWlsID4gLldCX2Zyb20gYTpub3QoW2RhdGVdKTpub3QoW3lhd2YtZGF0ZV0pJykpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBBcnJheS5mcm9tKGZlZWQucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRlbnQgPiAuZnJvbSBhOmxhc3QtY2hpbGQ6bm90KDpmaXJzdC1jaGlsZCknKSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNNYWluID09PSBmYWxzZSkgewogICAgICBpZiAoIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZXhwYW5kIC5XQl9mcm9tIGE6bm90KFtkYXRlXSk6bm90KFt5YXdmLWRhdGVdKScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLWNvbW1lbnQgLmZyb20gYTpsYXN0LWNoaWxkOm5vdCg6Zmlyc3QtY2hpbGQpJykpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZnJvbSBhOm5vdChbZGF0ZV0pOm5vdChbeWF3Zi1kYXRlXSknKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuZnJvbSBhOmxhc3QtY2hpbGQ6bm90KDpmaXJzdC1jaGlsZCknKSk7CiAgICAgIH0KICAgIH0KICB9OwogIHNvdXJjZS50ZXh0ID0gKGZlZWQsIGlzTWFpbikgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IHNvdXJjZS5kb20oZmVlZCwgaXNNYWluKTsKICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gewogICAgICBjb25zdCB0ZXh0ID0gKGRvbS50aXRsZSB8fCBkb20udGV4dENvbnRlbnQpLnRyaW0oKTsKICAgICAgcmV0dXJuIHRleHQ7CiAgICB9KS5maWx0ZXIoc291cmNlID0+IHNvdXJjZSk7CiAgfTsKCiAgLy8g5pel5pyfCiAgY29uc3QgZGF0ZSA9IGZlZWRQYXJzZXIuZGF0ZSA9IHt9OwogIGRhdGUuZG9tID0gKGZlZWQsIGlzTWFpbikgPT4gewogICAgY29uc3QgaXNTZWFyY2ggPSBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpOwogICAgaWYgKGlzTWFpbiA9PT0gdHJ1ZSkgewogICAgICBpZiAoIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZGV0YWlsID4gLldCX2Zyb20gYVtkYXRlXSwgLldCX2RldGFpbCA+IC5XQl9mcm9tIGFbeWF3Zi1kYXRlXScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb250ZW50ID4gLmZyb20gYTpmaXJzdC1jaGlsZCcpKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc01haW4gPT09IGZhbHNlKSB7CiAgICAgIGlmICghaXNTZWFyY2gpIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9leHBhbmQgLldCX2Zyb20gYVtkYXRlXSwgLldCX2V4cGFuZCAuV0JfZnJvbSBhW3lhd2YtZGF0ZV0nKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC1jb21tZW50IC5mcm9tIGE6Zmlyc3QtY2hpbGQnKSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICghaXNTZWFyY2gpIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mcm9tIGFbZGF0ZV0sIC5XQl9mcm9tIGFbeWF3Zi1kYXRlXScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mcm9tIGE6Zmlyc3QtY2hpbGQnKSk7CiAgICAgIH0KICAgIH0KICB9OwogIGRhdGUuZGF0ZSA9IChmZWVkLCBpc01haW4pID0+IHsKICAgIGNvbnN0IGRvbUxpc3QgPSBkYXRlLmRvbShmZWVkLCBpc01haW4pOwogICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiAoCiAgICAgIG5ldyBEYXRlKE51bWJlcihkb20uZ2V0QXR0cmlidXRlKCdkYXRlJykgfHwgZG9tLmdldEF0dHJpYnV0ZSgneWF3Zi1kYXRlJykpKQogICAgKSkuZmlsdGVyKGRhdGUgPT4gK2RhdGUpOwogIH07CgogIC8vIOWFtuS7luWfuuehgOmAmueUqAogIGZlZWRQYXJzZXIuaXNGZWVkID0gZmVlZCA9PiBpc0ZlZWRFbGVtZW50KGZlZWQpOwogIGZlZWRQYXJzZXIuaXNTZWFyY2hGZWVkID0gZmVlZCA9PiBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpOwogIGZlZWRQYXJzZXIuaXNGb3J3YXJkID0gZmVlZCA9PiBpc0ZvcndhcmRGZWVkRWxlbWVudChmZWVkKTsKICBmZWVkUGFyc2VyLmlzRmFzdCA9IGZlZWQgPT4gaXNGYXN0RmVlZEVsZW1lbnQoZmVlZCk7CiAgZmVlZFBhcnNlci5pc0Zhc3RGb3J3YXJkID0gZmVlZCA9PiBpc0Zhc3RGb3J3YXJkRmVlZEVsZW1lbnQoZmVlZCk7CgogIGZlZWRQYXJzZXIubWlkID0gbm9kZSA9PiBmZWVkQ29udGFpbmVyKG5vZGUpLmdldEF0dHJpYnV0ZSgnbWlkJyk7CiAgZmVlZFBhcnNlci5vbWlkID0gbm9kZSA9PiBmZWVkQ29udGFpbmVyKG5vZGUpLmdldEF0dHJpYnV0ZSgnb21pZCcpOwogIGZlZWRQYXJzZXIuZm1pZCA9IG5vZGUgPT4gZmVlZENvbnRhaW5lcihub2RlKS5nZXRBdHRyaWJ1dGUoJ2ZtaWQnKTsKCiAgLy8g6K+E6K665YaF5a65CiAgY29tbWVudFBhcnNlci50ZXh0ID0gdGFyZ2V0ID0+IHsKICAgIGNvbnN0IGVsZW1lbnRzID0gY29tbWVudENvbnRlbnRFbGVtZW50cyh0YXJnZXQpOwogICAgaWYgKGVsZW1lbnRzKSB7CiAgICAgIGNvbnN0IHRleHRzID0gZWxlbWVudHMubWFwKGVsZW1lbnQgPT4gY29tbWVudFRleHRQYXJzZXIoZWxlbWVudCkgPz8gJycpOwogICAgICByZXR1cm4gdGV4dHMuam9pbignXG4nKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjb21tZW50VGV4dFBhcnNlcih0YXJnZXQpOwogICAgfQogIH07CgogIC8vIOivhOiuuueUqOaItwogIGNvbnN0IGNvbW1lbnRVc2VyID0gY29tbWVudFBhcnNlci51c2VyID0ge307CiAgY29tbWVudFVzZXIuZG9tID0gY29tbWVudCA9PiB7CiAgICBjb25zdCBjb250ZW50ID0gY29tbWVudENvbnRlbnRFbGVtZW50cyhjb21tZW50KTsKICAgIHJldHVybiBbXS5jb25jYXQoLi4uY29udGVudC5tYXAoZWxlbWVudCA9PiBbLi4uZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW3VzZXJjYXJkXScpXSkpOwogIH07CiAgY29tbWVudFVzZXIubmFtZSA9IGNvbW1lbnQgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IGNvbW1lbnRVc2VyLmRvbShjb21tZW50KTsKICAgIHJldHVybiBkb21MaXN0CiAgICAgIC5tYXAoZG9tID0+IGRvbS50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXkA/LywgJycpKQogICAgICAuZmlsdGVyKHVzZXIgPT4gdXNlcik7CiAgfTsKCn0oKSk7CjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwoKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkVjcgPSB7fTsKICBjb25zdCBjb21tZW50UGFyc2VyID0geWF3Zi5jb21tZW50VjcgPSB7fTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwoKICAvLyDlsIbml7bpl7TmoLzlvI/ljJbkuLrkuJzlhavljLrnmoQgSVNPIDg2MDEg5LiyCiAgY29uc3QgZGF0ZSA9IGZ1bmN0aW9uIChkYXRlU3RyKSB7CiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7CiAgICBkYXRlLnNldEhvdXJzKGRhdGUuZ2V0SG91cnMoKSArIDgpOwogICAgaWYgKChkYXRlLmdldFVUQ0Z1bGxZZWFyKCkgKyAnJykubGVuZ3RoICE9PSA0KSByZXR1cm4gJyc7CiAgICByZXR1cm4gWwogICAgICBkYXRlLmdldFVUQ0Z1bGxZZWFyKCksCiAgICAgICctJywgKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEgKyAnJykucGFkU3RhcnQoMiwgMCksCiAgICAgICctJywgKGRhdGUuZ2V0VVRDRGF0ZSgpICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAnVCcsIChkYXRlLmdldFVUQ0hvdXJzKCkgKyAnJykucGFkU3RhcnQoMiwgMCksCiAgICAgICc6JywgKGRhdGUuZ2V0VVRDTWludXRlcygpICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAnOicsIChkYXRlLmdldFVUQ1NlY29uZHMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgJy4nLCAoZGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKSArICcnKS5wYWRTdGFydCgzLCAwKSwKICAgICAgJyswODAwJywKICAgIF0uam9pbignJyk7CiAgfTsKCiAgY29uc3QgY2F0Y2hlZCA9IChmLCB2ID0gbnVsbCkgPT4gZmVlZCA9PiB7IHRyeSB7IHJldHVybiBmKGZlZWQpOyB9IGNhdGNoIChlKSB7IHJldHVybiB2OyB9IH07CiAgY29uc3QgbWlkID0gbWlkID0+IG1pZCA+IDAgPyBtaWQgOiBudWxsOwoKICBmZWVkUGFyc2VyLm1pZCA9IGZlZWQgPT4gbWlkKGZlZWQubWlkKTsKICBmZWVkUGFyc2VyLm9taWQgPSBmZWVkID0+IG1pZChmZWVkLnJldHdlZXRlZF9zdGF0dXM/Lm1pZCk7CgogIGZlZWRQYXJzZXIuaXNGYXN0ID0gZmVlZCA9PiBmZWVkLnNjcmVlbl9uYW1lX3N1ZmZpeF9uZXcgIT0gbnVsbDsKICBmZWVkUGFyc2VyLmlzRmFzdEZvcndhcmQgPSBmZWVkID0+IGZlZWRQYXJzZXIuaXNGYXN0KGZlZWQpICYmIGZlZWQub3JpX21pZCAhPSBudWxsOwogIGZlZWRQYXJzZXIuaXNGb3J3YXJkID0gZmVlZCA9PiBmZWVkLnJldHdlZXRlZF9zdGF0dXMgIT0gbnVsbDsKCiAgY29uc3QgYXV0aG9yID0gZmVlZFBhcnNlci5hdXRob3IgPSB7fTsKICBhdXRob3IuYXZhdGFyID0gY2F0Y2hlZChmZWVkID0+IGZlZWQudXNlci5hdmF0YXJfbGFyZ2UgfHwgZmVlZC51c2VyLmF2YXRhcl9oZCwgbnVsbCk7CiAgYXV0aG9yLmlkID0gZmVlZCA9PiBbZmVlZC51c2VyLmlkc3RyXTsKICBhdXRob3IubmFtZSA9IGZlZWQgPT4gW2ZlZWQudXNlci5zY3JlZW5fbmFtZV07CiAgY29uc3QgZmF1dGhvciA9IGZlZWRQYXJzZXIuZmF1dGhvciA9IHt9OwogIGZhdXRob3IuaWQgPSBmZWVkID0+IGZlZWRQYXJzZXIuaXNGYXN0Rm9yd2FyZChmZWVkKSA/IFtTdHJpbmcoZmVlZC5vcmlfdWlkKV0gOiBbXTsgLy8gb3JpX21pZCDmmK/ooqvlv6vovazlvq7ljZogaWTvvIxvcmlfdWlkIOaYr+i9rOW/q+i9rOeahOS6uueahCBpZAogIGZhdXRob3IubmFtZSA9IGNhdGNoZWQoZmVlZCA9PiBmZWVkUGFyc2VyLmlzRmFzdEZvcndhcmQoZmVlZCkgPyBbZmVlZC5zY3JlZW5fbmFtZV9zdWZmaXhfbmV3LmZpbmQoeCA9PiB4LnR5cGUgPT09IDIpLmNvbnRlbnRdIDogW10sIFtdKTsKICBjb25zdCBvcmlnaW5hbCA9IGZlZWRQYXJzZXIub3JpZ2luYWwgPSB7fTsKICBvcmlnaW5hbC5pZCA9IGNhdGNoZWQoZmVlZCA9PiBmZWVkLnJldHdlZXRlZF9zdGF0dXMgPyBbZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzLnVzZXIuaWRzdHJdIDogW10sIFtdKTsKICBvcmlnaW5hbC5uYW1lID0gY2F0Y2hlZChmZWVkID0+IGZlZWQucmV0d2VldGVkX3N0YXR1cyA/IFtmZWVkLnJldHdlZXRlZF9zdGF0dXMudXNlci5zY3JlZW5fbmFtZV0gOiBbXSwgW10pOwogIGNvbnN0IGxpbmtUb3BpY3MgPSBmZWVkID0+IHsKICAgIGlmICghQXJyYXkuaXNBcnJheShmZWVkLnVybF9zdHJ1Y3QpKSByZXR1cm4gW107CiAgICBjb25zdCB0b3BpY3MgPSBbXTsKICAgIGZlZWQudXJsX3N0cnVjdC5mb3JFYWNoKHVybCA9PiB7CiAgICAgIGNvbnN0IG1hdGNoID0gdXJsLnNob3J0X3VybC5tYXRjaCgvIyhbXiNdKilcW+i2heivnVxdIy8pOwogICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMF0pIHRvcGljcy5wdXNoKG1hdGNoWzBdKTsKICAgIH0pOwogICAgcmV0dXJuIHRvcGljczsKICB9OwogIGNvbnN0IHRleHQgPSBmZWVkUGFyc2VyLnRleHQgPSB7fTsKICB0ZXh0LmRldGFpbCA9IGZlZWQgPT4gewogICAgbGV0IHRleHQgPSBbZmVlZCwgZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzXS5maWx0ZXIoeCA9PiB4Py51c2VyKS5tYXAoeCA9PiBbCiAgICAgIHgudXNlci5zY3JlZW5fbmFtZSwKICAgICAgeC5sb25nVGV4dENvbnRlbnRfcmF3IHx8IHgudGV4dF9yYXcsCiAgICAgIHguc291cmNlLAogICAgICBkYXRlKHguY3JlYXRlZF9hdCksCiAgICBdKS5yZWR1Y2UoKHgsIHkpID0+IHguY29uY2F0KHkpKS5qb2luKCdcdTIwMjgnKTsKICAgIGlmIChBcnJheS5pc0FycmF5KGZlZWQudXJsX3N0cnVjdCkpIHsKICAgICAgdGV4dCA9IGZlZWQudXJsX3N0cnVjdC5yZWR1Y2UodXJsID0+IHsKICAgICAgICBpZiAoIXVybD8uc2hvcnRfdXJsIHx8ICEvaHR0cHM/OlwvXC8vLnRlc3QodXJsLnNob3J0X3VybCkpIHJldHVybiB0ZXh0OwogICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KHVybC5zaG9ydF91cmwpLmpvaW4oKHVybC5sb25nX3VybCB8fCB1cmwuc2hvcnRfdXJsKSArICdcdWZmZjknICsgKHVybC51cmxfdGl0bGUgPz8gJycpICsgJ1x1ZmZmYicpOwogICAgICB9LCB0ZXh0KTsKICAgIH0KICAgIGNvbnN0IHRvcGljcyA9IGxpbmtUb3BpY3MoZmVlZCkubWFwKHQgPT4gYCMke3R9W+i2heivnV0jYCkuam9pbignJyk7CiAgICBpZiAodG9waWNzKSB0ZXh0ICs9ICdcbicgKyB0b3BpY3M7CiAgICByZXR1cm4gdGV4dDsKICB9OwogIHRleHQuc2ltcGxlID0gZmVlZCA9PiB7CiAgICBsZXQgdGV4dCA9IFtmZWVkLCBmZWVkLnJldHdlZXRlZF9zdGF0dXNdLmZpbHRlcih4ID0+IHgpCiAgICAgIC5tYXAoeCA9PiB4LmxvbmdUZXh0Q29udGVudF9yYXcgfHwgeC50ZXh0X3Jhdykuam9pbignXG4nKTsKICAgIGlmIChBcnJheS5pc0FycmF5KGZlZWQudXJsX3N0cnVjdCkpIHsKICAgICAgdGV4dCA9IGZlZWQudXJsX3N0cnVjdC5yZWR1Y2UodXJsID0+IHsKICAgICAgICBpZiAoIXVybD8uc2hvcnRfdXJsIHx8ICEvaHR0cHM/OlwvXC8vLnRlc3QodXJsLnNob3J0X3VybCkpIHJldHVybiB0ZXh0OwogICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KHVybC5zaG9ydF91cmwpLmpvaW4odXJsLnVybF90aXRsZSB8fCB1cmwubG9uZ19VUkwgfHwgdXJsLnNob3J0X3VybCk7CiAgICAgIH0sIHRleHQpOwogICAgfQogICAgY29uc3QgdG9waWNzID0gbGlua1RvcGljcyhmZWVkKS5tYXAodCA9PiBgIyR7dH1b6LaF6K+dXSNgKS5qb2luKCcnKTsKICAgIGlmICh0b3BpY3MpIHRleHQgKz0gJ1xuJyArIHRvcGljczsKICAgIHJldHVybiB0ZXh0OwogIH07CiAgY29uc3QgbWVudGlvbiA9IGZlZWRQYXJzZXIubWVudGlvbiA9IHt9OwogIG1lbnRpb24ubmFtZSA9IGZlZWQgPT4gewogICAgY29uc3QgdGV4dCA9IFtmZWVkLCBmZWVkLnJldHdlZXRlZF9zdGF0dXNdLmZpbHRlcih4ID0+IHgpCiAgICAgIC5tYXAoeCA9PiB4LmxvbmdUZXh0Q29udGVudF9yYXcgfHwgeC50ZXh0X3Jhdykuam9pbignXG4nKTsKICAgIGNvbnN0IHVzZXJzID0gdGV4dC5tYXRjaCgvQFtcdTRlMDAtXHU5ZmE1fFx1RTdDNy1cdUU3RjN8XHdfXC3Ct10rL2cpIHx8IFtdOwogICAgcmV0dXJuIHVzZXJzLm1hcCh1ID0+IHUuc2xpY2UoMSkpOwogIH07CiAgY29uc3QgdG9waWMgPSBmZWVkUGFyc2VyLnRvcGljID0ge307CiAgdG9waWMudGV4dCA9IGZlZWQgPT4gewogICAgY29uc3QgdG9waWNzID0gbGlua1RvcGljcyhmZWVkKTsKICAgIGlmIChBcnJheS5pc0FycmF5KGZlZWQudG9waWNfc3RydWN0KSkgewogICAgICB0b3BpY3MucHVzaCguLi5mZWVkLnRvcGljX3N0cnVjdC5tYXAodG9waWMgPT4gdG9waWMudG9waWNfdGl0bGUpKTsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KGZlZWQudXJsX3N0cnVjdCkpIHsKICAgICAgLy8g5omA5pyJ5LiN5pivIGh0dHBzPyDlvIDlpLTnmoTpk77mjqUKICAgICAgdG9waWNzLnB1c2goLi4uZmVlZC51cmxfc3RydWN0Lm1hcCh4ID0+IHguc2hvcnRfdXJsKS5maWx0ZXIoeCA9PiB4ICYmIC9eKFsjJF0pLipcMSQvLnRlc3QoeCkpKTsKICAgIH0KICAgIHJldHVybiBbLi4ubmV3IFNldCh0b3BpY3MubWFwKHRleHQgPT4gdGV4dC5yZXBsYWNlKC9bI1x1ZTYyNyRdfFxb6LaF6K+dXF0kL2csICcnKS50cmltKCkpKV07CiAgfTsKICBjb25zdCBzb3VyY2UgPSBmZWVkUGFyc2VyLnNvdXJjZSA9IHt9OwogIHNvdXJjZS50ZXh0ID0gZmVlZCA9PiB7CiAgICBjb25zdCBzb3VyY2VzID0gW2ZlZWQsIGZlZWQucmV0d2VldGVkX3N0YXR1c10uZmlsdGVyKHggPT4geCkubWFwKHggPT4geC5zb3VyY2UpOwogICAgcmV0dXJuIHNvdXJjZXM7CiAgfTsKICBjb25zdCBwaWNzID0gZmVlZFBhcnNlci5waWNzID0ge307CiAgcGljcy5pbmZvID0gZmVlZCA9PiB7CiAgICBjb25zdCBwaWNzID0gW107CiAgICBbZmVlZCwgZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzXS5mb3JFYWNoKGZkID0+IHsKICAgICAgaWYgKGZkPy5waWNfaW5mb3MpIHBpY3MucHVzaCguLi5PYmplY3Qua2V5cyhmZC5waWNfaW5mb3MpLm1hcChrID0+IGZkLnBpY19pbmZvc1trXSkpOwogICAgfSk7CiAgICByZXR1cm4gcGljczsKICB9OwoKCn0oKSk7CjsgKGZ1bmN0aW9uICgpIHsKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwoKICBjb25zdCBwcmlvcml0eSA9IHV0aWwucHJpb3JpdHk7CgogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQgPSB7fTsKICBjb25zdCBjb21tZW50UGFyc2VyID0geWF3Zi5jb21tZW50ID0ge307CgogIGluaXQub25Mb2FkKGZ1bmN0aW9uICgpIHsKICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihmZWVkUGFyc2VyLCB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPyB5YXdmLmZlZWRWNiA6IHlhd2YuZmVlZFY3KTsKICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihjb21tZW50UGFyc2VyLCB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPyB5YXdmLmNvbW1lbnRWNiA6IHlhd2YuY29tbWVudFY3KTsKICB9LCB7IHByaW9yaXR5OiBwcmlvcml0eS5GSVJTVCB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvY29tbW9uL2Zhc3QuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CiAgY29uc3QgY29tbWVudFBhcnNlciA9IHlhd2YuY29tbWVudDsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBjb25zdCBmYXN0ID0gZmVlZFBhcnNlci5mYXN0ID0ge307CiAgY29uc3QgY29tbWVudEZhc3QgPSBjb21tZW50UGFyc2VyLmZhc3QgPSB7fTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBjb250ZW50VGV4dENvbnRleHRUaXRsZTogewogICAgICBjbjogJ+i/h+a7pOW+ruWNmiDlhoXlrrnigJx7MX3igJ0nLAogICAgICB0dzogJ+evqemBuOW+ruWNmiDlhaflrrnjgIx7MX3jgI0nLAogICAgICBlbjogJ0NyZWF0ZSBmaWx0ZXIgZm9yIGNvbnRlbnQg4oCcezF94oCdJywKICAgIH0sCiAgICBhY2NvdW50Q29udGV4dFRpdGxlOiB7CiAgICAgIGNuOiAn6L+H5ruk5b6u5Y2aIOW4kOWPt+KAnHsxfeKAnScsCiAgICAgIHR3OiAn56+p6YG45b6u5Y2aIOW4s+iZn+OAjHsxfeOAjScsCiAgICAgIGVuOiAnQ3JlYXRlIGZpbHRlciBmb3IgYWNjb3VudCDigJxAezF94oCdJywKICAgIH0sCiAgICB0b3BpY0NvbnRleHRUaXRsZTogewogICAgICBjbjogJ+i/h+a7pOW+ruWNmiDor53popgjezF9IycsCiAgICAgIHR3OiAn56+p6YG45b6u5Y2aIOipsemhjCN7MX0jJywKICAgICAgZW46ICdDcmVhdGUgZmlsdGVyIGZvciB0b3BpYyAjQHsxfSMnLAogICAgfSwKICAgIHNvdXJjZUNvbnRleHRUaXRsZTogewogICAgICBjbjogJ+i/h+a7pOW+ruWNmiDmnaXmupDigJx7MX3igJ0nLAogICAgICB0dzogJ+evqemBuOW+ruWNmiDkvobmupDjgIx7MX3jgI0nLAogICAgICBlbjogJ0NyZWF0ZSBmaWx0ZXIgZm9yIHNvdXJjZSDigJxAezF94oCdJywKICAgIH0sCiAgfSk7CgogIGNvbnN0IGNsZWFuVGV4dCA9IHRleHQgPT4gdGV4dC5yZXBsYWNlKC9eW1xzXHUyMDBiXSt8W1xzXHUyMDBiXSskL2csICcnKTsKCiAgY29uc3QgcmVjb2duaXplID0gZmFzdC5yZWNvZ25pemUgPSB7fTsKICAvLyDor4bliKvpgInkuK3nmoTmlofmnKwKICByZWNvZ25pemUudGV4dFNpbXBsZSA9IGZ1bmN0aW9uIChzZWxlY3Rpb24pIHsKICAgIGlmICghKHNlbGVjdGlvbiBpbnN0YW5jZW9mIFNlbGVjdGlvbikpIHJldHVybiBbXTsKICAgIGlmICghKHNlbGVjdGlvbiArICcnKSkgcmV0dXJuIFtdOwogICAgaWYgKHNlbGVjdGlvbi5yYW5nZUNvdW50ICE9PSAxKSByZXR1cm4gW107CiAgICBsZXQgc2ltcGxlLCBmdWxsLCB0eXBlOwogICAgc2ltcGxlID0gKGZlZWRQYXJzZXIudGV4dC5zaW1wbGUoc2VsZWN0aW9uKSB8fCBbXSkubWFwKGNsZWFuVGV4dCk7CiAgICBmdWxsID0gKGZlZWRQYXJzZXIudGV4dC5kZXRhaWwoc2VsZWN0aW9uKSB8fCBbXSkubWFwKGNsZWFuVGV4dCk7CiAgICB0eXBlID0gJ3RleHQnOwogICAgaWYgKCFzaW1wbGUuam9pbignJykgJiYgIWZ1bGwuam9pbignJykpIHsKICAgICAgc2ltcGxlID0gZnVsbCA9IChjb21tZW50UGFyc2VyLnRleHQoc2VsZWN0aW9uKSB8fCBbXSkubWFwKGNsZWFuVGV4dCk7CiAgICAgIHR5cGUgPSAnY29tbWVudCc7CiAgICB9CiAgICBpZiAoIXNpbXBsZS5qb2luKCcnKSAmJiAhZnVsbC5qb2luKCcnKSkgewogICAgICByZXR1cm4gW107CiAgICB9CiAgICBjb25zdCB0ZW1wbGF0ZSA9IGkxOG4uY29udGVudFRleHRDb250ZXh0VGl0bGU7CiAgICBjb25zdCB0aXRsZSA9IHRlbXBsYXRlLnJlcGxhY2UoJ3sxfScsICgpID0+IHNpbXBsZSk7CiAgICByZXR1cm4gW3sgdGl0bGUsIHR5cGUsIHZhbHVlOiB7IHNpbXBsZSwgZnVsbCB9IH1dOwogIH07CiAgcnVsZS5hZGRGYXN0TGlzdGVuZXIocmVjb2duaXplLnRleHRTaW1wbGUpOwoKICAvLyDor4bliKvlpJrkuKrpgInljLrpgInkuK3nmoTmlofmnKwKICByZWNvZ25pemUudGV4dENvbXBsZXggPSBmdW5jdGlvbiAoc2VsZWN0aW9uKSB7CiAgICBpZiAoIShzZWxlY3Rpb24gaW5zdGFuY2VvZiBTZWxlY3Rpb24pKSByZXR1cm4gW107CiAgICBpZiAoc2VsZWN0aW9uLnJhbmdlQ291bnQgPD0gMSkgcmV0dXJuIFtdOwogICAgbGV0IHRleHRzID0gZmVlZFBhcnNlci50ZXh0LmRldGFpbChzZWxlY3Rpb24pLmZpbHRlcihjbGVhblRleHQpOwogICAgbGV0IHR5cGUgPSAnbXVsdGl0ZXh0JzsKICAgIGlmICghdGV4dHMubGVuZ3RoKSB7CiAgICAgIHRleHRzID0gY29tbWVudFBhcnNlci50ZXh0KHNlbGVjdGlvbikuZmlsdGVyKGNsZWFuVGV4dCk7CiAgICAgIHR5cGUgPSAnbXVsdGl0ZXh0Y29tbWVudCc7CiAgICB9CiAgICBpZiAoIXRleHRzLmxlbmd0aCkgewogICAgICByZXR1cm4gW107CiAgICB9CiAgICBjb25zdCB0ZW1wbGF0ZSA9IGkxOG4uY29udGVudFRleHRDb250ZXh0VGl0bGU7CiAgICB0ZXh0cyA9IHRleHRzLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpKTsKICAgIGNvbnN0IGpvaW5lZCA9IHRleHRzLmpvaW4oJ+KApicpOwogICAgY29uc3QgcGxhY2Vob2xkZXIgPSBqb2luZWQubGVuZ3RoID4gMTAgPyBqb2luZWQuc2xpY2UoMCwgOSkgKyAn4oCmJyA6IGpvaW5lZDsKICAgIGNvbnN0IHRpdGxlID0gdGVtcGxhdGUucmVwbGFjZSgnezF9JywgKCkgPT4gcGxhY2Vob2xkZXIpOwogICAgcmV0dXJuIFt7IHRpdGxlLCB0eXBlLCB2YWx1ZTogeyBmdWxsOiB0ZXh0cyB9IH1dOwogIH07CiAgcnVsZS5hZGRGYXN0TGlzdGVuZXIocmVjb2duaXplLnRleHRDb21wbGV4KTsKCiAgLy8g5Zug5Li65oiR5Lus56e76Zmk5LqG5a+56ZO+5o6l55qE6K+G5Yir77yM6L+Z6YeMIOWwhumTvuaOpeivhuWIq+S4uuaWh+acrAogIHJlY29nbml6ZS50ZXh0TGluayA9IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm4gW107CiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib2R5Jyk7CiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGFyZ2V0LmNsb25lTm9kZSh0cnVlKSk7CiAgICBjb25zdCBsaW5rID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoWwogICAgICAnYVthY3Rpb24tdHlwZT0iZmVlZF9saXN0X3VybCJdW3RpdGxlXScsCiAgICAgICdhW2FjdGlvbi10eXBlPSJmbF91cmxfYWRkcGFyYW1zIl1bdGl0bGVdJywKICAgIF0uam9pbignLCcpKTsKICAgIGlmICghbGluaykgcmV0dXJuIFtdOwogICAgaWYgKGxpbmsubWF0Y2hlcygnW3N1ZGEtdWF0cmFjayo9IjEwMjItdG9waWMiXScpKSByZXR1cm4gW107CiAgICBjb25zdCB0ZXh0ID0gbGluay50aXRsZS50cmltKCk7CiAgICBpZiAodGV4dC5tYXRjaCgvXmh0dHBzPzovKSB8fCB0ZXh0ID09PSAn572R6aG16ZO+5o6lJykgcmV0dXJuIFtdOwogICAgY29uc3QgdGVtcGxhdGUgPSBpMThuLmNvbnRlbnRUZXh0Q29udGV4dFRpdGxlOwogICAgY29uc3QgdGl0bGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKCd7MX0nLCAoKSA9PiB0ZXh0KTsKICAgIHJldHVybiBbeyB0aXRsZSwgdHlwZTogJ3RleHQnLCB2YWx1ZTogeyBzaW1wbGU6IHRleHQsIGZ1bGw6IFt0ZXh0XSB9IH1dOwogIH07CiAgcnVsZS5hZGRGYXN0TGlzdGVuZXIocmVjb2duaXplLnRleHRMaW5rKTsKCiAgLy8g6K+G5Yir55So5oi355qE5aS05YOP44CB6ZO+5o6l562JCiAgcmVjb2duaXplLmFjY291bnQgPSBhc3luYyBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIFtdOwogICAgY29uc3QgZmluZCA9IHNlbGVjdG9yID0+IHsKICAgICAgY29uc3QgcGFyZW50ID0gdGFyZ2V0LmNsb3Nlc3Qoc2VsZWN0b3IpOwogICAgICBpZiAocGFyZW50KSByZXR1cm4gcGFyZW50OwogICAgICBjb25zdCBjb250ZW50ID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICBpZiAoIWNvbnRlbnQpIHJldHVybiBudWxsOwogICAgICBjb25zdCBjb250YWluZXIgPSBjb250ZW50LmNsb3Nlc3QoJ1tjb21tZW50X2lkXSwgW21pZF0nKTsKICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybiBudWxsOwogICAgICBpZiAodGFyZ2V0ID09PSBjb250YWluZXIgfHwgY29udGFpbmVyLmNvbnRhaW5zKHRhcmdldCkpIHJldHVybiBjb250ZW50OwogICAgICByZXR1cm4gbnVsbDsKICAgIH07CiAgICBjb25zdCB1c2VyID0geyBpZDogbnVsbCwgbmFtZTogbnVsbCwgdHlwZTogJ2FjY291bnQnIH07CiAgICAvLyDnlKjmiLfpk77mjqUKICAgIDsgKGZ1bmN0aW9uICh1c2VybGluaykgewogICAgICBpZiAoIXVzZXJsaW5rKSByZXR1cm47CiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModXNlcmxpbmsuZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKTsKICAgICAgaWYgKHBhcmFtcy5oYXMoJ2lkJykpIHVzZXIuaWQgPSBwYXJhbXMuZ2V0KCdpZCcpOwogICAgICBpZiAocGFyYW1zLmhhcygnbmFtZScpKSB1c2VyLm5hbWUgPSBwYXJhbXMuZ2V0KCduYW1lJyk7CiAgICAgIGlmICh1c2VybGluay5tYXRjaGVzKCcuV0JfZGV0YWlsID4gLldCX2luZm8gPiAuV19mYlt1c2VyY2FyZF0nKSkgdXNlci50eXBlID0gJ2F1dGhvcic7CiAgICAgIGlmICh1c2VybGluay5tYXRjaGVzKCcuV0JfZXhwYW5kID4gLldCX2luZm8gPiAuV19mYlt1c2VyY2FyZF0nKSkgdXNlci50eXBlID0gJ29yaWdpbmFsJzsKICAgICAgaWYgKHVzZXJsaW5rLm1hdGNoZXMoJy5XQl9mZWVkX3R5cGUgYVtocmVmKj0ibG9jPWF0Il1bdXNlcmNhcmQqPSJuYW1lIl0nKSkgdXNlci50eXBlID0gJ21lbnRpb24nOwogICAgICBpZiAodXNlcmxpbmsubWF0Y2hlcygnW2NvbW1lbnRfaWRdIFt1c2VyY2FyZF0nKSkgdXNlci50eXBlID0gJ2NvbW1lbnR1c2VyJzsKICAgIH0oZmluZCgnW3VzZXJjYXJkKj0ibmFtZT0iXSwgW3VzZXJjYXJkKj0iaWQ9Il0nKSkpOwogICAgLy8g5Liq5Lq65Li76aG155qE5aS05YOPCiAgICA7IChmdW5jdGlvbiAocGhvdG8pIHsKICAgICAgaWYgKCFwaG90bykgcmV0dXJuOwogICAgICB1c2VyLm5hbWUgPSBwaG90by5nZXRBdHRyaWJ1dGUoJ2FsdCcpOwogICAgfShmaW5kKCcucGhvdG9bYWx0XScpKSk7CiAgICAvLyDnlKjmiLfljaHniYflpLTlg48KICAgIDsgKGZ1bmN0aW9uICh1c2VyY2FyZCkgewogICAgICBpZiAoIXVzZXJjYXJkKSByZXR1cm47CiAgICAgIGNvbnN0IGF2YXRhciA9IHVzZXJjYXJkLnF1ZXJ5U2VsZWN0b3IoJ1tpbWd0eXBlPSJoZWFkIl1bdWlkXVt0aXRsZV0nKTsKICAgICAgaWYgKCFhdmF0YXIpIHJldHVybjsKICAgICAgdXNlci5uYW1lID0gYXZhdGFyLnRpdGxlOwogICAgICB1c2VyLmlkID0gYXZhdGFyLmdldEF0dHJpYnV0ZSgndWlkJyk7CiAgICB9KGZpbmQoJy5sYXllcl9wZXJzb25jYXJkJykpKTsKICAgIGlmICghdXNlci5pZCAmJiAhdXNlci5uYW1lKSByZXR1cm4gW107CiAgICBpZiAoIXVzZXIuaWQgfHwgIXVzZXIubmFtZSkgdHJ5IHsKICAgICAgT2JqZWN0LmFzc2lnbih1c2VyLCBhd2FpdCByZXF1ZXN0LnVzZXJJbmZvKHVzZXIpKTsKICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIFtdOyB9CiAgICBjb25zdCB0ZW1wbGF0ZSA9IGkxOG4uYWNjb3VudENvbnRleHRUaXRsZTsKICAgIGlmICghdGVtcGxhdGUpIHJldHVybiBbXTsKICAgIGNvbnN0IHRpdGxlID0gdGVtcGxhdGUucmVwbGFjZSgnezF9JywgKCkgPT4gdXNlci5uYW1lKTsKICAgIHJldHVybiBbeyB0aXRsZSwgdHlwZTogdXNlci50eXBlLCB2YWx1ZTogeyBpZDogdXNlci5pZCwgbmFtZTogdXNlci5uYW1lIH0gfV07CiAgfTsKICBydWxlLmFkZEZhc3RMaXN0ZW5lcihyZWNvZ25pemUuYWNjb3VudCk7CgogIC8vIOivhuWIq+ivnemimAogIHJlY29nbml6ZS50b3BpYyA9IGFzeW5jIGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm4gW107CiAgICBsZXQgdG9waWMgPSBudWxsOwogICAgaWYgKHRhcmdldC5tYXRjaGVzKCdhW3N1ZGEtdWF0cmFjayo9IjEwMjItdG9waWMiXScpICYmIHRhcmdldC50aXRsZSkgewogICAgICB0b3BpYyA9IHRhcmdldC50aXRsZS5yZXBsYWNlKC9eW1xzI10rfFtccyNdKyQvZywgJycpOwogICAgfQogICAgaWYgKCF0b3BpYyAmJiB0YXJnZXQubWF0Y2hlcygnYS5hX3RvcGljLCBhW3N1ZGEtdWF0cmFjayo9IjEwMjItdG9waWMiXScpKSB7CiAgICAgIHRvcGljID0gdGFyZ2V0LnRleHRDb250ZW50LnJlcGxhY2UoL15bXHMjXSt8W1xzI10rJC9nLCAnJyk7CiAgICB9CiAgICBpZiAoIXRvcGljICYmIHRhcmdldC5tYXRjaGVzKCdhW3N1ZGEtdWF0cmFjayo9IjEwMjItc3RvY2siXScpKSB7CiAgICAgIHRvcGljID0gdGFyZ2V0LnRleHRDb250ZW50LnJlcGxhY2UoL15bXHMkXSt8W1xzJF0rJC9nLCAnJyk7CiAgICB9CiAgICBpZiAoIXRvcGljICYmIHRhcmdldC5tYXRjaGVzKCcuaG90X3RvcGljIGFbdGl0bGVdW3N1ZGEtdWF0cmFjayo9ImtleT1ob3R0b3BpY19yMiJdJykpIHsKICAgICAgdG9waWMgPSB0YXJnZXQudGl0bGUucmVwbGFjZSgvXltccyNdK3xbXHMjXSskL2csICcnKTsKICAgIH0KICAgIGlmICghdG9waWMgJiYgdGFyZ2V0Lm1hdGNoZXMoJy5XQl9mcm9tIGFbaHJlZl49Imh0dHBzOi8vaHVhdGkud2VpYm8uY29tL2svIl0nKSkgewogICAgICBpZiAoL15odHRwczpcL1wvaHVhdGkud2VpYm8uY29tXC9rXC9bXi8/I10rJC8udGVzdCh0YXJnZXQuaHJlZikpIHsKICAgICAgICB0b3BpYyA9IGRlY29kZVVSSUNvbXBvbmVudCh0YXJnZXQuaHJlZi5zcGxpdCgnLycpLnBvcCgpKS50cmltKCk7CiAgICAgIH0KICAgIH0KICAgIGlmICghdG9waWMpIHJldHVybiBbXTsKICAgIGNvbnN0IHRleHQgPSB0b3BpYy5yZXBsYWNlKC9eXHVlNjI3fFxb6LaF6K+dXF0kfOi2heivnSQvZywgJycpOwogICAgY29uc3QgdGVtcGxhdGUgPSBpMThuLnRvcGljQ29udGV4dFRpdGxlOwogICAgY29uc3QgdGl0bGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKCd7MX0nLCAoKSA9PiB0ZXh0KTsKICAgIHJldHVybiBbeyB0aXRsZSwgdHlwZTogJ3RvcGljJywgdmFsdWU6IHRleHQgfV07CiAgfTsKICBydWxlLmFkZEZhc3RMaXN0ZW5lcihyZWNvZ25pemUudG9waWMpOwoKICAvLyDor4bliKvmnaXmupAKICByZWNvZ25pemUuc291cmNlID0gYXN5bmMgZnVuY3Rpb24gKHRhcmdldCkgewogICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybiBbXTsKICAgIGlmICghdGFyZ2V0Lm1hdGNoZXMoJy5XQl9mcm9tIGE6bm90KFtkYXRlXSk6bm90KFt5YXdmLWRhdGVdKScpKSByZXR1cm4gW107CiAgICBjb25zdCBzb3VyY2UgPSAodGFyZ2V0LnRpdGxlIHx8IHRhcmdldC50ZXh0Q29udGVudCkudHJpbSgpOwogICAgaWYgKCFzb3VyY2UgfHwgc291cmNlID09PSAn5b6u5Y2aIHdlaWJvLmNvbScpIHJldHVybiBbXTsKICAgIGNvbnN0IHRlbXBsYXRlID0gaTE4bi5zb3VyY2VDb250ZXh0VGl0bGU7CiAgICBjb25zdCB0aXRsZSA9IHRlbXBsYXRlLnJlcGxhY2UoJ3sxfScsICgpID0+IHNvdXJjZSk7CiAgICByZXR1cm4gW3sgdGl0bGUsIHR5cGU6ICdzb3VyY2UnLCB2YWx1ZTogc291cmNlIH1dOwogIH07CiAgcnVsZS5hZGRGYXN0TGlzdGVuZXIocmVjb2duaXplLnNvdXJjZSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgdGV4dEZhc3REZXNjcmlwdGlvbjogewogICAgICBjbjogJ+WMheWQq+KAnHsxfeKAneeahOW+ruWNmicsCiAgICAgIHR3OiAn5YyF5ZCr44CMezF944CN55qE5b6u5Y2aJywKICAgICAgZW46ICdGZWVkcyBjb250YWluIHRleHQg4oCcezF94oCdJywKICAgIH0sCiAgICB0ZXh0Q29tbWVudEZhc3REZXNjcmlwdGlvbjogewogICAgICBjbjogJ+WMheWQq+KAnHsxfeKAneeahOivhOiuuicsCiAgICAgIHR3OiAn5YyF5ZCr44CMezF944CN55qE6KmV6KuWJywKICAgICAgZW46ICdDb21tZW50cyBjb250YWluIHRleHQg4oCcezF94oCdJywKICAgIH0sCiAgICByZWdleEZhc3REZXNjcmlwdGlvbjogewogICAgICBjbjogJ+WMuemFjXsxfeeahOW+ruWNmicsCiAgICAgIHR3OiAn5Yy56YWNezF955qE5b6u5Y2aJywKICAgICAgZW46ICdGZWVkcyBjb250YWluIHRleHQg4oCcezF94oCdJywKICAgIH0sCiAgICByZWdleENvbW1lbnRGYXN0RGVzY3JpcHRpb246IHsKICAgICAgY246ICfljLnphY17MX3nmoTor4TorronLAogICAgICB0dzogJ+WMuemFjXsxfeeahOipleirlicsCiAgICAgIGVuOiAnQ29tbWVudHMgY29udGFpbiB0ZXh0IOKAnHsxfeKAnScsCiAgICB9LAogICAgYWNjb3VudEF1dGhvckZhc3REZXNjcmlwdGlvbjogewogICAgICBjbjogJ+S9nOiAheaYr+KAnEB7MX3igJ3nmoTlvq7ljZonLAogICAgICB0dzogJ+S9nOiAheaYr+OAjEB7MX3jgI3nmoTlvq7ljZonLAogICAgICBlbjogJ0ZlZWRzIGJ5ICJAezF9IicsCiAgICB9LAogICAgYWNjb3VudEF1dGhvckZvcndhcmRGYXN0RGVzY3JpcHRpb246IHsKICAgICAgY246ICfkvZzogIXmmK/igJxAezF94oCd55qE6L2s5Y+R5b6u5Y2aJywKICAgICAgdHc6ICfkvZzogIXmmK/jgIxAezF944CN55qE6L2J55m85b6u5Y2aJywKICAgICAgZW46ICdGZWVkcyBieSAiQHsxfSInLAogICAgfSwKICAgIGFjY291bnRNZW50aW9uRmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5o+Q5Yiw5LqG4oCcQHsxfeKAneeahOW+ruWNmicsCiAgICAgIHR3OiAn5o+Q5Yiw5LqG44CMQHsxfeOAjeeahOW+ruWNmicsCiAgICAgIGVuOiAnRmVlZHMgbWVudGlvbmVkICJAezF9IicsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsRmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5Y6f5L2c6ICF5piv4oCcQHsxfeKAneeahOW+ruWNmicsCiAgICAgIHR3OiAn5Y6f5L2c6ICF5piv44CMQHsxfeOAjeeahOW+ruWNmicsCiAgICAgIGVuOiAnT3JpZ2luYWwgRmVlZHMgYnkgIkB7MX0iJywKICAgIH0sCiAgICBhY2NvdW50Q29tbWVudEZhc3REZXNjcmlwdGlvbjogewogICAgICBjbjogJ+WMheWQq+KAnEB7MX3igJ3nmoTor4TorronLAogICAgICB0dzogJ+WMheWQq+OAjEB7MX3jgI3nmoToqZXoq5YnLAogICAgICBlbjogJ0NvbW1lbnRzIHdpdGggIkB7MX0iJywKICAgIH0sCiAgICB0b3BpY0Zhc3REZXNjcmlwdGlvbjogewogICAgICBjbjogJ+WMheWQq+ivnemimCN7MX0j55qE5b6u5Y2aJywKICAgICAgdHc6ICfljIXlkKvor53popgjezF9I+eahOW+ruWNmicsCiAgICAgIGVuOiAnRmVlZHMgY29udGFpbiB0b3BpYyAjezF9IycsCiAgICB9LAogICAgc291cmNlRmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5p2l6Ieq4oCcezF94oCd55qE5b6u5Y2aJywKICAgICAgdHc6ICfkvoboh6rjgIx7MX3jgI3nmoTlvq7ljZonLAogICAgICBlbjogJ0ZlZWRzIGZyb20gc291cmNlIOKAnHsxfeKAnScsCiAgICB9LAogIH0pOwoKICBjb25zdCByZW5kZXIgPSBmYXN0LnJlbmRlciA9IHt9OwogIGNvbnN0IGNvbW1lbnRSZW5kZXIgPSBjb21tZW50RmFzdC5yZW5kZXIgPSB7fTsKCiAgY29uc3QgdGV4dEZhc3RSZW5kZXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbiAoaXRlbSkgewogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIGNvbnN0IFtwcmUsIHBvc3RdID0gZGVzY3JpcHRpb24oKS5zcGxpdCgnezF9Jyk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwcmUpKTsKICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocG9zdCkpOwogICAgICBpbnB1dC52YWx1ZSA9IGl0ZW0udmFsdWUgPSBpdGVtLnZhbHVlLnNpbXBsZTsKICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBldmVudCA9PiB7CiAgICAgICAgaXRlbS52YWx1ZSA9IGlucHV0LnZhbHVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH07CiAgfTsKICByZW5kZXIudGV4dCA9IHRleHRGYXN0UmVuZGVyKCgpID0+IGkxOG4udGV4dEZhc3REZXNjcmlwdGlvbik7CiAgY29tbWVudFJlbmRlci50ZXh0ID0gdGV4dEZhc3RSZW5kZXIoKCkgPT4gaTE4bi50ZXh0Q29tbWVudEZhc3REZXNjcmlwdGlvbik7CgogIGNvbnN0IHJlZ2V4RXNjYXBlZCA9IGZ1bmN0aW9uIChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xdL1xcXS9nLCAnXFwkJicpOwogIH07CiAgY29uc3QgcmVnZXhGYXN0UmVuZGVyID0gZnVuY3Rpb24gKGRlc2NyaXB0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb25zdCBbcHJlLCBwb3N0XSA9IGRlc2NyaXB0aW9uKCkuc3BsaXQoJ3sxfScpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocHJlKSk7CiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTsKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBvc3QpKTsKICAgICAgaWYgKGl0ZW0udmFsdWUuZnVsbC5sZW5ndGggPT09IDEpIHsKICAgICAgICBpbnB1dC52YWx1ZSA9IGl0ZW0udmFsdWUgPSAnLycgKyByZWdleEVzY2FwZWQoaXRlbS52YWx1ZS5mdWxsWzBdKSArICcvbXUnOwogICAgICB9IGVsc2UgewogICAgICAgIGlucHV0LnZhbHVlID0gaXRlbS52YWx1ZSA9ICcvXicgKyBpdGVtLnZhbHVlLmZ1bGwKICAgICAgICAgIC5tYXAodmFsdWUgPT4gYCg/PS4qJHtyZWdleEVzY2FwZWQodmFsdWUpfSlgKS5qb2luKCcnKSArICcvbXUnOwogICAgICB9CiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZXZlbnQgPT4gewogICAgICAgIGl0ZW0udmFsdWUgPSBpbnB1dC52YWx1ZTsKICAgICAgfSk7CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9OwogIH07CiAgcmVuZGVyLnJlZ2V4ID0gcmVnZXhGYXN0UmVuZGVyKCgpID0+IGkxOG4ucmVnZXhGYXN0RGVzY3JpcHRpb24pOwogIGNvbW1lbnRSZW5kZXIucmVnZXggPSByZWdleEZhc3RSZW5kZXIoKCkgPT4gaTE4bi5yZWdleENvbW1lbnRGYXN0RGVzY3JpcHRpb24pOwoKICBjb25zdCBzaW1wbGVSZW5kZXIgPSBmdW5jdGlvbiAodGVtcGxhdGUsIHJlYWRWYWx1ZSA9IHZhbHVlID0+IHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb25zdCBtZXNzYWdlID0gdGVtcGxhdGUoKS5yZXBsYWNlKCd7MX0nLCAoKSA9PiByZWFkVmFsdWUoaXRlbS52YWx1ZSkpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobWVzc2FnZSkpOwogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfTsKICB9OwoKICByZW5kZXIuYXV0aG9yID0gc2ltcGxlUmVuZGVyKCgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZhc3REZXNjcmlwdGlvbiwgdmFsdWUgPT4gdmFsdWUubmFtZSk7CiAgcmVuZGVyLmZvcndhcmQgPSBzaW1wbGVSZW5kZXIoKCkgPT4gaTE4bi5hY2NvdW50QXV0aG9yRm9yd2FyZEZhc3REZXNjcmlwdGlvbiwgdmFsdWUgPT4gdmFsdWUubmFtZSk7CiAgcmVuZGVyLm1lbnRpb24gPSBzaW1wbGVSZW5kZXIoKCkgPT4gaTE4bi5hY2NvdW50TWVudGlvbkZhc3REZXNjcmlwdGlvbiwgdmFsdWUgPT4gdmFsdWUubmFtZSk7CiAgcmVuZGVyLm9yaWdpbmFsID0gc2ltcGxlUmVuZGVyKCgpID0+IGkxOG4uYWNjb3VudE9yaWdpbmFsRmFzdERlc2NyaXB0aW9uLCB2YWx1ZSA9PiB2YWx1ZS5uYW1lKTsKICBjb21tZW50UmVuZGVyLnVzZXIgPSBzaW1wbGVSZW5kZXIoKCkgPT4gaTE4bi5hY2NvdW50Q29tbWVudEZhc3REZXNjcmlwdGlvbiwgdmFsdWUgPT4gdmFsdWUubmFtZSk7CiAgcmVuZGVyLnRvcGljID0gc2ltcGxlUmVuZGVyKCgpID0+IGkxOG4udG9waWNGYXN0RGVzY3JpcHRpb24pOwogIHJlbmRlci5zb3VyY2UgPSBzaW1wbGVSZW5kZXIoKCkgPT4gaTE4bi5zb3VyY2VGYXN0RGVzY3JpcHRpb24pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9jb21tb24vbG9uZy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBkb20gPSB1dGlsLmRvbTsKCiAgLyoqCiAgICog57uf6K6h5LiA5p2h5b6u5Y2a55qE5a2X5pWwCiAgICog5b6u5Y2a55qE5a2X5pWw6Iux5paH5oyJ5Y2K5a2X6K6h566X5bm25Zub6IiN5LqU5YWlCiAgICogQHBhcmFtIHtFbGVtZW50fSBodG1sCiAgICovCiAgY29uc3QgZmVlZENoYXJhY3RlckNvdW50ID0gZnVuY3Rpb24gKHRleHQpIHsKICAgIGNvbnN0IGNvbnRlbnQgPSB0ZXh0LnRleHRDb250ZW50OwogICAgY29uc3QgY2hhckNvdW50ID0gY29udGVudC5sZW5ndGg7CiAgICBjb25zdCBsYXRpbkNvdW50ID0gY29udGVudC5yZXBsYWNlKC9bXlx1MDAyMC1cdTAwZmVdL2csICcnKS5sZW5ndGg7CiAgICByZXR1cm4gTWF0aC5jZWlsKGNoYXJDb3VudCAtIGxhdGluQ291bnQgLyAyKTsKICB9OwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGZvbGRUZXh0OiB7CiAgICAgIGNuOiAn5pS26LW35YWo5paHJywKICAgIH0sCiAgICB0ZXh0Q291bnQ6IHsKICAgICAgY246ICfvvIjnuqZ7MX3lrZfvvIknLAogICAgICB0dzogJ++8iOe0hHsxfeWtl++8iScsCiAgICAgIGVuOiAnIChhYm91dCB7MX0gY2hhcmFjdGVycyknLAogICAgfSwKICB9KTsKCiAgb2JzZXJ2ZXIuZmVlZC5vbkJlZm9yZShhc3luYyBmdW5jdGlvbiAoZmVlZCkgewogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNikgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgY29uc3QgdW5mb2xkID0gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJ1thY3Rpb24tdHlwZT0iZmxfdW5mb2xkIl0nKSk7CiAgICAvLyDov5nmrrXpgLvovpHln7rkuo4gbGliLmZlZWQucGx1Z2lucy5tb3JlVGhhbjE0MAogICAgLy8g5YyF5ous55u05o6l5oqKIEhUTUwg5o+S5YWl6L+b5Y6755qE6YC76L6R5Lmf5piv5qC55o2u6L+Z5q615p2l5YGa55qECiAgICBjb25zdCB1bmZvbGRpbmcgPSB1bmZvbGQubWFwKGFzeW5jIGZ1bmN0aW9uIChidXR0b24pIHsKICAgICAgY29uc3QgdGV4dCA9IGJ1dHRvbi5wYXJlbnROb2RlOwogICAgICBpZiAoIXRleHQubWF0Y2hlcygnLldCX3RleHQnKSkgcmV0dXJuOwogICAgICBpZiAodGV4dC5uZXh0RWxlbWVudFNpYmxpbmc/Lm1hdGNoZXMoJy5XQl90ZXh0JykpIHJldHVybjsKICAgICAgY29uc3QgbWlkID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhidXR0b24uZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpKS5nZXQoJ21pZCcpOwogICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVxdWVzdC5nZXRMb25nVGV4dChtaWQpOwogICAgICBjb25zdCBmdWxsID0gdGV4dC5jbG9uZU5vZGUoZmFsc2UpOwogICAgICBmdWxsLnNldEF0dHJpYnV0ZSgnbm9kZS10eXBlJywgZnVsbC5nZXRBdHRyaWJ1dGUoJ25vZGUtdHlwZScpICsgJ19mdWxsJyk7CiAgICAgIGRvbS5jb250ZW50KGZ1bGwsIGh0bWwpOwogICAgICB0ZXh0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGZ1bGwsIHRleHQubmV4dFNpYmxpbmcpOwogICAgICBjb25zdCBjaGFyQ291bnQgPSBmZWVkQ2hhcmFjdGVyQ291bnQoZnVsbCk7CiAgICAgIGNvbnN0IGxpbmVCcmVha0NvdW50ID0gZnVsbC5xdWVyeVNlbGVjdG9yQWxsKCdicicpLmxlbmd0aDsKICAgICAgY29uc3QgZm9sZEJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBmb2xkQnV0dG9uQ29udGFpbmVyLmlubmVySFRNTCA9ICc8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBpZ25vcmU9Imlnbm9yZSIgY2xhc3M9IldCX3RleHRfb3B0IiBhY3Rpb24tdHlwZT0iZmxfZm9sZCI+PGkgY2xhc3M9IldfZmljb24gZmljb25fYXJyb3dfdXAiPmQ8L2k+PC9hPic7CiAgICAgIGNvbnN0IGNvdW50VGlwID0gaTE4bi50ZXh0Q291bnQucmVwbGFjZSgnezF9JywgKCkgPT4gY2hhckNvdW50ID4gMTAwMCA/IE1hdGgucm91bmQoY2hhckNvdW50IC8gMTAwKSAqIDEwMCA6IE1hdGgucm91bmQoY2hhckNvdW50IC8gMTApICogMTApOwogICAgICBidXR0b24uaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50VGlwKSwgYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ2knKSk7CiAgICAgIC8vIOiHquWKqOWxleW8gOS4jei2hei/h+aMh+WumuWtl+aVsOeahOW+ruWNmgogICAgICBjb25zdCBleHBhbmRMb25nID0geWF3Zi5ydWxlcy5mZWVkcy5jb250ZW50LmV4cGFuZExvbmc7CiAgICAgIGlmIChleHBhbmRMb25nLmdldENvbmZpZygpICYmIGV4cGFuZExvbmcucmVmLmNvdW50LmdldENvbmZpZygpID49IGNoYXJDb3VudCArIGxpbmVCcmVha0NvdW50ICogKGV4cGFuZExvbmcucmVmLmJyLmdldENvbmZpZygpIC0gMSkpIHsKICAgICAgICB0ZXh0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZnVsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGNvbnN0IGZvbGRCdXR0b24gPSBmb2xkQnV0dG9uQ29udGFpbmVyLmZpcnN0Q2hpbGQ7CiAgICAgICAgZm9sZEJ1dHRvbi5pbnNlcnRCZWZvcmUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaTE4bi5mb2xkVGV4dCksIGZvbGRCdXR0b24uZmlyc3RDaGlsZCk7CiAgICAgICAgZnVsbC5hcHBlbmRDaGlsZChmb2xkQnV0dG9uKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5hbGwodW5mb2xkaW5nKS50aGVuKCgpID0+IHsgfSk7CiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2ZpbHRlci9maWx0ZXIuanMKCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5maWx0ZXJUYWJUaXRsZSA9IHsKICAgIGNuOiAn5b6u5Y2a6L+H5rukJywKICAgIHR3OiAn5b6u5Y2a56+p6YG4JywKICAgIGVuOiAnRmlsdGVyJywKICB9OwoKICBjb25zdCBmaWx0ZXIgPSB5YXdmLnJ1bGVzLmZpbHRlciA9IHt9OwogIGZpbHRlci5maWx0ZXIgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5maWx0ZXJUYWJUaXRsZSwKICAgIHBhZ2VtZW51OiB0cnVlLAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9maWx0ZXIvZm9sbG93aW5nLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGNvbmZpZyA9IHlhd2YuY29uZmlnOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3Q7CiAgY29uc3QgZG93bmxvYWQgPSB5YXdmLmRvd25sb2FkOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgZmlsdGVyID0geWF3Zi5ydWxlcy5maWx0ZXI7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgZnVuY3Rvb2xzID0gdXRpbC5mdW5jdG9vbHM7CiAgY29uc3QgdWkgPSB1dGlsLnVpOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBjb25zdCBnZXRDb250ZXh0ID0gZnVuY3Rvb2xzLm9uY2UoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgY29uc3QgZm9sbG93Q29uZmlnID0gYXdhaXQgY29uZmlnLnBvb2woJ0ZvbGxvdycsIHsKICAgICAgdWlkOiBpbml0LnBhZ2UuJENPTkZJRy51aWQsCiAgICAgIGlzTG9jYWw6IHRydWUsCiAgICB9KTsKICAgIGNvbnN0IGZldGNoRGF0YSA9IG5ldyBydWxlLmNsYXNzLk9mZnNjcmVlbkNvbmZpZ0l0ZW0oewogICAgICBpZDogJ2ZldGNoRGF0YScsCiAgICAgIGNvbmZpZ1Bvb2w6IGZvbGxvd0NvbmZpZywKICAgICAgZ2V0IGluaXRpYWwoKSB7IHJldHVybiB7fTsgfSwKICAgICAgc2V0Q29uZmlnKHZhbHVlKSB7CiAgICAgICAgdmFsdWUudGltZXN0YW1wID0gRGF0ZS5ub3coKTsKICAgICAgICByZXR1cm4gc3VwZXIuc2V0Q29uZmlnKHZhbHVlKTsKICAgICAgfSwKICAgICAgcmVzdGFydCgpIHsKICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgdmFsdWUuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTsKICAgICAgICB0aGlzLnNldENvbmZpZyh2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHZhbHVlLnN0YXJ0VGltZTsKICAgICAgfSwKICAgICAgaXNPdXREYXRlZCgpIHsKICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgaWYgKCF2YWx1ZS50aW1lc3RhbXApIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdmFsdWUuc3RhcnRUaW1lIDwgRGF0ZS5ub3coKSAtIDg2NGU1ICogMzsKICAgICAgfSwKICAgICAgLy8g5YW25a6e6K6+572u6K+75YaZ5bm25LiN5piv5ZCM5q2l55qE77yM5L2G5piv5Lmf5rKh5LuA5LmI5pu05aW955qE5Yqe5rOV5bCx5piv5LqGCiAgICAgIGdldExvY2soKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGxvY2sgPSBEYXRlLm5vdygpICsgWy4uLkFycmF5KDEwMCldLm1hcChfID0+IE1hdGgucmFuZG9tKCkgKiAxMCB8IDApLmpvaW4oJycpOwogICAgICAgIHZhbHVlLmxvY2sgPSBsb2NrOwogICAgICAgIHRoaXMuc2V0Q29uZmlnKHZhbHVlKTsKICAgICAgICByZXR1cm4gbG9jazsKICAgICAgfSwKICAgICAgYXNzZXJ0TG9jayhsb2NrKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICAgIGlmICh2YWx1ZS5sb2NrICE9PSBsb2NrKSB7CiAgICAgICAgICB0aHJvdyBFcnJvcignRmV0Y2hpbmcgZm9sbG93IGxpc3QgZXJyb3I6IExvY2sgbG9zdCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdG91Y2hUaW1lc3RhbXAoKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICAgIHRoaXMuc2V0Q29uZmlnKHZhbHVlKTsKICAgICAgICByZXR1cm4gdmFsdWUubG9jazsKICAgICAgfSwKICAgICAgbm9ybWFsaXplKHZhbHVlKSB7CiAgICAgICAgY29uc3QgYmFzZSA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4ge307CiAgICAgICAgICBpZiAoIXZhbHVlLnRpbWVzdGFtcCkgcmV0dXJuIHt9OwogICAgICAgICAgaWYgKHZhbHVlLnRpbWVzdGFtcCA+IERhdGUubm93KCkgKyA2MGUzKSByZXR1cm4ge307CiAgICAgICAgICBpZiAodmFsdWUudGltZXN0YW1wIDwgRGF0ZS5ub3coKSAtIDg2NDAwZTMgKiA3KSByZXR1cm4ge307CiAgICAgICAgICBpZiAodmFsdWUuYWxsUGFnZXMgJiYgIXZhbHVlLnN0YXJ0VGltZSkgewogICAgICAgICAgICB2YWx1ZS5zdGFydFRpbWUgPSBEYXRlLm5vdygpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHZhbHVlLnBlbmRpbmdQYWdlcykgewogICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUubGlzdCkpIHJldHVybiB7fTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9KCkpOwogICAgICAgIGJhc2Uud2VpYm9WZXJzaW9uID0geWF3Zi5XRUlCT19WRVJTSU9OOwogICAgICAgIHJldHVybiBiYXNlOwogICAgICB9LAogICAgfSk7CiAgICBjb25zdCBsYXN0TGlzdCA9IG5ldyBydWxlLmNsYXNzLk9mZnNjcmVlbkNvbmZpZ0l0ZW0oewogICAgICBpZDogJ2xhc3RMaXN0JywKICAgICAgY29uZmlnUG9vbDogZm9sbG93Q29uZmlnLAogICAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuIG51bGw7IH0sCiAgICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICAgIGlmICghdmFsdWUpIHJldHVybiBudWxsOwogICAgICAgIGlmICghdmFsdWUudGltZXN0YW1wKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUubGlzdCkpIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfSwKICAgIH0pOwogICAgY29uc3QgbGFzdENoYW5nZSA9IG5ldyBydWxlLmNsYXNzLk9mZnNjcmVlbkNvbmZpZ0l0ZW0oewogICAgICBpZDogJ2xhc3RDaGFuZ2UnLAogICAgICBjb25maWdQb29sOiBmb2xsb3dDb25maWcsCiAgICAgIGdldCBpbml0aWFsKCkgeyByZXR1cm4gbnVsbDsgfSwKICAgICAgbm9ybWFsaXplKHZhbHVlKSB7CiAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKCF2YWx1ZS50aW1lc3RhbXApIHJldHVybiBudWxsOwogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZS5hZGQpKSB2YWx1ZS5hZGQgPSBbXTsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUubG9zdCkpIHZhbHVlLmxvc3QgPSBbXTsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUucmVuYW1lKSkgdmFsdWUucmVuYW1lID0gW107CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9LAogICAgfSk7CiAgICBjb25zdCBjb25maWdzID0geyBmZXRjaERhdGEsIGxhc3RMaXN0LCBsYXN0Q2hhbmdlIH07CiAgICByZXR1cm4gY29uZmlnczsKICB9KTsKCiAgbGV0IGZvbGxvd2luZ0NvbnRleHQgPSBudWxsOwogIGluaXQub25SZWFkeShhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBmb2xsb3dpbmdDb250ZXh0ID0gYXdhaXQgZ2V0Q29udGV4dCgpOwogIH0sIHsgcHJpb3JpdHk6IHV0aWwucHJpb3JpdHkuQkVGT1JFIH0pOwoKICAvKiogQHR5cGVkZWYgeydpbmFjdGl2ZSd8J3dhaXRpbmcnfCdzdGFydGluZyd8J3BlbmRpbmcnfCdydW5uaW5nJ3wncnVubmluZ19mYWlsJ3wnY2hlY2tpbmcnfCdjaGVja2luZ19mYWlsJ30gVXBkYXRlU3RhdHVzU3RhdHVzICovCiAgLyoqIEB0eXBlIHt7IHN0YXR1czogVXBkYXRlU3RhdHVzU3RhdHVzLCBjdXJyZW50OiBudW1iZXIsIHRvdGFsOiBudW1iZXIsIHJlc3VsdDogbnVtYmVyIH19ICovCiAgY29uc3QgdXBkYXRlU3RhdHVzID0gewogICAgc3RhdHVzOiAnaW5hY3RpdmUnLAogICAgY3VycmVudDogMCwKICAgIHRvdGFsOiAwLAogICAgcmVzdWx0OiAwLAogIH07CiAgY29uc3QgcmVwb3J0VXBkYXRlU3RhdHVzID0gZnVuY3Rpb24gKC8qKiBAdHlwZSB7VXBkYXRlU3RhdHVzU3RhdHVzfSAqL3N0YXR1cykgewogICAgY29uc3QgeyBmZXRjaERhdGEgfSA9IGZvbGxvd2luZ0NvbnRleHQ7CiAgICBjb25zdCBmZXRjaENvbnRleHQgPSBmZXRjaERhdGEuZ2V0Q29uZmlnKCk7CiAgICBPYmplY3QuYXNzaWduKHVwZGF0ZVN0YXR1cywgewogICAgICBzdGF0dXMsCiAgICAgIGN1cnJlbnQ6IGZldGNoQ29udGV4dC5jdXJyZW50UGFnZSB8fCAwLAogICAgICB0b3RhbDogKGZldGNoQ29udGV4dC5hbGxQYWdlcyB8fCBbXSkubGVuZ3RoLAogICAgICByZXN1bHQ6IChmZXRjaENvbnRleHQubGlzdCB8fCBbXSkubGVuZ3RoLAogICAgfSk7CiAgICBmb2xsb3dpbmcuYXV0b0NoZWNrRm9sbG93aW5nLnJlZi5mZXRjaGluZy5yZW5kZXJBbGxWYWx1ZXMoKTsKICB9OwoKICAvLyDojrflj5bnrKzkuIDpobXnmoTmlbDmja4KICBjb25zdCBmZXRjaEluaXRpYWxpemUgPSBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB7IGZldGNoRGF0YSB9ID0gZm9sbG93aW5nQ29udGV4dDsKICAgIGNvbnN0IGxvY2sgPSBmZXRjaERhdGEudG91Y2hUaW1lc3RhbXAoKTsKICAgIGZldGNoRGF0YS5yZXN0YXJ0KCk7CiAgICBjb25zdCB7IGFsbFBhZ2VzLCBmb2xsb3dJblBhZ2UgfSA9IGF3YWl0IHJlcXVlc3QuZ2V0Rm9sbG93aW5nUGFnZShpbml0LnBhZ2UuJENPTkZJRy51aWQpOwogICAgZmV0Y2hEYXRhLmFzc2VydExvY2sobG9jayk7CiAgICBjb25zdCBmZXRjaENvbnRleHQgPSBmZXRjaERhdGEuZ2V0Q29uZmlnKCk7CiAgICBmZXRjaENvbnRleHQuYWxsUGFnZXMgPSBhbGxQYWdlczsKICAgIGZldGNoQ29udGV4dC5saXN0ID0gZm9sbG93SW5QYWdlOwogICAgZmV0Y2hDb250ZXh0LmN1cnJlbnRQYWdlID0gMTsKICAgIGZldGNoRGF0YS5zZXRDb25maWcoZmV0Y2hDb250ZXh0KTsKICB9OwogIC8vIOiOt+WPluWQjuS4gOmhteeahOaVsOaNrgogIGNvbnN0IGZldGNoTmV4dCA9IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHsgZmV0Y2hEYXRhIH0gPSBmb2xsb3dpbmdDb250ZXh0OwogICAgY29uc3QgbG9jayA9IGZldGNoRGF0YS50b3VjaFRpbWVzdGFtcCgpOwogICAgY29uc3Qgb2xkRmV0Y2hDb250ZXh0ID0gZmV0Y2hEYXRhLmdldENvbmZpZygpOwogICAgY29uc3QgY3VycmVudFBhZ2UgPSBvbGRGZXRjaENvbnRleHQuY3VycmVudFBhZ2U7CiAgICBjb25zdCBuZXh0UGFnZSA9IG9sZEZldGNoQ29udGV4dC5hbGxQYWdlc1tjdXJyZW50UGFnZV07CiAgICBjb25zdCB7IGZvbGxvd0luUGFnZSB9ID0gYXdhaXQgcmVxdWVzdC5nZXRGb2xsb3dpbmdQYWdlKGluaXQucGFnZS4kQ09ORklHLnVpZCwgbmV4dFBhZ2UpOwogICAgZmV0Y2hEYXRhLmFzc2VydExvY2sobG9jayk7CiAgICBjb25zdCBmZXRjaENvbnRleHQgPSBmZXRjaERhdGEuZ2V0Q29uZmlnKCk7CiAgICBmZXRjaENvbnRleHQubGlzdC5wdXNoKC4uLmZvbGxvd0luUGFnZSk7CiAgICBmZXRjaENvbnRleHQuY3VycmVudFBhZ2UrKzsKICAgIGZldGNoRGF0YS5zZXRDb25maWcoZmV0Y2hDb250ZXh0KTsKICB9OwogIC8vIOajgOafpeaYr+WQpuW3sue7j+iOt+WPluWujOavlQogIGNvbnN0IGhhc05leHRQYWdlID0gZnVuY3Rpb24gKCkgewogICAgY29uc3QgeyBmZXRjaERhdGEgfSA9IGZvbGxvd2luZ0NvbnRleHQ7CiAgICBjb25zdCBmZXRjaENvbnRleHQgPSBmZXRjaERhdGEuZ2V0Q29uZmlnKCk7CiAgICByZXR1cm4gZmV0Y2hDb250ZXh0LmFsbFBhZ2VzLmxlbmd0aCA+IGZldGNoQ29udGV4dC5jdXJyZW50UGFnZTsKICB9OwogIC8vIOavlOWvueaWsOaXp+WIl+ihqOS4jeWQjAogIGNvbnN0IGNoZWNrTGlzdERpZmYgPSBmdW5jdGlvbiAobGlzdCwgbmV3TGlzdCwgbGFzdENoYW5nZSkgewogICAgLy8g5aaC5p6c5LmL5YmN5rKh5pyJ5pWw5o2u77yM6YKj5LmI5Lmf5bCx5LiN55So5a+55q+UCiAgICBpZiAoIUFycmF5LmlzQXJyYXkobGlzdCkpIHJldHVybiB7IGFkZDogW10sIGxvc3Q6IFtdLCByZW5hbWU6IFtdIH07CiAgICBjb25zdCB7IGFkZDogbGFzdEFkZCA9IFtdLCBsb3N0OiBsYXN0TG9zdCA9IFtdLCByZW5hbWU6IGxhc3RSZW5hbWUgPSBbXSB9ID0gbGFzdENoYW5nZSA/PyB7fTsKICAgIGNvbnN0IHNhbWVGb2xsb3dJdGVtID0gKHgsIHkpID0+IHguaWQgPT09IHkuaWQ7CiAgICBjb25zdCBnZXROYW1lID0geCA9PiB4Lm5hbWUucmVwbGFjZSgvQHxccz9cKC4qXCkvZywgJycpOwogICAgLy8g5YWI5qC55o2u5Y6f5pyJ5ZCN5Y2V5ZKM5pyq5o+Q5Lqk55qE5pu05pS55oGi5aSN5pu05pep55qE5ZCN5Y2VCiAgICBjb25zdCBvbGRMaXN0ID0gbGlzdAogICAgICAuZmlsdGVyKHggPT4gIWxhc3RBZGQuZmluZCh5ID0+IHNhbWVGb2xsb3dJdGVtKHgsIHkpKSkuY29uY2F0KGxhc3RMb3N0KQogICAgICAubWFwKHggPT4gKGxhc3RSZW5hbWUuZmluZChyID0+IHNhbWVGb2xsb3dJdGVtKHIub2xkLCB4KSkgfHwgeyBvbGQ6IHggfSkub2xkKTsKICAgIC8vIOeEtuWQjuWwhuaWsOeahOWQjeWNleS4juabtOaXqeeahOWQjeWNleavlOi+gwogICAgY29uc3QgYWRkID0gbmV3TGlzdC5maWx0ZXIoeCA9PiAhb2xkTGlzdC5maW5kKHkgPT4gc2FtZUZvbGxvd0l0ZW0oeSwgeCkpKTsKICAgIGNvbnN0IGxvc3QgPSBvbGRMaXN0LmZpbHRlcih5ID0+ICFuZXdMaXN0LmZpbmQoeCA9PiBzYW1lRm9sbG93SXRlbSh5LCB4KSkpOwogICAgY29uc3QgcmVuYW1lID0gb2xkTGlzdC5tYXAob2xkSXRlbSA9PiB7CiAgICAgIGlmIChvbGRJdGVtLnR5cGUgIT09ICd1c2VyJykgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IG5ld0l0ZW0gPSBuZXdMaXN0LmZpbmQobiA9PiBzYW1lRm9sbG93SXRlbShuLCBvbGRJdGVtKSk7CiAgICAgIGlmICghbmV3SXRlbSkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IG9sZE5hbWUgPSBnZXROYW1lKG9sZEl0ZW0pOwogICAgICBjb25zdCBuZXdOYW1lID0gZ2V0TmFtZShuZXdJdGVtKTsKICAgICAgaWYgKG9sZE5hbWUgPT09IG5ld05hbWUpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgbmV3SXRlbSwgewogICAgICAgIG9sZDogb2xkSXRlbSwKICAgICAgICBuZXc6IG5ld0l0ZW0sCiAgICAgIH0pOwogICAgfSkuZmlsdGVyKHYgPT4gdik7CiAgICByZXR1cm4geyBhZGQsIGxvc3QsIHJlbmFtZSB9OwogIH07CgogIC8vIOWOu+mZpOmHjeWkjeaVsOaNrgogIGNvbnN0IHJlbW92ZUR1cGxpY2F0ZSA9IGZ1bmN0aW9uIChsaXN0KSB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkobGlzdCkpIHJldHVybiBbXTsKICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0KCk7CiAgICByZXR1cm4gbGlzdC5maWx0ZXIoaXRlbSA9PiB7CiAgICAgIGlmIChzZWVuLmhhcyhpdGVtLmlkKSkgcmV0dXJuIGZhbHNlOwogICAgICBzZWVuLmFkZChpdGVtLmlkKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9OwoKICAvLyDop6blj5HliLfmlrDmtYHnqIvvvIzlpoLmnpzmraTml7blt7Lnu4/lrozmiJDliJnlvLrliLbph43mlrDlvIDlp4sKICBjb25zdCB1cGRhdGVGb2xsb3dMaXN0ID0gYXN5bmMgZnVuY3Rpb24gKCkgewogICAgcmVwb3J0VXBkYXRlU3RhdHVzKCdzdGFydGluZycpOwogICAgY29uc3QgeyBmZXRjaERhdGEsIGxhc3RMaXN0LCBsYXN0Q2hhbmdlIH0gPSBmb2xsb3dpbmdDb250ZXh0OwoKICAgIC8vIOWmguaenOi/nue7rSAxMCDliIbpkp/msqHmnInmm7TmlrDvvIzpgqPkuYjlj6/og73mmK/kuYvliY3otJ/otKPmm7TmlrDnmoTpgqPkuKrpobXpnaLooqvlhbPpl63miJbogIXlh7rplJnkuoYKICAgIGNvbnN0IHsgdGltZXN0YW1wLCBsb2NrIH0gPSBmZXRjaERhdGEuZ2V0Q29uZmlnKCk7CiAgICBpZiAodGltZXN0YW1wID4gRGF0ZS5ub3coKSAtIDYwMGUzICYmIGxvY2spIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKGZldGNoRGF0YS5nZXRDb25maWcoKS50aW1lc3RhbXAgPT09IHRpbWVzdGFtcCkgdXBkYXRlRm9sbG93TGlzdCgpOwogICAgICB9LCA2MDBlMyk7CiAgICAgIHJlcG9ydFVwZGF0ZVN0YXR1cygncGVuZGluZycpOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8g5aaC5p6c5LmL5YmN6I635Y+W5pWw5o2u5L2/55So55qE5b6u5Y2a54mI5pys5ZKM546w5Zyo5LiN5LiA5qC377yM6YKj5LmI5pWw5o2u6KaB5Lii5byDCiAgICBpZiAoZmV0Y2hEYXRhLmdldENvbmZpZygpLndlaWJvVmVyc2lvbiAhPT0geWF3Zi5XRUlCT19WRVJTSU9OKSB7CiAgICAgIGZldGNoRGF0YS5zZXRDb25maWcoe30pOwogICAgfQoKICAgIHRyeSB7CiAgICAgIGlmIChmZXRjaERhdGEuaXNPdXREYXRlZCgpKSB7CiAgICAgICAgZmV0Y2hEYXRhLnNldENvbmZpZyh7fSk7CiAgICAgIH0KICAgICAgY29uc3QgbG9jayA9IGZldGNoRGF0YS5nZXRMb2NrKCk7CiAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogc3RhcnQgZm9sbG93IGZldGNoaW5nJyk7CiAgICAgIC8vIOWmguaenOS5i+WJjeiOt+WPluWIsOS4gOWNiu+8jOmCo+S5iOWwsee7p+e7reS5i+WJjeeahOW3peS9nO+8jOWQpuWImeW8gOWni+aWsOW3peS9nAogICAgICBpZiAoIWZldGNoRGF0YS5nZXRDb25maWcoKS5hbGxQYWdlcykgewogICAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogZmV0Y2ggZmlyc3QgcGFnZScpOwogICAgICAgIGZldGNoRGF0YS5hc3NlcnRMb2NrKGxvY2spOwogICAgICAgIGF3YWl0IGZldGNoSW5pdGlhbGl6ZSgpOwogICAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogZmV0Y2ggZmlyc3QgZG9uZScpOwogICAgICB9CiAgICAgIHdoaWxlIChoYXNOZXh0UGFnZSgpKSB7CiAgICAgICAgcmVwb3J0VXBkYXRlU3RhdHVzKCdydW5uaW5nJyk7CiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDVlMykpOwogICAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogZmV0Y2ggbmV4dCBwYWdlJyk7CiAgICAgICAgZmV0Y2hEYXRhLmFzc2VydExvY2sobG9jayk7CiAgICAgICAgYXdhaXQgZmV0Y2hOZXh0KCk7CiAgICAgICAgdXRpbC5kZWJ1ZygnRmV0Y2ggRm9sbG93OiBmZXRjaCBuZXh0IGRvbmUnKTsKICAgICAgfQogICAgICBmZXRjaERhdGEuYXNzZXJ0TG9jayhsb2NrKTsKICAgICAgdXRpbC5kZWJ1ZygnRmV0Y2ggRm9sbG93OiBmZXRjaCBldmVyeXRoaW5nIGRvbmUnKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdXRpbC5kZWJ1ZyhlKTsKICAgICAgdXRpbC5kZWJ1ZygnRmV0Y2ggRm9sbG93OiBmZXRjaGluZyBmb2xsb3dpbmcgZmFpbGVkJyk7CiAgICAgIHJlcG9ydFVwZGF0ZVN0YXR1cygncnVubmluZ19mYWlsJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0cnkgewogICAgICByZXBvcnRVcGRhdGVTdGF0dXMoJ2NoZWNraW5nJyk7CiAgICAgIGNvbnN0IG5ld0xpc3QgPSByZW1vdmVEdXBsaWNhdGUoZmV0Y2hEYXRhLmdldENvbmZpZygpLmxpc3QpOwogICAgICBjb25zdCBvbGRMaXN0ID0gbGFzdExpc3QuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGNoYW5nZUxpc3QgPSBsYXN0Q2hhbmdlLmdldENvbmZpZygpID8/IHt9OwogICAgICBjb25zdCB7IGFkZCwgbG9zdCwgcmVuYW1lIH0gPSBjaGVja0xpc3REaWZmKG9sZExpc3Q/Lmxpc3QsIG5ld0xpc3QsIGNoYW5nZUxpc3QpOwoKICAgICAgY29uc3QgZmluaXNoVGltZSA9IERhdGUubm93KCk7CiAgICAgIGxhc3RMaXN0LnNldENvbmZpZyh7IHRpbWVzdGFtcDogZmluaXNoVGltZSwgbGlzdDogbmV3TGlzdCB9KTsKICAgICAgaWYgKGFkZC5sZW5ndGggfHwgbG9zdC5sZW5ndGggfHwgcmVuYW1lLmxlbmd0aCkgewogICAgICAgIGxhc3RDaGFuZ2Uuc2V0Q29uZmlnKHsgdGltZXN0YW1wOiBmaW5pc2hUaW1lLCBhZGQsIGxvc3QsIHJlbmFtZSB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsYXN0Q2hhbmdlLnNldENvbmZpZyhudWxsKTsKICAgICAgfQogICAgICBmZXRjaERhdGEuc2V0Q29uZmlnKHt9KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdXRpbC5kZWJ1ZygnRmV0Y2ggRm9sbG93OiBlcnJvciB3aGlsZSB1cGRhdGUgcmVzdWx0Jyk7CiAgICAgIHV0aWwuZGVidWcoZSk7CiAgICAgIHJlcG9ydFVwZGF0ZVN0YXR1cygnY2hlY2tpbmdfZmFpbCcpOwogICAgfQogICAgcmVwb3J0VXBkYXRlU3RhdHVzKCdpbmFjdGl2ZScpOwogIH07CgogIGNvbnN0IGNsZWFyRm9sbG93TGlzdCA9IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHsgZmV0Y2hEYXRhLCBsYXN0TGlzdCwgbGFzdENoYW5nZSB9ID0gZm9sbG93aW5nQ29udGV4dDsKICAgIGNvbnN0IHsgdGltZXN0YW1wLCBsb2NrIH0gPSBmZXRjaERhdGEuZ2V0Q29uZmlnKCkgPz8ge307CiAgICB1dGlsLmRlYnVnKCdGZXRjaCBGb2xsb3c6IGNsZWFyIGZldGNoaW5nIGRhdGEuJyk7CiAgICBpZiAodGltZXN0YW1wID4gRGF0ZS5ub3coKSAtIDYwMGUzICYmIGxvY2spIHsKICAgICAgdXRpbC5kZWJ1ZygnRmV0Y2ggRm9sbG93OiBGZXRjaGluZyBzZWVtcyBpbiBwcm9ncmVzcywgYW5kIHdvdWxkIGJyZWFrJyk7CiAgICB9CiAgICBmZXRjaERhdGEuc2V0Q29uZmlnKHt9KTsKICAgIGxhc3RMaXN0LnNldENvbmZpZyhudWxsKTsKICAgIGxhc3RDaGFuZ2Uuc2V0Q29uZmlnKG51bGwpOwogIH07CgogIGNvbnN0IGV4cG9ydEZvbGxvd0xpc3QgPSBhc3luYyBmdW5jdGlvbiAoeyB0aW1lc3RhbXAsIGxpc3QgfSkgewogICAgY29uc3QgY3N2SXRlbSA9IHN0cmluZyA9PiB7CiAgICAgIGlmICghL1siLFxzXS8udGVzdChzdHJpbmcpKSByZXR1cm4gc3RyaW5nOwogICAgICByZXR1cm4gJyInICsgc3RyaW5nLnJlcGxhY2UoLyIvZywgJyIiJykgKyAnIic7CiAgICB9OwogICAgLy8g6L+Z6YeM5oiR5Lus55So5LiKIEJPTSDlj6/ku6Xojrflvpfmm7Tlpb3nmoTlhbzlrrnmgKcKICAgIC8vIOWcqOWJjemdouaUvuS4gOWIl+W6j+WPt++8jOi/meagt+WNs+S+v+S4jeiDveWkhOeQhiBCT00g77yM5Lmf5Y+v5Lul6Lqy5byA5pyA5YmN6Z2i5LiA6KGM55qE5bqP5pWw77yM5LiN5Lya5Ye65LuA5LmI6Zeu6aKYCiAgICBjb25zdCBjb250ZW50ID0gJ1x1ZmVmZiMsbmFtZSxob21lcGFnZSxhdmF0YXJcclxuJyArIGxpc3QubWFwKChpdGVtLCBpbmRleCkgPT4gewogICAgICBjb25zdCBuYW1lID0gY3N2SXRlbShpdGVtLmRlc2NyaXB0aW9uKTsKICAgICAgY29uc3QgaG9tZXBhZ2UgPSBjc3ZJdGVtKG5ldyBVUkwoaXRlbS51cmwsICdodHRwczovL3dlaWJvLmNvbScpLmhyZWYpOwogICAgICBjb25zdCBhdmF0YXIgPSBjc3ZJdGVtKG5ldyBVUkwoaXRlbS5hdmF0YXIsICdodHRwczovL3dlaWJvLmNvbScpLmhyZWYpOwogICAgICByZXR1cm4gW2luZGV4ICsgMSwgbmFtZSwgaG9tZXBhZ2UsIGF2YXRhcl0uam9pbignLCcpOwogICAgfSkuam9pbignXHJcbicpICsgJ1xyXG4nOyAvLyBDUkxGIOaNouihjOespuaUr+aMgeaViOaenOacgOWlve+8jOiAjOS4lOS5n+abtOWQiOS5juinhOiMgwogICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9jc3YnIH0pOwogICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bLV18VC4qL2csICcnKTsKICAgIGNvbnN0IGZpbGVuYW1lID0gZG93bmxvYWQuZmlsZW5hbWUoJ2ZvbGxvd2luZy0nICsgaW5pdC5wYWdlLiRDT05GSUcudWlkICsgJy0nICsgZGF0ZSArICcuY3N2Jyk7CiAgICBkb3dubG9hZC5ibG9iKHsgYmxvYiwgZmlsZW5hbWUgfSk7CiAgfTsKCiAgY29uc3QgZm9ybWF0TGFzdFRpbWUgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7CiAgICBpZiAoIXRpbWVzdGFtcCkgcmV0dXJuIGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nTmV2ZXI7CiAgICBjb25zdCBvcHRpb24gPSB7IHllYXI6ICdudW1lcmljJywgbW9udGg6ICdsb25nJywgZGF5OiAnbnVtZXJpYycsIGhvdXI6ICdudW1lcmljJywgbWludXRlOiAnbnVtZXJpYycsIHNlY29uZDogJ251bWVyaWMnIH07CiAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChpMThuLmxhbmd1YWdlQ29kZSwgb3B0aW9uKTsKICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0KG5ldyBEYXRlKHRpbWVzdGFtcCkpOwogIH07CgogIGkxOG4uZm9sbG93aW5nR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn5YWz5rOo566h55CGJywKICAgIHR3OiAn6Zec5rOo566h55CGJywKICAgIGVuOiAnRm9sbG93aW5nJywKICB9OwoKICBjb25zdCBmb2xsb3dpbmcgPSBmaWx0ZXIuZm9sbG93aW5nID0ge307CiAgZm9sbG93aW5nLmZvbGxvd2luZyA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBmaWx0ZXIuZmlsdGVyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZm9sbG93aW5nR3JvdXBUaXRsZSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBhdXRvQ2hlY2tGb2xsb3dpbmc6IHsKICAgICAgY246ICfoh6rliqjmo4Dmn6XlhbPms6jliJfooajlubbmj5DnpLrlj5jljJZ8e3tmcmVxdWVuY3l9fXt7aX19fHx7e2J1dHRvbnN9fXx8e3tmZXRjaGluZ319JywKICAgICAgdHc6ICfoh6rli5XmqqLmn6Xpl5zms6jmuIXllq7kuKbmj5DnpLrororljJZ8e3tmcmVxdWVuY3l9fXt7aX19fHx7e2J1dHRvbnN9fXx8e3tmZXRjaGluZ319JywKICAgICAgZW46ICdBdXRvbWF0aWNhbGx5IGNoZWNrcyBhbmQgcHJvbXB0IGFueSBjaGFuZ2VzIGFib3V0IGZvbGxvd2luZyBsaXN0IHwge3tmcmVxdWVuY3l9fXt7aX19fHx7e2J1dHRvbnN9fXx8e3tmZXRjaGluZ319JywKICAgIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdEZXRhaWw6IHsKICAgICAgY246ICflvIDlkK/mnKzlip/og73lkI7ohJrmnKzkvJrmr4/pmpTkuIDmrrXml7bpl7TvvIzmo4Dmn6XmgqjnmoTlhbPms6jliJfooajvvIzlubblkozkuIrkuIDmrKHlvpfliLDnmoTnu5Pmnpzmr5TovoPvvIzlsIbkuI3lkIzkuYvlpITlsZXnpLrlh7rmnaXjgILohJrmnKzmo4Dmn6XlhbPms6jliJfooajlj6rog73lg4/mgqjlnKjnvZHpobXkuK3mo4Dmn6XlhbPms6jliJfooajkuIDmoLfvvIzkuIDpobXkuIDpobXnmoTnv7vnnIvvvIzlm6DmraTmo4Dmn6Xlj6/og73pnIDopoHovoPplb/nmoTml7bpl7TvvIzlpoLmnpzmgqjlhbPms6jkuoblpKfph4/nmoTluJDlj7fvvIzor7fogIPomZHpmY3kvY7oh6rliqjmo4Dmn6XnmoTpopHnjofjgIInLAogICAgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZzE6IHsgY246ICfmr4/lpKknLCB0dzogJ+avj+WkqScsIGVuOiAnZXZlcnkgZGF5JyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nMzogeyBjbjogJ+avj+S4ieWkqScsIHR3OiAn5q+P5LiJ5aSpJywgZW46ICdldmVyeSAzIGRheXMnIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmc3OiB7IGNuOiAn5q+P5ZGoJywgdHc6ICfmr4/pgLEnLCBlbjogJ2V2ZXJ5IHdlZWsnIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdMYXN0VGltZTogeyBjbjogJ+acrOWcsOaVsOaNruabtOaWsOaXtumXtO+8micsIHR3OiAn5pys5qmf6LOH5paZ5pu05paw5pmC6ZaT77yaJywgZW46ICdMYXN0IFVwZGF0ZSBUaW1lOiAnIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdOZXZlcjogeyBjbjogJ+aaguaXoOaVsOaNricsIHR3OiAn5pqr54Sh6LOH5paZJywgZW46ICdOZXZlcicgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZ0Rvd25sb2FkOiB7IGNuOiAn5a+85Ye65YWz5rOo5YiX6KGoJywgdHc6ICfljK/lh7rpl5zms6jmuIXllq4nLCBlbjogJ0V4cG9ydCBGb2xsb3cgTGlzdCcgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZ0NsZWFuOiB7IGNuOiAn5riF6Zmk5pys5Zyw5pWw5o2uJywgdHc6ICfmuIXpmaTmnKzmqZ/os4fmlpknLCBlbjogJ0NsZWFyIERhdGEnIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdOb3c6IHsgY246ICfnq4vljbPmm7TmlrDmlbDmja4nLCB0dzogJ+eri+WNs+abtOaWsOizh+aWmScsIGVuOiAnVXBkYXRlIE5vdycgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZ1J1bm5pbmc6IHsgY246ICfvvIjmraPlnKjmm7TmlrDvvJp7MX3vvIknLCBlbjogJyhVcGRhdGluZzogezF9KScgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZ0RpYWxvZ1RpdGxlOiB7IGNuOiAn5YWz5rOo5YiX6KGo5Y+Y5YyWIC0g6I2v5pa5IChZQVdGKScsIHR3OiAn6Zec5rOo5riF5Zau6K6K5YyWIC0g6Jel5pa5IChZQVdGKScsIGVuOiAnRm9sbG93aW5nIExpc3QgQ2hhbmdlcyAtIFlBV0YnIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdUaXA6IHsKICAgICAgY246ICfmgqjnmoTlhbPms6jliJfooajoh6rku47kuIrmrKHmo4Dmn6Xlubbnoa7orqToh7Pku4rlj5HnlJ/kuoblpoLkuIvlj5jljJbvvIzor7fmgqjlpI3mn6Xlubbnoa7orqTvvJonLAogICAgICB0dzogJ+aCqOeahOmXnOazqOa4heWWruiHquW+nuS4iuasoeaqouafpeS4pueiuuiqjeiHs+S7iueZvOeUn+S6huWmguS4i+iuiuWMlu+8jOiri+aCqOikh+afpeS4pueiuuiqje+8micsCiAgICAgIGVuOiAnWW91ciBmb2xsb3dpbmcgbGlzdCBoYWQgYmVlbiBjaGFuZ2VkIHNpbmNlIGxhc3QgY2hlY2tpbmcsIHBsZWFzZSByZXZpZXcgYW5kIGNvbmZpcm06ICcsCiAgICB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nQWRkOiB7IGNuOiAn5paw5aKe5aaC5LiL5YWz5rOoJywgdHc6ICfmlrDlop7lpoLkuIvpl5zms6gnLCBlbjogJ1JlY2VudCBGb2xsb3dpbmcnIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdMb3N0OiB7IGNuOiAn5YeP5bCR5aaC5LiL5YWz5rOoJywgdHc6ICfmuJvlsJHlpoLkuIvpl5zms6gnLCBlbjogJ1JlY2VudCBVbmZvbGxvd2VkJyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nUmVuYW1lOiB7IGNuOiAn5aaC5LiL5YWz5rOo5L+u5pS55LqG5pi156ewJywgdHc6ICflpoLkuIvpl5zms6jkv67mlLnkuobmmrHnqLEnLCBlbjogJ1JlY2VudCBSZW5hbWVkJyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nQ29uZmlybWVkOiB7IGNuOiAn5bey56Gu6K6kJywgdHc6ICflt7Lnorroqo0nLCBlbjogJ0NvbmZpcm1lZCcgfSwKICAgIGNoZWNraW5nUHJvZ3Jlc3M6IHsKICAgICAgY246ICfjgJB7c3RhdHVzfeOAkXtjdXJyZW50fS97dG90YWx96aG177yMe3Jlc3VsdH3lhbPms6gnLAogICAgICB0dzogJ+OAkHtzdGF0dXN944CRe2N1cnJlbnR9L3t0b3RhbH3poIHvvIx7cmVzdWx0femXnOazqCcsCiAgICAgIGVuOiAnW3tzdGF0dXN9XSB7Y3VycmVudH0ve3RvdGFsfSBwYWdlc++8jHtyZXN1bHR9IGZvbGxvd2luZ3MnLAogICAgfSwKICAgIGNoZWNraW5nUHJvZ3Jlc3NJbmFjdGl2ZTogeyBjbjogJ+WwmuacquWQr+WKqCcsIHR3OiAn5bCa5pyq5ZWf5YuVJywgZW46ICdJbmFjdGl2ZScgfSwKICAgIGNoZWNraW5nUHJvZ3Jlc3NXYWl0aW5nOiB7IGNuOiAn562J5b6F5byA5aeLJywgdHc6ICfnrYnlvoXplovlp4snLCBlbjogJ1dhaXQgdG8gU3RhcnQnIH0sCiAgICBjaGVja2luZ1Byb2dyZXNzU3RhcnRpbmc6IHsgY246ICfmraPlnKjliJ3lp4vljJYnLCB0dzogJ+ato+WcqOWIneacn+WMlicsIGVuOiAnSW5pdGlhbGl6aW5nJyB9LAogICAgY2hlY2tpbmdQcm9ncmVzc1BlbmRpbmc6IHsgY246ICfmraPnlLHlhbbku5bpobXpnaLotJ/otKPmm7TmlrAnLCB0dzogJ+ato+eUseWFtuS7lumggemdouiyoOiyrOabtOaWsCcsIGVuOiAnVXBkYXRpbmcgYnkgT3RoZXIgUGFnZXMnIH0sCiAgICBjaGVja2luZ1Byb2dyZXNzUnVubmluZzogeyBjbjogJ+ato+WcqOiOt+WPluaVsOaNricsIHR3OiAn5q2j5Zyo5pO35Y+W6LOH5paZJywgZW46ICdGZXRjaGluZycgfSwKICAgIGNoZWNraW5nUHJvZ3Jlc3NDaGVja2luZzogeyBjbjogJ+ato+WcqOavlOWvuee7k+aenCcsIHR3OiAn5q2j5Zyo5q+U5bCN57WQ5p6cJywgZW46ICdDb21wYXJpbmcgTGlzdCcgfSwKICAgIGNoZWNraW5nUHJvZ3Jlc3NSdW5uaW5nRmFpbDogeyBjbjogJ+aVsOaNruiOt+WPluWHuumUmScsIHR3OiAn6LOH5paZ5pO35Y+W5Ye66YyvJywgZW46ICdFcnJvciBXaGlsZSBGZXRjaGluZycgfSwKICAgIGNoZWNraW5nUHJvZ3Jlc3NDaGVja2luZ0ZhaWw6IHsgY246ICfnu5Pmnpzmr5Tlr7nlh7rplJknLCB0dzogJ+e1kOaenOavlOWwjeWHuumMrycsIGVuOiAnRXJyb3IgV2hpbGUgQ29tcGFyaW5nJyB9LAogIH0pOwoKICAvKioKICAgKiBAdHlwZWRlZiB7eyBpZDogc3RyaW5nLCB0eXBlOiAndXNlcid8J3N0b2NrJ3wndG9waWMnfCd1bmtub3duJywgdXJsOiBzdHJpbmcsIGF2YXRhcjogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcgfX0gRm9sbG93SW5mbwogICAqIEBwYXJhbSB7eyB0aW1lc3RhbXA6IG51bWJlciwgYWRkOiBGb2xsb3dJbmZvW10sIGxvc3Q6IEZvbGxvd0luZm9bXSB9fQogICAqLwogIGNvbnN0IHNob3dDaGFuZ2VMaXN0ID0gZnVuY3Rpb24gKHsgdGltZXN0YW1wLCBhZGQgPSBbXSwgbG9zdCA9IFtdLCByZW5hbWUgPSBbXSB9KSB7CiAgICBsZXQgcmVzb2x2ZTsKICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyID0+IHsgcmVzb2x2ZSA9IHI7IH0pOwogICAgY29uc3QgZm9sbG93Q2hhbmdlRGlhbG9nID0gdWkuZGlhbG9nKHsKICAgICAgaWQ6ICd5YXdmLWZvbGxvdy1jaGFuZ2UnLAogICAgICB0aXRsZTogaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdEaWFsb2dUaXRsZSwKICAgICAgLyoqIEBwYXJhbSB7RWxlbWVudH0gY29udGFpbmVyICovCiAgICAgIHJlbmRlcihjb250YWluZXIsIHsgb2s6IG9rQnV0dG9uIH0pIHsKICAgICAgICBva0J1dHRvbi50ZXh0Q29udGVudCA9IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nQ29uZmlybWVkOwogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctbm90aWNlLWhlYWRlciI+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctbm90aWNlLWJvZHkiPjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLWFkZCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij48ZGl2IGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1hZGQtdGl0bGUiPjwvZGl2PjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLWFkZC1pdGVtcyI+PHVsIGNsYXNzPSJ5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWxpc3QgeWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIj48L3VsPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLWxvc3QiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PGRpdiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctbG9zdC10aXRsZSI+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctbG9zdC1pdGVtcyI+PHVsIGNsYXNzPSJ5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWxpc3QgeWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIj48L3VsPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLXJlbmFtZSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij48ZGl2IGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1yZW5hbWUtdGl0bGUiPjwvZGl2PjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLXJlbmFtZS1pdGVtcyI+PHVsIGNsYXNzPSJ5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWxpc3QgeWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIj48L3VsPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLW5vdGljZS1mb290ZXIiPjxzcGFuIGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1ub3RpY2UtbGFzdC10aW1lLXRleHQiPjwvc3Bhbj48c3BhbiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctbm90aWNlLWxhc3QtdGltZSI+PC9zcGFuPjwvZGl2Pic7CiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1ub3RpY2UtaGVhZGVyJykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ1RpcDsKICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLWFkZC10aXRsZScpLnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdBZGQ7CiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1sb3N0LXRpdGxlJykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ0xvc3Q7CiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1yZW5hbWUtdGl0bGUnKS50ZXh0Q29udGVudCA9IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nUmVuYW1lOwogICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctbm90aWNlLWxhc3QtdGltZS10ZXh0JykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ0xhc3RUaW1lOwogICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctbm90aWNlLWxhc3QtdGltZScpLnRleHRDb250ZW50ID0gZm9ybWF0TGFzdFRpbWUodGltZXN0YW1wKTsKICAgICAgICBbCiAgICAgICAgICB7IGFyZWE6IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctYWRkJyksIGxpc3Q6IGFkZCB9LAogICAgICAgICAgeyBhcmVhOiBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLWxvc3QnKSwgbGlzdDogbG9zdCB9LAogICAgICAgICAgeyBhcmVhOiBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLXJlbmFtZScpLCBsaXN0OiByZW5hbWUgfSwKICAgICAgICBdLmZvckVhY2goKHsgYXJlYSwgbGlzdCB9KSA9PiB7CiAgICAgICAgICBpZiAoIWxpc3QgfHwgIUFycmF5LmlzQXJyYXkobGlzdCkgfHwgIWxpc3QubGVuZ3RoKSByZXR1cm47CiAgICAgICAgICBhcmVhLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgIGNvbnN0IHVsID0gYXJlYS5xdWVyeVNlbGVjdG9yKCd1bCcpOwogICAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPGxpIGNsYXNzPSJ5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0gV19idG5fYiBXX2J0bl90YWciPjxkaXYgY2xhc3M9Inlhd2YtY29uZmlnLWNvbGxlY3Rpb24taXRlbS1jb250ZW50Ij48ZGl2IGNsYXNzPSJ5YXdmLWNvbmZpZy11c2VyLWl0ZW0iPjxkaXYgY2xhc3M9Inlhd2YtY29uZmlnLXVzZXItYXZhdGFyIj48aW1nIGNsYXNzPSJ5YXdmLWNvbmZpZy11c2VyLWF2YXRhci1pbWciIC8+PC9kaXY+PGRpdj48YSBjbGFzcz0ieWF3Zi1jb25maWctdXNlci1uYW1lIiB0YXJnZXQ9Il9ibGFuayI+PC9hPjwvZGl2PjxkaXY+PHNwYW4gY2xhc3M9Inlhd2YtY29uZmlnLXVzZXItZGV0YWlsIFNfdHh0MiI+PC9zcGFuPjwvZGl2PjwvZGl2PjwvZGl2PjwvbGk+JzsKICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3VzZXInKSB3cmFwLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNvbmZpZy11c2VyLWl0ZW0nKS5zZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJywgYGlkPSR7aXRlbS51c2VyfWApOwogICAgICAgICAgICB3cmFwLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnNldEF0dHJpYnV0ZSgnc3JjJywgaXRlbS5hdmF0YXIpOwogICAgICAgICAgICBjb25zdCBuYW1lID0gd3JhcC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctdXNlci1uYW1lJyk7CiAgICAgICAgICAgIG5hbWUudGV4dENvbnRlbnQgPSBpdGVtLmRlc2NyaXB0aW9uOwogICAgICAgICAgICBuYW1lLmhyZWYgPSBpdGVtLnVybDsKICAgICAgICAgICAgaWYgKGl0ZW0ub2xkKSB7CiAgICAgICAgICAgICAgY29uc3QgZGV0YWlsID0gd3JhcC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctdXNlci1kZXRhaWwnKTsKICAgICAgICAgICAgICBkZXRhaWwudGl0bGUgPSBkZXRhaWwudGV4dENvbnRlbnQgPSAnQCcgKyBpdGVtLm9sZC5uYW1lLnJlcGxhY2UoL0B8XHMqXCguKlwpL2csICcnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBsaSA9IHdyYXAuZmlyc3RDaGlsZDsKICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGJ1dHRvbjogewogICAgICAgIG9rKCkgeyByZXNvbHZlKHRydWUpOyBmb2xsb3dDaGFuZ2VEaWFsb2cuaGlkZSgpOyB9LAogICAgICAgIGNhbmNlbCgpIHsgcmVzb2x2ZShudWxsKTsgZm9sbG93Q2hhbmdlRGlhbG9nLmhpZGUoKTsgfSwKICAgICAgfSwKICAgIH0pOwogICAgZm9sbG93Q2hhbmdlRGlhbG9nLnNob3coKTsKICAgIHJldHVybiBwcm9taXNlOwogIH07CgogIGZvbGxvd2luZy5hdXRvQ2hlY2tGb2xsb3dpbmcgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZpbHRlcl9mb2xsb3dfY2hlY2snLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZm9sbG93aW5nLmZvbGxvd2luZywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmF1dG9DaGVja0ZvbGxvd2luZywKICAgIHJlZjogewogICAgICBmcmVxdWVuY3k6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBpbml0aWFsOiAzICogODY0MDBlMywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdGV4dDogKCkgPT4gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmcxLCB2YWx1ZTogMSAqIDg2NDAwZTMgfSwKICAgICAgICAgIHsgdGV4dDogKCkgPT4gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmczLCB2YWx1ZTogMyAqIDg2NDAwZTMgfSwKICAgICAgICAgIHsgdGV4dDogKCkgPT4gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmc3LCB2YWx1ZTogNyAqIDg2NDAwZTMgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nRGV0YWlsIH0sCiAgICAgIGZldGNoaW5nOiB7CiAgICAgICAgcHJlcGFyQ29uZmlnKCkgewogICAgICAgICAgY29uc3QgeyBmZXRjaERhdGEgfSA9IGZvbGxvd2luZ0NvbnRleHQ7CiAgICAgICAgICB0aGlzLmNvbmZpZyA9IGZldGNoRGF0YS5wcmVwYXJDb25maWcoKTsKICAgICAgICAgIHJldHVybiBmZXRjaERhdGE7CiAgICAgICAgfSwKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICB0aGlzLmdldENvbmZpZygpOwogICAgICAgICAgY29uc3QgYnV0dG9uQXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgIGJ1dHRvbkFyZWEuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pdGVtJywgdGhpcy5jb25maWdJZCk7CiAgICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICAgIGJ1dHRvbkFyZWEuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1jaGVja2luZyI+PC9zcGFuPjxhIGhyZWY9ImphdmFzY3JpcHQ6OyIgY2xhc3M9IldfYnRuX2IgeWF3Zi1mb2xsb3dpbmctY2hlY2stbm93Ij48c3BhbiBjbGFzcz0iV19mMTQiPjwvc3Bhbj48L2E+JzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJ1dHRvbkFyZWEuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1jaGVja2luZyI+PC9zcGFuPjxidXR0b24gY2xhc3M9Indvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWZsYXQgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tcyB3b28tYnV0dG9uLXJvdW5kIHdvby1kaWFsb2ctYnRuIHlhd2YtZm9sbG93aW5nLWNoZWNrLW5vdyI+PHNwYW4gY2xhc3M9Indvby1idXR0b24td3JhcCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24tY29udGVudCI+PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj4nOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgY2hlY2tOb3dCdXR0b24gPSBidXR0b25BcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1jaGVjay1ub3cnKTsKICAgICAgICAgIGNoZWNrTm93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgICB1cGRhdGVGb2xsb3dMaXN0KCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgICAgY2hlY2tOb3dCdXR0b24ucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdOb3c7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjaGVja05vd0J1dHRvbi5xdWVyeVNlbGVjdG9yKCcud29vLWJ1dHRvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ05vdzsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMucmVuZGVyVmFsdWUoYnV0dG9uQXJlYSk7CiAgICAgICAgICByZXR1cm4gYnV0dG9uQXJlYTsKICAgICAgICB9LAogICAgICAgIHJlbmRlclZhbHVlKGJ1dHRvbkFyZWEpIHsKICAgICAgICAgIGNvbnN0IGZldGNoRGF0YSA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgICBjb25zdCBjaGVja2luZ1RleHQgPSBidXR0b25BcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1jaGVja2luZycpOwogICAgICAgICAgY29uc3QgY2hlY2tOb3dCdXR0b24gPSBidXR0b25BcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1jaGVjay1ub3cnKTsKICAgICAgICAgIGlmIChmZXRjaERhdGEgJiYgZmV0Y2hEYXRhLmxvY2spIHsKICAgICAgICAgICAgY2hlY2tOb3dCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgY2hlY2tpbmdUZXh0LnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSB7CiAgICAgICAgICAgICAgc3RhdHVzOiB7CiAgICAgICAgICAgICAgICB3YWl0aW5nOiBpMThuLmNoZWNraW5nUHJvZ3Jlc3NXYWl0aW5nLAogICAgICAgICAgICAgICAgc3RhcnRpbmc6IGkxOG4uY2hlY2tpbmdQcm9ncmVzc1N0YXJ0aW5nLAogICAgICAgICAgICAgICAgaW5hY3RpdmU6IGkxOG4uY2hlY2tpbmdQcm9ncmVzc0luYWN0aXZlLAogICAgICAgICAgICAgICAgcGVuZGluZzogaTE4bi5jaGVja2luZ1Byb2dyZXNzUGVuZGluZywKICAgICAgICAgICAgICAgIHJ1bm5pbmc6IGkxOG4uY2hlY2tpbmdQcm9ncmVzc1J1bm5pbmcsCiAgICAgICAgICAgICAgICBydW5uaW5nX2ZhaWw6IGkxOG4uY2hlY2tpbmdQcm9ncmVzc1J1bm5pbmdGYWlsLAogICAgICAgICAgICAgICAgY2hlY2tpbmc6IGkxOG4uY2hlY2tpbmdQcm9ncmVzc0NoZWNraW5nLAogICAgICAgICAgICAgICAgY2hlY2tpbmdfZmFpbDogaTE4bi5jaGVja2luZ1Byb2dyZXNzQ2hlY2tpbmdGYWlsLAogICAgICAgICAgICAgIH1bdXBkYXRlU3RhdHVzLnN0YXR1c10sCiAgICAgICAgICAgICAgdG90YWw6IHVwZGF0ZVN0YXR1cy50b3RhbCwKICAgICAgICAgICAgICBjdXJyZW50OiB1cGRhdGVTdGF0dXMuY3VycmVudCwKICAgICAgICAgICAgICByZXN1bHQ6IHVwZGF0ZVN0YXR1cy5yZXN1bHQsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHN0YXR1c1RleHQgPSBpMThuLmNoZWNraW5nUHJvZ3Jlc3MucmVwbGFjZSgvXHsoXHcrKVx9L2csIChfLCB3KSA9PiBwcm9ncmVzc1t3XSk7CiAgICAgICAgICAgIGNoZWNraW5nVGV4dC50ZXh0Q29udGVudCA9IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nUnVubmluZy5yZXBsYWNlKC9cezFcfS8sICgpID0+IHN0YXR1c1RleHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hlY2tpbmdUZXh0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGNoZWNrTm93QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICB9LAogICAgICBidXR0b25zOiB7CiAgICAgICAgcHJlcGFyQ29uZmlnKCkgewogICAgICAgICAgY29uc3QgeyBsYXN0TGlzdCB9ID0gZm9sbG93aW5nQ29udGV4dDsKICAgICAgICAgIHRoaXMuY29uZmlnID0gbGFzdExpc3QucHJlcGFyQ29uZmlnKCk7CiAgICAgICAgICByZXR1cm4gbGFzdExpc3Q7CiAgICAgICAgfSwKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCBidXR0b25BcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgYnV0dG9uQXJlYS5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWl0ZW0nLCB0aGlzLmNvbmZpZ0lkKTsKICAgICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgICAgYnV0dG9uQXJlYS5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9Inlhd2YtZm9sbG93aW5nLWxhc3QtdGV4dCI+PC9zcGFuPjxzcGFuIGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1sYXN0LXRpbWUiPjwvc3Bhbj48YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJXX2J0bl9iIHlhd2YtZm9sbG93aW5nLWV4cG9ydCIgc3R5bGU9Im1hcmdpbi1sZWZ0OjFlbTsiPjxzcGFuIGNsYXNzPSJXX2YxNCI+PC9zcGFuPjwvYT48YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJXX2J0bl9iIHlhd2YtZm9sbG93aW5nLWNsZWFyIiBzdHlsZT0ibWFyZ2luLWxlZnQ6MWVtOyI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9hPic7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBidXR0b25BcmVhLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctbGFzdC10ZXh0Ij48L3NwYW4+PHNwYW4gY2xhc3M9Inlhd2YtZm9sbG93aW5nLWxhc3QtdGltZSI+PC9zcGFuPjxidXR0b24gY2xhc3M9Indvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWZsYXQgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tcyB3b28tYnV0dG9uLXJvdW5kIHdvby1kaWFsb2ctYnRuIHlhd2YtZm9sbG93aW5nLWV4cG9ydCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24td3JhcCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24tY29udGVudCI+PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1mbGF0IHdvby1idXR0b24tcHJpbWFyeSB3b28tYnV0dG9uLXMgd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLWZvbGxvd2luZy1jbGVhciI+PHNwYW4gY2xhc3M9Indvby1idXR0b24td3JhcCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24tY29udGVudCI+PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj4nOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgbGFzdFRpbWVUZXh0ID0gYnV0dG9uQXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctbGFzdC10ZXh0Jyk7CiAgICAgICAgICBjb25zdCBsYXN0VGltZSA9IGJ1dHRvbkFyZWEucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLWxhc3QtdGltZScpOwogICAgICAgICAgY29uc3QgZXhwb3J0QnV0dG9uID0gYnV0dG9uQXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctZXhwb3J0Jyk7CiAgICAgICAgICBjb25zdCBjbGVhckZvbGxvd2luZyA9IGJ1dHRvbkFyZWEucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLWNsZWFyJyk7CiAgICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICAgIGV4cG9ydEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ0Rvd25sb2FkOwogICAgICAgICAgICBjbGVhckZvbGxvd2luZy5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ0NsZWFuOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZXhwb3J0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy53b28tYnV0dG9uLWNvbnRlbnQnKS50ZXh0Q29udGVudCA9IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nRG93bmxvYWQ7CiAgICAgICAgICAgIGNsZWFyRm9sbG93aW5nLnF1ZXJ5U2VsZWN0b3IoJy53b28tYnV0dG9uLWNvbnRlbnQnKS50ZXh0Q29udGVudCA9IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nQ2xlYW47CiAgICAgICAgICB9CiAgICAgICAgICBleHBvcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgICAgIGV4cG9ydEZvbGxvd0xpc3QodGhpcy5nZXRDb25maWcoKSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGNsZWFyRm9sbG93aW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgICBjbGVhckZvbGxvd0xpc3QoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgbGFzdFRpbWVUZXh0LnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdMYXN0VGltZTsKICAgICAgICAgIGNvbnN0IGxhc3RMaXN0ID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgICAgIGxhc3RUaW1lLnRleHRDb250ZW50ID0gZm9ybWF0TGFzdFRpbWUobGFzdExpc3QgJiYgbGFzdExpc3QudGltZXN0YW1wKTsKICAgICAgICAgIGlmICghbGFzdExpc3QgfHwgIWxhc3RMaXN0LnRpbWVzdGFtcCkgewogICAgICAgICAgICBleHBvcnRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgY2xlYXJGb2xsb3dpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBidXR0b25BcmVhOwogICAgICAgIH0sCiAgICAgICAgcmVuZGVyVmFsdWUoYnV0dG9uQXJlYSkgewogICAgICAgICAgY29uc3QgbGFzdExpc3QgPSB0aGlzLmdldENvbmZpZygpOwogICAgICAgICAgY29uc3QgbGFzdFRpbWUgPSBidXR0b25BcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1sYXN0LXRpbWUnKTsKICAgICAgICAgIGNvbnN0IGV4cG9ydEJ1dHRvbiA9IGJ1dHRvbkFyZWEucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLWV4cG9ydCcpOwogICAgICAgICAgY29uc3QgY2xlYXJGb2xsb3dpbmcgPSBidXR0b25BcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1jbGVhcicpOwogICAgICAgICAgbGFzdFRpbWUudGV4dENvbnRlbnQgPSBmb3JtYXRMYXN0VGltZShsYXN0TGlzdCAmJiBsYXN0TGlzdC50aW1lc3RhbXApOwogICAgICAgICAgaWYgKCFsYXN0TGlzdCB8fCAhbGFzdExpc3QudGltZXN0YW1wKSB7CiAgICAgICAgICAgIGV4cG9ydEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBjbGVhckZvbGxvd2luZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZXhwb3J0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgICAgY2xlYXJGb2xsb3dpbmcuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgZW5hYmxlZCA9IHRoaXMuaXNFbmFibGVkKCk7CiAgICAgIGNvbnN0IGZyZXF1ZW5jeSA9IHRoaXMucmVmLmZyZXF1ZW5jeS5nZXRDb25maWcoKTsKICAgICAgY29uc3QgeyBmZXRjaERhdGEsIGxhc3RMaXN0LCBsYXN0Q2hhbmdlIH0gPSBmb2xsb3dpbmdDb250ZXh0OwogICAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2U7CiAgICAgIGNvbnN0IGZldGNoQ29udGV4dCA9IGZldGNoRGF0YS5nZXRDb25maWcoKTsKICAgICAgY29uc3QgbGlzdCA9IGxhc3RMaXN0LmdldENvbmZpZygpOwogICAgICBpZiAoZmV0Y2hDb250ZXh0LmxvY2spIHNob3VsZFVwZGF0ZSA9IHRydWU7CiAgICAgIGlmIChlbmFibGVkICYmICFsaXN0Py5saXN0KSBzaG91bGRVcGRhdGUgPSB0cnVlOwogICAgICBpZiAoZW5hYmxlZCAmJiBsaXN0ICYmIGxpc3QudGltZXN0YW1wIDwgRGF0ZS5ub3coKSAtIGZyZXF1ZW5jeSkgc2hvdWxkVXBkYXRlID0gdHJ1ZTsKICAgICAgaWYgKHNob3VsZFVwZGF0ZSkgewogICAgICAgIHJlcG9ydFVwZGF0ZVN0YXR1cygnd2FpdGluZycpOwogICAgICAgIHNldFRpbWVvdXQodXBkYXRlRm9sbG93TGlzdCwgMTBlMyk7CiAgICAgIH0KICAgICAgY29uc3QgY2hhbmdlID0gbGFzdENoYW5nZS5nZXRDb25maWcoKTsKICAgICAgaWYgKGNoYW5nZT8udGltZXN0YW1wKSB7CiAgICAgICAgaWYgKGluaXQucGFnZS50eXBlKCkgPT09ICdzZWFyY2gnKSByZXR1cm47CiAgICAgICAgc2hvd0NoYW5nZUxpc3QoY2hhbmdlKS50aGVuKGNvbmZpcm0gPT4gY29uZmlybSAmJiBsYXN0Q2hhbmdlLnNldENvbmZpZyhudWxsKSk7CiAgICAgIH0KICAgIH0sCiAgfSk7CgogIGNzcy5hcHBlbmQoYAoueWF3Zi1XQlY2IC55YXdmLWZvbGxvd2luZy1hZGQtdGl0bGUsCi55YXdmLVdCVjYgLnlhd2YtZm9sbG93aW5nLWxvc3QtdGl0bGUsCi55YXdmLVdCVjYgLnlhd2YtZm9sbG93aW5nLXJlbmFtZS10aXRsZSB7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW46IDEwcHggMCA1cHg7IH0gCi55YXdmLVdCVjYgLnlhd2YtZm9sbG93aW5nLW5vdGljZS1oZWFkZXIgeyBwYWRkaW5nOiAyMHB4OyB9Ci55YXdmLVdCVjYgLnlhd2YtZm9sbG93aW5nLW5vdGljZS1ib2R5IHsgcGFkZGluZzogMCAyMHB4OyB3aWR0aDogNjAwcHg7IG1heC1oZWlnaHQ6IDMyMHB4OyBvdmVyZmxvdzogYXV0bzsgfSAKLnlhd2YtV0JWNiAueWF3Zi1mb2xsb3dpbmctbm90aWNlLWZvb3RlciB7IHBhZGRpbmc6IDIwcHg7IH0gCi55YXdmLVdCVjYgLnlhd2YtZm9sbG93aW5nLW5vdGljZS1ib2R5IGEueWF3Zi1jb25maWctdXNlci1uYW1lIHsgY29sb3I6IGluaGVyaXQ7IH0KLnlhd2YtV0JWNiAueWF3Zi1mb2xsb3dpbmctcmVuYW1lIC55YXdmLWNvbmZpZy11c2VyLW5hbWUsCi55YXdmLVdCVjYgLnlhd2YtZm9sbG93aW5nLXJlbmFtZSAueWF3Zi1jb25maWctdXNlci1kZXRhaWwgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLXVzZXItYXZhdGFyLWltZyB7IG1heC13aWR0aDogNTBweDsgbWF4LWhlaWdodDogNTBweDsgfQpgKTsKCiAgY3NzLmFwcGVuZChgCi55YXdmLVdCVjcgI3lhd2YtZm9sbG93LWNoYW5nZSAud29vLWRpYWxvZy10aXRsZSB7IG1hcmdpbi1ib3R0b206IDA7IH0KLnlhd2YtV0JWNyAjeWF3Zi1mb2xsb3ctY2hhbmdlIC53b28tZGlhbG9nLWJvZHkgeyBwYWRkaW5nOiAwOyB9Ci55YXdmLVdCVjcgLnlhd2YtZm9sbG93aW5nLWFkZC10aXRsZSwKLnlhd2YtV0JWNyAueWF3Zi1mb2xsb3dpbmctbG9zdC10aXRsZSwKLnlhd2YtV0JWNyAueWF3Zi1mb2xsb3dpbmctcmVuYW1lLXRpdGxlIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbjogMTBweCAwIDVweDsgfSAKLnlhd2YtV0JWNyAueWF3Zi1mb2xsb3dpbmctbm90aWNlLWhlYWRlciB7IHBhZGRpbmc6IDIwcHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1mb2xsb3dpbmctbm90aWNlLWJvZHkgeyBwYWRkaW5nOiAwIDIwcHg7IHdpZHRoOiA2MDBweDsgbWF4LWhlaWdodDogMzIwcHg7IG92ZXJmbG93OiBhdXRvOyB9IAoueWF3Zi1XQlY3IC55YXdmLWZvbGxvd2luZy1ub3RpY2UtZm9vdGVyIHsgcGFkZGluZzogMjBweDsgfSAKLnlhd2YtV0JWNyAueWF3Zi1mb2xsb3dpbmctbm90aWNlLWJvZHkgYS55YXdmLWNvbmZpZy11c2VyLW5hbWUgeyBjb2xvcjogaW5oZXJpdDsgfQoueWF3Zi1XQlY3IC55YXdmLWZvbGxvd2luZy1yZW5hbWUgLnlhd2YtY29uZmlnLXVzZXItbmFtZSwKLnlhd2YtV0JWNyAueWF3Zi1mb2xsb3dpbmctcmVuYW1lIC55YXdmLWNvbmZpZy11c2VyLWRldGFpbCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHZlcnRpY2FsLWFsaWduOiB0b3A7IH0KYCk7CgogIGkxOG4udW5jaGVja0ZvbGxvd1ByZXNlbnRlciA9IHsKICAgIGNuOiAn6K+d6aKY6aG16Z2i5Y+R5biD5qGG5Y+W5raI6buY6K6k5Yu+6YCJ5YWz5rOo5Li75oyB5Lq6JywKICAgIHR3OiAn6Kmx6aGM6aCB6Z2i55m85L2I5qGG5Y+W5raI6aCQ6Kit5Yu+6YG46Zec5rOo5Li75oyB5Lq6JywKICAgIGVuOiAnVW5jaGVjayBmb2xsb3cgcHJlc2VudGVyIGluIHRvcGljIHBhZ2UnLAogIH07CgogIGZvbGxvd2luZy51bmNoZWNrRm9sbG93UHJlc2VudGVyID0gcnVsZS5SdWxlKHsKICAgIGlkOiAndW5jaGVja19mb2xsb3dfcHJlc2VudGVyJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGZvbGxvd2luZy5mb2xsb3dpbmcsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi51bmNoZWNrRm9sbG93UHJlc2VudGVyLAogICAgaW5pdGlhbDogdHJ1ZSwKICAgIGFpbml0KCkgewogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIHVuY2hlY2tGb2xsb3dQcmVzZW50ZXIoKSB7CiAgICAgICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJjaGVja2JveCJdW2NoZWNrZWRdW2FjdGlvbi1kYXRhKj0iZm9sbG93Il06bm90KFt5YXdmLXVuY2hlY2stZm9sbG93XSknKSk7CiAgICAgICAgaW5wdXRzLmZvckVhY2goY2hlY2tib3ggPT4gewogICAgICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCd5YXdmLXVuY2hlY2snLCAnJyk7CiAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkgY2hlY2tib3guY2xpY2soKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLnNob3dBcnRpY2xlV2l0aG91dEZvbGxvdyA9IHsKICAgIGNuOiAn5aS05p2h5paH56ug5LiN5YWz5rOo5L2c6ICF55u05o6l5pi+56S65YWo5paHJywKICAgIHR3OiAn6aCt5qKd5paH56ug5LiN6Zec5rOo5L2c6ICF55u05o6l6aGv56S65YWo5paHJywKICAgIGVuOiAnU2hvdyB3aG9sZSBhcnRpY2xlIHdpdGhvdXQgZm9sbG93IHRoZSBhdXRob3InLAogIH07CgogIGZvbGxvd2luZy5zaG93QXJ0aWNsZVdpdGhvdXRGb2xsb3cgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdzaG93X2FydGljbGVfd2l0aG91dF9mb2xsb3cnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZm9sbG93aW5nLmZvbGxvd2luZywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dBcnRpY2xlV2l0aG91dEZvbGxvdywKICAgIGluaXRpYWw6IHRydWUsCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3Qgc2hvd0FydGljbGVDc3MgPSBgCi5XQl9lZGl0b3JfaWZyYW1lLCAuV0JfZWRpdG9yX2lmcmFtZV9uZXcsIC5XQl9lZGl0b3JfaWZyYW1lX3dvcmQgeyBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgfQouYXJ0aWNhbF9hZGRfYm94IFtub2RlLXR5cGU9Im1hc2tDb250ZW50Il0geyBkaXNwbGF5OiBub25lOyB9CmA7CiAgICAgIGNzcy5hcHBlbmQoc2hvd0FydGljbGVDc3MpOwogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGFydGljbGVGcmFtZVN0eWxlKCkgewogICAgICAgIC8qKiBAdHlwZXtOb2RlTGlzdE9mPEhUTUxJRnJhbWVFbGVtZW50Pn0gKi8KICAgICAgICBjb25zdCBmcmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpZnJhbWVbc3JjKj0idHRhcnRpY2xlL3Avc2hvdyJdJyk7CiAgICAgICAgaWYgKCFmcmFtZXMubGVuZ3RoKSByZXR1cm47CiAgICAgICAgQXJyYXkuZnJvbShmcmFtZXMpLmZvckVhY2goZnVuY3Rpb24gaW5qZWN0U3R5bGUoZnJhbWUpIHsKICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gZnJhbWUuY29udGVudERvY3VtZW50OwogICAgICAgICAgaWYgKCFkb2N1bWVudCkgc2V0VGltZW91dChpbmplY3RTdHlsZSwgMTAsIGZyYW1lKTsKICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHNob3dBcnRpY2xlQ3NzOwogICAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9maWx0ZXIvaG9tZXBhZ2UuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgZW52ID0geWF3Zi5lbnY7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwogIGNvbnN0IGJyb3dzZXJJbmZvID0geWF3Zi5icm93c2VySW5mbzsKICBjb25zdCBzdGsgPSB5YXdmLnN0azsKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkOwogIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSB5YXdmLm5vdGlmaWNhdGlvbnM7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgZmlsdGVyID0geWF3Zi5ydWxlcy5maWx0ZXI7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3Qga2V5Ym9hcmQgPSB1dGlsLmtleWJvYXJkOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGZlZWRzSG9tZXBhZ2VHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn6aaW6aG1JywKICAgICAgdHc6ICfpppbpoIEnLAogICAgICBlbjogJ0hvbWVwYWdlJywKICAgIH0sCiAgICBmZWVkc0hvbWVwYWdlTmV3ZXN0OiB7CiAgICAgIGNuOiAn5L2/55So5pyA5paw5b6u5Y2a5Luj5pu/6aaW6aG177yI6aaW6aG15b6u5Y2a5pe26Ze06aG65bqP5o6S5YiX77yJ77yI5o6o6I2Q77yJJywKICAgICAgdHc6ICfkvb/nlKjmnIDmlrDlvq7ljZrku6Pmm7/pppbpoIHvvIjpppbpoIHlvq7ljZrmmYLplpPpoIbluo/mjpLliJfvvInvvIjmjqjolqbvvIknLAogICAgICBlbjogJ1VzZSBuZXdlc3QgZmVlZHMgZm9yIGhvbWUgcGFnZSAoaG9tZSBwYWdlIHRpbWVsaW5lIG9yZGVyKSAoc3VnZ2VzdGVkKScsCiAgICB9LAogICAgZmVlZHNIb21lcGFnZVNpbmdsZUdyb3VwOiB7CiAgICAgIGNuOiAn5L2/55So5Y2V5Liq5YiG57uE6aG15Luj5pu/6aaW6aG177yI6aaW6aG15b6u5Y2a5pe26Ze06aG65bqP5o6S5YiX77yJe3tpfX18fOWIhue7hHt7Z3JvdXB9fScsCiAgICAgIHR3OiAn5L2/55So5Zau5YCL5YiG57WE6aCB5Luj5pu/6aaW6aCB77yI6aaW6aCB5b6u5Y2a5pmC6ZaT6aCG5bqP5o6S5YiX77yJe3tpfX18fOWIhue1hHt7Z3JvdXB9fScsCiAgICAgIGVuOiAnVXNlIHNpbmdsZSBmZWVkIGxpc3QgYnkgZ3JvdXAgZm9yIGhvbWUgcGFnZSAoaG9tZSBwYWdlIHRpbWVsaW5lIG9yZGVyKSB7e2l9fXx8R3JvdXB7e2dyb3VwfX0nLAogICAgfSwKICAgIGZlZWRzSG9tZXBhZ2VTaW5nbGVHcm91cERldGFpbDogewogICAgICBjbjogJ+W+ruWNmueahOWIhue7hOmhtemdouaMieaXtumXtOmhuuW6j+ato+W4uOaOkuWIl+OAguWIhue7hOS6uuaVsOaciemZkOWItu+8jOmdnuS8muWRmOiHs+WkmiAyMDAg5Lq6L+e7hOOAguWmguaenOaCqOeahOWFs+azqOi+g+Wwke+8jOW7uuiuruS9v+eUqOWIhue7hOS7o+abv+mmlumhteOAguazqOaEj++8jOWIhue7hOmhtemdouS4reaMieS9nOiAhei/h+a7pOeahOinhOWImeWwhuS4jeS8mueUn+aViO+8jOWmguaenOaCqOS4jeW4jOacm+eci+WIsOafkOS6uueahOW+ruWNmu+8jOaCqOWPr+S7peWwhuWFtuenu+WHuuWIhue7hOOAgicsCiAgICB9LAogICAgZmVlZHNIb21lcGFnZU11bHRpR3JvdXA6IHsKICAgICAgY246ICfkvb/nlKjlpJrkuKrliIbnu4TpobXku6Pmm7/pppbpobXvvIjpppbpobXlvq7ljZrml7bpl7Tpobrluo/mjpLliJfvvIl7e2l9fXx85q+P5qyh5bGV56S6e3tjb3VudH195p2hfOeCueWHu+afpeeci+abtOWkmuaXtnt7bW9yZX19fHx7e3VucmVhZH196Ieq5Yqo5qOA5p+l5ZKM5o+Q56S65pyq6K+75b6u5Y2ae3tpaX19fHzliIbnu4R7e2dyb3Vwc319JywKICAgICAgdHc6ICfkvb/nlKjlpJrlgIvliIbntYTpoIHku6Pmm7/pppbpoIHvvIjpppbpoIHlvq7ljZrmmYLplpPpoIbluo/mjpLliJfvvIl7e2l9fXx85q+P5qyh5bGV56S6e3tjb3VudH195qKdfOm7nuaTiuafpeeci+abtOWkmuaZgnt7bW9yZX19fHx7e3VucmVhZH196Ieq5YuV5qqi5p+l5ZKM5o+Q56S65pyq6K6A5b6u5Y2ae3tpaX19fHzliIbntYR7e2dyb3Vwc319JywKICAgICAgZW46ICdVc2UgbXVsdGlwbGUgZmVlZCBsaXN0cyBieSBncm91cCBmb3IgaG9tZSBwYWdlIChob21lIHBhZ2UgdGltZWxpbmUgb3JkZXIpIHt7aX19fHxzaG93IHt7Y291bnR9fSBmZWVkcyBwZXIgcGFnZXx7e21vcmV9fSBiZWZvcmUgc2hvdyBuZXh0IHBhZ2V8fHt7dW5yZWFkfX0gU2hvdyB0aXBzIGZvciB1bnJlYWQgZmVlZHMge3tpaX19fHxHcm91cHN7e2dyb3Vwc319JywKICAgIH0sCiAgICBmZWVkc0hvbWVwYWdlTXVsdGlHcm91cERldGFpbDogewogICAgICBjbjogJ+W+ruWNmueahOWIhue7hOmhtemdouaMieaXtumXtOmhuuW6j+aOkuWIl++8jOWmguaenOaCqOeahOWFs+azqOi+g+Wwke+8jOW7uuiuruaCqOWwhuS7luS7rOaUvuWFpeS4gOS4quWIhue7hOWQjuWQr+eUqOS9v+eUqOKAnOWNleS4quKAneWIhue7hOeahOmAiemhueOAguWmguaenOaCqOWFs+azqOeahOS6uuaVsOi+g+Wkmu+8jOaCqOWPr+S7pemAieaLqeWkmuS4quWIhue7hO+8jOWIhue7hOi/h+WkmuWPr+iDvemAoOaIkOabtOmVv+eahOWKoOi9veaXtumXtO+8jOS7peWPiuWKoOi9veaXtueahOWNoemhv++8jOW7uuiuruWwvemHj+WHj+WwkemAieaLqeeahOWIhue7hOaVsOmHj+OAgicsCiAgICB9LAogICAgZmVlZHNIb21lcGFnZU11bHRpR3JvdXBEZXRhaWwyOiB7CiAgICAgIGNuOiAn5qOA5p+l5pyq6K+75b6u5Y2a5LuF5a+55LiA6Iis55qE5YiG57uE5pyJ5pWI77yM5a+55oKE5oKE5YWz5rOo5YiG57uE5peg5pWI44CCJywKICAgIH0sCiAgICBmZWVkc0hvbWVwYWdlS2VlcE9sZDogewogICAgICBjbjogJ+S/neeVmeW3suWxleekuuW+ruWNmicsCiAgICAgIGVuOiAna2VlcCBzaG93biBmZWVkcycsCiAgICB9LAogICAgZmVlZHNIb21lcGFnZUNsZWFuT2xkOiB7CiAgICAgIGNuOiAn5riF56m65bey5bGV56S65b6u5Y2aJywKICAgICAgZW46ICdjbGVhbiB1cCBzaG93biBmZWVkcycsCiAgICB9LAogICAgZmVlZHNIb21lUGFnZURvbmVHcm91cDogewogICAgICBjbjogJ+WIhue7hCB7MX0g55qE5pyA6L+R5b6u5Y2a5bey5YWo6YOo5bGV56S6JywKICAgICAgdHc6ICfliIbntYQgezF9IOeahOacgOi/keW+ruWNmuW3suWFqOmDqOWxleekuicsCiAgICAgIGVuOiAnQWxsIHJlY2VudCBmZWVkcyBmcm9tIGdyb3VwIHsxfSBoYWQgYmVlbiBzaG93bicsCiAgICB9LAogICAgZmVlZHNNdWx0aUdyb3VwTG9hZGluZzogewogICAgICBjbjogJ+ato+WcqOWKoOi9veKApuKApicsCiAgICAgIHR3OiAn5q2j5Zyo6LyJ5YWl4oCm4oCmJywKICAgICAgZW46ICdMb2FkaW5nIC4uLicsCiAgICB9LAogICAgZmVlZHNNdWx0aUdyb3VwTG9hZE1vcmU6IHsKICAgICAgY246ICfmn6XnnIvmm7TlpJrlvq7ljZonLAogICAgICBlbjogJ1Nob3cgbW9yZSBmZWVkcycsCiAgICB9LAogICAgZmVlZHNVbnJlYWRUaXBXaXRoQ291bnQ6IHsKICAgICAgY246ICfmnIkgezF9IOadoeaWsOW+ruWNmu+8jOeCueWHu+afpeeciycsCiAgICAgIHR3OiAn5pyJIHsxfSDmop3mlrDlvq7ljZrvvIzpu57mk4rmn6XnnIsnLAogICAgICBlbjogJ3sxfSBuZXcgZmVlZHMnLAogICAgfSwKICAgIGZlZWRzVW5yZWFkVGlwOiB7CiAgICAgIGNuOiAn5pyJ5paw5b6u5Y2a77yM54K55Ye75p+l55yLJywKICAgICAgdHc6ICfmnInmlrDlvq7ljZrvvIzpu57mk4rmn6XnnIsnLAogICAgICBlbjogJ3Nob3cgbmV3IGZlZWRzJywKICAgIH0sCiAgICBmZWVkc1VucmVhZExvYWRpbmc6IHsKICAgICAgY246ICfmraPlnKjliqDovb3igKbigKYnLAogICAgICB0dzogJ+ato+WcqOi8ieWFpeKApuKApicsCiAgICAgIGVuOiAnTG9hZGluZyAuLi4nLAogICAgfSwKICB9KTsKCiAgY29uc3QgaG9tZXBhZ2UgPSBmaWx0ZXIuaG9tZXBhZ2UgPSB7fTsKICBob21lcGFnZS5ob21lcGFnZSA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBmaWx0ZXIuZmlsdGVyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNIb21lcGFnZUdyb3VwVGl0bGUsCiAgfSk7CgogIC8vIOWboOS4uiBZQVdGIOiEmuacrOeUqOeahCAtMe+8jOi/memHjOS4uuS6humBv+WFjeWPr+iDveeahOWGsueqge+8iOiZveeEtuWIq+eahOWKn+iDvei/mOaYr+S8muWGsueqge+8ie+8jOaJgOS7peeUqCAtMgogIGNvbnN0IENVU1RPTV9HSUQgPSAtMjsKCiAgY29uc3QgZml4SG9tZVVybFY2ID0gZnVuY3Rpb24gKHRhcmdldCkgewogICAgY29uc3Qgc2V0UGFyYW0gPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgIGlmICh0YXJnZXQgPT09ICduZXdlc3QnKSB7CiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoJ2dpZCcpOwogICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdpc19uZXcnLCAxKTsKICAgICAgfSBlbHNlIGlmICh0YXJnZXQgPT09ICdjdXN0b20nKSB7CiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2dpZCcsIENVU1RPTV9HSUQpOwogICAgICB9IGVsc2UgaWYgKHRhcmdldC5zdGFydHNXaXRoKCdnJykpIHsKICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZ2lkJywgdGFyZ2V0LnNsaWNlKDEpKTsKICAgICAgfSBlbHNlIGlmICh0YXJnZXQgPT09ICd3aGlzcGVyJykgewogICAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdnaWQnKTsKICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnd2hpc3BlcicsIDEpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgdXBkYXRlTG9jYXRpb24gPSBmdW5jdGlvbiB1cGRhdGVMb2NhdGlvbigpIHsKICAgICAgY29uc3QgaXNIb21lRmVlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2Nl9wbF9jb250ZW50X2hvbWVmZWVkJyk7CiAgICAgIGNvbnN0IG5vdEhvbWVGZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Y2X3BsX2NvbnRlbnRfY29tbWVudGxpc3QnKSB8fAogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tpZF49IlBsX09mZmljaWFsX015UHJvZmlsZUZlZWRfXyJdJyk7CiAgICAgIGlmICghaXNIb21lRmVlZCAmJiAhbm90SG9tZUZlZWQpIHJldHVybjsKICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChsb2NhdGlvbi5ocmVmKTsKICAgICAgY29uc3QgaGFzR2lkID0gQm9vbGVhbigrdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2dpZCcpKTsKICAgICAgY29uc3QgaXNOZXcgPSBCb29sZWFuKCt1cmwuc2VhcmNoUGFyYW1zLmdldCgnaXNfbmV3JykpOwogICAgICBjb25zdCBpc1NlYXJjaCA9IEJvb2xlYW4oK3VybC5zZWFyY2hQYXJhbXMuZ2V0KCdpc19zZWFyY2gnKSk7CiAgICAgIGNvbnN0IGlzU3BlY2lhbCA9IFsnaXNmcmllbmRzJywgJ3ZwbHVzJywgJ2lzZnJpZW5kcycsICdpc2dyb3Vwc2ZlZWQnLCAnd2hpc3BlciddCiAgICAgICAgLnNvbWUoa2V5ID0+ICt1cmwuc2VhcmNoUGFyYW1zLmdldChrZXkpKTsKICAgICAgY29uc3QgaXNDdXN0b21HaWQgPSBoYXNHaWQgJiYgdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2dpZCcpIDwgMDsKICAgICAgY29uc3Qgc2hvdWxkQmVGaXhlZCA9IGlzSG9tZUZlZWQgJiYgIWlzU2VhcmNoICYmICFpc1NwZWNpYWw7CiAgICAgIGNvbnN0IHNob3VsZFJlbW92ZUdpZCA9IG5vdEhvbWVGZWVkICYmIGlzQ3VzdG9tR2lkOwogICAgICBjb25zdCBpbmNvcnJlY3RHaWQgPSBpc0N1c3RvbUdpZCAmJiB0YXJnZXQgIT09ICdjdXN0b20nOwogICAgICBpZiAoKCFoYXNHaWQgfHwgaW5jb3JyZWN0R2lkKSAmJiAhaXNOZXcgJiYgc2hvdWxkQmVGaXhlZCkgewogICAgICAgIHNldFBhcmFtKHVybCk7CiAgICAgICAgb2JzZXJ2ZXIuZG9tLnJlbW92ZSh1cGRhdGVMb2NhdGlvbik7CiAgICAgICAgbG9jYXRpb24ucmVwbGFjZSh1cmwuaHJlZik7CiAgICAgIH0gZWxzZSBpZiAoaGFzR2lkICYmIHNob3VsZFJlbW92ZUdpZCkgewogICAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdnaWQnKTsKICAgICAgICBvYnNlcnZlci5kb20ucmVtb3ZlKHVwZGF0ZUxvY2F0aW9uKTsKICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKHVybCk7CiAgICAgIH0KICAgIH07CiAgICBvYnNlcnZlci5kb20uYWRkKHVwZGF0ZUxvY2F0aW9uKTsKCiAgICBjb25zdCB1cGRhdGVIb21lTGlua3MgPSBmdW5jdGlvbiB1cGRhdGVIb21lTGlua3MoKSB7CiAgICAgIC8qKiBAdHlwZSB7SFRNTEFuY2hvckVsZW1lbnRbXX0gKi8KICAgICAgY29uc3QgbGlua3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoWwogICAgICAgICcuZ25fbG9nbyBhJywgLy8g5a+86Iiq5qCPbG9nbwogICAgICAgICdhW3N1ZGEtdWF0cmFjayo9ImhvbWVwYWdlIl0nLCAvLyDpppbpobXpk77mjqXvvIzmoLnmja7ot5/ouKrmoIfor4bor4bliKvvvJvpgILnlKjkuo7pobbmoI/lkozlt6bmoI8KICAgICAgICAnI3Y2X3BsX2NvbnRlbnRfaG9tZWZlZWQgYVthY3Rpb24tdHlwZT0ic2VhcmNoX3R5cGUiXVthY3Rpb24tZGF0YT0idHlwZT0wIl0nLCAvLyDpppbpobXmtojmga/mtYHpobbpg6jnmoTigJzlhajpg6jigJ3pk77mjqUKICAgICAgXS5tYXAoc2VsZWN0b3IgPT4gc2VsZWN0b3IgKyAnOm5vdChbaHJlZio9ImlzX3NlYXJjaCJdKScpLmpvaW4oJywnKSkpOwogICAgICBsaW5rcy5mb3JFYWNoKGxpbmsgPT4gewogICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwobGluay5ocmVmKTsKICAgICAgICBzZXRQYXJhbSh1cmwpOwogICAgICAgIGxpbmsuaHJlZiA9IHVybC5ocmVmOwogICAgICB9KTsKICAgIH07CiAgICBvYnNlcnZlci5kb20uYWRkKHVwZGF0ZUhvbWVMaW5rcyk7CiAgfTsKCiAgY29uc3QgZml4SG9tZVVybFY3ID0gZnVuY3Rpb24gKGNvbmZpZykgewogICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXksIHsgZ2lkLCBuYW1lLCBhcGksIGluZGV4LCBzb3VyY2UgfSkgewogICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICBjb25zdCByb290ID0gdnVlU2V0dXAuZ2V0Um9vdFZtKCk7CiAgICAgIGNvbnN0IHJvdXRlciA9IHJvb3QuJHJvdXRlcjsKICAgICAgcm91dGVyLmJlZm9yZUVhY2goKHRvLCBmcm9tLCBuZXh0KSA9PiB7CiAgICAgICAgaWYgKHRvLm5hbWUgPT09ICdob21lJykgewogICAgICAgICAgbmV4dCgnL215Z3JvdXBzP2dpZD0nICsgZ2lkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV4dCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLm5hbWUgPT09ICdob21lJykgewogICAgICAgIHJvdXRlci5yZXBsYWNlKCcvbXlncm91cHM/Z2lkPScgKyBnaWQpOwogICAgICB9CgogICAgICBjb25zdCBidXMgPSByb290LiRCdXM7CiAgICAgIGJ1cy4kb24oJ2hhbmRsZUhvbWVOYXYnLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChkYXRhLmdpZC5zdGFydHNXaXRoKCcxMDAwMScpKSB7CiAgICAgICAgICBidXMuJGVtaXQoJ2hhbmRsZUhvbWVOYXYnLCB7IGdpZCwgdGl0bGU6IG5hbWUsIGFwaSwgeWF3Zl9UcmlnZ2VyOiB0cnVlIH0sIGluZGV4LCBzb3VyY2UpOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YS55YXdmX1RyaWdnZXIpIHsKICAgICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnaG9tZScsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgICBpZiAodm0uZ2V0Q3VySW5kZXgpIHZtLmdldEN1ckluZGV4KCk7IC8vIOWIq+S/oeS7luWPqyBnZXTvvIzopoHosIPku5bmnaXmm7TmlrDlvZPliY3pq5jkuq7lhYPntKAKICAgICAgICAgIH0sIHsgd2F0Y2g6IGZhbHNlIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBjb25maWcpOwogIH07CgogIGhvbWVwYWdlLm5ld2VzdEZlZWRzID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfaG9tZXBhZ2VfbmV3ZXN0X2ZlZWRzJywKICAgIHZlcnNpb246IDIxLAogICAgcGFyZW50OiBob21lcGFnZS5ob21lcGFnZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRzSG9tZXBhZ2VOZXdlc3QsCiAgICBpbml0KCkgewogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKGNvbmZpZyA9PiB7CiAgICAgICAgaWYgKGNvbmZpZykgewogICAgICAgICAgaG9tZXBhZ2Uuc2luZ2xlR3JvdXAuc2V0Q29uZmlnKGZhbHNlKTsKICAgICAgICAgIGhvbWVwYWdlLm11bHRpR3JvdXAuc2V0Q29uZmlnKGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFpbml0KCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgZml4SG9tZVVybFY2KCduZXdlc3QnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB1aWQgPSBpbml0LnBhZ2UuY29uZmlnLnVzZXIuaWRzdHI7CiAgICAgICAgZml4SG9tZVVybFY3KHsKICAgICAgICAgIGdpZDogJzExMDAwJyArIHVpZCwKICAgICAgICAgIGFwaTogJy9hamF4L2ZlZWQvZnJpZW5kc3RpbWVsaW5lJywKICAgICAgICAgIG5hbWU6ICfmnIDmlrDlvq7ljZonLAogICAgICAgICAgaW5kZXg6IDEsCiAgICAgICAgICBzb3VyY2U6ICdsZWZ0JywKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9KTsKCiAgbGV0IGdyb3VwTGlzdExhenlQcm9taXNlUmVzb2x2ZTsKICBjb25zdCBncm91cExpc3RMYXp5UHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgZ3JvdXBMaXN0TGF6eVByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTsKICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgY29uc3QgZ3JvdXBzID0gYXdhaXQgcmVxdWVzdC5ncm91cExpc3QoKTsKICAgICAgcmV0dXJuIGdyb3Vwcy5tYXAoKHsgbmFtZSwgaWQgfSkgPT4gKHsgdGV4dDogbmFtZSwgdmFsdWU6IGlkIH0pKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGdyb3VwcyA9IGF3YWl0IHJlcXVlc3QuZ3JvdXBMaXN0VjcoKTsKICAgICAgcmV0dXJuIGdyb3Vwcy5tYXAoKHsgZ2lkLCB0aXRsZSB9KSA9PiAoeyB0ZXh0OiB0aXRsZSwgdmFsdWU6IGdpZCB9KSk7CiAgICB9CiAgfSk7CiAgaG9tZXBhZ2Uuc2luZ2xlR3JvdXAgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZpbHRlcl9ob21lcGFnZV9zaW5nbGVfZ3JvdXAnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogaG9tZXBhZ2UuaG9tZXBhZ2UsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc0hvbWVwYWdlU2luZ2xlR3JvdXAsCiAgICByZWY6IHsKICAgICAgZ3JvdXA6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBzZWxlY3Q6IGdyb3VwTGlzdExhenlQcm9taXNlLAogICAgICAgIGFmdGVyUmVuZGVyOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgICBncm91cExpc3RMYXp5UHJvbWlzZVJlc29sdmUoKTsKICAgICAgICAgIHJldHVybiBjb250YWluZXI7CiAgICAgICAgfSwKICAgICAgfSwKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRzSG9tZXBhZ2VTaW5nbGVHcm91cERldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoY29uZmlnID0+IHsKICAgICAgICBpZiAoY29uZmlnKSB7CiAgICAgICAgICBob21lcGFnZS5uZXdlc3RGZWVkcy5zZXRDb25maWcoZmFsc2UpOwogICAgICAgICAgaG9tZXBhZ2UubXVsdGlHcm91cC5zZXRDb25maWcoZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgYWluaXQoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLnJlZi5ncm91cC5nZXRDb25maWcoKTsKICAgICAgICBpZiAoZ3JvdXAgPT0gbnVsbCkgewogICAgICAgICAgYXdhaXQgZ3JvdXBMaXN0TGF6eVByb21pc2U7CiAgICAgICAgICBncm91cCA9IHRoaXMucmVmLmdyb3VwLmdldENvbmZpZygpOwogICAgICAgIH0KICAgICAgICBmaXhIb21lVXJsVjYoZ3JvdXApOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGdpZCA9IHRoaXMucmVmLmdyb3VwLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGdyb3VwcyA9IGF3YWl0IHJlcXVlc3QuZ3JvdXBMaXN0VjcoKTsKICAgICAgICBjb25zdCBpbmRleCA9IGdyb3Vwcy5maW5kSW5kZXgoZyA9PiBnLmdpZCA9PT0gZ2lkKTsKICAgICAgICBjb25zdCBuYW1lID0gZ3JvdXBzW2luZGV4XS50aXRsZTsKICAgICAgICBjb25zdCBhcGkgPSAnL2FqYXgvZmVlZC9ncm91cHN0aW1lbGluZSc7CiAgICAgICAgZml4SG9tZVVybFY3KHsgZ2lkLCBhcGksIG5hbWUsIGluZGV4LCBzb3VyY2U6ICdjdXN0b20nIH0pOwogICAgICB9CiAgICB9LAogIH0pOwoKICBob21lcGFnZS5tdWx0aUdyb3VwID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2hvbWVwYWdlX211bHRpX2dyb3VwJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGhvbWVwYWdlLmhvbWVwYWdlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNIb21lcGFnZU11bHRpR3JvdXAsCiAgICByZWY6IHsKICAgICAgY291bnQ6IHsKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIG1pbjogMjAsCiAgICAgICAgbWF4OiAyMDAsCiAgICAgICAgaW5pdGlhbDogNTAsCiAgICAgICAgc3RlcDogMTAsCiAgICAgIH0sCiAgICAgIG1vcmU6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICdrZWVwJywgdGV4dDogKCkgPT4gaTE4bi5mZWVkc0hvbWVwYWdlS2VlcE9sZCB9LAogICAgICAgICAgeyB2YWx1ZTogJ2NsZWFyJywgdGV4dDogKCkgPT4gaTE4bi5mZWVkc0hvbWVwYWdlQ2xlYW5PbGQgfSwKICAgICAgICBdLAogICAgICAgIGluaXRpYWw6ICdjbGVhcicsCiAgICAgIH0sCiAgICAgIHVucmVhZDogewogICAgICAgIHR5cGU6ICdib29sZWFuJywKICAgICAgfSwKICAgICAgZ3JvdXBzOiB7CiAgICAgICAgdHlwZTogJ2dyb3VwcycsIC8vIOS4jeaUr+aMgSBWNwogICAgICB9LAogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNIb21lcGFnZU11bHRpR3JvdXBEZXRhaWwgfSwKICAgICAgaWk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNIb21lcGFnZU11bHRpR3JvdXBEZXRhaWwyIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcihjb25maWcgPT4gewogICAgICAgIGlmIChjb25maWcpIHsKICAgICAgICAgIGhvbWVwYWdlLm5ld2VzdEZlZWRzLnNldENvbmZpZyhmYWxzZSk7CiAgICAgICAgICBob21lcGFnZS5zaW5nbGVHcm91cC5zZXRDb25maWcoZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBjb25zdCBjb3VudCA9IHJ1bGUucmVmLmNvdW50LmdldENvbmZpZygpOwogICAgICBjb25zdCB1bnJlYWQgPSBydWxlLnJlZi51bnJlYWQuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGdyb3VwcyA9IHJ1bGUucmVmLmdyb3Vwcy5nZXRDb25maWcoKS5zbGljZSgwKTsKICAgICAgY29uc3QgY2xlYXIgPSBydWxlLnJlZi5tb3JlLmdldENvbmZpZygpID09PSAnY2xlYXInOwogICAgICBjb25zdCBhdXRvTG9hZCA9IGhvbWVwYWdlLmF1dG9Mb2FkLmlzRW5hYmxlZCgpOwoKICAgICAgaWYgKGdyb3Vwcy5sZW5ndGggPT09IDApIHJldHVybjsKCiAgICAgIGZpeEhvbWVVcmxWNignY3VzdG9tJyk7CgogICAgICAvLyDmo4Dmn6XlvZPliY3pobXpnaLmmK/lkKbpnIDopoHlkK/nlKjliIbnu4Tmi7zlh5HpppbpobXlip/og70KICAgICAgY29uc3QgY2hlY2tQYWdlID0gZnVuY3Rpb24gY2hlY2tNdWx0aUdyb3VwUGFnZSgpIHsKICAgICAgICBjb25zdCBxdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTsKICAgICAgICBjb25zdCBnaWQgPSArcXVlcnkuZ2V0KCdnaWQnKTsKICAgICAgICBpZiAoZ2lkICE9PSBDVVNUT01fR0lEKSByZXR1cm47CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGdyb3VwcykpIHJldHVybjsKICAgICAgICBpZiAoZ3JvdXBzLmxlbmd0aCA8IDIpIHJldHVybjsKICAgICAgICBxdWVyeS5kZWxldGUoJ2dpZCcpOwogICAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gbXVsdGlHcm91cFBhZ2VGaXgoKSB7CiAgICAgICAgICB3YXRjaEZlZWRMaXN0KHF1ZXJ5KTsKICAgICAgICAgIHdhdGNoTWVtYmVycygpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgY29uc3QgZ2V0TG9hZGluZ1RpcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9IldCX2NhcmR3cmFwIFNfYmcyIj48ZGl2IGNsYXNzPSJXQl9lbXB0eSBXQl9lbXB0eV9uYXJyb3ciPjxkaXYgY2xhc3M9IldCX2lubmVyd3JhcCI+PGRpdiBjbGFzcz0iZW1wdHlfY29uIGNsZWFyZml4Ij48cCBjbGFzcz0idGV4dCI+PGkgY2xhc3M9IldfbG9hZGluZyI+PC9pPjwvcD48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nOwogICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGV4dCcpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGkxOG4uZmVlZHNNdWx0aUdyb3VwTG9hZGluZykpOwogICAgICAgIHJldHVybiBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgfTsKICAgICAgY29uc3QgZ2V0U2hvd01vcmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJXQl9jYXJkd3JhcCBTX2JnMiB5YXdmLW11bHRpR3JvdXBNb3JlIj48YSBjbGFzcz0iV0JfY2FyZG1vcmUgV0JfY2FyZG1vcmVfbm9ib3JkZXIgY2xlYXJmaXgiIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9Im1vcmVfdHh0IFdfZjE0Ij48ZW0gY2xhc3M9IldfZmljb24gZmljb25fYXJyb3dfZG93biI+YzwvZW0+PC9zcGFuPjwvYT48L2Rpdj4nOwogICAgICAgIGNvbnN0IHRleHRDb250YWluZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3BhbicpOwogICAgICAgIHRleHRDb250YWluZXIuaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGkxOG4uZmVlZHNNdWx0aUdyb3VwTG9hZE1vcmUpLCB0ZXh0Q29udGFpbmVyLmZpcnN0Q2hpbGQpOwogICAgICAgIHJldHVybiBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgfTsKCiAgICAgIC8vIOaJvuWIsOa2iOaBr+a1geeahOWuueWZqO+8jOW5tuWIneWni+WMluWlveWugwogICAgICBjb25zdCB3YXRjaEZlZWRMaXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7CiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZCA+IC5XQl9yZXN1bHRfbnVsbCcpOwogICAgICAgIGlmICghcGxhY2Vob2xkZXIpIHJldHVybjsKICAgICAgICBsZXQgZmVlZGxpc3QgPSBwbGFjZWhvbGRlci5wYXJlbnRFbGVtZW50OwogICAgICAgIGZlZWRsaXN0LnJlbW92ZUNoaWxkKHBsYWNlaG9sZGVyKTsKICAgICAgICBmaWxsRmVlZExpc3QoZmVlZGxpc3QsIHF1ZXJ5KTsKICAgICAgfTsKCiAgICAgIC8vIOWIneWni+WMlua2iOaBr+a1geWuueWZqAogICAgICBjb25zdCBmaWxsRmVlZExpc3QgPSBmdW5jdGlvbiAoZmVlZGxpc3QsIHF1ZXJ5KSB7CiAgICAgICAgZmVlZGxpc3QuY2xhc3NMaXN0LmFkZCgnV0JfZmVlZF92MycsICdXQl9mZWVkX3Y0Jyk7CiAgICAgICAgY29uc3QgbG9hZGluZyA9IGdldExvYWRpbmdUaXAoKTsKICAgICAgICBmZWVkbGlzdC5hcHBlbmRDaGlsZChsb2FkaW5nKTsKICAgICAgICBjb25zdCBzaG93bW9yZSA9IGdldFNob3dNb3JlKCk7CiAgICAgICAgc2hvd21vcmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBmZWVkbGlzdC5hcHBlbmRDaGlsZChzaG93bW9yZSk7CgogICAgICAgIGNvbnN0IGdldHRlciA9IHNob3dGZWVkcyhncm91cHMsIHF1ZXJ5LCB7IGZlZWRsaXN0LCBsb2FkaW5nLCBzaG93bW9yZSB9KTsKICAgICAgICBpZiAodW5yZWFkKSB7CiAgICAgICAgICBpbml0VW5yZWFkKGdyb3VwcywgcXVlcnksIGdldHRlciwgeyBmZWVkbGlzdCB9KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyDkuIvmjonovrnmoI/nu4TlhoXnlKjmiLfnmoTnu4Tku7YKICAgICAgY29uc3Qgd2F0Y2hNZW1iZXJzID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IG1lbWJlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndjZfcGxfcmlnaHRtb2RfZ3JvdXBzJyk7CiAgICAgICAgaWYgKG1lbWJlcnMpIG1lbWJlcnMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZW1iZXJzKTsKICAgICAgfTsKCiAgICAgIC8vIOWIneWni+WMluaLvOWHkemmlumhteeahOmAu+i+kQogICAgICBjb25zdCBzaG93RmVlZHMgPSBmdW5jdGlvbiAoZ3JvdXBzLCBxdWVyeSwgZG9tKSB7CiAgICAgICAgY29uc3QgZ2V0dGVyID0gcmVxdWVzdC5mZWVkc0J5R3JvdXBzKGdyb3VwcywgcXVlcnkpOwogICAgICAgIHNob3dNb3JlRmVlZHMoZ2V0dGVyLCBjb3VudCwgZG9tKTsKICAgICAgICByZXR1cm4gZ2V0dGVyOwogICAgICB9OwoKICAgICAgLy8g5LiA5p2h5LiA5p2h5b6A5raI5oGv5rWB6YeM6Z2i5aGe5YaF5a65CiAgICAgIGNvbnN0IHNob3dNb3JlRmVlZHMgPSBhc3luYyBmdW5jdGlvbiAoZ2V0dGVyLCByZW1haW4sIGRvbSkgewogICAgICAgIGNvbnN0IGhhc05leHQgPSBhd2FpdCBnZXR0ZXIuaGFzTmV4dCgpOwogICAgICAgIGlmICghaGFzTmV4dCkgewogICAgICAgICAgZXZlcnl0aGluZ0RvbmUoZG9tKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHJlbWFpbiA9PT0gMCkgewogICAgICAgICAgYXdhaXQgd2FpdFNob3dNb3JlKGRvbSk7CiAgICAgICAgICByZW1haW4gPSBjb3VudDsKICAgICAgICB9CiAgICAgICAgY29uc3QgZmVlZCA9IGF3YWl0IGdldHRlci5uZXh0KCk7CiAgICAgICAgaWYgKGZlZWQudHlwZSA9PT0gJ2ZlZWQnKSB7CiAgICAgICAgICByZW5kZXJGZWVkKGZlZWQuZG9tLCBkb20pOwogICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7CiAgICAgICAgICByZW1haW4tLTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVuZGVyRG9uZShmZWVkLmdyb3VwLCBkb20pOwogICAgICAgIH0KICAgICAgICBzaG93TW9yZUZlZWRzKGdldHRlciwgcmVtYWluLCBkb20pOwogICAgICB9OwoKICAgICAgLy8g5a6M5oiQ5LiA57uE5pi+56S65ZCO562J55So5oi355qE5pON5L2c5YaN57un57utCiAgICAgIGNvbnN0IHdhaXRTaG93TW9yZSA9IGFzeW5jIGZ1bmN0aW9uICh7IGZlZWRsaXN0LCBsb2FkaW5nLCBzaG93bW9yZSB9KSB7CiAgICAgICAgbG9hZGluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIHNob3dtb3JlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgY29uc3QgbGlzdGVuZXIgPSAoKSA9PiB7CiAgICAgICAgICAgIHNob3dtb3JlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlzdGVuZXIpOwogICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICB9OwogICAgICAgICAgc2hvd21vcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsaXN0ZW5lcik7CiAgICAgICAgfSk7CiAgICAgICAgbG9hZGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICBzaG93bW9yZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGlmIChjbGVhcikgewogICAgICAgICAgY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX2dsb2JhbF9uYXYnKTsKICAgICAgICAgIGNvbnN0IG5hdkJvdHRvbSA9IG5hdi5jbGllbnRUb3AgKyBuYXYuY2xpZW50SGVpZ2h0OwogICAgICAgICAgY29uc3QgZmVlZGxpc3RUb3AgPSBmZWVkbGlzdC5wYXJlbnROb2RlLm9mZnNldFRvcDsKICAgICAgICAgIGNvbnN0IG1hcmdpbiA9IDEwOwogICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IGZlZWRsaXN0VG9wIC0gKG5hdkJvdHRvbSArIG1hcmdpbik7CiAgICAgICAgICB3aGlsZSAoZmVlZGxpc3QuZmlyc3RDaGlsZCAhPT0gbG9hZGluZykgewogICAgICAgICAgICBmZWVkbGlzdC5yZW1vdmVDaGlsZChmZWVkbGlzdC5maXJzdENoaWxkKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyDmmL7npLrkuIDmnaHmtojmga8KICAgICAgY29uc3QgcmVuZGVyRmVlZCA9IGZ1bmN0aW9uIChmZWVkLCB7IGZlZWRsaXN0LCBsb2FkaW5nIH0pIHsKICAgICAgICBmZWVkbGlzdC5pbnNlcnRCZWZvcmUoZmVlZCwgbG9hZGluZyk7CiAgICAgIH07CgogICAgICAvLyDlrozmiJDkuIDkuKrliIbnu4TnmoTliqDovb0KICAgICAgY29uc3QgcmVuZGVyRG9uZSA9IGZ1bmN0aW9uIChncm91cCwgeyBmZWVkbGlzdCwgbG9hZGluZyB9KSB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJXQl9jYXJkd3JhcCBTX2JnMiB5YXdmLW11bHRpR3JvdXBEb25lIj48ZGl2IGNsYXNzPSJXQl9jYXJkdGl0bGVfYSBXX3RjIHlhd2YtbXVsdGlHcm91cERvbmVUaXRsZSI+PC9kaXY+PC9kaXY+JzsKICAgICAgICBjb25zdCB0aXRsZUNvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1tdWx0aUdyb3VwRG9uZVRpdGxlJyk7CiAgICAgICAgY29uc3QgW3RleHRCZWZvcmUsIHRleHRBZnRlcl0gPSBpMThuLmZlZWRzSG9tZVBhZ2VEb25lR3JvdXAuc3BsaXQoJ3sxfScpOwogICAgICAgIHRpdGxlQ29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHRCZWZvcmUpKTsKICAgICAgICBjb25zdCBncm91cE5hbWVDb250YWluZXIgPSB0aXRsZUNvbnRhaW5lci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykpOwogICAgICAgIHRpdGxlQ29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHRBZnRlcikpOwogICAgICAgIHJlcXVlc3QuZ3JvdXBMaXN0KCkudGhlbihncm91cExpc3QgPT4gewogICAgICAgICAgY29uc3QgZ290R3JvdXAgPSBncm91cExpc3QuZmluZCgoeyBpZCB9KSA9PiBpZCA9PT0gZ3JvdXAuaWQpOwogICAgICAgICAgaWYgKGdvdEdyb3VwKSBncm91cE5hbWVDb250YWluZXIudGV4dENvbnRlbnQgPSBnb3RHcm91cC5uYW1lOwogICAgICAgIH0pOwogICAgICAgIGZlZWRsaXN0Lmluc2VydEJlZm9yZShjb250YWluZXIsIGxvYWRpbmcpOwogICAgICB9OwoKICAgICAgLy8g5omA5pyJ5YiG57uE6YO95a6M5oiQ5Yqg6L29CiAgICAgIGNvbnN0IGV2ZXJ5dGhpbmdEb25lID0gZnVuY3Rpb24gKHsgZmVlZGxpc3QsIGxvYWRpbmcsIHNob3dtb3JlIH0pIHsKICAgICAgICBmZWVkbGlzdC5yZW1vdmVDaGlsZChsb2FkaW5nKTsKICAgICAgICBmZWVkbGlzdC5yZW1vdmVDaGlsZChzaG93bW9yZSk7CiAgICAgIH07CgogICAgICBjb25zdCBzaG93VW5yZWFkRmVlZHMgPSBhc3luYyBmdW5jdGlvbiAoZ3JvdXBzLCBxdWVyeSwgZ2V0dGVyLCB1bnJlYWRDaGVja2VyLCB7IG5ld2ZlZWR0aXAsIGZlZWRsaXN0IH0sIHN0YXR1cykgewogICAgICAgIHVucmVhZENoZWNrZXIucGF1c2UoKTsKICAgICAgICBpZiAoc3RhdHVzID4gY291bnQgJiYgIWF1dG9Mb2FkKSB7CiAgICAgICAgICAvLyDmnKror7vmtojmga/lpKrlpJrkuobvvIzmiJHku6znm7TmjqXliLfmlrDnrpfkuoYKICAgICAgICAgIGZlZWRsaXN0LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgbmV3ZmVlZHRpcC5yZW1vdmUoKTsKICAgICAgICAgIGZpbGxGZWVkTGlzdChmZWVkbGlzdCwgcXVlcnkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIWF1dG9Mb2FkKSB7CiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBuZXdmZWVkdGlwLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICAgICAgbGluay50ZXh0Q29udGVudCA9IGkxOG4uZmVlZHNVbnJlYWRMb2FkaW5nOwogICAgICAgICAgICBjb25zdCBsb2FkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpOwogICAgICAgICAgICBsb2FkaW5nLmNsYXNzTmFtZSA9ICdXX2xvYWRpbmcnOwogICAgICAgICAgICBsaW5rLmluc2VydEJlZm9yZShsb2FkaW5nLCBsaW5rLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICBmZWVkbGlzdC5pbnNlcnRCZWZvcmUobmV3ZmVlZHRpcCwgZmVlZGxpc3QuZmlyc3RDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBmcmFnZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICBjb25zdCBuZXdHZXR0ZXIgPSByZXF1ZXN0LmZlZWRzQnlHcm91cHMoZ3JvdXBzLCBxdWVyeSk7CiAgICAgICAgICBmb3IgKGxldCBsaW1pdCA9IGNvdW50OyBsaW1pdDsgbGltaXQtLSkgewogICAgICAgICAgICBjb25zdCBmZWVkID0gYXdhaXQgbmV3R2V0dGVyLm5leHQoKTsKICAgICAgICAgICAgaWYgKGZlZWQudHlwZSAhPT0gJ2ZlZWQnKSBjb250aW51ZTsKICAgICAgICAgICAgaWYgKGdldHRlci5pc1Nob3duKGZlZWQpKSBicmVhazsKICAgICAgICAgICAgY29uc3QgZmVlZERvbSA9IGZyYWdlbWVudC5hcHBlbmRDaGlsZChmZWVkLmRvbSk7CiAgICAgICAgICAgIGlmIChhdXRvTG9hZCkgewogICAgICAgICAgICAgIGZlZWREb20uc2V0QXR0cmlidXRlKCd5YXdmLWZlZWQtcHJlbG9hZCcsICd1bnJlYWQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBnZXR0ZXIuYWRkU2hvd24oZmVlZCk7CiAgICAgICAgICB9CiAgICAgICAgICBmZWVkbGlzdC5pbnNlcnRCZWZvcmUoZnJhZ2VtZW50LCBmZWVkbGlzdC5maXJzdENoaWxkKTsKICAgICAgICAgIGlmICghYXV0b0xvYWQpIHsKICAgICAgICAgICAgbmV3ZmVlZHRpcC5yZW1vdmUoKTsKICAgICAgICAgIH0KICAgICAgICAgIHVucmVhZENoZWNrZXIucnVuKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLy8g5pi+56S65paw5raI5oGv5o+Q56S65qiq5bmFCiAgICAgIGNvbnN0IG5vdGljZVVucmVhZCA9IGZ1bmN0aW9uIChkYXRhLCBncm91cHMsIHF1ZXJ5LCBnZXR0ZXIsIHsgZmVlZGxpc3QgfSwgdW5yZWFkQ2hlY2tlcikgewogICAgICAgIGNvbnN0IHN0YXR1cyA9IGRhdGEuc3RhdHVzOwogICAgICAgIGlmICghc3RhdHVzKSB7CiAgICAgICAgICBjb25zdCBuZXdmZWVkdGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3lhd2YtZ3JvdXAtbmV3LWZlZWQtdGlwJyk7CiAgICAgICAgICBpZiAobmV3ZmVlZHRpcCkgbmV3ZmVlZHRpcC5yZW1vdmUoKTsKICAgICAgICB9IGVsc2UgaWYgKGF1dG9Mb2FkKSB7CiAgICAgICAgICBzaG93VW5yZWFkRmVlZHMoZ3JvdXBzLCBxdWVyeSwgZ2V0dGVyLCB1bnJlYWRDaGVja2VyLCB7IG5ld2ZlZWR0aXA6IG51bGwsIGZlZWRsaXN0IH0sIHN0YXR1cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3lhd2YtZ3JvdXAtbmV3LWZlZWQtdGlwJykpIHsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0JfY2FyZHdyYXAgV0Jfbm90ZXMiIGlkPSJ5YXdmLWdyb3VwLW5ldy1mZWVkLXRpcCI+PGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PC9hPjwvZGl2Pic7CiAgICAgICAgICAgIGNvbnN0IG5ld2ZlZWR0aXAgPSBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICAgICAgZmVlZGxpc3QucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3ZmVlZHRpcCwgZmVlZGxpc3QpOwogICAgICAgICAgICBjb25zdCBjbGlja1RvU2hvd1VucmVhZEZlZWRzID0gKCkgPT4gewogICAgICAgICAgICAgIHNob3dVbnJlYWRGZWVkcyhncm91cHMsIHF1ZXJ5LCBnZXR0ZXIsIHVucmVhZENoZWNrZXIsIHsgbmV3ZmVlZHRpcCwgZmVlZGxpc3QgfSwgbmV3ZmVlZHRpcC5kYXRhc2V0LnN0YXR1cyk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG5ld2ZlZWR0aXAucXVlcnlTZWxlY3RvcignYScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tUb1Nob3dVbnJlYWRGZWVkcyk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gbG9hZENvbnRlbnRLZXkoZXZlbnQpIHsKICAgICAgICAgICAgICBpZiAoa2V5Ym9hcmQuZXZlbnQoZXZlbnQpICE9PSBrZXlib2FyZC5jb2RlLlBFUklPRCkgcmV0dXJuOwogICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgbG9hZENvbnRlbnRLZXkpOwogICAgICAgICAgICAgIGNsaWNrVG9TaG93VW5yZWFkRmVlZHMoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBuZXdmZWVkdGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3lhd2YtZ3JvdXAtbmV3LWZlZWQtdGlwJyk7CiAgICAgICAgICBpZiAoTnVtYmVyKG5ld2ZlZWR0aXAuZGF0YXNldC5zdGF0dXMpICE9PSBzdGF0dXMpIHsKICAgICAgICAgICAgbmV3ZmVlZHRpcC5kYXRhc2V0LnN0YXR1cyA9IHN0YXR1czsKICAgICAgICAgICAgbmV3ZmVlZHRpcC5xdWVyeVNlbGVjdG9yKCdhJykudGV4dENvbnRlbnQgPSBpMThuLmZlZWRzVW5yZWFkVGlwV2l0aENvdW50LnJlcGxhY2UoJ3sxfScsIHN0YXR1cyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLy8g5Yid5aeL5YyW5pyq6K+75o+Q56S6CiAgICAgIGNvbnN0IGluaXRVbnJlYWQgPSBhc3luYyBmdW5jdGlvbiAoZ3JvdXBzLCBxdWVyeSwgZ2V0dGVyLCB7IGZlZWRsaXN0IH0pIHsKICAgICAgICBpZiAoIWVudi5jb25maWcuc3RrSW5mb1N1cHBvcnRlZCkgcmV0dXJuOwogICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IFsnaXNfb3JpJywgJ2lzX2ZvcndhcmQnLCAnaXNfdGV4dCcsICdpc19waWMnLCAnaXNfdmlkZW8nLCAnaXNfbXVzaWMnLCAnaXNfYXJ0aWNsZScsICdrZXlfd29yZCcsICdzdGFydF90aW1lJywgJ2VuZF90aW1lJywgJ2lzX3NlYXJjaCcsICdpc19zZWFyY2hhZHYnXTsKICAgICAgICAvLyDkuI3mlK/mjIHmkJzntKLpobXpnaIKICAgICAgICBpZiAoc2VhcmNoUGFyYW1zLnNvbWUocGFyYW0gPT4gcXVlcnkuaGFzKHBhcmFtKSkpIHJldHVybjsKICAgICAgICBjb25zdCBzdGtJbmZvID0gYXdhaXQgc3RrLmluZm87CiAgICAgICAgY29uc3QgdW5yZWFkQ2hlY2tlciA9IHJlcXVlc3QudW5yZWFkQnlHcm91cHMoZ3JvdXBzLCBzdGtJbmZvKTsKICAgICAgICBjb25zdCBjYWxsYmFjayA9IGRhdGEgPT4gewogICAgICAgICAgbm90aWNlVW5yZWFkKGRhdGEsIGdyb3VwcywgcXVlcnksIGdldHRlciwgeyBmZWVkbGlzdCB9LCB1bnJlYWRDaGVja2VyKTsKICAgICAgICB9OwogICAgICAgIHVucmVhZENoZWNrZXIud2F0Y2goY2FsbGJhY2spOwogICAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gd2FpdEZlZWRMaXN0UmVtb3ZlZCgpIHsKICAgICAgICAgIGlmIChkb2N1bWVudC5jb250YWlucyhmZWVkbGlzdCkpIHJldHVybjsKICAgICAgICAgIHVucmVhZENoZWNrZXIudW53YXRjaChjYWxsYmFjayk7CiAgICAgICAgICBvYnNlcnZlci5kb20ucmVtb3ZlKHdhaXRGZWVkTGlzdFJlbW92ZWQpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgY2hlY2tQYWdlKCk7CgogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBmZWVkc0F1dG9Mb2FkOiB7IGNuOiAn6Ieq5Yqo6L295YWl5paw5b6u5Y2ae3tpfX0nLCB0dzogJ+iHquWLlei8ieWFpeaWsOW+ruWNmnt7aX19JywgZW46ICdMb2FkIG5ldyBmZWVkcyBhdXRvbWF0aWNhbGx5IHt7aX19JyB9LAogICAgZmVlZHNBdXRvTG9hZERldGFpbDogewogICAgICBjbjogJ+WQr+eUqOivpemAiemhueWPr+S7peWcqOaYvuekuuKAnOacieaWsOW+ruWNmuKAneeahOaPkOekuuaoquW5heWHuueOsOWJjei/h+a7pOW+ruWNmu+8jOmBv+WFjeeCueW8gOaPkOekuu+8jOS9huaYr+W5tuayoeacieWIt+WHuuadpeW+ruWNmueahOaDheWGte+8m+WboOS4uuaJqeWxleS8muivu+WPluWvueW6lOW+ruWNmuS7peS+v+i/h+a7pO+8jOi/meS6m+W+ruWNmuS8muiiq+agh+iusOS4uuKAnOW3suivu+KAne+8jOWboOatpOWLvumAieatpOmhueS8muWvvOiHtOWcqOWFtuS7luiuvuWkh+S4iuaUtuS4jeWIsOacieaWsOW+ruWNmuaPkOekuuOAgicsCiAgICB9LAogICAgZmVlZHNBdXRvU2hvdzogewogICAgICBjbjogJ+WKoOi9veWQjuiHquWKqOWxleekunx7e2JhY2tncm91bmR9femhtemdoua0u+WKqOaXtuaaguWBnCcsCiAgICAgIHR3OiAn6LyJ5YWl5b6M6Ieq5YuV5bGV56S6fHt7YmFja2dyb3VuZH196aCB6Z2i5rS76LqN5pmC5pqr5YGcJywKICAgICAgZW46ICdTaG93IGZlZWRzIGFmdGVyIGF1dG9tYXRpY2FsbHkgbG9hZGVkfCB7e2JhY2tncm91bmR9fSBwYXVzZSB3aGVuIHBhZ2UgYWN0aXZlJywKICAgIH0sCiAgICBmZWVkc0Rlc2t0b3BOb3RpZnk6IHsKICAgICAgY246ICfoh6rliqjovb3lhaXlkI7mmL7npLrmoYzpnaLmj5DnpLp8fHt7d2hpdGVsaXN0fX3ku4Xlr7nlkb3kuK3mgLvmmK/mmL7npLrop4TliJnnmoTlvq7ljZrnlJ/mlYgnLAogICAgICB0dzogJ+iHquWLlei8ieWFpeW+jOaYvuekuuahjOmdouaPkOekunx8e3t3aGl0ZWxpc3R9feWDheWwjeWRveS4ree4veaYr+mhr+ekuuimj+WJh+eahOW+ruWNmueUn+aViCcsCiAgICAgIGVuOiAnU2hvdyBkZXNrdG9wIG5vdGlmaWNhdGlvbiBhZnRlciBhdXRvbWF0aWNhbGx5IGxvYWRlZHx8e3t3aGl0ZWxpc3R9fSBvbmx5IGFwcGx5IHRvIGZlZWRzIGhpdCBhbHdheXMgc2hvdyBydWxlcycsCiAgICB9LAogIH0pOwoKICBjb25zdCBzaG93VW5yZWFkRmVlZHMgPSBmdW5jdGlvbiAoKSB7CiAgICBsZXQgbmV3ZmVlZHRpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd5YXdmLW5ldy1mZWVkLXRpcCcpOwogICAgaWYgKCFuZXdmZWVkdGlwKSByZXR1cm47CiAgICBuZXdmZWVkdGlwLnJlbW92ZSgpOwogICAgY29uc3QgdW5yZWFkRmVlZHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1t5YXdmLWZlZWQtcHJlbG9hZD0idW5yZWFkIl0nKSk7CiAgICB1bnJlYWRGZWVkcy5mb3JFYWNoKGZlZWQgPT4gewogICAgICBmZWVkLnNldEF0dHJpYnV0ZSgneWF3Zi1mZWVkLXByZWxvYWQnLCAnc2hvdycpOwogICAgfSk7CiAgfTsKCiAgaG9tZXBhZ2UuYXV0b0xvYWQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfaG9tZXBhZ2VfYXV0b19sb2FkJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGhvbWVwYWdlLmhvbWVwYWdlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNBdXRvTG9hZCwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNBdXRvTG9hZERldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewoKICAgICAgLy8g5a6M5oiQ6L+H5ruk5ZCO5YaN5o+Q56S65pyJ5pyq6K+75raI5oGvCiAgICAgIG9ic2VydmVyLmZlZWQub25GaW5hbGx5KGZ1bmN0aW9uIGNvdW50VW5yZWFkRmVlZHMoKSB7CiAgICAgICAgY29uc3QgdW5yZWFkRmVlZHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1t5YXdmLWZlZWQtcHJlbG9hZD0idW5yZWFkIl0nKSk7CiAgICAgICAgY29uc3Qgc3RhdHVzID0gdW5yZWFkRmVlZHMubGVuZ3RoOwogICAgICAgIGxldCBuZXdmZWVkdGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3lhd2YtbmV3LWZlZWQtdGlwJyk7CiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMCAmJiBuZXdmZWVkdGlwKSB7CiAgICAgICAgICBuZXdmZWVkdGlwLnJlbW92ZSgpOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzICE9PSAwKSB7CiAgICAgICAgICBpZiAoIW5ld2ZlZWR0aXApIHsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0JfY2FyZHdyYXAgV0Jfbm90ZXMiIGlkPSJ5YXdmLW5ldy1mZWVkLXRpcCI+PGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PC9hPjwvZGl2Pic7CiAgICAgICAgICAgIG5ld2ZlZWR0aXAgPSBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICAgICAgY29uc3QgZmVlZGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZCcpOwogICAgICAgICAgICBmZWVkbGlzdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdmZWVkdGlwLCBmZWVkbGlzdCk7CiAgICAgICAgICAgIG5ld2ZlZWR0aXAucXVlcnlTZWxlY3RvcignYScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd1VucmVhZEZlZWRzKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGxpbmsgPSBuZXdmZWVkdGlwLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICAgIGlmIChzdGF0dXMgPiAwICYmIHN0YXR1cyA8IDEwMCkgewogICAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gaTE4bi5mZWVkc1VucmVhZFRpcFdpdGhDb3VudC5yZXBsYWNlKCd7MX0nLCBzdGF0dXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGluay50ZXh0Q29udGVudCA9IGkxOG4uZmVlZHNVbnJlYWRUaXA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIOWTjeW6lOmUruebmOaTjeS9nAogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIGxvYWRQcmVsb2FkZWRDb250ZW50S2V5KGV2ZW50KSB7CiAgICAgICAgaWYgKGtleWJvYXJkLmV2ZW50KGV2ZW50KSAhPT0ga2V5Ym9hcmQuY29kZS5QRVJJT0QpIHJldHVybjsKICAgICAgICBzaG93VW5yZWFkRmVlZHMoKTsKICAgICAgfSk7CgogICAgICAvLyDpmpDol4/pooTliqDovb3nmoTlhoXlrrkKICAgICAgY3NzLmFwcGVuZChgCiN2Nl9wbF9jb250ZW50X2hvbWVmZWVkIFt5YXdmLWZlZWQtcHJlbG9hZD0idW5yZWFkIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KI2hvbWVfbmV3X2ZlZWRfdGlwIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkIFtub2RlLXR5cGU9Inlhd2YtZmVlZF9saXN0X3RpbWVUaXAiXSwgLldCX2ZlZWQgW25vZGUtdHlwZT0iZmVlZF9saXN0X3RpbWVUaXAiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQouV0JfZmVlZCBhLm5vdGVzW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfbmV3QmFyIl1bbm9kZS10eXBlPSJmZWVkX2xpc3RfbmV3QmFyIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQgZGl2LldfbG9hZGluZ1tyZXF1ZXN0dHlwZT0ibmV3RmVlZCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkIC5XQl9ub3Rlc1tyZXF1ZXN0dHlwZT0ibmV3RmVlZCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkIFtub2RlLXR5cGU9Imxhenlsb2FkIl06bm90KDpsYXN0LWNoaWxkKSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQpgKTsKCiAgICAgIC8vIOajgOafpeacieaWsOWGheWuuei9veWFpe+8jOW5tumakOiXj+Wug+S7rAogICAgICBvYnNlcnZlci5mZWVkLm9uQmVmb3JlKGZ1bmN0aW9uIGhpZGVBdXRvTG9hZEZlZWRzKGZlZWQpIHsKICAgICAgICBpZiAoZmVlZC5oYXNBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1wcmVsb2FkJykpIHJldHVybjsKICAgICAgICBsZXQgaXNVbnJlYWQgPSB0cnVlOwogICAgICAgIC8vIOWmguaenOS4gOWkqeS4gOadoeW+ruWNmuWHuueOsOWcqOS6hueOsOacieeahOW+ruWNmueahOWQjumdou+8jOmCo+S5iOWPr+iDveaYr+WboOS4uuWKqOaAgeWKoOi9veWhnui/m+adpeeahAogICAgICAgIGlmIChmZWVkLm1hdGNoZXMoJy5XQl9mZWVkX3R5cGVbeWF3Zi1mZWVkLXByZWxvYWQ9InNob3ciXSB+IConKSkgaXNVbnJlYWQgPSBmYWxzZTsKICAgICAgICAvLyDkvYbmmK/lnKjlkI7pnaLkuI3kuIDlrprmmK/njrDlnKjnmoTlvq7ljZrnmoTlvJ/lvJ/lprnlprnvvIzov5jlj6/og73mmK/lvJ/lvJ/lprnlprnnmoTlranlrZAKICAgICAgICAvLyDov5nmmK/lm6DkuLrku5bku6zlnKjlh7rnjrDml7bkvJrmnInkuIDkuKrlh7rnjrDnmoTliqjnlLvvvIzkuLrkuoblgZrov5nkuKrliqjnlLvmiorku5bku6zlpZflnKjkuIDkuKrniLblr7nosaHph4zpnaLkuoYKICAgICAgICAvLyDliqjnlLvmkq3mlL7lrozmiJDkuYvlkI7kvJrooqvmi7/lh7rmnaXnmoTvvIjkuI3ov4for7Tlrp7or53vvIzov5nliqjnlLvkuIDoiKzkurrms6jmhI/kuI3liLDvvIkKICAgICAgICBpZiAoZmVlZC5tYXRjaGVzKCcuV0JfZmVlZF90eXBlW3lhd2YtZmVlZC1wcmVsb2FkPSJzaG93Il0gfiAqIConKSkgaXNVbnJlYWQgPSBmYWxzZTsKICAgICAgICAvLyDmnIDml6nlh7rnjrDnmoTlh6DmnaHkuI3nrpflu7bov5/liqDovb3nmoQKICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLldCX2ZlZWRfdHlwZVt5YXdmLWZlZWQtcHJlbG9hZF0nKS5sZW5ndGggPCA1KSBpc1VucmVhZCA9IGZhbHNlOwogICAgICAgIC8vIOWmguaenOS9nOiAheaYr+iHquW3semCo+S5iOS4jeeul+W7tui/n+WKoOi9veeahO+8iOWPkeW+ruiWhOeahOaXtuWAmeS8muaPkuWFpeWIsOacgOWJjemdou+8iQogICAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5hdXRob3IuaWQoZmVlZCk7CiAgICAgICAgY29uc3QgW2ZhdXRob3JdID0gZmVlZFBhcnNlci5mYXV0aG9yLmlkKGZlZWQpOwogICAgICAgIGlmIChpbml0LnBhZ2UuJENPTkZJRy51aWQgPT09IChmYXV0aG9yIHx8IGF1dGhvcikpIGlzVW5yZWFkID0gZmFsc2U7CiAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1wcmVsb2FkJywgaXNVbnJlYWQgPyAndW5yZWFkJyA6ICdzaG93Jyk7CiAgICAgIH0pOwoKICAgICAgLy8g6Ieq5Yqo6L295YWl5paw5YaF5a65CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gd2F0Y2hOZXdGZWVkVGlwKCkgewogICAgICAgIGNvbnN0IHRpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNob21lX25ld19mZWVkX3RpcCcpOwogICAgICAgIGlmICghdGlwKSByZXR1cm47CiAgICAgICAgLy8g5aaC5p6c5LiN5Zyo56ys5LiA6aG15oiW6ICF5pyJ54m55q6K55qE6L+H5ruk5p2h5Lu26YKj5LmI5rKh5rOV6Ieq5Yqo6L295YWlCiAgICAgICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2gpOwogICAgICAgIGNvbnN0IGNhbm5vdExvYWQgPSBzZWFyY2guZ2V0KCdwYWdlJykgPiAxIHx8IFsnaXNfb3JpJywgJ2lzX3BpYycsICdpc192aWRlbycsICdpc19tdXNpYycsICdpc19zZWFyY2gnXS5zb21lKGtleSA9PiBzZWFyY2guZ2V0KGtleSkpOwogICAgICAgIGlmIChjYW5ub3RMb2FkKSByZXR1cm47CiAgICAgICAgLy8g5b6u5Y2a6Ieq5bex5oqK5o+Q56S655qE54q25oCB5ZKM5pWw6YeP5YaZ5Zyo5LqG5o+Q56S65qiq5bmF6YKj5Liq5a+56LGh5LiKCiAgICAgICAgY29uc3QgJHRpcCA9IHRpcCAmJiBicm93c2VySW5mby5uYW1lID09PSAnRmlyZWZveCcgJiYgdGlwLndyYXBwZWRKU09iamVjdCB8fCB0aXA7CiAgICAgICAgLy8gc3RhdHVzIOS4jeaYryBmb2xsb3dIb3Qg6ICM5LiUIGNvdW50ID4gMCDlsLHor7TmmI7mnInmlrDmtojmga8KICAgICAgICBpZiAoISR0aXAgfHwgJHRpcC5zdGF0dXMgPT09ICdmb2xsb3dIb3QnKSByZXR1cm47CiAgICAgICAgaWYgKCEkdGlwLmNvdW50KSByZXR1cm47CiAgICAgICAgLy8g5aaC5p6c6LaF6L+HIDUwIOadoeS7luS8muiHquWKqOmHjeaWsOWKoOi9ve+8jOaIkeS7rOmql+S7luS4gOS4iwogICAgICAgIGlmICgkdGlwLmNvdW50ID4gNTApICR0aXAuY291bnQgPSA1MDsKICAgICAgICB0aXAuY2xpY2soKTsKICAgICAgICBpZiAodGlwLnBhcmVudE5vZGUpIHRpcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRpcCk7CiAgICAgIH0pOwoKICAgIH0sCiAgfSk7CgogIGhvbWVwYWdlLmRlc2t0b3BOb3RpZnkgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfaG9tZXBhZ2VfZGVza3RvcF9ub3RpZnknLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogaG9tZXBhZ2UuaG9tZXBhZ2UsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc0Rlc2t0b3BOb3RpZnksCiAgICByZWY6IHsgd2hpdGVsaXN0OiB7IHR5cGU6ICdib29sZWFuJyB9IH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3Qgd2hpdGVsaXN0ID0gdGhpcy5yZWYud2hpdGVsaXN0LmdldENvbmZpZygpOwoKICAgICAgLy8g5a6M5oiQ6L+H5ruk5ZCO5YaN5o+Q56S65pyJ5pyq6K+75raI5oGvCiAgICAgIG9ic2VydmVyLmZlZWQub25GaW5hbGx5KGZ1bmN0aW9uIGNvdW50VW5yZWFkRmVlZHMoKSB7CiAgICAgICAgY29uc3QgdW5yZWFkRmVlZHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1t5YXdmLWZlZWQtcHJlbG9hZD0idW5yZWFkIl06bm90KFt5YXdmLWZlZWQtbm90aWZ5XSknKSk7CiAgICAgICAgdW5yZWFkRmVlZHMuZm9yRWFjaChhc3luYyBmZWVkID0+IHsKICAgICAgICAgIGZlZWQuc2V0QXR0cmlidXRlKCd5YXdmLWZlZWQtbm90aWZ5JywgJycpOwogICAgICAgICAgaWYgKHdoaXRlbGlzdCAmJiBmZWVkLmdldEF0dHJpYnV0ZSgneWF3Zi1mZWVkLWRpc3BsYXknKSAhPT0gJ3Nob3cnKSByZXR1cm47CiAgICAgICAgICBjb25zdCB0ZXh0ID0gZmVlZFBhcnNlci50ZXh0LnNpbXBsZShmZWVkKTsKICAgICAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5hdXRob3IubmFtZShmZWVkKTsKICAgICAgICAgIGNvbnN0IGF2YXRhciA9IGZlZWRQYXJzZXIuYXV0aG9yLmF2YXRhcihmZWVkKTsKICAgICAgICAgIGlmICghdGV4dCB8fCAhYXV0aG9yIHx8ICFhdmF0YXIpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHRydW5ja2VkID0gdGV4dC5sZW5ndGggPiAzMDAgPyB0ZXh0LnNsaWNlKDAsIDI1MCkgKyAn4oCm4oCmJyA6IHRleHQ7CiAgICAgICAgICBjb25zdCB1c2VyUmVzcG9uc2UgPSBhd2FpdCBub3RpZmljYXRpb25zLnNob3coewogICAgICAgICAgICB0aXRsZTogYXV0aG9yLAogICAgICAgICAgICBjb250ZW50OiB0cnVuY2tlZCwKICAgICAgICAgICAgaWNvbjogYXZhdGFyLAogICAgICAgICAgICBkdXJhdGlvbjogNTAwMCArIDE1ICogdHJ1bmNrZWQubGVuZ3RoLAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoIXVzZXJSZXNwb25zZSkgcmV0dXJuOwogICAgICAgICAgc2hvd1VucmVhZEZlZWRzKCk7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArPSBmZWVkLmdldENsaWVudFJlY3RzKClbMF0udG9wIC0gODA7CiAgICAgICAgICAgIGNvbnN0IGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdLZXlib2FyZEV2ZW50Jyk7CiAgICAgICAgICAgIGV2dC5pbml0S2V5RXZlbnQoJ2tleWRvd24nLCB0cnVlLCB0cnVlLCBudWxsLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgdXRpbC5rZXlib2FyZC5jb2RlLkosIDApOwogICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlzcGF0Y2hFdmVudChldnQpOwogICAgICAgICAgICAvLyDogYrlpKnnqpflj6PvvIjmiZPlvIDlsIbogYrlpKnnqpflj6PlhoXltYznmoTlip/og73lkI7vvInlsZXlvIDnmoTml7blgJnlvojlvbHlk43lvq7ljZrpmIXor7sKICAgICAgICAgICAgLy8g5omA5Lul6L+Z6YeM6YCB5LiA5LiqIGNsaWNrIOWPr+S7peaKiuiBiuWkqeeql+WPo+aUtui1t+adpQogICAgICAgICAgICBmZWVkLmNsaWNrKCk7CiAgICAgICAgICB9LCAwKTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvZmlsdGVyL3Byb2ZpbGUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgZmlsdGVyID0geWF3Zi5ydWxlcy5maWx0ZXI7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uZmVlZHNQcm9maWxlR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn55So5oi35Li76aG1JywKICAgIHR3OiAn55So5oi25Li76aCBJywKICAgIGVuOiAnUHJvZmlsZScsCiAgfTsKCiAgY29uc3QgcHJvZmlsZSA9IGZpbHRlci5wcm9maWxlID0ge307CiAgcHJvZmlsZS5wcm9maWxlID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZpbHRlci5maWx0ZXIsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc1Byb2ZpbGVHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLnByb2ZpbGVTaG93QWxsID0gewogICAgY246ICfnlKjmiLfkuLvpobXpu5jorqTmmL7npLrlhajpg6jlvq7ljZrogIzpnZ7ng63pl6jlvq7ljZonLAogICAgdHc6ICfnlKjmiLbkuLvpoIHpu5joqo3poa/npLrlhajpg6jlvq7ljZrogIzpnZ7ng63pl6jlvq7ljZonLAogICAgZW46ICdQZXJzb25hbCBwYWdlIHNob3cgYWxsIFdlaWJvIGluc3RlYWQgb2YgaG90IGJ5IGRlZmF1bHQnLAogIH07CgogIHByb2ZpbGUucHJvZmlsZVNob3dBbGwgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfcHJvZmlsZV9zaG93X2FsbCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBwcm9maWxlLnByb2ZpbGUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5wcm9maWxlU2hvd0FsbCwKICAgIGFpbml0KCkgewogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIHJlZGlyZWN0UGVyc2lvbmFsV2VpYm9SZWRpcmVjdCgpIHsKICAgICAgICBjb25zdCBwcm9maWxlTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2lkXj0iUGxfT2ZmaWNpYWxfUHJvZmlsZUZlZWROYXYiXScpOwogICAgICAgIGlmICghcHJvZmlsZU5hdikgcmV0dXJuOwogICAgICAgIGNvbnN0IGhvdEJ1dHRvbiA9IHByb2ZpbGVOYXYucXVlcnlTZWxlY3RvcignbGlbYWN0aW9uLXR5cGU9InNlYXJjaF90eXBlIl1bYWN0aW9uLWRhdGEqPSJpc19ob3Q9MSJdOm5vdChbYWN0aW9uLWRhdGEqPSJ5YXdmX25vdGFsbD0xIl0pJyk7CiAgICAgICAgaWYgKGhvdEJ1dHRvbikgaG90QnV0dG9uLnNldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnLCBob3RCdXR0b24uZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpICsgJyZ5YXdmX25vdGFsbD0xJyk7CiAgICAgICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2gpOwogICAgICAgIGlmIChzZWFyY2guZ2V0KCdpc19ob3QnKSA9PT0gJzEnICYmIHNlYXJjaC5nZXQoJ3lhd2Zfbm90YWxsJykgIT09ICcxJykgewogICAgICAgICAgY29uc3QgYWxsID0gcHJvZmlsZU5hdi5xdWVyeVNlbGVjdG9yKCdsaVthY3Rpb24tdHlwZT0ic2VhcmNoX3R5cGUiXVthY3Rpb24tZGF0YSo9ImlzX2FsbD0xIl0nKTsKICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJyNfMCcsIGxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgdXJsLnNlYXJjaCA9IGFsbC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJyk7CiAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSgnWUFXRl8nICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAnXycgKyAoTWF0aC5yYW5kb20oKSArICcnKS5zbGljZSgyKSwgbnVsbCwgdXJsLmhyZWYpOwogICAgICAgICAgYWxsLmNsaWNrKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiB1cGRhdGVVc2VyTGlua3NXaXRoSXNBbGwoKSB7CiAgICAgICAgY29uc3QgbGlua3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoWwogICAgICAgICAgJ2FbdXNlcmNhcmRdJywgLy8g5LiA6Iis55qE55So5oi36ZO+5o6lCiAgICAgICAgICAnLldCX2ZhY2UgYScsIC8vIOW+ruWNmueUqOaIt+WktOWDj++8iHVzZXJjYXJk5Yqg5Zyo6ZO+5o6l6YeM6Z2i55qE5Zu+54mH5LiK5LqG77yJCiAgICAgICAgICAnLnBpY19ib3ggYVtzdWRhLXVhdHJhY2sqPSJ1c2VyX3BpYyJdJywgLy8g5Y2V5p2h5b6u5Y2a5LiK5pa555qE55So5oi3CiAgICAgICAgICAnLldCX2FydGljYWwgLm1haW5fZWRpdG9yIC5hdXRob3JpbmZvIGEnLCAvLyDlpLTmnaHmlofnq6DnmoTkvZzogIXkv6Hmga8KICAgICAgICAgICcud2ViaW1fY2hhdF93aW5kb3cgLmNoYXRfdGl0bGUgYVtub2RlLXR5cGU9Il9jaGF0VXNlck5hbWUiXScsIC8vIOiBiuWkqeeql+WPo+S4iueahOeUqOaIt+WQjQogICAgICAgIF0ubWFwKHggPT4geCArICdbaHJlZl06bm90KFtocmVmKj0iaXNfYWxsIl0pJykuam9pbignLCcpKSk7CiAgICAgICAgbGlua3MuZm9yRWFjaChmdW5jdGlvbiAobCkgewogICAgICAgICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsLnNlYXJjaCk7CiAgICAgICAgICBzZWFyY2guc2V0KCdpc19hbGwnLCAxKTsKICAgICAgICAgIGwuc2VhcmNoID0gc2VhcmNoOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2ZpbHRlci9tYW51YWxseS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKCiAgY29uc3QgZmlsdGVyID0geWF3Zi5ydWxlcy5maWx0ZXI7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgdWkgPSB1dGlsLnVpOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBpMThuLmZlZWRzTWFudWFsbHlHcm91cFRpdGxlID0gewogICAgY246ICfmiYvliqjpmpDol48nLAogICAgdHc6ICfmiYvli5XpmrHol48nLAogICAgZW46ICdNYW51YWxseScsCiAgfTsKCiAgY29uc3QgbWFudWFsbHkgPSBmaWx0ZXIubWFudWFsbHkgPSB7fTsKICBtYW51YWxseS5tYW51YWxseSA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBmaWx0ZXIuZmlsdGVyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNNYW51YWxseUdyb3VwVGl0bGUsCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgbWFudWFsbHlIaWRlRmVlZDogewogICAgICBjbjogJ+WcqOW+ruWNmuWPs+S4iuinkuaYvuekuumakOiXj+WNleadoeW+ruWNmueahOaMiemSrnx7e3Jlc2V0fX18e3tpfX0nLAogICAgICB0dzogJ+WcqOW+ruWNmuWPs+S4iuinkumhr+ekuumaseiXj+WWruaineW+ruWNmueahOaMiemIlXx7e3Jlc2V0fX18e3tpfX0nLAogICAgICBlbjogJ1Nob3cgYnV0dG9ucyBhdCByaWdodCB0b3Agb2YgZWFjaCBmZWVkcyBmb3IgaGlkaW5nfHt7cmVzZXR9fXx7e2l9fScsCiAgICB9LAogICAgbWFudWFsbHlIaWRlRmVlZFJlc2V0OiB7CiAgICAgIGNuOiAn6YeN572uJywKICAgICAgdHc6ICfph43oqK0nLAogICAgICBlbjogJ1Jlc2V0JywKICAgIH0sCiAgICBtYW51YWxseUhpZGVGZWVkRGV0YWlsOiB7CiAgICAgIGNuOiAn5omp5bGV5Lya5L+d5a2Y5pyA6L+R5LiA5LiH5p2h6KKr6ZqQ6JeP55qE5b6u5Y2a55qE57yW5Y+377yM5bm25Zyo6YGH5Yiw6L+Z5Lqb5b6u5Y2a5pe25bCG5LuW5Lus6ZqQ6JeP44CC6L+Z5Lqb5b6u5Y2a55qE57yW5Y+35bCG5LiN5Lya5YyF5ZCr5Zyo5a+85Ye655qE6K6+572u5Lit77yM5LiU5LiN5Lya6ZqP552A5a+85YWl55qE6K6+572u6ICM5aSx5pWI44CC6YeN572u6K6+572u5oiW5Zyo5q2k6YeN572u5Y+v5Lul5riF56m66L+Z5Liq5YiX6KGo44CCJywKICAgIH0sCiAgICBtYW51YWxseUhpZGVGZWVkRGlhbG9nVGl0bGU6IHsKICAgICAgY246ICfph43nva7pmpDol48nLAogICAgICB0dzogJ+mHjeioremaseiXjycsCiAgICAgIGVuOiAnUmVzZXQgSGlkaW5nJywKICAgIH0sCiAgICBtYW51YWxseUhpZGVGZWVkRGlhbG9nVGV4dDogewogICAgICBjbjogJ+ehruWumua4hemZpOmakOiXj+W+ruWNmueahOWOhuWPsuiusOW9leWQl++8jOa4hemZpOWQjuS5i+WJjemakOiXj+eahOW+ruWNmuS8mumHjeaWsOaYvuekuuOAgicsCiAgICAgIHR3OiAn56K65a6a5riF6Zmk6Zqx6JeP5b6u5Y2a55qE5q235Y+y6KiY6YyE5ZeO77yM5riF6Zmk5b6M5LmL5YmN6Zqx6JeP55qE5b6u5Y2a5pyD6YeN5paw6aGv56S644CCJywKICAgICAgZW46ICdDbGVhciBoaXN0b3J5IG9mIGhpZGluZyB3aWxsIG1ha2UgdGhlc2UgZmVlZHMgc2hvd24gYWdhaW4uIENsZWFyIGhpZGRlbiBoaXN0b3J5PycsCiAgICB9LAogICAgaGlkZVRoaXNGZWVkOiB7CiAgICAgIGNuOiAn6ZqQ6JePJywKICAgICAgdHc6ICfpmrHol48nLAogICAgICBlbjogJ0hpZGUnLAogICAgfSwKICB9KTsKCiAgY29uc3QgaGlkZUxpc3RQcm9taXNlID0gYXN5bmMgZnVuY3Rpb24gKCkgewoKICAgIGNvbnN0IG1hbnVhbGx5SGlkZUNvbmZpZyA9IGF3YWl0IGNvbmZpZy5wb29sKCdIaWRlJywgewogICAgICB1aWQ6IGluaXQucGFnZS4kQ09ORklHLnVpZCwKICAgICAgaXNMb2NhbDogdHJ1ZSwKICAgIH0pOwoKICAgIHJldHVybiBuZXcgcnVsZS5jbGFzcy5PZmZzY3JlZW5Db25maWdJdGVtKHsKICAgICAgaWQ6ICdoaWRlTGlzdCcsCiAgICAgIGNvbmZpZ1Bvb2w6IG1hbnVhbGx5SGlkZUNvbmZpZywKICAgICAgZ2V0IGluaXRpYWwoKSB7IHJldHVybiBbXTsgfSwKICAgICAgbm9ybWFsaXplKHZhbHVlKSB7CiAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIFtdOwogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHJldHVybiBbXTsKICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoMCwgMTAwMCk7CiAgICAgIH0sCiAgICB9KTsKCiAgfTsKCiAgbGV0IGhpZGVMaXN0ID0gbnVsbDsKICBpbml0Lm9uUmVhZHkoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgaGlkZUxpc3QgPSBhd2FpdCBoaWRlTGlzdFByb21pc2UoKTsKICB9LCB7IHByaW9yaXR5OiB1dGlsLnByaW9yaXR5LkJFRk9SRSB9KTsKCiAgbWFudWFsbHkubWFudWFsbHlIaWRlRmVlZCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9tYW51YWxseV9oaWRlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IG1hbnVhbGx5Lm1hbnVhbGx5LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubWFudWFsbHlIaWRlRmVlZCwKICAgIHJlZjogewogICAgICByZXNldDogewogICAgICAgIHJlbmRlcigpIHsKICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8YSBjbGFzcz0iV19idG5fYiB5YXdmLW1hbnVhbGx5LWhpZGUtcmVzZXQiIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9hPic7CiAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50ID0gaTE4bi5tYW51YWxseUhpZGVGZWVkUmVzZXQ7CiAgICAgICAgICBjb25zdCBidXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignYScpOwogICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZXZlbnQgPT4gewogICAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCB1aS5jb25maXJtKHsKICAgICAgICAgICAgICBpZDogJ3lhd2YtaW1wb3J0LWZhaWxlZCcsCiAgICAgICAgICAgICAgdGl0bGU6IGkxOG4ubWFudWFsbHlIaWRlRmVlZERpYWxvZ1RpdGxlLAogICAgICAgICAgICAgIHRleHQ6IGkxOG4ubWFudWFsbHlIaWRlRmVlZERpYWxvZ1RleHQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoIWFuc3dlcikgcmV0dXJuOwogICAgICAgICAgICBhd2FpdCBoaWRlTGlzdC5jb25maWdQb29sLnJlc2V0KCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBidXR0b247CiAgICAgICAgfSwKICAgICAgfSwKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLm1hbnVhbGx5SGlkZUZlZWREZXRhaWwgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgY3JlYXRlU2NyZWVuID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IHNjcmVlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHNjcmVlbi5jbGFzc0xpc3QgPSAnV0Jfc2NyZWVuIFdfZnInOwogICAgICAgIHJldHVybiBzY3JlZW47CiAgICAgIH07CiAgICAgIGNvbnN0IGNyZWF0ZUhpZGVCb3ggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgaGlkZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGhpZGVCb3guY2xhc3NMaXN0ID0gJ3lhd2YtaGlkZS1ib3gnOwogICAgICAgIGhpZGVCb3guaW5uZXJIVE1MID0gJzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX2Nsb3NlIFNfZmljb24iPlg8L2k+PC9hPic7CiAgICAgICAgaGlkZUJveC5xdWVyeVNlbGVjdG9yKCdhJykudGl0bGUgPSBpMThuLmhpZGVUaGlzRmVlZDsKICAgICAgICByZXR1cm4gaGlkZUJveDsKICAgICAgfTsKICAgICAgY29uc3QgaGlkZUZlZWRFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoZmVlZCwgbWlkKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgIGZlZWQuc2V0QXR0cmlidXRlKCdzdHlsZScsICd0cmFuc2l0aW9uOiBtYXgtaGVpZ2h0IG9wYWNpdHkgMC4yczsgbWF4LWhlaWdodDogJyArIGZlZWQuY2xpZW50SGVpZ2h0ICsgJ3B4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Jyk7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgZmVlZC5zdHlsZS5tYXhIZWlnaHQgPSAnMjBweCc7IH0sIDApOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGZlZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmZWVkKTsgfSwgMTAwKTsKICAgICAgICAgIGNvbnN0IGxpc3QgPSBoaWRlTGlzdC5nZXRDb25maWcoKTsKICAgICAgICAgIGxpc3QudW5zaGlmdChtaWQpOwogICAgICAgICAgbGlzdC5zcGxpY2UoMWU0KTsKICAgICAgICAgIGhpZGVMaXN0LnNldENvbmZpZyhsaXN0KTsKICAgICAgICB9OwogICAgICB9OwogICAgICBvYnNlcnZlci5mZWVkLm9uRmluYWxseShmdW5jdGlvbiAoZmVlZCkgewogICAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5hdXRob3IuaWQoZmVlZCk7CiAgICAgICAgY29uc3QgW2ZhdXRob3JdID0gZmVlZFBhcnNlci5mYXV0aG9yLmlkKGZlZWQpOwogICAgICAgIGNvbnN0IGF1dGhvcklkID0gZmF1dGhvciB8fCBhdXRob3I7CiAgICAgICAgaWYgKCFhdXRob3JJZCB8fCBhdXRob3JJZCA9PT0gaW5pdC5wYWdlLiRDT05GSUcudWlkKSByZXR1cm47IC8vIOiHquW3seeahOW+ruWNmu+8jOS4jeaYvuekuuaMiemSrgogICAgICAgIGlmIChmZWVkLm1hdGNoZXMoJyN2Nl9wbF9jb250ZW50X2F0bWV3ZWlibyAqJykpIHJldHVybjsgLy8g5LiN5Zyo5o+Q5Yiw6aG16Z2i5pi+56S677yM6YG/5YWN5LiO4oCc5bGP6JS9YXTigJ3lj5HnlJ/mrafkuYkKICAgICAgICBpZiAoZmVlZC5oYXNBdHRyaWJ1dGUoJ3lhd2YtaGlkZS1ib3gnKSkgcmV0dXJuOyAvLyDlt7Lnu4/mnInkuobmjInpkq7vvIzkuI3mmL7npLrmjInpkq4KICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCcuc2NyZWVuX2JveCAuZmljb25fY2xvc2UnKSkgcmV0dXJuOyAvLyDlub/lkYrlvq7ljZrlj7PkuIrop5Llt7Lnu4/mnInkuKrlj4nkuobvvIzlsLHkuI3lho3lvITkuIDkuKrkuoYKICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2lkXj0iUGxfT2ZmaWNpYWxfV2VpYm9EZXRhaWxfXyJdJykpIHJldHVybjsgLy8g5Y2V5p2h5b6u5Y2a6aG16Z2i77yM5LiN5pi+56S65oyJ6ZKuCiAgICAgICAgaWYgKCFmZWVkLmhhc0F0dHJpYnV0ZSgnbWlkJykpIHJldHVybjsgLy8g5LiN5piv5b6u5Y2a77yM5LiN5pi+56S65oyJ6ZKuCiAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtaGlkZS1ib3gnLCAneWF3Zi1oaWRlLWJveCcpOwogICAgICAgIGNvbnN0IG1pZCA9IGZlZWQuZ2V0QXR0cmlidXRlKCdtaWQnKTsKICAgICAgICBjb25zdCBzY3JlZW5Cb3ggPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9zY3JlZW4gLnNjcmVlbl9ib3gnKTsKICAgICAgICBpZiAobWlkICYmIHNjcmVlbkJveCkgewogICAgICAgICAgY29uc3QgaGlkZUJveCA9IHNjcmVlbkJveC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjcmVhdGVIaWRlQm94KCksIHNjcmVlbkJveCk7CiAgICAgICAgICBoaWRlQm94LnF1ZXJ5U2VsZWN0b3IoJ2EnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVGZWVkRXZlbnRIYW5kbGVyKGZlZWQsIG1pZCkpOwogICAgICAgIH0KICAgICAgICBjb25zdCBvbWlkID0gZmVlZC5nZXRBdHRyaWJ1dGUoJ29taWQnKTsKICAgICAgICBjb25zdCBleHBhbmQgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9leHBhbmQnKTsKICAgICAgICBpZiAob21pZCAmJiBleHBhbmQpIHsKICAgICAgICAgIGNvbnN0IHNjcmVlbiA9IGV4cGFuZC5pbnNlcnRCZWZvcmUoY3JlYXRlU2NyZWVuKCksIGV4cGFuZC5maXJzdENoaWxkKTsKICAgICAgICAgIGNvbnN0IGhpZGVCb3ggPSBzY3JlZW4uYXBwZW5kQ2hpbGQoY3JlYXRlSGlkZUJveCgpKTsKICAgICAgICAgIGhpZGVCb3gucXVlcnlTZWxlY3RvcignYScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUZlZWRFdmVudEhhbmRsZXIoZmVlZCwgb21pZCkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGNzcy5hcHBlbmQoYAouV0Jfc2NyZWVuIC55YXdmLWhpZGUtYm94IHsgbWFyZ2luOiAtMTBweCAwIDAgLTE3cHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgfQouV0Jfc2NyZWVuIC55YXdmLWhpZGUtYm94IC5XX2ZpY29uIHsgZm9udC1zaXplOiAxOHB4OyBoZWlnaHQ6IDE2cHg7IHBhZGRpbmc6IDRweCAwIDZweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9Ci5XQl9zY3JlZW4gLnlhd2YtaGlkZS1ib3ggfiAuc2NyZWVuX2JveCB7IG1hcmdpbjogLTEwcHggMCAwIC0zN3B4OyBwb3NpdGlvbjogYWJzb2x1dGU7IH0KLldCX3NjcmVlbiAueWF3Zi1oaWRlLWJveCB+IC5zY3JlZW5fYm94IC5XX2ZpY29uLCAuV0Jfc2NyZWVuIC55YXdmLWhpZGVfYm94IC5XX2ZpY29uIHsgd2lkdGg6IDIwcHg7IH0KLldCX3NjcmVlbiAueWF3Zi1oaWRlLWJveCB+IC5zY3JlZW5fYm94IC5sYXllcl9tZW51X2xpc3QgeyByaWdodDogLTRweDsgfQouV0JfZXhwYW5kIC5XQl9zY3JlZW4geyBtYXJnaW4tdG9wOiA1cHg7IH0KYCk7CiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gc2hvd015RmVlZChmZWVkKSB7CiAgICAgICAgLy8g6YCJ6aG555qE5byA5YWz5Y+q5b2x5ZON5piv5ZCm5pi+56S65oyJ6ZKu77yM6L+H5ruk6KeE5YiZ5oC75piv5omn6KGMCiAgICAgICAgY29uc3QgbWlkID0gZmVlZC5nZXRBdHRyaWJ1dGUoJ21pZCcpOwogICAgICAgIGNvbnN0IG9taWQgPSBmZWVkLmdldEF0dHJpYnV0ZSgnb21pZCcpOwogICAgICAgIGNvbnN0IG1pZExpc3QgPSBoaWRlTGlzdC5nZXRDb25maWcoKTsKICAgICAgICBpZiAobWlkTGlzdC5pbmNsdWRlcyhtaWQpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIGlmIChtaWRMaXN0LmluY2x1ZGVzKG9taWQpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiAxZTQgfSk7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9maWx0ZXIvcGF1c2UuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IHBhZ2VtZW51ID0geWF3Zi5wYWdlbWVudTsKCiAgY29uc3QgZmlsdGVyID0geWF3Zi5ydWxlcy5maWx0ZXI7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIGkxOG4uZmVlZHNQYXVzZUdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+aaguWBnOi/h+a7pCcsCiAgICB0dzogJ+aaq+WBnOevqemBuCcsCiAgICBlbjogJ1BhdXNlIEZpbHRlcicsCiAgfTsKCiAgY29uc3QgcGF1c2UgPSBmaWx0ZXIucGF1c2UgPSB7fTsKICBwYXVzZS5wYXVzZSA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBmaWx0ZXIuZmlsdGVyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNQYXVzZUdyb3VwVGl0bGUsCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgcGF1c2VGaWx0ZXI6IHsKICAgICAgY246ICfkuLTml7bnpoHnlKjmiYDmnInlvq7ljZrov4fmu6Top4TliJl8e3tpfX0nLAogICAgICB0dzogJ+aaq+aZguWBnOeUqOaJgOacieW+ruWNmuevqemBuOimj+WJh3x7e2l9fScsCiAgICAgIGVuOiAnRGlzYWJsZSBhbGwgZmVlZCBmaWx0ZXJzIHRlbXBvcmFyaWx5fHt7aX19JywKICAgIH0sCiAgICBwYXVzZUZpbHRlckRldGFpbDogewogICAgICBjbjogJ+mAieaLqeWQjuWwhuS8muaaguWBnOaJgOacieW+ruWNmui/h+a7pOebuOWFs+eahOWKn+iDve+8jOimgeafpeeci+W3suiiq+makOiXj+eahOinhOWImemcgOimgeWIt+aWsOmhtemdouOAguWFtuS7luWKn+iDveS4jeWPl+W9seWTjeOAgicsCiAgICB9LAogICAgcGF1c2VGaWx0ZXJNZW51OiB7CiAgICAgIGNuOiAn5pqC5YGc5b6u5Y2a6L+H5rukJywKICAgICAgdHc6ICfmmqvlgZzlvq7ljZrnr6npgbgnLAogICAgICBlbjogJ1BhdXNlIEZpbHRlcicsCiAgICB9LAogICAgcGF1c2VGaWx0ZXJDb25maWdXYXJuaW5nOiB7CiAgICAgIGNuOiAn5oKo5bey56aB55So5b6u5Y2a6L+H5ruk5Yqf6IO977yM6YOo5YiG6K6+572u5bCG5LiN55Sf5pWIJywKICAgICAgdHc6ICfmgqjlt7LlgZznlKjlvq7ljZrnr6npgbjlip/og73vvIzpg6jliIboqK3lrprlsIfkuI3nlJ/mlYgnLAogICAgICBlbjogJ0ZpbHRlcnMgaGFzIGJlZW4gcGF1c2VkLiBTb21lIHNldHRpbmdzIG1heSBub3QgdGFrZSBlZmZlY3QuJywKICAgIH0sCiAgICBwYXVzZUZpbHRlckNvbmZpZ0VuYWJsZTogewogICAgICBjbjogJ+WQr+eUqOi/h+a7pOinhOWImScsCiAgICAgIHR3OiAn5ZWf55So6YGO5r++6KaP5YmHJywKICAgICAgZW46ICdFbmFibGUgRmlsdGVycycsCiAgICB9LAogICAgcGF1c2VGaWx0ZXJNZW51RW5hYmxlZDogewogICAgICBjbjogJ+WQr+eUqOW+ruWNmui/h+a7pCcsCiAgICAgIHR3OiAn5ZWf55So5b6u5Y2a6YGO5r++JywKICAgICAgZW46ICdFbmFibGUgRmlsdGVycycsCiAgICB9LAogICAgcGF1c2VGaWx0ZXJNZW51RGlzYWJsZWQ6IHsKICAgICAgY246ICfmmoLlgZzlvq7ljZrov4fmu6QnLAogICAgICB0dzogJ+aaq+WBnOW+ruWNmuevqemBuCcsCiAgICAgIGVuOiAnUGF1c2UgRmlsdGVycycsCiAgICB9LAogICAgcGF1c2VGaWx0ZXJGZWVkV2FybmluZzogewogICAgICBjbjogJ+W+ruWNmui/h+a7pOinhOWImeW3suaaguWBnO+8jOS7peS4i+W+ruWNmuWPr+iDveacque7j+i/h+a7pO+8jOeCueatpOWQr+eUqOi/h+a7pOinhOWImScsCiAgICAgIHR3OiAn5b6u5Y2a56+p6YG46KaP5YmH5bey5pqr5YGc77yM5Lul5LiL5b6u5Y2a5Y+v6IO95pyq57aT56+p6YG477yM5oyJ5q2k5ZWf55So56+p6YG46KaP5YmHJywKICAgICAgZW46ICdGZWVkIGZpbHRlcnMgaGFzIGJlZW4gZGlzYWJsZWQuIENsaWNrIGhlcmUgdG8gZW5hYmxlIGZpbHRlcnMuJywKICAgIH0sCiAgfSk7CgoKICBwYXVzZS5wYXVzZUZpbHRlciA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ3BhdXNlX2ZpbHRlcicsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBwYXVzZS5wYXVzZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnBhdXNlRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5wYXVzZUZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwoKICAgICAgLy8g5YW25a6e5a6e546w6YC76L6R5b6I566A5Y2V77yM5bCx5piv5aOw5piO5LiA5Liq5LyY5YWI57qn5b6I6auY55qE6L+H5ruk6KeE5YiZ77yM5peg6K6655yL5Yiw5LuA5LmI77yM6YO96K+05LiN55So57un57ut6L+H5ruk5LqGCiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHBhdXNlRmlsdGVyRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gJ3Vuc2V0JzsgLy8g5pei5LiN5piv55m95ZCN5Y2V77yM5Lmf5LiN6ZqQ6JePCiAgICAgIH0sIHsgcHJpb3JpdHk6IDFlNiB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CgogICAgICAvLyDlnKjorr7nva7nqpflj6PkuIrmmL7npLrlpKflpKfnmoTmj5DnpLrmloflrZfvvIzor7TmmI7ov4fmu6Tlip/og73ooqvmmoLlgZzkuoYKICAgICAgY29uc3QgYWRkTm90aWNlSW5Db25maWcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSB7CiAgICAgICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnlhd2YtY29uZmlnLWJvZHkueWF3Zi1jb25maWctZmlsdGVyLXBhdXNlJyk7CiAgICAgICAgICBpZiAoIWJvZHkpIHJldHVybjsKICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi1jb25maWctZmlsdGVyLXBhdXNlJyk7CiAgICAgICAgICBjb25zdCBub3RpY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctZmlsdGVyLXBhdXNlLW5vdGljZScpOwogICAgICAgICAgbm90aWNlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm90aWNlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNvbmZpZy1ib2R5Om5vdCgueWF3Zi1jb25maWctZmlsdGVyLXBhdXNlKScpOwogICAgICAgIGlmICghYm9keSkgcmV0dXJuOwogICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctZmlsdGVyLXBhdXNlJyk7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ5YXdmLWNvbmZpZy1maWx0ZXItcGF1c2Utbm90aWNlIFNfbGluazFfYnIiPjxzcGFuPjwvc3Bhbj48YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJXX2J0bl9iIHlhd2YtY29uZmlnLWZpbHRlci1lbmFibGUiPjxzcGFuIGNsYXNzPSJXX2YxNCI+PC9zcGFuPjwvYT48L2Rpdj4nOwogICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBpMThuLnBhdXNlRmlsdGVyQ29uZmlnV2FybmluZzsKICAgICAgICBjb25zdCBidXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignYScpOwogICAgICAgIGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBpMThuLnBhdXNlRmlsdGVyQ29uZmlnRW5hYmxlOwogICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgICBydWxlLnNldENvbmZpZyhmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgICAgYm9keS5pbnNlcnRCZWZvcmUoY29udGFpbmVyLmZpcnN0Q2hpbGQsIGJvZHkuZmlyc3RDaGlsZCk7CiAgICAgIH07CgogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGNvbmZpZ05vdGljZSgpIHsKICAgICAgICBhZGROb3RpY2VJbkNvbmZpZygpOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IGFkZE5vdGljZUluQ29uZmlnKCk7IH0pOwoKICAgICAgLy8g5Zyo5ryP5paX5Zu+5qCH5LiL6Z2i55qE6I+c5Y2V6YeM6Z2i77yM5Lmf5pS+5LiK6L+Z5LiqCiAgICAgIGNvbnN0IG1lbnVUZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gaTE4bi5wYXVzZUZpbHRlck1lbnVFbmFibGVkOwogICAgICAgIHJldHVybiBpMThuLnBhdXNlRmlsdGVyTWVudURpc2FibGVkOwogICAgICB9OwogICAgICBjb25zdCBtZW51aXRlbSA9IHBhZ2VtZW51LmFkZCh7CiAgICAgICAgdGl0bGU6IG1lbnVUZXh0LAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnN0IG9sZENvbmZpZyA9IHJ1bGUuZ2V0Q29uZmlnKCk7CiAgICAgICAgICBydWxlLnNldENvbmZpZyghb2xkQ29uZmlnKTsKICAgICAgICB9LAogICAgICAgIHNlY3Rpb246IDEwLAogICAgICAgIG9yZGVyOiAxLAogICAgICB9KTsKICAgICAgOyAoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBtZW51aXRlbTsKICAgICAgICBydWxlLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgaXRlbS50ZXh0KG1lbnVUZXh0KTsgfSk7CiAgICAgICAgaXRlbS50ZXh0KG1lbnVUZXh0KTsKICAgICAgfSgpKTsKCiAgICAgIC8vIOWcqOa2iOaBr+a1gemhtuerr++8jOWGjeaUvuS4iui/meS4qgogICAgICBvYnNlcnZlci5mZWVkLm9uQmVmb3JlKGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm47CiAgICAgICAgY29uc3QgdHlwZSA9IGluaXQucGFnZS50eXBlKCk7CiAgICAgICAgaWYgKHR5cGUgPT09ICdmYXYnIHx8IHR5cGUgPT09ICdsaWtlJykgcmV0dXJuOwogICAgICAgIGNvbnN0IGxpc3QgPSBmZWVkLmNsb3Nlc3QoJy5XQl9mZWVkJyk7CiAgICAgICAgaWYgKCFsaXN0KSByZXR1cm47IC8vIOaQnOe0oumhtemdogogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGxpc3QucGFyZW50Tm9kZTsKICAgICAgICBjb25zdCBzaWJsaW5nID0gY29udGFpbmVyLnByZXZpb3VzU2libGluZzsKICAgICAgICBpZiAoc2libGluZz8ubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7CiAgICAgICAgICBpZiAoc2libGluZy5tYXRjaGVzKCcueWF3Zi1mZWVkLWZpbHRlci1wYXVzZS1ub3RpY2UnKSkgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi1mZWVkLWZpbHRlci1wYXVzZS1ub3RpY2UgU19iZzIiPjxhIGNsYXNzPSJTX3R4dDEiPjwvYT48L2Rpdj4nOwogICAgICAgIGNvbnN0IGJ1dHRvbiA9IHdyYXAucXVlcnlTZWxlY3RvcignYScpOwogICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGkxOG4ucGF1c2VGaWx0ZXJGZWVkV2FybmluZzsKICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgcnVsZS5zZXRDb25maWcoZmFsc2UpOwogICAgICAgIH0pOwogICAgICAgIGNvbnRhaW5lci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwLmZpcnN0Q2hpbGQsIGNvbnRhaW5lcik7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsKICAgICAgICBpZiAocnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IG5vdGljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZlZWQtZmlsdGVyLXBhdXNlLW5vdGljZScpOwogICAgICAgIGlmIChub3RpY2UpIG5vdGljZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vdGljZSk7CiAgICAgIH0pOwoKICAgICAgY3NzLmFwcGVuZChgCi55YXdmLWNvbmZpZy1maWx0ZXItcGF1c2Utbm90aWNlIHsgYm9yZGVyLXdpZHRoOiA1cHg7IGJvcmRlci1zdHlsZTogc29saWQ7IHBhZGRpbmc6IDEwcHg7IGZvbnQtc2l6ZTogMTE1JTsgfQoueWF3Zi1jb25maWctZmlsdGVyLWVuYWJsZSB7IGZsb2F0OiByaWdodDsgbWFyZ2luOiAtMnB4OyB9Ci55YXdmLWZlZWQtZmlsdGVyLXBhdXNlLW5vdGljZSB7IHRleHQtYWxpZ246IGNlbnRlcjsgbGluZS1oZWlnaHQ6IDMxcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IGJvcmRlci1yYWRpdXM6IDNweDsgZm9udC1zaXplOiAxMTUlOyB9CmApOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvY29udGVudC9jb250ZW50LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5jb250ZW50VGFiVGl0bGUgPSB7CiAgICBjbjogJ+WGheWuuScsCiAgICB0dzogJ+WFp+WuuScsCiAgICBlbjogJ0NvbnRlbnQnLAogIH07CgogIGNvbnN0IGNvbnRlbnQgPSB5YXdmLnJ1bGVzLmNvbnRlbnQgPSB7fTsKICBjb250ZW50LmNvbnRlbnQgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb250ZW50VGFiVGl0bGUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbnRlbnQvdGV4dC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY29udGVudFRleHRHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5YaF5a655YWz6ZSu6K+N6L+H5rukJywKICAgICAgdHc6ICfmjInlhaflrrnpl5zpjbXlrZfnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBDb250ZW50IEtleXdvcmRzJywKICAgIH0sCiAgICB0ZXh0Q29udGVudFNob3c6IHsKICAgICAgY246ICfmgLvmmK/mmL7npLrljIXlkKvku6XkuIvlhoXlrrnnmoTlvq7ljZp8fOWFs+mUruivjXt7aXRlbXN9fScsCiAgICAgIHR3OiAn5oC75piv5pi+56S65YyF5ZCr5Lul5LiL5YWn5a6555qE5b6u5Y2afHzpl5zpjbXlrZd7e2l0ZW1zfX0nLAogICAgICBlbjogJ0Fsd2F5cyBzaG93IGZlZWRzIHdpdGggdGhlc2UgY29udGVudHx8a2V5d29yZCB7e2l0ZW1zfX0nLAogICAgfSwKICAgIHRleHRDb250ZW50SGlkZTogewogICAgICBjbjogJ+makOiXj+WMheWQq+S7peS4i+WGheWuueeahOW+ruWNmnx85YWz6ZSu6K+Ne3tpdGVtc319JywKICAgICAgdHc6ICfpmrHol4/ljIXlkKvku6XkuIvlhaflrrnnmoTlvq7ljZp8fOmXnOmNteWtl3t7aXRlbXN9fScsCiAgICAgIGVuOiAnSGlkZSBmZWVkcyB3aXRoIHRoZXNlIGNvbnRlbnR8fGtleXdvcmQge3tpdGVtc319JywKICAgIH0sCiAgICB0ZXh0Q29udGVudEZvbGQ6IHsKICAgICAgY246ICfmipjlj6DljIXlkKvku6XkuIvlhoXlrrnnmoTlvq7ljZp8fOWFs+mUruivjXt7aXRlbXN9fScsCiAgICAgIHR3OiAn5oqY55aK5YyF5ZCr5Lul5LiL5YWn5a6555qE5b6u5Y2afHzpl5zpjbXlrZd7e2l0ZW1zfX0nLAogICAgICBlbjogJ0ZvbGQgZmVlZHMgd2l0aCB0aGVzZSBjb250ZW50fHxrZXl3b3JkIHt7aXRlbXN9fScsCiAgICB9LAogICAgdGV4dENvbnRlbnRSZWFzb246IHsKICAgICAgY246ICflhbPplK7or43igJx7MX3igJ0nLAogICAgICB0dzogJ+WFs+mUruWtl+OAjHsxfeOAjScsCiAgICAgIGVuOiAnY29udGVudCAiezF9IicsCiAgICB9LAogIH0pOwoKICBjbGFzcyBUZXh0RmVlZFJ1bGUgZXh0ZW5kcyBydWxlLmNsYXNzLlJ1bGUgewogICAgZ2V0IHdlaWJvVmVyc2lvbigpIHsgcmV0dXJuIHRoaXMuZmVlZEFjdGlvbiA9PT0gJ2ZvbGQnID8gWzZdIDogWzYsIDddOyB9CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgfQogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHRleHRGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGZlZWRQYXJzZXIudGV4dC5zaW1wbGUoZmVlZCkudG9Mb3dlckNhc2UoKTsKICAgICAgICBjb25zdCBrZXl3b3JkcyA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGNvbnRhaW4gPSBrZXl3b3Jkcy5maW5kKGtleXdvcmQgPT4gdGV4dC5pbmNsdWRlcyhrZXl3b3JkLnRvTG93ZXJDYXNlKCkpKTsKICAgICAgICBpZiAoIWNvbnRhaW4pIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHJlYXNvblRleHQgPSBjb250YWluLmxlbmd0aCA+IDggPyBjb250YWluLnNsaWNlKDAsIDYpICsgJ+KApicgOiBjb250YWluOwogICAgICAgIGNvbnN0IHJlYXNvbiA9IGkxOG4udGV4dENvbnRlbnRSZWFzb24ucmVwbGFjZSgnezF9JywgKCkgPT4gcmVhc29uVGV4dCk7CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24sIHJlYXNvbiB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IFRleHRGZWVkUnVsZSwKICAgIHRhYjogJ2NvbnRlbnQnLAogICAga2V5OiAndGV4dCcsCiAgICB2ZXJzaW9uOiAxLAogICAgdHlwZTogJ3N0cmluZ3MnLAogICAgdGl0bGU6ICgpID0+IGkxOG4uY29udGVudFRleHRHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udGV4dENvbnRlbnRIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udGV4dENvbnRlbnRTaG93LAogICAgICB9LAogICAgICBmb2xkOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udGV4dENvbnRlbnRGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ3RleHQnXSwgWydjb21tZW50J11dLAogICAgICByYWRpb0dyb3VwOiAndGV4dCcsCiAgICAgIHJlbmRlcjogZmVlZFBhcnNlci5mYXN0LnJlbmRlci50ZXh0LAogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvY29udGVudC9yZWdleC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgaTE4bi5jb250ZW50UmVnZXhHcm91cFRpdGxlID0gewogICAgY246ICfmjInlhoXlrrnmraPliJnlvI/ov4fmu6QnLAogICAgaGs6ICfmjInlhaflrrnmraPliYflvI/nr6npgbgnLAogICAgdHc6ICfmjInlhaflrrnmraPopo/lvI/nr6npgbgnLAogICAgZW46ICdGaWx0ZXIgYnkgQ29udGVudCBSZWdleCcsCiAgfTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICByZWdleENvbnRlbnRTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65Yy56YWN5Lul5LiL5q2j5YiZ6KGo6L6+5byP55qE5b6u5Y2afHzmraPliJnlvI97e2l0ZW1zfX0nLAogICAgICBoazogJ+aAu+aYr+aYvuekuuWMuemFjeS7peS4i+ato+WJh+ihqOmBlOW8j+eahOW+ruWNmnx85q2j5YmH5byPe3tpdGVtc319JywKICAgICAgdHc6ICfmgLvmmK/mmL7npLrljLnphY3ku6XkuIvmraPopo/ooajnpLrlvI/nmoTlvq7ljZp8fOato+imj+W8j3t7aXRlbXN9fScsCiAgICAgIGVuOiAnQWx3YXlzIHNob3cgZmVlZHMgbWF0Y2ggdGhlc2UgcmVnZXhlbnx8UmVnZXhlbiB7e2l0ZW1zfX0nLAogICAgfSwKICAgIHJlZ2V4Q29udGVudEhpZGU6IHsKICAgICAgY246ICfpmpDol4/ljLnphY3ku6XkuIvmraPliJnooajovr7lvI/nmoTlvq7ljZp8fOato+WImeW8j3t7aXRlbXN9fScsCiAgICAgIGhrOiAn6Zqx6JeP5Yy56YWN5Lul5LiL5q2j5YmH6KGo6YGU5byP55qE5b6u5Y2afHzmraPliYflvI97e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+WMuemFjeS7peS4i+ato+imj+ihqOekuuW8j+eahOW+ruWNmnx85q2j6KaP5byPe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIG1hdGNoIHRoZXNlIHJlZ2V4ZW58fFJlZ2V4ZW4ge3tpdGVtc319JywKICAgIH0sCiAgICByZWdleENvbnRlbnRGb2xkOiB7CiAgICAgIGNuOiAn5oqY5Y+g5Yy56YWN5Lul5LiL5q2j5YiZ6KGo6L6+5byP55qE5b6u5Y2afHzmraPliJnlvI97e2l0ZW1zfX0nLAogICAgICBoazogJ+aKmOWPoOWMuemFjeS7peS4i+ato+WJh+ihqOmBlOW8j+eahOW+ruWNmnx85q2j5YmH5byPe3tpdGVtc319JywKICAgICAgdHc6ICfmipjlj6DljLnphY3ku6XkuIvmraPopo/ooajnpLrlvI/nmoTlvq7ljZp8fOato+imj+W8j3t7aXRlbXN9fScsCiAgICAgIGVuOiAnRm9sZCBmZWVkcyBtYXRjaCB0aGVzZSByZWdleGVufHxSZWdleGVuIHt7aXRlbXN9fScsCiAgICB9LAogICAgcmVnZXhDb250ZXh0UmVhc29uOiB7CiAgICAgIGNuOiAn5q2j5YiZ5Yy56YWNJywKICAgICAgaGs6ICfmraPliYfnrKblkIgnLAogICAgICB0dzogJ+ato+imj+espuWQiCcsCiAgICAgIGVuOiAncmVnZXhwIG1hdGNoZWQnLAogICAgfSwKICB9KTsKCiAgY2xhc3MgUmVnZXhGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gcmVnZXhGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGZlZWRQYXJzZXIudGV4dC5kZXRhaWwoZmVlZCk7CiAgICAgICAgY29uc3QgcmVnZXhlbiA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZ0NvbXBpbGVkKCk7CiAgICAgICAgY29uc3QgbWF0Y2hSZWcgPSByZWdleGVuLmZpbmQocmVnZXggPT4gcmVnZXgudGVzdCh0ZXh0KSk7CiAgICAgICAgaWYgKCFtYXRjaFJlZykgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgcmVhc29uID0gKG1hdGNoUmVnICsgJycpLm1hdGNoKC9cKFw/PVx8KChbXildfFxcXCkpKilcKS8pPy5bMV0gPz8gaTE4bi5yZWdleENvbnRleHRSZWFzb247CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24sIHJlYXNvbiB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IFJlZ2V4RmVlZFJ1bGUsCiAgICB0YWI6ICdjb250ZW50JywKICAgIGtleTogJ3JlZ2V4JywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAncmVnZXhlbicsCiAgICB0aXRsZTogKCkgPT4gaTE4bi5jb250ZW50UmVnZXhHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4ucmVnZXhDb250ZW50SGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLnJlZ2V4Q29udGVudFNob3csCiAgICAgIH0sCiAgICAgIGZvbGQ6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5yZWdleENvbnRlbnRGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ211bHRpdGV4dCddLCBbJ3RleHQnLCAnY29tbWVudCcsICdtdWx0aXRleHRjb21tZW50J11dLAogICAgICByYWRpb0dyb3VwOiAndGV4dCcsCiAgICAgIHJlbmRlcjogZmVlZFBhcnNlci5mYXN0LnJlbmRlci5yZWdleCwKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2FjY291bnQvYWNjb3VudC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uYXV0aG9yVGFiVGl0bGUgPSB7IGNuOiAn5L2c6ICFJywgdHc6ICfkvZzogIUnLCBlbjogJ0F1dGhvcicgfTsKICBjb25zdCBhdXRob3IgPSB5YXdmLnJ1bGVzLmF1dGhvciA9IHt9OwogIGF1dGhvci5hdXRob3IgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hdXRob3JUYWJUaXRsZSwKICB9KTsKCiAgaTE4bi5vcmlnaW5hbFRhYlRpdGxlID0geyBjbjogJ+WOn+S9nCcsIHR3OiAn5Y6f5L2cJywgZW46ICdPcmlnaW5hbCcgfTsKICBjb25zdCBvcmlnaW5hbCA9IHlhd2YucnVsZXMub3JpZ2luYWwgPSB7fTsKICBvcmlnaW5hbC5vcmlnaW5hbCA9IHJ1bGUuVGFiKHsKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm9yaWdpbmFsVGFiVGl0bGUsCiAgfSk7CgogIGkxOG4ubWVudGlvblRhYlRpdGxlID0geyBjbjogJ+aPkOWIsCcsIHR3OiAn5o+Q5YiwJywgZW46ICdNZW50aW9uJyB9OwogIGNvbnN0IG1lbnRpb24gPSB5YXdmLnJ1bGVzLm1lbnRpb24gPSB7fTsKICBtZW50aW9uLm1lbnRpb24gPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tZW50aW9uVGFiVGl0bGUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2FjY291bnQvYXV0aG9yLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGFjY291bnRBdXRob3JHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5L2c6ICF6L+H5rukJywKICAgICAgdHc6ICfmjInkvZzogIXnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBBdXRob3InLAogICAgfSwKICAgIGFjY291bnRBdXRob3JTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65Lul5LiL5L2c6ICF55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICB0dzogJ+e4veaYr+mhr+ekuuS7peS4i+S9nOiAheeahOW+ruWNmnx85L2c6ICFe3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyBmcm9tIHRoZXNlIGF1dGhvcnN8fGF1dGhvciB7e2l0ZW1zfX0nLAogICAgfSwKICAgIGFjY291bnRBdXRob3JIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JeP5Lul5LiL5L2c6ICF55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+S7peS4i+S9nOiAheeahOW+ruWNmnx85L2c6ICFe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIGZyb20gdGhlc2UgYXV0aG9yc3x8YXV0aG9yIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudEF1dGhvckZvbGQ6IHsKICAgICAgY246ICfmipjlj6Dku6XkuIvkvZzogIXnmoTlvq7ljZp8fOS9nOiAhXt7aXRlbXN9fScsCiAgICAgIHR3OiAn5oqY55aK5Lul5LiL5L2c6ICF55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICBlbjogJ0ZvbGQgZmVlZHMgZnJvbSB0aGVzZSBhdXRob3JzfHxhdXRob3Ige3tpdGVtc319JywKICAgIH0sCiAgICBhY2NvdW50QXV0aG9yUmVhc29uOiB7CiAgICAgIGNuOiAn5L2c6ICFIEB7MX0nLAogICAgICB0dzogJ+S9nOiAhSBAezF9JywKICAgICAgZW46ICdwb3N0ZWQgYnkgQHsxfScsCiAgICB9LAogIH0pOwoKICBjbGFzcyBBdXRob3JGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gYXV0aG9yRmlsdGVyRmVlZEZpbHRlcigvKiogQHR5cGUge0VsZW1lbnR9ICovZmVlZCkgewogICAgICAgIGNvbnN0IG9pZCA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGluaXQucGFnZS4kQ09ORklHLm9pZCA6IGluaXQucGFnZS5vaWQoKTsKICAgICAgICBjb25zdCBbYXV0aG9yXSA9IGZlZWRQYXJzZXIuYXV0aG9yLmlkKGZlZWQpOwogICAgICAgIGNvbnN0IFtmYXV0aG9yXSA9IGZlZWRQYXJzZXIuZmF1dGhvci5pZChmZWVkKTsKICAgICAgICAvLyDkuKrkurrkuLvpobXkuI3mjInnhafkvZzogIXpmpDol4/vvIjlkKbliJnlsLHkvJrmiormiYDmnInkuJzopb/pg73ol4/otbfmnaXigKbigKbvvIkKICAgICAgICBjb25zdCBwYWdlVHlwZSA9IGluaXQucGFnZS50eXBlKCk7CiAgICAgICAgY29uc3QgaXNTaG93UnVsZSA9IHJ1bGUuZmVlZEFjdGlvbiA9PT0gJ3Nob3cnOwogICAgICAgIGNvbnN0IGlzUHJvZmlsZSA9IHBhZ2VUeXBlID09PSAncHJvZmlsZSc7CiAgICAgICAgY29uc3QgaXNHcm91cCA9IHBhZ2VUeXBlID09PSAnZ3JvdXAnOwogICAgICAgIGlmICgoZmF1dGhvciA/PyBhdXRob3IpID09PSBvaWQgJiYgIWlzU2hvd1J1bGUgJiYgaXNQcm9maWxlKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBhY2NvdW50cyA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGlnbm9yZUZhc3RBdXRob3IgPSBpc0dyb3VwICYmICFpc1Nob3dSdWxlOwogICAgICAgIGNvbnN0IGlnbm9yZUF1dGhvciA9IGlnbm9yZUZhc3RBdXRob3IgJiYgIWZlZWRQYXJzZXIuaXNGYXN0KGZlZWQpOwogICAgICAgIGlmICghaWdub3JlQXV0aG9yKSB7CiAgICAgICAgICBjb25zdCBjb250YWluID0gYWNjb3VudHMuZmluZChhY2NvdW50ID0+IGFjY291bnQuaWQgPT09IGF1dGhvcik7CiAgICAgICAgICBpZiAoY29udGFpbikgewogICAgICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmFjY291bnRBdXRob3JSZWFzb24ucmVwbGFjZSgnezF9JywgKCkgPT4gZmVlZFBhcnNlci5hdXRob3IubmFtZShmZWVkKSk7CiAgICAgICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uLCByZWFzb24gfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFpZ25vcmVGYXN0QXV0aG9yKSB7CiAgICAgICAgICBjb25zdCBmY29udGFpbiA9IGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBhY2NvdW50LmlkID09PSBmYXV0aG9yKTsKICAgICAgICAgIGlmIChmY29udGFpbikgewogICAgICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmFjY291bnRBdXRob3JSZWFzb24ucmVwbGFjZSgnezF9JywgKCkgPT4gZmVlZFBhcnNlci5mYXV0aG9yLm5hbWUoZmVlZCkpOwogICAgICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IEF1dGhvckZlZWRSdWxlLAogICAgdGFiOiAnYXV0aG9yJywKICAgIGtleTogJ2lkJywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAndXNlcnMnLAogICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckdyb3VwVGl0bGUsCiAgICBkZXRhaWxzOiB7CiAgICAgIGhpZGU6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5hY2NvdW50QXV0aG9ySGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRBdXRob3JTaG93LAogICAgICB9LAogICAgICBmb2xkOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvbGQsCiAgICAgIH0sCiAgICB9LAogICAgZmFzdDogewogICAgICB0eXBlczogW1snYXV0aG9yJywgJ2FjY291bnQnXSwgWydvcmlnaW5hbCcsICdtZW50aW9uJywgJ2NvbW1lbnR1c2VyJ11dLAogICAgICByYWRpb0dyb3VwOiAnYXV0aG9yJywKICAgICAgcmVuZGVyOiBmZWVkUGFyc2VyLmZhc3QucmVuZGVyLmF1dGhvciwKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2FjY291bnQvZm9yd2FyZC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYWNjb3VudEF1dGhvckZvcndhcmRHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5L2c6ICF6L+H5ruk6L2s5Y+R5b6u5Y2aJywKICAgICAgdHc6ICfmjInkvZzogIXnr6npgbjovYnnmbzlvq7ljZonLAogICAgICBlbjogJ0ZpbHRlciBieSBGb3J3YXJkaW5nIEF1dGhvcicsCiAgICB9LAogICAgYWNjb3VudEF1dGhvckZvcndhcmRTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65Lul5LiL5L2c6ICF6L2s5Y+R55qE5b6u5Y2afHzluJDlj7d7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aAu+aYr+aYvuekuuS7peS4i+S9nOiAhei9ieeZvOeahOW+ruWNmnx85biz6Jmfe3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyBmcm9tIHRoZXNlIGF1dGhvcnNcJyBmb3J3YXJkaW5nfHxhdXRob3Ige3tpdGVtc319JywKICAgIH0sCiAgICBhY2NvdW50QXV0aG9yRm9yd2FyZEhpZGU6IHsKICAgICAgY246ICfmgLvmmK/pmpDol4/ku6XkuIvkvZzogIXovazlj5HnmoTlvq7ljZp8fOW4kOWPt3t7aXRlbXN9fScsCiAgICAgIHR3OiAn5oC75piv6Zqx6JeP5Lul5LiL5L2c6ICF6L2J55m855qE5b6u5Y2afHzluLPomZ97e2l0ZW1zfX0nLAogICAgICBlbjogJ0hpZGUgZmVlZHMgZnJvbSB0aGVzZSBhdXRob3JzXCcgZm9yd2FyZGluZ3x8YXV0aG9yIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudEF1dGhvckZvcndhcmRGb2xkOiB7CiAgICAgIGNuOiAn5oqY5Y+g5Lul5LiL5L2c6ICF6L2s5Y+R55qE5b6u5Y2afHzluJDlj7d7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aKmOWPoOS7peS4i+S9nOiAhei9ieeZvOeahOW+ruWNmnx85biz6Jmfe3tpdGVtc319JywKICAgICAgZW46ICdGb2xkIGZlZWRzIGZyb20gdGhlc2UgYXV0aG9yc1wnIGZvcndhcmRpbmd8fGF1dGhvciB7e2l0ZW1zfX0nLAogICAgfSwKICAgIGFjY291bnRBdXRob3JGb3J3YXJkUmVhc29uOiB7CiAgICAgIGNuOiAn55SxIEB7MX0g6L2s5Y+RJywKICAgICAgdHc6ICfnlLEgQHsxfSDovYnnmbwnLAogICAgICBlbjogJ2ZvcndhcmRlZCBieSBAezF9JywKICAgIH0sCiAgfSk7CgogIGNsYXNzIEF1dGhvckZvcndhcmRGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gYXV0aG9yRmlsdGVyRmVlZEZpbHRlcigvKiogQHR5cGUge0VsZW1lbnR9ICovZmVlZCkgewogICAgICAgIGNvbnN0IGF1dGhvcnMgPSBbXTsKICAgICAgICAvLyDlpoLmnpzkuIDmnaHlvq7ljZrmmK/kvKDnu5/nmoTovazlj5Hlvq7ljZrvvIzovazlj5HkvZzogIXorqHlhaXlnKjlhoUKICAgICAgICAvLyDlpoLmnpzkuIDmnaHlvq7ljZrmmK/lv6vovazlvq7ljZrvvIzooqvlv6vovaznmoTlvq7ljZrlpoLmnpzmmK/ovazlj5Hlvq7ljZrvvIzooqvlv6vovaznmoTlvq7ljZrnmoTkvZzogIXlkIzmoLforqHlhaXlnKjlhoUKICAgICAgICBpZiAoZmVlZFBhcnNlci5pc0ZvcndhcmQoZmVlZCkpIHsKICAgICAgICAgIGNvbnN0IFtpZF0gPSBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKTsKICAgICAgICAgIGNvbnN0IFtuYW1lXSA9IGZlZWRQYXJzZXIuYXV0aG9yLm5hbWUoZmVlZCk7CiAgICAgICAgICBhdXRob3JzLnB1c2goeyBpZCwgbmFtZSB9KTsKICAgICAgICB9CiAgICAgICAgLy8g5aaC5p6c5LiA5p2h5b6u5Y2a5piv5b+r6L2s5b6u5Y2a77yM5b+r6L2s55qE5L2c5Lia6K6h5YWl5Zyo5YaFCiAgICAgICAgaWYgKGZlZWRQYXJzZXIuaXNGYXN0KGZlZWQpKSB7CiAgICAgICAgICBjb25zdCBbaWRdID0gZmVlZFBhcnNlci5mYXV0aG9yLmlkKGZlZWQpOwogICAgICAgICAgY29uc3QgW25hbWVdID0gZmVlZFBhcnNlci5mYXV0aG9yLm5hbWUoZmVlZCk7CiAgICAgICAgICBhdXRob3JzLnB1c2goeyBpZCwgbmFtZSB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFhdXRob3JzLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgYWNjb3VudHMgPSBydWxlLnJlZi5pdGVtcy5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCByZWFzb25Vc2VyID0gYXV0aG9ycy5maW5kKGF1dGhvciA9PiBhY2NvdW50cy5zb21lKGFjY291bnQgPT4gYXV0aG9yLmlkID09PSBhY2NvdW50LmlkKSk7CiAgICAgICAgaWYgKCFyZWFzb25Vc2VyKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmFjY291bnRBdXRob3JGb3J3YXJkUmVhc29uLnJlcGxhY2UoJ3sxfScsICgpID0+IHJlYXNvblVzZXIubmFtZSk7CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24sIHJlYXNvbiB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IEF1dGhvckZvcndhcmRGZWVkUnVsZSwKICAgIHRhYjogJ2F1dGhvcicsCiAgICBrZXk6ICdmb3J3YXJkX2lkJywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAndXNlcnMnLAogICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvcndhcmRHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvcndhcmRIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvcndhcmRTaG93LAogICAgICB9LAogICAgICBmb2xkOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvcndhcmRGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbXSwgWydhdXRob3InLCAnb3JpZ2luYWwnLCAnbWVudGlvbicsICdhY2NvdW50JywgJ2NvbW1lbnR1c2VyJ11dLAogICAgICByYWRpb0dyb3VwOiAnYXV0aG9yJywKICAgICAgcmVuZGVyOiBmZWVkUGFyc2VyLmZhc3QucmVuZGVyLmZvcndhcmQsCiAgICB9LAogIH0pOwoKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvYWNjb3VudC9vcmlnaW5hbC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwoKICBjb25zdCBydWxlcyA9IHlhd2YucnVsZXM7CiAgY29uc3Qgb3JpZ2luYWwgPSBydWxlcy5vcmlnaW5hbDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBhY2NvdW50T3JpZ2luYWxHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5Y6f5L2c6ICF6L+H5rukJywKICAgICAgdHc6ICfmjInljp/kvZzogIXnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBPcmlnaW5hbCcsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsU2hvdzogewogICAgICBjbjogJ+aAu+aYr+aYvuekuui9rOWPkeiHquS7peS4i+W4kOWPt+eahOW+ruWNmnx85Y6f5L2c6ICFe3tpdGVtc319JywKICAgICAgdHc6ICfnuL3mmK/poa/npLrovYnnmbzoh6rku6XkuIvluLPomZ/nmoTlvq7ljZp8fOWOn+S9nOiAhXt7aXRlbXN9fScsCiAgICAgIGVuOiAnQWx3YXlzIHNob3cgZmVlZHMgZm9yd2FyZGVkIGZyb20gdGhlc2UgYXV0aG9yc3x8b3JpZ2luYWwge3tpdGVtc319JywKICAgIH0sCiAgICBhY2NvdW50T3JpZ2luYWxIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JeP6L2s5Y+R6Ieq5Lul5LiL5biQ5Y+355qE5b6u5Y2afHzljp/kvZzogIV7e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+i9ieeZvOiHquS7peS4i+W4s+iZn+eahOW+ruWNmnx85Y6f5L2c6ICFe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIGZvcndhcmRlZCBmcm9tIHRoZXNlIGF1dGhvcnN8fG9yaWdpbmFsIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsRm9sZDogewogICAgICBjbjogJ+aKmOWPoOi9rOWPkeiHquS7peS4i+W4kOWPt+eahOW+ruWNmnx85Y6f5L2c6ICFe3tpdGVtc319JywKICAgICAgdHc6ICfmipjnlorovYnnmbzoh6rku6XkuIvluLPomZ/nmoTlvq7ljZp8fOWOn+S9nOiAhXt7aXRlbXN9fScsCiAgICAgIGVuOiAnRm9sZCBmZWVkcyBmb3J3YXJkZWQgZnJvbSB0aGVzZSBhdXRob3JzfHxvcmlnaW5hbCB7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsRGlzY292ZXI6IHsKICAgICAgY246ICfmjInljp/liJvkvZzogIXov4fmu6TnmoTop4TliJnlr7nlj5HnjrDpobXpnaLnmoTkvZzogIXnlJ/mlYgnLAogICAgICB0dzogJ+aMieWOn+WJteS9nOiAhemBjua/vueahOimj+WJh+WwjeeZvOePvumggemdoueahOS9nOiAheeUn+aViCcsCiAgICAgIGVuOiAnUnVsZXMgZmlsdGVyIGJ5IG9yaWdpbmFscyBhcHBseSB0byBhdXRob3JzIGluIGRpc2NvdmVyeSBwYWdlcycsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsUmVhc29uOiB7CiAgICAgIGNuOiAn6L2s5Y+R6IeqIEB7MX0nLAogICAgICB0dzogJ+i9ieeZvOiHqiBAezF9JywKICAgICAgZW46ICdmb3J3YXJkZWQgZnJvbSBAezF9JywKICAgIH0sCiAgICBhY2NvdW50T3JpZ2luYWxEaXNjb3ZlclJlYXNvbjogewogICAgICBjbjogJ+S9nOiAhSBAezF9JywKICAgICAgdHc6ICfkvZzogIUgQHsxfScsCiAgICAgIGVuOiAnYXV0aG9yIEB7MX0nLAogICAgfSwKICAgIGFjY291bnRPcmlnaW5hbEZhc3RGb3J3YXJkUmVhc29uOiB7CiAgICAgIGNuOiAn5b+r6L2s6IeqIEB7MX0nLAogICAgICB0dzogJ+W/q+i9ieiHqiBAezF9JywKICAgICAgZW46ICdmYXN0IGZvcndhcmRlZCBmcm9tIEB7MX0nLAogICAgfSwKICAgIGFjY291bnRPcmlnaW5hbEZvbGxvd2VyOiB7CiAgICAgIGNuOiAn6ZqQ6JeP6L2s5Y+R6IeqfOeyieS4neaVsOmHj+i2hei/h3t7Y291bnR9feS4h+eahOWNmuS4u+eahOW+ruWNmnx85L6L5aSW5biQ5Y+3e3thY2NvdW50fX0nLAogICAgICB0dzogJ+maseiXj+i9ieeZvOiHqnznsonntbLmlbjph4/otoXpgY57e2NvdW50fX3okKznmoTljZrkuLvnmoTlvq7ljZp8fOS+i+WkluW4kOWPt3t7YWNjb3VudH19JywKICAgICAgZW46ICdIaWRlIGZlZWRzIGZvcndhcmRlZCBmcm9tIGF1dGhvcnMgd2l0aCB8IG1vcmUgdGhhbiB7e2NvdW50fX0wLDAwMCBmYW5zfHxFeGNlcHRpb24ge3thY2NvdW50fX0nLAogICAgfSwKICB9KTsKCiAgY29uc3QgYWRkaXRpb25hbFJ1bGVzID0gZnVuY3Rpb24gKCkgewogICAgb3JpZ2luYWwuaWQuZGlzY292ZXIgPSBydWxlLlJ1bGUoewogICAgICBpZDogJ2ZpbHRlcl9vcmlnaW5hbF9kaXNjb3ZlcicsCiAgICAgIHZlcnNpb246IDEsCiAgICAgIHBhcmVudDogb3JpZ2luYWwuaWQuaWQsCiAgICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmFjY291bnRPcmlnaW5hbERpc2NvdmVyLAogICAgfSk7CiAgfTsKCiAgY2xhc3MgT3JpZ2luYWxGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gb3JpZ2luYWxGaWx0ZXJGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgYWNjb3VudHMgPSBydWxlLnJlZi5pdGVtcy5nZXRDb25maWcoKTsKCiAgICAgICAgY29uc3QgW29yaWdpbmFsXSA9IGZlZWRQYXJzZXIub3JpZ2luYWwuaWQoZmVlZCk7CiAgICAgICAgaWYgKGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBhY2NvdW50LmlkID09PSBvcmlnaW5hbCkpIHsKICAgICAgICAgIGNvbnN0IG5hbWUgPSBmZWVkUGFyc2VyLm9yaWdpbmFsLm5hbWUoZmVlZCk7CiAgICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmFjY291bnRPcmlnaW5hbFJlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBuYW1lKTsKICAgICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uLCByZWFzb24gfTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHBhZ2VUeXBlID0geWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gaW5pdC5wYWdlLnR5cGUoKSA6IG51bGw7IC8vIFY3IFRPRE8KICAgICAgICBjb25zdCBpc0Rpc2NvdmVyID0gcGFnZVR5cGUgPT09ICdkaXNjb3Zlcic7CiAgICAgICAgY29uc3QgYXNEaXNjb3ZlciA9IHJ1bGVzLm9yaWdpbmFsLmlkLmRpc2NvdmVyLmlzRW5hYmxlZCgpICYmIGlzRGlzY292ZXI7CiAgICAgICAgY29uc3QgYXNGYXN0Rm9yd2FyZCA9IGZlZWRQYXJzZXIuaXNGYXN0KGZlZWQpOwogICAgICAgIGlmIChhc0Rpc2NvdmVyIHx8IGFzRmFzdEZvcndhcmQpIHsKICAgICAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5hdXRob3IuaWQoZmVlZCk7CiAgICAgICAgICBpZiAoYWNjb3VudHMuZmluZChhY2NvdW50ID0+IGF1dGhvciA9PT0gYWNjb3VudC5pZCkpIHsKICAgICAgICAgICAgY29uc3QgbmFtZSA9IGZlZWRQYXJzZXIuYXV0aG9yLm5hbWUoZmVlZCk7CiAgICAgICAgICAgIGlmIChhc0Rpc2NvdmVyKSB7CiAgICAgICAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi5hY2NvdW50T3JpZ2luYWxEaXNjb3ZlclJlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBuYW1lKTsKICAgICAgICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi5hY2NvdW50T3JpZ2luYWxGYXN0Rm9yd2FyZFJlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBuYW1lKTsKICAgICAgICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IE9yaWdpbmFsRmVlZFJ1bGUsCiAgICB0YWI6ICdvcmlnaW5hbCcsCiAgICBrZXk6ICdpZCcsCiAgICB0eXBlOiAndXNlcnMnLAogICAgdmVyc2lvbjogMSwKICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRPcmlnaW5hbEdyb3VwVGl0bGUsCiAgICBkZXRhaWxzOiB7CiAgICAgIGhpZGU6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5hY2NvdW50T3JpZ2luYWxIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudE9yaWdpbmFsU2hvdywKICAgICAgfSwKICAgICAgZm9sZDogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRPcmlnaW5hbEZvbGQsCiAgICAgIH0sCiAgICB9LAogICAgYmVmb3JlOiB7CiAgICAgIHNob3c6IGFkZGl0aW9uYWxSdWxlcywKICAgIH0sCiAgICBmYXN0OiB7CiAgICAgIHR5cGVzOiBbWydvcmlnaW5hbCcsICdhY2NvdW50J10sIFsnYXV0aG9yJywgJ21lbnRpb24nLCAnY29tbWVudHVzZXInXV0sCiAgICAgIHJhZGlvR3JvdXA6ICdvcmlnaW5hbCcsCiAgICAgIHJlbmRlcjogZmVlZFBhcnNlci5mYXN0LnJlbmRlci5vcmlnaW5hbCwKICAgIH0sCiAgfSk7CgogIG9yaWdpbmFsLmlkLmZvbGxvd2VyID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfb3JpZ2luYWxfZm9sbG93ZXInLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogb3JpZ2luYWwuaWQuaWQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hY2NvdW50T3JpZ2luYWxGb2xsb3dlciwKICAgIHJlZjogewogICAgICBjb3VudDogeyB0eXBlOiAncmFuZ2UnLCBtaW46IDEsIG1heDogMTAwLCBpbml0aWFsOiAxMCB9LAogICAgICBhY2NvdW50OiB7IHR5cGU6ICd1c2VycycgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoYXN5bmMgZnVuY3Rpb24gb3JpZ2luYWxGb2xsb3dlckZlZWRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IG9yaWdpbmFsID0gZmVlZFBhcnNlci5vcmlnaW5hbC5pZChmZWVkKTsKICAgICAgICBpZiAoZmVlZFBhcnNlci5pc0Zhc3QoZmVlZCkpIHsKICAgICAgICAgIG9yaWdpbmFsLnB1c2goZmVlZFBhcnNlci5hdXRob3IuaWQoZmVlZCkpOwogICAgICAgIH0KICAgICAgICBjb25zdCBhY2NvdW50cyA9IHJ1bGUucmVmLmFjY291bnQuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBvcmlnaW5hbC5maWx0ZXIoaWQgPT4gIWFjY291bnRzLmZpbmQodXNlciA9PiB1c2VyLmlkID09PSBpZCkpOwogICAgICAgIGNvbnN0IGZvbGxvd2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGZpbHRlcmVkCiAgICAgICAgICAubWFwKGlkID0+IHJlcXVlc3QudXNlckluZm8oeyBpZCB9KS50aGVuKHVzZXIgPT4gdXNlci5mb2xsb3dlcikpCiAgICAgICAgKTsKICAgICAgICBjb25zdCBsaW1pdCA9IHJ1bGUucmVmLmNvdW50LmdldENvbmZpZygpICogMWU0OwogICAgICAgIGNvbnN0IG1hdGNoID0gZm9sbG93ZXJzLnNvbWUoaSA9PiBpID49IGxpbWl0KTsKICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4geyByZXN1bHQ6ICdoaWRlJyB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgICAgdGhpcy5yZWYuYWNjb3VudC5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICAgIHRoaXMucmVmLmNvdW50LmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2FjY291bnQvbWVudGlvbi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYWNjb3VudE1lbnRpb25Hcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5o+Q5Yiw6L+H5rukJywKICAgICAgdHc6ICfmjInmj5DliLDnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBNZW50aW9uJywKICAgIH0sCiAgICBhY2NvdW50TWVudGlvblNob3c6IHsKICAgICAgY246ICfmgLvmmK/mmL7npLrmj5DliLDku6XkuIvluJDlj7fnmoTlvq7ljZp8fOS9nOiAhXt7aXRlbXN9fScsCiAgICAgIHR3OiAn57i95piv6aGv56S65o+Q5Yiw5Lul5LiL5biz6Jmf55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICBlbjogJ0Fsd2F5cyBzaG93IGZlZWRzIG1lbnRpb25lZCB0aGVzZSBhY2NvdW50c3x8bWVudGlvbiB7e2l0ZW1zfX0nLAogICAgfSwKICAgIGFjY291bnRNZW50aW9uSGlkZTogewogICAgICBjbjogJ+makOiXj+aPkOWIsOS7peS4i+W4kOWPt+eahOW+ruWNmnx85L2c6ICFe3tpdGVtc319JywKICAgICAgdHc6ICfpmrHol4/mj5DliLDku6XkuIvluLPomZ/nmoTlvq7ljZp8fOS9nOiAhXt7aXRlbXN9fScsCiAgICAgIGVuOiAnSGlkZSBmZWVkcyBtZW50aW9uZWQgdGhlc2UgYWNjb3VudHN8fG1lbnRpb24ge3tpdGVtc319JywKICAgIH0sCiAgICBhY2NvdW50TWVudGlvbkZvbGQ6IHsKICAgICAgY246ICfmipjlj6Dmj5DliLDku6XkuIvluJDlj7fnmoTlvq7ljZp8fOS9nOiAhXt7aXRlbXN9fScsCiAgICAgIHR3OiAn5oqY55aK5o+Q5Yiw5Lul5LiL5biz6Jmf55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICBlbjogJ0ZvbGQgZmVlZHMgbWVudGlvbmVkIHRoZXNlIGFjY291bnRzfHxtZW50aW9uIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudE1lbnRpb25SZWFzb246IHsKICAgICAgY246ICfmj5DliLDkuoYgQHsxfScsCiAgICAgIHR3OiAn5o+Q5Yiw5LqGIEB7MX0nLAogICAgICBlbjogJ21lbnRpb25lZCBAezF9JywKICAgIH0sCiAgfSk7CgogIGNsYXNzIE1lbnRpb25GZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gbWVudGlvbkZpbHRlckZlZWRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBjb25zdCBtZW50aW9ucyA9IG5ldyBTZXQoZmVlZFBhcnNlci5tZW50aW9uLm5hbWUoZmVlZCkpOwogICAgICAgIGNvbnN0IGFjY291bnRzID0gcnVsZS5yZWYuaXRlbXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgY29udGFpbiA9IGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBtZW50aW9ucy5oYXMoYWNjb3VudCkpOwogICAgICAgIGlmICghY29udGFpbikgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi5hY2NvdW50TWVudGlvblJlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBjb250YWluKTsKICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgIH0sIHsgcHJpb3JpdHk6IHRoaXMucHJpb3JpdHkgfSk7CiAgICAgIHRoaXMucmVmLml0ZW1zLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0KICB9CgogIHJ1bGUuZ3JvdXBzKHsKICAgIGJhc2VDbGFzczogTWVudGlvbkZlZWRSdWxlLAogICAgdGFiOiAnbWVudGlvbicsCiAgICBrZXk6ICduYW1lJywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAndXNlcm5hbWVzJywKICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRNZW50aW9uR3JvdXBUaXRsZSwKICAgIGRldGFpbHM6IHsKICAgICAgaGlkZTogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRNZW50aW9uSGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRNZW50aW9uU2hvdywKICAgICAgfSwKICAgICAgZm9sZDogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRNZW50aW9uRm9sZCwKICAgICAgfSwKICAgIH0sCiAgICBmYXN0OiB7CiAgICAgIHR5cGVzOiBbWydtZW50aW9uJywgJ2FjY291bnQnXSwgWydhdXRob3InLCAnb3JpZ2luYWwnXV0sCiAgICAgIHJhZGlvR3JvdXA6ICdtZW50aW9uJywKICAgICAgcmVuZGVyOiBmZWVkUGFyc2VyLmZhc3QucmVuZGVyLm1lbnRpb24sCiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci90b3BpYy90b3BpYy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4udG9waWNUYWJUaXRsZSA9IHsKICAgIGNuOiAn6K+d6aKYJywKICAgIHR3OiAn6Kmx6aGMJywKICAgIGVuOiAnVG9waWMnLAogIH07CgogIGNvbnN0IHRvcGljID0geWF3Zi5ydWxlcy50b3BpYyA9IHt9OwogIHRvcGljLnRvcGljID0gcnVsZS5UYWIoewogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udG9waWNUYWJUaXRsZSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvdG9waWMvdGV4dC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgdG9waWNHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ6K+d6aKY6L+H5rukJywKICAgICAgdHc6ICfmjInoqbHpoYznr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBUb3BpY3MnLAogICAgfSwKICAgIHRvcGljU2hvdzogewogICAgICBjbjogJ+aAu+aYr+aYvuekuuWMheWQq+S7peS4i+ivnemimOeahOW+ruWNmnx86K+d6aKYe3tpdGVtc319JywKICAgICAgdHc6ICfmgLvmmK/mmL7npLrljIXlkKvku6XkuIvoqbHpoYznmoTlvq7ljZp8fOipsemhjHt7aXRlbXN9fScsCiAgICAgIGVuOiAnQWx3YXlzIHNob3cgZmVlZHMgd2l0aCB0aGVzZSB0b3BpY3N8fHRvcGljIHt7aXRlbXN9fScsCiAgICB9LAogICAgdG9waWNIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JeP5YyF5ZCr5Lul5LiL6K+d6aKY55qE5b6u5Y2afHzor53poph7e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+WMheWQq+S7peS4i+ipsemhjOeahOW+ruWNmnx86Kmx6aGMe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIHdpdGggdGhlc2UgdG9waWNzfHx0b3BpYyB7e2l0ZW1zfX0nLAogICAgfSwKICAgIHRvcGljRm9sZDogewogICAgICBjbjogJ+aKmOWPoOWMheWQq+S7peS4i+ivnemimOeahOW+ruWNmnx86K+d6aKYe3tpdGVtc319JywKICAgICAgdHc6ICfmipjnlorljIXlkKvku6XkuIvoqbHpoYznmoTlvq7ljZp8fOipsemhjHt7aXRlbXN9fScsCiAgICAgIGVuOiAnRm9sZCBmZWVkcyB3aXRoIHRoZXNlIHRvcGljc3x8dG9waWMge3tpdGVtc319JywKICAgIH0sCiAgICB0b3BpY1JlYXNvbjogewogICAgICBjbjogJ+aPkOWIsOivnemimCB7MX0nLAogICAgICB0dzogJ+aPkOWIsOipsemhjCB7MX0nLAogICAgICBlbjogJ21lbnRpb25lZCB0b3BpYyB7MX0nLAogICAgfSwKICB9KTsKCiAgY2xhc3MgVG9waWNGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gdG9waWNGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGZlZWRQYXJzZXIudG9waWMudGV4dChmZWVkKTsKICAgICAgICBjb25zdCB0b3BpY3MgPSBydWxlLnJlZi5pdGVtcy5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCBjb250YWluID0gdG9waWNzLmZpbmQodG9waWMgPT4gdGV4dC5pbmNsdWRlcyh0b3BpYykpOwogICAgICAgIGlmICghY29udGFpbikgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi50b3BpY1JlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBjb250YWluKTsKICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgIH0sIHsgcHJpb3JpdHk6IHRoaXMucHJpb3JpdHkgfSk7CiAgICAgIHRoaXMucmVmLml0ZW1zLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0KICB9CgogIHJ1bGUuZ3JvdXBzKHsKICAgIGJhc2VDbGFzczogVG9waWNGZWVkUnVsZSwKICAgIHRhYjogJ3RvcGljJywKICAgIGtleTogJ3RleHQnLAogICAgdmVyc2lvbjogMSwKICAgIHR5cGU6ICd0b3BpY3MnLAogICAgdGl0bGU6ICgpID0+IGkxOG4udG9waWNHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udG9waWNIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udG9waWNTaG93LAogICAgICB9LAogICAgICBmb2xkOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udG9waWNGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ3RvcGljJ10sIFtdXSwKICAgICAgcmFkaW9Hcm91cDogJ3RvcGljJywKICAgICAgcmVuZGVyOiBmZWVkUGFyc2VyLmZhc3QucmVuZGVyLnRvcGljLAogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvc291cmNlL3NvdXJjZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uc291cmNlVGFiVGl0bGUgPSB7CiAgICBjbjogJ+adpea6kCcsCiAgICB0dzogJ+S+hua6kCcsCiAgICBlbjogJ1NvdXJjZScsCiAgfTsKCiAgY29uc3Qgc291cmNlID0geWF3Zi5ydWxlcy5zb3VyY2UgPSB7fTsKICBzb3VyY2Uuc291cmNlID0gcnVsZS5UYWIoewogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc291cmNlVGFiVGl0bGUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL3NvdXJjZS90ZXh0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzb3VyY2VHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5p2l5rqQ6L+H5rukJywKICAgICAgdHc6ICfmjInkvobmupDnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBTb3VyY2VzJywKICAgIH0sCiAgICBzb3VyY2VTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65p2l6Ieq5Lul5LiL5p2l5rqQ55qE5b6u5Y2afHzmnaXmupB7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aAu+aYr+aYvuekuuS+huiHquS7peS4i+S+hua6kOeahOW+ruWNmnx85L6G5rqQe3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyBmcm9tIHRoZXNlIHNvdXJjZXN8fHNvdXJjZSB7e2l0ZW1zfX0nLAogICAgfSwKICAgIHNvdXJjZUhpZGU6IHsKICAgICAgY246ICfpmpDol4/mnaXoh6rku6XkuIvmnaXmupDnmoTlvq7ljZp8fOadpea6kHt7aXRlbXN9fScsCiAgICAgIHR3OiAn6Zqx6JeP5L6G6Ieq5Lul5LiL5L6G5rqQ55qE5b6u5Y2afHzkvobmupB7e2l0ZW1zfX0nLAogICAgICBlbjogJ0hpZGUgZmVlZHMgZnJvbSB0aGVzZSBzb3VyY2VzfHxzb3VyY2Uge3tpdGVtc319JywKICAgIH0sCiAgICBzb3VyY2VGb2xkOiB7CiAgICAgIGNuOiAn5oqY5Y+g5p2l6Ieq5Lul5LiL5p2l5rqQ55qE5b6u5Y2afHzmnaXmupB7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aKmOeWiuS+huiHquS7peS4i+S+hua6kOeahOW+ruWNmnx85L6G5rqQe3tpdGVtc319JywKICAgICAgZW46ICdGb2xkIGZlZWRzIGZyb20gdGhlc2Ugc291cmNlc3x8c291cmNlIHt7aXRlbXN9fScsCiAgICB9LAogICAgc291cmNlUmVhc29uOiB7CiAgICAgIGNuOiAn5p2l6IeqIHsxfScsCiAgICAgIHR3OiAn5L6G6IeqIHsxfScsCiAgICAgIGVuOiAncG9zdGVkIHZpYSB7MX0nLAogICAgfSwKICB9KTsKCiAgY2xhc3MgU291cmNlRmVlZFJ1bGUgZXh0ZW5kcyBydWxlLmNsYXNzLlJ1bGUgewogICAgZ2V0IHdlaWJvVmVyc2lvbigpIHsgcmV0dXJuIHRoaXMuZmVlZEFjdGlvbiA9PT0gJ2ZvbGQnID8gWzZdIDogWzYsIDddOyB9CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgfQogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHNvdXJjZUZlZWRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBjb25zdCB0ZXh0ID0gZmVlZFBhcnNlci5zb3VyY2UudGV4dChmZWVkKTsKICAgICAgICBjb25zdCBzb3VyY2VzID0gcnVsZS5yZWYuaXRlbXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgY29udGFpbiA9IHNvdXJjZXMuc29tZShzb3VyY2UgPT4gdGV4dC5pbmNsdWRlcyhzb3VyY2UpKTsKICAgICAgICBpZiAoIWNvbnRhaW4pIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHJlYXNvbiA9IGkxOG4uc291cmNlUmVhc29uLnJlcGxhY2UoJ3sxfScsICgpID0+IHRleHQpOwogICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uLCByZWFzb24gfTsKICAgICAgfSwgeyBwcmlvcml0eTogdGhpcy5wcmlvcml0eSB9KTsKICAgICAgdGhpcy5yZWYuaXRlbXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfQogIH0KCiAgcnVsZS5ncm91cHMoewogICAgYmFzZUNsYXNzOiBTb3VyY2VGZWVkUnVsZSwKICAgIHRhYjogJ3NvdXJjZScsCiAgICBrZXk6ICd0ZXh0JywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAnc3RyaW5ncycsCiAgICB0aXRsZTogKCkgPT4gaTE4bi5zb3VyY2VHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uc291cmNlSGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLnNvdXJjZVNob3csCiAgICAgIH0sCiAgICAgIGZvbGQ6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5zb3VyY2VGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ3NvdXJjZSddLCBbXV0sCiAgICAgIHJhZGlvR3JvdXA6ICdzb3VyY2UnLAogICAgICByZW5kZXI6IGZlZWRQYXJzZXIuZmFzdC5yZW5kZXIuc291cmNlLAogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvbW9yZS9tb3JlLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5tb3JlVGFiVGl0bGUgPSB7CiAgICBjbjogJ+abtOWkmicsCiAgICB0dzogJ+WFtuS7licsCiAgICBlbjogJ01vcmUnLAogIH07CgogIGNvbnN0IG1vcmUgPSB5YXdmLnJ1bGVzLm1vcmUgPSB7fTsKICBtb3JlLm1vcmUgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tb3JlVGFiVGl0bGUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL21vcmUvbXlzZWxmLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBtb3JlID0geWF3Zi5ydWxlcy5tb3JlOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGkxOG4ub3RoZXJXaGl0ZWxpc3RUaXRsZSA9IHsKICAgIGNuOiAn5pi+56S65Lul5LiL5YaF5a6577yI5LiN6K6h5YWl55m95ZCN5Y2V77yJJywKICAgIHR3OiAn6aGv56S65Lul5LiL5YWn5a6577yI5LiN6KiI5YWl55m95ZCN5Zau77yJJywKICAgIGVuOiAnU2hvdyBmb2xsb3dpbmcgY29udGVudCAobm90IHJlZ2FyZCBhcyB3aGl0ZWxpc3QpJywKICB9OwoKICBjb25zdCBzaG93dGhlc2UgPSBtb3JlLnNob3d0aGVzZSA9IHt9OwogIHNob3d0aGVzZS5zaG93dGhlc2UgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbW9yZS5tb3JlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ub3RoZXJXaGl0ZWxpc3RUaXRsZSwKICB9KTsKCiAgaTE4bi5zaG93TXlGZWVkRGV0YWlsID0gewogICAgY246ICfoh6rlt7HnmoTlvq7ljZonLAogICAgdHc6ICfoh6rlt7HnmoTlvq7ljZonLAogICAgZW46ICdGZWVkcyBieSBteXNlbGYnLAogIH07CgogIHNob3d0aGVzZS5zaG93TXlGZWVkID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfbXlfZmVlZCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBzaG93dGhlc2Uuc2hvd3RoZXNlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvd015RmVlZERldGFpbCwKICAgIGluaXRpYWw6IHRydWUsCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gc2hvd015RmVlZChmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBtZSA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGluaXQucGFnZS4kQ09ORklHLnVpZCA6IGluaXQucGFnZS51aWQoKTsKICAgICAgICBjb25zdCBbYXV0aG9yXSA9IGZlZWRQYXJzZXIuYXV0aG9yLmlkKGZlZWQpOwogICAgICAgIGNvbnN0IFtmYXV0aG9yXSA9IGZlZWRQYXJzZXIuZmF1dGhvci5pZChmZWVkKTsKICAgICAgICBpZiAobWUgPT09IGF1dGhvciB8fCBtZSA9PT0gZmF1dGhvcikgcmV0dXJuICdzaG93bWUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiAxZTQgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5zaG93TXlPcmlnaW5hbERldGFpbCA9IHsKICAgIGNuOiAn6Ieq5bex5b6u5Y2a55qE6L2s5Y+RJywKICAgIHR3OiAn6Ieq5bex5b6u5Y2a55qE6L2J55m8JywKICAgIGVuOiAnRm9yd2FyZCBvZiBteSBGZWVkcycsCiAgfTsKCiAgc2hvd3RoZXNlLnNob3dNeU9yaWdpbmFsID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfbXlfb3JpZ2luYWwnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2hvd3RoZXNlLnNob3d0aGVzZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dNeU9yaWdpbmFsRGV0YWlsLAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHNob3dNeU9yaWdpbmFsKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IG1lID0geWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gaW5pdC5wYWdlLiRDT05GSUcudWlkIDogaW5pdC5wYWdlLnVpZCgpOwogICAgICAgIGNvbnN0IFtvcmlnaW5hbF0gPSBmZWVkUGFyc2VyLm9yaWdpbmFsLmlkKGZlZWQpOwogICAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5pc0Zhc3QoZmVlZCkgPyBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKSA6IFtdOwogICAgICAgIGlmIChtZSA9PT0gb3JpZ2luYWwgfHwgbWUgPT09IGF1dGhvcikgcmV0dXJuICdzaG93bWUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiAxZTQgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5zaG93TWVudGlvbk1lRGV0YWlsID0gewogICAgY246ICfmj5DliLDoh6rlt7HnmoTlvq7ljZonLAogICAgdHc6ICfmj5DliLDoh6rlt7HnmoTlvq7ljZonLAogICAgZW46ICdGZWVkcyBtZW50aW9uZWQgbXlzZWxmJywKICB9OwoKICBzaG93dGhlc2Uuc2hvd01lbnRpb25NZSA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnZmlsdGVyX21lbnRpb25fbWUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2hvd3RoZXNlLnNob3d0aGVzZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dNZW50aW9uTWVEZXRhaWwsCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gc2hvd01lbnRpb25NZShmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBtZSA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGluaXQucGFnZS4kQ09ORklHLnVpZCA6IGluaXQucGFnZS51aWQoKTsKICAgICAgICBjb25zdCBtZW50aW9ucyA9IGZlZWRQYXJzZXIubWVudGlvbi5uYW1lKGZlZWQpOwogICAgICAgIGlmIChtZW50aW9ucy5pbmNsdWRlcyhtZSkpIHJldHVybiAnc2hvd21lJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSwgeyBwcmlvcml0eTogMWU0IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHNob3dNeUZhdk9yTGlrZShmZWVkKSB7CiAgICBjb25zdCB0eXBlID0gaW5pdC5wYWdlLnR5cGUoKTsKICAgIGlmICh0eXBlID09PSAnZmF2JyB8fCB0eXBlID09PSAnbGlrZScpIHJldHVybiAnc2hvd2Zhdic7CiAgICByZXR1cm4gbnVsbDsKICB9LCB7IHByaW9yaXR5OiAxZTcgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL21vcmUvY29tbWVyY2lhbC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgbW9yZSA9IHlhd2YucnVsZXMubW9yZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBpMThuLm1vcmVDb21tZXJjaWFsR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn6ZqQ6JeP5Lul5LiL5b6u5Y2aIC0g5bm/5ZGKL+WVhuWTgS/mjqjojZAnLAogICAgdHc6ICfpmrHol4/ku6XkuIvlhaflrrkgLSDlu6PlkYov5ZWG5ZOBL+aOqOiWpicsCiAgICBlbjogJ0hpZGUgZm9sbG93aW5nIGNvbnRlbnQgLSBBZCAvIFByb21vdGlvbiAvIFJlY29tbWVuZCcsCiAgfTsKCiAgY29uc3QgY29tbWVyY2lhbCA9IG1vcmUuY29tbWVyY2lhbCA9IHt9OwogIGNvbW1lcmNpYWwuY29tbWVyY2lhbCA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tb3JlQ29tbWVyY2lhbEdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uYWRGZWVkRmlsdGVyID0gewogICAgY246ICfmjqjlub/lvq7ljZov57KJ5Lid6YCa5b6u5Y2aL+WTgeeJjOmAn+mAki/lpb3lj4votZ7ov4fnmoTlvq7ljZoge3tpfX0nLAogICAgdHc6ICfmjqjlu6Plvq7ljZov57KJ57Wy6YCa5b6u5Y2aL+WTgeeJjOmAn+mBni/lpb3lj4votIrpgY7nmoTlvq7ljZoge3tpfX0nLAogICAgZW46ICdBZCBXZWlibyAvIEluc2VydGVkIG5vdCBmb2xsb3dlZCBXZWlibyB7e2l9fScsCiAgfTsKICBpMThuLmFkRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn6L+Z5Lqb5b6u5Y2a5LiA6Iis5Ye6546w5Zyo5oKo55qE6aaW6aG177yM5bim5pyJ4oCc5o6o6I2Q4oCd4oCc5aW95Y+L6LWe6L+H4oCd562J5qCH6K6w77yM5L2G5aSn5aSa5p2l6Ieq5oKo5bm25pyq5YWz5rOo55qE5Lq644CCJywKICB9OwoKICBjb21tZXJjaWFsLmFkID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfYWRfZmVlZCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb21tZXJjaWFsLmNvbW1lcmNpYWwsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hZEZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmFkRmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBhZEZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgLy8g5L+u5pS56L+Z6YeM5pe26K+35rOo5oSP77yM5oKE5oKE5YWz5rOo5Lmf5Lya5pi+56S65YWz5rOo5oyJ6ZKu77yM5L2G5piv55u45YWz5b6u5Y2a5LiN5bqU6KKr6ZqQ6JePCiAgICAgICAgICAvLyDlv6vovazkuZ/lj6/og73mnInlhbPms6jmjInpkq7vvIzkvYbmmK/lv6vovazkuI3lnKjov5nph4zpmpDol48KICAgICAgICAgIGlmIChmZWVkLmdldEF0dHJpYnV0ZSgnZmVlZHR5cGUnKSA9PT0gJ2FkJykgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1thY3Rpb24tdHlwZT0iZmVlZF9saXN0X2FkIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZio9Ii8vYWRpbnNpZGUud2VpYm8uY24vIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tkaXNzLWRhdGEqPSJmZWVkYWQiXScpICYmICFmZWVkUGFyc2VyLmlzRmFzdEZvcndhcmQoZmVlZCkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdbc3VkYS11YXRyYWNrKj0iaW5zZXJ0X2ZlZWQiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignW3N1ZGEtdWF0cmFjayo9Im5lZ2F0aXZlZmVlZGJhY2siXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignW3N1ZGEtdWF0cmFjayo9IjEwMjItYWRGZWVkRXZlbnQiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDmn5Dmn5DotZ7ov4fnmoTlvq7ljZoKICAgICAgICAgIGlmIChmZWVkLnRpdGxlPy50eXBlID09PSAnbGlrZXJlY29tbWVuZCcpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICAvLyDng63mjqggLyDlub/lkYrkuYvnsbsKICAgICAgICAgIGlmIChmZWVkLmNvbnRlbnRfYXV0aCA9PT0gNSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnJldHdlZXRlZF9zdGF0dXM/LmNvbnRlbnRfYXV0aCA9PT0gNSkgcmV0dXJuICdoaWRlJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0sIHsgcHJpb3JpdHk6IDFlNiB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmZhbnNUb3BGZWVkRmlsdGVyID0gewogICAgY246ICfnsonkuJ3lpLTmnaEge3tpfX0nLAogICAgdHc6ICfnsonntbLpoK3mop0ge3tpfX0nLAogICAgZW46ICdGYW5zIHRvcCAoaGVhZGxpbmUgd2VpYm8pIHt7aX19JywKICB9OwogIGkxOG4uZmFuc1RvcEZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+eyieS4neWktOadoeS8muaYvuekuuWcqOmmlumhtea2iOaBr+a1geeahOmhtumDqO+8jOS4gOiIrOW4puacieKAnOeDremXqOKAneetieagh+iusOOAgueyieS4neWktOadoeaYr+aWsOa1quW+ruWNmuWumOaWueeahOS4gOmhueaOqOW5v+S6p+WTge+8jOS9v+eUqOeyieS4neWktOadoeeahOW+ruWNmuWPr+WcqCAyNCDlsI/ml7blhoXlh7rnjrDlnKjmiYDmnInnsonkuJ3pppbpobXnmoTnrKzkuIDkvY3jgILnsonkuJ3lpLTmnaHlvq7ljZrmgLvmmK/mnaXoh6rkuo7mgqjlhbPms6jnmoTkurrjgIInLAogIH07CgogIGNvbW1lcmNpYWwuZmFuc1RvcCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9mYW5zX3RvcCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb21tZXJjaWFsLmNvbW1lcmNpYWwsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mYW5zVG9wRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmFuc1RvcEZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gZmFuc1RvcEZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignW2FkY2FyZD0iZmFuc3RvcCJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4ud2VpYm9Qcm9kdWN0RmVlZEZpbHRlciA9IHsKICAgIGNuOiAn5bim5pyJ5b6u5Y2a5qmx56qX5ZWG5ZOB6ZO+5o6l55qE5b6u5Y2ae3tpfX0nLAogICAgdHc6ICfluLbmnInlvq7ljZrmq6XnqpfllYblk4HpgKPmjqXnmoTlvq7ljZp7e2l9fScsCiAgICBlbjogJ1dlaWJvIHdpdGggbGluayB0byB3ZWlibyBzaG9wIHt7aX19JywKICB9OwogIGkxOG4ud2VpYm9Qcm9kdWN0RmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5bim5pyJ5b6u5Y2a5qmx56qX5ZWG5ZOB6ZO+5o6l55qE5b6u5Y2a77yM54K55Ye76ZO+5o6l5Y+v5Lul5Yiw5ZWG5ZOB55qE6LSt5Lmw6aG16Z2i44CC5Yu+6YCJ5Lul6ZqQ6JeP5q2k57G75b6u5Y2a44CCJywKICB9OwoKICBjb21tZXJjaWFsLndlaWJvUHJvZHVjdCA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IDYsIC8vIFY3IOacieWPpuS4gOS4quiuvue9rumhuQogICAgaWQ6ICdmaWx0ZXJfd2VpYm9fcHJvZHVjdCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb21tZXJjaWFsLmNvbW1lcmNpYWwsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi53ZWlib1Byb2R1Y3RGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi53ZWlib1Byb2R1Y3RGZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHdlaWJvUHJvZHVjdEZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfc3BlY1tleHAtZGF0YSo9ImtleT10YmxvZ193ZWlib2NhcmQiXVtleHAtZGF0YSo9IjEwMjItcHJvZHVjdCJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfc3BlY1tleHAtZGF0YSo9ImtleT10YmxvZ193ZWlib2NhcmQiXVtleHAtZGF0YSo9IjIwMTc4NDUwMDItcHJvZHVjdCJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignYVthY3Rpb24tdHlwZT0iZmVlZF9saXN0X3VybCJdW3N1ZGEtdWF0cmFjayo9IjIwMTc4NDUwMDItcHJvZHVjdCJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignYVthY3Rpb24tdHlwZT0iZmVlZF9saXN0X3VybCJdW3N1ZGEtdWF0cmFjayo9IjIwMTc4NDUwMDItY29sbGVjdGlvbiJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLm1lZGlhX2JveCAuYnV5X2xpc3QnKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi50YW9iYW9Qcm9kdWN0RmVlZEZpbHRlciA9IHsKICAgIGNuOiAn5bim5pyJ5reY5a6d44CB5aSp54yr5oiW6IGa5YiS566X5ZWG5ZOB55qE5b6u5Y2ae3tpfX0nLAogICAgdHc6ICfluLbmnInmt5jlr7bjgIHlpKnospPmiJbogZrliJLnrpfllYblk4HnmoTlvq7ljZp7e2l9fScsCiAgICBlbjogJ1dlaWJvIHdpdGggVGFvYmFvIC8gVG1hbGwgLyBKdWh1YXN1YW4gY29tbW9kaXR5e3tpfX0nLAogIH07CiAgaTE4bi50YW9iYW9Qcm9kdWN0RmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5bim5pyJe3t0YW9iYW99feOAgXt7dG1hbGx9feaIlnt7anVodWFzdWFufX3nmoTlvq7ljZonLAogIH07CiAgaTE4bi50YW9iYW9Qcm9kdWN0ID0gewogICAgY246ICfmt5jlrp3llYblk4EnLAogIH07CiAgaTE4bi50bWFsbFByb2R1Y3QgPSB7CiAgICBjbjogJ+WkqeeMq+WVhuWTgScsCiAgfTsKICBpMThuLmp1aHVhc3VhblByb2R1Y3QgPSB7CiAgICBjbjogJ+iBmuWIkueul+WVhuWTgScsCiAgfTsKCiAgY29tbWVyY2lhbC50YW9iYW9Qcm9kdWN0ID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNiwgLy8gVjcg5pyJ5Y+m5LiA5Liq6K6+572u6aG5CiAgICBpZDogJ2ZpbHRlcl90Yl90bV9mZWVkJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbW1lcmNpYWwuY29tbWVyY2lhbCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnRhb2Jhb1Byb2R1Y3RGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsKICAgICAgICB0eXBlOiAnYnViYmxlJywKICAgICAgICBpY29uOiAnYXNrJywKICAgICAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi50YW9iYW9Qcm9kdWN0RmVlZEZpbHRlckRldGFpbCwKICAgICAgICByZWY6IE9iamVjdC5hc3NpZ24oLi4uWwogICAgICAgICAgeyBpZDogJ3Rhb2JhbycsIGNsYXNzTmFtZTogJ2ljb25fY2RfdGInLCBjb250ZW50OiAoKSA9PiBpMThuLnRhb2Jhb1Byb2R1Y3QgfSwKICAgICAgICAgIHsgaWQ6ICd0bWFsbCcsIGNsYXNzTmFtZTogJ2ljb25fY2RfdG1hbGwnLCBjb250ZW50OiAoKSA9PiBpMThuLnRtYWxsUHJvZHVjdCB9LAogICAgICAgICAgeyBpZDogJ2p1aHVhc3VhbicsIGNsYXNzTmFtZTogJ2ljb25fY2RfanUnLCBjb250ZW50OiAoKSA9PiBpMThuLmp1aHVhc3VhblByb2R1Y3QgfSwKICAgICAgICBdLm1hcCgoeyBpZCwgY2xhc3NOYW1lLCBjb250ZW50IH0pID0+ICh7CiAgICAgICAgICBbaWRdOiB7CiAgICAgICAgICAgIHJlbmRlcigpIHsKICAgICAgICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9IldfYnRuX2IgV19idG5fY2FyZGxpbmsgYnRuXzIycHgiPjxzcGFuIGNsYXNzPSJpY29fc3BlIj48aSBjbGFzcz0iV19pY29uIHlhd2YtY2FyZC1pY29uIj48L2k+PC9zcGFuPjxzcGFuIGNsYXNzPSJXX2F1dG9jdXQgeWF3Zi1jYXJkLWNvbnRlbnQiPjwvc3Bhbj48L3NwYW4+JzsKICAgICAgICAgICAgICBjb25zdCBpY29uID0gd3JhcC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jYXJkLWljb24nKTsKICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTsKICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gd3JhcC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jYXJkLWNvbnRlbnQnKTsKICAgICAgICAgICAgICB0ZXh0LnRleHRDb250ZW50ID0gY29udGVudCgpOwogICAgICAgICAgICAgIHJldHVybiB3cmFwLmZpcnN0Q2hpbGQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH0pKSksCiAgICAgIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHRhb2Jhb1Byb2R1Y3RGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5pY29uX2NkX3RtYWxsLCAuaWNvbl9jZF90YiwgLmljb25fY2RfanUnKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdhW2hyZWZePSJodHRwczovL3Nob3B0Yi5zYy53ZWliby5jb20vIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi53ZWlib1Byb2R1Y3RMaWtlRmVlZEZpbHRlciA9IHsKICAgIGNuOiAn5bim5pyJ5ZWG5ZOB6ZO+5o6l55qE5b6u5Y2ae3tpfX0nLAogICAgdHc6ICfluLbmnInllYblk4Hpj4jmjqXnmoTlvq7ljZp7e2l9fScsCiAgICBlbjogJ1dlaWJvIHdpdGggbGluayB0byB3ZWlibyBzaG9wIC8gdGFvYmFvIHt7aX19JywKICB9OwogIGkxOG4ud2VpYm9Qcm9kdWN0TGlrZUZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+W4puacieW+ruWNmuapseeql+WVhuWTgeaIlua3mOWuneWVhuWTgemTvuaOpeeahOW+ruWNmuOAgumAgumFjeW+ruWNmiBWN++8jOWvueW6lCBWNiDniYjnmoTigJzlvq7ljZrmqbHnqpfigJ3igJzmt5jlrp3llYblk4HigJ3kuKTkuKrorr7nva7pobnjgIInLAogIH07CgogIGNvbW1lcmNpYWwud2VpYm9Qcm9kdWN0TGlrZSA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IDcsCiAgICBpZDogJ2ZpbHRlcl93ZWlib19wcm9kdWN0X2xpa2UnLAogICAgdmVyc2lvbjogNzUsCiAgICBwYXJlbnQ6IGNvbW1lcmNpYWwuY29tbWVyY2lhbCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLndlaWJvUHJvZHVjdExpa2VGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi53ZWlib1Byb2R1Y3RMaWtlRmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiB0YW9iYW9Qcm9kdWN0RmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmZWVkLnVybF9zdHJ1Y3QpKSB7CiAgICAgICAgICBpZiAoZmVlZC51cmxfc3RydWN0LmZpbmQodXJsID0+IC90YW9iYW9cLnBuZyQvLnRlc3QodXJsLnVybF90eXBlX3BpYykpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQudXJsX3N0cnVjdC5maW5kKHVybCA9PiB1cmwub2JqZWN0X3R5cGUgPT09ICdwcm9kdWN0JykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICBpZiAoZmVlZC51cmxfc3RydWN0LmZpbmQodXJsID0+IC9eaHR0cHM6XC9cL21cLnRiXC5jblwvLy50ZXN0KHVybC5sb25nX3VybCkpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQudXJsX3N0cnVjdC5maW5kKHVybCA9PiAvYnV5XC5wbmckLy50ZXN0KHVybC51cmxfdHlwZV9waWMpKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnVybF9zdHJ1Y3QuZmluZCh1cmwgPT4gL15odHRwczpcL1wvc2hvcFwuc2NcLndlaWJvXC5jb21cLy8udGVzdCh1cmwubG9uZ191cmwpKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnVybF9zdHJ1Y3QuZmluZCh1cmwgPT4gL3Nob3Bfc2Nfd2VpYm8vLnRlc3QodXJsLmFjdGlvbmxvZz8ub2lkKSkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLndlaWJvUGF5R2lmdEZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+W4puacieW+ruWNmuaUr+S7mOenr+WIhuekvOWTgeWFkeaNouWNoeeJh+eahOW+ruWNmnt7aX19JywKICAgIHR3OiAn5bi25pyJ5b6u5Y2a5pSv5LuY56mN5YiG56au5ZOB5YWM5o+b5Y2h54mH55qE5b6u5Y2ae3tpfX0nLAogICAgZW46ICdXZWlibyB3aXRoIFdlaWJvIHBheSB3aXRoIHBvaW50cyBnaWZ0IGV4Y2hhbmdlIGNhcmR7e2l9fScsCiAgfTsKICBpMThuLndlaWJvUGF5R2lmdEZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+W+ruWNmuaUr+S7mOenr+WIhuaMh+mAmui/h+WcqOW+ruWNmuS4rea2iOi0ue+8iOWmgui0reS5sOS8muWRmO+8ieS6p+eUn+eahOenr+WIhu+8jOW5tumdnuW+ruWNmuetiee6p+e7j+mqjOWAvO+8jOWPr+S7peeUqOS6juWFkeaNouekvOWTge+8iOekvOWTgeS4gOiIrOaYr+S8mOaDoOWIuOaIluaKveWllu+8ieOAguWLvumAieacrOmAiemhueS7pemakOiXj+W4puacieatpOexu+WFkeaNouS/oeaBr+eahOWNoeeJh+eahOW+ruWNmuOAgicsCiAgfTsKCiAgY29tbWVyY2lhbC53ZWlib1BheSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl93ZWlib19wYXknLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29tbWVyY2lhbC5jb21tZXJjaWFsLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ud2VpYm9QYXlHaWZ0RmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ud2VpYm9QYXlHaWZ0RmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiB3ZWlib1Byb2R1Y3RGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2RpdlthY3Rpb24tZGF0YSo9Im9iamVjdGlkPTEwNDIwMjU6Il0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdhW3N1ZGEtdWF0cmFjayo9IjEwNDIwMjUtd2VicGFnZSJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4udXNlckxpa2VGZWVkRmlsdGVyID0gewogICAgY246ICfmt7flhaXkuKrkurrkuLvpobXnmoTotZ7ov4fnmoTlvq7ljZonLAogICAgaGs6ICfmt7flhaXlgIvkurrkuLvpoIHnmoTotIrpgY7nmoTlvq7ljZonLAogICAgdHc6ICfmt7flhaXlgIvkurrkuLvpoIHnmoTotIrpgY7nmoTlvq7ljZonLAogICAgZW46ICdXZWlibyBMaWtlZCBpbiBQZXJzb25hbCBwYWdlJywKICB9OwogIGkxOG4udXNlckxpa2VGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfkuKrkurrkuLvpobXmtojmga/mtYHkuK3mt7flhaXnmoTlvq7ljZrjgIInLAogIH07CgogIGNvbW1lcmNpYWwudXNlckxpa2UgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfdXNlcl9saWtlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbW1lcmNpYWwuY29tbWVyY2lhbCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnVzZXJMaWtlRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlckxpa2VGZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHVzZXJMaWtlRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoaW5pdC5wYWdlLnR5cGUoKSAhPT0gJ3Byb2ZpbGUnKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCB7IG9pZCwgb25pY2sgfSA9IGluaXQucGFnZS4kQ09ORklHOwogICAgICAgIGlmICghb2lkIHx8ICFvbmljaykgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgW2F1dGhvcl0gPSBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKTsKICAgICAgICBjb25zdCBbZmF1dGhvcl0gPSBmZWVkUGFyc2VyLmZhdXRob3IuaWQoZmVlZCk7CiAgICAgICAgaWYgKChmYXV0aG9yIHx8IGF1dGhvcikgIT09IG9pZCkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5mYWtlV2VpYm9GaWx0ZXIgPSB7CiAgICBjbjogJ+a3t+WFpeW+ruWNmuWIl+ihqOeahOaOqOiNkOWGheWuue+8iOWlveWPi+aOqOiNkOOAgeeDremXqOivnemimO+8iXt7PGk+fX0nLAogICAgaGs6ICfmt7flhaXlvq7ljZrliJfooajnmoTmjqjolqblhaflrrnvvIjlpb3lj4vmjqjolqbjgIHnhrHploDoqbHpoYzvvIl7ezxpPn19JywKICAgIHR3OiAn5re35YWl5b6u5Y2a5YiX6KGo55qE5o6o6Jam5YWn5a6577yI5aW95Y+L5o6o6Jam44CB54ax6ZaA6Kmx6aGM77yJe3s8aT59fScsCiAgICBlbjogJ090aGVyIGNvbnRlbnRzIGluIFdlaWJvIGxpc3R7ezxpPn19JywKICB9OwogIGkxOG4uZmFrZVdlaWJvRmlsdGVyRGV0YWlsID0gewogICAgY246ICfmiYDmnInlnKjlvq7ljZrkuI7lvq7ljZrkuYvpl7Tmt7flhaXnmoTlhbbku5blhoXlrrnvvIzov5nkupvlhoXlrrnlvoDlvoDkuI3mmK/lvq7ljZrmtojmga/vvIzmr5TlpoLigJzlpb3lj4vmjqjojZDigJ3igJzng63pl6jor53popjigJ3nrYnjgIInLAogIH07CgogIC8vIOi/meS6m+WGheWuueS4jeaYr+ecn+ato+eahOa2iOaBr++8jOWQhOexu+i/h+a7pOinhOWImeWkhOeQhui/meS6m+WGheWuueWPr+iDveacieWQhOenjemXrumimAogIC8vIOaJgOS7pei/meadoeinhOWImeiiq+iuvue9ruS4uuacgOmrmOeahOS8mOWFiOe6p++8jOiAjOS4lOWmguaenOWFs+mXreS6hui/meS4quiuvue9rumhue+8jOWwseebtOaOpeiuqei/meS6m+S4nOilv+aYvuekuuWHuuadpQogIGNvbW1lcmNpYWwuZmFrZVdlaWJvID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2Zha2Vfd2VpYm8nLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29tbWVyY2lhbC5jb21tZXJjaWFsLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmFrZVdlaWJvRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mYWtlV2VpYm9GaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gZmFrZVdlaWJvRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoZmVlZC5tYXRjaGVzKCdbaWRePSJQbF9Db3JlX1dlbmRhTGlzdF9fIl0gKicpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoZmVlZC5oYXNBdHRyaWJ1dGUoJ21pZCcpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAocnVsZS5pc0VuYWJsZWQoKSAmJiBpbml0LnBhZ2UudHlwZSgpICE9PSAnc2VhcmNoJykgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gJ3Vuc2V0JzsKICAgICAgfSwgeyBwcmlvcml0eTogMWU2IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9tb3JlL2NvbnRlbnQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgbW9yZSA9IHlhd2YucnVsZXMubW9yZTsKCiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBpMThuLm1vcmVDb250ZW50R3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn6ZqQ6JeP5Lul5LiL5b6u5Y2aIC0g54m55a6a5YaF5a65JywKICAgIHR3OiAn6Zqx6JeP5Lul5LiL5YWn5a65IC0g5p+Q5Lqb5YaF5a65JywKICAgIGVuOiAnSGlkZSBmb2xsb3dpbmcgY29udGVudCAtIENlcnRhaW4gQ29udGVudCcsCiAgfTsKCiAgY29uc3QgY29udGVudCA9IG1vcmUuY29udGVudCA9IHt9OwogIGNvbnRlbnQuY29udGVudCA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tb3JlQ29udGVudEdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uZGVsZXRlZEZvcndhcmRGaWx0ZXIgPSB7CiAgICBjbjogJ+W3suWIoOmZpOaIluaXoOazleafpeeci+eahOW+ruWNmueahOi9rOWPkXt7aX19JywKICAgIHR3OiAn5bey5Yiq6Zmk5oiW54Sh5rOV5p+l55yL55qE5b6u5Y2a55qE6L2J55m8e3tpfX0nLAogICAgZW46ICdGb3J3YXJkIG9mIGRlbGV0ZWQgLyBpbmFjY2Vzc2libGUgV2VpYm97e2l9fScsCiAgfTsKICBpMThuLmRlbGV0ZWRGb3J3YXJkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfljIXmi6zlm6DkuLrliKDpmaTmiJblr7nlvq7ljZrorr7nva7kuobpmpDnp4HmnYPpmZDogIzkvb/mgqjml6Dms5XnnIvliLDljp/mlofnmoTlvq7ljZrjgILov5nkupvlvq7ljZrmgqjlj6rog73nnIvop4Hovazlj5HogIXnmoTor4TorrrvvIzkvYbmmK/ml6Dms5XnnIvliLDljp/lvq7ljZrnmoTlhoXlrrnjgIInLAogIH07CgogIGNvbnRlbnQuZGVsZXRlZEZvcndhcmQgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZpbHRlcl9kZWxldGVkX2ZvcndhcmQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZGVsZXRlZEZvcndhcmRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmRlbGV0ZWRGb3J3YXJkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIGRlbGV0ZWRGb3J3YXJkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IGlzRm9yd2FyZCA9IGZlZWRQYXJzZXIuaXNGb3J3YXJkKGZlZWQpOwogICAgICAgIGlmICghaXNGb3J3YXJkKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICBjb25zdCBmb3J3YXJkQ29udGVudCA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX21lZGlhX2V4cGFuZCAuV0JfaW5mbyAuV0JfbmFtZSwgLldCX2V4cGFuZCAuV0JfaW5mbyAuV19mYicpOwogICAgICAgICAgaWYgKGZvcndhcmRDb250ZW50KSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiAnaGlkZSc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChmZWVkLnJldHdlZXRlZF9zdGF0dXMpIHsKICAgICAgICAgICAgaWYgKGZlZWQucmV0d2VldGVkX3N0YXR1cy52aXNpYmxlPy5saXN0X2lkID4gMCkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgICAgaWYgKGZlZWQucmV0d2VldGVkX3N0YXR1cy5kZWxldGVkKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmNvbW1lbnRBbmRGb3J3YXJkRmlsdGVyID0gewogICAgY246ICflm57lpI3lubbovazlj5HnmoTlvq7ljZp7e2l9fScsCiAgICB0dzogJ+WbnuimhuS4pui9ieeZvOeahOW+ruWNmnt7aX19JywKICAgIGVuOiAnV2VpYm8gZm9yd2FyZGVkIGFzIHJlcGx5e3tpfX0nLAogIH07CiAgaTE4bi5jb21tZW50QW5kRm9yd2FyZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5Zyo5Zue5aSN5LuW5Lq65b6u5Y2a5pe26YCJ5oup4oCc5ZCM5pe26L2s5Y+R5Yiw5oiR55qE5b6u5Y2a4oCd5Lya5bCG5Zue5aSN5ZKM6KKr5Zue5aSN55qE5YaF5a656L2s5Y+R5Li65LiA5p2h5b6u5Y2a77yM5Yu+6YCJ5ZCO5Lya6ZqQ6JeP5Zue5aSN5pe26L2s5Y+R55qE5b6u5Y2a44CCJywKICB9OwoKICBjb250ZW50LmNvbW1lbnRBbmRGb3J3YXJkID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2NvbW1lbnRfYW5kX2ZvcndhcmQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uY29tbWVudEFuZEZvcndhcmRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNvbW1lbnRBbmRGb3J3YXJkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIGNvbW1lbnRBbmRGb3J3YXJkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHJlcGx5VGV4dCA9IFsn5Zue5aSNJywgJ+WbnuW+qScsICflm57opoYnLCAnUmVwbHknLCAncmVwbHknXTsKICAgICAgICBpZiAoIWZlZWRQYXJzZXIuaXNGb3J3YXJkKGZlZWQpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBjb250ZW50ID0gZmVlZC5xdWVyeVNlbGVjdG9yKCdbbm9kZS10eXBlPSJmZWVkX2xpc3RfY29udGVudCJdJyk7IGlmICghY29udGVudCkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKCFjb250ZW50LmZpcnN0Q2hpbGQgfHwgIXJlcGx5VGV4dC5pbmNsdWRlcyhjb250ZW50LmZpcnN0Q2hpbGQudGV4dENvbnRlbnQudHJpbSgpKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKCFjb250ZW50LmNoaWxkTm9kZXNbMV0gfHwgIWNvbnRlbnQuY2hpbGROb2Rlc1sxXS5nZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJykpIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiAnaGlkZSc7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4udm90ZUZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+aKleelqOW+ruWNmnt7aX19JywKICAgIHR3OiAn5oqV56Wo5b6u5Y2ae3tpfX0nLAogICAgZW46ICdWb3Rpbmcgd2VpYm97e2l9fScsCiAgfTsKICBpMThuLnZvdGVGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfljIXmi6zlnKjlj5HluIPlvq7ljZrml7bpgInmi6nmipXnpajnmoTlvq7ljZrvvIzkuZ/ljIXmi6zlnKjmipXnpajml7boh6rliqjlj5Hlh7rnmoTlvq7ljZrjgIInLAogIH07CgogIGNvbnRlbnQudm90ZSA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnZmlsdGVyX3ZvdGUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udm90ZUZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnZvdGVGZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHZvdGVGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9mcm9tIGFbaHJlZio9Ii8vdm90ZS53ZWliby5jb20vIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9mZWVkX3NwZWNfY29udCBhW2FjdGlvbi1kYXRhKj0idm90ZS53ZWliby5jb20iXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignYVtzdWRhLXVhdHJhY2sqPSIxMDIyLXZvdGUiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignYVtzdWRhLXVhdHJhY2sqPSIxMDIyLWh1ZG9uZ3ZvdGUiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLmljb25fc3dfdm90ZScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWRQYXJzZXIuc291cmNlLnRleHQoZmVlZCkuaW5jbHVkZXMoJ+aKleelqCcpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmZWVkLnVybF9zdHJ1Y3QpKSB7CiAgICAgICAgICAgIGlmIChmZWVkLnVybF9zdHJ1Y3QuZmluZCh1cmwgPT4gL14xMDIyOjIzMTcxNi8udGVzdCh1cmwuYWN0aW9ubG9nPy5vaWQpKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgICAgaWYgKGZlZWQudXJsX3N0cnVjdC5maW5kKHVybCA9PiAvaHR0cHM6XC9cL3ZvdGVcLndlaWJvXC5jb21cLy8udGVzdCh1cmwubG9uZ191cmwpKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgICAgaWYgKGZlZWQudXJsX3N0cnVjdC5maW5kKHVybCA9PiAvaHR0cHM6XC9cL3ZvdGVcLndlaWJvXC5jb21cLy8udGVzdCh1cmwub3JpX3VybCkpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgICBpZiAoZmVlZC51cmxfc3RydWN0LmZpbmQodXJsID0+IC9zaW5hd2VpYm86XC9cL2Jyb3dzZXJcP3VybD1odHRwcyUzQSUyRiUyRnZvdGVcLndlaWJvXC5jb20lMkYvLnRlc3QodXJsLm9yaV91cmwpKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChmZWVkLnBhZ2VfaW5mbz8ub2JqZWN0X3R5cGUgPT09ICdodWRvbmd2b3RlJykgcmV0dXJuICdoaWRlJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4ucmVkUGFja0ZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+aKoue6ouWMheW+ruWNmnt7aX19JywKICAgIHR3OiAn5pC257SF5YyF5b6u5Y2ae3tpfX0nLAogICAgZW46ICdXZWlibyB3aXRoIFJlZCBFbnZlbG9wZXMgUnVzaCB7e2l9fScsCiAgfTsKICBpMThuLnJlZFBhY2tGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfmiqLnuqLljIXmtLvliqjoh6rliqjlj5HluIPnmoTlvq7ljZonLAogIH07CgogIGNvbnRlbnQucmVkUGFjayA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9yZWRfcGFjaycsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5yZWRQYWNrRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVkUGFja0ZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gcmVkUGFja0ZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLlBDRF9ldmVudF9yZWQyMDE0JykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfc3BlY19yZWQyMDE1JykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfc3BlY19yZWQxNicpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5tZWRpYS1yZWRwYWNrZXQnKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5pbWFnZVRhZ0ZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+mFjeWbvuW4puacieagh+etvueahOW+ruWNmnt7aX19JywKICAgIHR3OiAn6YWN5ZyW5bi25pyJ5qiZ6KiY55qE5b6u5Y2ae3tpfX0nLAogICAgZW46ICdGZWVkcyB3aXRoIHRhZ3Mgb24gaW1hZ2VzIHt7aX19JywKICB9OwogIGkxOG4uaW1hZ2VUYWdGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICflvq7ljZrlhYHorrjnu5nphY3lm77mt7vliqDmoIfnrb7vvIzmoIfnrb7lj6/ku6XmmK/mlofmnKzjgIHor53popjjgIHnlKjmiLfku6Xlj4rllYblk4Hpk77mjqXjgILpgInmi6nov5nmnaHop4TliJnlkI7lsIbkuI3kvJrnnIvliLDlr7nlupTnmoTlvq7ljZrvvIzlj6blpJbmgqjlj6/ku6Xlj6rpmpDol49bW2NsZWFuX2ZlZWRfcGljX3RhZ11d44CCJywKICB9OwogIGNvbnRlbnQuaW1hZ2VUYWcgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sIC8vIOiZveeEtiBWNyDnvZHpobXnm67liY3ov5jkuI3mlK/mjIHmn6XnnIvmoIfnrb7vvIzkuI3ov4fmiJHlj6rnrqHmnInmsqHmnInvvIzkuI3nrqHnnIvlvpfop4HnnIvkuI3op4EKICAgIGlkOiAnZmlsdGVyX2ltYWdlX3RhZycsCiAgICB2ZXJzaW9uOiA0NywKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uaW1hZ2VUYWdGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5pbWFnZVRhZ0ZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gaW1hZ2VUYWdGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgIGNvbnN0IGxpc3QgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9tZWRpYV9hW2FjdGlvbi1kYXRhKj0icGhvdG9fdGFnX3BpZHMiXScpOwogICAgICAgICAgaWYgKCFsaXN0KSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IHRhZ1BpZHNTdHIgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxpc3QuZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpKS5nZXQoJ3Bob3RvX3RhZ19waWRzJyk7CiAgICAgICAgICBpZiAoIXRhZ1BpZHNTdHIpIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgdGFnUGlkcyA9IHRhZ1BpZHNTdHIuc3BsaXQoJywnKTsKICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCdbYWN0aW9uLXR5cGU9ImZsX3BpY3MiXVthY3Rpb24tZGF0YSo9InBpY19pZCJdJyk7CiAgICAgICAgICBjb25zdCBoYXNUYWcgPSBBcnJheS5mcm9tKGl0ZW1zKS5zb21lKGl0ZW0gPT4gewogICAgICAgICAgICBjb25zdCBpZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaXRlbS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykpLmdldCgncGljX2lkJyk7CiAgICAgICAgICAgIHJldHVybiB0YWdQaWRzLmluY2x1ZGVzKGlkKTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKCFoYXNUYWcpIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuICdoaWRlJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgcGljcyA9IGZlZWRQYXJzZXIucGljcy5pbmZvKGZlZWQpOwogICAgICAgICAgaWYgKHBpY3MuZmluZChwaWMgPT4gcGljLnBpY190YWdzPy5sZW5ndGgpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmtvaUZvcndhcmRGZWVkRmlsdGVyID0gewogICAgY246ICfovazlj5Hlm77moIfmmK/plKbpsqTnmoTlvq7ljZrvvIjovazlj5Hmir3lpZblvq7ljZrvvIknLAogICAgdHc6ICfovYnnmbzlnJbnpLrmmK/pjKbpr4nnmoTlvq7ljZrvvIjovYnnmbzmir3njY7lvq7ljZrvvIknLAogICAgZW46ICdGb3J3YXJkIGljb24gYXMgYSBrb2kgKGZvcndhcmQgdGhpcyB3ZWlibyBmb3IgZHJhdyknLAogIH07CiAgaTE4bi5rb2lGb3J3YXJkRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5b6u5Y2a5Lya5bCG6L2s5Y+R5oq95aWW55qE5raI5oGv55qE6L2s5Y+R5oyJ6ZKu5pi+56S65oiQ5LiA5p2h6bG855qE5Zu+5qCH44CC6L+Z6aG56KeE5YiZ5Lya5qC55o2u6L+Z5Liq5Zu+5qCH5L2c5Li65Yik5pat5L6d5o2u6ZqQ6JeP5a+55bqU55qE5b6u5Y2a44CCJywKICB9OwoKICBjb250ZW50LmtvaUZvcndhcmQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfa29pX2ZvcndhcmQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ua29pRm9yd2FyZEZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmtvaUZvcndhcmRGZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIGtvaUZvcndhcmRGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2FbYWN0aW9uLXR5cGU9ImZsX2ZvcndhcmQiXSAuaWNvbl9qaW5saScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmFwcEl0ZW1GZWVkRmlsdGVyID0gewogICAgY246ICfku4vnu43lvq7ljZrlupTnlKjnmoTlvq7ljZp7e2l9fScsCiAgICB0dzogJ+S7i+e0ueW+ruWNmuaHieeUqOeahOW+ruWNmnt7aX19JywKICAgIGVuOiAnV2VpYm8gd2l0aCBhcHAgaXRlbSB7e2l9fScsCiAgfTsKICBpMThuLmFwcEl0ZW1GZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfku4vnu43lvq7ljZrlupTnlKjnmoTlvq7ljZrvvIzljIXmi6zlkKvmnInlvq7ljZrlupTnlKjnmoTpk77mjqXmiJblkKvmnInlvq7ljZrlupTnlKjnmoTljaHniYfnmoTmg4XlhrXjgILlvq7ljZrlupTnlKjnmoTpk77mjqXkvJrku6XlupTnlKjlm77moIfmoIforrDjgILli77pgInmraTpobnku6XpmpDol4/mraTnsbvlvq7ljZrjgIInLAogIH07CgogIGNvbnRlbnQuYXBwSXRlbSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9hcHBfaXRlbScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hcHBJdGVtRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uYXBwSXRlbUZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gYXBwSXRlbUZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfc3BlY1tleHAtZGF0YSo9ImtleT10YmxvZ193ZWlib2NhcmQiXVtleHAtZGF0YSo9IjEwNDIwMDUtYXBwSXRlbSJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4ud2VuZGFGZWVkRmlsdGVyID0gewogICAgY246ICflvq7ljZrpl67nrZTnm7jlhbPnmoTmj5Dpl67jgIHlm57nrZTmiJblm7Top4J7e2l9fScsCiAgICB0dzogJ+W+ruWNmuWVj+etlOebuOmXnOeahOaPkOWVj+OAgeWbnuetlOaIluWcjeingHt7aX19JywKICAgIGVuOiAnV2VpYm8gYXNraW5nLCBhbnN3ZXJpbmcsIG9yIHZpZXdpbmcgV2VpYm8gUSBhbmQgQSB7e2l9fScsCiAgfTsKICBpMThuLndlbmRhRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5b6u5Y2a6Zeu562U5Yqf6IO955qE5o+Q6Zeu44CB5Zue562U5oiW5Zu06KeC6YO95Lya5Y+R5biD5LiA5p2h5paw5b6u5Y2a77yM5aaC5p6c5oKo5LiN5biM5pyb55yL5Yiw55u45YWz5b6u5Y2a77yM5oKo5Y+v5Lul5Yu+6YCJ5q2k6YCJ6aG55Lul6ZqQ6JeP55u45YWz5b6u5Y2a44CCJywKICB9OwoKICBjb250ZW50LndlbmRhID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX3dlbmRhJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLndlbmRhRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ud2VuZGFGZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHdlbmRhRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICAvLyDov5nmnaHop4TliJnkuI3lnKjmmL7npLrmn5DkurrnmoTlhajpg6jpl67nrZTpobXpnaLnlJ/mlYjvvIzpgb/lhY3mmL7npLrnqbrpobXpnaIKICAgICAgICBpZiAoZmVlZC5tYXRjaGVzKCdbaWRePSJQbF9Db3JlX1dlbmRhTGlzdF9fIl0gKicpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdbc3VkYS11YXRyYWNrKj0iMTAyMi13ZW5kYSJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4ud2Vud29EckZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+WQq+acieeIsemXruWMu+eUn+WBpeW6t+enkeaZruaWh+eroOeahOW+ruWNmnt7aX19JywKICAgIHR3OiAn5ZCr5pyJ5oSb5ZWP6Yar55Sf5YGl5bq356eR5pmu5paH56ug55qE5b6u5Y2ae3tpfX0nLAogICAgZW46ICdXZWlibyB3aXRoIOeIsemXruWMu+eUnyAoaWFzayBtZWRpY2FsKSBhcnRpY2xlIHt7aX19JywKICB9OwogIGkxOG4ud2Vud29EckZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+eIsemXruWMu+eUn+WBpeW6t+enkeaZruaWh+eroOaYr+S4gOS6m+adpeiHqiB3ZW53by5jb20g55qE5YGl5bq344CB5Yy755aX55u45YWz5paH56ug44CC5omT5byA54ix6Zeu5Yy755Sf5YGl5bq356eR5pmu5paH56ug55qE572R56uZ5pe277yM5oKo5Y+v6IO95Lya6Ieq5Yqo5YWz5rOo5paH56ug5L2c6ICF5oiW55u45bqU5biQ5Y+344CC5byA5ZCv5Lul6ZqQ6JeP5YyF5ZCr5q2k57G75paH56ug55qE5b6u5Y2a44CCJywKICB9OwoKICBjb250ZW50LndlbndvRHIgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfd2Vud29fZHInLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ud2Vud29EckZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLndlbndvRHJGZWVkRmlsdGVyIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHdlbndvRHJGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2RpdlthY3Rpb24tZGF0YSo9Im9iamVjdGlkPTIwMTc4OTYwMDE6Il0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdhW3N1ZGEtdWF0cmFjayo9IjIwMTc4OTYwMDEtcHJvZHVjdCJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignW2V4cC1kYXRhKj0iMjI0MzYxNTAwMS1wcm9kdWN0Il0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdhW2hyZWYqPSIvL2RyLndlbndvLmNvbS8iXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLnlpemhpYm9GZWVkRmlsdGVyID0gewogICAgY246ICflkKvmnInigJzkuIDnm7Tmkq3igJ3op4bpopHnm7Tmkq3nmoTlvq7ljZp8e3t0eXBlfX0nLAogICAgdHc6ICflkKvmnInjgIzkuIDnm7Tmkq3jgI3nm7Tmkq3lvbHniYfnmoTlvq7ljZp8e3t0eXBlfX0nLAogICAgZW46ICdXZWlibyB3aXRoIGxpdmUgdmlkZW8gb24geWl6aGlibyB8IHt7dHlwZX19JywKICB9OwogIGkxOG4ueWl6aGlib0ZlZWRGaWx0ZXJBbGwgPSB7CiAgICBjbjogJ+makOiXj+ato+WcqOebtOaSreaIluW3sue7k+adn+WbnuaUvicsCiAgICB0dzogJ+maseiXj+ato+WcqOebtOaSreaIluW3sue1kOadn+WbnuaUvicsCiAgICBlbjogJ2hpZGUgbGl2ZSBhbmQgcmVwbGF5JywKICB9OwogIGkxOG4ueWl6aGlib0ZlZWRGaWx0ZXJSZXBsYXkgPSB7CiAgICBjbjogJ+S7hemakOiXj+W3sue7k+adn+WbnuaUvicsCiAgICB0dzogJ+WDhemaseiXj+W3sue1kOadn+WbnuaUvicsCiAgICBlbjogJ2hpZGUgcmVwbGF5IG9ubHknLAogIH07CgogIGNvbnRlbnQueWl6aGlibyA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl95aXpoaWJvJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnlpemhpYm9GZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIHR5cGU6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICdhbGwnLCB0ZXh0OiAoKSA9PiBpMThuLnlpemhpYm9GZWVkRmlsdGVyQWxsIH0sCiAgICAgICAgICB7IHZhbHVlOiAncmVwbGF5JywgdGV4dDogKCkgPT4gaTE4bi55aXpoaWJvRmVlZEZpbHRlclJlcGxheSB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHlpemhpYm9GZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHR5cGUgPSBydWxlLnJlZi50eXBlLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGxpdmUgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl92aWRlb1thY3Rpb24tZGF0YSo9InR5cGU9ZmVlZGxpdmUiXScpOwogICAgICAgIGlmICghbGl2ZSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHR5cGUgPT09ICdhbGwnKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIGlmIChsaXZlLm1hdGNoZXMoJ1thY3Rpb24tZGF0YSo9ImlzX3JlcGxheT0xIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5wYWlkRmVlZEZpbHRlciA9IHsKICAgIGNuOiAn6ZyA6KaB5LuY6LS55p+l55yL55qE5b6u5Y2ae3tpfX0nLAogICAgdHc6ICfpnIDopoHku5josrvmn6XnnIvnmoTlvq7ljZp7e2l9fScsCiAgICBlbjogJ0ZlZWRGaWx0ZXIgcmVxdWlyZSBwYWlkIHRvIHZpZXcge3tpfX0nLAogIH07CiAgaTE4bi5wYWlkRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5Y2a5Li75Zyo5Y+R5biD5b6u5Y2a5pe277yM5Y+v5Lul6YCJ5oup5oyH5a6a5YaF5a656ZyA6KaB5LuY6LS55omN6IO95p+l55yL44CC5Zyo5oKo5ZCR5Y2V5p2h5YaF5a655oiW5Y2a5Li75LuY6LS55ZCO77yM5omN5Y+v5p+l55yL55u45YWz5YaF5a6544CC5omA5LuY6LS555So6Zmk5Y2a5Li755qE5pS255uK5aSW77yM6L+Y5Y+v6IO95YyF5ZCr6YOo5YiG5rig6YGT5ZWG5YiG5oiQ5ZKM56iO6YeR44CCJywKICB9OwoKICBjb250ZW50LnBhaWQgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZpbHRlcl9wYWlkJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnBhaWRGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5wYWlkRmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBwYWlkRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLnNlYXJjaCk7CiAgICAgICAgICBjb25zdCBwYWlkT25seSA9ICtzZWFyY2hQYXJhbXMuZ2V0KCd2cGx1cycpIHx8IHNlYXJjaFBhcmFtcy5nZXQoJ2lzX3ZjbHViJyk7CiAgICAgICAgICBpZiAocGFpZE9ubHkpIHJldHVybiBudWxsOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLmljb25fdnBsdXMnKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9tZWRpYV9hW2FjdGlvbi1kYXRhKj0iaXNQcml2YXRlPTEiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignW2FjdGlvbi10eXBlPSJmbF9waWNzIl1bYWN0aW9uLWRhdGEqPSJpc1ByaXZhdGU9MSJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IHBpY3MgPSBmZWVkUGFyc2VyLnBpY3MuaW5mbyhmZWVkKTsKICAgICAgICAgIC8vIOS7mOi0ueWbvueJhwogICAgICAgICAgaWYgKHBpY3MuZmluZChwaWMgPT4gcGljLmJsdXI/LmlzUGF5KSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIC8vIOS7mOi0ueaWh+eroOeahOeJueW+geaJvuS4jeWIsO+8gQogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5tdWx0aXBsZVRvcGljc0ZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+ato+aWh+S4reaPkOWIsHzoh7PlsJF7e251bX195Liq6K+d6aKY55qE5b6u5Y2ae3tpfX0nLAogICAgdHc6ICfmraPmlofkuK3mj5DliLB86Iez5bCRe3tudW19feWAi+ipsemhjOeahOW+ruWNmnt7aX19JywKICAgIGVuOiAnRmVlZHMgd2l0aCB8IGF0IGxlYXN0IHt7bnVtfX0gdG9waWNzIGluIGl0cyBjb250ZW50IHt7aX19JywKICB9OwogIGkxOG4ubXVsdGlwbGVUb3BpY3NGZWVkRmlsdGVyRGV0YWlscyA9IHsKICAgIGNuOiAn55Sx5LqO5b6u5Y2a54Ot6Zeo6K+d6aKY5pCc57Si44CB6K+d6aKY5Li75oyB5Lq6562J5Yqf6IO95Lya5aKe5Yqg5bim5pyJ5p+Q5Lqb6K+d6aKY55qE5b6u5Y2a55qE5pud5YWJ6YeP44CC5omA5Lul5a2Y5Zyo5LiA5Lqb6YCa6L+H572X5YiX6Iul5bmy54Ot6Zeo6K+d6aKY5p2l5aKe5Yqg5bm/5ZGK5YaF5a655pud5YWJ6YeP55qE5b6u5Y2a44CC5oKo5Y+v5Lul6ZqQ6JeP5LiA5qyh5oCn5o+Q5Yiw5LqG5aSq5aSa6K+d6aKY55qE5b6u5Y2a5Lul5YWN55yL5Yiw5LuW5Lus44CCJywKICB9OwoKICBjb250ZW50Lm11bHRpcGxlVG9waWNzID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX211bHRpcGxlX3RvcGljc19mZWVkJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm11bHRpcGxlVG9waWNzRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBudW06IHsgdHlwZTogJ3JhbmdlJywgbWluOiAzLCBtYXg6IDEwLCBpbml0aWFsOiA1IH0sCiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tdWx0aXBsZVRvcGljc0ZlZWRGaWx0ZXJEZXRhaWxzIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIG11bHRpcGxlVG9waWNzRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IGxpbWl0ID0gcnVsZS5yZWYubnVtLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IHRvcGljcyA9IGZlZWRQYXJzZXIudG9waWMuZG9tKGZlZWQpOwogICAgICAgIGlmICh0b3BpY3MubGVuZ3RoID49IGxpbWl0KSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmZhc3RGb3J3YXJkRmVlZEZpbHRlciA9IHsKICAgIGNuOiAn5L2/55So5b+r6L2s6L2s5Y+R55qE5b6u5Y2aJywKICAgIHR3OiAn5L2/55So5b+r6L2J6L2J55m855qE5b6u5Y2aJywKICAgIGVuOiAnRmFzdCBmb3J3YXJkZWQgZmVlZHMnLAogIH07CiAgaTE4bi5mYXN0Rm9yd2FyZEZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+S9v+eUqOW/q+i9rOi9rOWPkeW+ruWNmuaXtu+8jOi9rOWPkeW+l+WIsOeahOW+ruWNmueahOivhOiuuuWSjOi9rOWPkeS4jeWPr+eUqO+8jOWxleekuuaXtuS7heaYvuekuuiiq+i9rOWPkeeahOmCo+adoeW+ruWNmuW5tuagh+azqOKAnOiiq8OXw5flv6vovazkuobigJ3jgILku7vkvZXpkojlr7nor6Xlvq7ljZrnmoTor4Torrrlrp7pmYXkuIrmmK/pkojlr7nooqvovazlj5HnmoTlvq7ljZrnmoTor4TorrrjgIInLAogIH07CgogIGNvbnRlbnQuZmFzdEZvcndhcmQgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZpbHRlcl9mYXN0X2ZvcndhcmQnLAogICAgdmVyc2lvbjogNjcsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZhc3RGb3J3YXJkRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmFzdEZvcndhcmRGZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIGZhc3RGb3J3YXJkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChmZWVkUGFyc2VyLmlzRmFzdEZvcndhcmQoZmVlZCkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL21vcmUvbGluay5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CgogIGNvbnN0IG1vcmUgPSB5YXdmLnJ1bGVzLm1vcmU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgaTE4bi5tb3JlTGlua0dyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+makOiXj+S7peS4i+W+ruWNmiAtIOato+aWh+mTvuaOpScsCiAgICB0dzogJ+maseiXj+S7peS4i+WFp+WuuSAtIOato+aWh+mAo+e1kCcsCiAgICBlbjogJ0hpZGUgZm9sbG93aW5nIGxpbmsgLSBDb250ZW50IExpbmtzJywKICB9OwoKICBjb25zdCBsaW5rID0gbW9yZS5saW5rID0ge307CiAgbGluay5saW5rID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IG1vcmUubW9yZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm1vcmVMaW5rR3JvdXBUaXRsZSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBmZWVkV2l0aExpbms6IHsgY246ICfluKbmnIl7feeahOW+ruWNmicsIHR3OiAn5bi25pyJe33nmoTlvq7ljZonLCBlbjogJ0ZlZWRzIGNvbnRhaW4ge30nIH0sCiAgICBmZWVkV2l0aExpbmtQbGFjZTogeyBjbjogJ+S9jee9rumTvuaOpScsIHR3OiAn5L2N572u6YCj57WQJywgZW46ICdsaW5rcyBvZiBwbGFjZXMnIH0sCiAgICBmZWVkV2l0aExpbmtNb3ZpZTogeyBjbjogJ+eUteW9semTvuaOpScsIHR3OiAn6Zu75b2x6YCj57WQJywgZW46ICdsaW5rcyBvZiBtb3ZpZXMnIH0sCiAgICBmZWVkV2l0aExpbmtCb29rOiB7IGNuOiAn5Zu+5Lmm6ZO+5o6lJywgdHc6ICflnJbmm7jpgKPntZAnLCBlbjogJ2xpbmtzIG9mIGJvb2tzJyB9LAogICAgZmVlZFdpdGhMaW5rVG9waWM6IHsgY246ICfotoXor53pk77mjqUnLCB0dzogJ+i2heipsemAo+e1kCcsIGVuOiAnbGlua3Mgb2Ygc3VwZXIgdG9waWNzJyB9LAogICAgZmVlZFdpdGhMaW5rTXVzaWM6IHsgY246ICfpn7PkuZDpk77mjqUnLCB0dzogJ+mfs+aogumAo+e1kCcsIGVuOiAnbGlua3Mgb2YgbXVzaWNzJyB9LAogICAgZmVlZFdpdGhMaW5rU3RvY2s6IHsgY246ICfogqHnpajpk77mjqUnLCB0dzogJ+iCoeelqOmAo+e1kCcsIGVuOiAnbGlua3Mgb2Ygc3RvY2tzJyB9LAogIH0pOwoKICA7IChmdW5jdGlvbiAobGlua1R5cGVzKSB7CiAgICBPYmplY3Qua2V5cyhsaW5rVHlwZXMpLnNvcnQoKS5mb3JFYWNoKGlkID0+IHsKICAgICAgY29uc3QgeyB0eXBlLCBuYW1lLCByZWNvZ25pemVyLCB2N1R5cGUsIHY3UmVjb2duaXplciB9ID0gbGlua1R5cGVzW2lkXTsKICAgICAgY29uc3QgcGFzY2FsQ2FzZVR5cGUgPSB0eXBlLnJlcGxhY2UoL14uLywgYyA9PiBjLnRvVXBwZXJDYXNlKCkpOwogICAgICBsaW5rW3R5cGVdID0gcnVsZS5SdWxlKHsKICAgICAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgICAgICBpZDogYGZpbHRlcl8ke3Bhc2NhbENhc2VUeXBlfWAsCiAgICAgICAgdmVyc2lvbjogMzAsCiAgICAgICAgcGFyZW50OiBsaW5rLmxpbmssCiAgICAgICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZFdpdGhMaW5rLnJlcGxhY2UoJ3t9JywgbmFtZSksCiAgICAgICAgaW5pdCgpIHsKICAgICAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gZmVlZFdpdGhTcGVjaWFsTGlua0ZpbHRlcihmZWVkKSB7CiAgICAgICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGlmIChpbml0LnBhZ2UudHlwZSgpID09PSB0eXBlKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoYGFbc3VkYS11YXRyYWNrKj0iMTAyMi0ke3R5cGV9Il1gKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgICAgICBpZiAocmVjb2duaXplcj8uKGZlZWQpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICh2N1R5cGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHVybHMgPSBmZWVkLnVybF9zdHJ1Y3QgfHwgW107CiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSB1cmxzLmZpbmQodXJsID0+IHVybC51cmxfdHlwZV9waWM/LmluY2x1ZGVzKHY3VHlwZSArICcucG5nJykpOwogICAgICAgICAgICAgICAgaWYgKHVybCkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHY3UmVjb2duaXplcj8uKGZlZWQpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgICAgICB9LAogICAgICB9KTsKICAgIH0pOwogIH0oewogICAgMTAwMTAxOiB7CiAgICAgIHR5cGU6ICdwbGFjZScsCiAgICAgIHY3VHlwZTogJ2xvY2F0aW9uJywKICAgICAgbmFtZTogKCkgPT4gaTE4bi5mZWVkV2l0aExpbmtQbGFjZSwKICAgIH0sCiAgICAxMDAxMjA6IHsKICAgICAgdHlwZTogJ21vdmllJywKICAgICAgdjdUeXBlOiAnbW92aWUnLAogICAgICBuYW1lOiAoKSA9PiBpMThuLmZlZWRXaXRoTGlua01vdmllLAogICAgfSwKICAgIDEwMDIwMjogewogICAgICB0eXBlOiAnYm9vaycsCiAgICAgIHY3VHlwZTogJ2Jvb2snLAogICAgICBuYW1lOiAoKSA9PiBpMThuLmZlZWRXaXRoTGlua0Jvb2ssCiAgICB9LAogICAgMTAwODA4OiB7CiAgICAgIHR5cGU6ICd0b3BpYycsCiAgICAgIHY3VHlwZTogJ3N1cGVyJywKICAgICAgbmFtZTogKCkgPT4gaTE4bi5mZWVkV2l0aExpbmtUb3BpYywKICAgICAgcmVjb2duaXplcjogZmVlZCA9PiB7CiAgICAgICAgY29uc3Qgc291cmNlID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZnJvbSBhW2hyZWZePSJodHRwczovL2h1YXRpLndlaWJvLmNvbS9rLyJdJyk7CiAgICAgICAgaWYgKHNvdXJjZSkgcmV0dXJuIHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9LAogICAgfSwKICAgIDEwMTUxNTogewogICAgICB0eXBlOiAnbXVzaWMnLAogICAgICB2N1R5cGU6ICdtdXNpYycsCiAgICAgIG5hbWU6ICgpID0+IGkxOG4uZmVlZFdpdGhMaW5rTXVzaWMsCiAgICB9LAogICAgMjMwNjc3OiB7CiAgICAgIHR5cGU6ICdzdG9jaycsCiAgICAgIG5hbWU6ICgpID0+IGkxOG4uZmVlZFdpdGhMaW5rU3RvY2ssCiAgICAgIHY3UmVjb2duaXplcjogZmVlZCA9PiB7CiAgICAgICAgcmV0dXJuIGZlZWQudXJsX3N0cnVjdD8uc29tZSh1cmwgPT4gdXJsLnVybF90aXRsZT8uWzBdID09PSAnJCcpOwogICAgICB9LAogICAgfSwKICB9KSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL21vcmUvdG9vbWFueS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgbW9yZSA9IHlhd2YucnVsZXMubW9yZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBpMThuLm90aGVyRmxvb2RpbmdUaXRsZSA9IHsKICAgIGNuOiAn5Yi35bGPJywKICAgIHR3OiAn5rSX54mIJywKICAgIGVuOiAnRmxvb2RpbmcnLAogIH07CgogIGNvbnN0IGZsb29kaW5nID0gbW9yZS5mbG9vZGluZyA9IHt9OwogIGZsb29kaW5nLmZsb29kaW5nID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IG1vcmUubW9yZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm90aGVyRmxvb2RpbmdUaXRsZSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBmbG9vZGluZ0ZlZWRIaWRlOiB7IGNuOiAn6ZqQ6JePJywgdHc6ICfpmrHol48nLCBlbjogJ2hpZGRlbicgfSwKICAgIGZsb29kaW5nRmVlZEZvbGQ6IHsgY246ICfmipjlj6AnLCB0dzogJ+aKmOeWiicsIGVuOiAnZm9sZGVkJyB9LAogICAgZmxvb2RpbmdBdXRob3I6IHsKICAgICAgY246ICfnm7jlkIzkvZzogIV86LaF6L+He3tudW1iZXJ9feadoeW+ruWNmnzml7botoXlh7rnmoR7e2FjdGlvbn19fHx7e2dyb3VwfX3lnKjliIbnu4TpobXpnaLlkIzmoLfnlJ/mlYgnLAogICAgICB0dzogJ+ebuOWQjOS9nOiAhXzotoXpgY57e251bWJlcn195qKd5b6u5Y2afOaZgui2heWHuueahHt7YWN0aW9ufX18fHt7Z3JvdXB9feWcqOWIhue1hOmggemdouWQjOaoo+eUn+aViCcsCiAgICAgIGVuOiAnRmVlZHMgYnkgc2FtZSBhdXRob3Igd2lsbCB8IGJlIHt7YWN0aW9ufX0gfCB3aGVuIG1vcmUgdGhhbiB7e251bWJlcn19IHNlZW58fHt7Z3JvdXB9fSBBbHNvIGFwcGx5IHRvIGdyb3VwaW5nIHBhZ2VzJywKICAgIH0sCiAgICBmbG9vZGluZ0F1dGhvclJlYXNvbjogewogICAgICBjbjogJ+WIt+WxjycsCiAgICAgIHR3OiAn5rSX54mIJywKICAgICAgZW46ICdmbG9vZGluZycsCiAgICB9LAogICAgZmxvb2RpbmdGb3J3YXJkOiB7CiAgICAgIGNuOiAn55u45ZCM5b6u5Y2a55qE6L2s5Y+RfOi2hei/h3t7bnVtYmVyfX3mnaF85pe26LaF5Ye655qEe3thY3Rpb259fScsCiAgICAgIHR3OiAn55u45ZCM5b6u5Y2a55qE6L2J55m8fOi2hemBjnt7bnVtYmVyfX3mop185pmC6LaF5Ye655qEe3thY3Rpb259fScsCiAgICAgIGVuOiAnRmVlZHMgZm9yd2FyZGVkIGZvcm0gc2FtZSBvbmUgd2lsbCB8IGJlIHt7YWN0aW9ufX0gfCB3aGVuIG1vcmUgdGhhbiB7e251bWJlcn19IHNlZW4nLAogICAgfSwKICAgIGZsb29kaW5nRm9yd2FyZFJlYXNvbjogewogICAgICBjbjogJ+mikee5gei9rOWPkScsCiAgICAgIHR3OiAn6aC757mB6L2J55m8JywKICAgICAgZW46ICdmb3J3YXJkZWQgZnJlcXVlbnRseScsCiAgICB9LAogIH0pOwoKICBmbG9vZGluZy5mbG9vZGluZ0F1dGhvciA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2Zsb29kaW5nX2F1dGhvcicsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBmbG9vZGluZy5mbG9vZGluZywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZsb29kaW5nQXV0aG9yLAogICAgcmVmOiB7CiAgICAgIG51bWJlcjogewogICAgICAgIHR5cGU6ICdyYW5nZScsCiAgICAgICAgbWluOiAxLAogICAgICAgIG1heDogMjAsCiAgICAgICAgaW5pdGlhbDogNSwKICAgICAgfSwKICAgICAgYWN0aW9uOiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgaW5pdGlhbDogJ2hpZGUnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJ2hpZGUnLCB0ZXh0OiAoKSA9PiBpMThuLmZsb29kaW5nRmVlZEhpZGUgfSwKICAgICAgICAgIHsgdmFsdWU6ICdmb2xkJywgdGV4dDogKCkgPT4gaTE4bi5mbG9vZGluZ0ZlZWRGb2xkIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgZ3JvdXA6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIC8qKiBAdHlwZSB7V2Vha01hcDxFbGVtZW50LCBzdHJpbmc+fSAqLwogICAgICBjb25zdCBwYXJzZWQgPSBuZXcgV2Vha01hcCgpOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBmbG9vZGluZ0F1dGhvcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICAvLyDlpoLmnpzmmK/lm6DkuLrkv67mlLnop4TliJnlr7zoh7TnmoTph43mlrDorqHnrpfvvIzpgqPkuYjmiJHku6zkuI3lho3lgZrkuIDmrKHlpITnkIYKICAgICAgICBpZiAocGFyc2VkLmhhcyhmZWVkKSkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgbWUgPSBpbml0LnBhZ2UuJENPTkZJRy51aWQ7CiAgICAgICAgY29uc3QgW2F1dGhvcl0gPSBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKTsKICAgICAgICBjb25zdCBbZmF1dGhvcl0gPSBmZWVkUGFyc2VyLmZhdXRob3IuaWQoZmVlZCk7CiAgICAgICAgY29uc3QgYXV0aG9ySWQgPSBmYXV0aG9yIHx8IGF1dGhvcjsKICAgICAgICAvLyDoh6rlt7HnmoTlvq7ljZrlj5HlpJrlsJHkuZ/kuI3op6blj5Hov5nkuKrop4TliJkKICAgICAgICBpZiAobWUgPT09IGF1dGhvcklkKSByZXR1cm4gbnVsbDsKICAgICAgICAvLyDkuKrkurrkuLvpobXkuI3lt6XkvZwKICAgICAgICBpZiAoaW5pdC5wYWdlLnR5cGUoKSA9PT0gJ3Byb2ZpbGUnKSByZXR1cm4gbnVsbDsKICAgICAgICAvLyDliIbnu4TpobXpnaLmoLnmja7orr7nva7lhrPlrprmmK/lkKbnlJ/mlYgKICAgICAgICBpZiAoaW5pdC5wYWdlLnR5cGUoKSA9PT0gJ2dyb3VwJykgewogICAgICAgICAgaWYgKHJ1bGUucmVmLmdyb3VwLmdldENvbmZpZygpKSByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgcGFyc2VkLnNldChmZWVkLCBhdXRob3JJZCk7CiAgICAgICAgY29uc3QgZmVlZHMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLldCX2ZlZWRfdHlwZScpXTsKICAgICAgICBjb25zdCBjb3VudCA9IGZlZWRzLmZpbHRlcihmZWVkID0+IHBhcnNlZC5nZXQoZmVlZCkgPT09IGF1dGhvcklkKS5sZW5ndGg7CiAgICAgICAgaWYgKGNvdW50IDw9IHJ1bGUucmVmLm51bWJlci5nZXRDb25maWcoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gcnVsZS5yZWYuYWN0aW9uLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IHJlYXNvbiA9IGkxOG4uZmxvb2RpbmdBdXRob3JSZWFzb247CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0LCByZWFzb24gfTsKICAgICAgfSwgeyBwcmlvcml0eTogLTFlNiB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBmbG9vZGluZy5mbG9vZGluZ0ZvcndhcmQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmbG9vZGluZ19mb3J3YXJkJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGZsb29kaW5nLmZsb29kaW5nLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmxvb2RpbmdGb3J3YXJkLAogICAgcmVmOiB7CiAgICAgIG51bWJlcjogewogICAgICAgIHR5cGU6ICdyYW5nZScsCiAgICAgICAgbWluOiAxLAogICAgICAgIG1heDogMjAsCiAgICAgICAgaW5pdGlhbDogMywKICAgICAgfSwKICAgICAgYWN0aW9uOiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgaW5pdGlhbDogJ2hpZGUnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJ2hpZGUnLCB0ZXh0OiAoKSA9PiBpMThuLmZsb29kaW5nRmVlZEhpZGUgfSwKICAgICAgICAgIHsgdmFsdWU6ICdmb2xkJywgdGV4dDogKCkgPT4gaTE4bi5mbG9vZGluZ0ZlZWRGb2xkIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgLyoqIEB0eXBlIHtXZWFrTWFwPEVsZW1lbnQsIHN0cmluZz59ICovCiAgICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBXZWFrTWFwKCk7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIGZsb29kaW5nQXV0aG9yKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChwYXJzZWQuaGFzKGZlZWQpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBvbWlkID0gZmVlZFBhcnNlci5vbWlkKGZlZWQpIHx8IG51bGw7CiAgICAgICAgcGFyc2VkLnNldChmZWVkLCBvbWlkKTsKICAgICAgICBpZiAoIW9taWQpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IGZlZWRzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1ttaWRdJyldOwogICAgICAgIGNvbnN0IGNvdW50ID0gZmVlZHMuZmlsdGVyKGZlZWQgPT4gcGFyc2VkLmdldChmZWVkKSA9PT0gb21pZCkubGVuZ3RoOwogICAgICAgIGlmIChjb3VudCA8PSBydWxlLnJlZi5udW1iZXIuZ2V0Q29uZmlnKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IHJ1bGUucmVmLmFjdGlvbi5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmZsb29kaW5nRm9yd2FyZFJlYXNvbjsKICAgICAgICByZXR1cm4geyByZXN1bHQsIHJlYXNvbiB9OwogICAgICB9LCB7IHByaW9yaXR5OiAtMWU2IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbW1lbnQvY29tbWVudC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uY29tbWVudFRhYlRpdGxlID0gewogICAgY246ICfor4Torrrov4fmu6QnLAogICAgdHc6ICfoqZXoq5bnr6npgbgnLAogICAgZW46ICdDb21tZW50JywKICB9OwoKICBjb25zdCBjb21tZW50ID0geWF3Zi5ydWxlcy5jb21tZW50ID0ge307CiAgY29tbWVudC5jb21tZW50ID0gcnVsZS5UYWIoewogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uY29tbWVudFRhYlRpdGxlLAogICAgcGFnZW1lbnU6IHRydWUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbW1lbnQvbGF5b3V0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CgogIGNvbnN0IGNvbW1lbnQgPSB5YXdmLnJ1bGVzLmNvbW1lbnQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uY29tbWVudExheW91dEdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+ivhOiuuuWxleekuicsCiAgICB0dzogJ+ipleirluWxleekuicsCiAgICBlbjogJ0NvbW1lbnRzIExheW91dCcsCiAgfTsKCiAgY29uc3QgbGF5b3V0ID0gY29tbWVudC5sYXlvdXQgPSB7fTsKICBsYXlvdXQubGF5b3V0ID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGNvbW1lbnQuY29tbWVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNvbW1lbnRMYXlvdXRHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLmNvbW1lbnRCeVRpbWUgPSB7CiAgICBjbjogJ+afpeeci+ivhOiuuuaXtum7mOiupOaMieaXtumXtOaOkuW6j++8iOiAjOmdnueDreW6pu+8iScsCiAgICB0dzogJ+afpemWseipleirluaZgumgkOioreaMieaZgumWk+aOkuW6j++8iOiAjOmdnueGseW6pu+8iScsCiAgICBlbjogJ1Nob3cgbmV3ZXN0IGNvbW1lbnRzIGJ5IGRlZmF1bHQgKGluc3RlYWQgb2YgaG90IGNvbW1lbnRzKScsCiAgfTsKCiAgbGF5b3V0LmNvbW1lbnRCeVRpbWUgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdjb21tZW50X2xheW91dF9ieV90aW1lJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb21tZW50QnlUaW1lLAogICAgYWluaXQoKSB7CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gc3dpdGNoVG9BbGxDb21tZW50KCkgewogICAgICAgIGNvbnN0IGFsbEJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoWwogICAgICAgICAgJ2FbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9jb21tZW50U2VhcmNoIl1bYWN0aW9uLWRhdGEqPSJmaWx0ZXI9YWxsIl06bm90KFt5YXdmLWFsbC1jb21tZW50XSknLAogICAgICAgICAgJ2FbYWN0aW9uLXR5cGU9InNlYXJjaF90eXBlIl1bYWN0aW9uLWRhdGEqPSJmaWx0ZXI9YWxsIl06bm90KFt5YXdmLWFsbC1jb21tZW50XSknLAogICAgICAgIF0uam9pbignLCcpKSk7CiAgICAgICAgYWxsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7CiAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd5YXdmLWFsbC1jb21tZW50JywgJ3lhd2YtYWxsLWNvbW1lbnQnKTsKICAgICAgICAgIGlmICghYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY3VycicpKSBidXR0b24uY2xpY2soKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQub25CZWZvcmUoZnVuY3Rpb24gc3dpdGNoVG9BbGxDb21tZW50KGNvbW1lbnQpIHsKICAgICAgICBjb25zdCBmZWVkID0gY29tbWVudC5jbG9zZXN0KCdbbWlkXScpOwogICAgICAgIGlmICghZmVlZCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGJ1dHRvbiA9IGZlZWQucXVlcnlTZWxlY3RvcihbCiAgICAgICAgICAnYVthY3Rpb24tdHlwZT0iZmVlZF9saXN0X2NvbW1lbnRTZWFyY2giXVthY3Rpb24tZGF0YSo9ImZpbHRlcj1hbGwiXTpub3QoW3lhd2YtYWxsLWNvbW1lbnQtYWdhaW5dKScsCiAgICAgICAgICAnYVthY3Rpb24tdHlwZT0ic2VhcmNoX3R5cGUiXVthY3Rpb24tZGF0YSo9ImZpbHRlcj1hbGwiXTpub3QoW3lhd2YtYWxsLWNvbW1lbnQtYWdhaW5dKScsCiAgICAgICAgXS5qb2luKCcsJykpOwogICAgICAgIGlmICghYnV0dG9uKSByZXR1cm47CiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgneWF3Zi1hbGwtY29tbWVudC1hZ2FpbicsICd5YXdmLWFsbC1jb21tZW50LWFnYWluJyk7CiAgICAgICAgaWYgKCFidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXJyJykpIGJ1dHRvbi5jbGljaygpOwogICAgICB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4uaGlkZVN1YkNvbW1lbnQgPSB7CiAgICBjbjogJ+aKmOWPoOS6jOe6p+ivhOiuuicsCiAgICB0dzogJ+aKmOeWiuS6jOe0muipleirlicsCiAgICBlbjogJ0hpZGUgc3ViIGNvbW1lbnRzIGJ5IGRlZmF1bHQnLAogIH07CgogIGxheW91dC5oaWRlU3ViQ29tbWVudCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2NvbW1lbnRfbGF5b3V0X2hpZGVfc3ViJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5oaWRlU3ViQ29tbWVudCwKICAgIGFpbml0KCkgewogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGhpZGVTdWJDb21tZW50KCkgewogICAgICAgIGNvbnN0IHJvb3RDb21tZW50TGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpc3RfbGlbbm9kZS10eXBlPSJyb290X2NvbW1lbnQiXTpub3QoW3lhd2YtZm9sZGVkLXJvb3QtY29tbWVudF0pJykpOwogICAgICAgIHJvb3RDb21tZW50TGlzdC5mb3JFYWNoKHJvb3RDb21tZW50ID0+IHsKICAgICAgICAgIHJvb3RDb21tZW50LnNldEF0dHJpYnV0ZSgneWF3Zi1mb2xkZWQtcm9vdC1jb21tZW50JywgJ3lhd2YtZm9sZGVkLXJvb3QtY29tbWVudCcpOwoKICAgICAgICAgIGNvbnN0IGZlZWQgPSByb290Q29tbWVudC5jbG9zZXN0KCdbbWlkXScpOwogICAgICAgICAgY29uc3QgcmVwbHkgPSByb290Q29tbWVudC5xdWVyeVNlbGVjdG9yKCdhW2FjdGlvbi10eXBlPSJyZXBseSJdJyk7CiAgICAgICAgICBjb25zdCBjaGlsZENvbW1lbnRMaXN0ID0gQXJyYXkuZnJvbShyb290Q29tbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGlzdF91bFtub2RlLXR5cGU9ImNoaWxkX2NvbW1lbnQiXScpKTsKCiAgICAgICAgICBjb25zdCBjb21tZW50SWQgPSByb290Q29tbWVudC5nZXRBdHRyaWJ1dGUoJ2NvbW1lbnRfaWQnKTsKICAgICAgICAgIGNvbnN0IG1pZCA9IGZlZWQuZ2V0QXR0cmlidXRlKCdtaWQnKTsKICAgICAgICAgIGxldCBjaGlsZENvdW50ID0gMDsKCiAgICAgICAgICBpZiAoIWNoaWxkQ291bnQpIGRvIHsKICAgICAgICAgICAgY29uc3QgbW9yZUNoaWxkTGlua3MgPSByb290Q29tbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbm9kZS10eXBlPSJtb3JlX2NoaWxkX2NvbW1lbnQiXSBhJyk7CiAgICAgICAgICAgIGNvbnN0IG1vcmVDaGlsZCA9IG1vcmVDaGlsZExpbmtzW21vcmVDaGlsZExpbmtzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBpZiAoIW1vcmVDaGlsZCkgYnJlYWs7CiAgICAgICAgICAgIGNvbnN0IG1vcmVDaGlsZE51bWJlciA9IG1vcmVDaGlsZC50ZXh0Q29udGVudC5tYXRjaCgvXGQrLyk7CiAgICAgICAgICAgIGlmICghbW9yZUNoaWxkTnVtYmVyIHx8ICFtb3JlQ2hpbGROdW1iZXJbMF0pIGJyZWFrOwogICAgICAgICAgICBjaGlsZENvdW50ID0gcGFyc2VJbnQobW9yZUNoaWxkTnVtYmVyWzBdLCAxMCkgfHwgMDsKICAgICAgICAgIH0gd2hpbGUgKGZhbHNlKTsKCiAgICAgICAgICBpZiAoIWNoaWxkQ291bnQpIGRvIHsKICAgICAgICAgICAgY29uc3QgY2hpbGRDb21tZW50SXRlbXMgPSByb290Q29tbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGlzdF91bCAubGlzdF9saVtjb21tZW50X2lkXScpOwogICAgICAgICAgICBjaGlsZENvdW50ID0gY2hpbGRDb21tZW50SXRlbXMubGVuZ3RoIHx8IDA7CiAgICAgICAgICB9IHdoaWxlIChmYWxzZSk7CgogICAgICAgICAgaWYgKCFjaGlsZENvdW50KSByZXR1cm47CgogICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxhIGNsYXNzPSJTX3R4dDEiIGFjdGlvbi10eXBlPSJjbGlja19tb3JlX2NoaWxkX2NvbW1lbnRfYmlnIiA+PC9hPic7CiAgICAgICAgICBjb25zdCB1bmZvbGQgPSBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICAgIHVuZm9sZC5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJywgYG1vcmVfY29tbWVudD1iaWcmcm9vdF9jb21tZW50X2lkPSR7Y29tbWVudElkfSZpc19jaGlsZF9jb21tZW50PXR1cmUmaWQ9JHttaWR9YCk7CiAgICAgICAgICB1bmZvbGQudGV4dENvbnRlbnQgPSBgKCR7Y2hpbGRDb3VudH0pYDsKICAgICAgICAgIHJlcGx5LmFmdGVyKHVuZm9sZCk7CgogICAgICAgICAgY2hpbGRDb21tZW50TGlzdC5mb3JFYWNoKGNoaWxkQ29tbWVudCA9PiB7CiAgICAgICAgICAgIGNoaWxkQ29tbWVudC5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICB9KTsKICAgICAgICAgIHVuZm9sZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgY2hpbGRDb21tZW50TGlzdC5mb3JFYWNoKGNoaWxkQ29tbWVudCA9PiB7CiAgICAgICAgICAgICAgY2hpbGRDb21tZW50LnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvY29tbWVudC9jb250ZW50LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgY29tbWVudFBhcnNlciA9IHlhd2YuY29tbWVudDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBjb250ZW50VGV4dENvbW1lbnRHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5YaF5a655YWz6ZSu6K+N6L+H5rukJywKICAgICAgdHc6ICfmjInlhaflrrnpl5zpjbXlrZfnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBDb250ZW50IEtleXdvcmRzJywKICAgIH0sCiAgICB0ZXh0Q29udGVudENvbW1lbnRTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65YyF5ZCr5Lul5LiL5YaF5a6555qE6K+E6K66fHzlhbPplK7or417e2l0ZW1zfX0nLAogICAgICB0dzogJ+aAu+aYr+aYvuekuuWMheWQq+S7peS4i+WFp+WuueeahOipleirlnx86Zec6Y215a2Xe3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyB3aXRoIHRoZXNlIGNvbnRlbnR8fEtleXdvcmQge3tpdGVtc319JywKICAgIH0sCiAgICB0ZXh0Q29udGVudENvbW1lbnRIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JeP5YyF5ZCr5Lul5LiL5YaF5a6555qE6K+E6K66fHzlhbPplK7or417e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+WMheWQq+S7peS4i+WFp+WuueeahOipleirlnx86Zec6Y215a2Xe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIHdpdGggdGhlc2UgY29udGVudHx8S2V5d29yZCB7e2l0ZW1zfX0nLAogICAgfSwKICB9KTsKCiAgY2xhc3MgVGV4dENvbW1lbnRSdWxlIGV4dGVuZHMgcnVsZS5jbGFzcy5SdWxlIHsKICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5maWx0ZXIoZnVuY3Rpb24gdGV4dENvbW1lbnRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2NvbW1lbnQpIHsKICAgICAgICBjb25zdCB0ZXh0ID0gY29tbWVudFBhcnNlci50ZXh0KGNvbW1lbnQpOwogICAgICAgIGNvbnN0IGtleXdvcmRzID0gcnVsZS5yZWYuaXRlbXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgY29udGFpbiA9IGtleXdvcmRzLmZpbmQoa2V5d29yZCA9PiB0ZXh0LmluY2x1ZGVzKGtleXdvcmQpKTsKICAgICAgICBpZiAoIWNvbnRhaW4pIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHJlYXNvblRleHQgPSBjb250YWluLmxlbmd0aCA+IDggPyBjb250YWluLnNsaWNlKDAsIDYpICsgJ+KApicgOiBjb250YWluOwogICAgICAgIGNvbnN0IHJlYXNvbiA9IGkxOG4udGV4dENvbnRlbnRSZWFzb24ucmVwbGFjZSgnezF9JywgKCkgPT4gcmVhc29uVGV4dCk7CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24sIHJlYXNvbiB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmNvbW1lbnQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IFRleHRDb21tZW50UnVsZSwKICAgIHRhYjogJ2NvbW1lbnQnLAogICAga2V5OiAndGV4dCcsCiAgICB2ZXJzaW9uOiAxLAogICAgdHlwZTogJ3N0cmluZ3MnLAogICAgdGl0bGU6ICgpID0+IGkxOG4uY29udGVudFRleHRDb21tZW50R3JvdXBUaXRsZSwKICAgIGRldGFpbHM6IHsKICAgICAgaGlkZTogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLnRleHRDb250ZW50Q29tbWVudEhpZGUsCiAgICAgIH0sCiAgICAgIHNob3c6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi50ZXh0Q29udGVudENvbW1lbnRTaG93LAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ2NvbW1lbnQnXSwgWyd0ZXh0J11dLAogICAgICByYWRpb0dyb3VwOiAnY29tbWVudCcsCiAgICAgIHJlbmRlcjogY29tbWVudFBhcnNlci5mYXN0LnJlbmRlci50ZXh0LAogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBjb250ZW50UmVnZXhDb21tZW50R3JvdXBUaXRsZTogewogICAgICBjbjogJ+aMieWGheWuueato+WImeW8j+i/h+a7pCcsCiAgICAgIGhrOiAn5oyJ5YWn5a655q2j5YmH5byP56+p6YG4JywKICAgICAgdHc6ICfmjInlhaflrrnmraPopo/lvI/nr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBDb250ZW50IFJlZ2V4JywKICAgIH0sCiAgICByZWdleENvbnRlbnRDb21tZW50U2hvdzogewogICAgICBjbjogJ+aAu+aYr+aYvuekuuWMuemFjeS7peS4i+ato+WImeihqOi+vuW8j+eahOivhOiuunx85YWz6ZSu6K+Ne3tpdGVtc319JywKICAgICAgaGs6ICfmgLvmmK/mmL7npLrljLnphY3ku6XkuIvmraPliYfooajpgZTlvI/nmoToqZXoq5Z8fOmXnOmNteWtl3t7aXRlbXN9fScsCiAgICAgIHR3OiAn5oC75piv5pi+56S65Yy56YWN5Lul5LiL5q2j6KaP6KGo56S65byP55qE6KmV6KuWfHzpl5zpjbXlrZd7e2l0ZW1zfX0nLAogICAgICBlbjogJ0Fsd2F5cyBzaG93IGZlZWRzIG1hdGNoIHRoZXNlIHJlZ2V4ZW58fFJlZ2V4ZW4ge3tpdGVtc319JywKICAgIH0sCiAgICByZWdleENvbnRlbnRDb21tZW50SGlkZTogewogICAgICBjbjogJ+makOiXj+WMuemFjeS7peS4i+ato+WImeihqOi+vuW8j+eahOivhOiuunx85YWz6ZSu6K+Ne3tpdGVtc319JywKICAgICAgaGs6ICfpmrHol4/ljLnphY3ku6XkuIvmraPliYfooajpgZTlvI/nmoToqZXoq5Z8fOmXnOmNteWtl3t7aXRlbXN9fScsCiAgICAgIHR3OiAn6Zqx6JeP5Yy56YWN5Lul5LiL5q2j6KaP6KGo56S65byP55qE6KmV6KuWfHzpl5zpjbXlrZd7e2l0ZW1zfX0nLAogICAgICBlbjogJ0hpZGUgZmVlZHMgbWF0Y2ggdGhlc2UgcmVnZXhlbnx8UmVnZXhlbiB7e2l0ZW1zfX0nLAogICAgfSwKICB9KTsKCiAgY2xhc3MgUmVnZXhDb21tZW50UnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgfQogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQuZmlsdGVyKGZ1bmN0aW9uIHJlZ2V4Q29tbWVudEZpbHRlcigvKiogQHR5cGUge0VsZW1lbnR9ICovY29tbWVudCkgewogICAgICAgIGNvbnN0IHRleHQgPSBjb21tZW50UGFyc2VyLnRleHQoY29tbWVudCk7CiAgICAgICAgY29uc3QgcmVnZXhlbiA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZ0NvbXBpbGVkKCk7CiAgICAgICAgY29uc3QgbWF0Y2hSZWcgPSByZWdleGVuLmZpbmQocmVnZXggPT4gcmVnZXgudGVzdCh0ZXh0KSk7CiAgICAgICAgaWYgKCFtYXRjaFJlZykgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24gfTsKICAgICAgfSwgeyBwcmlvcml0eTogdGhpcy5wcmlvcml0eSB9KTsKICAgICAgdGhpcy5yZWYuaXRlbXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5jb21tZW50LnJlcnVuKCk7IH0pOwogICAgfQogIH0KCiAgcnVsZS5ncm91cHMoewogICAgYmFzZUNsYXNzOiBSZWdleENvbW1lbnRSdWxlLAogICAgdGFiOiAnY29tbWVudCcsCiAgICBrZXk6ICdyZWdleCcsCiAgICB2ZXJzaW9uOiAxLAogICAgdHlwZTogJ3JlZ2V4ZW4nLAogICAgdGl0bGU6ICgpID0+IGkxOG4uY29udGVudFJlZ2V4Q29tbWVudEdyb3VwVGl0bGUsCiAgICBkZXRhaWxzOiB7CiAgICAgIGhpZGU6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5yZWdleENvbnRlbnRDb21tZW50SGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLnJlZ2V4Q29udGVudENvbW1lbnRTaG93LAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ211bHRpdGV4dGNvbW1lbnQnXSwgWyd0ZXh0JywgJ211bHRpdGV4dCcsICdjb21tZW50J11dLAogICAgICByYWRpb0dyb3VwOiAnY29tbWVudCcsCiAgICAgIHJlbmRlcjogY29tbWVudFBhcnNlci5mYXN0LnJlbmRlci5yZWdleCwKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbW1lbnQvdXNlci5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGNvbW1lbnRQYXJzZXIgPSB5YXdmLmNvbW1lbnQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYWNjb3VudENvbW1lbnRHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ55So5oi36L+H5rukJywKICAgICAgdHc6ICfmjInnlKjmiLbnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBVc2VycycsCiAgICB9LAogICAgYWNjb3VudENvbW1lbnRTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65YyF5ZCr5Lul5LiL55So5oi355qE6K+E6K66fHznlKjmiLd7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aAu+aYr+aYvuekuuWMheWQq+S7peS4i+eUqOaItueahOipleirlnx855So5oi2e3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyB3aXRoIHRoZXNlIHVzZXJzfHxVc2VyIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudENvbW1lbnRIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JeP5YyF5ZCr5Lul5LiL55So5oi355qE6K+E6K66fHznlKjmiLd7e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+WMheWQq+S7peS4i+eUqOaItueahOipleirlnx855So5oi2e3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIHdpdGggdGhlc2UgdXNlcnN8fFVzZXIge3tpdGVtc319JywKICAgIH0sCiAgfSk7CgoKICBjbGFzcyBDb21tZW50VXNlckZlZWRSdWxlIGV4dGVuZHMgcnVsZS5jbGFzcy5SdWxlIHsKICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5maWx0ZXIoZnVuY3Rpb24gY29tbWVudEZpbHRlckZlZWRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBjb25zdCB1c2VycyA9IG5ldyBTZXQoY29tbWVudFBhcnNlci51c2VyLm5hbWUoZmVlZCkpOwogICAgICAgIGNvbnN0IGFjY291bnRzID0gcnVsZS5yZWYuaXRlbXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgY29udGFpbiA9IGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiB1c2Vycy5oYXMoYWNjb3VudCkpOwogICAgICAgIGlmICghY29udGFpbikgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24gfTsKICAgICAgfSwgeyBwcmlvcml0eTogdGhpcy5wcmlvcml0eSB9KTsKICAgICAgdGhpcy5yZWYuaXRlbXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5jb21tZW50LnJlcnVuKCk7IH0pOwogICAgfQogIH0KCiAgcnVsZS5ncm91cHMoewogICAgYmFzZUNsYXNzOiBDb21tZW50VXNlckZlZWRSdWxlLAogICAgdGFiOiAnY29tbWVudCcsCiAgICBrZXk6ICduYW1lJywKICAgIHR5cGU6ICd1c2VybmFtZXMnLAogICAgdmVyc2lvbjogMSwKICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRDb21tZW50R3JvdXBUaXRsZSwKICAgIGRldGFpbHM6IHsKICAgICAgaGlkZTogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRDb21tZW50SGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRDb21tZW50U2hvdywKICAgICAgfSwKICAgIH0sCiAgICBmYXN0OiB7CiAgICAgIHR5cGVzOiBbWydjb21tZW50dXNlcicsICdhY2NvdW50J10sIFsnb3JpZ2luYWwnLCAnYXV0aG9yJywgJ21lbnRpb24nXV0sCiAgICAgIHJhZGlvR3JvdXA6ICdjb21tZW50dXNlcicsCiAgICAgIHJlbmRlcjogY29tbWVudFBhcnNlci5mYXN0LnJlbmRlci51c2VyLAogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvY29tbWVudC9tb3JlLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgY29tbWVudFBhcnNlciA9IHlhd2YuY29tbWVudDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBjb21tZW50ID0geWF3Zi5ydWxlcy5jb21tZW50OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBpMThuLmNvbW1lbnRNb3JlR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn5pu05aSaJywKICAgIHR3OiAn5YW25LuWJywKICAgIGVuOiAnTW9yZScsCiAgfTsKCiAgY29uc3QgbW9yZSA9IGNvbW1lbnQubW9yZSA9IHt9OwogIG1vcmUubW9yZSA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBjb21tZW50LmNvbW1lbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tb3JlQ29tbWVyY2lhbEdyb3VwVGl0bGUsCiAgfSk7CgoKICBpMThuLnNob3dNeUNvbW1lbnQgPSB7CiAgICBjbjogJ+aAu+aYr+aYvuekuuaIkeiHquW3seWPkeihqOeahOivhOiuuicsCiAgICB0dzogJ+e4veaYr+mhr+ekuuaIkeiHquW3seeZvOihqOeahOipleirlicsCiAgICBlbjogJ0Fsd2F5cyBzaG93IG15IGNvbW1lbnRzJywKICB9OwoKICBtb3JlLnNob3dNeUNvbW1lbnQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfY29tbWVudF9zaG93X215JywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IG1vcmUubW9yZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dNeUNvbW1lbnQsCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5maWx0ZXIoZnVuY3Rpb24gc2hvd015Q29tbWVudChjb21tZW50KSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBhdXRob3IgPSBjb21tZW50UGFyc2VyLnVzZXIubmFtZShjb21tZW50KVswXTsKICAgICAgICBjb25zdCB1c2VybmFtZSA9IGluaXQucGFnZS4kQ09ORklHLm5pY2s7CiAgICAgICAgaWYgKGF1dGhvciA9PT0gdXNlcm5hbWUpIHJldHVybiAnc2hvbW1lJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5jb21tZW50LnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5jb21tZW50RmFjZUNvdW50ID0gewogICAgY246ICfpmpDol4/ooajmg4V85pWw6YeP6LaF6L+He3tjb3VudH195Liq55qE6K+E6K66JywKICAgIHR3OiAn6Zqx6JeP6KGo5oOFfOaVuOmHj+i2hemBjnt7Y291bnR9feWAi+eahOipleirlicsCiAgICBlbjogJ0hpZGUgY29tbWVudHMgfCB3aXRoIG1vcmUgdGhhbiB7e2NvdW50fX0gaW1hZ2UgZW1vamknLAogIH07CgogIG1vcmUuY29tbWVudEZhY2VDb3VudCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9jb21tZW50X2ZhY2VfY291bnQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbW9yZS5tb3JlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uY29tbWVudEZhY2VDb3VudCwKICAgIHJlZjogewogICAgICBjb3VudDogewogICAgICAgIHR5cGU6ICdyYW5nZScsCiAgICAgICAgaW5pdGlhbDogOCwKICAgICAgICBtaW46IDEsCiAgICAgICAgbWF4OiAyMCwKICAgICAgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5maWx0ZXIoZnVuY3Rpb24gY29tbWVudEZhY2VDb3VudChjb21tZW50KSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBmYWNlID0gY29tbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbWdbdHlwZT0iZmFjZSJdW2FsdF0nKTsKICAgICAgICBpZiAoZmFjZSA+IHJ1bGUucmVmLmNvdW50LmdldENvbmZpZygpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmNvbW1lbnQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmNvbW1lbnRGYWNlVHlwZXMgPSB7CiAgICBjbjogJ+makOiXj+ihqOaDhXznp43nsbvotoXov4d7e2NvdW50fX3np43nmoTor4TorronLAogICAgdHc6ICfpmrHol4/ooajmg4V856iu6aGe6LaF6YGOe3tjb3VudH1956iu55qE6KmV6KuWJywKICAgIGVuOiAnSGlkZSBjb21tZW50cyB8IHdpdGggbW9yZSB0aGFuIHt7Y291bnR9fSBraW5kcyBvZiBpbWFnZSBlbW9qaScsCiAgfTsKCiAgbW9yZS5jb21tZW50RmFjZVR5cGVzID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2NvbW1lbnRfZmFjZV90eXBlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IG1vcmUubW9yZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNvbW1lbnRGYWNlVHlwZXMsCiAgICByZWY6IHsKICAgICAgY291bnQ6IHsKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIGluaXRpYWw6IDQsCiAgICAgICAgbWluOiAxLAogICAgICAgIG1heDogMjAsCiAgICAgIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQuZmlsdGVyKGZ1bmN0aW9uIGNvbW1lbnRGYWNlVHlwZXMoY29tbWVudCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgZmFjZSA9IGNvbW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nW3R5cGU9ImZhY2UiXVthbHRdJyk7CiAgICAgICAgY29uc3QgdHlwZXMgPSBuZXcgU2V0KEFycmF5LmZyb20oZmFjZSkubWFwKGZhY2UgPT4gZmFjZS5hbHQpKS5zaXplOwogICAgICAgIGlmICh0eXBlcyA+IHJ1bGUucmVmLmNvdW50LmdldENvbmZpZygpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmNvbW1lbnQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmNvbW1lbnRXaXRob3V0Q29udGVudCA9IHsKICAgIGNuOiAn6ZqQ6JeP5rKh5pyJ5YaF5a6555qE6K+E6K6677yI5Y+q5pyJ6KGo5oOF44CB5o+Q5Yiw562J77yJJywKICAgIHR3OiAn6Zqx6JeP5rKS5pyJ5YWn5a6555qE6KmV6KuW77yI5Y+q5pyJ6KGo5oOF44CB5o+Q5Yiw562J77yJJywKICAgIGVuOiAnQ29tbWVudHMgd2l0aG91dCBhbnkgdGV4dCBjb250ZW50IChvbmx5IG1lbnRpb25zIGFuZCBlbW9qaSknLAogIH07CgogIG1vcmUuY29tbWVudFdpdGhvdXRDb250ZW50ID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2NvbW1lbnRfd29fY29udGVudCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb21tZW50V2l0aG91dENvbnRlbnQsCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5maWx0ZXIoZnVuY3Rpb24gY29tbWVudFdpdGhvdXRDb250ZW50KGNvbW1lbnQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChjb21tZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZWRpYV9ib3ggLldCX3BpYycpKSByZXR1cm4gbnVsbDsgLy8g5pyJ5Zu+54mH55qE5LiN566X5rKh5YaF5a65CiAgICAgICAgY29uc3QgdGV4dHMgPSBBcnJheS5mcm9tKGNvbW1lbnQucXVlcnlTZWxlY3RvcignLldCX3RleHQnKS5jaGlsZE5vZGVzKQogICAgICAgICAgLmZpbHRlcihuID0+ICEoKG4gaW5zdGFuY2VvZiBFbGVtZW50KSAmJiBuLm1hdGNoZXMoJ2FbdXNlcmNhcmRdJykpKSAvLyDmj5DliLDkurrkuI3nrpflhoXlrrkKICAgICAgICAgIC5tYXAobiA9PiBuLnRleHRDb250ZW50KS5qb2luKCcnKQogICAgICAgICAgLnJlcGxhY2UoL+WbnlvlpI3lvqnopoZdfFJlcGx5fOW+ruWNmnxb6L2s6L2JXVvlj5HnmbxdfFs6L1xz77yaLlx1MjAwYl0vaWcsICcnKTsgLy8g56m65qC844CB4oCc5Zue5aSN4oCd5ZKM5YaS5Y+35LiN566X5YaF5a65CiAgICAgICAgaWYgKCF0ZXh0cykgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5jb21tZW50LnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5jb21tZW50V2l0aEZvcndhcmQgPSB7CiAgICBjbjogJ+makOiXj+WQq+aciei9rOWPkea2iOaBr+eahOW+ruWNmicsCiAgICB0dzogJ+maseiXj+WQq+aciei9ieeZvOa2iOaBr+eahOW+ruWNmicsCiAgICBlbjogJ0NvbW1lbnRzIGNvbnRhaW4gZm9yd2FyZGVkIG1lc3NhZ2VzJywKICB9OwoKICBtb3JlLmNvbW1lbnRXaXRoRm9yd2FyZCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9jb21tZW50X3dpdGhfZm9yd2FyZCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb21tZW50V2l0aEZvcndhcmQsCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5maWx0ZXIoZnVuY3Rpb24gY29tbWVudFdpdGhGb3J3YXJkKGNvbW1lbnQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHVzZXJzID0gY29tbWVudFBhcnNlci51c2VyLmRvbShjb21tZW50KTsKICAgICAgICBjb25zdCBmb3J3YXJkcyA9IHVzZXJzLmZpbmQodSA9PiB1LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudC5tYXRjaCgvXC9cLyQvKSk7CiAgICAgICAgaWYgKGZvcndhcmRzKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmNvbW1lbnQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL2NsZWFuLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKICBjb25zdCBwcmlvcml0eSA9IHV0aWwucHJpb3JpdHk7CgogIGkxOG4uY2xlYW5UYWJUaXRsZSA9IHsKICAgIGNuOiAn55WM6Z2i5riF55CGJywKICAgIHR3OiAn5LuL6Z2i5riF55CGJywKICAgIGVuOiAnQ2xlYW4gVXAnLAogIH07CiAgaTE4bi5jbGVhblRhYlNlbGVjdEFsbCA9IHsKICAgIGNuOiAn5YWo6YCJ5pys57uEJywKICAgIHR3OiAn5YWo6YG45pys57WEJywKICAgIGVuOiAnU2VsZWN0IEdyb3VwJywKICB9OwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW4gPSB7fTsKICBjbGVhbi5jbGVhbiA9IHJ1bGUuVGFiKHsKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNsZWFuVGFiVGl0bGUsCiAgICBwYWdlbWVudTogdHJ1ZSwKICB9KTsKCiAgY29uc3Qgc2VsZWN0QWxsQnV0dG9uID0gaWQgPT4gewogICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgYnV0dG9uLmNsYXNzTmFtZSA9ICdXX2J0bl9iIHlhd2YtY2xlYW4tZ3JvdXAtYWxsJzsKICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICBjb250ZW50LnRleHRDb250ZW50ID0gaTE4bi5jbGVhblRhYlNlbGVjdEFsbDsKICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChjb250ZW50KTsKICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgY29uc3QgZ3JvdXAgPSBjbGVhbltpZF07CiAgICAgIE9iamVjdC5rZXlzKGdyb3VwKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgY29uc3QgaXRlbSA9IGdyb3VwW2tleV07CiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBydWxlLmNsYXNzLlJ1bGUpIHsKICAgICAgICAgIGlmIChpdGVtLnNldENvbmZpZykgaXRlbS5zZXRDb25maWcodHJ1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIGJ1dHRvbjsKICB9OwoKICBsZXQgbGFzdENsZWFuR3JvdXAgPSBudWxsOwogIGNsZWFuLkNsZWFuR3JvdXAgPSBmdW5jdGlvbiAoaWQsIHRlbXBsYXRlKSB7CiAgICBjb25zdCBncm91cCA9IHJ1bGUuR3JvdXAoewogICAgICBpZCwKICAgICAgcGFyZW50OiBjbGVhbi5jbGVhbiwKICAgICAgdGVtcGxhdGUsCiAgICAgIHJlbmRlciguLi5hcmdzKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY2xlYW4tZ3JvdXAnKTsKICAgICAgICBjb25zdCBidXR0b24gPSBzZWxlY3RBbGxCdXR0b24oaWQpOwogICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoYnV0dG9uKTsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfSwKICAgIH0pOwogICAgY2xlYW5baWRdID0geyBbaWRdOiBncm91cCB9OwogICAgbGFzdENsZWFuR3JvdXAgPSBpZDsKICAgIHJldHVybiBncm91cDsKICB9OwoKICBjbGVhbi5DbGVhblJ1bGUgPSBmdW5jdGlvbiAoaWQsIHRlbXBsYXRlLCB2ZXJzaW9uLCBhY3Rpb24sIC4uLmRldGFpbHMpIHsKICAgIGNsZWFuW2xhc3RDbGVhbkdyb3VwXVtpZF0gPSBydWxlLlJ1bGUoT2JqZWN0LmFzc2lnbih7CiAgICAgIGlkOiAnY2xlYW5fJyArIGxhc3RDbGVhbkdyb3VwICsgJ18nICsgaWQsCiAgICAgIHRlbXBsYXRlLAogICAgICBwYXJlbnQ6IGNsZWFuW2xhc3RDbGVhbkdyb3VwXVtsYXN0Q2xlYW5Hcm91cF0sCiAgICAgIHZlcnNpb24sCiAgICB9LCB0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJyA/IHsKICAgICAgYWNzczogYWN0aW9uLAogICAgfSA6IHR5cGVvZiBhY3Rpb24gPT09ICdmdW5jdGlvbicgPyB7CiAgICAgIGFpbml0OiBhY3Rpb24sCiAgICB9IDogdHlwZW9mIGFjdGlvbiA9PT0gJ29iamVjdCcgPyBhY3Rpb24gOiB7fSwgLi4uZGV0YWlscykpOwogICAgcmV0dXJuIGNsZWFuW2xhc3RDbGVhbkdyb3VwXVtpZF07CiAgfTsKCiAgaTE4bi5jbGVhbkNvbmZpZ0NvbHVtbkNvdW50ID0gewogICAgY246IDMsCiAgICBlbjogMiwKICB9OwoKICBpbml0Lm9uUmVhZHkoKCkgPT4gewogICAgY3NzLmFwcGVuZChgCi55YXdmLWNsZWFuLWdyb3VwICsgLnlhd2YtY29uZmlnLWdyb3VwLWl0ZW1zIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoJHtpMThuLmNsZWFuQ29uZmlnQ29sdW1uQ291bnR9LCAxZnIpOyBncmlkLWdhcDogNXB4IDEwcHg7IG1hcmdpbjogNXB4IDIwcHg7IH0KLnlhd2YtY2xlYW4tZ3JvdXAgKyAueWF3Zi1jb25maWctZ3JvdXAtaXRlbXMgPiAueWF3Zi1jb25maWctcnVsZSB7IG1hcmdpbjogMDsgfQoueWF3Zi1jbGVhbi1ncm91cC1hbGwgeyBmbG9hdDogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGN1cnNvcjogcG9pbnRlcjsgfQoueWF3Zi13aGF0c25ldy1kaWFsb2cgLnlhd2YtY2xlYW4tZ3JvdXAtYWxsLCAueWF3Zi1jb25maWctbGF5ZXItc2VhcmNoIC55YXdmLWNsZWFuLWdyb3VwLWFsbCB7IGRpc3BsYXk6IG5vbmU7IH0KYCk7CiAgfSwgeyBwcmlvcml0eTogcHJpb3JpdHkuREVGQVVMVCB9KTsKCgogIGNsZWFuLnRhZ0VsZW1lbnRzID0gZnVuY3Rpb24gKG5hbWUsIHNlbGVjdG9yLCBpZGVudGlmaWVycykgewogICAgY29uc3QgdGFnRWxlbWVudHMgPSBmdW5jdGlvbiB0YWdFbGVtZW50cygpIHsKICAgICAgY29uc3QgZWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTsKICAgICAgaWYgKCFlbGVtZW50cy5sZW5ndGgpIHJldHVybjsKICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd5YXdmLWlkJywgJycpOwogICAgICAgIGNvbnN0IG1hdGNoZWQgPSBPYmplY3Qua2V5cyhpZGVudGlmaWVycykuZmluZChzZWxlY3RvciA9PiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKTsKICAgICAgICBpZiAobWF0Y2hlZCkgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtaWQnLCBpZGVudGlmaWVyc1ttYXRjaGVkXSk7CiAgICAgIH0pOwogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YWdFbGVtZW50cywgJ25hbWUnLCB7IHZhbHVlOiBgdGFnRWxlbWVudHMke25hbWV9YCB9KTsKICAgIG9ic2VydmVyLmRvbS5hZGQodGFnRWxlbWVudHMpOwogIH07CgogIGNvbnN0IGdyb3VwT25Mb2FkID0gW107CiAgY2xlYW4uQ2xlYW5SdWxlR3JvdXAgPSBmdW5jdGlvbiAocnVsZXMsIGNhbGxiYWNrKSB7CiAgICBncm91cE9uTG9hZC5wdXNoKHsgcnVsZXMsIGNhbGxiYWNrIH0pOwogIH07CiAgaW5pdC5vbkxvYWQoZnVuY3Rpb24gKCkgewogICAgZ3JvdXBPbkxvYWQuc3BsaWNlKDApLmZvckVhY2goKHsgcnVsZXMsIGNhbGxiYWNrIH0pID0+IHsKICAgICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgLi4uT2JqZWN0LmtleXMocnVsZXMpLm1hcChrZXkgPT4gKHsgW2tleV06IHJ1bGVzW2tleV0uaXNFbmFibGVkKCkgfSkpKTsKICAgICAgY2FsbGJhY2soY29uZmlnKTsKICAgIH0pOwogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkFGVEVSIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL2ljb25zLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY2xlYW5JY29uc0dyb3VwVGl0bGU6IHsgY246ICfpmpDol4/mqKHlnZcgLSDmoIfor4Yv5Zu+5qCHJywgdHc6ICfpmrHol4/mqKHntYQgLSDmqJnoqowv5ZyW56S6JywgZW46ICdIaWRlIE1vZHVsZXMgLSBMb2dvIC8gSWNvbnMnIH0sCiAgICBjbGVhbkljb25zTWVtYmVyOiB7IGNuOiAn5b6u5Y2a5Lya5ZGYJywgdHc6ICflvq7ljZrmnIPlk6EnLCBlbjogJ1dlaWJvIFZJUCAvIE1lbWJlcicgfSwKICAgIGNsZWFuSWNvbnNMZXZlbDogeyBjbjogJ+etiee6pycsIHR3OiAn562J57SaJywgZW46ICdMZXZlbCcgfSwKICAgIGNsZWFuSWNvbnNBcHByb3ZlOiB7IGNuOiAn5Liq5Lq66K6k6K+BJywgdHc6ICflgIvkurroqo3orYknLCBlbjogJ1BlcnNvbmFsIEF1dGhlbnRpY2F0aW9uJyB9LAogICAgY2xlYW5JY29uc0FwcHJvdmVDbzogeyBjbjogJ+acuuaehOiupOivgScsIHR3OiAn5LyB5qWt6KqN6K2JJywgZW46ICdXZWlibyBWZXJpZmljYXRpb24nIH0sCiAgICBjbGVhbkljb25zQXBwcm92ZURlYWQ6IHsgY246ICflpLHmlYjorqTor4EnLCB0dzogJ+WkseaViOiqjeitiScsIGVuOiAnRmFpbGVkIHZlcmlmaWNhdGlvbicgfSwKICAgIGNsZWFuSWNvbnNCaWdGdW46IHsgY246ICfpk4HnsoknLCB0dzogJ+mQteeyiScsIGVuOiAn6ZOB57KJIChiaWcgZmFucyknIH0sCiAgICBjbGVhbkljb25zQ2x1YjogeyBjbjogJ+W+ruWNmui+vuS6uicsIHR3OiAn5b6u5Y2a6YGU5Lq6JywgZW46ICdQaW9uZWVyJyB9LAogICAgY2xlYW5JY29uc1ZHaXJsOiB7IGNuOiAn5b6u5Y2a5aWz6YOOJywgZW46ICdXZWlibyBnaXJsJyB9LAogICAgY2xlYW5JY29uc1N1cGVydmlzb3I6IHsgY246ICflvq7ljZrnm5HnnaPlkZgnLCB0dzogJ+W+ruWNmuebo+edo+WToScsIGVuOiAnV2VpYm8gU3VwZXJ2aXNvcicgfSwKICAgIGNsZWFuSWNvbnNUYW9iYW86IHsgY246ICfmt5jlrp0v5aSp54yr5ZWG5oi3JywgdHc6ICfmt5jlr7Yv5aSp6LKT5ZWG5oi2JywgZW46ICdUYW9iYW8gLyBUbWFsbCBNZXJjaGFudCcgfSwKICAgIGNsZWFuSWNvbnNDaGVuZzogeyBjbjogJ+mYv+mHjOivmuS/oemAmicsIHR3OiAn6Zi/6YeM6Kqg5L+h6YCaJywgZW46ICdBbGliYWJhIOivmuS/oemAmicgfSwKICAgIGNsZWFuSWNvbnNHb25neWk6IHsgY246ICflhaznm4onLCBlbjogJ1B1YmxpYyBJbnRlcmVzdCcgfSwKICAgIGNsZWFuSWNvbnNab25neWlrYTogeyBjbjogJ+e7vOiJuicsIGVuOiAnVmFyaWV0eScgfSwKICAgIGNsZWFuSWNvbnNZb3VqaTogeyBjbjogJ+aXheihjCcsIGVuOiAnVHJhdmVsJyB9LAogICAgY2xlYW5JY29uc090aGVyczogeyBjbjogJ+abtOWkmicsIHR3OiAn5YW25LuWJywgZW46ICdNb3JlJyB9LAogIH0pOwoKICBjb25zdCBzaG93SWNvbnMgPSBjbGFzc05hbWVzID0+ICh7CiAgICBhZnRlclJlbmRlcjogY29udGFpbmVyID0+IHsKICAgICAgY29uc3QgbGFiZWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignbGFiZWwnKTsKICAgICAgY2xhc3NOYW1lcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGkgY2xhc3M9IldfaWNvbiIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrIWltcG9ydGFudCI+PC9pPic7CiAgICAgICAgY29uc3QgaSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpJyk7CiAgICAgICAgaWYgKHR5cGVvZiBjbGFzc05hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBpLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTsKICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2xhc3NOYW1lKSkgewogICAgICAgICAgaS5jbGFzc05hbWUgPSBjbGFzc05hbWUuam9pbignICcpOwogICAgICAgIH0KICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChjb250YWluZXIpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0sCiAgfSk7CgogIGNsZWFuLkNsZWFuR3JvdXAoJ2ljb25zJywgKCkgPT4gaTE4bi5jbGVhbkljb25zR3JvdXBUaXRsZSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdsZXZlbCcsICgpID0+IGkxOG4uY2xlYW5JY29uc0xldmVsLCAxLCAnLmljb25fYmVkW25vZGUtdHlwZT0ibGV2ZWwiXSwgLldfbGV2ZWxfaWNvLCAuV19pY29uX2xldmVsIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY29uc3QgbWVtYmVyID0gY2xlYW4uQ2xlYW5SdWxlKCdtZW1iZXInLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNNZW1iZXIsIDEsICdbY2xhc3MqPSJpY29uX21lbWJlciJdLCBbY2xhc3MqPSJpY29fbWVtYmVyIl0sIFtjbGFzcyo9Imljb192aXAiXSwgW2NsYXNzKj0iaWNvbl92aXAiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHNob3dJY29ucyhbJ2ljb25fbWVtYmVyMSddKSwgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KTsKICBjb25zdCBhcHByb3ZlID0gY2xlYW4uQ2xlYW5SdWxlKCdhcHByb3ZlJywgKCkgPT4gaTE4bi5jbGVhbkljb25zQXBwcm92ZSwgMSwgJy5hcHByb3ZlLCAuaWNvbl9hcHByb3ZlLCAuaWNvbl9wZl9hcHByb3ZlLCAuaWNvbl9hcHByb3ZlX2dvbGQsIC5pY29uX3BmX2FwcHJvdmVfZ29sZCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHNob3dJY29ucyhbJ2ljb25fYXBwcm92ZScsICdpY29uX2FwcHJvdmVfZ29sZCddKSwgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KTsKICBjb25zdCBhcHByb3ZlQ28gPSBjbGVhbi5DbGVhblJ1bGUoJ2FwcHJvdmVfY28nLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNBcHByb3ZlQ28sIDEsICcuYXBwcm92ZV9jbywgLmljb25fYXBwcm92ZV9jbywgLmljb25fcGZfYXBwcm92ZV9jbywgW2NsYXNzXj0iV19pY29uX2NvIl0sIFtjbGFzc149Ii5pY29uX2FwcHJvdmVfY29fIl0sIFtjbGFzc149Ii5pY29uX3BmX2FwcHJvdmVfY29fIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoWydpY29uX2FwcHJvdmVfY28nXSksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdhcHByb3ZlX2RlYWQnLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNBcHByb3ZlRGVhZCwgMSwgJy5pY29uX2FwcHJvdmVfZGVhZCwgLmljb25fcGZfYXBwcm92ZV9kZWFkIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jywgc2hvd0ljb25zKFsnaWNvbl9hcHByb3ZlX2RlYWQnXSkpOwogIGNvbnN0IGJpZ0ZhbiA9IGNsZWFuLkNsZWFuUnVsZSgnYmlnZnVuJywgKCkgPT4gaTE4bi5jbGVhbkljb25zQmlnRnVuLCAyNiwgJy5XX2ljb25fYmYgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoW1snV19pY29uX2JmJywgJ2ljb25fYmlnZmFucyddXSksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY29uc3QgY2x1YiA9IGNsZWFuLkNsZWFuUnVsZSgnY2x1YicsICgpID0+IGkxOG4uY2xlYW5JY29uc0NsdWIsIDEsICcuaWNvX2NsdWIsIC5pY29uX3BmX2NsdWIsIC5pY29uX2NsdWIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoWydpY29uX2NsdWInXSksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY29uc3QgdkdpcmwgPSBjbGVhbi5DbGVhblJ1bGUoJ3ZfZ2lybCcsICgpID0+IGkxOG4uY2xlYW5JY29uc1ZHaXJsLCAxLCAnLmljb192bGFkeSwgLmljb25fcGZfdmxhZHksIC5pY29uX3ZsYWR5IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jywgc2hvd0ljb25zKFsnaWNvbl92bGFkeSddKSwgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ3N1cGVydmlzb3InLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNTdXBlcnZpc29yLCAxLCAnLmljb25fc3VwZXJ2aXNvciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHNob3dJY29ucyhbJ2ljb25fc3VwZXJ2aXNvciddKSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd0YW9iYW8nLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNUYW9iYW8sIDEsICcuaWNvX3Rhb2JhbywgLmljb25fdG1hbGwsIC5pY29uX3Rhb2JhbywgLmljb25fdG1hbGwgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoWydpY29uX3Rhb2JhbycsICdpY29uX3RtYWxsJ10pKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2NoZW5nJywgKCkgPT4gaTE4bi5jbGVhbkljb25zQ2hlbmcsIDEsICcuaWNvbl9jaGVuZyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHNob3dJY29ucyhbJ2ljb25fY2hlbmcnXSkpOwogIGNsZWFuLkNsZWFuUnVsZSgnZ29uZ3lpJywgKCkgPT4gaTE4bi5jbGVhbkljb25zR29uZ3lpLCAxLCAnLmljb19nb25neWksIC5pY29fZ29uZ3lpMSwgLmljb19nb25neWkyLCAuaWNvX2dvbmd5aTMsIC5pY29fZ29uZ3lpNCwgLmljb19nb25neWk1LCAuaWNvbl9nb25neWksIC5pY29uX2dvbmd5aTIsIC5pY29uX2dvbmd5aTMsIC5pY29uX2dvbmd5aTQsIC5pY29uX2dvbmd5aTUgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoWydpY29uX2dvbmd5aSddKSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd6b25neWlrYScsICgpID0+IGkxOG4uY2xlYW5JY29uc1pvbmd5aWthLCAxLCAnLnpvbmd5aWthMjAxNCwgLmljb25fem9uZ3lpa2EyMDE0IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jywgc2hvd0ljb25zKFsnaWNvbl96b25neWlrYTIwMTQnXSkpOwogIGNsZWFuLkNsZWFuUnVsZSgnb3RoZXJzJywgKCkgPT4gaTE4bi5jbGVhbkljb25zT3RoZXJzLCAxLCAoKSA9PiB7CiAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3QgaWNvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EgPiAuV19pY29uX3l5c3R5bGUnKSk7CiAgICAgIGljb25zLmZvckVhY2goZnVuY3Rpb24gKGljb24pIHsKICAgICAgICBjb25zdCBsaW5rID0gaWNvbi5wYXJlbnROb2RlOwogICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHJlcGxhY2VtZW50LnRpdGxlID0gbGluay50aXRsZTsKICAgICAgICBsaW5rLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHJlcGxhY2VtZW50LCBsaW5rKTsKICAgICAgfSk7CiAgICB9KTsKICAgIGNzcy5hcHBlbmQoJy5XX2ljb25feXlzdHlsZSwgLldfaWNvbl95eSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIH0sIHNob3dJY29ucyhbJ2ljb25feXlfc3NwMScsICdpY29uX3l5X2dxdCcsICdpY29uX3l5X2xvbCddKSk7CgogIGNsZWFuLkNsZWFuUnVsZUdyb3VwKHsKICAgICd2eWVsbG93LHZnb2xkJzogYXBwcm92ZSwKICAgIHZibHVlOiBhcHByb3ZlQ28sCiAgICB2Z2lybDogdkdpcmwsCiAgICBjbHViOiBjbHViLAogICAgJ3ZpcCx2aXBleCc6IG1lbWJlciwKICAgIGJpZ2ZhbjogYmlnRmFuLAogIH0sIGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OICE9PSA3KSByZXR1cm47CiAgICBjb25zdCBoaWRlU3ltYm9sID0gT2JqZWN0LmtleXMob3B0aW9ucykuZmlsdGVyKGtleSA9PiBvcHRpb25zW2tleV0pLmpvaW4oJywnKS5zcGxpdCgnLCcpOwoKICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5LCBoaWRlU3ltYm9sKSB7CiAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgIGNvbnN0IHdvb0ljb24gPSB2dWVTZXR1cC5nZXRSb290Vm0oKS4kb3B0aW9ucy5fYmFzZS5jb21wb25lbnQoJ3dvby1pY29uJyk7CiAgICAgIHdvb0ljb24ub3B0aW9ucy5yZW5kZXIgPSAoZnVuY3Rpb24gKHJlbmRlcikgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoaCkgewogICAgICAgICAgaWYgKGhpZGVTeW1ib2wuaW5jbHVkZXModGhpcy5zeW1ib2wpKSB7CiAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywgeyByZWY6ICdmcmFtZXMnLCBzdHlsZTogJ2Rpc3BsYXk6IG5vbmU7JyB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZW5kZXIuY2FsbCh0aGlzLCBoKTsKICAgICAgICB9OwogICAgICB9KHdvb0ljb24ub3B0aW9ucy5yZW5kZXIpKTsKCiAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnd29vLWljb24nLCB2bSA9PiB7IHZtLiRmb3JjZVVwZGF0ZSgpOyB9LCB7IHdhdGNoOiBmYWxzZSB9KTsKICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdpY29uJywgdm0gPT4gewogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2Yodm0pID09PSB3b29JY29uLnByb3RvdHlwZSkgdm0uJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0sIHsgd2F0Y2g6IGZhbHNlIH0pOwoKICAgICAgY29uc3QgaGlkZVZpcCA9IGhpZGVTeW1ib2wuaW5jbHVkZXMoJ3ZpcCcpOwogICAgICBjb25zdCBoaWRlQmlnZmFuID0gaGlkZVN5bWJvbC5pbmNsdWRlcygnYmlnZmFuJyk7CiAgICAgIGlmIChoaWRlVmlwIHx8IGhpZGVCaWdmYW4pIHsKICAgICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2ljb24tZmFucycsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgaWYgKGhpZGVWaXApIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModm0sIHsgaXNWaXA6IHsgZ2V0OiAoKSA9PiBmYWxzZSB9IH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhpZGVCaWdmYW4pIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModm0sIHsgaWNvbk5hbWU6IHsgZ2V0OiAoKSA9PiBudWxsIH0gfSk7CiAgICAgICAgICB9CiAgICAgICAgICB2bS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIGhpZGVTeW1ib2wpOwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL2ZvbGxvdy5qcwoKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuRm9sbG93R3JvdXBUaXRsZTogeyBjbjogJ+makOiXj+aooeWdlyAtIOWFs+azqOaMiemSricsIHR3OiAn6Zqx6JeP5qih57WEIC0g6Zec5rOo5oyJ6YiVJywgZW46ICdIaWRlIE1vZHVsZXMgLSBGb2xsb3cgQnV0dG9uJyB9LAogICAgY2xlYW5Gb2xsb3dTaW5nbGU6IHsgY246ICflvq7ljZror6bmg4XpobUnLCB0dzogJ+W+ruWNmuips+aDhemggScsIGVuOiAnV2VpYm8gZGV0YWlsJyB9LAogICAgY2xlYW5Gb2xsb3dBdE1lOiB7IGNuOiAn5o+Q5Yiw5oiR55qE5b6u5Y2aJywgZW46ICdXZWlibyBtZW50aW9uZWQgbWUnIH0sCiAgICBjbGVhbkZvbGxvd0Rpc2NvdmVyOiB7IGNuOiAn54Ot6Zeo5b6u5Y2aJywgdHc6ICfnhrHploDlvq7ljZonLCBlbjogJ0hvdCBXZWlibycgfSwKICAgIGNsZWFuRm9sbG93RmFzdEZvcndhcmQ6IHsgY246ICflv6vovawnLCB0dzogJ+W/q+i9iScsIGVuOiAnRmFzdCBGb3J3YXJkJyB9LAogICAgY2xlYW5Gb2xsb3dWaWRlbzogeyBjbjogJ+inhumikeW8ueWxgicsIGhrOiAn6KaW6aC75b2I5bGkJywgdHc6ICflvbHniYflv6vpoa/lsaQnLCBlbjogJ1ZpZGVvIHBvcC11cCBsYXllcicgfSwKICAgIGNsZWFuRm9sbG93UmVjb21tZW5kOiB7IGNuOiAn5YWz5rOo5o6o6I2QJywgdHc6ICfpl5zms6jmjqjolqYnLCBlbjogJ0ZvbGxvdyBSZWNvbW1lbmQnIH0sCiAgfSk7CgogIGNsZWFuLkNsZWFuR3JvdXAoJ2ZvbGxvdycsICgpID0+IGkxOG4uY2xlYW5Gb2xsb3dHcm91cFRpdGxlKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3NpbmdsZScsICgpID0+IGkxOG4uY2xlYW5Gb2xsb3dTaW5nbGUsIDEsICdbaWRePSJQbF9PZmZpY2lhbF9XZWlib0RldGFpbF9fIl0gW25vZGUtdHlwZSo9ImZlZWRfcmVjb21tZW5kX2ZvbGxvdyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdhdF9tZScsICgpID0+IGkxOG4uY2xlYW5Gb2xsb3dBdE1lLCAxLCAnI3Y2X3BsX2NvbnRlbnRfYXRtZXdlaWJvIFtub2RlLXR5cGUqPSJmZWVkX3JlY29tbWVuZF9mb2xsb3ciXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZGlzY292ZXInLCAoKSA9PiBpMThuLmNsZWFuRm9sbG93RGlzY292ZXIsIDEsICcjcGxjX2Rpc2NvdmVyIFtub2RlLXR5cGUqPSJmZWVkX3JlY29tbWVuZF9mb2xsb3ciXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZmFzdF9mb3J3YXJkJywgKCkgPT4gaTE4bi5jbGVhbkZvbGxvd0Zhc3RGb3J3YXJkLCAxLCAnI3Y2X3BsX2NvbnRlbnRfaG9tZWZlZWQgW25vZGUtdHlwZSo9ImZlZWRfcmVjb21tZW5kX2ZvbGxvdyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd2aWRlbycsICgpID0+IGkxOG4uY2xlYW5Gb2xsb3dWaWRlbywgMSwgJy5XQl9oNXZpZGVvIC5jb24tMTEsIC53YnYtYWRkLWJveCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgncmVjb21tZW5kJywgKCkgPT4gaTE4bi5jbGVhbkZvbGxvd1JlY29tbWVuZCwgMSwgJ1thY3Rpb24tdHlwZT0iZm9sbG93X3JlY29tbWVuZF9hcnIiXSwgW25vZGUtdHlwZT0iZm9sbG93X3JlY29tbWVuZF9ib3giXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL25hdi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBlbnYgPSB5YXdmLmVudjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGJhY2tlbmQgPSB5YXdmLmJhY2tlbmQ7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY2xlYW5OYXZHcm91cFRpdGxlOiB7IGNuOiAn6ZqQ6JeP5qih5Z2XIC0g5a+86Iiq5qCPJywgdHc6ICfpmrHol4/mqKHntYQgLSDlsI7opr3liJcnLCBlbjogJ0hpZGUgTW9kdWxlcyAtIE5hdmlnYXRpb24gQmFyJyB9LAogICAgY2xlYW5OYXZMb2dvSW1nOiB7IGNuOiAn6IqC5pel5b695qCHJywgdHc6ICfnr4Dml6Xlvr3mqJknLCBlbjogJ0hvbGlkYXkgbG9nbycgfSwKICAgIGNsZWFuTmF2TWFpbjogeyBjbjogJ+mmlumhtScsIHR3OiAn6aaW6aCBJywgZW46ICdIb21lJyB9LAogICAgY2xlYW5OYXZUVjogeyBjbjogJ+inhumikScsIGVuOiAn6KeG6aKRIChWaWRlbyknIH0sCiAgICBjbGVhbk5hdkhvdDogeyBjbjogJ+eDremXqO+8iOWPkeeOsO+8iScsIGVuOiAnRGlzY292ZXInIH0sCiAgICBjbGVhbk5hdkdhbWU6IHsgY246ICfmuLjmiI8nLCB0dzogJ+mBiuaIsicsIGVuOiAnR2FtZScgfSwKICAgIGNsZWFuTmF2SG90U2VhcmNoOiB7IGNuOiAn5aSn5a625q2j5Zyo5pCcJywgdHc6ICflpKflrrbmraPlnKjnhrHmkJwnLCBlbjogJ0hvdCBzZWFyY2gnIH0sCiAgICBjbGVhbk5hdkFyaWE6IHsgY246ICfml6Dpmpznoo0nLCBlbjogJ+aXoOmanOeijSAoYTExeSknIH0sCiAgICBjbGVhbk5hdk5vdGljZU5ldzogeyBjbjogJ+aWsOa2iOaBr+iuoeaVsCcsIHR3OiAn5paw5raI5oGv6KiI5pW4JywgZW46ICdDb3VudCBmb3IgbmV3IG5vdGljZScgfSwKICAgIGNsZWFuTmF2TmV3OiB7IGNuOiAn5o+Q56S657qi54K5JywgdHc6ICfmj5DnpLrntIXpu54nLCBlbjogJ1JlZCBkb3QgdGlwcycgfSwKICB9KTsKCiAgY2xlYW4uQ2xlYW5Hcm91cCgnbmF2JywgKCkgPT4gaTE4bi5jbGVhbk5hdkdyb3VwVGl0bGUpOwogIGNsZWFuLkNsZWFuUnVsZSgnbG9nb19pbWcnLCAoKSA9PiBpMThuLmNsZWFuTmF2TG9nb0ltZywgMSwgewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBhaW5pdDogZnVuY3Rpb24gKCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiByZXBsYWNlTG9nbygpIHsKICAgICAgICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9nbG9iYWxfbmF2IC5nbl9sb2dvIC5ib3gnKTsKICAgICAgICAgIGlmICghYm94KSB7IHNldFRpbWVvdXQocmVwbGFjZUxvZ28sIDEwMCk7IHJldHVybjsgfQogICAgICAgICAgY29uc3QgaW1nID0gYm94LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKVswXTsKICAgICAgICAgIGlmICghaW1nKSByZXR1cm47CiAgICAgICAgICBjb25zdCBsb2dvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgbG9nby5jbGFzc0xpc3QuYWRkKCdsb2dvJyk7CiAgICAgICAgICBpbWcucmVwbGFjZVdpdGgobG9nbyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXkpIHsKICAgICAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCd3ZWliby10b3AtbmF2JywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2bSwgJ3NraW5EYXRhJywgeyBnZXQ6ICgpID0+ICh7fSkgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5KTsKICAgICAgfQogICAgfSwKICAgIGFjc3M6ICcuV0JfZ2xvYmFsX25hdiAuZ25fbG9nbyAuYm94IGltZyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsCiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlR3JvdXAoewogICAgLy8gVjc6IOmCo+autSBDU1Mg5pivIFY2IOeahO+8jOS5i+WQjuW6lOivpeebtOaOpeWIoOaOiQogICAgaG9tZTogY2xlYW4uQ2xlYW5SdWxlKCdtYWluJywgKCkgPT4gaTE4bi5jbGVhbk5hdk1haW4sIDEsICcuZ25fbmF2X2xpc3Q+bGk6bnRoLWNoaWxkKDEpIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KSwKICAgIHR2OiBjbGVhbi5DbGVhblJ1bGUoJ3R2JywgKCkgPT4gaTE4bi5jbGVhbk5hdlRWLCAxLCAnLmduX25hdl9saXN0PmxpOm50aC1jaGlsZCgyKSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSksCiAgICBob3Q6IGNsZWFuLkNsZWFuUnVsZSgnaG90JywgKCkgPT4gaTE4bi5jbGVhbk5hdkhvdCwgMSwgJy5nbl9uYXZfbGlzdD5saTpudGgtY2hpbGQoMykgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pLAogICAgZ2FtZTogY2xlYW4uQ2xlYW5SdWxlKCdnYW1lJywgKCkgPT4gaTE4bi5jbGVhbk5hdkdhbWUsIDEsICcuZ25fbmF2X2xpc3Q+bGk6bnRoLWNoaWxkKDQpIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KSwKICB9LCBmdW5jdGlvbiAob3B0aW9ucykgewogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNykgcmV0dXJuOwogICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXksIG9wdGlvbnMpIHsKICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCd3ZWliby10b3AtbmF2JywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodm0uY2hhbm5lbHMpKSB7CiAgICAgICAgICB2bS5jaGFubmVscyA9IHZtLmNoYW5uZWxzLmZpbHRlcihjaGFubmVsID0+ICFvcHRpb25zW2NoYW5uZWwubmFtZV0pOwogICAgICAgIH0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2bS5saW5rcykpIHsKICAgICAgICAgIHZtLmxpbmtzID0gdm0ubGlua3MuZmlsdGVyKGxpbmsgPT4gIW9wdGlvbnNbbGluay5uYW1lXSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBvcHRpb25zKTsKICB9KTsKICBpZiAoZW52LmNvbmZpZy5yZXF1ZXN0QmxvY2tpbmdTdXBwb3J0ZWQpIHsKICAgIGNsZWFuLkNsZWFuUnVsZSgnaG90X3NlYXJjaCcsICgpID0+IGkxOG4uY2xlYW5OYXZIb3RTZWFyY2gsIDEsIHsKICAgICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgIGJhY2tlbmQub25SZXF1ZXN0KCdob3RTZWFyY2gnLCBkZXRhaWxzID0+IHsKICAgICAgICAgIGlmICh0aGlzLmlzRW5hYmxlZCgpKSByZXR1cm4geyBjYW5jZWw6IHRydWUgfTsKICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICB9KTsKICAgICAgfSwKICAgIH0pOwogIH0gZWxzZSBpZiAoZnVuY3Rpb24gc3VwcG9ydE11dGF0aW9uRXZlbnQoKSB7CiAgICAvLyDnlKjmiLfohJrmnKzniYjml6Dms5XnlKggYmFja2dyb3VuZCDohJrmnKzmi6bmiKrnvZHnu5zor7fmsYIKICAgIC8vIE11dGF0aW9uIEV2ZW50IOS8muWcqOiKgueCueaPkuWFpeS5i+WJjeinpuWPke+8jOmYu+atouaPkuWFpeWwseWPr+S7pemYu+atouiEmuacrOi/kOihjAogICAgLy8gTXV0YXRpb25PYnNlcnZlciDkvJrlnKjoioLngrnmj5LlhaXkuYvlkI7op6blj5HvvIzlubbkuI3og73kv53or4HpmLvmraIgSlNPTlAg6K+35rGC5oiQ5Yqf6L+b6KGMCiAgICAvLyDmraTlpJbpmaTkuoYgR00zIOaEj+WklueahOeMtOWtkO+8jOeUqOaIt+iEmuacrOaXoOazleS/neivgSBkb2N1bWVudC1zdGFydO+8jOaJgOS7peS5n+S4jeiDvemdoOaLpuaIqiBTVEsg5rOo5YaM5p2l5a6e546w6L+Z5Liq5Yqf6IO9CiAgICAvLyDmiJHku6zlupTor6XkuZ/msqHmnInlh6DkuKogR00zIOeahOeUqOaIt++8jOaJgOS7peS4jeaJk+eul+S4uiBHTTMg5YGa54m55q6K5aSE55CGCiAgICAvLyBNdXRhdGlvbiBFdmVudCDkuLrlvoXlup/lvIPlip/og73vvIzlpoLmnpzmn5DlpKnmtY/op4jlmajlgZzmraLmlK/mjIHov5nkuKrlip/og73vvIzov5nph4zlj6rog73liKDmjokKICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBsZXQgc3VwcG9ydGVkID0gZmFsc2U7CiAgICBwbGFjZWhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCAoKSA9PiB7IHN1cHBvcnRlZCA9IHRydWU7IH0pOwogICAgcGxhY2Vob2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpKTsKICAgIHJldHVybiBzdXBwb3J0ZWQ7CiAgfSgpKSB7CiAgICBjbGVhbi5DbGVhblJ1bGUoJ2hvdF9zZWFyY2gnLCAoKSA9PiBpMThuLmNsZWFuTmF2SG90U2VhcmNoLCAxLCB7CiAgICAgIGFpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsIGV2ZW50ID0+IHsKICAgICAgICAgIGNvbnN0IHNjcmlwdCA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgIGlmIChzY3JpcHQ/LnRhZ05hbWU/LnRvTG93ZXJDYXNlKCkgIT09ICdzY3JpcHQnKSByZXR1cm47CiAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gL15odHRwcz86XC9cL3Mud2VpYm8uY29tXC9hamF4XC9qc29ucFwvZ2V0dG9wc3VnXD8oPzouKiYpP19jYj0oU1RLX1xkKykvOwogICAgICAgICAgY29uc3QgbWF0Y2ggPSBzY3JpcHQuc3JjLm1hdGNoKHBhdHRlcm4pOwogICAgICAgICAgaWYgKCFtYXRjaCB8fCAhbWF0Y2hbMV0pIHJldHVybjsKICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gbWF0Y2hbMV07CiAgICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAoY2FsbGJhY2spIHsgZGVsZXRlIHdpbmRvd1tjYWxsYmFja107IH0sIGNhbGxiYWNrKTsKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBpZiAoc2NyaXB0LnBhcmVudE5vZGUpIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9KTsKICB9CiAgY2xlYW4uQ2xlYW5SdWxlKCdhcmlhJywgKCkgPT4gaTE4bi5jbGVhbk5hdkFyaWEsIDk4LCAnW3lhd2YtY29tcG9uZW50LXRhZ349ImFyaWEiXSwgLmduX3NldF9hcmlhIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ25vdGljZV9uZXcnLCAoKSA9PiBpMThuLmNsZWFuTmF2Tm90aWNlTmV3LCAxLCAnLldCX2dsb2JhbF9uYXYgLmduX3NldF9saXN0IC5XX25ld19jb3VudCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnbmV3JywgKCkgPT4gaTE4bi5jbGVhbk5hdk5ldywgMSwgJy5XQl9nbG9iYWxfbmF2IC5XX25ldyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgYWluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNykgcmV0dXJuOwogICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSkgewogICAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdjdHJscycsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICAgICAgY29uc3QgeyB2Tm9kZSB9ID0gTm9kZXM7CiAgICAgICAgICBjb25zdCBiYWRnZXMgPSBBcnJheS5mcm9tKG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvckFsbCgneC13b28tYmFkZ2UnKSk7CiAgICAgICAgICBiYWRnZXMuZm9yRWFjaChidWRnZSA9PiB7CiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odk5vZGUoYnVkZ2UpLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhLCB7IGRvdDogZmFsc2UsIHZhbHVlOiAwIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXkpOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9jbGVhbi9sZWZ0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY2xlYW5MZWZ0R3JvdXBUaXRsZTogeyBjbjogJ+makOiXj+aooeWdlyAtIOW3puagjycsIHR3OiAn6Zqx6JeP5qih57WEIC0g5bem5qyEJywgZW46ICdIaWRlIG1vZHVsZXMgLSBMZWZ0IENvbHVtbicgfSwKICAgIGNsZWFuTGVmdEhvbWU6IHsgY246ICflhajpg6jlhbPms6jvvIjpppbpobXvvIknLCB0dzogJ+mmlumggScsIGVuOiAnSG9tZScgfSwKICAgIGNsZWFuTGVmdEZhdjogeyBjbjogJ+aIkeeahOaUtuiXjycsIHR3OiAn5oiR55qE5pS26JePJywgZW46ICdGYXZvcml0ZScgfSwKICAgIGNsZWFuTGVmdExpa2U6IHsgY246ICfmiJHnmoTotZ4nLCB0dzogJ+aIkeeahOiumicsIGVuOiAnTGlrZScgfSwKICAgIGNsZWFuTGVmdEhvdDogeyBjbjogJ+eDremXqOW+ruWNmicsIHR3OiAn54ax6ZaA5b6u5Y2aJywgZW46ICdIb3QgRmVlZHMnIH0sCiAgICBjbGVhbkxlZnRUVjogeyBjbjogJ+eDremXqOinhumikScsIHR3OiAn54ax6ZaA6KaW6aC7JywgZW46ICdIb3QgVmlkZW8nIH0sCiAgICBjbGVhbkxlZnROZXdGZWVkOiB7IGNuOiAn5pyA5paw5b6u5Y2aJywgdHc6ICfmnIDmlrDlvq7ljZonLCBlbjogJ+acgOaWsOW+ruWNmiAoTmV3ZXN0IEZlZWRzKScgfSwKICAgIGNsZWFuTGVmdEZyaWVuZHM6IHsgY246ICflpb3lj4vlnIgnLCB0dzogJ+WlveWPi+WciCcsIGVuOiAnRnJpZW5kcycgfSwKICAgIGNsZWFuTGVmdEdyb3VwVG9NZTogeyBjbjogJ+e+pOW+ruWNmicsIHR3OiAn576k5b6u5Y2aJywgZW46ICfnvqTlvq7ljZogKEdyb3VwKScgfSwKICAgIGNsZWFuTGVmdFNwZWNpYWw6IHsgY246ICfnibnliKvlhbPms6gnLCB0dzogJ+eJueWIq+mXnOazqCcsIGVuOiAnU3BlY2lhbCBGb2N1cycgfSwKICAgIGNsZWFuTGVmdFdoaXNwZXI6IHsgY246ICfmgoTmgoTlhbPms6gnLCB0dzogJ+aChOaChOmXnOazqCcsIGVuOiAnU2VjcmV0IEZvbGxvd2luZycgfSwKICAgIGNsZWFuTGVmdFZQbHVzOiB7IGNuOiAn5LuY6LS56K6i6ZiF77yIVivvvIknLCB0dzogJ+S7mOiyu+iogumWse+8iFYr77yJJywgZW46ICdQYWlkIFN1YnNjcmliZSAoVispJyB9LAogICAgY2xlYW5MZWZ0TmV3OiB7IGNuOiAn5paw5b6u5Y2a5o+Q56S657qi54K5JywgdHc6ICfmlrDlvq7ljZrmj5DnpLrntIXpu54nLCBlbjogJ1JlZCBkb3QgZm9yIG5ldyBGZWVkcycgfSwKICAgIGNsZWFuTGVmdE5ld3M6IHsgY246ICfmlrDmtojmga/orqHmlbAnLCB0dzogJ+aWsOa2iOaBr+ioiOaVuCcsIGVuOiAnQ291bnRzIGZvciBOZXdzJyB9LAogICAgY2xlYW5MZWZ0Q291bnQ6IHsgY246ICfmlrDliIbnu4Tlvq7ljZrorqHmlbAnLCB0dzogJ+aWsOWIhue1hOW+ruWNmuioiOaVuCcsIGVuOiAnQ291bnRzIG9mIEZlZWRzIGJ5IEdyb3VwJyB9LAogIH0pOwoKICBjb25zdCBsZWZ0SGlkZSA9IChmdW5jdGlvbiAoKSB7CiAgICBjb25zdCBpZHMgPSBbXTsKICAgIC8vIOenu+mZpOS4gOS4quW3puagj+mTvuaOpeaIluebuOWFs+WFg+e0oAogICAgY29uc3QgcmVtb3ZlTm9kZSA9IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkgewogICAgICBjb25zdCBjb250YWluZXIgPSBub2RlLnBhcmVudE5vZGU7CiAgICAgIGxldCBwcmV2LCBuZXh0OwogICAgICBjb25zdCByZW1vdmVCbGFuayA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgJiYgbm9kZS5kYXRhLm1hdGNoKC9eXHMqJC8pKSB7CiAgICAgICAgICByZXR1cm4gY29udGFpbmVyLnJlbW92ZUNoaWxkKG5vZGUpOwogICAgICAgIH0KICAgICAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSBOb2RlLkNPTU1FTlRfTk9ERSkgewogICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH07CiAgICAgIGNvbnN0IHJlbW92ZUJsYW5rU2libGluZyA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgd2hpbGUgKHJlbW92ZUJsYW5rKG5vZGUucHJldmlvdXNTaWJsaW5nKSk7CiAgICAgICAgd2hpbGUgKHJlbW92ZUJsYW5rKG5vZGUubmV4dFNpYmxpbmcpKTsKICAgICAgfTsKICAgICAgcmVtb3ZlQmxhbmtTaWJsaW5nKG5vZGUpOwogICAgICBwcmV2ID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7IG5leHQgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAvLyDlpoLmnpzliY3lkI7pg73mmK/liIblibLnur/vvIjov57nu63nmoTliIblibLnur/vvInpgqPkuYjlupTlvZPliKDmjonkuIDkuKrvvIjliKDmjonliY3pnaLkuIDkuKrvvIkKICAgICAgLy8g5aaC5p6c5YiG5Ymy57q/5Zyo5byA5aS05oiW5pyr5bC+77yM6YKj5LmI5bqU6K+l5Yig5o6J5YiG5Ymy57q/CiAgICAgIC8vIOWmguaenOWJjeWQjumDveayoeacieS4nOilv++8jOmCo+S5iOW6lOivpei/nuWQjOWuueWZqOS4gOi1t+WIoOmZpAogICAgICB3aGlsZSAoKCFwcmV2IHx8IHByZXYubWF0Y2hlcygnLmxldl9saW5lJykpICYmCiAgICAgICAgKCFuZXh0IHx8IG5leHQubWF0Y2hlcygnLmxldl9saW5lJykpKSB7CiAgICAgICAgbGV0IGxpbmUgPSBudWxsOwogICAgICAgIGlmIChwcmV2Py5tYXRjaGVzKCcubGV2X2xpbmUnKSkgbGluZSA9IHByZXY7CiAgICAgICAgaWYgKG5leHQ/Lm1hdGNoZXMoJy5sZXZfbGluZScpKSBsaW5lID0gbmV4dDsKICAgICAgICBpZiAobGluZSkgewogICAgICAgICAgbGluZSA9IHByZXYgfHwgbmV4dDsKICAgICAgICAgIHJlbW92ZUJsYW5rU2libGluZyhsaW5lKTsKICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChsaW5lKTsKICAgICAgICAgIHByZXYgPSBub2RlLnByZXZpb3VzU2libGluZzsKICAgICAgICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAgIH0gZWxzZSBicmVhazsKICAgICAgfQogICAgICBpZiAobm9kZS5wYXJlbnROb2RlKSBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAgIGlmICghcHJldiAmJiAhbmV4dCkgcmVtb3ZlTm9kZShjb250YWluZXIpOwogICAgfTsKICAgIC8vIOajgOafpeaYr+WQpuacieacquetm+mAieeahOW3puagj+mTvuaOpeW5tuagueaNruWQjeensOWIpOaWrQogICAgY29uc3QgbGlzdGVuZXIgPSBmdW5jdGlvbiBsZWZ0TmF2UmVtb3ZlKCkgewogICAgICBjb25zdCBsZXZzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjdjZfcGxfbGVmdG5hdl9ncm91cCAubGV2W3lhd2YtaWRdOm5vdChbeWF3Zi1jaGVja2VkLWxldl0pJykpOwogICAgICBsZXZzLmZvckVhY2goZnVuY3Rpb24gKGxldikgewogICAgICAgIGNvbnN0IGlkID0gbGV2LmdldEF0dHJpYnV0ZSgneWF3Zi1pZCcpOwogICAgICAgIGlmIChpZHMuaW5jbHVkZXMoaWQpKSByZW1vdmVOb2RlKGxldik7CiAgICAgICAgZWxzZSBsZXYuc2V0QXR0cmlidXRlKCd5YXdmLWNoZWNrZWQtbGV2JywgJycpOwogICAgICB9KTsKICAgIH07CiAgICBjc3MuYXBwZW5kKCcjdjZfcGxfbGVmdG5hdl9ncm91cCAubGV2Om5vdChbeWF3Zi1jaGVja2VkLWxldl0pIHsgdmlzaWJpbGl0eTogaGlkZGVuOyB9Jyk7CiAgICBpbml0Lm9uTG9hZChmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDYpIHJldHVybjsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChsaXN0ZW5lcik7CiAgICAgIGxpc3RlbmVyKCk7CiAgICB9LCB7IHByaW9yaXR5OiBwcmlvcml0eS5MQVNUIH0pOwogICAgcmV0dXJuIGZ1bmN0aW9uIChpZCkgewogICAgICByZXR1cm4gKCkgPT4geyBpZHMucHVzaCgnbGVmdG5hdl8nICsgaWQpOyB9OwogICAgfTsKICB9KCkpOwoKICBjbGVhbi5DbGVhbkdyb3VwKCdsZWZ0JywgKCkgPT4gaTE4bi5jbGVhbkxlZnRHcm91cFRpdGxlKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2xldmVsJywgKCkgPT4gaTE4bi5jbGVhbkljb25zTGV2ZWwsIDEsICcuaWNvbl9iZWRbbm9kZS10eXBlPSJsZXZlbCJdLCAuV19sZXZlbF9pY28sIC5XX2ljb25fbGV2ZWwgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2hvbWUnLCAoKSA9PiBpMThuLmNsZWFuTGVmdEhvbWUsIDEsIGxlZnRIaWRlKCdob21lJykpOwogIGNsZWFuLkNsZWFuUnVsZSgnZmF2JywgKCkgPT4gaTE4bi5jbGVhbkxlZnRGYXYsIDEsIGxlZnRIaWRlKCdmYXYnKSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdsaWtlJywgKCkgPT4gaTE4bi5jbGVhbkxlZnRMaWtlLCAxLCBsZWZ0SGlkZSgnbGlrZScpKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2hvdCcsICgpID0+IGkxOG4uY2xlYW5MZWZ0SG90LCAxLCBsZWZ0SGlkZSgnaG90JykpOwogIGNsZWFuLkNsZWFuUnVsZSgndHYnLCAoKSA9PiBpMThuLmNsZWFuTGVmdFRWLCAxLCBsZWZ0SGlkZSgndHYnKSk7CiAgY29uc3QgbmV3X2ZlZWQgPSBjbGVhbi5DbGVhblJ1bGUoJ25ld19mZWVkJywgKCkgPT4gaTE4bi5jbGVhbkxlZnROZXdGZWVkLCAyMSwgbGVmdEhpZGUoJ25ldycpLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNvbnN0IGZyaWVuZHMgPSBjbGVhbi5DbGVhblJ1bGUoJ2ZyaWVuZHMnLCAoKSA9PiBpMThuLmNsZWFuTGVmdEZyaWVuZHMsIDEsIGxlZnRIaWRlKCdmcmllbmRzJyksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdncm91cF90b19tZScsICgpID0+IGkxOG4uY2xlYW5MZWZ0R3JvdXBUb01lLCAxLCBsZWZ0SGlkZSgnZ3JvdXBzZmVlZCcpKTsKICBjb25zdCBzcGVjaWFsID0gY2xlYW4uQ2xlYW5SdWxlKCdzcGVjaWFsJywgKCkgPT4gaTE4bi5jbGVhbkxlZnRTcGVjaWFsLCAxLCBsZWZ0SGlkZSgnc3BlY2lhbCcpLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnd2hpc3BlcicsICgpID0+IGkxOG4uY2xlYW5MZWZ0V2hpc3BlciwgMSwgbGVmdEhpZGUoJ3doaXNwZXInKSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd2X3BsdXMnLCAoKSA9PiBpMThuLmNsZWFuTGVmdFZQbHVzLCAxLCBsZWZ0SGlkZSgndnBsdXMnKSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCduZXcnLCAoKSA9PiBpMThuLmNsZWFuTGVmdE5ldywgMSwgJy5XQl9sZWZ0X25hdiAubGV2IC5XX25ldywgLnlhd2YtV0JfbGVmdF9uYXYgLmxldiAuV19uZXcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ25ld3MnLCAoKSA9PiBpMThuLmNsZWFuTGVmdE5ld3MsIDEsICcuV0JfbGVmdF9uYXYgLmxldmVsXzFfQm94IC5XX25ld19jb3VudCwgLnlhd2YtV0JfbGVmdF9uYXYgLmxldmVsXzFfQm94IC5XX25ld19jb3VudCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnY291bnQnLCAoKSA9PiBpMThuLmNsZWFuTGVmdENvdW50LCAxLCAnLldCX2xlZnRfbmF2IC5wbF9sZWZ0bmF2X2dyb3VwIC5XX25ld19jb3VudCwgLldCX2xlZnRfbmF2IC5sZXYgLldfbmV3X2NvdW50LCAueWF3Zi1XQl9sZWZ0X25hdiAucGxfbGVmdG5hdl9ncm91cCAuV19uZXdfY291bnQsIC55YXdmLVdCX2xlZnRfbmF2IC5sZXYgLldfbmV3X2NvdW50IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CgogIGNsZWFuLnRhZ0VsZW1lbnRzKCdMZWZ0JywgWwogICAgJyN2Nl9wbF9sZWZ0bmF2X2dyb3VwIC5sZXY6bm90KFt5YXdmLWlkXSknLAogIF0uam9pbignLCcpLCB7CiAgICAnYVtocmVmKj0ia3Jjb20uY24iXSc6ICdsZWZ0bmF2X3R2JywKICAgICdhW2hyZWYqPSJpc19uZXc9MSJdJzogJ2xlZnRuYXZfbmV3JywKICAgICdhW2hyZWYqPSIvaG9tZT8iXSc6ICdsZWZ0bmF2X2hvbWUnLAogICAgJ2FbaHJlZl49Ii9hdC8iXSc6ICdsZWZ0bmF2X21lc3NhZ2UnLAogICAgJ2FbaHJlZl49Ii9mYXYiXSc6ICdsZWZ0bmF2X2ZhdicsCiAgICAnYVtocmVmXj0iL2xpa2UiXSc6ICdsZWZ0bmF2X2xpa2UnLAogICAgJ2FbaHJlZl49Ii9mcmllbmRzIl0nOiAnbGVmdG5hdl9mcmllbmRzJywKICAgICdhW2hyZWZePSIvZ3JvdXBzZmVlZCJdJzogJ2xlZnRuYXZfZ3JvdXBzZmVlZCcsCiAgICAnYVtocmVmKj0iLy9kLndlaWJvLmNvbSJdJzogJ2xlZnRuYXZfaG90JywKICAgICdhW2hyZWYqPSIvL3dlaWJvLmNvbS90diJdJzogJ2xlZnRuYXZfdHYnLAogICAgJ2FbaHJlZl49Ii9teWdyb3VwcyJdW2hyZWYqPSJpc3NwZWNpYWxncm91cD0xIl0nOiAnbGVmdG5hdl9zcGVjaWFsJywKICAgICdhW2hyZWZePSIvbXlncm91cHMiXVtocmVmKj0id2hpc3Blcj0xIl0nOiAnbGVmdG5hdl93aGlzcGVyJywKICAgICdhW2hyZWZePSIvbXlncm91cHMiXVtocmVmKj0idnBsdXM9MSJdJzogJ2xlZnRuYXZfdnBsdXMnLAogICAgJ2FbaHJlZl49Ii9teWdyb3VwcyJdJzogJ2xlZnRuYXZfbXlncm91cHMnLAogIH0pOwoKICBjbGVhbi5DbGVhblJ1bGVHcm91cCh7CiAgICBuZXdfZmVlZCwKICAgIHNwZWNpYWwsCiAgICBmcmllbmRzLAogIH0sIGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OICE9PSA3KSByZXR1cm47CgogICAgaWYgKHlhd2YucnVsZXMuZmlsdGVyLmhvbWVwYWdlLm5ld2VzdEZlZWRzLmdldENvbmZpZygpKSB7CiAgICAgIG9wdGlvbnMubmV3X2ZlZWQgPSBmYWxzZTsKICAgIH0KCiAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwgb3B0aW9ucykgewogICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICBjb25zdCBpY29ucyA9IHsKICAgICAgICBuYXZOZXc6ICduZXdfZmVlZCcsCiAgICAgICAgbmF2U3BlY2lhbDogJ3NwZWNpYWwnLAogICAgICAgIG5hdk11dHVhbDogJ2ZyaWVuZHMnLAogICAgICB9OwogICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2hvbWUnLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICB2bS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5sZWZ0VGFiczsgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodm0ubGVmdFRhYnMpKSB7CiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gdm0ubGVmdFRhYnMuZmlsdGVyKHRhYiA9PiAhb3B0aW9uc1tpY29uc1t0YWIuaWNvbl1dKTsKICAgICAgICAgICAgaWYgKHZtLmxlZnRUYWJzLmxlbmd0aCAhPT0gZmlsdGVyZWQubGVuZ3RoKSB2bS5sZWZ0VGFicyA9IGZpbHRlcmVkOwogICAgICAgICAgfQogICAgICAgIH0sIHsgaW1tZWRpYXRlOiB0cnVlIH0pOwogICAgICB9KTsKCiAgICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBvcHRpb25zKTsKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9jbGVhbi9taWRkbGUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuTWlkZGxlR3JvdXBUaXRsZTogeyBjbjogJ+makOiXj+aooeWdlyAtIOS4reagjycsIHR3OiAn6Zqx6JeP5qih57WEIC0g5Lit5qyEJywgZW46ICdIaWRlIG1vZHVsZXMgLSBNaWRkbGUgQ29sdW1uJyB9LAogICAgY2xlYW5NaWRkbGVSZWNvbW1lbmRlZFRvcGljOiB7IGNuOiAn54Ot6Zeo5b6u5Y2a77yI5Y+R5biD5qGG5LiK5pa577yJJywgaGs6ICfng63pl6jlvq7ljZrvvIjnmbzluIPmoYbkuIrmlrnvvIknLCB0dzogJ+eGsemWgOW+ruWNmu+8iOeZvOW4g+ahhuS4iuaWue+8iScsIGVuOiAnSG90IGZlZWRzLCBvbiB0b3Agb2YgcHVibGlzaGVyJyB9LAogICAgY2xlYW5NaWRkbGVGZWVkUmVjb21tZW5kOiB7IGNuOiAn5b6u5Y2a5YW06Laj5o6o6I2Q77yI6aG26YOo77yJJywgdHc6ICflvq7ljZroiIjotqPmjqjolqbvvIjpoILpg6jvvIknLCBlbjogJ0ZlZWQgUmVjb21tZW5kYXRpb24sIHRvcCcgfSwKICAgIGNsZWFuTWlkZGxlTWVtYmVyVGlwOiB7IGNuOiAn5byA6YCa5Lya5ZGY5o+Q56S677yI5bqV6YOo77yJJywgdHc6ICfplovpgJrmnIPlk6Hmj5DnpLrvvIjlupXpg6jvvIknLCBlbjogJ1RpcCBvZiBKb2luaW5nIFdlaWJvIFZJUCwgYm90dG9tJyB9LAogIH0pOwoKICBjbGVhbi5DbGVhbkdyb3VwKCdtaWRkbGUnLCAoKSA9PiBpMThuLmNsZWFuTWlkZGxlR3JvdXBUaXRsZSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWNvbW1lbmRlZF90b3BpYycsICgpID0+IGkxOG4uY2xlYW5NaWRkbGVSZWNvbW1lbmRlZFRvcGljLCAxLCAnI3Y2X3BsX2NvbnRlbnRfcHVibGlzaGVydG9wIGRpdltub2RlLXR5cGU9InJlY29tbWVuZFRvcGljIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2ZlZWRfcmVjb21tZW5kJywgKCkgPT4gaTE4bi5jbGVhbk1pZGRsZUZlZWRSZWNvbW1lbmQsIDEsICdhLm5vdGVzW25vZGUtdHlwZT0iZmVlZF9saXN0X25ld0JhciJdW2hyZWZePSJodHRwIl06bm90KFthY3Rpb24tdHlwZT0iZmVlZF9saXN0X25ld0JhciJdKSwgLldCX2ZlZWRfbmV3dXNlcltub2RlLXR5cGU9InJlY29tbWZlZWQiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnbWVtYmVyX3RpcCcsICgpID0+IGkxOG4uY2xlYW5NaWRkbGVNZW1iZXJUaXAsIDEsICdbbm9kZS10eXBlPSJmZWVkX2xpc3Rfc2hpZWxkS2V5d29yZCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvY2xlYW4vcmlnaHQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuUmlnaHRHcm91cFRpdGxlOiB7IGNuOiAn6ZqQ6JeP5qih5Z2XIC0g5Y+z5qCPJywgdHc6ICfpmrHol4/mqKHntYQgLSDlj7PmrIQnLCBlbjogJ0hpZGUgbW9kdWxlcyAtIFJpZ2h0IENvbHVtbicgfSwKICAgIGNsZWFuUmlnaHRJbmZvOiB7IGNuOiAn5Liq5Lq65L+h5oGvJywgdHc6ICfkuKrkurrkv6Hmga8nLCBlbjogJ1BlcnNvbmFsIEluZm8nIH0sCiAgICBjbGVhblJpZ2h0VjdFbnRyeTogeyBjbjogJ+WIh+aNouWIsOaWsOeJiCcgfSwKICAgIGNsZWFuUmlnaHRSYW5rczogeyBjbjogJ+amnOWNle+8iOaWsOatjOamnOetie+8iScsIHR3OiAn5qac5Zau77yI5paw5q2M5qac562J77yJJywgZW46ICdSYW5rIExpc3QgKFNvbmcgbGlzdCwgZXRjLiknIH0sCiAgICBjbGVhblJpZ2h0SG90VG9waWM6IHsgY246ICfng63pl6jor53popggLyDlvq7ljZrng63mkJwnLCB0dzogJ+eGsemWgOipsemhjCcsIGVuOiAnSG90IFRvcGljJyB9LAogICAgY2xlYW5SaWdodEhvdFRvcGljVG9wOiB7IGNuOiAn572u6aG254Ot6Zeo6K+d6aKYIChWNyknIH0sCiAgICBjbGVhblJpZ2h0SW50ZXJlc3Q6IHsgY246ICflj6/og73mhJ/lhbTotqPnmoTkuronLCB0dzogJ+WPr+iDveaEn+iIiOi2o+eahOS6uicsIGVuOiAnWW91IG1heSBrbm93JyB9LAogICAgY2xlYW5SaWdodE1lbWJlcjogeyBjbjogJ+S8muWRmOS4k+WMuicsIHR3OiAn5pyD5ZOh5bCI5Y2AJywgZW46ICdXZWlibyBWSVAnIH0sCiAgICBjbGVhblJpZ2h0R3JvdXBzOiB7IGNuOiAn5YiG57uE5oiQ5ZGY5YiX6KGoJywgdHc6ICfliIbntYTmiJDlk6HliJfooagnLCBlbjogJ01lbWJlcnMgb2YgZ3JvdXAnIH0sCiAgICBjbGVhblJpZ2h0UmVjb21Hcm91cFVzZXI6IHsgY246ICflu7rorq7liqDlhaXor6XliIbnu4QnLCB0dzogJ+W7uuitsOWKoOWFpeipsuWIhue1hCcsIGVuOiAnU3VnZ2VzdCB0byBhZGQgdG8gdGhpcyBncm91cCcgfSwKICAgIGNsZWFuUmlnaHRIb25nYmFvUmFuazogeyBjbjogJ+iuqee6ouWMhemjnicsIHR3OiAn6K6T57SF5YyF6aObJywgZW46ICforqnnuqLljIXpo54gKFJlZCBFbnZlbG9wZSknIH0sCiAgICBjbGVhblJpZ2h0QXR0RmVlZDogeyBjbjogJ+WlveWPi+WFs+azqOWKqOaAgSB7e2l9fScsIHR3OiAn5aW95Y+L6Zec5rOo5YuV5oWLIHt7aX19JywgZW46ICJGcmllbmRzJyBBdHRlbnRpb24ge3tpfX0iIH0sCiAgICBjbGVhblJpZ2h0QXR0RmVlZERldGFpbDogewogICAgICBjbjogJ+W8gOWQr+ivpemakOiXj+mAiemhueWPquiDveiuqeaCqOiHquW3seS4jeWGjeeci+WIsOKAnOWlveWPi+WFs+azqOWKqOaAgeKAneaooeWdl++8jOW5tuS4jeiDvemYu+atouaCqOWHuueOsOWcqOWIq+S6uueahOKAnOWlveWPi+WFs+azqOWKqOaAgeKAneS4reOAgicsCiAgICB9LAogICAgY2xlYW5SaWdodE5vdGljZTogeyBjbjogJ+WFrOWRiuagjycsIHR3OiAn5YWs5ZGK5qyEJywgZW46ICdCdWxsZXRpbiBCb2FyZCcgfSwKICB9KTsKCiAgY2xlYW4uQ2xlYW5Hcm91cCgncmlnaHQnLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRHcm91cFRpdGxlKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2luZm8nLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRJbmZvLCAxLCAnW3lhd2YtaWQ9InY2X3BsX3JpZ2h0bW9kX215aW5mb19teWluZm8iXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgndjdfZW50cnknLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRWN0VudHJ5LCA5MSwgJ1t5YXdmLWlkPSJ2Nl9wbF9yaWdodG1vZF9teWluZm9fbmV3X3BjX2FwcGx5Il0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3JhbmtzJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0UmFua3MsIDEsICcjdjZfcGxfcmlnaHRtb2RfcmFuaywgW3lhd2YtaWQ9InJpZ2h0bW9kX3Rhb2Jhb19tb3ZpZSJdLCBbeWF3Zi1pZD0icmlnaHRtb2RfcmVjb21fbW92aWUiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNvbnN0IGhvdFNlYXJjaFRvcCA9IGNsZWFuLkNsZWFuUnVsZSgnaG90X3RvcGljX3RvcCcsICgpID0+IGkxOG4uY2xlYW5SaWdodEhvdFRvcGljVG9wLCA5MSwgJycsIHsgd2VpYm9WZXJzaW9uOiA3IH0pOwogIGNvbnN0IGhvdFNlYXJjaCA9IGNsZWFuLkNsZWFuUnVsZSgnaG90X3RvcGljJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0SG90VG9waWMsIDEsICdbeWF3Zi1pZD0icmlnaHRtb2RfenRfaG90dG9waWMiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY29uc3QgaW50ZXJlc3RlZCA9IGNsZWFuLkNsZWFuUnVsZSgnaW50ZXJlc3QnLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRJbnRlcmVzdCwgMSwgJ1t5YXdmLWlkPSJyaWdodG1vZF9yZWNvbV9pbnRlcmVzdCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ21lbWJlcicsICgpID0+IGkxOG4uY2xlYW5SaWdodE1lbWJlciwgMSwgJyN2Nl90cnVzdFBhZ2VsZXRfcmVjb21fbWVtYmVyIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdncm91cHMnLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRHcm91cHMsIDEsICcjdjZfcGxfcmlnaHRtb2RfZ3JvdXBzIHsgZGlzcGxheTogbm9uZTsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgncmVjb21fZ3JvdXBfdXNlcicsICgpID0+IGkxOG4uY2xlYW5SaWdodFJlY29tR3JvdXBVc2VyLCAxLCAnI3Y2X3BsX3JpZ2h0bW9kX3JlY29tZ3JvdXB1c2VyIHsgZGlzcGxheTogbm9uZTsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnaG9uZ2Jhb19yYW5rJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0SG9uZ2Jhb1JhbmssIDEsICcjdjZfcGxfcmlnaHRtb2RfaG9uZ2JhbyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnYXR0X2ZlZWQnLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRBdHRGZWVkLCAxLCB7CiAgICBhY3NzOiAnI3Y2X3BsX3JpZ2h0bW9kX2F0dGZlZWQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5SaWdodEF0dEZlZWREZXRhaWwgfSB9LAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnbm90aWNlJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0Tm90aWNlLCAxLCAnI3Y2X3BsX3JpZ2h0bW9kX25vdGljZWJvYXJkIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CgogIGNsZWFuLnRhZ0VsZW1lbnRzKCdSaWdodCcsIFsKICAgICcjdHJ1c3RQYWdlbGV0X2luZGV4cmlnaHRfcmVjb20gLldCX3JpZ2h0X21vZHVsZTpub3QoW3lhd2YtaWRdKScsCiAgICAnI3Y2X3BsX3JpZ2h0bW9kX3JlY29taW5mbyAuV0JfY2FyZHdyYXA6bm90KFt5YXdmLWlkXSknLAogICAgJyN2Nl9wbF9yaWdodG1vZF9yYW5rIC5XQl9jYXJkd3JhcDpub3QoW3lhd2YtaWRdKScsCiAgICAnI3Y2X3BsX3JpZ2h0bW9kX215aW5mbyAuV0JfY2FyZHdyYXA6bm90KFt5YXdmLWlkXSknLAogIF0uam9pbignLCcpLCB7CiAgICAnW2NoYW5nZS1kYXRhKj0ia2V5PWhvdHRvcGljX3IyIl0nOiAncmlnaHRtb2RfenRfaG90dG9waWMnLAogICAgJ1tjaGFuZ2UtZGF0YSo9ImtleT1pbnRlcmVzdF9yMiJdJzogJ3JpZ2h0bW9kX3JlY29tX2ludGVyZXN0JywKICAgICdoNC5vYmpfbmFtZSBhW2hyZWYqPSJtb3ZpZS53ZWliby5jb20iXSc6ICdyaWdodG1vZF9yZWNvbV9tb3ZpZScsCiAgICAnaDQub2JqX25hbWUgYVtocmVmKj0idGFvYmFvLmNvbSJdW2hyZWYqPSJkaWFueWluZyJdJzogJ3JpZ2h0bW9kX3Rhb2Jhb19tb3ZpZScsCiAgICAnaDIubWFpbl90aXRsZSBhW2hyZWYqPSJib29rLndlaWJvLmNvbS90b3AiXSc6ICd2Nl9wbF9yaWdodG1vZF9yYW5rX2Jvb2snLAogICAgJ2g0Lm9ial9uYW1lIGFbaHJlZio9InBvcC53ZWliby5jb20iXSc6ICd2Nl9wbF9yaWdodG1vZF9yYW5rX3BvcCcsCiAgICAnZGl2Lm9ial9uYW1lIGFbaHJlZio9IjEwMDgwOGZhZWNlYmZmOGE1NGI5N2E5MTY5OWM2NTRlNWY0Y2RhIl0nOiAndjZfcGxfcmlnaHRtb2RfcmFua19ob25nJywKICAgICcuV19wZXJzb25faW5mbyc6ICd2Nl9wbF9yaWdodG1vZF9teWluZm9fbXlpbmZvJywKICAgICdhW2FjdGlvbi10eXBlPSJuZXdfcGNfYXBwbHkiXSc6ICd2Nl9wbF9yaWdodG1vZF9teWluZm9fbmV3X3BjX2FwcGx5JywKICB9KTsKCiAgY2xlYW4uQ2xlYW5SdWxlR3JvdXAoewogICAgaG90U2VhcmNoVG9wOiBob3RTZWFyY2hUb3AsCiAgICBjYXJkSG90U2VhcmNoOiBob3RTZWFyY2gsCiAgICBjYXJkSW50ZXJlc3RlZDogaW50ZXJlc3RlZCwKICB9LCBmdW5jdGlvbiAob3B0aW9ucykgewogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNykgcmV0dXJuOwogICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXksIG9wdGlvbnMpIHsKICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdzaWRlJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuY2FyZHNEYXRhOyB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2bS5jYXJkc0RhdGEpKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdm0uY2FyZHNEYXRhLmxlbmd0aDspIHsKICAgICAgICAgICAgICBpZiAob3B0aW9uc1t2bS5jYXJkc0RhdGFbaV0uY2FyZF90eXBlXSkgewogICAgICAgICAgICAgICAgdm0uY2FyZHNEYXRhLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICB9IGVsc2UgaSsrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgeyBpbW1lZGlhdGU6IHRydWUgfSk7CiAgICAgIH0pOwoKICAgICAgaWYgKG9wdGlvbnMuaG90U2VhcmNoVG9wKSB7CiAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdjYXJkLWhvdC1zZWFyY2gnLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIHZtLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLlRvcFdvcmQ7IH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHZtLlRvcFdvcmQpIHZtLlRvcFdvcmQgPSBudWxsOwogICAgICAgICAgfSk7CiAgICAgICAgfSwgeyBpbW1lZGlhdGU6IHRydWUgfSk7CiAgICAgIH0KICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIG9wdGlvbnMpOwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL2ZlZWQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIGNvbnN0IGNsZWFuID0geWF3Zi5ydWxlcy5jbGVhbjsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBjbGVhbkZlZWRHcm91cFRpdGxlOiB7IGNuOiAn6ZqQ6JeP5qih5Z2XIC0g5b6u5Y2a5YaFJywgdHc6ICfpmrHol4/mqKHntYQgLSDlvq7ljZrlhacnLCBlbjogJ0hpZGUgbW9kdWxlcyAtIFdlaWJvJyB9LAogICAgY2xlYW5GZWVkUmVjb21tZW5kOiB7IGNuOiAn54Ot6Zeo5YaF5a655o6o6I2QJywgdHc6ICfnhrHploDlhaflrrnmjqjolqYnLCBlbjogJ+eDremXqOWGheWuueaOqOiNkCAoRmVlZCB5b3UgbWF5IGludGVyZXN0ZWQgaW4pJyB9LAogICAgY2xlYW5GZWVkT3V0ZXJUaXA6IHsgY246ICfmtojmga/mtYHmj5DnpLrmqKrluYUge3tpfX0nLCB0dzogJ+a2iOaBr+a1geaPkOekuuapq+W5hSB7e2l9fScsIGVuOiAnVGlwcyBmb3IgZmVlZCB7e2l9fScgfSwKICAgIGNsZWFuRmVlZE91dGVyVGlwRGV0YWlsOiB7CiAgICAgIGNuOiAn5raI5oGv5rWB5YaF6YOo55qE5o+Q56S65qiq5bmF77yM5aaC4oCcIOezu+e7n+aPkOekuu+8muagueaNruS9oOeahOWxj+iUveiuvue9ru+8jOezu+e7n+W3sui/h+a7pOaOiemDqOWIhuW+ruWNmuOAguKAneetieWGheWuueOAgicsCiAgICB9LAogICAgY2xlYW5GZWVkSW5uZXJUaXA6IHsgY246ICflvq7ljZrlhoXmj5DnpLrmqKrluYUge3tpfX0nLCB0dzogJ+W+ruWNmuWFp+aPkOekuuapq+W5hSB7e2l9fScsIGVuOiAnVGlwcyBmb3IgZmVlZCB7e2l9fScgfSwKICAgIGNsZWFuRmVlZElubmVyVGlwRGV0YWlsOiB7CiAgICAgIGNuOiAn5ZCE5p2h5b6u5Y2a5YaF55qE5o+Q56S65qiq5bmF44CCdjYg5L2N5LqO5p+Q5p2h5b6u5Y2a6aG26YOo77yMdjcg5L2N5LqO5L2c6ICF5LiO5q2j5paH5LmL6Ze044CCJywKICAgIH0sCiAgICBjbGVhbkZlZWRDb21tZW50VGlwOiB7IGNuOiAn6K+E6K665qGG5o+Q56S65qiq5bmFIHt7aX19JywgdHc6ICfoqZXoq5bmoYbmj5DnpLrmqavluYUge3tpfX0nLCBlbjogJ1RpcHMgZm9yIGNvbW1lbnQge3tpfX0nIH0sCiAgICBjbGVhbkZlZWRDb21tZW50VGlwRGV0YWlsOiB7CiAgICAgIGNuOiAn57uP5bi45Ye6546w5Zyo6K+E6K665qGG5LiK5pa555qE5qiq5bmF77yM6YCa5bi45YyF5ZCr5aaC4oCc5b6u5Y2a56S+5Yy6566h55CG5Lit5b+D5Li+5oql5aSE55CG5aSn5Y6F77yM5qyi6L+O5p+l6ZiF77yB4oCd562J5YaF5a6544CCJywKICAgIH0sCiAgICBjbGVhbkZlZWRHcm91cFRpcDogeyBjbjogJ+mhtumDqOWIhue7hOaIluWlveWPi+WciOaPkOmGkicsIHR3OiAn6aCC6YOo5YiG57WE5oiW5aW95Y+L5ZyI5o+Q6YaSJywgZW46ICdUaXBzIGZvciBGZWVkIGZvciBncm91cHMgb3IgZnJpZW5kcycgfSwKICAgIGNsZWFuRmVlZFZJUEJhY2tncm91bmQ6IHsgY246ICfoh6rlrprkuYnljaHniYfog4zmma8nLCB0dzogJ+iHquioguWNoeeJh+iDjOaZrycsIGVuOiAnQ3VzdG9taXplZCBDYXJkIEJhY2tncm91bmQnIH0sCiAgICBjbGVhbkZlZWRMYXN0UGljOiB7IGNuOiAn5Zu+54mH5YiX6KGo5bCB5bqVJywgdHc6ICflnJbniYfmuIXllq7lsIHlupUnLCBlbjogJ0JhY2sgY292ZXIgb2YgcGljdHVyZSBsaXN0JyB9LAogICAgY2xlYW5GZWVkUGljVGFnOiB7IGNuOiAn5Zu+54mH5qCH562+JywgdHc6ICflnJbniYfmqJnnsaQnLCBlbjogJ1RhZ3MgZm9yIHBpY3R1cmUnIH0sCiAgICBjbGVhbkZlZWRTb25UaXRsZTogeyBjbjogJ+WQjOa6kOi9rOWPkeWQiOW5tuaPkOekuicsIHR3OiAn5ZCM5rqQ6L2s5Y+R5ZCI5bm25o+Q56S6JywgZW46ICdNZXJnZWQgZm9yd2FyZHMnIH0sCiAgICBjbGVhbkZlZWRDYXJkOiB7IGNuOiAn5b6u5Y2a5Y2h54mHIHt7aX19JywgdHc6ICflvq7ljZrljaHniYcge3tpfX0nLCBlbjogJ0ZlZWQgQ2FyZHMge3tpfX0nIH0sCiAgICBjbGVhbkZlZWRDYXJkRGV0YWlsOiB7CiAgICAgIGNuOiAn5b6u5Y2a5YaF5a+55YiG5Lqr5YaF5a6555qE5pGY6KaB5o+P6L+w77yM5aaC6K+d6aKY5Y2h54mH44CB6ZW/5b6u5Y2a5Y2h54mH44CB5YiG5Lqr5YaF5a655Y2h54mH562J44CCJywKICAgIH0sCiAgICBjbGVhbkZlZWRBcnRpY2xlUGF5OiB7IGNuOiAn5b6u5Y2a5omT6LWPJywgdHc6ICflvq7ljZrmiZPotY8nLCBlbjogJ0ZlZWQgQWN0aWNsZSBQYXknIH0sCiAgICBjbGVhbkZlZWRUYWc6IHsgY246ICflvq7ljZrmoIfnrb4nLCB0dzogJ+W+ruWNmuaomeexpCcsIGVuOiAnVGFncyBmb3IgRmVlZCcgfSwKICAgIGNsZWFuRmVlZFJlbGF0ZWRMaW5rOiB7IGNuOiAn55u45YWz5b6u5Y2a6ZO+5o6lIHt7aX19JywgdHc6ICfnm7jpl5zlvq7ljZrpgKPntZAge3tpfX0nLCBlbjogJ1JlbGF0ZWQgZmVlZHMgTGluayB7e2l9fScgfSwKICAgIGNsZWFuRmVlZFJlbGF0ZWRMaW5rRGV0YWlsOiB7IGNuOiAn5L2N5LqO5b6u5Y2a5bqV6YOo55qE5qC55o2u5b6u5Y2a5q2j5paH5YaF5a6555qE5YWz6ZSu5a2X6Ieq5Yqo55Sf5oiQ55qE6K+d6aKY44CB55S15b2x562J55qE6ZO+5o6l44CCJyB9LAogICAgY2xlYW5GZWVkU291cmNlOiB7IGNuOiAn5p2l5rqQJywgdHc6ICfkvobmupAnLCBlbjogJ1NvdXJjZScgfSwKICAgIGNsZWFuRmVlZFNvdXJjZURldGFpbDogewogICAgICBjbjogJ+W7uuiuruaCqOS/neeVmea2iOaBr+adpea6kOS7peaWueS+v+aMieeFp+a2iOaBr+adpea6kOi/h+a7pOW+ruWNmuOAgumakOiXj+a2iOaBr+adpea6kOS4jeS8muW9seWTjeWvueW6lOi/h+a7pOinhOWImeeahOW3peS9nOOAgicsCiAgICB9LAogICAgY2xlYW5GZWVkUG9wOiB7IGNuOiAn6ZiF6K+75pWw5ZKM5o6o5bm/JywgdHc6ICfplrHoroDmlbjlkozmjqjlu6MnLCBlbjogJ1JlYWRpbmcgQ291bnQgJmFtcDsgUHJvbW90ZScgfSwKICAgIGNsZWFuRmVlZExpa2U6IHsgY246ICfotZ4gLSDlvq7ljZonLCB0dzogJ+iumiAtIOW+ruWNmicsIGVuOiAnTGlrZSAtIEZlZWQnIH0sCiAgICBjbGVhbkZlZWRMaWtlQ29tbWVudDogeyBjbjogJ+i1niAtIOivhOiuuicsIHR3OiAn6K6aIC0g6KmV6KuWJywgZW46ICdMaWtlIC0gQ29tbWVudCcgfSwKICAgIGNsZWFuRmVlZExpa2VBdHRpdHVkZTogeyBjbjogJ+i1niAtIOihqOaDhScsIHR3OiAn6K6aIC0g6KGo5oOFJywgZW46ICdMaWtlIC0gQXR0aXR1ZGUnIH0sCiAgICBjbGVhbkZlZWRGb3J3YXJkOiB7IGNuOiAn6L2s5Y+RJywgdHc6ICfovYnnmbwnLCBlbjogJ0ZvcndhcmQnIH0sCiAgICBjbGVhbkZlZWRGYXN0UmVwb3N0OiB7IGNuOiAn5b+r6L2sJyB9LAogICAgY2xlYW5GZWVkRmF2b3JpdGU6IHsgY246ICfmlLbol48nLCB0dzogJ+aUtuiXjycsIGVuOiAnRmF2b3JpdGUnIH0sCiAgICBjbGVhbkZlZWRQcm9tb3RlT3RoZXI6IHsgY246ICfluK7kuIrlpLTmnaEnLCB0dzogJ+W4ruS4iuWktOadoScsIGVuOiAn5biu5LiK5aS05p2hJyB9LAogICAgY2xlYW5GZWVkUmVwb3J0OiB7IGNuOiAn5Li+5oqlJywgaGs6ICfoiInloLEnLCB0dzogJ+iIieWgsS/mqqLoiIknLCBlbjogJ1JlcG9ydCcgfSwKICAgIGNsZWFuRmVlZFVzZUNhcmRCYWNrZ3JvdW5kOiB7IGNuOiAn5L2/55So5q2k5Y2h54mH6IOM5pmvJywgdHc6ICfkvb/nlKjmraTljaHniYfog4zmma8nLCBlbjogJ+S9v+eUqOatpOWNoeeJh+iDjOaZrycgfSwKICB9KTsKCiAgY2xlYW4uQ2xlYW5Hcm91cCgnZmVlZCcsICgpID0+IGkxOG4uY2xlYW5GZWVkR3JvdXBUaXRsZSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWNvbW1lbmQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFJlY29tbWVuZCwgOTcsIGAKW25vZGUtdHlwZT0icmVjb21tZmVlZCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CltpZF49IlBsX09mZmljaWFsX1dlaWJvRGV0YWlsX18iXSAuV0JfZmVlZF90eXBlIH4gLldCX2NhcmR3cmFwLApbaWRePSJQbF9PZmZpY2lhbF9XZWlib0RldGFpbF9fIl0gfiBbaWRePSJQbF9Db3JlX05ld01peEZlZWRfXyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Ci5CX3BhZ2UgLldCX2ZyYW1lIHsgbWluLWhlaWdodDogYXV0bzsgfQpgLCB7CiAgICBhaW5pdDogZnVuY3Rpb24gKCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OICE9PSA3KSByZXR1cm47CiAgICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5KSB7CiAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgncmVwb3N0LWNvbW1lbnQtcmVjb20nLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudFJlbmRlcih2bSwgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgICAgICAgIGNvbnN0IHsgcmVtb3ZlQ2hpbGQgfSA9IE5vZGVzOwogICAgICAgICAgICB3aGlsZSAobm9kZVN0cnVjdC5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGQobm9kZVN0cnVjdCwgbm9kZVN0cnVjdC5maXJzdENoaWxkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXkpOwogICAgfSwKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnZmVlZF9vdXRlcl90aXAnLCAoKSA9PiBpMThuLmNsZWFuRmVlZE91dGVyVGlwLCAxLCB7CiAgICBhY3NzOiAnLldCX2ZlZWQgPiAuV190aXBzIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywKICAgIHJlZjogeyBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5GZWVkT3V0ZXJUaXAgfSB9LAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnZmVlZF9pbm5lcl90aXAnLCAoKSA9PiBpMThuLmNsZWFuRmVlZElubmVyVGlwLCA5MSwgewogICAgYWNzczogJy5XQl9mZWVkX2RldGFpbCAuV190aXBzLCAueWF3Zi1mZWVkLWNvbnRlbnQgLnlhd2YtZmVlZC1jb250ZW50LXRpcCwgLnlhd2YtZmVlZC1jb250ZW50IC55YXdmLWZlZWQtY29udGVudC10aXAtbGluayB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsCiAgICByZWY6IHsgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNsZWFuRmVlZElubmVyVGlwRGV0YWlsIH0gfSwKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnZmVlZF90aXAnLCAoKSA9PiBpMThuLmNsZWFuRmVlZENvbW1lbnRUaXAsIDEsIHsKICAgIGFjc3M6ICdbbm9kZS10eXBlPSJmZWVkX3ByaXZhdGVzZXRfdGlwIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jbGVhbkZlZWRDb21tZW50VGlwRGV0YWlsIH0gfSwKICB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ2dyb3VwX3RpcCcsICgpID0+IGkxOG4uY2xlYW5GZWVkR3JvdXBUaXAsIDEsICcuV0JfZmVlZF90eXBlIC5XQl9jYXJkdGl0bGVfYiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgndmlwX2JhY2tncm91bmQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFZJUEJhY2tncm91bmQsIDEsIGAKLldCX2ZlZWRfZGV0YWlsW3N0eWxlKj0iZmVlZF9jb3Zlci9zdGFyXyJdLAouV0JfZmVlZF9kZXRhaWxbc3R5bGUqPSJmZWVkX2NvdmVyL3ZpcF8iXSB7IGJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsgfQouV0JfdmlwY292ZXIsIC5XQl9zdGFyY292ZXIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWRfdmlwY292ZXIgLldCX2ZlZWRfZGV0YWlsIHsgcGFkZGluZy10b3A6IDEwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF92aXBjb3ZlciAuV0JfZmVlZF9kZXRhaWwgeyBwYWRkaW5nLXRvcDogMjBweDsgfQpgKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2xhc3RfcGljJywgKCkgPT4gaTE4bi5jbGVhbkZlZWRMYXN0UGljLCAxLCBmdW5jdGlvbiAoKSB7CiAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGhpZGVMYXN0UGljKCkgewogICAgICBjb25zdCBsYXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfdHlwZSAuV0JfZXhwYW5kX21lZGlhIC5XQl9tZWRpYV92aWV3Om5vdChbeWF3Zi1waWNsYXN0XSkgLnBpY19jaG9vc2VfYm94IGxpOmxhc3QtY2hpbGQgYS5jdXJyZW50Jyk7CiAgICAgIGlmIChsYXN0KSBsYXN0LmNsb3Nlc3QoJy5XQl9tZWRpYV92aWV3Jykuc2V0QXR0cmlidXRlKCd5YXdmLXBpY2xhc3QnLCAneWF3Zi1waWNsYXN0Jyk7CiAgICAgIGNvbnN0IG5vdExhc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZF90eXBlIC5XQl9leHBhbmRfbWVkaWEgLldCX21lZGlhX3ZpZXdbeWF3Zi1waWNsYXN0XSAucGljX2Nob29zZV9ib3ggbGk6bm90KDpsYXN0LWNoaWxkKSBhLmN1cnJlbnQnKTsKICAgICAgaWYgKG5vdExhc3QpIG5vdExhc3QuY2xvc2VzdCgnLldCX21lZGlhX3ZpZXcnKS5yZW1vdmVBdHRyaWJ1dGUoJ3lhd2YtcGljbGFzdCcpOwogICAgICBjb25zdCBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9mZWVkX3R5cGUgLldCX2V4cGFuZF9tZWRpYSAuV0JfbWVkaWFfdmlldyAuYXJ0d29ya19ib3ggLmZpY29uX2Nsb3NlICcpOwogICAgICBpZiAoY2xvc2UpIGNsb3NlLmNsaWNrKCk7CiAgICB9KTsKICAgIGNzcy5hcHBlbmQoJy5XQl9mZWVkX3R5cGUgLldCX2V4cGFuZF9tZWRpYSAuV0JfbWVkaWFfdmlld1t5YXdmLXBpY2xhc3RdIC5yaWdodGN1cnNvciB7IGN1cnNvcjogdXJsKCIvL2ltZy50LnNpbmFqcy5jbi90Ni9zdHlsZS9pbWFnZXMvY29tbW9uL3NtYWxsLmN1ciIpLCBhdXRvICFpbXBvcnRhbnQ7IH0nKTsKICB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ3BpY190YWcnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFBpY1RhZywgMSwgJy5XQl9tZWRpYV92aWV3IC5tZWRpYV9zaG93X2JveCAuYXJ0d29ya19ib3ggLnRhZ19zaG93cGljTCwgLldCX21lZGlhX3ZpZXcgLm1lZGlhX3Nob3dfYm94IC5hcnR3b3JrX2JveCAudGFnX3Nob3dwaWNSLCAuaWNvbl90YWdlZF9waWMgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3Nvbl90aXRsZScsICgpID0+IGkxOG4uY2xlYW5GZWVkU29uVGl0bGUsIDEsICcuV0JfZmVlZF90eXBlIC5XQl9mZWVkX3RvZ2V0aGVyIC53ZnRfaGQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2NhcmQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZENhcmQsIDEsIHsKICAgIGFjc3M6ICcuV0JfcGljX2FwcCwgLldCX2ZlZWRfc3BlYywgLldCX211c2ljIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywKICAgIHJlZjogeyBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5GZWVkQ2FyZERldGFpbCB9IH0sCiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdhcnRpY2xlX3BheScsICgpID0+IGkxOG4uY2xlYW5GZWVkQXJ0aWNsZVBheSwgMSwgZnVuY3Rpb24gKCkgewogICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBoaWRlQXJ0aWNsZVBheSgpIHsKICAgICAgY29uc3QgZWxlbWVudDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlZF9hcHBfYnRuX2EgYVthY3Rpb24tZGF0YSo9InB4LmUud2VpYm8uY29tIl0nKTsKICAgICAgaWYgKGVsZW1lbnQxKSBlbGVtZW50MS5jbG9zZXN0KCcuZmVlZF9hcHBfYnRuX2EnKS5yZW1vdmUoKTsKICAgICAgY29uc3QgZWxlbWVudDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfY2FyZHdyYXAgI3BsX2FydGljbGVfYXJ0aWNsZVBheScpOwogICAgICBpZiAoZWxlbWVudDIpIGVsZW1lbnQyLmNsb3Nlc3QoJy5XQl9jYXJkd3JhcCcpLnJlbW92ZSgpOwogICAgICBjb25zdCBlbGVtZW50MyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXdhcmRjb21wb25lbnQgYVthY3Rpb24tdHlwZT0iYnV5V3JhcCJdW2FjdGlvbi1kYXRhKj0idHlwZT1yZXdhcmQiXScpOwogICAgICBpZiAoZWxlbWVudDMpIGVsZW1lbnQzLmNsb3Nlc3QoJy5yZXdhcmRjb21wb25lbnQnKS5jbG9zZXN0KCc6bm90KDpvbmx5LWNoaWxkKScpLnJlbW92ZSgpOwogICAgfSk7CiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd0YWcnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFRhZywgMSwgJy5XQl90YWcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3JlbGF0ZWRfbGluaycsICgpID0+IGkxOG4uY2xlYW5GZWVkUmVsYXRlZExpbmssIDEsIHsKICAgIGFjc3M6ICcuV0JfZmVlZF90eXBlIC5XQl90YWdfcmVjIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywKICAgIHJlZjogeyBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5GZWVkUmVsYXRlZExpbmtEZXRhaWwgfSB9LAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnc291cmNlJywgKCkgPT4gaTE4bi5jbGVhbkZlZWRTb3VyY2UsIDEsIHsKICAgIGFjc3M6IGAKLnlhd2YtV0JWNyAueWF3Zi1mZWVkLXNvdXJjZS1jb250YWluZXIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KCi55YXdmLVdCVjYgLldCX2ZlZWRfZGV0YWlsIC5XQl9mcm9tIHsgaGVpZ2h0OiAyNnB4OyBvdmVyZmxvdzogaGlkZGVuOyB9Ci55YXdmLVdCVjYgLldCX2ZlZWRfZGV0YWlsIC5XQl9mZWVkX2V4cGFuZCAuV0JfZnJvbSB7IGhlaWdodDogMTZweDsgfQoueWF3Zi1XQlY2IC5XQl9mZWVkX2RldGFpbCAuV0JfZnJvbTo6YmVmb3JlIHsgY29udGVudDogIiAiOyBkaXNwbGF5OiBibG9jazsgZmxvYXQ6IGxlZnQ7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDMwcHg7IH0KLnlhd2YtV0JWNiAuV0JfZmVlZF9kZXRhaWwgLldCX2Zyb20gYVtkYXRlXSwKLnlhd2YtV0JWNiAuV0JfZmVlZF9kZXRhaWwgLldCX2Zyb20gYVt5YXdmLWRhdGVdLAoueWF3Zi1XQlY2IC5XQl9mZWVkX2RldGFpbCAuV0JfZnJvbSBzcGFuW3RpdGxlXSwKLnlhd2YtV0JWNiAuV0JfZmVlZF9kZXRhaWwgLldCX2Zyb20gLnlhd2YtZWRpdGVkIHsgZmxvYXQ6IGxlZnQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAtMzBweDsgfQoueWF3Zi1XQlY2IC5XQl9mZWVkX2RldGFpbCAuV0JfZnJvbSBhW2RhdGVdOjphZnRlciwKLnlhd2YtV0JWNiAuV0JfZmVlZF9kZXRhaWwgLldCX2Zyb20gYVt5YXdmLWRhdGVdOjphZnRlciB7IGNvbnRlbnQ6ICIgIjsgfQpgLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5GZWVkU291cmNlRGV0YWlsIH0gfSwKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgncG9wJywgKCkgPT4gaTE4bi5jbGVhbkZlZWRQb3AsIDEsIGAKLldCX2ZlZWRfZGF0YWlsIGFbYWN0aW9uLXR5cGU9ImZsX3BvcCJdLCAuV0JfZmVlZF9kYXRhaWwgYVthY3Rpb24tdHlwZT0iZmxfcG9wIl0rLlNfdHh0MywgCi5XQl9oYW5kbGUgbGlbeWF3Zi1oYW5kbGUtdHlwZT0iZmxfcG9wIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1gKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2xpa2UnLCAoKSA9PiBpMThuLmNsZWFuRmVlZExpa2UsIDEsIGAKLnlhd2YtV0JWNyAueWF3Zi1mZWVkLXRvb2xiYXItbGlrZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoKLnlhd2YtV0JWNiBhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfbGlrZSJdLAoueWF3Zi1XQlY2IGFbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9saWtlIl0rLlNfdHh0MywgCi55YXdmLVdCVjYgW25vZGUtdHlwZT0ibXVsdGlfaW1hZ2VfbGlrZSJdLAoueWF3Zi1XQlY2IFthY3Rpb24tdHlwZT0iZmVlZF9saXN0X2ltYWdlX2xpa2UiXSwgCi55YXdmLVdCVjYgW2FjdGlvbi10eXBlPSJvYmplY3RfbGlrZSJdLCBbYWN0aW9uLXR5cGU9Imxpa2Vfb2JqZWN0Il0sIAoueWF3Zi1XQlY2IC5XQl9mZWVkX2RhdGFpbCBhW2FjdGlvbi10eXBlPSJmbF9saWtlIl0sCi55YXdmLVdCVjYgLldCX2ZlZWRfZGF0YWlsIGFbYWN0aW9uLXR5cGU9ImZsX2xpa2UiXSsuU190eHQzLCAKLnlhd2YtV0JWNiAuV0JfZXhwYW5kIC5XQl9oYW5kbGUuV19mciBsaTpudGgtY2hpbGQoMyksIAoueWF3Zi1XQlY2IC5XQl9oYW5kbGUgbGlbeWF3Zi1oYW5kbGUtdHlwZT0iZmxfbGlrZSJdLAoueWF3Zi1XQlY2IC5XQl9oYW5kbGUgbGlbeWF3Zi1oYW5kbGUtdHlwZT0ibGlrZSJdIC5sYXllcl9tdWx0aXBpY19wcmV2aWV3IC5wb3NfaWNvbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfWAsIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdsaWtlX2NvbW1lbnQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZExpa2VDb21tZW50LCAxLCBgCi55YXdmLVdCVjcgLnlhd2YtZmVlZC1jb21tZW50LWljb24tbGlzdCBbeWF3Zi1pY29uLWxpc3QtbmFtZT0ibGlrZSJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CgoueWF3Zi1XQlY2IC5XQl9oYW5kbGUgbGlbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlPSJsaWtlIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1gLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnbGlrZV9hdHRpdHVkZScsICgpID0+IGkxOG4uY2xlYW5GZWVkTGlrZUF0dGl0dWRlLCAxLCAnLldfbGF5ZXJfYXR0aXR1ZGUgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2ZvcndhcmQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZEZvcndhcmQsIDEsIGAKLnlhd2YtV0JWNyAueWF3Zi1mZWVkLXRvb2xiYXItcmV0d2VldCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoKLnlhd2YtV0JWNiBhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfZm9yd2FyZCJdLCBhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfZm9yd2FyZCJdKy5TX3R4dDMsCi55YXdmLVdCVjYgLldCX21lZGlhX2V4cGFuZCAuV0JfaGFuZGxlIGEuU19mdW5jNFtocmVmJD0iP3R5cGU9cmVwb3N0Il0sIC5XQl9tZWRpYV9leHBhbmQgLldCX2hhbmRsZSBhLlNfZnVuYzRbaHJlZiQ9Ij90eXBlPXJlcG9zdCJdKy5TX3R4dDMsIAoueWF3Zi1XQlY2IC5XQl9mZWVkX2RhdGFpbCBhW2FjdGlvbi10eXBlPSJmbF9mb3J3YXJkIl0sIC5XQl9mZWVkX2RhdGFpbCBhW2FjdGlvbi10eXBlPSJmbF9mb3J3YXJkIl0rLlNfdHh0MywgCi55YXdmLVdCVjYgLldCX2V4cGFuZCAuV0JfaGFuZGxlLldfZnIgbGk6bnRoLWNoaWxkKDEpLCAKLnlhd2YtV0JWNiAuV0JfaGFuZGxlIGxpW3lhd2YtaGFuZGxlLXR5cGU9ImZsX2ZvcndhcmQiXSwgLldCX2hhbmRsZSBsaVt5YXdmLWhhbmRsZS10eXBlPSJ0YWIiXTpudGgtY2hpbGQoMikgCi55YXdmLVdCVjYgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1gLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnZmFzdF9yZXBvc3QnLCAoKSA9PiBpMThuLmNsZWFuRmVlZEZhc3RSZXBvc3QsIDgzLCB7IHdlaWJvVmVyc2lvbjogNyB9KTsgLy8g5a6e546w5ZyoIHJlbmRlcgogIGNsZWFuLkNsZWFuUnVsZSgnZmF2b3JpdGUnLCAoKSA9PiBpMThuLmNsZWFuRmVlZEZhdm9yaXRlLCAxLCBgCmFbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9mYXZvcml0ZSJdLCBhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfZmF2b3JpdGUiXSsuU190eHQzLAouV0JfZmVlZF9kYXRhaWwgYVthY3Rpb24tdHlwZT0iZmxfZmF2b3JpdGUiXSwgLldCX2ZlZWRfZGF0YWlsIGFbYWN0aW9uLXR5cGU9ImZsX2Zhdm9yaXRlIl0rLlNfdHh0MywgCi5XQl9oYW5kbGUgLldCX3Jvd19saW5lIGxpW3lhd2YtaGFuZGxlLXR5cGU9ImZsX2Zhdm9yaXRlIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1gKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3Byb21vdGVfb3RoZXInLCAoKSA9PiBpMThuLmNsZWFuRmVlZFByb21vdGVPdGhlciwgMSwgJy5zY3JlZW5fYm94IC5sYXllcl9tZW51X2xpc3QgYVthY3Rpb24tZGF0YSo9InByb21vdGUudmlwLndlaWJvLmNvbSJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZXBvcnQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFJlcG9ydCwgMSwgJy5zY3JlZW5fYm94IC5sYXllcl9tZW51X2xpc3QgYVtvbmNsaWNrKj0ic2VydmljZS5hY2NvdW50LndlaWJvLmNvbS9yZXBvcnRzcGFtIl0sIC5XQl9oYW5kbGUgdWwgbGlbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlPSJyZXBvcnQiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgndXNlX2NhcmRfYmFja2dyb3VuZCcsICgpID0+IGkxOG4uY2xlYW5GZWVkVXNlQ2FyZEJhY2tncm91bmQsIDEsICcuc2NyZWVuX2JveCAubGF5ZXJfbWVudV9saXN0IGFbYWN0aW9uLXR5cGU9ImZsX2NhcmRDb3ZlciJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CgogIG9ic2VydmVyLmZlZWQub25CZWZvcmUoZnVuY3Rpb24gKGZlZWQpIHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDYpIHJldHVybjsKICAgIGNvbnN0IGxpcyA9IEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZmVlZF90eXBlIC5XQl9oYW5kbGUgLldCX3Jvd19saW5lIGxpLCAuV0JfZmVlZF90b2dldGhlciAuV0JfZnVuYyAuV0JfaGFuZGxlIGxpJykpOwogICAgbGlzLmZvckVhY2gobGkgPT4gewogICAgICBsZXQgdHlwZSA9IGxpLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi10eXBlJyk7CiAgICAgIGlmICghdHlwZSAmJiBsaS5xdWVyeVNlbGVjdG9yKCdhW3N1ZGEtdWF0cmFjaz0ia2V5PXByb2ZpbGVfZmVlZCZ2YWx1ZT1wb3B1bGFyaXplX2hvc3QiXScpKSB0eXBlID0gJ2ZsX3BvcCc7CiAgICAgIGlmICghdHlwZSAmJiBsaS5xdWVyeVNlbGVjdG9yKCdzcGFuW3RpdGxlKj0i6K+E6K66Il0sIHNwYW5bdGl0bGUqPSLoqZXoq5YiXSwgc3Bhblt0aXRsZSo9ImNvbW1lbnQiXScpKSB0eXBlID0gJ2ZsX2NvbW1lbnQnOyAvLyDnlLHkuo7nlKjmiLforr7nva7vvIzml6Dms5Xov5vooYzor4TorroKICAgICAgbGkuc2V0QXR0cmlidXRlKCd5YXdmLWhhbmRsZS10eXBlJywgdHlwZSk7CiAgICB9KTsKICAgIGNvbnN0IGZ3bGkgPSBBcnJheS5mcm9tKGZlZWQucXVlcnlTZWxlY3RvckFsbCgnLldCX2ZlZWRfZXhwYW5kIC5XQl9mdW5jIC5XQl9oYW5kbGUgbGknKSk7CiAgICBpZiAoZndsaS5sZW5ndGggPT09IDMpIGZ3bGkuZm9yRWFjaChmdW5jdGlvbiAobGksIGluZGV4KSB7CiAgICAgIGxpLnNldEF0dHJpYnV0ZSgneWF3Zi1oYW5kbGUtdHlwZScsIFsnZmxfZm9yd2FyZCcsICdmbF9jb21tZW50JywgJ2ZsX2xpa2UnXVtpbmRleF0pOwogICAgfSk7IGVsc2UgaWYgKGZ3bGkubGVuZ3RoID09PSA0KSBmd2xpLmZvckVhY2goZnVuY3Rpb24gKGxpLCBpbmRleCkgewogICAgICBsaS5zZXRBdHRyaWJ1dGUoJ3lhd2YtaGFuZGxlLXR5cGUnLCBbJ2ZsX3JlYWQnLCAnZmxfZm9yd2FyZCcsICdmbF9jb21tZW50JywgJ2ZsX2xpa2UnXVtpbmRleF0pOwogICAgfSk7CiAgfSk7CgogIC8vIOagh+iusOW+ruWNmuivhOiuuuaMiemSrgogIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gbWFya0NvbW1lbnRCdXR0b24oKSB7CiAgICBjb25zdCBjbGkgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoWwogICAgICAnLmxpc3RfdWxbbm9kZS10eXBlPSJmZWVkX2xpc3RfY29tbWVudExpc3QiXSAuV0JfaGFuZGxlIHVsIGxpOm5vdChbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlXSknLAogICAgICAnLmxpc3RfdWxbbm9kZS10eXBlPSJjb21tZW50X2xpc3QiXSAuV0JfaGFuZGxlIHVsIGxpOm5vdChbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlXSknLAogICAgICAnLldCX2ZlZWRfY29tbWVudCAuV0JfaGFuZGxlIHVsIGxpOm5vdChbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlXSknLAogICAgXS5qb2luKCcsJykpKTsKICAgIGNsaS5mb3JFYWNoKGxpID0+IHsKICAgICAgY29uc3QgYSA9IGxpLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgbGV0IHR5cGUgPSBudWxsOwogICAgICBpZiAoYS5tYXRjaGVzKCdbb25jbGljayo9InNlcnZpY2UuYWNjb3VudC53ZWliby5jb20vcmVwb3J0c3BhbSJdJykpIHR5cGUgPSAncmVwb3J0JzsKICAgICAgZWxzZSBpZiAoYS5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9ImRlbGV0ZSJdJykpIHR5cGUgPSAnZGVsZXRlJzsKICAgICAgZWxzZSBpZiAoYS5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9ImNvbW1lbnREaWFsb2d1ZSJdJykpIHR5cGUgPSAnY29udmVyc2l0aW9uJzsKICAgICAgZWxzZSBpZiAoYS5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9InJlcGx5Il0nKSkgdHlwZSA9ICdyZXBseSc7CiAgICAgIGVsc2UgaWYgKGEubWF0Y2hlcygnW2FjdGlvbi10eXBlPSJyZXBseWNvbW1lbnQiXScpKSB0eXBlID0gJ3JlcGx5JzsKICAgICAgZWxzZSBpZiAoYS5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9ImZsX2xpa2UiXScpKSB0eXBlID0gJ2xpa2UnOwogICAgICBsaS5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29tbWVudC1oYW5kbGUtdHlwZScsIHR5cGUgPz8gJycpOwogICAgfSk7CiAgfSk7CgogIGNzcy5hcHBlbmQoYApib2R5IC5XQl9oYW5kbGUgdWwgeyBkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IG5vd3JhcDsgYWxpZ24taXRlbXM6IHN0cmV0Y2g7IG1hcmdpbi1sZWZ0OiAtNHB4OyB9CmJvZHkgLldCX2hhbmRsZSB1bCBsaSB7IGZsZXg6IDEgMSBhdXRvOyBmbG9hdDogbm9uZTsgd2lkdGg6IGF1dG87IH0KYCk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvY2xlYW4vcHJvZmlsZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuUHJvZmlsZUdyb3VwVGl0bGU6IHsgY246ICfpmpDol4/mqKHlnZcgLSDkuKrkurrkuLvpobUnLCB0dzogJ+maseiXj+aooee1hCAtIOWAi+S6uuS4u+mggScsIGVuOiAnSGlkZSBtb2R1bGVzIC0gUGVyc29uYWwgaG9tZSBwYWdlJyB9LAogICAgY2xlYW5Qcm9maWxlTW92ZVRoaW5nczogeyBjbjogJ+enu+WKqOmDqOS7tu+8iOS8muWRmOaooeadv++8iScsIHR3OiAn56e75YuV6YOo5Lu277yI5pyD5ZOh5qih5p2/77yJJywgZW46ICdNb3ZpbmcgVGhpbmdzIChWSVAgVGVtcGxhdGUpJyB9LAogICAgY2xlYW5Qcm9maWxlQ292ZXI6IHsgY246ICflsIHpnaLlm74nLCB0dzogJ+WwgemdouWclicsIGVuOiAnQ292ZXIgUGljdHVyZScgfSwKICAgIGNsZWFuUHJvZmlsZUJHSW1nOiB7IGNuOiAn6IOM5pmv5Zu+JywgdHc6ICfog4zmma/lnJYnLCBlbjogJ0JhY2tncm91bmQgUGljdHVyZScgfSwKICAgIGNsZWFuUHJvZmlsZUJhZGdlSWNvbjogeyBjbjogJ+WLi+eroCcsIHR3OiAn5Yuz56ugJywgZW46ICdCYWRnZXMnIH0sCiAgICBjbGVhblByb2ZpbGVWZXJpZnk6IHsgY246ICfkuKrkurrotYTmlpnorqTor4EnLCB0dzogJ+WAi+S6uuizh+aWmeiqjeitiScsIGVuOiAnUGVyc29uIEluZm8gVmVyaWZpY2F0aW9uJyB9LAogICAgY2xlYW5Qcm9maWxlRWRpdFBlcnNvbkluZm86IHsgY246ICfnvJbovpHkuKrkurrotYTmlpknLCB0dzogJ+e8lui+keS4quS6uui1hOaWmScsIGVuOiAnRWRpdCBwZXJzb25hbCBpbmZvJyB9LAogICAgY2xlYW5Qcm9maWxlU3RhdHM6IHsgY246ICflhbPms6gv57KJ5LidL+W+ruWNmuaVsCcsIHR3OiAn6Zec5rOoL+eyiee1si/lvq7ljZrmlbgnLCBlbjogJ051bWJlcnMgb2YgRm9sbG93aW5nL0ZvbGxvd2Vycy9XZWlibycgfSwKICAgIGNsZWFuUHJvZmlsZU15RGF0YTogeyBjbjogJ+aIkeeahOW+ruWNmuS6uuawlCcsIHR3OiAn5oiR55qE5b6u5Y2a5Lq65rCjJywgZW46ICdXZWlibyBQb3B1bGFyaXR5JyB9LAogICAgY2xlYW5Qcm9maWxlU3VnZ2VzdFVzZXI6IHsgY246ICflj6/og73mhJ/lhbTotqPnmoTkuronLCB0dzogJ+WPr+iDveaEn+iIiOi2o+eahOS6uicsIGVuOiAnU3VnZ2VzdGVkJyB9LAogICAgY2xlYW5Qcm9maWxlR3JvdXA6IHsgY246ICflhazlvIDliIbnu4QnLCB0dzogJ+WFrOmWi+WIhue1hCcsIGVuOiAnUHVibGljIEdyb3VwcycgfSwKICAgIGNsZWFuUHJvZmlsZVJlbGF0aW9uOiB7IGNuOiAn5b6u5YWz57O7JywgdHc6ICflvq7pl5zkv4InLCBlbjogJ1dlaWJvIHJlbGF0aW9ucycgfSwKICAgIGNsZWFuUHJvZmlsZUFsYnVtOiB7IGNuOiAn55u45YaMJywgdHc6ICfnm7jlhoonLCBlbjogJ0FsYnVtJyB9LAogICAgY2xlYW5Qcm9maWxlSG90VG9waWM6IHsgY246ICfor53popgnLCB0dzogJ+ipsemhjCcsIGVuOiAnVG9waWMnIH0sCiAgICBjbGVhblByb2ZpbGVIb3RXZWlibzogeyBjbjogJ+eDremXqOW+ruWNmicsIHR3OiAn54ax6ZaA5b6u5Y2aJywgZW46ICdIb3QgRmVlZHMnIH0sCiAgICBjbGVhblByb2ZpbGVSZWNvbW1lbmRGZWVkOiB7IGNuOiAn55u45YWz5o6o6I2QJywgdHc6ICfnm7jpl5zmjqjolqYnLCBlbjogJ1JlY29tbWVuZCBGZWVkcycgfSwKICAgIGNsZWFuUHJvZmlsZVVzZXJMaXN0OiB7IGNuOiAn5LiO5LuWL+WlueebuOS8vOeahOS6uicsIHR3OiAn6IiH5LuWL+WlueebuOS8vOeahOS6uicsIGVuOiAnU2ltaWxhciBQZW9wbGUnIH0sCiAgICBjbGVhblByb2ZpbGVIb25nYmFvOiB7IGNuOiAn5b6u5Y2a57qi5YyFJywgdHc6ICflvq7ljZrntIXljIUnLCBlbjogJ1JlZCBwYWNrJyB9LAogICAgY2xlYW5Qcm9maWxlV2Vud29EcjogeyBjbjogJ+eIsemXruWMu+eUnycsIHR3OiAn5oSb5ZWP6Yar55SfJywgZW46ICdJYXNrIG1lZGljYWwnIH0sCiAgICBjbGVhblByb2ZpbGVUaW1lbGluZTogeyBjbjogJ+aXtumXtOi9tCcsIHR3OiAn5pmC6ZaT6Lu4JywgZW46ICdUaW1lbGluZScgfSwKICB9KTsKCiAgY2xlYW4uQ2xlYW5Hcm91cCgncHJvZmlsZScsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlR3JvdXBUaXRsZSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdtb3ZlX3RoaW5ncycsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlTW92ZVRoaW5ncywgMSwgJy5wcm9maWxlX21vdmVfdGhpbmdzIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdjb3ZlcicsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlQ292ZXIsIDEsIGZ1bmN0aW9uICgpIHsKICAgIGNzcy5hcHBlbmQoYAouUENEX2hlYWRlci5QQ0RfaGVhZGVyLCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl93cmFwLCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5zaGFkb3cgeyBoZWlnaHQ6IDEzMHB4OyB9Ci5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnBmX3Bob3RvIHsgbWFyZ2luOiAxMHB4IDIwcHggMTBweCBjYWxjKDUwJSAtIDI4MHB4KTsgZmxvYXQ6IGxlZnQ7IH0KLlBDRF9oZWFkZXIuUENEX2hlYWRlciAucGZfdXNlcm5hbWUsIC5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnBmX2ludHJvIHsgdGV4dC1zaGFkb3c6IDAgMCA0cHggIzAwMDsgfQouUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl91c2VybmFtZSwgLlBDRF9oZWFkZXIuUENEX2hlYWRlciAucGZfaW50cm8sIC5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnBmX29wdCB7IHRleHQtYWxpZ246IGxlZnQ7IG1hcmdpbi1sZWZ0OiAxNDBweDsgfQouUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl93cmFwIC5wZl91c2VfbnVtLCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl93cmFwIC5wZl9jb3B5X2ljb24sIC5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnVwY292ZXIgeyBkaXNwbGF5OiBub25lOyB9Ci5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLlNfc2hhZG93LCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5jb3Zlcl93cmFwLCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl93cmFwIHsgYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyB9Ci5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnNoYWRvdyB7IG1hcmdpbjogMCBjYWxjKDUwJSAtIDMwMHB4KTsgd2lkdGg6IDYwMHB4OyB9Ci5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnBmX2ludHJvIHsgaGVpZ2h0OiAzNnB4OyBsaW5lLWhlaWdodDogMThweDsgdGV4dC1hbGlnbjogbGVmdDsgdGV4dC1zaGFkb3c6IDAgMCA0cHggIzAwMDsgfQouUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl9vcHQgeyBtYXJnaW4tdG9wOiA4cHg7IHRleHQtYWxpZ246IGxlZnQ7IH0KICAgIGApOwogICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBmdWxsUHJvZmlsZUludHJvZHVjdGlvbigpIHsKICAgICAgY29uc3QgaW50cm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuUENEX2hlYWRlciAucGZfaW50cm86bm90KFt5YXdmLWZ1bGwtaW50cm9dKScpOwogICAgICBpZiAoIWludHJvKSByZXR1cm47CiAgICAgIGludHJvLnNldEF0dHJpYnV0ZSgneWF3Zi1mdWxsLWludHJvJywgKGludHJvLnRleHRDb250ZW50ID0gaW50cm8udGl0bGUpKTsKICAgIH0pOwogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnYmdfaW1nJywgKCkgPT4gaTE4bi5jbGVhblByb2ZpbGVCR0ltZywgMSwgJy5TX3BhZ2UsIC5TX3BhZ2UgLldCX21pbmlibG9nIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJcJ1wnIikgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnYmFkZ2VfaWNvbicsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlQmFkZ2VJY29uLCAxLCAnLnBmX2JhZGdlX2ljb24geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3ZlcmlmeScsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlVmVyaWZ5LCAxLCAnW3lhd2YtaWQ9Inlhd2YtcHItcGNkLXBlcnNvbi1pbmZvLW15Il0gLnZlcmlmeV9hcmVhLCBbeWF3Zi1pZD0ieWF3Zi1wci1wY2QtcGVyc29uLWluZm8iXSAudmVyaWZ5X2FyZWEgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2VkaXRfcGVyc29uX2luZm8nLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZUVkaXRQZXJzb25JbmZvLCAxLCAnW3lhd2YtaWQ9Inlhd2YtcHItcGNkLXBlcnNvbi1pbmZvLW15Il0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3N0YXRzJywgKCkgPT4gaTE4bi5jbGVhblByb2ZpbGVTdGF0cywgMSwgJ1t5YXdmLWlkPSJ5YXdmLXByLXBjZC1jb3VudGVyIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ215X2RhdGEnLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZU15RGF0YSwgMSwgJ1tpZF49IlBsX09mZmljaWFsX015TWljcm93b3JsZF9fIl0sIC5XQl9mcmFtZV9iIFtpZF49IlBsX09mZmljaWFsX015UG9wdWxhcml0eV9fIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3N1Z2dlc3RfdXNlcicsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlU3VnZ2VzdFVzZXIsIDEsICdbaWRePSJQbF9Db3JlX1JpZ2h0VXNlckxpc3RfXyJdLCAuV0JfZnJhbWVfYiBbaWRePSJQbF9Db3JlX1JpZ2h0VXNlckxpc3RfXyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdncm91cCcsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlR3JvdXAsIDEsICdbaWRePSJQbF9Db3JlX1VzZXJHcmlkX18iXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgncmVsYXRpb24nLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZVJlbGF0aW9uLCAxLCAnW2lkXj0iUGxfQ29yZV9SaWdodFVzZXJHcmlkX18iXSwgLldCX2ZyYW1lX2IgW2lkXj0iUGxfQ29yZV9SaWdodFVzZXJHcmlkX18iXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnYWxidW0nLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZUFsYnVtLCAxLCAnW2lkXj0iUGxfQ29yZV9SaWdodFBpY011bHRpX18iXSwgLldCX2ZyYW1lX2IgW2lkXj0iUGxfQ29yZV9SaWdodFBpY011bHRpX18iXSwgW3lhd2Ytb2JqLW5hbWU9IuebuOWGiiJdLCBbeWF3Zi1vYmotbmFtZT0i55u45YaMIl0sIFt5YXdmLWlkPSJ5YXdmLWNvcmUtcmlnaHQtcGljLW11bHRpIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2hvdF90b3BpYycsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlSG90VG9waWMsIDEsICdbaWRePSJQbF9Db3JlX1JpZ2h0VGV4dFNpbmdsZV9fIl0sIC5XQl9mcmFtZV9iIFtpZF49IlBsX0NvcmVfUmlnaHRUZXh0U2luZ2xlX18iXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnaG90X3dlaWJvJywgKCkgPT4gaTE4bi5jbGVhblByb2ZpbGVIb3RXZWlibywgMSwgJ1tpZF49IlBsX0NvcmVfUmlnaHRQaWNUZXh0X18iXSwgLldCX2ZyYW1lX2IgW2lkXj0iUGxfQ29yZV9SaWdodFBpY1RleHRfXyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWNvbW1lbmRfZmVlZCcsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlUmVjb21tZW5kRmVlZCwgMSwgJy5XQl9mcmFtZV9iIFtpZF49IlBsX0NvcmVfUmVjb21tZW5kRmVlZF9fIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3VzZXJfbGlzdCcsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlVXNlckxpc3QsIDEsICdbaWRePSJQbF9Db3JlX1V0MVVzZXJMaXN0X18iXSwgLldCX2ZyYW1lX2IgW2lkXj0iUGxfQ29yZV9SaWdodFBpY1RleHRfXyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdob25nYmFvJywgKCkgPT4gaTE4bi5jbGVhblByb2ZpbGVIb25nYmFvLCAxLCAnW3lhd2YtaWQ9Inlhd2YtcHItaG9uZ2JhbyJdLCAuV0JfcmVkMjAxNyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnd2Vud29fZHInLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZVdlbndvRHIsIDEsICdbeWF3Zi1vYmotbmFtZT0i54ix6Zeu5Yy755SfIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsgLy8g5a+55bqU5qih5Z2X5rKh5pyJ57mB5L2T5oiW6Iux5paH57+76K+RCiAgY2xlYW4uQ2xlYW5SdWxlKCd0aW1lbGluZScsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlVGltZWxpbmUsIDEsICdbaWRePSJQbF9PZmZpY2lhbF9UaW1lQmFzZV9fIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKCiAgY2xlYW4udGFnRWxlbWVudHMoJ1Byb2ZpbGUnLCBbCiAgICAnLldCX2ZyYW1lX2IgPiBkaXY6bm90KDplbXB0eSk6bm90KFt5YXdmLWlkXSknLAogIF0uam9pbignLCcpLCB7CiAgICAnLlBDRF9jb3VudGVyJzogJ3lhd2YtcHItcGNkLWNvdW50ZXInLAogICAgJy5QQ0RfcGVyc29uX2luZm8nOiAneWF3Zi1wci1wY2QtcGVyc29uLWluZm8nLAogICAgJy5QQ0RfcGhvdG9saXN0JzogJ3lhd2YtY29yZS1yaWdodC1waWMtbXVsdGknLAogICAgJy5XQl9jYXJkd3JhcFthY3Rpb24tZGF0YSo9IndlaWJvLmNvbSUyRmhvbmdiYW8iXSc6ICd5YXdmLXByLWhvbmdiYW8nLAogICAgJy5XQl9jYXJkd3JhcFthY3Rpb24tZGF0YSo9InNpbmEuY29tLmNuJTJGaG9uZ2JhbyJdJzogJ3lhd2YtcHItaG9uZ2JhbycsCiAgICAnYVtocmVmKj0iLy9ob25nYmFvLndlaWJvLmNvbS9ob25nYmFvIl0nOiAneWF3Zi1wci1ob25nYmFvJywKICAgICcuUENEX3BlcnNvbl9pbmZvIGEuV0JfY2FyZG1vcmVbaHJlZl49Ii9wLyJdW2hyZWYkPSJpbmZvP21vZD1wZWRpdCJdJzogJ3lhd2YtcHItcGNkLXBlcnNvbi1pbmZvLW15JywKICB9KTsKCiAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiB0YWdQcm9maWxlTGVmdE5hbWVzKCkgewogICAgY29uc3QgdGl0bGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFsKICAgICAgJy5XQl9mcmFtZV9iID4gZGl2Om5vdChbeWF3Zi1vYmotbmFtZV0pIC5tYWluX3RpdGxlJywKICAgICAgJy5XQl9mcmFtZV9jID4gZGl2Om5vdChbeWF3Zi1vYmotbmFtZV0pIC5tYWluX3RpdGxlJywKICAgIF0uam9pbignLCcpKSk7CiAgICBpZiAoIXRpdGxlcy5sZW5ndGgpIHJldHVybjsKICAgIHRpdGxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0aXRsZSkgewogICAgICBjb25zdCBuYW1lID0gdGl0bGU/LnRleHRDb250ZW50LnRyaW0oKSA/PyAnJzsKICAgICAgY29uc3QgY29udGFpbmVyID0gdGl0bGUuY2xvc2VzdCgnLldCX2ZyYW1lX2IgPiBkaXYsIC5XQl9mcmFtZV9jID4gZGl2Jyk7CiAgICAgIGlmICghY29udGFpbmVyLmhhc0F0dHJpYnV0ZSgneWF3Zi1vYmotbmFtZScpKSB7CiAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgneWF3Zi1vYmotbmFtZScsIG5hbWUpOwogICAgICB9CiAgICB9KTsKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9jbGVhbi9tZXNzYWdlLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGNvbnN0IGNsZWFuID0geWF3Zi5ydWxlcy5jbGVhbjsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBjbGVhbk1lc3NhZ2VHcm91cFRpdGxlOiB7IGNuOiAn6ZqQ6JeP5qih5Z2XIC0g5raI5oGv6aG16Z2iJywgdHc6ICfpmrHol4/mqKHntYQgLSDmtojmga/ntrLpoIEnLCBlbjogJ0hpZGUgbW9kdWxlcyAtIE5ld3MgcGFnZScgfSwKICAgIGNsZWFuTWVzc2FnZUhlbHA6IHsgY246ICfkvb/nlKjlsI/luK7liqknLCB0dzogJ+S9v+eUqOWwj+W5q+WKqScsIGVuOiAnVGlwcycgfSwKICAgIGNsZWFuTWVzc2FnZUZlZWRiYWNrOiB7IGNuOiAn5b6u5Y2a5oSP6KeB5Y+N6aaIJywgdHc6ICflvq7ljZrmhI/opovlj43ppYsnLCBlbjogJ0ZlZWRiYWNrJyB9LAogIH0pOwoKICBjbGVhbi5DbGVhbkdyb3VwKCdtZXNzYWdlJywgKCkgPT4gaTE4bi5jbGVhbk1lc3NhZ2VHcm91cFRpdGxlKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2hlbHAnLCAoKSA9PiBpMThuLmNsZWFuTWVzc2FnZUhlbHAsIDEsICcjdjZfcGxfcmlnaHRtb2RfaGVscGF0LCAjdjZfcGxfcmlnaHRtb2RfaGVscGNvbW1lbnQsICN2Nl9wbF9yaWdodG1vZF9oZWxwbGlrZSwgI3Y2X3BsX3JpZ2h0bW9kX2hlbHBub3RlYm94LCAjdjZfcGxfcmlnaHRtb2RfaGVscGZhdiwgI3Y2X3BsX3JpZ2h0bW9kX2hlbHBncm91cGNoYXRub3RpY2UgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2ZlZWRiYWNrJywgKCkgPT4gaTE4bi5jbGVhbk1lc3NhZ2VGZWVkYmFjaywgMSwgJyN2Nl9wbF9yaWdodG1vZF9mZWVkYmFjayB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL290aGVyLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGVudiA9IHlhd2YuZW52OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgYmFja2VuZCA9IHlhd2YuYmFja2VuZDsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuT3RoZXJHcm91cFRpdGxlOiB7IGNuOiAn6ZqQ6JeP5qih5Z2XIC0g5p2C6aG5JywgdHc6ICfpmrHol4/mqKHntYQgLSDpm5zpoIUnLCBlbjogJ0hpZGUgbW9kdWxlcyAtIE90aGVycycgfSwKICAgIGNsZWFuT3RoZXJBZHM6IHsgY246ICflub/lkYonLCB0dzogJ+W7o+WRiicsIGVuOiAnQWR2ZXJ0aXNlbWVudCcgfSwKICAgIGNsZWFuT3RoZXJUcmFja2VyOiB7IGNuOiAn6L+96Liq5Zmo77yI6YOo5YiG77yJJywgZW46ICdUcmFja2VycyAoUGFydGlhbCknIH0sCiAgICBjbGVhbk90aGVyTXVzaWM6IHsgY246ICflvq7pn7PkuZAnLCB0dzogJ+W+rumfs+aogicsIGVuOiAnV2VpYm8gTXVzaWMnIH0sCiAgICBjbGVhbk90aGVyVGVtcGxhdGU6IHsgY246ICforr7nva7mqKHmnb8nLCB0dzogJ+iDjOaZr+ioreWumicsIGVuOiAnVGVtcGxhdGUgU2V0dGluZ3MnIH0sCiAgICBjbGVhbk90aGVySG9tZVRpcDogeyBjbjogJ+mhtumDqOaPkOekuuaoquW5hSB7e2l9fScsIHR3OiAn6aCC6YOo5o+Q56S65qmr5bmFIHt7aX19JywgZW46ICdUb3AgdGlwcyBiYW5uZXIge3tpfX0nIH0sCiAgICBjbGVhbk90aGVySG9tZVRpcERldGFpbDogewogICAgICBjbjogJ+WHuueOsOWcqOWvvOiIquagj+S4i+aWueWFtuS7luaJgOacieWGheWuueeahOS4iuaWueeahOaoquW5heOAguS4gOiIrOeUqOadpeaOqOiNkOW+ruWNmumHjeimgeeahOaWsOWKn+iDveOAgicsCiAgICB9LAogICAgY2xlYW5PdGhlckZvb3RlcjogeyBjbjogJ+mhtemdouW6lemDqCB7e2l9fScsIHR3OiAn6aCB6Z2i5bqV6YOoIHt7aX19JywgZW46ICdGb290ZXIge3tpfX0nIH0sCiAgICBjbGVhbk90aGVyRm9vdGVyRGV0YWlsOiB7CiAgICAgIGNuOiAn6aG16Z2i5bqV6YOo55qE5a+86Iiq6ZO+5o6l44CCJywKICAgIH0sCiAgICBjbGVhbk90aGVySU06IHsgY246ICfnp4Hkv6HogYrlpKnvvIjlj7PkuIvvvIkge3tpfX0nLCBlbjogJ0NoYXQgKGJvdHRvbSByaWdodCkge3tpfX0nIH0sCiAgICBjbGVhbk90aGVySU1EZXRhaWw6IHsKICAgICAgY246ICfpmpDol4/lkI7mgqjov5jlj6/ku6XlnKjnp4Hkv6HpobXpnaLmlLblj5Hnp4Hkv6HvvJrpvKDmoIfmjIflkJHlj7PkuIrop5Lmtojmga/lm77moIflnKjkuIvmi4noj5zljZXkuK3pgInmi6nigJznp4Hkv6HigJ3ljbPlj6/miZPlvIDnp4Hkv6HpobXpnaLjgIInICsKICAgICAgICAoZW52LmNvbmZpZy5jaGF0SW5QYWdlU3VwcG9ydGVkID8gJ+mFjeWQiOKAnFtbbGF5b3V0X2NoYXRfaW5fcGFnZV1d4oCd5L2/55So5pe25Y+q6ZqQ6JeP5Zyo5paw5qCH562+6aG15omT5byA6IGK5aSp6aG16Z2i55qE5oyJ6ZKu44CCJyA6ICcnKSwKICAgIH0sCiAgICBjbGVhbk90aGVySU1OZXdzOiB7IGNuOiAn54Ot54K55o+Q6YaS77yI5Y+z5LiL77yJJywgdHc6ICfnhrHpu57mj5DphpLvvIjlj7PkuIvvvIknLCBlbjogJ05ld3MsIGJvdHRvbSByaWdodCcgfSwKICAgIGNsZWFuT3RoZXJCYWNrVG9wOiB7IGNuOiAn6L+U5Zue6aG26YOoJywgdHc6ICfov5Tlm57poILpg6gnLCBlbjogJ0JhY2sgdG8gVG9wJyB9LAogICAgY2xlYW5PdGhlclRpcDogeyBjbjogJ+WKn+iDveaPkOekuuahhiB7e2l9fScsIHR3OiAn5Yqf6IO95o+Q56S65qGGIHt7aX19JywgZW46ICdGdW5jdGlvbiBUaXBzIHt7aX19JyB9LAogICAgY2xlYW5PdGhlclRpcERldGFpbDogewogICAgICBjbjogJ+WBtuWwlOS8muWHuueOsOeahOaWsOWKn+iDveaOqOiNkOeahOW8ueahhu+8jOWmguaenOmakOiXj+S6huWvueW6lOWKn+iDveeahOeVjOmdouWPr+iDveW8ueahhuS8muaYvuekuuWIsOWlh+aAqueahOWcsOaWueOAgicsCiAgICB9LAogICAgY2xlYW5PdGhlclJlbGF0ZWRGZWVkczogeyBjbjogJ+ebuOWFs+W+ruWNmuaOqOiNkCB7e2l9fScsIHR3OiAn55u46Zec5b6u5Y2a5o6o6JamIHt7aX19JywgZW46ICdSZWxhdGVkIFdlaWJvIHt7aX19JyB9LAogICAgY2xlYW5PdGhlclJlbGF0ZWRGZWVkc0RldGFpbDogewogICAgICBjbjogJ+WcqOWNleadoeW+ruWNmumhtemdouWPr+S7peeci+WIsOeahOebuOWFs+W+ruWNmuaOqOiNkCcsCiAgICB9LAogICAgY2xlYW5PdGhlclJlbGF0ZWRWaWRlbzogeyBjbjogJ+ebuOWFs+inhumikeaOqOiNkCcsIHR3OiAn55u46Zec6KaW6aC75o6o6JamJywgZW46ICdSZWxhdGVkIFZpZGVvcycgfSwKICAgIGNsZWFuT3RoZXJSZWxhdGVkQXJ0aWNsZTogeyBjbjogJ+WktOadoeaWh+eroOmhteaOqOiNkOmYheivuycsIHR3OiAn6aCt5qKd5paH56ug6aCB5o6o6Jam6Zax6K6AJywgZW46ICdTdWdnZXN0ZWQgQXJ0aWNsZScgfSwKICAgIGNsZWFuT3RoZXJTZW5kV2VpYm86IHsgY246ICfpppbpobXlpJbnmoTlvq7ljZrlj5HluIPmoYYge3tpfX0nLCB0dzogJ+mmlumggeWklueahOW+ruWNmueZvOS9iOahhiB7e2l9fScsIGVuOiAnQWxsIG90aGVyIFdlaWJvIHB1Ymxpc2hlcnMge3tpfX0nIH0sCiAgICBjbGVhbk90aGVyU2VuZFdlaWJvRGV0YWlsOiB7CiAgICAgIGNuOiAn6Zmk5LqG6aaW6aG155qE5b6u5Y2a5Y+R5biD5qGG77yM5Y+z5LiK6KeS5oyJ6ZKu5by55Ye655qE5b+r6YCf5Y+R5biD5qGG5aSW77yb5YW25LuW55qE5ZCE56eN5Y+R5biD5qGG44CC5aaC5b6u5Y2a5paH56ug5LiL5pa56L2s5Y+R55So55qE5Y+R5biD5qGG562J44CCJywKICAgIH0sCiAgfSk7CgogIGNsZWFuLkNsZWFuR3JvdXAoJ290aGVyJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyR3JvdXBUaXRsZSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdhZHMnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJBZHMsIDEsIHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgaWYgKGVudi5jb25maWcucmVxdWVzdEJsb2NraW5nU3VwcG9ydGVkKSB7CiAgICAgICAgICBiYWNrZW5kLm9uUmVxdWVzdCgnYWRzJywgZGV0YWlscyA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzRW5hYmxlZCgpKSByZXR1cm4geyBjYW5jZWw6IHRydWUgfTsKICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYWluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIHV0aWwuY3NzLmFwcGVuZChbCiAgICAgICAgICAnW2FkLWRhdGFdJywgJ1tmZWVkdHlwZT0iYWQiXScsCiAgICAgICAgICAnW2lkXj0iYWRzXyJdJywgJ1tpZF49ImFkXyJdJywKICAgICAgICAgICdbaWQqPSJwbF9yaWdodG1vZF9hZHMiXScsICdbaWQqPSJwbF9jb250ZW50X2JpeiJdJywgJ1tpZCo9InBsX2FkXyJdJywgJ1tpZF49InNpbmFhZFRvb2xraXRCb3giXScsCiAgICAgICAgICAnW2NsYXNzKj0iV0JfYWRfIl0nLAogICAgICAgICAgJyN0b3BpY0FEJywgJyN0b3BpY0FEQnV0dG9tJywgJy5XQl9mZWVkIC5wb3B1bGFyX2J1c3MnLCAnLmZlZWRfYXBwX2FkcycsICcuV19iaWdEYXknLAogICAgICAgICAgJy5XQl9mZWVkX3l5MjAxNl91cF9idXQnLCAnLldCX2ZlZWRfeXkyMDE2X2Rvd25fYnV0JywgJyNwbF9jb21tb25fYWxpJywKICAgICAgICAgICcuV19za2luX2Jhbm5lcicsCiAgICAgICAgICAnW25vZGUtdHlwZT0iaW1nQnRuIl1bYWN0aW9uLWRhdGE9ImNhblVwbG9hZEltYWdlPTAiXScsCiAgICAgICAgXS5qb2luKCcsJykgKyAnIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9ICcgKwogICAgICAgICAgJyN3cmFwQUQsIC5uZXdzX2xvZ28geyB2aXNpYmlsaXR5OiBoaWRkZW4gIWltcG9ydGFudDsgfScpOwoKICAgICAgICBsZXQgdmVyc2lvbiA9ICcnOwogICAgICAgIC8vIOajgOafpeW6lOW9k+abv+aNouS4uuWTquenjeearuiCpAogICAgICAgIC8vIOe9kemhteS4rSAkQ09ORklHLnNraW4g57uZ5Ye65LqG55So5oi36YCJ5oup55qE55qu6IKkCiAgICAgICAgY29uc3QgZGVmYXVsdFNraW4gPSAnc2tpbjA1OCc7CiAgICAgICAgbGV0IHRhcmdldFNraW4gPSBkZWZhdWx0U2tpbjsKICAgICAgICB0cnkgeyB0YXJnZXRTa2luID0gaW5pdC5wYWdlLiRDT05GSUcuc2tpbiB8fCBkZWZhdWx0U2tpbjsgfSBjYXRjaCAoZSkgeyB0YXJnZXRTa2luID0gZGVmYXVsdFNraW47IH0KICAgICAgICBpZiAoL3NraW4zWzU2XVxkLy50ZXN0KHRhcmdldFNraW4pKSB0YXJnZXRTa2luID0gZGVmYXVsdFNraW47CiAgICAgICAgLy8g5qOA5p+l572R6aG15Lit5piv5ZCm6KKr5o+S5YWl5LqG5bm/5ZGK55qu6IKk77yM5aaC5p6c5pyJ5YiZ5o2i5oiQ55So5oi36YCJ5oup55qE77yI5oiW6buY6K6k55qE77yJ55qu6IKkCiAgICAgICAgY29uc3QgdXBkYXRlU2tpbiA9IGZ1bmN0aW9uIHVwZGF0ZVNraW4oKSB7CiAgICAgICAgICBjb25zdCBhZHNraW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsaW5rW2hyZWYqPSIvc2tpbjM1Il0sIGxpbmtbaHJlZio9Ii9za2luMzYiXScpOwogICAgICAgICAgaWYgKGFkc2tpbikgewogICAgICAgICAgICB2ZXJzaW9uID0gbmV3IFVSTChhZHNraW4uaHJlZikuc2VhcmNoUGFyYW1zLmdldCgndmVyc2lvbicpOwogICAgICAgICAgICB1dGlsLmRlYnVnKCdhZCBza2luICVvKHZlcnNpb24gJW8pIGhhcyBiZWVuIHJlcGxhY2VkJywgYWRza2luLmhyZWYsIHZlcnNpb24pOwogICAgICAgICAgICBhZHNraW4uc2V0QXR0cmlidXRlKCdocmVmJywgYC8vaW1nLnQuc2luYWpzLmNuL3Q2L3NraW4vJHt0YXJnZXRTa2lufS9za2luLmNzcz92ZXJzaW9uPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZlcnNpb24pfWApOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgYWRza2luY292ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2tpbl9jb3Zlcl9zW3N0eWxlKj0iL3NraW4zNSJdLCAjc2tpbl9jb3Zlcl9zW3N0eWxlKj0iL3NraW4zNiJdJyk7CiAgICAgICAgICBpZiAoYWRza2luY292ZXIpIGFkc2tpbmNvdmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoIi8vaW1nLnQuc2luYWpzLmNuL3Q2L3NraW4vJHt0YXJnZXRTa2lufS9pbWFnZXMvcHJvZmlsZV9jb3Zlcl9zLmpwZz92ZXJzaW9uPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZlcnNpb24pfSIpYDsKICAgICAgICB9OwogICAgICAgIG9ic2VydmVyLmRvbS5hZGQodXBkYXRlU2tpbik7CgogICAgICAgIC8vIOS4gOS6m+W5v+WRiuWGheWuueeahCBpZnJhbWXvvIzlpoLmnpzov5nkupvkuJzopb/lj6rmmK/pmpDol4/msqHmnInooqvmkZjmjonnmoTor53vvIzph4zpnaLnmoQgSmF2YVNjcmlwdCDkvJrkuI3lgZznmoTmiqXplJnvvIznm7TliLDmiorkvaDnmoTmjqfliLblj7DlvITltKkKICAgICAgICBjb25zdCByZW1vdmVBZElmcmFtZXMgPSBmdW5jdGlvbiByZW1vdmVBZElmcmFtZXMoKSB7CiAgICAgICAgICBjb25zdCBpZnJhbWVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpZnJhbWVbc3JjKj0icy5hbGl0dWkud2VpYm8uY29tIl0nKSk7CiAgICAgICAgICBpZnJhbWVzLmZvckVhY2goZnVuY3Rpb24gKGlmcmFtZSkgewogICAgICAgICAgICBpZnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpZnJhbWUpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBvYnNlcnZlci5kb20uYWRkKHJlbW92ZUFkSWZyYW1lcyk7CgogICAgICAgIC8vIOinhumikeaSreaUvuWujOavleS5i+WQjuS8muiHquWKqOaOqOiNkOS4i+S4gOS4quinhumike+8jOS5i+WJjeW+iOWkmuaYr+ebuOWFs+aOqOiNkO+8jOS9hueOsOWcqOS5n+acieS4jeWwkeaYr+W5v+WRiu+8jOaJgOS7peS4jeWNleeLrOWBmuS4gOS4qumAiemhue+8jOebtOaOpeaUvuWcqOi/memHjOS6hgogICAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gdmlkZW9Ob0F1dG9OZXh0KCkgewogICAgICAgICAgY29uc3QgY2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fYm94X25leHQgW2FjdGlvbi10eXBlPSJuZXh0X2Nsb3NlIl06bm90KFt5YXdmLW5vLWF1dG8tbmV4dF0pJyk7CiAgICAgICAgICBpZiAoIWNsb3NlKSByZXR1cm47CiAgICAgICAgICBjbG9zZS5zZXRBdHRyaWJ1dGUoJ3lhd2Ytbm8tYXV0by1uZXh0JywgJycpOwogICAgICAgICAgY2xvc2UuY2xpY2soKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSkgewogICAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKICAgICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnY2FyZC1ob3Qtc2VhcmNoJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgIHZtLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmJhbmRMaXN0OyB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgY29uc3QgY2xlYW5VcCA9IHZtLmJhbmRMaXN0LmZpbHRlcihpID0+ICFpLmlzX2FkKTsKICAgICAgICAgICAgICBpZiAodm0uYmFuZExpc3QubGVuZ3RoICE9PSBjbGVhblVwLmxlbmd0aCkgdm0uYmFuZExpc3QgPSBjbGVhblVwOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuVG9wV29yZDsgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmICh2bS5Ub3BXb3JkPy5pc19hZCkgdm0uVG9wV29yZCA9IG51bGw7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwgeyBpbW1lZGlhdGU6IHRydWUgfSk7CgogICAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCduZXctaG90JywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgIHZtLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmxpc3Q7IH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBjb25zdCBsaXN0ID0gdm0ubGlzdDsKICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0KSAmJiBsaXN0LnNvbWUoaXRlbSA9PiBpdGVtLnJlYWxwb3MpKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOykgewogICAgICAgICAgICAgICAgICBpZiAoIWxpc3RbaV0ucmVhbHBvcykgewogICAgICAgICAgICAgICAgICAgIGxpc3Quc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB2bS5oYXNUb3AgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSk7CiAgICAgIH0KICAgIH0sCiAgfSk7CiAgaWYgKGVudi5jb25maWcucmVxdWVzdEJsb2NraW5nU3VwcG9ydGVkKSB7CiAgICBjbGVhbi5DbGVhblJ1bGUoJ3RyYWNrZXInLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJUcmFja2VyLCAxLCB7CiAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICBiYWNrZW5kLm9uUmVxdWVzdCgndHJhY2tlcicsIGRldGFpbHMgPT4gewogICAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKCkpIHJldHVybiB7IGNhbmNlbDogdHJ1ZSB9OwogICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgIH0pOwogICAgICB9LAogICAgfSk7CiAgfQogIGNsZWFuLkNsZWFuUnVsZSgnbXVzaWMnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJNdXNpYywgMSwgJy5QQ0RfbXBsYXllciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgndGVtcGxhdGUnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJUZW1wbGF0ZSwgMSwgJy5pY29uX3NldHNraW4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2hvbWVfdGlwJywgKCkgPT4gaTE4bi5jbGVhbk90aGVySG9tZVRpcCwgMSwgJyN2Nl9wbF9jb250ZW50X2hvbWV0aXAgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZm9vdGVyJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyRm9vdGVyLCAxLCB7CiAgICAvLyDnm7TmjqUgZGlzcGxheTogbm9uZSDnmoTor53vvIzlj5HnjrDpobXpnaLnmoTlt6bovrnmoI/kvJrpo5jotbAKICAgIGFjc3M6ICcuZ2xvYmFsX2Zvb3RlciwgLldCX2Zvb3RlciB7IGhlaWdodDogMDsgb3ZlcmZsb3c6IGhpZGRlbjsgfScsCiAgICByZWY6IHsgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jbGVhbk90aGVyRm9vdGVyRGV0YWlsIH0gfSwKICB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ2ltJywgKCkgPT4gaTE4bi5jbGVhbk90aGVySU0sIDEsIHsKICAgIGFjc3M6ICcuV0Jfd2ViaW0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5PdGhlcklNRGV0YWlsIH0gfSwKICB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ2ltX25ld3MnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJJTU5ld3MsIDEsICcud2ViaW1fbmV3cyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnYmFja190b3AnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJCYWNrVG9wLCAxLCAnLldfZ290b3AgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3RpcCcsICgpID0+IGkxOG4uY2xlYW5PdGhlclRpcCwgMSwgewogICAgYWNzczogJy5XX2xheWVyX3RpcHMgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5PdGhlclRpcERldGFpbCB9IH0sCiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWxhdGVkX2ZlZWRzJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyUmVsYXRlZEZlZWRzLCAxLCB7CiAgICBhY3NzOiAnW3lhd2Ytb2JqLW5hbWU9IuebuOWFs+aOqOiNkCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9ICNXQl93ZWJpbSAud2JpbV9jaGF0X2JveCwgI1dCX3dlYmltIC53YmltX21pbl9jaGF0ICB7IHJpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5PdGhlclJlbGF0ZWRGZWVkc0RldGFpbCB9IH0sCiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWxhdGVkX3ZpZGVvJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyUmVsYXRlZFZpZGVvLCAxLCAnLnZpZGVvX2JveF9tb3JlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWxhdGVkX2FydGljbGUnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJSZWxhdGVkQXJ0aWNsZSwgMSwgJy5XQl9hcnRpY2FsIFtub2RlLXR5cGU9InJlY29tbWVuZCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdzZW5kX3dlaWJvJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyU2VuZFdlaWJvLCAxLCB7CiAgICBhY3NzOiAnLnNlbmRfd2VpYm9fc2ltcGxlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywKICAgIHJlZjogeyBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNsZWFuT3RoZXJTZW5kV2VpYm9EZXRhaWwgfSB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2xheW91dC9sYXlvdXQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBpMThuLmxheW91dFRhYlRpdGxlID0gewogICAgY246ICfniYjpnaLlsZXnpLonLAogICAgZW46ICdMYXlvdXQnLAogIH07CgogIGNvbnN0IGxheW91dCA9IHlhd2YucnVsZXMubGF5b3V0ID0ge307CiAgbGF5b3V0LmxheW91dCA9IHJ1bGUuVGFiKHsKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmxheW91dFRhYlRpdGxlLAogICAgcGFnZW1lbnU6IHRydWUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvbGF5b3V0L25hdmJhci5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBsYXlvdXQgPSB5YXdmLnJ1bGVzLmxheW91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgbmF2YmFyID0gbGF5b3V0Lm5hdmJhciA9IHt9OwoKICBpMThuLm5hdmJhclRvb2xHcm91cFRpdGxlID0gewogICAgY246ICflr7zoiKrmoI8nLAogICAgdHc6ICflsI7opr3liJcnLAogICAgZW46ICdOYXZiYXInLAogIH07CgogIG5hdmJhci5uYXZiYXIgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm5hdmJhclRvb2xHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLm5hdmJhckF1dG9IaWRlID0gewogICAgY246ICfoh6rliqjpmpDol4/lr7zoiKrmoI8nLAogICAgdHc6ICfoh6rli5XpmrHol4/lsI7opr3liJcnLAogICAgZW46ICdOYXZiYXIgaGlkZSBhdXRvbWF0aWNhbGx5JywKICB9OwoKICBuYXZiYXIuYXV0b0hpZGUgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbmF2X2F1dG9faGlkZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBuYXZiYXIubmF2YmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubmF2YmFyQXV0b0hpZGUsCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgYXR0ciA9ICd5YXdmLW5hdmJhci1hdXRvaGlkZSc7CiAgICAgIGNvbnN0IHVwZGF0ZU5hdkZsb2F0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IG5hdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZ2xvYmFsX25hdicpOwogICAgICAgIGlmICghbmF2cy5sZW5ndGgpIHJldHVybjsKICAgICAgICAvLyDkvaDog73nm7jkv6HlkJfvvJ/lr7zoiKrmoI/kuI3kuIDlrprmnInkuIDkuKrjgILlvojnpZ7lpYfnmoTlkaIKICAgICAgICBjb25zdCB5ID0gd2luZG93LnNjcm9sbFk7CiAgICAgICAgQXJyYXkuZnJvbShuYXZzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYXYpIHsKICAgICAgICAgIGNvbnN0IGYgPSBuYXYuaGFzQXR0cmlidXRlKGF0dHIpLCByID0gNDI7CiAgICAgICAgICBpZiAoeSA8IHIgJiYgZikgbmF2LnJlbW92ZUF0dHJpYnV0ZShhdHRyKTsKICAgICAgICAgIGlmICh5ID49IHIgJiYgIWYpIG5hdi5zZXRBdHRyaWJ1dGUoYXR0ciwgJycpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB1cGRhdGVOYXZGbG9hdCk7CiAgICAgIHVwZGF0ZU5hdkZsb2F0KCk7CiAgICAgIGNzcy5hcHBlbmQoYAouV0JfZ2xvYmFsX25hdjpub3QoWyR7YXR0cn1dKSwgLldCX2dsb2JhbF9uYXZbJHthdHRyfV0geyBtYXJnaW4tdG9wOiAtNTBweDsgdG9wOiA1MHB4OyBib3gtc2hhZG93OiBub25lOyB9Ci5XQl9nbG9iYWxfbmF2WyR7YXR0cn1dIHsgdG9wOiAwOyB0cmFuc2l0aW9uOiB0b3AgZWFzZS1pbi1vdXQgMC4xcyAwLjMzczsgfQouV0JfZ2xvYmFsX25hdlske2F0dHJ9XTpob3ZlciB7IHRvcDogNTBweDsgdHJhbnNpdGlvbjogdG9wIGVhc2UtaW4tb3V0IDAuMXMgMHM7IH0KLldCX2dsb2JhbF9uYXZbJHthdHRyfV06Zm9jdXMtd2l0aGluIHsgdG9wOiA1MHB4OyB0cmFuc2l0aW9uOiB0b3AgZWFzZS1pbi1vdXQgMC4xcyAwczsgfQouV0JfZ2xvYmFsX25hdlske2F0dHJ9XTo6YWZ0ZXIgeyBjb250ZW50OiAiICI7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDhweDsgY2xlYXI6IGJvdGg7IGZsb2F0OiBsZWZ0OyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCByZ2JhKDAsIDAsIDAsIDAuMykgMCUsIHRyYW5zcGFyZW50IDc1JSwgdHJhbnNwYXJlbnQgMTAwJSk7IH0KLyog5Zu65a6a5bCP6buE562+5L2N572uICovCi5XQl9nbG9iYWxfbmF2WyR7YXR0cn1dIC5nbl90b3BtZW51bGlzdF90aXBzIHsgcGFkZGluZy10b3A6IDUycHg7IHRyYW5zaXRpb246IHBhZGRpbmctdG9wIGVhc2UtaW4tb3V0IDAuMXMgMC4zM3M7IH0KLldCX2dsb2JhbF9uYXZbJHthdHRyfV06aG92ZXIgLmduX3RvcG1lbnVsaXN0X3RpcHMgeyBwYWRkaW5nLXRvcDogMnB4OyB0cmFuc2l0aW9uOiBwYWRkaW5nLXRvcCBlYXNlLWluLW91dCAwLjFzIDBzOyB9Ci5XQl9nbG9iYWxfbmF2WyR7YXR0cn1dIC5nbl90b3BtZW51bGlzdF90aXBzIC5maWNvbl9jbG9zZSB7IHRvcDogNTZweDsgdHJhbnNpdGlvbjogdG9wIGVhc2UtaW4tb3V0IDAuMXMgMC4zM3M7IH0KLldCX2dsb2JhbF9uYXZbJHthdHRyfV06aG92ZXIgLmduX3RvcG1lbnVsaXN0X3RpcHMgLmZpY29uX2Nsb3NlIHsgdG9wOiA2cHg7IHRyYW5zaXRpb246IHRvcCBlYXNlLWluLW91dCAwLjFzIDBzOyB9Ci8qIOa1ruWKqOWFg+e0oCAqLwouV19maXhlZF90b3AgeyB0b3A6IDEwcHggIWltcG9ydGFudDsgfQpgKTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgcmVvcmRlck5hdmJhcjogewogICAgICBjbjogJ+aBouWkjeaXp+W8j+WvvOiIquagj+aOkuWIlyB7e2l9fScsCiAgICAgIGhrOiAn5oGi5b6p5pen5byP5a+86KeI5YiX5o6S5YiXIHt7aX19JywKICAgICAgZW46ICdSZXN0b3JlIG9sZCBuYXZiYXIgbGF5b3V0IHt7aX19JywKICAgIH0sCiAgICByZW9yZGVyTmF2YmFyRGV0YWlsOiB7CiAgICAgIGNuOiAn5b6u5Y2a5a2X5qC357Sn6LS05Zyo5qCH6K+G5Y+z5L6n5pi+56S677yM4oCc6aaW6aG14oCd4oCc54Ot6Zeo4oCd4oCc5ri45oiP4oCd55qE6ZO+5o6l5Ye6546w5Zyo5pCc57Si5qGG55qE5bem5L6n44CCJywKICAgIH0sCiAgfSk7CgogIG5hdmJhci5vbGRMYXlvdXQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbmF2X2NsYXNzaWNhbCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBuYXZiYXIubmF2YmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVvcmRlck5hdmJhciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVvcmRlck5hdmJhckRldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBtb3ZlTmF2TGlzdCA9IGZ1bmN0aW9uIG1vdmVOYXZMaXN0KCkgewogICAgICAgIGNvbnN0IHNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2gsIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjInKTsKICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX2dsb2JhbF9uYXYgLmduX2hlYWRlciAuZ25fcG9zaXRpb24gLmduX25hdiAuZ25fbmF2X2xpc3QnKTsKICAgICAgICBpZiAoIXNlYXJjaCB8fCAhbGlzdCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykpLnNsaWNlKDAsIC0xKTsKICAgICAgICBjb25zdCBnbmxpc3RXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgZ25saXN0V3JhcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iZ25fbmF2Ij48dWwgY2xhc3M9ImduX25hdl9saXN0Ij48L3VsPjwvZGl2Pic7CiAgICAgICAgY29uc3Qgbmxpc3QgPSBnbmxpc3RXcmFwLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAobCkgeyBubGlzdC5hcHBlbmRDaGlsZChsKTsgfSk7CiAgICAgICAgc2VhcmNoLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdubGlzdFdyYXAuZmlyc3RDaGlsZCwgc2VhcmNoKTsKICAgICAgICBzZWFyY2gucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChzZWFyY2gpOwogICAgICAgIGNzcy5hcHBlbmQoYAouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2gsCi5XQl9nbG9iYWxfbmF2LldCX2dsb2JhbF9uYXYgLmduX3NlYXJjaF92MiB7IGZsb2F0OiByaWdodDsgfQouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9oZWFkZXIgeyB0ZXh0LWFsaWduOiByaWdodDsgfQouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9oZWFkZXIgPiAqIHsgdGV4dC1hbGlnbjogbGVmdDsgfQouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9oZWFkZXIgPiAuZ25fbmF2IHsgbWFyZ2luLXJpZ2h0OiAwOyB9Ci5XQl9nbG9iYWxfbmF2X3VzLldCX2dsb2JhbF9uYXZfdXMgLmduX2hlYWRlciB7IGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7IH0KLldCX2dsb2JhbF9uYXZfdXMuV0JfZ2xvYmFsX25hdl91cyAuZ25fbG9nbywKLldCX2dsb2JhbF9uYXZfdXMuV0JfZ2xvYmFsX25hdl91cyAuZ25fbG9nbyAuYm94LAouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9sb2dvLAouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9sb2dvIGEgeyB3aWR0aDogMTQwcHggIWltcG9ydGFudDsgbGVmdDogMCAhaW1wb3J0YW50OyB9Ci5XQl9nbG9iYWxfbmF2X3VzLldCX2dsb2JhbF9uYXZfdXMgLmduX2xvZ28gLmJveCAubG9nbywKLldCX2dsb2JhbF9uYXZfdXMuV0JfZ2xvYmFsX25hdl91cyAuZ25fbG9nbyAuYm94IGltZyB7IGRpc3BsYXk6IGJsb2NrOyB9Ci5XQl9nbG9iYWxfbmF2LldCX2dsb2JhbF9uYXYgLmduX2xvZ28gLmJveCAubG9nbyB7IG1hcmdpbi1sZWZ0OiAwOyB9Ci5XQl9nbG9iYWxfbmF2X3VzLldCX2dsb2JhbF9uYXZfdXMgLmduX3Bvc2l0aW9uIHsgbWFyZ2luLXJpZ2h0OiAwOyB9CmApOwogICAgICAgIG9ic2VydmVyLmRvbS5yZW1vdmUobW92ZU5hdkxpc3QpOwogICAgICB9OwogICAgICBvYnNlcnZlci5kb20uYWRkKG1vdmVOYXZMaXN0KTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgbmF2SGlkZU5hbWU6IHsgY246ICflr7zoiKrmoI/kuIrnmoTnlKjmiLflkI18e3thY3R9fSAoVjYpe3tpfX0nLCB0dzogJ+WwjuimveWIl+S4iueahOeUqOaItuWQjXx7e2FjdH19IChWNil7e2l9fScsIGVuOiAnVXNlcm5hbWUgb24gbmF2IGJhciB3b3VsZCBiZSB8IHt7YWN0fX0gKFY2KXt7aX19JyB9LAogICAgbmF2SGlkZU5hbWVSZXBsYWNlOiB7IGNuOiAn5pu/5o2i5Li64oCc5Liq5Lq65Li76aG14oCdJywgdHc6ICfmm7/mj5vngrrjgIzlgIvkurrkuLvpoIHjgI0nLCBlbjogJ3JlcGxhY2VkIGJ5IHRleHQgIk15IFByb2ZpbGUiJyB9LAogICAgbmF2SGlkZU5hbWVIaWRkZW46IHsgY246ICfpmpDol48nLCB0dzogJ+maseiXjycsIGVuOiAnaGlkZGVuJyB9LAogICAgbmF2SGlkZU5hbWVEZXRhaWw6IHsKICAgICAgY246ICfmraTlpJbmgqjov5jlj6/ku6XpmpDol4/pmpDol4/lj7PmoI/nmoQgW1tjbGVhbl9yaWdodF9pbmZvXV0g5qih5Z2X44CC5Lul5Y+K5omT5byAIFtbbGF5b3V0X25hdl9hdXRvX2hpZGVdXSDjgIInLAogICAgfSwKICAgIG5hdkhpZGVOYW1lUmVwbGFjZVRleHQ6IHsgY246ICfkuKrkurrkuLvpobUnLCB0dzogJ+WAi+S6uuS4u+mggScsIGVuOiAnTXkgUHJvZmlsZScgfSwKICB9KTsKCiAgY29uc3QgaGlkZU5hdk5hbWUgPSBjc3MuYWRkKCcueWF3Zi1XQlY2IC5XQl9nbG9iYWxfbmF2IC5nbl9uYXZfbGlzdCBsaS5nbl9uYW1lLlNfdHh0MSB7IGRpc3BsYXk6IG5vbmU7IH0nKTsKICBuYXZiYXIubmF2SGlkZU5hbWUgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbmF2X2hpZGVfbmFtZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBuYXZiYXIubmF2YmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubmF2SGlkZU5hbWUsCiAgICByZWY6IHsKICAgICAgYWN0OiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnaGlkZGVuJywgdGV4dDogKCkgPT4gaTE4bi5uYXZIaWRlTmFtZUhpZGRlbiB9LAogICAgICAgICAgeyB2YWx1ZTogJ3JlcGxhY2UnLCB0ZXh0OiAoKSA9PiBpMThuLm5hdkhpZGVOYW1lUmVwbGFjZSB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5uYXZIaWRlTmFtZURldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGlmICh0aGlzLmdldENvbmZpZygpKSB7CiAgICAgICAgaWYgKHRoaXMucmVmLmFjdC5nZXRDb25maWcoKSA9PT0gJ3JlcGxhY2UnKSB7CiAgICAgICAgICBjc3MuYXBwZW5kKGAKLldCX2dsb2JhbF9uYXYgLmduX25hdl9saXN0IGxpIC5nbl9uYW1lIC5TX3R4dDE6OmJlZm9yZSB7IGNvbnRlbnQ6ICIke2kxOG4ubmF2SGlkZU5hbWVSZXBsYWNlVGV4dH0iOyBkaXNwbGF5OiBibG9jazsgfQouV0JfZ2xvYmFsX25hdiAuZ25fbmF2X2xpc3QgbGkgLmduX25hbWUgLlNfdHh0MSB7IGhlaWdodDogMjZweDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogNGVtOyB9CmApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjc3MuYXBwZW5kKCcuV0JfZ2xvYmFsX25hdiAuZ25fbmF2X2xpc3QgbGkgYS5nbl9uYW1lIC5TX3R4dDEgeyBkaXNwbGF5OiBub25lOyB9Jyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGhpZGVOYXZOYW1lLnJlbW92ZSgpOwogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBuYXZIaWRlQXZhdGFyOiB7IGNuOiAn5a+86Iiq5qCP5LiN5pi+56S65Liq5Lq65aS05YOPIChWNyknIH0sCiAgfSk7CiAgY29uc3QgaGlkZU5hdkF2YXRhciA9IGNzcy5hZGQoJy55YXdmLVdCVjcgW2NsYXNzKj0iQ3RybHNfYXZhdGFySXRlbV8iXSB7IHZpc2liaWxpdHk6IGhpZGRlbjsgfScpOwogIG5hdmJhci5uYXZIaWRlQXZhdGFyID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNywKICAgIGlkOiAnbGF5b3V0X25hdl9oaWRlX2F2YXRhcicsCiAgICB2ZXJzaW9uOiA4NSwKICAgIHBhcmVudDogbmF2YmFyLm5hdmJhciwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm5hdkhpZGVBdmF0YXIsCiAgICBpbml0KCkgewogICAgICBoaWRlTmF2QXZhdGFyLnJlbW92ZSgpOwogICAgICBpZiAoIXRoaXMuZ2V0Q29uZmlnKCkpIHJldHVybjsKICAgICAgY29uc3Qgc3ByaXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ19fU1ZHX1NQUklURV9OT0RFX18nKTsKICAgICAgY29uc3Qgc3ZnID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhgPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8c3ltYm9sIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAzMCAzMCIgaWQ9Indvb19zdmdfbmF2X3Byb2ZpbGUiPgo8cGF0aCBkPSJtMjEuOTE2IDEwLjRxMC0xLjg1ODktMC45MzE1OS0zLjQ1LTAuOTMxNTctMS41OTExLTIuNTI2My0yLjUyMDUtMS41OTQ3LTAuOTI5NDYtMy40NTc5LTAuOTI5NDYtMS44NjMyIDAtMy40NTc5IDAuOTI5NDYtMS41OTQ3IDAuOTI5NDMtMi41MjYzIDIuNTIwNS0wLjkzMTU4IDEuNTkxMS0wLjkzMTU4IDMuNDUgMCAxLjczMjkgMC44MjEwNSAzLjI0NTIgMC44MjEwNiAxLjUxMjMgMi4yMTA1IDIuNDU3NS0xLjg2MzIgMC43NTYxNi0zLjI4NDIgMi4xNzQtMS40MjExIDEuNDE3OC0yLjIxMDUgMy4yNDUyLTAuODIxMDUgMS44OTA0LTAuODIxMDUgMy45Njk5IDAgMC40MDk1OCAwLjI4NDIxIDAuNzA4OSAwLjI4NDIgMC4yOTkzMiAwLjY5NDc0IDAuMjk5MzJoMTguNDQycTAuNDEwNTIgMCAwLjY5NDc0LTAuMjk5MzIgMC4yODQyMS0wLjI5OTMyIDAuMjg0MjEtMC43MDg5IDAtMi4wNzk1LTAuODIxMDUtMy45Njk5LTAuNzg5NDgtMS44Mjc0LTIuMjEwNS0zLjI0NTItMS40MjExLTEuNDE3OC0zLjI4NDItMi4xNzQgMS4zODk1LTAuOTQ1MjEgMi4yMTA1LTIuNDU3NSAwLjgyMTA2LTEuNTEyMyAwLjgyMTA2LTMuMjQ1MnptLTYuOTE1OCA0LjY2M3EtMS4yNjMyIDAtMi4zMzY4LTAuNjMwMTQtMS4wNzM3LTAuNjMwMTQtMS43MDUzLTEuNzAxNC0wLjYzMTU4LTEuMDcxMi0wLjYzMTU4LTIuMzMxNSAwLTEuMjYwMyAwLjYzMTU4LTIuMzMxNSAwLjYzMTU4LTEuMDcxMiAxLjcwNTMtMS43MDE0IDEuMDczNy0wLjYzMDE0IDIuMzM2OC0wLjYzMDE0IDEuMjYzMiAwIDIuMzM2OCAwLjYzMDE0IDEuMDczNyAwLjYzMDE0IDEuNzA1MyAxLjcwMTQgMC42MzE1OCAxLjA3MTIgMC42MzE1OCAyLjMzMTUgMCAxLjI2MDMtMC42MzE1OCAyLjMzMTUtMC42MzE1OCAxLjA3MTItMS43MDUzIDEuNzAxNC0xLjA3MzcgMC42MzAxNC0yLjMzNjggMC42MzAxNHptLTguMTc4OSA5LjQ1MnEwLjI1MjY0LTIuMDE2NCAxLjQwNTMtMy42NzA1IDEuMTUyNi0xLjY1NDEgMi45MzY4LTIuNTk5MyAxLjc4NDItMC45NDUyMSAzLjgzNjgtMC45NDUyMSAyLjA1MjYgMCAzLjgzNjggMC45NDUyMSAxLjc4NDIgMC45NDUxOSAyLjkzNjggMi41OTkzIDEuMTUyNiAxLjY1NDEgMS40MDUzIDMuNjcwNXoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPgo8L3N5bWJvbD4KPHN5bWJvbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMzAgMzAiIGlkPSJ3b29fc3ZnX25hdl9wcm9maWxlRmxhdCI+CjxwYXRoIGQ9Im0yMS45MTYgMTAuNGMwLTEuMjM5My0wLjMxMDUzLTIuMzg5My0wLjkzMTU5LTMuNDUtMC42MjEwNC0xLjA2MDctMS40NjMyLTEuOTAwOS0yLjUyNjMtMi41MjA1LTEuMDYzMi0wLjYxOTY0LTIuMjE1OC0wLjkyOTQ2LTMuNDU3OS0wLjkyOTQ2LTEuMjQyMSAwLTIuMzk0NyAwLjMwOTgyLTMuNDU3OSAwLjkyOTQ2LTEuMDYzMiAwLjYxOTYyLTEuOTA1MyAxLjQ1OTgtMi41MjYzIDIuNTIwNS0wLjYyMTA2IDEuMDYwNy0wLjkzMTU4IDIuMjEwOC0wLjkzMTU4IDMuNDUgMCAxLjE1NTIgMC4yNzM2OCAyLjIzNyAwLjgyMTA1IDMuMjQ1MiAwLjU0NzM3IDEuMDA4MiAxLjI4NDIgMS44Mjc0IDIuMjEwNSAyLjQ1NzUtMS4yNDIxIDAuNTA0MTEtMi4zMzY4IDEuMjI4OC0zLjI4NDIgMi4xNzQtMC45NDczNyAwLjk0NTIxLTEuNjg0MiAyLjAyNjktMi4yMTA1IDMuMjQ1Mi0wLjU0NzM3IDEuMjYwMy0wLjgyMTA1IDIuNTgzNS0wLjgyMTA1IDMuOTY5OSAwIDAuMjczMDYgMC4wOTQ3MzcgMC41MDkzNiAwLjI4NDIxIDAuNzA4OSAwLjE4OTQ3IDAuMTk5NTUgMC40MjEwNSAwLjI5OTMyIDAuNjk0NzQgMC4yOTkzMmgxOC40NDJjMC4yNzM2OCAwIDAuNTA1MjYtMC4wOTk3NyAwLjY5NDc0LTAuMjk5MzIgMC4xODk0Ny0wLjE5OTU1IDAuMjg0MjEtMC40MzU4NSAwLjI4NDIxLTAuNzA4OSAwLTEuMzg2My0wLjI3MzY4LTIuNzA5Ni0wLjgyMTA1LTMuOTY5OS0wLjUyNjMyLTEuMjE4My0xLjI2MzItMi4zLTIuMjEwNS0zLjI0NTItMC45NDczNy0wLjk0NTIxLTIuMDQyMS0xLjY2OTktMy4yODQyLTIuMTc0IDAuOTI2MzItMC42MzAxNCAxLjY2MzItMS40NDkzIDIuMjEwNS0yLjQ1NzUgMC41NDczNy0xLjAwODIgMC44MjEwNi0yLjA4OTkgMC44MjEwNi0zLjI0NTJ6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KPC9zeW1ib2w+Cjwvc3ZnPmAsICdpbWFnZS9zdmcreG1sJyk7CiAgICAgIFsuLi5zdmcucXVlcnlTZWxlY3RvckFsbCgnc3ltYm9sJyldLmZvckVhY2goc3ltYm9sID0+IHNwcml0ZS5hcHBlbmRDaGlsZChzeW1ib2wpKTsKICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXkpIHsKICAgICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdjdHJscycsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubmF2SXRlbXM7IH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHZtLm5hdkl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLm5hbWUgPT09ICdwcm9maWxlJyk7CiAgICAgICAgICAgIGlmIChwcm9maWxlPy5zcmMpIHByb2ZpbGUuc3JjID0gJyc7CiAgICAgICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgICAgfSwgeyBkZWVwOiB0cnVlLCBpbW1lZGlhdGU6IHRydWUgfSk7CiAgICAgICAgfSk7CiAgICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXkpOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9sYXlvdXQvc2lkZWJhci5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgcnVsZXMgPSB5YXdmLnJ1bGVzOwoKICBjb25zdCBsYXlvdXQgPSB5YXdmLnJ1bGVzLmxheW91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKICBjb25zdCBwcmlvcml0eSA9IHV0aWwucHJpb3JpdHk7CgogIGNvbnN0IHNpZGViYXIgPSBsYXlvdXQuc2lkZWJhciA9IHt9OwoKICBpMThuLnNpZGViYXJUb29sR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn6L655qCPJywKICAgIHR3OiAn6YKK5qyEJywKICAgIGVuOiAnU2lkZWJhcicsCiAgfTsKCiAgc2lkZWJhci5zaWRlYmFyID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaWRlYmFyVG9vbEdyb3VwVGl0bGUsCiAgfSk7CgogIGNvbnN0IHNpZGViYXJPbiA9IGNvbmZpZyA9PiB7CiAgICBpZiAoc2lkZWJhci5tZXJnZS5yZWYuc2lkZS5nZXRDb25maWcoKSAhPT0gY29uZmlnKSB7CiAgICAgIHNpZGViYXIubWVyZ2UucmVmLnNpZGUuc2V0Q29uZmlnKGNvbmZpZyk7CiAgICB9CiAgICBpZiAoc2lkZWJhci5hbGxTaWRlYmFyT24ucmVmLnNpZGUuZ2V0Q29uZmlnKCkgIT09IGNvbmZpZykgewogICAgICBzaWRlYmFyLmFsbFNpZGViYXJPbi5yZWYuc2lkZS5zZXRDb25maWcoY29uZmlnKTsKICAgIH0KICB9OwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHNpZGViYXJTaG93TWVzc2FnZXM6IHsKICAgICAgY246ICflnKjpppbpobXlt6bmoI/mmL7npLrmtojmga/liIbnu4TvvIzljIXmi6zku6XkuIvpk77mjqV7e2l9fXx8e3thdG1lfX18e3tjbXR9fXx7e2xpa2V9fXx7e2RtfX18e3ttc2dib3h9fXx7e2dyb3VwfX18e3tkbXN1Yn19JywKICAgICAgdHc6ICflnKjpppbpoIHlt6bmrITpoa/npLrmtojmga/liIbntYTvvIzljIXmi6zku6XkuIvpgKPntZB7e2l9fXx8e3thdG1lfX18e3tjbXR9fXx7e2xpa2V9fXx7e2RtfX18e3ttc2dib3h9fXx7e2dyb3VwfX18e3tkbXN1Yn19JywKICAgICAgZW46ICdTaG93IGEgbGluayB0byBuZXcgbWVzc2FnZXMgaW4gbGVmdCBjb2x1bW4gb2YgaG9tZSBwYWdlIHdpdGggZm9sbG93aW5nIGl0ZW1zIHt7aX19fHx7e2F0bWV9fXx7e2NtdH19fHt7bGlrZX19fHx7e2RtfX18e3ttc2dib3h9fXx7e2dyb3VwfX18e3tkbXN1Yn19JywKICAgIH0sCiAgICBzaWRlYmFyU2hvd01lc3NhZ2VzV2FybmluZzogewogICAgICBjbjogJ+WcqOWIhui+qOeOh+i+g+Wwj+eahOWxj+W5leS4iua3u+WKoOi/h+WkmumhueebruWPr+iDveWvvOiHtOaYvuekuuS4jeWujOWFqOOAgicsCiAgICAgIHR3OiAn54aS5bmV6Kej5p6Q5bqm6YGO5bCP5pmC5Yqg5YWl6YGO5aSa6YCj5o6l5Y+v6Ie054Sh5rOV5a6M5YWo6aGv56S644CCJywKICAgICAgZW46ICdJdCBtYXkgbm90IGRpc3BsYXllZCBjb3JyZWN0bHkgaWYgdG9vIG1hbnkgbGlua3MgYWRkZWQgb24gYSBsb3cgcmVzb2x1dGlvbiBtb25pdG9yLicsCiAgICB9LAogICAgc2lkZWJhclNob3dNZXNzYWdlc01zZzogeyBjbjogJ+a2iOaBrycsIGVuOiAnTmV3cycgfSwKICAgIHNpZGViYXJTaG93TWVzc2FnZXNBdE1lOiB7IGNuOiAnQOaIkeeahCcsIHR3OiAnQOaIkeeahCcsIGVuOiAnTWVudGlvbmVkJyB9LAogICAgc2lkZWJhclNob3dNZXNzYWdlc0NtdDogeyBjbjogJ+ivhOiuuicsIHR3OiAn6KmV6KuWJywgZW46ICdDb21tZW50JyB9LAogICAgc2lkZWJhclNob3dNZXNzYWdlc0xpa2U6IHsgY246ICfotZ4nLCB0dzogJ+iumicsIGVuOiAnTGlrZScgfSwKICAgIHNpZGViYXJTaG93TWVzc2FnZXNETTogeyBjbjogJ+engeS/oScsIGVuOiAnTWVzc2FnZScgfSwKICAgIHNpZGViYXJTaG93TWVzc2FnZXNNc2dCb3g6IHsgY246ICfmnKrlhbPms6jkurrnp4Hkv6EnLCB0dzogJ+acqumXnOazqOS6uuengeS/oScsIGVuOiAiU3RyYW5nZXJzJyBNZXNzYWdlcyIgfSwKICAgIHNpZGViYXJTaG93TWVzc2FnZXNHcm91cDogeyBjbjogJ+e+pOmAmuefpScsIGVuOiAnR3JvdXAgbWVzc2FnZScgfSwKICAgIHNpZGViYXJTaG93TWVzc2FnZXNETVN1YjogeyBjbjogJ+iuoumYhea2iOaBrycsIHR3OiAn6KiC6Zax5raI5oGvJywgZW46ICdTdWJzY3JpYmUnIH0sCiAgfSk7CgogIHNpZGViYXIubWVzc2FnZXMgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbGVmdF9tZXNzYWdlcycsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBzaWRlYmFyLnNpZGViYXIsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaWRlYmFyU2hvd01lc3NhZ2VzLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhclNob3dNZXNzYWdlc1dhcm5pbmcgfSwKICAgICAgYXRtZTogeyB0eXBlOiAnYm9vbGVhbicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJTaG93TWVzc2FnZXNBdE1lLCBpbml0aWFsKCkgeyByZXR1cm4gdHJ1ZTsgfSB9LAogICAgICBjbXQ6IHsgdHlwZTogJ2Jvb2xlYW4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaWRlYmFyU2hvd01lc3NhZ2VzQ210LCBpbml0aWFsKCkgeyByZXR1cm4gdHJ1ZTsgfSB9LAogICAgICBsaWtlOiB7IHR5cGU6ICdib29sZWFuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhclNob3dNZXNzYWdlc0xpa2UgfSwKICAgICAgZG06IHsgdHlwZTogJ2Jvb2xlYW4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaWRlYmFyU2hvd01lc3NhZ2VzRE0gfSwKICAgICAgbXNnYm94OiB7IHR5cGU6ICdib29sZWFuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhclNob3dNZXNzYWdlc01zZ0JveCB9LAogICAgICBncm91cDogeyB0eXBlOiAnYm9vbGVhbicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJTaG93TWVzc2FnZXNHcm91cCB9LAogICAgICBkbXN1YjogeyB0eXBlOiAnYm9vbGVhbicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJTaG93TWVzc2FnZXNETVN1YiB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgY29uc3QgaHRtbCA9IHsKICAgICAgICBtc2c6IHRlbXBsYXRlID0+IHRlbXBsYXRlLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJsZXZfQm94IGxldl9Cb3hfbm9ib3JkZXIgeWF3Zi1sZWZ0TXNnIj48aDMgY2xhc3M9ImxldiI+PGEgaHJlZj0iL2F0L3dlaWJvP2xlZnRuYXY9MSIgY2xhc3M9IlNfdHh0MSIgbm9kZS10eXBlPSJpdGVtIiBzdWRhLXVhdHJhY2s9ImtleT1WNnVwZGF0ZV9sZWZ0bmF2aWdhdGUmYW1wO3ZhbHVlPW1lc3NhZ2UiIGJwZmlsdGVyPSJtZXNzYWdlIj48c3BhbiBjbGFzcz0ibGV2dHh0IHlhd2YtbGV2dHh0Ij48L3NwYW4+PC9hPjwvaDM+PC9kaXY+JywKICAgICAgICBhdG1lOiB0ZW1wbGF0ZSA9PiB0ZW1wbGF0ZS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibGV2IiB5YXdmLWlkPSJsZWZ0bmF2X21zZ19hdCI+PGEgY2xhc3M9IlNfdHh0MSIgbm09Im1lbnRpb25fYWxsIiBicGZpbHRlcj0ibWVzc2FnZSIgaHJlZmV4dHJhPSIvYXQvd2VpYm98L2F0L2NvbW1lbnQiIG50PSJtZW50aW9uIiBub2RlLXR5cGU9Iml0ZW0iIGhyZWY9Ii9hdC93ZWlibz9sZWZ0bmF2PTEmYW1wO3d2cj02JmFtcDtub2ZpbHRlcj0xIj48c3BhbiBjbGFzcz0iaWNvX2Jsb2NrIj48ZW0gbm9kZS10eXBlPSJsZWZ0X2l0ZW0iIGNsYXNzPSJXX2ZpY29uIGZpY29uX2RvdCBTX2ZpY29uIj5EPC9lbT48L3NwYW4+PHNwYW4gY2xhc3M9ImxldnR4dCB5YXdmLWxldnR4dCI+PC9zcGFuPjwvYT48L2Rpdj4nLAogICAgICAgIGNtdDogdGVtcGxhdGUgPT4gdGVtcGxhdGUuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxldiIgeWF3Zi1pZD0ibGVmdG5hdl9tc2dfY210Ij48YSBjbGFzcz0iU190eHQxIiBubT0iY210X2FsbCIgYnBmaWx0ZXI9Im1lc3NhZ2UiIGhyZWZleHRyYT0iL2NvbW1lbnQvaW5ib3h8L2NvbW1lbnQvb3V0Ym94IiBub2RlLXR5cGU9Iml0ZW0iIGhyZWY9Ii9jb21tZW50L2luYm94P2xlZnRuYXY9MSZhbXA7d3ZyPTYiPjxzcGFuIGNsYXNzPSJpY29fYmxvY2siPjxlbSBub2RlLXR5cGU9ImxlZnRfaXRlbSIgY2xhc3M9IldfZmljb24gZmljb25fZG90IFNfZmljb24iPkQ8L2VtPjwvc3Bhbj48c3BhbiBjbGFzcz0ibGV2dHh0IHlhd2YtbGV2dHh0Ij48L3NwYW4+PC9hPjwvZGl2PicsCiAgICAgICAgbGlrZTogdGVtcGxhdGUgPT4gdGVtcGxhdGUuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxldiIgeWF3Zi1pZD0ibGVmdG5hdl9tc2dfbGlrZSI+PGEgY2xhc3M9IlNfdHh0MSIgbm09ImF0dGl0dWRlIiBicGZpbHRlcj0ibWVzc2FnZSIgbm9kZS10eXBlPSJpdGVtIiBocmVmPSIvbGlrZS9pbmJveD9sZWZ0bmF2PTEmYW1wO3d2cj02Ij48c3BhbiBjbGFzcz0iaWNvX2Jsb2NrIj48ZW0gbm9kZS10eXBlPSJsZWZ0X2l0ZW0iIGNsYXNzPSJXX2ZpY29uIGZpY29uX2RvdCBTX2ZpY29uIj5EPC9lbT48L3NwYW4+PHNwYW4gY2xhc3M9ImxldnR4dCB5YXdmLWxldnR4dCI+PC9zcGFuPjwvYT48L2Rpdj4nLAogICAgICAgIGRtOiB0ZW1wbGF0ZSA9PiB0ZW1wbGF0ZS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibGV2IiB5YXdmLWlkPSJsZWZ0bmF2X21zZ19kbSI+PGEgY2xhc3M9IlNfdHh0MSIgbm09ImRtIiBicGZpbHRlcj0ibWVzc2FnZSIgaHJlZmV4dHJhPSIvbWVzc2FnZXN8L21lc3NhZ2UvaGlzdG9yeSIgbm9kZS10eXBlPSJpdGVtIiBocmVmPSIvbWVzc2FnZXM/bGVmdG5hdj0xJmFtcDt3dnI9NiI+PHNwYW4gY2xhc3M9Imljb19ibG9jayI+PGVtIG5vZGUtdHlwZT0ibGVmdF9pdGVtIiBjbGFzcz0iV19maWNvbiBmaWNvbl9kb3QgU19maWNvbiI+RDwvZW0+PC9zcGFuPjxzcGFuIGNsYXNzPSJsZXZ0eHQgeWF3Zi1sZXZ0eHQiPjwvc3Bhbj48L2E+PC9kaXY+JywKICAgICAgICBtc2dib3g6IHRlbXBsYXRlID0+IHRlbXBsYXRlLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJsZXYiIHlhd2YtaWQ9ImxlZnRuYXZfbXNnX21zZ2JveCI+PGEgY2xhc3M9IlNfdHh0MSIgbm09Im1zZ2JveF9jIiBicGZpbHRlcj0ibWVzc2FnZSIgbm9kZS10eXBlPSJpdGVtIiBocmVmPSIvbm90ZXNib2FyZD9sZWZ0bmF2PTEmYW1wO3d2cj02Ij48c3BhbiBjbGFzcz0iaWNvX2Jsb2NrIj48ZW0gbm9kZS10eXBlPSJsZWZ0X2l0ZW0iIGNsYXNzPSJXX2ZpY29uIGZpY29uX2RvdCBTX2ZpY29uIj5EPC9lbT48L3NwYW4+PHNwYW4gY2xhc3M9ImxldnR4dCB5YXdmLWxldnR4dCI+PC9zcGFuPjwvYT48L2Rpdj4nLAogICAgICAgIGdyb3VwOiB0ZW1wbGF0ZSA9PiB0ZW1wbGF0ZS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibGV2IiB5YXdmLWlkPSJsZWZ0bmF2X21zZ19ncm91cCI+PGEgY2xhc3M9IlNfdHh0MSIgbm09ImNoYXRfZ3JvdXBfbm90aWNlIiBicGZpbHRlcj0ibWVzc2FnZSIgbm9kZS10eXBlPSJpdGVtIiBocmVmPSIvbWVzc2FnZXM/bGVmdG5hdj0xJmFtcDt3dnI9NiZhbXA7aXNfbm90aWNlPTEiPjxzcGFuIGNsYXNzPSJpY29fYmxvY2siPjxlbSBub2RlLXR5cGU9ImxlZnRfaXRlbSIgY2xhc3M9IldfZmljb24gZmljb25fZG90IFNfZmljb24iPkQ8L2VtPjwvc3Bhbj48c3BhbiBjbGFzcz0ibGV2dHh0IHlhd2YtbGV2dHh0Ij48L3NwYW4+PC9hPjwvZGl2PicsCiAgICAgICAgZG1zdWI6IHRlbXBsYXRlID0+IHRlbXBsYXRlLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJsZXYiIHlhd2YtaWQ9ImxlZnRuYXZfbXNnX2Rtc3ViIj48YSBjbGFzcz0iU190eHQxIiBubT0iZG1fZ3JvdXAiIGJwZmlsdGVyPSJtZXNzYWdlIiBub2RlLXR5cGU9Iml0ZW0iIGhyZWY9Ii9tZXNzYWdlL3N1Yj9sZWZ0bmF2PTEmd3ZyPTYiPjxzcGFuIGNsYXNzPSJpY29fYmxvY2siPjxlbSBjbGFzcz0iV19maWNvbiBmaWNvbl9kb3QgU19maWNvbiIgbm9kZS10eXBlPSJsZWZ0X2l0ZW0iPkQ8L2VtPjwvc3Bhbj48c3BhbiBjbGFzcz0ibGV2dHh0IHlhd2YtbGV2dHh0Ij48L3NwYW4+PC9hPjwvZGl2PicsCiAgICAgIH07CiAgICAgIGNvbnN0IGxlZnROYXZJdGVtID0gZnVuY3Rpb24gKHR5cGUsIHRleHQpIHsKICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGh0bWxbdHlwZV0odGVtcGxhdGUpOwogICAgICAgIGNvbnN0IHRleHRDb250YWluZXIgPSB0ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1sZXZ0eHQnKTsKICAgICAgICB0ZXh0Q29udGFpbmVyLnRleHRDb250ZW50ID0gdGV4dDsKICAgICAgICByZXR1cm4gdGVtcGxhdGUuZmlyc3RDaGlsZDsKICAgICAgfTsKICAgICAgY29uc3QgbWVzc2FnZXMgPSBsZWZ0TmF2SXRlbSgnbXNnJywgaTE4bi5zaWRlYmFyU2hvd01lc3NhZ2VzTXNnKTsKICAgICAgWydhdG1lJywgJ2NtdCcsICdsaWtlJywgJ2RtJywgJ21zZ2JveCcsICdncm91cCcsICdkbXN1YiddLmZvckVhY2godHlwZSA9PiB7CiAgICAgICAgY29uc3QgY29uZmlnSXRlbSA9IHJ1bGUucmVmW3R5cGVdOwogICAgICAgIGlmICghY29uZmlnSXRlbS5pc0VuYWJsZWQoKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGl0ZW0gPSBsZWZ0TmF2SXRlbSh0eXBlLCBjb25maWdJdGVtLnRleHQoKSk7CiAgICAgICAgbWVzc2FnZXMuYXBwZW5kQ2hpbGQoaXRlbSk7CiAgICAgIH0pOwogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIHNpZGViYXJTaG93TWVzc2FnZXMoKSB7CiAgICAgICAgY29uc3QgZ3JvdXBMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Y2X3BsX2xlZnRuYXZfZ3JvdXAgW25vZGUtdHlwZT0iZ3JvdXBMaXN0Il06bm90KFt5YXdmLW1lc3NhZ2VdKScpOwogICAgICAgIGlmICghZ3JvdXBMaXN0KSByZXR1cm47CiAgICAgICAgbGV0IGhvbWUgPSBncm91cExpc3QucXVlcnlTZWxlY3RvcignLmxldiBhW2hyZWYqPSIvaG9tZT8iXScpOwogICAgICAgIHdoaWxlIChob21lICYmIGhvbWUucGFyZW50Tm9kZSAhPT0gZ3JvdXBMaXN0KSBob21lID0gaG9tZS5wYXJlbnROb2RlOwogICAgICAgIGlmICghaG9tZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHJlZiA9IGhvbWUgPyBob21lLm5leHRTaWJsaW5nIDogZ3JvdXBMaXN0LmZpcnN0Q2hpbGQ7CiAgICAgICAgaWYgKCFyZWYpIHJldHVybjsKICAgICAgICBncm91cExpc3Quc2V0QXR0cmlidXRlKCd5YXdmLW1lc3NhZ2UnLCAnJyk7CiAgICAgICAgcmVmLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG1lc3NhZ2VzLCByZWYpOwogICAgICB9KTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgc2lkZWJhclNob3dMaWtlZDogeyBjbjogJ+WcqOmmlumhteW3puS+p+agj+WinuWKoCAoVjcpfHx7e2Zhdn195oiR55qE5pS26JePfHt7bGlrZX195oiR55qE6LWeJyB9LAogIH0pOwogIHNpZGViYXIubGlrZWQgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiA3LAogICAgaWQ6ICdsYXlvdXRfbGVmdF9saWtlZCcsCiAgICB2ZXJzaW9uOiA4NSwKICAgIHBhcmVudDogc2lkZWJhci5zaWRlYmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhclNob3dMaWtlZCwKICAgIHJlZjogewogICAgICBmYXY6IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsKCkgeyByZXR1cm4gdHJ1ZTsgfSB9LAogICAgICBsaWtlOiB7IHR5cGU6ICdib29sZWFuJywgbml0aWFsKCkgeyByZXR1cm4gdHJ1ZTsgfSB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBjb25maWdzID0gewogICAgICAgIGZhdjogdGhpcy5yZWYuZmF2LmdldENvbmZpZygpLAogICAgICAgIGxpa2U6IHRoaXMucmVmLmxpa2UuZ2V0Q29uZmlnKCksCiAgICAgIH07CiAgICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5LCBjb25maWdzKSB7CiAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2xlZnQtbmF2LWhvbWUnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgICAgIGNvbnN0IHsgaCwgaW5zZXJ0QmVmb3JlIH0gPSBOb2RlczsKCiAgICAgICAgICBjb25zdCBkaXZpZGVyID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCd4LXdvby1kaXZpZGVyJyk7CiAgICAgICAgICBpZiAoIWRpdmlkZXIpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRpdmlkZXIucGFyZW50Tm9kZTsKCiAgICAgICAgICBjb25zdCBvbkNsaWNrID0gZnVuY3Rpb24gKHRhcmdldCkgewogICAgICAgICAgICBjb25zdCB2bSA9IHRoaXM7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCd3ZWliby10b3AtbmF2JywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHZtLmNoYW5uZWxzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ubmFtZSA9PT0gJ3Byb2ZpbGUnKTsKICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHZtLnRhcEhhbmRsZShpbmRleCk7CiAgICAgICAgICAgICAgfSwgeyB3YXRjaDogZmFsc2UgfSk7CiAgICAgICAgICAgICAgdnVlU2V0dXAuY2xvc2VzdCh2bSwgJ25hdicpLmdldE1vZHVsZSgncHJvZmlsZScpOwogICAgICAgICAgICAgIHZtLiRyb3V0ZXIucHVzaCh0YXJnZXQpOwogICAgICAgICAgICB9OwogICAgICAgICAgfS5iaW5kKHRoaXMpOwoKICAgICAgICAgIGlmIChjb25maWdzLmZhdikgewogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB7IG5hbWU6ICdjb2xsZWN0JywgcGFyYW1zOiB7IGlkOiB0aGlzLiRyb290LmNvbmZpZy51aWQgfSB9OwogICAgICAgICAgICBjb25zdCBuYXZJdGVtID0gaCgnbmF2LWl0ZW0nLCB7CiAgICAgICAgICAgICAga2V5OiAneWF3Zi1mYXYnLAogICAgICAgICAgICAgIGNsYXNzOiAneWF3Zi1uYXYtaXRlbScsCiAgICAgICAgICAgICAgYXR0cnM6IHsgaWNvbjogJ25hdkNvbGxlY3QnLCB0ZXh0OiAn5oiR55qE5pS26JePJyB9LAogICAgICAgICAgICAgIG9uOiB7IGNsaWNrOiBvbkNsaWNrKHRhcmdldCkgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IG5hdkxpbmsgPSBoKCdhJywgewogICAgICAgICAgICAgIGNsYXNzOiAneWF3Zi1uYXYtbGluayB5YXdmLWV4dHJhLWxpbmsgeWF3Zi1saW5rLW1mc3AgeWF3Zi1saW5rLW5tZnBkJywKICAgICAgICAgICAgICBhdHRyczogeyBocmVmOiB0aGlzLiRyb3V0ZXIucmVzb2x2ZSh0YXJnZXQpLmhyZWYgfSwKICAgICAgICAgICAgfSwgW25hdkl0ZW1dKTsKICAgICAgICAgICAgaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgbmF2TGluaywgZGl2aWRlcik7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29uZmlncy5saWtlKSB7CiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHsgbmFtZTogJ2xpa2UnLCBwYXJhbXM6IHsgaWQ6IHRoaXMuJHJvb3QuY29uZmlnLnVpZCB9IH07CiAgICAgICAgICAgIGxldCBuYXZJdGVtID0gaCgnbmF2LWl0ZW0nLCB7CiAgICAgICAgICAgICAga2V5OiAneWF3Zi1saWtlJywKICAgICAgICAgICAgICBjbGFzczogJ3lhd2YtbmF2LWl0ZW0nLAogICAgICAgICAgICAgIGF0dHJzOiB7IGljb246ICduYXZMaWtlJywgdGV4dDogJ+aIkeeahOi1nicgfSwKICAgICAgICAgICAgICBvbjogeyBjbGljazogb25DbGljayh0YXJnZXQpIH0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoY29uZmlncy5saW5rKSB7CiAgICAgICAgICAgICAgbmF2SXRlbSA9IGgoJ2EnLCB7CiAgICAgICAgICAgICAgICBjbGFzczogJ3lhd2YtbmF2LWxpbmsgeWF3Zi1leHRyYS1saW5rIHlhd2YtbGluay1tZnNwIHlhd2YtbGluay1ubWZwZCcsCiAgICAgICAgICAgICAgICBhdHRyczogeyBocmVmOiB0aGlzLiRyb3V0ZXIucmVzb2x2ZSh0YXJnZXQpLmhyZWYgfSwKICAgICAgICAgICAgICB9LCBbbmF2SXRlbV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluc2VydEJlZm9yZShjb250YWluZXIsIG5hdkl0ZW0sIGRpdmlkZXIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBjb25maWdzKTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgc2lkZWJhck1lcmdlOiB7IGNuOiAn5ZCI5bm25bem5Y+z6L655qCPfOWIsHt7c2lkZX19e3tpfX0nLCBoazogJ+WQiOS9teW3puWPs+mCiuashHzliLB7e3NpZGV9fXt7aX19JywgdHc6ICflkIjkvbXlt6blj7PpgormrIR85Yiwe3tzaWRlfX17e2l9fScsIGVuOiAnTWVyZ2UgbGVmdCAmYW1wOyByaWdodCBjb2x1bW4gfCB0byB7e3NpZGV9fXt7aX19JyB9LAogICAgc2lkZWJhck1lcmdlVG9MZWZ0OiB7IGNuOiAn5bem5L6nJywgaGs6ICflt6blgbQnLCB0dzogJ+W3puWBtCcsIGVuOiAnbGVmdCBzaWRlJyB9LAogICAgc2lkZWJhck1lcmdlVG9SaWdodDogeyBjbjogJ+WPs+S+pycsIGhrOiAn5Y+z5YG0JywgdHc6ICflj7PlgbQnLCBlbjogJ3JpZ2h0IHNpZGUnIH0sCiAgICBzaWRlYmFyTWVyZ2VEZXRhaWw6IHsKICAgICAgY246ICflvIDlkK/mraTpgInpobnlkI7vvIzlt6bmoI/liIfmjaLpobXpnaLlj6/og73kvJrlr7zoh7Tlvq7pn7PkuZDmkq3mlL7kuK3mlq3jgIInLAogICAgfSwKICB9KTsKCiAgc2lkZWJhci5tZXJnZSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF9zaWRlX21lcmdlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IHNpZGViYXIuc2lkZWJhciwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJNZXJnZSwKICAgIHJlZjogewogICAgICBzaWRlOiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnbGVmdCcsIHRleHQ6ICgpID0+IGkxOG4uc2lkZWJhck1lcmdlVG9MZWZ0IH0sCiAgICAgICAgICB7IHZhbHVlOiAncmlnaHQnLCB0ZXh0OiAoKSA9PiBpMThuLnNpZGViYXJNZXJnZVRvUmlnaHQgfSwKICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICdyaWdodCcsCiAgICAgIH0sCiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhck1lcmdlRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcihuZXdWYWx1ZSA9PiB7CiAgICAgICAgaWYgKCFuZXdWYWx1ZSkgcmV0dXJuOwogICAgICAgIGlmICghbGF5b3V0LnNjcm9sbC5zY3JvbGxMZWZ0LmdldENvbmZpZygpKSByZXR1cm47CiAgICAgICAgaWYgKCFsYXlvdXQuc2Nyb2xsLnNjcm9sbFJpZ2h0LmdldENvbmZpZygpKSByZXR1cm47CiAgICAgICAgbGF5b3V0LnNjcm9sbC5zY3JvbGxSaWdodC5zZXRDb25maWcoZmFsc2UpOwogICAgICB9KTsKICAgICAgdGhpcy5yZWYuc2lkZS5hZGRDb25maWdMaXN0ZW5lcihzaWRlYmFyT24pOwogICAgfSwKICAgIGFpbml0OiBmdW5jdGlvbiBtZXJnZUxlZnRSaWdodCgpIHsKICAgICAgLy8g5Y+R546w6aG16Z2i55qE6YC76L6R5LiN5LiA5qC377yM5YGa5aSE55CG5b6I6bq754Om77yM5omA5Lul5LiN5YGa5aSE55CGCiAgICAgIGlmIChpbml0LnBhZ2UudHlwZSgpID09PSAnZGlzY292ZXInKSByZXR1cm47CgogICAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuYm9keTsKICAgICAgY29uc3Qgc2lkZSA9IHRoaXMucmVmLnNpZGUuZ2V0Q29uZmlnKCkgPT09ICdyaWdodCcgPyAncmlnaHQnIDogJ2xlZnQnOwogICAgICBsZXQgbGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9tYWluX2wnKTsKICAgICAgaWYgKCFsZWZ0KSB7IHNldFRpbWVvdXQobWVyZ2VMZWZ0UmlnaHQuYmluZCh0aGlzKSwgMTAwKTsgcmV0dXJuOyB9CgogICAgICBjb25zdCBsZWZ0UGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgbGVmdFBsYWNlaG9sZGVyLmNsYXNzTmFtZSA9ICd5YXdmLWxlZnQtZmFrZSc7CiAgICAgIGxlZnRQbGFjZWhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUgIWltcG9ydGFudCc7CiAgICAgIGxlZnQuYmVmb3JlKGxlZnRQbGFjZWhvbGRlcik7CiAgICAgIGxlZnQucmVtb3ZlKCk7CgogICAgICAvLyDlnKggYm9keSDkuIrorr7nva7lvZPliY3lkIjlubbnirbmgIHvvIzkvpvlhbbku5borr7nva7pobnmiJbogIXlhbbku5bohJrmnKzkvb/nlKgKICAgICAgY29uc3QgdXBkYXRlTWFpbkF0dHIgPSBmdW5jdGlvbiAoc2lkZSkgewogICAgICAgIGlmIChzaWRlICYmIG1haW4uZ2V0QXR0cmlidXRlKCd5YXdmLW1lcmdlLWxlZnQnKSAhPT0gc2lkZSkgewogICAgICAgICAgbWFpbi5zZXRBdHRyaWJ1dGUoJ3lhd2YtbWVyZ2UtbGVmdCcsIHNpZGUpOwogICAgICAgIH0KICAgICAgICBpZiAoIXNpZGUgJiYgbWFpbi5oYXNBdHRyaWJ1dGUoJ3lhd2YtbWVyZ2UtbGVmdCcpKSB7CiAgICAgICAgICBtYWluLnJlbW92ZUF0dHJpYnV0ZSgneWF3Zi1tZXJnZS1sZWZ0Jyk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLy8g5bCG5bem5qCP55qE5qC35byP5pS55Li65Y2h54mH5pWI5p6c77yI5oiW5pS55Zue77yJCiAgICAgIC8vIOeUseS6juW3puagj+agt+W8j+mDveWKoOWcqCAuV0JfbGVmdF9uYXYg5LiK77yM5omA5Lul5L2/55SoIC55YXdmLVdCX2xlZnRfbmF2IOadpei6suW8gOi/meS6m+agt+W8jwogICAgICAvLyDkvYbnm7jlhbPpnIDopoHkv53nlZnnmoTmoLflvI/vvIzlnKjkuIrpnaLph43mlrDmt7vliqAKICAgICAgY29uc3QgZml4U3R5bGlzaCA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgbGV0IGxhc3RPblJpZ2h0ID0gZmFsc2U7CiAgICAgICAgLy8g5bem5qCP5ZCI5bm26L+H5Y675LmL5ZCO6KaB5pS55LiA5LiL5qC35byPCiAgICAgICAgLy8g6ICD6JmR5Yiw6KaB6IO96YCC5bqU5ZCE56eN5qih5p2/77yM5omA5Lul5bCx5pS55b6X56iN5b6u5pyJ54K56L+H5YiGCiAgICAgICAgLy8g5q+U5aaC6K+05Y6L5qC55bCx5rKh5pyJIC5XQl9sZWZ0X25hdiDov5nkuKrlsZ7mgKfkuobvvIzlhY3lvpfpopzoibLkubHmjokKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9uUmlnaHQpIHsKICAgICAgICAgIGlmIChvblJpZ2h0ID09IG51bGwpIG9uUmlnaHQgPSBsYXN0T25SaWdodDsgZWxzZSBsYXN0T25SaWdodCA9IG9uUmlnaHQ7CiAgICAgICAgICBjb25zdCBuYXYgPSBsZWZ0LnF1ZXJ5U2VsZWN0b3IoJy5XQl9sZWZ0X25hdiwgLnlhd2YtV0JfbGVmdF9uYXYnKTsKICAgICAgICAgIGlmICghbmF2KSByZXR1cm47CiAgICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBvblJpZ2h0ID8gJ3lhd2YtV0JfbGVmdF9uYXYgV0JfY2FyZHdyYXAgU19iZzInIDogJ1dCX2xlZnRfbmF2JzsKICAgICAgICAgIGlmIChuYXYuY2xhc3NOYW1lICE9PSBjbGFzc05hbWUpIG5hdi5jbGFzc05hbWUgPSBjbGFzc05hbWU7CiAgICAgICAgfTsKICAgICAgfSgpKTsKCiAgICAgIC8vIOabtOaWsOW3puS+p+agj+S9jee9rgogICAgICBjb25zdCBwb3NpdGlvbkxlZnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgcmVmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Y2X3BsX3JpZ2h0bW9kX215aW5mbycpOwogICAgICAgIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX21haW5fcicpOwogICAgICAgIGNvbnN0IGxlZnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX21haW5fbCcpOwogICAgICAgIGlmIChsZWZ0biAmJiBsZWZ0ICE9PSBsZWZ0bikgeyBsZWZ0ID0gbGVmdG47IH0KICAgICAgICBpZiAocmVmKSB7CiAgICAgICAgICBpZiAocmVmLm5leHRTaWJsaW5nICE9PSBsZWZ0KSB7CiAgICAgICAgICAgIHJlZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsZWZ0LCByZWYubmV4dFNpYmxpbmcpOwogICAgICAgICAgICB1cGRhdGVNYWluQXR0cihzaWRlKTsKICAgICAgICAgICAgZml4U3R5bGlzaCh0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHJpZ2h0KSB7CiAgICAgICAgICBpZiAocmlnaHQuZmlyc3RDaGlsZCAhPT0gbGVmdCkgewogICAgICAgICAgICByaWdodC5pbnNlcnRCZWZvcmUobGVmdCwgcmlnaHQuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgIHVwZGF0ZU1haW5BdHRyKHNpZGUpOwogICAgICAgICAgICBmaXhTdHlsaXNoKHRydWUpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAobGVmdFBsYWNlaG9sZGVyLnByZXZpb3VzU2libGluZyAhPT0gbGVmdCkgewogICAgICAgICAgICBsZWZ0UGxhY2Vob2xkZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobGVmdCwgbGVmdFBsYWNlaG9sZGVyKTsKICAgICAgICAgICAgdXBkYXRlTWFpbkF0dHIoKTsKICAgICAgICAgICAgZml4U3R5bGlzaChmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgY3NzLmFwcGVuZChgClt5YXdmLW1lcmdlLWxlZnRdIC5XQl9mcmFtZSAuV0JfbWFpbl9sLApbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfZnJhbWUgLnlhd2YtV0JfbGVmdF9uYXYsClt5YXdmLW1lcmdlLWxlZnRdIC5XQl9mcmFtZSAuV0JfbGVmdF9uYXYgeyB3aWR0aDogMjI5cHg7IHBhZGRpbmc6IDA7IGZsb2F0OiBub25lOyB9Clt5YXdmLW1lcmdlLWxlZnRdIC5XQl9mcmFtZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMDBweCBjZW50ZXI7IHBhZGRpbmctbGVmdDogMTBweDsgfQpbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfZnJhbWUgLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9saW5lIGZpZWxkc2V0LApbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfZnJhbWUgLldCX2xlZnRfbmF2IC5sZXZfbGluZSBmaWVsZHNldCB7IHBhZGRpbmctbGVmdDogMTkwcHg7IH0KW3lhd2YtbWVyZ2UtbGVmdF0gLldCX2xlZnRfbmF2IC5sZXYgYTpob3ZlciwgLldCX2xlZnRfbmF2IC5sZXZfY3VyciwKW3lhd2YtbWVyZ2UtbGVmdF0gLldCX2xlZnRfbmF2IC5sZXZfY3Vycjpob3ZlciwKW3lhd2YtbWVyZ2UtbGVmdF0gLldCX2xlZnRfbmF2IC5sZXZtb3JlIC5tb3JlIHsgYmFja2dyb3VuZDogcmdiYSgxMjgsIDEyOCwgMTI4LCAwLjEpICFpbXBvcnRhbnQ7IH0KW3lhd2YtbWVyZ2UtbGVmdF0gLldCX2xlZnRfbmF2IC5sZXZfQm94LApbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfbGVmdF9uYXYgZmllbGRzZXQgeyBib3JkZXItY29sb3I6IHJnYmEoMTI4LCAxMjgsIDEyOCwgMC41KSAhaW1wb3J0YW50OyB9Clt5YXdmLW1lcmdlLWxlZnRdIC5XQl9mcmFtZSAuV0JfbWFpbl9sICN2Nl9wbF9sZWZ0bmF2X21zZ2JveC55YXdmLWNhcmR3cmFwIGgzIHsgcGFkZGluZzogMCAxNnB4OyB9Clt5YXdmLW1lcmdlLWxlZnRdIC5XQl93ZWJpbV9wYWdlICN3ZWlib2NoYXQgeyBwb3NpdGlvbjogc3RhdGljICFpbXBvcnRhbnQ7IH0KW3lhd2YtbWVyZ2UtbGVmdF0gLldCX3dlYmltX3BhZ2UgLndlYmltX2NvbnRhY3RzX21vZCB7IHBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDsgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtIDQxMHB4KTsgfQpbeWF3Zi1tZXJnZS1sZWZ0XSAuV0Jfd2ViaW1fcGFnZSAud2ViaW1fY29udGFjdHNfYmQgeyBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gNDcwcHgpOyB9Clt5YXdmLW1lcmdlLWxlZnRdIC53ZWJpbV9jaGF0X3dpbmRvdyAuV0Jfd2ViaW1fcGFnZSAud2ViaW1fY29udGFjdHNfbW9kLApbeWF3Zi1tZXJnZS1sZWZ0XSAud2ViaW1fY2hhdF93aW5kb3cgLldCX3dlYmltX3BhZ2UgLndlYmltX2NvbnRhY3RzX2JkIHsgbWF4LWhlaWdodDogbm9uZTsgfQpbeWF3Zi1tZXJnZS1sZWZ0XSBib2R5IC5XX2dvdG9wIHsgbWFyZ2luLWxlZnQ6IGNhbGMoY2FsYyh2YXIoLS15YXdmLWZlZWQtd2lkdGgpICsgMjYwcHgpIC8gMik7IH0KW3lhd2YtbWVyZ2UtbGVmdF0gLnVubG9naW5fbGVmdF9uYXYgLmxldl9Cb3ggeyBwb3NpdGlvbjogc3RhdGljICFpbXBvcnRhbnQ7IHdpZHRoOiAyMzBweDsgfQpbeWF3Zi1tZXJnZS1sZWZ0PSJsZWZ0Il0gLldCX2ZyYW1lIC5XQl9tYWluX3IgeyBmbG9hdDogbGVmdDsgfQpbeWF3Zi1tZXJnZS1sZWZ0PSJsZWZ0Il0gLldCX2ZyYW1lIC5XQl9tYWluX2MgeyBmbG9hdDogcmlnaHQ7IH0KCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEwMDZweCkgewogIGJvZHlbeWF3Zi1tZXJnZS1sZWZ0XSBhLldfZ290b3AgeyBtYXJnaW4tbGVmdDogY2FsYyhjYWxjKHZhcigtLXlhd2YtZmVlZC13aWR0aCkgKyAyMHB4KSAvIDIpOyB9CiAgYm9keVt5YXdmLW1lcmdlLWxlZnQ9ImxlZnQiXSAuV0JfbWFpbiAuV0JfbWFpbl9jIHsgZmxvYXQ6IG5vbmU7IH0KICBib2R5W3lhd2YtbWVyZ2UtbGVmdD0ibGVmdCJdIC5XX2ZvbGQgeyByaWdodDogYXV0bzsgbGVmdDogMDsgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlWCgtMSk7IHRyYW5zZm9ybTogc2NhbGVYKC0xKTsgfQogIGJvZHlbeWF3Zi1tZXJnZS1sZWZ0PSJsZWZ0Il0gLldfZm9sZC5XX2ZvbGRfb3V0IHsgbGVmdDogMjY5cHg7IH0KICBib2R5W3lhd2YtbWVyZ2UtbGVmdD0ibGVmdCJdIC5XQl9tYWluX3IgeyByaWdodDogYXV0bzsgbGVmdDogMHB4OyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSkgdHJhbnNsYXRlWigwcHgpOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpIHRyYW5zbGF0ZVooMHB4KTsgfQogIGJvZHlbeWF3Zi1tZXJnZS1sZWZ0PSJsZWZ0Il0gLldCX21haW5fci5XX2ZvbGRfbGF5ZXIgeyBsZWZ0OiAyNjlweDsgfQogIGJvZHlbeWF3Zi1tZXJnZS1sZWZ0PSJsZWZ0Il0gLldCX21haW5fciB7IGRpcmVjdGlvbjogcnRsOyB9CiAgYm9keVt5YXdmLW1lcmdlLWxlZnQ9ImxlZnQiXSAuV0JfbWFpbl9yIC5XQl9jYXJkd3JhcCB7IGRpcmVjdGlvbjogbHRyOyB9Cn0KCmApOwoKICAgICAgLy8gZm9sbG93aW5nIGNvZGVzIGFyZSBjb3BpZWQgYW5kIG1vZGlmaWVkIGZyb20gd2VpYm8sIHNvbWUgb25lIGVsc2UgbWF5IGhvbGQgY29weXJpZ2h0CiAgICAgIC8vIGNvZGVzIG1vZGlmaWVkIGZyb20gaHR0cDovL2ltZy50LnNpbmFqcy5jbi90Ni9zdHlsZS9jc3MvbW9kdWxlL2NvbWJpbmF0aW9uL2hvbWVfQS5jc3MgYmVnaW4KICAgICAgY3NzLmFwcGVuZChgCi55YXdmLVdCX2xlZnRfbmF2IHsgd2lkdGg6IDE1MHB4OyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfQm94IHsgLyogYm9yZGVyLWJvdHRvbS13aWR0aDogMXB4OyBib3JkZXItYm90dG9tLXN0eWxlOiBzb2xpZDsgKi8gfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X0JveF9ub2JvcmRlciB7IGJvcmRlci1ib3R0b206IG5vbmU7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9saW5lIGZpZWxkc2V0IHsgZGlzcGxheTogYmxvY2s7IGhlaWdodDogMjJweDsgcGFkZGluZzogMCAwIDAgMTIwcHg7IHpvb206IDE7IGNsZWFyOiBib3RoOyBib3JkZXItdG9wLXdpZHRoOiAxcHg7IGJvcmRlci10b3Atc3R5bGU6IHNvbGlkOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfbGluZSBsZWdlbmQgeyBsaW5lLWhlaWdodDogMjJweDsgZm9udC1zaXplOiAxNHB4OyBwYWRkaW5nOiAwIDNweCAwIDRweDsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X2xpbmUgbGVnZW5kIC5maWNvbl9zZXR1cDpob3ZlciB7IHRleHQtc2hhZG93OiAwcHggMHB4IDRweCByZ2JhKDAsIDAsIDAsIC40KTsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X2xpbmVfdjIgZmllbGRzZXQgeyBoZWlnaHQ6IDExcHg7IG1hcmdpbi10b3A6IDExcHg7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9Cb3ggaDMgeyBkaXNwbGF5OiBibG9jazsgaGVpZ2h0OiAzNHB4OyBsaW5lLWhlaWdodDogMzRweDsgZm9udC1zaXplOiAxNHB4OyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBvdmVyZmxvdzogaGlkZGVuOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfQm94IGgzLmxldiBhIHsgZm9udC1zaXplOiAxNHB4OyBmb250LXdlaWdodDogYm9sZDsgcGFkZGluZzogMCAwIDAgMTVweDsgaGVpZ2h0OiAzNHB4OyBsaW5lLWhlaWdodDogMzRweDsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X0JveCBoMy5sZXYgYSAucGljIHsgd2lkdGg6IDE4cHg7IGhlaWdodDogMThweDsgZmxvYXQ6IGxlZnQ7IG1hcmdpbjogOHB4IDVweCAwIDA7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9Cb3ggaDMubGV2IGEgLldfZmljb24geyBmbG9hdDogcmlnaHQ7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9Cb3ggaDMuU190eHQxIHsgcGFkZGluZzogMCAwIDAgMTVweDsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X0JveCBoMyAuZmljb25fYWRkLCAuV0JfbGVmdF9uYXYgLmxldl9Cb3ggaDMgLmZpY29uX3NldHVwIHsgZGlzcGxheTogYmxvY2s7IGZsb2F0OiByaWdodDsgZm9udC1zaXplOiAxNHB4OyBtYXJnaW4tcmlnaHQ6IDEwcHg7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9Cb3ggaDMgLmZpY29uX2FkZDpob3ZlciwgLldCX2xlZnRfbmF2IC5sZXZfQm94IGgzIC5maWNvbl9zZXR1cDpob3ZlciB7IHRleHQtc2hhZG93OiAwcHggMHB4IDRweCByZ2JhKDAsIDAsIDAsIC40KTsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IGEgeyBkaXNwbGF5OiBibG9jazsgaGVpZ2h0OiAzNHB4OyBsaW5lLWhlaWdodDogMzRweDsgZm9udC1zaXplOiAxMnB4OyBwYWRkaW5nOiAwIDAgMCAxM3B4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAubGV2dHh0IHsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0gCi55YXdmLVdCX2xlZnRfbmF2IC5sZXYgLmxldl9jdXJyIC5maWNvbl9kb3QsIC5XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fZnJpZW5kcywgLldCX2xlZnRfbmF2IC5sZXYgLmxldl9jdXJyIC5maWNvbl9ncm91cHdiLCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX3BfaW50ZXJlc3QsIC5XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fcF9ybWQsIC5XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fcF9xdWlldGZvbGxvdywgLldCX2xlZnRfbmF2IC5sZXYgLmxldl9jdXJyIC5maWNvbl92cGx1cyB7IHdpZHRoOiAxMnB4OyBsZXR0ZXItc3BhY2luZzogMThweDsgdGV4dC1pbmRlbnQ6IC0zMHB4OyB9IAoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fZG90OmFmdGVyLCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX2ZyaWVuZHM6YWZ0ZXIsIC5XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fZ3JvdXB3YjphZnRlciwgLldCX2xlZnRfbmF2IC5sZXYgLmxldl9jdXJyIC5maWNvbl9wX2ludGVyZXN0OmFmdGVyLCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX3Bfcm1kOmFmdGVyLCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX3BfcXVpZXRmb2xsb3c6YWZ0ZXIsIC5XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fdnBsdXM6YWZ0ZXIgeyBjb250ZW50OiAiQiI7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldiAuZmljb25fZ290b3AgeyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfZ290b3AgYTpob3ZlciAuZmljb25fZ290b3AgeyBkaXNwbGF5OiBibG9jazsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X2dvdG9wIGE6aG92ZXIgLmZpY29uX2dvdG9wOmhvdmVyIHsgdGV4dC1zaGFkb3c6IDBweCAwcHggNHB4IHJnYmEoMCwgMCwgMCwgLjQpOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXYgLmxldnR4dCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgbWF4LXdpZHRoOiA4MnB4OyBvdmVyZmxvdzogaGlkZGVuOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgY3Vyc29yOiBwb2ludGVyOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXYgLldfbmV3X2NvdW50IHsgZmxvYXQ6IHJpZ2h0OyBtYXJnaW46IDEwcHggMTBweCAwIDA7ICptYXJnaW46IC0yNXB4IDEwcHggMCAwOyBiYWNrZ3JvdW5kOiAjZWQ3NDFjOyBjb2xvcjogI2ZmZjsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5XX25ldyB7IGZsb2F0OiByaWdodDsgbWFyZ2luOiAxMnB4IDhweCAwIDA7IH0gCi55YXdmLVdCX2xlZnRfbmF2IC5sZXYgLmljb19ibG9jayB7IGZsb2F0OiBsZWZ0OyB3aWR0aDogMTdweDsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDAgM3B4IDAgMDsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5pY29fYmxvY2sgLnBpYyB7IHdpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7IGZsb2F0OiBsZWZ0OyBtYXJnaW4tdG9wOiA3cHg7IH0gCi55YXdmLVdCX2xlZnRfbmF2IC5sZXYgLmZpY29uX2hvdCwgLldCX2xlZnRfbmF2IC5sZXYgLmZpY29uX3ZpZGVvIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDE0cHg7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldm1vcmUgeyBkaXNwbGF5OiBibG9jazsgaGVpZ2h0OiAzMHB4OyBsaW5lLWhlaWdodDogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9IAoueWF3Zi1XQl9sZWZ0X25hdiAubGV2bW9yZSAubW9yZSB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgaGVpZ2h0OiAxNHB4OyBsaW5lLWhlaWdodDogMTRweDsgcGFkZGluZzogMnB4IDZweDsgYm9yZGVyLXJhZGl1czogM3B4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IHpvb206IDE7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldm1vcmUgLldfYnRuX2IgeyBtYXJnaW46IDhweCAxMHB4IDhweCAwOyB9IAoueWF3Zi1XQl9sZWZ0X25hdiAubGV2bW9yZSAuV19uZXcgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgcmlnaHQ6IC0xcHg7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLlVJX3Njcm9sbFZpZXcgeyBwb3NpdGlvbjogcmVsYXRpdmU7IH0gCi55YXdmLVdCX2xlZnRfbmF2IC5XX3Njcm9sbF95IHsgcmlnaHQ6IDA7IH0gCmApOwogICAgICAvLyBjb2RlcyBtb2RpZmllZCBmcm9tIGh0dHA6Ly9pbWcudC5zaW5hanMuY24vdDYvc3R5bGUvY3NzL21vZHVsZS9jb21iaW5hdGlvbi9ob21lX0EuY3NzIGVuZAoKICAgICAgLy8g5by65Yi254K55Ye76ZO+5o6l5pe25Yi35paw6aG16Z2i77yM5Lul6Kej5Yaz5Zug5pq05Yqb5L+u5pS56YCg5oiQ55qE6Zeu6aKYCiAgICAgIGNvbnN0IGZvcmNlUmVmbHVzaCA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgbGV0IGwgPSBudWxsOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAobCA9PT0gbGVmdCkgcmV0dXJuOyBlbHNlIGwgPSBsZWZ0OwogICAgICAgICAgbGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRhcmdldC5jbG9zZXN0KCdhJyk7IGlmICghdCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBocmVmID0gdC5ocmVmOyBpZiAoIWhyZWYubWF0Y2goL14oPzpodHRwcz86KVwvXC8vKSkgcmV0dXJuOwogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOyBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChocmVmKSB7IGxvY2F0aW9uLmFzc2lnbihocmVmKTsgfSwgaHJlZik7CiAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICB9OwogICAgICB9KCkpOwoKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBzaWRlYmFyTWVyZ2UoKSB7CiAgICAgICAgcG9zaXRpb25MZWZ0KCk7CiAgICAgICAgZml4U3R5bGlzaCgpOwogICAgICAgIGZvcmNlUmVmbHVzaCgpOwogICAgICB9KTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYWxsU2lkZWJhck9uOiB7IGNuOiAn57uf5LiA5ZCE57G76aG16Z2i5L6n5qCPfOWIsHt7c2lkZX19JywgdHc6ICfntbHkuIDlkITpoZ7poIHpnaLlgbTmrIR85Yiwe3tzaWRlfX0nLCBlbjogJ1JlbG9jYXRlIHNpZGUgYmFyIGZvciBhbGwgcGFnZXMgfCB0byB7e3NpZGV9fScgfSwKICAgIGFsbFNpZGViYXJPbkxlZnQ6IHsgY246ICflt6bkvqcnLCB0dzogJ+W3puWBtCcsIGVuOiAnbGVmdCBzaWRlJyB9LAogICAgYWxsU2lkZWJhck9uUmlnaHQ6IHsgY246ICflj7PkvqcnLCB0dzogJ+WPs+WBtCcsIGVuOiAncmlnaHQgc2lkZScgfSwKICB9KTsKCiAgc2lkZWJhci5hbGxTaWRlYmFyT24gPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfc2lkZV9wb3NpdGlvbicsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBzaWRlYmFyLnNpZGViYXIsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hbGxTaWRlYmFyT24sCiAgICByZWY6IHsKICAgICAgc2lkZTogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJ2xlZnQnLCB0ZXh0OiAoKSA9PiBpMThuLmFsbFNpZGViYXJPbkxlZnQgfSwKICAgICAgICAgIHsgdmFsdWU6ICdyaWdodCcsIHRleHQ6ICgpID0+IGkxOG4uYWxsU2lkZWJhck9uUmlnaHQgfSwKICAgICAgICBdLAogICAgICB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIHRoaXMucmVmLnNpZGUuYWRkQ29uZmlnTGlzdGVuZXIoc2lkZWJhck9uKTsKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3Qgc2lkZSA9IHRoaXMucmVmLnNpZGUuZ2V0Q29uZmlnKCk7CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gY2hvc2VTaWRlUnVubmVyKCkgewogICAgICAgIGxldCBiLCBjLCBwOwogICAgICAgIGlmIChzaWRlID09PSAnbGVmdCcpIHsKICAgICAgICAgIGIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxjX21haW4+LldCX2ZyYW1lX2M6Zmlyc3QtY2hpbGQrLldCX2ZyYW1lX2I6bGFzdC1jaGlsZCcpOyBpZiAoIWIpIHJldHVybjsKICAgICAgICAgIHAgPSBiLnBhcmVudE5vZGU7CiAgICAgICAgICBwLmluc2VydEJlZm9yZShiLCBwLmZpcnN0Q2hpbGQpOwogICAgICAgIH0gZWxzZSBpZiAoc2lkZSA9PT0gJ3JpZ2h0JykgewogICAgICAgICAgYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGNfbWFpbj4uV0JfZnJhbWVfYjpmaXJzdC1jaGlsZCsuV0JfZnJhbWVfYzpsYXN0LWNoaWxkJyk7IGlmICghYykgcmV0dXJuOwogICAgICAgICAgcCA9IGMucGFyZW50Tm9kZTsKICAgICAgICAgIGIgPSBwLmZpcnN0RWxlbWVudENoaWxkOwogICAgICAgICAgcC5hcHBlbmRDaGlsZChiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9KTsKCiAgLy8g5L2/55So5YWz6ZSu5a2X44CB5q2j5YiZ5byP5ZKM6K+d6aKY6L+H5ruk54Ot6Zeo6K+d6aKY5qih5Z2XCiAgLy8g6L+Z5Liq5Yqf6IO95rKh5pyJ5YGa5byA5YWz77yM5Zug5Li65YWz6ZSu5a2X562J6YO95piv55So5oi36Ieq5bex6K6+572u55qE77yM55u45b2T5LqO5byA5YWz5LqGCiAgaW5pdC5vbkxvYWQoKCkgPT4gewogICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBmaWx0ZVJpZ2h0VG9waWMoKSB7CiAgICAgIGNvbnN0IGxpbmtzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaG90X3RvcGljIGxpOm5vdChbeWF3Zi1ydG9waWNdKSBhW3N1ZGEtdWF0cmFjayo9ImhvdHRvcGljX3IiXScpKTsKICAgICAgaWYgKCFsaW5rcy5sZW5ndGgpIHJldHVybjsKICAgICAgY29uc3QgdG9waWNzID0gcnVsZXMudG9waWMudGV4dC5oaWRlLnJlZi5pdGVtcy5nZXRDb25maWcoKTsKICAgICAgY29uc3QgdGV4dHMgPSBydWxlcy5jb250ZW50LnRleHQuaGlkZS5yZWYuaXRlbXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHJlZ2V4ZW4gPSBydWxlcy5jb250ZW50LnJlZ2V4LmhpZGUucmVmLml0ZW1zLmdldENvbmZpZ0NvbXBpbGVkKCk7CiAgICAgIGxpbmtzLmZvckVhY2godG9waWMgPT4gewogICAgICAgIGNvbnN0IHRleHQgPSB0b3BpYy50aXRsZS5yZXBsYWNlKC8jL2csICcnKTsKICAgICAgICBkbyB7CiAgICAgICAgICBpZiAodG9waWNzLmluY2x1ZGVzKHRleHQpKSBicmVhazsKICAgICAgICAgIGlmICh0ZXh0cy5zb21lKHQgPT4gdGV4dC5pbmNsdWRlcyh0KSkpIGJyZWFrOwogICAgICAgICAgaWYgKHJlZ2V4ZW4uc29tZShyID0+IHIudGVzdCh0ZXh0KSkpIGJyZWFrOwogICAgICAgICAgdG9waWMuY2xvc2VzdCgnbGknKS5zZXRBdHRyaWJ1dGUoJ3lhd2YtcnRvcGljJywgJycpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gd2hpbGUgKGZhbHNlKTsKICAgICAgICB0b3BpYy5jbG9zZXN0KCdsaScpLnJlbW92ZSgpOwogICAgICB9KTsKICAgIH0pOwogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkxBU1QgfSk7CgogIGkxOG4uc2hvd0FsbEdyb3VwcyA9IHsKICAgIGNuOiAn5bGV5byA5bem5qCP5YiG57uEJywKICAgIHR3OiAn5bGV6ZaL5bem5qyE5YiG57WEJywKICAgIGVuOiAnU2hvdyBhbGwgZ3JvdXBzIGluIGxlZnQgc2lkZWJhcicsCiAgfTsKCiAgc2lkZWJhci5zaG93QWxsR3JvdXBzID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdsYXlvdXRfc2lkZV9zaG93X2FsbF9ncm91cHMnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2lkZWJhci5zaWRlYmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvd0FsbEdyb3VwcywKICAgIGFpbml0KCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgY3NzLmFwcGVuZChgCi5sZXZfQm94IC5sZXZtb3JlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Ci5sZXZfQm94IFtub2RlLXR5cGU9Im1vcmVMaXN0Il0geyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgfQpgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSkgewogICAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2xlZnQtbmF2LWhvbWUnLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZtLmN1c3RvbUxpc3QpKSByZXR1cm47CiAgICAgICAgICAgIHZtLmN1c3RvbVNob3dDb3VudCA9IEluZmluaXR5OwogICAgICAgICAgICBpZiAodm0uY3VzdG9tVGFicyAmJiBBcnJheS5pc0FycmF5KHZtLmN1c3RvbVRhYnMubGlzdCkpIHsKICAgICAgICAgICAgICB2bS5jdXN0b21MaXN0ID0gWy4uLnZtLmN1c3RvbVRhYnMubGlzdF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50UmVuZGVyKHZtLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgICAgICAgICBjb25zdCB7IHJlbW92ZUNoaWxkIH0gPSBOb2RlczsKCiAgICAgICAgICAgICAgY29uc3QgbW9yZUJ1dHRvbiA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tYm94Omxhc3QtY2hpbGQnKTsKICAgICAgICAgICAgICBpZiAobm9kZVN0cnVjdC5sYXN0Q2hpbGQgPT09IG1vcmVCdXR0b24pIHsKICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkKG5vZGVTdHJ1Y3QsIG1vcmVCdXR0b24pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5KTsKICAgICAgfQogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9sYXlvdXQvc2Nyb2xsLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CgogIGNvbnN0IGxheW91dCA9IHlhd2YucnVsZXMubGF5b3V0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBjb25zdCBzY3JvbGwgPSBsYXlvdXQuc2Nyb2xsID0ge307CgogIGkxOG4uc2Nyb2xsVG9vbEdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+maj+mhtemdoua7muWKqOWFg+e0oCcsCiAgICB0dzogJ+maqOmggemdouaNsuWLleWFg+e0oCcsCiAgICBlbjogJ0VsZW1lbnRzIFNjcm9sbCB3aXRoIFBhZ2UnLAogIH07CgogIHNjcm9sbC5zY3JvbGwgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNjcm9sbFRvb2xHcm91cFRpdGxlLAogIH0pOwoKICBjb25zdCBzY3JvbGxBZnRlck1lcmdlID0gKHByZWZlciA9ICdsZWZ0JykgPT4gKCkgPT4gewogICAgaWYgKCFzY3JvbGwuc2Nyb2xsTGVmdC5nZXRDb25maWcoKSkgcmV0dXJuOwogICAgaWYgKCFzY3JvbGwuc2Nyb2xsUmlnaHQuZ2V0Q29uZmlnKCkpIHJldHVybjsKICAgIGlmICghbGF5b3V0LnNpZGViYXIubWVyZ2UuZ2V0Q29uZmlnKCkpIHJldHVybjsKICAgIGlmIChwcmVmZXIgPT09ICdsZWZ0JykgewogICAgICBzY3JvbGwuc2Nyb2xsUmlnaHQuc2V0Q29uZmlnKGZhbHNlKTsKICAgIH0gZWxzZSB7CiAgICAgIHNjcm9sbC5zY3JvbGxMZWZ0LnNldENvbmZpZyhmYWxzZSk7CiAgICB9CiAgfTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzY3JvbGxMZWZ0OiB7IGNuOiAn5YWB6K646aaW6aG15bem6L655qCP6ZqP6aG16Z2i5rua5Yqo5aeL57uI5pi+56S6JywgdHc6ICflhYHoqLHpppbpoIHlt6bpgormrITpmqjpoIHpnaLmjbLli5Xlp4vntYLpoa/npLonLCBlbjogJ0Zsb2F0aW5nIGxlZnQgY29sdW1uJyB9LAogICAgc2Nyb2xsUmlnaHQ6IHsgY246ICflhYHorrjpppbpobXlj7PovrnmoI/pmo/pobXpnaLmu5rliqjlp4vnu4jmmL7npLonLCB0dzogJ+WFgeiosemmlumggeWPs+mCiuashOmaqOmggemdouaNsuWLleWni+e1gumhr+ekuicsIGVuOiAnRmxvYXRpbmcgcmlnaHQgY29sdW1uJyB9LAogICAgc2Nyb2xsT3RoZXJzOiB7IGNuOiAn5YWB6K645YW25LuW5YWD57Sg6ZqP6aG16Z2i5rua5Yqo5aeL57uI5pi+56S6JywgdHc6ICflhYHoqLHlhbbku5blhYPntKDpmqjpoIHpnaLmjbLli5Xlp4vntYLpoa/npLonLCBlbjogJ0Zsb2F0aW5nIG90aGVyIGVsZW1lbnRzJyB9LAogIH0pOwoKICBzY3JvbGwuc2Nyb2xsTGVmdCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF9sZWZ0X21vdmUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2Nyb2xsLnNjcm9sbCwKICAgIGluaXRpYWw6IHRydWUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zY3JvbGxMZWZ0LAogICAgLy8g5aaC5p6c5ZCI5bm25LqG5bem5Y+z6L655qCP77yM6YKj5LmI5bem5qCP5rWu5Yqo55qE5pe25YCZ5Y+z5qCP5LiN6IO95rWu5YqoCiAgICBpbml0KCkgewogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKHNjcm9sbEFmdGVyTWVyZ2UoJ2xlZnQnKSk7CiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIC8vIOemgeeUqOW3puagj+a1ruWKqOeahOebuOWFs+S7o+eggeWcqOemgeeUqOWPs+i+ueagj+a1ruWKqOeahOmAu+i+kemCo+mHjOe7n+S4gOWkhOeQhgogICAgICAvLyDlpoLmnpzlkIjlubbkuobovrnmoI/vvIzpgqPkuYjkvJrlm6DkuLrnpoHnlKjlj7PmoI/mta7liqjogIzlkIzml7bnpoHnlKjlnKjlj7PmoI/ph4zpnaLnmoTlt6bmoI8KICAgICAgLy8g6L+Z5pe25YCZ5bem5qCP5aaC5p6c6L+Y6KaB5rWu5Yqo77yM6YKj5LmI5bCx6KaB6YeN5paw6K6p5LuW5Yqo6LW35p2lCiAgICAgIC8vIOi/memHjOeahOeoi+W6j+aYr+S4uuS6huiuqeW3puagj+WGjeWKqOi1t+adpeeahAogICAgICBpZiAoIWxheW91dC5zaWRlYmFyLm1lcmdlLmdldENvbmZpZygpKSByZXR1cm47CiAgICAgIGNzcy5hcHBlbmQoYAouV0JfbWFpbl9yIC5XQl9tYWluX2wgeyB3aWxsLWNoYW5nZTogc2Nyb2xsLXBvc2l0aW9uOyB9Ci5XQl9tYWluX3JbeWF3Zi1maXhlZF0gLldCX21haW5fbCB7IHBvc2l0aW9uOiBmaXhlZDsgdG9wOiA2MHB4ICFpbXBvcnRhbnQ7IG92ZXJmbG93OiBoaWRkZW47IGhlaWdodDogYXV0byAhaW1wb3J0YW50OyB3aWR0aDogMTUwcHg7IH0KYm9keVt5YXdmLW1lcmdlLWxlZnRdIC5XQl9tYWluX3JbeWF3Zi1maXhlZF0gLldCX21haW5fbCB7IHdpZHRoOiAyMjlweDsgfQpgKTsKICAgICAgaWYgKGxheW91dC5uYXZiYXIuYXV0b0hpZGUuZ2V0Q29uZmlnKCkpIHsKICAgICAgICB1dGlsLmNzcy5hcHBlbmQoJy5XQl9tYWluX3JbeWF3Zi1maXhlZF0gLldCX21haW5fbCB7IHRvcDogMTBweCAhaW1wb3J0YW50OyB9Jyk7CiAgICAgIH0KCiAgICAgIC8vIOmZkOWItuW3puagj+acgOWkp+mrmOW6pu+8jOmBv+WFjei2heWHuuS4remXtOWMuuWfnwogICAgICBjb25zdCB1cGRhdGVNYXhIZWlnaHQgPSBmdW5jdGlvbiAobGVmdCwgbWF4SGVpZ2h0KSB7CiAgICAgICAgY29uc3Qgbm9uZSA9IG1heEhlaWdodCA9PSBudWxsOwogICAgICAgIGNvbnN0IHRleHQgPSBub25lID8gJ25vbmUnIDogbWF4SGVpZ2h0ICsgJ3B4JzsKICAgICAgICBjb25zdCBzcmwgPSBsZWZ0LnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImxlZnRuYXZfc2Nyb2xsIl0nKTsKICAgICAgICBpZiAoIXNybCkgcmV0dXJuOwogICAgICAgIGlmICgobGVmdC5zdHlsZS5tYXhIZWlnaHQgfHwgJ25vbmUnKSAhPT0gdGV4dCkgewogICAgICAgICAgbGVmdC5zdHlsZS5tYXhIZWlnaHQgPSB0ZXh0OwogICAgICAgICAgaWYgKG5vbmUpIHNybC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJycpOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IGxldiA9IEFycmF5LmZyb20oc3JsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5sZXZfQm94JykpOwogICAgICAgICAgICBjb25zdCBjaCA9IGxldi5tYXAobGIgPT4gbGIuY2xpZW50SGVpZ2h0KS5yZWR1Y2UoKHgsIHkpID0+IHggKyB5KTsKICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5taW4obWF4SGVpZ2h0IC0gc3JsLm9mZnNldFRvcCwgY2gpICsgJ3B4JzsKICAgICAgICAgICAgaWYgKHNybC5zdHlsZS5oZWlnaHQgIT09IGhlaWdodCkgewogICAgICAgICAgICAgIHNybC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgICAgICAgc3JsLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIOavj+W9k+a7muWKqOa7muWKqOadoeaIluiwg+aVtOeql+WPo+Wkp+Wwj+aXtu+8jOabtOaWsOW3puagj+eKtuaAgQogICAgICBsZXQgaGFzU2Nyb2xsID0gZmFsc2U7CiAgICAgIGNvbnN0IHVwZGF0ZUxlZnRQb3NpdGlvbiA9IGZ1bmN0aW9uIHVwZGF0ZUxlZnRQb3NpdGlvbigpIHsKICAgICAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnlhd2YtV0JfbGVmdF9uYXYnKTsKICAgICAgICBjb25zdCByZWZlcmVuY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfbWFpbl9yJyk7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsY19tYWluJyk7CiAgICAgICAgaWYgKCFsZWZ0IHx8ICFyZWZlcmVuY2UpIHJldHVybjsKICAgICAgICBjb25zdCByZWZjID0gcmVmZXJlbmNlLmdldENsaWVudFJlY3RzKCk7CiAgICAgICAgaWYgKCFyZWZjPy5bMF0pIHJldHVybjsKICAgICAgICBjb25zdCBwb3MgPSByZWZjWzBdOwogICAgICAgIGlmICghaGFzU2Nyb2xsKSB7CiAgICAgICAgICBpZiAocG9zLmJvdHRvbSA8IC02MCkgewogICAgICAgICAgICBoYXNTY3JvbGwgPSB0cnVlOwogICAgICAgICAgICByZWZlcmVuY2Uuc2V0QXR0cmlidXRlKCd5YXdmLWZpeGVkJywgJycpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocG9zLmJvdHRvbSArIGxlZnQuY2xpZW50SGVpZ2h0ID4gNjApIHsKICAgICAgICAgICAgaGFzU2Nyb2xsID0gZmFsc2U7CiAgICAgICAgICAgIHJlZmVyZW5jZS5yZW1vdmVBdHRyaWJ1dGUoJ3lhd2YtZml4ZWQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGhhc1Njcm9sbCkgewogICAgICAgICAgY29uc3QgY2lwID0gY29udGFpbmVyLmdldENsaWVudFJlY3RzKClbMF07CiAgICAgICAgICBjb25zdCBmaXAgPSBsZWZ0LmdldENsaWVudFJlY3RzKClbMF07CiAgICAgICAgICBjb25zdCBub19zcGFjZSA9IGZhbHNlOyAvLyBmaWx0ZXIuaXRlbXMuc3R5bGUuc3dlaWJvLm5vX3dlaWJvX3NwYWNlLmNvbmY7CiAgICAgICAgICBjb25zdCBtYXhIZWlnaHRCb3R0b20gPSBjaXAuYm90dG9tIC0gZmlwLnRvcCArIChub19zcGFjZSA/IDAgOiAtMTApOwogICAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5taW4obWF4SGVpZ2h0Qm90dG9tLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSA4MCksIDApOwogICAgICAgICAgaWYgKGNpcCAmJiBmaXApIHVwZGF0ZU1heEhlaWdodChsZWZ0LCBtYXhIZWlnaHQpOwogICAgICAgIH0gZWxzZSB7IHVwZGF0ZU1heEhlaWdodChsZWZ0KTsgfQogICAgICB9OwoKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdXBkYXRlTGVmdFBvc2l0aW9uKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHVwZGF0ZUxlZnRQb3NpdGlvbik7CiAgICAgIG9ic2VydmVyLmRvbS5hZGQodXBkYXRlTGVmdFBvc2l0aW9uKTsKICAgIH0sCiAgfSk7CgogIHNjcm9sbC5zY3JvbGxSaWdodCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF9yaWdodF9tb3ZlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IHNjcm9sbC5zY3JvbGwsCiAgICBpbml0aWFsOiB0cnVlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2Nyb2xsUmlnaHQsCiAgICBpbml0KCkgewogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKHNjcm9sbEFmdGVyTWVyZ2UoJ3JpZ2h0JykpOwoKICAgICAgY29uc3QgbWVyZ2UgPSBsYXlvdXQuc2lkZWJhci5tZXJnZS5nZXRDb25maWcoKTsKICAgICAgY29uc3QgZmxlZnQgPSBzY3JvbGwuc2Nyb2xsTGVmdC5nZXRDb25maWcoKTsKICAgICAgY29uc3QgZnJpZ2h0ID0gc2Nyb2xsLnNjcm9sbFJpZ2h0LmdldENvbmZpZygpOwogICAgICBjb25zdCBmb3RoZXIgPSBzY3JvbGwuc2Nyb2xsT3RoZXJzLmdldENvbmZpZygpOwogICAgICBjb25zdCBpdGVtQXR0cnMgPSBbJ2ZpeGVkLWl0ZW0nLCAnZml4ZWQtYm94J107CiAgICAgIGNvbnN0IGNvbnRhaW5lckF0dHJzID0gWydmaXhlZC1pbmJveCcsICdmaXhlZC1pZCddOwogICAgICBjb25zdCB3aXRoSW4gPSBbXTsKICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAoY2xhc3NOYW1lcywgYXR0cmlidXRlcykgewogICAgICAgIHJldHVybiBjbGFzc05hbWVzLm1hcChjbGFzc05hbWUgPT4gKAogICAgICAgICAgYXR0cmlidXRlcy5tYXAoYXR0cmlidXRlID0+IGAke2NsYXNzTmFtZX0gWyR7YXR0cmlidXRlfV1gKS5qb2luKCcsJykKICAgICAgICApKS5qb2luKCcsJyk7CiAgICAgIH07CiAgICAgIGlmICghZnJpZ2h0KSB3aXRoSW4ucHVzaCgnLldCX21haW5fcicpOwogICAgICBpZiAoIWZsZWZ0IHx8IG1lcmdlKSB3aXRoSW4ucHVzaCgnLldCX21haW5fbCcpOwogICAgICBpZiAoIWZvdGhlcikgeyB3aXRoSW4ucHVzaCgnLldCX2ZyYW1lX2InLCAnLldCX2ZyYW1lX2MnKTsgfQogICAgICBpZiAod2l0aEluLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKICAgICAgY29uc3QgcmVtb3ZlRml4ZWQgPSBmdW5jdGlvbiByZW1vdmVGaXhlZCgpIHsKICAgICAgICBjb25zdCBpdGVtUXVlcnkgPSBxdWVyeVN0cmluZyh3aXRoSW4sIGl0ZW1BdHRycyk7CiAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaXRlbVF1ZXJ5KSk7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZml4ZWQpIHsKICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGZpeGVkLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgIGl0ZW1BdHRycy5mb3JFYWNoKGF0dHIgPT4geyBjbG9uZWQucmVtb3ZlQXR0cmlidXRlKGF0dHIpOyB9KTsKICAgICAgICAgIGZpeGVkLnJlcGxhY2VXaXRoKGNsb25lZCk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgY29udGFpbmVyUXVlcnkgPSBxdWVyeVN0cmluZyh3aXRoSW4sIGNvbnRhaW5lckF0dHJzKTsKICAgICAgICBjb25zdCBjb250YWluZXJzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbnRhaW5lclF1ZXJ5KSk7CiAgICAgICAgY29udGFpbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGNvbnRhaW5lci5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICBjb250YWluZXJBdHRycy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyKSB7IGNsb25lZC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7IH0pOwogICAgICAgICAgY29uc3QgcGFyZW50ID0gY29udGFpbmVyLnBhcmVudE5vZGU7CiAgICAgICAgICBjb25zdCBwcmV2ID0gcGFyZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7CiAgICAgICAgICBjb25zdCBoYWRXcmFwZWQgPSBwYXJlbnQuc3R5bGUud2lsbENoYW5nZSAmJiBwcmV2ICYmIHByZXYuaW5uZXJIVE1MID09PSAnJzsKICAgICAgICAgIGNvbnN0IHJlcGxhY2VUYXJnZXQgPSBoYWRXcmFwZWQgPyBwYXJlbnQgOiBjb250YWluZXI7CiAgICAgICAgICBpZiAoaGFkV3JhcGVkKSBwcmV2LnJlbW92ZSgpOwogICAgICAgICAgcmVwbGFjZVRhcmdldC5yZXBsYWNlV2l0aChjbG9uZWQpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBvYnNlcnZlci5kb20uYWRkKHJlbW92ZUZpeGVkKTsKICAgIH0sCiAgfSk7CgogIHNjcm9sbC5zY3JvbGxPdGhlcnMgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfb3RoZXJfbW92ZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBzY3JvbGwuc2Nyb2xsLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2Nyb2xsT3RoZXJzLAogICAgaW5pdGlhbDogdHJ1ZSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9sYXlvdXQvY2hhdC5qcwo7IChmdW5jdGlvbiAoKSB7CiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgbGF5b3V0ID0geWF3Zi5ydWxlcy5sYXlvdXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGNvbnN0IGNoYXQgPSBsYXlvdXQuY2hhdCA9IHt9OwoKICBpMThuLmNoYXRUb29sR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn6IGK5aSpJywKICAgIGVuOiAnQ2hhdCcsCiAgfTsKCiAgY2hhdC5jaGF0ID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jaGF0VG9vbEdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uY2hhdFBhZ2VEaXNhYmxlVW5sb2FkUHJvbXB0ID0gewogICAgY246ICflhbPpl63ogYrlpKnpobXpnaLml7bml6DpnIDkuozmrKHnoa7orqQnLAogICAgdHc6ICfpl5zplonogYrlpKnpoIHpnaLmmYLnhKHpnIDkuozmrKHnorroqo0nLAogICAgZW46ICdQcmV2ZW50IHByb21vcHRpbmcgd2hlbiBjbG9zZSBjaGF0IHBhZ2UnLAogIH07CgogIGNoYXQuY2hhdFBhZ2VEaXNhYmxlVW5sb2FkUHJvbXB0ID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnY2hhdF9wYWdlX2Rpc2FibGVfdW5sb2FkX3Byb21wdCcsCiAgICB2ZXJzaW9uOiA1NywKICAgIHBhcmVudDogY2hhdC5jaGF0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2hhdFBhZ2VEaXNhYmxlVW5sb2FkUHJvbXB0LAogICAgLy8g5a6e546w5ZyoIC9jb250ZW50L2NoYXQvcnVsZS5qcwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2xheW91dC9vdGhlci5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBlbnYgPSB5YXdmLmVudjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZvbnRMaXN0ID0geWF3Zi5mb250TGlzdDsKICBjb25zdCBjaGF0ZnJhbWUgPSB5YXdmLmNoYXRmcmFtZTsKICBjb25zdCBiYWNrZW5kID0geWF3Zi5iYWNrZW5kOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGxheW91dCA9IHlhd2YucnVsZXMubGF5b3V0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwogIGNvbnN0IHRpbWUgPSB1dGlsLnRpbWU7CiAgY29uc3Qgc3RyaW5ncyA9IHV0aWwuc3RyaW5nczsKCiAgY29uc3QgZGV0YWlscyA9IGxheW91dC5kZXRhaWxzID0ge307CgogIGkxOG4uZGV0YWlsc1Rvb2xHcm91cFRpdGxlID0gewogICAgY246ICfnu4boioInLAogICAgdHc6ICfntLDnr4AnLAogICAgZW46ICdEZXRhaWxzJywKICB9OwoKICBkZXRhaWxzLmRldGFpbHMgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmRldGFpbHNUb29sR3JvdXBUaXRsZSwKICB9KTsKCgogIGkxOG4uc3R5bGVUZXh0Rm9udEZhbWlseSA9IHsKICAgIGNuOiAn5pu/5o2i572R6aG15a2X5L2T5Li6fOilv+aWh3t7d2VzdH19fOS4reaWh3t7Y2hpbmVzZX19JywKICAgIHR3OiAn5pu/5o+b57ay6aCB5a2X5b2i54K6fOilv+aWh3t7d2VzdH19fOS4reaWh3t7Y2hpbmVzZX19JywKICAgIGVuOiAnQ3VzdG9taXplIGZvbnRzIG9uIHdlYnBhZ2UgfCBXZXN0ZXJuIHt7d2VzdH19IHwgQ2hpbmVzZSB7e2NoaW5lc2V9fScsCiAgfTsKCiAgY29uc3Qgc3VwcG9ydGVkRm9udHMgPSBmb250TGlzdC5nZXQoKTsKCiAgbGF5b3V0LmZvbnRGYW1pbHkgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmb250X2ZhbWlseScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBkZXRhaWxzLmRldGFpbHMsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zdHlsZVRleHRGb250RmFtaWx5LAogICAgcmVmOiB7CiAgICAgIHdlc3Q6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBzZWxlY3Q6IHN1cHBvcnRlZEZvbnRzLnRoZW4oZm9udHMgPT4gKAogICAgICAgICAgZm9udHMud2VzdC5tYXAoKFtjc3NOYW1lLCBuYW1lXSkgPT4gKHsKICAgICAgICAgICAgdmFsdWU6IG5hbWUsCiAgICAgICAgICAgIHRleHQ6IG5hbWUsCiAgICAgICAgICAgIHN0eWxlOiBgZm9udC1mYW1pbHk6ICR7Y3NzTmFtZX07IGZvbnQtc2l6ZTogMTIwJTtgLAogICAgICAgICAgfSkpCiAgICAgICAgKSksCiAgICAgIH0sCiAgICAgIGNoaW5lc2U6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBzZWxlY3Q6IHN1cHBvcnRlZEZvbnRzLnRoZW4oZm9udHMgPT4gKAogICAgICAgICAgZm9udHMuY2hpbmVzZS5tYXAoKFtjc3NOYW1lLCBuYW1lXSkgPT4gKHsKICAgICAgICAgICAgdmFsdWU6IG5hbWUsCiAgICAgICAgICAgIHRleHQ6IG5hbWUsCiAgICAgICAgICAgIHN0eWxlOiBgZm9udC1mYW1pbHk6ICR7Y3NzTmFtZX07IGZvbnQtc2l6ZTogMTIwJTtgLAogICAgICAgICAgfSkpCiAgICAgICAgKSksCiAgICAgIH0sCiAgICB9LAogICAgYXN5bmMgYWluaXQoKSB7CiAgICAgIGNvbnN0IHdlc3QgPSB0aGlzLnJlZi53ZXN0LmdldENvbmZpZygpOwogICAgICBjb25zdCBjaGluZXNlID0gdGhpcy5yZWYuY2hpbmVzZS5nZXRDb25maWcoKTsKICAgICAgY29uc3QgZm9udHMgPSBhd2FpdCBzdXBwb3J0ZWRGb250czsKICAgICAgY29uc3QgW3dlc3RDc3NuYW1lXSA9IGZvbnRzLndlc3QuZmluZCgoW18sIG5hbWVdKSA9PiBuYW1lID09PSB3ZXN0KTsKICAgICAgY29uc3QgW2NoaW5lc2VDc3NuYW1lXSA9IGZvbnRzLmNoaW5lc2UuZmluZCgoW18sIG5hbWVdKSA9PiBuYW1lID09PSBjaGluZXNlKTsKICAgICAgY3NzLmFwcGVuZChgaHRtbCBib2R5LCBodG1sIGJvZHkuV0JfbWFjVCwgaHRtbCBib2R5LldCX3hwVCwgaHRtbCAuV0Jfd2ViaW0geyBmb250LWZhbWlseTogJHt3ZXN0Q3NzbmFtZX0sICR7Y2hpbmVzZUNzc25hbWV9OyB9YCk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGF2YXRhclNoYXBlOiB7CiAgICAgIGNuOiAn57uf5LiA5aS05YOP5b2i54q25Li6fHt7c2hhcGV9fScsCiAgICAgIGhrOiAn57Wx5LiA6aCt5YOP5b2i54uA54K6fHt7c2hhcGV9fScsCiAgICAgIGVuOiAnU2hvdyBhbGwgYXZhdGFycyBhcyB8IHt7c2hhcGV9fScsCiAgICB9LAogICAgYXZhdGFyU2hhcGVDaXJjbGU6IHsKICAgICAgY246ICflnIblvaInLAogICAgICBoazogJ+Wck+W9oicsCiAgICAgIGVuOiAnQ2lyY2xlJywKICAgIH0sCiAgICBhdmF0YXJTaGFwZVNxdWFyZTogewogICAgICBjbjogJ+aWueW9oicsCiAgICAgIGVuOiAnU3F1YXJlJywKICAgIH0sCiAgfSk7CgogIGRldGFpbHMuYXZhdGFyU2hhcGUgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2xheW91dF9hdmF0YXJfc2hhcGUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZGV0YWlscy5kZXRhaWxzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uYXZhdGFyU2hhcGUsCiAgICByZWY6IHsKICAgICAgc2hhcGU6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBpbml0aWFsOiAnc3F1YXJlJywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICdjaXJjbGUnLCB0ZXh0OiAoKSA9PiBpMThuLmF2YXRhclNoYXBlQ2lyY2xlIH0sCiAgICAgICAgICB7IHZhbHVlOiAnc3F1YXJlJywgdGV4dDogKCkgPT4gaTE4bi5hdmF0YXJTaGFwZVNxdWFyZSB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5yZWYuc2hhcGUuZ2V0Q29uZmlnKCk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBpZiAoc2hhcGUgPT09ICdzcXVhcmUnKSB7CiAgICAgICAgICBjc3MuYXBwZW5kKGAuV19mYWNlX3JhZGl1cywgLldfcGVyc29uX2luZm8gLmNvdmVyIC5oZWFkcGljLCAuUENEX2hlYWRlciAucGZfcGhvdG8sIC5QQ0RfaGVhZGVyIC5waG90b193cmFwLCAuUENEX2hlYWRlciAucGZfcGhvdG8gLnBob3RvLCAuUENEX3VzZXJfYSAucGljaXRlbXMgLnBpY19ib3gsIC5QQ0RfY29ubmVjdGxpc3QgLmZvbGxvd19ib3ggLm1vZF9waWMgaW1nLCAuUENEX3V0X2EgLnBpY19ib3gsIC5QQ0RfY291bnRlcl9iIC5waWNfYm94LCAuV0JfZmVlZF92MyAuV0Jfc29uRmVlZCAuV0JfZmFjZSwgLldCX2ZlZWRfdjMgLldCX3NvbkZlZWQgLldCX2ZhY2UgLmZhY2UgaW1nIHsgYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50OyB9YCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNzcy5hcHBlbmQoYGltZ1t1c2VyY2FyZF0sIC5XQl9mYWNlIGltZyB7IGJvcmRlci1yYWRpdXM6IDUwJSAhaW1wb3J0YW50OyB9YCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChzaGFwZSA9PT0gJ2NpcmNsZScpIHJldHVybjsKICAgICAgICBjc3MuYXBwZW5kKGAud29vLWF2YXRhci1ob3Zlck1hc2ssIC53b28tYXZhdGFyLWltZywgLndvby1hdmF0YXItbWFpbjo6YmVmb3JlIHsgYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50OyB9YCk7CiAgICAgIH0KICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZmFzdEZhY2U6IHsgY246ICfooajmg4XpgInmi6nmoYbkvJjlhYjliJflh7rluLjnlKjlj4rnva7pobbooajmg4V8e3tjbGVhcn19JywgdHc6ICfooajmg4Xpgbjmk4fmoYblhKrlhYjliJflh7rluLjnlKjlj4rnva7poILooajmg4V8e3tjbGVhcn19JywgZW46ICdMaXN0IHRvcCBhbmQgcmVjZW50IGVtb2ppIG9uIHRoZSB0b3Agb2YgZW1vamkgc2VsZWN0b3IgfCB7e2NsZWFyfX0nIH0sCiAgICBmYXN0RmFjZVRvcDogeyBjbjogJ+e9rumhticsIHR3OiAn572u6aCCJywgZW46ICdUb3AnIH0sCiAgICBmYXN0RmFjZVRvcE5vdGljZTogeyBjbjogJ+WwhuS4i+aWueihqOaDheaLluaUvuiHs+atpOe9rumhticsIHR3OiAn5bCH5LiL5pa56KGo5oOF5ouW5pS+6Iez5q2k572u6aCCJywgZW46ICdEcmFnIGVtb2ppIGFuZCBkcm9wIGhlcmUgdG8gc3RpY2t5JyB9LAogICAgZmFzdEZhY2VSZWNlbnQ6IHsgY246ICfmnIDov5EnLCB0dzogJ+acgOi/kScsIGVuOiAnUmVjZW50JyB9LAogICAgZmFzdEZhY2VDbGVhcjogeyBjbjogJ+a4heepuuWIl+ihqCcsIHR3OiAn5riF6Zmk5riF5ZauJywgZW46ICdDbGVhciBMaXN0JyB9LAogIH0pOwoKICBkZXRhaWxzLmZhc3RGYWNlID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnbGF5b3V0X2Zhc3RfZmFjZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBkZXRhaWxzLmRldGFpbHMsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mYXN0RmFjZSwKICAgIHJlZjogT2JqZWN0LmFzc2lnbih7fSwgLi4uWyd0b3AnLCAncmVjZW50J10ubWFwKGtleSA9PiAoewogICAgICBba2V5XTogewogICAgICAgIGluaXRpYWw6IFtdLAogICAgICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICAgICAgY29uc3QgZW1wdHlMaXN0ID0gQXJyYXkoMTApLmZpbGwobnVsbCk7CiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gZW1wdHlMaXN0OwogICAgICAgICAgcmV0dXJuIHZhbHVlLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0gPT09IG51bGwpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoaXRlbT8udGl0bGUgJiYgaXRlbS5pbWcgJiYgaXRlbS50ZXh0KSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfSkuY29uY2F0KGVtcHR5TGlzdCkuc2xpY2UoMCwgMTApOwogICAgICAgIH0sCiAgICAgIH0sCiAgICB9KSksIHsKICAgICAgY2xlYXI6IHsKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGEgY2xhc3M9IldfYnRuX2IgeWF3Zi1jbGVhci1mYWNlIiBocmVmPSJqYXZhc2NyaXB0OjsiPjxzcGFuIGNsYXNzPSJXX2YxNCI+PC9zcGFuPjwvYT4nOwogICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS50ZXh0Q29udGVudCA9IGkxOG4uZmFzdEZhY2VDbGVhcjsKICAgICAgICAgIGNvbnRhaW5lci5maXJzdENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgICBkZXRhaWxzLmZhc3RGYWNlLnJlZi50b3Auc2V0Q29uZmlnKCk7CiAgICAgICAgICAgIGRldGFpbHMuZmFzdEZhY2UucmVmLnJlY2VudC5zZXRDb25maWcoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdENoaWxkOwogICAgICAgIH0sCiAgICAgIH0sCiAgICB9KSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgLy8g5pi+56S65LiA5Liq6KGo5oOF77yb6IGK5aSp56qX5Y+j6YeM6Z2i6KGo5oOF6L6T5YWl55qE5qC85byP5ZKM5Yir55qE5Zyw5pa55LiN5LiA5qC3CiAgICAgIGNvbnN0IGNyZWF0ZUZhY2VJdGVtID0gZnVuY3Rpb24gKGZhY2UsIGlzSW0pIHsKICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgaWYgKCFmYWNlKSByZXR1cm4gbGk7CiAgICAgICAgbGkudGl0bGUgPSBmYWNlLnRpdGxlOwogICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnLCBgJHtpc0ltID8gJ3RleHQnIDogJ2luc2VydCd9PSR7ZmFjZS50ZXh0fWApOwogICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnYWN0aW9uLXR5cGUnLCBpc0ltID8gJ3dlYmltX3BoaXpfZmFjZScgOiAnc2VsZWN0Jyk7CiAgICAgICAgY29uc3QgaW1nID0gbGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykpOwogICAgICAgIGltZy5zcmMgPSBmYWNlLmltZzsKICAgICAgICByZXR1cm4gbGk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiDlsIbliJfooajmmL7npLrlh7rmnaXvvIzosIPmlbTpobrluo/lsL3ph4/kv53nlZnlt7LmnInnmoTooajmg4XnmoTkvY3nva4KICAgICAgICogQHBhcmFtIHtIVE1MVUxpc3RFbGVtZW50fSB1bAogICAgICAgKiBAcGFyYW0ge3t0aXRsZSwgdGV4dCwgaW1nfVtdfSBmYWNlTGlzdAogICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzSW0KICAgICAgICovCiAgICAgIGNvbnN0IHJlbmRlckxpc3RLZWVwT2xkID0gZnVuY3Rpb24gKHVsLCBmYWNlTGlzdCwgaXNJbSkgewogICAgICAgIGNvbnN0IGxpc3RJdGVtcyA9IEFycmF5LmZyb20odWwucXVlcnlTZWxlY3RvckFsbCgnbGknKSk7CiAgICAgICAgY29uc3QgbmV3RmFjZVRpdGxlcyA9IG5ldyBTZXQoZmFjZUxpc3QubWFwKGUgPT4gZT8udGl0bGUpLmZpbHRlcih0ID0+IHQpKTsKICAgICAgICBjb25zdCBlbXB0eVNsb3RzID0gW107CiAgICAgICAgbGlzdEl0ZW1zLmZvckVhY2gobGkgPT4gewogICAgICAgICAgY29uc3QgdGl0bGUgPSBsaS50aXRsZTsKICAgICAgICAgIGNvbnN0IGV4aXN0SW5OZXcgPSBuZXdGYWNlVGl0bGVzLmhhcyh0aXRsZSk7CiAgICAgICAgICBpZiAoZXhpc3RJbk5ldykgbmV3RmFjZVRpdGxlcy5kZWxldGUodGl0bGUpOwogICAgICAgICAgZWxzZSBpZiAobGkudGl0bGUpIHsKICAgICAgICAgICAgY29uc3QgbmV3TGkgPSBjcmVhdGVGYWNlSXRlbShudWxsLCBpc0ltKTsKICAgICAgICAgICAgbGkucmVwbGFjZVdpdGgobmV3TGkpOwogICAgICAgICAgICBlbXB0eVNsb3RzLnB1c2gobmV3TGkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZW1wdHlTbG90cy5wdXNoKGxpKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBbLi4ubmV3RmFjZVRpdGxlc10uZm9yRWFjaCh0aXRsZSA9PiB7CiAgICAgICAgICBjb25zdCBmYWNlID0gZmFjZUxpc3QuZmluZChmYWNlID0+IGZhY2UudGl0bGUgPT09IHRpdGxlKTsKICAgICAgICAgIGVtcHR5U2xvdHMuc2hpZnQoKS5yZXBsYWNlV2l0aChjcmVhdGVGYWNlSXRlbShmYWNlLCBpc0ltKSk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiDlsIbliJfooajmmL7npLrlh7rmnaXvvIzkuI3osIPmlbTpobrluo/lj6/og73kv67mlLnlt7LmnInnmoTooajmg4XkvY3nva4KICAgICAgICogQHBhcmFtIHtIVE1MVUxpc3RFbGVtZW50fSB1bAogICAgICAgKiBAcGFyYW0ge3t0aXRsZSwgdGV4dH1bXX0gZmFjZUxpc3QKICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc0ltCiAgICAgICAqLwogICAgICBjb25zdCByZW5kZXJMaXN0S2VlcEluZGV4ID0gZnVuY3Rpb24gKHVsLCBmYWNlTGlzdCwgaXNJbSkgewogICAgICAgIGNvbnN0IGxpc3RJdGVtcyA9IEFycmF5LmZyb20odWwucXVlcnlTZWxlY3RvckFsbCgnbGknKSk7CiAgICAgICAgZmFjZUxpc3QuZm9yRWFjaCgoZmFjZSwgaW5kZXgpID0+IHsKICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gbGlzdEl0ZW1zW2luZGV4XTsKICAgICAgICAgIGlmIChsaXN0SXRlbS50aXRsZSA9PT0gKGZhY2U/LnRpdGxlID8/ICcnKSkgcmV0dXJuOwogICAgICAgICAgbGlzdEl0ZW0ucmVwbGFjZVdpdGgoY3JlYXRlRmFjZUl0ZW0oZmFjZSwgaXNJbSkpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBjb25zdCByZW5kZXJSZWNlbnRMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGxpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnlhd2YtZmFjZS1yZWNlbnQgdWwnKTsKICAgICAgICBjb25zdCBmYWNlTGlzdCA9IHJ1bGUucmVmLnJlY2VudC5nZXRDb25maWcoKTsKICAgICAgICBsaXN0cy5mb3JFYWNoKGxpc3QgPT4gewogICAgICAgICAgcmVuZGVyTGlzdEtlZXBPbGQobGlzdCwgZmFjZUxpc3QsIGxpc3QubWF0Y2hlcygnLnlhd2YtZmFjZS1pbSAqJykpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBjb25zdCByZW5kZXJUb3BMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGxpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnlhd2YtZmFjZS10b3AgdWwnKTsKICAgICAgICBjb25zdCBmYWNlTGlzdCA9IHJ1bGUucmVmLnRvcC5nZXRDb25maWcoKTsKICAgICAgICBsaXN0cy5mb3JFYWNoKGxpc3QgPT4gewogICAgICAgICAgcmVuZGVyTGlzdEtlZXBJbmRleChsaXN0LCBmYWNlTGlzdCwgbGlzdC5tYXRjaGVzKCcueWF3Zi1mYWNlLWltIConKSk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiDku47ooqvngrnlh7vnmoTlr7nosaHvvIjlm77niYfmiJbogIXliJfooajpobnvvInlvpfliLDooajmg4XnmoTnm7jlhbPkv6Hmga8KICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0CiAgICAgICAqLwogICAgICBjb25zdCBnZXRGYWNlID0gZnVuY3Rpb24gKHRhcmdldCkgewogICAgICAgIGNvbnN0IGxpID0gdGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IGZhY2UgPSB7CiAgICAgICAgICAgIHRpdGxlOiBsaS50aXRsZSwKICAgICAgICAgICAgdGV4dDogbmV3IFVSTFNlYXJjaFBhcmFtcyhsaS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykpLmdldCgnaW5zZXJ0JyksCiAgICAgICAgICAgIGltZzogbGkucXVlcnlTZWxlY3RvcignaW1nJykuc3JjLAogICAgICAgICAgfTsKICAgICAgICAgIGlmICghZmFjZS50aXRsZSB8fCAhZmFjZS50ZXh0IHx8ICFmYWNlLmltZykgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4gZmFjZTsKICAgICAgICB9IGNhdGNoIChlKSB7IHJldHVybiBudWxsOyB9CiAgICAgIH07CiAgICAgIC8vIOS7juWIl+ihqOS4reenu+mZpOmHjeWkjeeahOmhue+8jOW5tuS/neeVmSAxMCDkuKoKICAgICAgY29uc3QgcmVtb3ZlRHVwbGljYXRlID0gZnVuY3Rpb24gKGZhY2VMaXN0KSB7CiAgICAgICAgY29uc3QgZmFjZVRpdGxlID0gbmV3IFNldCgpLCByZXN1bHQgPSBbXTsKICAgICAgICBmYWNlTGlzdC5mb3JFYWNoKGZhY2UgPT4gewogICAgICAgICAgaWYgKCFmYWNlIHx8IGZhY2VUaXRsZS5oYXMoZmFjZS50aXRsZSkpIHJldHVybjsKICAgICAgICAgIGZhY2VUaXRsZS5hZGQoZmFjZS50aXRsZSk7CiAgICAgICAgICByZXN1bHQucHVzaChmYWNlKTsKICAgICAgICB9KTsKICAgICAgICB3aGlsZSAocmVzdWx0Lmxlbmd0aCA8IDEwKSByZXN1bHQucHVzaChudWxsKTsKICAgICAgICByZXR1cm4gcmVzdWx0LnNsaWNlKDAsIDEwKTsKICAgICAgfTsKICAgICAgLy8g5Zyo55So5oi354K55Ye76KGo5oOF5ZCO5pu05paw5pyA6L+R5L2/55So55qE6KGo5oOFCiAgICAgIGNvbnN0IHVwZGF0ZVJlY2VudCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGNvbnN0IGZhY2UgPSBnZXRGYWNlKGV2ZW50LnRhcmdldCk7CiAgICAgICAgaWYgKCFmYWNlKSByZXR1cm47CiAgICAgICAgY29uc3QgcmVjZW50ID0gW2ZhY2VdLmNvbmNhdChydWxlLnJlZi5yZWNlbnQuZ2V0Q29uZmlnKCkpOwogICAgICAgIHJ1bGUucmVmLnJlY2VudC5zZXRDb25maWcocmVtb3ZlRHVwbGljYXRlKHJlY2VudCkpOwogICAgICAgIHJlbmRlclJlY2VudExpc3QoKTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIOS9v+eUqOaLluaLvee9rumhtuihqOaDhQogICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIKICAgICAgICogQHBhcmFtIHtIVE1MVUxpc3RFbGVtZW50fSB1bAogICAgICAgKi8KICAgICAgY29uc3QgZHJhZ0ZhY2UgPSBmdW5jdGlvbiAoY29udGFpbmVyLCB1bCkgewogICAgICAgIC8vIOaYvuekuuWSjOmakOiXj+aPkOekuuaLluaLveeahOagh+ivrQogICAgICAgIGNvbnN0IG5vdGljZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mYWNlLWRyb3AtYXJlYScpOwogICAgICAgIGNvbnN0IHNob3dOb3RpY2UgPSBmdW5jdGlvbiAoKSB7IG5vdGljZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgfTsKICAgICAgICBjb25zdCBoaWRlTm90aWNlID0gZnVuY3Rpb24gKCkgeyBub3RpY2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfTsKICAgICAgICAvLyDmi5bmi70KICAgICAgICBsZXQgZHJhZ2dpbmcgPSBudWxsLCBsaXN0SXRlbXM7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHsKICAgICAgICAgIGRyYWdnaW5nID0gZ2V0RmFjZShldmVudC50YXJnZXQpIHx8IG51bGw7CiAgICAgICAgICAvLyDlvIDlp4vmi5bmi73nmoTml7blgJnvvIzmoIforrDmiYDmnInnm67nmoTlnLDkuLrlj6/nvJbovpHnmoQKICAgICAgICAgIGxpc3RJdGVtcyA9IEFycmF5LmZyb20odWwuY2hpbGROb2Rlcyk7CiAgICAgICAgICBsaXN0SXRlbXMuZm9yRWFjaChsaSA9PiB7IGxpLnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ3RydWUnKTsgfSk7CiAgICAgICAgICBzaG93Tm90aWNlKCk7CiAgICAgICAgfSk7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7IGRyYWdnaW5nID0gbnVsbDsgfSk7CiAgICAgICAgbm90aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsICgpID0+IHsgaGlkZU5vdGljZSgpOyB9KTsKICAgICAgICB1bC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCAoKSA9PiB7IGhpZGVOb3RpY2UoKTsgfSk7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKSA9PiB7IGhpZGVOb3RpY2UoKTsgfSk7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBldmVudCA9PiB7CiAgICAgICAgICAvLyDnu5PmnZ/mi5bmi73nmoTml7blgJnmgaLlpI3ljp/moLcKICAgICAgICAgIGlmIChsaXN0SXRlbXMpIGxpc3RJdGVtcy5mb3JFYWNoKGxpID0+IHsgbGkucmVtb3ZlQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKTsgfSk7IGxpc3RJdGVtcyA9IG51bGw7CiAgICAgICAgICBjb25zdCBpbWdfdXBsb2FkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmRfd2VpYm8gLmltZ191cGxvYWQnKTsKICAgICAgICAgIGlmIChpbWdfdXBsb2FkKSBpbWdfdXBsb2FkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAvLyDnhLblkI7nnIvnnIvotbfmraLpg73lnKjlk6rph4wKICAgICAgICAgIGlmIChkcmFnZ2luZyA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgY29uc3QgY3VycmVudCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdsaScpOwogICAgICAgICAgY29uc3QgaW5kZXggPSBBcnJheS5mcm9tKHVsLmNoaWxkTm9kZXMpLmluZGV4T2YoY3VycmVudCk7CiAgICAgICAgICAvLyDmiormi73liLDnmoTkuJzopb/liqDliLDnva7pobbph4zpnaLljrsKICAgICAgICAgIGNvbnN0IGxpc3QgPSBydWxlLnJlZi50b3AuZ2V0Q29uZmlnKCksIG9sZCA9IGxpc3RbaW5kZXhdOwogICAgICAgICAgY29uc3QgbmV3TGlzdCA9IGxpc3QubWFwKChmYWNlLCBpKSA9PiB7CiAgICAgICAgICAgIGlmIChpID09PSBpbmRleCkgcmV0dXJuIGRyYWdnaW5nOwogICAgICAgICAgICBpZiAoIWZhY2UpIHJldHVybiBudWxsOwogICAgICAgICAgICBpZiAoZmFjZS50aXRsZSA9PT0gZHJhZ2dpbmcudGl0bGUpIHJldHVybiBvbGQ7CiAgICAgICAgICAgIHJldHVybiBmYWNlOwogICAgICAgICAgfSk7CiAgICAgICAgICBydWxlLnJlZi50b3Auc2V0Q29uZmlnKG5ld0xpc3QpOwogICAgICAgICAgcmVuZGVyVG9wTGlzdCgpOwogICAgICAgIH0pOwogICAgICAgIGlmIChydWxlLnJlZi50b3AuZ2V0Q29uZmlnKCkuc29tZShlID0+IGUpKSBoaWRlTm90aWNlKCk7CiAgICAgIH07CiAgICAgIC8vIOebkeinhuaWsOeahOihqOaDheahhgogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGZhY2VGYXN0T2JzZXJ2ZXIoKSB7CiAgICAgICAgY29uc3QgdGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxheWVyX2ZhY2VzOm5vdChbbm9kZS10eXBlPSJodWF0aV90YWJzIl0pIC5XQl9taW5pdGFiOmZpcnN0LWNoaWxkJyk7CiAgICAgICAgaWYgKCF0YWIpIHJldHVybjsKICAgICAgICBjb25zdCBjb250YWluZXIgPSB0YWIucGFyZW50Tm9kZTsKICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iZmFjZXNfbGlzdCB5YXdmLWZhY2UtbGlzdCIgbm9kZS10eXBlPSJzY3JvbGxWaWV3Ij48ZGl2IGNsYXNzPSJ5YXdmLWZhY2UtdG9wIHlhd2YtZmFjZS1yb3ciIG5vZGUtdHlwZT0ibGlzdCI+PHNwYW4gY2xhc3M9Inlhd2YtZmFjZS10aXRsZSI+PC9zcGFuPjx1bCBjbGFzcz0ieWF3Zi1mYWNlLWl0ZW1zIj48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48L3VsPjxzcGFuIGNsYXNzPSJ5YXdmLWZhY2UtZHJvcC1hcmVhIj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1mYWNlLXJlY2VudCB5YXdmLWZhY2Utcm93IiBub2RlLXR5cGU9Imxpc3QiPjxzcGFuIGNsYXNzPSJ5YXdmLWZhY2UtdGl0bGUiPjwvc3Bhbj48dWwgY2xhc3M9Inlhd2YtZmFjZS1pdGVtcyI+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PC91bD48L2Rpdj48L2Rpdj4nOwogICAgICAgIGNvbnN0IGFyZWEgPSBjb250YWluZXIuaW5zZXJ0QmVmb3JlKHdyYXAuZmlyc3RDaGlsZCwgdGFiKTsKICAgICAgICBhcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZhY2UtdG9wIHNwYW4nKS50ZXh0Q29udGVudCA9IGkxOG4uZmFzdEZhY2VUb3A7CiAgICAgICAgYXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mYWNlLWRyb3AtYXJlYScpLnRleHRDb250ZW50ID0gaTE4bi5mYXN0RmFjZVRvcE5vdGljZTsKICAgICAgICBhcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZhY2UtcmVjZW50IHNwYW4nKS50ZXh0Q29udGVudCA9IGkxOG4uZmFzdEZhY2VSZWNlbnQ7CiAgICAgICAgY29uc3QgdG9wTGlzdCA9IGFyZWEucXVlcnlTZWxlY3RvcignLnlhd2YtZmFjZS10b3AgdWwnKTsKICAgICAgICBjb25zdCByZWNlbnRMaXN0ID0gYXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mYWNlLXJlY2VudCB1bCcpOwogICAgICAgIGNvbnN0IGNoYXRMaXN0Tm9kZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd1bFtub2RlLXR5cGU9Il9waGl6TGlzdE5vZGUiXScpOwogICAgICAgIGNvbnN0IGlzSW0gPSBjaGF0TGlzdE5vZGUgIT0gbnVsbDsKICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1cGRhdGVSZWNlbnQpOwogICAgICAgIGRyYWdGYWNlKGNvbnRhaW5lciwgdG9wTGlzdCk7CiAgICAgICAgaWYgKGlzSW0pIHsKICAgICAgICAgIGFyZWEuY2xhc3NMaXN0LmFkZCgneWF3Zi1mYWNlLWltJyk7CiAgICAgICAgICBmaXhDaGF0KFt0b3BMaXN0LCByZWNlbnRMaXN0XSwgY2hhdExpc3ROb2RlKTsKICAgICAgICB9CiAgICAgICAgcmVuZGVyVG9wTGlzdCgpOwogICAgICAgIHJlbmRlclJlY2VudExpc3QoKTsKICAgICAgfSk7CiAgICAgIC8vIOS/rueQhuS4gOS4i+iBiuWkqeeql+WPo+mHjOmdoueahOaDheWGtQogICAgICAvLyDmiJHkuI3noa7lrprov5nmrrXku6PnoIHov5jmnInmsqHmnInnlKjvvIzmgLvkuYvlhYjnlZnnnYAKICAgICAgY29uc3QgZml4Q2hhdCA9IGZ1bmN0aW9uIChsaXN0cywgY2hhdExpc3ROb2RlKSB7CiAgICAgICAgbGlzdHMuZm9yRWFjaChsaXN0ID0+IHsKICAgICAgICAgIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKTsKICAgICAgICAgICAgaWYgKCF0YXJnZXQudGl0bGUpIHJldHVybjsKICAgICAgICAgICAgLy8g5byE5LiA5Liq5YGH55qE5oyJ6ZKu77yM5pS+5Zyo5Y6f5pys55qE5YiX6KGo5pyr5bC+77yM6aqX5LuW6K+05oiR54K555qE5piv5Y6f5pys55qE5YiX6KGo6YeM6Z2i55qECiAgICAgICAgICAgIGNvbnN0IGZha2UgPSB0YXJnZXQuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgICBmYWtlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGNoYXRMaXN0Tm9kZS5hcHBlbmRDaGlsZChmYWtlKTsKICAgICAgICAgICAgZmFrZS5jbGljaygpOwogICAgICAgICAgICBmYWtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZmFrZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgY3NzLmFwcGVuZChgCi5sYXllcl9mYWNlcyAuZmFjZXNfbGlzdC55YXdmLWZhY2UtbGlzdCB7IGhlaWdodDogNzlweDsgfQoueWF3Zi1mYWNlLXJvdyB7IGRpc3BsYXk6IGJsb2NrOyBoZWlnaHQ6IDMycHg7IG1hcmdpbjogMCAwIDVweDsgfQoueWF3Zi1mYWNlLXRpdGxlIHsgZmxvYXQ6IGxlZnQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBsaW5lLWhlaWdodDogMzJweDsgcGFkZGluZzogMDsgdGV4dC1hbGlnbjogY2VudGVyOyB3aWR0aDogNTJweDsgbWFyZ2luOiAwIC04cHggMCAwOyB9Ci55YXdmLWZhY2UtaXRlbXMgeyBmbG9hdDogcmlnaHQ7IG1hcmdpbjogMCA4cHg7IH0KLnlhd2YtZmFjZS1pdGVtcyBsaSB7IGNvbG9yOiB0cmFuc3BhcmVudDsgfQoueWF3Zi1mYWNlLWRyb3AtYXJlYSB7IGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDEyNywgMC41KTsgY2xlYXI6IGJvdGg7IGZsb2F0OiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGhlaWdodDogMzZweDsgbGluZS1oZWlnaHQ6IDM2cHg7IG1hcmdpbjogLTM2cHggOHB4IDA7IG9wYWNpdHk6IDE7IHBhZGRpbmc6IDA7IHdpZHRoOiAzNDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9Ci5sYXllcl9mYWNlcyAuZmFjZXNfbGlzdCB7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IHVzZXItc2VsZWN0OiBub25lOyB9Ci5sYXllcl9mYWNlcyAuZmFjZXNfbGlzdCBsaSB7IG92ZXJmbG93OiBoaWRkZW47IH0KLmxheWVyX2ZhY2VzIC5mYWNlc19saXN0IGltZyB7IGJvcmRlcjogMTBweCB0cmFuc3BhcmVudCBzb2xpZDsgbWFyZ2luOiAtMTBweDsgfQpgKTsKICAgIH0sCiAgfSk7CgogIGlmIChlbnYuY29uZmlnLnJlcXVlc3RCbG9ja2luZ1N1cHBvcnRlZCkgewogICAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICAgIHRvcGljQ29tcGxldGVXaXRob3V0OiB7CiAgICAgICAgY246ICflnKjor53popjoh6rliqjlrozmiJDml7bkuI3ljIXmi6x8fHt7cGxhY2V9feWcsOeCuXx7e21vdmllfX3nlLXlvbF8e3tib29rfX3lm77kuaZ8e3t0b3BpY3196LaF6K+dfHt7bXVzaWN9femfs+S5kHx7e3N0b2NrfX3ogqHnpagnLAogICAgICAgIHR3OiAn5Zyo6Kmx6aGM6Ieq5YuV5a6M5oiQ5pmC5LiN5YyF5ousfHx7e3BsYWNlfX3lnLDpu558e3ttb3ZpZX196Zu75b2xfHt7Ym9va3195ZyW5pu4fHt7dG9waWN9fei2heipsXx7e211c2ljfX3pn7PmqIJ8e3tzdG9ja3196IKh56WoJywKICAgICAgICBlbjogJ0V4Y2x1ZGUgZm9sbG93aW5nIGl0ZW1zIGZyb20gdG9waWMgYXV0byBjb21wbGV0ZXx8e3twbGFjZX19IHBsYWNlfHt7bW92aWV9fSBtb3ZpZXx7e2Jvb2t9fSBib29rfHx7e3RvcGljfX0gc3VwZXIgdG9waWN8e3ttdXNpY319IG11c2ljfHt7c3RvY2t9fSBzdG9jaycsCiAgICAgIH0sCiAgICB9KTsKCiAgICBkZXRhaWxzLnRvcGljQ29tcGxldGVXaXRob3V0ID0gcnVsZS5SdWxlKHsKICAgICAgaWQ6ICdsYXlvdXRfdG9waWNfd2l0aG91dCcsCiAgICAgIHZlcnNpb246IDMwLAogICAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udG9waWNDb21wbGV0ZVdpdGhvdXQsCiAgICAgIHJlZjogT2JqZWN0LmFzc2lnbih7fSwgLi4uWydwbGFjZScsICdtb3ZpZScsICdib29rJywgJ3RvcGljJywgJ211c2ljJywgJ3N0b2NrJ10ubWFwKHR5cGUgPT4gKHsKICAgICAgICBbdHlwZV06IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICAgIH0pKSksCiAgICAgIGluaXQoKSB7CiAgICAgICAgYmFja2VuZC5vblJlcXVlc3QoJ3RvcGljJywgYXN5bmMgZGV0YWlscyA9PiB7CiAgICAgICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKCkpIHJldHVybiB7fTsKICAgICAgICAgIGNvbnN0IGhpZGVJdGVtcyA9IFsncGxhY2UnLCAnbW92aWUnLCAnYm9vaycsICd0b3BpYycsICdtdXNpYycsICdzdG9jayddLmZpbHRlcih0eXBlID0+IHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmW3R5cGVdLmdldENvbmZpZygpOwogICAgICAgICAgfSk7CiAgICAgICAgICBhd2FpdCBiYWNrZW5kLnRvcGljRmlsdGVyKGRldGFpbHMsIGhpZGVJdGVtcyk7CiAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9KTsKICB9CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgdXNlTG9jYWxlVGltZXpvbmU6IHsKICAgICAgY246ICfkvb/nlKjmnKzmnLrml7bljLonLAogICAgICB0dzogJ+S9v+eUqOacrOapn+aZguWNgCcsCiAgICAgIGVuOiAnVXNlIGxvY2FsZSB0aW1lem9uZScsCiAgICB9LAogICAgZmVlZHNSZWFkOiB7IGNuOiAn5L2g55yL5Yiw6L+Z6YeMJywgdHc6ICfkvaDnnIvliLDpgJnoo6EnLCBlbjogJ3lvdSBnb3QgaGVyZScgfSwKICB9KTsKCiAgLy8g5L2/55So5pys5Zyw5pe25Yy6CiAgZGV0YWlscy50aW1lem9uZSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF9sb2NhbGVfdGltZXpvbmUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZGV0YWlscy5kZXRhaWxzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlTG9jYWxlVGltZXpvbmUsCiAgICBoaWRkZW46IHRpbWUuaXNDc3RFcXVpdmFsZW50KCksCiAgICBpbml0KCkgewoKICAgICAgY29uc3QgdXNlTG9jYWxlID0gdGhpcy5pc0VuYWJsZWQoKTsKICAgICAgY29uc3QgZmVlZFVzZVllYXIgPSB5YXdmLnJ1bGVzLmZlZWRzLmRldGFpbHMuZmVlZEFic29sdXRlVGltZS5pc0VuYWJsZWQoKTsKCiAgICAgIGlmICghdXNlTG9jYWxlICYmICFmZWVkVXNlWWVhcikgcmV0dXJuOwoKICAgICAgY29uc3QgdXBkYXRlRGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgY29uc3QgZGF0ZSA9IHBhcnNlSW50KGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd5YXdmLWRhdGUnKSwgMTApOwogICAgICAgIGNvbnN0IGZvcm1hdCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd5YXdmLWRhdGUtZm9ybWF0JykgfHwgbnVsbDsKICAgICAgICBjb25zdCBsb2NhbGUgPSB1c2VMb2NhbGUgPyAnY3VycmVudCcgOiAnY3N0JzsKICAgICAgICBjb25zdCBmb3JtYXRUaW1lUmVzdWx0ID0gdXRpbC50aW1lLmZvcm1hdChkYXRlLCB7IGZvcm1hdCwgbG9jYWxlIH0pOwogICAgICAgIGlmIChlbGVtZW50LnRleHRDb250ZW50ICE9PSBmb3JtYXRUaW1lUmVzdWx0KSB7CiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gZm9ybWF0VGltZVJlc3VsdDsKICAgICAgICB9CiAgICAgICAgaWYgKHVzZUxvY2FsZSkgewogICAgICAgICAgY29uc3QgZm9ybWF0VGltZURldGFpbFJlc3VsdCA9IHV0aWwudGltZS5mb3JtYXQoZGF0ZSwgeyBmb3JtYXQ6ICdmdWxsJywgbG9jYWxlOiAnY3VycmVudCcgfSk7CiAgICAgICAgICBpZiAoZWxlbWVudC50aXRsZSAhPT0gZm9ybWF0VGltZURldGFpbFJlc3VsdCkgewogICAgICAgICAgICBlbGVtZW50LnRpdGxlID0gZm9ybWF0VGltZURldGFpbFJlc3VsdDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICBjb25zdCB1cGRhdGVBbGxEYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGRhdGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3lhd2YtZGF0ZV0nKTsKICAgICAgICBBcnJheS5mcm9tKGRhdGVzKS5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgdXBkYXRlRGF0ZShlbGVtZW50KTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIGlmICh1c2VMb2NhbGUpIHsKICAgICAgICBjb25zdCBoYW5kbGVEYXRlRWxlbWVudHMgPSBmdW5jdGlvbiBoYW5kbGVEYXRlRWxlbWVudHMoKSB7CiAgICAgICAgICBjb25zdCBbZmVlZExpc3RUaW1lVGlwLCAuLi5tb3JlRmVlZExpc3RUaW1lVGlwXSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF90aW1lVGlwIl1bZGF0ZV0nKTsKICAgICAgICAgIG1vcmVGZWVkTGlzdFRpbWVUaXAuZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQucmVtb3ZlKCkpOwogICAgICAgICAgaWYgKGZlZWRMaXN0VGltZVRpcCkgKGZ1bmN0aW9uICh0aXApIHsKICAgICAgICAgICAgY29uc3Qgb2xkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tub2RlLXR5cGU9Inlhd2YtZmVlZF9saXN0X3RpbWVUaXAiXVtkYXRlXScpOwogICAgICAgICAgICBBcnJheS5mcm9tKG9sZHMpLmZvckVhY2goZWxlbWVudCA9PiBlbGVtZW50LnJlbW92ZSgpKTsKICAgICAgICAgICAgdGlwLnNldEF0dHJpYnV0ZSgnbm9kZS10eXBlJywgJ3lhd2YtZmVlZF9saXN0X3RpbWVUaXAnKTsKICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHBhcnNlSW50KHRpcC5nZXRBdHRyaWJ1dGUoJ2RhdGUnKSwgMTApOwogICAgICAgICAgICB0aXAucmVtb3ZlQXR0cmlidXRlKCdkYXRlJyk7CiAgICAgICAgICAgIHRpcC5jbGFzc0xpc3QuYWRkKCd5YXdmLWZlZWRfbGlzdF90aW1lVGlwJyk7CiAgICAgICAgICAgIHRpcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0JfY2FyZHRpdGxlX2EgV190YyI+PGEgbm9kZS10eXBlPSJmZWVkX2xpc3RfaXRlbV9kYXRlIiBzdHlsZT0iY29sb3I6aW5oZXJpdCI+PC9hPjwvZGl2Pic7CiAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGlwLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZDsKICAgICAgICAgICAgaW5uZXIuc2V0QXR0cmlidXRlKCd5YXdmLWRhdGUnLCBkYXRlKTsKICAgICAgICAgICAgaW5uZXIuYWZ0ZXIoJyAnICsgaTE4bi5mZWVkc1JlYWQpOwogICAgICAgICAgfShmZWVkTGlzdFRpbWVUaXApKTsKCiAgICAgICAgICBjb25zdCBkYXRlRWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRlXScpKTsKICAgICAgICAgIGRhdGVFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgICBjb25zdCBkYXRlID0gcGFyc2VJbnQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGUnKSwgMTApOwogICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgneWF3Zi1kYXRlJywgZGF0ZSk7CiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRlJyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoZmVlZExpc3RUaW1lVGlwIHx8IGRhdGVFbGVtZW50cy5sZW5ndGgpIHVwZGF0ZUFsbERhdGUoKTsKICAgICAgICB9OwoKICAgICAgICBvYnNlcnZlci5kb20uYWRkKGhhbmRsZURhdGVFbGVtZW50cyk7CgogICAgICAgIC8vIOWkhOeQhuaWh+acrOaYvuekuueahOaXtumXtAogICAgICAgIGNvbnN0IGhhbmRsZVRleHREYXRlRWxlbWVudHMgPSBmdW5jdGlvbiBjaGFuZ2VEYXRlVGV4dCgpIHsKICAgICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IFsKICAgICAgICAgICAgJy5XQl9mcm9tOm5vdChbeWF3Zi1sb2NhbHRpbWVdKScsCiAgICAgICAgICAgICcuY29udF90b3AgLmRhdGE6bm90KFt5YXdmLWxvY2FsdGltZV0pJywKICAgICAgICAgICAgJ2xlZ2VuZDpub3QoW3lhd2YtbG9jYWx0aW1lXSknLAogICAgICAgICAgICAnLmxheWVyX2RpYWxvZ3VlX3Y1IC50aW1lX3MgcCcsCiAgICAgICAgICBdLmpvaW4oJywnKTsKICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycykpOwogICAgICAgICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtbG9jYWx0aW1lJywgJycpOwogICAgICAgICAgICAvLyDogYrlpKnnqpflj6PkuK3nmoTml7bpl7TmmK/mnKzlnLDnmoTml7bpl7TvvIzkvYbmmK/lhbblrp7njrDlnKjlt7Lnu4/msqHmnInogYrlpKnnqpflj6PkuoYKICAgICAgICAgICAgaWYgKGVsZW1lbnQubWF0Y2hlcygnLldCX3dlYmltIConKSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsKICAgICAgICAgICAgaWYgKHRleHROb2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGV4dE5vZGUudGV4dENvbnRlbnQudHJpbSgpOwogICAgICAgICAgICBpZiAodGV4dCA9PT0gJycpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgW19mdWxsLCBtYXRjaCwgdGFpbF0gPSB0ZXh0Lm1hdGNoKC9eKC4qPylccyoo5p2l6IeqfOS+huiHqnxjb21lIGZyb218KSQvKTsKICAgICAgICAgICAgY29uc3QgdGltZSA9IHV0aWwudGltZS5wYXJzZShtYXRjaCk7CiAgICAgICAgICAgIGlmICghdGltZSkgcmV0dXJuOwogICAgICAgICAgICB1dGlsLmRlYnVnKCdwYXJzZSB0aW1lICVvKCVzKSB0byAlbyglcyknLCB0ZXh0Tm9kZSwgdGV4dCwgdGltZSwgdGltZSk7CiAgICAgICAgICAgIHRleHROb2RlLnRleHRDb250ZW50ID0gdGFpbCA/IGAgJHt0YWlsfSBgIDogJyc7CiAgICAgICAgICAgIGNvbnN0IHRpbWVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICB0aW1lRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZGF0ZScsICt0aW1lKTsKICAgICAgICAgICAgdXBkYXRlRGF0ZSh0aW1lRWxlbWVudCk7CiAgICAgICAgICAgIHRleHROb2RlLnJlcGxhY2VXaXRoKHRpbWVFbGVtZW50KTsKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChoYW5kbGVUZXh0RGF0ZUVsZW1lbnRzKTsKICAgICAgfQoKICAgICAgaWYgKGZlZWRVc2VZZWFyKSB7CiAgICAgICAgb2JzZXJ2ZXIuZmVlZC5vbkFmdGVyKGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgICBjb25zdCBkYXRlcyA9IGZlZWRQYXJzZXIuZGF0ZS5kb20oZmVlZCk7CiAgICAgICAgICBkYXRlcy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGUnKSkgewogICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBwYXJzZUludChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0ZScpLCAxMCk7CiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZGF0ZScsIGRhdGUpOwogICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZGF0ZS1mb3JtYXQnLCAneWVhcicpOwogICAgICAgICAgICB1cGRhdGVEYXRlKGVsZW1lbnQpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHNldEludGVydmFsKHVwZGF0ZUFsbERhdGUsIDFlMyk7CgogICAgICBjc3MuYXBwZW5kKGAKLldCX2ZlZWRfdjMgLldCX2Zyb20gc3Bhblt5YXdmLWRhdGVdIHsgbWFyZ2luLWxlZnQ6IDA7IH0KW3lhd2YtZGF0ZV06OmFmdGVyIHsgY29udGVudDogIiAiOyB9CmApOwogICAgfSwKICB9KTsKCiAgaWYgKGVudi5jb25maWcuY2hhdEluUGFnZVN1cHBvcnRlZCkgewoKICAgIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgICBjaGF0SW5QYWdlOiB7CiAgICAgICAgY246ICflnKjlvq7ljZrpobXpnaLlhoXmlbTlkIjogYrlpKnnqpflj6MnLAogICAgICAgIHR3OiAn5Zyo5b6u5Y2a6aCB6Z2i5YWn5pW05ZCI6IGK5aSp56qX5Y+jJywKICAgICAgICBlbjogJ1VzZSBjaGF0IGluIHBhZ2VzIG9mIGZlZWRzJywKICAgICAgfSwKICAgICAgY2hhdEJ1dHRvblRleHQ6IHsKICAgICAgICAvLyDov5nkuKrmnaHnm67msqHmnInnv7vor5HvvIzlm6DkuLrov5nkuKrlj6rmmK/lnKjlvq7ljZrnmoTliJ3lp4vljJbkuYvliY3nlKjnmoQKICAgICAgICAvLyDlvq7ljZrliJ3lp4vljJbkuYvlkI7kvJrnlKjlvq7ljZroh6rlt7HnmoTvvIzpgqPkuKrlsLHmsqHmnInnv7vor5EKICAgICAgICBjbjogJ+W+ruWNmuiBiuWkqScsCiAgICAgIH0sCiAgICB9KTsKCiAgICBkZXRhaWxzLmNoYXRGcmFtZSA9IHJ1bGUuUnVsZSh7CiAgICAgIGlkOiAnbGF5b3V0X2NoYXRfaW5fcGFnZScsCiAgICAgIHZlcnNpb246IDEsCiAgICAgIHBhcmVudDogZGV0YWlscy5kZXRhaWxzLAogICAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jaGF0SW5QYWdlLAogICAgICByZWY6IHsKICAgICAgICB3aWR0aDogeyBpbml0aWFsOiA2NDAsIG1pbjogNjQwIH0sCiAgICAgICAgaGVpZ2h0OiB7IGluaXRpYWw6IDQ4MCwgbWluOiA0ODAgfSwKICAgICAgfSwKICAgICAgYWluaXQoKSB7CiAgICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgICAgY3NzLmFwcGVuZChgCiNXQl93ZWJjaGF0IHsgYm90dG9tOiAtMTAwcHggIWltcG9ydGFudDsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgfQojeWF3Zi13ZWJjaGF0IHsgcG9zaXRpb246IGZpeGVkOyBib3R0b206IDBweDsgcmlnaHQ6IDBweDsgei1pbmRleDogMTAyNDsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgYmFja2dyb3VuZDogI2QzZDZkZjsgfQojeWF3Zi13ZWJjaGF0IC53ZWJpbV9mb2xkIHsgdG9wOiAtNDBweDsgcmlnaHQ6IDBweDsgdmlzaWJpbGl0eTogdmlzaWJsZTsgfQojeWF3Zi13ZWJjaGF0IC5mb2xkX2NvbnQgZW0geyB3aWR0aDogMjAwcHg7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgaGVpZ2h0OiA0MHB4OyB9Ci55YXdmLXdlYmltLW1haW4geyBwb3NpdGlvbjogZml4ZWQ7IGJvdHRvbTogMDsgcmlnaHQ6IDA7IHotaW5kZXg6IDEwMDAwOyBib3gtc2hhZG93OiAwIDAgMTBweCBibGFjazsgYm9yZGVyLXJhZGl1czogM3B4IDAgMCAwOyBvdmVyZmxvdzogaGlkZGVuOyB9Ci55YXdmLXdlYmltLW1haW4gaWZyYW1lIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYm9yZGVyOiAwIG5vbmU7IH0KLnlhd2Ytd2ViaW0tcmVzaXplciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEycHg7IGhlaWdodDogMTJweDsgbGVmdDogMDsgdG9wOiAwOyBtYXJnaW46IDA7IGN1cnNvcjogbndzZS1yZXNpemU7IG9wYWNpdHk6IDAuODsgfQoueWF3Zi13ZWJpbS1yZXNpemVyIGksIC55YXdmLXdlYmltLXJlc2l6ZXI6OmFmdGVyIHsgY29udGVudDogIiAiOyBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMnB4OyBoZWlnaHQ6IDEycHg7IH0KLnlhd2Ytd2ViaW0tcmVzaXplciBpIHsgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTsgb3ZlcmZsb3c6IGhpZGRlbjsgcmVzaXplOiBib3RoOyB9Ci55YXdmLXdlYmltLXJlc2l6ZSAueWF3Zi13ZWJpbS1yZXNpemVyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgfQpgKTsKCiAgICAgICAgbGV0IHNob3dDaGF0V2luZG93ID0gbnVsbDsKICAgICAgICBsZXQgZnJhbWVDb250ZW50UmVzb2x2ZTsKICAgICAgICAvKiogQHR5cGUge1Byb21pc2U8V2luZG93Pn0gKi8KICAgICAgICBsZXQgZnJhbWVDb250ZW50ID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7IGZyYW1lQ29udGVudFJlc29sdmUgPSByZXNvbHZlOyB9KTsKICAgICAgICBjb25zdCBpbml0Q2hhdEFyZWEgPSBmdW5jdGlvbiAob3JpKSB7CiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0Jfd2ViaW0iIGlkPSJ5YXdmLXdlYmNoYXQiIHN0eWxlPSIiPjxkaXYgY2xhc3M9IndlYmltX2ZvbGQgd2ViaW1fZm9sZF92MiBjbGVhcmZpeCI+PGRpdiBjbGFzcz0iZm9sZF9iZyI+PC9kaXY+PHAgY2xhc3M9ImZvbGRfY29udCBjbGVhcmZpeCI+PHNwYW4gY2xhc3M9ImZvbGRfaWNvbiBXX2ZsIiBkYXRhLXRhcmdldD0ibWluaWNoYXQiPjwvc3Bhbj48ZW0gY2xhc3M9ImZvbGRfZm9udCBXX2ZsIFdfZjE0Ij48L2VtPjwvcD48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLXdlYmltLW1haW4iIHN0eWxlPSJ3aWR0aDogNjQwcHg7IGhlaWdodDogNDgwcHg7Ij48aWZyYW1lIHNyYz0iaHR0cHM6Ly9jaGF0LjIyMWVkYzNmLTllMTYtNDk3My1hNTIyLTRjYTIxZTdjODU0MC5pbnZhbGlkLyI+PC9pZnJhbWU+PGRpdiBjbGFzcz0ieWF3Zi13ZWJpbS1yZXNpemVyIj48aT48L2k+PC9kaXY+PC9kaXY+PC9kaXY+JzsKICAgICAgICAgIGNvbnN0IHdlYmltID0gY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkOwogICAgICAgICAgY29uc3QgZm9sZCA9IHdlYmltLnF1ZXJ5U2VsZWN0b3IoJy53ZWJpbV9mb2xkJyk7CiAgICAgICAgICBjb25zdCBtYWluID0gd2ViaW0ucXVlcnlTZWxlY3RvcignLnlhd2Ytd2ViaW0tbWFpbicpOwogICAgICAgICAgY29uc3QgZnJhbWUgPSB3ZWJpbS5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTsKICAgICAgICAgIGNvbnN0IHJlc2l6ZXIgPSB3ZWJpbS5xdWVyeVNlbGVjdG9yKCcueWF3Zi13ZWJpbS1yZXNpemVyJyk7CiAgICAgICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gbWFpbi5wYXJlbnROb2RlOwogICAgICAgICAgbWFpbkNvbnRhaW5lci5yZW1vdmVDaGlsZChtYWluKTsKICAgICAgICAgIGxldCBmb2xkZWQgPSB0cnVlOwogICAgICAgICAgc2hvd0NoYXRXaW5kb3cgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChtYWluLnBhcmVudE5vZGUgIT09IG1haW5Db250YWluZXIpIHsKICAgICAgICAgICAgICBtYWluQ29udGFpbmVyLmFwcGVuZENoaWxkKG1haW4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG1haW4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIGZvbGQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgZm9sZGVkID0gZmFsc2U7CiAgICAgICAgICB9OwogICAgICAgICAgZm9sZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgc2hvd0NoYXRXaW5kb3coKTsKICAgICAgICAgIH0pOwogICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGlmIChmb2xkZWQpIHJldHVybjsKICAgICAgICAgICAgaWYgKHdlYmltLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHJldHVybjsKICAgICAgICAgICAgbWFpbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBmb2xkLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICBmb2xkZWQgPSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgICBmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgICAgICBjb25zdCBjb250ZW50V2luZG93ID0gZnJhbWUuY29udGVudFdpbmRvdzsKICAgICAgICAgICAgZnJhbWVDb250ZW50UmVzb2x2ZShjb250ZW50V2luZG93KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIOacquivu+a2iOaBr+aVsOmHj+WcqOWOn+eJiOeahOiBiuWkqeaMiemSruS4iueahOWxleekuu+8jOaIkeS7rOaKiuWug+aLt+i0nei/h+adpQogICAgICAgICAgY29uc3QgZm9sZFRleHQgPSB3ZWJpbS5xdWVyeVNlbGVjdG9yKCcuZm9sZF9jb250IGVtJyk7CiAgICAgICAgICBjb25zdCBvcmlUZXh0ID0gb3JpLnF1ZXJ5U2VsZWN0b3IoJy5mb2xkX2NvbnQgZW0nKTsKICAgICAgICAgIGNvbnN0IHVwZGF0ZVRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvbGRUZXh0LnRleHRDb250ZW50ID0gb3JpVGV4dC50ZXh0Q29udGVudDsKICAgICAgICAgIH07CiAgICAgICAgICAobmV3IE11dGF0aW9uT2JzZXJ2ZXIodXBkYXRlVGV4dCkpLm9ic2VydmUob3JpVGV4dCwgeyBjaGlsZExpc3Q6IHRydWUgfSk7CiAgICAgICAgICBmb2xkVGV4dC50ZXh0Q29udGVudCA9IGkxOG4uY2hhdEJ1dHRvblRleHQ7CgogICAgICAgICAgLyoKICAgICAgICAgICAqIOaOpeS4i+adpeWFgeiuuOiBiuWkqeahhue8qeaUvgogICAgICAgICAgICovCiAgICAgICAgICBsZXQgZHJhZ1N0YXJ0UG9zID0gW10sIGRyYWdTdGFydFNpemUgPSBbXTsKICAgICAgICAgIGNvbnN0IHNldFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkgewogICAgICAgICAgICBsZXQgdGFyZ2V0VyA9IG51bGwsIHRhcmdldEggPSBudWxsOwogICAgICAgICAgICBpZiAod2lkdGggIT0gbnVsbCkgewogICAgICAgICAgICAgIHRhcmdldFcgPSBNYXRoLm1heCg2NDAsIE1hdGgubWluKHdpbmRvdy5pbm5lcldpZHRoLCB3aWR0aCkpOwogICAgICAgICAgICAgIG1haW4uc3R5bGUud2lkdGggPSB0YXJnZXRXICsgJ3B4JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGVpZ2h0ICE9IG51bGwpIHsKICAgICAgICAgICAgICB0YXJnZXRIID0gTWF0aC5tYXgoNDgwLCBNYXRoLm1pbih3aW5kb3cuaW5uZXJIZWlnaHQgLSA0OCwgaGVpZ2h0KSk7CiAgICAgICAgICAgICAgbWFpbi5zdHlsZS5oZWlnaHQgPSB0YXJnZXRIICsgJ3B4JzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gW3RhcmdldFcsIHRhcmdldEhdOwogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IGNhbGNTaXplID0gZnVuY3Rpb24gKGNsaWVudFgsIGNsaWVudFkpIHsKICAgICAgICAgICAgY29uc3QgW3N0YXJ0WCwgc3RhcnRZXSA9IGRyYWdTdGFydFBvczsKICAgICAgICAgICAgY29uc3QgW3N0YXJ0Vywgc3RhcnRIXSA9IGRyYWdTdGFydFNpemU7CiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gc3RhcnRYIC0gY2xpZW50WCArIHN0YXJ0VzsKICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gc3RhcnRZIC0gY2xpZW50WSArIHN0YXJ0SDsKICAgICAgICAgICAgcmV0dXJuIHNldFNpemUod2lkdGgsIGhlaWdodCk7CiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgZHJhZ01vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgY2FsY1NpemUoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgZHJhZ0NhbmNlbCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBjYWxjU2l6ZShldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCBkcmFnRW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGNvbnN0IFt3aWR0aCwgaGVpZ2h0XSA9IGNhbGNTaXplKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgICAgICAgICBydWxlLnJlZi53aWR0aC5zZXRDb25maWcod2lkdGgpOwogICAgICAgICAgICBydWxlLnJlZi5oZWlnaHQuc2V0Q29uZmlnKGhlaWdodCk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi13ZWJpbS1yZXNpemUnKTsKICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZ01vdmUpOwogICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZHJhZ0NhbmNlbCk7CiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBkcmFnRW5kKTsKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCBkcmFnU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgZHJhZ1N0YXJ0UG9zID0gW2V2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFldOwogICAgICAgICAgICBkcmFnU3RhcnRTaXplID0gW21haW4uY2xpZW50V2lkdGgsIG1haW4uY2xpZW50SGVpZ2h0XTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCd5YXdmLXdlYmltLXJlc2l6ZScpOwogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnTW92ZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBkcmFnQ2FuY2VsKTsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGRyYWdFbmQpOwogICAgICAgICAgfTsKICAgICAgICAgIHJ1bGUucmVmLndpZHRoLmFkZENvbmZpZ0xpc3RlbmVyKG5ld1dpZHRoID0+IHsKICAgICAgICAgICAgc2V0U2l6ZShuZXdXaWR0aCwgbnVsbCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJ1bGUucmVmLmhlaWdodC5hZGRDb25maWdMaXN0ZW5lcihuZXdIZWlnaHQgPT4gewogICAgICAgICAgICBzZXRTaXplKG51bGwsIG5ld0hlaWdodCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJlc2l6ZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZHJhZ1N0YXJ0KTsKICAgICAgICAgIHNldFNpemUocnVsZS5yZWYud2lkdGguZ2V0Q29uZmlnKCksIHJ1bGUucmVmLmhlaWdodC5nZXRDb25maWcoKSk7CiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gewogICAgICAgICAgICBzZXRTaXplKG1haW4uY2xpZW50V2lkdGgsIG1haW4uY2xpZW50SGVpZ2h0KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQod2ViaW0pOwogICAgICAgIH07CgogICAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gY2hlY2tJbUFyZWEoKSB7CiAgICAgICAgICBjb25zdCB3ZWJpbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNXQl93ZWJjaGF0Om5vdChbeWF3Zi13ZWItY2hhdF0pJyk7CiAgICAgICAgICBpZiAoIXdlYmltKSByZXR1cm47CiAgICAgICAgICB3ZWJpbS5zZXRBdHRyaWJ1dGUoJ3lhd2Ytd2ViLWNoYXQnLCAnJyk7CiAgICAgICAgICBpbml0Q2hhdEFyZWEod2ViaW0pOwogICAgICAgIH0pOwoKICAgICAgICAvKgogICAgICAgICAqIOi/meS4gOauteaYr+iuqeKAnOiBiuWkqeKAnS/igJznp4Hkv6HigJ3mjInpkq7lj6/ku6Xmv4DmtLvogYrlpKnmoYblubbliIfmjaLliLDlr7nlupTnmoTkuroKICAgICAgICAgKi8KCiAgICAgICAgY29uc3QgY2hhdFRvVWlkID0gZnVuY3Rpb24gKHVpZCkgewogICAgICAgICAgZnJhbWVDb250ZW50LnRoZW4oY29udGVudFdpbmRvdyA9PiB7CiAgICAgICAgICAgIGNoYXRmcmFtZS5jaGF0VG9VaWQodWlkKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgaWYgKCFzaG93Q2hhdFdpbmRvdykgcmV0dXJuOwogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHVpZCA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IGNoYXRUbyA9IHRhcmdldC5jbG9zZXN0KCdhW2hyZWYqPSJhcGkud2VpYm8uY29tL2NoYXQiXScpOwogICAgICAgICAgICBpZiAoIWNoYXRUbykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVVJMKGNoYXRUby5oYXNoLnNsaWNlKDEpLCBsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgY29uc3QgdWlkID0gTnVtYmVyKGRhdGEuc2VhcmNoUGFyYW1zLmdldCgndG9fdWlkJykpOwogICAgICAgICAgICBpZiAoIXVpZCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiB1aWQ7CiAgICAgICAgICB9KCkpIHx8IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IHRvRGlhbG9nID0gdGFyZ2V0LmNsb3Nlc3QoJ1thY3Rpb24tdHlwZT0idG9fZGlhbG9nIl0nKTsKICAgICAgICAgICAgaWYgKCF0b0RpYWxvZykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHRvRGlhbG9nLmdldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnKSk7CiAgICAgICAgICAgIGNvbnN0IHVpZCA9IE51bWJlcihkYXRhLmdldCgndWlkJykpOwogICAgICAgICAgICBpZiAoIXVpZCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiB1aWQ7CiAgICAgICAgICB9KCkpOwogICAgICAgICAgaWYgKCF1aWQpIHJldHVybjsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIHNob3dDaGF0V2luZG93KCk7CiAgICAgICAgICBjaGF0VG9VaWQodWlkKTsKICAgICAgICB9LCB0cnVlKTsKCiAgICAgIH0sCiAgICB9KTsKCiAgfQoKICBpMThuLmhpZGVIb3RUb3BpY0xhcmdlUmVhZCA9IHsKICAgIGNuOiAn6ZqQ6JeP54Ot6Zeo6K+d6aKY5LitfOmYheivu+aVsOmHj+i2hei/h3t7cXVvdGF9feS6v+eahOivnemimCcsCiAgICB0dzogJ+maseiXj+eGsemWgOipsemhjOS4rXzplrHoroDmlbjph4/otoXpgY57e3F1b3RhfX3lhITnmoToqbHpoYwnLAogICAgZW46ICdIaWRlIFRvcGljcyBpbiBIb3QgVG9waWNzIHwgd2l0aCB7e3F1b3RhfX0wMCBtaWxsaW9uIHJlYWRpbmcgY291bnRzJywKICB9OwoKICBsYXlvdXQuaGlkZUhvdFRvcGljTGFyZ2VSZWFkID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnaGlkZV9ob3RfdG9waWNfbGFyZ2VfcmVhZCcsCiAgICB2ZXJzaW9uOiA2NSwKICAgIHBhcmVudDogZGV0YWlscy5kZXRhaWxzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uaGlkZUhvdFRvcGljTGFyZ2VSZWFkLAogICAgcmVmOiB7CiAgICAgIHF1b3RhOiB7CiAgICAgICAgdHlwZTogJ3JhbmdlJywKICAgICAgICBtaW46IDEsCiAgICAgICAgbWF4OiAxMDAsCiAgICAgICAgaW5pdGlhbDogMjAsCiAgICAgIH0sCiAgICB9LAogICAgYXN5bmMgYWluaXQoKSB7CiAgICAgIHV0aWwuY3NzLmFkZCgnLmhvdF90b3BpYyBsaVt5YXdmLXJ0b3BpYy1jb3VudD0iaGlkZGVuIl0sICN0b3BpY0FEIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBmaWx0ZVJpZ2h0VG9waWNDb3VudCgpIHsKICAgICAgICBsZXQgY291bnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaG90X3RvcGljIGxpOm5vdChbeWF3Zi1ydG9waWMtY291bnRdKSAudG90YWwnKSk7CiAgICAgICAgY291bnRzLmZvckVhY2goZnVuY3Rpb24gKGNvdW50KSB7CiAgICAgICAgICAvLyDnvZHnq5nkuK3mlbDlrZfnlLEgeHh45LiHIO+8jCB4eC545Lq/IOeahOaWueW8j+ihqOekuu+8m+S4lOayoeaciee5geS9k+aIluiLseaWh+eJiOacrAogICAgICAgICAgLy8g5rOo5oSP5pyJ5pe25YmN6Z2i55qE5pWw5a2X5Lya5pyJ5bCP5pWw54K577yM5omA5Lul6KaB5pu/5o2i5Li6IGU0LCBlOCDogIzpnZ4gMDAwMCwgMDAwMDAwMDAKICAgICAgICAgIGNvbnN0IG51bWJlciA9IHN0cmluZ3MucGFyc2VpbnQoY291bnQudGV4dENvbnRlbnQpOwogICAgICAgICAgY29uc3QgbGkgPSBjb3VudC5jbG9zZXN0KCdsaScpOwogICAgICAgICAgaWYgKE51bWJlci5pc05hTihudW1iZXIpIHx8IHRoYXQucmVmLnF1b3RhLmdldENvbmZpZygpICogMWU4IDw9IG51bWJlcikgewogICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ3lhd2YtcnRvcGljLWNvdW50JywgJ2hpZGRlbicpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCd5YXdmLXJ0b3BpYy1jb3VudCcsICdzaG93Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9sYXlvdXQvdGhlbWUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBsYXlvdXQgPSB5YXdmLnJ1bGVzLmxheW91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKICBjb25zdCB1aSA9IHV0aWwudWk7CgogIGNvbnN0IHRoZW1lID0gbGF5b3V0LnRoZW1lID0ge307CgogIGkxOG4udGhlbWVHcm91cFRpdGxlID0gewogICAgY246ICfkuLvpopgnLAogICAgdHc6ICfkuLvpoYwnLAogICAgZW46ICdUaGVtZScsCiAgfTsKCiAgdGhlbWUudGhlbWUgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnRoZW1lR3JvdXBUaXRsZSwKICB9KTsKCiAgY29uc3Qgc2tpbnMgPSB7IHNraW46IHsgXzAwMTogJ+iTneiJsuW/g+aDhScsIF8wMDI6ICfntKvojYboirHnk6MnLCBfMDAzOiAn5rKZ5rup5ryr5q2lJywgXzAwNDogJ+WHjOaZqOS4pOeCueWNiicsIF8wMDU6ICfmoqblubvmmJ/nqbonLCBfMDA2OiAn5pqX5aSc55WZ6aaZJywgXzAwNzogJ+aIkeW/g+mjnue/lCcsIF8wMDg6ICdoYXBweSBmb3JldmVyJywgXzAwOTogJ+W9qeiZuScsIF8wMTA6ICfmoqblubvmuLjkuZDlnLonLCBfMDExOiAn5b2p6Imy5aSp56m6JywgXzAxMjogJ+WQjeS6uuS8micsIF8wMTM6ICflk4fll7cnLCBfMDE0OiAn5oiR5oS/5oSPJywgXzAxNTogJ+eMq+i2oycsIF8wMTY6ICfkv53miqTljJflhrDmtIsnLCBfMDE3OiAn6a2F5b2xJywgXzAxODogJ+erpei2o+W9qeiZuScsIF8wMTk6ICdraXNzJywgXzAyMDogJ+a8k+W9qScsIF8wMjE6ICfnlZnmspknLCBfMDIyOiAn5b+D5pm0JywgXzAyMzogJ2dyZWVud2F5JywgXzAyNDogJ0hlbGxvIFBpZycsIF8wMjU6ICdJYW0gODDlkI4nLCBfMDI2OiAn5a6J6Z2Z5aScJywgXzAyNzogJ+eZvueBtem4nycsIF8wMjg6ICfnoqfojYnok53lpKknLCBfMDI5OiAn56qX5Y+wJywgXzAzMDogJ+aipuW5uycsIF8wMzE6ICfpo57puJ/psbwnLCBfMDMyOiAn57KJ6Imy6aOO5L+h5a2QJywgXzAzNDogJ+WkjeWPpCcsIF8wMzU6ICfpu5Hmnb8nLCBfMDM2OiAn5ZKW5ZWhJywgXzAzNzogJ+aDhei/t+WuneS4veadpScsIF8wMzg6ICflpKrnqbonLCBfMDM5OiAn5raC6bim5p2/JywgXzA0MDogJ+aYn+epuicsIF8wNDE6ICfpm6jlpJwnLCBfMDQyOiAn57q46aOe5py6JywgXzA0MzogJ+mjmCcsIF8wNDU6ICdwb3AnLCBfMDQ2OiAn57Sr6Imy6aOO5oOFJywgXzA0NzogJ2NvZmZlZSBiYXInLCBfMDQ4OiAn6aOO6L275LqR5rehJywgXzA0OTogJ+mjjui9u+S6kea3oScsIF8wNTA6ICfmoqblubvmmJ/nqbonLCBfMDUxOiAn5L+d5oqk5YyX5Yaw5rSLJywgXzA1MjogJ+a8k+W9qScsIF8wNTM6ICfmg4Xov7flrp3kuL3mnaUnLCBfMDU0OiAn5aSq56m6JywgXzA1NTogJ+mbqOWknCcsIF8wNTg6ICfpu5jorqQnLCBfMjExOiAn5oiR5Lus57uT5ama5ZCnJywgXzIxMjogJ+W5uOemj+WcqOi6q+i+uScsIF8yMTQ6ICfmlrDlubTpl7nmmKUnLCBfMjUyOiAn546v5L+d55uK6LW35p2lJywgXzI1MzogJ+WcsOeQg+S4gOWwj+aXticsIF8yNTQ6ICfpmo/miYvmi40nLCBfMjU1OiAn5Li654ix55uK6LW36LeRJyB9LCBza2ludmlwOiB7IF8wMDE6ICfpuJ/kurrnmoTlvILmg7PkuJbnlYwnLCBfMDAyOiAn57q46Z2i5Lq655SfJywgXzAwNjogJ+eugOe6pueUn+a0uycsIF8wMDk6ICfmuLjmiI/ml7blhYknLCBfMDEwOiAn56eA5Ye655yf5oiRJywgXzAxMTogJ+ezluaenOe8pOe6tycsIF8wMTM6ICfmiJHnmoTnv4XohoAnLCBfMDE0OiAn6I6y6IqxJywgXzAxNjogJ+i2hee6p+eOm+S4vScsIF8wMTc6ICfmtarlsI/oirEnLCBfMDE4OiAnODDlkI4nLCBfMDE5OiAn5Y+v54ix5ru05YWU5a2QJywgXzAyMTogJ+a1t+W6leS4lueVjCcsIF8wMjI6ICfnu5noh6rlt7HmlL7kuKrlgYcnLCBfMDIzOiAnODDlkI7nmoTlm57lv4YnLCBfMDI0OiAn6ams5oiP5ZuiJywgXzAyNTogJ+WtpOeLrOeahOWknCcsIF8wMjY6ICfmmpbmmpYnLCBfMDI3OiAn5ZCD6LGG5Lq6JywgXzAyODogJ3JhaW5ib3cnLCBfMDMxOiAn5rW35LmL5qKm5aKDJywgXzAzMjogJ+aXi+i9rOaXtuWFiScsIF8wMzM6ICfljYjlkI7lt7Tlo6vmg4XnvJgnLCBfMDM0OiAn5bCP6buE6bitJywgXzAzNTogJ+Wkj+W+ruWHiScsIF8wMzY6ICfnoqfmsLTmmZroiJ8nLCBfMDM3OiAnTWFycnkgTWUnLCBfMDM4OiAn5rC05aKo6bG8JywgXzAzOTogJ+WkleW9sScsIF8wNDA6ICflv4PkuYvmgYsnLCBfMDQxOiAn5b+D5b+D55u45Y2wJywgXzA0MjogJ+aXheihjOaXtuWFiScsIF8wNDM6ICfmi6XmirHnvo7lpb0nLCBfMDQ0OiAn5a+QJywgXzA0NTogJ+eLl+eLl+a8q+atpScsIF8wNDY6ICfpmL/ni7jnmoTmtbfmtIsnLCBfMDQ3OiAn6JKy5YWs6Iux55qE5qKmJywgXzA0ODogJ+aSreenjemYs+WFiScsIF8wNDk6ICflsI/mg4XkuronLCBfMDUwOiAn5rW35rupJywgXzA1MTogJ+WkqeS9v+eIseS6uicsIF8wNTQ6ICfmgqDpl7LljYjlkI4nLCBfMDU2OiAn6KW/55Oc5aWz5a2pJywgXzA1NzogJ+mDiua4uCcsIF8wNTg6ICfljZfmnoHkvIHpuYUnLCBfMDU5OiAn6ICB5LiK5rW35bKB5pyIJywgXzA2MDogJ+mbvumDvScsIF8wNjE6ICfmtbfovrnluqblgYcnLCBfMDYyOiAn5LiA5Liq5Lq655qE5peF6KGMJywgXzA2MzogJ+eOr+a4uOWcsOeQgycsIF8wNjQ6ICfnvZflsI/pu5HnmoTlvILmg7PkuJbnlYwnLCBfMDY1OiAn5p2O6Zu35LiO6Z+p5qKFJywgXzA2ODogJ+iJvueOqeWFlC3lrojlgJknLCBfMDY5OiAn5L+P55qu5Za15pif5Lq6JywgXzA3MDogJ+aipua4uOS7meWigycsIF8wNzE6ICfniLHmg4XnlYXmg7MnLCBfMDcyOiAn6JCM54uX54uXJywgXzA3MzogJ+mprOiDjOS4iueahOWkqeepuicsIF8wNzQ6ICfmmpbpmLMnLCBfMDc1OiAn5riU6Iif5ZSx5pmaJywgXzA3NjogJ+Wwj+S8meS8tCcsIF8wNzg6ICfnroDljZXnlJ/mtLsnLCBfMDc5OiAn5a6I5pybJywgXzA4MDogJ+WlveWfuuWPiycsIF8wODE6ICfpg73luILmtYHmtaonLCBfMDgyOiAn6Lqy54yr54yrJywgXzA4MzogJ+mUruebmOS7lCcsIF8wODQ6ICfljZfnk5zlpLTlv6vot5EnLCBfMDg1OiAn6aOe5ZCR5pyI55CDJywgXzA4NjogJ+aeq+aelycsIF8wODc6ICfmn7/lrZDnuqLkuoYnLCBfMDg4OiAnVHJpY2sgb3IgVHJlYXQnLCBfMDg5OiAn6ams6YeM5aWlJywgXzA5MDogJ+WkqeepuicsIF8wOTE6ICfnpLznianovbDngrjmnLonLCBfMDkyOiAn6Zi/54u455qE56eL5aSpJywgXzA5MzogJ+WLh+Wjq+eLuCcsIF8wOTQ6ICfokIzlrqDlhazlr5MnLCBfMDk1OiAn5a6B6Z2Z55qE5rW3JywgXzA5NjogJ+aciOWFiScsIF8wOTc6ICdnb29kIG5pZ2h0JywgXzA5ODogJ+WWteaYn+S6uuWQkeWJjeWGsicsIF8wOTk6ICfmo5Lmo5Lns5YnLCBfMTAxOiAn56ul6K+dJywgXzEwMjogJ+eMq+WSquS5kOmYnycsIF8xMDU6ICfooajnmb0nLCBfMTA2OiAn6Ieq55Sx54yq56WeJywgXzEwNzogJ+aipuS4reeahOWwj+WxiycsIF8xMDg6ICdYT1hPJywgXzEwOTogJ+erpeW5tOeahOWwj+eGiicsIF8xMTA6ICfmiJHnmoTkuqTlk43kuZAnLCBfMTExOiAn5LuZ5LmQ6aOY6aOYJywgXzExMjogJ+S4i+mbquWVpicsIF8xMTM6ICflr5LlhqwnLCBfMTE0OiAn5ZCO5aSpJywgXzExNTogJ+ibh+W5tOelneemjycsIF8xMTY6ICflnKPor57ogIHkuronLCBfMTE3OiAn5rGf5Y2Xc3R5bGUnLCBfMTE4OiAn6b6E5a6YJywgXzEyMDogJ+i/quWjq+WwvC3lj7Lov6rlpYcnLCBfMTIxOiAn6L+q5aOr5bC8Lee7tOWwvOeGiicsIF8xMjI6ICfov6rlo6vlsLwt5bCP6aG955quJywgXzEyMzogJ+i/quWjq+WwvC3njpvkuL3njKsnLCBfMTI0OiAn6L+q5aOr5bC8Lee+juS6uumxvCcsIF8xMjU6ICfov6rlo6vlsLwt57Gz5aWH57Gz5aauJywgXzEyNjogJ+i/quWjq+WwvC3mrKLkuZDlnKPor54nLCBfMTI3OiAn6L+q5aOr5bC8LeWwj+S7meWlsycsIF8xMjg6ICflrojmnJsnLCBfMTI5OiAn5bm954G15Y+k5aChJywgXzEzMDogJ+i/t+mbvicsIF8xMzE6ICfph5HoibLpmLPlhYknLCBfMTMyOiAnSSBNaXNzIFUnLCBfMTMzOiAn5pyq5p2l44Gu5qCRJywgXzEzNDogJ+mHkeiJsua1t+a0iycsIF8xMzU6ICfpm6jlkI4nLCBfMTM2OiAn6I2J5Z2h5LiK55qE5aWz5a2pJywgXzEzNzogJ1NleHkgbXVzaWMnLCBfMTM4OiAn56e75Yqo5Z+O5aChJywgXzEzOTogJ+aLpeaKseeIsScsIF8xNDA6ICfmmKXojYknLCBfMTQxOiAn6Iqx5LiO6J22JywgXzE0MjogJ+aoseOBruiKsScsIF8xNDU6ICfpu5HmmpfpmLbmoq8nLCBfMTQ2OiAn6bG8JywgXzE0NzogJ+WFrOS4uycsIF8xNDk6ICfku5nlpbPnmoToo5nmkYYnLCBfMTUwOiAn5bCP5LuZ5aWzJywgXzE1MjogJ+aoseiKseiInicsIF8xNTM6ICfoh6rlqLHoh6rkuZAnLCBfMTU0OiAn5ZOl5ZOlJywgXzE1NjogJ+WutuaciemHkeavmycsIF8xNTg6ICfmt5jmsJTlsI/lk4gnLCBfMTU5OiAn5rW35Yab54uX54uXJywgXzE2MDogJ+W3tOWTpScsIF8xNjM6ICfov6rlo6vlsLwt6a2U5aKD5LuZ6LiqJywgXzE2NDogJ+i/quWjq+WwvC3lhazkuLsnLCBfMTY1OiAn6Z2S5pilJywgXzE2NjogJ+iKseakhScsIF8xNjk6ICfmi4nmi4knLCBfMTczOiAn5pen5Z+O5b6A5LqLJywgXzE3NDogJ+WKn+Wkq+S5i+eOiycsIF8xNzU6ICfkuI3mmI7po57ooYzniaknLCBfMTc2OiAn5pif6ZmF5o6i6ZmpJywgXzE3ODogJ+Wwj+azsOi/qicsIF8xNzk6ICfppbzlubLllrXmmJ/kuronLCBfMTgxOiAn5Za15pif5Lq65LiJ5YWE5byfJywgXzE4MjogJ+m6i+m5v+WWteaYn+S6uicsIF8xODU6ICflj6/niLHllrXmmJ/kuronLCBfMTg3OiAn5q+N54ixJywgXzE4ODogJ+Wkp+aJi+Wwj+aJiycsIF8xODk6ICfkuIDlrrbkuronLCBfMTkyOiAn6ZKi6ZOB5L6gJywgXzE5MzogJ+mSoumTgeS+oOWHuuWHuycsIF8xOTQ6ICfov6rlo6vlsLwt57Gz5aWHJywgXzE5NTogJ+i/quWjq+WwvC3nsbPogIHpvKAnLCBfMTk2OiAn6JCd6I6JJywgXzE5NzogJ+W+oeWnkCcsIF8xOTg6ICflh53mnJvlnLDnkIMnLCBfMTk5OiAn5L6d6Z2gJywgXzIwMTogJ0NT5oiY5aOrJywgXzIwMjogJ1Rha2UgTWUgSG9tZScsIF8yMDM6ICfnmbvoiLlzdHlsZScsIF8yMDQ6ICfnqLvojYnkuronLCBfMjA1OiAnaGFwcHkgZXZlcnlkYXknLCBfMjA2OiAn55Sc54K5JywgXzIwNzogJ+Wkp+mjjuWQuScsIF8yMDg6ICfng6TnuqLolq8nLCBfMjA5OiAnQmFsbCcsIF8yMTE6ICfotKrlkIPom4cnLCBfMjEyOiAn5Yqb5LqJ5LiK5ri4JywgXzIxMzogJ+aji+mAouWvueaJiycsIF8yMTQ6ICflm6Llm6LlnIblnIYnLCBfMjE2OiAn5bm05aSc6aWtJywgXzIyMTogJ+aYpembqCcsIF8yMjI6ICflsJjpo57miawnLCBfMjI0OiAn6Zu+6Zy+5Y6L5Z+OJywgXzIyNTogJ+S7meWls+eahOiInui5iCcsIF8yMjY6ICfml4XooYzotY/mmKUnLCBfMjI3OiAn6LWP5pil5Y67JywgXzIyODogJ+aegemAn+mjmei9picsIF8yMzQ6ICfllrXmmJ/kurrnmoTmgJ3lv7UnLCBfMjM1OiAn5LqM6LSn5Za15pif5Lq6JywgXzIzNjogJ+aAgOW/tScsIF8yMzc6ICfljZbokIzllrXmmJ/kuronLCBfMjM4OiAn6YeR5a2X5aGU55qE56eY5a+GJywgXzIzOTogJ+avjeS6suiKgicsIF8yNDA6ICfnq6/ljYjoioInLCBfMjQyOiAn55uS5a2Q5pif55CDJywgXzI0MzogJ+W/g+W/g+ebuOWNsCcsIF8yNDQ6ICfnsonoibLlv4Pmg4UnLCBfMjQ1OiAn5L6P572X57qq5YWs5ZutJywgXzI0NjogJ+S4lueVjOadrycsIF8yNDc6ICfngrnnkIPlpKfmiJgnLCBfMjUwOiAn5p2o5rSLJywgXzI1MTogJ+adqOa0i+eUn+aXpeS4k+WxnicsIF8zMDM6ICfnuqrlv7Xml6UnLCBfMzA0OiAn56qX5aSW55qE5pil5aSpJywgXzMwNTogJ+mAn+W6puS4jua/gOaDhScsIF8zMDY6ICfnu7/mhI/nm47nhLYnLCBfMzA3OiAn5Yqo55S75Z+OJywgXzMxMDogJ+eJp+S6uicsIF8zMTE6ICfnvo7lpb3po47lhYknLCBfMzEyOiAn5pil5aSp55qE5bm75oOzJywgXzMxODogJ+mHjei/lOWcsOeQgycsIF8zMTk6ICflhrLkuIrkupHpnIQnLCBfMzIwOiAn6Zmo55+zJywgXzMyNTogJ+eIseaDheS9v+iAhScsIF8zMjY6ICfmgKrlhb3lpKflraYnLCBfMzI4OiAn5q+b5oCq5ZKM5bCP5LyZ5Ly0JywgXzMzMDogJ+i/quWjq+WwvC3lpI3lj6TnsbPogIHpvKAnLCBfMzMyOiAn6bG86LeDJywgXzMzMzogJ+WknOiJsicsIF8zMzQ6ICfmtbfmtIsnLCBfMzM1OiAn56WI55u8JywgXzMzNzogJ+eOq+eRsOS7o+ihqOaIkeeahOeIsScsIF8zMzk6ICfnpZ7lgbflpbbniLgyJywgXzM0MjogJ+Wco+ivnumpr+m5vycsIF8zNDM6ICfmuKnmg4XlnKPor54nLCBfMzQ0OiAn5Yaw6Zuq5aWH57yYJywgXzM0NTogJ+mpr+m+memqkeWjqycsIF8zNDc6ICfonbTonbbmmKXlpKknLCBfMzQ4OiAn57u/6Imy55Sf5rS7JywgXzM0OTogJ+W9qeiJsuawlOeQgycsIF8zNTA6ICfpm6jmu7QnLCBfMzUxOiAn5pm056m65pqW6ZizJywgXzM1NDogJ+iKseeToycsIF8zNTU6ICfmmKXoibInLCBfMzU4OiAna2VlbnnnmoTlkpbllaEnLCBfMzU5OiAna2VlbnnnmoTpsrjpsbwnLCBfNDAwOiAn5pil5aSp55qE5rCU5oGvJywgXzQwMTogJ+msvOWog+WogycsIF80MDI6ICflr4blrqQnLCBfNDA0OiAn56u55p6X5ZCs6ZuoJywgXzQwNTogJ+S6kembvicsIF80MDc6ICfmsrnoj5zoirEnLCBfNDA4OiAn5peF6YCU5Lit55qE562J5b6FJywgXzQwOTogJ+aXheeoiycsIF80MTA6ICfmsb3ovabkuYvml4UnLCBfNDExOiAn6I235YWw6aOO6L2mJywgXzQxMjogJ+i/t+W9qeS5i+aImCcsIF80MTQ6ICfmiJjlnLDpo57ovaYnLCBfNDE1OiAn5oOF5L6j5Za15pif5Lq6JywgXzQxNjogJ+WWteaYn+S6uuWSjOmxvCcsIF80MTc6ICfkuIDotbfljYjop4knLCBfNDE5OiAn54ix5b+D56OB5bimJywgXzQyMDogJ+adpeiHquaYn+aYn+eahOaIkScsIF80MjI6ICfmrKLkuZDllrXmmJ/kuronLCBfNDIzOiAn56eB5a626aOe56KfJywgXzQyNTogJ+S5kOmYnycsIF82MDA6ICflrrYnLCBfNzAyOiAn57qq5b+15rOw5oiI5bCUJywgXzcwNDogJ1RGQk9ZU+WwkeW5tOW8uicsIF83MDk6ICdURkJPWVPpnZLmmKXkv67ngrzmiYvlhownLCBfNzExOiAn5paw54mI5b6u5Y2aJywgXzcxMzogJ+aOouWvu+W5uOemjycsIF83MTQ6ICflpI/lpKnkvaDlpb0nLCBfNzE1OiAn5oiR54ix54Gr6ZSFJywgXzcxNjogJ+e6ouiJsuW3tOWjqycsIF83MTc6ICfku7DmnJvmmJ/nqbonLCBfNzE4OiAnaGFwcHkgYmlydGhkYXknLCBfNzE5OiAn6ZO25p2P55+l56eLJywgXzcyMjogJ+eOqembquWSrycsIF83MjM6ICfllrXmmJ/kurrnmoTmmJ/pmYXnqb/otoonLCBfNzI0OiAnSmluZ2xlIGJlbGxzJywgXzcyNTogJ+mXueaWsOaYpScsIF83MjY6ICfkuInnvorlvIDms7AnLCBfNzMxOiAnN+aciOaXpeWOhicsIF83MzI6ICc45pyI5pel5Y6GJywgXzczMzogJznmnIjml6XljoYnLCBfNzM0OiAnMTDmnIjml6XljoYnLCBfNzM1OiAnMTHmnIjml6XljoYnLCBfNzM2OiAnMTLmnIjml6XljoYnLCBfNzM3OiAnMeaciOaXpeWOhicsIF83Mzg6ICcy5pyI5pel5Y6GJywgXzczOTogJzPmnIjml6XljoYnLCBfNzQwOiAn56Kn5rOiJywgXzc0MTogJ+S4gOeMq+S4gOS4lueVjCcsIF83NDI6ICflkZDllornmoTmsarmsaonLCBfNzQzOiAn5a625pyJ6aaL54yrJywgXzc0NDogJ+eLl+eLl+eIsee+juS4vScsIF83NDU6ICfmuKnmn5TlpoLllrUnLCBfNzQ2OiAn6JeP54yr54yrJywgXzc0NzogJ+S8tOWQm+aXheihjCcsIF83NDg6ICfmiJHmg7PpnZnpnZknLCBfNzQ5OiAn5YC+5oOFJywgXzc1MDogJ+eyvOeyvOa1t+WFiScsIF83NTE6ICfljY7mmajlrocnLCBfNzUyOiAnU05INDgnLCBfNzUzOiAn6K+66KiAJywgXzc1NDogJ+S5lOaMr+WuhycsIF83NTU6ICflpp7lpp7lkoznq6/ljYgnLCBfNzU2OiAn5pqW5pqW5bGLJywgXzc1NzogJ+S+neWBjml2dmknLCBfODAwOiAnVEZCT1lT5piT54OK5Y2D5466JywgXzgwMTogJ+WInembqicsIF84MDI6ICfmmpblv4Pmi7/pk4EnLCBfODAzOiAn6Zmq5Ly0JywgXzgwNDogJ01lcnJ5IFhtYXMnLCBfODA1OiAn6YCG5YWJ5qOu5p6XJywgXzgwNjogJ+aIkeeIseaKq+iQqCcsIF84MDc6ICfml4XooYzmiJDnmL4nLCBfODA4OiAn5oiR54ix55Sc54K5JywgXzgwOTogJ+e+iuW5tOWIsCcsIF84MTE6ICfluIzmnJvkuYvmoJEnLCBfODEyOiAn5rW35rSLJywgXzgxMzogJ+Wwj+Wym+WSjOiIuScsIF84MTQ6ICfpm6rmma8nLCBfODE1OiAn5b2p6Jm55LmL6LevJyB9LCBza2ludmlwZjogeyBfMDAxOiAn5aSn5rW3JywgXzAwMjogJ+S4i+mbqicsIF8wMDM6ICflpKnkvb8nLCBfMDA0OiAn5Y+M5a2Q5bqnJywgXzAwNTogJ+i/nOihjCcgfSwgc2tpbnZpcGc6IHsgXzAwMTogJ+avleS4muWtoycsIF8wMDI6ICfkuIrnj63ml4/nmoTlkajkuIAnLCBfMDAzOiAn5LiK54+t5peP55qE5ZGo5LqMJywgXzAwNDogJ+S4iuePreaXj+eahOWRqOS4iScsIF8wMDU6ICfkuIrnj63ml4/nmoTlkajlm5snLCBfMDA2OiAn5LiK54+t5peP55qE5ZGo5LqUJywgXzAwNzogJ+S4iuePreaXj+eahOWRqOWFrScsIF8wMDg6ICfkuIrnj63ml4/nmoTlkajlpKknIH0sIHNraW52aXBqOiB7IF8wMDE6ICfotoXnuqfnjpvkuL3liqjmgIHniYgnIH0sIHdlZWtza2luOiB7IF8wMDI6ICflvq7ljZrnu4/lhbgnIH0sIHdlZWtza2ludmlwOiB7IF8wMDE6ICfml4XooYzml7blhYknLCBfMDAyOiAn57u/5oSPJywgXzAwMzogJ+S4iuePreaXj+S4gOWRqOW/g+aDhScsIF8wMDQ6ICfov6rlo6vlsLwnIH0gfTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzZXRTa2luOiB7CiAgICAgIGNuOiAn57uf5LiA5omA5pyJ6aG16Z2i55qE5qih5p2/fHt7c2tpbn19IHt7aX19JywKICAgICAgdHc6ICfntbHkuIDmiYDmnInpoIHpnaLnmoTmqKHmnb98e3tza2lufX0ge3tpfX0nLAogICAgICBlbjogJ1Nob3cgYWxsIHBhZ2VzIHdpdGggdGVtcGxhdGUgfCB7e3NraW59fSB7e2l9fScsCiAgICB9LAogICAgc2V0U2tpbkRldGFpbDogewogICAgICBjbjogJ+W8gOWQr+WQjuaJgOaciemhtemdouWwhuaYvuekuuaCqOmAieaLqeeahOaooeadv++8jOWMheaLrOWFtuS7lueUqOaIt+eahOS4quS6uuS4u+mhteOAguaooeadv+S4jeS8muimhuebluaCqOWcqOS4u+mhteiHquWumuS5ieeahOiDjOaZr+WbvuaIlumFjeiJsu+8jOS9huaYr+S8muimhuebluS4quS6uuS4u+mhteeahOiDjOaZr+WbvuaIlumFjeiJsuOAguaooeadv+aViOaenOS7heWcqOaCqOeahOa1j+iniOWZqOS4reeUn+aViO+8jOS7luS6uuiuv+mXruaCqOeahOS4quS6uuS4u+mhteaXtu+8jOS7jeS8mueci+WIsOaCqOWcqOW+ruWNmuS4reiuvue9rueahOaooeadv+OAguaooeadv+eahOmAieaLqeivt+WPguiAg3t7bGlzdHBhZ2V9fe+8jOWcqOaooeadv+WVhuW6l+S4reeCueWHu+WbvueJh+mihOiniOS4juW6lOeUqOaooeadv+OAgicsCiAgICB9LAogICAgc2V0U2tpbkxpc3RQYWdlVGl0bGU6IHsKICAgICAgY246ICfmqKHmnb/llYblupcnLAogICAgfSwKICAgIHNldFNraW5CeVByZXZpZXdUaXRsZTogewogICAgICBjbjogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciDmqKHmnb/orr7nva4nLAogICAgfSwKICAgIHNldFNraW5CeVByZXZpZXc6IHsKICAgICAgY246ICfmgqjopoHlnKjoja/mlrnmianlsZXkuK3kvb/nlKjigJx7MX3igJ3mqKHmnb/lkJfvvJ/lkK/nlKjlkI7mgqjorr/pl67lkITnp43pobXpnaLml7bpg73lsIbkvb/nlKjlvZPliY3nmoTmqKHmnb/jgILlnKjohJrmnKzkuK3kvb/nlKjnmq7ogqTkuI3kvJrlvbHlk43lhbbku5bnlKjmiLfmn6XnnIvmgqjkuKrkurrkuLvpobXml7bnmoTmqKHmnb/moLflvI/jgIInLAogICAgICB0dzogJ+aCqOimgeWcqOiXpeaWueaTtOWxleS4reS9v+eUqOOAjHsxfeOAjeaooeadv+WXju+8n+WVn+eUqOW+jOaCqOioquWVj+WQhOeorumggemdouaZgumDveWwh+S9v+eUqOeVtuWJjeeahOaooeadv+OAguWcqOiFs+acrOS4reS9v+eUqOearuiGmuS4jeacg+W9semfv+WFtuS7lueUqOaItuafpeeci+aCqOWAi+S6uuS4u+mggeaZgueahOaooeadv+aoo+W8j+OAgicsCiAgICAgIGVuOiAnRG8geW91IHdhbnQgdG8gZW5hYmxlIHRoZSB0ZW1wbGF0ZSAiezF9IiBpbiBZQVdGPyBBbGwgcGFnZXMgd2lsbCBzaG93IGN1cnJlbnQgdGVtcGxhdGUgaWYgeW91IGNob29zZSBlbmFibGUgaXQuIFRoZSB0ZW1wbGF0ZSBvbmx5IGFwcGxpZWQgb24geW91ciBicm93c2VyLicsCiAgICB9LAogIH0pOwoKICB0aGVtZS5hcHBseSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF90aGVtZV9hcHBseScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiB0aGVtZS50aGVtZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNldFNraW4sCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNldFNraW5EZXRhaWwgfSwKICAgICAgc2tpbjogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGluaXRpYWw6ICdza2luMDU4JywKICAgICAgICBzZWxlY3Q6IFtdLmNvbmNhdCguLi5PYmplY3Qua2V5cyhza2lucykuc29ydCgpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICBjb25zdCB2YWwgPSBza2luc1trZXldOwogICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbCkubWFwKGluZGV4ID0+IHsKICAgICAgICAgICAgY29uc3QgbnVtID0gaW5kZXguc2xpY2UoMSksIHNraW5JZCA9IGtleSArIG51bTsKICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHNraW5JZCwgdGV4dDogdmFsW2luZGV4XSArICcgKCcgKyBza2luSWQgKyAnKScgfTsKICAgICAgICAgIH0pOwogICAgICAgIH0pKSwKICAgICAgfSwKICAgICAgbGlzdHBhZ2U6IHsKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgbGluay5ocmVmID0gJy8vc2tpbi52aXAud2VpYm8uY29tL2xpc3Q/dG9wbmF2PTEmd3ZyPTYnOwogICAgICAgICAgbGluay50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBpMThuLnNldFNraW5MaXN0UGFnZVRpdGxlOwogICAgICAgICAgcmV0dXJuIGxpbms7CiAgICAgICAgfSwKICAgICAgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgdXNlckNvbmZpZ1NraW5JZCA9IHRoaXMucmVmLnNraW4uZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHNraW5JZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKS5nZXQoJ3NraW5JZCcpIHx8IHVzZXJDb25maWdTa2luSWQ7CiAgICAgIGxldCB2ZXJzaW9uID0gJyc7CiAgICAgIGxldCBza2luU3R5bGUgPSBudWxsLCBjb3ZlclN0eWxlID0gbnVsbDsKICAgICAgY29uc3Qgc2V0U2tpbklkID0gZnVuY3Rpb24gKHNraW5JZCkgewogICAgICAgIHNraW5TdHlsZS5ocmVmID0gc2tpblN0eWxlLmhyZWYucmVwbGFjZSgvXC9za2luXC9bXi9dKlwvc2tpbi5jc3MvLCBgL3NraW4vJHtza2luSWR9L3NraW4uY3NzYCk7CiAgICAgICAgY29uc3QgY292ZXJDc3MgPSBgI3NraW5fY292ZXJfcyB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCgiLy9pbWcudC5zaW5hanMuY24vdDYvc2tpbi8ke3NraW5JZH0vaW1hZ2VzL3Byb2ZpbGVfY292ZXJfcy5qcGc/dmVyc2lvbj0ke3ZlcnNpb259IikgIWltcG9ydGFudDsgfWA7CiAgICAgICAgKGNvdmVyU3R5bGUgfHwgKGNvdmVyU3R5bGUgPSBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpKSkudGV4dENvbnRlbnQgPSBjb3ZlckNzczsKICAgICAgfTsKICAgICAgY29uc3Qgc2V0U2tpbiA9IGZ1bmN0aW9uIHNldFNraW4oKSB7CiAgICAgICAgLy8g5aS05p2h5paH56ug6aG16Z2i6K6+572u5qih5p2/5Lya5a+86Ie055WM6Z2i5re35LmxCiAgICAgICAgaWYgKGluaXQucGFnZS50eXBlKCkgPT09ICd0dGFydGljbGUnKSByZXR1cm47CiAgICAgICAgaWYgKCFza2luU3R5bGUpIHsKICAgICAgICAgIGNvbnN0IHNraW5Dc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsaW5rW2hyZWYqPSIvL2ltZy50LnNpbmFqcy5jbi90Ni9za2luLyJdW2hyZWYqPSIvc2tpbi5jc3M/Il0nKTsKICAgICAgICAgIGlmICghc2tpbkNzcykgcmV0dXJuOwogICAgICAgICAgdmVyc2lvbiA9IHNraW5Dc3MuaHJlZi5tYXRjaCgvdmVyc2lvbj0oW2EtZkEtRjAtOV0qKS8pPy5bMV0gPz8gJyc7CiAgICAgICAgICBza2luU3R5bGUgPSBza2luQ3NzLmNsb25lTm9kZSgpOyBza2luU3R5bGUuaWQgPSAneWF3Zi1za2luX3N0eWxlJzsKICAgICAgICAgIHNldFNraW5JZChza2luSWQpOwogICAgICAgIH0KICAgICAgICBjb25zdCBpc0hvbWUgPSBkb2N1bWVudC5ib2R5Lm1hdGNoZXMoJy5GUkFNRV9tYWluJyk7CiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWF3Zi1za2luX3N0eWxlJykgfHwKICAgICAgICAgIC8vIOW+ruWNmuS4jeiDveS/neivgSBpZCDkuLogc2tpbl9zdHlsZSDnmoTlr7nosaHllK/kuIDvvIzmiYDku6XkuI3og73nlKggI3NraW5fc3R5bGUg6YCJ5oup5Zmo77yM56We5aWH5ZCnCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjeWF3Zi1za2luX3N0eWxlIH4gW2lkPSJza2luX3N0eWxlIl0nKSB8fAogICAgICAgICAgKCFpc0hvbWUgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3lhd2Ytc2tpbl9zdHlsZSB+IFtpZD0iY3VzdG9tX3N0eWxlIl0nKSkKICAgICAgICApIHsKICAgICAgICAgIHNldFNraW5JZChza2luSWQpOwogICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChza2luU3R5bGUpOwogICAgICAgIH0KICAgICAgICAvLyDlpoLmnpzmmK/pppbpobXvvIzogIzkuJTkvb/nlKjkuoboh6rlrprkuYnmqKHmnb/vvJvkv53or4Hoh6rlrprkuYnmqKHmnb/kvJjlhYjnuqfvvIjkvYbmmK/lnKjkuKrkurrkuLvpobXkuIropobnm5boh6rlrprkuYnmqKHmnb/vvIkKICAgICAgICBpZiAoaXNIb21lICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tpZD0iY3VzdG9tX3N0eWxlIl0gfiAjeWF3Zi1za2luX3N0eWxlJykpIHsKICAgICAgICAgIGNvbnN0IGN1c3RvbVN0eWxlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZD0iY3VzdG9tX3N0eWxlIl0nKTsKICAgICAgICAgIGNvbnN0IGN1c3RvbVN0eWxlID0gY3VzdG9tU3R5bGVMaXN0W2N1c3RvbVN0eWxlTGlzdC5sZW5ndGggLSAxXTsKICAgICAgICAgIHNraW5TdHlsZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjdXN0b21TdHlsZSwgc2tpblN0eWxlLm5leHRTaWJsaW5nKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoc2V0U2tpbik7CiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIChhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2gpOwogICAgICAgIGNvbnN0IHNraW5JZCA9IHNlYXJjaC5nZXQoJ3NraW5JZCcpOwogICAgICAgIGlmICghc2tpbklkKSByZXR1cm47CiAgICAgICAgY29uc3QgbmFtZSA9IHNraW5zW3NraW5JZC5yZXBsYWNlKC9cZCskLywgJycpXVsnXycgKyBza2luSWQucmVwbGFjZSgvXlxEKy8sICcnKV07CiAgICAgICAgaWYgKCFuYW1lKSByZXR1cm47CiAgICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgdWkuY29uZmlybSh7CiAgICAgICAgICBpZDogJ3lhd2YtdXNlLXNraW4nLAogICAgICAgICAgdGl0bGU6IGkxOG4uc2V0U2tpbkJ5UHJldmlld1RpdGxlLAogICAgICAgICAgdGV4dDogaTE4bi5zZXRTa2luQnlQcmV2aWV3LnJlcGxhY2UoJ3sxfScsICgpID0+IG5hbWUpLAogICAgICAgIH0pOwogICAgICAgIGlmIChhbnN3ZXIpIHsKICAgICAgICAgIHJ1bGUucmVmLnNraW4uc2V0Q29uZmlnKHNraW5JZCk7CiAgICAgICAgICBydWxlLnNldENvbmZpZyh0cnVlKTsKICAgICAgICAgIHNlYXJjaC5kZWxldGUoJ3NraW5JZCcpOwogICAgICAgICAgbG9jYXRpb24uc2VhcmNoID0gc2VhcmNoOwogICAgICAgIH0KICAgICAgfSgpKTsKICAgIH0sCiAgfSk7CgogIGkxOG4ubmF2YmFyRGFyayA9IHsKICAgIGNuOiAn5rex6Imy5Li76aKY5a+86Iiq5qCPJywKICAgIHR3OiAn5rex6Imy5Li76aGM5bCO6Ka95YiXJywKICAgIGVuOiAnRGFyayB0aGVtZSBuYXZiYXInLAogIH07CgogIHRoZW1lLmRhcmtOYXYgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbmF2X2RhcmsnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogdGhlbWUudGhlbWUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5uYXZiYXJEYXJrLAogICAgYWNzczogYAouV0JfZ2xvYmFsX25hdiB7IGJhY2tncm91bmQ6ICMzMzM7IH0KLldCX2dsb2JhbF9uYXZfYWxwaGEgeyBiYWNrZ3JvdW5kOiByZ2JhKDUxLCA1MSwgNTEsIDAuOTQpOyB9Ci5nbl9sb2dvIC5sb2dvOmVtcHR5IHsgYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyB9Ci5nbl9sb2dvIC5sb2dvOmVtcHR5OjpiZWZvcmUsIC5nbl9sb2dvIC5sb2dvOmVtcHR5OjphZnRlciB7IGNvbnRlbnQ6ICIgIjsgZGlzcGxheTogYmxvY2s7IGJhY2tncm91bmQ6IHVybCgiLy9pbWcudC5zaW5hanMuY24vdDYvc3R5bGUvaW1hZ2VzL2dsb2JhbF9uYXYvV0JfbG9nby5wbmc/aWQ9MTQwNDIxMTA0NzcyNyIpIG5vLXJlcGVhdCAwIDQwJTsgaGVpZ2h0OiA0OHB4OyB9CkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMiksIG9ubHkgc2NyZWVuIGFuZCAoLW1vei1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSwgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSB7CiAgLmduX2xvZ28gLmxvZ286ZW1wdHk6OmJlZm9yZSwgLmduX2xvZ28gLmxvZ286ZW1wdHk6OmFmdGVyIHsgYmFja2dyb3VuZC1pbWFnZTp1cmwoIi8vaW1nLnQuc2luYWpzLmNuL3Q2L3N0eWxlL2ltYWdlcy9nbG9iYWxfbmF2L1dCX2xvZ28teDIucG5nP2lkPTE0MDQyMTEwNDc3MjciKTsgYmFja2dyb3VuZC1zaXplOjgwcHggMjdweDsgfQp9Ci5nbl9sb2dvIC5sb2dvOmVtcHR5OjpiZWZvcmUgeyB3aWR0aDogMzZweDsgZmxvYXQ6IGxlZnQ7IH0KLmduX2xvZ28gLmxvZ286ZW1wdHk6OmFmdGVyIHsgd2lkdGg6IDEwNHB4OyBmbG9hdDogcmlnaHQ7IGJhY2tncm91bmQtcG9zaXRpb246IC0zNnB4IDQwJTsgfQouZ25fbG9nbyAubG9nbzplbXB0eTo6YWZ0ZXIgeyBmaWx0ZXI6IHVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyUyMHZpZXdCb3g9JTIyMCUyMDAlMjAxODMlMjAyNzYlMjIlMjBpZD0lMjJpbWczJTIyJTIweG1sbnM9JTIyaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmclMjIlM0UlM0NmaWx0ZXIlMjBpZD0lMjJpbnZlcnQlMjIlM0UlM0NmZUNvbXBvbmVudFRyYW5zZmVyJTNFJTNDZmVGdW5jUiUyMHRhYmxlVmFsdWVzPSUyMjElMjAwJTIyJTIwdHlwZT0lMjJ0YWJsZSUyMi8lM0UlM0NmZUZ1bmNHJTIwdGFibGVWYWx1ZXM9JTIyMSUyMDAlMjIlMjB0eXBlPSUyMnRhYmxlJTIyLyUzRSUzQ2ZlRnVuY0IlMjB0YWJsZVZhbHVlcz0lMjIxJTIwMCUyMiUyMHR5cGU9JTIydGFibGUlMjIvJTNFJTNDL2ZlQ29tcG9uZW50VHJhbnNmZXIlM0UlM0MvZmlsdGVyJTNFJTNDL3N2ZyUzRSNpbnZlcnQiKTsgLXdlYmtpdC1maWx0ZXI6IGludmVydCgxMDAlKTsgZmlsdGVyOiBpbnZlcnQoMTAwJSk7IH0KLkZSQU1FX21haW4gLldCX2dsb2JhbF9uYXYgLmduX25hdl9saXN0IGxpIC5ob21lIGVtIHsgY29sb3I6ICNmYTdkM2M7IH0KLldCX2dsb2JhbF9uYXYgLlNfZmljb24sIC5XQl9nbG9iYWxfbmF2IC5TX2ZpY29uX2RpcywgLldCX2dsb2JhbF9uYXYgYS5TX2ZpY29uX2Rpczpob3ZlciwgLldCX2dsb2JhbF9uYXYgYTpob3ZlciAuU19maWNvbl9kaXMgeyBjb2xvcjogI2E2YWZiZjsgfQouV0JfZ2xvYmFsX25hdiAuU190eHQxLCAuV0JfZ2xvYmFsX25hdiAuU1dfZnVuIC5TX2Z1bmMxIHsgY29sb3I6ICNlZWU7IH0KYCwKICB9KTsKCiAgaTE4bi5jb2xvck92ZXJyaWRlID0gewogICAgY246ICfkv67mlLnnvZHpobXphY3oibLvvIjljYrpgI/mmI7og4zmma/vvIl8fOS4u+iDjOaZr+iJsnt7Y29sb3IyfX186YCP5piO5bqme3t0cmFuc3BhcmVuY3kyfX0lfHzlia/og4zmma/oibJ7e2NvbG9yMX19fOmAj+aYjuW6pnt7dHJhbnNwYXJlbmN5MX19JXx86L6T5YWl5qGG6IOM5pmv6Imye3tjb2xvcjN9fXzpgI/mmI7luqZ7e3RyYW5zcGFyZW5jeTN9fSUnLAogICAgdHc6ICfkv67mlLnntrLpoIHphY3oibLvvIjljYrpgI/mmI7og4zmma/vvIl8fOS4u+iDjOaZr+iJsnt7Y29sb3IyfX186YCP5piO5bqme3t0cmFuc3BhcmVuY3kyfX0lfHzlia/og4zmma/oibJ7e2NvbG9yMX19fOmAj+aYjuW6pnt7dHJhbnNwYXJlbmN5MX19JXx86Ly45YWl5pa55aGK6IOM5pmv6Imye3tjb2xvcjN9fXzpgI/mmI7luqZ7e3RyYW5zcGFyZW5jeTN9fSUnLAogICAgZW46ICdDaGFuZ2UgY29sb3JzIG9uIHBhZ2UgKFNlbWktdHJhbnNwYXJlbnQgYmFja2dyb3VuZCkgfHwgUHJpbWFyeSBCYWNrZ3JvdW5kIENvbG9yIHt7Y29sb3IyfX0gfCB0cmFuc3BhcmVuY3kge3t0cmFuc3BhcmVuY3kyfX0lIHx8IFNlY29uZGFyeSBCYWNrZ3JvdW5kIENvbG9yIHt7Y29sb3IxfX0gfCB0cmFuc3BhcmVuY3kge3t0cmFuc3BhcmVuY3kxfX0lIHx8IElucHV0IGJveCB7e2NvbG9yM319IHwgdHJhbnNwYXJlbmN5IHt7dHJhbnNwYXJlbmN5M319JScsCiAgfTsKCiAgdGhlbWUuY29sb3IgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfdGhlbWVfY29sb3InLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogdGhlbWUudGhlbWUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb2xvck92ZXJyaWRlLAogICAgcmVmOiB7CiAgICAgIGNvbG9yMTogeyB0eXBlOiAnY29sb3InLCBpbml0aWFsOiAnI2Y2ZjZmNicgfSwKICAgICAgdHJhbnNwYXJlbmN5MTogeyB0eXBlOiAncmFuZ2UnLCBtaW46IDAsIG1heDogMTAwLCBpbml0aWFsOiAzMCB9LAogICAgICBjb2xvcjI6IHsgdHlwZTogJ2NvbG9yJywgaW5pdGlhbDogJyNmZmZmZmYnIH0sCiAgICAgIHRyYW5zcGFyZW5jeTI6IHsgdHlwZTogJ3JhbmdlJywgbWluOiAwLCBtYXg6IDEwMCwgaW5pdGlhbDogMzAgfSwKICAgICAgY29sb3IzOiB7IHR5cGU6ICdjb2xvcicsIGluaXRpYWw6ICcjZmZmZmZmJyB9LAogICAgICB0cmFuc3BhcmVuY3kzOiB7IHR5cGU6ICdyYW5nZScsIG1pbjogMCwgbWF4OiAxMDAsIGluaXRpYWw6IDMwIH0sCiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGNvbnN0IGNvbG9yU3RyID0gKGNvbG9yLCB0cmFuc3BhcmVuY3kpID0+IGNvbG9yICsgKDI1NiB8IDI1NSAqICgxIC0gdHJhbnNwYXJlbmN5IC8gMTAwKSkudG9TdHJpbmcoMTYpLnNsaWNlKC0yKTsKICAgICAgY29uc3QgY29sb3IxID0gY29sb3JTdHIodGhpcy5yZWYuY29sb3IxLmdldENvbmZpZygpLCB0aGlzLnJlZi50cmFuc3BhcmVuY3kxLmdldENvbmZpZygpKTsKICAgICAgY29uc3QgY29sb3IyID0gY29sb3JTdHIodGhpcy5yZWYuY29sb3IyLmdldENvbmZpZygpLCB0aGlzLnJlZi50cmFuc3BhcmVuY3kyLmdldENvbmZpZygpKTsKICAgICAgY29uc3QgY29sb3IzID0gY29sb3JTdHIodGhpcy5yZWYuY29sb3IzLmdldENvbmZpZygpLCB0aGlzLnJlZi50cmFuc3BhcmVuY3kzLmdldENvbmZpZygpKTsKICAgICAgY29uc3Qgbm90ZXMgPSBjb2xvclN0cignI2ZmZjhiZicsIE1hdGgucm91bmQoMTAwIC0gKDEwMCAtIHRoaXMucmVmLnRyYW5zcGFyZW5jeTEuZ2V0Q29uZmlnKCkpICoqIDMgLyAxZTQpKTsKICAgICAgY3NzLmFwcGVuZChgCmJvZHkgLlNfYmcxLCBib2R5IC5TV19mdW5fYmc6aG92ZXIsIGJvZHkgLlNXX2Z1bl9iZ19hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9yMX07IH0KYm9keSAuU19iZzIsIGJvZHkgYmxvY2txdW90ZSwgYm9keSAuV19idG5fYiwgYm9keSAuV19pbnB1dCwgYm9keSAuU1dfZnVuX2JnIHsgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvcjJ9OyB9CmJvZHkgLlNfYmcxX2JyIHsgYm9yZGVyLWNvbG9yOiAke2NvbG9yMX07IH0KYm9keSAuU19iZzJfYnIgeyBib3JkZXItY29sb3I6ICR7Y29sb3IyfTsgfQpib2R5IC5XX2lucHV0LCBib2R5IC5zZW5kX3dlaWJvIC5pbnB1dCB7IGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3IzfTsgfQoKLlNfYmcyIC5wcml2YXRlX2xpc3QuU1dfZnVuX2JnOm5vdCguY3VyKSwKLldCX3RhYl9hIC50YWIgLlNfYmcyIC5TX2JnMiwKLlNfYmcyIC5XQl93ZWJpbV9wYWdlIC53ZWJpbV9jb250YWN0c19tb2QKeyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsgfQoKLldCX25vdGVzIHsgYmFja2dyb3VuZC1jb2xvcjogJHtub3Rlc30gfQoKLldfYXJyb3dfYm9yX3QgaSwgLldfYXJyb3dfYm9yX3QgZW0geyBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlci10b3AtY29sb3I6IHRyYW5zcGFyZW50OyB9Ci5XX2Fycm93X2Jvcl9yIGksIC5XX2Fycm93X2Jvcl9yIGVtIHsgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlci10b3AtY29sb3I6IHRyYW5zcGFyZW50OyB9Ci5XX2Fycm93X2Jvcl9iIGksIC5XX2Fycm93X2Jvcl9iIGVtIHsgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlci1sZWZ0LWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsgfQouV19hcnJvd19ib3JfbCBpLCAuV19hcnJvd19ib3JfbCBlbSB7IGJvcmRlci1ib3R0b20tY29sb3I6IHRyYW5zcGFyZW50OyBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlci10b3AtY29sb3I6IHRyYW5zcGFyZW50OyB9CgouV0JfdGFiX2EgLnRhYl9ib3hfYV9yMiAudGFiIC5saV9maXJzdCwgLldCX3RhYl9hIC50YWJfYm94X2FfcjIgLnRhYiAubGlfbGFzdCB7IGRpc3BsYXk6IG5vbmU7IH0KLldCX3RhYl9hIC50YWJfYm94X2EgLnRhYiB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiByb3c7IGZsZXgtd3JhcDogbm93cmFwOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsgYWxpZ24taXRlbXM6IHN0cmV0Y2g7IH0KCi5XQl90YWJfYS5XQl90YWJfYSAudGFiIC50IHsgaGVpZ2h0OiAzOHB4OyB3aWR0aDogY2FsYygxMDAlIC0gMTZweCk7IH0KLldCX3RhYl9hLldCX3RhYl9hIC50YWIgLmIgeyBkaXNwbGF5OiBub25lOyB9Ci5XQl90YWJfYS5XQl90YWJfYSAudGFiX2JveF9hIC50YWIuY2xlYXJmaXg6OmFmdGVyIHsgZGlzcGxheTogbm9uZTsgfQouV0JfdGFiX2EuV0JfdGFiX2EgLnRhYl9ib3hfYSAudGFiIGxpIHsgbWFyZ2luOiAwOyBmbGV4LWdyb3c6IDE7IH0KLldCX3RhYl9hLldCX3RhYl9hIC50YWJfYm94X2FfcjYgLnQgeyB3aWR0aDogY2FsYygxMDAlIC0gMTRweCk7IH0KCi5zZWFyY2hfZGlyZWN0YXJlYSwgLldCX2VkaXRvcl9pZnJhbWUgeyBiYWNrZ3JvdW5kOiBub25lOyB9Ci5wcml2YXRlX2xpc3RfYm94IC5wcml2YXRlX2hlYWQgeyBwYWRkaW5nLWJvdHRvbTogOHB4OyB9Ci5wcml2YXRlX2xpc3RfYm94IC5wcml2YXRlX2JvZHkgeyBtYXJnaW4tdG9wOiAwOyB9CiN3ZWlib2NoYXQgeyBiYWNrZ3JvdW5kOiBub25lOyB9CmApOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9sYXlvdXQvdXNlcmNzcy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBlbnYgPSB5YXdmLmVudjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3QgZXh0ZXJuYWxNZW51ID0geWF3Zi5leHRlcm5hbE1lbnU7CgogIGNvbnN0IGxheW91dCA9IHlhd2YucnVsZXMubGF5b3V0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IHVpID0gdXRpbC51aTsKCiAgY29uc3QgdXNlckNzcyA9IGxheW91dC51c2VyQ3NzID0ge307CgogIGkxOG4udXNlckNzc0dyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+iHquWumuS5iSBDU1Mg5qC35byPJywKICAgIHR3OiAn6Ieq6KiCIENTUyDlvI/mqKMnLAogICAgZW46ICdDdXN0b20gQ1NTJywKICB9OwoKICB1c2VyQ3NzLnVzZXJDc3MgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnVzZXJDc3NHcm91cFRpdGxlLAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHVzZXJDc3M6IHsKICAgICAgY246ICfkvb/nlKjoh6rlrprkuYkgQ1NTIOagt+W8jyB7e2l9fXx8e3tjc3N9fScsCiAgICAgIHR3OiAn5L2/55So6Ieq6KiCIENTUyDlvI/mqKMge3tpfX18fHt7Y3NzfX0nLAogICAgICBlbjogJ0FwcGx5IEN1c3RvbSBDU1Mge3tpfX18fHt7Y3NzfX0nLAogICAgfSwKICAgIHVzZXJDc3NEZXRhaWw6IHsKICAgICAgY246ICfplJnor6/phY3nva7nmoToh6rlrprkuYnmoLflvI/lj6/og73lr7zoh7TmgqjnmoTnvZHpobXmmL7npLrkuI3mraPluLjvvIzkvb/nlKjmnaXmupDkuI3mmI7nmoQgQ1NTIOS7o+eggeWPr+iDveWNseWus+aCqOeahOmakOengeWuieWFqOOAguW7uuiuruaCqOS7hea3u+WKoOaCqOS/oeS7u+eahCBDU1Mg5qC35byP44CC5aaC5p6c5oKo5L2/55So55qE5qC35byP5a+86Ie06K6+572u56qX5Y+j5peg5rOV5q2j5bi45pi+56S677yMJyArIChlbnYubmFtZSA9PT0gJ1dlYkV4dGVuc2lvbicgPyAn5oKo5Y+v5Lul5Zyo5qCH562+6aG15LiK5Y+z6ZSu5om+5Yiw56aB55So5Yqf6IO9JyA6ICfmgqjlj6/ku6XlnKjigJznjLTlrZDigJ3mianlsZXnmoToj5zljZXkuK3mib7liLDnpoHnlKjlip/og70nKSArICfjgIInLAogICAgICB0dzogJ+mMr+iqpOioreWumueahOiHquioguW8j+aoo+WPr+WwjuiHtOaCqOeahOe2sumggeS4jeiDveato+W4uOmhr+ekuu+8jOS9v+eUqOS+hua6kOS4jeaYjueahCBDU1Mg56iL5byP56K85Y+v6IO95aiB6ISF5oKo55qE6Zqx56eB5a6J5YWo44CC5bu66K2w5oKo5YOF5re75Yqg5oKo5L+h5Lu755qEIENTUyDlvI/mqKPjgILlpoLmnpzmgqjkvb/nlKjnmoTlvI/mqKPlsI7oh7ToqK3lrprmlrnmoYbnhKHms5XmraPluLjpoa/npLrvvIwnICsgKGVudi5uYW1lID09PSAnV2ViRXh0ZW5zaW9uJyA/ICfmgqjlj6/ku6XlnKjntKLlvJXmqJnnsaTkuIrmjInlj7PpjbXmib7liLDlgZznlKjlip/og70nIDogJ+aCqOWPr+S7peWcqOOAjOeMtOWtkOOAjeaTtOWxleeahOWKn+iDveWIl+S4reaJvuWIsOWBnOeUqOWKn+iDvScpICsgJ+OAgicsCiAgICAgIGVuOiAnTWlzY29uZmlndXJlZCBjdXN0b20gQ1NTIG1heSBtYWtlIHlvdXIgd2ViIHBhZ2UgYmVpbmcgcmVuZGVyZWQgaW5jb3JyZWN0bHkuIFVzaW5nIENTUyBmcm9tIHVudHJ1c3RlZCBzb3VyY2UgbWF5IGhhcm0geW91ciBwcml2YWN5LiBNYWtlIHN1cmUgb25seSBhZGRpbmcgQ1NTIGZyb20geW91IHRydXN0ZWQgc291cmNlLiBJbiBjYXNlIGN1c3RvbSBDU1MgYnJlYWtzIHRoaXMgc2V0dGluZyBkaWFsb2csICcgKyAoZW52Lm5hbWUgPT09ICdXZWJFeHRlbnNpb24nID8gJ3lvdSBtYXkgZGlzYWJsZSBpdCBmcm9tIGNvbnRleHQgbWVudSBvZiBicm93c2VyIHRhYicgOiAneW91IG1heSBkaXNhYmxlIGl0IGZyb20gdGhlIG1lbnUgaXRlbSBpbiAibW9ua2V5IiBleHRlbnNpb24nKSArICcuJywKICAgIH0sCiAgICBkaXNhYmxlVXNlckNzczogewogICAgICBjbjogJ+emgeeUqOiHquWumuS5iSBDU1Mg5qC35byPJywKICAgICAgdHc6ICflgZznlKjoh6roqIIgQ1NTIOW8j+aooycsCiAgICAgIGVuOiAnRGlzYWJsZSBDdXN0b20gQ1NTJywKICAgIH0sCiAgICBkaXNhYmxlVXNlckNzc1RleHQ6IHsKICAgICAgY246ICflt7LnpoHnlKjoh6rlrprkuYkgQ1NTIOagt+W8j+OAguWmguaenOaCqOmFjee9rueahOiHquWumuS5iSBDU1Mg5qC35byP5a+86Ie055WM6Z2i5Ye6546w5Lu75L2V6Zeu6aKY77yM5oKo5Y+v5Lul5Zyo6K6+572u5Lit6YCJ5oup5ZCv55So5ZCO77yM5Yig6Zmk5a+86Ie06Zeu6aKY55qE6KeE5YiZ44CCJywKICAgICAgdHc6ICflt7LlgZznlKjoh6roqIIgQ1NTIOW8j+aoo+OAguWmguaenOaCqOioreWumueahOiHquiogiBDU1Mg5byP5qij5bCO6Ie05LuL6Z2i5Ye654++5Lu75L2V5ZWP6aGM77yM5oKo5Y+v5Lul5Zyo6YCZ5a6a5Lit6YG45pOH5ZWf55So5b6M77yM5Yiq6Zmk5bCO6Ie05ZWP6aGM55qE6KaP5YmH44CCJywKICAgICAgZW46ICdDdXN0b20gQ1NTIGhhZCBiZWVuIGRpc2FibGVkLiBJbiBjYXNlIGFueSBjdXN0b20gQ1NTIGJyZWFrIHRoZSB3ZWJwYWdlLCB5b3UgbWF5IGVuYWJsZSBhbmQgdGhlbiBlZGl0IGl0IGluIHRoZSBzZXR0aW5nIGRpYWxvZy4nLAogICAgfSwKICB9KTsKCiAgaWYgKGVudi5jb25maWcuZXh0ZXJuYWxNZW51U3VwcG9ydGVkKSB7CiAgICB1c2VyQ3NzLmNzcyA9IHJ1bGUuUnVsZSh7CiAgICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgICBpZDogJ2N1c3RvbV9jc3MnLAogICAgICB2ZXJzaW9uOiAxLAogICAgICBwYXJlbnQ6IHVzZXJDc3MudXNlckNzcywKICAgICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlckNzcywKICAgICAgaW5pdGlhbDogdHJ1ZSwKICAgICAgcmVmOiB7CiAgICAgICAgY3NzOiB7IHR5cGU6ICd0ZXh0JyB9LAogICAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlckNzc0RldGFpbCB9LAogICAgICB9LAogICAgICBhZnRlclJlbmRlcihub2RlKSB7CiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7CiAgICAgICAgY29uc3QgbGFiZWwgPSB0ZXh0YXJlYS5jbG9zZXN0KCdsYWJlbCcpOwogICAgICAgIGlmICghdGhpcy5pc0VuYWJsZWQoKSkgbGFiZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKGVuYWJsZWQgPT4gewogICAgICAgICAgaWYgKGVuYWJsZWQpIHsKICAgICAgICAgICAgbGFiZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIGxhYmVsLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ25lYXJlc3QnIH0pOwogICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGFiZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfSwKICAgICAgYWluaXQoKSB7CiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gdGhpcy5yZWYuY3NzLmdldENvbmZpZygpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gYWRkU3R5bGUoKSB7CiAgICAgICAgICAvLyBUYW1wZXJtb25rZXkgQkVUQSDlpITnkIYgc2V0VGltZW91dCAwIOS8muecn+eahCAw77yM5Lya5Y2h5q274oCm4oCmCiAgICAgICAgICAvLyDomb3nhLbmianlsZXniYjmnKzkuI3lj5flvbHlk43vvIzkuI3ov4fkuKTovrnku6PnoIHmmK/lhbHnlKjnmoTvvIzmiYDku6Xov5nph4zmlLnkuIDkuIvkuZ/kuI3kvJrmnInku4DkuYjpl67popgKICAgICAgICAgIGlmICghZG9jdW1lbnQuYm9keSkgc2V0VGltZW91dChhZGRTdHlsZSwgMTYpOwogICAgICAgICAgZWxzZSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICB9LCAwKTsKICAgICAgICAvLyDmiJHku6zmt7vliqDkuIDkuKrlj6/ku6XnpoHnlKjov5nkuKrlip/og73nmoTmlrnlvI/ku6XpmLLmnInnlKjmiLfmiororr7nva7lr7nor53moYbnu5npmpDol4/kuobmiJbogIXlvITkubHkuobmlLnkuI3lm57ljrsKICAgICAgICBleHRlcm5hbE1lbnUuYWRkKHsKICAgICAgICAgIHRpdGxlOiBpMThuLmRpc2FibGVVc2VyQ3NzLAogICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgdGhpcy5zZXRDb25maWcoZmFsc2UpOwogICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9ICcnOwogICAgICAgICAgICBhd2FpdCB1aS5hbGVydCh7CiAgICAgICAgICAgICAgaWQ6ICd5YXdmLWRpc2FibGUtdXNlci1jc3MnLAogICAgICAgICAgICAgIGljb246ICdzdWNjJywKICAgICAgICAgICAgICB0aXRsZTogaTE4bi5kaXNhYmxlVXNlckNzcywKICAgICAgICAgICAgICB0ZXh0OiBpMThuLmRpc2FibGVVc2VyQ3NzVGV4dCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgfSwKICAgIH0pOwogIH0KCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9mZWVkcy9mZWVkcy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uZmVlZHNUYWJUaXRsZSA9IHsKICAgIGNuOiAn5b6u5Y2a5bGV56S6JywKICAgIGVuOiAnRmVlZHMnLAogIH07CgogIGNvbnN0IGZlZWRzID0geWF3Zi5ydWxlcy5mZWVkcyA9IHt9OwogIGZlZWRzLmZlZWRzID0gcnVsZS5UYWIoewogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNUYWJUaXRsZSwKICAgIHBhZ2VtZW51OiB0cnVlLAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZlZWRzL3JlbmRlci5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGZlZWRzID0geWF3Zi5ydWxlcy5mZWVkczsKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIGNvbnN0IHJlbmRlciA9IGZlZWRzLnJlbmRlciA9IHt9OwoKICBpMThuLmZlZWRSZW5kZXJHcm91cFRpdGxlID0geyBjbjogJ+a4suafkycgfTsKCiAgcmVuZGVyLnJlbmRlciA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBmZWVkcy5mZWVkcywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRSZW5kZXJHcm91cFRpdGxlLAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGZlZWRSZW5kZXJGaXg6IHsKICAgICAgY246ICfkv67mlLnlvq7ljZrmmL7npLrpgLvovpHku6XlhYHorrjnm7jlhbPmlLnpgKDlip/og70ge3tpfX0nLAogICAgfSwKICAgIGZlZWRSZW5kZXJGaXhEZXRhaWw6IHsKICAgICAgY246ICflpoLmnpzlm6DkuLrlvq7ljZrnmoTmlLnniYjlr7zoh7Tor6Xlip/og73mlYXpmpzvvIzor7flgZznlKjor6XpgInpobnjgILlj6rmnInmiZPlvIDor6XpgInpobnmiY3og73kvb/nlKjlpKfpg6jliIblr7nlvq7ljZrnmoTmlLnpgKDlip/og73jgILmiZPlvIDlkI7kvJrmnInkuIDkupvnu4boioLkuIrnmoTlj5jljJbvvIzkvZzogIXnrYnlpITkvJrmmL7npLrkuLrpk77mjqXvvIzovazlj5HnmoTljp/lvq7ljZrkvJrmmL7npLrmnaXmupDvvIzlvq7ljZrkuIvnmoTovazlj5HliJfooajlj6/ku6Xngrnlh7vml7bpl7Tot7PovazliLDor6Xlvq7ljZrjgIInLAogICAgfSwKICB9KTsKCiAgY29uc3QgcmVuZGVyTW9kaWZ5ID0gZnVuY3Rpb24gKHJvb3RLZXksIGNvbmZpZ3MpIHsKICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgY29uc3QgeyBzbWFsbEltYWdlLCBuZXdUYWIgfSA9IGNvbmZpZ3M7CgogICAgY29uc3QgYWJzb2x1dGVVcmwgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgIGNvbnN0IGJhc2UgPSBsb2NhdGlvbi5ob3N0ID09PSAnd3d3LndlaWJvLmNvbScgPyAnLy93d3cud2VpYm8uY29tLycgOiAnLy93ZWliby5jb20vJzsKICAgICAgcmV0dXJuIG5ldyBVUkwodXJsLCBuZXcgVVJMKGJhc2UsIGxvY2F0aW9uLmhyZWYpKS5ocmVmOwogICAgfTsKICAgIGNvbnN0IHNldEhyZWYgPSBmdW5jdGlvbiAodm5vZGUsIHVybCkgewogICAgICBpZiAoIXZub2RlLmRhdGEpIHZub2RlLmRhdGEgPSB7fTsKICAgICAgaWYgKCF2bm9kZS5kYXRhLmF0dHJzKSB2bm9kZS5kYXRhLmF0dHJzID0ge307CiAgICAgIHZub2RlLmRhdGEuYXR0cnMuaHJlZiA9IHVybDsKICAgIH07CgogICAgY29uc3QgcmVtb3ZlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKHZub2RlKSB7CiAgICAgIGlmICghdm5vZGUuZGF0YSB8fCAhdm5vZGUuZGF0YS5vbikgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IG9uY2xpY2sgPSB2bm9kZS5kYXRhLm9uLmNsaWNrOwogICAgICBkZWxldGUgdm5vZGUuZGF0YS5vbi5jbGljazsKICAgICAgcmV0dXJuIG9uY2xpY2s7CiAgICB9OwogICAgY29uc3QgYWRkQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKHZub2RlLCBvbmNsaWNrKSB7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgdm5vZGUuZGF0YSA9IHt9OwogICAgICBpZiAoIXZub2RlLmRhdGEub24pIHZub2RlLmRhdGEub24gPSB7fTsKICAgICAgdm5vZGUuZGF0YS5vbi5jbGljayA9IG9uY2xpY2s7CiAgICB9OwogICAgY29uc3QgbXV0ZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uICh2bm9kZSkgewogICAgICBjb25zdCBvbmNsaWNrID0gcmVtb3ZlQ2xpY2tIYW5kbGVyKHZub2RlKTsKICAgICAgaWYgKCFvbmNsaWNrKSByZXR1cm47CiAgICAgIGFkZENsaWNrSGFuZGxlcih2bm9kZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5hbHRLZXkpIHJldHVybjsKICAgICAgICBpZiAoZXZlbnQuYnV0dG9ucyAhPT0gMSkgcmV0dXJuOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgb25jbGljayhldmVudCk7CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGNvbmZpZ0NsaWNrSGFuZGxlciA9IGZ1bmN0aW9uICh2bm9kZSwgbGluaywgbmV3VGFiKSB7CiAgICAgIGlmIChuZXdUYWIpIHsKICAgICAgICByZW1vdmVDbGlja0hhbmRsZXIodm5vZGUpOwogICAgICAgIGlmICghbGluay5kYXRhKSBsaW5rLmRhdGEgPSB7fTsKICAgICAgICBpZiAoIWxpbmsuZGF0YS5hdHRycykgbGluay5kYXRhLmF0dHJzID0ge307CiAgICAgICAgbGluay5kYXRhLmF0dHJzLnRhcmdldCA9ICdfYmxhbmsnOwogICAgICB9IGVsc2UgewogICAgICAgIG11dGVDbGlja0hhbmRsZXIodm5vZGUpOwogICAgICB9CiAgICB9OwoKICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm47CiAgICAgIGNvbnN0IGxpbmsgPSB0YXJnZXQuY2xvc2VzdCgnLnlhd2YtZmVlZC1kZXRhaWwtY29udGVudC1oYW5kbGVyIGFbaHJlZl0nKTsKICAgICAgaWYgKCFsaW5rKSByZXR1cm47CiAgICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuYWx0S2V5KSB7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0KICAgICAgY29uc3QgaXNQaWN0dXJlID0gbGluay5oYXNBdHRyaWJ1dGUoJ2RhdGEtcGlkJyk7CiAgICAgIGNvbnN0IGlzTWVudGlvbiA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJykuc3RhcnRzV2l0aCgnL24vJyk7CiAgICAgIGlmIChpc1BpY3R1cmUgPyBuZXdUYWIucGljdHVyZSA6IGlzTWVudGlvbiA/IG5ld1RhYi5tZW50aW9uIDogbmV3VGFiLnRvcGljKSB7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0KICAgIH0sIHsgY2FwdHVyZTogdHJ1ZSB9KTsKCiAgICAvLyDnu5nmj5DliLDlkozor53popjnmoTpk77mjqXliqDkuIrmlrDmoIfnrb7pobXmiZPlvIDnmoTmoIforrAKICAgIGNvbnN0IGhhbmRsZUNvbnRlbnRSZW5kZXIgPSBmdW5jdGlvbiAoY29udGVudCkgewogICAgICBpZiAoIWNvbnRlbnQuZGF0YT8uZG9tUHJvcHM/LmlubmVySFRNTCkgcmV0dXJuOwogICAgICBjb25zdCB0YWcgPSAneC1jb250ZW50LXBhcnNlLXdyYXAteCcgKyAoTWF0aC5yYW5kb20oKSArICcnKS5zbGljZSgyKTsKICAgICAgY29uc3Qgd3JhcCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoYDwke3RhZ30+YCArIGNvbnRlbnQuZGF0YS5kb21Qcm9wcy5pbm5lckhUTUwsICd0ZXh0L2h0bWwnKS5xdWVyeVNlbGVjdG9yKHRhZyk7CiAgICAgIFsuLi53cmFwLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKV0uZm9yRWFjaChsaW5rID0+IHsKICAgICAgICBpZiAobGluay50YXJnZXQgPT09ICdfYmxhbmsnKSByZXR1cm47CiAgICAgICAgY29uc3QgaXNQaWN0dXJlID0gbGluay5oYXNBdHRyaWJ1dGUoJ2RhdGEtcGlkJyk7CiAgICAgICAgY29uc3QgaXNNZW50aW9uID0gbGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5zdGFydHNXaXRoKCcvbi8nKTsKICAgICAgICBpZiAoaXNQaWN0dXJlID8gbmV3VGFiLnBpY3R1cmUgOiBpc01lbnRpb24gPyBuZXdUYWIubWVudGlvbiA6IG5ld1RhYi50b3BpYykgewogICAgICAgICAgbGluay50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBPYmplY3QuYXNzaWduKGNvbnRlbnQuZGF0YS5kb21Qcm9wcywgeyBpbm5lckhUTUw6IHdyYXAuaW5uZXJIVE1MIH0pOwogICAgfTsKCiAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdmZWVkLWhlYWQnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBhZGRDbGFzcywgc2V0QXR0cmlidXRlIH0gPSBOb2RlczsKCiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtaGVhZCcpOwoKICAgICAgLy8g55So5oi35aS05YOPCiAgICAgIGNvbnN0IGF2YXRhciA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tYXZhdGFyJykucGFyZW50Tm9kZTsKICAgICAgaWYgKGF2YXRhcikgYWRkQ2xhc3MoYXZhdGFyLCAneWF3Zi1mZWVkLWF2YXRhcicpOwogICAgICBpZiAobmV3VGFiLmF1dGhvcikgewogICAgICAgIGlmIChhdmF0YXIpIHNldEF0dHJpYnV0ZShhdmF0YXIsICd0YXJnZXQnLCAnX2JsYW5rJyk7CiAgICAgIH0KICAgICAgLy8g55So5oi35pi156ewCiAgICAgIGNvbnN0IHVzZXJMaW5rID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xvc2VzdCgneC1hLWxpbmsnKTsKICAgICAgaWYgKHVzZXJMaW5rKSBhZGRDbGFzcyh1c2VyTGluaywgJ3lhd2YtZmVlZC1hdXRob3InKTsKICAgICAgaWYgKG5ld1RhYi5hdXRob3IpIHNldEF0dHJpYnV0ZSh1c2VyTGluaywgJ3RhcmdldCcsICdfYmxhbmsnKTsKICAgICAgY29uc3QgdXNlckxpbmUgPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbG9zZXN0KCd4LXdvby1ib3gnKTsKICAgICAgaWYgKHVzZXJMaW5lKSB7CiAgICAgICAgYWRkQ2xhc3ModXNlckxpbmUsICd5YXdmLWZlZWQtYXV0aG9yLWxpbmUnKTsKICAgICAgICBhZGRDbGFzcyh1c2VyTGluZS5wYXJlbnROb2RlLCAneWF3Zi1mZWVkLWF1dGhvci1ib3gnKTsKICAgICAgfQogICAgICAvLyDlv6vovawKICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5zY3JlZW5fbmFtZV9zdWZmaXhfbmV3KSAmJiB0aGlzLnNjcmVlbl9uYW1lX3N1ZmZpeF9uZXcubGVuZ3RoKSB7CiAgICAgICAgLy8gVE9ETyDlvq7ljZrnm67liY3lv6vovaznmoTkvZzogIXlkI3kuI3mmK/pk77mjqXvvIzkvLDorqHmmK8gYnVn77yM5YWI562J562J5YaN55yL5oCO5LmI5aSE55CGCiAgICAgIH0KICAgICAgLy8g5qCH6K6w5LiA5LiL5pe26Ze05ZKM5p2l5rqQCiAgICAgIGNvbnN0IGhlYWRJbmZvID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCd4LWhlYWQtaW5mbycpOwogICAgICBhZGRDbGFzcyhoZWFkSW5mbywgJ3lhd2YtZmVlZC1oZWFkLWluZm8nKTsKICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2hlYWQtaW5mbycsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICBjb25zdCB7IGgsIGluc2VydEJlZm9yZSwgcmVtb3ZlQ2hpbGQsIGFkZENsYXNzLCByZW1vdmVFdmVudExpc3RlbmVyLCBzZXRBdHRyaWJ1dGUgfSA9IE5vZGVzOwoKICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtaGVhZC1pbmZvJyk7CiAgICAgIC8vIOW+ruWNmuivpuaDhQogICAgICAvKiogQHR5cGUge0hUTUxBbmNob3JFbGVtZW50fSAqLwogICAgICBjb25zdCBsaW5rID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCdhJyk7CiAgICAgIGFkZENsYXNzKGxpbmssICd5YXdmLWZlZWQtdGltZScpOwogICAgICBpZiAobmV3VGFiLmRldGFpbCkgewogICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIobGluaywgJ2NsaWNrJyk7CiAgICAgICAgc2V0QXR0cmlidXRlKGxpbmssICd0YXJnZXQnLCAnX2JsYW5rJyk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHRhZyA9IGxpbmsucHJldmlvdXNTaWJsaW5nOwogICAgICBpZiAodGFnKSBhZGRDbGFzcyh0YWcsICd5YXdmLWZlZWQtdGFnJyk7CgogICAgICBjb25zdCBzb3VyY2VCb3ggPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLWJveC1pdGVtIHgtd29vLWJveCcpOwogICAgICBjb25zdCBbc291cmNlLCBlZGl0ZWRdID0gc291cmNlQm94LmNoaWxkTm9kZXM7CgogICAgICAvLyDmm7/mjaLmjonljp/mnInnmoTmnaXmupDvvIzkv53or4HmnaXmupDmnKzouqvmnInkuKrmoIfnrb7vvIzlkI7nu63nlKjmnaXlgZrmi5bmi73ov4fmu6TnlKgKICAgICAgaWYgKHNvdXJjZSAmJiBzb3VyY2Uubm9kZVR5cGUgIT09IE5vZGUuQ09NTUVOVF9OT0RFKSB7CiAgICAgICAgY29uc3QgbmV3U291cmNlVk5vZGUgPSBoKCdkaXYnLCB7CiAgICAgICAgICBjbGFzczogW3RoaXMuJHN0eWxlLnNvdXJjZSwgJ3lhd2YtZmVlZC1zb3VyY2UtY29udGFpbmVyJ10sCiAgICAgICAgfSwgWyfmnaXoh6ogJywgaCgnc3BhbicsIHsKICAgICAgICAgIGNsYXNzOiBbJ3lhd2YtZmVlZC1zb3VyY2UnXSwKICAgICAgICAgIGF0dHJzOiB7IGRyYWdnYWJsZTogJ3RydWUnIH0sCiAgICAgICAgfSwgW3RoaXMuc291cmNlIHx8ICflvq7ljZogd2VpYm8uY29tJ10pXSk7CiAgICAgICAgaW5zZXJ0QmVmb3JlKHNvdXJjZUJveCwgbmV3U291cmNlVk5vZGUsIHNvdXJjZSk7CiAgICAgICAgcmVtb3ZlQ2hpbGQoc291cmNlQm94LCBzb3VyY2UpOwogICAgICB9CgogICAgICAvLyDlt7LnvJbovpEKICAgICAgaWYgKGVkaXRlZCAmJiBlZGl0ZWQubm9kZVR5cGUgIT09IE5vZGUuQ09NTUVOVF9OT0RFKSB7CiAgICAgICAgYWRkQ2xhc3MoZWRpdGVkLCAneWF3Zi1mZWVkLWVkaXRlZCcpOwogICAgICB9CiAgICB9KTsKCiAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdmZWVkLWNvbnRlbnQnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyB2Tm9kZSwgYWRkQ2xhc3MsIHdyYXBOb2RlLCBoIH0gPSBOb2RlczsKCiAgICAgIC8vIOS9nOiAheetiQogICAgICBjb25zdCBoZWFkSW5mbyA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC1oZWFkLWluZm8nKTsKICAgICAgaWYgKGhlYWRJbmZvKSB7CiAgICAgICAgYWRkQ2xhc3MoaGVhZEluZm8sICd5YXdmLWZlZWQtaGVhZC1pbmZvIHlhd2YtZmVlZC1oZWFkLWluZm8tcmV0d2VldCcpOwogICAgICAgIGNvbnN0IGhlYWRJbmZvVk5vZGUgPSB2Tm9kZShoZWFkSW5mbyk7CiAgICAgICAgaWYgKGhlYWRJbmZvVk5vZGUuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGEpIHsKICAgICAgICAgIGhlYWRJbmZvVk5vZGUuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGEuc291cmNlID0gdGhpcy5kYXRhLnNvdXJjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIOWGheWuuQogICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLWNvbnRlbnQnKTsKICAgICAgaWYgKGhlYWRJbmZvKSB7CiAgICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtZmVlZC1jb250ZW50LXJldHdlZXQnKTsKICAgICAgfQoKICAgICAgLy8g5o+Q56S65qiq5bmFCiAgICAgIGNvbnN0IHRpcCA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tdGlwJyk7CiAgICAgIGlmICh0aXApIHsKICAgICAgICBhZGRDbGFzcyh0aXAsICd5YXdmLWZlZWQtY29udGVudC10aXAnKTsKICAgICAgICBpZiAodGhpcy5kYXRhLmNvbXBsYWludD8udXJsKSB7CiAgICAgICAgICBjb25zdCBsaW5rVk5vZGUgPSBoKCdhJywgewogICAgICAgICAgICBjbGFzczogJ3lhd2YtZmVlZC1jb250ZW50LXRpcC1saW5rIHlhd2YtZXh0cmEtbGluaycsCiAgICAgICAgICAgIGF0dHJzOiB7IGhyZWY6IGFic29sdXRlVXJsKHRoaXMuZGF0YS5jb21wbGFpbnQudXJsKSB9LAogICAgICAgICAgfSk7CiAgICAgICAgICB3cmFwTm9kZSh0aXAsIGxpbmtWTm9kZSk7CiAgICAgICAgICBjb25maWdDbGlja0hhbmRsZXIodk5vZGUodGlwKSwgbGlua1ZOb2RlLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtZGV0YWlsJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgdk5vZGUsIGFkZENsYXNzIH0gPSBOb2RlczsKICAgICAgY29uc3QgW2F1dGhvckJveCwgY29udGVudF0gPSBub2RlU3RydWN0LmNoaWxkTm9kZXM7CgogICAgICAvLyDljp/kvZzogIUKICAgICAgaWYgKGF1dGhvckJveCAmJiBhdXRob3JCb3gubm9kZVR5cGUgIT09IE5vZGUuQ09NTUVOVF9OT0RFKSB7CiAgICAgICAgY29uc3QgYXV0aG9yID0gYXV0aG9yQm94LnF1ZXJ5U2VsZWN0b3IoJ3gtYS1saW5rJyk7CiAgICAgICAgYWRkQ2xhc3MoYXV0aG9yLCAneWF3Zi1mZWVkLW9yaWdpbmFsJyk7CiAgICAgIH0KCiAgICAgIC8vIOWGheWuuQogICAgICBpZiAoY29udGVudCAmJiBjb250ZW50Lm5vZGVUeXBlICE9PSBOb2RlLkNPTU1FTlRfTk9ERSkgewogICAgICAgIGFkZENsYXNzKGNvbnRlbnQsICd5YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQnKTsKICAgICAgICBpZiAodGhpcy5yZXBvc3QpIHsKICAgICAgICAgIGFkZENsYXNzKGNvbnRlbnQsICd5YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQtcmV0d2VldCcpOwogICAgICAgIH0KICAgICAgICBoYW5kbGVDb250ZW50UmVuZGVyKHZOb2RlKGNvbnRlbnQpKTsKICAgICAgICBhZGRDbGFzcyhjb250ZW50LCAneWF3Zi1mZWVkLWRldGFpbC1jb250ZW50LWhhbmRsZXInKTsKICAgICAgfQogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnZmVlZC1waWN0dXJlJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgYWRkQ2xhc3MsIHZOb2RlIH0gPSBOb2RlczsKICAgICAgLy8g5b6u5Y2a6YWN5Zu+CiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtcGljdHVyZScpOwogICAgICAvLyDmr4/ooYzkuInlvKDlm77miJblm5vlvKDlm74KICAgICAgaWYgKHRoaXMuaW5saW5lTnVtID09PSAzKSB7CiAgICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtZmVlZC1waWN0dXJlLWNvbDMnKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlubGluZU51bSA9PT0gNCkgewogICAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtcGljdHVyZS1jb2w0Jyk7CiAgICAgIH0KICAgICAgLy8g5Y2V5byg5Zu+54mHCiAgICAgIGlmICh0aGlzLmlzU2luZ2xlUGljKSB7CiAgICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtZmVlZC1waWN0dXJlLXNpbmdsZScpOwogICAgICAgIC8vIOe8qeWwj+WNleW8oOWbvueJh++8jFY1IOeJiOWNleW8oOWbvueJh+eahOWwuuWvuOS4jei2hei/hyAxMjB4MTIwCiAgICAgICAgaWYgKHNtYWxsSW1hZ2UpIHsKICAgICAgICAgIGNvbnN0IG9yaVdpZHRoID0gdGhpcy5pc1BheSAmJiB0aGlzLnBpY3NbMF0/LndpZHRoIHx8IHRoaXMucGljc1swXS5nZW8/LndpZHRoOwogICAgICAgICAgY29uc3Qgb3JpSGVpZ2h0ID0gdGhpcy5pc1BheSAmJiB0aGlzLnBpY3NbMF0/LmhlaWdodCB8fCB0aGlzLnBpY3NbMF0uZ2VvPy5oZWlnaHQ7CiAgICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgubWluKDEyMCwgTWF0aC5tYXgoMTIwIC8gb3JpSGVpZ2h0ICogb3JpV2lkdGgsIDMwKSk7CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLm1pbigxMjAsIE1hdGgubWF4KDEyMCAvIG9yaVdpZHRoICogb3JpSGVpZ2h0LCAzMCkpOwogICAgICAgICAgY29uc3Qgc3R5bGUgPSB2Tm9kZShub2RlU3RydWN0LmZpcnN0Q2hpbGQpLmRhdGEuc3R5bGU7CiAgICAgICAgICBzdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JzsKICAgICAgICAgIHN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICAvLyDop4bpopEKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtdmlkZW8nLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBhZGRDbGFzcyB9ID0gTm9kZXM7CiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtdmlkZW8nKTsKICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtY2FyZC1saW5rJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgYWRkQ2xhc3MsIHNldEF0dHJpYnV0ZSB9ID0gTm9kZXM7CiAgICAgIC8vIOWFtuS7luWNoeeJhwogICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLWNhcmQtbGluaycpOwogICAgICBpZiAobmV3VGFiLmNhcmQpIHNldEF0dHJpYnV0ZShub2RlU3RydWN0LCAndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICBjb25zdCBjYXJkID0gbm9kZVN0cnVjdC5maXJzdENoaWxkOwogICAgICBpZiAoY2FyZCkgewogICAgICAgIGFkZENsYXNzKGNhcmQsICd5YXdmLWZlZWQtY2FyZCcpOwogICAgICAgIGNvbnN0IHBpY3R1cmUgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLXBpY3R1cmUnKTsKICAgICAgICBjb25zdCBjb250ZW50ID0gcGljdHVyZS5uZXh0U2libGluZzsKICAgICAgICBhZGRDbGFzcyhwaWN0dXJlLCAneWF3Zi1mZWVkLWNhcmQtcGljdHVyZScpOwogICAgICAgIGFkZENsYXNzKGNvbnRlbnQsICd5YXdmLWZlZWQtY2FyZC1jb250ZW50Jyk7CiAgICAgIH0KICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtYXJ0aWNsZScsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICBjb25zdCB7IGFkZENsYXNzLCBzZXRBdHRyaWJ1dGUgfSA9IE5vZGVzOwogICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLWNhcmQtYXJ0aWNsZS1saW5rJyk7CiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QuZmlyc3RDaGlsZCwgJ3lhd2YtZmVlZC1jYXJkLWFydGljbGUnKTsKICAgICAgaWYgKG5ld1RhYi5jYXJkKSBzZXRBdHRyaWJ1dGUobm9kZVN0cnVjdCwgJ3RhcmdldCcsICdfYmxhbmsnKTsKICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtdm90ZScsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICBjb25zdCB7IGFkZENsYXNzIH0gPSBOb2RlczsKICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtZmVlZC1jYXJkLXZvdGUnKTsKICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtdG9vbGJhcicsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICBjb25zdCB7IGFkZENsYXNzLCB2Tm9kZSwgcmVtb3ZlQ2hpbGQsIGluc2VydEJlZm9yZSB9ID0gTm9kZXM7CgogICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLXRvb2xiYXInKTsKCiAgICAgIC8vIOaTjeS9nOaMiemSrgogICAgICBjb25zdCBidXR0b25zID0gWy4uLm5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvckFsbCgneC13b28tYm94LWl0ZW0nKV07CiAgICAgIGlmIChidXR0b25zLmxlbmd0aCA9PT0gMykgewogICAgICAgIGNvbnN0IFtyZXR3ZWV0LCBjb21tZW50LCBsaWtlXSA9IGJ1dHRvbnM7CiAgICAgICAgYWRkQ2xhc3MocmV0d2VldCwgJ3lhd2YtZmVlZC10b29sYmFyLXJldHdlZXQnKTsKICAgICAgICBhZGRDbGFzcyhjb21tZW50LCAneWF3Zi1mZWVkLXRvb2xiYXItY29tbWVudCcpOwogICAgICAgIGFkZENsYXNzKGxpa2UsICd5YXdmLWZlZWQtdG9vbGJhci1saWtlJyk7CgogICAgICAgIGlmIChjb25maWdzLmhpZGVGYXN0UmVwb3N0KSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBwb3AgPSByZXR3ZWV0LnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLXBvcCcpOwogICAgICAgICAgICBjb25zdCBwb3BWTm9kZSA9IHZOb2RlKHBvcCk7CiAgICAgICAgICAgIGNvbnN0IHJldHdlZXRCdXR0b25WTm9kZSA9IHBvcFZOb2RlLmRhdGEuc2NvcGVkU2xvdHMuY3RybCgpWzBdOwogICAgICAgICAgICBjb25zdCBvcmlSZXR3ZWV0QnV0dG9uID0gcG9wLnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLXBvcC1pdGVtOm50aC1jaGlsZCgyKScpOwogICAgICAgICAgICByZXR3ZWV0QnV0dG9uVk5vZGUuZGF0YS5vbiA9IHZOb2RlKG9yaVJldHdlZXRCdXR0b24pLmRhdGEub247CiAgICAgICAgICAgIHJldHdlZXRCdXR0b25WTm9kZS5kYXRhLm5hdGl2ZU9uID0gdk5vZGUob3JpUmV0d2VldEJ1dHRvbikuZGF0YS5uYXRpdmVPbjsKICAgICAgICAgICAgY29uc3QgY29udGFpbiA9IHBvcC5wYXJlbnROb2RlOwogICAgICAgICAgICBpbnNlcnRCZWZvcmUoY29udGFpbi5wYXJlbnROb2RlLCByZXR3ZWV0QnV0dG9uVk5vZGUsIGNvbnRhaW4pOwogICAgICAgICAgICByZW1vdmVDaGlsZChjb250YWluLnBhcmVudE5vZGUsIGNvbnRhaW4pOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAvLyBpZ25vcmUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIGNvbnN0IHJlcG9zdENvbW1lbnRMaXN0UmFuZGVyVHJhbnNmb3JtID0gZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgYWRkQ2xhc3MsIHNldEF0dHJpYnV0ZSB9ID0gTm9kZXM7CgogICAgICAvLyDmn6XnnIvlhajpg6jor4TorroKICAgICAgY29uc3QgbW9yZSA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tZGl2aWRlciArIHgtYS1saW5rJyk7CiAgICAgIGlmIChtb3JlKSB7CiAgICAgICAgYWRkQ2xhc3MobW9yZSwgJ3lhd2YtZmVlZC1jb21tZW50LW1vcmUnKTsKICAgICAgICBpZiAobmV3VGFiLmNvbW1lbnRzKSBzZXRBdHRyaWJ1dGUobW9yZSwgJ3RhcmdldCcsICdfYmxhbmsnKTsKICAgICAgfQogICAgfTsKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ3JlcG9zdC1jb21lbnQtZmVlZCcsIHJlcG9zdENvbW1lbnRMaXN0UmFuZGVyVHJhbnNmb3JtKTsgLy8g5Y+I5piv5LuW5Lus5ou86ZSZ5LqGCiAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdyZXBvc3QtY29tbWVudC1mZWVkJywgcmVwb3N0Q29tbWVudExpc3RSYW5kZXJUcmFuc2Zvcm0pOyAvLyDov5nooYznjrDlnKjmsqHnlKgKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ3JlcG9zdC1jb21tZW50LWxpc3QnLCByZXBvc3RDb21tZW50TGlzdFJhbmRlclRyYW5zZm9ybSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgncmVwbHktbW9kYWwnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgcmVwbHkgPSB0aGlzOwogICAgICBjb25zdCB7IHRyYW5zZm9ybVNsb3QgfSA9IE5vZGVzOwogICAgICB0cmFuc2Zvcm1TbG90KG5vZGVTdHJ1Y3QsICdjb250ZW50JywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QpIHsKICAgICAgICBjb21tZW50UmVuZGVyVHJhbnNmb3JtSGVscGVyKG5vZGVTdHJ1Y3QsIHJlcGx5LnJvb3RDb21tZW50LCBOb2Rlcyk7CiAgICAgIH0pOwogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgncmVwbHknLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29tbWVudFJlbmRlclRyYW5zZm9ybUhlbHBlcihub2RlU3RydWN0LCB0aGlzLml0ZW0sIE5vZGVzKTsKICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ21haW4tY29tcG9zZXInLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBoLCB3cmFwTm9kZSwgdk5vZGUgfSA9IE5vZGVzOwoKICAgICAgLy8g5Y+R5biW5aS05YOPCiAgICAgIGNvbnN0IGF2YXRhciA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tYXZhdGFyJyk7CiAgICAgIGlmIChhdmF0YXIpIHsKICAgICAgICBjb25zdCBsaW5rVk5vZGUgPSBoKCdhJywgewogICAgICAgICAgY2xhc3M6ICd5YXdmLWZlZWQtY29tcG9zZXItYXZhdGFyIHlhd2YtZXh0cmEtbGluaycsCiAgICAgICAgICBhdHRyczogeyBocmVmOiBhYnNvbHV0ZVVybCh0aGlzLmNvbmZpZy51c2VyLnByb2ZpbGVfdXJsKSB9LAogICAgICAgIH0pOwogICAgICAgIHdyYXBOb2RlKGF2YXRhciwgbGlua1ZOb2RlKTsKICAgICAgICBjb25maWdDbGlja0hhbmRsZXIodk5vZGUoYXZhdGFyKSwgbGlua1ZOb2RlLCBuZXdUYWIuYXV0aG9yKTsKICAgICAgfQogICAgfSk7CgogICAgY29uc3QgY29tbWVudFJlbmRlclRyYW5zZm9ybUhlbHBlciA9IGZ1bmN0aW9uIChub2RlU3RydWN0LCBjb21tZW50LCBOb2RlcykgewogICAgICBjb25zdCB7IHZOb2RlLCBhZGRDbGFzcywgc2V0QXR0cmlidXRlIH0gPSBOb2RlczsKCiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtY29tbWVudCcpOwoKICAgICAgY29uc3QgW2F2YXRhciwgYXV0aG9yLCAuLi5yZXBseUF1dGhvcnNdID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yQWxsKCd4LWEtbGluaycpOwogICAgICBpZiAoYXZhdGFyKSB7CiAgICAgICAgYWRkQ2xhc3MoYXZhdGFyLCAneWF3Zi1mZWVkLWNvbW1lbnQtYXZhdGFyJyk7CiAgICAgICAgaWYgKG5ld1RhYi5jb21tZW50cykgc2V0QXR0cmlidXRlKGF2YXRhciwgJ3RhcmdldCcsICdfYmxhbmsnKTsKICAgICAgfQogICAgICAvLyDor4TorrrkvZzogIUKICAgICAgaWYgKGF1dGhvcikgewogICAgICAgIGFkZENsYXNzKGF1dGhvciwgJ3lhd2YtZmVlZC1jb21tZW50LWF1dGhvcicpOwogICAgICAgIGlmIChuZXdUYWIuY29tbWVudHMpIHNldEF0dHJpYnV0ZShhdXRob3IsICd0YXJnZXQnLCAnX2JsYW5rJyk7CiAgICAgIH0KICAgICAgLy8g5LqM57qn6K+E6K665L2c6ICFCiAgICAgIGlmIChyZXBseUF1dGhvcnM/Lmxlbmd0aCkgewogICAgICAgIHJlcGx5QXV0aG9ycy5mb3JFYWNoKChhdXRob3IsIGluZGV4KSA9PiB7CiAgICAgICAgICBpZiAoIWNvbW1lbnQuY29tbWVudHM/LltpbmRleF0pIHJldHVybjsKICAgICAgICAgIGlmIChuZXdUYWIuY29tbWVudHMpIHNldEF0dHJpYnV0ZShhdXRob3IsICd0YXJnZXQnLCAnX2JsYW5rJyk7CiAgICAgICAgICBhZGRDbGFzcyhhdXRob3IsICd5YXdmLWZlZWQtY29tbWVudC1hdXRob3InLCAneWF3Zi1mZWVkLWNvbW1lbnQtcmVwbHktYXV0aG9yJyk7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGNvbW1lbnQuY29tbWVudHMpIHsKICAgICAgICAgIGNvbnN0IG1vcmUgPSByZXBseUF1dGhvcnMuc2xpY2UoY29tbWVudC5jb21tZW50cy5sZW5ndGgpOwogICAgICAgICAgbW9yZS5mb3JFYWNoKChhdXRob3IsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGlmICghY29tbWVudC5tb3JlX2luZm8/LnVzZXJfbGlzdD8uW2luZGV4XSkgcmV0dXJuOwogICAgICAgICAgICBpZiAobmV3VGFiLmNvbW1lbnRzKSBzZXRBdHRyaWJ1dGUoYXV0aG9yLCAndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICAgICAgICBhZGRDbGFzcyhhdXRob3IsICd5YXdmLWZlZWQtY29tbWVudC1hdXRob3InLCAneWF3Zi1mZWVkLWNvbW1lbnQtcmVwbHktYXV0aG9yJywgJ3lhd2YtZmVlZC1jb21tZW50LW1vcmUtYXV0aG9yJyk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIOivhOiuuueahOWGheWuuQogICAgICBjb25zdCBjb250ZW50TGlzdCA9IFsuLi5ub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4nKV07CiAgICAgIGNvbnRlbnRMaXN0LmZvckVhY2goY29udGVudCA9PiB7CiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodk5vZGUoY29udGVudCkuZGF0YT8uZG9tUHJvcHMgfHwge30sICdpbm5lckhUTUwnKSkgcmV0dXJuOwogICAgICAgIGFkZENsYXNzKGNvbnRlbnQsICd5YXdmLWZlZWQtY29tbWVudC1jb250ZW50Jyk7CiAgICAgICAgYWRkQ2xhc3MoY29udGVudC5wYXJlbnROb2RlLCAneWF3Zi1mZWVkLWNvbW1lbnQtdGV4dCcpOwogICAgICAgIGhhbmRsZUNvbnRlbnRSZW5kZXIodk5vZGUoY29udGVudCkpOwogICAgICAgIGFkZENsYXNzKGNvbnRlbnQsICd5YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQtaGFuZGxlcicpOwogICAgICB9KTsKCiAgICAgIC8vIOW4puWbvuivhOiuugogICAgICBjb25zdCBwaWN0dXJlID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCd4LXdvby1waWN0dXJlJyk7CiAgICAgIGlmIChwaWN0dXJlKSBhZGRDbGFzcyhwaWN0dXJlLCAneWF3Zi1mZWVkLWNvbW1lbnQtcGljdHVyZScpOwoKICAgICAgLy8g5p+Q5p2h6K+E6K665LiL55qE5omA5pyJ6K+E6K66CiAgICAgIGNvbnN0IG1vcmVJY29uID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWNvbW1lbnQtbW9yZS1hdXRob3IsIGEgPiB4LXdvby1mb250aWNvbicpOwogICAgICBjb25zdCBsaW5lID0gbW9yZUljb24/LmNsb3Nlc3QoJy50ZXh0Jyk7CiAgICAgIGlmIChsaW5lKSB7CiAgICAgICAgYWRkQ2xhc3MobGluZSwgJ3lhd2YtZmVlZC1jb21tZW50LW1vcmUtdGV4dCcpOwogICAgICB9CgogICAgICAvLyDor4TorrrnmoTmk43kvZzmjInpkq4KICAgICAgY29uc3QgaWNvbkxpc3RzID0gQXJyYXkuZnJvbShub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ3gtaWNvbi1saXN0JykpOwogICAgICBpY29uTGlzdHMuZm9yRWFjaChpY29uTGlzdCA9PiB7CiAgICAgICAgYWRkQ2xhc3MoaWNvbkxpc3QsICd5YXdmLWZlZWQtY29tbWVudC1pY29uLWxpc3QnKTsKICAgICAgfSk7CiAgICB9OwogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnY29tbWVudCcsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICBjb21tZW50UmVuZGVyVHJhbnNmb3JtSGVscGVyKG5vZGVTdHJ1Y3QsIHRoaXMuaXRlbSwgTm9kZXMpOwogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgncmVwb3N0JywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgaCwgd3JhcE5vZGUsIHZOb2RlLCBhZGRDbGFzcyB9ID0gTm9kZXM7CgogICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLXJlcG9zdCcpOwoKICAgICAgLy8g6L2s5Y+R5L2c6ICFCiAgICAgIGNvbnN0IGF1dGhvciA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcignYScpOwogICAgICBpZiAoYXV0aG9yKSB7CiAgICAgICAgc2V0SHJlZih2Tm9kZShhdXRob3IpLCBhYnNvbHV0ZVVybCh0aGlzLml0ZW0udXNlci5wcm9maWxlX3VybCkpOwogICAgICAgIGNvbmZpZ0NsaWNrSGFuZGxlcih2Tm9kZShhdXRob3IpLCB2Tm9kZShhdXRob3IpLCBuZXdUYWIuYXV0aG9yKTsKICAgICAgfQoKICAgICAgLy8g5aS05YOPCiAgICAgIGNvbnN0IGF2YXRhciA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tYXZhdGFyJyk7CiAgICAgIGlmIChhdmF0YXIpIHsKICAgICAgICBjb25zdCBsaW5rVk5vZGUgPSBoKCdhJywgewogICAgICAgICAgY2xhc3M6ICd5YXdmLWZlZWQtY29tbWVudC1hdmF0YXIgeWF3Zi1leHRyYS1saW5rJywKICAgICAgICAgIGF0dHJzOiB7IGhyZWY6IGFic29sdXRlVXJsKHRoaXMuaXRlbS51c2VyLnByb2ZpbGVfdXJsKSB9LAogICAgICAgIH0pOwogICAgICAgIHdyYXBOb2RlKGF2YXRhciwgbGlua1ZOb2RlKTsKICAgICAgICBjb25maWdDbGlja0hhbmRsZXIodk5vZGUoYXZhdGFyKSwgbGlua1ZOb2RlLCBuZXdUYWIuYXV0aG9yKTsKICAgICAgfQoKICAgICAgLy8g6L2s5Y+R5q2j5paHCiAgICAgIGNvbnN0IGNvbnRlbnQgPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTsKICAgICAgaWYgKGNvbnRlbnQpIHsKICAgICAgICBhZGRDbGFzcyhjb250ZW50LCAneWF3Zi1mZWVkLXJlcG9zdC1jb250ZW50Jyk7CiAgICAgICAgYWRkQ2xhc3MoY29udGVudC5wYXJlbnROb2RlLCAneWF3Zi1mZWVkLXJlcG9zdC10ZXh0Jyk7CiAgICAgICAgaGFuZGxlQ29udGVudFJlbmRlcih2Tm9kZShjb250ZW50KSk7CiAgICAgICAgYWRkQ2xhc3MoY29udGVudCwgJ3lhd2YtZmVlZC1kZXRhaWwtY29udGVudC1oYW5kbGVyJyk7CiAgICAgIH0KCiAgICAgIC8vIOi9rOWPkeW+ruWNmuWOn+adpeeCueWTqumHjOmDveWPr+S7pe+8jOaIkeS7rOiuqeS7luWPqueCueaXtumXtAogICAgICBjb25zdCBzaG93UmVwb3N0ID0gcmVtb3ZlQ2xpY2tIYW5kbGVyKHZOb2RlKG5vZGVTdHJ1Y3QpKTsKCiAgICAgIC8vIOi9rOWPkeW+ruWNmueahOaXtumXtAogICAgICBjb25zdCB0aW1lID0gY29udGVudD8ucGFyZW50Tm9kZS5uZXh0U2libGluZy5xdWVyeVNlbGVjdG9yKCdkaXYnKTsKICAgICAgaWYgKHRpbWUpIHsKICAgICAgICBhZGRDbGlja0hhbmRsZXIodk5vZGUodGltZSksIHNob3dSZXBvc3QpOwogICAgICAgIGNvbnN0IGxpbmtWTm9kZSA9IGgoJ2EnLCB7CiAgICAgICAgICBjbGFzczogJ3lhd2YtZmVlZC1yZXBvc3QtdGltZSB5YXdmLWV4dHJhLWxpbmsnLAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgaHJlZjogYWJzb2x1dGVVcmwoYC8ke3RoaXMuaXRlbS51c2VyLmlkfS8ke3RoaXMuaXRlbS5tYmxvZ2lkfWApLAogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgICB3cmFwTm9kZSh0aW1lLCBsaW5rVk5vZGUpOwogICAgICAgIGNvbmZpZ0NsaWNrSGFuZGxlcih2Tm9kZSh0aW1lKSwgbGlua1ZOb2RlLCBuZXdUYWIuZGV0YWlsKTsKICAgICAgfQogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnaWNvbi1saXN0JywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgc2V0QXR0cmlidXRlIH0gPSBOb2RlczsKCiAgICAgIGNvbnN0IGljb25zTmFtZSA9IHRoaXMuaWNvbnNOYW1lOwogICAgICBjb25zdCBpY29uc05vZGUgPSBBcnJheS5mcm9tKG5vZGVTdHJ1Y3QuY2hpbGROb2Rlcyk7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheShpY29uc05hbWUpKSByZXR1cm47CiAgICAgIGlmIChpY29uc05hbWUubGVuZ3RoICE9PSBpY29uc05vZGUubGVuZ3RoKSByZXR1cm47CiAgICAgIGljb25zTm9kZS5mb3JFYWNoKChub2RlLCBpbmRleCkgPT4gewogICAgICAgIHNldEF0dHJpYnV0ZShub2RlLCAneWF3Zi1pY29uLWxpc3QtbmFtZScsIGljb25zTmFtZVtpbmRleF0ubmFtZSk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgcmVuZGVyLmZlZWRSZW5kZXJGaXggPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiA3LAogICAgaWQ6ICdmZWVkX3JlbmRlcicsCiAgICB2ZXJzaW9uOiA3NywKICAgIHBhcmVudDogcmVuZGVyLnJlbmRlciwKICAgIGluaXRpYWw6IHRydWUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkUmVuZGVyRml4LAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZFJlbmRlckZpeERldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBjb25maWdzID0ge307CgogICAgICBjb25maWdzLnNtYWxsSW1hZ2UgPSBmZWVkcy5sYXlvdXQuc21hbGxJbWFnZS5nZXRDb25maWcoKTsKICAgICAgY29uZmlncy5uZXdUYWIgPSBPYmplY3QuYXNzaWduKC4uLidhdXRob3IsbWVudGlvbix0b3BpYyxkZXRhaWwsY29tbWVudHMscGljdHVyZSxjYXJkJy5zcGxpdCgnLCcpLm1hcChpZCA9PiAoewogICAgICAgIFtpZF06IGZlZWRzLmRldGFpbHMuZmVlZExpbmtOZXdUYWIuZ2V0Q29uZmlnKCkgJiYgZmVlZHMuZGV0YWlscy5mZWVkTGlua05ld1RhYi5yZWZbaWRdLmdldENvbmZpZygpLAogICAgICB9KSkpOwogICAgICBjb25maWdzLmhpZGVGYXN0UmVwb3N0ID0gY2xlYW4uZmVlZC5mYXN0X3JlcG9zdC5nZXRDb25maWcoKTsKICAgICAgdXRpbC5kZWJ1ZygncmVuZGVyIGNvbmZpZzogJW8nLCBjb25maWdzKTsKCiAgICAgIHV0aWwuaW5qZWN0KHJlbmRlck1vZGlmeSwgdXRpbC5pbmplY3Qucm9vdEtleSwgY29uZmlncyk7CgogICAgICBjc3MuYXBwZW5kKGAKLnlhd2YtZXh0cmEtbGluaywgLnlhd2YtZXh0cmEtYm94IHsgYWxsOiBpbmhlcml0OyBkaXNwbGF5OiBjb250ZW50czsgfQoueWF3Zi1mZWVkLXNvdXJjZSB7IGN1cnNvcjogZGVmYXVsdDsgfQoueWF3Zi1mZWVkLXJlcG9zdC55YXdmLWZlZWQtcmVwb3N0IHsgY3Vyc29yOiBhdXRvOyB9Ci55YXdmLWZlZWQtcmVwb3N0LXRpbWUgeyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB2YXIoLS13LXN1Yik7IH0KLnlhd2YtZmVlZC1zb3VyY2U6aG92ZXIsIC55YXdmLWZlZWQtcmVwb3N0LXRpbWU6aG92ZXIgeyBjb2xvcjogdmFyKC0tdy1icmFuZCk7IH0KLnlhd2YtZmVlZC1oZWFkLWluZm8tcmV0d2VldCB7IG92ZXJmbG93OiBoaWRkZW47IH0KLnlhd2YtZmVlZC1oZWFkLWluZm8tcmV0d2VldCB+IC55YXdmLWZlZWQtdG9vbGJhciB7IGZsZXgtc2hyaW5rOiAwOyB9CmApOwoKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmVlZHMvbGF5b3V0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CgogIGNvbnN0IGZlZWRzID0geWF3Zi5ydWxlcy5mZWVkczsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgbGF5b3V0ID0gZmVlZHMubGF5b3V0ID0ge307CgogIGkxOG4uZmVlZExheW91dEdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+W+ruWNmuW4g+WxgCcsCiAgICB0dzogJ+W+ruWNmuS9iOWxgCcsCiAgICBlbjogJ0ZlZWQgTGF5b3V0JywKICB9OwoKICBsYXlvdXQubGF5b3V0ID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZlZWRzLmZlZWRzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZExheW91dEdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uZmVlZEZvbGRTcGFjZSA9IHsKICAgIGNuOiAn5Y676Zmk5b6u5Y2a5Y2h54mH5LmL6Ze055qE56m66ZqZJywKICAgIHR3OiAn5Y676Zmk5b6u5Y2a5Y2h54mH5LmL6ZaT55qE56m66ZqZJywKICAgIGVuOiAnUmVtb3ZlIGdhcHMgYmV0d2VlbiBmZWVkcycsCiAgfTsKCiAgbGF5b3V0LmZvbGRTcGFjZSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfbm9fc3BhY2UnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRGb2xkU3BhY2UsCiAgICBhY3NzOiBgCi5XQl9mZWVkLldCX2ZlZWQgeyBib3JkZXItcmFkaXVzOiAzcHg7IGJveC1zaGFkb3c6IDAgMCAycHggcmdiYSgwLCAwLCAwLCAwLjIpOyB9Ci5XQl9mZWVkLldCX2ZlZWQgLldCX2NhcmR3cmFwIHsgYm9yZGVyLXJhZGl1czogMDsgYm94LXNoYWRvdzogbm9uZTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsgbWFyZ2luOiAtMXB4IDAgMXB4OyB9Ci5XQl9mZWVkIC5XQl9kZXRhaWwgeyBtYXJnaW4tYm90dG9tOiA0MHB4OyB9Ci5XQl9mZWVkIC5XQl9mZWVkX2hhbmRsZSB7IGhlaWdodDogMjBweDsgbWFyZ2luLXRvcDogLTIwcHg7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLldCX2ZlZWQgLldCX2ZlZWRfZXhwYW5kIHsgbWFyZ2luLXRvcDogNXB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2V4cGFuZCB7IG1hcmdpbi1ib3R0b206IDA7IH0KLldCX2ZlZWQgLldCX2ZlZWRfaGFuZGxlIC5XQl9oYW5kbGUgeyBmbG9hdDogcmlnaHQ7IG1hcmdpbi1yaWdodDogMTBweDsgaGVpZ2h0OiAyMHB4OyBwYWRkaW5nOiAwOyBwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogLTIwcHg7IH0KLldCX2ZlZWQgLldCX2ZlZWRfaGFuZGxlIC5XQl9yb3dfbGluZSB7IGJvcmRlcjogbm9uZTsgb3ZlcmZsb3c6IGhpZGRlbjsgbGluZS1oZWlnaHQ6IDI2cHg7IH0KLldCX2ZlZWQgLldCX2ZlZWRfaGFuZGxlIC5XQl9yb3dfbGluZTo6YWZ0ZXIgeyBjb250ZW50OiAiICI7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tbGVmdDogLTFweDsgZmxleDogMCAwIDA7IG9yZGVyOiAxMDsgfQouV0JfZmVlZCAuV0JfZmVlZF9oYW5kbGUgLldCX3Jvd19saW5lIGxpIHsgcGFkZGluZzogMCAxMXB4IDAgMTBweDsgaGVpZ2h0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IC0xcHg7IH0KLldCX2ZlZWQgLldCX3Jvd19saW5lIC5saW5lIHsgZGlzcGxheTogaW5saW5lOyBib3JkZXItd2lkdGg6IDA7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQouV0JfZmVlZCAuV0Jfcm93X2xpbmUgLmxpbmU6OmJlZm9yZSB7IGNvbnRlbnQ6ICIgIjsgZGlzcGxheTogYmxvY2s7IHdpZHRoOiAwOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgcmlnaHQ6IC0xMHB4OyB0b3A6IDA7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkOyBib3JkZXItY29sb3I6IGluaGVyaXQ7IH0KLldCX2ZlZWQgLldCX3Jvd19saW5lIC5saW5lIHNwYW4gLldfZmljb24geyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyB9Ci5XQl9mZWVkX2hhbmRsZSAuV0Jfcm93X2xpbmUgLmFycm93IHsgZGlzcGxheTogbm9uZTsgfQouV0JfZmVlZF9yZXBlYXQgeyBtYXJnaW4tdG9wOiAtMTBweDsgfQouV0JfZmVlZF9jb21tZW50LldCX2ZlZWRfY29tbWVudCAuV0JfZmVlZF9kZXRhaWwgeyBwb3NpdGlvbjogcmVsYXRpdmU7IHBhZGRpbmctYm90dG9tOiA0cHg7IH0KLldCX2ZlZWRfY29tbWVudC5XQl9mZWVkX2NvbW1lbnQgLldCX2ZlZWRfZGV0YWlsOjphZnRlciB7IGRpc3BsYXk6IG5vbmU7IH0KLldCX2ZlZWRfdjMgLldCX2V4cGFuZCAuV0JfZW1wdHkgLldCX2lubmVyd3JhcCwgLldCX2ZlZWRfY29tbWVudCAuV0JfZXhwYW5kIHsgbWFyZ2luLWJvdHRvbTogMDsgfQpgLAogIH0pOwoKICBpMThuLnNvdXJjZUF0Qm90dG9tID0gewogICAgY246ICflsIblvq7ljZrnmoTlj5HluIPml7bpl7TlkozmnaXmupDnp7vliqjliLDlvq7ljZrmnKvlsL4nLAogICAgdHc6ICflsIflvq7ljZrnmoTnmbzluIPmmYLplpPlkozkvobmupDnp7vli5XliLDlvq7ljZrmnKvlsL4nLAogICAgZW46ICdNb3ZlIHRpbWVzdGFtcCBhbmQgc291cmNlIG9mIFdlaWJvIHRvIGJvdHRvbScsCiAgfTsKCiAgbGF5b3V0LnNvdXJjZUF0Qm90dG9tID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9zb3VyY2VfYXRfYm90dG9tJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zb3VyY2VBdEJvdHRvbSwKICAgIGFpbml0KCkgewogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBmcm9tTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLldCX2RldGFpbCA+IC5XQl9pbmZvICsgLldCX2Zyb20nKSk7CiAgICAgICAgaWYgKCFmcm9tTGlzdC5sZW5ndGgpIHJldHVybjsKICAgICAgICBmcm9tTGlzdC5mb3JFYWNoKGZyb20gPT4gewogICAgICAgICAgZnJvbS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGZyb20pOwogICAgICAgICAgZnJvbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWJvdHRvbS1XQl9mcm9tJyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBjb25zdCBmb2xkU3BhY2UgPSBsYXlvdXQuZm9sZFNwYWNlLmdldENvbmZpZygpOwogICAgICBpZiAoZm9sZFNwYWNlKSB7CiAgICAgICAgY3NzLmFwcGVuZChgCi5XQl9mcm9tLldCX2Zyb20ueWF3Zi1ib3R0b20tV0JfZnJvbSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgYm90dG9tOiA0MHB4OyBtYXJnaW46IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDEwMCUpOyBsaW5lLWhlaWdodDogMjhweDsgfQpgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjc3MuYXBwZW5kKCcuV0JfZnJvbS5XQl9mcm9tLnlhd2YtYm90dG9tLVdCX2Zyb20geyBtYXJnaW46IDEwcHggMCA3cHg7IH0nKTsKICAgICAgfQogICAgICBjc3MuYXBwZW5kKCcuV0JfZmVlZC5XQl9mZWVkIC5XQl9leHBhbmRfbWVkaWFfYm94IHsgbWFyZ2luLWJvdHRvbTogMTBweDsgfScpOwogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBub3dyYXBBZnRlckF1dGhvcjogewogICAgICBjbjogJ+W+ruWNmuS9nOiAheS4juWGheWuuemXtOS4jeaLhuihjCB7e2l9fScsCiAgICAgIHR3OiAn5b6u5Y2a5L2c6ICF6IiH5YWn5a656ZaT5LiN5ouG6KGMIHt7aX19JywKICAgICAgZW46ICdObyBsaW5lIGJyZWFrcyBiZXR3ZWVuIGF1dGhvciBhbmQgY29udGVudCB7e2l9fScsCiAgICB9LAogICAgbm93cmFwQWZ0ZXJBdXRob3JEZXRhaWw6IHsKICAgICAgY246ICflpoLmnpzmgqjlkK/nlKjmnKzlip/og73ml7bmnKrpgInmi6nigJxbW2ZlZWRfc291cmNlX2F0X2JvdHRvbV1d4oCd77yM5b6u5Y2a55qE5p2l5rqQ5bCG5Lya6KKr6ZqQ6JeP44CCJywKICAgIH0sCiAgfSk7CgogIGxheW91dC5ub3dyYXBBZnRlckF1dGhvciA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfYXV0aG9yX2NvbnRlbnRfbm93cmFwJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5ub3dyYXBBZnRlckF1dGhvciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLm5vd3JhcEFmdGVyQXV0aG9yRGV0YWlsIH0sCiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGNzcy5hcHBlbmQoYAouV0JfaW5mbywgLldCX3RleHQgeyBkaXNwbGF5OiBpbmxpbmU7IHdvcmQtd3JhcDogYnJlYWstd29yZDsgfQouV0JfaW5mbzo6YWZ0ZXIgeyBjb250ZW50OiAi77yaIjsgfQouV0JfdGV4dDo6YmVmb3JlIHsgY29udGVudDogIiAiOyBkaXNwbGF5OiBibG9jazsgZmxvYXQ6IHJpZ2h0OyB3aWR0aDogMTRweDsgaGVpZ2h0OiAxcHg7IH0KLldCX2V4cGFuZCAuV0JfdGV4dDo6YmVmb3JlIHsgd2lkdGg6IDA7IH0KW3lhd2YtaGlkZS1ib3hdIC5XQl90ZXh0OjpiZWZvcmUgeyB3aWR0aDogMzdweDsgfQpbeWF3Zi1oaWRlLWJveF0gLldCX2V4cGFuZCAuV0JfdGV4dDo6YmVmb3JlIHsgd2lkdGg6IDE0cHg7IH0KCi5XQl9pbmZvICsgLldCX2Zyb20geyBkaXNwbGF5OiBub25lOyB9CmJvZHkgLldCX2ZlZWRfdjMgLldCX2ZhY2UgLm9wdC5vcHQgeyBtYXJnaW46IDEwcHggMCAwIDA7IHBvc2l0aW9uOiBzdGF0aWM7IHJpZ2h0OiBhdXRvOyB0b3A6IGF1dG87IH0KYm9keSAuV0JfZmVlZF92MyAuV0JfZmFjZSAub3B0Lm9wdCAuV19idG5fYiB7IHdpZHRoOiA0OHB4OyB9CgouV0JfZmFjZSB7IGxpbmUtaGVpZ2h0OiAwOyB9Ci5XQl9kZXRhaWwgeyBtaW4taGVpZ2h0OiA1MHB4OyB9CgpbaWRePSJQbF9Db3JlX1dlbmRhTGlzdF9fIl0gLldCX3RleHQ6OmJlZm9yZSB7IHdpZHRoOiA2OHB4OyB9CgouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9leHBhbmRfbWVkaWFfYm94IHsgbWFyZ2luLXRvcDogMTBweDsgfQoKLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfaW5mbyAuc3Bfa3osIAouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9pbmZvIC5XX2F1dG9jdXQgeyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB9CmApOwogICAgfSwKICB9KTsKCiAgaTE4bi5zbWFsbEltYWdlID0gewogICAgY246ICfnvKnlsI/nvKnnlaXlm77lsLrlr7gge3tpfX18fHt7cmVwb3N0fX3nvKnlsI/ovazlj5Hljp/mloflrr3luqbvvIjku4XpmZBWNu+8iScsCiAgICB0dzogJ+e4ruWwj+e4rueVpeWcluWwuuWvuCB7e2l9fXx8e3tyZXBvc3R9fee4ruWwj+i9ieeZvOWOn+aWh+WvrOW6pu+8iOWDhemZkFY277yJJywKICAgIGVuOiAnRGVjcmVhc2UgdGhlIHNpemUgb2YgaW1hZ2Uge3tpfX18fHt7cmVwb3N0fX0gRGVjcmVhc2UgdGhlIHdpZHRoIG9mIG9yaWdpbmFsIGZlZWRzIChWNiBPbmx5KScsCiAgfTsKICBpMThuLnNtYWxsSW1hZ2VEZXRhaWwgPSB7CiAgICBjbjogJ+e8qeWwj+WbvueJh+WwuuWvuOS7heW9seWTjeWbvueJh+WcqOaCqOeahOe9kemhteS4iueahOaYvuekuuaViOaenO+8jOS4jeiDvemZjeS9jue9kee7nOaVsOaNrua1gemHj+eUqOmHj+OAgicsCiAgfTsKCiAgbGF5b3V0LnNtYWxsSW1hZ2UgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZlZWRfc21hbGxfaW1hZ2UnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNtYWxsSW1hZ2UsCiAgICByZWY6IHsKICAgICAgcmVwb3N0OiB7IHR5cGU6ICdib29sZWFuJyB9LAogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNtYWxsSW1hZ2VEZXRhaWwgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGNzcy5hcHBlbmQoYAouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hIHsgbWFyZ2luOiAtMnB4IDAgMCA2cHg7IHdpZHRoOiAyNThweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX21uIC5XQl9waWMgeyB3aWR0aDogODBweDsgaGVpZ2h0OiA4MHB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjQgLldCX21lZGlhX2FfbW4gLldCX3BpYyB7IHdpZHRoOiA4MHB4ICFpbXBvcnRhbnQ7IGhlaWdodDogODBweCAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjQgLldCX21lZGlhX2FfbW4gLldCX3BpYyBpbWcgeyB0b3A6IDQwcHggIWltcG9ydGFudDsgbGVmdDogNDBweCAhaW1wb3J0YW50OyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQuV0JfZmVlZF92NCAuV0JfbWVkaWFfYV9tbiAuV0JfcGljIGltZ1tzdHlsZSo9ImxlZnQ6MCJdW3N0eWxlKj0id2lkdGg6MTEwcHgiXSB7IHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IGhlaWdodDogYXV0byAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjQgLldCX21lZGlhX2FfbW4gLldCX3BpYyBpbWdbc3R5bGUqPSJ0b3A6MCJdW3N0eWxlKj0iaGVpZ2h0OjExMHB4Il0geyBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsgfQouV0JfZmVlZC5XQl9mZWVkX3Y0IC5XQl9tZWRpYV9hX21uIC5XQl9waWMgaW1nW3N0eWxlKj0idG9wOjAiXSB7IHRvcDogMCAhaW1wb3J0YW50OyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgIWltcG9ydGFudDsgfQouV0JfZmVlZC5XQl9mZWVkX3Y0IC5XQl9tZWRpYV9hX21uIC5XQl9waWMgaW1nW3N0eWxlKj0ibGVmdDowIl0geyBsZWZ0OiAwICFpbXBvcnRhbnQ7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjQgLldCX21lZGlhX2FfbW4gLldCX3BpYyBpbWdbc3R5bGUqPSJ0b3A6MCJdW3N0eWxlKj0ibGVmdDowIl0geyBsZWZ0OiAwICFpbXBvcnRhbnQ7IHRvcDogMCAhaW1wb3J0YW50OyB0cmFuc2Zvcm06IG5vbmUgIWltcG9ydGFudDsgfQouV0JfZmVlZC5XQl9mZWVkX3Y0IC5XQl9tZWRpYV9hX21uIC5XQl9waWMgaW1nOm5vdChbc3R5bGUqPSJ0b3AiXSkgeyBtYXgtd2lkdGg7IDEwMCU7IG1heC1oZWlnaHQ6IDEwMCU7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYV9tMSAuV0JfcGljIHsgbWF4LXdpZHRoOiAxMjBweDsgbWF4LWhlaWdodDogMTIwcHg7IG1pbi13aWR0aDogMzZweDsgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYV9tMSAuV0JfcGljIGltZyB7IG1heC1oZWlnaHQ6IDEyMHB4OyBtYXgtd2lkdGg6IDEyMHB4OyB3aWR0aDogYXV0byAhaW1wb3J0YW50OyBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgcG9zaXRpb246IHN0YXRpYzsgLXdlYmtpdC10cmFuc2Zvcm06IG5vbmU7IHRyYW5zZm9ybTogbm9uZTsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX20xIC5XQl92aWRlbzpub3QoLnlhd2YtV0JfdmlkZW8pOm5vdCguV0JfdmlkZW9faDVfdjIpIHsgd2lkdGg6IDEyMHB4OyBoZWlnaHQ6IDgwcHg7IG1pbi13aWR0aDogMzZweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX200IHsgd2lkdGg6IDE3MnB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfcmVwZWF0IC5XQl9tZWRpYV9hX20xIC5XQl9waWM6OmJlZm9yZSB7IGRpc3BsYXk6IG5vbmU7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9yZXBlYXQgLldCX21lZGlhX2FfbTEgLldCX3BpYyBpbWcgeyBtYXgtd2lkdGg6IDEyMHB4OyBtYXgtaGVpZ2h0OiAxMjBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWMgeyBoZWlnaHQ6IDEwMHB4OyB3aWR0aDogMzE2cHg7IGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMTI3LDEyNywxMjcsMC4zKTsgYm94LXNoYWRvdzogMCAwIDJweCByZ2JhKDAsMCwwLDAuMTUpOyBib3JkZXItcmFkaXVzOiAycHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX3BpYyB7IGhlaWdodDogMTAwcHg7IHdpZHRoOiAxMDBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfaW5mbyB7IGhlaWdodDogODhweDsgd2lkdGg6IDIwMnB4OyBwYWRkaW5nOiA3cHggNHB4IDVweCAxMHB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19hIC5XQl9mZWVkX3NwZWNfcGljIHsgd2lkdGg6IDEwMHB4OyBoZWlnaHQ6IDEwMHB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19hIC5XQl9mZWVkX3NwZWNfaW5mbyB7IHdpZHRoOiAyMDBweDsgaGVpZ2h0OiA4OHB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19iMiAuV0JfZmVlZF9zcGVjX3BpYywgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2IyIC5XQl9mZWVkX3NwZWNfcGljIGltZywgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2MgLldCX2ZlZWRfc3BlY19waWMsIC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19jIC5XQl9mZWVkX3NwZWNfcGljIGltZyB7IGhlaWdodDogYXV0bzsgbWluLWhlaWdodDogMTAwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2IgLldCX2ZlZWRfc3BlY19waWMsIC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19jIC5XQl9mZWVkX3NwZWNfcGljLCAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWMyIC5XQl9mZWVkX3NwZWNfcGljIHsgaGVpZ2h0OiAxMDBweDsgd2lkdGg6IDI1MHB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19iLCAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYywgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjMiB7IHdpZHRoOiAyNTBweDsgaGVpZ2h0OiBhdXRvOyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19pbmZvIHsgZmxvYXQ6IHJpZ2h0OyBoZWlnaHQ6IDg4cHg7IHBhZGRpbmc6IDdweCA0cHggNXB4IDEwcHg7IHdpZHRoOiAyMDJweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYiAuV0JfZmVlZF9zcGVjX2luZm8sIC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19jIC5XQl9mZWVkX3NwZWNfaW5mbywgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjMiAuV0JfZmVlZF9zcGVjX2luZm8geyBmbG9hdDogbm9uZTsgaGVpZ2h0OiBhdXRvOyB3aWR0aDogYXV0bzsgcGFkZGluZzogMTBweCA1cHggMDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYiAuV0JfZmVlZF9zcGVjX2luZm8gLldCX2ZlZWRfc3BlY19jb250IC5XQl9mZWVkX3NwZWNfdGl0LCAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYyAuV0JfZmVlZF9zcGVjX2luZm8gLldCX2ZlZWRfc3BlY19jb250IC5XQl9mZWVkX3NwZWNfdGl0LCAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWMyIC5XQl9mZWVkX3NwZWNfaW5mbyAuV0JfZmVlZF9zcGVjX2NvbnQgLldCX2ZlZWRfc3BlY190aXQgeyBmb250LXNpemU6IGluaGVyaXQ7IGZvbnQtd2VpZ2h0OiA3MDA7IG1hcmdpbjogMCAwIDZweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfaW5mbyAuV0JfZmVlZF9zcGVjX2NvbnQgLldCX2ZlZWRfc3BlY19icmllZnR4dCB7IGxpbmUtaGVpZ2h0OiAxNXB4OyBoZWlnaHQ6IDMwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX3VzZXIgLldfZmwgeyB3aWR0aDogMjQwcHg7IH0KCi5XQl9mZWVkIC55YXdmLVdCX3BpY19tb3JlIHsgbGluZS1oZWlnaHQ6IDgwcHg7IH0KCi5sYXllcl9mZWVkaW1nc2hvdyAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hIHsgbWFyZ2luOiAwOyB3aWR0aDogYXV0bzsgfQoubGF5ZXJfZmVlZGltZ3Nob3cgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYV9tMSAuV0JfcGljIHsgbWF4LXdpZHRoOiBub25lOyBtYXgtaGVpZ2h0OiBub25lOyBtaW4td2lkdGg6IGF1dG87IH0KLmxheWVyX2ZlZWRpbWdzaG93IC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX2FfbTEgLldCX3BpYyBpbWcgeyBtYXgtd2lkdGg6IDI2MHB4OyBtYXgtd2lkdGg6IDQwdnc7IG1heC1oZWlnaHQ6IDI2MHB4OyBtYXgtaGVpZ2h0OiA0MHZoOyBtaW4td2lkdGg6IGF1dG87IH0KCi5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX2FfbTEgLldCX3ZpZGVvLldCX3ZpZGVvX2g1IHsgd2lkdGg6IGF1dG87IGhlaWdodDogYXV0bzsgZGlzcGxheTogdGFibGU7IH0KLldCX2g1dmlkZW8uaHYtczEsIC5XQl9oNXZpZGVvLmh2LXMzLTIsIC5XQl9oNXZpZGVvLmh2LXMzLTUgeyB3aWR0aDogMTIwcHg7IGhlaWdodDogODBweDsgbWF4LXdpZHRoOiAxMjBweDsgbWF4LWhlaWdodDogODBweDsgbWluLXdpZHRoOiAzNnB4OyB9Ci5XQl9oNXZpZGVvLmh2LXMxIC5jb24tMTEsIC5XQl9oNXZpZGVvLmh2LXMzLTIgLmNvbi0xMSwgLldCX2g1dmlkZW8uaHYtczMtNSAuY29uLTExIHsgZGlzcGxheTogbm9uZTsgfQouV0JfaDV2aWRlby5odi1zMSB2aWRlbywgLldCX2g1dmlkZW8uaHYtczMtMiB2aWRlbywgLldCX2g1dmlkZW8uaHYtczMtNSB2aWRlbyB7IG1heC13aWR0aDogMTAwJTsgbWF4LWhlaWdodDogMTAwJTsgfQouV0JfaDV2aWRlby5odi1zMy5odi1zMy0yIC5jb24tNCwKLldCX2g1dmlkZW8uaHYtczMuaHYtczMtNSAuY29uLTQgeyBvcGFjaXR5OiAxOyB6LWluZGV4OiAxOyB9Ci5XQl9oNXZpZGVvLmh2LXMzLmh2LXMzLTI6aG92ZXIgLmNvbi02LAouV0JfaDV2aWRlby5odi1zMy5odi1zMy01OmhvdmVyIC5jb24tNiwKLldCX2g1dmlkZW8uaHYtczMuaHYtczMtNSAuY29uLTMgLmJveC0yIGVtLAouV0JfaDV2aWRlbyAuY29uLTMuaHYtczMtMyAuYm94LTMgeyBvcGFjaXR5OiAwOyB6LWluZGV4OiAwOyB9Ci5XQl92aWRlbyAud2J2LWVycm9yLWRpc3BsYXkgaDQgeyBib3R0b206IDA7IH0KCi5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX2FfbTEgLldCX3ZpZGVvOm5vdChbeWF3Zi12aWRlby1wbGF5XSkgeyB3aWR0aDogMTIwcHg7IGhlaWdodDogODBweDsgbWluLXdpZHRoOiAzNnB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX2FfbTEgLldCX3ZpZGVvOm5vdChbeWF3Zi12aWRlby1wbGF5XSkgLndidi1jb250cm9sLWJhciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX20xIC5odG1sNS12aWRlbzpub3QoW3lhd2YtdmlkZW8tcGxheV0pIHsgbWF4LXdpZHRoOiAxMjBweDsgbWF4LWhlaWdodDogODBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX20xIC5odG1sNS12aWRlbzpub3QoW3lhd2YtdmlkZW8tcGxheV0pIC5ib3gtMyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoKLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMSAuaXRlbSB7IGZvbnQtc2l6ZTogaW5oZXJpdDsgbGluZS1oZWlnaHQ6IDE0cHg7IG1hcmdpbi10b3A6IC01cHg7IHRleHQtYWxpZ246IGxlZnQ7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMSAuaXRlbV9ydCB7IGZvbnQtc2l6ZTogaW5oZXJpdDsgbGluZS1oZWlnaHQ6IDI0cHg7IGhlaWdodDogMjRweDsgbWFyZ2luLXRvcDogLTVweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC52b3RlX3BpYyB7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA5MHB4OyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjIgeyB3aWR0aDogMjQycHg7IG1hcmdpbjogMDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIHRhYmxlIHsgbWFyZ2luOiA1cHggMDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC52b3RlX3BpYyAuYmcgeyBmb250LXNpemU6IGluaGVyaXQ7IHRleHQtc2hhZG93OiAwIDAgMnB4IGJsYWNrOyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjIgLnZvdGVfYnRuIGEgeyBtYXJnaW46IDVweCAwOyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX3RpdCB7IGZvbnQtc2l6ZTogaW5oZXJpdDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9zaGFyZSBhIHsgbGluZS1oZWlnaHQ6IDI0cHg7IGhlaWdodDogMjRweDsgbWFyZ2luLXRvcDogLTVweDsgfQpgKTsKICAgICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIHNtYWxsVmlkZW8oKSB7CiAgICAgICAgICBbewogICAgICAgICAgICB2aWRlb1NlbGVjdG9yOiAnLldCX3ZpZGVvX2g1X3YyIC5XQl9oNXZpZGVvX3YyOm5vdChbeWF3Zi13YXRjaC1wYXVzZV0pJywKICAgICAgICAgICAgY29udGFpbmVyU2VsZWN0b3I6ICcuV0JfdmlkZW9faDVfdjInLAogICAgICAgICAgICBpc1BsYXlpbmc6IHZpZGVvID0+IHZpZGVvLmNsYXNzTGlzdC5jb250YWlucygnd2J2LXBsYXlpbmcnKSwKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdmlkZW9TZWxlY3RvcjogJy5odG1sNS12aWRlbyAuaHYtaWNvbjpub3QoW3lhd2Ytd2F0Y2gtcGF1c2VdKScsCiAgICAgICAgICAgIGNvbnRhaW5lclNlbGVjdG9yOiAnLmh0bWw1LXZpZGVvJywKICAgICAgICAgICAgaXNQbGF5aW5nOiB2aWRlbyA9PiB2aWRlby5jbGFzc0xpc3QuY29udGFpbnMoJ2h2LWljb24tcGF1c2UnKSwKICAgICAgICAgIH1dLmZvckVhY2goZnVuY3Rpb24gKHsgdmlkZW9TZWxlY3RvciwgY29udGFpbmVyU2VsZWN0b3IsIGlzUGxheWluZyB9KSB7CiAgICAgICAgICAgIGNvbnN0IHZpZGVvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2aWRlb1NlbGVjdG9yKSk7CiAgICAgICAgICAgIHZpZGVvcy5mb3JFYWNoKHZpZGVvID0+IHsKICAgICAgICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3lhd2Ytd2F0Y2gtcGF1c2UnLCAnJyk7CiAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdmlkZW8uY2xvc2VzdChjb250YWluZXJTZWxlY3Rvcik7CiAgICAgICAgICAgICAgbGV0IHZpZGVvT2JzZXJ2ZXI7CiAgICAgICAgICAgICAgY29uc3Qgc2V0UGxheUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIHNldFBsYXlBdHRyaWJ1dGUoKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwbGF5aW5nID0gaXNQbGF5aW5nKHZpZGVvKTsKICAgICAgICAgICAgICAgIGlmIChwbGF5aW5nKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3lhd2YtdmlkZW8tcGxheScsICcnKTsKICAgICAgICAgICAgICAgICAgaWYgKHZpZGVvT2JzZXJ2ZXIpIHZpZGVvT2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlmIChzZXRQbGF5QXR0cmlidXRlKCkpIHJldHVybjsKICAgICAgICAgICAgICB2aWRlb09ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoc2V0UGxheUF0dHJpYnV0ZSk7CiAgICAgICAgICAgICAgdmlkZW9PYnNlcnZlci5vYnNlcnZlKHZpZGVvLCB7IGF0dHJpYnV0ZXM6IHRydWUsIGF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddLCBjaGlsZExpc3Q6IGZhbHNlLCBjaGFyYWN0ZXJEYXRhOiBmYWxzZSB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBjb25zdCByZXBvc3QgPSB0aGlzLnJlZi5yZXBvc3QuZ2V0Q29uZmlnKCk7CiAgICAgICAgaWYgKHJlcG9zdCkgY3NzLmFwcGVuZChgCi5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2V4cGFuZF9tZWRpYSB7IG1hcmdpbjogMnB4IDAgOHB4OyBwYWRkaW5nOiAxMnB4IDE2cHggMTZweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9leHBhbmQgeyBtYXJnaW46IDAgMCAxMHB4OyBwYWRkaW5nOiAxMHB4IDE2cHggMTNweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9leHBhbmQgLldCX2Z1bmMgeyBtYXJnaW46IDA7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZXhwYW5kX21lZGlhX2JveCB7IG1hcmdpbi1sZWZ0OiAwOyBtYXJnaW4tcmlnaHQ6IDA7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZXhwYW5kIC5XQl9leHBhbmRfbWVkaWEgeyBwYWRkaW5nOiAwIDAgNXB4OyBtYXJnaW46IDA7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfdmlldyB7IG1hcmdpbjogNnB4IGF1dG8gMDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV92aWV3LCAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV92aWV3IC5tZWRpYV9zaG93X2JveCBsaSB7IHdpZHRoOiA0NDBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV92aWV3IC5tZWRpYV9zaG93X2JveCB1bCB7IG1hcmdpbi1sZWZ0OiAtMzJweDsgcGFkZGluZy1sZWZ0OiAzMnB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLmFydHdvcmtfYm94IHsgd2lkdGg6IDQ0MHB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX3ZpZXcgLm1lZGlhX3Nob3dfYm94IGltZyB7IG1heC13aWR0aDogNDQwcHg7IGhlaWdodDogYXV0byAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLmxheWVyX3ZpZXdfbW9yZXBpYyAudmlld19waWMgeyBwYWRkaW5nOiAwIDQwcHggMjBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV92aWV3IC5waWNfY2hvb3NlX2JveCAuc3RhZ2VfYm94IHsgd2lkdGg6IDQ0MHB4OyB9CmApOwogICAgICAgIGNvbnN0IGZlZWRXaWR0aCA9IGxheW91dC5pbmNyZWFzZUZlZWRXaWR0aC5pc0VuYWJsZWQoKSA/IGxheW91dC5pbmNyZWFzZUZlZWRXaWR0aC5yZWYud2lkdGguZ2V0Q29uZmlnKCkgOiA2MDA7CiAgICAgICAgaWYgKGZlZWRXaWR0aCA8IDY1MCAmJiByZXBvc3QpIGNzcy5hcHBlbmQoYAouV0JfaDV2aWRlbyB7IG1hcmdpbi1sZWZ0OiAtMjJweDsgfQouV0JfaDV2aWRlby5odi1zMSwgLldCX2g1dmlkZW8uaHYtczMtMiwgLldCX2g1dmlkZW8uaHYtczMtNSB7IG1hcmdpbi1sZWZ0OiAwOyB9Ci55YXdmLVdCX3ZpZGVvW3lhd2YtdmlkZW8tcGxheV0geyBtYXJnaW4tbGVmdDogLTIycHg7IH0KYCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5Y2V5byg5Zu+54mH5bC65a+46K6h566X5ZyoIHJlbmRlciDph4wKICAgICAgICBjc3MuYXBwZW5kKGAKLnlhd2YtZmVlZC1waWN0dXJlLWNvbDMgPiBkaXYgeyB3aWR0aDogMjUycHg7IH0KLnlhd2YtZmVlZC1waWN0dXJlLWNvbDQgPiBkaXYgeyB3aWR0aDogMzMycHg7IH0KLnlhd2YtZmVlZC12aWRlbyB7IHRyYW5zaXRpb246IHdpZHRoIDBzIDAuMnMgZWFzZTsgfQoueWF3Zi1mZWVkLXZpZGVvLWluYWN0aXZlIHsgd2lkdGg6IDE1MHB4OyB9Ci55YXdmLWZlZWQtY2FyZCA+IGRpdiB7IHdpZHRoOiAzMTZweDsgfQoueWF3Zi1mZWVkLWNhcmQtcGljdHVyZSB7IHdpZHRoOiA4MHB4ICFpbXBvcnRhbnQ7IGhlaWdodDogODBweCAhaW1wb3J0YW50OyB9Ci55YXdmLWZlZWQtY29tbWVudC1waWN0dXJlIHsgbWF4LXdpZHRoOiA4MHB4OyB9Ci55YXdmLWZlZWQtY2FyZC1hcnRpY2xlIHsgbWF4LXdpZHRoOiAyNDBweDsgfQpgKTsKICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSkgewogICAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgICAgICAvLyDmiJHku6zpnIDopoHku5bkuI3lpI3nlKjop4bpopHnu4Tku7YKICAgICAgICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtY29udGVudCcsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICAgICAgICBjb25zdCB2aWRlbyA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvckFsbCgneC1mZWVkLXZpZGVvJyk7CiAgICAgICAgICAgIGlmICh2aWRlbyAmJiAhdmlkZW8ua2V5KSB2aWRlby5rZXkgPSB0aGlzLmRhdGEuaWQ7IC8vIOeUqCBtaWQg5b6I5pa55L6/CiAgICAgICAgICB9KTsKICAgICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnZmVlZC12aWRlbycsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgICAvLyDov5nkuKrlj5jph4/opoHlrZjkuIvmnaXvvIzkuI3nhLbliLAgYmVmb3JlRGVzdHJveSDnmoTml7blgJnku5bniLnlsLHkuI3mmK/njrDlnKjov5nkuKrkuoYKICAgICAgICAgICAgY29uc3QgZmVlZCA9IHZtLiRwYXJlbnQuZGF0YTsKICAgICAgICAgICAgaWYgKCF2bS5pc1BsYXlpbmcgJiYgZmVlZC5feWF3Zl9WaWRlb1RvdWNoZWQpIHsKICAgICAgICAgICAgICB2bS5pc1BsYXlpbmcgPSB0cnVlOwogICAgICAgICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZtLiRvbignaG9vazpiZWZvcmVEZXN0cm95JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZlZWQuX3lhd2ZfVmlkZW9Ub3VjaGVkID0gdm0uaXNQbGF5aW5nOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50UmVuZGVyKHZtLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgICAgICAgICBjb25zdCB7IGFkZENsYXNzIH0gPSBOb2RlczsKICAgICAgICAgICAgICBpZiAodGhpcy5pc1BsYXlpbmcpIHsKICAgICAgICAgICAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtdmlkZW8tYWN0aXZlZCcpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLXZpZGVvLWluYWN0aXZlJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwoKICAgICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5KTsKICAgICAgfQogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBpbmNyZWFzZUZlZWRXaWR0aDogewogICAgICBjbjogJ+WKoOWuveW+ruWNmuWuveW6pnzkuLp7e3dpZHRofX3lg4/ntKAnLAogICAgICB0dzogJ+WKoOWvrOW+ruWNmuWvrOW6pnzngrp7e3dpZHRofX3lg4/ntKAnLAogICAgICBlbjogJ0luY3JlYXNlIHdpZHRoIG9mIGZlZWRzIHwgdG8ge3t3aWR0aH19cHgnLAogICAgfSwKICB9KTsKCiAgbGF5b3V0LmluY3JlYXNlRmVlZFdpZHRoID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9pbmNyZWFzZV93aWR0aCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uaW5jcmVhc2VGZWVkV2lkdGgsCiAgICByZWY6IHsKICAgICAgd2lkdGg6IHsKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIG1pbjogNjAwLAogICAgICAgIGluaXRpYWw6IDc1MCwKICAgICAgICBtYXg6IDEyODAsCiAgICAgICAgc3RlcDogMTAsCiAgICAgIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmlzRW5hYmxlZCgpID8gdGhpcy5yZWYud2lkdGguZ2V0Q29uZmlnKCkgOiA2MDA7CiAgICAgIGNzcy5hcHBlbmQoYAo6cm9vdCB7IC0teWF3Zi1mZWVkLXdpZHRoOiAke3dpZHRofXB4OyAtLXlhd2YtZXh0cmEtcGFkZGluZzogMHB4OyB9Ci5CX2luZGV4LCAuQl9kaXNjb3ZlciwgLkJfbWVzc2FnZSB7IC0teWF3Zi1sZWZ0LXdpZHRoOiAxNTBweDsgLS15YXdmLXJpZ2h0LXdpZHRoOiAyNTBweDsgfQouQl9wYWdlIHsgLS15YXdmLWxlZnQtd2lkdGg6IDBweDsgLS15YXdmLXJpZ2h0LXdpZHRoOiAzMjBweDsgfQouQl9pbmRleFt5YXdmLW1lcmdlLWxlZnRdLCAuQl9tZXNzYWdlW3lhd2YtbWVyZ2UtbGVmdF0geyAtLXlhd2YtbGVmdC13aWR0aDogMHB4OyAtLXlhd2YtZXh0cmEtcGFkZGluZzogMTBweDsgfQouQl9hcnRpY2FsIHsgLS15YXdmLWZlZWQtd2lkdGg6IDEwMDBweDsgLS15YXdmLWxlZnQtd2lkdGg6IDBweDsgLS15YXdmLXJpZ2h0LXdpZHRoOiAwcHg7IH0KCmh0bWwgLkJfaW5kZXggLldCX2ZyYW1lLApodG1sIC5CX21lc3NhZ2UgLldCX2ZyYW1lLApodG1sIC5CX2Rpc2NvdmVyIC5XQl9mcmFtZSwKaHRtbCAuQl9wYWdlIC5XQl9mcmFtZSwKaHRtbCAuQl9wYWdlIC5XQl9mcmFtZV9hIHsKICB3aWR0aDogY2FsYyh2YXIoLS15YXdmLWZlZWQtd2lkdGgpICsgY2FsYyh2YXIoLS15YXdmLWxlZnQtd2lkdGgpICsgdmFyKC0teWF3Zi1yaWdodC13aWR0aCkpKSAhaW1wb3J0YW50Owp9Cmh0bWwgLkJfaW5kZXggLldCX2ZyYW1lICNwbGNfbWFpbiwKaHRtbCAuQl9tZXNzYWdlIC5XQl9mcmFtZSAjcGxjX21haW4sCmh0bWwgLkJfZGlzY292ZXIgLldCX2ZyYW1lICNwbGNfbWFpbiwKaHRtbCAuQl9wYWdlIC5XQl9mcmFtZSAjcGxjX21haW4gewogIHdpZHRoOiBjYWxjKHZhcigtLXlhd2YtZmVlZC13aWR0aCkgKyB2YXIoLS15YXdmLXJpZ2h0LXdpZHRoKSkgIWltcG9ydGFudDsKfQpodG1sIC5CX2luZGV4IC5XQl9tYWluX2MsCmh0bWwgLkJfbWVzc2FnZSAuV0JfbWFpbl9jLApodG1sIC5CX3BhZ2UgLldCX2ZyYW1lX2MsCmh0bWwgLkJfZGlzY292ZXIgLldCX2ZyYW1lX2MgewogIHdpZHRoOiB2YXIoLS15YXdmLWZlZWQtd2lkdGgpICFpbXBvcnRhbnQ7Cn0KaHRtbCAuQl9wYWdlIC5XQl9mcmFtZV9jIHsKICBtYXJnaW4tcmlnaHQ6IDA7Cn0KCmh0bWwgLldCX2ZyYW1lX2MgfiAuV0JfZnJhbWVfYiB7CiAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgbWFyZ2luLXJpZ2h0OiAwOwp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMDA2cHgpIHsKLkJfaW5kZXgsIC5CX21lc3NhZ2UgeyAtLXlhd2YtcmlnaHQtd2lkdGg6IDEwcHg7IH0KfQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5MzlweCkgewouQl9wYWdlIHsgLS15YXdmLXJpZ2h0LXdpZHRoOiAwcHg7IH0KfQoKYm9keSAuV0JfdGFiX2EgLnRhYl9ib3ggeyBkaXNwbGF5OiBmbGV4OyB9CmJvZHkgLldCX3RhYl9hIC50YWJfYm94ID4gKiB7IGZsZXg6IDAgMCBhdXRvOyB9CmJvZHkgLldCX3RhYl9hIC50YWJfYm94ID4gLldfZnIgeyBvcmRlcjogMjsgfQpib2R5IC5XQl90YWJfYSAudGFiX2JveDo6YWZ0ZXIgeyBvcmRlcjogMTsgZmxleDogMSAwIDA7IGhlaWdodDogYXV0bzsgfQpib2R5IC5XQl90YWJfYSAudGFiX2JveF9hIC5mcl9ib3ggeyBmbGV4OiAxIDAgMDsgfQpib2R5IC5XQl90YWJfYSAudGFiX2JveF9hOjphZnRlciB7IGNvbnRlbnQ6IG5vbmU7IH0KYm9keSAuV0JfZmVlZF92MyAuV0JfZmFjZSAub3B0IHsgcmlnaHQ6IGNhbGMoMTMycHggLSB2YXIoLS15YXdmLWZlZWQtd2lkdGgpKTsgfQpib2R5IGEuV19nb3RvcC5XX2dvdG9wIHsgbWFyZ2luLWxlZnQ6IGNhbGMoY2FsYyhjYWxjKHZhcigtLXlhd2YtZmVlZC13aWR0aCkgKyB2YXIoLS15YXdmLWV4dHJhLXBhZGRpbmcpKSArIGNhbGModmFyKC0teWF3Zi1sZWZ0LXdpZHRoKSArIHZhcigtLXlhd2YtcmlnaHQtd2lkdGgpKSkgLyAyKTsgfQpib2R5IC5XQl90aW1lbGluZSB7IG1hcmdpbi1sZWZ0OiBjYWxjKGNhbGMoY2FsYygyMHB4ICsgdmFyKC0teWF3Zi1mZWVkLXdpZHRoKSkgKyBjYWxjKHZhcigtLXlhd2YtbGVmdC13aWR0aCkgKyB2YXIoLS15YXdmLXJpZ2h0LXdpZHRoKSkpIC8gMik7IH0KaHRtbCAuV0JfYXJ0aWNhbCAuV0JfZmVlZF9yZXBlYXQgLldCX2ZlZWRfcHVibGlzaCwgaHRtbCAuV0JfYXJ0aWNhbCAuV0JfZmVlZF9yZXBlYXQgLnJlcGVhdF9saXN0IHsgcGFkZGluZzogMCAyMHB4OyB9Cmh0bWwgLldCX2FydGljYWwgLldCX2ZlZWRfcmVwZWF0IC5XX3RpcHMsIGh0bWwgLldCX2FydGljYWwgLldCX2ZlZWRfcmVwZWF0IC5XQl9taW5pdGFiIHsgbWFyZ2luOiAwIDE2cHggMTBweDsgfQpgKTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgcmVvcmRlckZlZWRCdXR0b246IHsKICAgICAgY246ICfph43mlrDmjpLliJflvq7ljZrmjqfliLbmjInpkq4ge3tpfX18fHt7MH19fHt7MX19fHt7Mn19fHt7M319fHt7NH19JywKICAgICAgdHc6ICfph43mlrDmjpLliJflvq7ljZrmjqfliLbmjInpiJUge3tpfX18fHt7MH19fHt7MX19fHt7Mn19fHt7M319fHt7NH19JywKICAgICAgZW46ICdSZW9yZGVyIGJ1dHRvbnMgb2YgZmVlZHMge3tpfX18fHt7MH19fHt7MX19fHt7Mn19fHt7M319fHt7NH19JywKICAgIH0sCiAgICByZW9yZGVyRmVlZEJ1dHRvbkRldGFpbDogewogICAgICBjbjogJ+atpOWkluaCqOi/mOWPr+S7peWcqOeJiOmdoua4heeQhumAiemhueWNoe+8jOaIluatpOWkhO+8jOWLvumAieS7pemakOiXj+KAnFtbY2xlYW5fZmVlZF9wb3BdXeKAneKAnFtbY2xlYW5fZmVlZF9mYXZvcml0ZV1d4oCd4oCcW1tjbGVhbl9mZWVkX2ZvcndhcmRdXeKAneKAnFtbY2xlYW5fZmVlZF9saWtlXV3igJ3jgIInLAogICAgfSwKICAgIHJlb3JkZXJGZWVkQnV0dG9uUG9wOiB7IGNuOiAn5o6o5bm/JywgdHc6ICfmjqjlu6MnLCBlbjogJyBQcm9tb3RlJyB9LAogICAgcmVvcmRlckZlZWRCdXR0b25GYXZvcml0ZTogeyBjbjogJ+aUtuiXjycsIHR3OiAn5pS26JePJywgZW46ICdGYXZvdXJpdGUnIH0sCiAgICByZW9yZGVyRmVlZEJ1dHRvbkZvcndhcmQ6IHsgY246ICfovazlj5EnLCB0dzogJ+i9ieeZvCcsIGVuOiAnRm9yd2FyZCcgfSwKICAgIHJlb3JkZXJGZWVkQnV0dG9uQ29tbWVudDogeyBjbjogJ+ivhOiuuicsIHR3OiAn6KmV6KuWJywgZW46ICdDb21tZW50JyB9LAogICAgcmVvcmRlckZlZWRCdXR0b25MaWtlOiB7IGNuOiAn6LWeJywgdHc6ICforponLCBlbjogJ0xpa2UnIH0sCiAgfSk7CgogIGNvbnN0IHJlb3JkZXJSZWZHcm91cCA9IHNlbGVjdCA9PiB7CiAgICBjb25zdCByZWZzID0gW107CiAgICByZWZzLnNwbGljZSgwLCAwLCAuLi5zZWxlY3QubWFwKGJ1dHRvbiA9PiAoewogICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgaW5pdGlhbDogYnV0dG9uLnZhbHVlLAogICAgICBzZWxlY3QsCiAgICAgIHJlZnMsCiAgICB9KSkpOwogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIC4uLnJlZnMubWFwKChyZWYsIGluZGV4KSA9PiAoeyBbaW5kZXhdOiByZWYgfSkpKTsKICB9OwoKICBjb25zdCBrZWVwT3JkZXJJdGVtc0RpZmYgPSBpdGVtID0+IHsKICAgIGl0ZW0uYWRkQ29uZmlnTGlzdGVuZXIoKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgPT4gewogICAgICBvbGRWYWx1ZSA9IG9sZFZhbHVlIHx8IGl0ZW0uaW5pdGlhbDsKICAgICAgY29uc3QgdGhhdCA9IGl0ZW0ucmVmcy5maW5kKHRoYXQgPT4gdGhhdCAhPT0gaXRlbSAmJiB0aGF0LmdldENvbmZpZygpID09PSBuZXdWYWx1ZSk7CiAgICAgIGlmICh0aGF0KSB0aGF0LnNldENvbmZpZyhvbGRWYWx1ZSk7CiAgICB9KTsKICB9OwoKICBsYXlvdXQucmVvcmRlckZlZWRCdXR0b24gPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZlZWRfYnV0dG9uX29yZGVyJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5yZW9yZGVyRmVlZEJ1dHRvbiwKICAgIHJlZjogT2JqZWN0LmFzc2lnbih7fSwgcmVvcmRlclJlZkdyb3VwKFsKICAgICAgeyB2YWx1ZTogJ3BvcCcsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckZlZWRCdXR0b25Qb3AgfSwKICAgICAgeyB2YWx1ZTogJ2Zhdm9yaXRlJywgdGV4dDogKCkgPT4gaTE4bi5yZW9yZGVyRmVlZEJ1dHRvbkZhdm9yaXRlIH0sCiAgICAgIHsgdmFsdWU6ICdmb3J3YXJkJywgdGV4dDogKCkgPT4gaTE4bi5yZW9yZGVyRmVlZEJ1dHRvbkZvcndhcmQgfSwKICAgICAgeyB2YWx1ZTogJ2NvbW1lbnQnLCB0ZXh0OiAoKSA9PiBpMThuLnJlb3JkZXJGZWVkQnV0dG9uQ29tbWVudCB9LAogICAgICB7IHZhbHVlOiAnbGlrZScsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckZlZWRCdXR0b25MaWtlIH0sCiAgICBdKSwgewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVvcmRlckZlZWRCdXR0b25EZXRhaWwgfSwKICAgIH0pLAogICAgaW5pdCgpIHsKICAgICAgWzAsIDEsIDIsIDMsIDRdLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBrZWVwT3JkZXJJdGVtc0RpZmYodGhpcy5yZWZba2V5XSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFpbml0KCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgY3NzLmFwcGVuZChgCi5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2Z1bmMgLldCX2hhbmRsZSBsaTpsYXN0LWNoaWxkIC5saW5lIHsgYm9yZGVyLXJpZ2h0LXdpZHRoOiAxcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZnVuYyAuV0JfaGFuZGxlIHVsIHsgb3ZlcmZsb3c6IGhpZGRlbjsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mdW5jIC5XQl9oYW5kbGUgdWw6OmFmdGVyIHsgIGNvbnRlbnQ6ICIgIjsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1sZWZ0OiAtMXB4OyBmbGV4OiAwIDAgMDsgb3JkZXI6IDEwOyB9Ci5XQl9oYW5kbGUgdWwgbGlbeWF3Zi1oYW5kbGUtdHlwZT0iZmxfcmVhZCJdIHsgb3JkZXI6IDA7IH0KJHtbMCwgMSwgMiwgMywgNF0ubWFwKGluZGV4ID0+IGAKLldCX2hhbmRsZSB1bCBsaVt5YXdmLWhhbmRsZS10eXBlPSJmbF8ke3RoaXMucmVmW2luZGV4XS5nZXRDb25maWcoKX0iXSB7IG9yZGVyOiAke2luZGV4ICsgMX07IH0KYCkuam9pbignJyl9CmApOwogICAgICB9IGVsc2UgewogICAgICAgIFswLCAxLCAyLCAzLCA0XS5mb3JFYWNoKGluZGV4ID0+IHsKICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMucmVmW2luZGV4XS5nZXRDb25maWcoKTsKICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gewogICAgICAgICAgICBwb3A6ICcnLAogICAgICAgICAgICBmYXZvcml0ZTogJycsCiAgICAgICAgICAgIGZvcndhcmQ6ICcueWF3Zi1mZWVkLXRvb2xiYXItcmV0d2VldCcsCiAgICAgICAgICAgIGNvbW1lbnQ6ICcueWF3Zi1mZWVkLXRvb2xiYXItY29tbWVudCcsCiAgICAgICAgICAgIGxpa2U6ICcueWF3Zi1mZWVkLXRvb2xiYXItbGlrZScsCiAgICAgICAgICB9W2NvbmZpZ107CiAgICAgICAgICBpZiAoc2VsZWN0b3IpIGNzcy5hcHBlbmQoYCR7c2VsZWN0b3J9IHsgb3JkZXI6ICR7aW5kZXh9IH1gKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICByZW9yZGVyQ29tbWVudEJ1dHRvbjogewogICAgICBjbjogJ+mHjeaWsOaOkuWIl+ivhOiuuuaOp+WItuaMiemSrnx8e3swfX18e3sxfX18e3syfX18e3szfX18e3s0fX0nLAogICAgICB0dzogJ+mHjeaWsOaOkuWIl+ipleirluW+ruWNmuaOp+WItuaMiemIlXx8e3swfX18e3sxfX18e3syfX18e3szfX18e3s0fX0nLAogICAgICBlbjogJ1Jlb3JkZXIgYnV0dG9ucyBvZiBjb21tZW50c3x8e3swfX18e3sxfX18e3syfX18e3szfX18e3s0fX0nLAogICAgfSwKICAgIHJlb3JkZXJDb21tZW50QnV0dG9uRGV0YWlsOiB7CiAgICAgIGNuOiAn5q2k5aSW5oKo6L+Y5Y+v5Lul5Zyo54mI6Z2i5riF55CG6YCJ6aG55Y2h77yM5oiW5q2k5aSE77yM5Yu+6YCJ5Lul6ZqQ6JeP4oCcW1tjbGVhbl9mZWVkX2xpa2VfY29tbWVudF1d4oCd44CCJywKICAgIH0sCiAgICByZW9yZGVyQ29tbWVudEJ1dHRvblJlcG9ydDogeyBjbjogJ+S4vuaKpScsIGhrOiAn6IiJ5aCxJywgdHc6ICfmqqLoiIknLCBlbjogJ1JlcG9ydCcgfSwKICAgIHJlb3JkZXJDb21tZW50QnV0dG9uRGVsZXRlOiB7IGNuOiAn5Yig6ZmkJywgdHc6ICfliKrpmaQnLCBlbjogJ0RlbGV0ZScgfSwKICAgIHJlb3JkZXJDb21tZW50QnV0dG9uQ29udmVyc2l0aW9uOiB7IGNuOiAn5p+l55yL5a+56K+dJywgdHc6ICfmn6XnnIvlsI3oqbEnLCBlbjogJ1ZpZXcgQ29udmVyc2F0aW9uJyB9LAogICAgcmVvcmRlckNvbW1lbnRCdXR0b25SZXBseTogeyBjbjogJ+WbnuWkjScsIHR3OiAn5Zue6KaGJywgZW46ICdSZXBseScgfSwKICAgIHJlb3JkZXJDb21tZW50QnV0dG9uTGlrZTogeyBjbjogJ+i1nicsIHR3OiAn6K6aJywgZW46ICdMaWtlJyB9LAogIH0pOwoKICBsYXlvdXQucmVvcmRlckNvbW1lbnRCdXR0b24gPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX2J1dHRvbl9vcmRlcl9jb21tZW50JywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5yZW9yZGVyQ29tbWVudEJ1dHRvbiwKICAgIHJlZjogT2JqZWN0LmFzc2lnbih7fSwgcmVvcmRlclJlZkdyb3VwKFsKICAgICAgeyB2YWx1ZTogJ3JlcG9ydCcsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckNvbW1lbnRCdXR0b25SZXBvcnQgfSwKICAgICAgeyB2YWx1ZTogJ2RlbGV0ZScsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckNvbW1lbnRCdXR0b25EZWxldGUgfSwKICAgICAgeyB2YWx1ZTogJ2NvbnZlcnNpdGlvbicsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckNvbW1lbnRCdXR0b25Db252ZXJzaXRpb24gfSwKICAgICAgeyB2YWx1ZTogJ3JlcGx5JywgdGV4dDogKCkgPT4gaTE4bi5yZW9yZGVyQ29tbWVudEJ1dHRvblJlcGx5IH0sCiAgICAgIHsgdmFsdWU6ICdsaWtlJywgdGV4dDogKCkgPT4gaTE4bi5yZW9yZGVyQ29tbWVudEJ1dHRvbkxpa2UgfSwKICAgIF0pKSwKICAgIGluaXQoKSB7CiAgICAgIFswLCAxLCAyLCAzLCA0XS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAga2VlcE9yZGVySXRlbXNEaWZmKHRoaXMucmVmW2tleV0pOwogICAgICB9KTsKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY3NzLmFwcGVuZChbMCwgMSwgMiwgMywgNF0ubWFwKGluZGV4ID0+IGAKLldCX2hhbmRsZSB1bCBsaVt5YXdmLWNvbW1lbnQtaGFuZGxlLXR5cGU9IiR7dGhpcy5yZWZbaW5kZXhdLmdldENvbmZpZygpfSJdIHsgb3JkZXI6ICR7aW5kZXh9OyB9CmApLmpvaW4oJycpKTsKICAgIH0sCiAgfSk7CgoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZlZWRzL2NvbnRlbnQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IGNvbmZpZyA9IHlhd2YuY29uZmlnOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGZlZWRzID0geWF3Zi5ydWxlcy5mZWVkczsKICBjb25zdCBsYXlvdXQgPSB5YXdmLnJ1bGVzLmxheW91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKICBjb25zdCB1aSA9IHV0aWwudWk7CgogIGNvbnN0IGNvbnRlbnQgPSBmZWVkcy5jb250ZW50ID0ge307CgogIGkxOG4uZmVlZENvbnRlbnRHcm91cFRpdGxlID0gewogICAgY246ICflhoXlrrknLAogICAgdHc6ICflhaflrrknLAogICAgZW46ICdDb250ZW50JywKICB9OwoKICBjb250ZW50LmNvbnRlbnQgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogZmVlZHMuZmVlZHMsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkQ29udGVudEdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uc3R5bGVUZXh0Rm9udFNpemUgPSB7CiAgICBjbjogJ+WinuWkp+W+ruWNmuato+aWh+Wtl+WPt+S4unzljp/lpKflsI/nmoR7e3JhdGlvfX3vvIhWN+acgOWkpzIwMCXvvIknLAogICAgdHc6ICfliqDlpKflvq7ljZrlhafmloflrZfpq5Tngrp85Y6f5aSn5bCP55qEe3tyYXRpb31977yIVjfmnIDlpKcyMDAl77yJJywKICAgIGVuOiAnSW5jcmVhc2UgZm9udCBzaXplIGZvciB3ZWlibyBjb250ZW50IHwgdG8ge3tyYXRpb319IChWNyB1cCB0byAyMDAlKScsCiAgfTsKCiAgY29udGVudC5mb250U2l6ZSA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnZmVlZF9mb250X3NpemUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc3R5bGVUZXh0Rm9udFNpemUsCiAgICByZWY6IHsKICAgICAgcmF0aW86IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICcxMjAnLCB0ZXh0OiAnMTIwJScsIHN0eWxlOiBgZm9udC1zaXplOiAxNnB4O2AgfSwKICAgICAgICAgIHsgdmFsdWU6ICcxNTAnLCB0ZXh0OiAnMTUwJScsIHN0eWxlOiBgZm9udC1zaXplOiAyMXB4O2AgfSwKICAgICAgICAgIHsgdmFsdWU6ICcyMDAnLCB0ZXh0OiAnMjAwJScsIHN0eWxlOiBgZm9udC1zaXplOiAyOHB4O2AgfSwKICAgICAgICAgIHsgdmFsdWU6ICczMDAnLCB0ZXh0OiAnMzAwJScsIHN0eWxlOiBgZm9udC1zaXplOiA0MnB4O2AgfSwKICAgICAgICBdLAogICAgICB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgICAgMTIwOiB7IGZzOiAxNiwgbGg6IDI2LCBmczI6IDE0LCBsaDI6IDI0LCBoOiAyMCwgaDI6IDE4LCBmczM6IDEyIH0sCiAgICAgICAgICAxNTA6IHsgZnM6IDIxLCBsaDogMzIsIGZzMjogMTgsIGxoMjogMjcsIGg6IDI1LCBoMjogMjMsIGZzMzogMTQgfSwKICAgICAgICAgIDIwMDogeyBmczogMjgsIGxoOiA0MiwgZnMyOiAyNCwgbGgyOiAzNiwgaDogMzMsIGgyOiAyOSwgZnMzOiAxOSB9LAogICAgICAgICAgMzAwOiB7IGZzOiA0MiwgbGg6IDY0LCBmczI6IDM2LCBsaDI6IDU0LCBoOiA1MCwgaDI6IDQ2LCBmczM6IDI4IH0sCiAgICAgICAgfVt0aGlzLnJlZi5yYXRpby5nZXRDb25maWcoKV07CiAgICAgICAgY29uc3QgeyBmcywgbGgsIGZzMiwgbGgyLCBoLCBoMiwgZnMzIH0gPSBjb25maWc7CiAgICAgICAgY3NzLmFwcGVuZChgCi5XQl9pbmZvLCAuV0JfdGV4dCwgLldCX2luZm8gKiwgLldCX3RleHQgKiB7IGZvbnQtc2l6ZTogJHtmc31weCAhaW1wb3J0YW50OyBsaW5lLWhlaWdodDogJHtsaH1weCAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkX2V4cGFuZCAuV0JfaW5mbyAqLCAuV0JfZmVlZF9leHBhbmQgLldCX3RleHQgKiwgLldCX2ZlZWRfZXhwYW5kIC5XQl9pbmZvLCAuV0JfZmVlZF9leHBhbmQgLldCX3RleHQgeyBmb250LXNpemU6ICR7ZnMyfXB4ICFpbXBvcnRhbnQ7IGxpbmUtaGVpZ2h0OiAke2xoMn1weCAhaW1wb3J0YW50OyB9Ci5XQl90ZXh0IC5XX2J0bl9iIHsgaGVpZ2h0OiAke2h9cHggIWltcG9ydGFudDsgfQouV0JfdGV4dCAuV19idG5fYiwgLldCX3RleHQgLldfYnRuX2IgKiB7IGxpbmUtaGVpZ2h0OiAke2h9cHggIWltcG9ydGFudDsgZm9udC1zaXplOiAke2ZzMn1weCAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkX2V4cGFuZCAuV0JfdGV4dCAuV19idG5fYiwgLldCX3RleHQgLldfYnRuX2MsIC5XQl9lbXB0eSAuV19idG5fYyB7IGhlaWdodDogJHtoMn1weCAhaW1wb3J0YW50OyBsaW5lLWhlaWdodDogJHtoMn1weCAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkX2V4cGFuZCAuV0JfdGV4dCAuV19idG5fYiwgLldCX2ZlZWRfZXhwYW5kIC5XQl90ZXh0IC5XX2J0bl9iICosIC5XQl90ZXh0IC5XX2J0bl9jICosIC5XQl9lbXB0eSAuV19idG5fYyAqIHsgbGluZS1oZWlnaHQ6ICR7aDJ9cHggIWltcG9ydGFudDsgZm9udC1zaXplOiAke2ZzM31weCAhaW1wb3J0YW50OyB9Ci5XX2ljb25fZmVlZHBpbiwgLldfaWNvbl9mZWVkaG90IHsgaGVpZ2h0OiAxNnB4ICFpbXBvcnRhbnQ7IGxpbmUtaGVpZ2h0OiAxNnB4ICFpbXBvcnRhbnQ7IH0KLldCX2luZm8geyBtYXJnaW4tYm90dG9tOiAycHggIWltcG9ydGFudDsgcGFkZGluZy10b3A6IDAgIWltcG9ydGFudDsgbGluZS1oZWlnaHQ6ICR7ZnMgPD0gMjggPyAyOCA6IDUwfXB4ICFpbXBvcnRhbnQ7IH0KLnlhd2YtV0JfdGV4dF9zaXplX21haW4sIC55YXdmLVdCX3RleHRfc2l6ZSB7IGZvbnQtc2l6ZTogJHtmc31weDsgbGluZS1oZWlnaHQ6ICR7bGh9cHg7IH0KLnlhd2YtV0JfdGV4dF9zaXplX2V4cGFuZCwgLldCX2ZlZWRfZXhwYW5kIC55YXdmLVdCX3RleHRfc2l6ZSB7IGZvbnQtc2l6ZTogJHtmczJ9cHg7IH0KYCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgICAgMTIwOiB7IGZzOiAxNiwgYWxoOiAyMCwgbGg6IDI2LCBmczI6IDE0LCBsaDI6IDI0IH0sCiAgICAgICAgICAxNTA6IHsgZnM6IDIxLCBhbGg6IDI0LCBsaDogMzIsIGZzMjogMTgsIGxoMjogMjcgfSwKICAgICAgICAgIDIwMDogeyBmczogMjgsIGFsaDogMzIsIGxoOiA0MiwgZnMyOiAyNCwgbGgyOiAzNiB9LAogICAgICAgICAgMzAwOiB7IGZzOiAyOCwgYWxoOiAzMiwgbGg6IDQyLCBmczI6IDI0LCBsaDI6IDM2IH0sCiAgICAgICAgfVt0aGlzLnJlZi5yYXRpby5nZXRDb25maWcoKV07CiAgICAgICAgY29uc3QgeyBmcywgbGgsIGZzMiwgbGgyIH0gPSBjb25maWc7CiAgICAgICAgY3NzLmFwcGVuZChgCi55YXdmLWZlZWQtYXV0aG9yLWxpbmUgeyBtYXJnaW4tYm90dG9tOiAwcHggIWltcG9ydGFudDsgZm9udC1zaXplOiAke2ZzfXB4ICFpbXBvcnRhbnQ7IGxpbmUtaGVpZ2h0OiAke2xofXB4ICFpbXBvcnRhbnQ7IH0KLnlhd2YtZmVlZC1hdXRob3ItYm94IHsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuICFpbXBvcnRhbnQ7IH0KLnlhd2YtZmVlZC1hdXRob3ItYm94OjphZnRlciB7IGNvbnRlbnQ6ICIgIjsgbWFyZ2luLWJvdHRvbTogNHB4IH0KLnlhd2YtZmVlZC1kZXRhaWwtY29udGVudCB7IGZvbnQtc2l6ZTogJHtmc31weCAhaW1wb3J0YW50OyBsaW5lLWhlaWdodDogJHtsaH1weCAhaW1wb3J0YW50OyB9Ci55YXdmLWZlZWQtb3JpZ2luYWwgc3BhbiwgLnlhd2YtZmVlZC1kZXRhaWwtY29udGVudC1yZXR3ZWV0LCAueWF3Zi1mZWVkLWNvbW1lbnQtdGV4dCwgLnlhd2YtZmVlZC1jb21tZW50LW1vcmUtdGV4dCwgLnlhd2YtZmVlZC1yZXBvc3QtdGV4dCwgLnlhd2YtZmVlZC1kZXRhaWwtY29udGVudC1yZXR3ZWV0LXNpemUgeyBmb250LXNpemU6ICR7ZnMyfXB4ICFpbXBvcnRhbnQ7IGxpbmUtaGVpZ2h0OiAke2xoMn1weCAhaW1wb3J0YW50OyB9Ci55YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQgaW1nLCAueWF3Zi1mZWVkLWRldGFpbC1jb250ZW50IC5pY29uLWxpbmsgeyBoZWlnaHQ6ICR7ZnN9cHggIWltcG9ydGFudDsgd2lkdGg6ICR7ZnN9cHggIWltcG9ydGFudDsgfQoueWF3Zi1mZWVkLWRldGFpbC1jb250ZW50LXJldHdlZXQgaW1nLCAueWF3Zi1mZWVkLWRldGFpbC1jb250ZW50LXJldHdlZXQgLmljb24tbGluayB7IGhlaWdodDogJHtmczJ9cHggIWltcG9ydGFudDsgd2lkdGg6ICR7ZnMyfXB4ICFpbXBvcnRhbnQ7IH0KCi53YnB2LWJpZy1wbGF5LWJ1dHRvbiB7IHotaW5kZXg6IDk5OyB9CmApOwogICAgICB9CiAgICB9LAogIH0pOwoKICBpMThuLmF1dG9FeHBhbmRMb25nRmVlZHMgPSB7CiAgICBjbjogJ+iHquWKqOWxleW8gHzkuI3otoXov4d7e2NvdW50fX3lrZfnmoTlvq7ljZp877yI5q+P5Liq5o2i6KGM56ym6K6he3ticn195a2X77yJJywKICAgIHR3OiAn6Ieq5YuV5bGV6ZaLfOS4jei2hemBjnt7Y291bnR9feWAi+Wtl+eahOW+ruWNmnzvvIjmr4/lgIvmj5vooYznrKboqIh7e2JyfX3lrZfvvIknLAogICAgZW46ICdBdXRvbWF0aWNhbGx5IHVuZm9sZCB3ZWlibyB8IHdpdGhpbiB7e2NvdW50fX0gY2hhcmFjdGVycyB8fCAoY291bnQgZWFjaCBsaW5lIGJyZWFrIGFzIHt7YnJ9fSBjaGFyYWN0ZXJzKScsCiAgfTsKCiAgY29udGVudC5leHBhbmRMb25nID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmZWVkX2xvbmdfZXhwYW5kJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmF1dG9FeHBhbmRMb25nRmVlZHMsCiAgICByZWY6IHsKICAgICAgY291bnQ6IHsgdHlwZTogJ3JhbmdlJywgbWluOiAxNDAsIG1heDogMjAwMCwgc3RlcDogMTAsIGluaXRpYWw6IDIwMCB9LAogICAgICBicjogeyB0eXBlOiAncmFuZ2UnLCBtaW46IDEsIG1heDogNjAsIHN0ZXA6IDEsIGluaXRpYWw6IDMwIH0sCiAgICB9LAogICAgLy8gVjYg6L+Z5Liq6K6+572u6aG555qE55u45YWz6YC76L6R5a6e546w5ZyoIGNvbnRlbnQvcnVsZS9maWx0ZXIvY29tbW9uL2xvbmcuanMKICAgIC8vIFY3IOWunueOsOWmguS4iwogICAgaW5pdCgpIHsKICAgICAgY29uc3QgZXhwYW5kID0gdGhpcy5pc0VuYWJsZWQoKTsKICAgICAgY29uc3QgY291bnQgPSB0aGlzLnJlZi5jb3VudC5nZXRDb25maWcoKTsKICAgICAgY29uc3QgYnIgPSB0aGlzLnJlZi5ici5nZXRDb25maWcoKTsKICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXksIGV4cGFuZCwgeyBjb3VudCwgYnIgfSkgewogICAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgICBjb25zdCBleHBhbmRMb25nVGV4dENvbnRlbnQgPSBmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIHZtLiRzZXQodm0uZGF0YSwgJ3RleHRfZXhwYW5kJywgdm0uc2hvd1RleHQpOwogICAgICAgICAgdm0uJGh0dHAgPSBPYmplY3QuY3JlYXRlKHZtLiRodHRwKTsKICAgICAgICAgIHZtLiRodHRwLmdldCA9IChmdW5jdGlvbiAoZ2V0KSB7CiAgICAgICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiAoLi4uYXJncykgewogICAgICAgICAgICAgIGlmIChhcmdzWzBdID09PSAnL2FqYXgvc3RhdHVzZXMvbG9uZ3RleHQnICYmIHZtLmRhdGEubG9uZ1RleHRDb250ZW50X3JhdykgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIG9rOiAxLAogICAgICAgICAgICAgICAgICAgIGh0dHBfY29kZTogMjAwLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgIGxvbmdUZXh0Q29udGVudDogdm0uZGF0YS5sb25nVGV4dENvbnRlbnRfcmF3LAogICAgICAgICAgICAgICAgICAgICAgdXJsX3N0cnVjdDogdm0uZGF0YS51cmxfc3RydWN0ID8/IFtdLAogICAgICAgICAgICAgICAgICAgICAgdG9waWNfc3RydWN0OiB2bS5kYXRhLnRvcGljX3N0cnVjdCA/PyBbXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGdldC5jYWxsKHRoaXMsIC4uLmFyZ3MpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0odm0uJGh0dHAuZ2V0KSk7CiAgICAgICAgICBjb25zdCB0ZXh0ID0gdm0uZGF0YS5sb25nVGV4dENvbnRlbnRfcmF3OwogICAgICAgICAgaWYgKCF0ZXh0KSByZXR1cm47CiAgICAgICAgICBjb25zdCBsZW4gPSBNYXRoLmNlaWwodGV4dC5sZW5ndGggLSAodGV4dC5tYXRjaCgvW1x1MDAyMC1cdTAwZmVdL2cpIHx8IFtdKS5sZW5ndGggLyAyKTsKICAgICAgICAgIGNvbnN0IHJlbUxlbiA9IGxlbiArICh0ZXh0LnNwbGl0KCdcbicpLmxlbmd0aCAtIDEpICogKGJyIC0gMSk7CiAgICAgICAgICBpZiAoZXhwYW5kICYmIHJlbUxlbiA8IGNvdW50KSB7CiAgICAgICAgICAgIHZtLmhhbmRsZUV4cGFuZCgpOwogICAgICAgICAgICBjb25zdCB1bndhdGNoID0gdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuZGF0YS5sb25nVGV4dENvbnRlbnQ7IH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoIXZtLmRhdGEubG9uZ1RleHRDb250ZW50KSByZXR1cm47CiAgICAgICAgICAgICAgdW53YXRjaCgpOwogICAgICAgICAgICAgIHZtLnNob3dUZXh0ID0gdm0uZGF0YS5sb25nVGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgdm0uJGVtaXQoJ3VwZGF0ZVRleHQnLCB2bS5zaG93VGV4dCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3QgZXhwYW5kID0gJzxzcGFuIGNsYXNzPSJleHBhbmQiPuWxleW8gDwvc3Bhbj4nOwogICAgICAgICAgICBjb25zdCB3b3JkVGlwID0gYOWxleW8gO+8iOe6piAke01hdGguY2VpbChsZW4gLyAxMCkgKiAxMH0g5a2X77yJYDsKICAgICAgICAgICAgdm0uZGF0YS50ZXh0X2V4cGFuZCA9IHZtLmRhdGEudGV4dF9leHBhbmQucmVwbGFjZShleHBhbmQsICgpID0+IGV4cGFuZC5yZXBsYWNlKCflsZXlvIAnLCB3b3JkVGlwKSk7CiAgICAgICAgICAgIHZtLnNob3dUZXh0ID0gdm0uZGF0YS50ZXh0X2V4cGFuZDsKICAgICAgICAgICAgdm0uJGVtaXQoJ3VwZGF0ZVRleHQnLCB2bS5zaG93VGV4dCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdmZWVkLWRldGFpbCcsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgY29uc3QgbmVlZExvYWRMb25nID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuaXNMb25nVGV4dCkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBpZiAodGhpcy5kYXRhLl95YXdmX0xvbmdUZXh0Q29udGVudExvYWRpbmcgIT09IGZhbHNlKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEubG9uZ1RleHRDb250ZW50KSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuX3lhd2ZfTG9uZ1RleHRDb250ZW50QXV0b0V4cGFuZCkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1pZDsKICAgICAgICAgIH07CiAgICAgICAgICB2bS4kd2F0Y2gobmVlZExvYWRMb25nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghbmVlZExvYWRMb25nLmNhbGwodm0pKSByZXR1cm47CiAgICAgICAgICAgIHZtLiRzZXQodm0uZGF0YSwgJ195YXdmX0xvbmdUZXh0Q29udGVudEF1dG9FeHBhbmQnLCB0cnVlKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBleHBhbmRMb25nVGV4dENvbnRlbnQodm0pOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgeyBpbW1lZGlhdGU6IHRydWUgfSk7CiAgICAgICAgfSk7CgogICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBleHBhbmQsIHsgY291bnQsIGJyIH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5mZWVkQ29udGVudExpbmVCcmVhayA9IHsKICAgIGNuOiAn5bCG5b6u5Y2a5Lit55qE5o2i6KGM5pi+56S65Li6fHt7dGV4dH19JywKICAgIHR3OiAn5bCH5b6u5Y2a5Lit55qE5o+b6KGM6aGv56S654K6fHt7dGV4dH19JywKICAgIGVuOiAnU2hvdyBsaW5lIGJyZWFrcyBhcyBjaGFyYWN0ZXIgfCAge3t0ZXh0fX0nLAogIH07CgogIGNvbnRlbnQuZmVlZENvbnRlbnRMaW5lQnJlYWsgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX2NvbnRlbnRfbGluZV9icmVhaycsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkQ29udGVudExpbmVCcmVhaywKICAgIHJlZjogewogICAgICB0ZXh0OiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgaW5pdGlhbDogJ+KPjicsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnICcsIHRleHQ6ICcgJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ+KkticsIHRleHQ6ICfipLYnIH0sCiAgICAgICAgICB7IHZhbHVlOiAn4oa1JywgdGV4dDogJ+KGtScgfSwKICAgICAgICAgIHsgdmFsdWU6ICfij44nLCB0ZXh0OiAn4o+OJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ+KGsicsIHRleHQ6ICfihrInIH0sCiAgICAgICAgICB7IHZhbHVlOiAn4oapJywgdGV4dDogJ+KGqScgfSwKICAgICAgICBdLAogICAgICB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGZlZWRDb250ZW50TGluZUJyZWFrKCkgewogICAgICAgIGNvbnN0IGJyTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLldCX3RleHQgYnInKSk7CiAgICAgICAgYnJMaXN0LmZvckVhY2goYnIgPT4gewogICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICBwbGFjZWhvbGRlci5jbGFzc05hbWUgPSAneWF3Zi1saW5lYnJlYWsgU190eHQyJzsKICAgICAgICAgIGJyLnJlcGxhY2VXaXRoKHBsYWNlaG9sZGVyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGNvbnN0IHRleHQgPSB0aGlzLnJlZi50ZXh0LmdldENvbmZpZygpOwogICAgICB1dGlsLmNzcy5hZGQoJy55YXdmLWxpbmVicmVhazo6YmVmb3JlIHsgY29udGVudDogIicgKyB0ZXh0ICsgJyIgfScpOwogICAgfSwKICB9KTsKCiAgaTE4bi5zaG93TGlua1VybCA9IHsKICAgIGNuOiAn5bCG5b6u5Y2a5Lit55qE572R6aG16ZO+5o6l5pu/5o2i5Li655+t572R5Z2AJywKICAgIHR3OiAn5bCH5b6u5Y2a5Lit55qE572R6aG16ZO+5o6l5pu/5o+b54K655+t57ay5Z2AJywKICAgIGVuOiAnUmVwbGFjZSDnvZHpobXpk77mjqUgaW4gV2VpYm8gYnkgc2hvcnRlbmVkIFVSTCcsCiAgfTsKCiAgY29udGVudC5zaG93TGlua1VybCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfbGlua191c2VfdXJsJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dMaW5rVXJsLAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgY29uc3Qgc2hvd0xpbmtVcmwgPSBmdW5jdGlvbiBzaG93TGlua1VybCgpIHsKICAgICAgICBjb25zdCBpY29uID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZmVlZF90eXBlIGE6bm90KFt5YXdmLWxpbmstdHlwZV0pID4gLldfZmljb246Zmlyc3QtY2hpbGQnKSk7CiAgICAgICAgaWNvbi5mb3JFYWNoKGkgPT4geyBpLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCd5YXdmLWxpbmstdHlwZScsIGkudGV4dENvbnRlbnQudHJpbSgpKTsgfSk7CiAgICAgICAgaWYgKCFjb25maWcpIHJldHVybjsKICAgICAgICBjb25zdCBsaW5rcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLldCX2ZlZWRfdHlwZSBhW3lhd2YtbGluay10eXBlPSJPIl1bdGl0bGU9Iue9kemhtemTvuaOpSJdOm5vdChbeWF3Zi1saW5rLWV4cGFuZF0pJykpOwogICAgICAgIGxpbmtzLmZvckVhY2gobGluayA9PiB7CiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgneWF3Zi1saW5rLWV4cGFuZCcsICcnKTsKICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBsaW5rLmhyZWY7CiAgICAgICAgICBsaW5rLmNsYXNzTmFtZSA9ICd5YXdmLWxpbmsnOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBvYnNlcnZlci5kb20uYWRkKHNob3dMaW5rVXJsKTsKICAgIH0sCiAgfSk7CgogIGkxOG4udXNlVGV4dEVtb2ppID0gewogICAgY246ICflsIblvq7ljZrkuK3lm77niYfooajnpLrnmoQgVW5pY29kZSDooajmg4XnrKblj7fmm7/mjaLkuLrmlofmnKwnLAogICAgdHc6ICflsIflvq7ljZrkuK3lnJbniYfooajnpLrnmoQgVW5pY29kZSBFbW9qaSDmm7/mj5vngrrmlofmnKwnLAogICAgZW46ICdVc2UgdGV4dCBmb3IgdW5pY29kZSBlbW9qaSBpbnN0ZWFkIG9mIGltYWdlJywKICB9OwoKICBjb25zdCBzb2Z0YmFua0Vtb2ppTG9va3VwVGFibGUgPSB7IDE6IDEyODEwMiwgMjogMTI4MTAzLCAzOiAxMjgxMzksIDQ6IDEyODEwNCwgNTogMTI4MTA1LCA2OiAxMjgwODUsIDc6IDEyODA5NCwgODogMTI4MjQ3LCA5OiA5NzQyLCAxMDogMTI4MjQxLCAxMTogMTI4MjI0LCAxMjogMTI4MTg3LCAxMzogMTI4MDc0LCAxNDogMTI4MDc3LCAxNTogOTc1NywgMTY6IDk5OTQsIDE3OiA5OTk2LCAxODogMTI4NTg3LCAxOTogMTI3OTM1LCAyMDogOTk3MSwgMjE6IDEyNzkzNCwgMjI6IDk5MTgsIDIzOiAxMjc5NDAsIDI0OiA5OTE3LCAyNTogMTI4MDMzLCAyNjogMTI4MDUyLCAyNzogMTI4NjYzLCAyODogOTk3MywgMjk6IDk5OTIsIDMwOiAxMjg2NDMsIDMxOiAxMjg2NDUsIDMyOiAxMDA2NywgMzM6IDEwMDcxLCAzNDogMTAwODQsIDM1OiAxMjgxNDgsIDM2OiAxMjgzMzYsIDM3OiAxMjgzMzcsIDM4OiAxMjgzMzgsIDM5OiAxMjgzMzksIDQwOiAxMjgzNDAsIDQxOiAxMjgzNDEsIDQyOiAxMjgzNDIsIDQzOiAxMjgzNDMsIDQ0OiAxMjgzNDQsIDQ1OiAxMjgzNDUsIDQ2OiAxMjgzNDYsIDQ3OiAxMjgzNDcsIDQ4OiAxMjc4MDAsIDQ5OiAxMjgzMDUsIDUwOiAxMjc4MDEsIDUxOiAxMjc4NzYsIDUyOiAxMjgxNDEsIDUzOiAxMjgxNDIsIDU0OiAxMjc5NjgsIDU1OiA5OTYyLCA1NjogMTI3OTcwLCA1NzogMTI4NjQ5LCA1ODogOTk4MSwgNTk6IDEyODUwNywgNjA6IDEyNzkwOCwgNjE6IDEyNzkwOSwgNjI6IDEyNzkyNSwgNjM6IDEyODI3MywgNjQ6IDEyNzkyNywgNjU6IDEyNzkyOCwgNjY6IDEyNzkzMCwgNjc6IDEyNzg2MCwgNjg6IDEyNzg2NCwgNjk6IDk3NDksIDcwOiAxMjc4NTYsIDcxOiAxMjc4NjYsIDcyOiA5OTI0LCA3MzogOTcyOSwgNzQ6IDk3MjgsIDc1OiA5NzQ4LCA3NjogMTI3NzY0LCA3NzogMTI3NzQ4LCA3ODogMTI4MTI0LCA3OTogMTI4MDQ5LCA4MDogMTI4MDQ3LCA4MTogMTI4MDU5LCA4MjogMTI4MDQxLCA4MzogMTI4MDQ1LCA4NDogMTI4MDUxLCA4NTogMTI4MDM5LCA4NjogMTI4NTIzLCA4NzogMTI4NTE1LCA4ODogMTI4NTQyLCA4OTogMTI4NTQ0LCA5MDogMTI4MTY5LCAyNTc6IDEyODIzNCwgMjU4OiAxMjgyMzgsIDI1OTogOTk5MywgMjYwOiAxMjgyNDIsIDI2MTogMTI4NTQwLCAyNjI6IDEyODUyNSwgMjYzOiAxMjg1NjEsIDI2NDogMTI4NTMxLCAyNjU6IDEyODA1MywgMjY2OiAxMjgwMjUsIDI2NzogMTI4MDU1LCAyNjg6IDEyODEyNSwgMjY5OiAxMjg2NDAsIDI3MDogMTI4MDgxLCAyNzE6IDEyODE2MSwgMjcyOiAxMjc4MDgsIDI3MzogMTI4MTQzLCAyNzQ6IDEyNzg3MywgMjc1OiAxMjgyOTksIDI3NjogMTI4MjY5LCAyNzc6IDEyNzkzOSwgMjc4OiAxMjgyOTYsIDI3OTogMTI3ODc4LCAyODA6IDEyNzgwOSwgMjgxOiAxMjc4MTAsIDI4MjogMTI4MTI3LCAyODM6IDEyODEyMywgMjg0OiAxMjgxMjgsIDI4NTogMTI4MjkzLCAyODY6IDEyODE4OCwgMjg3OiAxMjgxODYsIDI4ODogMTI3ODI4LCAyODk6IDk5NzAsIDI5MDogOTk3OCwgMjkxOiA5ODMyLCAyOTI6IDEyNzkwNSwgMjkzOiAxMjc5MTUsIDI5NDogMTI4MTkxLCAyOTU6IDEyODE5MiwgMjk2OiAxMjgyNTEsIDI5NzogMTI4MjUyLCAyOTg6IDEyODI1MCwgMjk5OiAxMjgxMjYsIDMwMDogMTIzNDksIDMwMTogMTI2OTgwLCAzMDI6IDEyNzM4NiwgMzAzOiAxMjgxNzYsIDMwNDogMTI3OTE5LCAzMDU6IDEyNzk0MiwgMzA2OiAxMjc5MzcsIDMwNzogMTI3OTIwLCAzMDg6IDEyODAxNCwgMzA5OiAxMjg2NzYsIDMxMDogMTI4NjkwLCAzMTE6IDEyODY3OSwgMzEyOiAxMjg2OTcsIDMxMzogMTI4Njk4LCAzMTQ6IDEyODcwMCwgMzE1OiAxMjgxMzcsIDMxNjogMTI4MTY0LCAzMTc6IDk4ODksIDMxODogMTI4MDk2LCAzMTk6IDEyODcwNCwgMzIwOiAxMjg3MDEsIDMyMTogMTI4MjY2LCAzMjI6IDEyODIyNiwgMzIzOiAxMjc4ODQsIDMyNDogMTI4Mjc0LCAzMjU6IDEyODI3NSwgMzI2OiAxMjc3NTAsIDMyNzogMTI3ODU5LCAzMjg6IDEyODIxMSwgMzI5OiAxMjgxNzcsIDMzMDogMTI4MTg1LCAzMzE6IDEyODIyNSwgMzMyOiAxMjgxNzAsIDMzMzogMTI3OTc0LCAzMzQ6IDEyODY3NywgMzM1OiAxMjczNTksIDMzNjogMTI4NjU1LCAzMzc6IDEyODY5OSwgMzM4OiAxMjgxMTAsIDMzOTogMTI3OTcxLCAzNDA6IDEyNzk3NSwgMzQxOiAxMjc5NzMsIDM0MjogMTI3OTc4LCAzNDM6IDEyNzk3OSwgMzQ0OiAxMjc5NzYsIDM0NTogMTI4NjUyLCAzNDY6IDEyODY2MSwgMTA5MTogMTI3NzQ0LCAxMDg0OiAxMjc3NDYsIDEwOTk6IDEyNzc0NywgMTA5NzogMTI3NzQ5LCAxMDk4OiAxMjc3NTEsIDExMDA6IDEyNzc1MiwgMTA4NjogMTI3NzU0LCA4MjE6IDEyNzc3NSwgNTc1OiA5ODAwLCA1NzY6IDk4MDEsIDU3NzogOTgwMiwgNTc4OiA5ODAzLCA1Nzk6IDk4MDQsIDU4MDogOTgwNSwgNTgxOiA5ODA2LCA1ODI6IDk4MDcsIDU4MzogOTgwOCwgNTg0OiA5ODA5LCA1ODU6IDk4MTAsIDU4NjogOTgxMSwgNTg3OiA5OTM0LCA3NzI6IDEyNzc5OSwgMTA5NTogMTI3ODExLCA3NzE6IDEyNzgwMiwgNzczOiAxMjc4MDMsIDc3NTogMTI3Nzk2LCA3NzY6IDEyNzc5NywgMTA5MjogMTI3ODA2LCA4Mzc6IDEyNzgyMiwgODM4OiAxMjc4MTgsIDgzOTogMTI3ODI3LCA4NDA6IDEyNzgxNywgODQxOiAxMjc4MTMsIDg0MjogMTI3ODE0LCAxMDQ5OiAxMjgwNjQsIDEwNTE6IDEyODA2NiwgMTA1MDogMTI4MDY3LCAxMDUyOiAxMjgwNjgsIDEwMzM6IDEyODA2OSwgNzk2OiAxMjgxMzIsIDc5NzogMTI4MTMzLCA3OTg6IDEyODEzNCwgNzk5OiAxMjgxMzUsIDgwMDogMTI4MTM2LCAxMDY0OiAxMjgxMDcsIDEwNjU6IDEyODExMSwgMTMwMTogMTI4MTEzLCAxMzAyOiAxMjgxMTQsIDEzMDM6IDEyODExNSwgMTMwNDogMTI4MTE2LCAxMzA1OiAxMjgxMTcsIDEzMDY6IDEyODExOCwgMTMwNzogMTI4MTE5LCAxMzA4OiAxMjgxMjAsIDU5NTogMTI4MTI5LCAxMzEwOiAxMjgxMzAsIDEzMTE6IDEyODEzMSwgMTMyNTogMTI4MDEzLCAxMzI2OiAxMjgwMjAsIDEzMjc6IDEyODAyMywgMTMyODogMTI4MDQzLCAxMzE4OiAxMjgwMjQsIDEzMTk6IDEyODA0MCwgMTMyMDogMTI4MDE4LCAxMzIxOiAxMjgwMTcsIDEwODk6IDEyODAyNiwgMTMxNzogMTI4MDI3LCAxMzE0OiAxMjgwMzIsIDEzMTU6IDEyODAzNiwgMTMxMzogMTI4MDM4LCAxMzEyOiAxMjgwNDQsIDEzMTY6IDEyODA1NywgMTMyMjogMTI4MDU4LCAxMzIzOiAxMjgwNDYsIDEzMjQ6IDEyODA0OCwgMTMyOTogMTI4MDU2LCAxMzM0OiAxMjgwNjIsIDEwMjc6IDEyODU1MywgMTA0MDogMTI4NTYyLCAxMDMwOiAxMjg1NjUsIDEwMzk6IDEyODU2MCwgMTAzODogMTI4NTMwLCAxMDI4OiAxMjg1NDgsIDEwNDg6IDEyODUzNiwgMTA0NzogMTI4NTM4LCAxMDM2OiAxMjg1NjcsIDEwMzc6IDEyODU2MywgMTA0NTogMTI4NTE3LCAxMDM0OiAxMjg1MTgsIDEwNDI6IDEyODUxNCwgMTA0NDogOTc4NiwgMTA0MzogMTI4NTQ2LCAxMDQxOiAxMjg1NTcsIDEwMzU6IDEyODU1MiwgMTA0NjogMTI4NTQ1LCAxMDMxOiAxMjg1MzQsIDEwMzI6IDEyODU1NCwgMTAyNjogMTI4NTI3LCAxMDI1OiAxMjg1NDksIDEwMjk6IDEyODUyMSwgMTA1OTogMTI4NTgxLCAxMDYwOiAxMjg1ODIsIDEwNjI6IDEyODU4MywgMTA2MzogMTI4NTg4LCAxMDUzOiAxMjg1OTEsIDEyODE6IDEyNzk3NywgMTI4NDogMTI3OTgwLCAxMjg1OiAxMjc5ODMsIDEyODY6IDEyNzk4NCwgMTI4ODogMTI3OTgxLCA1MTQ6IDk4NzUsIDc3OTogMTI3OTgyLCAxMjg5OiAxMjg1MDgsIDEzMDk6IDEyODUwOSwgNzk0OiAxMjgwOTcsIDc5NTogMTI4MDk4LCA3NzA6IDEyODA4NCwgNzkyOiAxMjgwODIsIDc5MzogMTI4MDg3LCA4MDE6IDEyODA4OCwgODAyOiAxMjgwODksIDgwMzogMTI4MDkyLCAxMjk5OiBbMTI3NDY0LCAxMjc0NzVdLCAxMjk0OiBbMTI3NDY1LCAxMjc0NjZdLCAxMjk3OiBbMTI3NDY2LCAxMjc0ODBdLCAxMjkzOiBbMTI3NDY3LCAxMjc0NzldLCAxMjk2OiBbMTI3NDY4LCAxMjc0NjNdLCAxMjk1OiBbMTI3NDcwLCAxMjc0ODFdLCAxMjkxOiBbMTI3NDcxLCAxMjc0NzddLCAxMzAwOiBbMTI3NDcyLCAxMjc0NzldLCAxMjk4OiBbMTI3NDc5LCAxMjc0ODJdLCAxMjkyOiBbMTI3NDgyLCAxMjc0ODBdLCA1NzQ6IDEyODMwMiwgNTIxOiAxMjgzMDQsIDc4MzogMTI4MTM4LCAxMzMwOiAxMjczNDQsIDEzMzE6IDEyNzM0NSwgMTMzMjogMTI3Mzc0LCAxMzMzOiAxMjczNTgsIDc4ODogMTI3ODcyLCA4NDM6IDEyNzg3NCwgMTA5NjogMTI3ODc3LCA3ODQ6IDEyNzg4MCwgNzg2OiAxMjc4ODEsIDEwNzg6IDEyNzg4NSwgMTA4MDogMTI3ODg2LCAxMDgxOiAxMjc4OTEsIDEwODI6IDEyNzg5MCwgMTA4MzogMTI3ODg3LCAxMDg4OiAxMjc4NzksIDEwOTA6IDEyNzg4OCwgMTA5MzogMTI3ODc1LCAxMDk0OiAxMjc4ODksIDc2OTogMTI4MjIxLCA3OTE6IDEyODIyNywgNzkwOiAxMjgxODksIDc4NzogOTk4NiwgMTA2NjogMTI3OTM2LCAxMDY3OiAxMjc5NDQsIDEwNjk6IDEyNzk0NiwgMTA3NjogMTI4NjQ3LCAxMDc3OiAxMjg2NDQsIDEwNzA6IDEyODY2NSwgMTA3MTogMTI4NjY2LCAxMDcyOiAxMjg2NTgsIDEwNzM6IDEyODY1NywgMTA3NDogMTI4NjU5LCAxMDc1OiAxMjc5MDYsIDEyODc6IDEyNzkxMCwgNzc4OiAxMjc5MTEsIDEyODI6IDEyNzkxMiwgMTI4MzogMTI3OTEzLCA4MDQ6IDEyNzkxNiwgMTA2ODogMTI3OTIxLCA4MDY6IDEyNzkyNiwgNzc0OiAxMjgxNDQsIDEwNjE6IDEyODE0NSwgMTA4NTogMTI4MTQ2LCA1MTk6IDEyODI4NiwgNTkwOiAxNjksIDU5MTogMTc0LCAxMzM1OiA4NDgyLCA1Mjg6IFszNSwgODQxOV0sIDU0MDogWzQ5LCA4NDE5XSwgNTQxOiBbNTAsIDg0MTldLCA1NDI6IFs1MSwgODQxOV0sIDU0MzogWzUyLCA4NDE5XSwgNTQ0OiBbNTMsIDg0MTldLCA1NDU6IFs1NCwgODQxOV0sIDU0NjogWzU1LCA4NDE5XSwgNTQ3OiBbNTYsIDg0MTldLCA1NDg6IFs1NywgODQxOV0sIDU0OTogWzQ4LCA4NDE5XSwgNTIzOiAxMjgyNDYsIDU5MjogMTI4MjQzLCA1OTM6IDEyODI0NCwgODM0OiAxMjc4MzMsIDgzMjogMTI3ODM2LCA4MjU6IDEyNzgzOCwgODI2OiAxMjc4NDYsIDgyNzogMTI3ODM5LCA4Mjg6IDEyNzg0MSwgODI5OiAxMjc4MzIsIDgzMDogMTI3ODM0LCA4MzE6IDEyNzgzNywgODMzOiAxMjc4MzUsIDgzNTogMTI3ODQyLCA4MzY6IDEyNzg0MywgODQ0OiAxMjc4NTcsIDg0NTogMTI3ODU4LCAxMDg3OiAxMjc4NDcsIDgyNDogMTI3ODYxLCA3ODA6IDEyNzg2NywgNTY2OiA4NTk5LCA1Njg6IDg2MDAsIDU2NzogODU5OCwgNTY5OiA4NjAxLCA1NjI6IDExMDE0LCA1NjM6IDExMDE1LCA1NjQ6IDEwMTQ1LCA1NjU6IDExMDEzLCA1NzA6IDk2NTQsIDU3MTogOTY2NCwgNTcyOiA5MTkzLCA1NzM6IDkxOTQsIDgxODogMTEwOTMsIDgxOTogMTAwNjAsIDgyMjogMTAwNjgsIDgyMzogMTAwNjksIDUyOTogMTAxNzUsIDgwNzogMTI4MTQ3LCA4MDg6IDEyODE1MSwgODA5OiAxMjgxNTIsIDgxMDogMTI4MTUzLCA4MTE6IDEyODE1NCwgODEyOiAxMjgxNTUsIDgxMzogMTI4MTU2LCAxMDc5OiAxMjgxNTcsIDUxNjogMTI4MTU5LCA1MjQ6IDk4MjksIDUyNjogOTgyNCwgNTI1OiA5ODMwLCA1Mjc6IDk4MjcsIDc4MjogMTI4Njg0LCA1MjA6IDEyODY4NSwgNTIyOiA5ODU1LCA1OTQ6IDk4ODgsIDUxMzogMTI4Njk0LCA3Nzc6IDEyODcwMiwgNTMyOiAxMjczNzgsIDU1MzogMTI3MzgwLCA1MzA6IDEyNzM4MSwgNTg5OiAxMjczODMsIDUzMTogMTI3Mzg1LCA1MTU6IDEyNzQ4OSwgNTUyOiAxMjc0OTAsIDU1NTogMTI3NTM5LCA1NTQ6IDEyNzU0MSwgNTMzOiAxMjc1NDIsIDUzNDogMTI3NTE0LCA1MzU6IDEyNzU0MywgNTM2OiAxMjc1NDQsIDU1MTogMTI3NTQ1LCA1NTY6IDEyNzUzNSwgNTU3OiAxMjc1NDYsIDc4OTogMTI5NTMsIDc4MTogMTI5NTEsIDU1MDogMTI3NTY4LCA4MjA6IDEyODE2MiwgNzg1OiAxMjgxNjMsIDgxNzogMTI4MTY2LCA4MTY6IDEyODE2OCwgODE0OiAxMDAyNCwgNTE3OiAxMDAzNiwgNTE4OiAxMDAzNSwgNTM3OiA5ODk4LCA1Mzg6IDEyODMwOSwgNTM5OiAxMjgzMDcsIDgxNTogMTEwODgsIDgwNTogMTI4Mjc2LCA1ODg6IDEyODI4NSwgNTU4OiAxMjgwNzAsIDU1OTogMTI4MDcxLCA1NjA6IDEyODA3MiwgNTYxOiAxMjgwNzMsIDEwNTQ6IDEyODA3NSwgMTA1NTogMTI4MDc5LCAxMDU2OiAxMjgwNzYsIDEwNTc6IDEyODA3OCwgMTA1ODogMTI4MDgwIH07CiAgY29uc3QgZW1vamlDb2RlVG9VdGY4ID0gZnVuY3Rpb24gKGNvZGUpIHsKICAgIC8vIOaIkeS7rOWwhiB1dGY4IOe8lueggei9rOaNouaIkOeggeS9jeeCue+8jOW5tuWHj+WOuyAweGUwMDAg5ZCO5p+l6KGoCiAgICBjb25zdCBzb2Z0YmFua0Vtb2ppU3RyaW5nID0gZGVjb2RlVVJJQ29tcG9uZW50KGNvZGUucmVwbGFjZSgvKC4uKS9nLCAnJSQxJykpOwogICAgY29uc3QgdW5pY29kZUNvZGVQb2ludHMgPSBzb2Z0YmFua0Vtb2ppTG9va3VwVGFibGVbc29mdGJhbmtFbW9qaVN0cmluZy5jb2RlUG9pbnRBdCgwKSAtIDB4ZTAwMF07CiAgICBjb25zdCBjb2RlUG9pbnRzQXJyYXkgPSB0eXBlb2YgdW5pY29kZUNvZGVQb2ludHMgPT09ICdudW1iZXInID8gW3VuaWNvZGVDb2RlUG9pbnRzXSA6IHVuaWNvZGVDb2RlUG9pbnRzOwogICAgY29uc3QgdW5pY29kZVRleHQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludCguLi5jb2RlUG9pbnRzQXJyYXkpOwogICAgcmV0dXJuIHVuaWNvZGVUZXh0OwogIH07CgogIGNvbnRlbnQudXNlVGV4dEVtb2ppID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF91bmljb2RlX2Vtb2ppJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnVzZVRleHRFbW9qaSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCB1c2VUZXh0RW1vamkgPSBmdW5jdGlvbiB1c2VUZXh0RW1vamkoKSB7CiAgICAgICAgY29uc3QgZW1vamkgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tzcmMqPSIvL2ltZy50LnNpbmFqcy5jbi90NC9hcHBzdHlsZS9leHByZXNzaW9uL2VtaW1hZ2UvZSJdJykpOwogICAgICAgIGVtb2ppLmZvckVhY2goaW1nID0+IHsKICAgICAgICAgIGNvbnN0IGNvZGUgPSBpbWcuZ2V0QXR0cmlidXRlKCdzcmMnKS5tYXRjaCgvKGUuLi4uLilcLnBuZy8pWzFdOwogICAgICAgICAgY29uc3QgdGV4dCA9IGVtb2ppQ29kZVRvVXRmOChjb2RlKTsKICAgICAgICAgIGNvbnN0IGVtb2ppQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgZW1vamlDb250YWluZXIuY2xhc3NOYW1lID0gJ3lhd2YtZW1vamknOwogICAgICAgICAgZW1vamlDb250YWluZXIudGV4dENvbnRlbnQgPSB0ZXh0OwogICAgICAgICAgaW1nLnJlcGxhY2VXaXRoKGVtb2ppQ29udGFpbmVyKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZCh1c2VUZXh0RW1vamkpOwogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzaG93Vm90ZVJlc3VsdDogewogICAgICBjbjogJ+acquWPguS4jueahOaKleelqOaYvuekuuW+l+elqOaVsHt7aX19JywKICAgICAgdHc6ICfmnKrlj4PoiIfnmoTmipXnpajlsZXnpLrlvpfnpajmlbh7e2l9fScsCiAgICAgIGVuOiAnU2hvdyB2b3RpbmcgcmVzdWx0cyBpbiB3aXRob3V0IHZvdGluZyBuZWVkZWQge3tpfX0nLAogICAgfSwKICAgIHNob3dWb3RlUmVzdWx0RGV0YWlsOiB7CiAgICAgIGNuOiAn55Sx5LqO5b6u5Y2a5oqV56Wo5Lya6Ieq5Yqo54K56LWe5a+55bqU5b6u5Y2a77yM5byA5ZCv6K+l5Yqf6IO95ZCO77yM5omp5bGV5Lya5Zyo5oKo5rKh5pyJ5omL5Yqo54K56LWe5YmN6Zi75q2i5oKo5Y+C5LiO5oqV56Wo44CC5peg6K665piv5ZCm5byA5ZCv5pys5Yqf6IO977yM5b6u5Y2a5oqV56Wo6YO95Lya5a+86Ie05oKo6Ieq5Yqo54K56LWe6K+l5b6u5Y2a44CCJywKICAgICAgdHc6ICfnlLHmlrzlvq7ljZrmipXnpajmnIPoh6rli5Xpu57otIrlsI3mh4nlvq7ljZrvvIzplovllZ/oqbLlip/og73lvozvvIzmk7TlhYXlpZfku7bmnIPlnKjmgqjmspLmnInmiYvli5Xpu57otIrliY3pmLvmraLmgqjlj4PoiIfmipXnpajjgILnhKHoq5bmmK/lkKbplovllZ/mnKzlip/og73vvIzlvq7ljZrmipXnpajpg73mnIPlsI7oh7Tmgqjoh6rli5Xpu57otIroqbLlvq7ljZrjgIInLAogICAgICBlbjogJ1ZvdGluZyB3aWxsIGF1dG9tYXRpY2FsbHkgbWFyayB0aGUgZmVlZCBsaWtlZC4gRXh0ZW5zaW9uIHdpbGwgYmxvY2sgeW91ciB2b3Rpbmcgd2hlbiB5b3Ugdm90ZSB3aXRob3V0IG1hcmsgdGhlIGZlZWQgbGlrZWQgbWFudWFsbHkuIFZvdGluZyB3aWxsIGF1dG9tYXRpY2FsbHkgbGlrZSB0aGUgZmVlZCByZWdhcmRsZXNzIHdoZXRoZXIgdGhpcyBvcHRpb24gaXMgZW5hYmxlZCBvciBub3QuJywKICAgIH0sCiAgICB2b3RlVGl0bGU6IHsKICAgICAgY246ICflj4LkuI7mipXnpagnLAogICAgICB0dzogJ+WPg+iIh+aKleelqCcsCiAgICAgIGVuOiAnVm90aW5nJywKICAgIH0sCiAgICB2b3RlVGV4dDogewogICAgICBjbjogJ+WmgumcgOWPguS4juaKleelqOivt+WFiOeCuei1nuW+ruWNmuOAgicsCiAgICAgIHR3OiAn5aaC6ZyA5Y+D6IiH5oqV56Wo6KuL5YWI6bue6LSK5b6u5Y2a44CCJywKICAgICAgZW46ICdZb3UgaGF2ZSB0byBsaWtlIHRoZSBmZWVkIGZpcnN0IGJlZm9yZSB2b3RpbmcuJywKICAgIH0sCiAgfSk7CgogIGNvbnRlbnQuc2hvd1ZvdGVSZXN1bHQgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ3Nob3dfdm90ZV9yZXN1bHQnLAogICAgdmVyc2lvbjogNDYsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dWb3RlUmVzdWx0LAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvd1ZvdGVSZXN1bHREZXRhaWwgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGNvbnN0IHVwZGF0ZVZvdGVCeUxpa2UgPSBmdW5jdGlvbiAoZmVlZGxpa2UpIHsKICAgICAgICAgIGNvbnN0IGxpa2UgPSBmZWVkbGlrZS5xdWVyeVNlbGVjdG9yKCdbYWN0aW9uLXR5cGU9ImZsX2xpa2UiXScpOwogICAgICAgICAgY29uc3QgbGlrZWQgPSBsaWtlLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9Imxpa2Vfc3RhdHVzIl0nKS5tYXRjaGVzKCcuVUlfYW5pX3ByYWlzZWQnKTsKICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZmVlZGxpa2UucXVlcnlTZWxlY3RvckFsbCgnW2FjdGlvbi10eXBlPSJmZWVkX2xpc3Rfdm90ZSJdLCBbYWN0aW9uLXR5cGU9Inlhd2YtZmVlZF9saXN0X3ZvdGUiXScpOwogICAgICAgICAgQXJyYXkuZnJvbShpdGVtcykuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi10eXBlJywgbGlrZWQgPyAnZmVlZF9saXN0X3ZvdGUnIDogJ3lhd2YtZmVlZF9saXN0X3ZvdGUnKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgY29uc3Qgc2hvd1ZvdGVSZXN1bHQgPSBhc3luYyBmdW5jdGlvbiAodm90ZSkgewogICAgICAgICAgY29uc3Qgdm90ZUJ1dHRvbnMgPSBBcnJheS5mcm9tKHZvdGUucXVlcnlTZWxlY3RvckFsbCgnW2FjdGlvbi10eXBlPSJmZWVkX2xpc3Rfdm90ZSJdLCBbYWN0aW9uLXR5cGU9Inlhd2YtZmVlZF9saXN0X3ZvdGUiXScpKTsKICAgICAgICAgIGlmICghdm90ZUJ1dHRvbnMubGVuZ3RoKSByZXR1cm47CiAgICAgICAgICBjb25zdCB2b3RlSWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHZvdGVCdXR0b25zWzBdLmdldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnKSkuZ2V0KCd2b3RlX2lkJyk7CiAgICAgICAgICBpZiAoIXZvdGVJZCkgcmV0dXJuOwogICAgICAgICAgY29uc3Qgdm90ZVJlc3VsdCA9IGF3YWl0IHJlcXVlc3Qudm90ZURldGFpbCh2b3RlSWQpOwogICAgICAgICAgdm90ZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gewogICAgICAgICAgICBjb25zdCBhY3Rpb25EYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhidXR0b24uZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpKTsKICAgICAgICAgICAgY29uc3QgaWQgPSBhY3Rpb25EYXRhLmdldCgndm90ZV9pdGVtcycpOwogICAgICAgICAgICBjb25zdCBpdGVtID0gdm90ZVJlc3VsdC52b3RlX2luZm8ub3B0aW9uX2xpc3QuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IGlkKTsKICAgICAgICAgICAgYnV0dG9uLmRhdGFzZXQucGFydE51bSA9IGl0ZW0ucGFydF9udW0ucmVwbGFjZSgn56WoJywgJ+S6uicpOwogICAgICAgICAgICBidXR0b24uZGF0YXNldC5wYXJ0UmF0aW8gPSBpdGVtLnBhcnRfcmF0aW87CiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wYXJ0LXJhdGlvJywgaXRlbS5wYXJ0X3JhdGlvIC8gMTAwKTsKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc3QgZmVlZGxpa2UgPSB2b3RlLmNsb3Nlc3QoJy5XQl9mZWVkX2V4cGFuZCwgLldCX2ZlZWRfdHlwZScpOwogICAgICAgICAgdXBkYXRlVm90ZUJ5TGlrZShmZWVkbGlrZSk7CiAgICAgICAgfTsKICAgICAgICBjb25zdCB3YXRjaExpa2UgPSBmdW5jdGlvbiAoLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi92b3RlKSB7CiAgICAgICAgICBjb25zdCBmZWVkbGlrZSA9IHZvdGUuY2xvc2VzdCgnLldCX2ZlZWRfZXhwYW5kLCAuV0JfZmVlZF90eXBlJyk7CiAgICAgICAgICBjb25zdCBsaWtlID0gZmVlZGxpa2UucXVlcnlTZWxlY3RvcignW2FjdGlvbi10eXBlPSJmbF9saWtlIl0nKTsKICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4geyB1cGRhdGVWb3RlQnlMaWtlKGZlZWRsaWtlKTsgfSk7CiAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGxpa2UsIHsgc3VidHJlZTogdHJ1ZSwgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ10gfSk7CiAgICAgICAgICB1cGRhdGVWb3RlQnlMaWtlKGZlZWRsaWtlKTsKICAgICAgICB9OwogICAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gdXBkYXRlVm90ZVJlc3VsdCgpIHsKICAgICAgICAgIGNvbnN0IHZvdGVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLldCX2NhcmRfdm90ZTpub3QoW3lhd2YtY2FyZC12b3RlXSknKTsKICAgICAgICAgIGlmICghdm90ZUxpc3QubGVuZ3RoKSByZXR1cm47CiAgICAgICAgICBBcnJheS5mcm9tKHZvdGVMaXN0KS5mb3JFYWNoKHZvdGUgPT4gewogICAgICAgICAgICB2b3RlLnNldEF0dHJpYnV0ZSgneWF3Zi1jYXJkLXZvdGUnLCAneWF3Zi1jYXJkLXZvdGUnKTsKICAgICAgICAgICAgc2hvd1ZvdGVSZXN1bHQodm90ZSk7CiAgICAgICAgICAgIHdhdGNoTGlrZSh2b3RlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSByZXR1cm47CiAgICAgICAgICBjb25zdCB2b3RlID0gdGFyZ2V0LmNsb3Nlc3QoJ1thY3Rpb24tdHlwZT0ieWF3Zi1mZWVkX2xpc3Rfdm90ZSJdJyk7CiAgICAgICAgICBpZiAoIXZvdGUpIHJldHVybjsKICAgICAgICAgIHVpLmFsZXJ0KHsKICAgICAgICAgICAgaWQ6ICd5YXdmLXZvdGUtYmxvY2snLAogICAgICAgICAgICBpY29uOiAnd2FybicsCiAgICAgICAgICAgIHRpdGxlOiBpMThuLnZvdGVUaXRsZSwKICAgICAgICAgICAgdGV4dDogaTE4bi52b3RlVGV4dCwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIGNzcy5hcHBlbmQoYAouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24xIC5pdGVtIHsgcG9zaXRpb246IHJlbGF0aXZlOyB6LWluZGV4OiAxOyBvdmVyZmxvdzogaGlkZGVuOyB0ZXh0LWFsaWduOiBsZWZ0OyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjEgLml0ZW06OmFmdGVyIHsgY29udGVudDogYXR0cihkYXRhLXBhcnQtbnVtKSA7IGZsb2F0OiByaWdodDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24xIC5pdGVtOjpiZWZvcmUgeyBjb250ZW50OiAiICI7IHdpZHRoOiBjYWxjKHZhcigtLXBhcnQtcmF0aW8pICogMTAwJSk7IHRvcDogMDsgbGVmdDogMDsgYm90dG9tOiAwOyBtYXJnaW46IDA7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgei1pbmRleDogLTE7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAudm90ZV9idG4geyBwb3NpdGlvbjogcmVsYXRpdmU7IGZvbnQtc2l6ZTogMTRweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC52b3RlX2J0biBhIHsgYmFja2dyb3VuZDogY3VycmVudENvbG9yOyBib3JkZXItcmFkaXVzOiAwOyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjIgLldfZmwgLnZvdGVfYnRuIGEgeyBtYXJnaW4tcmlnaHQ6IC0ycHg7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAuV19mciAudm90ZV9idG4gYSB7IG1hcmdpbi1sZWZ0OiAtMnB4OyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjIgLnZvdGVfYnRuOjphZnRlciB7IGNvbnRlbnQ6IGF0dHIoZGF0YS1wYXJ0LW51bSk7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7IGNvbG9yOiB3aGl0ZTsgbGluZS1oZWlnaHQ6IDI0cHg7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAuV19mbCAudm90ZV9idG46OmFmdGVyIHsgbGVmdDogMjZweDsgcmlnaHQ6IGF1dG87IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAuV19mciAudm90ZV9idG46OmFmdGVyIHsgbGVmdDogYXV0bzsgcmlnaHQ6IDI2cHg7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMSAuaXRlbV9ydC5TX3R4dDEgLmJnLAouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24xIC5pdGVtOjpiZWZvcmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjODA4MDgwMjI7IH0KYCk7CiAgICAgICAgY29uc3Qgc21hbGxJbWFnZSA9IGZlZWRzLmxheW91dC5zbWFsbEltYWdlOwogICAgICAgIGlmIChzbWFsbEltYWdlLmlzRW5hYmxlZCgpKSB7CiAgICAgICAgICBjc3MuYXBwZW5kKGAKLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAuV19mbCAudm90ZV9idG4gYSB7IG1hcmdpbi1yaWdodDogLTFweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC5XX2ZyIC52b3RlX2J0biBhIHsgbWFyZ2luLWxlZnQ6IC0xcHg7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAuV19mbCAudm90ZV9idG46OmFmdGVyIHsgbGVmdDogMTBweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC5XX2ZyIC52b3RlX2J0bjo6YWZ0ZXIgeyByaWdodDogMTBweDsgfQpgKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3Qgdm90ZUJsb2NrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdWkuYWxlcnQoewogICAgICAgICAgICBpZDogJ3lhd2Ytdm90ZS1ibG9jaycsCiAgICAgICAgICAgIGljb246ICd3YXJuJywKICAgICAgICAgICAgdGl0bGU6IGkxOG4udm90ZVRpdGxlLAogICAgICAgICAgICB0ZXh0OiBpMThuLnZvdGVUZXh0LAogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXksIHZvdGVCbG9jaykgewogICAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2ZlZWQtdm90ZScsIGZ1bmN0aW9uICh2bSkgewoKICAgICAgICAgICAgdm0uc2V0Vm90ZSA9IChmdW5jdGlvbiAoc2V0Vm90ZSkgewogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1BhcnRlZCkgewogICAgICAgICAgICAgICAgICBjb25zdCBmZWVkRGF0YSA9IHRoaXMuJHBhcmVudD8uZGF0YTsKICAgICAgICAgICAgICAgICAgaWYgKGZlZWREYXRhICYmICFmZWVkRGF0YS5hdHRpdHVkZXNfc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgdm90ZUJsb2NrKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZXRWb3RlKGlkKTsKICAgICAgICAgICAgICB9LmJpbmQodm0pOwogICAgICAgICAgICB9KHZtLnNldFZvdGUpKTsKCiAgICAgICAgICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudFJlbmRlcih2bSwgZnVuY3Rpb24gKHJlbmRlcikgewogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoY3JlYXRlRWxlbWVudCwgeyBidWlsZGVyIH0pIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnZvdGVPYmplY3QucGFydGVkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXIuY2FsbCh0aGlzLCBjcmVhdGVFbGVtZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIOWwhuW9k+WJjeeahOaKleelqOWFg+e0oOS8quijheaIkOW3suWPguWKoOi/h+aKleelqOeahOeKtuaAgQogICAgICAgICAgICAgICAgY29uc3Qgd3JhcCA9IE9iamVjdC5jcmVhdGUodGhpcywgewogICAgICAgICAgICAgICAgICBnZXRBbmlTdHlsZTogeyB2YWx1ZTogdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zLm1ldGhvZHMuZ2V0QW5pU3R5bGUgfSwKICAgICAgICAgICAgICAgICAgaXNQYXJ0ZWQ6IHsgdmFsdWU6IHRydWUgfSwKICAgICAgICAgICAgICAgICAgZmlyc3RQYXJ0ZWQ6IHsgdmFsdWU6IHRydWUgfSwKICAgICAgICAgICAgICAgICAgdm90ZU9iamVjdDogewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBPYmplY3QuY3JlYXRlKHRoaXMudm90ZU9iamVjdCwgewogICAgICAgICAgICAgICAgICAgICAgcGFydGVkOiB7IHZhbHVlOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHdyYXAuZ2V0QW5pU3R5bGUgPSB3cmFwLmdldEFuaVN0eWxlLmJpbmQod3JhcCk7CiAgICAgICAgICAgICAgICBjb25zdCB7IG5vZGVTdHJ1Y3QsIE5vZGVzLCBnZXRSb290IH0gPSBidWlsZGVyKHJlbmRlci5jYWxsKHdyYXAsIGNyZWF0ZUVsZW1lbnQpKTsKICAgICAgICAgICAgICAgIC8vIOWOu+aOieWIhuS6q+aKleelqOeahOaMiemSrgogICAgICAgICAgICAgICAgY29uc3QgeyByZW1vdmVDaGlsZCwgdk5vZGUgfSA9IE5vZGVzOwogICAgICAgICAgICAgICAgY29uc3Qgc2hhcmUgPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoYFtjbGFzc3w9IiR7dGhpcy4kc3R5bGUuYnRuQn0iXWApOwogICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGQoc2hhcmUucGFyZW50Tm9kZSwgc2hhcmUpOwogICAgICAgICAgICAgICAgLy8g5L+u5q2j5oqV56Wo5oyJ6ZKu55qE5LqL5Lu2CiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yQWxsKCd4LXdvby1wYW5lbCcpOwogICAgICAgICAgICAgICAgaWYgKGJ1dHRvbnMubGVuZ3RoID09PSB0aGlzLnZvdGVPYmplY3Qudm90ZV9saXN0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGJ1dHRvbnMpLmZvckVhY2goKGJ1dHRvbiwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25JZCA9IHRoaXMudm90ZU9iamVjdC52b3RlX2xpc3RbaW5kZXhdLmlkOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblZOb2RlID0gdk5vZGUoYnV0dG9uKTsKICAgICAgICAgICAgICAgICAgICBidXR0b25WTm9kZS5kYXRhLm5hdGl2ZU9uLmNsaWNrID0gYnV0dG9uVk5vZGUuZGF0YS5vbi5jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMudm90ZShvcHRpb25JZCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Um9vdCgpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sIHsgcmF3OiB0cnVlIH0pOwoKICAgICAgICAgICAgdm0uJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5LCB2b3RlQmxvY2spOwoKICAgICAgfQogICAgfSwKICB9KTsKCiAgaTE4bi5jdXN0b21pemVTb3VyY2UgPSB7CiAgICBjbjogJ+iHquWumuS5ieadpea6kOW+ruWNmuS7heaYvuekuuKAnOadpeiHquW+ruWNmiB3ZWliby5jb23igJ0nLAogICAgdHc6ICfoh6roqILkvobmupDlvq7ljZrlg4Xpoa/npLrjgIzkvoboh6rlvq7ljZogd2VpYm8uY29t44CNJywKICAgIGVuOiAnV2VpYm8gd2l0aCBjdXN0b21pemUgc291cmNlIHNob3cgImNvbWUgZnJvbSDlvq7ljZogd2VpYm8uY29tIiBvbmx5JywKICB9OwoKICBjb250ZW50LmN1c3RvbWl6ZVNvdXJjZSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfbm9fY3VzdG9tX3NvdXJjZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jdXN0b21pemVTb3VyY2UsCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgY3VzdG9taXplU291cmNlID0gZnVuY3Rpb24gY3VzdG9taXplU291cmNlKCkgewogICAgICAgIGNvbnN0IHNvdXJjZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mcm9tOm5vdChbeWF3Zi1jdXN0b20tc291cmNlXSknKSk7CiAgICAgICAgY29uc3QgaXRlbXMgPSBbXTsKICAgICAgICBzb3VyY2VzLmZvckVhY2goZnJvbSA9PiB7CiAgICAgICAgICBmcm9tLnNldEF0dHJpYnV0ZSgneWF3Zi1jdXN0b20tc291cmNlJywgJ3lhd2YtY3VzdG9tLXNvdXJjZScpOwogICAgICAgICAgaWYgKGZyb20ubWF0Y2hlcygnLmxpc3RfbGlbbWlkXSAqJykpIHJldHVybjsKICAgICAgICAgIGlmICgv5pyq6YCa6L+H5a6h5qC45bqU55SoLy50ZXN0KGZyb20udGV4dENvbnRlbnQpKSByZXR1cm47CiAgICAgICAgICAvLyDoh6rlrprkuYnlvq7ljZrmnaXmupDlj6/ku6XkuI3mmL7npLrmnaXmupAKICAgICAgICAgIGlmIChmcm9tLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9pdGVtX2RhdGUiXTpvbmx5LWNoaWxkJykpIHsKICAgICAgICAgICAgaXRlbXMucHVzaChmcm9tLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIOS5n+WPr+S7peaYvuekuuiHquWumuS5ieeahOadpea6kAogICAgICAgICAgY29uc3QgaXRlbSA9IGZyb20ucXVlcnlTZWxlY3RvcignYVtocmVmKj0idmlwLndlaWJvLmNvbSJdJyk7CiAgICAgICAgICBpZiAoaXRlbSkgaXRlbXMucHVzaChpdGVtKTsKICAgICAgICB9KTsKICAgICAgICBpdGVtcy5mb3JFYWNoKGZyb20gPT4gewogICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxhIHJlbD0ibm9mb2xsb3ciIGhyZWY9Ii8vd2VpYm8uY29tLyIgdGFyZ2V0PSJfYmxhbmsiIGFjdGlvbi10eXBlPSJhcHBfc291cmNlIiBjbGFzcz0iU190eHQyIj7lvq7ljZogd2VpYm8uY29tPC9hPic7CiAgICAgICAgICBmcm9tLnJlcGxhY2VXaXRoKGNvbnRhaW5lci5maXJzdENoaWxkKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChjdXN0b21pemVTb3VyY2UpOwogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICB2aWV3RWRpdEluZm86IHsKICAgICAgY246ICfngrnlh7vigJzlt7LnvJbovpHigJ3lrZfmoLfmn6XnnIvnvJbovpHljoblj7InLAogICAgICB0dzogJ+m7nuaTiuOAjOW3sue3qOi8r+OAjeWtl+aoo+afpemWsee3qOi8r+att+WPsicsCiAgICAgIGVuOiAnVmlldyBlZGl0IGhpc3RvcnkgYnkgY2xpY2tpbmcgIkVkaXRlZCInLAogICAgfSwKICAgIHZpZXdFZGl0SW5mb0RldGFpbDogewogICAgICBjbjogJ+afpeeci+e8lui+keWOhuWPsueahOW8ueahhuWSjOWOn+eJiOS4jeWQjO+8jOeCueWHu+W+ruWNmuWPs+S4iuinkuiPnOWNleeci+WIsOeahOW+ruWNmue8lui+keiusOW9leS7jeaYr+WOn+eJiOOAgueCueW3puS+p+WIl+ihqOWPr+S7peafpeeci+aMh+WumueahOeJiOacrO+8jOeCueWPs+S+p+WIl+ihqOWPr+S7peWSjOW9k+WJjeaYvuekuueahOeJiOacrOWvueavlOOAgicsCiAgICB9LAogICAgdmlld0VkaXRJbmZvRWRpdGVkOiB7CiAgICAgIGNuOiAn5bey57yW6L6RJywKICAgICAgdHc6ICflt7Lnt6jovK8nLAogICAgICBlbjogJ0VkaXRlZCcsCiAgICB9LAogICAgdmlld0VkaXRUaXRsZTogewogICAgICBjbjogJ+W+ruWNmue8lui+keiusOW9lScsCiAgICAgIHR3OiAn5b6u5Y2a57eo6Lyv6KiY6YyEJywKICAgICAgZW46ICdFZGl0IEhpc3RvcnknLAogICAgfSwKICAgIHNlbGVjdEZlZWRWZXJzaW9uOiB7CiAgICAgIGNuOiAn6YCJ5oup54mI5pys5Lul5p+l55yLJywKICAgICAgdHc6ICfpgInmi6nniYjmnKzku6Xmn6XpmIUnLAogICAgICBlbjogJ1NlbGVjdCBWZXJzaW9uJywKICAgIH0sCiAgICBkaWZmRmVlZFZlcnNpb246IHsKICAgICAgY246ICfkuI7pgInlrprniYjmnKzmr5Tlr7knLAogICAgICB0dzogJ+iIh+mBuOWumueJiOacrOavlOWwjScsCiAgICAgIGVuOiAnQ29tcGFyZSBXaXRoJywKICAgIH0sCiAgICB2aWV3RWRpdExvYWRpbmc6IHsKICAgICAgY246ICfmraPlnKjliqDovb3nvJbovpHorrDlvZXigKbigKYnLAogICAgICB0dzogJ+ato+WcqOi8ieWFpee3qOi8r+iomOmMhOKApuKApicsCiAgICAgIGVuOiAnTG9hZGluZyBlZGl0IGhpc3RvcnkuLi4nLAogICAgfSwKICB9KTsKCiAgY29udGVudC52aWV3RWRpdEluZm8gPSBydWxlLlJ1bGUoewogICAgaWQ6ICd2aWV3X2VkaXRfaW5mbycsCiAgICB2ZXJzaW9uOiA0NCwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udmlld0VkaXRJbmZvLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdpbmZvJywgdGVtcGxhdGU6ICgpID0+IGkxOG4udmlld0VkaXRJbmZvRGV0YWlsIH0sCiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGNvbnN0IHRpbWVMb2NhbGUgPSBsYXlvdXQuZGV0YWlscy50aW1lem9uZS5pc0VuYWJsZWQoKSA/ICdjdXJyZW50JyA6ICdjc3QnOwogICAgICAvKioKICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZVN0cgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0U3RyCiAgICAgICAqLwogICAgICBjb25zdCBjb21wYXJlID0gZnVuY3Rpb24gKHNvdXJjZVN0ciwgdGFyZ2V0U3RyKSB7CiAgICAgICAgY29uc3QgbWF0Y2hSZWcgPSAvXG58XFsuezEsOH1cXXwjKD89LnsxLDMxfSMpW14jXG5dKiN8aHR0cDpcUyt8W2EtekEtWi1dK3xcc3xcUy91ZzsKICAgICAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VTdHIudHJpbSgpLm1hdGNoKG1hdGNoUmVnKTsKICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRTdHIudHJpbSgpLm1hdGNoKG1hdGNoUmVnKTsKICAgICAgICBjb25zdCBzbCA9IHNvdXJjZS5sZW5ndGgsIHRsID0gdGFyZ2V0Lmxlbmd0aDsKICAgICAgICAvKiogQHR5cGUge251bWJlcltdW119ICovCiAgICAgICAgY29uc3Qgc2l6ZSA9IFsuLi5BcnJheShzbCldLm1hcChfID0+IEFycmF5KHRsKSk7CiAgICAgICAgLyoqIEB0eXBlIHtbbnVtYmVyLCBudW1iZXJdW11bXX0gKi8KICAgICAgICBjb25zdCBmcm9tID0gWy4uLkFycmF5KHNsKV0ubWFwKF8gPT4gQXJyYXkodGwpKTsKICAgICAgICBmb3IgKGxldCBzaSA9IDA7IHNpIDwgc2w7IHNpKyspIHsKICAgICAgICAgIGZvciAobGV0IHRpID0gMDsgdGkgPCB0bDsgdGkrKykgewogICAgICAgICAgICBpZiAoc291cmNlW3NpXSA9PT0gdGFyZ2V0W3RpXSkgewogICAgICAgICAgICAgIGNvbnN0IGQgPSBzaSAmJiB0aSA/IHNpemVbc2kgLSAxXVt0aSAtIDFdIDogMDsKICAgICAgICAgICAgICBmcm9tW3NpXVt0aV0gPSBbc2kgLSAxLCB0aSAtIDFdOwogICAgICAgICAgICAgIHNpemVbc2ldW3RpXSA9IGQgKyBzb3VyY2Vbc2ldLmxlbmd0aDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCBzZCA9IHNpID8gc2l6ZVtzaSAtIDFdW3RpXSA6IDA7CiAgICAgICAgICAgICAgY29uc3QgdGQgPSB0aSA/IHNpemVbc2ldW3RpIC0gMV0gOiAwOwogICAgICAgICAgICAgIGlmIChzZCA+IHRkKSB7CiAgICAgICAgICAgICAgICBmcm9tW3NpXVt0aV0gPSBbc2kgLSAxLCB0aV07CiAgICAgICAgICAgICAgICBzaXplW3NpXVt0aV0gPSBzZDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZnJvbVtzaV1bdGldID0gW3NpLCB0aSAtIDFdOwogICAgICAgICAgICAgICAgc2l6ZVtzaV1bdGldID0gdGQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKiBAdHlwZSB7eyB0eXBlOiAnc2FtZSd8J2RlbGV0ZSd8J2luc2VydCcsIGNoYXJzOiBzdHJpbmcgfVtdfSAqLwogICAgICAgIGNvbnN0IG91dHB1dCA9IFtdOwogICAgICAgIGZvciAobGV0IHNpID0gc2wgLSAxLCB0aSA9IHRsIC0gMTsgc2kgPj0gMCB8fCB0aSA+PSAwOykgewogICAgICAgICAgY29uc3QgW2ZzLCBmdF0gPSBzaSA+PSAwICYmIHRpID49IDAgPyBmcm9tW3NpXVt0aV0gOiBbLTEsIC0xXTsKICAgICAgICAgIGlmIChmcyAhPT0gc2kgJiYgZnQgIT09IHRpKSB7CiAgICAgICAgICAgIG91dHB1dC5wdXNoKHsgdHlwZTogJ3NhbWUnLCBjaGFyczogc291cmNlLnNsaWNlKGZzICsgMSwgc2kgKyAxKSB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoZnMgIT09IHNpKSB7CiAgICAgICAgICAgIG91dHB1dC5wdXNoKHsgdHlwZTogJ2RlbGV0ZScsIGNoYXJzOiBzb3VyY2Uuc2xpY2UoZnMgKyAxLCBzaSArIDEpIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChmdCAhPT0gdGkpIHsKICAgICAgICAgICAgb3V0cHV0LnB1c2goeyB0eXBlOiAnaW5zZXJ0JywgY2hhcnM6IHRhcmdldC5zbGljZShmdCArIDEsIHRpICsgMSkgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBbc2ksIHRpXSA9IFtmcywgZnRdOwogICAgICAgIH0KICAgICAgICAvKiogQHR5cGUge3sgdHlwZTogJ3NhbWUnfCdkZWxldGUnfCdpbnNlcnQnLCBzdHI6IHN0cmluZyB9fSAqLwogICAgICAgIGxldCBsYXN0ID0geyB0eXBlOiAnc2FtZScsIHN0cjogJycgfTsKICAgICAgICBjb25zdCBjb25uZWN0ZWQgPSBbbGFzdCwgLi4ub3V0cHV0LnJldmVyc2UoKS5tYXAoKHsgdHlwZSwgY2hhcnMgfSkgPT4gewogICAgICAgICAgY29uc3Qgc3RyID0gY2hhcnMuam9pbignJyk7CiAgICAgICAgICBpZiAodHlwZSA9PT0gbGFzdC50eXBlKSB7CiAgICAgICAgICAgIGxhc3Quc3RyICs9IHN0cjsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBsYXN0ID0geyB0eXBlLCBzdHIgfTsKICAgICAgICAgIHJldHVybiBsYXN0OwogICAgICAgIH0pXS5maWx0ZXIoY29udGVudCA9PiBjb250ZW50Py5zdHIpOwogICAgICAgIC8qKiBAdHlwZSB7eyBkZWxldGU6IHsgdHlwZTogJ2RlbGV0ZScsIHN0cjogc3RyaW5nIH0sIGluc2VydDogeyB0eXBlOiAnaW5zZXJ0Jywgc3RyOiBzdHJpbmcgfSB9fSAqLwogICAgICAgIGxldCBwcmV2UGFydCA9IHsgZGVsZXRlOiBudWxsLCBpbnNlcnQ6IG51bGwsIHNhbWU6IG51bGwgfTsKICAgICAgICBjb25zdCByZXN1bHQgPSBjb25uZWN0ZWQuZmlsdGVyKHBhcnQgPT4gewogICAgICAgICAgY29uc3QgeyBzdHIsIHR5cGUgfSA9IHBhcnQ7CiAgICAgICAgICBpZiAoWydkZWxldGUnLCAnaW5zZXJ0J10uaW5jbHVkZXModHlwZSkpIHsKICAgICAgICAgICAgaWYgKHByZXZQYXJ0W3R5cGVdKSB7CiAgICAgICAgICAgICAgcHJldlBhcnRbdHlwZV0uc3RyICs9IHN0cjsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcHJldlBhcnRbdHlwZV0gPSBwYXJ0OwogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA8IDQgJiYgcHJldlBhcnQuZGVsZXRlICYmIHByZXZQYXJ0Lmluc2VydCkgewogICAgICAgICAgICAgIHByZXZQYXJ0LmRlbGV0ZS5zdHIgKz0gc3RyOwogICAgICAgICAgICAgIHByZXZQYXJ0Lmluc2VydC5zdHIgKz0gc3RyOwogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwcmV2UGFydC5kZWxldGUgPSBwcmV2UGFydC5pbnNlcnQgPSBudWxsOwogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgICAgY29uc3QgcmVuZGVyVGV4dERpZmYgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBzb3VyY2UsIHRhcmdldCkgewogICAgICAgIGNvbnN0IGRpZmYgPSBjb21wYXJlKHNvdXJjZSwgdGFyZ2V0KTsKICAgICAgICBjb25zdCBmcmFnZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgZGlmZi5mb3JFYWNoKGZ1bmN0aW9uICh7IHR5cGUsIHN0ciB9KSB7CiAgICAgICAgICBzdHIuc3BsaXQoLyhcbikvZykuZm9yRWFjaChwYXJ0ID0+IHsKICAgICAgICAgICAgLyoqIEB0eXBlIHsnZGVsJ3wnaW5zJ3wnc3Bhbid9ICovCiAgICAgICAgICAgIGNvbnN0IHRhZ05hbWUgPSB7IGRlbGV0ZTogJ2RlbCcsIGluc2VydDogJ2lucycsIHNhbWU6ICdzcGFuJyB9W3R5cGVdOwogICAgICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICAgICAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKCd5YXdmLWRpZmYtJyArIHR5cGUpOwogICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gcGFydDsKICAgICAgICAgICAgZnJhZ2VtZW50LmFwcGVuZENoaWxkKHNwYW4pOwogICAgICAgICAgICBpZiAocGFydCA9PT0gJ1xuJykgewogICAgICAgICAgICAgIGNvbnN0IGJyZWFrVG9rZW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpOwogICAgICAgICAgICAgIGJyZWFrVG9rZW4uY2xhc3NMaXN0LmFkZCgneWF3Zi1kaWZmLScgKyB0eXBlKTsKICAgICAgICAgICAgICBjb25zdCBicmVha0NoYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgYnJlYWtDaGFyLmNsYXNzTGlzdC5hZGQoJ1NfdHh0MicsICd5YXdmLWRpZmYtbGluZS1icmVhaycpOwogICAgICAgICAgICAgIGJyZWFrVG9rZW4uYXBwZW5kQ2hpbGQoYnJlYWtDaGFyKTsKICAgICAgICAgICAgICBmcmFnZW1lbnQuaW5zZXJ0QmVmb3JlKGJyZWFrVG9rZW4sIHNwYW4pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdlbWVudCk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0ZXh0CiAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvdXJjZQogICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQKICAgICAgICovCiAgICAgIGNvbnN0IHJlbmRlckltYWdlRGlmZiA9IGZ1bmN0aW9uIChyZWYsIHNvdXJjZSwgdGFyZ2V0KSB7CiAgICAgICAgd2hpbGUgKHJlZi5uZXh0U2libGluZykgcmVmLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocmVmLm5leHRTaWJsaW5nKTsKICAgICAgICAvKiogQHJldHVybnMge3N0cmluZ30gKi8KICAgICAgICBjb25zdCBnZXRJZCA9IGxpID0+IGxpLmdldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnKTsKICAgICAgICAvKiogQHJldHVybnMge1tIVE1MRWxlbWVudCwgc3RyaW5nLCBIVE1MRWxlbWVudFtdLCBTZXQ8c3RyaW5nPl19ICovCiAgICAgICAgY29uc3QgZ2V0SW1hZ2VzID0gZnVuY3Rpb24gKGRvbSkgewogICAgICAgICAgY29uc3Qgd3JhcCA9IGRvbS5xdWVyeVNlbGVjdG9yKCcuV0JfbWVkaWFfd3JhcCcpOwogICAgICAgICAgaWYgKCF3cmFwKSByZXR1cm4gW251bGwsICcnLCBbXSwgbmV3IFNldCgpXTsKICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHdyYXAuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ1NfbGluZTEnKTsKICAgICAgICAgIGNvbnN0IGh0bWwgPSBjb250YWluZXIuaW5uZXJIVE1MOwogICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKTsKICAgICAgICAgIGNvbnN0IGFjdGlvbkRhdGFzID0gbmV3IFNldChpdGVtcy5tYXAoZ2V0SWQpKTsKICAgICAgICAgIHJldHVybiBbY29udGFpbmVyLCBodG1sLCBpdGVtcywgYWN0aW9uRGF0YXNdOwogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVuZGVySW1hZ2VzID0gZnVuY3Rpb24gKGltYWdlcykgewogICAgICAgICAgcmVmLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoaW1hZ2VzKTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IGxpbmtJbWFnZSA9IGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICAgIGlmICghY29udGFpbmVyKSByZXR1cm47CiAgICAgICAgICBjb25zdCBpbWdzID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpOwogICAgICAgICAgaW1ncy5mb3JFYWNoKGltZyA9PiB7CiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGNvbnN0IHNyYyA9IG5ldyBVUkwoaW1nLnNyYykuaHJlZjsKICAgICAgICAgICAgbGluay5ocmVmID0gWydodHRwczovLycsIG5ldyBVUkwoc3JjKS5ob3N0LCAnL2xhcmdlJywgc3JjLm1hdGNoKC9cLyhbXi9dKikkL2cpXS5qb2luKCcnKTsKICAgICAgICAgICAgbGluay50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgICAgbGluay5jbGFzc05hbWUgPSAneWF3Zi1kaWZmLWltYWdlLWxpbmsnOwogICAgICAgICAgICBsaW5rLmFwcGVuZENoaWxkKGltZy5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChsaW5rLCBpbWcpKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgY29uc3QgW3NvdXJjZUltZywgc291cmNlSHRtbCwgc291cmNlSXRlbXMsIHNvdXJjZUFjdGlvbkRhdGFzXSA9IGdldEltYWdlcyhzb3VyY2UpOwogICAgICAgIGNvbnN0IFt0YXJnZXRJbWcsIHRhcmdldEh0bWwsIHRhcmdldEl0ZW1zLCB0YXJnZXRBY3Rpb25EYXRhc10gPSBnZXRJbWFnZXModGFyZ2V0KTsKICAgICAgICBsaW5rSW1hZ2Uoc291cmNlSW1nKTsKICAgICAgICBsaW5rSW1hZ2UodGFyZ2V0SW1nKTsKICAgICAgICAvLyDlpoLmnpzljovmoLnmsqHmnInlm77niYfvvIzlsLHku4DkuYjpg73kuI3nlKjlgZoKICAgICAgICBpZiAoIXNvdXJjZUltZyAmJiAhdGFyZ2V0SW1nKSByZXR1cm47CiAgICAgICAgLy8g5aaC5p6c5Zu+54mH5rKh5Y+Y77yM6YKj5LmI5bGV56S65LiA5Lu95bCx6KGM5LqGCiAgICAgICAgaWYgKHNvdXJjZUh0bWwgPT09IHRhcmdldEh0bWwpIHsKICAgICAgICAgIHJlbmRlckltYWdlcyhzb3VyY2VJbWcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyDmoIforrDkv67mlLkKICAgICAgICBjb25zdCBzb3VyY2VGaWx0ZXJlZEl0ZW1zID0gc291cmNlSXRlbXMubWFwKGl0ZW0gPT4gewogICAgICAgICAgaWYgKHRhcmdldEFjdGlvbkRhdGFzLmhhcyhnZXRJZChpdGVtKSkpIHJldHVybiBpdGVtOwogICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWltZy1kZWxldGUnKTsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0pLmZpbHRlcihpdGVtID0+IGl0ZW0pOwogICAgICAgIGNvbnN0IHRhcmdldEZpbHRlcmVkSXRlbXMgPSB0YXJnZXRJdGVtcy5tYXAoaXRlbSA9PiB7CiAgICAgICAgICBpZiAoc291cmNlQWN0aW9uRGF0YXMuaGFzKGdldElkKGl0ZW0pKSkgcmV0dXJuIGl0ZW07CiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtaW1nLWluc2VydCcpOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSkuZmlsdGVyKGl0ZW0gPT4gaXRlbSk7CiAgICAgICAgc291cmNlRmlsdGVyZWRJdGVtcy5mb3JFYWNoKChzb3VyY2VJdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldEZpbHRlcmVkSXRlbXNbaW5kZXhdOwogICAgICAgICAgaWYgKGdldElkKHNvdXJjZUl0ZW0pID09PSBnZXRJZCh0YXJnZXRJdGVtKSkgcmV0dXJuOwogICAgICAgICAgc291cmNlSXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWltZy1yZW9yZGVyJyk7CiAgICAgICAgICB0YXJnZXRJdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtaW1nLXJlb3JkZXInKTsKICAgICAgICB9KTsKICAgICAgICAvLyDmnIDlkI7miorku5bku6zmmL7npLrlh7rmnaUKICAgICAgICBpZiAoc291cmNlSW1nKSByZW5kZXJJbWFnZXMoc291cmNlSW1nKTsKICAgICAgICBpZiAodGFyZ2V0SW1nKSByZW5kZXJJbWFnZXModGFyZ2V0SW1nKTsKICAgICAgfTsKICAgICAgY29uc3QgcmVuZGVyRGlmZiA9IGZ1bmN0aW9uIChjb250YWluZXIsIHZlcnNpb24xLCB2ZXJzaW9uMikgewogICAgICAgIGNvbnN0IFtzb3VyY2UsIHRhcmdldF0gPSBbdmVyc2lvbjEsIHZlcnNpb24yXS5zb3J0KCh2MSwgdjIpID0+IHYxLmluZGV4IC0gdjIuaW5kZXgpOwogICAgICAgIGNvbnN0IHRleHQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLldCX3RleHQnKTsKICAgICAgICByZW5kZXJUZXh0RGlmZih0ZXh0LCBzb3VyY2UudGV4dCwgdGFyZ2V0LnRleHQpOwogICAgICAgIHJlbmRlckltYWdlRGlmZih0ZXh0LCBzb3VyY2UuZG9tLCB0YXJnZXQuZG9tKTsKICAgICAgfTsKICAgICAgY29uc3Qgc2hvd0NvbnRlbnQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCB2ZXJzaW9uLCBkaWZmKSB7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh2ZXJzaW9uLmRvbS5jbG9uZU5vZGUodHJ1ZSkpOwogICAgICAgIGlmICghZGlmZiB8fCBkaWZmID09PSB2ZXJzaW9uKSByZXR1cm47CiAgICAgICAgcmVuZGVyRGlmZihjb250YWluZXIsIHZlcnNpb24sIGRpZmYpOwogICAgICB9OwogICAgICBjb25zdCBkaWFsb2dSZW5kZXIgPSBhc3luYyBmdW5jdGlvbiAoY29udGFpbmVyLCBmZWVkSGlzdG9yeVByb21pc2UpIHsKICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1mZWVkLWVkaXQtZGlhbG9nLWNvbnRlbnQnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9Inlhd2YtZmVlZC1lZGl0LXNlbGVjdCBTX2JnMSBTX2xpbmUxIj48ZGl2IGNsYXNzPSJ5YXdmLWZlZWQtZWRpdC1zZWxlY3QtdGl0bGUgU19saW5lMSI+PC9kaXY+PG9sIGNsYXNzPSJ5YXdmLWZlZWQtZWRpdC1saXN0IHlhd2YtZmVlZC1lZGl0LXNlbGVjdC1saXN0IFNfbGluZTEiPjwvb2w+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1mZWVkLWVkaXQtdmlldyI+PGRpdiBjbGFzcz0ieWF3Zi1mZWVkLWVkaXQtdmlldy1jb250ZW50Ij48ZGl2IGNsYXNzPSJ5YXdmLWZlZWQtZWRpdC1sb2FkaW5nIj48ZGl2IGNsYXNzPSJXQl9lbXB0eSI+PGRpdiBjbGFzcz0iV0JfaW5uZXJ3cmFwIj48ZGl2IGNsYXNzPSJlbXB0eV9jb24gY2xlYXJmaXgiPjxwIGNsYXNzPSJpY29uX2JlZCI+PGkgY2xhc3M9IldfaWNvbiBpY29uX3dhcm5CIj48L2k+PC9wPjxwIGNsYXNzPSJ0ZXh0Ij48L3A+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1mZWVkLWVkaXQtZGlmZiBTX2JnMSBTX2xpbmUxIj48ZGl2IGNsYXNzPSJ5YXdmLWZlZWQtZWRpdC1kaWZmLXRpdGxlIFNfbGluZTEiPjwvZGl2PjxvbCBjbGFzcz0ieWF3Zi1mZWVkLWVkaXQtbGlzdCB5YXdmLWZlZWQtZWRpdC1kaWZmLWxpc3QgU19saW5lMSI+PC9vbD48L2Rpdj5gOwogICAgICAgIGNvbnN0IGxvYWRpbmdUZXh0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZlZWQtZWRpdC1sb2FkaW5nIC50ZXh0Jyk7CiAgICAgICAgbG9hZGluZ1RleHQudGV4dENvbnRlbnQgPSBpMThuLnZpZXdFZGl0TG9hZGluZzsKICAgICAgICBjb25zdCBzZWxlY3RUaXRsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWVkaXQtc2VsZWN0LXRpdGxlJyk7CiAgICAgICAgY29uc3QgZGlmZlRpdGxlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZlZWQtZWRpdC1kaWZmLXRpdGxlJyk7CiAgICAgICAgY29uc3Qgc2VsZWN0TGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWVkaXQtc2VsZWN0LWxpc3QnKTsKICAgICAgICBjb25zdCBkaWZmTGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWVkaXQtZGlmZi1saXN0Jyk7CiAgICAgICAgY29uc3QgY29udGVudCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWVkaXQtdmlldy1jb250ZW50Jyk7CiAgICAgICAgc2VsZWN0VGl0bGUudGV4dENvbnRlbnQgPSBpMThuLnNlbGVjdEZlZWRWZXJzaW9uOwogICAgICAgIGRpZmZUaXRsZS50ZXh0Q29udGVudCA9IGkxOG4uZGlmZkZlZWRWZXJzaW9uOwogICAgICAgIGNvbnN0IHZlcnNpb25zID0gYXdhaXQgZmVlZEhpc3RvcnlQcm9taXNlOwogICAgICAgIGNvbnN0IHNlbGVjdFZlcnNpb25zID0gbmV3IFdlYWtNYXAoKTsKICAgICAgICBjb25zdCBkaWZmVmVyc2lvbnMgPSBuZXcgV2Vha01hcCgpOwogICAgICAgIGxldCBjdXJyZW50VmVyc2lvbiA9IG51bGw7CiAgICAgICAgY29uc3QgaGlnaGxpZ2h0VmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uLCBsaXN0KSB7CiAgICAgICAgICBjb25zdCBjdXJyZW50ID0gbGlzdC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudCcpOwogICAgICAgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcsICdTX2JnMicpOwogICAgICAgICAgaWYgKHZlcnNpb24pIHsKICAgICAgICAgICAgdmVyc2lvbi5jbGFzc0xpc3QuYWRkKCdjdXJyZW50JywgJ1NfYmcyJyk7CiAgICAgICAgICAgIHZlcnNpb24uc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ25lYXJlc3QnIH0pOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3Qgc2V0U2VsZWN0VmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7CiAgICAgICAgICBjdXJyZW50VmVyc2lvbiA9IHZlcnNpb247CiAgICAgICAgICBoaWdobGlnaHRWZXJzaW9uKHNlbGVjdFZlcnNpb25zLmdldCh2ZXJzaW9uKSwgc2VsZWN0TGlzdCk7CiAgICAgICAgICBoaWdobGlnaHRWZXJzaW9uKGRpZmZWZXJzaW9ucy5nZXQodmVyc2lvbiksIGRpZmZMaXN0KTsKICAgICAgICAgIHNob3dDb250ZW50KGNvbnRlbnQsIHZlcnNpb24sIG51bGwpOwogICAgICAgIH07CiAgICAgICAgY29uc3Qgc2V0RGlmZlZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbikgewogICAgICAgICAgaGlnaGxpZ2h0VmVyc2lvbihkaWZmVmVyc2lvbnMuZ2V0KHZlcnNpb24pLCBkaWZmTGlzdCk7CiAgICAgICAgICBzaG93Q29udGVudChjb250ZW50LCBjdXJyZW50VmVyc2lvbiwgdmVyc2lvbik7CiAgICAgICAgfTsKICAgICAgICBbCiAgICAgICAgICB7IHRpbWVMaXN0OiBzZWxlY3RMaXN0LCBvbkNsaWNrOiBzZXRTZWxlY3RWZXJzaW9uLCB2ZXJzaW9uTWFwOiBzZWxlY3RWZXJzaW9ucyB9LAogICAgICAgICAgeyB0aW1lTGlzdDogZGlmZkxpc3QsIG9uQ2xpY2s6IHNldERpZmZWZXJzaW9uLCB2ZXJzaW9uTWFwOiBkaWZmVmVyc2lvbnMgfSwKICAgICAgICBdLmZvckVhY2goKHsgdGltZUxpc3QsIG9uQ2xpY2ssIHZlcnNpb25NYXAgfSkgPT4gewogICAgICAgICAgdmVyc2lvbnMuZm9yRWFjaCh2ZXJzaW9uID0+IHsKICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKCdTX2xpbmUxJyk7CiAgICAgICAgICAgIGxpLmlubmVySFRNTCA9ICc8YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJTX3R4dDEiPjwvYT4nOwogICAgICAgICAgICBjb25zdCBhID0gbGkuZmlyc3RDaGlsZDsKICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9IHV0aWwudGltZS5mb3JtYXQodmVyc2lvbi5kYXRlLCB7IGZvcm1hdDogJ21vbnRoJywgbG9jYWxlOiB0aW1lTG9jYWxlIH0pOwogICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgICAgICBvbkNsaWNrKHZlcnNpb24pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGltZUxpc3QuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgICAgICB2ZXJzaW9uTWFwLnNldCh2ZXJzaW9uLCBsaSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBzZXRTZWxlY3RWZXJzaW9uKHZlcnNpb25zWzBdKTsKICAgICAgICBzZXREaWZmVmVyc2lvbih2ZXJzaW9uc1t2ZXJzaW9ucy5sZW5ndGggLSAxXSk7CiAgICAgIH07CiAgICAgIGNvbnN0IHNob3dFZGl0SW5mbyA9IGZ1bmN0aW9uIChtaWQpIHsKICAgICAgICBjb25zdCBmZWVkSGlzdG9yeVByb21pc2UgPSByZXF1ZXN0LmZlZWRIaXN0b3J5KG1pZCk7CiAgICAgICAgY29uc3QgaGlzdG9yeURpYWxvZyA9IHVpLmRpYWxvZyh7CiAgICAgICAgICBpZDogJ3lhd2YtZmVlZC1lZGl0JywKICAgICAgICAgIHRpdGxlOiBpMThuLnZpZXdFZGl0VGl0bGUsCiAgICAgICAgICByZW5kZXIoY29udGFpbmVyKSB7CiAgICAgICAgICAgIGRpYWxvZ1JlbmRlcihjb250YWluZXIsIGZlZWRIaXN0b3J5UHJvbWlzZSk7CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICAgIGhpc3RvcnlEaWFsb2cuc2hvdygpOwogICAgICB9OwogICAgICBvYnNlcnZlci5mZWVkLm9uQWZ0ZXIoZnVuY3Rpb24gKGZlZWQpIHsKICAgICAgICBjb25zdCBlZGl0ZWRMaXN0ID0gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mZWVkX2RldGFpbCAuV0JfZnJvbSBzcGFuW3RpdGxlXScpKTsKICAgICAgICBlZGl0ZWRMaXN0LmZvckVhY2goZWRpdGVkID0+IHsKICAgICAgICAgIGNvbnN0IGZlZWROb2RlID0gZmVlZFBhcnNlci5mZWVkTm9kZShlZGl0ZWQpOwogICAgICAgICAgY29uc3QgaXNGb3J3YXJkID0gZWRpdGVkLmNsb3Nlc3QoJy5XQl9mZWVkX2V4cGFuZCcpOwogICAgICAgICAgY29uc3QgbWlkID0gZmVlZE5vZGUuZ2V0QXR0cmlidXRlKGlzRm9yd2FyZCA/ICdvbWlkJyA6ICdtaWQnKTsKICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgIGJ1dHRvbi5ocmVmID0gJ2phdmFzY3JpcHQ6Oyc7CiAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBpMThuLnZpZXdFZGl0SW5mb0VkaXRlZDsKICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd5YXdmLWVkaXRlZCcsICdTX3R4dDInKTsKICAgICAgICAgIGVkaXRlZC5yZXBsYWNlV2l0aChidXR0b24pOwogICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzaG93RWRpdEluZm8obWlkKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIGNzcy5hcHBlbmQoYAoueWF3Zi1mZWVkLWVkaXQtZGlhbG9nLWNvbnRlbnQgeyB3aWR0aDogODYwcHg7IGhlaWdodDogNDgwcHg7IGRpc3BsYXk6IGZsZXg7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdCwgLnlhd2YtZmVlZC1lZGl0LWRpZmYgeyB3aWR0aDogMTgwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZy10b3A6IDQwcHg7IHBvc2l0aW9uOiByZWxhdGl2ZTt9Ci55YXdmLWZlZWQtZWRpdC12aWV3IHsgd2lkdGg6IDUwMHB4OyBib3JkZXI6IDAgc29saWQ7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC1saXN0IHsgZGlyZWN0aW9uOiBydGw7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC10aXRsZSwgLnlhd2YtZmVlZC1lZGl0LWRpZmYtdGl0bGUgeyBmb250LXdlaWdodDogYm9sZDsgcGFkZGluZzogMTBweCAwOyBsaW5lLWhlaWdodDogMTlweDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IHdpZHRoOiBjYWxjKDEwMCUgLSAxcHgpOyBib3JkZXItYm90dG9tOiAxcHggc29saWQ7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC10aXRsZSwgLnlhd2YtZmVlZC1lZGl0LXNlbGVjdCBsaSB7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkOyB9Ci55YXdmLWZlZWQtZWRpdC1kaWZmLXRpdGxlLCAueWF3Zi1mZWVkLWVkaXQtZGlmZiBsaSB7IGJvcmRlci1sZWZ0OiAxcHggc29saWQ7IH0KLnlhd2YtZmVlZC1lZGl0LWxpc3QgeyBoZWlnaHQ6IDEwMCU7IG92ZXJmbG93OiBhdXRvOyB9Ci55YXdmLWZlZWQtZWRpdC1saXN0OjpiZWZvcmUgeyBjb250ZW50OiAiICI7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkOyBib3JkZXItcmlnaHQtY29sb3I6IGluaGVyaXQ7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7IH0KLnlhd2YtZGlmZi1zYW1lIC55YXdmLWRpZmYtbGluZS1icmVhayB7IGRpc3BsYXk6IG5vbmU7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC1saXN0OjpiZWZvcmUgeyByaWdodDogMDsgfQoueWF3Zi1mZWVkLWVkaXQtZGlmZi1saXN0OjpiZWZvcmUgeyBsZWZ0OiAwOyB9Ci55YXdmLWZlZWQtZWRpdC1saXN0IGxpIHsgbGluZS1oZWlnaHQ6IDI5cHg7IGRpcmVjdGlvbjogbHRyOyBib3JkZXItYm90dG9tOiAxcHggc29saWQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1mZWVkLWVkaXQtbGlzdCBsaSBhIHsgZGlzcGxheTogYmxvY2s7IH0KLnlhd2YtZmVlZC1lZGl0LWxpc3QgbGkgYTpob3ZlciwgLnlhd2YtZmVlZC1lZGl0LWxpc3QgbGkuY3VycmVudCBhIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC1saXN0IGxpLmN1cnJlbnQgeyBib3JkZXItcmlnaHQ6IDA7IH0KLnlhd2YtZmVlZC1lZGl0LWRpZmYtbGlzdCBsaS5jdXJyZW50IHsgYm9yZGVyLWxlZnQ6IDA7IH0KLnlhd2YtZmVlZC1lZGl0LXZpZXcgeyBvdmVyZmxvdzogYXV0bzsgfQoueWF3Zi1mZWVkLWVkaXQtdmlldyAuV0JfdGV4dCB7IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgfQoueWF3Zi1mZWVkLWVkaXQtdmlldyAuV0JfbWVkaWFfd3JhcCB7IG1hcmdpbi10b3A6IDEwcHg7IH0KLnlhd2YtZGlmZi1pbnNlcnQgeyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgcmdiYSgwLCAyNTUsIDAsIDAuMTUpIDAsIHJnYmEoMCwgMjU1LCAwLCAwLjE1KSBjYWxjKDk0JSAtIDFweCksIGN1cnJlbnRDb2xvciA5NCUsIGN1cnJlbnRDb2xvciAxMDAlKSB9Ci55YXdmLWRpZmYtZGVsZXRlIHsgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHJnYmEoMjU1LCAwLCAwLCAwLjE1KSAwLCByZ2JhKDI1NSwgMCwgMCwgMC4xNSkgY2FsYyg1MyUgLSAxcHgpLCBjdXJyZW50Q29sb3IgNTMlLCBjdXJyZW50Q29sb3IgNTklLCByZ2JhKDI1NSwgMCwgMCwgMC4xNSkgY2FsYyg1OSUgKyAxcHgpLCByZ2JhKDI1NSwgMCwgMCwgMC4xNSkgMTAwJSk7IH0KLnlhd2YtZGlmZi1saW5lLWJyZWFrOjpiZWZvcmUgeyBjb250ZW50OiAi4oa1IjsgdXNlci1zZWxlY3Q6IG5vbmU7IH0KLnlhd2YtaW1nLWluc2VydCB7IG91dGxpbmU6IDNweCBzb2xpZCAjM2MzOyB9Ci55YXdmLWltZy1kZWxldGUgeyBvdXRsaW5lOiAzcHggZGFzaGVkICNjMzM7IH0KLnlhd2YtaW1nLXJlb3JkZXIgeyBvdXRsaW5lOiAzcHggZG90dGVkICMzNmY7IH0KLnlhd2YtZmVlZC1lZGl0LXZpZXctY29udGVudCAuV0JfbWVkaWFfd3JhcCB+IC5XQl9tZWRpYV93cmFwIHsgYm9yZGVyLXRvcC13aWR0aDogMXB4OyBib3JkZXItdG9wLXN0eWxlOiBzb2xpZDsgcGFkZGluZy10b3A6IDEwcHg7IH0KLnlhd2YtZGlmZi1pbWFnZS1saW5rIHsgY3Vyc29yOiB6b29tLWluOyB9CmApOwogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICB2aWV3QXJ0aWNsZUlubGluZTogewogICAgICBjbjogJ+WGheW1jOWxleekuuWktOadoeaWh+eroCB7e2l9fScsCiAgICAgIHR3OiAn5YWn5bWM5bGV56S66aCt5qKd5paH56ugIHt7aX19JywKICAgICAgZW46ICdTaG93IGFydGljbGVzIGlubGluZSB7e2l9fScsCiAgICB9LAogICAgdmlld0FydGljbGVJbmxpbmVEZXRhaWw6IHsKICAgICAgY246ICfku5jotLnlhoXlrrnlj6/og73ml6Dms5XlnKjlhoXltYzmqKHlvI/kuK3mraPluLjmn6XnnIvvvIzpnIDopoHmiZPlvIDmlofnq6DpobXmtY/op4jjgIInLAogICAgfSwKICAgIGZvbGRBcnRpY2xlOiB7IGNuOiAn5pS26LW3JywgZW46ICdWaWV3IExlc3MnIH0sCiAgICB2aWV3QXJ0aWNsZTogeyBjbjogJ+afpeeci+aWh+eroCcsIGVuOiAnVmlldyBBcnRpY2xlJyB9LAogICAgZmVlZEFydGljbGU6IHsgY246ICfmn6XnnIvljp/lvq7ljZonLCBlbjogJ1ZpZXcgT3JpZ2luYWwgRmVlZCcgfSwKICAgIHZpZXdBcnRpY2xlU291cmNlOiB7IGNuOiAn5p+l55yL5rqQ572R5Z2AJywgdHc6ICfmn6XnnIvmupDntrLlnYAnLCBlbjogJ1ZpZXcgU291cmNlJyB9LAogICAgYXJ0aWNsZUxvYWRpbmc6IHsgY246ICfmraPlnKjliqDovb3igKbigKYnLCB0dzogJ+ato+WcqOi8ieWFpeKApuKApicsIGVuOiAnTG9hZGluZyAuLi4nIH0sCiAgICBhcnRpY2xlRmFpbDogeyBjbjogJ+WKoOi9veWksei0pScsIHR3OiAn6L295YWl5aSx6LSlJywgZW46ICdGYWlsZWQgdG8gbG9hZCBhcnRpY2xlJyB9LAogIH0pOwoKICAvLyDnm7TmjqXlnKjlvq7ljZrlhoXmmL7npLrlpLTmnaHmlofnq6AKICBjb250ZW50LnZpZXdBcnRpY2xlSW5saW5lID0gcnVsZS5SdWxlKHsKICAgIGlkOiAndmlld19hcnRpY2xlX2lubGluZScsCiAgICB2ZXJzaW9uOiA1NSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udmlld0FydGljbGVJbmxpbmUsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi52aWV3QXJ0aWNsZUlubGluZURldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICAvLyDlvZMgaWZyYW1lIOWGheWuueeahOWwuuWvuOWPkeeUn+WPmOWMluaXtu+8jOaIkeS7rOimgeWwhuWPmOWMluWPjemmiOe7meS4iuWxggogICAgICBjb25zdCByZXNpemVTZW5zb3IgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYWxsYmFjaywgLyoqIEB0eXBlIHtEb2N1bWVudH0gKi9kb2N1bWVudCwgLyoqIEB0eXBlIHtXaW5kb3d9ICovd2luZG93KSB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJyZXNpemUtc2Vuc29yIj48ZGl2IGNsYXNzPSJyZXNpemUtc2Vuc29yLWV4cGFuZCI+PGRpdiBjbGFzcz0icmVzaXplLXNlbnNvci1jaGlsZCI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0icmVzaXplLXNlbnNvci1zaHJpbmsiPjxkaXYgY2xhc3M9InJlc2l6ZS1zZW5zb3ItY2hpbGQiPjwvZGl2PjwvZGl2PjwvZGl2Pic7CiAgICAgICAgLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH0gKi8KICAgICAgICBjb25zdCBzZW5zb3IgPSBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICAvKiogQHR5cGUge0hUTUxEaXZFbGVtZW50fSAqLwogICAgICAgIGNvbnN0IGV4cGFuZCA9IHNlbnNvci5maXJzdENoaWxkOwogICAgICAgIC8qKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9ICovCiAgICAgICAgY29uc3Qgc2hyaW5rID0gZXhwYW5kLm5leHRTaWJsaW5nOwogICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChzZW5zb3IpOwoKICAgICAgICBsZXQgbGFzdFdpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoOwogICAgICAgIGxldCBsYXN0SGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodDsKICAgICAgICBsZXQgbmV3V2lkdGgsIG5ld0hlaWdodCwgZGlydHk7CiAgICAgICAgY29uc3QgcmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBleHBhbmQuc2Nyb2xsVG9wID0gMWU4OwogICAgICAgICAgZXhwYW5kLnNjcm9sbExlZnQgPSAxZTg7CiAgICAgICAgICBzaHJpbmsuc2Nyb2xsVG9wID0gMWU4OwogICAgICAgICAgc2hyaW5rLnNjcm9sbExlZnQgPSAxZTg7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBvblJlc2l6ZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAobGFzdFdpZHRoID09PSBuZXdXaWR0aCAmJiBsYXN0SGVpZ2h0ID09PSBuZXdIZWlnaHQpIHJldHVybiBmYWxzZTsKICAgICAgICAgIGxhc3RXaWR0aCA9IG5ld1dpZHRoOwogICAgICAgICAgbGFzdEhlaWdodCA9IG5ld0hlaWdodDsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICByZXNldCgpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBvblNjcm9sbCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgbmV3V2lkdGggPSB0YXJnZXQub2Zmc2V0V2lkdGg7CiAgICAgICAgICBuZXdIZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgaWYgKGRpcnR5KSByZXR1cm47IGRpcnR5ID0gdHJ1ZTsKICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRpcnR5ID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChvblJlc2l6ZWQoKSkgb25TY3JvbGwoKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgcmVzZXQoKTsKICAgICAgICBvblNjcm9sbCgpOwogICAgICAgIGV4cGFuZC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCk7CiAgICAgICAgc2hyaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTsKICAgICAgfTsKCiAgICAgIC8vIOimgeazqOWFpeWIsOWNoeeJh+WGheeahOagt+W8jwogICAgICBjb25zdCBpbmplY3RTdHlsZSA9IGAKLldCX2VkaXRvcl9pZnJhbWVfbmV3IC5XQl9mZWVkX3YzIHsgbWF4LXdpZHRoOiAxMDAlOyB9CmA7CgogICAgICAvLyDopoHms6jlhaXliLDmlofnq6DpobXnmoTmoLflvI8KICAgICAgY29uc3QgY29udGVudFN0eWxlID0gYApodG1sIHsgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7IC13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJTsgbGluZS1oZWlnaHQ6IDEuNTsgY29sb3I6IHZhcigtLXRleHQtY29sb3IpOyBmb250LWZhbWlseTogdmFyKC0tZm9udC1mYW1pbHkpOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS41OyB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IH0KYm9keSB7IG1hcmdpbjogMDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoqIHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfQo+ICo6Zmlyc3QtY2hpbGQgeyBtYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7IH0KPiAqOmxhc3QtY2hpbGQgeyBtYXJnaW4tYm90dG9tOiAwICFpbXBvcnRhbnQ7IH0KYSB7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyBjb2xvcjogdmFyKC0tbGluay1jb2xvcik7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9CmJsb2NrcXVvdGUgeyBtYXJnaW46IDAgMCAxMHB4OyBwYWRkaW5nOiAwIDFlbTsgYmFja2dyb3VuZDogIzgwODA4MDIyOyBib3JkZXItbGVmdDogMC4yNWVtIHNvbGlkICM4MDgwODA0NDsgcGFkZGluZzogMjBweDsgfQpibG9ja3F1b3RlID4gOmZpcnN0LWNoaWxkIHsgbWFyZ2luLXRvcDogMDsgfQpibG9ja3F1b3RlID4gOmxhc3QtY2hpbGQgeyBtYXJnaW4tYm90dG9tOiAwOyB9CmZpZ3VyZSB7IG1hcmdpbjogMCAwIDEwcHg7IHBhZGRpbmc6IDAgMWVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KZmlnY2FwdGlvbiB7IHRleHQtYWxpZ246IGNlbnRlcjsgfQpoMSwgaDIsIGgzLCBoNCwgaDUsIGg2IHsgbWFyZ2luLXRvcDogMjRweDsgbWFyZ2luLWJvdHRvbTogMTZweDsgZm9udC13ZWlnaHQ6IDYwMDsgbGluZS1oZWlnaHQ6IDEuMjU7IH0KaDEgeyBtYXJnaW46IDAuNjdlbSAwOyBwYWRkaW5nLWJvdHRvbTogMC4zZW07IGZvbnQtc2l6ZTogMmVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzgwODA4MDIyOyB9CmgyIHsgcGFkZGluZy1ib3R0b206IDAuM2VtOyBmb250LXNpemU6IDEuNWVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzgwODA4MDIyOyB9CmgzIHsgZm9udC1zaXplOiAxLjI1ZW07IH0KaDQgeyBmb250LXNpemU6IDFlbTsgfQpoNSB7IGZvbnQtc2l6ZTogMC44NzVlbTsgfQpoNiB7IGZvbnQtc2l6ZTogMC44NWVtOyB9CmhyIHsgYm94LXNpemluZzogY29udGVudC1ib3g7IG92ZXJmbG93OiBoaWRkZW47IGhlaWdodDogMnB4OyBwYWRkaW5nOiAwOyBtYXJnaW46IDI0cHggMDsgYmFja2dyb3VuZC1jb2xvcjogIzgwODA4MDExOyBib3JkZXI6IDA7IH0KaHI6OmFmdGVyIHsgZGlzcGxheTogdGFibGU7IGNsZWFyOiBib3RoOyBjb250ZW50OiAiIjsgfQpocjo6YmVmb3JlIHsgZGlzcGxheTogdGFibGU7IGNvbnRlbnQ6ICIiOyB9CmltZyB7IGJvcmRlci1zdHlsZTogbm9uZTsgbWF4LXdpZHRoOiAxMDAlOyBib3gtc2l6aW5nOiBjb250ZW50LWJveDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1jb2xvcik7IH0KbGkgKyBsaSB7IG1hcmdpbi10b3A6IDAuMjVlbTsgfQpsaSA+IHAgeyBtYXJnaW4tdG9wOiAxNnB4OyB9CnAgeyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9CnAsIGJsb2NrcXVvdGUsIHVsLCBvbCwgdGFibGUgeyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAxNnB4OyB9CnRhYmxlIHsgYm9yZGVyLXNwYWNpbmc6IDA7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IH0KdGFibGUgdGggeyBmb250LXdlaWdodDogYm9sZDsgfQp0YWJsZSB0aCwgdGFibGUgdGQgeyBwYWRkaW5nOiA2cHggMTNweDsgYm9yZGVyOiAxcHggc29saWQgIzgwODA4MDQ0OyB9CnRhYmxlIHRyIHsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7IH0KdGFibGUgdHI6bnRoLWNoaWxkKDJuKSB7IGJhY2tncm91bmQtY29sb3I6ICM4MDgwODAxMTsgfQp0ZCwgdGggeyBwYWRkaW5nOiAwOyB9CnVsLCBvbCB7IHBhZGRpbmctbGVmdDogMmVtOyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAwOyB9CnVsIHsgbGlzdC1zdHlsZTogb3V0c2lkZTsgfQp1bCB1bCBvbCwgdWwgb2wgb2wsIG9sIHVsIG9sLCBvbCBvbCBvbCB7IGxpc3Qtc3R5bGUtdHlwZTogbG93ZXItYWxwaGE7IH0KdWwgdWwsIHVsIG9sLCBvbCBvbCwgb2wgdWwgeyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAwOyB9CmlmcmFtZSB7IHdpZHRoOiAxMDAlOyBib3JkZXI6IDAgbm9uZTsgbWF4LXdpZHRoOiA2MDBweDsgfQp2aWRlbyB7IG1heC13aWR0aDogMTAwJTsgbWF4LWhlaWdodDogMTAwdmg7IH0KCmJvZHkgeyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLnJlc2l6ZS1zZW5zb3IsIC5yZXNpemUtc2Vuc29yLWV4cGFuZCwgLnJlc2l6ZS1zZW5zb3Itc2hyaW5rIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGJvdHRvbTogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IG92ZXJmbG93OiBoaWRkZW47IHotaW5kZXg6IC0xOyB2aXNpYmlsaXR5OiBoaWRkZW47IH0KLnJlc2l6ZS1zZW5zb3ItZXhwYW5kIC5yZXNpemUtc2Vuc29yLWNoaWxkIHsgd2lkdGg6IDEwMDAwMHB4OyBoZWlnaHQ6IDEwMDAwMHB4OyB9Ci5yZXNpemUtc2Vuc29yLXNocmluayAucmVzaXplLXNlbnNvci1jaGlsZCB7IHdpZHRoOiAyMDAlOyBoZWlnaHQ6IDIwMCU7IH0KLnJlc2l6ZS1zZW5zb3ItY2hpbGQgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgdHJhbnNpdGlvbjogMHM7IH0KYDsKCiAgICAgIC8vIOa4suafk+aWh+eroAogICAgICBjb25zdCByZW5kZXJBcnRpY2xlID0gZnVuY3Rpb24gKGFydGljbGUsIHN0eWxlLCBpbkZvcndhcmQpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAo8ZGl2IGNsYXNzPSJXQl9leHBhbmRfbWVkaWFfYm94IGNsZWFyZml4Ij4KPGRpdiBjbGFzcz0iV0JfZXhwYW5kX21lZGlhIj4KPGRpdiBjbGFzcz0ieWF3Zi1hcnRpY2xlIFNfYmcyIFNfbGluZTEiPgo8ZGl2IGNsYXNzPSJ0YWJfZmVlZF9hIGNsZWFyZml4IHlhd2YtYXJ0aWNsZS1oYW5kbGUgU19iZzIiPjxkaXYgY2xhc3M9InRhYiI+PHVsIGNsYXNzPSJjbGVhcmZpeCI+CjxsaT48c3BhbiBjbGFzcz0ibGluZSBTX2xpbmUxIj48YSBjbGFzcz0iU190eHQxIHlhd2YtYXJ0aWNsZS1mb2xkIiBocmVmPSJqYXZhc2NyaXB0OjsiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX2Fycm93X2ZvbGQgU19maWNvbiI+azwvaT48L2E+PC9zcGFuPjwvbGk+CjxsaT48c3BhbiBjbGFzcz0ibGluZSBTX2xpbmUxIj48YSBjbGFzcz0iU190eHQxIHlhd2YtYXJ0aWNsZS12aWV3IiBocmVmPSIiIHRhcmdldD0iX2JsYW5rIj48aSBjbGFzcz0iV19maWNvbiBmaWNvbl9zZWFyY2ggU19maWNvbiI+wrA8L2k+PC9hPjwvc3Bhbj48L2xpPgo8bGk+PHNwYW4gY2xhc3M9ImxpbmUgU19saW5lMSI+PGEgY2xhc3M9IlNfdHh0MSB5YXdmLWFydGljbGUtZmVlZCIgaHJlZj0iIiB0YXJnZXQ9Il9ibGFuayI+PGkgY2xhc3M9IldfZmljb24gZmljb25fc2VhcmNoIFNfZmljb24iPlx1ZTYwNDwvaT48L2E+PC9zcGFuPjwvbGk+CjxsaT48c3BhbiBjbGFzcz0ibGluZSBTX2xpbmUxIj48YSBjbGFzcz0iU190eHQxIHlhd2YtYXJ0aWNsZS1zb3VyY2UiIGhyZWY9IiIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm8tcmVmZXJyZXIiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX3NlYXJjaCBTX2ZpY29uIj5sPC9pPjwvYT48L3NwYW4+PC9saT4KPC91bD48L2Rpdj48L2Rpdj4KPGRpdiBjbGFzcz0ieWF3Zi1hcnRpY2xlLWJvZHkiPgo8ZGl2IGNsYXNzPSJ5YXdmLWFydGljbGUtdGl0bGUiPjwvZGl2Pgo8ZGl2IGNsYXNzPSJ5YXdmLWFydGljbGUtbWV0YSI+CjxzcGFuIGNsYXNzPSJ5YXdmLWFydGljbGUtYXV0aG9yIj48YSB0YXJnZXQ9Il9ibGFuayI+PGltZyBjbGFzcz0iV19mYWNlX3JhZGl1cyIgLz48L2E+PC9zcGFuPgo8c3BhbiBjbGFzcz0ieWF3Zi1hcnRpY2xlLWF1dGhvci1pbm5lciI+PC9zcGFuPgo8c3BhbiBjbGFzcz0ieWF3Zi1hcnRpY2xlLXRpbWUiPjwvc3Bhbj4KPC9kaXY+CjxkaXYgY2xhc3M9Inlhd2YtYXJ0aWNsZS1sZWFkIj48L2Rpdj4KPGRpdiBjbGFzcz0ieWF3Zi1hcnRpY2xlLWNvdmVyIj48aW1nIC8+PC9kaXY+CjxkaXYgY2xhc3M9Inlhd2YtYXJ0aWNsZS1sb2FkaW5nIj48aSBjbGFzcz0iV19sb2FkaW5nIj48L2k+IDwvZGl2Pgo8ZGl2IGNsYXNzPSJ5YXdmLWFydGljbGUtY29udGVudCI+PGlmcmFtZSB0aXRsZT0iIiBzdHlsZT0idmlzaWJpbGl0eTogaGlkZGVuOyBoZWlnaHQ6IDFweDsiIHNhbmRib3g9ImFsbG93LXBvcHVwcyBhbGxvdy1wb3B1cHMtdG8tZXNjYXBlLXNhbmRib3ggYWxsb3ctc2FtZS1vcmlnaW4iPjwvaWZyYW1lPjwvZGl2Pgo8L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8L2Rpdj4KYDsKICAgICAgICBpZiAoIWFydGljbGUuY29udGVudCkgewogICAgICAgICAgY29uc3QgYm9keSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1hcnRpY2xlLWJvZHknKTsKICAgICAgICAgIGJvZHkudGV4dENvbnRlbnQgPSBpMThuLmFydGljbGVGYWlsOwogICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgICB9CiAgICAgICAgLy8g5qCH6aKYCiAgICAgICAgY29uc3QgdGl0bGUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS10aXRsZScpOwogICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gYXJ0aWNsZS50aXRsZSA/PyAnJzsKICAgICAgICAvLyDkvZzogIUKICAgICAgICBjb25zdCBhdXRob3IgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS1hdXRob3InKTsKICAgICAgICBpZiAoYXJ0aWNsZS5hdXRob3IpIHsKICAgICAgICAgIGF1dGhvci5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zcmMgPSBhcnRpY2xlLmF1dGhvci5hdmF0YXI7CiAgICAgICAgICBjb25zdCBsaW5rID0gYXV0aG9yLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICAgIGxpbmsuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYXJ0aWNsZS5hdXRob3IubmFtZSkpOwogICAgICAgICAgbGluay5ocmVmID0gYGh0dHBzOi8vd2VpYm8uY29tL3UvJHthcnRpY2xlLmF1dGhvci51aWR9YDsKICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCd1c2VyY2FyZCcsIGBpZD0ke2FydGljbGUuYXV0aG9yLnVpZH1gKTsKICAgICAgICB9IGVsc2UgYXV0aG9yLnJlbW92ZSgpOwogICAgICAgIGNvbnN0IGF1dGhvcklubmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWFydGljbGUtYXV0aG9yLWlubmVyJyk7CiAgICAgICAgaWYgKGFydGljbGUuYXV0aG9yPy5pbm5lcikgewogICAgICAgICAgY29uc3QgaW5uZXIgPSBhcnRpY2xlLmF1dGhvci5pbm5lcjsKICAgICAgICAgIGlmIChpbm5lci51aWQpIHsKICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgbGluay50ZXh0Q29udGVudCA9IGlubmVyLm5hbWU7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IGBodHRwczovL3dlaWJvLmNvbS91LyR7aW5uZXIudWlkfWA7CiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCd1c2VyY2FyZCcsIGBpZD0ke2lubmVyLnVpZH1gKTsKICAgICAgICAgICAgYXV0aG9ySW5uZXIuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhdXRob3JJbm5lci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpbm5lci5uYW1lKSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGF1dGhvcklubmVyLnJlbW92ZSgpOwogICAgICAgIC8vIOaXpeacnwogICAgICAgIGNvbnN0IHRpbWUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS10aW1lJyk7CiAgICAgICAgaWYgKGFydGljbGUudGltZSkgewogICAgICAgICAgdGltZS50ZXh0Q29udGVudCA9IGFydGljbGUudGltZS5yZXBsYWNlKC9cZFxkLVxkXGQgXGRcZDpcZFxkLywgc3RyID0+IHsKICAgICAgICAgICAgY29uc3QgeWVhciA9IG5ldyBEYXRlKERhdGUubm93KCkgKyAyODhlNSkuZ2V0VVRDRnVsbFllYXIoKTsKICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIC4uLnN0ci5zcGxpdCgvWy0gOl0vKS5tYXAoKHgsIGkpID0+IGkgPyAreCA6IHggLSAxKSkgLSAyODhlNSk7CiAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgKChkYXRlLmdldE1vbnRoKCkgKyAxKSArICcnKS5wYWRTdGFydCgyLCAwKSwgJy0nLCAoZGF0ZS5nZXREYXRlKCkgKyAnJykucGFkU3RhcnQoMiwgMCksICcgJywKICAgICAgICAgICAgICAoZGF0ZS5nZXRIb3VycygpICsgJycpLnBhZFN0YXJ0KDIsIDApLCAnOicsIChkYXRlLmdldE1pbnV0ZXMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgICAgICAgXS5qb2luKCcnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB0aW1lLnJlbW92ZSgpOwogICAgICAgIC8vIOWvvOivrQogICAgICAgIGNvbnN0IGxlYWQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS1sZWFkJyk7CiAgICAgICAgaWYgKGFydGljbGUubGVhZCkgbGVhZC50ZXh0Q29udGVudCA9IGFydGljbGUubGVhZDsKICAgICAgICBlbHNlIGxlYWQucmVtb3ZlKCk7CiAgICAgICAgLy8g5bCB6Z2i5Zu+CiAgICAgICAgY29uc3QgY292ZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS1jb3ZlcicpOwogICAgICAgIGlmIChhcnRpY2xlLmNvdmVyKSBjb3Zlci5maXJzdENoaWxkLnNyYyA9IGFydGljbGUuY292ZXI7CiAgICAgICAgZWxzZSBjb3Zlci5yZW1vdmUoKTsKICAgICAgICAvLyDmraPlnKjliqDovb0KICAgICAgICBjb25zdCBsb2FkaW5nID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWFydGljbGUtbG9hZGluZycpOwogICAgICAgIGxvYWRpbmcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaTE4bi5hcnRpY2xlTG9hZGluZykpOwogICAgICAgIC8vIOWGheWuuQogICAgICAgIC8qKiBAdHlwZSB7SFRNTElGcmFtZUVsZW1lbnR9ICovCiAgICAgICAgY29uc3QgaWZyYW1lID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWFydGljbGUtY29udGVudCBpZnJhbWUnKTsKICAgICAgICBjb25zdCBodG1sID0gYDwhZG9jdHlwZSBodG1sPjxodG1sPjxoZWFkPjxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPjxtZXRhIG5hbWU9InJlZmVycmVyIiBjb250ZW50PSJuby1yZWZlcnJlciIgLz48dGl0bGU+PC90aXRsZT48c3R5bGU+JHtzdHlsZX08L3N0eWxlPjxzdHlsZT4ke2NvbnRlbnRTdHlsZX08L3N0eWxlPjwvaGVhZD48Ym9keSBjbGFzcz0ieWF3Zi1hcnRpY2xlLXBhZ2UiPiR7YXJ0aWNsZS5jb250ZW50fTwvYm9keT48L2h0bWw+YDsKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2h0bWxdLCB7IHR5cGU6ICd0ZXh0L2h0bWwnIH0pOwogICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgaWZyYW1lLnNyYyA9IHVybDsKICAgICAgICBpZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICAgIGxvYWRpbmcucmVtb3ZlKCk7CiAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGlmcmFtZS5jb250ZW50RG9jdW1lbnQ7CiAgICAgICAgICBjb25zdCB3aW5kb3cgPSBpZnJhbWUuY29udGVudFdpbmRvdzsKICAgICAgICAgIGNvbnN0IHJlc2l6ZUlmcmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgIH07CiAgICAgICAgICAvLyDlpITnkIblhoXlrrnkuK3nmoTljaHniYcKICAgICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgneC1pZnJhbWUnKSkuZm9yRWFjaChhc3luYyB4aWZyYW1lID0+IHsKICAgICAgICAgICAgY29uc3Qgb3JpVXJsID0geGlmcmFtZS5nZXRBdHRyaWJ1dGUoJ3NyYycpOwogICAgICAgICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVxdWVzdC5nZXRBcnRpY2xlQ2FyZChvcmlVcmwpOwogICAgICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtodG1sXSwgeyB0eXBlOiAndGV4dC9odG1sJyB9KTsKICAgICAgICAgICAgY29uc3QgaWQgPSBuZXcgVVJMKG9yaVVybCkuc2VhcmNoUGFyYW1zLmdldCgnaWQnKTsKICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgICAgaWZyYW1lLnNyYyA9IHVybDsKICAgICAgICAgICAgaWZyYW1lLmRhdGFzZXQuY2FyZElkID0gaWQ7CiAgICAgICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGlmcmFtZS5jb250ZW50RG9jdW1lbnQ7CiAgICAgICAgICAgICAgY29uc3Qgd2luZG93ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3c7CiAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpOwogICAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gaW5qZWN0U3R5bGU7CiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlT3V0ZXJTaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJlc2l6ZVNlbnNvcihkb2N1bWVudC5ib2R5LCB1cGRhdGVPdXRlclNpemUsIGRvY3VtZW50LCB3aW5kb3cpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQodXBkYXRlT3V0ZXJTaXplLCAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHhpZnJhbWUucGFyZW50RWxlbWVudC5yZXBsYWNlQ2hpbGQoaWZyYW1lLCB4aWZyYW1lKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmVzaXplU2Vuc29yKGRvY3VtZW50LmJvZHksIHJlc2l6ZUlmcmFtZSwgZG9jdW1lbnQsIHdpbmRvdyk7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmVzaXplSWZyYW1lKCk7CiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOwogICAgICAgICAgfSwgMCk7CiAgICAgICAgICAvLyDmt7vliqDoh6rlrprkuYnmoLflvI8KICAgICAgICAgIGNvbnN0IHVzZXJDc3MgPSBsYXlvdXQudXNlckNzcy5jc3M7CiAgICAgICAgICBpZiAodXNlckNzcy5pc0VuYWJsZWQoKSkgewogICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gdXNlckNzcy5yZWYuY3NzLmdldENvbmZpZygpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBsb2FkaW5nLnRleHRDb250ZW50ID0gaTE4bi5hcnRpY2xlRmFpbDsKICAgICAgICAgIGlmcmFtZS5yZW1vdmUoKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gY29udGFpbmVyOwogICAgICB9OwoKICAgICAgLy8g6ZqQ6JeP5Zu+54mH5oiW5paH56ug5Y2h54mHCiAgICAgIGNvbnN0IGhpZGVNZWRpYSA9IGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgY29uc3QgbWVkaWFMaXN0ID0gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9tZWRpYV93cmFwLCAuV0JfZXhwYW5kX21lZGlhX2JveCcpKTsKICAgICAgICBjb25zdCByb2xsYmFjayA9IFsuLi5tZWRpYUxpc3RdLm1hcChtZWRpYSA9PiB7CiAgICAgICAgICBpZiAoIShtZWRpYS5jbGllbnRIZWlnaHQgPiAwKSkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobWVkaWEpLmRpc3BsYXk7CiAgICAgICAgICBtZWRpYS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgcmV0dXJuICgpID0+IHsgbWVkaWEuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7IH07CiAgICAgICAgfSkuZmlsdGVyKHggPT4geCk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcm9sbGJhY2suZm9yRWFjaChmID0+IGYoKSk7IH07CiAgICAgIH07CgogICAgICAvLyDorqnmlofnq6DlhoXlrrnpgILphY3lkajlm7TnmoTphY3oibIKICAgICAgY29uc3QgY29tcHV0ZVN0eWxlID0gZnVuY3Rpb24gKHJlZmVyZW5jZSkgewogICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICB0ZXh0LnN0eWxlID0gJ3Bvc2l0aW9uOiBmaXhlZDsgdG9wOiAtMTAwMHB4Oyc7CiAgICAgICAgdGV4dC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0JfdGV4dCBXX2YxNCI+VDxhPmE8L2E+PHNwYW4gY2xhc3M9IlNfYmcyIj5CPC9zcGFuPjwvZGl2Pic7CiAgICAgICAgcmVmZXJlbmNlLmFwcGVuZENoaWxkKHRleHQpOwogICAgICAgIGNvbnN0IGxpbmsgPSBnZXRDb21wdXRlZFN0eWxlKHRleHQucXVlcnlTZWxlY3RvcignYScpKTsKICAgICAgICBjb25zdCBiZzIgPSBnZXRDb21wdXRlZFN0eWxlKHRleHQucXVlcnlTZWxlY3RvcignLlNfYmcyJykpOwogICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0LCAnOjpzZWxlY3Rpb24nKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0LCAnOjotbW96LXNlbGVjdGlvbicpOwogICAgICAgICAgICB9IGNhdGNoIChlMikgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSgpKTsKICAgICAgICBjb25zdCBjc3MgPSBgCjpyb290IHsKLS10ZXh0LWNvbG9yOiAke2JnMi5jb2xvcn07Ci0tYmFja2dyb3VuZC1jb2xvcjogJHtiZzIuYmFja2dyb3VuZENvbG9yfTsKLS1saW5rLWNvbG9yOiAke2xpbmsuY29sb3J9OwoKLS1mb250LWZhbWlseTogJHtiZzIuZm9udEZhbWlseX07Cn0KCiR7c2VsZWN0aW9uID8gYAo6OnNlbGVjdGlvbiB7IGJhY2tncm91bmQtY29sb3I6ICR7c2VsZWN0aW9uLmJhY2tncm91bmRDb2xvcn07IGNvbG9yOiAke3NlbGVjdGlvbi5jb2xvcn07IH0KOjotbW96LXNlbGVjdGlvbiB7IGJhY2tncm91bmQtY29sb3I6ICR7c2VsZWN0aW9uLmJhY2tncm91bmRDb2xvcn07IGNvbG9yOiAke3NlbGVjdGlvbi5jb2xvcn07IH0KYCA6ICcnfQpgOwogICAgICAgIHRleHQucmVtb3ZlKCk7CiAgICAgICAgcmV0dXJuIGNzczsKICAgICAgfTsKCiAgICAgIGNvbnN0IHJlbmRlckFydGljbGVDb250cm9scyA9IGZ1bmN0aW9uIChhcnRpY2xlLCBhcnRpY2xlRGF0YSwgeyBpZCwgZmVlZCwgdGV4dCwgc2hvd01lZGlhIH0pIHsKICAgICAgICBjb25zdCBmb2xkID0gYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1hcnRpY2xlLWZvbGQnKTsKICAgICAgICBmb2xkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgYXJ0aWNsZS5yZW1vdmUoKTsKICAgICAgICAgIHNob3dNZWRpYSgpOwogICAgICAgICAgZmVlZC5yZW1vdmVBdHRyaWJ1dGUoJ3lhd2YtYXJ0aWNsZS1zaG93bicpOwogICAgICAgICAgZmVlZC5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnbmVhcmVzdCcgfSk7CiAgICAgICAgfSk7CiAgICAgICAgZm9sZC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpMThuLmZvbGRBcnRpY2xlKSk7CgogICAgICAgIGNvbnN0IHZpZXcgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWFydGljbGUtdmlldycpOwogICAgICAgIHZpZXcuaHJlZiA9IGBodHRwczovL3dlaWJvLmNvbS90dGFydGljbGUvcC9zaG93P2lkPSR7aWR9YDsKICAgICAgICB2aWV3LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGkxOG4udmlld0FydGljbGUpKTsKCiAgICAgICAgY29uc3Qgb3JpRmVlZCA9IGFydGljbGUucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS1mZWVkJyk7CiAgICAgICAgaWYgKGFydGljbGVEYXRhLmZlZWQgJiYgbmV3IFVSTChhcnRpY2xlRGF0YS5mZWVkKS5wYXRobmFtZSAhPT0gbG9jYXRpb24ucGF0aG5hbWUpIHsKICAgICAgICAgIG9yaUZlZWQuaHJlZiA9IGFydGljbGVEYXRhLmZlZWQ7CiAgICAgICAgICBvcmlGZWVkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGkxOG4uZmVlZEFydGljbGUpKTsKICAgICAgICB9IGVsc2Ugb3JpRmVlZC5jbG9zZXN0KCdsaScpLnJlbW92ZSgpOwoKICAgICAgICBjb25zdCBzb3VyY2UgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWFydGljbGUtc291cmNlJyk7CiAgICAgICAgaWYgKGFydGljbGVEYXRhLnNvdXJjZSkgc291cmNlLmhyZWYgPSBhcnRpY2xlRGF0YS5zb3VyY2U7CiAgICAgICAgZWxzZSBzb3VyY2UuY2xvc2VzdCgnbGknKS5yZW1vdmUoKTsKICAgICAgICBzb3VyY2UuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaTE4bi52aWV3QXJ0aWNsZVNvdXJjZSkpOwogICAgICB9OwoKICAgICAgLy8g54K55Ye75paH56ug6ZO+5o6l5pe26Kem5Y+RCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGZlZWQgPSB0YXJnZXQuY2xvc2VzdCgnW21pZF0nKTsKICAgICAgICBpZiAoIWZlZWQpIHJldHVybjsKICAgICAgICBjb25zdCBsaW5rID0gdGFyZ2V0LmNsb3Nlc3QoJ1tzdWRhLXVhdHJhY2sqPSIxMDIyLWFydGljbGUiXScpOwogICAgICAgIGlmICghbGluaykgcmV0dXJuOwogICAgICAgIGNvbnN0IGlkID0gbGluay5nZXRBdHRyaWJ1dGUoJ3N1ZGEtdWF0cmFjaycpLnJlcGxhY2UoL14uKjEwMjIlM0EoXGQrKTouKiQvLCAnJDEnKTsKICAgICAgICBpZiAoIWlkKSByZXR1cm47CiAgICAgICAgY29uc3QgdGV4dCA9IEFycmF5LmZyb20oKC8qKiBAcmV0dXJucyB7RWxlbWVudH0gKi9mdW5jdGlvbiBmaW5kVGV4dCh0YXJnZXQpIHsKICAgICAgICAgIHJldHVybiB0YXJnZXQgPyB0YXJnZXQucXVlcnlTZWxlY3RvcignLldCX3RleHQnKSA/IHRhcmdldCA6IGZpbmRUZXh0KHRhcmdldC5wYXJlbnRFbGVtZW50KSA6IG51bGw7CiAgICAgICAgfSh0YXJnZXQpKS5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfdGV4dCcpKS5wb3AoKTsKICAgICAgICBpZiAoIXRleHQpIHJldHVybjsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGlmIChmZWVkLmhhc0F0dHJpYnV0ZSgneWF3Zi1hcnRpY2xlLXNob3duJykpIHJldHVybjsKCiAgICAgICAgY29uc3QgbG9hZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGxvYWRpbmcuY2xhc3NOYW1lID0gJ3lhd2YtYXJ0aWNsZS1sb2FkaW5nJzsKICAgICAgICBsb2FkaW5nLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iV19sb2FkaW5nIj48L2k+ICc7CiAgICAgICAgbG9hZGluZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpMThuLmFydGljbGVMb2FkaW5nKSk7CiAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtYXJ0aWNsZS1zaG93bicsICcnKTsKICAgICAgICB0ZXh0LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxvYWRpbmcsIHRleHQubmV4dFNpYmxpbmcpOwoKICAgICAgICBjb25zdCBzaG93TWVkaWEgPSBoaWRlTWVkaWEoZmVlZCk7CiAgICAgICAgY29uc3QgYXJ0aWNsZURhdGEgPSBhd2FpdCByZXF1ZXN0LmdldEFydGljbGUoaWQpOwogICAgICAgIGNvbnN0IGFydGljbGUgPSByZW5kZXJBcnRpY2xlKGFydGljbGVEYXRhLCBjb21wdXRlU3R5bGUodGV4dCksIHRleHQubWF0Y2hlcygnLldCX2V4cGFuZCAqJykpOwogICAgICAgIHJlbmRlckFydGljbGVDb250cm9scyhhcnRpY2xlLCBhcnRpY2xlRGF0YSwgeyBpZCwgZmVlZCwgdGV4dCwgc2hvd01lZGlhIH0pOwoKICAgICAgICBsb2FkaW5nLnBhcmVudEVsZW1lbnQucmVwbGFjZUNoaWxkKGFydGljbGUsIGxvYWRpbmcpOwogICAgICB9LCB0cnVlKTsKCiAgICAgIGNzcy5hcHBlbmQoYAoueWF3Zi1hcnRpY2xlLWxvYWRpbmcgeyBwYWRkaW5nOiAxMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KLnlhd2YtYXJ0aWNsZS1oYW5kbGUgeyBwb3NpdGlvbjogc3RpY2t5OyB0b3A6IDUwcHg7IHBhZGRpbmc6IDEwcHggMDsgei1pbmRleDogMTsgZm9udC1zaXplOiAxMnB4OyBsaW5lLWhlaWdodDogMTVweDsgfQoueWF3Zi1hcnRpY2xlIHsgYm9yZGVyLXdpZHRoOiAxcHg7IGJvcmRlci1zdHlsZTogc29saWQ7IHBhZGRpbmc6IDEwcHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS41OyB9Ci55YXdmLWFydGljbGUtdGl0bGUgeyBtYXJnaW46IDEwcHggMDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTMwJTsgfQoueWF3Zi1hcnRpY2xlLW1ldGEgeyBtYXJnaW46IDEwcHggLTEwcHg7IGRpc3BsYXk6IGZsZXg7IH0KLnlhd2YtYXJ0aWNsZS1tZXRhID4gc3BhbiB7IHBhZGRpbmc6IDAgMTBweDsgfQoueWF3Zi1hcnRpY2xlLW1ldGEgPiBzcGFuOm5vdCg6Zmlyc3QtY2hpbGQpIHsgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjODA4MDgwMjI7IH0KLnlhd2YtYXJ0aWNsZS1hdXRob3IgaW1nIHsgd2lkdGg6IDIwcHg7IGhlaWdodDogMjBweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgbWFyZ2luOiAwLjJlbTsgfQoueWF3Zi1hcnRpY2xlLWxlYWQgeyBiYWNrZ3JvdW5kOiAjODA4MDgwMjI7IHBhZGRpbmc6IDIwcHg7IH0KLnlhd2YtYXJ0aWNsZS1jb3ZlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgbGluZS1oZWlnaHQ6IDA7IH0KLnlhd2YtYXJ0aWNsZS1jb3ZlciBpbWcgeyBtYXgtd2lkdGg6IDEwMCU7IG1hcmdpbjogMTBweCAwOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB9Ci55YXdmLWFydGljbGUtY29udGVudCBpZnJhbWUgeyBib3JkZXI6IDAgbm9uZTsgd2lkdGg6IDEwMCU7IG1hcmdpbjogMTBweCAwOyB9CmApOwogICAgICBpZiAobGF5b3V0Lm5hdmJhci5hdXRvSGlkZS5pc0VuYWJsZWQoKSkgewogICAgICAgIGNzcy5hcHBlbmQoJy55YXdmLWFydGljbGUtaGFuZGxlIHsgdG9wOiAwOyB9Jyk7CiAgICAgIH0KICAgIH0sCgogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGxpbmtXaXRoRmFjZTogewogICAgICBjbjogJ+ivhuWIq+W+ruWNmuS4reWMheWQq+ihqOaDheespuWPt+eahOe9keWdgO+8iOWunumqjOaAp++8iXt7aX19fHx7e2NsZWFufX0g5Yig6Zmk6KGo5oOFfHt7bGlua319IOWIm+W7uumTvuaOpScsCiAgICAgIHR3OiAn6L6o6K2Y5b6u5Y2a5Lit5YyF5ZCr6KGo5oOF56ym6Jmf55qE77yI5a+m6amX5oCn77yJe3tpfX18fHt7Y2xlYW59fSDliKrpmaTooajmg4V8e3tsaW5rfX0g5Ym15bu66YCj57WQJywKICAgICAgZW46ICdSZWNvZ25pemUgdXJscyB3aXRoIGZhY2VzIGluIGZlZWRzIChleHBlcmltZW50YWwpIHt7aX19fHx7e2NsZWFufX0gUmVtb3ZlIGZhY2VzfHt7bGlua319IEdlbmVyYXRlIGxpbmsnLAogICAgfSwKICAgIGxpbmtXaXRoRmFjZURldGFpbDogewogICAgICBjbjogJ+WIm+W7uueahOmTvuaOpeWPr+S7peaMh+WQkeS7u+S9leesrOS4ieaWuee9keerme+8jOivt+WcqOeCueWHu+WJjeiHquihjOehruiupOWuieWFqOaAp+OAgumAieS4reW5tuWkjeWItuaXtuWmguaenOWkjeWItuWGheWuueS4uuW+ruWNmuS4reeahOe9keWdgO+8jOiEmuacrOS8muWwhuWkjeWItueahOWGheWuuea4heeQhuS4uumTvuaOpeacrOi6q+OAguihqOaDheS7heaUr+aMgeW+ruWNmuiHquW4puihqOaDhe+8jOS4jeaUr+aMgSBlbW9qaSDooajmg4XjgIInLAogICAgfSwKICB9KTsKCiAgY29udGVudC5saW5rV2l0aEZhY2UgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsaW5rX3dpdGhfZmFjZScsCiAgICB2ZXJzaW9uOiA2NiwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubGlua1dpdGhGYWNlLAogICAgcmVmOiB7CiAgICAgIGNsZWFuOiB7IHR5cGU6ICdib29sZWFuJyB9LAogICAgICBsaW5rOiB7IHR5cGU6ICdib29sZWFuJyB9LAogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmxpbmtXaXRoRmFjZURldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCB1cmxSZWdleEdlbiA9ICgpID0+IG5ldyBSZWdFeHAoWwogICAgICAgIC8vIOWNj+iurgogICAgICAgICdodHRwcz86Ly8nLAogICAgICAgIC8vIOS4jeaYryB0LmNuIOeahOefremTvuaOpQogICAgICAgICcoPyF0LmNuKD86L3wkKSknLAogICAgICAgIC8vIOS4u+acuuWQjeaIliBJUAogICAgICAgICcoPzooPyFbLi1dKSg/Oig/IVsuLV1bLi86LV0pW2EtekEtWjAtOS4tXSkqfFxcZCtcXC5cXGQrXFwuXFxkK1xcLlxcZCspJywKICAgICAgICAvLyDnq6/lj6MKICAgICAgICAnKD86OlxcZCspPycsCiAgICAgICAgLy8g6Lev5b6E77yM5p+l6K+i5Liy77yM5pys5Zyw6YOo5YiGCiAgICAgICAgJyg/Oi8oPzpbYS16QS1aMC05JFxcLV8uKyEqXCcoKSwvOzpAJj0/I118JVthLWZBLUYwLTldezJ9KSopPycsCiAgICAgIF0uam9pbignJyksICdnJyk7CiAgICAgIGNvbnN0IGNsZWFuID0gdGhpcy5yZWYuY2xlYW4uZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGxpbmsgPSB0aGlzLnJlZi5jbGVhbi5nZXRDb25maWcoKTsKCiAgICAgIG9ic2VydmVyLmZlZWQub25BZnRlcihmdW5jdGlvbiAoZmVlZCkgewogICAgICAgIC8qKiBAdHlwZSB7RWxlbWVudFtdfSAqLwogICAgICAgIGNvbnN0IGNvbnRlbnRFbGVtZW50cyA9IFsKICAgICAgICAgIGZlZWRQYXJzZXIuY29udGVudC5kb20oZmVlZCwgZmFsc2UsIGZhbHNlKSwKICAgICAgICAgIGZlZWRQYXJzZXIuY29udGVudC5kb20oZmVlZCwgZmFsc2UsIHRydWUpLAogICAgICAgICAgZmVlZFBhcnNlci5jb250ZW50LmRvbShmZWVkLCB0cnVlLCBmYWxzZSksCiAgICAgICAgICBmZWVkUGFyc2VyLmNvbnRlbnQuZG9tKGZlZWQsIHRydWUsIHRydWUpLAogICAgICAgIF0uZmlsdGVyKGVsZW1lbnQgPT4gZWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpOwoKICAgICAgICBjb250ZW50RWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAgIGNvbnN0IHVuZm9sZCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignW2FjdGlvbi10eXBlPSJmbF91bmZvbGQiXScpOwogICAgICAgICAgY29uc3Qgbm9kZXMgPSBbLi4uZWxlbWVudC5jaGlsZE5vZGVzXTsKICAgICAgICAgIGxldCB0ZXh0ID0gJyc7CiAgICAgICAgICAvKiogQHR5cGUge1tudW1iZXIsIG51bWJlciwgTm9kZV1bXX0gKi8KICAgICAgICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZXMubWFwKG5vZGUgPT4gewogICAgICAgICAgICBjb25zdCBwb3MgPSB0ZXh0Lmxlbmd0aDsKICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSB7CiAgICAgICAgICAgICAgdGV4dCArPSBub2RlLnRleHRDb250ZW50OwogICAgICAgICAgICAgIHJldHVybiBbcG9zLCBub2RlLnRleHRDb250ZW50Lmxlbmd0aCwgbm9kZV07CiAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHsKICAgICAgICAgICAgICBpZiAobm9kZS5tYXRjaGVzKCdpbWcuV19pbWdfZmFjZScpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gW3BvcywgMCwgbm9kZV07CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRleHQgKz0gJ1xuJzsKICAgICAgICAgICAgICAgIHJldHVybiBbcG9zLCAxLCBub2RlXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtwb3MsIDAsIG5vZGVdOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGxldCBtYXRjaDsKICAgICAgICAgIGNvbnN0IHVybFJlZ2V4ID0gdXJsUmVnZXhHZW4oKTsKICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSB1cmxSZWdleC5leGVjKHRleHQpKSAhPT0gbnVsbCkgewogICAgICAgICAgICBsZXQgdXJsOwogICAgICAgICAgICB0cnkgeyB1cmwgPSBuZXcgVVJMKG1hdGNoWzBdKTsgfSBjYXRjaCAoZSkgeyBjb250aW51ZTsgfQogICAgICAgICAgICBjb25zdCBpbmRleCA9IG1hdGNoLmluZGV4LCBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDsKICAgICAgICAgICAgLy8g5aaC5p6c5pyJ5bGV5byA5YWo5paH5oyJ6ZKu77yM6ICM5LiU6ZO+5o6l5Yy56YWN5Yiw5LqG5pyA5ZCO6Z2i77yM6YKj5LmI5Y+v6IO96ZO+5o6l5LiN5a6M5pW077yM5q2k5pe25LiN6K+G5YirCiAgICAgICAgICAgIGlmICh1bmZvbGQgJiYgbGFzdEluZGV4ID49IHRleHQucmVwbGFjZSgvW1xzLlx1MjAwYl0qJC8sICcnKS5sZW5ndGgpIGNvbnRpbnVlOwogICAgICAgICAgICBjb25zdCBzdGFydCA9IG5vZGVEYXRhLmZpbmRJbmRleCgoW3BvcywgbGVuXSkgPT4gcG9zIDw9IGluZGV4ICYmIHBvcyArIGxlbiA+IGluZGV4KTsKICAgICAgICAgICAgY29uc3QgZW5kID0gbm9kZURhdGEuZmluZEluZGV4KChbcG9zLCBsZW5dKSA9PiBwb3MgPCBsYXN0SW5kZXggJiYgcG9zICsgbGVuID49IGxhc3RJbmRleCk7CiAgICAgICAgICAgIGlmIChzdGFydCA9PT0gLTEgfHwgZW5kID09PSAtMSB8fCBzdGFydCA9PT0gZW5kKSBjb250aW51ZTsKICAgICAgICAgICAgY29uc3QgW3N0YXJ0Tm9kZVBvcywgX3N0YXJ0Tm9kZUxlbmd0aCwgc3RhcnROb2RlXSA9IG5vZGVEYXRhW3N0YXJ0XTsKICAgICAgICAgICAgY29uc3QgW2VuZE5vZGVQb3MsIF9lbmROb2RlTGVuZ3RoLCBlbmROb2RlXSA9IG5vZGVEYXRhW2VuZF07CiAgICAgICAgICAgIGlmICghKHN0YXJ0Tm9kZSBpbnN0YW5jZW9mIFRleHQpKSBjb250aW51ZTsKICAgICAgICAgICAgaWYgKCEoZW5kTm9kZSBpbnN0YW5jZW9mIFRleHQpKSBjb250aW51ZTsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgICAgICAgICBsZXQgd3JhcCA9IGNvbnRhaW5lcjsKICAgICAgICAgICAgaWYgKGxpbmspIHsKICAgICAgICAgICAgICB3cmFwID0gY29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7CiAgICAgICAgICAgICAgd3JhcC5ocmVmID0gdXJsOwogICAgICAgICAgICAgIHdyYXAuc2V0QXR0cmlidXRlKCdyZWwnLCAnbm9mb2xsb3cgbm9vcGVuZXInKTsKICAgICAgICAgICAgICB3cmFwLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICAgICAgICAgIHdyYXAuY2xhc3NOYW1lID0gJ3lhd2YtZmFjZS1saW5rJzsKICAgICAgICAgICAgfQogICAgICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHN0YXJ0Tm9kZS50ZXh0Q29udGVudC5zbGljZShpbmRleCAtIHN0YXJ0Tm9kZVBvcykpKTsKICAgICAgICAgICAgc3RhcnROb2RlLnRleHRDb250ZW50ID0gc3RhcnROb2RlLnRleHRDb250ZW50LnNsaWNlKDAsIGluZGV4IC0gc3RhcnROb2RlUG9zKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0ICsgMTsgaSA8IGVuZDsgaSsrKSB7CiAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwogICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSAmJiBjbGVhbikgewogICAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3cmFwLmFwcGVuZENoaWxkKG5vZGVzW2ldKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlbmROb2RlLnRleHRDb250ZW50LnNsaWNlKDAsIGxhc3RJbmRleCAtIGVuZE5vZGVQb3MpKSk7CiAgICAgICAgICAgIGVuZE5vZGUudGV4dENvbnRlbnQgPSBlbmROb2RlLnRleHRDb250ZW50LnNsaWNlKGxhc3RJbmRleCAtIGVuZE5vZGVQb3MpOwogICAgICAgICAgICB3cmFwLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBlbmROb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXAsIGVuZE5vZGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjb3B5JywgZXZlbnQgPT4gewogICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpOwogICAgICAgIGlmIChzZWxlY3Rpb24ucmFuZ2VDb3VudCAhPT0gMSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmFuZ2UuY29tbW9uQW5jZXN0b3JDb250YWluZXI7CiAgICAgICAgaWYgKCEoY29udGFpbmVyIGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgICBpZiAoIWNvbnRhaW5lci5tYXRjaGVzKCcuV0JfdGV4dCcpKSByZXR1cm47CiAgICAgICAgY29uc3QgY29udGVudHMgPSByYW5nZS5jbG9uZUNvbnRlbnRzKCk7CiAgICAgICAgY29uc3QgdGV4dCA9IFsuLi5jb250ZW50cy5jaGlsZE5vZGVzXS5tYXAobm9kZSA9PiB7CiAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHsKICAgICAgICAgICAgcmV0dXJuIG5vZGUudGV4dENvbnRlbnQ7CiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmIG5vZGUubm9kZU5hbWUgPT09ICdJTUcnKSB7CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAnXG4nOwogICAgICAgICAgfQogICAgICAgIH0pLmpvaW4oJycpLnRyaW0oKTsKICAgICAgICBjb25zdCB1cmxSZWdleCA9IHVybFJlZ2V4R2VuKCk7CiAgICAgICAgaWYgKCF1cmxSZWdleC50ZXN0KHRleHQpKSByZXR1cm47CiAgICAgICAgZXZlbnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCd0ZXh0L3BsYWluJywgdGV4dCk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfSk7CgogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzaG9ydExpbmtXaXRob3V0Q29uZmlybTogewogICAgICBjbjogJ+aJk+W8gOefremTvuaOpeaXtuaXoOmcgOS6jOasoeehruiupO+8iOWFqOWxgOiuvue9ru+8iSB7e2l9fScsCiAgICAgIHR3OiAn5omT6ZaL57Ch55+t55qE6YCj5o6l5pmC54Sh6ZyA5LqM5qyh56K66KqN77yI5YWo5bGA6Kit5a6a77yJIHt7aX19JywKICAgICAgZW46ICdPcGVuIHNob3J0IFVSTCB3aXRob3V0IGFub3RoZXIgY29uZmlybWF0aW9uIChHbG9iYWwgT3B0aW9uKSB7e2l9fScsCiAgICB9LAogICAgc2hvcnRMaW5rV2l0aG91dENvbmZpcm1EZXRhaWw6IHsKICAgICAgY246ICfmiZPlvIDnn63pk77mjqXml7bml6DpnIDkuozmrKHmiYvliqjnoa7orqTjgILnlLHkuo7nn63pk77mjqXnvZHpobXml6Dms5Xojrflj5bnmbvlvZXnirbmgIHvvIzmraTorr7nva7pobnml6DorrrnmbvlvZXku7vmhI/nlKjmiLflnYfkvJrnlJ/mlYgnLAogICAgfSwKICB9KTsKCiAgY29udGVudC5zaG9ydExpbmtXaXRob3V0Q29uZmlybSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ3Nob3J0X3VybF93b19jb25maXJtJywKICAgIHZlcnNpb246IDczLAogICAgZ2V0IGNvbmZpZ1Bvb2woKSB7IHJldHVybiBjb25maWcuZ2xvYmFsOyB9LAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaG9ydExpbmtXaXRob3V0Q29uZmlybSwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3J0TGlua1dpdGhvdXRDb25maXJtRGV0YWlsIH0sCiAgICB9LAogICAgLy8g55yf5q2j55qE5omn6KGM6YC76L6R5Zyo5Y2V54us55qE5paH5Lu26YeMCiAgICAvLyDov5nmrrXmmK/lpITnkIbkuIDkuIvlpYfmgKrnmoTov73ouKrku6PnoIHlr7zoh7Tpk77mjqXmoLnmnKzmiZPkuI3lvIDnmoTpl67popgKICAgIC8vIOW7uuiuruWmguaenOecn+eahOaDs+WKoOi/vei4quS7o+egge+8jOWcqCBtb3VzZXVwIOaXtuaUuSBocmVm77yM6ICM5LiN5piv5ZyoIGNsaWNrIOeahOaXtuWAmSB3aW5kb3cub3BlbgogICAgaW5pdCgpIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm47CiAgICAgICAgaWYgKCF0YXJnZXQubWF0Y2hlcygnW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfdXJsIl0nKSkgcmV0dXJuOwogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9LCB0cnVlKTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmVlZHMvbWVkaWEuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgZW52ID0geWF3Zi5lbnY7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3Q7CiAgY29uc3QgZG93bmxvYWQgPSB5YXdmLmRvd25sb2FkOwogIGNvbnN0IGNvbnRleHRtZW51ID0geWF3Zi5jb250ZXh0bWVudTsKICBjb25zdCBpbWFnZVZpZXdlciA9IHlhd2YuaW1hZ2VWaWV3ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKCiAgY29uc3QgZmVlZHMgPSB5YXdmLnJ1bGVzLmZlZWRzOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwogIGNvbnN0IHVybHMgPSB1dGlsLnVybHM7CiAgY29uc3QgY3JjID0gdXRpbC5jcmM7CgogIGNvbnN0IG1lZGlhID0gZmVlZHMubWVkaWEgPSB7fTsKCiAgaTE4bi5mZWVkTWVkaWFHcm91cFRpdGxlID0gewogICAgY246ICflm77niYfkuI7op4bpopEnLAogICAgdHc6ICflnJbniYfoiIfoppbpoLsnLAogICAgZW46ICdJbWFnZXMgJmFtcDsgVmlkZW9zJywKICB9OwoKICBtZWRpYS5tZWRpYSA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBmZWVkcy5mZWVkcywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRNZWRpYUdyb3VwVGl0bGUsCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgdmlld09yaWdpbmFsOiBlbnYuY29uZmlnLmNvbnRleHRNZW51U3VwcG9ydGVkID8gewogICAgICBjbjogJ+afpeeci+WbvueJh+a3u+WKoOKAnOafpeeci+WOn+WbvuKAnemTvuaOpXzmiZPlvIB7e29wZW59fXx8e3tkaXJlY3R9feeCueWHu+e8qeeVpeWbvuaXtuebtOaOpeafpeeci+WOn+Wbvnx8e3tjb250ZXh0bWVudX195re75Yqg5Yiw5Y+z6ZSu6I+c5Y2VJywKICAgICAgdHc6ICfmn6XnnIvlnJbniYfmt7vliqDjgIzmn6XnnIvljp/lnJbjgI3pgKPntZB85omT6ZaLe3tvcGVufX18fHt7ZGlyZWN0fX3pu57mk4rnuK7lnJbmmYLnm7TmjqXmn6XnnIvljp/lnJZ8fHt7Y29udGV4dG1lbnV9fea3u+WKoOWIsOaTjeS9nOWKn+iDveihqCcsCiAgICAgIGVuOiAnYWRkICJPcmlnaW5hbCBQaWN0dXJlIiBsaW5rIGZvciBpbWFnZXMgfCB3aGljaCB0YXJnZXRlZCB0byB7e29wZW59fSB8fCB7e2RpcmVjdH19IFZpZXcgb3JpZ2luYWwgcGljdHVyZXMgYnkgY2xpY2tpbmcgb24gdGh1bWJuYWlsIHx8IHt7Y29udGV4bWVudX19IEFkZCB0byBjb250ZXh0IG1lbnUnLAogICAgfSA6IHsKICAgICAgY246ICfmn6XnnIvlm77niYfmt7vliqDigJzmn6XnnIvljp/lm77igJ3pk77mjqV85omT5byAe3tvcGVufX18fHt7ZGlyZWN0fX3ngrnlh7vnvKnnlaXlm77ml7bnm7TmjqXmn6XnnIvljp/lm74nLAogICAgICB0dzogJ+afpeeci+WclueJh+a3u+WKoOOAjOafpeeci+WOn+WcluOAjemAo+e1kHzmiZPplot7e29wZW59fXx8e3tkaXJlY3R9fem7nuaTiue4ruWcluaZguebtOaOpeafpeeci+WOn+WclicsCiAgICAgIGVuOiAnYWRkICJPcmlnaW5hbCBQaWN0dXJlIiBsaW5rIGZvciBpbWFnZXMgfCB3aGljaCB0YXJnZXRlZCB0byB7e29wZW59fSB8fCB7e2RpcmVjdH19IFZpZXcgb3JpZ2luYWwgcGljdHVyZXMgYnkgY2xpY2tpbmcgb24gdGh1bWJuYWlsJywKICAgIH0sCiAgICB2aWV3T3JpZ2luYWxQYWdlOiB7IGNuOiAn5YyF5ZCr5Y6f5Zu+55qE572R6aG1JywgdHc6ICfljIXlkKvljp/lnJbnmoTntrLpoIEnLCBlbjogJ3BhZ2Ugd2l0aCBvcmlnaW5hbCBwaWN0dXJlJyB9LAogICAgdmlld09yaWdpbmFsSW1hZ2U6IHsgY246ICfljp/lm74nLCB0dzogJ+WOn+WclicsIGVuOiAnb3JpZ2luYWwgcGljdHVyZScgfSwKICAgIHZpZXdPcmlnaW5hbFRleHQ6IHsgY246ICfmn6XnnIvljp/lm74nLCB0dzogJ+afpeeci+WOn+WclicsIGVuOiAnT3JpZ2luYWwgUGljdHVyZScgfSwKICB9KTsKCiAgY29uc3QgZ2V0SW1hZ2VVcmwgPSBmdW5jdGlvbiAoaW1nLCBsYXJnZSkgewogICAgY29uc3Qgc3JjID0gaW1nLmdldEF0dHJpYnV0ZSgneWF3Zi1vcmktc3JjJykgfHwgaW1nLmdldEF0dHJpYnV0ZSgnb3JpLXNyYycpIHx8IGltZy5zcmM7CiAgICBpZiAoIWxhcmdlKSByZXR1cm4gc3JjOwogICAgY29uc3QgdXJsID0gWydodHRwczovLycsIG5ldyBVUkwoc3JjKS5ob3N0LCAnL2xhcmdlJywgc3JjLm1hdGNoKC9cLyhbXi9dKikkL2cpXS5qb2luKCcnKTsKICAgIHJldHVybiB1cmw7CiAgfTsKCiAgY29uc3QgZ2V0VXJsQnlQaWQgPSBmdW5jdGlvbiAocGlkLCBzaXplID0gJ2xhcmdlJykgewogICAgaWYgKCd3eScuaW5jbHVkZXMocGlkWzldKSkgewogICAgICBjb25zdCBpbmRleCA9IChjcmMuY3JjMzIocGlkKSAmIDMpICsgMTsKICAgICAgY29uc3QgZXh0ZW5zaW9uID0gcGlkWzIxXSA9PT0gJ2cnID8gJ2dpZicgOiAnanBnJzsKICAgICAgaWYgKHBpZFs5XSA9PT0gJ3cnKSB7CiAgICAgICAgcmV0dXJuIG5ldyBVUkwoYC8vd3cke2luZGV4fS5zaW5haW1nLmNuLyR7c2l6ZX0vJHtwaWR9LiR7ZXh0ZW5zaW9ufWAsIGxvY2F0aW9uKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFVSTChgLy93eCR7aW5kZXh9LnNpbmFpbWcuY24vJHtzaXplfS8ke3BpZH0uJHtleHRlbnNpb259YCwgbG9jYXRpb24pOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV3IFVSTChgLy9zczEuc2luYWltZy5jbi8ke3NpemV9LyR7cGlkfSY2OTBgLCBsb2NhdGlvbik7CiAgICB9CiAgfTsKCiAgY29uc3QgZ2V0SW1hZ2VzSW5mbyA9IGZ1bmN0aW9uIChyZWYpIHsKICAgIGxldCBjb250YWluZXIsIGltZ3MsIGltZzsKICAgIGlmIChyZWYubWF0Y2hlcygnLldCX2RldGFpbCAuV0JfZXhwYW5kX21lZGlhIConKSkgewogICAgICAvLyDlt7Lnu4/lsZXlvIDor6bmg4XnmoTlm77niYcKICAgICAgY29udGFpbmVyID0gcmVmLmNsb3Nlc3QoJy5XQl9kZXRhaWwnKTsKICAgICAgaW1ncyA9IEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9tZWRpYV93cmFwIC5XQl9waWMgaW1nJykpOwogICAgICBpbWcgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lZGlhX3Nob3dfYm94IGltZycpIHx8CiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50IGltZycpOwogICAgICBpZiAocmVmLm1hdGNoZXMoJ1thY3Rpb24tdHlwZT0id2lkZ2V0X3Bob3RvdmlldyJdJykpIHsKICAgICAgICBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICBpbWcuc3JjID0gZ2V0VXJsQnlQaWQobmV3IFVSTFNlYXJjaFBhcmFtcyhyZWYuZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpKS5nZXQoJ3BpZCcpKTsKICAgICAgfQogICAgICAvLyBmYWxsdGhyb3VnaAogICAgfSBlbHNlIGlmIChyZWYubWF0Y2hlcygnLldCX2V4cGFuZF9tZWRpYSAudGFiX2ZlZWRfYSAqJykpIHsKICAgICAgLy8g5bey57uP5bGV5byA6K+m5oOF55qE6K+E6K666YWN5Zu+CiAgICAgIGNvbnRhaW5lciA9IHJlZi5jbG9zZXN0KCcuV0JfZXhwYW5kX21lZGlhJyk7CiAgICAgIGltZyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYXJ0d29ya19ib3ggaW1nJyk7CiAgICAgIGltZ3MgPSBbaW1nXTsKICAgICAgLy8gZmFsbHRocm91Z2gKICAgIH0gZWxzZSBpZiAocmVmLm1hdGNoZXMoJy5XQl9tZWRpYV93cmFwIC5XQl9waWMnKSkgewogICAgICAvLyDmsqHmnInlsZXlvIDor6bmg4XnmoTlm77niYcKICAgICAgY29udGFpbmVyID0gcmVmLmNsb3Nlc3QoJy5XQl9tZWRpYV93cmFwJyk7CiAgICAgIGltZ3MgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfcGljIGltZycpKTsKICAgICAgaW1nID0gcmVmLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpOwogICAgICAvLyBmYWxsdGhyb3VnaAogICAgfSBlbHNlIGlmIChyZWYuZ2V0QXR0cmlidXRlKCdpbWFnZWNhcmQnKSkgewogICAgICBjb25zdCBwaWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHJlZi5nZXRBdHRyaWJ1dGUoJ2ltYWdlY2FyZCcpKS5nZXQoJ3BpZCcpOwogICAgICByZXR1cm4geyBpbWFnZXM6IFtnZXRVcmxCeVBpZChwaWQpLmhyZWZdLCBjdXJyZW50OiAxIH07CiAgICB9IGVsc2UgaWYgKHJlZi5ocmVmPy5pbmRleE9mKCdqYXZhc2NyaXB0OicpID09PSAtMSkgewogICAgICByZXR1cm4geyBpbWFnZXM6IFtyZWYuaHJlZl0sIGN1cnJlbnQ6IDEgfTsKICAgIH0gZWxzZSBpZiAocmVmIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCAmJiByZWYuc3JjKSB7CiAgICAgIHJldHVybiB7IGltYWdlczogW2dldEltYWdlVXJsKHJlZiwgdHJ1ZSldLCBjdXJyZW50OiAxIH07CiAgICB9IGVsc2UgcmV0dXJuIG51bGw7CiAgICBjb25zdCBpbWFnZXMgPSBpbWdzLm1hcChpbWcgPT4gZ2V0SW1hZ2VVcmwoaW1nLCB0cnVlKSk7CiAgICBjb25zdCBwaWQgPSBpbWcgJiYgZ2V0SW1hZ2VVcmwoaW1nKS5tYXRjaCgvW14vLl0qKD89KD86XC5bXi8uXSopPyQpLylbMF07CiAgICBjb25zdCBjdXJyZW50ID0gaW1hZ2VzLmZpbmRJbmRleChpbWFnZSA9PiBpbWFnZS5pbmNsdWRlcyhwaWQpKSArIDE7CiAgICByZXR1cm4geyBpbWFnZXMsIGN1cnJlbnQgfTsKICB9OwoKICBtZWRpYS52aWV3T3JpZ2luYWwgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX3ZpZXdfb3JpZ2luYWwnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbWVkaWEubWVkaWEsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi52aWV3T3JpZ2luYWwsCiAgICByZWY6IHsKICAgICAgb3BlbjogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGluaXRpYWw6ICdwYWdlJywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICdwYWdlJywgdGV4dDogKCkgPT4gaTE4bi52aWV3T3JpZ2luYWxQYWdlIH0sCiAgICAgICAgICB7IHZhbHVlOiAnaW1hZ2UnLCB0ZXh0OiAoKSA9PiBpMThuLnZpZXdPcmlnaW5hbEltYWdlIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgZGlyZWN0OiB7IHR5cGU6ICdib29sZWFuJyB9LAogICAgICBjb250ZXh0bWVudTogeyB0eXBlOiAnYm9vbGVhbicsIGluaXRpYWw6IHRydWUgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICB0aGlzLnJlZi5kaXJlY3QuYWRkQ29uZmlnTGlzdGVuZXIobmV3VmFsdWUgPT4gewogICAgICAgIGlmIChuZXdWYWx1ZSkgbWVkaWEuZG93bmxvYWRJbWFnZS5yZWYuZGlyZWN0LnNldENvbmZpZyhmYWxzZSk7CiAgICAgIH0pOwoKICAgICAgY29uc3Qgdmlld0VuYWJsZWQgPSB0aGlzLmlzRW5hYmxlZCgpOwogICAgICBjb25zdCB2aWV3VHlwZSA9IHRoaXMucmVmLm9wZW4uZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGRpcmVjdFZpZXcgPSB2aWV3RW5hYmxlZCAmJiB0aGlzLnJlZi5kaXJlY3QuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGNvbnRleHRNZW51VmlldyA9IHZpZXdFbmFibGVkICYmIHRoaXMucmVmLmNvbnRleHRtZW51LmdldENvbmZpZygpOwoKICAgICAgY29uc3QgZG93bmxvYWRJbWFnZSA9IG1lZGlhLmRvd25sb2FkSW1hZ2U7CiAgICAgIGNvbnN0IGRvd25sb2FkRW5hYmxlZCA9IGRvd25sb2FkSW1hZ2UuaXNFbmFibGVkKCk7CiAgICAgIGNvbnN0IGRvd25sb2FkTmFtZSA9IGRvd25sb2FkSW1hZ2UucmVmLm5hbWUuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGRpcmVjdERvd25sb2FkID0gZG93bmxvYWRFbmFibGVkICYmIGRvd25sb2FkSW1hZ2UucmVmLmRpcmVjdC5nZXRDb25maWcoKTsKICAgICAgY29uc3QgY29udGV4dE1lbnVEb3dubG9hZCA9IGRvd25sb2FkRW5hYmxlZCAmJiBkb3dubG9hZEltYWdlLnJlZi5jb250ZXh0bWVudS5nZXRDb25maWcoKTsKCiAgICAgIGlmICghdmlld0VuYWJsZWQgJiYgIWRvd25sb2FkRW5hYmxlZCkgcmV0dXJuOwoKICAgICAgLy8g5p+l55yL5Y6f5Zu+CiAgICAgIGNvbnN0IHNob3dPcmlnaW5hbFBhZ2UgPSBmdW5jdGlvbiAoeyBpbWFnZXMsIGN1cnJlbnQgfSkgewogICAgICAgIGlmICh2aWV3VHlwZSAhPT0gJ2ltYWdlJykgewogICAgICAgICAgaW1hZ2VWaWV3ZXIub3Blbih7IGltYWdlcywgY3VycmVudCB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2luZG93Lm9wZW4oaW1hZ2VzW2N1cnJlbnQgLSAxXSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLy8g5re75Yqg5LiA5Liq5p+l55yL5Y6f5Zu+55qE5oyJ6ZKu77yI5Zyo5p+l55yL5aSn5Zu+5peB6L6577yJCiAgICAgIGNvbnN0IHZpZXdPcmlnaW5hbEJ1dHRvbiA9IHZpZXdMYXJnZUxpbmsgPT4gewogICAgICAgIGNvbnN0IHZpZXdPcmlnaW5hbExpbmtDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpOwogICAgICAgIHZpZXdPcmlnaW5hbExpbmtDb250YWluZXIuaW5uZXJIVE1MID0gJzxsaT48c3BhbiBjbGFzcz0ibGluZSBTX2xpbmUxIj48YSBjbGFzcz0iU190eHQxIiBocmVmPSJqYXZhc2NyaXB0OjsiIHRhcmdldD0iX2JsYW5rIj48aSBjbGFzcz0iV19maWNvbiBmaWNvbl9zZWFyY2ggU19maWNvbiI+bDwvaT48L2E+PC9zcGFuPjwvbGk+JzsKICAgICAgICB2aWV3T3JpZ2luYWxMaW5rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2knKS5hZnRlcihpMThuLnZpZXdPcmlnaW5hbFRleHQpOwogICAgICAgIGNvbnN0IHZpZXdPcmlnaW5hbExpbmsgPSB2aWV3T3JpZ2luYWxMaW5rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICBsZXQgaW1hZ2VzLCBjdXJyZW50OwogICAgICAgIGNvbnN0IHVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICh7IGltYWdlcywgY3VycmVudCB9ID0gZ2V0SW1hZ2VzSW5mbyh2aWV3TGFyZ2VMaW5rKSk7CiAgICAgICAgICB2aWV3T3JpZ2luYWxMaW5rLmhyZWYgPSBpbWFnZXNbY3VycmVudCAtIDFdOwogICAgICAgIH07CiAgICAgICAgdmlld09yaWdpbmFsTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICAgIGlmICh2aWV3T3JpZ2luYWxMaW5rLmNsYXNzTGlzdC5jb250YWlucygnU19maWNvbl9kaXMnKSkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodmlld1R5cGUgPT09ICdwYWdlJykgewogICAgICAgICAgICBzaG93T3JpZ2luYWxQYWdlKHsgaW1hZ2VzLCBjdXJyZW50IH0pOwogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIChuZXcgTXV0YXRpb25PYnNlcnZlcih1cGRhdGUpKS5vYnNlcnZlKHZpZXdMYXJnZUxpbmssIHsgYXR0cmlidXRlczogdHJ1ZSB9KTsKICAgICAgICB1cGRhdGUoKTsKICAgICAgICByZXR1cm4gdmlld09yaWdpbmFsTGlua0NvbnRhaW5lci5maXJzdENoaWxkOwogICAgICB9OwoKICAgICAgLy8g5LiL6L295Zu+54mHCiAgICAgIGNvbnN0IGRvd25sb2FkSW1hZ2VzID0gZnVuY3Rpb24gKGltYWdlcywgcmVmKSB7CiAgICAgICAgY29uc3QgZmlsZXMgPSBpbWFnZXMubWFwKCh1cmwsIGluZGV4KSA9PiB7CiAgICAgICAgICBjb25zdCBvcmlGaWxlbmFtZSA9IHVybC5zbGljZSh1cmwubGFzdEluZGV4T2YoJy8nKSArIDEpOwogICAgICAgICAgbGV0IGZpbGVuYW1lID0gb3JpRmlsZW5hbWU7CiAgICAgICAgICBpZiAoZG93bmxvYWROYW1lICE9PSAnb3JpZ2luYWwnKSB7CiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IG9yaUZpbGVuYW1lLnNsaWNlKG9yaUZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykgKyAxKTsKICAgICAgICAgICAgZmlsZW5hbWUgPSAoaW5kZXggKyAxKSArICcuJyArIGV4dGVuc2lvbjsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGZlZWQgPSByZWYuY2xvc2VzdCgnW21pZF0sIFtvbWlkXSwgW2NvbW1lbnRfaWRdJyk7CiAgICAgICAgICBjb25zdCBmZWVkSWQgPSBmZWVkLmdldEF0dHJpYnV0ZSgnY29tbWVudF9pZCcpID8/CiAgICAgICAgICAgIChyZWYuY2xvc2VzdCgnLldCX2ZlZWRfZXhwYW5kJykgJiYgZmVlZC5nZXRBdHRyaWJ1dGUoJ29taWQnKSkgPz8KICAgICAgICAgICAgZmVlZC5nZXRBdHRyaWJ1dGUoJ21pZCcpID8/IDA7CiAgICAgICAgICBjb25zdCBwYXRoID0gJ3dlaWJvLWltYWdlcy8nICsgZG93bmxvYWQuZmlsZW5hbWUoZmVlZElkKSArICcvJyArIGZpbGVuYW1lOwogICAgICAgICAgcmV0dXJuIHsgdXJsLCBmaWxlbmFtZTogcGF0aCB9OwogICAgICAgIH0pOwogICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7CiAgICAgICAgICB1dGlsLmRlYnVnKCdkb3dubG9hZCBmZXRjaCB1cmwgJXMnLCBmaWxlLnVybCk7CiAgICAgICAgfSk7CiAgICAgICAgZG93bmxvYWQudXJscyhmaWxlcyk7CiAgICAgIH07CgogICAgICAvLyDmt7vliqDkuIDkuKrkuIvovb3lm77niYfnmoTmjInpkq7vvIjlnKjmn6XnnIvlpKflm77ml4HovrnvvIkKICAgICAgY29uc3QgZG93bmxvYWRCdXR0b24gPSB2aWV3TGFyZ2VMaW5rID0+IHsKICAgICAgICBjb25zdCBkb3dubG9hZExpbmtDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpOwogICAgICAgIGRvd25sb2FkTGlua0NvbnRhaW5lci5pbm5lckhUTUwgPSAnPGxpPjxzcGFuIGNsYXNzPSJsaW5lIFNfbGluZTEiPjxhIGNsYXNzPSJTX3R4dDEiIGhyZWY9ImphdmFzY3JpcHQ6OyIgdGFyZ2V0PSJfYmxhbmsiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX3NlYXJjaCBTX2ZpY29uIj58PC9pPjwvYT48L3NwYW4+PC9saT4nOwogICAgICAgIGRvd25sb2FkTGlua0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpJykuYWZ0ZXIoaTE4bi5kb3dubG9hZEltYWdlVGV4dCk7CiAgICAgICAgY29uc3QgZG93bmxvYWRMaW5rID0gZG93bmxvYWRMaW5rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICBkb3dubG9hZExpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICBpZiAoIWRvd25sb2FkTGluay5jbGFzc0xpc3QuY29udGFpbnMoJ1NfZmljb25fZGlzJykpIHsKICAgICAgICAgICAgY29uc3QgeyBpbWFnZXMgfSA9IGdldEltYWdlc0luZm8odmlld0xhcmdlTGluayk7CiAgICAgICAgICAgIGRvd25sb2FkSW1hZ2VzKGltYWdlcywgZG93bmxvYWRMaW5rKTsKICAgICAgICAgIH0KICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGRvd25sb2FkTGlua0NvbnRhaW5lci5maXJzdENoaWxkOwogICAgICB9OwoKICAgICAgLy8g5L2/5oyJ6ZKu5LiN5Y+v55SoCiAgICAgIGNvbnN0IGRpc2FibGVCdXR0b24gPSBidXR0b24gPT4gewogICAgICAgIGNvbnN0IGxpbmsgPSBidXR0b24ucXVlcnlTZWxlY3RvcignYScpOwogICAgICAgIGxpbmsuY2xhc3NOYW1lID0gJ1NfZmljb25fZGlzJzsKICAgICAgICBjb25zdCBpY29uID0gbGluay5xdWVyeVNlbGVjdG9yKCdpJyk7CiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdTX2ZpY29uX2RpcycpOwogICAgICB9OwoKICAgICAgLy8g5qOA5p+l5bGV5byA55qE5Zu+54mH77yM5re75Yqg5p+l55yL5Y6f5Zu+5ZKM5LiL6L2955qE6ZO+5o6lCiAgICAgIGNvbnN0IGFkZEltYWdlSGFuZGxlckxpbmsgPSBmdW5jdGlvbiBhZGRJbWFnZUhhbmRsZXJMaW5rKCkgewogICAgICAgIGNvbnN0IHZpZXdMYXJnZUxpbmtzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFsKICAgICAgICAgIC8vIOW+ruWNmumFjeWbvgogICAgICAgICAgJy5XQl9mZWVkIGxpIGFbYWN0aW9uLXR5cGU9IndpZGdldF9waG90b3ZpZXciXTpub3QoW3lhd2Ytdmlldy1vcmldKScsCiAgICAgICAgICAvLyDor4TorrrphY3lm74KICAgICAgICAgICcuV0JfZmVlZCBsaSBhW2FjdGlvbi10eXBlPSJ3aWRnZXRfY29tbWVudFBob3RvVmlldyJdOm5vdChbeWF3Zi12aWV3LW9yaV0pJywKICAgICAgICBdLmpvaW4oJywnKSkpOwogICAgICAgIHZpZXdMYXJnZUxpbmtzLmZvckVhY2godmlld0xhcmdlTGluayA9PiB7CiAgICAgICAgICB2aWV3TGFyZ2VMaW5rLnNldEF0dHJpYnV0ZSgneWF3Zi12aWV3LW9yaScsICcnKTsKICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gdmlld0xhcmdlTGluay5jbGFzc0xpc3QuY29udGFpbnMoJ1NfZmljb25fZGlzJyk7CiAgICAgICAgICBjb25zdCBsaSA9IHZpZXdMYXJnZUxpbmsuY2xvc2VzdCgnbGknKTsKICAgICAgICAgIGlmIChkb3dubG9hZEVuYWJsZWQpIHsKICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZG93bmxvYWRCdXR0b24odmlld0xhcmdlTGluayk7CiAgICAgICAgICAgIGlmIChkaXNhYmxlZCkgZGlzYWJsZUJ1dHRvbihidXR0b24pOwogICAgICAgICAgICBsaS5hZnRlcihidXR0b24pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHZpZXdFbmFibGVkKSB7CiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IHZpZXdPcmlnaW5hbEJ1dHRvbih2aWV3TGFyZ2VMaW5rKTsKICAgICAgICAgICAgaWYgKGRpc2FibGVkKSBkaXNhYmxlQnV0dG9uKGJ1dHRvbik7CiAgICAgICAgICAgIGxpLmFmdGVyKGJ1dHRvbik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoYWRkSW1hZ2VIYW5kbGVyTGluayk7CgogICAgICAvLyDorqnpvKDmoIfmta7kuIrmmL7npLrlm77niYfljaHniYfnmoTpk77mjqXmjIflkJHlm77niYcKICAgICAgY29uc3QgaW1hZ2VDYXJkQXNMaW5rID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGltYWdlY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2ltYWdlY2FyZF06bm90KFt5YXdmLWltYWdlY2FyZC1saW5rXSknKTsKICAgICAgICBpZiAoIWltYWdlY2FyZHMubGVuZ3RoKSByZXR1cm47CiAgICAgICAgaW1hZ2VjYXJkcy5mb3JFYWNoKGltYWdlY2FyZCA9PiB7CiAgICAgICAgICBpbWFnZWNhcmQuc2V0QXR0cmlidXRlKCd5YXdmLWltYWdlY2FyZC1saW5rJywgJ3lhd2YtaW1hZ2VjYXJkLWxpbmsnKTsKICAgICAgICAgIGNvbnN0IHBpZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaW1hZ2VjYXJkLmdldEF0dHJpYnV0ZSgnaW1hZ2VjYXJkJykpLmdldCgncGlkJyk7CiAgICAgICAgICBjb25zdCB1cmwgPSBnZXRVcmxCeVBpZChwaWQpOwogICAgICAgICAgaW1hZ2VjYXJkLmhyZWYgPSB1cmw7CiAgICAgICAgICBpbWFnZWNhcmQudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgICAgICBpbWFnZWNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChpbWFnZUNhcmRBc0xpbmspOwoKICAgICAgLy8g5aSE55CG54K55Ye75pe255u05o6l5p+l55yL5Y6f5Zu+L+S4i+i9veeahOaDheWGtQogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgICBpZiAoZXZlbnQuYnV0dG9uICE9PSAwKSByZXR1cm47IC8vIOWPquWTjeW6lOW3pumUruaTjeS9nAogICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLnlhd2YtV19pY29uX3RhZ185cCcpKSByZXR1cm47IC8vIOWxleW8gOi/h+Wkmuiiq+aKmOWPoOeahOWbvueJh+aMiemSruS4jeWTjeW6lAogICAgICAgIGNvbnN0IHBpYyA9IHRhcmdldC5jbG9zZXN0KCcuV0JfbWVkaWFfd3JhcCAuV0JfcGljJykgPz8gdGFyZ2V0LmNsb3Nlc3QoJ2FbaW1hZ2VjYXJkXScpOwogICAgICAgIGlmICghcGljKSByZXR1cm47CiAgICAgICAgY29uc3QgYWN0aXZlID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnN0IHNoaWZ0ID0gZXZlbnQuc2hpZnRLZXk7CiAgICAgICAgICBjb25zdCBjdHJsID0gL21hYy9pLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSA/IGV2ZW50Lm1ldGFLZXkgOiBldmVudC5jdHJsS2V5OwogICAgICAgICAgaWYgKHNoaWZ0KSByZXR1cm4gbnVsbDsKICAgICAgICAgIGlmICghZGlyZWN0VmlldyAmJiB2aWV3RW5hYmxlZCAmJiBjdHJsKSByZXR1cm4gJ3ZpZXcnOwogICAgICAgICAgaWYgKCFkaXJlY3REb3dubG9hZCAmJiBkb3dubG9hZEVuYWJsZWQgJiYgY3RybCkgcmV0dXJuICdkb3dubG9hZCc7CiAgICAgICAgICBpZiAoZGlyZWN0VmlldykgcmV0dXJuICd2aWV3JzsKICAgICAgICAgIGlmIChkaXJlY3REb3dubG9hZCkgcmV0dXJuICdkb3dubG9hZCc7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9KCkpOwogICAgICAgIGlmICghYWN0aXZlKSByZXR1cm47CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBjb25zdCB7IGltYWdlcywgY3VycmVudCB9ID0gZ2V0SW1hZ2VzSW5mbyhwaWMpOwogICAgICAgIGNvbnN0IGlzVmlldyA9IGRpcmVjdFZpZXcgfHwgIWRpcmVjdERvd25sb2FkICYmIHZpZXdFbmFibGVkOwogICAgICAgIGlmIChpc1ZpZXcpIHNob3dPcmlnaW5hbFBhZ2UoeyBpbWFnZXMsIGN1cnJlbnQgfSk7CiAgICAgICAgZWxzZSBkb3dubG9hZEltYWdlcyhpbWFnZXMsIHRhcmdldCk7CiAgICAgIH0sIHRydWUpOwoKICAgICAgLy8g5re75Yqg5Y+z6ZSu6I+c5Y2V5pSv5oyBCiAgICAgIGlmIChlbnYuY29uZmlnLmNvbnRleHRNZW51U3VwcG9ydGVkICYmIChjb250ZXh0TWVudVZpZXcgfHwgY29udGV4dE1lbnVEb3dubG9hZCkpIHsKICAgICAgICBjb250ZXh0bWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqL2V2ZW50KSB7CiAgICAgICAgICAvKiogQHR5cGUge0VsZW1lbnQgJiBFdmVudFRhcmdldH0gKi8KICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgIGNvbnN0IHBpYyA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IHBpYyA9IHRhcmdldC5jbG9zZXN0KCcuV0JfbWVkaWFfd3JhcCAuV0JfcGljJykgPz8gdGFyZ2V0LmNsb3Nlc3QoJ2FbaW1hZ2VjYXJkXScpOwogICAgICAgICAgICBpZiAocGljKSByZXR1cm4gcGljOwogICAgICAgICAgICBjb25zdCBmZWVkID0gdGFyZ2V0LmNsb3Nlc3QoJy5XQl9mZWVkX3R5cGUnKTsKICAgICAgICAgICAgaWYgKCFmZWVkKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3QgZmVlZFBpYyA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX21lZGlhX3dyYXAgLldCX3BpYycpOwogICAgICAgICAgICByZXR1cm4gZmVlZFBpYzsKICAgICAgICAgIH0oKSk7CiAgICAgICAgICBpZiAoIXBpYyB8fCAhcGljLmNvbnRhaW5zKHRhcmdldCkpIHJldHVybiBbXTsKICAgICAgICAgIGNvbnN0IHsgaW1hZ2VzLCBjdXJyZW50IH0gPSBnZXRJbWFnZXNJbmZvKHBpYyk7CiAgICAgICAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgICAgICAgIGlmIChjb250ZXh0TWVudVZpZXcpIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgICAgIHRpdGxlOiBpMThuLnZpZXdPcmlnaW5hbFRleHQsCiAgICAgICAgICAgICAgb25jbGljazogKCkgPT4geyBzaG93T3JpZ2luYWxQYWdlKHsgaW1hZ2VzLCBjdXJyZW50IH0pOyB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjb250ZXh0TWVudURvd25sb2FkKSB7CiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsKICAgICAgICAgICAgICB0aXRsZTogaTE4bi5kb3dubG9hZEltYWdlVGV4dCwKICAgICAgICAgICAgICBvbmNsaWNrOiAoKSA9PiB7IGRvd25sb2FkSW1hZ2VzKHsgaW1hZ2VzLCBjdXJyZW50IH0pOyB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZG93bmxvYWRJbWFnZTogZW52LmNvbmZpZy5jb250ZXh0TWVudVN1cHBvcnRlZCA/IHsKICAgICAgY246ICfmn6XnnIvlm77niYfmt7vliqDigJzmibnph4/kuIvovb3igJ3pk77mjqV85L2/55Soe3tuYW1lfX3mlofku7blkI3kv53lrZh8fHt7ZGlyZWN0fX3ngrnlh7vnvKnnlaXlm77ml7bnm7TmjqXlvIDlp4vkuIvovb18fHt7Y29udGV4dG1lbnV9fea3u+WKoOWIsOWPs+mUruiPnOWNlScsCiAgICAgIHR3OiAn5p+l55yL5ZyW54mH5re75Yqg44CM5om55qyh5LiL6LyJ44CN6YCj57WQfOS9v+eUqHt7bmFtZX195qqU5ZCN5YSy5a2YfHx7e2RpcmVjdH196bue5pOK57iu5ZyW5pmC55u05o6l6ZaL5aeL5LiL6LyJfHx7e2NvbnRleHRtZW51fX3mt7vliqDliLDmk43kvZzlip/og73ooagnLAogICAgICBlbjogJ0FkZCAiQmF0Y2ggRG93bmxvYWQiIGxpbmsgZm9yIGltYWdlcyB7e25hbWV9fXxVc2Uge3tuYW1lfX0gZmlsZW5hbWVzIHx8IHt7ZGlyZWN0fX0gVHJpZ2dlciBkb3dubG9hZCBieSBjbGlja2luZyBvbiB0aHVtYm5haWx8fHt7Y29udGV4dG1lbnV9fSBBZGQgdG8gY29udGV4dCBtZW51JywKICAgIH0gOiB7CiAgICAgIGNuOiAn5p+l55yL5Zu+54mH5re75Yqg4oCc5om56YeP5LiL6L294oCd6ZO+5o6lfOS9v+eUqHt7bmFtZX195paH5Lu25ZCN5L+d5a2YfHx7e2RpcmVjdH1954K55Ye757yp55Wl5Zu+5pe255u05o6l5byA5aeL5LiL6L29JywKICAgICAgdHc6ICfmn6XnnIvlnJbniYfmt7vliqDjgIzmibnmrKHkuIvovInjgI3pgKPntZB85L2/55Soe3tuYW1lfX3mqpTlkI3lhLLlrZh8fHt7ZGlyZWN0fX3pu57mk4rnuK7lnJbmmYLnm7TmjqXplovlp4vkuIvovInooagnLAogICAgICBlbjogJ0FkZCAiQmF0Y2ggRG93bmxvYWQiIGxpbmsgZm9yIGltYWdlcyB7e25hbWV9fXxVc2Uge3tuYW1lfX0gZmlsZW5hbWVzIHx8IHt7ZGlyZWN0fX0gVHJpZ2dlciBkb3dubG9hZCBieSBjbGlja2luZyBvbiB0aHVtYm5haWwnLAogICAgfSwKICAgIGRvd25sb2FkSW1hZ2VOYW1lT3JpZ2luYWw6IHsKICAgICAgY246ICfljp/lp4snLAogICAgICBlbjogJ29yaWdpbmFsJywKICAgIH0sCiAgICBkb3dubG9hZEltYWdlTmFtZUluZGV4OiB7CiAgICAgIGNuOiAn5bqP5Y+3JywKICAgICAgdHc6ICfluo/omZ8nLAogICAgICBlbjogJ2luZGV4JywKICAgIH0sCiAgICBkb3dubG9hZEltYWdlVGV4dDogewogICAgICBjbjogJ+aJuemHj+S4i+i9vScsCiAgICAgIHR3OiAn5om55qyh5LiL6LyJJywKICAgICAgZW46ICdCYXRjaCBEb3dubG9hZCcsCiAgICB9LAogIH0pOwoKICBtZWRpYS5kb3dubG9hZEltYWdlID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9kb3dubG9hZF9pbWFnZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBtZWRpYS5tZWRpYSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmRvd25sb2FkSW1hZ2UsCiAgICByZWY6IHsKICAgICAgbmFtZTogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJ2luZGV4JywgdGV4dDogKCkgPT4gaTE4bi5kb3dubG9hZEltYWdlTmFtZUluZGV4IH0sCiAgICAgICAgICB7IHZhbHVlOiAnb3JpZ2luYWwnLCB0ZXh0OiAoKSA9PiBpMThuLmRvd25sb2FkSW1hZ2VOYW1lT3JpZ2luYWwgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICBkaXJlY3Q6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sCiAgICAgIGNvbnRleHRtZW51OiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIHRoaXMucmVmLmRpcmVjdC5hZGRDb25maWdMaXN0ZW5lcihuZXdWYWx1ZSA9PiB7CiAgICAgICAgaWYgKG5ld1ZhbHVlKSBtZWRpYS52aWV3T3JpZ2luYWwucmVmLmRpcmVjdC5zZXRDb25maWcoZmFsc2UpOwogICAgICB9KTsKICAgICAgLy8g5a6e546w5Zyo5p+l55yL5Y6f5Zu+5Yqf6IO96YKj6YeMCiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGltYWdlUHJldmlld01vcmU6IHsgY246ICfmlK/mjIHotoXov4cgOSDlvKDphY3lm77nmoTlvq7ljZp7e2l9fXx86aKE6KeIe3tjb3VudH19fHzmnInlm77niYfmnKrmmL7npLrml7Z7e21vcmV9fScsIHR3OiAn5pSv5o+06LaF6YGOIDkg5by16YWN5ZyW55qE5b6u5Y2a6aGv56S6e3tpfX18fOmgkOimvXt7Y291bnR9fXx85pyJ5ZyW54mH5pyq6aGv56S65pmCe3ttb3JlfX0nLCBlbjogJ1N1cHBvcnQgZmVlZHMgd2l0aCBtb3JlIHRoYW4gOSBpbWFnZXMge3tpfX0gfHwgcHJldmlldyB7e2NvdW50fX18fHdpdGgge3ttb3JlfX0nIH0sCiAgICBpbWFnZVByZXZpZXdNb3JlRGV0YWlsOiB7IGNuOiAn6ZyA6KaB5omT5byA6L+Z5Liq5Yqf6IO977yM5Lul5biu5Yqp5p+l55yL5Y6f5Zu+44CB5om56YeP5LiL6L29562J5Yqf6IO95pSv5oyB6LaF6L+HIDkg5byg5Zu+54mH55qE5b6u5Y2a44CCJyB9LAogICAgaW1hZ2VQcmV2aWV3Rmlyc3QzeDI6IHsgY246ICfliY0gNiDlvKDvvIjmr4/ooYwgMyDlvKDvvIknLCB0dzogJ+WJjSA2IOW8te+8iOavj+WIlyAzIOW8te+8iScsIGVuOiAnZmlyc3QgNiAoMyBlYWNoIHJvdyknIH0sCiAgICBpbWFnZVByZXZpZXdGaXJzdDR4MjogeyBjbjogJ+WJjSA4IOW8oO+8iOavj+ihjCA0IOW8oO+8iScsIHR3OiAn5YmNIDgg5by177yI5q+P5YiXIDQg5by177yJJywgZW46ICdmaXJzdCA4ICg0IGVhY2ggcm93KScgfSwKICAgIGltYWdlUHJldmlld0ZpcnN0M3gzOiB7IGNuOiAn5YmNIDkg5byg77yI5q+P6KGMIDMg5byg77yJJywgdHc6ICfliY0gOSDlvLXvvIjmr4/liJcgMyDlvLXvvIknLCBlbjogJ2ZpcnN0IDkgKDMgZWFjaCByb3cpJyB9LAogICAgaW1hZ2VQcmV2aWV3Rmlyc3Q0eDM6IHsgY246ICfliY0gMTIg5byg77yI5q+P6KGMIDQg5byg77yJJywgdHc6ICfliY0gMTIg5by177yI5q+P5YiXIDQg5by177yJJywgZW46ICdmaXJzdCAxMiAoNCBlYWNoIHJvdyknIH0sCiAgICBpbWFnZVByZXZpZXdBbGwzOiB7IGNuOiAn5YWo6YOo5Zu+54mH77yI5q+P6KGMIDMg5byg77yJJywgdHc6ICflhajpg6jlnJbniYfvvIjmr4/liJcgMyDlvLXvvIknLCBlbjogJ2FsbCAoMyBlYWNoIHJvdyknIH0sCiAgICBpbWFnZVByZXZpZXdBbGw0OiB7IGNuOiAn5YWo6YOo5Zu+54mH77yI5q+P6KGMIDQg5byg77yJJywgdHc6ICflhajpg6jlnJbniYfvvIjmr4/liJcgNCDlvLXvvIknLCBlbjogJ2FsbCAoNCBlYWNoIHJvdyknIH0sCiAgICBpbWFnZVByZXZpZXdVc2VUZXh0OiB7IGNuOiAn5Zyo5Zu+54mH5ZCO5pi+56S65bGV5byA5pS26LW35oyJ6ZKuJywgdHc6ICflnKjlnJbniYflvozpoa/npLrlsZXplovmlLbotbfmjInpiJUnLCBlbjogJ3Nob3cgLyBoaWRlIGJ1dHRvbiBhZnRlciBpbWFnZXMnIH0sCiAgICBpbWFnZVByZXZpZXdVc2VNYXNrOiB7IGNuOiAn5pyA5ZCO5LiA5byg6aKE6KeI5pi+56S65Ymp5L2Z5Zu+54mH5pWw6YePJywgdHc6ICfmnIDlvozkuIDlvLXpoJDopr3poa/npLrlianppJjlnJbniYfmlbjph48nLCBlbjogJ251bWJlciBvZiByZW1haW5pbmcgb24gbGFzdCBpbWFnZScgfSwKICAgIGFuaW1hdGVkSW1hZ2U6IHsgY246ICfliqjlm74nIH0sCiAgICBwcmV2aWV3QWxsU2hvdzogeyBjbjogJ+afpeeci+WFqOmDqOWbvueJh++8iOWFsSB7MX0g5byg77yJJywgdHc6ICfplrHopr3lhajpg6jlnJbniYfvvIjlhbEgezF9IOW8te+8iScsIGVuOiAnVmlldyBhbGwgKHsxfSBpbWFnZXMpJyB9LAogICAgcHJldmlld0FsbEZvbGQ6IHsgY246ICfmlLbotbflm77niYcnLCB0dzogJ+aUtui1t+WclueJhycsIGVuOiAnRm9sZCBpbWFnZXMnIH0sCiAgfSk7CgogIG1lZGlhLmltYWdlUHJldmlld0FsbCA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnaW1hZ2VfcHJldmlld19hbGwnLAogICAgdmVyc2lvbjogNTAsCiAgICBwYXJlbnQ6IG1lZGlhLm1lZGlhLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uaW1hZ2VQcmV2aWV3TW9yZSwKICAgIHJlZjogewogICAgICBjb3VudDogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGluaXRpYWw6ICczeDMnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJzN4MicsIHRleHQ6ICgpID0+IGkxOG4uaW1hZ2VQcmV2aWV3Rmlyc3QzeDIgfSwKICAgICAgICAgIHsgdmFsdWU6ICc0eDInLCB0ZXh0OiAoKSA9PiBpMThuLmltYWdlUHJldmlld0ZpcnN0NHgyIH0sCiAgICAgICAgICB7IHZhbHVlOiAnM3gzJywgdGV4dDogKCkgPT4gaTE4bi5pbWFnZVByZXZpZXdGaXJzdDN4MyB9LAogICAgICAgICAgeyB2YWx1ZTogJzR4MycsIHRleHQ6ICgpID0+IGkxOG4uaW1hZ2VQcmV2aWV3Rmlyc3Q0eDMgfSwKICAgICAgICAgIHsgdmFsdWU6ICczeDAnLCB0ZXh0OiAoKSA9PiBpMThuLmltYWdlUHJldmlld0FsbDMgfSwKICAgICAgICAgIHsgdmFsdWU6ICc0eDAnLCB0ZXh0OiAoKSA9PiBpMThuLmltYWdlUHJldmlld0FsbDQgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICBtb3JlOiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgaW5pdGlhbDogJ3RleHQnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJ3RleHQnLCB0ZXh0OiAoKSA9PiBpMThuLmltYWdlUHJldmlld1VzZVRleHQgfSwKICAgICAgICAgIHsgdmFsdWU6ICdtYXNrJywgdGV4dDogKCkgPT4gaTE4bi5pbWFnZVByZXZpZXdVc2VNYXNrIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmltYWdlUHJldmlld01vcmVEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICB0aGlzLnJlZi5jb3VudC5hZGRDb25maWdMaXN0ZW5lcihjb3VudCA9PiB7CiAgICAgICAgY29uc3Qgc2hvd0FsbCA9IGNvdW50LmVuZHNXaXRoKCcwJyk7CiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLnJlZi5tb3JlLmdldFJlbmRlckl0ZW1zKCk7CiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGl0ZW0ucGFyZW50Tm9kZTsKICAgICAgICAgIGlmIChzaG93QWxsKSBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIGVsc2UgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBjb25zdCBwcmV2aWV3U2l6ZSA9IHRoaXMucmVmLmNvdW50LmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IHByZXZpZXdXaWR0aCA9ICtwcmV2aWV3U2l6ZVswXTsKICAgICAgICBjb25zdCBwcmV2aWV3Q291bnQgPSBwcmV2aWV3U2l6ZVswXSAqIHByZXZpZXdTaXplWzJdIHx8IEluZmluaXR5OwogICAgICAgIGNvbnN0IGxhc3RJbWFnZU1hc2sgPSB0aGlzLnJlZi5tb3JlLmdldENvbmZpZygpID09PSAnbWFzayc7CgogICAgICAgIG9ic2VydmVyLmZlZWQub25BZnRlcihhc3luYyBmdW5jdGlvbiAoLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgICAvLyDmlLbol4/pobXpnaLnm67liY3ljp/nlJ/kuI3mlK/mjIHvvIzljp/lm6DkuI3mmI4KICAgICAgICAgIGNvbnN0IG9mZmljaWFsTm90U3VwcG9ydCA9IGluaXQucGFnZS50eXBlKCkgPT09ICdmYXYnOwogICAgICAgICAgLy8g5Y2V5p2h5b6u5Y2a6aG16Z2i5bey57uP6aKE5YWI5bGV5byA5LqG77yM5omA5Lul5LiN6IO95YaN57un57ut5pON5L2c5LqGCiAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2lkXj0iUGxfT2ZmaWNpYWxfV2VpYm9EZXRhaWxfXyJdJykpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHVsID0gZmVlZC5xdWVyeVNlbGVjdG9yKCd1bFtub2RlLXR5cGU9ImZsX3BpY19saXN0Il0nKTsKICAgICAgICAgIC8vIOWmguaenOayoeacieWbvueJh++8jOaIluiAheW3sue7j+acieesrOWNgeW8oOWbvueJh+S6hu+8jOmCo+aIkeS7rOW6lOivpeS4jeW3peS9nAogICAgICAgICAgaWYgKCF1bCB8fCB1bC5xdWVyeVNlbGVjdG9yKCcubGlfMTAnKSkgcmV0dXJuOwogICAgICAgICAgLy8g6aaW6aG1562J5a6Y5pa55pSv5oyB55qE6aG16Z2i77yM5Lya5qCH6K6wIG92ZXI5cGlj77yM5oiR5Lus55So6L+Z5Liq5bGe5oCn5p2l5Yik5patCiAgICAgICAgICBpZiAoIW9mZmljaWFsTm90U3VwcG9ydCAmJiAhdWwuZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpLmluY2x1ZGVzKCdvdmVyOXBpYz0xJykpIHJldHVybjsKICAgICAgICAgIC8vIOebruWJjemDqOWIhumhtemdouayoeacieaUr+aMge+8jOaIkeS7rOWPquiDveeci+WIsOa7oSA5IOW8oOWbvu+8jOWwseWOu+ajgOafpeaYr+S4jeaYr+acieesrOWNgeW8oAogICAgICAgICAgaWYgKG9mZmljaWFsTm90U3VwcG9ydCAmJiAhdWwucXVlcnlTZWxlY3RvcignLmxpXzknKSkgcmV0dXJuOwogICAgICAgICAgY29uc3QgbWlkID0gKGZlZWRQYXJzZXIuaXNGb3J3YXJkKGZlZWQpID8gZmVlZFBhcnNlci5vbWlkIDogZmVlZFBhcnNlci5taWQpKGZlZWQpOwogICAgICAgICAgY29uc3QgW2F1dGhvcl0gPSBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKTsKICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gZmVlZFBhcnNlci5pc0ZvcndhcmQoZmVlZCkgPyBmZWVkUGFyc2VyLm9yaWdpbmFsLmlkKGZlZWQpIDogYXV0aG9yOwogICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZCgneWF3Zi1XQl9tZWRpYV9hX205cF9sb2FkaW5nJyk7CiAgICAgICAgICAvKiogQHR5cGUge3N0cmluZ1tdfSAqLwogICAgICAgICAgY29uc3QgYWxsSW1hZ2VzID0gYXdhaXQgcmVxdWVzdC5nZXRBbGxJbWFnZXMob3JpZ2luYWwsIG1pZCk7CiAgICAgICAgICB1bC5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLVdCX21lZGlhX2FfbTlwX2xvYWRpbmcnKTsKICAgICAgICAgIGlmICghYWxsSW1hZ2VzPy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGltYWdlQ291bnQgPSBhbGxJbWFnZXMubGVuZ3RoOwogICAgICAgICAgaWYgKGltYWdlQ291bnQgPT09IDkgJiYgb2ZmaWNpYWxOb3RTdXBwb3J0KSByZXR1cm47CiAgICAgICAgICBjb25zdCBwaWRzID0gYWxsSW1hZ2VzLm1hcChpbWcgPT4gaW1nLnJlcGxhY2UoL14uKlwvKC4qKVwuLiokLywgJyQxJykpOwogICAgICAgICAgY29uc3QgaW1nVHlwZSA9IHR5cGUgPT4gaW1nID0+IGltZy5yZXBsYWNlKC9eKC4qXC8pLiooXC8uKikkLywgKF8sIGQsIG4pID0+IGQgKyB0eXBlICsgbik7CiAgICAgICAgICAvLyDmnIDlkI7kuIDkuKrlm77niYfnmoTmoLzlvI/lkozliKvkurrkuI3kuIDmoLfvvIzlpoLmnpzmiJHku6zopoHmmL7npLrnmoTkuI3mmK855Liq77yM5bCx5Lya5b6I5aWH5oCq77yM5omA5Lul5oiR5Lus5Yig5o6J5YaN6Ieq5bex5Yqg5LiA6YGNCiAgICAgICAgICB1bC5yZW1vdmVDaGlsZCh1bC5xdWVyeVNlbGVjdG9yKCcubGlfOScpKTsKICAgICAgICAgIGFsbEltYWdlcy5mb3JFYWNoKChpbWFnZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaWYgKGluZGV4IDwgOCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBwaWQgPSBwaWRzW2luZGV4XTsKICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgICAgICBsaS5jbGFzc05hbWUgPSBgV0JfcGljIGxpXyR7aW5kZXggKyAxfSBTX2JnMSBTX2xpbmUyIGJpZ2N1cnNvciBsaV9mb2N1cyB5YXdmLWxpX21vcmVgOwogICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJywgYGlzUHJpdmF0ZT0wJnJlbGF0aW9uPTAmcGljX2lkPSR7cGlkfWApOwogICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi10eXBlJywgJ2ZsX3BpY3MnKTsKICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdzdWRhLXVhdHJhY2snLCBga2V5PXRibG9nX25ld2ltYWdlX2ZlZWQmdmFsdWU9aW1hZ2VfZmVlZF91bmZvbGQ6JHttaWR9OiR7cGlkfToke2F1dGhvcn06MGApOwogICAgICAgICAgICBjb25zdCBpbWcgPSBsaS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKSk7CiAgICAgICAgICAgIC8vIOWboOS4uuS4jeefpemBk+aAu+WuveavlOeahOaXtuWAmeS4jeWkquaWueS+v+WkhOeQhiBvcmozNjDvvIzmiYDku6XnlKggdGh1bWIzMDAg5Luj5pu/5LiA5LiLCiAgICAgICAgICAgIGltZy5zcmMgPSBpbWdUeXBlKCd0aHVtYjMwMCcpKGltYWdlKTsKICAgICAgICAgICAgaW1nLnN0eWxlID0gJ2hlaWdodDoxMTBweDt3aWR0aDoxMTBweDt0b3A6MDtsZWZ0OjA7JzsKICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgICAgICBpZiAoaW1hZ2UuZW5kc1dpdGgoJy5naWYnKSkgewogICAgICAgICAgICAgIGNvbnN0IHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTsKICAgICAgICAgICAgICB0aXAuY2xhc3NOYW1lID0gJ1dfaWNvbl90YWdfdjInOwogICAgICAgICAgICAgIHRpcC50ZXh0Q29udGVudCA9IGkxOG4uYW5pbWF0ZWRJbWFnZTsKICAgICAgICAgICAgICBsaS5hcHBlbmRDaGlsZCh0aXApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoaW1hZ2VDb3VudCA8IDEwKSByZXR1cm47CiAgICAgICAgICAvLyDlkIzml7bkv53nlZkgV0JfbWVkaWFfYV9tOQogICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZCgneWF3Zi1XQl9tZWRpYV9hX20nICsgaW1hZ2VDb3VudCwgJ3lhd2YtV0JfbWVkaWFfYV9tOXAnKTsKICAgICAgICAgIC8vIOS4jeiDveeUqCBVUkxTZWFyY2hQYXJhbXMg5p2l5aSE55CGIGFjdGlvbkRhdGHvvIzlm6DkuLrlroPpnIDopoHpobnnm67pl7TnmoTpgJflj7fkuI3ooqvovazkuYnmiY3og73mraPluLjlt6XkvZwKICAgICAgICAgIGNvbnN0IGFjdGlvbkRhdGEgPSB1bC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykuc3BsaXQoJyYnKTsKICAgICAgICAgIGNvbnN0IHNldEFjdGlvbkRhdGEgPSAoa2V5LCB2YWx1ZSkgPT4gewogICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGtleSArICc9JyArIHZhbHVlLm1hcChlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oJywnKTsKICAgICAgICAgICAgY29uc3QgaXRlbSA9IGFjdGlvbkRhdGEuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5zdGFydHNXaXRoKGtleSArICc9JykpOwogICAgICAgICAgICBpZiAoaXRlbSAhPT0gLTEpIGFjdGlvbkRhdGFbaXRlbV0gPSBuZXdWYWx1ZTsKICAgICAgICAgICAgZWxzZSBhY3Rpb25EYXRhLnB1c2gobmV3VmFsdWUpOwogICAgICAgICAgfTsKICAgICAgICAgIHNldEFjdGlvbkRhdGEoJ2NsZWFyX3BpY1NyYycsIGFsbEltYWdlcy5tYXAoaW1nVHlwZSgnbXc2OTAnKSkpOwogICAgICAgICAgc2V0QWN0aW9uRGF0YSgndGh1bWJfcGljU3JjJywgYWxsSW1hZ2VzLm1hcChpbWdUeXBlKCdvcmozNjAnKSkpOwogICAgICAgICAgc2V0QWN0aW9uRGF0YSgncGljX2lkcycsIHBpZHMpOwogICAgICAgICAgc2V0QWN0aW9uRGF0YSgnb2JqZWN0X2lkcycsIHBpZHMubWFwKHBpZCA9PiAnMTA0MjAxODonICsgcGlkKSk7CiAgICAgICAgICAvLyDlvq7ljZroh6rlt7HliKTmlq3nmoTmmK8gb3ZlcjlwaWMgPT0gMe+8jOaJgOS7peaIkeS7rOeUqOWbvueJh+aVsOmHj+S7o+abv+S4gOS4i+i/meS4quWAvAogICAgICAgICAgLy8g6L+Z5qC35pei5YyF5ousICJvdmVyOXBpYz0xIiDlrZDkuLLvvIzkuZ/kv53mjIHkuoYgdHJ1dGh577yM5ZCM5pe26L+Y5LiN5pivIDEKICAgICAgICAgIHNldEFjdGlvbkRhdGEoJ292ZXI5cGljJywgW2FsbEltYWdlcy5sZW5ndGhdKTsKICAgICAgICAgIC8vIEdJRiDlr7nlupTnmoTop4bpopEgaWQg5ou/5LiN5Yiw77yM5omA5Lul5bCx5LiN5pu05paw5LqG77yM5Y+N5q2j5Lmf5bCx5piv5Yqo5Zu+5pS+5LiN5LqG572i5LqGCiAgICAgICAgICB1bC5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJywgYWN0aW9uRGF0YS5qb2luKCcmJykpOwoKICAgICAgICAgIGlmIChpbWFnZUNvdW50ID4gcHJldmlld0NvdW50KSB7CiAgICAgICAgICAgIC8qKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9ICovCiAgICAgICAgICAgIGNvbnN0IG1lZGlhV3JhcCA9IHVsLmNsb3Nlc3QoJy5XQl9tZWRpYV93cmFwJyk7CiAgICAgICAgICAgIGlmIChsYXN0SW1hZ2VNYXNrKSB7CiAgICAgICAgICAgICAgY29uc3QgbGFzdEltYWdlID0gdWwucXVlcnlTZWxlY3RvckFsbCgnLldCX3BpYycpW3ByZXZpZXdDb3VudCAtIDFdOwogICAgICAgICAgICAgIGNvbnN0IG1hc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgbWFzay5jbGFzc05hbWUgPSAneWF3Zi1XX2ljb25fdGFnXzlwIFdfaWNvbl90YWdfOXAnOwogICAgICAgICAgICAgIG1hc2sudGV4dENvbnRlbnQgPSAnKycgKyAoaW1hZ2VDb3VudCAtIHByZXZpZXdDb3VudCk7CiAgICAgICAgICAgICAgbGFzdEltYWdlLmFwcGVuZENoaWxkKG1hc2spOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIOexu+S8vOi2hei/hyAxNDAg5a2X55qE5bGV5byA5YWo5paH5LiA5qC377yM5oiR5Lus5pi+56S65LiA5Liq5p+l55yL5omA5pyJ5Zu+54mH55qE5oyJ6ZKuCiAgICAgICAgICAgICAgY29uc3QgZm9sZENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgIGZvbGRDb250YWluZXIuY2xhc3NOYW1lID0gJ3lhd2YtV0JfbWVkaWFfYV9jdHJsIHlhd2YtV0JfdGV4dF9zaXplJzsKICAgICAgICAgICAgICBmb2xkQ29udGFpbmVyLmlubmVySFRNTCA9ICc8YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJ5YXdmLVdCX21lZGlhX2Ffc2hvdyI+PGkgY2xhc3M9IldfZmljb24gZmljb25fYXJyb3dfZG93biI+YzwvaT48L2E+PGEgaHJlZj0iamF2YXNjcmlwdDo7IiBjbGFzcz0ieWF3Zi1XQl9tZWRpYV9hX2ZvbGQiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX2Fycm93X3VwIj5kPC9pPjwvYT4nOwogICAgICAgICAgICAgIGNvbnN0IHNob3dCdXR0b24gPSBmb2xkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLVdCX21lZGlhX2Ffc2hvdycpOwogICAgICAgICAgICAgIGNvbnN0IHNob3dUZXh0ID0gaTE4bi5wcmV2aWV3QWxsU2hvdy5yZXBsYWNlKCd7MX0nLCAoKSA9PiBpbWFnZUNvdW50KTsKICAgICAgICAgICAgICBzaG93QnV0dG9uLmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzaG93VGV4dCksIHNob3dCdXR0b24uZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgY29uc3QgZm9sZEJ1dHRvbiA9IGZvbGRDb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtV0JfbWVkaWFfYV9mb2xkJyk7CiAgICAgICAgICAgICAgY29uc3QgZm9sZFRleHQgPSBpMThuLnByZXZpZXdBbGxGb2xkOwogICAgICAgICAgICAgIGZvbGRCdXR0b24uaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGZvbGRUZXh0KSwgZm9sZEJ1dHRvbi5maXJzdENoaWxkKTsKICAgICAgICAgICAgICBzaG93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgbWVkaWFXcmFwLmNsYXNzTGlzdC5hZGQoJ3lhd2YtV0JfbWVkaWFfYV9hbGwnKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBmb2xkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb2xkSGVpZ2h0ID0gbWVkaWFXcmFwLmNsaWVudEhlaWdodDsKICAgICAgICAgICAgICAgIGNvbnN0IG9sZFNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICBtZWRpYVdyYXAuY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi1XQl9tZWRpYV9hX2FsbCcpOwogICAgICAgICAgICAgICAgLy8g6LCD5pW05rua5Yqo5p2h5Lul6YCC5bqU6auY5bqm5Y+Y5YyWCiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBjb25zdCBuZXdIZWlnaHQgPSBtZWRpYVdyYXAuY2xpZW50SGVpZ2h0OwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gb2xkU2Nyb2xsVG9wIC0gb2xkSGVpZ2h0ICsgbmV3SGVpZ2h0OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgbWVkaWFXcmFwLmFwcGVuZENoaWxkKGZvbGRDb250YWluZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUocHJldmlld0NvdW50KSkgY3NzLmFwcGVuZChgLnlhd2YtV0JfbWVkaWFfYV9tOXAgLmxpXyR7cHJldmlld0NvdW50fSB+IC5XQl9waWMgeyBkaXNwbGF5OiBub25lOyB9YCk7CiAgICAgICAgY3NzLmFwcGVuZChgCi55YXdmLVdCX21lZGlhX2FfbTlwX2xvYWRpbmcgeyB2aXNpYmlsaXR5OiBoaWRkZW47IG9wYWNpdHk6IDA7IH0KLnlhd2YtV0JfbWVkaWFfYV9hbGwgLnlhd2YtV19pY29uX3RhZ185cCB7IGRpc3BsYXk6IG5vbmU7IH0KLnlhd2YtV0JfbWVkaWFfYV9hbGwgLnlhd2YtV0JfbWVkaWFfYV9tOXAgLldCX3BpYyB7IGRpc3BsYXk6IGJsb2NrOyB9Ci55YXdmLVdCX21lZGlhX2FfZm9sZCB7IGRpc3BsYXk6IG5vbmU7IH0KLnlhd2YtV0JfbWVkaWFfYV9zaG93IHsgZGlzcGxheTogaW5saW5lOyB9Ci55YXdmLVdCX21lZGlhX2FfYWxsIC55YXdmLVdCX21lZGlhX2FfZm9sZCB7IGRpc3BsYXk6IGlubGluZTsgfQoueWF3Zi1XQl9tZWRpYV9hX2FsbCAueWF3Zi1XQl9tZWRpYV9hX3Nob3cgeyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCX21lZGlhX2FfY3RybCB7IGNsZWFyOiBib3RoOyBtYXJnaW4tbGVmdDogMTBweDsgcGFkZGluZy10b3A6IDRweDsgfQpgKTsKICAgICAgICBpZiAocHJldmlld1dpZHRoID09PSA0KSB7CiAgICAgICAgICBjb25zdCBzbWFsbEltYWdlID0gZmVlZHMubGF5b3V0LnNtYWxsSW1hZ2UuaXNFbmFibGVkKCk7CiAgICAgICAgICBpZiAoc21hbGxJbWFnZSkgewogICAgICAgICAgICBjc3MuYXBwZW5kKCcuV0JfZmVlZF92MyAuV0JfbWVkaWFfYS55YXdmLVdCX21lZGlhX2FfbTlwIHsgd2lkdGg6IDM0NXB4OyB9Jyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjc3MuYXBwZW5kKCcuV0JfZmVlZF92MyAuV0JfbWVkaWFfYS55YXdmLVdCX21lZGlhX2FfbTlwIHsgd2lkdGg6IDQ1NnB4OyB9Jyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobGFzdEltYWdlTWFzaykgewogICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgbWFzayA9IHRhcmdldC5jbG9zZXN0KCcueWF3Zi1XX2ljb25fdGFnXzlwJyk7CiAgICAgICAgICAgIGlmICghbWFzaykgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBtZWRpYVdyYXAgPSBtYXNrLmNsb3Nlc3QoJy5XQl9tZWRpYV93cmFwJyk7CiAgICAgICAgICAgIG1lZGlhV3JhcC5jbGFzc0xpc3QuYWRkKCd5YXdmLVdCX21lZGlhX2FfYWxsJyk7CiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGNvbmZpZ3MgPSB7CiAgICAgICAgICBjb3VudDogdGhpcy5yZWYuY291bnQuZ2V0Q29uZmlnKCksCiAgICAgICAgICBtb3JlOiB0aGlzLnJlZi5tb3JlLmdldENvbmZpZygpLAogICAgICAgIH07CiAgICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXksIGNvbmZpZ3MpIHsKICAgICAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgICAgY29uc3QgY29sID0gTnVtYmVyKGNvbmZpZ3MuY291bnQuc3BsaXQoJ3gnKVswXSk7CiAgICAgICAgICBjb25zdCByb3cgPSBOdW1iZXIoY29uZmlncy5jb3VudC5zcGxpdCgneCcpWzFdKSB8fCBJbmZpbml0eTsKCiAgICAgICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2ZlZWQtcGljdHVyZScsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodm0sICdpbmxpbmVOdW0nLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWzEsIDEsIDMsIDMsIDQsIDQsIDMsIDQsIDQsIDNdW3ZtLnBpY19udW1dIHx8IGNvbDsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHsgfSwKICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2bSwgJ25ld1BpY3MnLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAodm0uJHBhcmVudC5kYXRhLl95YXdmX1BpY3R1cmVTaG93QWxsKSByZXR1cm4gdm0ucGljcy5zbGljZSgwKTsKICAgICAgICAgICAgICAgIHJldHVybiB2bS5waWNzLnNsaWNlKDAsIGNvbCAqIHJvdyk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7IH0sCiAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKCFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZtLiRwYXJlbnQuZGF0YSwgJ195YXdmX1BpY3R1cmVTaG93QWxsJykpIHsKICAgICAgICAgICAgICB2bS4kcGFyZW50LiRzZXQodm0uJHBhcmVudC5kYXRhLCAnX3lhd2ZfUGljdHVyZVNob3dBbGwnLCBmYWxzZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGV4cGFuZCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgIHZtLiRwYXJlbnQuZGF0YS5feWF3Zl9QaWN0dXJlU2hvd0FsbCA9IHRydWU7CiAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRSZW5kZXIodm0sIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICAgICAgICAgIGNvbnN0IHsgcmVtb3ZlQ2hpbGQsIGFwcGVuZENoaWxkLCBoIH0gPSBOb2RlczsKICAgICAgICAgICAgICBjb25zdCBtb3JlSWNvbiA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tYm94LWl0ZW0geC13b28tYm94Jyk7CiAgICAgICAgICAgICAgaWYgKG1vcmVJY29uKSB7CiAgICAgICAgICAgICAgICByZW1vdmVDaGlsZChtb3JlSWNvbi5wYXJlbnROb2RlLCBtb3JlSWNvbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh2bS4kcGFyZW50LmRhdGEuX3lhd2ZfUGljdHVyZVNob3dBbGwpIHsKICAgICAgICAgICAgICAgIC8vIHBhc3MKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGljX251bSA+IGNvbCAqIHJvdykgewogICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3MubW9yZSA9PT0gJ21hc2snKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQaWMgPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLWJveC1pdGVtOmxhc3QtY2hpbGQnKTsKICAgICAgICAgICAgICAgICAgY29uc3QgbWFzayA9IGgoJ3dvby1ib3gnLCB7CiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS5tYXNrLCB0aGlzLiRzdHlsZS5mb2N1c0ltZ10sCiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgYWxpZ246ICdjZW50ZXInLCBqdXN0aWZ5OiAnY2VudGVyJyB9LAogICAgICAgICAgICAgICAgICB9LCBbCiAgICAgICAgICAgICAgICAgICAgaCgnc3BhbicsIHsKICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiB0aGlzLiRzdHlsZS5waWNOdW0sCiAgICAgICAgICAgICAgICAgICAgICBvbjogeyBjbGljazogZXhwYW5kIH0sCiAgICAgICAgICAgICAgICAgICAgfSwgWycrJyArICh0aGlzLnBpY19udW0gLSBjb2wgKiByb3cpXSksCiAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICBhcHBlbmRDaGlsZChsYXN0UGljLCBtYXNrKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG1vcmUgPSBoKCdkaXYnLCB7fSwgWwogICAgICAgICAgICAgICAgICAgIGgoJ2EnLCB7CiAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3ZpZXdwaWMgeWF3Zi1mZWVkLWRldGFpbC1jb250ZW50LXJldHdlZXQtc2l6ZSB5YXdmLWZlZWQtcGljLWV4cGFuZCcsCiAgICAgICAgICAgICAgICAgICAgICBvbjogeyBjbGljazogZXhwYW5kIH0sCiAgICAgICAgICAgICAgICAgICAgfSwgW2Dmn6XnnIvlhajpg6jlm77niYfvvIjlhbEgJHt0aGlzLnBpY19udW19IOW8oO+8iWBdKSwKICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgIGFwcGVuZENoaWxkKG5vZGVTdHJ1Y3QsIG1vcmUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSwgY29uZmlncyk7CiAgICAgICAgY3NzLmFwcGVuZCgnLnlhd2YtZmVlZC1waWMtZXhwYW5kLCAueWF3Zi1mZWVkLXBpYy1leHBhbmQ6aG92ZXIgeyBjdXJzb3I6IHBvaW50ZXI7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfScpOwogICAgICB9CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHBhdXNlQW5pbWF0ZWRJbWFnZTogeyBjbjogJ+WKqOeUu+WbvuWDjyhHSUYp5Zyo57yp55Wl5Zu+5pi+56S65pe25L+d5oyB6Z2Z5q2ie3tpfX0nLCBoazogJ+WLleeVq+WcluWDjyhHSUYp5Zyo5omA5ZyW6aGv56S65pmC5L+d5oyB6Z2c5q2ie3tpfX0nLCB0dzogJ+WLleeVq+WcluWDjyhHSUYp5Zyo5omA5ZyW6aGv56S65pmC5L+d5oyB6Z2c5q2ie3tpfX0nLCBlbjogJ1BhdXNlIGFuaW1hdGVkIHRodW1ibmFpbCAoR0lGKSB7e2l9fScgfSwKICAgIHBhdXNlQW5pbWF0ZWRJbWFnZURldGFpbDogeyBjbjogJ+ivpeWKn+iDveS7heW9seWTjeaYvuekuuaViOaenO+8jOW5tuS4jeS8mumZjeS9jue9kee7nOaVsOaNrueUqOmHj+OAgicgfSwKICB9KTsKCiAgbWVkaWEucGF1c2VBbmltYXRlZEltYWdlID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9ub19hbmltYXRlZF9pbWFnZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBtZWRpYS5tZWRpYSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnBhdXNlQW5pbWF0ZWRJbWFnZSwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnBhdXNlQW5pbWF0ZWRJbWFnZURldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICAvLyDlhbblrp7kuI3lhpkgZW5jb2RlVVJJIOaViOaenOS4iuS5n+ayoemXrumimO+8jOS9huaYr+W+ruWNmui9rOWPkeaWh+Wtl+eUn+aIkOeci+WIsCA+IOWwseS8muWHuumUmQogICAgICBjb25zdCBlbXB0eUltYWdlID0gZW5jb2RlVVJJKCdkYXRhOmltYWdlL3N2Zyt4bWwsPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPicpOwogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIHBhdXNlQW5pbWF0ZWRJbWFnZSgpIHsKICAgICAgICBjb25zdCBpbWFnZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoWwogICAgICAgICAgJy5QQ0RfcGhvdG9saXN0IGltZ1tzcmMkPSIuZ2lmIl06bm90KFt5YXdmLXBhdXNlLWFuaW1hdGVdKScsCiAgICAgICAgICAnLldCX3BpYyBpbWdbc3JjJD0iLmdpZiJdOm5vdChbeWF3Zi1wYXVzZS1hbmltYXRlXSknLAogICAgICAgICAgJ2ltZy5XX2ltZ19mYWNlW3NyYyQ9Ii5naWYiXTpub3QoW3lhd2YtcGF1c2UtYW5pbWF0ZV0pJywKICAgICAgICBdLmpvaW4oJywnKSkpOwogICAgICAgIGltYWdlcy5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgICAgY29uc3QgdXJsID0gaW1hZ2Uuc3JjOwogICAgICAgICAgaW1hZ2Uuc3JjID0gZW1wdHlJbWFnZTsKICAgICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnb3JpLXNyYycsIHVybCk7CiAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3lhd2Ytb3JpLXNyYycsIHVybCk7CiAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3lhd2YtcGF1c2UtYW5pbWF0ZScsICd5YXdmLXBhdXNlLWFuaW1hdGUnKTsKICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSBhd2FpdCByZXF1ZXN0LmdldEltYWdlKHVybCkudGhlbihibG9iID0+IHVybHMuYmxvYlRvRGF0YVVybChibG9iKSk7CiAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgICAgICBjb25zdCB3aWR0aCA9IGltZy5uYXR1cmFsV2lkdGgsIGhlaWdodCA9IGltZy5uYXR1cmFsSGVpZ2h0OwogICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7IGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWcsIDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgICAgICBpbWFnZS5zcmMgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgaW1nLnNyYyA9IGRhdGFVcmw7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBjc3MuYXBwZW5kKGAKLlBDRF9waG90b2xpc3QgaW1nW3NyYyQ9Ii5naWYiXTpub3QoW3lhd2YtcGF1c2UtYW5pbWF0ZV0pLAouV0JfcGljIGltZ1tzcmMkPSIuZ2lmIl06bm90KFt5YXdmLXBhdXNlLWFuaW1hdGVdKSwKLldCX2dpZl92aWRlb19ib3gKeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2dpZl9ib3ggeyB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7IH0KYCk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHVzZUJ1aWx0SW5WaWRlb1BsYXllcjogewogICAgICBjbjogJ+S9v+eUqOa1j+iniOWZqOWOn+eUn+inhumikeaSreaUvuWZqHt7aX19fHzpn7Pph497e3ZvbHVtZX19JXx7e21lbW9yaXplfX3orrDlv4bkuIrkuIDmrKHorr7nva7nmoTpn7Pph498fOinhumikei0qOmHj3t7cXVhbGl0eX19JywKICAgICAgaGs6ICfkvb/nlKjngI/opr3lmajlhaflu7rlvbHniYfmkq3mlL7lmah7e2l9fXx86Z+z6YePe3t2b2x1bWV9fSV8e3ttZW1vcml6ZX196KiY5L2P5LiK5LiA5qyh6Kit572u55qE6Z+z6YePfHzlvbHniYflk4Hos6p7e3F1YWxpdHl9fScsCiAgICAgIGVuOiAnVXNlIGJyb3dzZXIgYnVpbHQtaW4gdmlkZW8gcGxheWVyIHt7aX19fHxWb2x1bWUge3t2b2x1bWV9fSB8IHt7bWVtb3JpemV9fSBtZW1vcml6ZSBsYXN0IHZvbHVtZXx8VmlkZW8gcXVhbGl0eSB7e3F1YWxpdHl9fScsCiAgICB9LAogICAgdXNlQnVpbHRJblZpZGVvUGxheWVyRGV0YWlsOiB7IGNuOiAn5LiA5qyh5oCn6Kej5Yaz6Ieq5Yqo5pKt5pS+5ZKM5Lqk5LqS6YC76L6R55qE5ZCE56eN6Zeu6aKY77yM5byA5ZCv5pe25YW25LuW6KeG6aKR55u45YWz55qE5pS56YCg5Yqf6IO95LiN5YaN55Sf5pWI44CC5LiN5pSv5oyB55u05pKt6KeG6aKR44CC5pKt5pS+5Y+v6IO95LiN5Lya6KKr5b6u5Y2a5q2j56Gu6K6h5YWl5pKt5pS+5pWw44CCJyB9LAogICAgbWVkaWFWaWRlb1R5cGU6IHsgY246ICfop4bpopEnLCBoazogJ+W9seeJhycsIHR3OiAn5b2x54mHJywgZW46ICdWaWRlbycgfSwKICAgIHVzZUJ1aWx0SW5WaWRlb1BsYXllckF1dG9RdWFsaXR5OiB7IGNuOiAn6Ieq5YqoJywgdHc6ICfoh6rli5UnLCBlbjogJ0F1dG8nIH0sCiAgICB1c2VCdWlsdEluVmlkZW9QbGF5ZXJCZXN0UXVhbGl0eTogeyBjbjogJ+acgOS9sycsIGVuOiAnQmVzdCcgfSwKICB9KTsKCiAgbWVkaWEudXNlQnVpbHRJblZpZGVvUGxheWVyID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmZWVkX2J1aWx0X2luX3ZpZGVvX3BsYXllcicsCiAgICB2ZXJzaW9uOiA2MCwKICAgIHBhcmVudDogbWVkaWEubWVkaWEsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi51c2VCdWlsdEluVmlkZW9QbGF5ZXIsCiAgICByZWY6IHsKICAgICAgdm9sdW1lOiB7IHR5cGU6ICdyYW5nZScsIG1pbjogMCwgbWF4OiAxMDAsIGluaXRpYWw6IDEwMCB9LAogICAgICBtZW1vcml6ZTogeyB0eXBlOiAnYm9vbGVhbicgfSwKICAgICAgcXVhbGl0eTogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGluaXRpYWw6ICdhdXRvJywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICdhdXRvJywgdGV4dDogKCkgPT4gaTE4bi51c2VCdWlsdEluVmlkZW9QbGF5ZXJBdXRvUXVhbGl0eSB9LAogICAgICAgICAgeyB2YWx1ZTogJ2Jlc3QnLCB0ZXh0OiAoKSA9PiBpMThuLnVzZUJ1aWx0SW5WaWRlb1BsYXllckJlc3RRdWFsaXR5IH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi51c2VCdWlsdEluVmlkZW9QbGF5ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICAgIGNvbnN0IGdldFZpZGVvU291cmNlID0gZnVuY3Rpb24gKHZpZGVvU291cmNlcykgewogICAgICAgICAgY29uc3QgdmlkZW9Tb3VyY2VEYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh2aWRlb1NvdXJjZXMpOwogICAgICAgICAgY29uc3QgcXVhbGl0eSA9IHJ1bGUucmVmLnF1YWxpdHkuZ2V0Q29uZmlnKCk7CiAgICAgICAgICBjb25zdCBxdWFsaXR5VHlwZXMgPSBbXTsKICAgICAgICAgIGNvbnN0IGFsbEtleXMgPSBBcnJheS5mcm9tKHZpZGVvU291cmNlRGF0YSkubWFwKChba2V5XSkgPT4ga2V5KTsKICAgICAgICAgIGlmIChxdWFsaXR5ID09PSAnYmVzdCcpIHsKICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlID0gYWxsS2V5cy5maWx0ZXIoTnVtYmVyKS5zb3J0KCh4LCB5KSA9PiB5IC0geCk7CiAgICAgICAgICAgIHF1YWxpdHlUeXBlcy5wdXNoKC4uLmF2YWlsYWJsZS5tYXAocSA9PiBTdHJpbmcocSkpKTsKICAgICAgICAgIH0KICAgICAgICAgIHF1YWxpdHlUeXBlcy5wdXNoKHZpZGVvU291cmNlRGF0YS5nZXQoJ3FUeXBlJyksIC4uLmFsbEtleXMpOwogICAgICAgICAgY29uc3QgcXVhbGl0eVR5cGUgPSBxdWFsaXR5VHlwZXMuZmluZChxID0+IC9eaHR0cHM/KD86OnwlM0EpL2kudGVzdCh2aWRlb1NvdXJjZURhdGEuZ2V0KHEpKSk7CiAgICAgICAgICBsZXQgdmlkZW9Tb3VyY2UgPSB2aWRlb1NvdXJjZURhdGEuZ2V0KHF1YWxpdHlUeXBlKTsKICAgICAgICAgIC8vIOacieaXtuWAmeS8muiiq+i9rOS5ieS4pOasoe+8jOaJgOS7peimgeWGjemineWkluWkhOeQhuS4gOasoe+8jOWOn+WboOS4jeaYjgogICAgICAgICAgaWYgKC9eaHR0cHM/JTNBL2kudGVzdCh2aWRlb1NvdXJjZSkpIHsKICAgICAgICAgICAgdmlkZW9Tb3VyY2UgPSBkZWNvZGVVUklDb21wb25lbnQodmlkZW9Tb3VyY2UpOwogICAgICAgICAgfQogICAgICAgICAgLy8gaHR0cCDkvJrnm7TmjqXooqvmtY/op4jlmajmi6bmjonvvIzkvYbmmK/mnInnmoTljoblj7LmlbDmja7mmK8gaHR0cAogICAgICAgICAgdmlkZW9Tb3VyY2UgPSB2aWRlb1NvdXJjZS5yZXBsYWNlKC9eaHR0cDovLCAnaHR0cHM6Jyk7CiAgICAgICAgICByZXR1cm4gdmlkZW9Tb3VyY2U7CiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXBsYWNlV2VpYm9WaWRlb1BsYXllciA9IGZ1bmN0aW9uIHJlcGxhY2VXZWlib1ZpZGVvUGxheWVyKCkgewogICAgICAgICAgY29uc3QgY29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpLldCX3ZpZGVvW25vZGUtdHlwZT0iZmxfaDVfdmlkZW8iXVt2aWRlby1zb3VyY2VzXScpOwogICAgICAgICAgY29udGFpbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICAgICAgY29uc3Qgc21hbGxJbWFnZSA9IHlhd2YucnVsZXMuZmVlZHMubGF5b3V0LnNtYWxsSW1hZ2UuZ2V0Q29uZmlnKCk7CiAgICAgICAgICAgIGNvbnN0IGNvdmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZsX2g1X3ZpZGVvX3ByZSJdIGltZycpOwogICAgICAgICAgICBpZiAoIWNvdmVyKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHZpZGVvID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvJyk7CiAgICAgICAgICAgIGlmICh2aWRlbykgdmlkZW8uc3JjID0gJ2RhdGE6dGV4dC9wbGFpbiw0Mic7CiAgICAgICAgICAgIGNvbnN0IHZpZGVvU291cmNlID0gZ2V0VmlkZW9Tb3VyY2UoY29udGFpbmVyLmdldEF0dHJpYnV0ZSgndmlkZW8tc291cmNlcycpKTsKICAgICAgICAgICAgY29uc3QgbmV3Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICAgICAgbmV3Q29udGFpbmVyLmNsYXNzTmFtZSA9IGNvbnRhaW5lci5jbGFzc05hbWU7CiAgICAgICAgICAgIG5ld0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLVdCX3ZpZGVvJyk7CiAgICAgICAgICAgIGNvbnN0IG5ld1ZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsKICAgICAgICAgICAgbmV3VmlkZW8ucG9zdGVyID0gY292ZXIuc3JjOwogICAgICAgICAgICBuZXdWaWRlby5zcmMgPSB2aWRlb1NvdXJjZTsKICAgICAgICAgICAgbmV3VmlkZW8ucHJlbG9hZCA9ICdub25lJzsKICAgICAgICAgICAgbmV3VmlkZW8uY29udHJvbHMgPSAhc21hbGxJbWFnZTsKICAgICAgICAgICAgbmV3VmlkZW8uYXV0b3BsYXkgPSBmYWxzZTsKICAgICAgICAgICAgY29uc3QgdXBkYXRlUGxheVN0YXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNvbnN0IGlzUGxheWluZyA9ICFuZXdWaWRlby5wYXVzZWQgfHwgbmV3VmlkZW8uc2Vla2luZzsKICAgICAgICAgICAgICBpZiAoaXNQbGF5aW5nKSBuZXdDb250YWluZXIuc2V0QXR0cmlidXRlKCd5YXdmLXZpZGVvLXBsYXknLCAnJyk7CiAgICAgICAgICAgICAgZWxzZSBuZXdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCd5YXdmLXZpZGVvLXBsYXknKTsKICAgICAgICAgICAgICBpZiAoc21hbGxJbWFnZSkgbmV3VmlkZW8uY29udHJvbHMgPSBpc1BsYXlpbmc7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG5ld1ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCB1cGRhdGVQbGF5U3RhdGUpOwogICAgICAgICAgICBuZXdWaWRlby5hZGRFdmVudExpc3RlbmVyKCdwYXVzZScsIHVwZGF0ZVBsYXlTdGF0ZSk7CiAgICAgICAgICAgIGlmIChzbWFsbEltYWdlKSB7CiAgICAgICAgICAgICAgbmV3Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKCFuZXdDb250YWluZXIuaGFzQXR0cmlidXRlKCd5YXdmLXZpZGVvLXBsYXknKSkgbmV3VmlkZW8ucGxheSgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnN0IHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTsKICAgICAgICAgICAgICB0aXAuY2xhc3NOYW1lID0gJ1dfaWNvbl90YWdfdjInOwogICAgICAgICAgICAgIHRpcC50ZXh0Q29udGVudCA9IGkxOG4ubWVkaWFWaWRlb1R5cGU7CiAgICAgICAgICAgICAgbmV3Q29udGFpbmVyLmFwcGVuZENoaWxkKHRpcCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV3VmlkZW8udm9sdW1lID0gcnVsZS5yZWYudm9sdW1lLmdldENvbmZpZygpIC8gMTAwOwogICAgICAgICAgICBpZiAocnVsZS5yZWYubWVtb3JpemUuZ2V0Q29uZmlnKCkpIHsKICAgICAgICAgICAgICBuZXdWaWRlby5hZGRFdmVudExpc3RlbmVyKCd2b2x1bWVjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgICBydWxlLnJlZi52b2x1bWUuc2V0Q29uZmlnKE1hdGgucm91bmQobmV3VmlkZW8udm9sdW1lICogMTAwKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgbmV3VmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsICgpID0+IHsKICAgICAgICAgICAgICAgIG5ld1ZpZGVvLnZvbHVtZSA9IHJ1bGUucmVmLnZvbHVtZS5nZXRDb25maWcoKSAvIDEwMDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBuZXdDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3VmlkZW8pOwogICAgICAgICAgICBjb250YWluZXIucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Q29udGFpbmVyLCBjb250YWluZXIpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBvYnNlcnZlci5kb20uYWRkKHJlcGxhY2VXZWlib1ZpZGVvUGxheWVyKTsKICAgICAgICBjc3MuYXBwZW5kKGAKbGkuV0JfdmlkZW9bbm9kZS10eXBlPSJmbF9oNV92aWRlbyJdW3ZpZGVvLXNvdXJjZXNdID4gZGl2W25vZGUtdHlwZT0iZmxfaDVfdmlkZW9fcHJlIl0sCmxpLldCX3ZpZGVvW25vZGUtdHlwZT0iZmxfaDVfdmlkZW8iXVt2aWRlby1zb3VyY2VzXSA+IGRpdltub2RlLXR5cGU9ImZsX2g1X3ZpZGVvX2Rpc3AiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoueWF3Zi1XQl92aWRlbyB7IHRyYW5zaXRpb246IHdpZHRoLCBoZWlnaHQgMC4yczsgfQoueWF3Zi1XQl92aWRlbyB2aWRlbyB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBtYXJnaW46IGF1dG87IH0KLldCX21lZGlhX2EgLldCX3ZpZGVvLnlhd2YtV0JfdmlkZW8geyBjdXJzb3I6IHVuc2V0OyB9Ci55YXdmLVdCX3ZpZGVvIC5XX2ljb25fdGFnX3YyIHsgei1pbmRleDogMTsgfQouV0JfdmlkZW9beWF3Zi12aWRlby1wbGF5XSAuV19pY29uX3RhZ192MiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQpgKTsKICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zdCBGYWtlVmlkZW9QbGF5ZXIgPSBmdW5jdGlvbiBlKCkgeyB9OwogICAgICAgICAgRmFrZVZpZGVvUGxheWVyLnByb3RvdHlwZS50aHVtYm5haWwgPSBmdW5jdGlvbiAoKSB7IH07CiAgICAgICAgICBGYWtlVmlkZW9QbGF5ZXIucHJvdG90eXBlLnBsYXlTdGF0dXMgPSBmdW5jdGlvbiAoKSB7IH07CiAgICAgICAgICBpZiAod2luZG93LlZpZGVvUGxheWVyKSB7CiAgICAgICAgICAgIHdpbmRvdy5WaWRlb1BsYXllciA9IEZha2VWaWRlb1BsYXllcjsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGdsb2JhbFZpZGVvUGxheWVyID0gdm9pZCAwOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ1ZpZGVvUGxheWVyJywgewogICAgICAgICAgICBnZXQoKSB7IHJldHVybiBnbG9iYWxWaWRlb1BsYXllcjsgfSwKICAgICAgICAgICAgc2V0KF8pIHsgZ2xvYmFsVmlkZW9QbGF5ZXIgPSBGYWtlVmlkZW9QbGF5ZXI7IH0sCiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICAvLyDov5nlh6DooYzliIbliKvmmK/kuI3mmL7npLrop4bpopHlvLnlsYLmjInpkq7vvIzmmL7npLrlhajlsY/mjInpkq7vvIzku6Xlj4rngrnop4bpopHml7bkuI3lvLnlsYIKICAgICAgICAvLyDlm6DkuLrnm7Tmkq3op4bpopHmsqHlip7ms5Xmm7/mjaLmiJDljp/nlJ/mkq3mlL7lmajvvIzmiYDku6Xov5nkuKTkuKrlip/og73ov5jpnIDopoHkv53nlZkKICAgICAgICAvLyDov5nph4znm7TmjqXmiorov5nlh6DkuKrlip/og73mlL7lnKjov5nph4zvvIzkuI3ljZXni6zlgZrkuIDkuKrlip/og73kuoYKICAgICAgICBjc3MuYXBwZW5kKGAKLndidi1wb3AtY29udHJvbCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoud2J2LWZ1bGxzY3JlZW4tY29udHJvbCB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IH0KLndidi1wb3AtbGF5ZXIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KYCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgICAgY29uc3QgY29uZmlncyA9IHsKICAgICAgICAgIG1lbW9yaXplOiB0aGlzLnJlZi5tZW1vcml6ZS5nZXRDb25maWcoKSwKICAgICAgICAgIHZvbHVtZTogdGhpcy5yZWYudm9sdW1lLmdldENvbmZpZygpLAogICAgICAgICAgcXVhbGl0eTogdGhpcy5yZWYucXVhbGl0eS5nZXRDb25maWcoKSwKICAgICAgICB9OwoKICAgICAgICBjb25zdCB1cGRhdGVWb2x1bWUgPSBmdW5jdGlvbiAodm9sdW1lKSB7CiAgICAgICAgICBpZiAodHlwZW9mIHZvbHVtZSAhPT0gJ251bWJlcicpIHJldHVybjsKICAgICAgICAgIGlmICh2b2x1bWUgPCAwIHx8IHZvbHVtZSA+IDEwMCB8fCAhTnVtYmVyLmlzRmluaXRlKHZvbHVtZSkpIHJldHVybjsKICAgICAgICAgIHJ1bGUucmVmLnZvbHVtZS5zZXRDb25maWcoTWF0aC5yb3VuZCh2b2x1bWUpKTsKICAgICAgICB9OwoKICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwgY29uZmlncywgdXBkYXRlVm9sdW1lKSB7CiAgICAgICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgICAgIGNvbnN0IHsgcXVhbGl0eSwgbWVtb3JpemUgfSA9IGNvbmZpZ3M7CiAgICAgICAgICBsZXQgdm9sdW1lID0gY29uZmlncy52b2x1bWU7CgogICAgICAgICAgY29uc3Qgc2V0Vm9sdW1lID0gZnVuY3Rpb24gKHZpZGVvKSB7CiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IE1hdGgucm91bmQodm9sdW1lKSAvIDEwMDsKICAgICAgICAgICAgaWYgKHZpZGVvLnBhdXNlZCAmJiB2aWRlby52b2x1bWUgIT09IHRhcmdldCkgewogICAgICAgICAgICAgIHZpZGVvLnZvbHVtZSA9IHRhcmdldDsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IG9uQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSB0cnVlOwogICAgICAgICAgICBzZXRWb2x1bWUoZXZlbnQudGFyZ2V0KTsKICAgICAgICAgICAgdGhpcy4kcmVmcy52aWRlby5wbGF5KCk7CiAgICAgICAgICB9OwogICAgICAgICAgY29uc3Qgb25QbGF5ID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTsKICAgICAgICAgICAgc2V0Vm9sdW1lKGV2ZW50LnRhcmdldCk7CiAgICAgICAgICB9OwogICAgICAgICAgY29uc3Qgb25Wb2x1bWVjaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgaWYgKCFtZW1vcml6ZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCB2aWRlbyA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgdm9sdW1lID0gTWF0aC5yb3VuZCh2aWRlby52b2x1bWUgKiAxMDApOwogICAgICAgICAgICB1cGRhdGVWb2x1bWUodm9sdW1lKTsKICAgICAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcueWF3Zi1mZWVkLXZpZGVvJykpLmZvckVhY2goc2V0Vm9sdW1lKTsKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCBvbkxvYWRzdGFydCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBzZXRWb2x1bWUoZXZlbnQudGFyZ2V0KTsKICAgICAgICAgIH07CgogICAgICAgICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnZmVlZC12aWRlbycsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICAgICAgICBjb25zdCB7IHJlbW92ZUNoaWxkLCBhcHBlbmRDaGlsZCwgaCB9ID0gTm9kZXM7CgogICAgICAgICAgICBjb25zdCBpc1BsYXlpbmcgPSB0aGlzLmlzUGxheWluZzsKICAgICAgICAgICAgLy8g5Y675o6J5Y6f5pys5riy5p+T55qE6KeG6aKR5pKt5pS+5ZmoCiAgICAgICAgICAgIHdoaWxlIChub2RlU3RydWN0LmZpcnN0Q2hpbGQpIHsKICAgICAgICAgICAgICByZW1vdmVDaGlsZChub2RlU3RydWN0LCBub2RlU3RydWN0LmZpcnN0Q2hpbGQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOaIkeS7rOiHquW3seeUu+S4gOS4quinhumikeaSreaUvuWZqOS4iuWOuwogICAgICAgICAgICBsZXQgdXJsID0gbnVsbDsKICAgICAgICAgICAgaWYgKHF1YWxpdHkgPT09ICdiZXN0JykgdHJ5IHsKICAgICAgICAgICAgICBjb25zdCBwbGF5YmFjayA9IHRoaXMuaW5mb3MubWVkaWFfaW5mby5wbGF5YmFja19saXN0LmZpbmQoeCA9PiB4LnBsYXlfaW5mbz8udXJsKTsKICAgICAgICAgICAgICB1cmwgPSBwbGF5YmFjay5wbGF5X2luZm8udXJsOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7IC8qIGlnbm9yZSAqLyB9CiAgICAgICAgICAgIGlmICghdXJsKSB1cmwgPSB0aGlzLmluZm9zLm1lZGlhX2luZm8uc3RyZWFtX3VybDsKICAgICAgICAgICAgY29uc3QgdmlkZW9XcmFwID0gaCgnZGl2JywgewogICAgICAgICAgICAgIHJlZjogJ3ZpZGVvV3JhcHBlcicsCiAgICAgICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS52aWRlb0JveCwgJ3lhd2YtdmlkZW8tYm94J10sCiAgICAgICAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgICAgICAgcmVmOiAndmlkZW9Db250YWluZXInLAogICAgICAgICAgICAgIGNsYXNzOiBbdGhpcy4kc3R5bGUucGxhY2Vob2xkZXIsICd5YXdmLXZpZGVvLXBsYWNlaG9sZGVyJ10sCiAgICAgICAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS52aWRlbywgJ3lhd2YtdmlkZW8tY29udGFpbmVyJ10sCiAgICAgICAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS52aWRlbywgJ3dicC12aWRlbycsIGlzUGxheWluZyA/ICd5YXdmLWZlZWQtdmlkZW8tYWN0aXZlZCcgOiBudWxsXSwKICAgICAgICAgICAgfSwgW2goJ3ZpZGVvJywgewogICAgICAgICAgICAgIHJlZjogJ3ZpZGVvJywKICAgICAgICAgICAgICBjbGFzczogWyd5YXdmLXZpZGVvJywgJ3lhd2YtZmVlZC12aWRlbycsICd3YnB2LXRlY2gnXSwKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgc3JjOiB1cmwucmVwbGFjZSgvXmh0dHBzPzpcL1wvLywgJy8vJyksCiAgICAgICAgICAgICAgICBwb3N0ZXI6IHRoaXMudGh1bWJuYWlsLnJlcGxhY2UoL15odHRwcz86XC9cLy8sICcvLycpLAogICAgICAgICAgICAgICAgcHJlbG9hZDogJ2F1dG8nLAogICAgICAgICAgICAgICAgY29udHJvbHM6IGlzUGxheWluZyA/IHRydWUgOiBmYWxzZSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBjbGljazogaXNQbGF5aW5nID8gbnVsbCA6IG9uQ2xpY2suYmluZCh0aGlzKSwKICAgICAgICAgICAgICAgIHBsYXk6IG9uUGxheS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgICAgdm9sdW1lY2hhbmdlOiBvblZvbHVtZWNoYW5nZS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgICAgbG9hZHN0YXJ0OiBvbkxvYWRzdGFydC5iaW5kKHRoaXMpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pXSldKV0pXSk7CiAgICAgICAgICAgIGFwcGVuZENoaWxkKG5vZGVTdHJ1Y3QsIHZpZGVvV3JhcCk7CiAgICAgICAgICB9KTsKCiAgICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSwgY29uZmlncywgdXBkYXRlVm9sdW1lKTsKCiAgICAgICAgY3NzLmFwcGVuZChTdHJpbmcucmF3YAoueWF3Zi1mZWVkLXZpZGVvIC53YnAtdmlkZW8ge3dpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IH0KLnlhd2YtZmVlZC12aWRlbyAud2JwLXZpZGVvOm5vdCgueWF3Zi1mZWVkLXZpZGVvLWFjdGl2ZWQpOjpiZWZvcmUgeyBjb250ZW50OiAiXGUwMDEiOyBmb250LWZhbWlseToga3J2ZGZpY29uOyBmb250LXdlaWdodDogNDAwOyBmb250LXN0eWxlOiBub3JtYWw7IGZvbnQtc2l6ZTogMzZweDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDUwJTsgbGVmdDogNTAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsgei1pbmRleDogMjsgb3BhY2l0eTogMC44NTsgdGV4dC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLC4yKTsgcG9pbnRlci1ldmVudHM6IG5vbmU7IH0KLnlhd2YtZmVlZC12aWRlbyAud2JwLXZpZGVvOm5vdCgueWF3Zi1mZWVkLXZpZGVvLWFjdGl2ZWQpOmhvdmVyOjpiZWZvcmUgeyBjb2xvcjogI2ZmODIwMDsgfQoueWF3Zi12aWRlby1jb250YWluZXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgcmlnaHQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IG9iamVjdC1maXQ6IGNvdmVyOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IH0KYCk7CgogICAgICB9CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZlZWRzL290aGVyLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGZlZWRzID0geWF3Zi5ydWxlcy5mZWVkczsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKICBjb25zdCBkaWFsb2cgPSB1dGlsLmRpYWxvZzsKICBjb25zdCB0aW1lID0gdXRpbC50aW1lOwoKICBjb25zdCBkZXRhaWxzID0gZmVlZHMuZGV0YWlscyA9IHt9OwoKICBpMThuLmZlZWREZXRhaWxzR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn57uG6IqCJywKICAgIHR3OiAn57Sw56+AJywKICAgIGVuOiAnRGV0YWlscycsCiAgfTsKCiAgZGV0YWlscy5kZXRhaWxzID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZlZWRzLmZlZWRzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZERldGFpbHNHcm91cFRpdGxlLAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGRpc2FibGVUYWdEaWFsb2c6IHsKICAgICAgY246ICflsY/olL3mlLbol4/lvq7ljZrml7bnmoTmt7vliqDmoIfnrb7lr7nor53moYYnLAogICAgICB0dzogJ+mYu+aTi+aUtuiXj+W+ruWNmuaZgueahOa3u+WKoOaomeexpOWwjeipseaWueWhiicsCiAgICAgIGVuOiAnQmxvY2sgdGhlIGRpYWxvZyBhZnRlciBtYXJraW5nIHdlaWJvIGZhdm9yaXRlJywKICAgIH0sCiAgICBmYXZvcml0ZUZhaWxUaXRsZTogewogICAgICBjbjogJ+aUtuiXj+W+ruWNmicsCiAgICAgIGVuOiAnRmVlZCBGYXZvcml0ZScsCiAgICB9LAogICAgZmF2b3JpdGVGYWlsVGV4dDogewogICAgICBjbjogJ+aUtuiXj+aXtuWPkeeUn+mUmeivrycsCiAgICAgIGVuOiAnRXJyb3Igd2hpbGUgYWRkaW5nIGZhdm9yaXRlIGZlZWRzJywKICAgIH0sCiAgICBmYXZvcml0ZUZlZWQ6IHsKICAgICAgY246ICflt7LmlLbol48nLAogICAgICBlbjogJ0Zhdm9yaXRlIEFkZGVkJywKICAgIH0sCiAgfSk7CgogIGRldGFpbHMuZGlzYWJsZVRhZ0RpYWxvZyA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfZGlzYWJsZV90YWdfZGlhbG9nJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmRpc2FibGVUYWdEaWFsb2csCiAgICBhaW5pdCgpIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICBpZiAoIVsnd3d3LndlaWJvLmNvbScsICd3ZWliby5jb20nXS5pbmNsdWRlcyhsb2NhdGlvbi5ob3N0KSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCdbYWN0aW9uLXR5cGU9ImZsX2Zhdm9yaXRlIl0nKTsKICAgICAgICBpZiAoIWJ1dHRvbikgcmV0dXJuOwogICAgICAgIGNvbnN0IGlzRmF2b3JpdGUgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdmYXZvcml0ZScpOwogICAgICAgIGlmIChpc0Zhdm9yaXRlKSByZXR1cm47IC8vIOS4jeWkhOeQhuWPlua2iOaUtuiXj+eahOmAu+i+kQogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY29uc3QgZmVlZCA9IGZlZWRQYXJzZXIuZmVlZE5vZGUoYnV0dG9uKTsKICAgICAgICBjb25zdCAkQ09ORklHID0gaW5pdC5wYWdlLiRDT05GSUc7CiAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHJlcXVlc3QuZmVlZEZhdm9yaXRlKGZlZWQsIHsgJENPTkZJRyB9KTsKICAgICAgICBpZiAoIXN1Y2Nlc3MpIHsKICAgICAgICAgIGRpYWxvZy5hbGVydCh7CiAgICAgICAgICAgIGlkOiAneWF3Zi1mYXZvcml0ZS1mYWlsJywKICAgICAgICAgICAgaWNvbjogJ3dhcm4nLAogICAgICAgICAgICB0aXRsZTogaTE4bi5mYXZvcml0ZUZhaWxUaXRsZSwKICAgICAgICAgICAgdGV4dDogaTE4bi5mYXZvcml0ZUZhaWxUZXh0LAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Zhdm9yaXRlJywgJzEnKTsKICAgICAgICAgIGNvbnN0IHRleHQgPSBidXR0b24ucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iZmF2b3JpdGVfYnRuX3RleHQiXScpID8/IGJ1dHRvbjsKICAgICAgICAgIHRleHQuaW5uZXJIVE1MID0gJzxzcGFuPjxlbSBjbGFzcz0iV19maWNvbiBmaWNvbl9mYXZvcml0ZSBTX3NwZXR4dCI+XHhGQjwvZW0+PGVtPjwvZW0+PC9zcGFuPic7CiAgICAgICAgICB0ZXh0LnF1ZXJ5U2VsZWN0b3IoJ2VtICsgZW0nKS50ZXh0Q29udGVudCA9IGkxOG4uZmF2b3JpdGVGZWVkOwogICAgICAgIH0KICAgICAgfSwgdHJ1ZSk7CiAgICB9LAogIH0pOwoKICBpMThuLmxvd1JlYWRpbmdDb3VudFdhcm4gPSB7CiAgICBjbjogJ+WcqOiHquW3seS4quS6uuS4u+mhtemrmOS6ruaYvuekuumYheivu+aVsOmHj3zkuI3otoXov4d7e2NvdW50fX3nmoTlvq7ljZonLAogICAgdHc6ICflnKjoh6rlt7HlgIvkurrkuLvpoIHpq5jkuq7poa/npLrplrHoroDmlbjph4985LiN6LaF6YGOe3tjb3VudH1955qE5b6u5Y2aJywKICAgIGVuOiAnSGlnaGxpZ2h0IGZlZWRzIG9uIG15IHByb2ZpbGUgcGFnZSB3aGljaCBoYXMgfCBubyBtb3JlIHRoYW4ge3tjb3VudH19IHZpZXdzJywKICB9OwoKICBkZXRhaWxzLmxvd1JlYWRpbmdDb3VudFdhcm4gPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX2xvd19yZWFkaW5nX3dhcm4nLAogICAgdmVyc2lvbjogMjMsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmxvd1JlYWRpbmdDb3VudFdhcm4sCiAgICByZWY6IHsKICAgICAgY291bnQ6IHsKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIG1pbjogMTAsCiAgICAgICAgbWF4OiAxMDAwLAogICAgICAgIHN0ZXA6IDEwLAogICAgICAgIGluaXRpYWw6IDEwMCwKICAgICAgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQub25BZnRlcihmdW5jdGlvbiAoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBmZWVkLmNsb3Nlc3QoJ1tpZF49IlBsX09mZmljaWFsX015UHJvZmlsZUZlZWRfXyJdJyk7CiAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjsKICAgICAgICBjb25zdCBwb3BUZXh0ID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZF9oYW5kbGUgW2FjdGlvbi10eXBlPSJmbF9wb3AiXSBpJyk7CiAgICAgICAgaWYgKCFwb3BUZXh0KSByZXR1cm47CiAgICAgICAgY29uc3QgY291bnQgPSBOdW1iZXIucGFyc2VJbnQocG9wVGV4dC50aXRsZS5tYXRjaCgvXGQrLylbMF0sIDEwKTsKICAgICAgICBjb25zdCBsaW1pdCA9IHJ1bGUucmVmLmNvdW50LmdldENvbmZpZygpOwogICAgICAgIGlmIChjb3VudCA+IGxpbWl0KSByZXR1cm47CiAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtbG93LXJlYWRpbmcnLCBjb3VudCk7CiAgICAgIH0pOwogICAgICBjc3MuYXBwZW5kKCcuV0JfZmVlZC5XQl9mZWVkIC5XQl9jYXJkd3JhcFt5YXdmLWxvdy1yZWFkaW5nXSB7IGJveC1zaGFkb3c6IDAgMCA0cHggcmVkIGluc2V0OyB9Jyk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGZlZWRBYnNvbHV0ZVRpbWVEZXRhaWw6IHsKICAgICAgY246ICfmmL7npLrnmoTml7bpl7Tlj5cgW1tsYXlvdXRfbG9jYWxlX3RpbWV6b25lXV0g5Yqf6IO95b2x5ZON44CCJywKICAgIH0sCiAgfSwgdGltZS5pc0NzdEVxdWl2YWxlbnQoKSA/IHsKICAgIGZlZWRBYnNvbHV0ZVRpbWU6IHsKICAgICAgY246ICflvq7ljZrlj5HluIPml7bpl7TmgLvmmK/kvb/nlKjlubTmnIjml6XmoLzlvI8nLAogICAgICB0dzogJ+W+ruWNmueZvOW4g+aZgumWk+e4veaYr+S9v+eUqOW5tOaciOaXpeagvOW8jycsCiAgICAgIGVuOiAnVXNlIHl5eXktbW0tZGQgZGF0ZSBmb3JtYXQnLAogICAgfSwKICB9IDogewogICAgZmVlZEFic29sdXRlVGltZTogewogICAgICBjbjogJ+W+ruWNmuWPkeW4g+aXtumXtOaAu+aYr+S9v+eUqOW5tOaciOaXpeagvOW8jyB7e2l9fScsCiAgICAgIHR3OiAn5b6u5Y2a55m85biD5pmC6ZaT57i95piv5L2/55So5bm05pyI5pel5qC85byPIHt7aX19JywKICAgICAgZW46ICdVc2UgeXl5eS1tbS1kZCBkYXRlIGZvcm1hdCB7e2l9fScsCiAgICB9LAogIH0pOwoKICBkZXRhaWxzLmZlZWRBYnNvbHV0ZVRpbWUgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX2Fic29sdXRlX3RpbWUnLAogICAgdmVyc2lvbjogNjAsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRBYnNvbHV0ZVRpbWUsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRBYnNvbHV0ZVRpbWVEZXRhaWwgfSwKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZmVlZExpbmtOZXdUYWI6IHsKICAgICAgY246ICflnKjmlrDmoIfnrb7pobXmiZPlvIDku6XkuIvpk77mjqUge3tpfX18fHt7YXV0aG9yfX3kvZzogIUv5Y6f5L2c6ICFfHt7bWVudGlvbn195o+Q5YiwfHt7dG9waWN9feivnemimHx7e3BpY3R1cmV9femFjeWbvnx8e3tkZXRhaWx9feW+ruWNmuivpuaDhe+8iOWPkeW4g+aXtumXtO+8iXx7e2NvbW1lbnRzfX3lhajpg6jor4Torrp8e3tjYXJkfX3ljaHniYcnLAogICAgfSwKICAgIGZlZWRMaW5rTmV3VGFiRGV0YWlsOiB7CiAgICAgIGNuOiAn5oyJ5L2PIEN0cmwg5Lmf5Y+v5Li05pe25Zyo5paw5qCH562+6aG15omT5byA44CC5q2k5Yqf6IO95L6d6LWW5LqOIFtbZmVlZF9yZW5kZXJdXeOAgicsCiAgICB9LAogIH0pOwoKICBkZXRhaWxzLmZlZWRMaW5rTmV3VGFiID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNywKICAgIGlkOiAnZmVlZF9saW5rX25ld190YWInLAogICAgdmVyc2lvbjogODUsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRMaW5rTmV3VGFiLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkTGlua05ld1RhYkRldGFpbCB9LAogICAgICBhdXRob3I6IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICAgIG1lbnRpb246IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICAgIHRvcGljOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgICBkZXRhaWw6IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICAgIGNvbW1lbnRzOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgICBwaWN0dXJlOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgICBjYXJkOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgfSwKICAgIC8vIOWunueOsOWcqCByZW5kZXIg6YeMCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmVlZHMvcmVhZGluZy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IHBhZ2VtZW51ID0geWF3Zi5wYWdlbWVudTsKCiAgY29uc3QgZmVlZHMgPSB5YXdmLnJ1bGVzLmZlZWRzOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGtleWJvYXJkID0gdXRpbC5rZXlib2FyZDsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgcmVhZGluZyA9IGZlZWRzLnJlYWRpbmcgPSB7fTsKCiAgaTE4bi5mZWVkUmVhZGluZ0dyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+mYheivu+inhuWbvicsCiAgICB0dzogJ+mWseiugOimluWclicsCiAgICBlbjogJ1JlYWRpbmcgVmlldycsCiAgfTsKCiAgcmVhZGluZy5yZWFkaW5nID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZlZWRzLmZlZWRzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZFJlYWRpbmdHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLmZlZWRPbmx5TW9kZSA9IHsKICAgIGNuOiAn6ZiF6K+76KeG5Zu+fOWuveW6pnt7d2lkdGh9feWDj+e0oHx85b+r5o236ZSue3trZXl9fXx8e3tidXR0b259feWcqOW+ruWNmuWIl+ihqOmhtumDqOaYvuekuuW/q+aNt+W8gOWFs+aMiemSricsCiAgICB0dzogJ+mWseiugOimluWclnzlr6zluqZ7e3dpZHRofX3lnJblhYN8fOW/q+mAn+mNtXt7a2V5fX18fHt7YnV0dG9ufX3lnKjlvq7ljZrmuIXllq7poILpg6jpoa/npLrlv6vpgJ/plovpl5zmjInpiJUnLAogICAgZW46ICdSZWFkaW5nIE1vZGUgfCB3aWR0aCB7e3dpZHRofX1weCB8fCBzaG9ydGN1dCB7e2tleX19IHx8IHt7YnV0dG9ufX0gc2hvdyBzd2l0Y2ggYnV0dG9uIGF0IHRvcCBvZiBXZWlibyBsaXN0JywKICB9OwogIGkxOG4uZmVlZE9ubHlTd2l0Y2ggPSB7CiAgICBjbjogJ+WIh+aNoumYheivu+inhuWbvicsCiAgICB0dzogJ+WIh+aPm+mWseiugOimluWclicsCiAgICBlbjogJ1RvZ2dsZSBSZWFkaW5nIE1vZGUnLAogIH07CgogIHJlYWRpbmcuZmVlZE9ubHlNb2RlID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9vbmx5X21vZGUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogcmVhZGluZy5yZWFkaW5nLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZE9ubHlNb2RlLAogICAgcmVmOiB7CiAgICAgIHdpZHRoOiB7IHR5cGU6ICdyYW5nZScsIG1pbjogNDgwLCBtYXg6IDEyODAsIGluaXRpYWw6IDYwMCwgc3RlcDogMTAgfSwKICAgICAga2V5OiB7IHR5cGU6ICdrZXknLCBpbml0aWFsOiBrZXlib2FyZC5jb2RlLkY4IH0sCiAgICAgIGJ1dHRvbjogeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6IGZhbHNlIH0sCiAgICAgIF9lbmFibGVkOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogZmFsc2UgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIGlmICh5YXdmLmluaXQucGFnZS50eXBlKCkgPT09ICd0dGFydGljbGUnKSByZXR1cm47CgogICAgICBpZiAocnVsZS5yZWYuYnV0dG9uLmdldENvbmZpZygpKSB7CiAgICAgICAgY29uc3Qgc2hvd0J1dHRvbiA9IGZ1bmN0aW9uIHNob3dSZWFkZXJTd2l0Y2goKSB7CiAgICAgICAgICBjb25zdCB0YWJGaXJzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoWwogICAgICAgICAgICAnI3Y2X3BsX2NvbnRlbnRfaG9tZWZlZWQgLldCX3RhYl9hOm5vdChbeWF3Zi1mZWVkLW9ubHktYWRkZWRdKScsCiAgICAgICAgICAgICdkaXZbaWRePSJQbF9PZmZpY2lhbF9Qcm9maWxlRmVlZE5hdl9fIl0gLldCX3RhYl9hOm5vdChbeWF3Zi1mZWVkLW9ubHktYWRkZWRdKScsCiAgICAgICAgICBdLmpvaW4oJywnKSk7CiAgICAgICAgICBpZiAoIXRhYkZpcnN0KSByZXR1cm47CiAgICAgICAgICB0YWJGaXJzdC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1vbmx5LWFkZGVkJywgJycpOwogICAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi1mZWVkLW9ubHktYnV0dG9uIFNfYmcyIj48YSBjbGFzcz0iU190eHQxIj48L2E+PC9kaXY+JzsKICAgICAgICAgIGNvbnN0IGxpbmUgPSB3cmFwLmZpcnN0Q2hpbGQ7CiAgICAgICAgICBjb25zdCBidXR0b24gPSBsaW5lLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGkxOG4uZmVlZE9ubHlTd2l0Y2g7CiAgICAgICAgICB0YWJGaXJzdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsaW5lLCB0YWJGaXJzdCk7CiAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgICAgIHJ1bGUucmVmLl9lbmFibGVkLnNldENvbmZpZyghcnVsZS5yZWYuX2VuYWJsZWQuZ2V0Q29uZmlnKCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBvYnNlcnZlci5kb20uYWRkKHNob3dCdXR0b24pOwogICAgICB9CgogICAgICBwYWdlbWVudS5hZGQoewogICAgICAgIHRpdGxlOiBpMThuLmZlZWRPbmx5U3dpdGNoLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJ1bGUucmVmLl9lbmFibGVkLnNldENvbmZpZyghcnVsZS5yZWYuX2VuYWJsZWQuZ2V0Q29uZmlnKCkpOwogICAgICAgIH0sCiAgICAgICAgc2VjdGlvbjogMTAsCiAgICAgICAgb3JkZXI6IDAsCiAgICAgIH0pOwoKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGNvZGUgPSBrZXlib2FyZC5ldmVudChldmVudCk7CiAgICAgICAgaWYgKGNvZGUgIT09IHJ1bGUucmVmLmtleS5nZXRDb25maWcoKSkgcmV0dXJuOwogICAgICAgIHJ1bGUucmVmLl9lbmFibGVkLnNldENvbmZpZyghcnVsZS5yZWYuX2VuYWJsZWQuZ2V0Q29uZmlnKCkpOwogICAgICB9KTsKCiAgICAgIGNvbnN0IHdpZHRoID0gcnVsZS5yZWYud2lkdGguZ2V0Q29uZmlnKCk7CiAgICAgIGNzcy5hcHBlbmQoYAoueWF3Zi1mZWVkLW9ubHktYnV0dG9uIHsgdGV4dC1hbGlnbjogY2VudGVyOyBsaW5lLWhlaWdodDogMzFweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYm9yZGVyLXJhZGl1czogM3B4OyB9CmJvZHlbeWF3Zi1mZWVkLW9ubHldW3lhd2YtZmVlZC1vbmx5XSB7IC0teWF3Zi1sZWZ0LXdpZHRoOiAwcHg7IC0teWF3Zi1yaWdodC13aWR0aDogMHB4OyAtLXlhd2YtZmVlZC13aWR0aDogJHsrd2lkdGh9cHg7IC0teWF3Zi1leHRyYS1wYWRkaW5nOiAyMHB4O30KYm9keVt5YXdmLWZlZWQtb25seV0gI1dCX3dlYmNoYXQsCmJvZHlbeWF3Zi1mZWVkLW9ubHldIFtpLWFtLW11c2ljLXBsYXllcl0sCmJvZHlbeWF3Zi1mZWVkLW9ubHldIC5XQl9mcmFtZT4qOm5vdCgjcGxjX21haW4pLApib2R5W3lhd2YtZmVlZC1vbmx5XSAjcGxjX21haW4+Kjpub3QoLldCX21haW5fYyk6bm90KC5XQl9mcmFtZV9jKTpub3QoLldCX21haW5fcik6bm90KC5XQl9mcmFtZV9iKSwKYm9keVt5YXdmLWZlZWQtb25seV0gLldCX21haW5fYz4qOm5vdChbaWRePSJ2Nl9wbF9jb250ZW50XyJdKSwKYm9keVt5YXdmLWZlZWQtb25seV0gI3BsY19ib3QgLldCX2Zvb3RlciwKYm9keVt5YXdmLWZlZWQtb25seV0gI3BsY19ib3QgLldfZm9sZCwKYm9keVt5YXdmLWZlZWQtb25seV0gLldCX2Zvb3RlciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQpib2R5W3lhd2YtZmVlZC1vbmx5XSAuV0JfZnJhbWUgeyB3aWR0aDogY2FsYyh2YXIoLS15YXdmLWZlZWQtd2lkdGgpICsgMjBweCkgIWltcG9ydGFudDsgfQpib2R5W3lhd2YtZmVlZC1vbmx5XSAjcGxjX21haW4geyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWxlZnQ6IGF1dG87IG1hcmdpbi1yaWdodDogYXV0bzsgfQpib2R5W3lhd2YtZmVlZC1vbmx5XSAuV0JfZnJhbWUsCmJvZHlbeWF3Zi1mZWVkLW9ubHldICNwbGNfbWFpbiwKYm9keVt5YXdmLWZlZWQtb25seV0gLldCX2dsb2JhbF9uYXYsCmJvZHlbeWF3Zi1mZWVkLW9ubHldIC5XQl9tYWluX2MgeyBtYXgtd2lkdGg6IDEwMCU7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87IH0KYm9keVt5YXdmLWZlZWQtb25seV0gI3BsY19tYWluIHsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KYm9keVt5YXdmLWZlZWQtb25seV0gI3BsY19tYWluOjphZnRlciB7IGNvbnRlbnQ6ICIgIjsgZGlzcGxheTogdGFibGU7IGNsZWFyOiBib3RoOyB9CmJvZHlbeWF3Zi1mZWVkLW9ubHldICNwbGNfbWFpbj4uV0JfbWFpbl9yIHsgdmlzaWJpbGl0eTogaGlkZGVuOyBtYXJnaW4tcmlnaHQ6IC0yMzBweDsgfQpib2R5W3lhd2YtZmVlZC1vbmx5XSAjcGxjX21haW4+LldCX2ZyYW1lX2IgeyB2aXNpYmlsaXR5OiBoaWRkZW47IG1hcmdpbi1yaWdodDogLTMwMHB4OyB9CmJvZHlbeWF3Zi1mZWVkLW9ubHldIC5XQl9mcmFtZSB7IHBhZGRpbmctbGVmdDogMDsgfQpgKTsKCiAgICAgIGNvbnN0IHVwZGF0ZUVuYWJsZSA9IGZ1bmN0aW9uIHVwZGF0ZUVuYWJsZSgpIHsKICAgICAgICBpZiAoIWRvY3VtZW50Py5ib2R5KSB7CiAgICAgICAgICBzZXRUaW1lb3V0KHVwZGF0ZUVuYWJsZSwgMTAwMCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IGVuYWJsZWQgPSBydWxlLnJlZi5fZW5hYmxlZC5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCBjb25maWd1cmVkID0gZG9jdW1lbnQuYm9keS5oYXNBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1vbmx5Jyk7CiAgICAgICAgaWYgKGVuYWJsZWQgPT09IGNvbmZpZ3VyZWQpIHJldHVybjsKICAgICAgICBpZiAoZW5hYmxlZCkgewogICAgICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1vbmx5JywgJ3lhd2YtZmVlZC1vbmx5Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCd5YXdmLWZlZWQtb25seScpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgcnVsZS5yZWYuX2VuYWJsZWQuYWRkQ29uZmlnTGlzdGVuZXIodXBkYXRlRW5hYmxlKTsKICAgICAgdXBkYXRlRW5hYmxlKCk7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2Fib3V0L2Fib3V0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5hYm91dFRhYlRpdGxlID0gewogICAgY246ICflhbPkuo7oja/mlrknLAogICAgdHc6ICfpl5zmlrzol6XmlrknLAogICAgZW46ICdBYm91dCcsCiAgfTsKCiAgY29uc3QgYWJvdXQgPSB5YXdmLnJ1bGVzLmFib3V0ID0ge307CiAgYWJvdXQuYWJvdXQgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hYm91dFRhYlRpdGxlLAogICAgcGFnZW1lbnU6IHRydWUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvYWJvdXQvaW1wb3J0ZXIvaW1wb3J0ZXIuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW1wb3J0ZXIgPSB5YXdmLmltcG9ydGVyID0ge307CgogIGNvbnN0IHBhcnNlcnMgPSBbXTsKCiAgaW1wb3J0ZXIucGFyc2VycyA9IHt9OwoKICBpbXBvcnRlci5hZGRQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyKSB7CiAgICBwYXJzZXJzLnB1c2gocGFyc2VyKTsKICAgIGltcG9ydGVyLnBhcnNlcnNbcGFyc2VyLm5hbWVdID0gcGFyc2VyOwogIH07CgogIGltcG9ydGVyLnBhcnNlID0gZnVuY3Rpb24gKGRhdGFBcnJheUJ1ZmZlcikgewogICAgZm9yIChjb25zdCBwYXJzZXIgb2YgcGFyc2VycykgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGNvbmZpZyA9IHBhcnNlcihkYXRhQXJyYXlCdWZmZXIpOwogICAgICAgIGlmIChjb25maWcgJiYgdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcpIHJldHVybiBjb25maWc7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyByZWFkaW5nIGZhaWxlZAogICAgICB9CiAgICB9CiAgICByZXR1cm4gdm9pZCAwOwogIH07CgoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2Fib3V0L2ltcG9ydGVyL3lhb2ZhbmcuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW1wb3J0ZXIgPSB5YXdmLmltcG9ydGVyOwoKICBpbXBvcnRlci5hZGRQYXJzZXIoZnVuY3Rpb24geWFvZmFuZyhkYXRhQXJyYXlCdWZmZXIpIHsKICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTsKICAgIGNvbnN0IHRleHQgPSBkZWNvZGVyLmRlY29kZShkYXRhQXJyYXlCdWZmZXIpOwogICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UodGV4dCk7CiAgICBpZiAoIWRhdGEudmVyc2lvbiB8fCAhZGF0YS55YW9mYW5nIHx8ICFkYXRhLmNvbmZpZykgdGhyb3cgVHlwZUVycm9yKCk7CiAgICByZXR1cm4geyBjb25maWc6IGRhdGEuY29uZmlnIH07CiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvYWJvdXQvaW1wb3J0ZXIveWF3Zi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGNvbnN0IGltcG9ydGVyID0geWF3Zi5pbXBvcnRlcjsKCiAgaTE4bi55YXdmU2NyaXB0U291cmNlID0gewogICAgY246ICdZQVdGIOeUqOaIt+iEmuacrCcsCiAgICB0dzogJ1lBV0Yg55So5oi26IWz5pysJywKICAgIGVuOiAnWUFXRiB1c2VyIHNjcmlwdCcsCiAgfTsKCiAgY2xhc3MgQ29udmVydGVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcsIEFycmF5PCh2YWx1ZTogYW55KSA9PiBPYmplY3Q8c3RyaW5nLCBhbnk+Pj59ICovCiAgICAgIHRoaXMucnVsZXMgPSBuZXcgTWFwKCk7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpOwogICAgfQogICAgY29udmVydCh5YXdmKSB7CiAgICAgIGNvbnN0IHJ1bGVzID0gdGhpcy5ydWxlczsKICAgICAgLyoqIEB0eXBlIE1hcDwodmFsdWVzOiBBcnJheTxhbnk+LCB0YXJnZXQ6IHN0cmluZykgPT4gKHsgW3RhcmdldDogc3RyaW5nXTogYW55IH0pLCB7IHRhcmdldDogc3RyaW5nLCB2YWx1ZXM6IEFycmF5PGFueT4gfT4gKi8KICAgICAgdGhpcy5wZW5kaW5nID0gbmV3IE1hcCgpOwogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgLi4uT2JqZWN0LmtleXMoeWF3ZikubWFwKGtleSA9PiB7CiAgICAgICAgaWYgKCFydWxlcy5oYXMoa2V5KSkgcmV0dXJuIHt9OwogICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCAuLi5ydWxlcy5nZXQoa2V5KS5tYXAocnVsZSA9PiBydWxlKHlhd2Zba2V5XSkpKTsKICAgICAgfSksIC4uLlsuLi50aGlzLnBlbmRpbmcuZW50cmllcygpXS5tYXAoCiAgICAgICAgKFtjb252ZXJ0ZXIsIHsgdGFyZ2V0LCB2YWx1ZXMgfV0pID0+IGNvbnZlcnRlcih2YWx1ZXMsIHRhcmdldCkKICAgICAgKSk7CiAgICB9CiAgICBydWxlKHNvdXJjZSwgdGFyZ2V0LCBjb252ZXJ0ZXIgPSBudWxsKSB7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICBpZiAoIXRoaXMucnVsZXMuaGFzKHNvdXJjZSkpIHRoaXMucnVsZXMuc2V0KHNvdXJjZSwgW10pOwogICAgICBjb25zdCBzb3VyY2VSdWxlID0gdGhpcy5ydWxlcy5nZXQoc291cmNlKTsKICAgICAgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYgKHR5cGVvZiBjb252ZXJ0ZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHNvdXJjZVJ1bGUucHVzaCh2YWx1ZSA9PiAoeyBbdGFyZ2V0XTogY29udmVydGVyKHZhbHVlKSB9KSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNvdXJjZVJ1bGUucHVzaCh2YWx1ZSA9PiAoeyBbdGFyZ2V0XTogdmFsdWUgfSkpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2UpKSB7CiAgICAgICAgc291cmNlLmZvckVhY2goKGtleSwgaW5kZXgpID0+IHsKICAgICAgICAgIHNvdXJjZVJ1bGUucHVzaCh2YWx1ZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGF0LnBlbmRpbmc7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBwZW5kaW5nLmdldChjb252ZXJ0ZXIpIHx8IHsgdGFyZ2V0LCB2YWx1ZXM6IEFycmF5KHNvdXJjZS5sZW5ndGgpIH07CiAgICAgICAgICAgIGRhdGEudmFsdWVzW2luZGV4XSA9IHZhbHVlOwogICAgICAgICAgICBjb25zdCBmdWxsRmlsbGVkID0gZGF0YS52YWx1ZXMucmVkdWNlKHYgPT4gdiArIDEpID09PSBkYXRhLnZhbHVlcy5sZW5ndGg7CiAgICAgICAgICAgIGlmICghZnVsbEZpbGxlZCkgcmV0dXJuOwogICAgICAgICAgICBjb252ZXJ0ZXIoZGF0YS52YWx1ZXMsIHRhcmdldCk7CiAgICAgICAgICAgIHBlbmRpbmcuZGVsZXRlKGNvbnZlcnRlcik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgaW5pdGlhbGl6ZSgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXMucnVsZS5iaW5kKHRoaXMpOwogICAgICAvLyDlvq7ljZrov4fmu6QKICAgICAgcnVsZSgnd2VpYm8udG9vbC5hdXRvX2NoZWNrX2ZvbGxvd2luZycsICdmaWx0ZXJfZm9sbG93X2NoZWNrJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuYXV0b19jaGVja19mb2xsb3dpbmcuZnJlcXVlbmN5JywgJ2ZpbHRlcl9mb2xsb3dfY2hlY2suZnJlcXVlbmN5JywgZGF5cyA9PiBkYXlzICogODY0MDBlMyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudW5jaGVja19mb2xsb3dfcHJlc2VudGVyJywgJ3VuY2hlY2tfZm9sbG93X3ByZXNlbnRlcicpOwogICAgICBydWxlKCd3ZWliby50b29sLmF1dG9fdW5mb2xkX3R0YXJ0aWNhbCcsICdzaG93X2FydGljYWxfd2l0aG91dF9mb2xsb3cnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5sb2FkX3dlaWJvX2J5X25ld2VzdCcsICdmaWx0ZXJfaG9tZXBhZ2VfbmV3ZXN0X2ZlZWRzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wubG9hZF93ZWlib19ieV9ncm91cCcsICdmaWx0ZXJfaG9tZXBhZ2Vfc2luZ2xlX2dyb3VwJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wubG9hZF93ZWlib19ieV9ncm91cC5ncm91cCcsICdmaWx0ZXJfaG9tZXBhZ2Vfc2luZ2xlX2dyb3VwLmdyb3VwJywgZ3JvdXAgPT4gYGcke2dyb3VwLmlkfWApOwogICAgICBydWxlKCd3ZWliby50b29sLmxvYWRfd2VpYm9fYnlfbXVsdGlfZ3JvdXAuZW5hYmxlZCcsICdmaWx0ZXJfaG9tZXBhZ2VfbXVsdGlfZ3JvdXAnKTsKICAgICAgcnVsZShbJ3dlaWJvLnRvb2wubG9hZF93ZWlib19ieV9tdWx0aV9ncm91cCcsICd3ZWliby50b29sLmxvYWRfd2VpYm9fYnlfbXVsdGlfZ3JvdXAud2hpc3BlciddLCAnZmlsdGVyX2hvbWVwYWdlX211bHRpX2dyb3VwLmdyb3VwcycsIChbZ3JvdXBzLCB3aGlzcGVyXSwgdGFyZ2V0KSA9PiAoWwogICAgICAgIC4uLihncm91cHMgPz8gW10pLm1hcChncm91cCA9PiBgZyR7Z3JvdXB9YCksCiAgICAgICAgLi4uKHdoaXNwZXIgPyBbJ3doaXNwZXInXSA6IFtdKSwKICAgICAgXSkpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5hdXRvX2xvYWRfbmV3X3dlaWJvJywgJ2ZpbHRlcl9ob21lcGFnZV9hdXRvX2xvYWQnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuZGVza3RvcF9ub3RpZmljYXRpb24nLCAnZmlsdGVyX2hvbWVwYWdlX2Rlc2t0b3Bfbm90aWZ5Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmRlc2t0b3Bfbm90aWZpY2F0aW9uLnR5cGVzJywgJ2ZpbHRlcl9ob21lcGFnZV9kZXNrdG9wX25vdGlmeS53aGl0ZWxpc3QnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5yZWRpcmVjdFdlaWJvJywgJ2ZpbHRlcl9wcm9maWxlX3Nob3dfYWxsJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuZmFzdF9ibG9ja19idXR0b24nLCAnZmlsdGVyX21hbnVhbGx5X2hpZGUnKTsKICAgICAgLy8g5YaF5a65772e5p2l5rqQCiAgICAgIGNvbnN0IHJlZ2V4ZW5JbXBvcnRlciA9IHJlZ2V4ZW4gPT4gcmVnZXhlbi5tYXAoc291cmNlID0+ICh7IHNvdXJjZSwgZmxhZ3M6ICdtdScgfSkpOwogICAgICBjb25zdCB1c2VySWRJbXBvcnRlciA9IGlkcyA9PiBpZHMubWFwKGlkID0+ICh7IGlkIH0pKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5rZXl3b3JkLndoaXRlbGlzdCcsICdmaWx0ZXJfY29udGVudF90ZXh0X3Nob3cuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5rZXl3b3JkLmJsYWNrbGlzdCcsICdmaWx0ZXJfY29udGVudF90ZXh0X2hpZGUuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5rZXl3b3JkLmZvbGRsaXN0JywgJ2ZpbHRlcl9jb250ZW50X3RleHRfZm9sZC5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLnJlZ2V4cC53aGl0ZWxpc3QnLCAnZmlsdGVyX2NvbnRlbnRfcmVnZXhfc2hvdy5pdGVtcycsIHJlZ2V4ZW5JbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMucmVnZXhwLmJsYWNrbGlzdCcsICdmaWx0ZXJfY29udGVudF9yZWdleF9oaWRlLml0ZW1zJywgcmVnZXhlbkltcG9ydGVyKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5yZWdleHAuZm9sZGxpc3QnLCAnZmlsdGVyX2NvbnRlbnRfcmVnZXhfZm9sZC5pdGVtcycsIHJlZ2V4ZW5JbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuYWNjb3VudC53aGl0ZWxpc3QnLCAnZmlsdGVyX2F1dGhvcl9pZF9zaG93Lml0ZW1zJywgdXNlcklkSW1wb3J0ZXIpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLmFjY291bnQuYmxhY2tsaXN0JywgJ2ZpbHRlcl9hdXRob3JfaWRfaGlkZS5pdGVtcycsIHVzZXJJZEltcG9ydGVyKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5hY2NvdW50LmZvbGRsaXN0JywgJ2ZpbHRlcl9hdXRob3JfaWRfZm9sZC5pdGVtcycsIHVzZXJJZEltcG9ydGVyKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5hY2NvdW50Zi5ibGFja2xpc3QnLCAnZmlsdGVyX2F1dGhvcl9mb3J3YXJkX2lkX2hpZGUuaXRlbXMnLCB1c2VySWRJbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuYWNjb3VudGYuZm9sZGxpc3QnLCAnZmlsdGVyX2F1dGhvcl9mb3J3YXJkX2lkX2ZvbGQuaXRlbXMnLCB1c2VySWRJbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLm9yaWdpbmFsLmJsYWNrbGlzdF9kJywgJ2ZpbHRlcl9vcmlnaW5hbF9kaXNjb3ZlcicpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLm9yaWdpbmFsLndoaXRlbGlzdCcsICdmaWx0ZXJfb3JpZ2luYWxfaWRfc2hvdy5pdGVtcycsIHVzZXJJZEltcG9ydGVyKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5vcmlnaW5hbC5ibGFja2xpc3QnLCAnZmlsdGVyX29yaWdpbmFsX2lkX2hpZGUuaXRlbXMnLCB1c2VySWRJbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMub3JpZ2luYWwuZm9sZGxpc3QnLCAnZmlsdGVyX29yaWdpbmFsX2lkX2ZvbGQuaXRlbXMnLCB1c2VySWRJbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLm9yaWdpbmFsLmJ5X2ZvbGxvd2VyLmVuYWJsZWQnLCAnZmlsdGVyX29yaWdpbmFsX2ZvbGxvd2VyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm9yaWdpbmFsLmJ5X2ZvbGxvd2VyLmZhbnMnLCAnZmlsdGVyX29yaWdpbmFsX2ZvbGxvd2VyLmNvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm9yaWdpbmFsLmJ5X2ZvbGxvd2VyJywgJ2ZpbHRlcl9vcmlnaW5hbF9mb2xsb3dlci5hY2NvdW50JywgdXNlcklkSW1wb3J0ZXIpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLm1lbnRpb24ud2hpdGVsaXN0JywgJ2ZpbHRlcl9tZW50aW9uX25hbWVfc2hvdy5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLm1lbnRpb24uYmxhY2tsaXN0JywgJ2ZpbHRlcl9tZW50aW9uX25hbWVfaGlkZS5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLm1lbnRpb24uZm9sZGxpc3QnLCAnZmlsdGVyX21lbnRpb25fbmFtZV9mb2xkLml0ZW1zJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMudG9waWMud2hpdGVsaXN0JywgJ2ZpbHRlcl90b3BpY190ZXh0X3Nob3cuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy50b3BpYy5ibGFja2xpc3QnLCAnZmlsdGVyX3RvcGljX3RleHRfaGlkZS5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLnRvcGljLmZvbGRsaXN0JywgJ2ZpbHRlcl90b3BpY190ZXh0X2ZvbGQuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5zb3VyY2Uud2hpdGVsaXN0JywgJ2ZpbHRlcl9zb3VyY2VfdGV4dF9zaG93Lml0ZW1zJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuc291cmNlLmJsYWNrbGlzdCcsICdmaWx0ZXJfc291cmNlX3RleHRfaGlkZS5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLnNvdXJjZS5mb2xkbGlzdCcsICdmaWx0ZXJfc291cmNlX3RleHRfZm9sZC5pdGVtcycpOwogICAgICAvLyDmm7TlpJoKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIubXlfd2VpYm8nLCAnZmlsdGVyX215X2ZlZWQnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIubXlfb3JpZ2luYWwnLCAnZmlsdGVyX215X29yaWdpbmFsJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLm1lbnRpb25fbWUnLCAnZmlsdGVyX21lbnRpb25fbWUnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuYWRfZmVlZCcsICdmaWx0ZXJfYWRfZmVlZCcpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5mYW5zX3RvcCcsICdmaWx0ZXJfZmFuc190b3AnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIucHJvZHVjdF9jYXJkJywgJ2ZpbHRlcl93ZWlib19wcm9kdWN0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnRiX3RtX3diJywgJ2ZpbHRlcl90Yl90bV9mZWVkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLndlaWJvX3BheV9naWZ0JywgJ2ZpbHRlcl93ZWlib19wYXknKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIudXNlcl9saWtlJywgJ2ZpbHRlcl91c2VyX2xpa2UnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuZmFrZV93ZWlibycsICdmaWx0ZXJfZmFrZV93ZWlibycpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5kZWxldGVkX2ZvcndhcmQnLCAnZmlsdGVyX2RlbGV0ZWRfZm9yd2FyZCcpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5jb21tZW50X2FuZF9yZXBseScsICdmaWx0ZXJfY29tbWVudF9hbmRfZm9yd2FyZCcpOwogICAgICBydWxlKCd3ZWliby5vdGhlci52b3RlX3dlaWJvJywgJ2ZpbHRlcl92b3RlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnJlZDIwMTQnLCAnZmlsdGVyX3JlZF9wYWNrJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmppbmxpX2ZvcndhcmQnLCAnZmlsdGVyX2tvaV9mb3J3YXJkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmFwcGl0ZW0nLCAnZmlsdGVyX2FwcF9pdGVtJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLndlbmRhJywgJ2ZpbHRlcl93ZW5kYScpOwogICAgICBydWxlKCd3ZWliby5vdGhlci53ZW53b2RyJywgJ2ZpbHRlcl93ZW53b19kcicpOwogICAgICBydWxlKCd3ZWliby5vdGhlci55aXpoaWJvLnR5cGUnLCAnZmlsdGVyX3lpemhpYm8nKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuc3RvY2snLCAnZmlsdGVyX3N0b2NrJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnBhaWQnLCAnZmlsdGVyX3BhaWQnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIubXVsdGlfdG9waWMnLCAnZmlsdGVyX211bHRpcGxlX3RvcGljc19mZWVkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLm11bHRpX3RvcGljLm51bScsICdmaWx0ZXJfbXVsdGlwbGVfdG9waWNzX2ZlZWQubnVtJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnNhbWVfYWNjb3VudCcsICdmbG9vZGluZ19hdXRob3InKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuc2FtZV9hY2NvdW50Lm51bWJlcicsICdmbG9vZGluZ19hdXRob3IubnVtYmVyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnNhbWVfYWNjb3VudC5hY3Rpb24nLCAnZmxvb2RpbmdfYXV0aG9yLm51bWJlci5hY3Rpb24nLCBhY3Rpb24gPT4gKHsgZm9sZDogJ2ZvbGQnLCBoaWRkZW46ICdoaWRlJyB9W2FjdGlvbl0pKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuc2FtZV9mb3J3YXJkJywgJ2Zsb29kaW5nX2ZvcndhcmQnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuc2FtZV9mb3J3YXJkLm51bWJlcicsICdmbG9vZGluZ19mb3J3YXJkLm51bWJlcicpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5zYW1lX2ZvcndhcmQuYWN0aW9uJywgJ2Zsb29kaW5nX2ZvcndhcmQubnVtYmVyLmFjdGlvbicsIGFjdGlvbiA9PiAoeyBmb2xkOiAnZm9sZCcsIGhpZGRlbjogJ2hpZGUnIH1bYWN0aW9uXSkpOwogICAgICAvLyDor4Torrrov4fmu6QKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuY29tbWVudF9zaG93X2FsbCcsICdjb21tZW50X2xheW91dF9ieV90aW1lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmZvbGRfY2hpbGRfY29tbWVudCcsICdjb21tZW50X2xheW91dF9oaWRlX3N1YicpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLmNrZXl3b3JkLndoaXRlbGlzdCcsICdmaWx0ZXJfY29tbWVudF90ZXh0X3Nob3cuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5ja2V5d29yZC5ibGFja2xpc3QnLCAnZmlsdGVyX2NvbW1lbnRfdGV4dF9oaWRlLml0ZW1zJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuY3JlZ2V4cC53aGl0ZWxpc3QnLCAnZmlsdGVyX2NvbW1lbnRfcmVnZXhfc2hvdy5pdGVtcycsIHJlZ2V4ZW5JbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuY3JlZ2V4cC5ibGFja2xpc3QnLCAnZmlsdGVyX2NvbW1lbnRfcmVnZXhfaGlkZS5pdGVtcycsIHJlZ2V4ZW5JbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuY3VzZXIud2hpdGVsaXN0JywgJ2ZpbHRlcl9jb21tZW50X25hbWVfc2hvdy5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLmN1c2VyLmJsYWNrbGlzdCcsICdmaWx0ZXJfY29tbWVudF9uYW1lX2hpZGUuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uY29tbWVudC5teV9jb21tZW50JywgJ2ZpbHRlcl9jb21tZW50X3Nob3dfbXknKTsKICAgICAgcnVsZSgnd2VpYm8uY29tbWVudC5lbW9qaV9jb3VudCcsICdmaWx0ZXJfY29tbWVudF9mYWNlX2NvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmNvbW1lbnQuZW1vamlfY291bnQubnVtYmVyJywgJ2ZpbHRlcl9jb21tZW50X2ZhY2VfY291bnQuY291bnQnKTsKICAgICAgcnVsZSgnd2VpYm8uY29tbWVudC5lbW9qaV90eXBlcycsICdmaWx0ZXJfY29tbWVudF9mYWNlX3R5cGUnKTsKICAgICAgcnVsZSgnd2VpYm8uY29tbWVudC5lbW9qaV90eXBlcy5udW1iZXInLCAnZmlsdGVyX2NvbW1lbnRfZmFjZV90eXBlLmNvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmNvbW1lbnQubm9fY29udGVudCcsICdmaWx0ZXJfY29tbWVudF93b19jb250ZW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmNvbW1lbnQud2l0aF9mb3J3YXJkJywgJ2ZpbHRlcl9jb21tZW50X3dpdGhfZm9yd2FyZCcpOwogICAgICAvLyDnlYzpnaLmuIXnkIYKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25MZXZlbCcsICdjbGVhbl9pY29uc19sZXZlbCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlSWNvbk1lbWJlcicsICdjbGVhbl9pY29uc19tZW1iZXInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25BcHByb3ZlJywgJ2NsZWFuX2ljb25zX2FwcHJvdmUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25BcHByb3ZlQ28nLCAnY2xlYW5faWNvbnNfYXBwcm92ZV9jbycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlSWNvbkFwcHJvdmVEZWFkJywgJ2NsZWFuX2ljb25zX2FwcHJvdmVfZGVhZCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlSWNvbkJpZ0Z1bicsICdjbGVhbl9pY29uc19iaWdmdW4nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25DbHViJywgJ2NsZWFuX2ljb25zX2NsdWInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25WR2lybCcsICdjbGVhbl9pY29uc192X2dpcmwnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25TdXBlcnZpc29yJywgJ2NsZWFuX2ljb25zX3N1cGVydmlzb3InKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25UYW9iYW8nLCAnY2xlYW5faWNvbnNfdGFvYmFvJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVJY29uQ2hlbmcnLCAnY2xlYW5faWNvbnNfY2hlbmcnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25Hb25neWknLCAnY2xlYW5faWNvbnNfZ29uZ3lpJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVJY29uWm9uZ3lpa2EnLCAnY2xlYW5faWNvbnNfem9uZ3lpa2EnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25PdGhlcicsICdjbGVhbl9pY29uc19vdGhlcnMnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUZvbGxvd1NpbmdsZScsICdjbGVhbl9mb2xsb3dfc2luZ2xlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVGb2xsb3dBdE1lJywgJ2NsZWFuX2ZvbGxvd19hdF9tZScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlRm9sbG93RGlzY292ZXInLCAnY2xlYW5fZm9sbG93X2Rpc2NvdmVyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVGb2xsb3dXaGlzcGVyJywgJ2NsZWFuX2ZvbGxvd193aGlzcGVyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVGb2xsb3dWaWRlbycsICdjbGVhbl9mb2xsb3dfdmlkZW8nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUZvbGxvd1JlY29tbWVuZCcsICdjbGVhbl9mb2xsb3dfcmVjb21tZW5kJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVOYXZMb2dvSW1nJywgJ2NsZWFuX25hdl9sb2dvX2ltZycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTmF2TWFpbicsICdjbGVhbl9uYXZfbWFpbicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTmF2VFYnLCAnY2xlYW5fbmF2X3R2Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVOYXZIb3QnLCAnY2xlYW5fbmF2X2hvdCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTmF2R2FtZScsICdjbGVhbl9uYXZfZ2FtZScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTmF2SG90U2VhcmNoJywgJ2NsZWFuX25hdl9ob3Rfc2VhcmNoJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVOYXZOb3RpY2VOZXcnLCAnY2xlYW5fbmF2X25vdGljZV9uZXcnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZU5hdk5ldycsICdjbGVhbl9uYXZfbmV3Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0TmV3RmVlZCcsICdjbGVhbl9sZWZ0X25ld19mZWVkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0SG9tZScsICdjbGVhbl9sZWZ0X2hvbWUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRGYXYnLCAnY2xlYW5fbGVmdF9mYXYnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRMaWtlJywgJ2NsZWFuX2xlZnRfbGlrZScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTGVmdEhvdCcsICdjbGVhbl9sZWZ0X2hvdCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTGVmdFRWJywgJ2NsZWFuX2xlZnRfdHYnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRGcmllbmRzJywgJ2NsZWFuX2xlZnRfZnJpZW5kcycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTGVmdEdyb3VwVG9NZScsICdjbGVhbl9sZWZ0X2dyb3VwX3RvX21lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0U3BlY2lhbCcsICdjbGVhbl9sZWZ0X3NwZWNpYWwnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRXaGlzcGVyJywgJ2NsZWFuX2xlZnRfd2hpc3BlcicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTGVmdFZQbHVzJywgJ2NsZWFuX2xlZnRfdl9wbHVzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0TmV3JywgJ2NsZWFuX2xlZnRfbmV3Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0TmV3cycsICdjbGVhbl9sZWZ0X25ld3MnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRDb3VudCcsICdjbGVhbl9sZWZ0X2NvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVNaWRkbGVSZWNvbW1lbmRlZFRvcGljJywgJ2NsZWFuX21pZGRsZV9yZWNvbW1lbmRlZF90b3BpYycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTWlkZGxlRmVlZFJlY29tbWFuZCcsICdjbGVhbl9taWRkbGVfZmVlZF9yZWNvbW1lbmQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZU1pZGRsZU1lbWJlclRpcCcsICdjbGVhbl9taWRkbGVfbWVtYmVyX3RpcCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUmlnaHRJbmZvJywgJ2NsZWFuX3JpZ2h0X2luZm8nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVJpZ2h0UmVjb21NdXNpY1JhbmsnLCAnY2xlYW5fcmlnaHRfcmFua3MnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVJpZ2h0SG90VG9waWMnLCAnY2xlYW5fcmlnaHRfaG90X3RvcGljJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVSaWdodEludGVyZXN0JywgJ2NsZWFuX3JpZ2h0X2ludGVyZXN0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVSaWdodE1lbWJlcicsICdjbGVhbl9yaWdodF9tZW1iZXInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVJpZ2h0R3JvdXBzJywgJ2NsZWFuX3JpZ2h0X2dyb3VwcycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUmlnaHRSZWNvbUdyb3VwVXNlcicsICdjbGVhbl9yaWdodF9yZWNvbV9ncm91cF91c2VyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVSaWdodEhvbmdiYW9SYW5rJywgJ2NsZWFuX3JpZ2h0X2hvbmdiYW9fcmFuaycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUmlnaHRBdHRGZWVkJywgJ2NsZWFuX3JpZ2h0X2F0dF9mZWVkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVSaWdodE5vdGljZScsICdjbGVhbl9yaWdodF9ub3RpY2UnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvUmVjb21GZWVkJywgJ2NsZWFuX2ZlZWRfcmVjb21tZW5kJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0ZlZWRPdXRlclRpcCcsICdjbGVhbl9mZWVkX2ZlZWRfb3V0ZXJfdGlwJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0ZlZWRUaXAnLCAnY2xlYW5fZmVlZF9mZWVkX3RpcCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9Hcm91cFRpcCcsICdjbGVhbl9mZWVkX2dyb3VwX3RpcCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9WSVBCYWNrZ3JvdW5kJywgJ2NsZWFuX2ZlZWRfdmlwX2JhY2tncm91bmQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvTGFzdFBpYycsICdjbGVhbl9mZWVkX2xhc3RfcGljJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib1BpY1RhZycsICdjbGVhbl9mZWVkX3BpY190YWcnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvU29uVGl0bGUnLCAnY2xlYW5fZmVlZF9zb25fdGl0bGUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvQ2FyZCcsICdjbGVhbl9mZWVkX2NhcmQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvQXJ0aWNhbFBheScsICdjbGVhbl9mZWVkX2FydGljbGVfcGF5Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib1RhZycsICdjbGVhbl9mZWVkX3RhZycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9Nb3ZpZVRhZycsICdjbGVhbl9mZWVkX3JlbGF0ZWRfbGluaycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9Tb3VyY2UnLCAnY2xlYW5fZmVlZF9zb3VyY2UnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvUG9wJywgJ2NsZWFuX2ZlZWRfcG9wJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0xpa2UnLCAnY2xlYW5fZmVlZF9saWtlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0xpa2VDb21tZW50JywgJ2NsZWFuX2ZlZWRfbGlrZV9jb21tZW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0xpa2VQb3B1cCcsICdjbGVhbl9mZWVkX2xpa2VfYXR0aXR1ZGUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvRm9yd2FyZCcsICdjbGVhbl9mZWVkX2ZvcndhcmQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvRmF2b3VyaXRlJywgJ2NsZWFuX2ZlZWRfZmF2b3JpdGUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvUHJvbW90ZU90aGVyJywgJ2NsZWFuX2ZlZWRfcHJvbW90ZV9vdGhlcicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9SZXBvcnQnLCAnY2xlYW5fZmVlZF9yZXBvcnQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvVXNlQ2FyZEJhY2tncm91bmQnLCAnY2xlYW5fZmVlZF91c2VfY2FyZF9iYWNrZ3JvdW5kJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVQZXJzb25Nb3ZlVGhpbmdzJywgJ2NsZWFuX3Byb2ZpbGVfbW92ZV90aGluZ3MnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkNvdmVyJywgJ2NsZWFuX3Byb2ZpbGVfY292ZXInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkJHSW1nJywgJ2NsZWFuX3Byb2ZpbGVfYmdfaW1nJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVQZXJzb25CYWRnZUljb24nLCAnY2xlYW5fcHJvZmlsZV9iYWRnZV9pY29uJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVQZXJzb25WZXJpZnknLCAnY2xlYW5fcHJvZmlsZV92ZXJpZnknKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkVkaXRQZXJzb25JbmZvJywgJ2NsZWFuX3Byb2ZpbGVfZWRpdF9wZXJzb25faW5mbycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uU3RhdHMnLCAnY2xlYW5fcHJvZmlsZV9zdGF0cycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uTXlEYXRhJywgJ2NsZWFuX3Byb2ZpbGVfbXlfZGF0YScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uU3VnZ2VzdFVzZXInLCAnY2xlYW5fcHJvZmlsZV9zdWdnZXN0X3VzZXInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkdyb3VwJywgJ2NsZWFuX3Byb2ZpbGVfZ3JvdXAnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvblJlbGF0aW9uJywgJ2NsZWFuX3Byb2ZpbGVfcmVsYXRpb24nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkFsYnVtJywgJ2NsZWFuX3Byb2ZpbGVfYWxidW0nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkhvdFRvcGljJywgJ2NsZWFuX3Byb2ZpbGVfaG90X3RvcGljJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVQZXJzb25Ib3RXZWlibycsICdjbGVhbl9wcm9maWxlX2hvdF93ZWlibycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uVXNlckxpc3QnLCAnY2xlYW5fcHJvZmlsZV9yZWNvbW1lbmRfZmVlZCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uSG9uZ2JhbycsICdjbGVhbl9wcm9maWxlX3VzZXJfbGlzdCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uV2Vud29EcicsICdjbGVhbl9wcm9maWxlX2hvbmdiYW8nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvblRpbWVsaW5lJywgJ2NsZWFuX3Byb2ZpbGVfd2Vud29fZHInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZU1lc3NhZ2VzSGVscCcsICdjbGVhbl9wcm9maWxlX3RpbWVsaW5lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVNZXNzYWdlc0ZlZWRiYWNrJywgJ2NsZWFuX21lc3NhZ2VfaGVscCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTWVzc2FnZXNZb3VkYW8nLCAnY2xlYW5fbWVzc2FnZV9mZWVkYmFjaycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJBZHMnLCAnY2xlYW5fb3RoZXJfYWRzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlck11c2ljJywgJ2NsZWFuX290aGVyX211c2ljJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlclRlbXBsYXRlJywgJ2NsZWFuX290aGVyX3RlbXBsYXRlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlckhvbWVUaXAnLCAnY2xlYW5fb3RoZXJfaG9tZV90aXAnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZU90aGVyRm9vdGVyJywgJ2NsZWFuX290aGVyX2Zvb3RlcicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJJTScsICdjbGVhbl9vdGhlcl9pbScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJJTU5ld3MnLCAnY2xlYW5fb3RoZXJfaW1fbmV3cycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJUaXAnLCAnY2xlYW5fb3RoZXJfdGlwJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlclJlbGF0ZWRXQicsICdjbGVhbl9vdGhlcl9yZWxhdGVkX2ZlZWRzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlclJlbGF0ZWRWaWRlbycsICdjbGVhbl9vdGhlcl9yZWxhdGVkX3ZpZGVvJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlclJlbGF0ZWRBcnRpY2FsJywgJ2NsZWFuX290aGVyX3JlbGF0ZWRfYXJ0aWNhbCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJTZW5kV2VpYm8nLCAnY2xlYW5fb3RoZXJfc2VuZF93ZWlibycpOwogICAgICAvLyDniYjpnaLlsZXnpLoKICAgICAgcnVsZSgnd2VpYm8udG9vbC5oaWRlX25hdl9iYXInLCAnbGF5b3V0X25hdl9hdXRvX2hpZGUnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5yZW9yZGVyX25hdl9iYXInLCAnbGF5b3V0X25hdl9jbGFzc2ljYWwnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5uYXZfaGlkZV9uYW1lJywgJ2xheW91dF9uYXZfaGlkZV9uYW1lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wubmF2X2hpZGVfbmFtZS5hY3QnLCAnbGF5b3V0X25hdl9oaWRlX25hbWUuYWN0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdicsICdsYXlvdXRfbGVmdF9tZXNzYWdlcycpOwogICAgICBydWxlKCd3ZWliby50b29sLnNob3dBbGxNc2dOYXYuYXRtZScsICdsYXlvdXRfbGVmdF9tZXNzYWdlcy5hdG1lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdi5jbXQnLCAnbGF5b3V0X2xlZnRfbWVzc2FnZXMuY210Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdi5saWtlJywgJ2xheW91dF9sZWZ0X21lc3NhZ2VzLmxpa2UnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5zaG93QWxsTXNnTmF2LmRtJywgJ2xheW91dF9sZWZ0X21lc3NhZ2VzLmRtJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdi5tc2dib3gnLCAnbGF5b3V0X2xlZnRfbWVzc2FnZXMubXNnYm94Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdi5ncm91cCcsICdsYXlvdXRfbGVmdF9tZXNzYWdlcy5ncm91cCcpOwogICAgICBydWxlKCd3ZWliby50b29sLnNob3dBbGxNc2dOYXYuZG1zdWInLCAnbGF5b3V0X2xlZnRfbWVzc2FnZXMuZG1zdWInKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5tZXJnZUNvbHVtbnMnLCAnbGF5b3V0X3NpZGVfbWVyZ2UnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5tZXJnZUNvbHVtbnMuc2lkZScsICdsYXlvdXRfc2lkZV9tZXJnZS5zaWRlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY2hvc2Vfc2lkZScsICdsYXlvdXRfc2lkZV9wb3NpdGlvbicpOwogICAgICBydWxlKCd3ZWliby50b29sLmNob3NlX3NpZGUuc2lkZScsICdsYXlvdXRfc2lkZV9wb3NpdGlvbi5zaWRlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbEdyb3VwJywgJ2xheW91dF9zaWRlX3Nob3dfYWxsX2dyb3VwcycpOwogICAgICBydWxlKCd3ZWliby50b29sLmZpeGVkTGVmdCcsICdsYXlvdXRfbGVmdF9tb3ZlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuZml4ZWRSaWdodCcsICdsYXlvdXRfcmlnaHRfbW92ZScpOwogICAgICBydWxlKCd3ZWliby50b29sLmZpeGVkT3RoZXJzJywgJ2xheW91dF9vdGhlcl9tb3ZlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY3VzdG9tX2ZvbnRfZmFtaWx5JywgJ2ZvbnRfZmFtaWx5Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY3VzdG9tX2ZvbnRfZmFtaWx5LndmJywgJ2ZvbnRfZmFtaWx5Lndlc3QnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5jdXN0b21fZm9udF9mYW1pbHkuY2YnLCAnZm9udF9mYW1pbHkuY2hpbmVzZScpOwogICAgICBydWxlKCd3ZWliby50b29sLmF2YXRhcl9zaGFwZScsICdsYXlvdXRfYXZhdGFyX3NoYXBlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuYXZhdGFyX3NoYXBlLnNoYXBlJywgJ2xheW91dF9hdmF0YXJfc2hhcGUuc2hhcGUnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5mYXN0X2Vtb2ppJywgJ2xheW91dF9mYXN0X2ZhY2UnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5zaG93X2xvY2FsX3RpbWUnLCAnbGF5b3V0X2xvY2FsZV90aW1lem9uZScpOwogICAgICBydWxlKCd3ZWliby50b29sLnNldF9za2luJywgJ2xheW91dF90aGVtZV9hcHBseScpOwogICAgICBydWxlKCd3ZWliby50b29sLnNldF9za2luLnNraW4nLCAnbGF5b3V0X3RoZW1lX2FwcGx5LnNraW4nKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5kYXJrX25hdl9iYXInLCAnbGF5b3V0X25hdl9kYXJrJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY29sb3Jfb3ZlcnJpZGUnLCAnbGF5b3V0X3RoZW1lX2NvbG9yJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY29sb3Jfb3ZlcnJpZGUuY29sb3IxJywgJ2xheW91dF90aGVtZV9jb2xvci5jb2xvcjEnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5jb2xvcl9vdmVycmlkZS50cmFuc3BhcmVuY3kxJywgJ2xheW91dF90aGVtZV9jb2xvci50cmFuc3BhcmVuY3kxJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY29sb3Jfb3ZlcnJpZGUuY29sb3IyJywgJ2xheW91dF90aGVtZV9jb2xvci5jb2xvcjInKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5jb2xvcl9vdmVycmlkZS50cmFuc3BhcmVuY3kyJywgJ2xheW91dF90aGVtZV9jb2xvci50cmFuc3BhcmVuY3kyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY29sb3Jfb3ZlcnJpZGUuY29sb3IzJywgJ2xheW91dF90aGVtZV9jb2xvci5jb2xvcjMnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5jb2xvcl9vdmVycmlkZS50cmFuc3BhcmVuY3kzJywgJ2xheW91dF90aGVtZV9jb2xvci50cmFuc3BhcmVuY3kzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudXNlcnN0eWxlJywgJ2N1c3RvbV9jc3MuY3NzJyk7CiAgICAgIC8vIOW+ruWNmuWxleekugogICAgICBydWxlKCd3ZWliby50b29sLm5vX3dlaWJvX3NwYWNlJywgJ2ZlZWRfbm9fc3BhY2UnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5mcm9tX2luX2JvdHRvbScsICdmZWVkX3NvdXJjZV9hdF9ib3R0b20nKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC51bndyYXBUZXh0JywgJ2ZlZWRfYXV0aG9yX2NvbnRlbnRfbm93cmFwJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuaW1hZ2Vfc2l6ZScsICdmZWVkX3NtYWxsX2ltYWdlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuaW1hZ2Vfc2l6ZS5yZXBvc3QnLCAnZmVlZF9zbWFsbF9pbWFnZS5yZXBvc3QnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC53aWR0aF93ZWlibycsICdmZWVkX2luY3JlYXNlX3dpZHRoJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wud2lkdGhfd2VpYm8ud2lkdGgnLCAnZmVlZF9pbmNyZWFzZV93aWR0aC53aWR0aCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQucmVvcmRlcicsICdmZWVkX2J1dHRvbl9vcmRlcicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQucmVvcmRlci4xJywgJ2ZlZWRfYnV0dG9uX29yZGVyLjAnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0LnJlb3JkZXIuMicsICdmZWVkX2J1dHRvbl9vcmRlci4xJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dC5yZW9yZGVyLjMnLCAnZmVlZF9idXR0b25fb3JkZXIuMicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQucmVvcmRlci40JywgJ2ZlZWRfYnV0dG9uX29yZGVyLjMnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0LnJlb3JkZXIuNScsICdmZWVkX2J1dHRvbl9vcmRlci40Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dC5jbXRvcmRlcicsICdmZWVkX2J1dHRvbl9vcmRlcl9jb21tZW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dC5jbXRvcmRlci4xJywgJ2ZlZWRfYnV0dG9uX29yZGVyX2NvbW1lbnQuMCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQuY210b3JkZXIuMicsICdmZWVkX2J1dHRvbl9vcmRlcl9jb21tZW50LjEnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0LmNtdG9yZGVyLjMnLCAnZmVlZF9idXR0b25fb3JkZXJfY29tbWVudC4yJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dC5jbXRvcmRlci40JywgJ2ZlZWRfYnV0dG9uX29yZGVyX2NvbW1lbnQuMycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQuY210b3JkZXIuNScsICdmZWVkX2J1dHRvbl9vcmRlcl9jb21tZW50LjQnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5ub1RhZ0RpYWxvZycsICdmZWVkX2Rpc2FibGVfdGFnX2RpYWxvZycpOwogICAgICBydWxlKCd3ZWliby50b29sLmhpZ2hsaWdodF9sb3dfcmVhZGluZycsICdmZWVkX2xvd19yZWFkaW5nX3dhcm4nKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC53ZWlib19sYXJnZV9mb250JywgJ2ZlZWRfZm9udF9zaXplJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wud2VpYm9fbGFyZ2VfZm9udC5yYXRpbycsICdmZWVkX2ZvbnRfc2l6ZS5yYXRpbycpOwogICAgICBydWxlKCd3ZWliby50b29sLmF1dG9fdW5mb2xkX3dlaWJvJywgJ2ZlZWRfbG9uZ19leHBhbmQnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5hdXRvX3VuZm9sZF93ZWliby5jb3VudCcsICdmZWVkX2xvbmdfZXhwYW5kLmNvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuYXV0b191bmZvbGRfd2VpYm8uYnInLCAnZmVlZF9sb25nX2V4cGFuZC5icicpOwogICAgICBydWxlKCd3ZWliby50b29sLnVud3JhcENvbnRlbnQnLCAnZmVlZF9jb250ZW50X2xpbmVfYnJlYWsnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC51bndyYXBDb250ZW50LnRleHQnLCAnZmVlZF9jb250ZW50X2xpbmVfYnJlYWsudGV4dCcpOwogICAgICBydWxlKCd3ZWliby50b29sLnJlcGxhY2VfbGluaycsICdmZWVkX2xpbmtfdXNlX3VybCcpOwogICAgICBydWxlKCd3ZWliby50b29sLnJlcGxhY2VfaW1hZ2VfZW1vamknLCAnZmVlZF91bmljb2RlX2Vtb2ppJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd192b3RlX3Jlc3VsdCcsICdzaG93X3ZvdGVfcmVzdWx0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmN1c3RvbWl6ZV9zb3VyY2UnLCAnZmVlZF9ub19jdXN0b21fc291cmNlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudmlld09yaWdpbmFsJywgJ2ZlZWRfdmlld19vcmlnaW5hbCcpOwogICAgICBydWxlKCd3ZWliby50b29sLnZpZXdPcmlnaW5hbC5vcGVuJywgJ2ZlZWRfdmlld19vcmlnaW5hbC5vcGVuJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudmlld09yaWdpbmFsLmRpcmVjdCcsICdmZWVkX3ZpZXdfb3JpZ2luYWwuZGlyZWN0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuZG93bmxvYWRJbWFnZScsICdmZWVkX2Rvd25sb2FkX2ltYWdlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuZG93bmxvYWRJbWFnZS5kaXJlY3QnLCAnZmVlZF9kb3dubG9hZF9pbWFnZS5kaXJlY3QnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5wYXVzZV9hbmltYXRlZF9pbWFnZScsICdmZWVkX25vX2FuaW1hdGVkX2ltYWdlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudXNlX2J1aWx0X2luX3ZpZGVvX3BsYXllcicsICdmZWVkX2J1aWx0X2luX3ZpZGVvX3BsYXllcicpOwogICAgICBydWxlKCd3ZWliby50b29sLnVzZV9idWlsdF9pbl92aWRlb19wbGF5ZXIudm9sdW1lJywgJ2ZlZWRfYnVpbHRfaW5fdmlkZW9fcGxheWVyLnZvbHVtZScpOwogICAgICBydWxlKCd3ZWliby50b29sLnVzZV9idWlsdF9pbl92aWRlb19wbGF5ZXIubWVtb3JpemUnLCAnZmVlZF9idWlsdF9pbl92aWRlb19wbGF5ZXIubWVtb3JpemUnKTsKICAgIH0KICB9CgogIGltcG9ydGVyLmFkZFBhcnNlcihmdW5jdGlvbiB5YXdmKGRhdGFBcnJheUJ1ZmZlcikgewogICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpOwogICAgY29uc3QgdGV4dCA9IGRlY29kZXIuZGVjb2RlKGRhdGFBcnJheUJ1ZmZlcik7CiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSh0ZXh0KTsKICAgIGlmICghZGF0YS52ZXIgfHwgIWRhdGEueWF3ZiB8fCAhZGF0YS5jb25mKSB0aHJvdyBUeXBlRXJyb3IoKTsKICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBDb252ZXJ0ZXIoKS5jb252ZXJ0KGRhdGEuY29uZik7CiAgICByZXR1cm4geyBjb25maWcsIHNvdXJjZTogaTE4bi55YXdmU2NyaXB0U291cmNlIH07CiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvYWJvdXQvaW1wb3J0ZXIveWJqeGJmLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgaW1wb3J0ZXIgPSB5YXdmLmltcG9ydGVyOwoKICBpMThuLnlianhiZlNjcmlwdFNvdXJjZSA9IHsKICAgIGNuOiAn55y85LiN6KeB5b+D5LiN54OmJywKICAgIHR3OiAn55y85LiN6KaL5b+D5LiN54WpJywKICB9OwoKICBjbGFzcyBDb252ZXJ0ZXIgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZywgKCh2YWx1ZTogYW55KSA9PiAoeyBbdGFyZ2V0OiBzdHJpbmddOiBhbnkgfSkpW10+fSAqLwogICAgICB0aGlzLnJ1bGVzID0gbmV3IE1hcCgpOwogICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcsICgoKSA9PiAoeyBbdGFyZ2V0OiBzdHJpbmddOiB0cnVlIH0pKVtdPn0gKi8KICAgICAgdGhpcy5jbGVhbnMgPSBuZXcgTWFwKCk7CiAgICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZywgKChpdGVtczogQXJyYXk8YW55PikgPT4gKHsgW3RhcmdldDogc3RyaW5nXTogQXJyYXk8YW55PiB9KSlbXT59ICovCiAgICAgIHRoaXMuY29sbGVjdGlvbnMgPSBuZXcgTWFwKCk7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpOwogICAgfQogICAgY29udmVydCh3YnApIHsKICAgICAgY29uc3QgY29uZmlncyA9IHt9OwogICAgICB3YnAuaGlkZU1vZHM/LmZvckVhY2gobW9kID0+IHsKICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZ3MsIC4uLih0aGlzLmNsZWFucy5nZXQobW9kKSA/PyBbXSkubWFwKGNsZWFuID0+IGNsZWFuKCkgPz8ge30pKTsKICAgICAgfSk7CiAgICAgIE9iamVjdC5rZXlzKHdicCkuZm9yRWFjaChrZXkgPT4gewogICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlncywgLi4uKHRoaXMucnVsZXMuZ2V0KGtleSkgPz8gW10pLm1hcChydWxlID0+IHJ1bGUod2JwW2tleV0pID8/IHt9KSk7CiAgICAgIH0pOwogICAgICBPYmplY3Qua2V5cyh3YnApLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBpZiAoIXRoaXMuY29sbGVjdGlvbnMuaGFzKGtleSkpIHJldHVybjsKICAgICAgICB0aGlzLmNvbGxlY3Rpb25zLmdldChrZXkpPy5mb3JFYWNoKG1hcHBlciA9PiB7CiAgICAgICAgICBjb25zdCBjb25mID0gbWFwcGVyKHdicFtrZXldKTsKICAgICAgICAgIE9iamVjdC5rZXlzKGNvbmYpLmZvckVhY2goY2tleSA9PiB7CiAgICAgICAgICAgIGNvbmZpZ3NbY2tleV0gPSAoY29uZmlnc1tja2V5XSA/PyBbXSkuY29uY2F0KGNvbmZbY2tleV0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gY29uZmlnczsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIHsoaXRlbTogYW55KSA9PiBBcnJheTxhbnk+fSBtYXAKICAgICAqLwogICAgY29sbGVjdGlvbihzb3VyY2UsIHRhcmdldCwgbWFwKSB7CiAgICAgIGlmICghdGhpcy5jb2xsZWN0aW9ucy5oYXMoc291cmNlKSkgewogICAgICAgIHRoaXMuY29sbGVjdGlvbnMuc2V0KHNvdXJjZSwgW10pOwogICAgICB9CiAgICAgIHRoaXMuY29sbGVjdGlvbnMuZ2V0KHNvdXJjZSkucHVzaChpdGVtcyA9PiAoewogICAgICAgIFt0YXJnZXRdOiBpdGVtcy5tYXAoaXRlbSA9PiBtYXAoaXRlbSkpCiAgICAgICAgICAucmVkdWNlKChyZXN1bHQsIGFwcGVuZCkgPT4gcmVzdWx0LmNvbmNhdChhcHBlbmQpLCBbXSksCiAgICAgIH0pKTsKICAgIH0KICAgIHJ1bGUoc291cmNlLCB0YXJnZXQsIG1hcCkgewogICAgICBpZiAoIXRoaXMucnVsZXMuaGFzKHNvdXJjZSkpIHsKICAgICAgICB0aGlzLnJ1bGVzLnNldChzb3VyY2UsIFtdKTsKICAgICAgfQogICAgICBpZiAoIW1hcCkgewogICAgICAgIHRoaXMucnVsZXMuZ2V0KHNvdXJjZSkucHVzaCh2YWx1ZSA9PiB2YWx1ZSA/IHsgW3RhcmdldF06IHRydWUgfSA6IHt9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJ1bGVzLmdldChzb3VyY2UpLnB1c2godmFsdWUgPT4gewogICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWFwKHZhbHVlKTsKICAgICAgICAgIGlmIChyZXN1bHQgIT09IHZvaWQgMCkgcmV0dXJuIHsgW3RhcmdldF06IHJlc3VsdCB9OwogICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICBjbGVhbihzb3VyY2UsIHRhcmdldCkgewogICAgICBpZiAoIXRoaXMuY2xlYW5zLmhhcyhzb3VyY2UpKSB7CiAgICAgICAgdGhpcy5jbGVhbnMuc2V0KHNvdXJjZSwgW10pOwogICAgICB9CiAgICAgIHRoaXMuY2xlYW5zLmdldChzb3VyY2UpLnB1c2goKCkgPT4gKHsgW3RhcmdldF06IHRydWUgfSkpOwogICAgfQogICAgaW5pdGlhbGl6ZSgpIHsKICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuY29sbGVjdGlvbi5iaW5kKHRoaXMpOwogICAgICBjb25zdCBjbGVhbiA9IHRoaXMuY2xlYW4uYmluZCh0aGlzKTsKICAgICAgY29uc3QgcnVsZSA9IHRoaXMucnVsZS5iaW5kKHRoaXMpOwoKICAgICAgY29uc3Qga2V5d29yZE1hcHBlciA9IGtleXdvcmQgPT4gL15cLy4rXC8kfFwrLy50ZXN0KGtleXdvcmQpID8gW10gOiBba2V5d29yZF07CiAgICAgIGNvbnN0IHJlZ2V4TWFwcGVyID0ga2V5d29yZCA9PiB7CiAgICAgICAgaWYgKC9eXC8uK1wvJC8udGVzdChrZXl3b3JkKSkgdHJ5IHsKICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChrZXl3b3JkLnNsaWNlKDEsIC0xKSwgJ211Jyk7CiAgICAgICAgICByZXR1cm4gW3sgc291cmNlOiByZWdleC5zb3VyY2UsIGZsYWdzOiByZWdleC5mbGFncyB9XTsKICAgICAgICB9IGNhdGNoIChlKSB7IC8qIGlnbm9yZSAqLyB9IGVsc2UgaWYgKC9cKy8udGVzdChrZXl3b3JkKSkgewogICAgICAgICAgY29uc3Qgd29yZHMgPSBrZXl3b3JkLnNwbGl0KCcrJyk7CiAgICAgICAgICBjb25zdCByZWdleCA9IFJlZ0V4cCgnXicgKyB3b3Jkcy5tYXAocCA9PiBgKD89W1xcc1xcU10qJHtwLnJlcGxhY2UoLyhbLiorP14ke30oKXxbXF0vXFxdKS9nLCAnXFwkMScpfSlgKS5qb2luKCcnKSwgJ211Jyk7CiAgICAgICAgICByZXR1cm4gW3sgc291cmNlOiByZWdleC5zb3VyY2UsIGZsYWdzOiByZWdleC5mbGFncyB9XTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9OwogICAgICBjb25zdCB1c2VySWRNYXBwZXIgPSB1c2VySWQgPT4gW3sgaWQ6IHVzZXJJZCB9XTsKICAgICAgY29uc3QgdGV4dE1hcHBlciA9IHRleHQgPT4gW3RleHRdOwoKICAgICAgY29sbGVjdGlvbignd2hpdGVLZXl3b3JkcycsICdmaWx0ZXJfY29udGVudF90ZXh0X3Nob3cuaXRlbXMnLCBrZXl3b3JkTWFwcGVyKTsKICAgICAgY29sbGVjdGlvbignYmxhY2tLZXl3b3JkcycsICdmaWx0ZXJfY29udGVudF90ZXh0X2hpZGUuaXRlbXMnLCBrZXl3b3JkTWFwcGVyKTsKICAgICAgY29sbGVjdGlvbignZ3JheUtleXdvcmRzJywgJ2ZpbHRlcl9jb250ZW50X3RleHRfZm9sZC5pdGVtcycsIGtleXdvcmRNYXBwZXIpOwogICAgICBjb2xsZWN0aW9uKCd3aGl0ZUtleXdvcmRzJywgJ2ZpbHRlcl9jb250ZW50X3JlZ2V4X3Nob3cuaXRlbXMnLCByZWdleE1hcHBlcik7CiAgICAgIGNvbGxlY3Rpb24oJ2JsYWNrS2V5d29yZHMnLCAnZmlsdGVyX2NvbnRlbnRfcmVnZXhfaGlkZS5pdGVtcycsIHJlZ2V4TWFwcGVyKTsKICAgICAgY29sbGVjdGlvbignZ3JheUtleXdvcmRzJywgJ2ZpbHRlcl9jb250ZW50X3JlZ2V4X2ZvbGQuaXRlbXMnLCByZWdleE1hcHBlcik7CiAgICAgIGNvbGxlY3Rpb24oJ3VzZXJCbGFja2xpc3QnLCAnZmlsdGVyX2F1dGhvcl9pZF9oaWRlLml0ZW1zJywgdXNlcklkTWFwcGVyKTsKICAgICAgY29sbGVjdGlvbigndXNlckJsYWNrbGlzdCcsICdmaWx0ZXJfb3JpZ2luYWxfaWRfaGlkZS5pdGVtcycsIHVzZXJJZE1hcHBlcik7CiAgICAgIGNvbGxlY3Rpb24oJ3NvdXJjZUtleXdvcmRzJywgJ2ZpbHRlcl9zb3VyY2VfdGV4dF9oaWRlLml0ZW1zJywgdGV4dE1hcHBlcik7CiAgICAgIGNvbGxlY3Rpb24oJ3NvdXJjZUdyYXlLZXl3b3JkcycsICdmaWx0ZXJfc291cmNlX3RleHRfZm9sZC5pdGVtcycsIHRleHRNYXBwZXIpOwogICAgICBjb2xsZWN0aW9uKCdVUkxLZXl3b3JkcycsICdmaWx0ZXJfY29tbWVudF9uYW1lX3Nob3cuaXRlbXMnLCB0ZXh0TWFwcGVyKTsKCiAgICAgIHJ1bGUoJ2ZpbHRlck90aGVyc09ubHknLCAnZmlsdGVyX215X2ZlZWQnKTsKICAgICAgcnVsZSgnZmlsdGVyT3RoZXJzT25seScsICdmaWx0ZXJfbXlfb3JpZ2luYWwnKTsKICAgICAgcnVsZSgnZmlsdGVyUHJvbW90aW9ucycsICdmaWx0ZXJfYWRfZmVlZCcpOwogICAgICBydWxlKCdmaWx0ZXJIb3QnLCAnZmlsdGVyX2ZhbnNfdG9wJyk7CiAgICAgIHJ1bGUoJ2ZpbHRlclRhb2JhbycsICdmaWx0ZXJfdGJfdG1fZmVlZCcpOwogICAgICBydWxlKCdmaWx0ZXJEZWxldGVkJywgJ2ZpbHRlcl9kZWxldGVkX2ZvcndhcmQnKTsKICAgICAgcnVsZSgnZmlsdGVyRmxvb2QnLCAnd2VpYm8ub3RoZXIuc2FtZV9hY2NvdW50Jyk7CiAgICAgIHJ1bGUoJ21heEZsb29kJywgJ3dlaWJvLm90aGVyLnNhbWVfYWNjb3VudC5udW1iZXInLCBOdW1iZXIpOwogICAgICBydWxlKCdzaG93QWxsTXNnTmF2JywgJ2xheW91dF9sZWZ0X21lc3NhZ2VzJyk7CiAgICAgIHJ1bGUoJ3Nob3dBbGxHcm91cHMnLCAnbGF5b3V0X3NpZGVfc2hvd19hbGxfZ3JvdXBzJyk7CiAgICAgIHJ1bGUoJ25vSG9tZU1hcmdpbnMnLCAnbGF5b3V0X3NpZGVfbWVyZ2UnKTsKICAgICAgcnVsZSgnc2hvd0FsbFRleHQnLCAnZmVlZF9sb25nX2V4cGFuZCcpOwogICAgICBydWxlKCdzaG93QWxsQXJ0aWNsZVRleHQnLCAnc2hvd19hcnRpY2xlX3dpdGhvdXRfZm9sbG93Jyk7CiAgICAgIHJ1bGUoJ2RpcmVjdEFsbEZlZWRzJywgJ2ZpbHRlcl9wcm9maWxlX3Nob3dfYWxsJyk7CiAgICAgIHJ1bGUoJ2RpcmVjdEJpZ0ltZycsICdmZWVkX3ZpZXdfb3JpZ2luYWwnKTsKICAgICAgcnVsZSgnc3F1YXJlQXZhdGFyJywgJ2xheW91dF9hdmF0YXJfc2hhcGUnKTsKICAgICAgcnVsZSgnc2tpbklEJywgJ2xheW91dF90aGVtZV9hcHBseS5za2luJywgdmFsdWUgPT4gdmFsdWUpOwogICAgICBydWxlKCdvdmVycmlkZU15U2tpbicsICdsYXlvdXRfdGhlbWVfYXBwbHknKTsKICAgICAgcnVsZSgndW53cmFwVGV4dCcsICdmZWVkX2F1dGhvcl9jb250ZW50X25vd3JhcCcpOwogICAgICBydWxlKCdzbWFsbEltZ0xheW91dCcsICdmZWVkX3NtYWxsX2ltYWdlJyk7CiAgICAgIHJ1bGUoJ2NvbXBhY3RGZWVkVG9vbGJhcicsICdmZWVkX25vX3NwYWNlJyk7CiAgICAgIHJ1bGUoJ25vSG9tZU1hcmdpbnMnLCAnZmVlZF9ub19zcGFjZScpOwogICAgICBydWxlKCdtb3ZlU3JjVG9CdG0nLCAnZmVlZF9zb3VyY2VfYXRfYm90dG9tJyk7CiAgICAgIHJ1bGUoJ3Vud3JhcFRleHQnLCAnZmVlZF9hdXRob3JfY29udGVudF9ub3dyYXAnKTsKICAgICAgcnVsZSgnY3VzdG9tU3R5bGVzJywgJ2N1c3RvbV9jc3MnKTsKCiAgICAgIGNsZWFuKCdUaW1lbGluZU1vZHMnLCAnZmlsdGVyX2Zha2Vfd2VpYm8nKTsKICAgICAgY2xlYW4oJ0xldmVsJywgJ2NsZWFuX2ljb25zX2xldmVsJyk7CiAgICAgIGNsZWFuKCdNZW1iZXJJY29uJywgJ2NsZWFuX2ljb25zX21lbWJlcicpOwogICAgICBjbGVhbignVmVyaWZ5SWNvbicsICdjbGVhbl9pY29uc19hcHByb3ZlJyk7CiAgICAgIGNsZWFuKCdWZXJpZnlJY29uJywgJ2NsZWFuX2ljb25zX2FwcHJvdmVfY28nKTsKICAgICAgY2xlYW4oJ1ZlcmlmeUljb24nLCAnY2xlYW5faWNvbnNfYXBwcm92ZV9kZWFkJyk7CiAgICAgIGNsZWFuKCdEYXJlbkljb24nLCAnY2xlYW5faWNvbnNfY2x1YicpOwogICAgICBjbGVhbignVmdpcmxJY29uJywgJ2NsZWFuX2ljb25zX3ZfZ2lybCcpOwogICAgICBjbGVhbignVGFvYmFvSWNvbicsICdjbGVhbl9pY29uc190YW9iYW8nKTsKICAgICAgY2xlYW4oJ0dvbmd5aUljb24nLCAnY2xlYW5faWNvbnNfZ29uZ3lpJyk7CiAgICAgIGNsZWFuKCdQYWlJY29uJywgJ2NsZWFuX2ljb25zX290aGVycycpOwogICAgICBjbGVhbignSG90U2VhcmNoJywgJ2NsZWFuX25hdl9ob3Rfc2VhcmNoJyk7CiAgICAgIGNsZWFuKCdIb3RXZWlibycsICdjbGVhbl9sZWZ0X2hvdCcpOwogICAgICBjbGVhbignRnJpZW5kcycsICdjbGVhbl9sZWZ0X2ZyaWVuZHMnKTsKICAgICAgY2xlYW4oJ1RvTWUnLCAnY2xlYW5fbGVmdF9ncm91cF90b19tZScpOwogICAgICBjbGVhbignUmVjb21tZW5kZWRUb3BpYycsICdjbGVhbl9taWRkbGVfcmVjb21tZW5kZWRfdG9waWMnKTsKICAgICAgY2xlYW4oJ1JlY29tRmVlZCcsICdjbGVhbl9taWRkbGVfZmVlZF9yZWNvbW1lbmQnKTsKICAgICAgY2xlYW4oJ01lbWJlclRpcCcsICdjbGVhbl9taWRkbGVfbWVtYmVyX3RpcCcpOwogICAgICBjbGVhbignTXVzaWNSZWNvbScsICdjbGVhbl9yaWdodF9yYW5rcycpOwogICAgICBjbGVhbignVG9waWMnLCAnY2xlYW5fcmlnaHRfaG90X3RvcGljJyk7CiAgICAgIGNsZWFuKCdNZW1iZXInLCAnY2xlYW5fcmlnaHRfbWVtYmVyJyk7CiAgICAgIGNsZWFuKCdIb25nYmFvJywgJ2NsZWFuX3JpZ2h0X2hvbmdiYW9fcmFuaycpOwogICAgICBjbGVhbignTW92aWVSZWNvbScsICdjbGVhbl9yaWdodF9tZW1iZXInKTsKICAgICAgY2xlYW4oJ0F0dEZlZWQnLCAnY2xlYW5fcmlnaHRfYXR0X2ZlZWQnKTsKICAgICAgY2xlYW4oJ05vdGljZScsICdjbGVhbl9yaWdodF9ub3RpY2UnKTsKICAgICAgY2xlYW4oJ1JlY29tRmVlZCcsICdjbGVhbl9mZWVkX3JlY29tbWVuZCcpOwogICAgICBjbGVhbignQ29tbWVudFRpcCcsICdjbGVhbl9mZWVkX2ZlZWRfdGlwJyk7CiAgICAgIGNsZWFuKCdNZW1iZXJDb3ZlcicsICdjbGVhbl9mZWVkX3ZpcF9iYWNrZ3JvdW5kJyk7CiAgICAgIGNsZWFuKCdUb3BpY0NhcmQnLCAnY2xlYW5fZmVlZF9jYXJkJyk7CiAgICAgIGNsZWFuKCdMb2NhdGlvbkNhcmQnLCAnY2xlYW5fZmVlZF9jYXJkJyk7CiAgICAgIGNsZWFuKCdQcm9mQ292ZXInLCAnY2xlYW5fcHJvZmlsZV9jb3ZlcicpOwogICAgICBjbGVhbignUHJvZlN0YXRzJywgJ2NsZWFuX3Byb2ZpbGVfc3RhdHMnKTsKICAgICAgY2xlYW4oJ1JlbGF0aW9uJywgJ2NsZWFuX3Byb2ZpbGVfcmVsYXRpb24nKTsKICAgICAgY2xlYW4oJ0FsYnVtJywgJ2NsZWFuX3Byb2ZpbGVfYWxidW0nKTsKICAgICAgY2xlYW4oJ0FkcycsICdjbGVhbl9vdGhlcl9hZHMnKTsKICAgICAgY2xlYW4oJ011c2ljUGxheWVyJywgJ2NsZWFuX290aGVyX211c2ljJyk7CiAgICAgIGNsZWFuKCdGb290ZXInLCAnY2xlYW5fb3RoZXJfZm9vdGVyJyk7CiAgICAgIGNsZWFuKCdGZWVkUmVjb20nLCAnY2xlYW5fb3RoZXJfcmVsYXRlZF9mZWVkcycpOwogICAgICBjbGVhbignRmVlZFJlY29tJywgJ2NsZWFuX290aGVyX3JlbGF0ZWRfdmlkZW8nKTsKICAgICAgY2xlYW4oJ0lNTmV3cycsICdjbGVhbl9vdGhlcl9pbV9uZXdzJyk7CiAgICB9CiAgfQoKICBjb25zdCBjb252ZXJ0RGF0YSA9IGRhdGEgPT4gewogICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEuaGlkZU1vZHMpKSB0aHJvdyBUeXBlRXJyb3IoKTsKICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBDb252ZXJ0ZXIoKS5jb252ZXJ0KGRhdGEpOwogICAgcmV0dXJuIHsgY29uZmlnLCBzb3VyY2U6IGkxOG4ueWJqeGJmU2NyaXB0U291cmNlIH07CiAgfTsKCiAgaW1wb3J0ZXIuYWRkUGFyc2VyKGZ1bmN0aW9uIHlianhiZihkYXRhQXJyYXlCdWZmZXIpIHsKICAgIGxldCB0ZXh0ID0gbnVsbDsKICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTsKICAgIHRleHQgPSBkZWNvZGVyLmRlY29kZShkYXRhQXJyYXlCdWZmZXIpOwogICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UodGV4dCk7CiAgICByZXR1cm4gY29udmVydERhdGEoZGF0YSk7CiAgfSk7CgogIGltcG9ydGVyLnlianhiZkNvbnZlcnQgPSBkYXRhID0+IHsKICAgIHJldHVybiBjb252ZXJ0RGF0YShkYXRhKTsKICB9OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2Fib3V0L2V4cG9ydC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IGJyb3dzZXIgPSB3aW5kb3cud2VCcm93c2VyOwogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3QgZG93bmxvYWQgPSB5YXdmLmRvd25sb2FkOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgaW1wb3J0ZXIgPSB5YXdmLmltcG9ydGVyOwoKICBjb25zdCB1aSA9IHV0aWwudWk7CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIGNvbnN0IGFib3V0ID0geWF3Zi5ydWxlcy5hYm91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBpMThuLmJhY2t1cEdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+WvvOWFpSAvIOWvvOWHuicsCiAgICB0dzogJ+WMr+WFpSAvIOWMr+WHuicsCiAgICBlbjogJ0ltcG9ydCAvIEV4cG9ydCcsCiAgfTsKCiAgY29uc3QgYmFja3VwID0gYWJvdXQuYmFja3VwID0ge307CiAgYmFja3VwLmJhY2t1cCA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBhYm91dC5hYm91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmJhY2t1cEdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uYmFja3VwVGV4dCA9IHsKICAgIGNuOiAn5aSH5Lu95ZKM5oGi5aSN6K6+572u77yI5pqC5LiN5pSv5oyB5a+85YWl6ISa5pys54mI6K6+572u77yJfHx7e2J1dHRvbnN9fScsCiAgICB0dzogJ+WCmeS7veWSjOaBouW+qeioreWumu+8iOaaq+S4jeaUr+aMgeWMr+WFpeiFs+acrOeJiOioreWumu+8iXx8e3tidXR0b25zfX0nLAogICAgZW46ICdCYWNrdXAgYW5kIFJlY292ZXJ5IChDYW5ub3QgbG9hZCBzZXR0aW5ncyBmcm9tIHNjcmlwdCB2ZXJzaW9uKXx8e3tidXR0b25zfX0nLAogIH07CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY29uZmlnSW1wb3J0QnV0dG9uOiB7IGNuOiAn5a+85YWlJywgdHc6ICfljK/lhaUnLCBlbjogJ0ltcG9ydCcgfSwKICAgIGNvbmZpZ0ltcG9ydFdhcm5pbmdUaXRsZTogeyBjbjogJ+iuvue9ruWvvOWFpScsIHR3OiAn6Kit5a6a5Yyv5YWlJywgZW46ICdTZXR0aW5nIEltcG9ydCcgfSwKICAgIGNvbmZpZ0ltcG9ydFdhcm5pbmc6IHsKICAgICAgY246ICflr7zlhaXnmoTorr7nva7kvJropobnm5bmgqjlvZPliY3lt7LmnInnmoTorr7nva7vvIznoa7lrp7opoHlr7zlhaXorr7nva7lkJfvvJ8nLAogICAgICB0dzogJ+WMr+WFpeeahOioreWumuacg+imhuiTi+aCqOeVtuWJjeW3suacieeahOioreWumu+8jOaCqOeiuuWumuimgeWMr+WFpeioreWumuWXju+8nycsCiAgICAgIGVuOiAnVGhlIGltcG9ydGVkIHNldHRpbmdzIG1heSByZXBsYWNlIHlvdXIgY3VycmVudCBzZXR0aW5ncy4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGltcG9ydCB0aGlzIGZpbGU/JywKICAgIH0sCiAgICBjb25maWdJbXBvcnRXYXJuaW5nRXh0ZXJuYWw6IHsKICAgICAgY246ICfmgqjmraPlnKjlr7zlhaXmnaXoh6rigJx7feKAneeahOiuvue9ru+8jOWvvOWFpeW3peWFt+S8muWwvemHj+WwhuaCqOeahOiuvue9rui9rOaNouS4uuacrOaJqeWxleaUr+aMgeeahOWKn+iDve+8jOS9huWunumZheaViOaenOS7jeS8muacieaJgOS4jeWQjOOAguWvvOWFpeWQjuW7uuiuruaCqOaJk+W8gOaJqeWxleeahOiuvue9ruWkjeafpeWQhOmhueiuvue9ruOAguWvvOWFpeeahOiuvue9ruS8muimhuebluaCqOW9k+WJjeW3suacieeahOiuvue9ru+8jOehruWunuimgeWvvOWFpeiuvue9ruWQl++8nycsCiAgICAgIHR3OiAn5oKo5q2j6Kmm5ZyW5Yyv5YWl5L6G6Ieq5pa844CMe33jgI3nmoToqK3lrprvvIzljK/lhaXlt6XlhbfmnIPnm6Hlj6/og73lsIfmgqjnmoToqK3lrprovYnmj5vngrrmnKzmk7TlhYXlpZfku7bmlK/mj7TnmoTlip/og73vvIzkvYblr6bpmpvmlYjmnpzku43mnIPmnInmiYDkuI3lkIzjgILln7fooYzljK/lhaXlvozvvIzlu7rorbDmgqjmiZPplovoqK3lrprmlrnloYrmiYvlt6XopIfmn6XjgILljK/lhaXnmoToqK3lrprmnIPopobok4vmgqjnlbbliY3lt7LmnInnmoToqK3lrprvvIzmgqjnorrlrpropoHljK/lhaXoqK3lrprll47vvJ8nLAogICAgICBlbjogJ1lvdSBhcmUgdHJ5aW5nIHRvIGltcG9ydCBzZXR0aW5ncyBmcm9tICJ7fSIuIEltcG9ydGluZyB0b29sIHdpbGwgdHJ5IGl0cyBiZXN0IHRvIGNvbnZlcnQgeW91ciBzZXR0aW5ncyB0byB3aGF0IHRoaXMgZXh0ZW5zaW9uIHN1cHBvcnRlZC4gQW5kIGR1ZSB0byB0aGUgbGltaXRhdGlvbiwgc29tZSBmZWF0dXJlcyBtYXkgbm90IHdvcmsgYXMgeW91ciBleHBlY3QuIFJlbWVtYmVyIHRvIHJlY2hlY2sgdGhlIHNldHRpbmdzIGFmdGVyIGltcG9ydGluZy4gVGhlIGltcG9ydGVkIHNldHRpbmdzIG1heSByZXBsYWNlIHlvdXIgY3VycmVudCBzZXR0aW5ncy4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGltcG9ydCB0aGlzIGZpbGU/JywKICAgIH0sCiAgICBjb25maWdJbXBvcnRTdWNjZXNzVGl0bGU6IHsgY246ICforr7nva7lr7zlhaXlrozmiJAnLCB0dzogJ+ioreWumuWMr+WFpeWujOaIkCcsIGVuOiAnSW1wb3J0IHNldHRpbmdzIGNvbXBsZXRlZCcgfSwKICAgIGNvbmZpZ0ltcG9ydFN1Y2Nlc3M6IHsgY246ICflt7Lnu4/miJDlip/lnLDlr7zlhaXkuoborr7nva4nLCB0dzogJ+W3sue7j+aIkOWKn+WcsOWMr+WFpeS6huioreWumicsIGVuOiAnU3VjY2Vzc2Z1bGx5IGltcG9ydGVkIHNldHRpbmdzJyB9LAogICAgY29uZmlnSW1wb3J0RmFpbFRpdGxlOiB7IGNuOiAn6K6+572u5a+85YWl5aSx6LSlJywgdHc6ICfoqK3lrprljK/lhaXlpLHotKUnLCBlbjogJ0ltcG9ydCBzZXR0aW5ncyBmYWlsZWQnIH0sCiAgICBjb25maWdJbXBvcnRGYWlsOiB7CiAgICAgIGNuOiAn5a+85YWl6K6+572u5paH5Lu25pe25Ye6546w6ZSZ6K+v77yM5Y+v6IO95piv5L2/55So5LqG6ZSZ6K+v55qE5paH5Lu277yM5paH5Lu25bey5o2f5Z2P5oiW5paH5Lu255qE54mI5pys5LiN5pSv5oyBJywKICAgICAgdHc6ICfljK/lhaXoqK3lrprmqpTmoYjmmYLlh7rnj77pjK/oqqTvvIzlj6/og73mmK/kvb/nlKjkuobpjK/oqqTnmoTmqpTmoYjvvIzmqpTmoYjlt7LmkI3lo57miJbngrrkuI3mlK/mj7TnmoTniYjmnKwnLAogICAgICBlbjogJ0Vycm9yIG9jY3VycmVkIGR1cmluZyBpbXBvcnRpbmcgcHJvY2Vzcy4gV3JvbmcgZmlsZSBtYXkgYmUgdXNlZCwgdGhlIGZpbGUgbWF5IGJlIGJyb2tlbiwgb3IgdGhlIHZlcnNpb24gb2Ygc2V0dGluZyBmaWxlIG1heSBub3QgYmUgc3VwcG9ydGVkLicsCiAgICB9LAogICAgY29uZmlnRXhwb3J0QnV0dG9uOiB7IGNuOiAn5a+85Ye6JywgdHc6ICfljK/lh7onLCBlbjogJ0V4cG9ydCcgfSwKICAgIGNvbmZpZ1Jlc2V0QnV0dG9uOiB7IGNuOiAn6YeN572uJywgdHc6ICfph43oqK0nLCBlbjogJ1Jlc2V0JyB9LAogICAgY29uZmlnUmVzZXRXYXJuaW5nVGl0bGU6IHsgY246ICforr7nva7ph43nva4nLCB0dzogJ+ioreWumumHjeiorScsIGVuOiAnU2V0dGluZyBSZXNldCcgfSwKICAgIGNvbmZpZ1Jlc2V0V2FybmluZzogewogICAgICBjbjogJ+i/meWwhuS8mua4heepuuaCqOW9k+WJjeeahOaJgOaciemFjee9ru+8jOS5i+WJjeajgOafpeWSjOWkh+S7veeahOWFs+azqOWIl+ihqOOAgeaJi+WKqOmakOiXj+eahOW+ruWNmue8luWPt+etieS4jeS8muWPl+WIsOW9seWTjeOAguehruWunuimgemHjee9ruiuvue9ruWQl++8nycsCiAgICAgIHR3OiAn6YCZ5bCH5pyD5riF56m65oKo55W25YmN55qE5omA5pyJ6Kit5a6a77yM5LmL5YmN5qqi5p+l5ZKM5YKZ5Lu955qE6Zec5rOo5riF5Zau44CB5omL5YuV6Zqx6JeP55qE5b6u5Y2a57eo6Jmf562J5LiN5pyD5Y+X5Yiw5b2x6Z+/44CC5oKo56K65a6a6KaB6YeN572u6Kit5a6a5ZeO77yfJywKICAgICAgZW46ICdZb3UgYXJlIGRlbGV0aW5nIGFsbCB5b3VyIHNldHRpbmdzLiBGb2xsb3dpbmcgbGlzdCwgZmVlZHMgaGlkZGVuIG1hbnVhbGx5IHdpbGwgYmUga2VwdCBhcyBpcy4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlc2V0IHlvdXIgc2V0dGluZ3M/JywKICAgIH0sCiAgICBjb25maWdGaWxlbmFtZTogewogICAgICBjbjogJ+iNr+aWueiuvue9ricsCiAgICAgIHR3OiAn6Jel5pa56Kit5a6aJywKICAgICAgZW46ICd5YW9mYW5nLWNvbmZpZycsCiAgICB9LAogICAgY29uZmlnSW1wb3J0V2JwQnV0dG9uOiB7CiAgICAgIGNuOiAn5LuO4oCc55y85LiN6KeB5b+D5LiN54Om4oCd5a+85YWlJywKICAgICAgdHc6ICflvp7jgIznnLzkuI3opovlv4PkuI3nhanjgI3ljK/lhaUnLAogICAgICBlbjogJ0ltcG9ydCBmcm9tICLnnLzkuI3op4Hlv4PkuI3ng6YiJywKICAgIH0sCiAgfSk7CgogIGxldCB3YnBDb25maWcgPSBudWxsOwoKICBiYWNrdXAuaW1wb3J0RXhwb3J0ID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdzY3JpcHRfaW1wb3J0X2V4cG9ydCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBiYWNrdXAuYmFja3VwLAogICAgcmVuZGVyKCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ3lhd2YtY29uZmlnLWl0ZW0geWF3Zi1jb25maWctcnVsZSc7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxsYWJlbD48aW5wdXQgdHlwZT0iZmlsZSIgc3R5bGU9IiB3aWR0aDogMXB4OyBoZWlnaHQ6IDFweDsgbWFyZ2luOiAwIC0xcHggMCAwOyBvcGFjaXR5OiAwOyIgLz48c3BhbiBjbGFzcz0iV19idG5fYiB5YXdmLWltcG9ydCIgc3R5bGU9ImN1cnNvcjogcG9pbnRlciI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9zcGFuPjwvbGFiZWw+PGEgY2xhc3M9IldfYnRuX2IgeWF3Zi1leHBvcnQiIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9hPjxhIGNsYXNzPSJXX2J0bl9iIHlhd2YtcmVzZXQiIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9hPic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8aW5wdXQgdHlwZT0iZmlsZSIgc3R5bGU9IiB3aWR0aDogMXB4OyBoZWlnaHQ6IDFweDsgbWFyZ2luOiAwIC0xcHggMCAwOyBvcGFjaXR5OiAwOyIgLz48YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1mbGF0IHdvby1idXR0b24tcHJpbWFyeSB3b28tYnV0dG9uLXMgd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLWltcG9ydCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24td3JhcCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24tY29udGVudCI+PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1mbGF0IHdvby1idXR0b24tcHJpbWFyeSB3b28tYnV0dG9uLXMgd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLWV4cG9ydCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24td3JhcCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24tY29udGVudCI+PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1mbGF0IHdvby1idXR0b24tcHJpbWFyeSB3b28tYnV0dG9uLXMgd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLXJlc2V0Ij48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi13cmFwIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi1jb250ZW50Ij48L3NwYW4+PC9zcGFuPjwvYnV0dG9uPic7CiAgICAgIH0KICAgICAgY29uc3QgaW1wb3J0SW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignaW5wdXQnKTsKICAgICAgY29uc3QgaW1wb3J0QnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWltcG9ydCcpOwogICAgICBjb25zdCBleHBvcnRCdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZXhwb3J0Jyk7CiAgICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLXJlc2V0Jyk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBpbXBvcnRCdXR0b24ucXVlcnlTZWxlY3RvcignLldfZjE0JykudGV4dENvbnRlbnQgPSBpMThuLmNvbmZpZ0ltcG9ydEJ1dHRvbjsKICAgICAgICBleHBvcnRCdXR0b24ucXVlcnlTZWxlY3RvcignLldfZjE0JykudGV4dENvbnRlbnQgPSBpMThuLmNvbmZpZ0V4cG9ydEJ1dHRvbjsKICAgICAgICByZXNldEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuV19mMTQnKS50ZXh0Q29udGVudCA9IGkxOG4uY29uZmlnUmVzZXRCdXR0b247CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW1wb3J0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy53b28tYnV0dG9uLWNvbnRlbnQnKS50ZXh0Q29udGVudCA9IGkxOG4uY29uZmlnSW1wb3J0QnV0dG9uOwogICAgICAgIGV4cG9ydEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcud29vLWJ1dHRvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpMThuLmNvbmZpZ0V4cG9ydEJ1dHRvbjsKICAgICAgICByZXNldEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcud29vLWJ1dHRvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpMThuLmNvbmZpZ1Jlc2V0QnV0dG9uOwogICAgICB9CiAgICAgIGNvbnN0IHJlYWRGaWxlID0gYXN5bmMgZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICBpZiAoZmlsZS5zaXplID4gKDEgPDwgMjQpKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigpOwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBjb25zdCBpbXBvcnREYXRhID0gYXN5bmMgZnVuY3Rpb24gKHsgY29uZmlnLCBzb3VyY2UgfSkgewogICAgICAgIGlmICghY29uZmlnKSB7CiAgICAgICAgICB1aS5hbGVydCh7CiAgICAgICAgICAgIGlkOiAneWF3Zi1pbXBvcnQtZmFpbGVkJywKICAgICAgICAgICAgaWNvbjogJ3dhcm4nLAogICAgICAgICAgICB0aXRsZTogaTE4bi5jb25maWdJbXBvcnRGYWlsVGl0bGUsCiAgICAgICAgICAgIHRleHQ6IGkxOG4uY29uZmlnSW1wb3J0RmFpbCwKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb25maXJtQW5zd2VyID0gYXdhaXQgdWkuY29uZmlybSh7CiAgICAgICAgICBpZDogJ3lhd2YtaW1wb3J0LWNvbmZpcm0nLAogICAgICAgICAgdGl0bGU6IGkxOG4uY29uZmlnSW1wb3J0V2FybmluZ1RpdGxlLAogICAgICAgICAgdGV4dDogc291cmNlID8KICAgICAgICAgICAgaTE4bi5jb25maWdJbXBvcnRXYXJuaW5nRXh0ZXJuYWwucmVwbGFjZSgne30nLCAoKSA9PiBzb3VyY2UpIDoKICAgICAgICAgICAgaTE4bi5jb25maWdJbXBvcnRXYXJuaW5nLAogICAgICAgIH0pOwogICAgICAgIGlmICghY29uZmlybUFuc3dlcikgcmV0dXJuOwogICAgICAgIGF3YWl0IHJ1bGUuY29uZmlnUG9vbC5pbXBvcnRDb25maWcoY29uZmlnKTsKICAgICAgICBhd2FpdCB1aS5hbGVydCh7CiAgICAgICAgICBpZDogJ3lhd2YtaW1wb3J0LXN1Y2Nlc3MnLAogICAgICAgICAgaWNvbjogJ3N1Y2MnLAogICAgICAgICAgdGl0bGU6IGkxOG4uY29uZmlnSW1wb3J0U3VjY2Vzc1RpdGxlLAogICAgICAgICAgdGV4dDogaTE4bi5jb25maWdJbXBvcnRTdWNjZXNzLAogICAgICAgIH0pOwogICAgICAgIGFib3V0LnVwZGF0ZS53aGF0c05ldy5leGVjdXRlKCk7CiAgICAgIH07CiAgICAgIGltcG9ydElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBmaWxlID0gaW1wb3J0SW5wdXQuZmlsZXNbMF07CiAgICAgICAgaW1wb3J0SW5wdXQudmFsdWUgPSBudWxsOwogICAgICAgIGxldCBjb25maWcgPSBudWxsLCBzb3VyY2UgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHJlYWRGaWxlKGZpbGUpOwogICAgICAgICAgKHsgY29uZmlnLCBzb3VyY2UgfSA9IGltcG9ydGVyLnBhcnNlKGZpbGVDb250ZW50KSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLy8g6K+75Y+W5paH5Lu25aSx6LSl77yM5Zyo5LiL6Z2i5oql6ZSZCiAgICAgICAgfQogICAgICAgIGltcG9ydERhdGEoeyBjb25maWcsIHNvdXJjZSB9KTsKICAgICAgfSk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgICBpbXBvcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICBpbXBvcnRJbnB1dC5jbGljaygpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGV4cG9ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoZXhwb3J0QnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygneWF3Zi1leHBvcnQtYnVzeScpKSByZXR1cm47CiAgICAgICAgZXhwb3J0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3lhd2YtZXhwb3J0LWJ1c3knKTsKICAgICAgICBjb25zdCBjb25maWcgPSBydWxlLmNvbmZpZ1Bvb2wuZXhwb3J0KCk7CiAgICAgICAgY29uc3QgeyBuYW1lLCB2ZXJzaW9uIH0gPSBicm93c2VyLnJ1bnRpbWUuZ2V0TWFuaWZlc3QoKTsKICAgICAgICBjb25zdCBbbWFqb3IsIG1pbm9yLCBtaWNyb10gPSB2ZXJzaW9uLnNwbGl0KCcuJyk7CiAgICAgICAgLy8g6ISa5pys54mI55So55qE5pivIHlhd2YsIGNvbmYsIHZlcu+8jOaNouS4gOWll+mUruWAvOWPr+S7peWMuuWIhueJiOacrOS7peWPiumBv+WFjeiiq+S4jeaUr+aMgeeahOiEmuacrOeJiOWvvOWFpQogICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICB5YW9mYW5nOiBuYW1lLAogICAgICAgICAgdmVyc2lvbjogeyBtYWpvciwgbWlub3IsIG1pY3JvIH0sCiAgICAgICAgICB1c2VyQWdlbnQ6IG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgICAgICBjb25maWcsCiAgICAgICAgfTsKICAgICAgICBjb25zdCB0ZXh0ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt0ZXh0XSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7CiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPyBpbml0LnBhZ2UuJENPTkZJRy5uaWNrIDogaW5pdC5wYWdlLmNvbmZpZy51c2VyLnNjcmVlbl9uYW1lOwogICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgIGNvbnN0IGRhdGVTdHIgPSBkYXRlLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvLXxULiovZywgJycpOwogICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZG93bmxvYWQuZmlsZW5hbWUoYCR7dXNlcm5hbWV9LSR7aTE4bi5jb25maWdGaWxlbmFtZX0tJHtkYXRlU3RyfS5qc29uYCk7CiAgICAgICAgY29uc3QgZmluaXNoRG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBleHBvcnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi1leHBvcnQtYnVzeScpOwogICAgICAgIH07CiAgICAgICAgZG93bmxvYWQuYmxvYih7IGJsb2IsIGZpbGVuYW1lIH0pLnRoZW4oZG93bmxvYWQgPT4gewogICAgICAgICAgaWYgKCFkb3dubG9hZD8uc2hvdykgewogICAgICAgICAgICBmaW5pc2hEb3dubG9hZCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgZG93bmxvYWQuc2hvdygpOwogICAgICAgICAgICAgIGZpbmlzaERvd25sb2FkKCk7CiAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgZmluaXNoRG93bmxvYWQpOwogICAgICB9KTsKICAgICAgcmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBldmVudCA9PiB7CiAgICAgICAgY29uc3QgY29uZmlybUFuc3dlciA9IGF3YWl0IHVpLmNvbmZpcm0oewogICAgICAgICAgaWQ6ICd5YXdmLXJlc2V0LWNvbmZpcm0nLAogICAgICAgICAgdGl0bGU6IGkxOG4uY29uZmlnUmVzZXRXYXJuaW5nVGl0bGUsCiAgICAgICAgICB0ZXh0OiBpMThuLmNvbmZpZ1Jlc2V0V2FybmluZywKICAgICAgICB9KTsKICAgICAgICBpZiAoIWNvbmZpcm1BbnN3ZXIpIHJldHVybjsKICAgICAgICBhd2FpdCBydWxlLmNvbmZpZ1Bvb2wucmVzZXQoKTsKICAgICAgICBhYm91dC51cGRhdGUud2hhdHNOZXcuZXhlY3V0ZSgpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KTsKICAgICAgaWYgKHdicENvbmZpZykgdHJ5IHsKICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPGEgY2xhc3M9IldfYnRuX2IgeWF3Zi1pbXBvcnQtd2JwIiBocmVmPSJqYXZhc2NyaXB0OjsiPjxzcGFuIGNsYXNzPSJXX2YxNCI+PC9zcGFuPjwvYT4nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3cmFwLmlubmVySFRNTCA9ICc8YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1mbGF0IHdvby1idXR0b24tcHJpbWFyeSB3b28tYnV0dG9uLXMgd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLWltcG9ydC13YnAiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLXdyYXAiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLWNvbnRlbnQiPjwvc3Bhbj48L3NwYW4+PC9idXR0b24+JzsKICAgICAgICB9CiAgICAgICAgY29uc3QgaW1wb3J0V2JwQnV0dG9uID0gd3JhcC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1pbXBvcnQtd2JwJyk7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgaW1wb3J0V2JwQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5XX2YxNCcpLnRleHRDb250ZW50ID0gaTE4bi5jb25maWdJbXBvcnRXYnBCdXR0b247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGltcG9ydFdicEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcud29vLWJ1dHRvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpMThuLmNvbmZpZ0ltcG9ydFdicEJ1dHRvbjsKICAgICAgICB9CiAgICAgICAgaW1wb3J0V2JwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgaW1wb3J0RGF0YSh3YnBDb25maWcpOwogICAgICAgIH0pOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmQoLi4ud3JhcC5jaGlsZE5vZGVzKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8vIOS8vOS5juS4jeiDveWvvOWFpe+8jOmCo+WwseS4jeeuoeS7luS6hgogICAgICB9CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9LAogIH0pOwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtZXhwb3J0LCAueWF3Zi1yZXNldCwgLnlhd2YtaW1wb3J0LXdicCB7IG1hcmdpbi1sZWZ0OiAxMHB4OyB9Ci55YXdmLWV4cG9ydC1idXN5IHsgY3Vyc29yOiBwcm9ncmVzczsgfQpgKTsKCiAgOyAoZnVuY3Rpb24gKCkgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2JwUG9zdCcsIGZ1bmN0aW9uIGdldERhdGEoZXZlbnQpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kZXRhaWwuc2xpY2UoZXZlbnQuZGV0YWlsLmluZGV4T2YoJz0nKSArIDEpKTsKICAgICAgICB3YnBDb25maWcgPSBpbXBvcnRlci55Ymp4YmZDb252ZXJ0KGRhdGEpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8g5Y+v6IO95piv5pWw5o2u5o2f5Z2P77yM5oC75LmL5LiN566h5LuWCiAgICAgIH0KICAgIH0pOwogIH0oKSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIGN1c3RvbSBpbXBsZW1lbnRhdGlvbiBjbGVhbiBvbGQKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwoKICBjb25zdCB1aSA9IHV0aWwudWk7CgogIGNvbnN0IGFib3V0ID0geWF3Zi5ydWxlcy5hYm91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgYmFja3VwID0gYWJvdXQuYmFja3VwOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNvbmZpZ0NsZWFuVjNCdXR0b246IHsKICAgICAgY246ICfmuIXnkIbml6fniYjmlbDmja4nLAogICAgICB0dzogJ+a4heeQhuiIiueJiOizh+aWmScsCiAgICAgIGVuOiAnT2xkIHZlcnNpb24gZGF0YSBjbGVhbiB1cCcsCiAgICB9LAogICAgY29uZmlnQ2xlYW5WM1RpdGxlOiB7CiAgICAgIGNuOiAn5riF55CG5pen54mI5pWw5o2uJywKICAgICAgdHc6ICfmuIXnkIboiIrniYjos4fmlpknLAogICAgICBlbjogJ09sZCB2ZXJzaW9uIGRhdGEgY2xlYW4gdXAnLAogICAgfSwKICAgIGNvbmZpZ0NsZWFuVjNUZXh0OiB7CiAgICAgIGNuOiAn5oKo5bCG6KaB5Yig6Zmk5omA5pyJ5pen54mI5pWw5o2u77yM6K+l5pON5L2c5peg5rOV5pKk5raI44CC56Gu5a6a6KaB5Yig6Zmk5ZCX77yfJywKICAgICAgdHc6ICfmgqjlsIfopoHliKrpmaTmiYDmnInoiIrniYjos4fmlpnvvIzoqbLli5XkvZznhKHms5Xlvqnljp/jgILmgqjnorrlrpropoHliKrpmaTll47vvJ8nLAogICAgICBlbjogJ1lvdSBhcmUgZ29pbmcgdG8gZGVsZXRlIGFsbCBvbGQgZGF0YS4gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG8uIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGU/JywKICAgIH0sCiAgfSk7CgogIDsgKGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IGtleXMgPSAoYXdhaXQgR00ubGlzdFZhbHVlcygpKS5maWx0ZXIoa2V5ID0+ICEvc3luYzo6fGxvY2FsOjovLnRlc3Qoa2V5KSk7CiAgICBpZiAoIWtleXMubGVuZ3RoKSByZXR1cm47CiAgICBiYWNrdXAuY2xlYW5WMyA9IHJ1bGUuUnVsZSh7CiAgICAgIGlkOiAnc2NyaXB0X2NsZWFuX3YzJywKICAgICAgdmVyc2lvbjogMSwKICAgICAgcGFyZW50OiBiYWNrdXAuYmFja3VwLAogICAgICByZW5kZXIoKSB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAneWF3Zi1jb25maWctaXRlbSB5YXdmLWNvbmZpZy1ydWxlJzsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxhIGNsYXNzPSJXX2J0bl9iIHlhd2YtY2xlYW4tdjMiIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9hPic7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGJ1dHRvbiBjbGFzcz0id29vLWJ1dHRvbi1tYWluIHdvby1idXR0b24tZmxhdCB3b28tYnV0dG9uLXByaW1hcnkgd29vLWJ1dHRvbi1zIHdvby1idXR0b24tcm91bmQgd29vLWRpYWxvZy1idG4geWF3Zi1jbGVhbi12MyI+PHNwYW4gY2xhc3M9Indvby1idXR0b24td3JhcCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24tY29udGVudCI+PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj4nOwogICAgICAgIH0KICAgICAgICBjb25zdCBjbGVhbkJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jbGVhbi12MycpOwogICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgIGNsZWFuQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5XX2YxNCcpLnRleHRDb250ZW50ID0gaTE4bi5jb25maWdDbGVhblYzQnV0dG9uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjbGVhbkJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcud29vLWJ1dHRvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpMThuLmNvbmZpZ0NsZWFuVjNCdXR0b247CiAgICAgICAgfQogICAgICAgIGNsZWFuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgdWkuY29uZmlybSh7CiAgICAgICAgICAgIGlkOiAneWF3Zi1jbGVhbi12MycsCiAgICAgICAgICAgIGljb246ICdhc2snLAogICAgICAgICAgICB0aXRsZTogaTE4bi5jb25maWdDbGVhblYzVGl0bGUsCiAgICAgICAgICAgIHRleHQ6IGkxOG4uY29uZmlnQ2xlYW5WM1RleHQsCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICghYW5zd2VyKSByZXR1cm47CiAgICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHsgR00uZGVsZXRlVmFsdWUoa2V5KTsgfSk7CiAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gY29udGFpbmVyOwogICAgICB9LAogICAgfSk7CiAgfSgpKTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcmVwbGFjZW1lbnQgb2YgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9hYm91dC93aGF0c25ldy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IGJyb3dzZXIgPSB3aW5kb3cud2VCcm93c2VyOwogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKICBjb25zdCBpbXBvcnRlciA9IHlhd2YuaW1wb3J0ZXI7CgogIGNvbnN0IHVpID0gdXRpbC51aTsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgYWJvdXQgPSB5YXdmLnJ1bGVzLmFib3V0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGkxOG4udXBkYXRlR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn5pu05pawJywKICAgIGVuOiAnVXBkYXRlJywKICB9OwoKICBjb25zdCB1cGRhdGUgPSBhYm91dC51cGRhdGUgPSB7fTsKICB1cGRhdGUudXBkYXRlID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGFib3V0LmFib3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udXBkYXRlR3JvdXBUaXRsZSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzaG93V2hhdHNOZXc6IHsgY246ICfmm7TmlrDlkI7mmL7npLrmlrDlip/og73mj5DnpLonLCB0dzogJ+abtOaWsOW+jOmhr+ekuuaWsOWKn+iDveaPkOekuicsIGVuOiAnU2hvdyBuZXcgZmVhdHVyZXMgYWZ0ZXIgdXBkYXRlJyB9LAogICAgaW5zdGFsbFN1Y2Nlc3NUaXRsZTogeyBjbjogJ+iNr+aWuSAoWUFXRikg5a6J6KOF5oiQ5YqfJywgdHc6ICfol6XmlrkgKFlBV0YpIOWuieijneaIkOWKnycsIGVuOiAnWUFXRiBJbnN0YWxsYXRpb24gc3VjY2Vzc2VkJyB9LAogICAgaW5zdGFsbFN1Y2Nlc3NUZXh0VjY6IHsKICAgICAgY246ICfmhJ/osKLmgqjlronoo4Xoja/mlrkgKFlBV0YpIOiEmuacrOOAguaCqOWPr+S7peeCueWHu+WPs+S4iuinkueahOa8j+aWl+Wbvuagh+aJk+W8gOiuvue9ruOAguatpOWkluaCqOi/mOWPr+S7pemAieS4reW5tuaLluaLveWFs+mUruivjeOAgeW4kOWPt+OAgeivnemimOOAgeadpea6kOetieWGheWuueWIsOe9kemhteWPs+S4iuinku+8jOW/q+mAn+WIm+W7uuinhOWImeOAgicsCiAgICAgIHR3OiAn5oSf6Kyd5oKo5a6J6KOd6Jel5pa5IChZQVdGKSDohbPmnKzjgILmgqjlj6/ku6Xpu57mk4rlj7PkuIrop5LnmoTmvI/mlpflnJbnpLrmiZPplovoqK3lrprjgILmraTlpJbmgqjpgoTlj6/ku6XpgbjkuK3kuKbmi5bmi73pl5zpjbXlrZfjgIHluLPomZ/jgIHoqbHpoYzjgIHkvobmupDnrYnlhaflrrnliLDntrLpoIHlj7PkuIrop5LvvIzlv6vpgJ/libXlu7ropo/liYfjgIInLAogICAgICBlbjogJ1RoYW5rIHlvdSBmb3IgaW5zdGFsbGluZyBZQVdGLiBZb3UgY2FuIGNsaWNrIG9uIHRoZSBmdW5uZWwgaWNvbiBhdCB0aGUgdG9wLXJpZ2h0IGNvcm5lciB0byBvcGVuIHVwIGZpbHRlciBzZXR0aW5nIG1lbnUuIFlvdSBtYXkgYWxzbyBxdWlja2x5IGNyZWF0ZSBmaWx0ZXJzIGJ5IGRyYWdnaW5nIGFuZCBkcm9wcGluZyBrZXl3b3JkcywgYWNjb3VudHMsIHRvcGljcyBhbmQgc291cmNlcyB0byB0aGUgdG9wLXJpZ2h0IGNvcm5lci4nLAogICAgfSwKICAgIGluc3RhbGxTdWNjZXNzVGV4dFY3OiB7CiAgICAgIGNuOiAn5oSf6LCi5oKo5a6J6KOF6I2v5pa5IChZQVdGKSDmianlsZXjgILmgqjlj6/ku6XlnKjlj7PkuIrop5Lpvb/ova7lm77moIfnmoToj5zljZXkuK3mib7liLDoja/mlrnnmoTorr7nva7jgILor7fms6jmhI/vvIznlLHkuo7mgqjmraPlnKjkvb/nlKjlvq7ljZogVjcg5paw54mI77yM57ud5aSn6YOo5YiG5Yqf6IO955uu5YmN5bCa5LiN5Y+v55So44CC6I2v5pa5IChZQVdGKSDmmK/nrKzkuInmlrnlt6XlhbfvvIzku47mnKropoHmsYLov4fku5jmrL7kvb/nlKjmiJblr7vmsYLov4fmjZDotaDjgIInLAogICAgfSwKICAgIHVwZGF0ZVN1Y2Nlc3NUaXRsZTogeyBjbjogJ+iNr+aWuSAoWUFXRikg5paw5Yqf6IO95o+Q56S6JywgdHc6ICfol6XmlrkgKFlBV0YpIOaWsOWKn+iDveaPkOekuicsIGVuOiAiWUFXRiBXaGF0J3MgTmV3IiB9LAogICAgdXBkYXRlU3VjY2Vzc0hlYWRlcjogeyBjbjogJ+iNr+aWuSAoWUFXRikg5omp5bGV5bey5pu05pawJywgdHc6ICfol6XmlrkgKFlBV0YpIOaTtOWFheWll+S7tuW3suabtOaWsCcsIGVuOiAnWW91ciBZQVdGIGV4dGVuc2lvbiBoYXMgYmVlbiB1cGRhdGVkJyB9LAogICAgdXBkYXRlU3VjY2Vzc0RldGFpbDogeyBjbjogJ+W9k+WJjeeJiOacrOa3u+WKoOaIluabtOaWsOS6huS7peS4iyB7e2NvdW50fX0g6aG55Yqf6IO9JywgdHc6ICfnlbbliY3niYjmnKzmt7vliqDmiJbmm7TmlrDkuobku6XkuIsge3tjb3VudH19IOmgheWKn+iDvScsIGVuOiAnVGhlIGN1cnJlbnQgdmVyc2lvbiBoYXMgYWRkZWQgb3IgdXBkYXRlZCB0aGUgZm9sbG93aW5nIHt7Y291bnR9fSBmZWF0dXJlKHMpJyB9LAogICAgaW1wb3J0VjNTdWNjZXNzVGl0bGU6IHsKICAgICAgY246ICdZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXIgKOiNr+aWuSkg5bey5Y2H57qn6Iez5paw54mIJywKICAgICAgdHc6ICdZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXIgKOiXpeaWuSkg5bey5Y2H57Sa6Iez5paw54mIJywKICAgICAgZW46ICdZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXIgKFlBV0YpIFVwZGF0ZWQnLAogICAgfSwKICAgIGltcG9ydFYzU3VjY2Vzc1RleHQ6IHsKICAgICAgY246ICdZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXIgKOiNr+aWuSkg5bey5Y2H57qn6IezIDQuMCDniYjjgILkuLrkvb/mgqjojrflvpfmm7Tlpb3nmoTkvb/nlKjmlYjmnpzvvIzov5nniYjohJrmnKznu4/ov4flrozlhajph43lhpnjgILnlLHkuo7ov5nkuIDniYjmlLnliqjovoPlpKfvvIzlsJHmlbDlip/og73vvIjlpoLmraPliJnooajovr7lvI/vvInlkozkuYvliY3kuI3lsL3nm7jlkIzjgILohJrmnKzlt7Lku47ml6fniYjlr7zlhaXorr7nva7vvIzkvYbmiJHku6zku43lu7rorq7mgqjmiZPlvIDorr7nva7lpI3mn6XkuIDkuIvjgILlpoLmnpzmgqjkvb/nlKggRmlyZWZveCDmtY/op4jlmajvvIznjrDlnKjov5jlj6/pgInmi6noja/mlrnmianlsZXniYjvvIzlnKjmianlsZXnvZHnq5nvvIhBTU/vvInmkJzntKIgWUFXRiDljbPlj6/mib7liLDjgIInLAogICAgICBoazogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciAo6Jel5pa5KSDlt7LljYfntJroh7MgNC4wIOeJiOOAgueCuuS9v+aCqOeNsuW+l+abtOWlveeahOS9v+eUqOaViOaenO+8jOmAmeeJiOiFs+acrOe2k+mBjuWujOWFqOmHjeWBmuOAgueUseaWvOmAmeS4gOeJiOaUueWLlei8g+Wkp++8jOWwkeaVuOWKn+iDve+8iOWmguato+WJh+ihqOmBlOW8j++8ieWSjOS5i+WJjeS4jeeboeebuOWQjOOAguiFs+acrOW3suW+nuiIiueJiOWwjuWFpeioree9ru+8jOS9huaIkeWAkeS7jeW7uuitsOaCqOaJk+mWi+ioreWumuS7peikh+afpeOAguWmguaenOaCqOS9v+eUqCAgRmlyZWZveCDngI/opr3lmajvvIznj77lnKjpgoTlj6/pgbjmk4fol6Xmlrnmk7TlsZXniYjvvIzlnKjmk7TlsZXntrLnq5nvvIhBTU/vvInmkJzlsIsgWUFXRiDljbPlj6/mib7liLDjgIInLAogICAgICB0dzogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciAo6Jel5pa5KSDlt7LljYfntJroh7MgNC4wIOeJiOOAgueCuuS9v+aCqOeNsuW+l+abtOWlveeahOS9v+eUqOaViOaenO+8jOmAmeeJiOiFs+acrOe2k+mBjuWujOWFqOmHjeWBmuOAgueUseaWvOmAmeS4gOeJiOaUueWLlei8g+Wkp++8jOWwkeaVuOWKn+iDve+8iOWmguato+imj+ihqOekuuW8j++8ieWSjOS5i+WJjeS4jeeboeebuOWQjOOAguiFs+acrOW3suW+nuiIiueJiOWwjuWFpeioree9ru+8jOS9huaIkeWAkeS7jeW7uuitsOaCqOaJk+mWi+ioreWumuS7peikh+afpeOAguWmguaenOaCqOS9v+eUqCAgRmlyZWZveCDngI/opr3lmajvvIznj77lnKjpgoTlj6/pgbjmk4fol6Xmlrnmk7TlsZXniYjvvIzlnKjmk7TlsZXntrLnq5nvvIhBTU/vvInmkJzlsIsgWUFXRiDljbPlj6/mib7liLDjgIInLAogICAgICBlbjogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciAoWUFXRikgVGhlIHNjcmlwdCBoYWQgYmVlbiB1cGdyYWRlZCB0byB2ZXJzaW9uIDQuMC4gRm9yIGJldHRlciB1c2VyIGV4cGVyaWVuY2UsIHRoZSBzY3JpcHQgaXMgY29tcGxldGVseSByZXdyaXR0ZW4uIFNvbWUgZmVhdHVyZXMgKGUuZy4gcmVnZXhwIG1hdGNoaW5nKSBpcyBzbGlnaHRseSBkaWZmZXJlbnQgZnJvbSBwcmV2aW91cyB2ZXJzaW9uLiBNb3N0IHNldHRpbmdzIGFyZSBpbXBvcnRlZCBmcm9tIG9sZCB2ZXJzaW9uLiBBbmQgeW91IGFyZSBzdGlsbCB3ZWxjb21lZCB0byBjaGVjayBvdXQgdGhlIHNldHRpbmcgcGFuZWwuIEZpcmVmb3ggdXNlcnMgbWF5IHRyeSBvdXIgbmV3IGV4dGVuc2lvbiB2ZXJzaW9uIGJ5IHNlYXJjaGluZyBZQVdGIG9uIEFNTy4nLAogICAgfSwKICAgIHdlaWJvVmVyc2lvblRpdGxlOiB7IGNuOiAn5b6u5Y2a5paw54mI77yIVjfvvIknIH0sCiAgICB3ZWlib1ZlcnNpb242VG83OiB7IGNuOiAn5oKo5bey5pu05o2i5Yiw5b6u5Y2a5paw54mI77yIVjfvvInvvIzmgqjlj6/ku6XlnKjlj7PkuIrop5Lpvb/ova7lm77moIfnmoToj5zljZXkuK3mib7liLDoja/mlrnvvIhZQVdG77yJ55qE6K6+572u44CC6L+Y6K+35rOo5oSP6I2v5pa577yIWUFXRu+8ieebruWJjeWkp+mDqOWIhuWKn+iDveaXoOazleaUr+aMgeaWsOeJiOOAguatpOWkluWmguaenOaCqOW4jOacm+iNr+aWue+8iFlBV0bvvInog73lsL3lv6vmm7TmlrDmlK/mjIHmlrDniYjvvIzmrKLov47liLDpobnnm67kuLvpobXotKHnjK7ku6PnoIHjgIInIH0sCiAgICB3ZWlib1ZlcnNpb243VG82OiB7IGNuOiAn5oKo5bey6YCA5Zue5Yiw5b6u5Y2a5pen54mI77yIVjbvvInjgILlpoLmnpzmgqjlr7noja/mlrnvvIhZQVdG77yJ5pyJ5Lu75L2V6Zeu6aKY77yM5oKo5Y+v5Lul6IGU57O7IEBZQVdG6ISa5pysIO+8jOatpOWkluasoui/juWIsOmhueebruS4u+mhtei0oeeMruS7o+eggeOAgicgfSwKICB9KTsKCiAgdXBkYXRlLndoYXRzTmV3ID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdzY3JpcHRfdXBkYXRlX3doYXRzbmV3JywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IHVwZGF0ZS51cGRhdGUsCiAgICBpbml0aWFsOiB0cnVlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvd1doYXRzTmV3LAogICAgcmVmOiB7CiAgICAgIGxhc3Q6IHsgdHlwZTogJ251bWJlcicsIGluaXRpYWw6IDAgfSwKICAgICAgbGFzdFdlaWJvOiB7IHR5cGU6ICdudW1iZXInLCBpbml0aWFsOiAwIH0sCiAgICB9LAogICAgYXN5bmMgaW5pdCgpIHsKICAgICAgLy8g6L+Z5Liq5Yqf6IO96ZyA6KaB5pi+56S65a+56K+d5qGGCiAgICAgIC8vIOWvueivneahhumcgOimgemhtemdouWKoOi9veWujOaIkOaJjeiDveaYvuekugogICAgICBpZiAoIVsnY29tcGxldGUnLCAnbG9hZGVkJywgJ2ludGVyYWN0aXZlJ10uaW5jbHVkZXMoZG9jdW1lbnQucmVhZHlTdGF0ZSkpIHsKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCByZXNvbHZlKSk7CiAgICAgIH0KICAgICAgY29uc3Qgd2hhdHNOZXcgPSB0aGlzOwogICAgICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IE51bWJlcihicm93c2VyLnJ1bnRpbWUuZ2V0TWFuaWZlc3QoKS52ZXJzaW9uLm1hdGNoKC9cZCskL2cpKTsKICAgICAgY29uc3QgbGFzdFZlcnNpb24gPSB0aGlzLnJlZi5sYXN0LmdldENvbmZpZygpOwogICAgICBjb25zdCBsYXN0V2VpYm9WZXJzaW9uID0gdGhpcy5yZWYubGFzdFdlaWJvLmdldENvbmZpZygpOwogICAgICBjb25zdCB1cGRhdGVEb25lID0gKCkgPT4geyB0aGlzLnJlZi5sYXN0LnNldENvbmZpZyhjdXJyZW50VmVyc2lvbik7IH07CiAgICAgIGlmIChsYXN0V2VpYm9WZXJzaW9uICYmIHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gbGFzdFdlaWJvVmVyc2lvbikgewogICAgICAgIC8vIHVpLmFsZXJ0KHsKICAgICAgICAvLyAgIGlkOiAneWF3Zi13ZWliby12ZXJzaW9uJywKICAgICAgICAvLyAgIHRpdGxlOiBpMThuLndlaWJvVmVyc2lvblRpdGxlLAogICAgICAgIC8vICAgdGV4dDogeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gaTE4bi53ZWlib1ZlcnNpb243VG82IDogaTE4bi53ZWlib1ZlcnNpb242VG83LAogICAgICAgIC8vIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5yZWYubGFzdFdlaWJvLnNldENvbmZpZyh5YXdmLldFSUJPX1ZFUlNJT04pOwogICAgICAgIC8vIH0pOwogICAgICB9IGVsc2UgaWYgKCFsYXN0V2VpYm9WZXJzaW9uKSB7CiAgICAgICAgdGhpcy5yZWYubGFzdFdlaWJvLnNldENvbmZpZyh5YXdmLldFSUJPX1ZFUlNJT04pOwogICAgICB9CiAgICAgIGlmICghbGFzdFZlcnNpb24pIHsKICAgICAgICAvLyDliJ3mrKHov5DooYzvvIzkuZ/lj6/og73mmK/ku44gdjMg5Y2H57qn5LiK5p2l55qECiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIOWvvOWFpeiuvue9rgogICAgICAgICAgY29uc3QgdjNDb25maWcgPSBKU09OLnBhcnNlKGF3YWl0IEdNLmdldFZhbHVlKGB1c2VyJHt5YXdmLmluaXQucGFnZS4kQ09ORklHLnVpZH1jb25maWdgKSk7CiAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShKU09OLnN0cmluZ2lmeSh7IHlhd2Y6ICdZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXInLCB2ZXI6ICczJywgY29uZjogdjNDb25maWcgfSkpLmJ1ZmZlcjsKICAgICAgICAgIGNvbnN0IHsgY29uZmlnOiBuZXdDb25maWcgfSA9IGltcG9ydGVyLnBhcnNlKGZpbGVDb250ZW50KTsKICAgICAgICAgIGlmIChuZXdDb25maWcpIGF3YWl0IHRoaXMuY29uZmlnUG9vbC5pbXBvcnQobmV3Q29uZmlnKTsKICAgICAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdJbXBvcnQgZnJvbSB2MyBmYWlsZWQuJyk7CiAgICAgICAgICAvLyDlr7zlhaXlhbPms6jkv6Hmga8KCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCB1aWQgPSBpbml0LnBhZ2UuJENPTkZJRy51aWQ7CiAgICAgICAgICAgIGNvbnN0IFtsYXN0LCBub3RpY2VdID0gKGF3YWl0IFByb21pc2UuYWxsKFsKICAgICAgICAgICAgICBHTS5nZXRWYWx1ZShgZm9sbG93aW5nX2luZm9fJHt1aWR9YCwgJ3t9JyksCiAgICAgICAgICAgICAgR00uZ2V0VmFsdWUoYGZvbGxvd2luZ19ub3RpY2VfJHt1aWR9YCwgJ3t9JyksCiAgICAgICAgICAgIF0pKS5tYXAoZGF0YSA9PiB7CiAgICAgICAgICAgICAgdHJ5IHsgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIHt9OyB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvKiogQHR5cGUge0FycmF5fSAqLwogICAgICAgICAgICBjb25zdCBsaXN0ID0gbGFzdC5mb2xsb3dpbmc7CiAgICAgICAgICAgICgobm90aWNlIHx8IHt9KS5hZGQgfHwgW10pLmZvckVhY2godSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgcG9zID0gbGlzdC5maW5kKHYgPT4gdi5pZCA9PT0gdS5pZCk7CiAgICAgICAgICAgICAgaWYgKHBvcyAhPT0gLTEpIGxpc3Quc3BsaWNlKHBvcywgMSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAoKG5vdGljZSB8fCB7fSkubG9zdCB8fCBbXSkuZm9yRWFjaCh1ID0+IHsKICAgICAgICAgICAgICBjb25zdCBwb3MgPSBsaXN0LmZpbmQodiA9PiB2LmlkID09PSB1LmlkKTsKICAgICAgICAgICAgICBpZiAocG9zID09PSAtMSkgbGlzdC5hcHBlbmQodSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBsYXN0LnRpbWVzdGFtcDsKCiAgICAgICAgICAgIGNvbnN0IG5ld0xpc3QgPSBsaXN0Lm1hcChpdGVtID0+ICgoewogICAgICAgICAgICAgIHVzZXI6IG9sZCA9PiAoewogICAgICAgICAgICAgICAgaWQ6IGB1c2VyLSR7b2xkLnVzZXJ9YCwKICAgICAgICAgICAgICAgIHR5cGU6ICd1c2VyJywKICAgICAgICAgICAgICAgIHVzZXI6IG9sZC51c2VyLAogICAgICAgICAgICAgICAgdXJsOiBvbGQuaHJlZiwKICAgICAgICAgICAgICAgIGF2YXRhcjogb2xkLmF2YXRhciwKICAgICAgICAgICAgICAgIG5hbWU6IG9sZC5uYW1lLnJlcGxhY2UoLyBcKC4qXCkkL2csICcnKSwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBvbGQuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgc3RvY2s6IG9sZCA9PiAoewogICAgICAgICAgICAgICAgaWQ6IGBzdG9jay0ke29sZC5zdG9ja31gLAogICAgICAgICAgICAgICAgdHlwZTogJ3N0b2NrJywKICAgICAgICAgICAgICAgIHN0b2NrOiBvbGQuc3RvY2ssCiAgICAgICAgICAgICAgICB1cmw6IG9sZC5ocmVmLAogICAgICAgICAgICAgICAgYXZhdGFyOiBvbGQuYXZhdGFyLAogICAgICAgICAgICAgICAgbmFtZTogYCQke29sZC5zdG9ja30kYCwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJCR7b2xkLnN0b2NrfSRgLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHRvcGljOiBvbGQgPT4gKHsKICAgICAgICAgICAgICAgIGlkOiBgdG9waWMtJHtvbGQudG9waWN9YCwKICAgICAgICAgICAgICAgIHR5cGU6ICd0b3BpYycsCiAgICAgICAgICAgICAgICB0b3BpYzogb2xkLnRvcGljLAogICAgICAgICAgICAgICAgdXJsOiBvbGQuaHJlZiwKICAgICAgICAgICAgICAgIGF2YXRhcjogb2xkLmF2YXRhciwKICAgICAgICAgICAgICAgIG5hbWU6IGAjJHtvbGQudG9waWN9I2AsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYCMke29sZC50b3BpY30jYCwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgfVtpdGVtLnR5cGVdIHx8IChvbGQgPT4gKHsKICAgICAgICAgICAgICBpZDogJ3Vua25vd24tJyArIG9sZC5ocmVmLAogICAgICAgICAgICAgIHR5cGU6ICd1bmtub3duJywKICAgICAgICAgICAgICB1cmw6IG9sZC5ocmVmLAogICAgICAgICAgICAgIGF2YXRhcjogb2xkLmF2YXRhciwKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogb2xkLmRlc2NyaXB0aW9uLnNsaWNlKDEpLAogICAgICAgICAgICAgIG5hbWU6IG9sZC5kZXNjcmlwdGlvbi5zbGljZSgxKSwKICAgICAgICAgICAgfSkpKShpdGVtKSkpOwogICAgICAgICAgICBjb25zdCBmb2xsb3dDb25maWcgPSBhd2FpdCBjb25maWcucG9vbCgnRm9sbG93JywgeyB1aWQgfSk7CiAgICAgICAgICAgIGNvbnN0IGxhc3RMaXN0ID0gbmV3IHJ1bGUuY2xhc3MuT2Zmc2NyZWVuQ29uZmlnSXRlbSh7IGlkOiAnbGFzdExpc3QnLCBjb25maWdQb29sOiBmb2xsb3dDb25maWcgfSk7CiAgICAgICAgICAgIGNvbnN0IGxhc3RDaGFuZ2UgPSBuZXcgcnVsZS5jbGFzcy5PZmZzY3JlZW5Db25maWdJdGVtKHsgaWQ6ICdsYXN0Q2hhbmdlJywgY29uZmlnUG9vbDogZm9sbG93Q29uZmlnIH0pOwogICAgICAgICAgICBsYXN0TGlzdC5zZXRDb25maWcoeyB0aW1lc3RhbXAsIGxpc3Q6IG5ld0xpc3QgfSk7CiAgICAgICAgICAgIGxhc3RDaGFuZ2Uuc2V0Q29uZmlnKG51bGwpOwogICAgICAgICAgfSBjYXRjaCAoZm9sbG93RXhjZXB0aW9uKSB7CiAgICAgICAgICAgIHV0aWwuZGVidWcoJ0ZhaWxlZCB0byBpbXBvcnQgZm9sbG93aW5nIGluZm8uJywgZm9sbG93RXhjZXB0aW9uKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDlr7zlhaXmiJDlip8KICAgICAgICAgIGF3YWl0IHVpLmFsZXJ0KHsKICAgICAgICAgICAgaWQ6ICd5YXdmLXVwZ3JhZGUtZnJvbS0zJywKICAgICAgICAgICAgdGl0bGU6IGkxOG4uaW1wb3J0VjNTdWNjZXNzVGl0bGUsCiAgICAgICAgICAgIHRleHQ6IGkxOG4uaW1wb3J0VjNTdWNjZXNzVGV4dCwKICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICB1cGRhdGVEb25lKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBsb2NhdGlvbi5yZWxvYWQoKTsgfSwgMCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgYXdhaXQgdWkuYWxlcnQoewogICAgICAgICAgICBpZDogJ3lhd2YtZmlyc3Qtc2VlbicsCiAgICAgICAgICAgIHRpdGxlOiBpMThuLmluc3RhbGxTdWNjZXNzVGl0bGUsCiAgICAgICAgICAgIHRleHQ6IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGkxOG4uaW5zdGFsbFN1Y2Nlc3NUZXh0VjYgOiBpMThuLmluc3RhbGxTdWNjZXNzVGV4dFY3LAogICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHVwZGF0ZURvbmUoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoY3VycmVudFZlcnNpb24gPCBsYXN0VmVyc2lvbikgewogICAgICAgIC8vIOW9k+WJjeeJiOacrOavlOWOhuWPsueJiOacrOabtOaXp++8jOWPr+iDveaYr+WbnumAgOS6hueJiOacrO+8jOebtOaOpeabtOaWsOeJiOacrOWPtwogICAgICAgIHVwZGF0ZURvbmUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoY3VycmVudFZlcnNpb24gPT09IGxhc3RWZXJzaW9uKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF3aGF0c05ldy5pc0VuYWJsZWQoKSkgewogICAgICAgIHVwZGF0ZURvbmUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgcnVsZUl0ZW1zID0gcnVsZS5xdWVyeSh7CiAgICAgICAgZmlsdGVyKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLnZlcnNpb24gJiYgaXRlbS52ZXJzaW9uID4gbGFzdFZlcnNpb24gJiYgaXRlbS52ZXJzaW9uIDw9IGN1cnJlbnRWZXJzaW9uOwogICAgICAgIH0sCiAgICAgIH0pOwogICAgICBpZiAoIXJ1bGVJdGVtcy5sZW5ndGgpIHsKICAgICAgICB1cGRhdGVEb25lKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHdoYXRzTmV3RGlhbG9nID0gdWkuZGlhbG9nKHsKICAgICAgICBpZDogJ3lhd2Ytd2hhdHNuZXcnLAogICAgICAgIHRpdGxlOiBpMThuLnVwZGF0ZVN1Y2Nlc3NUaXRsZSwKICAgICAgICByZW5kZXIoY29udGFpbmVyKSB7CiAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9Inlhd2Ytd2hhdHNuZXctZGlhbG9nIj48ZGl2IGNsYXNzPSJ5YXdmLXdoYXRzbmV3LWhlYWRlciI+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi13aGF0c25ldy1ib2R5Ij48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLXdoYXRzbmV3LWZvb3RlciI+PGhyIC8+PC9kaXY+PC9kaXY+JzsKICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi13aGF0c25ldy1oZWFkZXInKTsKICAgICAgICAgIGNvbnN0IGJvZHkgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2Ytd2hhdHNuZXctYm9keScpOwogICAgICAgICAgY29uc3QgZm9vdGVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLXdoYXRzbmV3LWZvb3RlcicpOwogICAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gaTE4bi51cGRhdGVTdWNjZXNzSGVhZGVyOwogICAgICAgICAgYm9keS50ZXh0Q29udGVudCA9IGkxOG4udXBkYXRlU3VjY2Vzc0RldGFpbC5yZXBsYWNlKCd7e2NvdW50fX0nLCBydWxlSXRlbXMubGVuZ3RoKTsKICAgICAgICAgIHJ1bGUucmVuZGVyKGJvZHksIHJ1bGVJdGVtcyk7CiAgICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQod2hhdHNOZXcucmVuZGVyKCkpOwogICAgICAgIH0sCiAgICAgICAgYnV0dG9uOiB7CiAgICAgICAgICBjbG9zZSgpIHsKICAgICAgICAgICAgd2hhdHNOZXdEaWFsb2cuaGlkZSgpOwogICAgICAgICAgICB3aGF0c05ldy5yZWYubGFzdC5zZXRDb25maWcoY3VycmVudFZlcnNpb24pOwogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICB9KTsKICAgICAgaWYgKGluaXQucGFnZS50eXBlKCkgPT09ICdzZWFyY2gnKSByZXR1cm47CiAgICAgIHdoYXRzTmV3RGlhbG9nLnNob3coKTsKICAgIH0sCiAgfSk7CgogIGNzcy5hcHBlbmQoYAoueWF3Zi13aGF0c25ldy1kaWFsb2cgeyBwYWRkaW5nOiAyMHB4OyB3aWR0aDogNjAwcHg7IH0gCi55YXdmLXdoYXRzbmV3LWhlYWRlciB7IGZvbnQtc2l6ZTogMTQwJTsgfQoueWF3Zi13aGF0c25ldy1ib2R5IHsgaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3c6IGF1dG87IG1hcmdpbjogMCAtMjBweDsgcGFkZGluZzogMCAyMHB4OyB9CmApOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2Fib3V0L2RlYnVnLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKCiAgY29uc3QgYWJvdXQgPSB5YXdmLnJ1bGVzLmFib3V0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGkxOG4uZGVidWdHcm91cFRpdGxlID0gewogICAgY246ICfosIPor5UnLAogICAgdHc6ICflgbXpjK8nLAogICAgZW46ICdEZWJ1ZycsCiAgfTsKCiAgY29uc3QgZGVidWcgPSBhYm91dC5kZWJ1ZyA9IHt9OwogIGRlYnVnLmRlYnVnID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGFib3V0LmFib3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZGVidWdHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLmRlYnVnVGV4dCA9IHsKICAgIGNuOiAn5Zyo5o6n5Yi25Y+w5omT5Y2w6LCD6K+V5L+h5oGvJywKICAgIHR3OiAn5Zyo5o6n5Yi25Y+w5YiX5Y2w5YG16Yyv6KiK5oGvJywKICAgIGVuOiAnTG9nIGRlYnVnIGluZm8gdG8gY29uc29sZScsCiAgfTsKCiAgZGVidWcuZW5hYmxlID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdzY3JpcHRfZW5hYmxlX2RlYnVnJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGRlYnVnLmRlYnVnLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZGVidWdUZXh0LAogICAgYWluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdXRpbC5kZWJ1Zy5zZXRFbmFibGVkKHRoaXMuaXNFbmFibGVkKCkpOwogICAgfSwKICB9KTsKCiAgaTE4bi5kZWJ1Z1JlZ2V4ID0gewogICAgY246ICflnKjmjqfliLblj7DmiZPljbDmr4/mnaHlvq7ljZrnlKjkuo7mraPliJnooajovr7lvI/ljLnphY3ml7bor4bliKvnmoTmloflrZcnLAogICAgaGs6ICflnKjmjqfliLblj7DliJfljbDmr4/mop3lvq7ljZrnlKjmlrzmraPliYfooajpgZTlvI/ljLnphY3mmYLorZjliKXnmoTmloflrZcnLAogICAgdHc6ICflnKjmjqfliLblj7DliJfljbDmr4/mop3lvq7ljZrnlKjmlrzmraPopo/ooajnpLrlvI/ljLnphY3mmYLorZjliKXnmoTmloflrZcnLAogICAgZW46ICdTaG93IHJlY29nbml6ZWQgdGV4dHMgZm9yIHJlZ2V4IHJ1bGVzIG9mIGVhY2ggZmVlZHMgaW4gY29uc29sZScsCiAgfTsKCiAgZGVidWcucmVnZXggPSBydWxlLlJ1bGUoewogICAgaWQ6ICdzY3JpcHRfZGVidWdfcmVnZXgnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZGVidWcuZGVidWcsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5kZWJ1Z1JlZ2V4LAogICAgYWluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gcmVnZXhEZWJ1Z2dlcihmZWVkKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGZlZWRQYXJzZXIudGV4dC5kZXRhaWwoZmVlZCk7CiAgICAgICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHRleHQpLnJlcGxhY2UoL1x1MjAyOC9nLCAnXFx1MjAyOCcpLnJlcGxhY2UoL1x1MjAyOS9nLCAnXFx1MjAyOScpOwogICAgICAgIGNvbnNvbGUubG9nKCclb1xuJW8nLCBmZWVkLCBqc29uKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSwgeyBwcmlvcml0eTogMWU3IH0pOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcmVwbGFjZW1lbnQgb2YgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9hYm91dC9zY3JpcHQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwoKICBjb25zdCBhYm91dCA9IHlhd2YucnVsZXMuYWJvdXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgaTE4bi5hYm91dFNjcmlwdEdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+WFs+S6jicsCiAgICBoazogJ+mXnOaWvCcsCiAgICB0dzogJ+mXnOaWvCcsCiAgICBlbjogJ0Fib3V0JywKICB9OwoKICBjb25zdCBzY3JpcHQgPSBhYm91dC5zY3JpcHQgPSB7fTsKICBzY3JpcHQuc2NyaXB0ID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGFib3V0LmFib3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uYWJvdXRTY3JpcHRHcm91cFRpdGxlLAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGFib3V0VGV4dDogewogICAgICBjbjogJ3t7bG9nb319WWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyICjoja/mlrkpIHt7dmVyc2lvbn19e3ticn195L2c6ICFe3thdXRob3J9fe+8jOaCqOWPr+S7peWFs+azqCB7e3NjcmlwdFdlaWJvfX0g5LqG6Kej55So5oi36ISa5pys55qE5pyA5paw5Y+Y5YyW44CCe3ticn195aaC5p6c5oKo5Zyo5L2/55So6L+H56iL5Lit6YGH5Yiw5Lu75L2V6ISa5pys55qE6ZSZ6K+v77yM5oiW5a+56ISa5pys5pyJ5Lu75L2V5bu66K6u77yM5qyi6L+O5YiwIHt7aXNzdWVQYWdlfX0g5Y+N6aaI77yM5oiW56eB5L+hIHt7c2NyaXB0V2VpYm99feOAgnt7YnJ9feiEmuacrOS9v+eUqCBNUEwtMi4wIOWNj+iuruW8gOaUvua6kOS7o+egge+8jOaCqOWPr+S7peWcqCB7e2dpdGh1Yn19IOS4iuafpemYheOAguasoui/jui0oeeMruS7o+eggeOAgicsCiAgICAgIHR3OiAne3tsb2dvfX1ZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXIgKOiXpeaWuSkge3t2ZXJzaW9ufX17e2JyfX3kvZzogIV7e2F1dGhvcn1977yM5oKo5Y+v5Lul6Zec5rOoIHt7c2NyaXB0V2VpYm99fSDkuobop6Pkvb/nlKjogIXohbPmnKznmoTmnIDmlrDororljJbjgIJ7e2JyfX3lpoLmnpzmgqjlnKjkvb/nlKjpgY7nqIvkuK3pgYfliLDku7vkvZXohbPmnKznmoTpjK/oqqTvvIzmiJblsI3lhbbmnInku7vkvZXlu7rorbDvvIzmraHov47liLAge3tpc3N1ZVBhZ2V9fSDlm57ppYvvvIzmiJboga/nuasge3tzY3JpcHRXZWlib31944CCe3ticn196IWz5pys5LulIE1QTC0yLjAg5Y2U5a6a6ZaL5pS+5Y6f5aeL56K877yM5oKo5Y+v5Lul5ZyoIHt7Z2l0aHVifX0g5LiK5p+l6Zax44CC5q2h6L+O6LKi54275Y6f5aeL56K844CCJywKICAgICAgZW46ICd7e2xvZ299fVlldCBBbm90aGVyIFdlaWJvIEZpbHRlciAoWUFXRikge3t2ZXJzaW9ufX17e2JyfX1DcmVhdGVkIGJ5IHt7YXV0aG9yfX0uIFlvdSBtYXkgZm9sbG93IHt7c2NyaXB0V2VpYm99fSBmb3IgbGFzdCB1cGRhdGVzIGluZm8ue3ticn19WW91IG1heSByZXBvcnQgZXJyb3JzIGFuZCBnaXZlIHN1Z2dlc3Rpb25zIG9uIHt7aXNzdWVQYWdlfX0sIG9yIHNlbmQgcHJpdmF0ZSBtZXNzYWdlIHRvIHt7c2NyaXB0V2VpYm99fS57e2JyfX1UaGlzIGV4dGVuc2lvbiBpcyByZWxlYXNlZCB1bmRlciBNUEwtMi4wIGxpY2Vuc2UuIFlvdSBtYXkgZ2V0IGl0cyBzb3VyY2UgZnJvbSB7e2dpdGh1Yn19LiBDb250cmlidXRpb25zIGFyZSB3ZWxjb21lZC4nLAogICAgfSwKICAgIGFib3V0SXNzdWVUcmFja2VyOiB7CiAgICAgIGNuOiAn6K6u6aKY6Lef6Liq5ZmoJywKICAgICAgdHc6ICforbDpoYzov73ouKrlmagnLAogICAgICBlbjogJ2lzc3VlIHRyYWNrZXInLAogICAgfSwKICAgIGFib3V0R2l0aHViUmVwbzogewogICAgICBjbjogJ0dpdEh1YiDku5PlupMnLAogICAgICB0dzogJ0dpdEh1YiDlrZjmlL7luqsnLAogICAgICBlbjogJ0dpdEh1YiByZXBvc2l0b3J5JywKICAgIH0sCiAgICB1c2VyU2NyaXB0VmVyc2lvbjogewogICAgICBjbjogJ3sxfSDvvIjnlKjmiLfohJrmnKzvvIknLAogICAgICB0dzogJ3sxfSDvvIjkvb/nlKjogIXohbPmnKzvvIknLAogICAgICBlbjogJ3sxfSDvvIhVc2VyIFNjcmlwdO+8iScsCiAgICB9LAogIH0pOwoKICBzY3JpcHQudGV4dCA9IHJ1bGUuVGV4dCh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIHBhcmVudDogc2NyaXB0LnNjcmlwdCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmFib3V0VGV4dCwKICAgIHJlZjogewogICAgICBicjogewogICAgICAgIHJlbmRlcigpIHsKICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpOwogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIHZlcnNpb246IHsKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gR00uaW5mby5zY3JpcHQudmVyc2lvbjsKICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpMThuLnVzZXJTY3JpcHRWZXJzaW9uLnJlcGxhY2UoJ3sxfScsIHZlcnNpb24pKTsKICAgICAgICB9LAogICAgICB9LAogICAgICBhdXRob3I6IHsKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgbGluay5ocmVmID0gJ2h0dHBzOi8vd2VpYm8uY29tL3RzaDkwJzsKICAgICAgICAgIGxpbmsudGl0bGUgPSAndHNoOTAnOwogICAgICAgICAgbGluay50ZXh0Q29udGVudCA9ICdAdHNoOTAnOwogICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJywgJ2lkPTM5MjE1ODkwNTcnKTsKICAgICAgICAgIHJldHVybiBsaW5rOwogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIHNjcmlwdFdlaWJvOiB7CiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgIGxpbmsuaHJlZiA9ICdodHRwczovL3dlaWJvLmNvbS95YXdmc2NyaXB0JzsKICAgICAgICAgIGxpbmsudGl0bGUgPSAnWUFXRuiEmuacrCc7CiAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gJ0BZQVdG6ISa5pysJzsKICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCd1c2VyY2FyZCcsICdpZD01NjAxMDMzMTExJyk7CiAgICAgICAgICByZXR1cm4gbGluazsKICAgICAgICB9LAogICAgICB9LAogICAgICBsb2dvOiB7CiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgY29udGFpbmVyLnN0eWxlLmNzc0Zsb2F0ID0gJ3JpZ2h0JzsKICAgICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKDY0LCA2NCk7CiAgICAgICAgICBpbWFnZS5zcmMgPSAnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJajgrQ2p4emRtY2dlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklpQjJhV1YzUW05NFBTSXdJREFnT1RZZ09UWWlJSGRwWkhSb1BTSTVOaUlnYUdWcFoyaDBQU0k1TmlJK0NpQWdQSEJoZEdnZ1ptbHNiRDBpSTBRNU1rUXpRU0lnWkQwaVRURXlMRFUwWXpFeExqWTROeTB3TGpVM05pd3lNUzR4T1RjdE1DNHhORE1zTWpRdU56VXNOeTQxWXpNdU16azRMRFV1TnpBeExEQXVNVGt4TERFekxqQTNOUzB4TGpVc01UaGpNeTQ1TXpZc01DNDNNRFVzTmk0eE5qUXNNaTR3TVRJc09DNHlOU3cwTGpWakxURXdMalE1T1N3d0xUSXhMakF3TVN3d0xUTXhMalVzTUVNeE1pdzNOQzR3TURFc01USXNOak11T1RrNUxERXlMRFUwZWlJdlBnb2dJRHh3WVhSb0lHWnBiR3c5SWlORk9UaEVORGtpSUdROUlrMDNNUzR6TmpZc01qZ3VPVEV4WXkweE1TNHlNRFF0TVRNdU1qWXRNamN1TnpNdE1UZ3VNekUxTFRReUxqazROQzB4TkM0NE5UTm9MVEF1TURBMll5MHpMalV6TERBdU9EQTNMVFV1Tnpnc05DNDFNVE10TlM0d01qUXNPQzR5TnpSak1DNDNOVElzTXk0M05qUXNOQzR5TWpRc05pNHhOamtzTnk0M05UTXNOUzR6Tmpaak1UQXVPRFV5TFRJdU5EWXNNakl1TlRrMUxERXVNVE00TERNd0xqVTJMREV3TGpVMU9HTTNMamsxTnl3NUxqUXhPU3d4TUM0eE1Ua3NNakl1TWpZMkxEWXVOekV4TERNekxqVXlPR3d3TGpBd01pd3dMakF3TW1NdE1TNHhNVEVzTXk0Mk5qa3NNQzQzTmprc055NDFPVE1zTkM0eU1TdzRMamMzT1dNekxqUXlOeXd4TGpFNE5TdzNMakV4TVMwd0xqZ3hPU3c0TGpJeU15MDBMalEzT1dNd0xUQXVNREEzTERBdE1DNHdNakVzTUM0d01ESXRNQzR3TWpkRE9EVXVOVGsxTERZd0xqSXhOeXc0TWk0MU56UXNOREl1TVRVNExEY3hMak0yTml3eU9DNDVNVEZOTlRRdU1UWXhMRFExTGpRNE5tTXROUzQwTlRNdE5pNDBOVGd0TVRNdU5UQTFMVGd1T1RFeExUSXdMamt6T0MwM0xqSXlOR010TXk0d016Z3NNQzQyT1RFdE5DNDVOelFzTXk0NE9ETXROQzR6TWpJc055NHhNamhqTUM0Mk5Td3pMakl6TWl3ekxqWXpOeXcxTGpNd09TdzJMalkyT0N3MExqWXdOWFl3TGpBd04yTXpMall6TXkwd0xqZ3lMRGN1TlRjekxEQXVNemMyTERFd0xqSXpPU3d6TGpVeU4yTXlMalkyT1N3ekxqRTFPQ3d6TGpNNE5pdzNMalEyTERJdU1qUXhMREV4TGpJek5XZ3dMakF3Tm1NdE1DNDVOVElzTXk0eE5URXNNQzQyTmpRc05pNDFNemtzTXk0Mk1UZ3NOeTQxTm1NeUxqazFOU3d4TGpBeExEWXVNVEkxTFRBdU56RXNOeTR3TnprdE15NDROamxETmpFdU1EZzJMRFl3TGpjek9TdzFPUzQyTWpVc05URXVPVFF6TERVMExqRTJNU3cwTlM0ME9EWWlMejRLUEM5emRtYytDZz09JzsKICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbWFnZSk7CiAgICAgICAgICByZXR1cm4gY29udGFpbmVyOwogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIGlzc3VlUGFnZTogewogICAgICAgIHJlbmRlcigpIHsKICAgICAgICAgIGNvbnN0IHVybCA9ICdodHRwczovL2dpdGh1Yi5jb20vdGlhbnNoL3lhb2ZhbmcvaXNzdWVzJzsKICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gaTE4bi5hYm91dElzc3VlVHJhY2tlcjsKICAgICAgICAgIGxpbmsudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgICAgICByZXR1cm4gbGluazsKICAgICAgICB9LAogICAgICB9LAogICAgICBnaXRodWI6IHsKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9naXRodWIuY29tL3RpYW5zaC95YW9mYW5nJzsKICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gaTE4bi5hYm91dEdpdGh1YlJlcG87CiAgICAgICAgICBsaW5rLnRhcmdldCA9ICdfYmxhbmsnOwogICAgICAgICAgcmV0dXJuIGxpbms7CiAgICAgICAgfSwKICAgICAgfSwKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L21haW4vZW50cnkuanMKLy8g6L+Z5Liq5paH5Lu255So5LqO5ZCR55WM6Z2i5LiK5re75Yqg5ryP5paX5Zu+5qCH5ZKM6I+c5Y2V6aG5Cgo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IHBhZ2VtZW51ID0geWF3Zi5wYWdlbWVudTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgaTE4bi5maWx0ZXJNZW51SXRlbSA9IHsKICAgIGNuOiAn6I2v5pa56K6+572uJywKICAgIHR3OiAn6Jel5pa56Kit5a6aJywKICAgIGVuOiAnWUFXRiBTZXR0aW5ncycsCiAgfTsKCiAgLy8g57yp5bCP5pCc57Si5qGG5a695bqm5Lul55WZ5Ye65ryP5paX5oyJ6ZKu55qE5L2N572uCiAgY29uc3Qgc2VhcmNoQ3NzID0gYAouV0JfZ2xvYmFsX25hdiAuZ25fc2VhcmNoX3YyIHsgd2lkdGg6IDExOHB4ICFpbXBvcnRhbnQ7IH0KLldCX2dsb2JhbF9uYXYgLmduX3NlYXJjaF92MiAucGxhY2Vob2xkZXIsIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgLldfaW5wdXQgeyB3aWR0aDogNzVweCAhaW1wb3J0YW50OyB9Ci5nbl90b3BtZW51bGlzdF9zZWFyY2ggeyB3aWR0aDogMTIwcHggIWltcG9ydGFudDsgfQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjEyOTVweCkgewogIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgeyB3aWR0aDogMzc1cHggIWltcG9ydGFudDsgfQogIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgLnBsYWNlaG9sZGVyLCAuV0JfZ2xvYmFsX25hdiAuZ25fc2VhcmNoX3YyIC5XX2lucHV0IHsgd2lkdGg6IDMzMnB4ICFpbXBvcnRhbnQ7IH0KICAuZ25fdG9wbWVudWxpc3Rfc2VhcmNoIHsgd2lkdGg6IDM3N3B4ICFpbXBvcnRhbnQ7IH0KfQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjEwMDZweCkgewogIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgeyB3aWR0aDogNTVweCAhaW1wb3J0YW50OyB9CiAgLldCX2dsb2JhbF9uYXYgLmduX3NlYXJjaF92MiAucGxhY2Vob2xkZXIsIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgLldfaW5wdXQgeyB3aWR0aDogMTJweCAhaW1wb3J0YW50OyB9CiAgLmduX3RvcG1lbnVsaXN0X3NlYXJjaCB7IHdpZHRoOiA1N3B4ICFpbXBvcnRhbnQ7IH0KfQouZ25fdG9wbWVudWxpc3Rfc2VhcmNoIHsgbWluLXdpZHRoOiAxNDBweCAhaW1wb3J0YW50OyB9CmA7CiAgLy8g5re75Yqg5ryP5paX5Zu+5qCH55qE5a6a5LmJCiAgY29uc3QgaWNvbkNzcyA9IGAKLmduX2ZpbHRlciAuV19maWNvbiB7IGZvbnQtZmFtaWx5OiAieWF3Zi1pY29uZm9udCIgIWltcG9ydGFudDsgfQpAZm9udC1mYWNlIHsgZm9udC1mYW1pbHk6ICJ5YXdmLWljb25mb250IjsgZm9udC1zdHlsZTogbm9ybWFsOyBmb250LXdlaWdodDogbm9ybWFsOyBzcmM6IHVybCgiZGF0YTppbWFnZS93b2ZmO2Jhc2U2NCxkMDlHUms5VVZFOEFBQVBJQUFvQUFBQUFCYlFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQkRSa1lnQUFBQTlBQUFBTlVBQUFEb3Q4RVFGa1pHVkUwQUFBSE1BQUFBR2dBQUFCeHRBdzBtVDFNdk1nQUFBZWdBQUFCSkFBQUFZRm1kWWxkamJXRndBQUFDTkFBQUFEZ0FBQUZDQUEwREFHaGxZV1FBQUFKc0FBQUFNQUFBQURZRDVhMW9hR2hsWVFBQUFwd0FBQUFkQUFBQUpBYUFBNEJvYlhSNEFBQUN2QUFBQUFnQUFBQUlDQUFBZDIxaGVIQUFBQUxFQUFBQUJnQUFBQVlBQWxBQWJtRnRaUUFBQXN3QUFBRGtBQUFCMUhoNU9QUndiM04wQUFBRHNBQUFBQllBQUFBZy80WUFNM2ljVlkyeGFnSkJGQURmTys5TzFHTk5KQmNMRndXeFBMVVhBdW12RGVrUFFVbWpUWWpZQ05iUDBzTE8rQWsyTnNMV2ZrTitaTi9lYmlUYUJHNnFxV1lRZkI4UVVTeXp4YVQvTVo3UEp2UFpKNkFIQ0MvYzhsaVd1T2x2SW14WG9mTDFQaVQ2bDZpc2E3YVp0MDBTU0ZqVkpjQ0RoUFdqQkNIaHB3SGVQU0dnVlFnWEx6ZEc0Q0YyMzBoeHFsQXBjMUVsOVp3UCtIZ2RoTXF0WWs3TnhhVmxrVmRNRW4rVDNia2V1WTdkRTNISDdyZ1g4UEQzTlQ3b2M2Z3pmWEpUMHBrOWtUMEhJdDgrVWJ6WW00UkNpcXAvaFpKV1hnQUFBSGljWTJCZ1lHUUFnak8yaTg2RDZBdEpXN1ZoTkFCS1ZRYWdBQUI0bkdOZ1ptRmcvTUxBeXNEQk5KUHBEQU1EUXorRVpuek5ZTXpJeWNEQXhNQUdKS0dBa1FFSkJLUzVwakE0TUVReVJETHIvTmRoaUdHYXdkQ01VQVBrS1FBaEl3QllUd3VtQUFBQWVKeGpZR0JnWm9CZ0dRWkdCaEN3QWZJWXdYd1dCZ1VnelFLRUlIN2svLzhROHY4S3FFb0dSallHR0pQNmdHWUdVeGNBQUpnckJ3eDRuR05nWkdCZ0FPSytGLy85NHZsdHZqSndzekNBd0lXa3JkcHd1dngvTFhNWDB3d2dsNE9CQ1NRS0FGTUNDN3g0bkdOZ1pHQmdtdkcvbGlHR2hRRUVtTHNZR0JsUUFSTUFVNk1EQ0FBQUFBUUFBQUFFQUFCM0FBQlFBQUFDQUFCNG5KV1B3V29DTVJDR3YrZ3FpaFY2S0I3RVE4NUNsbVR4SkwxMm4wQzhpK3pLWGphd0N1S0xlT243OUVINkJIMkVUblNnbEZKb0EwbSttZitmekFSNDRJb2hMY09VaFhLUEVjL0tmWmE4S21maWVWY2VNREVqNVNGVDQ4VnBzckZrNXJlcXhEMGVwZnJPZlRhOEtHZmllVk1lTU9ORGVjamNQSEZoeDVrYVI4T2VTQ3VjemhOY2R1ZmFOZnZZMXJHVjhJZitKWldhU25mSGdRcExRWTZYZXkzNzl5WjNQYkFTTFlqZlNaMi94WlR5ZEJtN1EyV0wzTnUxL1RhT3hHSGxnbmVGRCtMOSt5KzJNbHpIVVh4SlQ2M1RtR3lyN3RqRTFvYmMvK08xVDVSd1RPSjRuR05nWmdDRC84ME1Sa0NLa1FFTkFBQW9WUUc1QUFBPSIpIGZvcm1hdCgid29mZiIpOyB9Ci5nbl90b3BtZW51bGlzdF95YXdmIHsgdG9wOiAzNHB4OyByaWdodDogLTE3cHg7IHdpZHRoOiAxMzRweDsgfQoueWF3Zi1kcm9wLWFyZWEtYWN0aXZlIC5nbl90b3BtZW51bGlzdF95YXdmIHsgZGlzcGxheTogbm9uZTsgfQpgOwoKICBjb25zdCBzZWFyY2hTdHlsZSA9IHV0aWwuY3NzLmFkZChzZWFyY2hDc3MpOwogIGNvbnN0IGljb25TdHlsZSA9IHV0aWwuY3NzLmFkZChpY29uQ3NzKTsKICBpbml0Lm9uRGVpbml0KCgpID0+IHsKICAgIHNlYXJjaFN0eWxlLnJlbW92ZSgpOwogICAgaWNvblN0eWxlLnJlbW92ZSgpOwogIH0pOwoKICBjb25zdCBvbkNsaWNrID0gZnVuY3Rpb24gKGV2ZW50LCB0YWIgPSBudWxsKSB7CiAgICB0cnkgewogICAgICBydWxlLmRpYWxvZyh0YWIpOwogICAgfSBjYXRjaCAoZSkgeyB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSBwcm9tcHRpbmcgZGlhbG9nOiAlbycsIGUpOyB9CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogIH07CgogIC8vIOe7mea8j+aWl+Wbvuagh+a3u+WKoOS4gOS4quiPnOWNlQogIGNvbnN0IGFkZFNjcmlwdE1lbnUgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICBjb25zdCBtZW51TGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgbWVudUxpc3QuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImduX3RvcG1lbnVsaXN0IGduX3RvcG1lbnVsaXN0X3lhd2YiIG5vZGUtdHlwZT0ibXNnTGF5ZXIiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PHVsPjwvdWw+PGRpdiBjbGFzcz0iV19sYXllcl9hcnJvdyI+PHNwYW4gY2xhc3M9IldfYXJyb3dfYm9yIFdfYXJyb3dfYm9yX3QiPjxpIGNsYXNzPSJTX2xpbmUzIj48L2k+PGVtIGNsYXNzPSJTX2JnMl9iciI+PC9lbT48L3NwYW4+PC9kaXY+PC9kaXY+JzsKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtZW51TGlzdC5maXJzdENoaWxkKTsKICAgIGNvbnN0IGRyb3Bkb3duID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5nbl90b3BtZW51bGlzdF95YXdmJyk7CiAgICBjb25zdCB1bCA9IGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7CiAgICAvLyDlhYHorrjlhbbku5blip/og73lkJHoj5zljZXph4zpnaLloZ7kuJzopb8KICAgIHBhZ2VtZW51LnJlYWR5KHVsKTsKICAgIC8vIOWcqOm8oOagh+enu+WFpeaIluiOt+W+l+eEpueCueaXtuWxleekuuS4i+aLieiPnOWNlQogICAgY29uc3QgYWRkVGVtcENsYXNzTmFtZSA9IGFzeW5jIGZ1bmN0aW9uIChjbGFzc05hbWVzLCBkZWxheSkgewogICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpOwogICAgICBkcm9wZG93bi5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzTmFtZXMpOwogICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTsKICAgICAgZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWVzKTsKICAgIH07CiAgICBsZXQgbW91c2VJbkNvdW50ID0gMCwgc2hvd24gPSBmYWxzZTsKICAgIGNvbnN0IHNob3dEcm9wZG93biA9IGZ1bmN0aW9uICgpIHsKICAgICAgbW91c2VJbkNvdW50Kys7CiAgICAgIGlmICghc2hvd24pIHsKICAgICAgICBzaG93biA9IHRydWU7CiAgICAgICAgZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgYWRkVGVtcENsYXNzTmFtZSgnVUlfc3BlZWRfZmFzdCcsICdVSV9hbmlfZmFkZUluRG93bicsIDIwMCk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBoaWRlRHJvcGRvd24gPSBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IGxhc3RJbkNvdW50ID0gbW91c2VJbkNvdW50OwogICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7CiAgICAgIGlmIChsYXN0SW5Db3VudCAhPT0gbW91c2VJbkNvdW50KSByZXR1cm47CiAgICAgIGlmIChzaG93bikgewogICAgICAgIHNob3duID0gZmFsc2U7CiAgICAgICAgYXdhaXQgYWRkVGVtcENsYXNzTmFtZSgnVUlfc3BlZWRfZmFzdCcsICdVSV9hbmlfZmFkZU91dFVwJywgMjAwKTsKICAgICAgICBpZiAobGFzdEluQ291bnQgIT09IG1vdXNlSW5Db3VudCkgcmV0dXJuOwogICAgICAgIGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIH0KICAgIH07CiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHNob3dEcm9wZG93bik7CiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGhpZGVEcm9wZG93bik7CiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIHNob3dEcm9wZG93bik7CiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBoaWRlRHJvcGRvd24pOwoKICAgIC8vIOa3u+WKoOiPnOWNlemhue+8jOi3s+i9rOWIsOiuvue9rumhtemdoueahOWQhOagh+etvumhtQogICAgcnVsZS50YWJzLmZvckVhY2goKHRhYiwgaW5kZXgpID0+IHsKICAgICAgaWYgKCF0YWIucGFnZW1lbnUpIHJldHVybjsKICAgICAgcGFnZW1lbnUuYWRkKHsKICAgICAgICB0aXRsZTogdGFiLnRlbXBsYXRlLAogICAgICAgIG9uQ2xpY2s6IGV2ZW50ID0+IG9uQ2xpY2soZXZlbnQsIHRhYiksCiAgICAgICAgb3JkZXI6IGluZGV4LAogICAgICB9KTsKICAgIH0pOwoKICAgIC8vIOWmguaenOeCueWHu+S6hua8j+aWl+Wbvuagh++8jOaIkeS7rOS8muebtOaOpeaYvuekuuiuvue9rueql+WPo++8jOS9huWmguaenOaYr+inpuaRuOeCueWHu+eahO+8jOaIkeS7rOWFiOaYvuekuuS4i+aLieiPnOWNlQogICAgY29uc3Qgb25Ub3VjaCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBpZiAoc2hvd24pIHJldHVybjsKICAgICAgc2hvd0Ryb3Bkb3duKCk7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgfTsKICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaCwgdHJ1ZSk7CiAgfTsKICBpbml0Lm9uTG9hZCgoKSA9PiB7CiAgICBjb25zdCBpY29uID0gZnVuY3Rpb24gKCkgewogICAgICBjb25zdCByZWZlcmVuY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfZ2xvYmFsX25hdiAuZ25fc2V0X2xpc3QnKTsKICAgICAgaWYgKCFyZWZlcmVuY2UpIHsgc2V0VGltZW91dChpY29uLCAxMDApOyByZXR1cm47IH0KICAgICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpOwogICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0iZ25fc2V0X2xpc3QgeWF3Zi1nbl9zZXRfbGlzdCI+PGEgbm9kZS10eXBlPSJmaWx0ZXIiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIGNsYXNzPSJnbl9maWx0ZXIiPjxlbSBjbGFzcz0iV19maWNvbiBmaWNvbl9tYWlsIFNfZmljb24iPlk8L2VtPjwvYT48L2Rpdj5gOwogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQsIHRydWUpOwogICAgICBjb25zdCBidXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmduX2ZpbHRlcicpOwogICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsIGkxOG4uZmlsdGVyTWVudUl0ZW0pOwogICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTsKICAgICAgcmVmZXJlbmNlLmJlZm9yZShjb250YWluZXIpOwogICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICBhd2FpdCBzZWFyY2hTdHlsZS5yZWFkeTsKICAgICAgICBjb25zdCBbeyB3aWR0aCwgaGVpZ2h0IH1dID0gYnV0dG9uLmdldENsaWVudFJlY3RzKCk7CiAgICAgICAgY29uc3Qgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwogICAgICAgIC8vIOWmguaenOeUqOaIt+mAieaLqeS4jeaYvuekuua8j+aWl+aMiemSru+8jOmCo+S5iOimgeaBouWkjeaQnOe0ouahhueahOWuveW6pgogICAgICAgIC8vIOaJqeWxleS4jeaPkOS+m+aYvuekuuaIluS4jeaYvuekuueahOmAiemhue+8jOS9huaYr+S8muaPkOS+m+iHquWumuS5iSBDU1Mg5Yqf6IO9CiAgICAgICAgaWYgKCFzaXplKSBzZWFyY2hTdHlsZS5yZW1vdmUoKTsKICAgICAgfSwgMCk7CiAgICB9OwogICAgY29uc3QgbWVudWl0ZW0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IG1lbnVpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nbl90b3BtZW51bGlzdCB1bCBsaS5saW5lJyk7CiAgICAgIGlmICghbWVudWl0ZW1zPy5sZW5ndGgpIHsgc2V0VGltZW91dChtZW51aXRlbSwgMTAwKTsgcmV0dXJuOyB9CiAgICAgIGNvbnN0IHJlZmVyZW5jZSA9IFsuLi5tZW51aXRlbXNdLnBvcCgpOwogICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgIHVsLmlubmVySFRNTCA9IGAKPGxpIGNsYXNzPSJsaW5lIFNfbGluZTEgeWF3Zi1jb25maWctbWVudWxpbmUiPjwvbGk+CjxsaT48YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBjbGFzcz0ieWF3Zi1jb25maWctbWVudWl0ZW0iPjwvYT48L2xpPgpgOwogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5pbXBvcnROb2RlKHVsLCB0cnVlKTsKICAgICAgY29uc3QgaXRlbSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctbWVudWl0ZW0nKTsKICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOwogICAgICBpdGVtLnRleHRDb250ZW50ID0gaTE4bi5maWx0ZXJNZW51SXRlbTsKICAgICAgcmVmZXJlbmNlLmJlZm9yZSguLi5jb250YWluZXIuY2hpbGRyZW4pOwoKICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWduX3NldF9saXN0Jyk7CiAgICAgIGFkZFNjcmlwdE1lbnUoaWNvbkNvbnRhaW5lcik7CiAgICB9OwogICAgaWYgKFsnc2VhcmNoJywgJ3R0YXJ0aWNsZSddLmluY2x1ZGVzKGluaXQucGFnZS50eXBlKCkpKSByZXR1cm47CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgIHNlYXJjaFN0eWxlLnJlbW92ZSgpOwogICAgICBpY29uU3R5bGUucmVtb3ZlKCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGljb24oKTsgbWVudWl0ZW0oKTsKICB9KTsKCiAgaW5pdC5vbkxvYWQoKCkgPT4gewogICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBmaXhOYXZCYXJVUygpIHsKICAgICAgLy8g57uf5LiA5rW35aSW54mI5a+86Iiq5qCPCiAgICAgIGNvbnN0IG5hdlVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX2dsb2JhbF9uYXZfdXMnKTsKICAgICAgaWYgKG5hdlVzKSBuYXZVcy5jbGFzc0xpc3QucmVtb3ZlKCdXQl9nbG9iYWxfbmF2X3VzJyk7CiAgICB9KTsKICB9KTsKCn0oKSk7Cgo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3Qgc2hvd1J1bGVEaWFsb2cgPSBmdW5jdGlvbiAodGFiID0gbnVsbCkgewogICAgdHJ5IHsKICAgICAgcnVsZS5kaWFsb2codGFiKTsKICAgIH0gY2F0Y2ggKGUpIHsgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgcHJvbXB0aW5nIGRpYWxvZzogJW8nLCBlKTsgfQogIH07CgogIGluaXQub25Mb2FkKCgpID0+IHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDcpIHJldHVybjsKICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5LCBzaG93UnVsZURpYWxvZykgewogICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ3dlaWJvLXRvcC1uYXYnLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICB2bS5jb25maWdzLnNwbGljZSgtMSwgMCwgewogICAgICAgICAgZGl2aWRlcjogdHJ1ZSwKICAgICAgICAgIGhyZWY6ICcnLAogICAgICAgICAgbmFtZTogJ+iNr+aWueiuvue9ricsCiAgICAgICAgICB0eXBlOiAneWF3Zi1jb25maWcnLAogICAgICAgIH0pOwogICAgICAgIHZtLmNvbmZpZ0hhbmRsZSA9IChmdW5jdGlvbiAoY29uZmlnSGFuZGxlKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3NbaW5kZXhdLnR5cGUgPT09ICd5YXdmLWNvbmZpZycpIHsKICAgICAgICAgICAgICB0aGlzLmNvbmZpZ0Nsb3NlID0gdHJ1ZTsKICAgICAgICAgICAgICBzaG93UnVsZURpYWxvZygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbmZpZ0hhbmRsZS5jYWxsKHRoaXMsIGluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgfS5iaW5kKHZtKTsKICAgICAgICB9KHZtLmNvbmZpZ0hhbmRsZSkpOwogICAgICB9KTsKICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIHNob3dSdWxlRGlhbG9nKTsKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgoK"},{"name":"网页限制解除(改)","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["*www.bilibili.com/video*","*www.bilibili.com/v*","*www.bilibili.com/bangumi*","*www.youtube.com/watch*","*www.panda.tv*"],"orig_includes":[],"orig_matches":["*://*/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":["/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?www\\.bilibili\\.com(:[0-9]{1,5})?\\/.*$)/"],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"rwl_userData":"o{\"status\":1,\"version\":0.1,\"message\":\"啦啦啦,啦啦啦,我是卖报的小行家\",\"positionTop\":0,\"positionLeft\":0,\"positionRight\":\"auto\",\"addBtn\":true,\"connectToTheServer\":false,\"waitUpload\":[\"www.luckydesigner.space\"],\"currentURL\":\"https://www.luckydesigner.space/potplayer-8000-channel-to-watch/\",\"rules\":{\"rule_def\":{\"name\":\"default\",\"hook_eventNames\":\"contextmenu|select|selectstart|copy|cut|dragstart|mousemove|beforeunload\",\"unhook_eventNames\":\"mousedown|mouseup|keydown|keyup\",\"dom0\":true,\"hook_addEventListener\":true,\"hook_preventDefault\":true,\"hook_set_returnValue\":true,\"add_css\":true},\"rule_plus\":{\"name\":\"default\",\"hook_eventNames\":\"contextmenu|select|selectstart|copy|cut|dragstart|mousedown|mouseup|mousemove|beforeunload\",\"unhook_eventNames\":\"keydown|keyup\",\"dom0\":true,\"hook_addEventListener\":true,\"hook_preventDefault\":true,\"hook_set_returnValue\":true,\"add_css\":true},\"rule_zhihu\":{\"name\":\"default\",\"hook_eventNames\":\"contextmenu|select|selectstart|copy|cut|dragstart|mousemove\",\"unhook_eventNames\":\"keydown|keyup\",\"dom0\":true,\"hook_addEventListener\":true,\"hook_preventDefault\":true,\"hook_set_returnValue\":true,\"add_css\":true}},\"data\":[\"b.faloo.com\",\"bbs.coocaa.com\",\"book.hjsm.tom.com\",\"book.zhulang.com\",\"book.zongheng.com\",\"chokstick.com\",\"chuangshi.qq.com\",\"city.udn.com\",\"cutelisa55.pixnet.net\",\"huayu.baidu.com\",\"imac.hk\",\"life.tw\",\"luxmuscles.com\",\"movie.douban.com\",\"news.missevan.com\",\"read.qidian.com\",\"vipreader.qidian.com\",\"www.15yan.com\",\"www.17k.com\",\"www.18183.com\",\"www.360doc.com\",\"www.coco01.net\",\"www.eyu.com\",\"www.hongshu.com\",\"www.hongxiu.com\",\"www.imooc.com\",\"www.jjwxc.net\",\"www.luckydesigner.space\",\"www.myhtlmebook.com\",\"www.pigai.org\",\"www.ppkao.com\",\"www.readnovel.com\",\"www.ruiwen.com\",\"www.sdifen.com\",\"www.shangc.net\",\"www.tadu.com\",\"www.xxsy.net\",\"www.z3z4.com\",\"www.zhihu.com\",\"yuedu.163.com\"],\"shortcut\":3}"},"ts":1633428465811},"enabled":true,"position":7,"file_url":"https://greasyfork.org/scripts/28497-remove-web-limits-modified/code/Remove%20web%20limits(modified).user.js","uuid":"9313932a-356d-48ce-b530-cf84d5243907","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSAgICAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vdXNlcnMvMTA2MjIyLXF4aW4taQogCi8vIEBuYW1lICAgICAgICAgICAgICDnvZHpobXpmZDliLbop6PpmaQo5pS5KQovLyBAbmFtZTplbiAgICAgICAgICAgUmVtb3ZlIHdlYiBsaW1pdHMobW9kaWZpZWQpCi8vIEBuYW1lOnpoICAgICAgICAgICDnvZHpobXpmZDliLbop6PpmaQo5pS5KQovLyBAbmFtZTpqYSAgICAgICAgICAg44Km44Kn44OW44Gu6KaP5Yi257ep5ZKMKOWkieabtCkKIAovLyBAYXV0aG9yICAgICAgICAgICAgQ2F0NzMgJiBpcXhpbijkv67mlLkpIAovLyBAY29udHJpYnV0b3IgICAgICAgaXF4aW4KIAovLyBAZGVzY3JpcHRpb24gICAgICAg6YCa5p2A5aSn6YOo5YiG572R56uZLOWPr+S7peino+mZpOemgeatouWkjeWItuOAgeWJquWIh+OAgemAieaLqeaWh+acrOOAgeWPs+mUruiPnOWNleeahOmZkOWItuOAguWOn+S9nOiAhWNhdDczLOWboOS4uuWSjOaQnOe0oui3s+i9rOiEmuacrOWGsueqgSzpgYLov5vooYzkuobmlLnliqjjgIIKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFBhc3MgdG8ga2lsbCBtb3N0IG9mIHRoZSBzaXRlLCB5b3UgY2FuIGxpZnQgdGhlIHJlc3RyaWN0aW9ucyBwcm9oaWJpdGVkIHRvIGNvcHksIGN1dCwgc2VsZWN0IHRoZSB0ZXh0LCByaWdodC1jbGljayBtZW51LnJldmlzZWQgdmVyc2lvbgovLyBAZGVzY3JpcHRpb246emggICAg6YCa5p2A5aSn6YOo5YiG572R56uZLOWPr+S7peino+mZpOemgeatouWkjeWItuOAgeWJquWIh+OAgemAieaLqeaWh+acrOOAgeWPs+mUruiPnOWNleeahOmZkOWItuOAguWOn+S9nOiAhWNhdDczLOWboOS4uuWSjOaQnOe0oui3s+i9rOiEmuacrOWGsueqgSzpgYLov5vooYzkuobmlLnliqgKLy8gQGRlc2NyaXB0aW9uOnpoLVRXIOmAmuauuuWkp+mDqOWIhue2suermSzlj6/ku6Xop6PpmaTnpoHmraLlvqnliLbjgIHliarliIfjgIHpgbjmk4fmlofmnKzjgIHlj7PpjbXoj5zllq7nmoTpmZDliLbjgIIKLy8gQGRlc2NyaXB0aW9uOmphICAgIOOCteOCpOODiOOBruOBu+OBqOOCk+OBqeOCkuauuuOBmeOBn+OCgeOBq+a4oeOBl+OAgeOBguOBquOBn+OBr+OAgeOCs+ODlOODvOWIh+OCiuWPluOCiuOAgeODhuOCreOCueODiOOAgeWPs+OCr+ODquODg+OCr+ODoeODi+ODpeODvOOCkumBuOaKnuOBmeOCi+OBk+OBqOOBr+emgeatouOBruWItumZkOOCkuino+mZpOOBmeOCi+OBk+OBqOOBjOOBp+OBjeOBvuOBmeOAggogCi8vIEBkZXNjcmlwdGlvbiAgICAgICDljp/kvZzogIVodHRwczovL3d3dy5naXRodWIuY29tL0NhdDczNzMvLOWboOS4uuWSjOaQnOe0oui3s+i9rOiEmuacrOWGsueqgSzpgYLov5vooYzkuobmlLnliqgKLy8gQGhvbWVwYWdlVVJMICAgICAgIGh0dHBzOi8vY2F0NzM3My5naXRodWIuaW8vcmVtb3ZlLXdlYi1saW1pdHMvCi8vIEBzdXBwb3J0VVJMICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3NjcmlwdHMvMjg0OTcKIAovLyBAaWNvbiAgICAgICAgICAgICAgIGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBUUFBQURaYzdKL0FBQUJwRWxFUVZSNG5PM1Z2MnVVUVJERzhjL2ViU01XcWF5MHRyQVRBeHJVU2kxUzJBaVdGb0pZcE5DZ29CalVSc0hXSktlTlJmQXZzRGdGaXhRcUtkUFoyVmlFaUNKWUJPUXU4ZjFoRVhPNTk3MTNqN01VZkxaNmQyYS9POHZNTzBPekRuaW45S3UyTWp2dWF3MDd4Z1NBWUVWWGUyaW5kTWhqOTJ6cEtKTG5CaEY4TURleWU5aG42emJONzBlUmlxQ3cwMkJyYTN1cDhCQkx1MUZFQnhzQnVjWHFXNGNzejBVTGU0am9yU0NNdVBVODlib1JFTERNSGlJNlk4VjY1YmJDVVRjY2M3MFJrYU93S0xPZzBJa3lYYTlxVGpPdTJMQXM2Tlp1RDg2aHJkVHl4Uk5Ua1VxcWRoWGxIcm5nR1JWRVpzTXBKd2V4OUR4SVpTSFljbGVzSWI2NUxDb0hnSXM2NlVKcTZidERCWkhaclBoOFY2WUJPWDY2TGJPa1RHY2tCWWltQlcyRlZUTmV1T1pOeXJGSjIzNllsNE5TeTVTYlZtMVBEdmhvZHFneU1sZWRUZFJsQXREenFmTDl0Zmt3VXR5YVJrdjlMd0ZqOUIvdzd3UHljWE9ocWxKMHlaSEtQQ2hNaTVNQ2lNNDdYaHNvcGJWSkFVSGZyWWJtTi9FVG9OKzAyZUxQZno5T1l5WmhGSnpXMUpuM2xUc3hhS1FqQ2twNTJqeTQ1cjFadlNiVGI5TTBkNFBCb3pHWkFBQUFBRWxGVGtTdVFtQ0MKIAovLyBAdmVyc2lvbiAgICAgICAgICAgNC40LjYKLy8gQGxpY2Vuc2UgICAgICAgICAgIExHUEx2MwogCi8vIEBtYXRjaCAgICAgICAgICAgICAqOi8vKi8qCi8vIEBleGNsdWRlICAgICAgICAqd3d3LmJpbGliaWxpLmNvbS92aWRlbyoKLy8gQGV4Y2x1ZGUgICAgICAgICp3d3cuYmlsaWJpbGkuY29tL3YqCi8vIEBleGNsdWRlICAgICAgICAqd3d3LmJpbGliaWxpLmNvbS9iYW5ndW1pKgovLyBAZXhjbHVkZSAgICAgICAgKnd3dy55b3V0dWJlLmNvbS93YXRjaCoKLy8gQGV4Y2x1ZGUgICAgICAgICp3d3cucGFuZGEudHYqCiAKLy8gQGNvbm5lY3QgICAgIGVlbW0ubWUKLy8gQGdyYW50ICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgIEdNX2RlbGV0ZVZhbHVlCi8vIEBncmFudCAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgR01fc2V0Q2xpcGJvYXJkCi8vIEBncmFudCAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBydW4tYXQgICAgICBkb2N1bWVudC1zdGFydAovLyA9PS9Vc2VyU2NyaXB0PT0KKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwogCiAgICB2YXIgc2V0dGluZ0RhdGEgPSB7CiAgICAgICAgInN0YXR1cyI6MSwKICAgICAgICAidmVyc2lvbiIgOiAwLjEsCiAgICAgICAgIm1lc3NhZ2UiIDogIuWVpuWVpuWVpizllabllabllaYs5oiR5piv5Y2W5oql55qE5bCP6KGM5a62IiwKICAgICAgICAicG9zaXRpb25Ub3AiOiIwIiwKICAgICAgICAicG9zaXRpb25MZWZ0IjoiMCIsCiAgICAgICAgInBvc2l0aW9uUmlnaHQiOiJhdXRvIiwKICAgICAgICAiYWRkQnRuIiA6IHRydWUsCiAgICAgICAgImNvbm5lY3RUb1RoZVNlcnZlciIgOiBmYWxzZSwKICAgICAgICAid2FpdFVwbG9hZCI6W10sCiAgICAgICAgImN1cnJlbnRVUkwiOiJudWxsIiwKICAgICAgICAic2hvcnRjdXQiOjMsCiAgICAgICAgLy8g5Z+f5ZCN6KeE5YiZ5YiX6KGoCiAgICAgICAgInJ1bGVzIiA6IHsKICAgICAgICAgICAgInJ1bGVfZGVmIjogewogICAgICAgICAgICAgICAgIm5hbWUiOiAiZGVmYXVsdCIsCiAgICAgICAgICAgICAgICAiaG9va19ldmVudE5hbWVzIjogImNvbnRleHRtZW51fHNlbGVjdHxzZWxlY3RzdGFydHxjb3B5fGN1dHxkcmFnc3RhcnR8bW91c2Vtb3ZlfGJlZm9yZXVubG9hZCIsCiAgICAgICAgICAgICAgICAidW5ob29rX2V2ZW50TmFtZXMiOiAibW91c2Vkb3dufG1vdXNldXB8a2V5ZG93bnxrZXl1cCIsCiAgICAgICAgICAgICAgICAiZG9tMCI6IHRydWUsCiAgICAgICAgICAgICAgICAiaG9va19hZGRFdmVudExpc3RlbmVyIjogdHJ1ZSwKICAgICAgICAgICAgICAgICJob29rX3ByZXZlbnREZWZhdWx0IjogdHJ1ZSwKICAgICAgICAgICAgICAgICJob29rX3NldF9yZXR1cm5WYWx1ZSI6IHRydWUsCiAgICAgICAgICAgICAgICAiYWRkX2NzcyI6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgInJ1bGVfcGx1cyI6IHsKICAgICAgICAgICAgICAgICJuYW1lIjogImRlZmF1bHQiLAogICAgICAgICAgICAgICAgImhvb2tfZXZlbnROYW1lcyI6ICJjb250ZXh0bWVudXxzZWxlY3R8c2VsZWN0c3RhcnR8Y29weXxjdXR8ZHJhZ3N0YXJ0fG1vdXNlZG93bnxtb3VzZXVwfG1vdXNlbW92ZXxiZWZvcmV1bmxvYWQiLAogICAgICAgICAgICAgICAgInVuaG9va19ldmVudE5hbWVzIjogImtleWRvd258a2V5dXAiLAogICAgICAgICAgICAgICAgImRvbTAiOiB0cnVlLAogICAgICAgICAgICAgICAgImhvb2tfYWRkRXZlbnRMaXN0ZW5lciI6IHRydWUsCiAgICAgICAgICAgICAgICAiaG9va19wcmV2ZW50RGVmYXVsdCI6IHRydWUsCiAgICAgICAgICAgICAgICAiaG9va19zZXRfcmV0dXJuVmFsdWUiOiB0cnVlLAogICAgICAgICAgICAgICAgImFkZF9jc3MiOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJydWxlX3poaWh1IjogewogICAgICAgICAgICAgICAgIm5hbWUiOiAiZGVmYXVsdCIsCiAgICAgICAgICAgICAgICAiaG9va19ldmVudE5hbWVzIjogImNvbnRleHRtZW51fHNlbGVjdHxzZWxlY3RzdGFydHxjb3B5fGN1dHxkcmFnc3RhcnR8bW91c2Vtb3ZlIiwKICAgICAgICAgICAgICAgICJ1bmhvb2tfZXZlbnROYW1lcyI6ICJrZXlkb3dufGtleXVwIiwKICAgICAgICAgICAgICAgICJkb20wIjogdHJ1ZSwKICAgICAgICAgICAgICAgICJob29rX2FkZEV2ZW50TGlzdGVuZXIiOiB0cnVlLAogICAgICAgICAgICAgICAgImhvb2tfcHJldmVudERlZmF1bHQiOiB0cnVlLAogICAgICAgICAgICAgICAgImhvb2tfc2V0X3JldHVyblZhbHVlIjogdHJ1ZSwKICAgICAgICAgICAgICAgICJhZGRfY3NzIjogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAiZGF0YSI6IFsKICAgICAgICAgICAgImIuZmFsb28uY29tIiwKICAgICAgICAgICAgImJicy5jb29jYWEuY29tIiwKICAgICAgICAgICAgImJvb2suaGpzbS50b20uY29tIiwKICAgICAgICAgICAgImJvb2suemh1bGFuZy5jb20iLAogICAgICAgICAgICAiYm9vay56b25naGVuZy5jb20iLAogICAgICAgICAgICAiY2hva3N0aWNrLmNvbSIsCiAgICAgICAgICAgICJjaHVhbmdzaGkucXEuY29tIiwKICAgICAgICAgICAgImNpdHkudWRuLmNvbSIsCiAgICAgICAgICAgICJjdXRlbGlzYTU1LnBpeG5ldC5uZXQiLAogICAgICAgICAgICAiaHVheXUuYmFpZHUuY29tIiwKICAgICAgICAgICAgImltYWMuaGsiLAogICAgICAgICAgICAibGlmZS50dyIsCiAgICAgICAgICAgICJsdXhtdXNjbGVzLmNvbSIsCiAgICAgICAgICAgICJuZXdzLm1pc3NldmFuLmNvbSIsCiAgICAgICAgICAgICJyZWFkLnFpZGlhbi5jb20iLAogICAgICAgICAgICAid3d3LjE1eWFuLmNvbSIsCiAgICAgICAgICAgICJ3d3cuMTdrLmNvbSIsCiAgICAgICAgICAgICJ3d3cuMTgxODMuY29tIiwKICAgICAgICAgICAgInd3dy4zNjBkb2MuY29tIiwKICAgICAgICAgICAgInd3dy5jb2NvMDEubmV0IiwKICAgICAgICAgICAgInd3dy5leXUuY29tIiwKICAgICAgICAgICAgInd3dy5ob25nc2h1LmNvbSIsCiAgICAgICAgICAgICJ3d3cuaG9uZ3hpdS5jb20iLAogICAgICAgICAgICAid3d3Lmltb29jLmNvbSIsCiAgICAgICAgICAgICJ3d3cuamp3eGMubmV0IiwKICAgICAgICAgICAgInd3dy5yZWFkbm92ZWwuY29tIiwKICAgICAgICAgICAgInd3dy50YWR1LmNvbSIsCiAgICAgICAgICAgICJ3d3cueHhzeS5uZXQiLAogICAgICAgICAgICAid3d3LnozejQuY29tIiwKICAgICAgICAgICAgInd3dy56aGlodS5jb20iLAogICAgICAgICAgICAieXVlZHUuMTYzLmNvbSIsCiAgICAgICAgICAgICJ3d3cucHBrYW8uY29tIiwKICAgICAgICAgICAgIm1vdmllLmRvdWJhbi5jb20iLAogICAgICAgICAgICAid3d3LnJ1aXdlbi5jb20iLAogICAgICAgICAgICAidmlwcmVhZGVyLnFpZGlhbi5jb20iLAogICAgICAgICAgICAid3d3LnBpZ2FpLm9yZyIsCiAgICAgICAgICAgICJ3d3cuc2hhbmdjLm5ldCIsCiAgICAgICAgICAgICJ3d3cubXlodGxtZWJvb2suY29tIiwKICAgICAgICAgICAgInd3dy55dXF1ZS5jb20iLAogICAgICAgICAgICAid3d3LmxvbmdtYWJvb2tjbi5jb20iLAogICAgICAgICAgICAid3d3LmFscGhhcG9saXMuY28uanAiLAogICAgICAgICAgICAid3d3LnNkaWZlbi5jb20iLAogICAgICAgICAgICAidm90ZXR3LmNvbSIsCiAgICAgICAgICAgICJib2tlMTEyLmNvbSIsCiAgICAgICAgICAgICJ3d3cubXlodGVib29rcy5jb20iLAogICAgICAgICAgICAid3d3LnhpZWd3LmNuIiwKICAgICAgICAgICAgImNodWFuZ3NoaS5xcS5jb20iLAogICAgICAgICAgICAid3d3LnV0YS1uZXQuY29tIiwKICAgICAgICAgICAgInd3dy5iaW1pYWNnLm5ldCIKICAgICAgICBdCiAgICB9CiAKICAgIHZhciByd2xfdXNlckRhdGEgPSBudWxsOwogICAgdmFyIGhvc3RuYW1lID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lOwogICAgdmFyIGJ0bl9ub2RlID0gbnVsbDsgICAKICAgIHZhciBydWxlID0gbnVsbDsKICAgIHZhciBsaXN0ID0gbnVsbDsKICAgIHZhciBoYXNGcmFtZSA9IGZhbHNlOwogCiAgICAvLyDlgqjlrZjlkI3np7AKICAgIHZhciBzdG9yYWdlTmFtZSA9ICJpcXhpblN0b3JhZ2VOYW1lIjsKICAgIC8vIOimgeWkhOeQhueahCBldmVudCDliJfooagKICAgIHZhciBob29rX2V2ZW50TmFtZXMsIHVuaG9va19ldmVudE5hbWVzLCBldmVudE5hbWVzOwogICAgLy8g5YKo5a2Y6KKrIEhvb2sg55qE5Ye95pWwCiAgICB2YXIgRXZlbnRUYXJnZXRfYWRkRXZlbnRMaXN0ZW5lciA9IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyOwogICAgdmFyIGRvY3VtZW50X2FkZEV2ZW50TGlzdGVuZXIgPSBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyOwogICAgdmFyIEV2ZW50X3ByZXZlbnREZWZhdWx0ID0gRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0OwogCiAgICAvLyDmn6XnnIvmnKzlnLDmmK/lkKblrZjlnKjml6fmlbDmja4KICAgIHJ3bF91c2VyRGF0YSA9IEdNX2dldFZhbHVlKCJyd2xfdXNlckRhdGEiKTsKICAgIGlmKCFyd2xfdXNlckRhdGEpewogICAgICAgIHJ3bF91c2VyRGF0YSA9IHNldHRpbmdEYXRhCiAgICAgICAgLy8gR01fc2V0VmFsdWUoInJ3bF91c2VyRGF0YSIscndsX3VzZXJEYXRhKTsKICAgIH0KICAgIC8vIOiHquWKqOabtOaWsOaVsOaNrgogICAgZm9yKGxldCB2YWx1ZSBpbiBzZXR0aW5nRGF0YSl7CiAgICAgICAgaWYoIXJ3bF91c2VyRGF0YS5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpewogICAgICAgICAgICByd2xfdXNlckRhdGFbdmFsdWVdID0gc2V0dGluZ0RhdGFbdmFsdWVdOwogICAgICAgICAgICBHTV9zZXRWYWx1ZSgicndsX3VzZXJEYXRhIixyd2xfdXNlckRhdGEpOwogICAgICAgIH0KICAgIH0KIAogICAgdmVyc2lvbl91cF8zX3RvXzQoKTsKIAogICAgLy8g6I635Y+W6buR5ZCN5Y2V572R56uZCiAgICBsaXN0ID0gZ2V0X2JsYWNrX2xpc3QoKTsKIAogICAgLy8g5re75Yqg5oyJ6ZKuCiAgICAvLyBpZihyd2xfdXNlckRhdGEuYWRkQnRuKXsKICAgICAgICBhZGRCdG4oKTsgIC8vIOa3u+WKoAogICAgICAgIGJ0bl9ub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJsYWNrX25vZGUiKTsKIAogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJibGFja19ub2RlIikpewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgICAgICBxeGluU3RhcnQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFkZEJ0bigpOwogICAgICAgICAgICB9CiAgICAgICAgfSw1MDApCiAKICAgIC8vIH0KIAogICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgi5aSN5Yi26ZmQ5Yi26Kej6ZmkIOiuvue9riIsIHNldE1lbnUpCiAgICB2YXIgdXNlclNldHRpbmcgPSBHTV9nZXRWYWx1ZSgicndsX3VzZXJEYXRhIik7CiAKICAgIC8vIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLeWHveaVsCBmdW5jCiAKICAgIGZ1bmN0aW9uIHF4aW5TdGFydCgpewogICAgICAgIGNvbnNvbGUubG9nKCLohJrmnKw6IOWkjeWItumZkOWItuino+mZpCjmlLkpIC0tLSDlvIDlp4vmiafooYwgLS0tIOWPkeW4g+iAhTogcXhpbiAtLS0gR2l0SHViOiBodHRwczovL2dpdGh1Yi5jb20vcXhpbkdpdEh1Yi9SZW1vdmUtd2ViLWxpbWl0cy0iKTsKICAgICAgICBhZGREcmFnRXZlbigpOwogICAgICAgIHNldEJ0bkNsaWNrKCk7CiAKICAgICAgICAvLyDmo4Dmn6XmmK/lkKblnKjpu5HlkI3ljZXkuK0KICAgICAgICBpZihjaGVja19ibGFja19saXN0KGxpc3QsaG9zdG5hbWUpKXsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKHJ3bF91c2VyRGF0YS5hZGRCdG4pewogICAgICAgICAgICAgICAgICAgIGJ0bl9ub2RlLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCLohJrmnKxyd2wt6ZSZ6K+v77yaXG4gYnRuX25vZGUgOiAlc1xuJXNcbuiEmuacrHJ3bC3plJnor6/kvY3nva7vvJogYnRuX25vZGUuY2hlY2tlZCA9IHRydWU7IixidG5fbm9kZSxlKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIGluaXQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KIAogICAgLy/mt7vliqDmjInpkq4gZnVuYwogICAgZnVuY3Rpb24gYWRkQnRuKCl7CiAgICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJyZW1vdmUtd2ViLWxpbWl0cy1pcXhpbiIpOwogICAgICAgIG5vZGUuaWQgPSAicndsLWlxeGluIjsKICAgICAgICBub2RlLmNsYXNzTmFtZSA9ICJyd2wtZXhlbXB0IjsKIAogICAgICAgIC8vIOWGjeasoeaJk+W8gOeql+WPo+Wwj+S6juS5i+WJjeeql+WPo+eahOaDheWGtSzlr7zoh7TmjInpkq7lh7rnjrDlnKjlj6/op4bnqpflj6PkuYvlpJYKICAgICAgICB2YXIgc2NyZWVuQ2xpZW50SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKICAgICAgICB2YXIgdGVtcEhlaWdodDsKICAgICAgICBpZiAocndsX3VzZXJEYXRhLnBvc2l0aW9uVG9wPnNjcmVlbkNsaWVudEhlaWdodCl7CiAgICAgICAgICAgIHRlbXBIZWlnaHQgID0gc2NyZWVuQ2xpZW50SGVpZ2h0IC00MDsKICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgIHRlbXBIZWlnaHQgPSByd2xfdXNlckRhdGEucG9zaXRpb25Ub3A7CiAgICAgICAgfQogICAgICAgIC8vIOaUueWPmOeql+WPo+Wkp+Wwj+eahOaDheWGtQogICAgICAgIHdpbmRvdy5vbnJlc2l6ZT1mdW5jdGlvbigpeyAgCiAgICAgICAgICAgIHZhciBzY3JlZW5DbGllbnRIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgICAgICAgICB2YXIgdGVtcEhlaWdodDsKIAogICAgICAgICAgICBpZiAocndsX3VzZXJEYXRhLnBvc2l0aW9uVG9wPnNjcmVlbkNsaWVudEhlaWdodCl7CiAgICAgICAgICAgICAgICAgICAgdGVtcEhlaWdodCAgPSBzY3JlZW5DbGllbnRIZWlnaHQgLTQwOwogICAgICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgICAgICB0ZW1wSGVpZ2h0ID0gcndsX3VzZXJEYXRhLnBvc2l0aW9uVG9wOwogICAgICAgICAgICB9CiAKICAgICAgICAgICAgbm9kZS5zdHlsZS50b3AgPSAgdGVtcEhlaWdodCArICJweCI7CiAgICAgICAgfQogCiAgICAgICAgdGVtcEhlaWdodCA9IHRlbXBIZWlnaHQ8MD8wOnRlbXBIZWlnaHQKICAgICAgICBub2RlLnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246Zml4ZWQ7dG9wOiIrdGVtcEhlaWdodCsicHg7bGVmdDoiK3J3bF91c2VyRGF0YS5wb3NpdGlvbkxlZnQrInB4O3JpZ2h0OiIrcndsX3VzZXJEYXRhLnBvc2l0aW9uUmlnaHQrInB4OyI7CiAgICAgICAgLy8gbm9kZS5pbm5lckhUTUwgPSAnPGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0iIiBpZD0iYmxhY2tfbm9kZSI+6buR5ZCN5Y2VPC9sYWJlbD48cXhpbmJ1dHRvbiBpZD0iZGVsZXRlIj5kZWxldGU8L2J0dG9uPic7CiAgICAgICAgLy8gbm9kZS5pbm5lckhUTUwgPSAnPGxhYmVsPumZkOWItuino+mZpCA8aW5wdXQgdHlwZT0iY2hlY2tib3giICBuYW1lPSIiIGlkPSJibGFja19ub2RlIj48L2xhYmVsPic7CiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnPHF4aW5idXR0b24gdHlwZT0icXhpbmJ1dHRvbiIgaWQ9InJ3bC1zZXRidG4iPiBzZXQgPC9xeGluYnV0dG9uPiA8bGFsYWxhIHN0eWxlPSJjdXJzb3I6bW92ZTsgZm9udC1zaXplOjEycHg7Ij7pmZDliLbop6PpmaQ8L2xhbGFsYT4gPGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSIiIGlkPSJibGFja19ub2RlIiA+JzsKICAgICAgICBpZih3aW5kb3cuc2VsZiA9PT0gd2luZG93LnRvcCl7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IikpewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsZnVuY3Rpb24oKXsKICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCJyd2wtYWN0aXZlLWlxeGluIik7CiAgICAgICAgfSk7CiAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIixmdW5jdGlvbigpewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoInJ3bC1hY3RpdmUtaXF4aW4iKTsKICAgICAgICAgICAgICAgIGJsYWNrX2NoZWNrKGJsYWNrX25vZGUuY2hlY2tlZCk7CiAgICAgICAgICAgIH0sMTAwKQogICAgICAgIH0pOwogCiAgICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICBzdHlsZS50eXBlPSJ0ZXh0L2NzcyI7CiAKICAgICAgICB2YXIgc3R5bGVJbm5lciA9ICIjcndsLWlxeGlueyIgKwogICAgICAgICAgICAgICAgInBvc2l0aW9uOmZpeGVkOyIgKwogICAgICAgICAgICAgICAgInRyYW5zZm9ybTp0cmFuc2xhdGUoLTk1cHgsMCk7IiArCiAgICAgICAgICAgICAgICAid2lkdGg6ODVweDsiICsKICAgICAgICAgICAgICAgICJoZWlnaHQ6MjVweDsiICsKICAgICAgICAgICAgICAgICJmb250LXNpemU6MTJweDsiICsKICAgICAgICAgICAgICAgICJmb250LXdlaWdodDogNTAwOyIgKwogICAgICAgICAgICAgICAgImZvbnQtZmFtaWx5OlZlcmRhbmEsIEFyaWFsLCAn5a6L5L2TJzsiICsKICAgICAgICAgICAgICAgICJjb2xvcjojZmZmOyIgKwogICAgICAgICAgICAgICAgImJhY2tncm91bmQ6IzMzMzsiICsKICAgICAgICAgICAgICAgICJ6LWluZGV4OjIxNDc0ODM2NDc7IiArCiAgICAgICAgICAgICAgICAibWFyZ2luOiAwOyIgKwogICAgICAgICAgICAgICAgIm9wYWNpdHk6MC4wNTsiICsKICAgICAgICAgICAgICAgICJ0cmFuc2l0aW9uOjAuM3M7IiArCiAgICAgICAgICAgICAgICAib3ZlcmZsb3c6aGlkZGVuOyIgKwogICAgICAgICAgICAgICAgInVzZXItc2VsZWN0Om5vbmU7IiArCiAgICAgICAgICAgICAgICAidGV4dC1hbGlnbjpjZW50ZXI7IiArCiAgICAgICAgICAgICAgICAid2hpdGUtc3BhY2U6bm93cmFwOyIgKwogICAgICAgICAgICAgICAgImxpbmUtaGVpZ2h0OjI1cHg7IiArCiAgICAgICAgICAgICAgICAicGFkZGluZzowIDE2cHg7IiArCiAgICAgICAgICAgICAgICAiYm9yZGVyOjFweCBzb2xpZCAjY2NjOyIgKwogICAgICAgICAgICAgICAgImJvcmRlci13aWR0aDoxcHggMXB4IDFweCAwOyIgKwogICAgICAgICAgICAgICAgImJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjVweDsiICsKICAgICAgICAgICAgICAgICJib3gtc2l6aW5nOiBjb250ZW50LWJveDsiICsKICAgICAgICAgICAgIn0iICsKICAgICAgICAgICAgIiNyd2wtaXF4aW4gaW5wdXR7IiArCiAgICAgICAgICAgICAgICAibWFyZ2luOiAwOyIgKwogICAgICAgICAgICAgICAgInBhZGRpbmc6IDA7IiArCiAgICAgICAgICAgICAgICAidmVydGljYWwtYWxpZ246bWlkZGxlOyIgKwogICAgICAgICAgICAgICAgIi13ZWJraXQtYXBwZWFyYW5jZTpjaGVja2JveDsiICsKICAgICAgICAgICAgICAgICItbW96LWFwcGVhcmFuY2U6Y2hlY2tib3g7IiArCiAgICAgICAgICAgICAgICAicG9zaXRpb246IHN0YXRpYzsiICsKICAgICAgICAgICAgICAgICJjbGlwOiBhdXRvOyIgKwogICAgICAgICAgICAgICAgIm9wYWNpdHk6IDE7IiArCiAgICAgICAgICAgICAgICAiY3Vyc29yOiBwb2ludGVyOyIgKwogICAgICAgICAgICAifSIgKwogICAgICAgICAgICAiI3J3bC1pcXhpbi5yd2wtYWN0aXZlLWlxeGlueyIgKwogICAgICAgICAgICAgICAgImxlZnQ6IDBweDsiICsKICAgICAgICAgICAgICAgICJ0cmFuc2Zvcm06dHJhbnNsYXRlKDAsMCk7IiArCiAgICAgICAgICAgICAgICAib3BhY2l0eTogMC45OyIgKwogICAgICAgICAgICAgICAgImhlaWdodDogMzJweDsiICsKICAgICAgICAgICAgICAgICJsaW5lLWhlaWdodDogMzJweCIgKwogICAgICAgICAgICAifSIgKwogICAgICAgICAgICAiI3J3bC1pcXhpbiBsYWJlbHsiICsKICAgICAgICAgICAgICAgICJtYXJnaW46MDsiICsKICAgICAgICAgICAgICAgICJwYWRkaW5nOjA7IiArCiAgICAgICAgICAgICAgICAiZm9udC13ZWlnaHQ6NTAwOyIgKwogICAgICAgICAgICAifSIgKwogICAgICAgICAgICAiI3J3bC1pcXhpbiAjcndsLXNldGJ0bnsiICsKICAgICAgICAgICAgICAgICJtYXJnaW46IDAgNHB4IDAgMDsiICsKICAgICAgICAgICAgICAgICJwYWRkaW5nOiAwIDAgMCA0cHg7IiArCiAgICAgICAgICAgICAgICAiYm9yZGVyOiBub25lOyIgKwogICAgICAgICAgICAgICAgImJvcmRlci1yYWRpdXM6IDJweDsiICsKICAgICAgICAgICAgICAgICJjdXJzb3I6IHBvaW50ZXI7IiArCiAgICAgICAgICAgICAgICAiYmFja2dyb3VuZDogI2ZmZjsiICsKICAgICAgICAgICAgICAgICJjb2xvcjogIzAwMDsiICsKICAgICAgICAgICAgIn0iICsKICAgICAgICAgICAgIiAiCiAgICAgICAgICAgIAogICAgICAgIGlmKCFyd2xfdXNlckRhdGEuYWRkQnRuKXsKICAgICAgICAgICAgdmFyIHN0eWxlVGVtcCA9ICIjcndsLWlxeGlue2Rpc3BsYXk6bm9uZX0iOwogICAgICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBzdHlsZUlubmVyICsgc3R5bGVUZW1wOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0eWxlLmlubmVySFRNTCA9IHN0eWxlSW5uZXI7CiAgICAgICAgfQogICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNyd2wtaXF4aW4iKSl7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLpgJrov4dzdHlsZeaPkuWFpSIpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLWlxeGluIikuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLpgJrov4dHTeaPkuWFpSIpOwogICAgICAgICAgICBHTV9hZGRTdHlsZShzdHlsZUlubmVyKTsKICAgICAgICB9CiAgICB9OwogCiAgICAvLyDnu5nmjInpkq7nu5Hlrprngrnlh7vkuovku7YKICAgIGZ1bmN0aW9uIHNldEJ0bkNsaWNrKCl7ICAKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLXNldGJ0biIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixzZXRNZW51KTsKICAgIH0KIAogICAgLy8g6I+c5Y2VCiAgICAgZnVuY3Rpb24gc2V0TWVudSgpewogICAgICAgICAgICB2YXIgb2xkRWRpdEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNyd2wtc2V0TWVudSIpOwogICAgICAgICAgICBpZihvbGRFZGl0Qm94KXsKICAgICAgICAgICAgICAgIG9sZEVkaXRCb3gucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGRFZGl0Qm94KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgdXNlclNldHRpbmcgPSBHTV9nZXRWYWx1ZSgicndsX3VzZXJEYXRhIik7CiAgICAgICAgICAgIHZhciB1cGxvYWRfY2hlY2tlZCA9IHVzZXJTZXR0aW5nLmNvbm5lY3RUb1RoZVNlcnZlcj8iY2hlY2tlZCI6IiI7CiAgICAgICAgICAgIHZhciBidG5jaGVja2VkID0gIHVzZXJTZXR0aW5nLmFkZEJ0bj8nY2hlY2tlZCc6JycKIAogICAgICAgICAgICB2YXIgb2RvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICBvZG9tLmlkID0gInJ3bC1zZXRNZW51IjsKICAgICAgICAgICAgb2RvbS5zdHlsZS5jc3NUZXh0ID0icG9zaXRpb246IGZpeGVkOyIgKwogICAgICAgICAgICAgICAgInRvcDogMTAwcHg7IiArCiAgICAgICAgICAgICAgICAibGVmdDogNTBweDsiICsKICAgICAgICAgICAgICAgICJwYWRkaW5nOiAxMHB4OyIgKwogICAgICAgICAgICAgICAgImJhY2tncm91bmQ6ICNmZmY7IiArCiAgICAgICAgICAgICAgICAiYm9yZGVyLXJhZGl1czogNHB4OyI7CiAgICAgICAgICAgIEdNX2FkZFN0eWxlKCIjcndsLXNldE1lbnVTYXZlLCIgKwogICAgICAgICAgICAgICAgIiNyd2wtcmVzZXQsIiArCiAgICAgICAgICAgICAgICAiI3J3bC1zZXRNZW51Q2xvc2V7IiArCiAgICAgICAgICAgICAgICAgICAgIm1hcmdpbjogMDsiICsKICAgICAgICAgICAgICAgICAgICAicGFkZGluZzogMCAycHg7IiArCiAgICAgICAgICAgICAgICAgICAgImJvcmRlcjogbm9uZTsiICsKICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLXJhZGl1czogMnB4OyIgKwogICAgICAgICAgICAgICAgICAgICJjdXJzb3I6IHBvaW50ZXI7IiArCiAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQ6ICNmZmY7IiArCiAgICAgICAgICAgICAgICAgICAgImNvbG9yOiAjMDAwOyIgKwogICAgICAgICAgICAgICAgIn0iICsKICAgICAgICAgICAgICAgICIjcndsLXJlc2V0eyIgKwogICAgICAgICAgICAgICAgICAgICJib3JkZXI6IDFweCBzb2xpZCAjNjY2OyIgKwogICAgICAgICAgICAgICAgIn0iICsKICAgICAgICAgICAgICAgICIjcndsLXNldE1lbnVTYXZleyIgKwogICAgICAgICAgICAgICAgICAgICJib3JkZXI6IDFweCBzb2xpZCBncmVlbjsiICsKICAgICAgICAgICAgICAgICJ9IiArCiAgICAgICAgICAgICAgICAiI3J3bC1zZXRNZW51Q2xvc2V7IiArCiAgICAgICAgICAgICAgICAgICAgImJvcmRlcjogMXB4IHNvbGlkIHJlZDsiICsKICAgICAgICAgICAgICAgICJ9IiArCiAgICAgICAgICAgICAgICAiI3J3bC1zZXRNZW51eyIgKwogICAgICAgICAgICAgICAgICAgICJ0ZXh0LWFsaWduOmxlZnQ7IiArCiAgICAgICAgICAgICAgICAgICAgImZvbnQtc2l6ZToxNHB4OyIgKwogICAgICAgICAgICAgICAgICAgICJ6LWluZGV4Ojk5OTk5OTsiICsKICAgICAgICAgICAgICAgICAgICAiYm9yZGVyOiAxcHggc29saWQgY29ybmZsb3dlcmJsdWU7IiArCiAgICAgICAgICAgICAgICAifSIgKwogICAgICAgICAgICAgICAgIiNyd2wtc2V0TWVudSBweyIgKwogICAgICAgICAgICAgICAgICAgICJtYXJnaW46NXB4IGF1dG87IiArCiAgICAgICAgICAgICAgICAifSIgKwogICAgICAgICAgICAgICAgIiAiKQogICAgICAgICAgICB2YXIgaW5uZXJIID0gIiIgKwogICAgICAgICAgICAgICAgIjxwPui3neemu+mhtumDqOi3neemu++8iOWNleS9jSDlg4/ntKDvvIkgPGlucHV0IGlkPSdwb3NpdGlvbnRvcCcgdHlwZT0ndGV4dCcgdmFsdWU9IiArIHVzZXJTZXR0aW5nLnBvc2l0aW9uVG9wICsgIj48L3A+IiArICIiICsKICAgICAgICAgICAgICAgIC8vICI8bGFiZXJsPiA8cD7lhYHorrjkuIrkvKDpu5HlkI3ljZU8aW5wdXQgaWQ9J3VwbG9hZGNoZWNrZWQnICB0eXBlPSdjaGVja2JveCcgIiArIHVwbG9hZF9jaGVja2VkICsgIj48L3A+IiArICI8L2xhYmVybD4iICsKICAgICAgICAgICAgICAgICI8cCBpZD0ncndsLXNob3J0Y3V0cycgdGl0bGU9J+W/q+aNt+mUric+5b+r5o236ZSu77yaIiArCiAgICAgICAgICAgICAgICAgICAgIjxzZWxlY3QgaWQ9J3J3bC1zaG9ydGN1dCc+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICI8b3B0aW9uIHZhbHVlPSdvZmYnIiArICh1c2VyU2V0dGluZy5zaG9ydGN1dCA9PSAwPyJzZWxlY3RlZCI6IiIpICArICI+5YWz6ZetPC9vcHRpb24+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICI8b3B0aW9uIHZhbHVlPSdmMSciICsgKHVzZXJTZXR0aW5nLnNob3J0Y3V0ID09IDE/InNlbGVjdGVkIjoiIikgICsgIj4gRjEgPC9vcHRpb24+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICI8b3B0aW9uIHZhbHVlPSdjdHJsZjEnIiArICh1c2VyU2V0dGluZy5zaG9ydGN1dCA9PSAyPyJzZWxlY3RlZCI6IiIpICArICI+Y3RybCArIEYxPC9vcHRpb24+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICI8b3B0aW9uIHZhbHVlPSdjdHJsYyciICsgKHVzZXJTZXR0aW5nLnNob3J0Y3V0ID09IDM/InNlbGVjdGVkIjoiIikgICsgIj5jdHJsICsgQzwvb3B0aW9uPiIgKwogICAgICAgICAgICAgICAgICAgICI8L3NlbGVjdD4iICsKICAgICAgICAgICAgICAgICI8L3A+ICIgKwogICAgICAgICAgICAgICAgIjxsYWJlcmw+IDxwPuaYvuekuuaMiemSrjxpbnB1dCBpZD0nYnRuY2hlY2tlZCcgIHR5cGU9J2NoZWNrYm94JyAiICsgYnRuY2hlY2tlZCArICI+IOeCueWHu+iEmuacrOeuoeeQhuaJqeWxleWPr+S7peWGjeasoeaJk+W8gOiuvue9rjwvcD4iICsgIjwvbGFiZXJsPiIgKwogICAgICAgICAgICAgICAgIjxwPumXrumimOWPjemmiOWcsOWdgDogPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9xeGluR2l0SHViL1JlbW92ZS13ZWItbGltaXRzLSc+R2l0SHViKHF4aW4pPC9hPiwgPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9J2h0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8yODQ5Ny1yZW1vdmUtd2ViLWxpbWl0cy1tb2RpZmllZCc+R3JlYXN5Rm9yayhxeGluKTwvYT4gIDwvUD4iICsKICAgICAgICAgICAgICAgICI8cD7pobnnm67ljp/kvZzogIXkuLogPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9J2h0dHBzOi8vY2F0NzM3My5naXRodWIuaW8vcmVtb3ZlLXdlYi1saW1pdHMvJz5jYXQ3MzczPC9hPiwgPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9DYXQ3MzczL3JlbW92ZS13ZWItbGltaXRzJz7pobnnm67kuLvpobU8L2E+IDwvUD4iICsKICAgICAgICAgICAgICAgICI8cD7og73lipvmnInpmZAs5LiN6IO95q+P5Liq572R56uZ6YO96IO95a6M576OPC9QPiIgKwogICAgICAgICAgICAgICAgIjxwPuWmguiLpeWPjemmiCzliqHlv4XluKbkuIror6bnu4bnvZHlnYA8L1A+IiArCiAgICAgICAgICAgICAgICAiPHA+ICA8L1A+IiArCiAgICAgICAgICAgICAgICAvLyAiPHA+PHM+5pi+56S65oyJ6ZKu77yI5b6F5re75Yqg77yJPC9zPjwvcD4iICsKICAgICAgICAgICAgICAgIC8vICI8cD48cz7mjInpkq7pgI/mmI7luqbvvIjlvoXmt7vliqDvvIk8L3M+PC9wPiIgKwogICAgICAgICAgICAgICAgLy8gIjxwPjxzPuW/q+mAn+WkjeWItu+8iOW+hea3u+WKoO+8iTwvcz48L3A+IiArCiAgICAgICAgICAgICAgICAvLyAiPHA+PHM+5YW25LuWICjlvoXmt7vliqDvvIk8L3M+PC9wPiIgKwogICAgICAgICAgICAgICAgIjxwPuaVsOaNruWtmOWCqOaWueW8j+S4ukpTT04s5aaC6Iul5Zyo5q2k5L+u5pS5LOazqOaEj+W8leWPt+mAl+WPtzwvUD4iICsKICAgICAgICAgICAgICAgICI8dGV4dGFyZWEgd3JhcD0nb2ZmJyBjb2xzPSc0NScgcm93cz0nMjAnIHN0eWxlPSdvdmVyZmxvdzphdXRvO2JvcmRlci1yYWRpdXM6NHB4Oyc+IiArIEpTT04uc3RyaW5naWZ5KHVzZXJTZXR0aW5nLmRhdGEsZmFsc2UsNCkgKyAiPC90ZXh0YXJlYT4iICsgCiAgICAgICAgICAgICAgICAiPGJyPiIgKwogICAgICAgICAgICAgICAgIjxxeGluYnV0dG9uIGlkPSdyd2wtcmVzZXQnPua4heepuuiuvue9rjwvcXhpbmJ1dHRvbj4gJm5ic3A7Jm5ic3A7Jm5ic3A7IiArCiAgICAgICAgICAgICAgICAiPHF4aW5idXR0b24gaWQ9J3J3bC1zZXRNZW51U2F2ZSc+5L+d5a2YPC9xeGluYnV0dG9uPiAmbmJzcDsmbmJzcDsmbmJzcDsiICsKICAgICAgICAgICAgICAgICI8cXhpbmJ1dHRvbiBpZD0ncndsLXNldE1lbnVDbG9zZScgb25jbGljaz0ndGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wYXJlbnROb2RlKTsnIHRpdGxlPSflpoLmnpzml6Dms5XlhbPpl60g6K+35Yi35paw55WM6Z2iJyA+5YWz6ZetPC9xeGluYnV0dG9uPiAmbmJzcDsmbmJzcDsmbmJzcDsiICsKICAgICAgICAgICAgICAgICI8c3BhbiBzdHlsZT0nZm9udC1zaXplOjAuN2VtOyc+LS18IHF4aW4gdjQuNC42IDIwMjEtMDYtMDkgfC0tPC9zcGFuPiIgKwogICAgICAgICAgICAgICAgIiIKICAgICAgICAgICAgIiI7CiAgICAgICAgICAgIG9kb20uaW5uZXJIVE1MID0gaW5uZXJIOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG9kb20pOwogCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNyd2wtc2V0TWVudVNhdmUiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsc2F2ZVNldHRpbmcpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLXNldE1lbnVDbG9zZSIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixjbG9zZU1lbnUpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLXJlc2V0IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLHJ3bFJlc2V0KTsKIAogICAgICAgIH0KIAogICAgLy8g5L+d5a2Y6YCJ6aG5CiAgICBmdW5jdGlvbiBzYXZlU2V0dGluZygpewogICAgICAgIHZhciBwb3NpdGlvblRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNyd2wtc2V0TWVudSAjcG9zaXRpb250b3AiKS52YWx1ZTsKICAgICAgICAvLyB2YXIgdXBsb2FkQ2hlY2tlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNyd2wtc2V0TWVudSAjdXBsb2FkY2hlY2tlZCIpLmNoZWNrZWQ7CiAgICAgICAgdmFyIHNob3J0Y3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1zZXRNZW51ICNyd2wtc2hvcnRjdXQiKS5zZWxlY3RlZEluZGV4OwogICAgICAgIHZhciBhZGRCdG5DaGVja2VkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1zZXRNZW51ICNidG5jaGVja2VkIikuY2hlY2tlZDsKICAgICAgICB2YXIgY29kZXZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1zZXRNZW51IHRleHRhcmVhIikudmFsdWU7CiAgICAgICAgaWYoY29kZXZhbHVlKXsKICAgICAgICAgICAgdmFyIHVzZXJTZXR0aW5nID0gR01fZ2V0VmFsdWUoInJ3bF91c2VyRGF0YSIpOwogCiAgICAgICAgICAgIHVzZXJTZXR0aW5nLmFkZEJ0biA9IGFkZEJ0bkNoZWNrZWQ7CiAgICAgICAgICAgIHVzZXJTZXR0aW5nLmRhdGEgPSBKU09OLnBhcnNlKGNvZGV2YWx1ZSk7CiAgICAgICAgICAgIHVzZXJTZXR0aW5nLnBvc2l0aW9uVG9wID0gcGFyc2VJbnQocG9zaXRpb25Ub3ApOwogICAgICAgICAgICB1c2VyU2V0dGluZy5zaG9ydGN1dCA9IHBhcnNlSW50KHNob3J0Y3V0KTsKICAgICAgICAgICAgLy8gdXNlclNldHRpbmcuY29ubmVjdFRvVGhlU2VydmVyID0gdXBsb2FkQ2hlY2tlZDsKIAogICAgICAgICAgICBHTV9zZXRWYWx1ZSgicndsX3VzZXJEYXRhIix1c2VyU2V0dGluZyk7CiAgICAgICAgICAgIC8vIOWIt+aWsOmhtemdogogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgIH0sMzAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCgi6L6T5YWl5Li656m6Iik7CiAgICAgICAgICAgIC8vIHRoaXMucmVzZXQoKTsKICAgICAgICB9CiAgICAgICAgY2xvc2VNZW51KCk7CiAgICB9CiAgICAvLyDlpI3ljp/oj5zljZUKICAgIGZ1bmN0aW9uIHJ3bFJlc2V0KCl7CiAgICAgICAgR01fZGVsZXRlVmFsdWUoInJ3bF91c2VyRGF0YSIpOwogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0KIAogICAgLy/lhbPpl63oj5zljZUKICAgIGZ1bmN0aW9uIGNsb3NlTWVudSgpewogICAgICAgIHZhciBvbGRFZGl0Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1zZXRNZW51Iik7CiAgICAgICAgaWYob2xkRWRpdEJveCl7CiAgICAgICAgICAgIG9sZEVkaXRCb3gucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGRFZGl0Qm94KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0KIAogICAgLy8g5aKe5Yqg5ouW5ou95LqL5Lu2IOi/m+ihjOe7keWumgogICAgZnVuY3Rpb24gYWRkRHJhZ0V2ZW4oKXsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBkcmFnQnRuKCkKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZHJhZ0J0buWHveaVsCDmiqXplJkiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sMTAwMCkKICAgICAgICAvLyBkcmFnQnRuKCk7ICAvLyDlop7liqDmi5bliqjkuovku7YKICAgIH0KIAogICAgLy8g5aKe5Yqg5ouW5Yqo5LqL5Lu2IGZ1bmMKICAgIGZ1bmN0aW9uIGRyYWdCdG4oKXsKICAgICAgICB2YXIgcndsX25vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLWlxeGluIik7CiAgICAgICAgcndsX25vZGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIHJ3bF9ub2RlLnN0eWxlLnRyYW5zaXRpb24gPSAibnVsbCI7CiAgICAgICAgICAgIHZhciBkaXNYID0gZXZlbnQuY2xpZW50WCAtIHJ3bF9ub2RlLm9mZnNldExlZnQ7CiAgICAgICAgICAgIHZhciBkaXNZID0gZXZlbnQuY2xpZW50WSAtIHJ3bF9ub2RlLm9mZnNldFRvcDsKIAogICAgICAgICAgICB2YXIgbW92ZSA9IGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgIHJ3bF9ub2RlLnN0eWxlLmxlZnQgPSBldmVudC5jbGllbnRYIC0gZGlzWCArICJweCIgOwogICAgICAgICAgICAgICAgcndsX25vZGUuc3R5bGUudG9wICA9IGV2ZW50LmNsaWVudFkgLSBkaXNZICsgInB4IiA7CiAgICAgICAgICAgIH0KIAogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLG1vdmUpOwogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIixmdW5jdGlvbigpewogICAgICAgICAgICAgICAgcndsX25vZGUuc3R5bGUudHJhbnNpdGlvbiA9ICIwLjNzIjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbW92ZSk7CiAgICAgICAgICAgICAgICAvLyDmraTlh73mlbDlhoXmiYDmnInnmoTms6jph4ror63lj6Xpg73mmK/mnInnlKjnmoQKICAgICAgICAgICAgICAgICAgICAvLyDlvIDlkK/lkI4s5Y+v5ouW5Yqo5Yiw5bGP5bmV5Y+z5L6nLOS9huWwmuacqua3u+WKoGNzcwogICAgICAgICAgICAgICAgICAgIC8vIOWcqOS4iumdoua3u+WKoCByd2wtYWN0aXZlLWlxeGluIOeahOWcsOaWueWKoOS4iuWIpOaWreW3puWPsyzlnKjliqDkuIrnm7jlupTnmoRjc3PljbPlj68KICAgICAgICAgICAgICAgICAgICAvLyDmh5IgMjAxOC0wNC0xOCAyMTo1MTozMgogICAgICAgICAgICAgICAgLy8gdmFyIGJvZHlXaWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7CiAgICAgICAgICAgICAgICB2YXIgcndsX25vZGVXaWR0aCA9IHJ3bF9ub2RlLm9mZnNldExlZnQgKyByd2xfbm9kZS5vZmZzZXRXaWR0aC8yOwogICAgICAgICAgICAgICAgLy8gaWYocndsX25vZGVXaWR0aCA+IGJvZHlXaWR0aC8yKXsKICAgICAgICAgICAgICAgIC8vICAgICByd2xfbm9kZS5zdHlsZS5sZWZ0ID0gImF1dG8iOwogICAgICAgICAgICAgICAgLy8gICAgIHJ3bF9ub2RlLnN0eWxlLnJpZ2h0ID0gMDsKICAgICAgICAgICAgICAgIC8vICAgICByd2xfdXNlckRhdGEucG9zaXRpb25MZWZ0ID0gImF1dG8iOwogICAgICAgICAgICAgICAgLy8gICAgIHJ3bF91c2VyRGF0YS5wb3NpdGlvblJpZ2h0ID0gIjAiOwogICAgICAgICAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByd2xfbm9kZS5zdHlsZS5yaWdodCA9IHJ3bF91c2VyRGF0YS5wb3NpdGlvblJpZ2h0ID0gImF1dG8iOwogICAgICAgICAgICAgICAgICAgIHJ3bF9ub2RlLnN0eWxlLmxlZnQgPSByd2xfdXNlckRhdGEucG9zaXRpb25MZWZ0ID0gIDA7CiAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICByd2xfdXNlckRhdGEucG9zaXRpb25Ub3AgPSByd2xfbm9kZS5vZmZzZXRUb3A7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgicndsX3VzZXJEYXRhIixyd2xfdXNlckRhdGEpOwogCiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0KIAogICAgLy8g5Yid5aeL5YyWIGluaXQgZnVuYyAg6L+Z6YeM5omN5piv5qC45b+DCiAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgIC8vIOmSiOWvueS4quWIq+e9keermemHh+WPluS4jeWQjOeahOetlueVpQogICAgICAgIHJ1bGUgPSBjbGVhcigpOwogICAgICAgIC8vIOiuvue9riBldmVudCDliJfooagKICAgICAgICBob29rX2V2ZW50TmFtZXMgPSBydWxlLmhvb2tfZXZlbnROYW1lcy5zcGxpdCgifCIpOwogICAgICAgIC8vIFRPRE8gQWxsb3dlZCB0byByZXR1cm4gdmFsdWUKICAgICAgICB1bmhvb2tfZXZlbnROYW1lcyA9IHJ1bGUudW5ob29rX2V2ZW50TmFtZXMuc3BsaXQoInwiKTsKICAgICAgICBldmVudE5hbWVzID0gaG9va19ldmVudE5hbWVzLmNvbmNhdCh1bmhvb2tfZXZlbnROYW1lcyk7CiAKICAgICAgICAvLyDosIPnlKjmuIXnkIYgRE9NMCBldmVudCDmlrnms5XnmoTlvqrnjq8KICAgICAgICBpZihydWxlLmRvbTApIHsKICAgICAgICAgICAgc2V0SW50ZXJ2YWwoY2xlYXJMb29wLCAxMCAqIDEwMDApOwogICAgICAgICAgICBzZXRUaW1lb3V0KGNsZWFyTG9vcCwgMTUwMCk7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2xlYXJMb29wLCB0cnVlKTsKICAgICAgICAgICAgY2xlYXJMb29wKCk7CiAgICAgICAgfQogCiAgICAgICAgLy8gaG9vayBhZGRFdmVudExpc3RlbmVyIC8v5a+86Ie05pCc57Si6Lez6L2s5aSx5pWI55qE5Y6f5ZugCiAgICAgICAgaWYocnVsZS5ob29rX2FkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgICAgICAgRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBhZGRFdmVudExpc3RlbmVyOwogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyID0gYWRkRXZlbnRMaXN0ZW5lcjsKIAogICAgICAgICAgICBpZihoYXNGcmFtZSl7CiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwO2k8aGFzRnJhbWUubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgaGFzRnJhbWVbaV0uY29udGVudFdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyID0gYWRkRXZlbnRMaXN0ZW5lcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogCiAgICAgICAgfQogCiAgICAgICAgLy8gaG9vayBwcmV2ZW50RGVmYXVsdAogICAgICAgIGlmKHJ1bGUuaG9va19wcmV2ZW50RGVmYXVsdCkgewogICAgICAgICAgICBFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmKGhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHRoaXMudHlwZSkgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgRXZlbnRfcHJldmVudERlZmF1bHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKIAogICAgICAgICAgICBpZihoYXNGcmFtZSl7CiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwO2k8aGFzRnJhbWUubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgaGFzRnJhbWVbaV0uY29udGVudFdpbmRvdy5FdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaG9va19ldmVudE5hbWVzLmluZGV4T2YodGhpcy50eXBlKSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50X3ByZXZlbnREZWZhdWx0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogCiAgICAgICAgLy8gSG9vayBzZXQgcmV0dXJuVmFsdWUKICAgICAgICBpZihydWxlLmhvb2tfc2V0X3JldHVyblZhbHVlKSB7CiAgICAgICAgICAgIEV2ZW50LnByb3RvdHlwZS5fX2RlZmluZVNldHRlcl9fKCdyZXR1cm5WYWx1ZScsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYodGhpcy5yZXR1cm5WYWx1ZSAhPT0gdHJ1ZSAmJiBob29rX2V2ZW50TmFtZXMuaW5kZXhPZih0aGlzLnR5cGUpID49IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJldHVyblZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogCiAgICAgICAgLy8g5re75YqgQ1NTICAgICAvLyBjb25zb2xlLmRlYnVnKCd1cmw6ICcgKyB1cmwsICdzdG9yYWdlTmFtZe+8micgKyBzdG9yYWdlTmFtZSwgJ3J1bGU6ICcgKyBydWxlLm5hbWUpOwogICAgICAgIGlmKHJ1bGUuYWRkX2NzcykgewogICAgICAgICAgICBHTV9hZGRTdHlsZSgnaHRtbCwgOm5vdChbY2xhc3MqPSJyd2wtZXhlbXB0Il0pIHstd2Via2l0LXVzZXItc2VsZWN0OnRleHQhaW1wb3J0YW50OyAtbW96LXVzZXItc2VsZWN0OnRleHQhaW1wb3J0YW50O30gOm5vdChbY2xhc3MqPSJyd2wtZXhlbXB0Il0pIDo6c2VsZWN0aW9uIHtjb2xvcjojZmZmOyBiYWNrZ3JvdW5kOiMzMzkwRkYhaW1wb3J0YW50O30nKTsKICAgICAgICB9IC8vZWxzZSB7CiAgICAgICAgICAgIC8vR01fYWRkU3R5bGUoJ2h0bWwsIDpub3QoW2NsYXNzKj0icndsLWV4ZW1wdCJdKSB7LXdlYmtpdC11c2VyLXNlbGVjdDp0ZXh0IWltcG9ydGFudDsgLW1vei11c2VyLXNlbGVjdDp0ZXh0IWltcG9ydGFudDt9Jyk7CiAgICAgICAgLy99CiAgICB9CiAKICAgIC8vIEhvb2sgYWRkRXZlbnRMaXN0ZW5lciBwcm9jCiAgICBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmMsIHVzZUNhcHR1cmUpIHsKICAgICAgICB2YXIgX2FkZEV2ZW50TGlzdGVuZXIgPSB0aGlzID09PSBkb2N1bWVudCA/IGRvY3VtZW50X2FkZEV2ZW50TGlzdGVuZXIgOiBFdmVudFRhcmdldF9hZGRFdmVudExpc3RlbmVyOwogICAgICAgIGlmKGhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHR5cGUpID49IDApIHsKICAgICAgICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW3R5cGUsIHJldHVyblRydWUsIHVzZUNhcHR1cmVdKTsKICAgICAgICB9IGVsc2UgaWYodW5ob29rX2V2ZW50TmFtZXMuaW5kZXhPZih0eXBlKSA+PSAwKSB7CiAgICAgICAgICAgIHZhciBmdW5jc05hbWUgPSBzdG9yYWdlTmFtZSArIHR5cGUgKyAodXNlQ2FwdHVyZSA/ICd0JyA6ICdmJyk7CiAKICAgICAgICAgICAgaWYodGhpc1tmdW5jc05hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHRoaXNbZnVuY3NOYW1lXSA9IFtdOwogICAgICAgICAgICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW3R5cGUsIHVzZUNhcHR1cmUgPyB1bmhvb2tfdCA6IHVuaG9va19mLCB1c2VDYXB0dXJlXSk7CiAgICAgICAgICAgIH0KIAogICAgICAgICAgICB0aGlzW2Z1bmNzTmFtZV0ucHVzaChmdW5jKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfYWRkRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgIH0KIAogICAgLy8g5riF55CG5b6q546vCiAgICBmdW5jdGlvbiBjbGVhckxvb3AoKSB7CiAgICAgICAgcnVsZSA9IGNsZWFyKCkgLy8g5a+55LqO5Yqo5oCB55Sf5oiQ55qE6IqC54K5LOmaj+aXtuajgOa1iwogICAgICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzKCk7CiAKICAgICAgICBmb3IodmFyIGkgaW4gZWxlbWVudHMpIHsKICAgICAgICAgIGZvcih2YXIgaiBpbiBldmVudE5hbWVzKSB7CiAgICAgICAgICAgIHZhciBuYW1lID0gJ29uJyArIGV2ZW50TmFtZXNbal07CiAKICAgICAgICAgICAgLy8gOz/mnKrop6PlhrMKICAgICAgICAgICAgICAgIC8vIDIwMTgtMDQtMDIgZWxlbWVudHPkuK3kvJrmnInlrZfnrKbkuLLlh7rnjrAs5Y6f54mI5LiN5LyaLOmXrumimOS4jeaYjizmoLnmnKzljp/lm6DlsJrmnKrop6PlhrMKICAgICAgICAgICAgICAgIC8vIOebuOWFs+WPjemmiCAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi9mb3J1bS9kaXNjdXNzaW9uLzM2MDE0CiAgICAgICAgICAgICAgICAvLyDpl67popjniYjmnKzlj7cgIHYzLjAuNwogICAgICAgICAgICAgICAgLy8g6Zeu6aKY6KGl5YWFICAg5LmL5YmN5Y+v5Lul5L2/55SoLOWFt+S9k+eJiOacrOacqua1i++8iDIwMTgtMDQtMDIgMjE6Mjc6NTPvvIks5Y6f54mI5Y+v5Lul5L2/55SoCiAgICAgICAgICAgIGlmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbGVtZW50c1tpXSk9PSJbb2JqZWN0IFN0cmluZ10iKXsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZWxlbWVudHNbaV0pCiAgICAgICAgICAgIC8vIGlmKHR5cGVvZiBlbGVtZW50c1tpXVtuYW1lXSA9PT0gIm9iamVjdCIpewogICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2codHlwZW9mIGVsZW1lbnRzW2ldW25hbWVdKQogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIGlmKGVsZW1lbnRzW2ldW25hbWVdICE9PSBudWxsICYmIGVsZW1lbnRzW2ldW25hbWVdICE9PSBvbnh4eCkgewogICAgICAgICAgICAgICAgaWYodW5ob29rX2V2ZW50TmFtZXMuaW5kZXhPZihldmVudE5hbWVzW2pdKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV1bc3RvcmFnZU5hbWUgKyBuYW1lXSA9IGVsZW1lbnRzW2ldW25hbWVdOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldW25hbWVdID0gb254eHg7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXVtuYW1lXSA9IG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGRvY3VtZW50Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTt9OwogICAgfQogCiAgICAvLyDov5Tlm550cnVl55qE5Ye95pWwCiAgICBmdW5jdGlvbiByZXR1cm5UcnVlKGUpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHVuaG9va190KGUpIHsKICAgICAgICByZXR1cm4gdW5ob29rKGUsIHRoaXMsIHN0b3JhZ2VOYW1lICsgZS50eXBlICsgJ3QnKTsKICAgIH0KICAgIGZ1bmN0aW9uIHVuaG9va19mKGUpIHsKICAgICAgICByZXR1cm4gdW5ob29rKGUsIHRoaXMsIHN0b3JhZ2VOYW1lICsgZS50eXBlICsgJ2YnKTsKICAgIH0KICAgIGZ1bmN0aW9uIHVuaG9vayhlLCBzZWxmLCBmdW5jc05hbWUpIHsKICAgICAgICB2YXIgbGlzdCA9IHNlbGZbZnVuY3NOYW1lXTsKICAgICAgICBmb3IodmFyIGkgaW4gbGlzdCkgewogICAgICAgICAgICBsaXN0W2ldKGUpOwogICAgICAgIH0KIAogICAgICAgIGUucmV0dXJuVmFsdWUgPSB0cnVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gb254eHgoZSkgewogICAgICAgIHZhciBuYW1lID0gc3RvcmFnZU5hbWUgKyAnb24nICsgZS50eXBlOwogICAgICAgIHRoaXNbbmFtZV0oZSk7CiAKICAgICAgICBlLnJldHVyblZhbHVlID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KIAogICAgLy8g6I635Y+W5omA5pyJ5YWD57SgIOWMheaLrGRvY3VtZW50CiAgICBmdW5jdGlvbiBnZXRFbGVtZW50cygpIHsKICAgICAgICB2YXIgZWxlbWVudHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpKTsKICAgICAgICBlbGVtZW50cy5wdXNoKGRvY3VtZW50KTsKIAogICAgICAgIC8vIOW+queOr+aJgOaciSBmcmFtZSDnqpflj6MKICAgICAgICB2YXIgZnJhbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiZnJhbWUiKQogICAgICAgIGlmKGZyYW1lcyl7CiAgICAgICAgICAgIGhhc0ZyYW1lID0gZnJhbWVzOwogICAgICAgICAgICB2YXIgZnJhbWVzX2VsZW1lbnQ7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwO2k8ZnJhbWVzLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgZnJhbWVzX2VsZW1lbnQgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcmFtZXNbaV0uY29udGVudFdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIqIikpCiAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKGZyYW1lc1tpXS5jb250ZW50V2luZG93LmRvY3VtZW50KQogICAgICAgICAgICAgICAgZWxlbWVudHMgPSBlbGVtZW50cy5jb25jYXQoZnJhbWVzX2VsZW1lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBlbGVtZW50czsKICAgIH07CiAKICAgIC8vIOiOt+WPlum7keWQjeWNlee9keermSBGdW5jCiAgICBmdW5jdGlvbiBnZXRfYmxhY2tfbGlzdCgpewogICAgICAgIC8vIOS5i+WJjeeJiOacrOWPr+iDveWvvOiHtOWtmOWCqOepuueahOWtl+espuS4sgogICAgICAgICAgICAvLyAyMDE4LTA2LTExIDE1OjExOjQ0IOS/neeVmSzlvZPlrrnplJnlpITnkIYKICAgICAgICB2YXIgZGF0YV90ZW1wID0gcndsX3VzZXJEYXRhLmRhdGE7CiAgICAgICAgZGF0YV90ZW1wID0gZGF0YV90ZW1wLmZpbHRlcihmdW5jdGlvbihpdGVtKXsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmxlbmd0aD4xOwogICAgICAgICAgICB9KQogICAgICAgIHJldHVybiBkYXRhX3RlbXA7CiAgICB9CiAgICAKICAgIC8vIOajgOafpeaYr+WQpuWtmOWcqOS6jum7keWQjeWNleS4rSDov5Tlm57kvY3nva4gZnVuYwogICAgZnVuY3Rpb24gY2hlY2tfYmxhY2tfbGlzdChsaXN0LGhvc3QpewogICAgICAgIGZvcihsZXQgaT0wO2k8bGlzdC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgaWYofmhvc3RuYW1lLmluZGV4T2YobGlzdFtpXSkpewogICAgICAgICAgICAgICAgcmV0dXJuIGkrMTsgIC8v5LiH5LiA5Yy56YWN5Yiw56ys5LiA5LiqLOi/lOWbnjAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAKICAgIC8vIOm8oOagh+eCueWHu+WQjuaMiemSruWQjiDmo4Dmn6XmmK/lkKblnKjpu5HlkI3ljZUKICAgIGZ1bmN0aW9uIGJsYWNrX2NoZWNrKGJvb2wpewogICAgICAgIHZhciBsaXN0ID0gR01fZ2V0VmFsdWUoInJ3bF91c2VyRGF0YSIpLmRhdGEKICAgICAgICB2YXIgY2hlY2sgPSBjaGVja19ibGFja19saXN0KGxpc3QsaG9zdG5hbWUpOwogCiAgICAgICAgaWYgKGJvb2wgJiYgIWNoZWNrKSB7CiAgICAgICAgICAgIGxpc3QgPSBsaXN0LmNvbmNhdChob3N0bmFtZSk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLpgInkuK0g5LiN5Zyo6buR5ZCN5Y2VLCDlop7liqAiLGhvc3RuYW1lLGxpc3QpOwogICAgICAgICAgICByd2xfdXNlckRhdGEud2FpdFVwbG9hZC5wdXNoKGhvc3RuYW1lKTsgLy/lh4blpIfkuIrkvKAKICAgICAgICAgICAgcndsX3VzZXJEYXRhLmN1cnJlbnRVUkwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coImFmdGVyOiAiLHJ3bF91c2VyRGF0YS53YWl0VXBsb2FkKQogCiAgICAgICAgICAgIHNhdmVEYXRhKGxpc3QpOwogICAgICAgICAgICBpbml0KCk7CiAKICAgICAgICB9ZWxzZSBpZighYm9vbCAmJiBjaGVjayl7CiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGNoZWNrLTEsMSk7CiAgICAgICAgICAgIHNhdmVEYXRhKGxpc3QpOwogICAgICAgICAgICAvLyDliLfmlrDpobXpnaIKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLliLfmlrDpobXpnaJsb2FkaW5nIik7CiAgICAgICAgICAgIH0sMzUwKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KIAogICAgLy8g5L+d5a2Y5pys5Zyw5pWw5o2uLOW5tuWwhuaVsOaNruS4iuS8oOiHs+acjeWKoeWZqAogICAgZnVuY3Rpb24gc2F2ZURhdGEobGlzdHMpewogICAgICAgIGxpc3RzID0gbGlzdHMuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pewogICAgICAgICAgICByZXR1cm4gaXRlbS5sZW5ndGg+MTsKICAgICAgICB9KQogCiAgICAgICAgLy8g5pu05paw5pWw5o2uCiAgICAgICAgcndsX3VzZXJEYXRhLmRhdGEgPSBsaXN0cy5zb3J0KCk7CiAKICAgICAgICAvLyDlsIbmnKzlnLDpu5HlkI3ljZXkuIrkvKAKICAgICAgICAvLyBpZiAocndsX3VzZXJEYXRhLndhaXRVcGxvYWQubGVuZ3RoID4gMCAmJiByd2xfdXNlckRhdGEuY29ubmVjdFRvVGhlU2VydmVyKXsKICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2coInJ3bCA6IOS4iuS8oC4uLiIscndsX3VzZXJEYXRhLndhaXRVcGxvYWQpOwogICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZygicndsIDog5byA5aeL5LiK5LygLS0tLS0iKTsKICAgICAgICAvLyAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIC8vICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgIC8vICAgICAgIC8vIHVybDogImh0dHA6Ly8xMjcuMC4wLjE6ODAwMC90b29sL3Rlc3RhamF4LyIsCiAgICAgICAgLy8gICAgICAgdXJsOiAiaHR0cDovL2VlbW0ubWUvdG9vbC9yd2xfdXBsb2FkLyIsCiAgICAgICAgLy8gICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocndsX3VzZXJEYXRhKSwKICAgICAgICAvLyAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgLy8gICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKICAgICAgICAvLyAgICAgICB9LAogICAgICAgIC8vICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJyd2wgOiDkuIrkvKDmiJDlip8tLS0tIik7CiAgICAgICAgLy8gICAgICAgfQogICAgICAgIC8vICAgICB9KTsKICAgICAgICAvLyAgICAgcndsX3VzZXJEYXRhLndhaXRVcGxvYWQgPSBbXTsKICAgICAgICAvLyB9CiAKICAgICAgICBHTV9zZXRWYWx1ZSgicndsX3VzZXJEYXRhIixyd2xfdXNlckRhdGEpOwogICAgICAgIHJldHVybiByd2xfdXNlckRhdGE7CiAgICB9CiAKICAgIC8vIOaVsOe7hOWOu+mHjQogICAgZnVuY3Rpb24gdW5pcXVlKGFycikgewogICAgICB2YXIgcmV0ID0gW10KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IGFycltpXQogICAgICAgIGlmIChyZXQuaW5kZXhPZihpdGVtKSA9PT0gLTEpIHsKICAgICAgICAgIHJldC5wdXNoKGl0ZW0pCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXQ7CiAgICB9CiAKICAgIC8vIOWkjeWItuWIsOWJqui0tOadvwogICAgZnVuY3Rpb24gc2V0Q2xpcGJvYXJkKCl7CiAgICAgICAgdmFyIHRleHRfb2JqID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgICAgIHZhciB0ZXh0ID0gdGV4dF9vYmoudG9TdHJpbmcoKTsKICAgICAgICBHTV9zZXRDbGlwYm9hcmQodGV4dCk7CiAKICAgIH0KIAogICAgLy8g5b+r5o236ZSuIEYx77yIY3RybCtmMe+8iSDlpI3liLYgCiAgICBmdW5jdGlvbiBob3RrZXkoKSB7CiAgICAgICAgdmFyIGEgPSB3aW5kb3cuZXZlbnQua2V5Q29kZTsKICAgICAgICAvLyBpZiAoKGEgPT0gMTEyKSAmJiAoZXZlbnQuY3RybEtleSkpIHsKICAgICAgICBpZiAoYSA9PSAxMTIgJiYgdXNlclNldHRpbmcuc2hvcnRjdXQgPT0gMSkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBzZXRDbGlwYm9hcmQoKTsKICAgICAgICAgICAgZXZlbnQua2V5Q29kZT0wOwogICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZT1mYWxzZTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAKICAgICAgICB9IGVsc2UgaWYgKGEgPT0gMTEyICYmIChldmVudC5jdHJsS2V5KSAmJiB1c2VyU2V0dGluZy5zaG9ydGN1dCA9PSAyKXsKICAgICAgICAgICAgc2V0Q2xpcGJvYXJkKCk7CiAgICAgICAgfSBlbHNlIGlmKChhID09IDY3KSAmJiAoZXZlbnQuY3RybEtleSkgJiYgdXNlclNldHRpbmcuc2hvcnRjdXQgPT0gMyl7CiAgICAgICAgICAgIHNldENsaXBib2FyZCgpOwogICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuWFs+mXreS6huW/q+aNt+mUriIpOwogICAgICAgIH0KICAgIH0gCiAgICBkb2N1bWVudC5vbmtleWRvd24gPSBob3RrZXk7IC8v5b2Tb25rZXlkb3duIOS6i+S7tuWPkeeUn+aXtuiwg+eUqGhvdGtleeWHveaVsCAgCiAKICAgIC8vIOmDqOWIhue9keermemHh+eUqOS6huWFtuS7lueahOmYsuWkjeWItuaJi+autQogICAgZnVuY3Rpb24gY2xlYXIoKXsKICAgICAgICAvLyBjb25zb2xlLmxvZygi6L+b5YWlY2xlYXIiLGhvc3RuYW1lLHJ3bF91c2VyRGF0YS5ydWxlcyk7CiAgICAgICAgc3dpdGNoIChob3N0bmFtZSl7CiAgICAgICAgICAgIGNhc2UgImNodWFuZ3NoaS5xcS5jb20iOiBjbGVhcl9jaHVhbmdzaGkoKTticmVhazsKICAgICAgICAgICAgY2FzZSAidm90ZXR3LmNvbSI6IGNsZWFyX3ZvdGV0dygpO2JyZWFrOwogICAgICAgICAgICBjYXNlICJ3d3cubXlodGVib29rcy5jb20iOiBjbGVhcl9jb3ZlcnMoIi5mdWxsaW1nIik7YnJlYWs7CiAgICAgICAgICAgIGNhc2UgInd3dy56M3o0LmNvbSI6IGNsZWFyX2NvdmVycygiLm1vdmllZG93bmFkZGl2Iik7IGJyZWFrOwogICAgICAgICAgICBjYXNlICJodWF5dS5iYWlkdS5jb20iOiBjbGVhcl9jb3ZlcnMoIiNqcUNvbnRleHRNZW51Iik7IGJyZWFrOwogICAgICAgICAgICBjYXNlICJ3d3cubXlodGxtZWJvb2suY29tIjogY2xlYXJfY292ZXJzKCJpbWcuZnVsbGltZyIpOyBicmVhazsKICAgICAgICAgICAgY2FzZSAiemhpaHUuY29tIjoKICAgICAgICAgICAgY2FzZSAid3d3LnpoaWh1LmNvbSI6IHJldHVybiByd2xfdXNlckRhdGEucnVsZXMucnVsZV96aGlodTsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgInQuYmlsaWJpbGkuY29tIjogY2xlYXJfbGlua19iaWxpYmlsaSgpOyBicmVhazsKICAgICAgICAgICAgY2FzZSAid3d3LnVzbHNvZnR3YXJlLmNvbSI6IGNsZWFyX2NvdmVycygiLnByb3RlY3RfY29udGVudHMtb3ZlcmxheSIpO2NsZWFyX2NvdmVycygiLnByb3RlY3RfYWxlcnQiKTsgcmV0dXJuIHJ3bF91c2VyRGF0YS5ydWxlcy5ydWxlX3BsdXM7IGJyZWFrOwogICAgICAgICAgICBjYXNlICJ3d3cubG9uZ21hYm9va2NuLmNvbSI6IGNsZWFyX2NvdmVycygiLmZ1bGxpbWciKTsgcmV0dXJuIHJ3bF91c2VyRGF0YS5ydWxlcy5ydWxlX3BsdXM7IGJyZWFrOwogICAgICAgICAgICBjYXNlICJib2tlMTEyLmNvbSI6IHJldHVybiByd2xfdXNlckRhdGEucnVsZXMucnVsZV9wbHVzOyBicmVhazsKICAgICAgICAgICAgY2FzZSAid3d3LnNoYW5nYy5uZXQiOiByZXR1cm4gcndsX3VzZXJEYXRhLnJ1bGVzLnJ1bGVfcGx1czsgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiByd2xfdXNlckRhdGEucnVsZXMucnVsZV9kZWY7CiAgICB9CiAgICAvLyDljrvpmaTopobnm5blsYIKICAgIGZ1bmN0aW9uIGNsZWFyX2NvdmVycyhlbGUpewogICAgICAgIHZhciBvZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGUpOwogICAgICAgIGlmKG9kaXYpewogICAgICAgICAgICBvZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2Rpdik7CiAgICAgICAgfQogICAgfQogICAgLy8gYuermeWwhuaWh+Wtl+W1jOWll+WcqOmTvuaOpeS4rQogICAgZnVuY3Rpb24gY2xlYXJfbGlua19iaWxpYmlsaSgpewogICAgICAgIHZhciBvZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmRlc2NyaXB0aW9uIik7CiAgICAgICAgaWYob2Rpdil7CiAgICAgICAgICAgIHZhciB0RGl2ID0gb2Rpdi5xdWVyeVNlbGVjdG9yKCIuY29udGVudC1lbGxpcHNpcyIpOwogICAgICAgICAgICB2YXIgYURpdiA9IG9kaXYucXVlcnlTZWxlY3RvcigiYSIpOwogICAgICAgICAgICAgb2Rpdi5hcHBlbmRDaGlsZCh0RGl2KTsKICAgICAgICB9CiAgICB9CiAgICAvLyBodHRwczovL3ZvdGV0dy5jb20vd2lraS8lRTYlOUUlOTclRTYlOTklQkElRTUlQTAlODUKICAgIC8vIOS8muWIm+W7uuWkmuS4quaXoGlkLOaXoGNsYXNz55qEZGl2LOimhuebluWcqOaWh+Wtl+S4iuWxggogICAgZnVuY3Rpb24gY2xlYXJfdm90ZXR3KCl7CiAgICAgICAgdmFyIG9kaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLm13LXBhcnNlci1vdXRwdXQ+ZGl2IikKICAgICAgICBvZGl2cy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgdmFsdWUuc2V0QXR0cmlidXRlKCJzdHlsZSIsIiIpOwogICAgICAgIH0pCiAgICB9CiAKICAgIC8vIOWIm+S4luS4reaWh+e9kQogICAgZnVuY3Rpb24gY2xlYXJfY2h1YW5nc2hpKCl7CiAgICAgICAgY29uc29sZS5sb2coIuWIm+S4luS4reaWh+e9kSDlvIDlp4vmiafooYwiKTsKCiAgICAgICAgLy8gSlMg5rGJ5a2X5LiOVW5pY29kZeeggeeahOebuOS6kui9rOWMlgogICAgICAgICAgICAvLyBodHRwczovL3d3dy5jbmJsb2dzLmNvbS93d2xob21lL3AvNTY1MDc0NC5odG1sCiAgICAgICAgZnVuY3Rpb24gdG91bmljb2RlKGRhdGEpCiAgICAgICAgewogICAgICAgICAgICBpZihkYXRhID09ICcnKSByZXR1cm4gJ+ivt+i+k+WFpeaxieWtlyc7CiAgICAgICAgICAgIHZhciBzdHIgPScnOyAKICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxkYXRhLmxlbmd0aDtpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHN0cis9IlxcdSIrcGFyc2VJbnQoZGF0YVtpXS5jaGFyQ29kZUF0KDApLDEwKS50b1N0cmluZygxNik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdG9oYW56aShkYXRhKQogICAgICAgIHsKICAgICAgICAgICAgaWYoZGF0YSA9PSAnJykgcmV0dXJuICfor7fovpPlhaXljYHlha3ov5vliLZ1bmljb2RlJzsKICAgICAgICAgICAgZGF0YSA9IGRhdGEuc3BsaXQoIlxcdSIpOwogICAgICAgICAgICB2YXIgc3RyID0nJzsKICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxkYXRhLmxlbmd0aDtpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHN0cis9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChkYXRhW2ldLDE2KS50b1N0cmluZygxMCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIC8vIGphdmFzY3JpcHTkuK3nmoRyZXBsYWNl5Ye95pWw5ZCM5pe25pu/5o2i5aSa5Liq5a2X56ym5LiyCiAgICAgICAgICAgIC8vIGh0dHBzOi8vYmJzLmNzZG4ubmV0L3RvcGljcy8zMjAwOTcyNDYKICAgICAgICBBcnJheS5wcm90b3R5cGUuZWFjaMKgPcKgZnVuY3Rpb24odHJhbnMpwqB7CiAgICAgICAgICAgIMKgwqDCoMKgZm9ywqAodmFywqBpPTA7wqBpPHRoaXMubGVuZ3RoO8KgaSsrKQogICAgICAgICAgICDCoMKgwqDCoMKgwqDCoMKgdGhpc1tpXcKgPcKgdHJhbnModGhpc1tpXSzCoGkswqB0aGlzKTsKICAgICAgICAgICAgwqDCoMKgwqByZXR1cm7CoHRoaXM7CiAgICAgICAgICAgIH07CiAgICAgICAgQXJyYXkucHJvdG90eXBlLm1hcMKgPcKgZnVuY3Rpb24odHJhbnMpwqB7CiAgICAgICAgwqDCoMKgwqByZXR1cm7CoFtdLmNvbmNhdCh0aGlzKS5lYWNoKHRyYW5zKTsKICAgICAgICB9OwogICAgICAgIFJlZ0V4cC5lc2NhcGXCoD3CoGZ1bmN0aW9uKHN0cinCoHsKICAgICAgICDCoMKgwqDCoHJldHVybsKgbmV3wqBTdHJpbmcoc3RyKS5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xdXC9cXF0pL2cswqAnXFwkMScpOwogICAgICAgIH07CiAgICAgICAgZnVuY3Rpb27CoHByb3BlcnRpZXMob2JqKcKgewogICAgICAgIMKgwqDCoMKgdmFywqBwcm9wc8KgPcKgW107CiAgICAgICAgwqDCoMKgwqBmb3LCoCh2YXLCoHDCoGluwqBvYmopwqBwcm9wcy5wdXNoKHApOwogICAgICAgIMKgwqDCoMKgcmV0dXJuwqBwcm9wczsKICAgICAgICB9CiAgICAgICAgLy/CoC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIHZhciBib29rcmVhZGVyY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5ib29rcmVhZGVyY29udGVudCIpOwogICAgICAgIGlmKGJvb2tyZWFkZXJjb250ZW50KXsKICAgICAgICAgICAgdmFyIHN0ciA9IGJvb2tyZWFkZXJjb250ZW50LmlubmVyVGV4dDsKICAgICAgICAgICAgdmFyIHN0clVuaWNvZGUgPSB0b3VuaWNvZGUoc3RyKTsKICAgICAgICAgICAgdmFywqByZXBsYWNlbWVudHPCoD3CoHsiZTJhZiI6IjRlMDkiLCJlMmFmIjoiNGUwYiIsImUyYzkiOiI0ZTNiIiwiZTJkNiI6IjRlNDgiLCJlMmIyIjoiNGU0YiIsImUyYTYiOiI0ZTVmIiwiZTI5NCI6IjRlOGIiLCJlMmU5IjoiNGU4YyIsImUzMGEiOiI0ZThlIiwiZTI5MiI6IjRlOTQiLCJlMjk4IjoiNGU5YiIsImUyYTIiOiI0ZWUzIiwiZTJmMCI6IjRmNDYiLCJlMzBlIjoiNGY0ZCIsImUzMDUiOiI0ZjUzIiwiZTI5NiI6IjRmNWMiLCJlMmQzIjoiNGY2MCIsImUyZGIiOiI0ZjdmIiwiZTI5YiI6IjUxNmMiLCJlMmIwIjoiNTE3NiIsImUyZWQiOiI1MWZhIiwiZTJlYiI6IjUyMDYiLCJlMmYxIjoiNTIyOSIsImUzMDciOiI1MjMwIiwiZTJjZSI6IjUyMzYiLCJlMmU2IjoiNTI0ZCIsImUyZWEiOiI1MjliIiwiZTJhOCI6IjUyYTAiLCJlMmE1IjoiNTMxNiIsImUyYmQiOiI1MzQxIiwiZTMwMiI6IjUzOWYiLCJlMmRmIjoiNTNiYiIsImUyYzciOiI1M2M4IiwiZTMwMyI6IjUzY2QiLCJlMmFjIjoiNTNkMSIsImUyZjgiOiI1M2VhIiwiZTMwYiI6IjU0MDQiLCJlMjljIjoiNTQwOCIsImUyZDciOiI1NDBjIiwiZTJkOCI6IjU0MGUiLCJlMzA2IjoiNTQxMSIsImUyYzUiOiI1NDdkIiwiZTJiNCI6IjU2ZGIiLCJlMmY5IjoiNTZlMCIsImUyY2EiOiI1NzMwIiwiZTJlZiI6IjU5MTYiLCJlMmJjIjoiNTkxYSIsImUzMDEiOiI1OTI5IiwiZTI5YSI6IjU5N2QiLCJlMmI3IjoiNWI1MCIsImUyY2MiOiI1YjgzIiwiZTJlZSI6IjViOWEiLCJlMmZmIjoiNWJiNiIsImUyZTgiOiI1YzBmIiwiZTJkNCI6IjVjMzEiLCJlMmQ1IjoiNWM1NSIsImUyYTEiOiI1ZGU1IiwiZTJhMCI6IjVlNzMiLCJlMmZlIjoiNWU3NCIsImUyYzQiOiI1ZTc2IiwiZTJjOCI6IjVlYTYiLCJlMmFlIjoiNWVmYSIsImUzMDQiOiI1ZjYyIiwiZTI5MSI6IjVmODgiLCJlMmUyIjoiNWY5NyIsImUyZjIiOiI1ZmMzIiwiZTI5NSI6IjYwMjciLCJlMmQ5IjoiNjBjNSIsImUyYmUiOiI2MGYzIiwiZTJjMyI6IjYxMGYiLCJlMzBkIjoiNjIxMCIsImUyYmEiOiI2MjE2IiwiZTJmYSI6IjYyNDAiLCJlMjllIjoiNjI4YSIsImUyYTciOiI2M2QwIiwiZTJkMiI6IjY1M2YiLCJlMmFkIjoiNjU5OSIsImUyY2QiOiI2NWIwIiwiZTJmMyI6IjY1YjkifTsKICAgICAgICAgICAgdmFywqByZWdleMKgPcKgbmV3wqBSZWdFeHAocHJvcGVydGllcyhyZXBsYWNlbWVudHMpLm1hcChSZWdFeHAuZXNjYXBlKS5qb2luKCJ8IikswqAiZyIpOwogICAgICAgICAgICBzdHJVbmljb2RlID0gc3RyVW5pY29kZS5yZXBsYWNlKHJlZ2V4LMKgZnVuY3Rpb24oJDApwqB7wqByZXR1cm7CoHJlcGxhY2VtZW50c1skMF07wqB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0clVuaWNvZGUpCiAgICAgICAgICAgIHN0clVuaWNvZGUgPSBzdHJVbmljb2RlLnJlcGxhY2UoInUwIiwiIik7CiAgICAgICAgICAgIHN0ciA9IHRvaGFuemkoc3RyVW5pY29kZSk7CiAgICAKICAgICAgICAgICAgYm9va3JlYWRlcmNvbnRlbnQuaW5uZXJUZXh0ID0gc3RyOwogICAgICAgIH0KCgogICAgfQogCiAgICAvLyAzLngueCDov4fmuKEgNC54Lngg54mI5pysCiAgICBmdW5jdGlvbiB2ZXJzaW9uX3VwXzNfdG9fNCgpewogICAgICAgIHZhciBvbGRfdmVyc2lvbiA9IEdNX2dldFZhbHVlKCJibGFja19saXN0Iik7CiAgICAgICAgaWYoIW9sZF92ZXJzaW9uKXtyZXR1cm59OwogICAgICAgIHJ3bF91c2VyRGF0YS5kYXRhID0gdW5pcXVlKHJ3bF91c2VyRGF0YS5kYXRhLmNvbmNhdChvbGRfdmVyc2lvbi5kYXRhKSk7CiAgICAgICAgR01fc2V0VmFsdWUoInJ3bF91c2VyRGF0YSIscndsX3VzZXJEYXRhKTsKIAogICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJibGFja19saXN0Iik7CiAgICAgICAgR01fZGVsZXRlVmFsdWUoInJ3bF91c2VyZGF0YSIpOwogICAgfQp9KSgpOyA="},{"name":"Youtube Subtitle Downloader v32","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["https://*youtube.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":["google.com"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1630066351439,"data":{}},"enabled":true,"position":8,"file_url":"https://greasyfork.org/scripts/5368-youtube-subtitle-downloader-v20/code/Youtube%20Subtitle%20Downloader%20v20.user.js","uuid":"82ccafb4-79ad-40e2-a9e0-d9749cad4db9","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFlvdXR1YmUgU3VidGl0bGUgRG93bmxvYWRlciB2MzIKLy8gQGluY2x1ZGUgICAgICAgIGh0dHBzOi8vKnlvdXR1YmUuY29tLyoKLy8gQGF1dGhvciAgICAgICAgIENoZW5nIFpoZW5nCi8vIEBjb3B5cmlnaHQgICAgICAyMDA5IFRpbSBTbWFydDsgMjAxMSBndzExMXp6OyAyMDE0fjIwMjEgQ2hlbmcgWmhlbmc7Ci8vIEBsaWNlbnNlICAgICAgICBHTlUgR1BMIHYzLjAgb3IgbGF0ZXIuIGh0dHA6Ly93d3cuZ251Lm9yZy9jb3B5bGVmdC9ncGwuaHRtbAovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9jb2RlLmpxdWVyeS5jb20vanF1ZXJ5LTEuMTIuNC5taW4uanMKLy8gQHZlcnNpb24gICAgICAgIDMyCi8vIEBncmFudCBHTV94bWxodHRwUmVxdWVzdAovLyBAbmFtZXNwYWNlIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvdXNlcnMvNTcxMQovLyBAZGVzY3JpcHRpb24gICBEb3dubG9hZCBTdWJ0aXRsZXMKLy8gPT0vVXNlclNjcmlwdD09CgovKgogIFtXaGF0IGlzIHRoaXM/XQogICAgVGhpcyBUYW1wZXJtb25rZXkgc2NyaXB0IGFsbG93cyB5b3UgdG8gZG93bmxvYWQgWW91dHViZSAiQXV0b21hdGljIHN1YnRpdGxlIiBhbmQgImNsb3NlZCBzdWJ0aXRsZSIuCgogIFtOb3RlXQogICAgSWYgaXQgZG9lc24ndCB3b3JrIChyYXJlbHkpLCB0cnkgdG8gcmVmcmVzaCB0aGUgcGFnZS4KICAgIElmIHByb2JsZW0gc3RpbGwgZXhpc3RzIGFmdGVyIHJlZnJlc2hpbmcsIHNlbmQgYW4gZW1haWwgdG8gZ3Vva3JmYW5zQGdtYWlsLmNvbS4KCiAgW1dobyBidWlsdCB0aGlzP10KICAgIEF1dGhvciA6ICBDaGVuZyBaaGVuZyAo6YOR6K+aKQogICAgRW1haWwgIDogIGd1b2tyZmFuc0BnbWFpbC5jb20KICAgIEdpdGh1YiA6ICBodHRwczovL2dpdGh1Yi5jb20vMWM3L1lvdXR1YmUtQXV0by1TdWJ0aXRsZS1Eb3dubG9hZAogICAgSWYgeW91IHdhbnQgdG8gaW1wcm92ZSB0aGUgc2NyaXB0LCBHaXRodWIgcHVsbCByZXF1ZXN0cyBhcmUgd2VsY29tZS4KCiAgW05vdGUgZm9yIERldmVsb3BlcnNdCiAgICBGZXcgdGhpbmdzIGJlZm9yZSB5b3UgcmVhZCB0aGUgY29kZToKICAgIDAuIFNvbWUgY29tbWVudHMgYXJlIHdyaXR0ZW4gaW4gQ2hpbmVzZS4KICAgIDEuIFlvdXR1YmUgaGFzIDIgaW50ZXJmYWNlczogTWF0ZXJpYWwgRGVzaWduIGFuZCBUaGUgT2xkIERlc2lnbi4KICAgIDIuIFRoaXMgY29kZSBoYW5kbGVzIGJvdGggIkF1dG8iIGFuZCAiQ2xvc2VkIiBzdWJ0aXRsZXMuCgogIFtXaGF0IGlzICJUYW1wZXJtb25rZXkiP10KICAgICJUYW1wZXJtb25rZXkgc2NyaXB0IiBtZWFucyB0aGF0IHlvdSBuZWVkcyB0byBpbnN0YWxsIGEgYnJvd3NlciBleHRlbnNpb24gY2FsbGVkICJUYW1wZXJtb25rZXkiIGJlZm9yZSBpbnN0YWxsaW5nIHRoaXMgc2NyaXB0LgogICAgVGVtcGVybW9ua2V5IGlzIGF2YWlsYWJsZSBmb3IgbW9zdCBtb2Rlcm4gd2ViIGJyb3dzZXJzLCBzdWNoIGFzIENocm9tZSwgRmlyZWZveCwgU2FmYXJpLCBNaWNyb3NvZnQgRWRnZSwgYW5kIE9wZXJhLgoKICBbVGVzdCBWaWRlb10KICAgIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9YmtWc3VzOEVoeHMKICAgIFRoaXMgdmlkZW9zIG9ubHkgaGFzIGEgY2xvc2VkIEVuZ2xpc2ggc3VidGl0bGUsIHdpdGggbm8gYXV0byBzdWJ0aXRsZXMuCgogICAgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0tV0VxRnp5cmJicwogICAgbm8gc3VidGl0bGUgYXQgYWxsCgogICAgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj05QXpORUcxR0ItawogICAgaGF2ZSBhIGxvdCBvZiBzdWJ0aXRsZXMKCiAgICBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PXRxR2tPdnJLR2ZZCiAgICAxOjM2OjMzICBzdXBlciBsb25nIHN1YnRpdGxlCgogIFtIb3cgZG9lcyBpdCB3b3JrP10KICAgIFRoZSBjb2RlIGNhbiBiZSByb3VnaGx5IGRpdmlkZWQgaW50byB0aHJlZSBwYXJ0czoKICAgICAgMS4gQWRkIGEgYnV0dG9uIG9uIHRoZSBwYWdlLiAoVUkpCiAgICAgIDIuIERldGVjdCBpZiBzdWJ0aXRsZSBleGlzdHMuCiAgICAgIDMuIENvbnZlcnQgc3VidGl0bGUgZm9ybWF0LCB0aGVuIGRvd25sb2FkLgogIAogIFtUZXN0IEVudmlyb21lbnRdCiAgICBXb3JrcyBiZXN0IG9uIENocm9tZSArIFRhbXBlcm1vbmtleS4gCiAgICBUaGVyZSBhcmUgcGxlbnR5IENocm9taXVtLWJhc2VkIEJyb3dzZXIsIEkgZG8gbm90IGd1YXJhbnRlZSB0aGlzIHdvcmsgb24gYWxsIG9mIHRoZW07CgogIOS4quWIq+aDheWGteS4i+S4jeiDveeUqOaYr+WboOS4uiBqUXVlcnkg55qEIENETiDml6Dms5Xovb3lhaXvvIzop6PlhrPlip7ms5XmmK/kv67mlLnov5nkuIDooYwKICAvLyBAcmVxdWlyZSBodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMS4xMi40Lm1pbi5qcwogIOaUueaIkOS4gOS4quWIq+eahCBqUXVlcnkg5Zyw5Z2A77yM5q+U5aaCCiAgaHR0cHM6Ly9jZG4uYm9vdGNkbi5uZXQvYWpheC9saWJzL2pxdWVyeS8xLjEyLjQvanF1ZXJ5LmpzCiAgaHR0cHM6Ly9jZG4uc3RhdGljZmlsZS5vcmcvanF1ZXJ5LzEuMTIuNC9qcXVlcnkubWluLmpzCiovCgooZnVuY3Rpb24gKCkgewoKICAvLyBDb25maWcKICB2YXIgTk9fU1VCVElUTEUgPSAnTm8gU3VidGl0bGUnOwogIHZhciBIQVZFX1NVQlRJVExFID0gJ0Rvd25sb2FkIFN1YnRpdGxlcyc7CiAgdmFyIFRFWFRfTE9BRElORyA9ICdMb2FkaW5nLi4uJzsKICBjb25zdCBCVVRUT05fSUQgPSAneW91dHViZS1zdWJ0aXRsZS1kb3dubG9hZGVyLWJ5LTFjNy1sYXN0LXVwZGF0ZS0yMDIxLTItMjEnCiAgLy8gQ29uZmlnCgogIHZhciBIQVNIX0JVVFRPTl9JRCA9IGAjJHtCVVRUT05fSUR9YAoKICAvLyBpbml0aWFsaXplCiAgdmFyIGZpcnN0X2xvYWQgPSB0cnVlOyAvLyBpbmRpY2F0ZSBpZiBmaXJzdCBsb2FkIHRoaXMgd2VicGFnZSBvciBub3QKICB2YXIgeW91dHViZV9wbGF5ZXJSZXNwb25zZV8xYzcgPSBudWxsOyAvLyBmb3IgYXV0byBzdWJ0aXRsZQogIHVuc2FmZVdpbmRvdy5jYXB0aW9uX2FycmF5ID0gW107IC8vIHN0b3JlIGFsbCBzdWJ0aXRsZQoKICAvLyB0cmlnZ2VyIHdoZW4gZmlyc3QgbG9hZAogICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHsKICAgIHN0YXJ0KCk7CiAgfSk7CgogIC8vIEV4cGxhaW4gdGhpcyBmdW5jdGlvbjogd2UgcmVwZWF0bHkgdHJ5IGlmIGNlcnRhaW4gSFRNTCBlbGVtZW50IGV4aXN0LCAKICAvLyBpZiBpdCBkb2VzLCB3ZSBjYWxsIGluaXQoKQogIC8vIGlmIGl0IGRvZXNuJ3QsIHN0b3AgdHJ5aW5nIGFmdGVyIGNlcnRhaW4gdGltZQogIGZ1bmN0aW9uIHN0YXJ0KCkgewogICAgdmFyIHJldHJ5X2NvdW50ID0gMDsKICAgIHZhciBSRVRSWV9MSU1JVCA9IDMwOwogICAgLy8gdXNlICJzZXRJbnRlcnZhbCIgaXMgYmVjYXVzZSAiJChkb2N1bWVudCkucmVhZHkoKSIgc3RpbGwgbm90IGVub3VnaCwgc3RpbGwgdG9vIGVhcmx5CiAgICAvLyAzMzAgd29yayBmb3IgbWUuCiAgICBpZiAobmV3X21hdGVyaWFsX2Rlc2lnbl92ZXJzaW9uKCkpIHsKICAgICAgdmFyIG1hdGVyaWFsX2NoZWNrRXhpc3QgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aXRsZS5zdHlsZS1zY29wZS55dGQtdmlkZW8tcHJpbWFyeS1pbmZvLXJlbmRlcmVyJykubGVuZ3RoKSB7CiAgICAgICAgICBpbml0KCk7CiAgICAgICAgICBjbGVhckludGVydmFsKG1hdGVyaWFsX2NoZWNrRXhpc3QpOwogICAgICAgIH0KICAgICAgICByZXRyeV9jb3VudCA9IHJldHJ5X2NvdW50ICsgMTsKICAgICAgICBpZiAocmV0cnlfY291bnQgPiBSRVRSWV9MSU1JVCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChtYXRlcmlhbF9jaGVja0V4aXN0KTsKICAgICAgICB9CiAgICAgIH0sIDMzMCk7CiAgICB9IGVsc2UgewogICAgICB2YXIgY2hlY2tFeGlzdCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoJCgnI3dhdGNoNy1oZWFkbGluZScpLmxlbmd0aCkgewogICAgICAgICAgaW5pdCgpOwogICAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0V4aXN0KTsKICAgICAgICB9CiAgICAgICAgcmV0cnlfY291bnQgPSByZXRyeV9jb3VudCArIDE7CiAgICAgICAgaWYgKHJldHJ5X2NvdW50ID4gUkVUUllfTElNSVQpIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tFeGlzdCk7CiAgICAgICAgfQogICAgICB9LCAzMzApOwogICAgfQogIH0KCiAgLy8gdHJpZ2dlciB3aGVuIGxvYWRpbmcgbmV3IHBhZ2UgCiAgLy8gKGFjdHVhbGx5IHRoaXMgd291bGQgYWxzbyB0cmlnZ2VyIHdoZW4gZmlyc3QgbG9hZGluZywgdGhhdCdzIG5vdCB3aGF0IHdlIHdhbnQsIHRoYXQncyB3aHkgd2UgbmVlZCB0byB1c2UgZmlyc3JfbG9hZCA9PT0gZmFsc2UpCiAgLy8gKG5ldyBNYXRlcmlhbCBkZXNpZ24gdmVyc2lvbiB3b3VsZCB0cmlnZ2VyIHRoaXMgInl0LW5hdmlnYXRlLWZpbmlzaCIgZXZlbnQuIG9sZCB2ZXJzaW9uIHdvdWxkIG5vdC4pCiAgdmFyIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdOwogIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcigieXQtbmF2aWdhdGUtZmluaXNoIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAvLyAyMDIxLTgtOSDmtYvor5Xnu5PmnpzvvJp5dC1uYXZpZ2F0ZS1maW5pc2gg5Y+v5Lul5q2j5bi46Kem5Y+RCiAgICBpZiAoY3VycmVudF9wYWdlX2lzX3ZpZGVvX3BhZ2UoKSA9PT0gZmFsc2UpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgeW91dHViZV9wbGF5ZXJSZXNwb25zZV8xYzcgPSBldmVudC5kZXRhaWwucmVzcG9uc2UucGxheWVyUmVzcG9uc2U7IC8vIGZvciBhdXRvIHN1YnRpdGxlCiAgICB1bnNhZmVXaW5kb3cuY2FwdGlvbl9hcnJheSA9IFtdOyAvLyBjbGVhbiB1cCAoaW1wb3J0YW50LCBvdGhlcndpc2Ugd291bGQgaGF2ZSBtb3JlIGFuZCBtb3JlIGl0ZW0gYW5kIGNhdXNlIGVycm9yKQoKICAgIC8vIGlmIHVzZSBjbGljayB0byBhbm90aGVyIHBhZ2UsIGluaXQgYWdhaW4gdG8gZ2V0IGNvcnJlY3Qgc3VidGl0bGUKICAgIGlmIChmaXJzdF9sb2FkID09PSBmYWxzZSkgewogICAgICByZW1vdmVfc3VidGl0bGVfZG93bmxvYWRfYnV0dG9uKCk7CiAgICAgIGluaXQoKTsKICAgIH0KICB9KTsKCiAgLy8gcmV0dXJuIHRydWUgLyBmYWxzZQogIC8vIERldGVjdCBbbmV3IHZlcnNpb24gVUkobWF0ZXJpYWwgZGVzaWduKV0gT1IgW29sZCB2ZXJzaW9uIFVJXQogIC8vIEkgdGVzdGVkIHRoaXMsIGFjY3VyYXRlZC4KICBmdW5jdGlvbiBuZXdfbWF0ZXJpYWxfZGVzaWduX3ZlcnNpb24oKSB7CiAgICB2YXIgb2xkX3RpdGxlX2VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2F0Y2g3LWhlYWRsaW5lJyk7CiAgICBpZiAob2xkX3RpdGxlX2VsZW1lbnQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQoKICAvLyByZXR1cm4gdHJ1ZSAvIGZhbHNlCiAgZnVuY3Rpb24gY3VycmVudF9wYWdlX2lzX3ZpZGVvX3BhZ2UoKSB7CiAgICByZXR1cm4gZ2V0X3VybF92aWRlb19pZCgpICE9PSBudWxsOwogIH0KCiAgLy8gcmV0dXJuIHN0cmluZyBsaWtlICJSVzFDaGlXeWlaUSIsICBmcm9tICJodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PVJXMUNoaVd5aVpRIgogIC8vIG9yIG51bGwKICBmdW5jdGlvbiBnZXRfdXJsX3ZpZGVvX2lkKCkgewogICAgcmV0dXJuIGdldFVSTFBhcmFtZXRlcigndicpOwogIH0KCiAgLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTU4MjUxMi9ob3ctdG8tZ2V0LXVybC1wYXJhbWV0ZXJzLXdpdGgtamF2YXNjcmlwdC8xMTU4MjUxMyMxMTU4MjUxMwogIGZ1bmN0aW9uIGdldFVSTFBhcmFtZXRlcihuYW1lKSB7CiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KChuZXcgUmVnRXhwKCdbP3wmXScgKyBuYW1lICsgJz0nICsgJyhbXiY7XSs/KSgmfCN8O3wkKScpLmV4ZWMobG9jYXRpb24uc2VhcmNoKSB8fCBbbnVsbCwgJyddKVsxXS5yZXBsYWNlKC9cKy9nLCAnJTIwJykpIHx8IG51bGw7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVfc3VidGl0bGVfZG93bmxvYWRfYnV0dG9uKCkgewogICAgJChIQVNIX0JVVFRPTl9JRCkucmVtb3ZlKCk7CiAgfQoKICBmdW5jdGlvbiBpbml0KCkgewogICAgaW5qZWN0X291cl9zY3JpcHQoKTsKICAgIGZpcnN0X2xvYWQgPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGluamVjdF9vdXJfc2NyaXB0KCkgewogICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLAogICAgICBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKSwKICAgICAgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyksCiAgICAgIGNvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhdGNoNy1oZWFkbGluZScpOyAvLyBZb3V0dWJlIHZpZGVvIHRpdGxlIERJVgoKICAgIHZhciBjc3NfZGl2ID0gYGRpc3BsYXk6IHRhYmxlOyAKICAgIG1hcmdpbi10b3A6NHB4OwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiKDAsIDE4MywgOTApOyAKICAgIGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTsgCiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAzcHg7IAogICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDNweDsgCiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4OyAKICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDNweDsgCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBCNzVBOwogICAgYDsKICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY3NzX2Rpdik7CgogICAgZGl2LmlkID0gQlVUVE9OX0lEOwoKICAgIHNlbGVjdC5pZCA9ICdjYXB0aW9uc19zZWxlY3Rvcic7CiAgICBzZWxlY3QuZGlzYWJsZWQgPSB0cnVlOwogICAgbGV0IGNzc19zZWxlY3QgPSBgZGlzcGxheTpibG9jazsgCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMCwgMTgzLCA5MCk7IAogICAgY3Vyc29yOiBwb2ludGVyOyAKICAgIGNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7IAogICAgYmFja2dyb3VuZC1jb2xvcjogIzAwQjc1QTsKICAgIHBhZGRpbmc6IDRweDsKICAgIGA7CiAgICBzZWxlY3Quc2V0QXR0cmlidXRlKCdzdHlsZScsIGNzc19zZWxlY3QpOwoKICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IFRFWFRfTE9BRElORzsKICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7CiAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTsKCiAgICAvLyDkuIvmi4noj5zljZXph4zvvIzpgInmi6nkuIDpobnlkI7op6blj5HkuIvovb0KICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgIGRvd25sb2FkX3N1YnRpdGxlKHRoaXMpOwogICAgfSwgZmFsc2UpOwoKICAgIGRpdi5hcHBlbmRDaGlsZChzZWxlY3QpOyAvLyBwdXQgPHNlbGVjdD4gaW50byA8ZGl2PgoKICAgIC8vIHB1dCB0aGUgZGl2IGludG8gcGFnZTogbmV3IG1hdGVyaWFsIGRlc2lnbgogICAgdmFyIHRpdGxlX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGl0bGUuc3R5bGUtc2NvcGUueXRkLXZpZGVvLXByaW1hcnktaW5mby1yZW5kZXJlcicpOwogICAgaWYgKHRpdGxlX2VsZW1lbnQpIHsKICAgICAgJCh0aXRsZV9lbGVtZW50WzBdKS5hZnRlcihkaXYpOwogICAgfQogICAgLy8gcHV0IHRoZSBkaXYgaW50byBwYWdlOiBvbGQgdmVyc2lvbgogICAgaWYgKGNvbnRyb2xzKSB7CiAgICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKGRpdik7CiAgICB9CgogICAgbG9hZF9sYW5ndWFnZV9saXN0KHNlbGVjdCk7CgogICAgLy8gPGE+IGVsZW1lbnQgaXMgZm9yIGRvd25sb2FkCiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIGEuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5Om5vbmU7JzsKICAgIGEuc2V0QXR0cmlidXRlKCJpZCIsICJGb3JTdWJ0aXRsZURvd25sb2FkIik7CiAgICB2YXIgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07CiAgICBib2R5LmFwcGVuZENoaWxkKGEpOwogIH0KCiAgLy8gdHJpZ2dlciB3aGVuIHVzZXIgc2VsZWN0IDxvcHRpb24+CiAgYXN5bmMgZnVuY3Rpb24gZG93bmxvYWRfc3VidGl0bGUoc2VsZWN0b3IpIHsKICAgIC8vIGlmIHVzZXIgc2VsZWN0IGZpcnN0IDxvcHRpb24+LCB3ZSBqdXN0IHJldHVybiwgZG8gbm90aGluZy4KICAgIGlmIChzZWxlY3Rvci5zZWxlY3RlZEluZGV4ID09IDApIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBjYXB0aW9uID0gY2FwdGlvbl9hcnJheVtzZWxlY3Rvci5zZWxlY3RlZEluZGV4IC0gMV07CiAgICAvLyBiZWNhdXNlIGZpcnN0IDxvcHRpb24+IGlzIGZvciBkaXNwbGF5LCBzbyBpbmRleCAtIDEgCgogICAgdmFyIHJlc3VsdCA9IG51bGw7CiAgICB2YXIgZmlsZW5hbWUgPSBudWxsOyAvLyDkv53lrZjmlofku7blkI0KCiAgICAvLyBpZiB1c2VyIGNob29zZSBhdXRvIHN1YnRpdGxlCiAgICBpZiAoY2FwdGlvbi5sYW5nX2NvZGUgPT0gJ0FVVE8nKSB7CiAgICAgIHJlc3VsdCA9IGF3YWl0IGdldF9hdXRvX3N1YnRpdGxlKCk7CiAgICAgIGZpbGVuYW1lID0gZ2V0X2ZpbGVfbmFtZShnZXRfYXV0b19zdWJ0aXRsZV9uYW1lKCkpOwogICAgfSBlbHNlIHsKICAgICAgLy8gY2xvc2VkIHN1YnRpdGxlCiAgICAgIGxldCBsYW5nX2NvZGUgPSBjYXB0aW9uLmxhbmdfY29kZTsKICAgICAgbGV0IGxhbmdfbmFtZSA9IGNhcHRpb24ubGFuZ19uYW1lOwogICAgICByZXN1bHQgPSBhd2FpdCBnZXRfY2xvc2VkX3N1YnRpdGxlKGxhbmdfY29kZSk7CiAgICAgIGZpbGVuYW1lID0gZ2V0X2ZpbGVfbmFtZShsYW5nX25hbWUpOwogICAgfQoKICAgIGxldCBzcnQgPSBwYXJzZV95b3V0dWJlX1hNTF90b19TUlQocmVzdWx0KTsKICAgIGRvd25sb2FkU3RyaW5nKHNydCwgInRleHQvcGxhaW4iLCBmaWxlbmFtZSk7CgogICAgLy8gQWZ0ZXIgZG93bmxvYWQsIHNlbGVjdCBmaXJzdCA8b3B0aW9uPgogICAgc2VsZWN0b3Iub3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7CiAgfQoKICAvLyBSZXR1cm4gc29tZXRoaW5nIGxpa2U6ICIoRW5nbGlzaClIb3cgRGlkIFB5dGhvbiBCZWNvbWUgQSBEYXRhIFNjaWVuY2UgUG93ZXJob3VzZT8uc3J0IgogIGZ1bmN0aW9uIGdldF9maWxlX25hbWUoeCkgewogICAgLy8gdmFyIG1ldGhvZF8xID0gJygnICsgeCArICcpJyArIGRvY3VtZW50LnRpdGxlICsgJy5zcnQnOyAvLyDlpoLmnpzmnInpgJrnn6XmlbDvvIzmlofku7blkI3kuZ/kvJrluKbkuIrvvIzmr5TovoPng6bvvIzov5nnp43mlrnlvI/kuI3lpb0KICAgIC8vIHZhciBtZXRob2RfMiA9ICcoJyArIHggKyAnKScgKyBnZXRfdGl0bGUoKSArICcuc3J0JzsKICAgIHZhciBtZXRob2RfMyA9IGAoJHt4fSkke2dldF90aXRsZSgpfV92aWRlb19pZF8ke2dldF92aWRlb19pZCgpfS5zcnRgOwogICAgcmV0dXJuIG1ldGhvZF8zCiAgfQoKICAvLyDmi7/lrozmlbTlrZfluZXnmoQgWE1MCiAgLy8gYXN5bmMgZnVuY3Rpb24gZ2V0X2Nsb3NlZF9zdWJ0aXRsZXMoKSB7CiAgLy8gICB2YXIgbGlzdF91cmwgPSAnaHR0cHM6Ly92aWRlby5nb29nbGUuY29tL3RpbWVkdGV4dD9obD1lbiZ2PScgKyBnZXRfdXJsX3ZpZGVvX2lkKCkgKyAnJnR5cGU9bGlzdCc7CiAgLy8gICAvLyBFeGFtcGxlOiBodHRwczovL3ZpZGVvLmdvb2dsZS5jb20vdGltZWR0ZXh0P2hsPWVuJnY9aWYzNmJxSHlwcWsmdHlwZT1saXN0CiAgLy8gICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogIC8vICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgLy8gICAgICAgbWV0aG9kOiAnR0VUJywKICAvLyAgICAgICB1cmw6IGxpc3RfdXJsLAogIC8vICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHhocikgewogIC8vICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2VUZXh0KQogIC8vICAgICAgIH0KICAvLyAgICAgfSkKICAvLyAgIH0pCiAgLy8gfQoKICAvLyBkZXRlY3QgaWYgImF1dG8gc3VidGl0bGUiIGFuZCAiY2xvc2VkIHN1YnRpdGxlIiBleGlzdAogIC8vIGFuZCBhZGQgPG9wdGlvbj4gaW50byA8c2VsZWN0PgogIGFzeW5jIGZ1bmN0aW9uIGxvYWRfbGFuZ3VhZ2VfbGlzdChzZWxlY3QpIHsKICAgIC8vIGF1dG8KICAgIHZhciBhdXRvX3N1YnRpdGxlX2V4aXN0ID0gZmFsc2U7CgogICAgLy8gY2xvc2VkCiAgICB2YXIgY2xvc2VkX3N1YnRpdGxlX2V4aXN0ID0gZmFsc2U7CgogICAgLy8gZ2V0IGF1dG8gc3VidGl0bGUKICAgIHZhciBhdXRvX3N1YnRpdGxlX3VybCA9IGdldF9hdXRvX3N1YnRpdGxlX3htbF91cmwoKTsKICAgIGlmIChhdXRvX3N1YnRpdGxlX3VybCAhPSBmYWxzZSkgewogICAgICBhdXRvX3N1YnRpdGxlX2V4aXN0ID0gdHJ1ZTsKICAgIH0KCiAgICB2YXIgY2FwdGlvblRyYWNrcyA9IGdldF9jYXB0aW9uVHJhY2tzKCkKICAgIGlmIChjYXB0aW9uVHJhY2tzICE9IHVuZGVmaW5lZCAmJiB0eXBlb2YgY2FwdGlvblRyYWNrcyA9PT0gJ29iamVjdCcgJiYgY2FwdGlvblRyYWNrcy5sZW5ndGggPiAwKSB7CiAgICAgIGNsb3NlZF9zdWJ0aXRsZV9leGlzdCA9IHRydWU7CiAgICB9CgogICAgLy8gaWYgbm8gc3VidGl0bGUgYXQgYWxsLCBqdXN0IHNheSBubyBhbmQgc3RvcAogICAgaWYgKGF1dG9fc3VidGl0bGVfZXhpc3QgPT0gZmFsc2UgJiYgY2xvc2VkX3N1YnRpdGxlX2V4aXN0ID09IGZhbHNlKSB7CiAgICAgIHNlbGVjdC5vcHRpb25zWzBdLnRleHRDb250ZW50ID0gTk9fU1VCVElUTEU7CiAgICAgIGRpc2FibGVfZG93bmxvYWRfYnV0dG9uKCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLyBpZiBhdCBsZWFzdCBvbmUgdHlwZSBvZiBzdWJ0aXRsZSBleGlzdAogICAgc2VsZWN0Lm9wdGlvbnNbMF0udGV4dENvbnRlbnQgPSBIQVZFX1NVQlRJVExFOwogICAgc2VsZWN0LmRpc2FibGVkID0gZmFsc2U7CgogICAgdmFyIG9wdGlvbiA9IG51bGw7IC8vIGZvciA8b3B0aW9uPgogICAgdmFyIGNhcHRpb25faW5mbyA9IG51bGw7IC8vIGZvciBvdXIgY3VzdG9tIG9iamVjdAoKICAgIC8vIGlmIGF1dG8gc3VidGl0bGUgZXhpc3QKICAgIGlmIChhdXRvX3N1YnRpdGxlX2V4aXN0KSB7CiAgICAgIGNhcHRpb25faW5mbyA9IHsKICAgICAgICBsYW5nX2NvZGU6ICdBVVRPJywgLy8gbGF0ZXIgd2UgdXNlIHRoaXMgdG8ga25vdyBpZiBpdCdzIGF1dG8gc3VidGl0bGUKICAgICAgICBsYW5nX25hbWU6IGdldF9hdXRvX3N1YnRpdGxlX25hbWUoKSAvLyBmb3IgZGlzcGxheSBvbmx5CiAgICAgIH07CiAgICAgIGNhcHRpb25fYXJyYXkucHVzaChjYXB0aW9uX2luZm8pOwoKICAgICAgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGNhcHRpb25faW5mby5sYW5nX25hbWU7CiAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgfQoKICAgIC8vIGlmIGNsb3NlZF9zdWJ0aXRsZV9leGlzdAogICAgaWYgKGNsb3NlZF9zdWJ0aXRsZV9leGlzdCkgewogICAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBjYXB0aW9uVHJhY2tzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHsKICAgICAgICB2YXIgY2FwdGlvbiA9IGNhcHRpb25UcmFja3NbaV07CiAgICAgICAgaWYgKGNhcHRpb24ua2luZCA9PSAnYXNyJykgewogICAgICAgICAgY29udGludWUKICAgICAgICB9CiAgICAgICAgbGV0IGxhbmdfY29kZSA9IGNhcHRpb24ubGFuZ3VhZ2VDb2RlCiAgICAgICAgbGV0IGxhbmdfdHJhbnNsYXRlZCA9IGNhcHRpb24ubmFtZS5zaW1wbGVUZXh0CiAgICAgICAgbGV0IGxhbmdfbmFtZSA9IGxhbmdfY29kZV90b19sb2NhbF9uYW1lKGxhbmdfY29kZSwgbGFuZ190cmFuc2xhdGVkKQogICAgICAgIGNhcHRpb25faW5mbyA9IHsKICAgICAgICAgIGxhbmdfY29kZTogbGFuZ19jb2RlLAogICAgICAgICAgbGFuZ19uYW1lOiBsYW5nX25hbWUsCiAgICAgICAgfTsKICAgICAgICBjYXB0aW9uX2FycmF5LnB1c2goY2FwdGlvbl9pbmZvKTsKICAgICAgICAvLyDliqDliLAgY2FwdGlvbl9hcnJheSDph4wsIOS4gOS4quWFqOWxgOWPmOmHjywg5b6F5Lya6KaB6Z2g5a6D5p2l5LiL6L29CiAgICAgICAgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gY2FwdGlvbl9pbmZvLmxhbmdfbmFtZTsKICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gZGlzYWJsZV9kb3dubG9hZF9idXR0b24oKSB7CiAgICAkKEhBU0hfQlVUVE9OX0lEKQogICAgICAuY3NzKCdib3JkZXInLCAnIzk1YTVhNicpCiAgICAgIC5jc3MoJ2N1cnNvcicsICdub3QtYWxsb3dlZCcpCiAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAnIzk1YTVhNicpOwogICAgJCgnI2NhcHRpb25zX3NlbGVjdG9yJykKICAgICAgLmNzcygnYm9yZGVyJywgJyM5NWE1YTYnKQogICAgICAuY3NzKCdjdXJzb3InLCAnbm90LWFsbG93ZWQnKQogICAgICAuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyM5NWE1YTYnKTsKCiAgICBpZiAobmV3X21hdGVyaWFsX2Rlc2lnbl92ZXJzaW9uKCkpIHsKICAgICAgJChIQVNIX0JVVFRPTl9JRCkuY3NzKCdwYWRkaW5nJywgJzZweCcpOwogICAgfSBlbHNlIHsKICAgICAgJChIQVNIX0JVVFRPTl9JRCkuY3NzKCdwYWRkaW5nJywgJzVweCcpOwogICAgfQogIH0KCiAgLy8g5aSE55CG5pe26Ze0LiDmr5TlpoIgc3RhcnQ9IjY3MS4zMyIgIHN0YXJ0PSIzNy42NCIgIHN0YXJ0PSIxMiIgc3RhcnQ9IjIzLjAyOSIKICAvLyDlpITnkIbmiJAgc3J0IOaXtumXtCwg5q+U5aaCIDAwOjAwOjAwLDA5MCAgICAwMDowMDowOCw0NjAgICAgMDA6MTA6MjksMzUwCiAgZnVuY3Rpb24gcHJvY2Vzc190aW1lKHMpIHsKICAgIHMgPSBzLnRvRml4ZWQoMyk7CiAgICAvLyDotoXmo5LnmoTlh73mlbAsIOS4jeiuuuaYr+aVtOaVsOi/mOaYr+Wwj+aVsOmDvee7meW8hOaIkDPkvY3lsI/mlbDlvaLlvI8KICAgIC8vIOS4vuS4quafmuWtkDoKICAgIC8vIDY3MS4zMyAtPiA2NzEuMzMwCiAgICAvLyA2NzEgLT4gNjcxLjAwMAogICAgLy8g5rOo5oSP5Ye95pWw5Lya5Zub6IiN5LqU5YWlLiDlhbfkvZPor7vmlofmoaMKCiAgICB2YXIgYXJyYXkgPSBzLnNwbGl0KCcuJyk7CiAgICAvLyDmiorlvIDlp4vml7bpl7TmoLnmja7lj6Xlj7fliIblibIKICAgIC8vIDY3MS4zMzAg5Lya5YiG5Ymy5oiQ5pWw57uEOiBbNjcxLCAzMzBdCgogICAgdmFyIEhvdXIgPSAwOwogICAgdmFyIE1pbnV0ZSA9IDA7CiAgICB2YXIgU2Vjb25kID0gYXJyYXlbMF07IC8vIDY3MQogICAgdmFyIE1pbGxpU2Vjb25kID0gYXJyYXlbMV07IC8vIDMzMAogICAgLy8g5YWI5aOw5piO5LiL5Y+Y6YePLCDlvoXkvJrmiorov5nlh6DkuKrmi7zlpb3lsLHooYzkuoYKCiAgICAvLyDmiJHku6zmnaXlpITnkIbnp5LmlbAuICDmiooi5YiG6ZKfIuWSjCLlsI/ml7Yi6Zmk5Ye65p2lCiAgICBpZiAoU2Vjb25kID49IDYwKSB7CiAgICAgIE1pbnV0ZSA9IE1hdGguZmxvb3IoU2Vjb25kIC8gNjApOwogICAgICBTZWNvbmQgPSBTZWNvbmQgLSBNaW51dGUgKiA2MDsKICAgICAgLy8g5oqKIOenkiDmi4bmiJAg5YiG6ZKf5ZKM56eSLCDmr5TlpoIxMjHnp5IsIOaLhuaIkDLliIbpkp8x56eSCgogICAgICBIb3VyID0gTWF0aC5mbG9vcihNaW51dGUgLyA2MCk7CiAgICAgIE1pbnV0ZSA9IE1pbnV0ZSAtIEhvdXIgKiA2MDsKICAgICAgLy8g5oqKIOWIhumSnyDmi4bmiJAg5bCP5pe25ZKM5YiG6ZKfLCDmr5TlpoI3MDDliIbpkp8sIOaLhuaIkDEx5bCP5pe2NDDliIbpkp8KICAgIH0KICAgIC8vIOWIhumSn++8jOWmguaenOS9jeaVsOS4jeWkn+S4pOS9jeWwseWPmOaIkOS4pOS9je+8jOS4i+mdouS4pOS4qmlm6K+t5Y+l55qE5L2c55So5Lmf5piv5LiA5qC344CCCiAgICBpZiAoTWludXRlIDwgMTApIHsKICAgICAgTWludXRlID0gJzAnICsgTWludXRlOwogICAgfQogICAgLy8g5bCP5pe2CiAgICBpZiAoSG91ciA8IDEwKSB7CiAgICAgIEhvdXIgPSAnMCcgKyBIb3VyOwogICAgfQogICAgLy8g56eSCiAgICBpZiAoU2Vjb25kIDwgMTApIHsKICAgICAgU2Vjb25kID0gJzAnICsgU2Vjb25kOwogICAgfQogICAgcmV0dXJuIEhvdXIgKyAnOicgKyBNaW51dGUgKyAnOicgKyBTZWNvbmQgKyAnLCcgKyBNaWxsaVNlY29uZDsKICB9CgogIC8vIGNvcHkgZnJvbTogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZGFuYWxsaXNvbi8zZWM5ZDUzMTQ3ODhiMzM3YjY4MgogIC8vIFRoYW5rcyEgaHR0cHM6Ly9naXRodWIuY29tL2RhbmFsbGlzb24KICAvLyB3b3JrIGluIENocm9tZSA2NgogIC8vIHRlc3QgcGFzc2VkOiAyMDE4LTUtMTkKICBmdW5jdGlvbiBkb3dubG9hZFN0cmluZyh0ZXh0LCBmaWxlVHlwZSwgZmlsZU5hbWUpIHsKICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3RleHRdLCB7CiAgICAgIHR5cGU6IGZpbGVUeXBlCiAgICB9KTsKICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgYS5kb3dubG9hZCA9IGZpbGVOYW1lOwogICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgIGEuZGF0YXNldC5kb3dubG9hZHVybCA9IFtmaWxlVHlwZSwgYS5kb3dubG9hZCwgYS5ocmVmXS5qb2luKCc6Jyk7CiAgICBhLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgYS5jbGljaygpOwogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7CiAgICB9LCAxNTAwKTsKICB9CgogIC8vIGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vc25pcHBldHMvamF2YXNjcmlwdC91bmVzY2FwZS1odG1sLWluLWpzLwogIC8vIHR1cm4gSFRNTCBlbnRpdHkgYmFjayB0byB0ZXh0LCBleGFtcGxlOiAmcXVvdDsgc2hvdWxkIGJlICIKICBmdW5jdGlvbiBodG1sRGVjb2RlKGlucHV0KSB7CiAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgZS5jbGFzcyA9ICdkdW1teS1lbGVtZW50LWZvci10YW1wZXJtb25rZXktWW91dHViZS1TdWJ0aXRsZS1Eb3dubG9hZGVyLXNjcmlwdC10by1kZWNvZGUtaHRtbC1lbnRpdHknOwogICAgZS5pbm5lckhUTUwgPSBpbnB1dDsKICAgIHJldHVybiBlLmNoaWxkTm9kZXMubGVuZ3RoID09PSAwID8gIiIgOiBlLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlOwogIH0KCiAgLy8gcmV0dXJuIFVSTCBvciBudWxsOwogIC8vIGxhdGVyIHdlIGNhbiBzZW5kIGEgQUpBWCBhbmQgZ2V0IFhNTCBzdWJ0aXRsZQogIGZ1bmN0aW9uIGdldF9hdXRvX3N1YnRpdGxlX3htbF91cmwoKSB7CiAgICB0cnkgewogICAgICB2YXIgY2FwdGlvblRyYWNrcyA9IGdldF9jYXB0aW9uVHJhY2tzKCkKICAgICAgZm9yICh2YXIgaW5kZXggaW4gY2FwdGlvblRyYWNrcykgewogICAgICAgIHZhciBjYXB0aW9uID0gY2FwdGlvblRyYWNrc1tpbmRleF07CiAgICAgICAgaWYgKGNhcHRpb24ua2luZCA9PT0gJ2FzcicpIHsKICAgICAgICAgIHJldHVybiBjYXB0aW9uVHJhY2tzW2luZGV4XS5iYXNlVXJsOwogICAgICAgIH0KICAgICAgICAvLyBBU1Ig4oCTIEEgY2FwdGlvbiB0cmFjayBnZW5lcmF0ZWQgdXNpbmcgYXV0b21hdGljIHNwZWVjaCByZWNvZ25pdGlvbi4KICAgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS95b3V0dWJlL3YzL2RvY3MvY2FwdGlvbnMKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICBhc3luYyBmdW5jdGlvbiBnZXRfYXV0b19zdWJ0aXRsZSgpIHsKICAgIHZhciB1cmwgPSBnZXRfYXV0b19zdWJ0aXRsZV94bWxfdXJsKCk7CiAgICBpZiAodXJsID09IGZhbHNlKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhciByZXN1bHQgPSBhd2FpdCBnZXQodXJsKQogICAgcmV0dXJuIHJlc3VsdAogIH0KCiAgYXN5bmMgZnVuY3Rpb24gZ2V0X2Nsb3NlZF9zdWJ0aXRsZShsYW5nX2NvZGUpIHsKICAgIHRyeSB7CiAgICAgIHZhciBjYXB0aW9uVHJhY2tzID0gZ2V0X2NhcHRpb25UcmFja3MoKQogICAgICBmb3IgKHZhciBpIGluIGNhcHRpb25UcmFja3MpIHsKICAgICAgICB2YXIgY2FwdGlvbiA9IGNhcHRpb25UcmFja3NbaV07CiAgICAgICAgaWYgKGNhcHRpb24ubGFuZ3VhZ2VDb2RlID09PSBsYW5nX2NvZGUgJiYgY2FwdGlvbi5raW5kICE9ICdhc3InKSB7CiAgICAgICAgICAvLyDlv4XpobvlhpkgY2FwdGlvbi5raW5kICE9ICdhc3InCiAgICAgICAgICAvLyDlkKbliJnkvJrkuIvovb0y5Liq5a2X5bmV5paH5Lu277yI5Lmf5bCx5piv6L+Z5Liq5YiG5pSv5Lya6L+b5p2lMuasoe+8iQogICAgICAgICAgLy8g5Zug5Li6IGxhbmdfY29kZSDmmK8gImVuIiDkvJogbWF0Y2ggMuadoee6quW9le+8jOS4gOadoeaYr+iHquWKqOWtl+W5le+8jOS4gOadoeaYr+WujOaVtOWtl+W5lQogICAgICAgICAgLy8gIuiHquWKqOWtl+W5lSLpgqPmnaHmmK8ga2luZD1hc3IKICAgICAgICAgIC8vICLlrozmlbTlrZfluZUi6YKj5p2h5rKh5pyJIGtpbmQg5bGe5oCnCiAgICAgICAgICBsZXQgdXJsID0gY2FwdGlvblRyYWNrc1tpXS5iYXNlVXJsOwogICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGdldCh1cmwpCiAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgfQoKICAvLyBZb3V0dWJlIHJldHVybiBYTUwuIHdlIHdhbnQgU1JUICAKICAvLyBpbnB1dDogWW91dHViZSBYTUwgZm9ybWF0CiAgLy8gb3V0cHV0OiBTUlQgZm9ybWF0CiAgZnVuY3Rpb24gcGFyc2VfeW91dHViZV9YTUxfdG9fU1JUKHlvdXR1YmVfeG1sX3N0cmluZykgewogICAgaWYgKHlvdXR1YmVfeG1sX3N0cmluZyA9PT0gJycpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyIHRleHQgPSB5b3V0dWJlX3htbF9zdHJpbmcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RleHQnKTsKICAgIHZhciByZXN1bHQgPSAnJzsKICAgIHZhciBCT00gPSAnXHVGRUZGJzsKICAgIHJlc3VsdCA9IEJPTSArIHJlc3VsdDsgLy8gc3RvcmUgZmluYWwgU1JUIHJlc3VsdAogICAgdmFyIGxlbiA9IHRleHQubGVuZ3RoOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICB2YXIgaW5kZXggPSBpICsgMTsKICAgICAgdmFyIGNvbnRlbnQgPSB0ZXh0W2ldLnRleHRDb250ZW50LnRvU3RyaW5nKCk7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyg8KFtePl0rKT4pL2lnLCAiIik7IC8vIHJlbW92ZSBhbGwgaHRtbCB0YWcuCiAgICAgIHZhciBzdGFydCA9IHRleHRbaV0uZ2V0QXR0cmlidXRlKCdzdGFydCcpOwogICAgICB2YXIgZW5kID0gcGFyc2VGbG9hdCh0ZXh0W2ldLmdldEF0dHJpYnV0ZSgnc3RhcnQnKSkgKyBwYXJzZUZsb2F0KHRleHRbaV0uZ2V0QXR0cmlidXRlKCdkdXInKSk7CgogICAgICAvLyDkv53nlZnov5nmrrXku6PnoIEKICAgICAgLy8g5aaC5p6c5biM5pyb5a2X5bmV55qE57uT5p2f5pe26Ze05ZKM5LiL5LiA6KGM55qE5byA5aeL5pe26Ze055u45ZCM77yI6L+e5Zyo5LiA6LW377yJCiAgICAgIC8vIOWPr+S7peWPlua2iOS4i+mdoueahOazqOmHigogICAgICAvLyBpZiAoaSArIDEgPj0gbGVuKSB7CiAgICAgIC8vICAgZW5kID0gcGFyc2VGbG9hdCh0ZXh0W2ldLmdldEF0dHJpYnV0ZSgnc3RhcnQnKSkgKyBwYXJzZUZsb2F0KHRleHRbaV0uZ2V0QXR0cmlidXRlKCdkdXInKSk7CiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgZW5kID0gdGV4dFtpICsgMV0uZ2V0QXR0cmlidXRlKCdzdGFydCcpOwogICAgICAvLyB9CgogICAgICAvLyB3ZSB3YW50IFNSVCBmb3JtYXQ6CiAgICAgIC8qCiAgICAgICAgICAxCiAgICAgICAgICAwMDowMDowMSw5MzkgLS0+IDAwOjAwOjA0LDM1MAogICAgICAgICAgZXZlcnlib2R5IENyYWlnIEFkYW1zIGhlcmUgSSdtIGEKCiAgICAgICAgICAyCiAgICAgICAgICAwMDowMDowNCwzNTAgLS0+IDAwOjAwOjA2LDcyMAogICAgICAgICAgZmlsbW1ha2VyIG9uIFlvdVR1YmUgd2hvJ3MgZGlnZ2luZwogICAgICAqLwogICAgICB2YXIgbmV3X2xpbmUgPSAiXG4iOwogICAgICByZXN1bHQgPSByZXN1bHQgKyBpbmRleCArIG5ld19saW5lOwogICAgICAvLyAxCgogICAgICB2YXIgc3RhcnRfdGltZSA9IHByb2Nlc3NfdGltZShwYXJzZUZsb2F0KHN0YXJ0KSk7CiAgICAgIHZhciBlbmRfdGltZSA9IHByb2Nlc3NfdGltZShwYXJzZUZsb2F0KGVuZCkpOwogICAgICByZXN1bHQgPSByZXN1bHQgKyBzdGFydF90aW1lOwogICAgICByZXN1bHQgPSByZXN1bHQgKyAnIC0tPiAnOwogICAgICByZXN1bHQgPSByZXN1bHQgKyBlbmRfdGltZSArIG5ld19saW5lOwogICAgICAvLyAwMDowMDowMSw5MzkgLS0+IDAwOjAwOjA0LDM1MAoKICAgICAgY29udGVudCA9IGh0bWxEZWNvZGUoY29udGVudCk7CiAgICAgIC8vIHR1cm4gSFRNTCBlbnRpdHkgYmFjayB0byB0ZXh0LiBleGFtcGxlOiAmIzM5OyBiYWNrIHRvIGFwb3N0cm9waGUgKCcpCgogICAgICByZXN1bHQgPSByZXN1bHQgKyBjb250ZW50ICsgbmV3X2xpbmUgKyBuZXdfbGluZTsKICAgICAgLy8gZXZlcnlib2R5IENyYWlnIEFkYW1zIGhlcmUgSSdtIGEKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICAvLyByZXR1cm4gIkVuZ2xpc2ggKGF1dG8tZ2VuZXJhdGVkKSIgb3IgYSBkZWZhdWx0IG5hbWU7CiAgZnVuY3Rpb24gZ2V0X2F1dG9fc3VidGl0bGVfbmFtZSgpIHsKICAgIHRyeSB7CiAgICAgIHZhciBjYXB0aW9uVHJhY2tzID0gZ2V0X2NhcHRpb25UcmFja3MoKTsKICAgICAgZm9yICh2YXIgaW5kZXggaW4gY2FwdGlvblRyYWNrcykgewogICAgICAgIHZhciBjYXB0aW9uID0gY2FwdGlvblRyYWNrc1tpbmRleF07CiAgICAgICAgaWYgKHR5cGVvZiBjYXB0aW9uLmtpbmQgPT09ICdzdHJpbmcnICYmIGNhcHRpb24ua2luZCA9PSAnYXNyJykgewogICAgICAgICAgcmV0dXJuIGNhcHRpb25UcmFja3NbaW5kZXhdLm5hbWUuc2ltcGxlVGV4dDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuICdBdXRvIFN1YnRpdGxlJzsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIHJldHVybiAnQXV0byBTdWJ0aXRsZSc7CiAgICB9CiAgfQoKICAvLyByZXR1cm4gcGxheWVyX3Jlc3BvbnNlIG9yIHJldHVybiBudWxsCiAgLy8gZnVuY3Rpb24gZ2V0X2pzb24oKSB7CiAgLy8gICB2YXIganNvbiA9IG51bGwKICAvLyAgIHRyeSB7CiAgLy8gICAgIC8vIOWmguaenOaciee8k+WtmO+8jOi/lOWbnue8k+WtmAogIC8vICAgICBpZiAodHlwZW9mIHlvdXR1YmVfcGxheWVyUmVzcG9uc2VfMWM3ICE9PSAidW5kZWZpbmVkIiAmJiB5b3V0dWJlX3BsYXllclJlc3BvbnNlXzFjNyAhPT0gbnVsbCAmJiB5b3V0dWJlX3BsYXllclJlc3BvbnNlXzFjNyAhPT0gJycpIHsKICAvLyAgICAgICBqc29uID0geW91dHViZV9wbGF5ZXJSZXNwb25zZV8xYzc7CiAgLy8gICAgIH0KICAvLyAgICAgLy8g5bCd6K+V5pa55rOVMQogIC8vICAgICBpZiAoeXRwbGF5ZXIuY29uZmlnLmFyZ3MucGxheWVyX3Jlc3BvbnNlKSB7CiAgLy8gICAgICAgbGV0IHJhd19zdHJpbmcgPSB5dHBsYXllci5jb25maWcuYXJncy5wbGF5ZXJfcmVzcG9uc2U7CiAgLy8gICAgICAganNvbiA9IEpTT04ucGFyc2UocmF3X3N0cmluZyk7CiAgLy8gICAgIH0KICAvLyAgICAgLy8g5bCd6K+V5pa55rOVMgogIC8vICAgICBpZiAoeXRwbGF5ZXIuY29uZmlnLmFyZ3MucmF3X3BsYXllcl9yZXNwb25zZSkgewogIC8vICAgICAgIGpzb24gPSB5dHBsYXllci5jb25maWcuYXJncy5yYXdfcGxheWVyX3Jlc3BvbnNlOwogIC8vICAgICB9CiAgLy8gICAgIHJldHVybiBqc29uCiAgLy8gICB9IGNhdGNoIChlcnJvcikgewogIC8vICAgICByZXR1cm4gbnVsbAogIC8vICAgfQogIC8vIH0KCgogIGZ1bmN0aW9uIGdldF95b3V0dWJlX2RhdGEoKXsKICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgieXRkLWFwcCIpWzBdLmRhdGEucGxheWVyUmVzcG9uc2UKICB9CgogIGZ1bmN0aW9uIGdldF9jYXB0aW9uVHJhY2tzKCkgewogICAgbGV0IGRhdGEgPSBnZXRfeW91dHViZV9kYXRhKCk7CiAgICB2YXIgY2FwdGlvblRyYWNrcyA9IGRhdGE/LmNhcHRpb25zPy5wbGF5ZXJDYXB0aW9uc1RyYWNrbGlzdFJlbmRlcmVyPy5jYXB0aW9uVHJhY2tzCiAgICByZXR1cm4gY2FwdGlvblRyYWNrcwogIH0KCiAgLy8gSW5wdXQgYSBsYW5ndWFnZSBjb2RlLCBvdXRwdXQgdGhhdCBsYW5ndWFnZSBuYW1lIGluIGN1cnJlbnQgbG9jYWxlCiAgLy8g5aaC5p6c5b2T5YmN6K+t6KiA5piv5Lit5paH566A5L2TLCBJbnB1dDogImRlIiBPdXRwdXQ6IOW+t+ivrQogIC8vIGlmIGN1cnJlbnQgbG9jYWxlIGlzIEVuZ2xpc2goVVMpLCBJbnB1dDogImRlIiBPdXRwdXQ6ICJHZXJtYW55IgogIGZ1bmN0aW9uIGxhbmdfY29kZV90b19sb2NhbF9uYW1lKGxhbmd1YWdlQ29kZSwgZmFsbGJhY2tfbmFtZSkgewogICAgdHJ5IHsKICAgICAgdmFyIGNhcHRpb25UcmFja3MgPSBnZXRfY2FwdGlvblRyYWNrcygpCiAgICAgIGZvciAodmFyIGkgaW4gY2FwdGlvblRyYWNrcykgewogICAgICAgIHZhciBjYXB0aW9uID0gY2FwdGlvblRyYWNrc1tpXTsKICAgICAgICBpZiAoY2FwdGlvbi5sYW5ndWFnZUNvZGUgPT09IGxhbmd1YWdlQ29kZSkgewogICAgICAgICAgbGV0IHNpbXBsZVRleHQgPSBjYXB0aW9uVHJhY2tzW2ldLm5hbWUuc2ltcGxlVGV4dDsKICAgICAgICAgIGlmIChzaW1wbGVUZXh0KSB7CiAgICAgICAgICAgIHJldHVybiBzaW1wbGVUZXh0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tfbmFtZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgcmV0dXJuIGZhbGxiYWNrX25hbWUKICAgIH0KICB9CgogIC8vIOiOt+WPluinhumikeagh+mimAogIGZ1bmN0aW9uIGdldF90aXRsZSgpIHsKICAgIC8vIOaWueazlTHvvJrlhYjlsJ3or5Xmi7/liLDmoIfpopgKICAgIHZhciB0aXRsZV9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKICAgICAgImgxLnRpdGxlLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1wcmltYXJ5LWluZm8tcmVuZGVyZXIiCiAgICApOwogICAgaWYgKHRpdGxlX2VsZW1lbnQgIT0gbnVsbCkgewogICAgICB2YXIgdGl0bGUgPSB0aXRsZV9lbGVtZW50LmlubmVyVGV4dDsKICAgICAgLy8g6IO95ou/5Yiw5bCx6L+U5ZueCiAgICAgIGlmICh0aXRsZSAhPSB1bmRlZmluZWQgJiYgdGl0bGUgIT0gbnVsbCAmJiB0aXRsZSAhPSAiIikgewogICAgICAgIHJldHVybiB0aXRsZTsKICAgICAgfQogICAgfQogICAgLy8g5pa55rOVMu+8muWmguaenOaWueazlTHlpLHmlYjnlKjov5nkuKoKICAgIHJldHVybiB5dHBsYXllci5jb25maWcuYXJncy50aXRsZTsgLy8g6L+Z5Liq5LyaIGRlbGF5LCDlpoLmnpzpobXpnaLot7PovazkuobvvIzov5nkuKrojrflvpfnmoTmoIfpopjov5jmmK/ml6fnmoQKICB9CgogIGZ1bmN0aW9uIGdldF92aWRlb19pZCgpIHsKICAgIHJldHVybiB5dHBsYXllci5jb25maWcuYXJncy52aWRlb19pZDsKICB9CgogIC8vIFVzYWdlOiB2YXIgcmVzdWx0ID0gYXdhaXQgZ2V0KHVybCkKICBmdW5jdGlvbiBnZXQodXJsKSB7CiAgICByZXR1cm4gJC5hamF4KHsKICAgICAgdXJsOiB1cmwsCiAgICAgIHR5cGU6ICdnZXQnLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocikgewogICAgICAgIHJldHVybiByCiAgICAgIH0sCiAgICAgIGZhaWw6IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiBlcnJvcgogICAgICB9CiAgICB9KTsKICB9Cgp9KSgpOw==","requires":[{"meta":{"name":"jquery-1.12.4.min.js","url":"https://code.jquery.com/jquery-1.12.4.min.js","ts":1641973545174,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMi40IHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gYihhKX06YihhKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuZG9jdW1lbnQsZT1jLnNsaWNlLGY9Yy5jb25jYXQsZz1jLnB1c2gsaD1jLmluZGV4T2YsaT17fSxqPWkudG9TdHJpbmcsaz1pLmhhc093blByb3BlcnR5LGw9e30sbT0iMS4xMi40IixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihuLmlzUGxhaW5PYmplY3QoYyl8fChiPW4uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbi5pc0FycmF5KGEpP2E6W10pOmY9YSYmbi5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1uLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bi50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXt2YXIgYj1hJiZhLnRvU3RyaW5nKCk7cmV0dXJuIW4uaXNBcnJheShhKSYmYi1wYXJzZUZsb2F0KGIpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8Im9iamVjdCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKCFsLm93bkZpcnN0KWZvcihiIGluIGEpcmV0dXJuIGsuY2FsbChhLGIpO2ZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxrLmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZuLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKGgpcmV0dXJuIGguY2FsbChiLGEsYyk7Zm9yKGQ9Yi5sZW5ndGgsYz1jPzA+Yz9NYXRoLm1heCgwLGQrYyk6YzowO2Q+YztjKyspaWYoYyBpbiBiJiZiW2NdPT09YSlyZXR1cm4gY31yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7d2hpbGUoYz5kKWFbZSsrXT1iW2QrK107aWYoYyE9PWMpd2hpbGUodm9pZCAwIT09YltkXSlhW2UrK109YltkKytdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9Ziksbi5pc0Z1bmN0aW9uKGEpPyhjPWUuY2FsbChhcmd1bWVudHMsMiksZD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZC5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGQpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omx9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYobi5mbltTeW1ib2wuaXRlcmF0b3JdPWNbU3ltYm9sLml0ZXJhdG9yXSksbi5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2lbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0hIWEmJiJsZW5ndGgiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuImZ1bmN0aW9uIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6ImFycmF5Ij09PWN8fDA9PT1ifHwibnVtYmVyIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2EoKSx6PWdhKCksQT1nYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTD0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE49IlxcWyIrTCsiKigiK00rIikoPzoiK0wrIiooWypeJHwhfl0/PSkiK0wrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitNKyIpKXwpIitMKyIqXFxdIixPPSI6KCIrTSsiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrTisiKSopfC4qKVxcKXwpIixQPW5ldyBSZWdFeHAoTCsiKyIsImciKSxRPW5ldyBSZWdFeHAoIl4iK0wrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTCsiKyQiLCJnIiksUj1uZXcgUmVnRXhwKCJeIitMKyIqLCIrTCsiKiIpLFM9bmV3IFJlZ0V4cCgiXiIrTCsiKihbPit+XXwiK0wrIikiK0wrIioiKSxUPW5ldyBSZWdFeHAoIj0iK0wrIiooW15cXF0nXCJdKj8pIitMKyIqXFxdIiwiZyIpLFU9bmV3IFJlZ0V4cChPKSxWPW5ldyBSZWdFeHAoIl4iK00rIiQiKSxXPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTSsifFsqXSkiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK04pLFBTRVVETzpuZXcgUmVnRXhwKCJeIitPKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK0wrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK0wrIiooPzooWystXXwpIitMKyIqKFxcZCspfCkpIitMKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitLKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTCsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitMKyIqKCg/Oi1cXGQpP1xcZCopIitMKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxYPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWT0vXmhcZCQvaSxaPS9eW157XStce1xzKlxbbmF0aXZlIFx3LywkPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sXz0vWyt+XS8sYWE9Lyd8XFwvZyxiYT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK0wrIj98KCIrTCsiKXwuKSIsImlnIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGRhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmEoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3PWImJmIub3duZXJEb2N1bWVudCx4PWI/Yi5ub2RlVHlwZTo5O2lmKGQ9ZHx8W10sInN0cmluZyIhPXR5cGVvZiBhfHwhYXx8MSE9PXgmJjkhPT14JiYxMSE9PXgpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT14JiYobz0kLmV4ZWMoYSkpKWlmKGY9b1sxXSl7aWYoOT09PXgpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZih3JiYoaj13LmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihvWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1vWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErIiAiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKCJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXsoaz1iLmdldEF0dHJpYnV0ZSgiaWQiKSk/az1rLnJlcGxhY2UoYWEsIlxcJCYiKTpiLnNldEF0dHJpYnV0ZSgiaWQiLGs9dSkscj1nKGEpLGg9ci5sZW5ndGgsbD1WLnRlc3Qoayk/IiMiK2s6IltpZD0nIitrKyInXSI7d2hpbGUoaC0tKXJbaF09bCsiICIrcWEocltoXSk7cz1yLmpvaW4oIiwiKSx3PV8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8Yn1pZihzKXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbChzKSksZH1jYXRjaCh5KXt9ZmluYWxseXtrPT09dSYmYi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUSwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWMubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBoYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9hKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1mYS5zdXBwb3J0PXt9LGY9ZmEuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT1aLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitMKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitMKyIqKD86dmFsdWV8IitLKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGlhKGZ1bmN0aW9uKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrTCsiKlsqXiR8IX5dPz0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVoudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiZGl2Iikscy5jYWxsKGEsIltzIT0nJ106eCIpLHIucHVzaCgiIT0iLE8pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oInwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oInwiKSksYj1aLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHxaLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1ufHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PW58fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxnPVthXSxoPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1uPy0xOmI9PT1uPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGthKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWcudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO3doaWxlKGdbZF09PT1oW2RdKWQrKztyZXR1cm4gZD9rYShnW2RdLGhbZF0pOmdbZF09PT12Py0xOmhbZF09PT12PzE6MH0sbik6bn0sZmEubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYShhLG51bGwsbnVsbCxiKX0sZmEubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFQsIj0nJDEnXSIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiKyIgIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZmEudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYmEsY2EpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGJhLGNhKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmEuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZmEuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFcuQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVS50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTCsiKSIrYSsiKCIrTCsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmEuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShQLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShRLCIkMSIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8IiIpfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWEoYik7ZnVuY3Rpb24gcGEoKXt9cGEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYSxnPWZhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1XW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmEuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXVhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYShzYShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmEoaT4xJiZzYShtKSxpPjEmJnFhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUSwiJDEiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9IjAiLHQ9ZiYmW10sdT1bXSx2PWoseD1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1GLmNhbGwoaSkpO3U9dWEodSl9SC5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmZhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9oYShmKTpmfXJldHVybiBoPWZhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksXy50ZXN0KGpbMF0udHlwZSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSwhYnx8Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGphKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsInR5cGUiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGlucHV0Lz4iLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGphKCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHwiaW5wdXQiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwclsiOiJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlU29ydD1uLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sdj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY30sdz1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHg9L148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyx5PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih5LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBuLmluQXJyYXkoYSxiKT4tMSE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2U+YjtiKyspaWYobi5jb250YWlucyhkW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7ZT5iO2IrKyluLmZpbmQoYSxkW2JdLGMpO3JldHVybiBjPXRoaXMucHVzaFN0YWNrKGU+MT9uLnVuaXF1ZShjKTpjKSxjLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheih0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQz1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxBLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hLmNoYXJBdCgwKSYmIj4iPT09YS5jaGFyQXQoYS5sZW5ndGgtMSkmJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfWlmKGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUpe2lmKGYuaWQhPT1lWzJdKXJldHVybiBBLmZpbmQoYSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPWZ9cmV0dXJuIHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgYy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW4oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihuLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP24uaW5BcnJheSh0aGlzWzBdLG4oYSkpOm4uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXtkbyBhPWFbYl07d2hpbGUoYSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHwoZT1uLnVuaXF1ZVNvcnQoZSkpLEQudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFMrL2c7ZnVuY3Rpb24gSChhKXt2YXIgYj17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOiIiKX0saj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihjJiYhYiYmKGg9Zi5sZW5ndGgtMSxnLnB1c2goYykpLGZ1bmN0aW9uIGQoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXtuLmlzRnVuY3Rpb24oYyk/YS51bmlxdWUmJmouaGFzKGMpfHxmLnB1c2goYyk6YyYmYy5sZW5ndGgmJiJzdHJpbmciIT09bi50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGg+PWMmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMCxjfHxqLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLmFkZEV2ZW50TGlzdGVuZXI/KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixLKSk6KGQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5kZXRhY2hFdmVudCgib25sb2FkIixLKSl9ZnVuY3Rpb24gSygpeyhkLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWEuZXZlbnQudHlwZXx8ImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZSkmJihKKCksbi5yZWFkeSgpKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7aWYoIUkpaWYoST1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZXx8ImxvYWRpbmciIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpYS5zZXRUaW1lb3V0KG4ucmVhZHkpO2Vsc2UgaWYoZC5hZGRFdmVudExpc3RlbmVyKWQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixLKTtlbHNle2QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5hdHRhY2hFdmVudCgib25sb2FkIixLKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZSl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBmKCl7aWYoIW4uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChiKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGYsNTApfUooKSxuLnJlYWR5KCl9fSgpfXJldHVybiBJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBMO2ZvcihMIGluIG4obCkpYnJlYWs7bC5vd25GaXJzdD0iMCI9PT1MLGwuaW5saW5lQmxvY2tOZWVkc0xheW91dD0hMSxuKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGU7Yz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChiKSwidW5kZWZpbmVkIiE9dHlwZW9mIGIuc3R5bGUuem9vbSYmKGIuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSIsbC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChlKSl9KSxmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2wuZGVsZXRlRXhwYW5kbz0hMX1hPW51bGx9KCk7dmFyIE09ZnVuY3Rpb24oYSl7dmFyIGI9bi5ub0RhdGFbKGEubm9kZU5hbWUrIiAiKS50b0xvd2VyQ2FzZSgpXSxjPSthLm5vZGVUeXBlfHwxO3JldHVybiAxIT09YyYmOSE9PWM/ITE6IWJ8fGIhPT0hMCYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PWJ9LE49L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bi5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwOwp9cmV0dXJuIGN9ZnVuY3Rpb24gUShhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKCgiZGF0YSIhPT1ifHwhbi5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmInRvSlNPTiIhPT1iKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFIoYSxiLGQsZSl7aWYoTShhKSl7dmFyIGYsZyxoPW4uZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP24uY2FjaGU6YSxrPWk/YVtoXTphW2hdJiZoO2lmKGsmJmpba10mJihlfHxqW2tdLmRhdGEpfHx2b2lkIDAhPT1kfHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIGt8fChrPWk/YVtoXT1jLnBvcCgpfHxuLmd1aWQrKzpoKSxqW2tdfHwoaltrXT1pP3t9Ont0b0pTT046bi5ub29wfSksIm9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGU/altrXT1uLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1uLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbi5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbi5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFMoYSxiLGMpe2lmKE0oYSkpe3ZhciBkLGUsZj1hLm5vZGVUeXBlLGc9Zj9uLmNhY2hlOmEsaD1mP2Fbbi5leHBhbmRvXTpuLmV4cGFuZG87aWYoZ1toXSl7aWYoYiYmKGQ9Yz9nW2hdOmdbaF0uZGF0YSkpe24uaXNBcnJheShiKT9iPWIuY29uY2F0KG4ubWFwKGIsbi5jYW1lbENhc2UpKTpiIGluIGQ/Yj1bYl06KGI9bi5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIuc3BsaXQoIiAiKSksZT1iLmxlbmd0aDt3aGlsZShlLS0pZGVsZXRlIGRbYltlXV07aWYoYz8hUShkKTohbi5pc0VtcHR5T2JqZWN0KGQpKXJldHVybn0oY3x8KGRlbGV0ZSBnW2hdLmRhdGEsUShnW2hdKSkpJiYoZj9uLmNsZWFuRGF0YShbYV0sITApOmwuZGVsZXRlRXhwYW5kb3x8ZyE9Zy53aW5kb3c/ZGVsZXRlIGdbaF06Z1toXT12b2lkIDApfX19bi5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP24uY2FjaGVbYVtuLmV4cGFuZG9dXTphW24uZXhwYW5kb10sISFhJiYhUShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFIoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBSKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLGIsITApfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bi5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbi5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7bi5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhLGIpfSk6Zj9QKGYsYSxuLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1uLl9kYXRhKGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1uLl9kYXRhKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbi5fZGF0YShhLGMpfHxuLl9kYXRhKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bi5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbi5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW4uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSksZnVuY3Rpb24oKXt2YXIgYTtsLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxlO3JldHVybiBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZSkuYXBwZW5kQ2hpbGQoYiksInVuZGVmaW5lZCIhPXR5cGVvZiBiLnN0eWxlLnpvb20mJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChlKSxhKTp2b2lkIDB9fSgpO3ZhciBUPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1QrIikoW2EteiVdKikkIiwiaSIpLFY9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxXPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSwibm9uZSI9PT1uLmNzcyhhLCJkaXNwbGF5Iil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07ZnVuY3Rpb24gWChhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbi5jc3MoYSxiLCIiKX0saT1oKCksaj1jJiZjWzNdfHwobi5jc3NOdW1iZXJbYl0/IiI6InB4Iiksaz0obi5jc3NOdW1iZXJbYl18fCJweCIhPT1qJiYraSkmJlUuZXhlYyhuLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixuLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBZPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylZKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFo9L14oPzpjaGVja2JveHxyYWRpbykkL2ksJD0vPChbXHc6LV0rKS8sXz0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksYWE9L15ccysvLGJhPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZGlhbG9nfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1haW58bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iO2Z1bmN0aW9uIGNhKGEpe3ZhciBiPWJhLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYj1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTthLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixsLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUsbC50Ym9keT0hYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsbC5odG1sU2VyaWFsaXplPSEhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxsLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09ZC5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxjLnR5cGU9ImNoZWNrYm94IixjLmNoZWNrZWQ9ITAsYi5hcHBlbmRDaGlsZChjKSxsLmFwcGVuZENoZWNrZWQ9Yy5jaGVja2VkLGEuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixsLm5vQ2xvbmVDaGVja2VkPSEhYS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYi5hcHBlbmRDaGlsZChhKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYS5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9YS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsbC5ub0Nsb25lRXZlbnQ9ISFhLmFkZEV2ZW50TGlzdGVuZXIsYVtuLmV4cGFuZG9dPTEsbC5hdHRyaWJ1dGVzPSFhLmdldEF0dHJpYnV0ZShuLmV4cGFuZG8pfSgpO3ZhciBkYT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6bC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19O2RhLm9wdGdyb3VwPWRhLm9wdGlvbixkYS50Ym9keT1kYS50Zm9vdD1kYS5jb2xncm91cD1kYS5jYXB0aW9uPWRhLnRoZWFkLGRhLnRoPWRhLnRkO2Z1bmN0aW9uIGVhKGEsYil7dmFyIGMsZCxlPTAsZj0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOnZvaWQgMDtpZighZilmb3IoZj1bXSxjPWEuY2hpbGROb2Rlc3x8YTtudWxsIT0oZD1jW2VdKTtlKyspIWJ8fG4ubm9kZU5hbWUoZCxiKT9mLnB1c2goZCk6bi5tZXJnZShmLGVhKGQsYikpO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sZik6Zn1mdW5jdGlvbiBmYShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW4uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG4uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX12YXIgZ2E9Lzx8JiM/XHcrOy8saGE9Lzx0Ym9keS9pO2Z1bmN0aW9uIGlhKGEpe1oudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIGphKGEsYixjLGQsZSl7Zm9yKHZhciBmLGcsaCxpLGosayxtLG89YS5sZW5ndGgscD1jYShiKSxxPVtdLHI9MDtvPnI7cisrKWlmKGc9YVtyXSxnfHwwPT09ZylpZigib2JqZWN0Ij09PW4udHlwZShnKSluLm1lcmdlKHEsZy5ub2RlVHlwZT9bZ106Zyk7ZWxzZSBpZihnYS50ZXN0KGcpKXtpPWl8fHAuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaj0oJC5leGVjKGcpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG09ZGFbal18fGRhLl9kZWZhdWx0LGkuaW5uZXJIVE1MPW1bMV0rbi5odG1sUHJlZmlsdGVyKGcpK21bMl0sZj1tWzBdO3doaWxlKGYtLSlpPWkubGFzdENoaWxkO2lmKCFsLmxlYWRpbmdXaGl0ZXNwYWNlJiZhYS50ZXN0KGcpJiZxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhYS5leGVjKGcpWzBdKSksIWwudGJvZHkpe2c9InRhYmxlIiE9PWp8fGhhLnRlc3QoZyk/Ijx0YWJsZT4iIT09bVsxXXx8aGEudGVzdChnKT8wOmk6aS5maXJzdENoaWxkLGY9ZyYmZy5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShmLS0pbi5ub2RlTmFtZShrPWcuY2hpbGROb2Rlc1tmXSwidGJvZHkiKSYmIWsuY2hpbGROb2Rlcy5sZW5ndGgmJmcucmVtb3ZlQ2hpbGQoayl9bi5tZXJnZShxLGkuY2hpbGROb2RlcyksaS50ZXh0Q29udGVudD0iIjt3aGlsZShpLmZpcnN0Q2hpbGQpaS5yZW1vdmVDaGlsZChpLmZpcnN0Q2hpbGQpO2k9cC5sYXN0Q2hpbGR9ZWxzZSBxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShnKSk7aSYmcC5yZW1vdmVDaGlsZChpKSxsLmFwcGVuZENoZWNrZWR8fG4uZ3JlcChlYShxLCJpbnB1dCIpLGlhKSxyPTA7d2hpbGUoZz1xW3IrK10paWYoZCYmbi5pbkFycmF5KGcsZCk+LTEpZSYmZS5wdXNoKGcpO2Vsc2UgaWYoaD1uLmNvbnRhaW5zKGcub3duZXJEb2N1bWVudCxnKSxpPWVhKHAuYXBwZW5kQ2hpbGQoZyksInNjcmlwdCIpLGgmJmZhKGkpLGMpe2Y9MDt3aGlsZShnPWlbZisrXSlfLnRlc3QoZy50eXBlfHwiIikmJmMucHVzaChnKX1yZXR1cm4gaT1udWxsLHB9IWZ1bmN0aW9uKCl7dmFyIGIsYyxlPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGIgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSljPSJvbiIrYiwobFtiXT1jIGluIGEpfHwoZS5zZXRBdHRyaWJ1dGUoYywidCIpLGxbYl09ZS5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMSk7ZT1udWxsfSgpO3ZhciBrYT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksbGE9L15rZXkvLG1hPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxuYT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sb2E9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIHBhKCl7cmV0dXJuITB9ZnVuY3Rpb24gcWEoKXtyZXR1cm4hMX1mdW5jdGlvbiByYSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24gc2EoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoIm9iamVjdCI9PXR5cGVvZiBiKXsic3RyaW5nIiE9dHlwZW9mIGMmJihkPWR8fGMsYz12b2lkIDApO2ZvcihoIGluIGIpc2EoYSxoLGMsZCxiW2hdLGYpO3JldHVybiBhfWlmKG51bGw9PWQmJm51bGw9PWU/KGU9YyxkPWM9dm9pZCAwKTpudWxsPT1lJiYoInN0cmluZyI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9cWE7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1uLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPW4uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8YSYmbi5ldmVudC50cmlnZ2VyZWQ9PT1hLnR5cGU/dm9pZCAwOm4uZXZlbnQuZGlzcGF0Y2guYXBwbHkoay5lbGVtLGFyZ3VtZW50cyl9LGsuZWxlbT1hKSxiPShifHwiIikubWF0Y2goRyl8fFsiIl0saD1iLmxlbmd0aDt3aGlsZShoLS0pZj1vYS5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChtPWdbb10pfHwobT1nW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsbCk6bS5wdXNoKGwpLG4uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9bi5oYXNEYXRhKGEpJiZuLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9b2EuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09a1tvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGk9Zj1tLmxlbmd0aDt3aGlsZShmLS0pZz1tW2ZdLCFlJiZxIT09Zy5vcmlnVHlwZXx8YyYmYy5ndWlkIT09Zy5ndWlkfHxoJiYhaC50ZXN0KGcubmFtZXNwYWNlKXx8ZCYmZCE9PWcuc2VsZWN0b3ImJigiKioiIT09ZHx8IWcuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxnLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGcpKTtpJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGtbb10pfWVsc2UgZm9yKG8gaW4gayluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChrKSYmKGRlbGV0ZSByLmhhbmRsZSxuLl9yZW1vdmVEYXRhKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaT1tPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFuYS50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxsPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IWwudHJpZ2dlcnx8bC50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbC5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPWwuZGVsZWdhdGVUeXBlfHxxLG5hLnRlc3QoaitxKXx8KGk9aS5wYXJlbnROb2RlKTtpO2k9aS5wYXJlbnROb2RlKXAucHVzaChpKSxtPWk7bT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2gobS5kZWZhdWx0Vmlld3x8bS5wYXJlbnRXaW5kb3d8fGEpfW89MDt3aGlsZSgoaT1wW28rK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1vPjE/ajpsLmJpbmRUeXBlfHxxLGc9KG4uX2RhdGEoaSwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZuLl9kYXRhKGksImhhbmRsZSIpLGcmJmcuYXBwbHkoaSxjKSxnPWgmJmlbaF0sZyYmZy5hcHBseSYmTShpKSYmKGIucmVzdWx0PWcuYXBwbHkoaSxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO2lmKGIudHlwZT1xLCFmJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFsLl9kZWZhdWx0fHxsLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYyk9PT0hMSkmJk0oZSkmJmgmJmVbcV0mJiFuLmlzV2luZG93KGUpKXttPWVbaF0sbSYmKGVbaF09bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cTt0cnl7ZVtxXSgpfWNhdGNoKHMpe31uLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbSYmKGVbaF09bSl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShuLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWEucm5hbWVzcGFjZSYmIWEucm5hbWVzcGFjZS50ZXN0KGcubmFtZXNwYWNlKXx8KGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxkPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1kJiYoYS5yZXN1bHQ9ZCk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8aXNOYU4oYS5idXR0b24pfHxhLmJ1dHRvbjwxKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+LTE6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxlLGY9YS50eXBlLGc9YSxoPXRoaXMuZml4SG9va3NbZl07aHx8KHRoaXMuZml4SG9va3NbZl09aD1tYS50ZXN0KGYpP3RoaXMubW91c2VIb29rczpsYS50ZXN0KGYpP3RoaXMua2V5SG9va3M6e30pLGU9aC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChoLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZyksYj1lLmxlbmd0aDt3aGlsZShiLS0pYz1lW2JdLGFbY109Z1tjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1nLnNyY0VsZW1lbnR8fGQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGEubWV0YUtleT0hIWEubWV0YUtleSxoLmZpbHRlcj9oLmZpbHRlcihhLGcpOmF9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGc9Yi5idXR0b24saD1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihlPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGQsZj1lLmRvY3VtZW50RWxlbWVudCxjPWUuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmgmJihhLnJlbGF0ZWRUYXJnZXQ9aD09PWEudGFyZ2V0P2IudG9FbGVtZW50OmgpLGEud2hpY2h8fHZvaWQgMD09PWd8fChhLndoaWNoPTEmZz8xOjImZz8zOjQmZz8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09cmEoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1yYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBuLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYiksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1kLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKCJ1bmRlZmluZWQiPT10eXBlb2YgYVtkXSYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/cGE6cWEpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bi5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6cWEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6cWEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6cWEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cGEsYSYmKGEucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1wYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9cGEsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fG4uY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGwuc3VibWl0fHwobi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6dm9pZCBuLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9bi5ub2RlTmFtZShiLCJpbnB1dCIpfHxuLm5vZGVOYW1lKGIsImJ1dHRvbiIpP24ucHJvcChiLCJmb3JtIik6dm9pZCAwO2MmJiFuLl9kYXRhKGMsInN1Ym1pdCIpJiYobi5ldmVudC5hZGQoYywic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdEJ1YmJsZT0hMH0pLG4uX2RhdGEoYywic3VibWl0IiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRCdWJibGUmJihkZWxldGUgYS5fc3VibWl0QnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZuLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG4ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbi5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxsLmNoYW5nZXx8KG4uZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGthLnRlc3QodGhpcy5ub2RlTmFtZSk/KCJjaGVja2JveCIhPT10aGlzLnR5cGUmJiJyYWRpbyIhPT10aGlzLnR5cGV8fChuLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXsiY2hlY2tlZCI9PT1hLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdENoYW5nZWQ9ITApfSksbi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdENoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RDaGFuZ2VkPSExKSxuLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSl9KSksITEpOnZvaWQgbi5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7a2EudGVzdChiLm5vZGVOYW1lKSYmIW4uX2RhdGEoYiwiY2hhbmdlIikmJihuLmV2ZW50LmFkZChiLCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7IXRoaXMucGFyZW50Tm9kZXx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fG4uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGEpfSksbi5fZGF0YShiLCJjaGFuZ2UiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBuLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFrYS50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLGwuZm9jdXNpbnx8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1uLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbi5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW4uX2RhdGEoZCxiKS0xO2U/bi5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG4uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gc2EodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBzYSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9cWEpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIHRhPS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csdWE9bmV3IFJlZ0V4cCgiPCg/OiIrYmErIilbXFxzLz5dIiwiaSIpLHZhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLHdhPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHhhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHlhPS9edHJ1ZVwvKC4qKS8semE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEFhPWNhKGQpLEJhPUFhLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2Z1bmN0aW9uIENhKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSwidGFibGUiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiBEYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bi5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gRWEoYSl7dmFyIGI9eWEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBGYShhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZuLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW4uX2RhdGEoYSksZz1uLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyluLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW4uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWwubm9DbG9uZUV2ZW50JiZiW24uZXhwYW5kb10pe2U9bi5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyluLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobi5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oRGEoYikudGV4dD1hLnRleHQsRWEoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGwuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFuLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmWi50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX19ZnVuY3Rpb24gSGEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJnhhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxIYShmLGIsYyxkKX0pO2lmKG8mJihrPWphKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZT1rLmZpcnN0Q2hpbGQsMT09PWsuY2hpbGROb2Rlcy5sZW5ndGgmJihrPWUpLGV8fGQpKXtmb3IoaT1uLm1hcChlYShrLCJzY3JpcHQiKSxEYSksaD1pLmxlbmd0aDtvPm07bSsrKWc9ayxtIT09cCYmKGc9bi5jbG9uZShnLCEwLCEwKSxoJiZuLm1lcmdlKGksZWEoZywic2NyaXB0IikpKSxjLmNhbGwoYVttXSxnLG0pO2lmKGgpZm9yKGo9aVtpLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGksRWEpLG09MDtoPm07bSsrKWc9aVttXSxfLnRlc3QoZy50eXBlfHwiIikmJiFuLl9kYXRhKGcsImdsb2JhbEV2YWwiKSYmbi5jb250YWlucyhqLGcpJiYoZy5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChnLnNyYyk6bi5nbG9iYWxFdmFsKChnLnRleHR8fGcudGV4dENvbnRlbnR8fGcuaW5uZXJIVE1MfHwiIikucmVwbGFjZSh6YSwiIikpKTtrPWU9bnVsbH1yZXR1cm4gYX1mdW5jdGlvbiBJYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9uLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8bi5jbGVhbkRhdGEoZWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJm4uY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZmYShlYShkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHZhLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihsLmh0bWw1Q2xvbmV8fG4uaXNYTUxEb2MoYSl8fCF1YS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KEJhLmlubmVySFRNTD1hLm91dGVySFRNTCxCYS5yZW1vdmVDaGlsZChmPUJhLmZpcnN0Q2hpbGQpKSwhKGwubm9DbG9uZUV2ZW50JiZsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZD1lYShmKSxoPWVhKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmR2EoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8ZWEoYSksZD1kfHxlYShmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUZhKGUsZFtnXSk7ZWxzZSBGYShhLGYpO3JldHVybiBkPWVhKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJmZhKGQsIWkmJmVhKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGYsZyxoPTAsaT1uLmV4cGFuZG8saj1uLmNhY2hlLGs9bC5hdHRyaWJ1dGVzLG09bi5ldmVudC5zcGVjaWFsO251bGwhPShkPWFbaF0pO2grKylpZigoYnx8TShkKSkmJihmPWRbaV0sZz1mJiZqW2ZdKSl7aWYoZy5ldmVudHMpZm9yKGUgaW4gZy5ldmVudHMpbVtlXT9uLmV2ZW50LnJlbW92ZShkLGUpOm4ucmVtb3ZlRXZlbnQoZCxlLGcuaGFuZGxlKTtqW2ZdJiYoZGVsZXRlIGpbZl0sa3x8InVuZGVmaW5lZCI9PXR5cGVvZiBkLnJlbW92ZUF0dHJpYnV0ZT9kW2ldPXZvaWQgMDpkLnJlbW92ZUF0dHJpYnV0ZShpKSxjLnB1c2goZikpfX19KSxuLmZuLmV4dGVuZCh7ZG9tTWFuaXA6SGEsZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBJYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIElhKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxkKS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEhhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1DYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUNhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm4uY2xlYW5EYXRhKGVhKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbi5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UodGEsIiIpOnZvaWQgMDtpZigic3RyaW5nIj09dHlwZW9mIGEmJiF3YS50ZXN0KGEpJiYobC5odG1sU2VyaWFsaXplfHwhdWEudGVzdChhKSkmJihsLmxlYWRpbmdXaGl0ZXNwYWNlfHwhYWEudGVzdChhKSkmJiFkYVsoJC5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1uLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoZWEoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO24uaW5BcnJheSh0aGlzLGEpPDAmJihuLmNsZWFuRGF0YShlYSh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD0wLGU9W10sZj1uKGEpLGg9Zi5sZW5ndGgtMTtoPj1kO2QrKyljPWQ9PT1oP3RoaXM6dGhpcy5jbG9uZSghMCksbihmW2RdKVtiXShjKSxnLmFwcGx5KGUsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBKYSxLYT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIE1hKGEpe3ZhciBiPWQsYz1LYVthXTtyZXR1cm4gY3x8KGM9TGEoYSxiKSwibm9uZSIhPT1jJiZjfHwoSmE9KEphfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPShKYVswXS5jb250ZW50V2luZG93fHxKYVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1MYShhLGIpLEphLmRldGFjaCgpKSxLYVthXT1jKSxjfXZhciBOYT0vXm1hcmdpbi8sT2E9bmV3IFJlZ0V4cCgiXigiK1QrIikoPyFweClbYS16JV0rJCIsImkiKSxQYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sUWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZyxoLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxqPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoai5zdHlsZSl7ai5zdHlsZS5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLGwub3BhY2l0eT0iMC41Ij09PWouc3R5bGUub3BhY2l0eSxsLmNzc0Zsb2F0PSEhai5zdHlsZS5jc3NGbG9hdCxqLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsai5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1qLnN0eWxlLmJhY2tncm91bmRDbGlwLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixqLmlubmVySFRNTD0iIixpLmFwcGVuZENoaWxkKGopLGwuYm94U2l6aW5nPSIiPT09ai5zdHlsZS5ib3hTaXppbmd8fCIiPT09ai5zdHlsZS5Nb3pCb3hTaXppbmd8fCIiPT09ai5zdHlsZS5XZWJraXRCb3hTaXppbmcsbi5leHRlbmQobCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxmfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZX0scGl4ZWxNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksY30scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksYn0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZ30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxofX0pO2Z1bmN0aW9uIGsoKXt2YXIgayxsLG09ZC5kb2N1bWVudEVsZW1lbnQ7bS5hcHBlbmRDaGlsZChpKSxqLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJSIsYj1lPWg9ITEsYz1nPSEwLGEuZ2V0Q29tcHV0ZWRTdHlsZSYmKGw9YS5nZXRDb21wdXRlZFN0eWxlKGopLGI9IjElIiE9PShsfHx7fSkudG9wLGg9IjJweCI9PT0obHx8e30pLm1hcmdpbkxlZnQsZT0iNHB4Ij09PShsfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxqLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGM9IjRweCI9PT0obHx8e21hcmdpblJpZ2h0OiI0cHgifSkubWFyZ2luUmlnaHQsaz1qLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGsuc3R5bGUuY3NzVGV4dD1qLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsay5zdHlsZS5tYXJnaW5SaWdodD1rLnN0eWxlLndpZHRoPSIwIixqLnN0eWxlLndpZHRoPSIxcHgiLGc9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShrKXx8e30pLm1hcmdpblJpZ2h0KSxqLnJlbW92ZUNoaWxkKGspKSxqLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWouZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgsZiYmKGouc3R5bGUuZGlzcGxheT0iIixqLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIsai5jaGlsZE5vZGVzWzBdLnN0eWxlLmJvcmRlckNvbGxhcHNlPSJzZXBhcmF0ZSIsaz1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLGtbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSIsZj0wPT09a1swXS5vZmZzZXRIZWlnaHQsZiYmKGtbMF0uc3R5bGUuZGlzcGxheT0iIixrWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWtbMF0ub2Zmc2V0SGVpZ2h0KSksbS5yZW1vdmVDaGlsZChpKX19fSgpO3ZhciBSYSxTYSxUYT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhSYT1mdW5jdGlvbihiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIGMmJmMub3BlbmVyfHwoYz1hKSxjLmdldENvbXB1dGVkU3R5bGUoYil9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2MuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXTp2b2lkIDAsIiIhPT1nJiZ2b2lkIDAhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSxjJiYhbC5waXhlbE1hcmdpblJpZ2h0KCkmJk9hLnRlc3QoZykmJk5hLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9Ziksdm9pZCAwPT09Zz9nOmcrIiJ9KTpRYS5jdXJyZW50U3R5bGUmJihSYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2NbYl06dm9pZCAwLG51bGw9PWcmJmgmJmhbYl0mJihnPWhbYl0pLE9hLnRlc3QoZykmJiFUYS50ZXN0KGIpJiYoZD1oLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdCxmJiYoZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGgubGVmdD0iZm9udFNpemUiPT09Yj8iMWVtIjpnLGc9aC5waXhlbExlZnQrInB4IixoLmxlZnQ9ZCxmJiYoZS5sZWZ0PWYpKSx2b2lkIDA9PT1nP2c6ZysiInx8ImF1dG8ifSk7ZnVuY3Rpb24gVWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIFZhPS9hbHBoYVwoW14pXSpcKS9pLFdhPS9vcGFjaXR5XHMqPVxzKihbXildKikvaSxYYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sWWE9bmV3IFJlZ0V4cCgiXigiK1QrIikoLiopJCIsImkiKSxaYT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sJGE9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LF9hPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl0sYWI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiBiYihhKXtpZihhIGluIGFiKXJldHVybiBhO3ZhciBiPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPV9hLmxlbmd0aDt3aGlsZShjLS0paWYoYT1fYVtjXStiLGEgaW4gYWIpcmV0dXJuIGF9ZnVuY3Rpb24gY2IoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bi5fZGF0YShkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlcoZCkmJihmW2ddPW4uX2RhdGEoZCwib2xkZGlzcGxheSIsTWEoZC5ub2RlTmFtZSkpKSk6KGU9VyhkKSwoYyYmIm5vbmUiIT09Y3x8IWUpJiZuLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfWZ1bmN0aW9uIGRiKGEsYixjKXt2YXIgZD1ZYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIGViKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1uLmNzcyhhLGMrVltmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPVJhKGEpLGc9bC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1TYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLE9hLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYobC5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK2ViKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPVNhKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6bC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1iYihoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdO2lmKGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1VLmV4ZWMoYykpJiZlWzFdJiYoYz1YKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLCEoZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPWJiKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmImdldCJpbiBnJiYoZj1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1mJiYoZj1TYShhLGIsZCkpLCJub3JtYWwiPT09ZiYmYiBpbiAkYSYmKGY9JGFbYl0pLCIiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8aXNGaW5pdGUoZSk/ZXx8MDpmKTpmfX0pLG4uZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP1hhLnRlc3Qobi5jc3MoYSwiZGlzcGxheSIpKSYmMD09PWEub2Zmc2V0V2lkdGg/UGEoYSxaYSxmdW5jdGlvbigpe3JldHVybiBmYihhLGIsZCl9KTpmYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJlJhKGEpO3JldHVybiBkYihhLGMsZD9lYihhLGIsZCxsLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksbC5vcGFjaXR5fHwobi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gV2EudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW4uaXNOdW1lcmljKGIpPyJhbHBoYShvcGFjaXR5PSIrMTAwKmIrIikiOiIiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHwiIjtjLnpvb209MSwoYj49MXx8IiI9PT1iKSYmIiI9PT1uLnRyaW0oZi5yZXBsYWNlKFZhLCIiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPVZhLnRlc3QoZik/Zi5yZXBsYWNlKFZhLGUpOmYrIiAiK2UpfX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9VWEobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/UGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sU2EsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1VYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KFNhKGEsIm1hcmdpbkxlZnQiKSl8fChuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKT9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtUGEoYSx7Cm1hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSk6MCkpKyJweCI6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ND5kO2QrKyllW2ErVltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxOYS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1kYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPVJhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtXKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IGdiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1nYixnYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmdiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fG4uZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWdiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpnYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1nYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOmdiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LGdiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1nYi5wcm90b3R5cGUsZ2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV0mJiFuLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sZ2IucHJvcEhvb2tzLnNjcm9sbFRvcD1nYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LG4uZng9Z2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBoYixpYixqYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sa2I9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBsYigpe3JldHVybiBhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoYj12b2lkIDB9KSxoYj1uLm5vdygpfWZ1bmN0aW9uIG1iKGEsYil7dmFyIGMsZD17aGVpZ2h0OmF9LGU9MDtmb3IoYj1iPzE6MDs0PmU7ZSs9Mi1iKWM9VltlXSxkWyJtYXJnaW4iK2NdPWRbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihkLm9wYWNpdHk9ZC53aWR0aD1hKSxkfWZ1bmN0aW9uIG5iKGEsYixjKXtmb3IodmFyIGQsZT0ocWIudHdlZW5lcnNbYl18fFtdKS5jb25jYXQocWIudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gb2IoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbT10aGlzLG89e30scD1hLnN0eWxlLHE9YS5ub2RlVHlwZSYmVyhhKSxyPW4uX2RhdGEoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gYnx8IndpZHRoImluIGIpJiYoYy5vdmVyZmxvdz1bcC5vdmVyZmxvdyxwLm92ZXJmbG93WCxwLm92ZXJmbG93WV0saj1uLmNzcyhhLCJkaXNwbGF5Iiksaz0ibm9uZSI9PT1qP24uX2RhdGEoYSwib2xkZGlzcGxheSIpfHxNYShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKGwuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmImlubGluZSIhPT1NYShhLm5vZGVOYW1lKT9wLnpvb209MTpwLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIixsLnNocmlua1dyYXBCbG9ja3MoKXx8bS5hbHdheXMoZnVuY3Rpb24oKXtwLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0scC5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxwLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLGpiLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocT8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXJ8fHZvaWQgMD09PXJbZF0pY29udGludWU7cT0hMH1vW2RdPXImJnJbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChvKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP01hKGEubm9kZU5hbWUpOmopJiYocC5kaXNwbGF5PWopO2Vsc2V7cj8iaGlkZGVuImluIHImJihxPXIuaGlkZGVuKTpyPW4uX2RhdGEoYSwiZnhzaG93Iix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP24oYSkuc2hvdygpOm0uZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbS5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bi5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoYiBpbiBvKW4uc3R5bGUoYSxiLG9bYl0pfSk7Zm9yKGQgaW4gbylnPW5iKHE/cltkXTowLGQsbSksZCBpbiByfHwocltkXT1nLnN0YXJ0LHEmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBxYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1xYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWhifHxsYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmhifHxsYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihwYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9cWIucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLG5iLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQocWIse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBYKGMuZWxlbSxhLFUuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLHFiLnR3ZWVuZXJzW2NdPXFiLnR3ZWVuZXJzW2NdfHxbXSxxYi50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltvYl0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9xYi5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6cWIucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihXKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9cWIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8bi5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9bi5fZGF0YSh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZrYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1uLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobWIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOm1iKCJzaG93Iiksc2xpZGVVcDptYigiaGlkZSIpLHNsaWRlVG9nZ2xlOm1iKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW4udGltZXJzLGM9MDtmb3IoaGI9bi5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxuLmZ4LnN0b3AoKSxoYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtpYnx8KGliPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKGliKSxpYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYSxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGY9ZS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYy5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxjLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94IiksYy5hcHBlbmRDaGlsZChiKSxhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxhLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGwuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWMuY2xhc3NOYW1lLGwuc3R5bGU9L3RvcC8udGVzdChhLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksbC5ocmVmTm9ybWFsaXplZD0iL2EiPT09YS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxsLmNoZWNrT249ISFiLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Zi5zZWxlY3RlZCxsLmVuY3R5cGU9ISFkLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGUuZGlzYWJsZWQ9ITAsbC5vcHREaXNhYmxlZD0hZi5kaXNhYmxlZCxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxsLmlucHV0PSIiPT09Yi5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYi52YWx1ZT0idCIsYi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGwucmFkaW9WYWx1ZT0idCI9PT1iLnZhbHVlfSgpO3ZhciByYj0vXHIvZyxzYj0vW1x4MjBcdFxyXG5cZl0rL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKHJiLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKHNiLCIgIil9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPSJzZWxlY3Qtb25lIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwoYy5zZWxlY3RlZHx8aT09PWUpJiYobC5vcHREaXNhYmxlZD8hYy5kaXNhYmxlZDpudWxsPT09Yy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG4uaW5BcnJheShuLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSk7dmFyIHRiLHViLHZiPW4uZXhwci5hdHRySGFuZGxlLHdiPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2kseGI9bC5nZXRTZXRBdHRyaWJ1dGUseWI9bC5pbnB1dDtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBZKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgYS5nZXRBdHRyaWJ1dGU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxlPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT91Yjp0YikpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/eWImJnhifHwhd2IudGVzdChjKT9hW2RdPSExOmFbbi5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtkXT0hMTpuLmF0dHIoYSxjLCIiKSxhLnJlbW92ZUF0dHJpYnV0ZSh4Yj9jOmQpfX0pLHViPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6eWImJnhifHwhd2IudGVzdChjKT9hLnNldEF0dHJpYnV0ZSgheGImJm4ucHJvcEZpeFtjXXx8YyxjKTphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYyldPWFbY109ITAsY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPXZiW2JdfHxuLmZpbmQuYXR0cjt5YiYmeGJ8fCF3Yi50ZXN0KGIpP3ZiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj12YltiXSx2YltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsdmJbYl09ZiksZX06dmJbYl09ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHliJiZ4Ynx8KG4uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLm5vZGVOYW1lKGEsImlucHV0Iik/dm9pZChhLmRlZmF1bHRWYWx1ZT1iKTp0YiYmdGIuc2V0KGEsYixjKX19KSx4Ynx8KHRiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QXR0cmlidXRlTm9kZShjKTtyZXR1cm4gZHx8YS5zZXRBdHRyaWJ1dGVOb2RlKGQ9YS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShjKSksZC52YWx1ZT1iKz0iIiwidmFsdWUiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sdmIuaWQ9dmIubmFtZT12Yi5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiYiIiE9PWQudmFsdWU/ZC52YWx1ZTpudWxsfSxuLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpO3JldHVybiBjJiZjLnNwZWNpZmllZD9jLnZhbHVlOnZvaWQgMH0sc2V0OnRiLnNldH0sbi5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RiLnNldChhLCIiPT09Yj8hMTpiLGMpfX0sbi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihhLGIpe24uYXR0ckhvb2tzW2JdPXtzZXQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4iIj09PWM/KGEuc2V0QXR0cmlidXRlKGIsImF1dG8iKSxjKTp2b2lkIDB9fX0pKSxsLnN0eWxlfHwobi5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YisiIn19KTt2YXIgemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksQWI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9bi5wcm9wRml4W2FdfHxhLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2FdPXZvaWQgMCxkZWxldGUgdGhpc1thXX1jYXRjaChiKXt9fSl9fSksbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTp6Yi50ZXN0KGEubm9kZU5hbWUpfHxBYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLmhyZWZOb3JtYWxpemVkfHxuLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXtuLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGwuZW5jdHlwZXx8KG4ucHJvcEZpeC5lbmN0eXBlPSJlbmNvZGluZyIpO3ZhciBCYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIENiKGEpe3JldHVybiBuLmF0dHIoYSwiY2xhc3MiKXx8IiJ9bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsQ2IodGhpcykpKX0pO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZigiICIrZisiICIpPDAmJihkKz1mKyIgIik7aD1uLnRyaW0oZCksZSE9PWgmJm4uYXR0cihjLCJjbGFzcyIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLENiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKXdoaWxlKGQuaW5kZXhPZigiICIrZisiICIpPi0xKWQ9ZC5yZXBsYWNlKCIgIitmKyIgIiwiICIpO2g9bi50cmltKGQpLGUhPT1oJiZuLmF0dHIoYywiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsQ2IodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZigic3RyaW5nIj09PWMpe2Q9MCxlPW4odGhpcyksZj1hLm1hdGNoKEcpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJiJib29sZWFuIiE9PWN8fChiPUNiKHRoaXMpLGImJm4uX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsYiksbi5hdHRyKHRoaXMsImNsYXNzIixifHxhPT09ITE/IiI6bi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj0iICIrYSsiICI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJigiICIrQ2IoYykrIiAiKS5yZXBsYWNlKEJiLCIgIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KSxuLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIERiPWEubG9jYXRpb24sRWI9bi5ub3coKSxGYj0vXD8vLEdiPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7bi5wYXJzZUpTT049ZnVuY3Rpb24oYil7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiKyIiKTt2YXIgYyxkPW51bGwsZT1uLnRyaW0oYisiIik7cmV0dXJuIGUmJiFuLnRyaW0oZS5yZXBsYWNlKEdiLGZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBjJiZiJiYoZD0wKSwwPT09ZD9hOihjPWV8fGIsZCs9IWYtIWUsIiIpfSkpP0Z1bmN0aW9uKCJyZXR1cm4gIitlKSgpOm4uZXJyb3IoIkludmFsaWQgSlNPTjogIitiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihiKXt2YXIgYyxkO2lmKCFifHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2EuRE9NUGFyc2VyPyhkPW5ldyBhLkRPTVBhcnNlcixjPWQucGFyc2VGcm9tU3RyaW5nKGIsInRleHQveG1sIikpOihjPW5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIEhiPS8jLiokLyxJYj0vKFs/Jl0pXz1bXiZdKi8sSmI9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxLYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxMYj0vXig/OkdFVHxIRUFEKSQvLE1iPS9eXC9cLy8sTmI9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sT2I9e30sUGI9e30sUWI9IiovIi5jb25jYXQoIioiKSxSYj1EYi5ocmVmLFNiPU5iLmV4ZWMoUmIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFRiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gVWIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09UGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBWYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZuLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gWGIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6UmIsdHlwZToiR0VUIixpc0xvY2FsOktiLnRlc3QoU2JbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6UWIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6bi5wYXJzZUpTT04sInRleHQgeG1sIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9WYihWYihhLG4uYWpheFNldHRpbmdzKSxiKTpWYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpUYihPYiksYWpheFRyYW5zcG9ydDpUYihQYiksYWpheDpmdW5jdGlvbihiLGMpeyJvYmplY3QiPT10eXBlb2YgYiYmKGM9YixiPXZvaWQgMCksYz1jfHx7fTt2YXIgZCxlLGYsZyxoLGksaixrLGw9bi5hamF4U2V0dXAoe30sYyksbT1sLmNvbnRleHR8fGwsbz1sLmNvbnRleHQmJihtLm5vZGVUeXBlfHxtLmpxdWVyeSk/bihtKTpuLmV2ZW50LHA9bi5EZWZlcnJlZCgpLHE9bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iikscj1sLnN0YXR1c0NvZGV8fHt9LHM9e30sdD17fSx1PTAsdj0iY2FuY2VsZWQiLHc9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dSl7aWYoIWspe2s9e307d2hpbGUoYj1KYi5leGVjKGcpKWtbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9a1thLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT11P2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdXx8KGE9dFtjXT10W2NdfHxhLHNbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdXx8KGwubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dSlmb3IoYiBpbiBhKXJbYl09W3JbYl0sYVtiXV07ZWxzZSB3LmFsd2F5cyhhW3cuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHY7cmV0dXJuIGomJmouYWJvcnQoYikseSgwLGIpLHRoaXN9fTtpZihwLnByb21pc2UodykuY29tcGxldGU9cS5hZGQsdy5zdWNjZXNzPXcuZG9uZSx3LmVycm9yPXcuZmFpbCxsLnVybD0oKGJ8fGwudXJsfHxSYikrIiIpLnJlcGxhY2UoSGIsIiIpLnJlcGxhY2UoTWIsU2JbMV0rIi8vIiksbC50eXBlPWMubWV0aG9kfHxjLnR5cGV8fGwubWV0aG9kfHxsLnR5cGUsbC5kYXRhVHlwZXM9bi50cmltKGwuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8WyIiXSxudWxsPT1sLmNyb3NzRG9tYWluJiYoZD1OYi5leGVjKGwudXJsLnRvTG93ZXJDYXNlKCkpLGwuY3Jvc3NEb21haW49ISghZHx8ZFsxXT09PVNiWzFdJiZkWzJdPT09U2JbMl0mJihkWzNdfHwoImh0dHA6Ij09PWRbMV0/IjgwIjoiNDQzIikpPT09KFNiWzNdfHwoImh0dHA6Ij09PVNiWzFdPyI4MCI6IjQ0MyIpKSkpLGwuZGF0YSYmbC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBsLmRhdGEmJihsLmRhdGE9bi5wYXJhbShsLmRhdGEsbC50cmFkaXRpb25hbCkpLFViKE9iLGwsYyx3KSwyPT09dSlyZXR1cm4gdztpPW4uZXZlbnQmJmwuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGwudHlwZT1sLnR5cGUudG9VcHBlckNhc2UoKSxsLmhhc0NvbnRlbnQ9IUxiLnRlc3QobC50eXBlKSxmPWwudXJsLGwuaGFzQ29udGVudHx8KGwuZGF0YSYmKGY9bC51cmwrPShGYi50ZXN0KGYpPyImIjoiPyIpK2wuZGF0YSxkZWxldGUgbC5kYXRhKSxsLmNhY2hlPT09ITEmJihsLnVybD1JYi50ZXN0KGYpP2YucmVwbGFjZShJYiwiJDFfPSIrRWIrKyk6ZisoRmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0ViKyspKSxsLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixuLmV0YWdbZl0pKSwobC5kYXRhJiZsLmhhc0NvbnRlbnQmJmwuY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJncuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixsLmNvbnRlbnRUeXBlKSx3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsbC5kYXRhVHlwZXNbMF0mJmwuYWNjZXB0c1tsLmRhdGFUeXBlc1swXV0/bC5hY2NlcHRzW2wuZGF0YVR5cGVzWzBdXSsoIioiIT09bC5kYXRhVHlwZXNbMF0/IiwgIitRYisiOyBxPTAuMDEiOiIiKTpsLmFjY2VwdHNbIioiXSk7Zm9yKGUgaW4gbC5oZWFkZXJzKXcuc2V0UmVxdWVzdEhlYWRlcihlLGwuaGVhZGVyc1tlXSk7aWYobC5iZWZvcmVTZW5kJiYobC5iZWZvcmVTZW5kLmNhbGwobSx3LGwpPT09ITF8fDI9PT11KSlyZXR1cm4gdy5hYm9ydCgpO3Y9ImFib3J0Ijtmb3IoZSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl3W2VdKGxbZV0pO2lmKGo9VWIoUGIsbCxjLHcpKXtpZih3LnJlYWR5U3RhdGU9MSxpJiZvLnRyaWdnZXIoImFqYXhTZW5kIixbdyxsXSksMj09PXUpcmV0dXJuIHc7bC5hc3luYyYmbC50aW1lb3V0PjAmJihoPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3cuYWJvcnQoInRpbWVvdXQiKX0sbC50aW1lb3V0KSk7dHJ5e3U9MSxqLnNlbmQocyx5KX1jYXRjaCh4KXtpZighKDI+dSkpdGhyb3cgeDt5KC0xLHgpfX1lbHNlIHkoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHkoYixjLGQsZSl7dmFyIGsscyx0LHYseCx5PWM7MiE9PXUmJih1PTIsaCYmYS5jbGVhclRpbWVvdXQoaCksaj12b2lkIDAsZz1lfHwiIix3LnJlYWR5U3RhdGU9Yj4wPzQ6MCxrPWI+PTIwMCYmMzAwPmJ8fDMwND09PWIsZCYmKHY9V2IobCx3LGQpKSx2PVhiKGwsdix3LGspLGs/KGwuaWZNb2RpZmllZCYmKHg9dy5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHgmJihuLmxhc3RNb2RpZmllZFtmXT14KSx4PXcuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx4JiYobi5ldGFnW2ZdPXgpKSwyMDQ9PT1ifHwiSEVBRCI9PT1sLnR5cGU/eT0ibm9jb250ZW50IjozMDQ9PT1iP3k9Im5vdG1vZGlmaWVkIjooeT12LnN0YXRlLHM9di5kYXRhLHQ9di5lcnJvcixrPSF0KSk6KHQ9eSwhYiYmeXx8KHk9ImVycm9yIiwwPmImJihiPTApKSksdy5zdGF0dXM9Yix3LnN0YXR1c1RleHQ9KGN8fHkpKyIiLGs/cC5yZXNvbHZlV2l0aChtLFtzLHksd10pOnAucmVqZWN0V2l0aChtLFt3LHksdF0pLHcuc3RhdHVzQ29kZShyKSxyPXZvaWQgMCxpJiZvLnRyaWdnZXIoaz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt3LGwsaz9zOnRdKSxxLmZpcmVXaXRoKG0sW3cseV0pLGkmJihvLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3csbF0pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB3fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG4uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheChuLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sbi5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk7aWYodGhpc1swXSl7dmFyIGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RDaGlsZCYmMT09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSlhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTtmdW5jdGlvbiBZYihhKXtyZXR1cm4gYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxuLmNzcyhhLCJkaXNwbGF5Iil9ZnVuY3Rpb24gWmIoYSl7aWYoIW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50fHxkLGEpKXJldHVybiEwO3doaWxlKGEmJjE9PT1hLm5vZGVUeXBlKXtpZigibm9uZSI9PT1ZYihhKXx8ImhpZGRlbiI9PT1hLnR5cGUpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9bi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBsLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpP2Eub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wJiYhYS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aDpaYihhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgJGI9LyUyMC9nLF9iPS9cW1xdJC8sYWM9L1xyP1xuL2csYmM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGNjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBkYyhhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxfYi50ZXN0KGEpP2QoYSxlKTpkYyhhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpZGMoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlkYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSgkYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmY2MudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWJjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFaLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoYWMsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKGFjLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPXZvaWQgMCE9PWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTG9jYWw/aWMoKTpkLmRvY3VtZW50TW9kZT44P2hjKCk6L14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmaGMoKXx8aWMoKX06aGM7dmFyIGVjPTAsZmM9e30sZ2M9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGZjKWZjW2FdKHZvaWQgMCwhMCl9KSxsLmNvcnM9ISFnYyYmIndpdGhDcmVkZW50aWFscyJpbiBnYyxnYz1sLmFqYXg9ISFnYyxnYyYmbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe2lmKCFiLmNyb3NzRG9tYWlufHxsLmNvcnMpe3ZhciBjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7dmFyIGYsZz1iLnhocigpLGg9KytlYztpZihnLm9wZW4oYi50eXBlLGIudXJsLGIuYXN5bmMsYi51c2VybmFtZSxiLnBhc3N3b3JkKSxiLnhockZpZWxkcylmb3IoZiBpbiBiLnhockZpZWxkcylnW2ZdPWIueGhyRmllbGRzW2ZdO2IubWltZVR5cGUmJmcub3ZlcnJpZGVNaW1lVHlwZSYmZy5vdmVycmlkZU1pbWVUeXBlKGIubWltZVR5cGUpLGIuY3Jvc3NEb21haW58fGRbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGRbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZiBpbiBkKXZvaWQgMCE9PWRbZl0mJmcuc2V0UmVxdWVzdEhlYWRlcihmLGRbZl0rIiIpO2cuc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCksYz1mdW5jdGlvbihhLGQpe3ZhciBmLGksajtpZihjJiYoZHx8ND09PWcucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIGZjW2hdLGM9dm9pZCAwLGcub25yZWFkeXN0YXRlY2hhbmdlPW4ubm9vcCxkKTQhPT1nLnJlYWR5U3RhdGUmJmcuYWJvcnQoKTtlbHNle2o9e30sZj1nLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGcucmVzcG9uc2VUZXh0JiYoai50ZXh0PWcucmVzcG9uc2VUZXh0KTt0cnl7aT1nLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1mfHwhYi5pc0xvY2FsfHxiLmNyb3NzRG9tYWluPzEyMjM9PT1mJiYoZj0yMDQpOmY9ai50ZXh0PzIwMDo0MDR9aiYmZShmLGksaixnLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYi5hc3luYz80PT09Zy5yZWFkeVN0YXRlP2Euc2V0VGltZW91dChjKTpnLm9ucmVhZHlzdGF0ZWNoYW5nZT1mY1toXT1jOmMoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKHZvaWQgMCwhMCl9fX19KTtmdW5jdGlvbiBoYygpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX1mdW5jdGlvbiBpYygpe3RyeXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChiKXt9fW4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPWQuaGVhZHx8bigiaGVhZCIpWzBdfHxkLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9ZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxmKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgamM9W10sa2M9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9amMucG9wKCl8fG4uZXhwYW5kbysiXyIrRWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGtjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYma2MudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGtjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShGYi50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssamMucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWphKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBsYz1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZigic3RyaW5nIiE9dHlwZW9mIGEmJmxjKXJldHVybiBsYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZigiICIpO3JldHVybiBoPi0xJiYoZD1uLnRyaW0oYS5zbGljZShoLGEubGVuZ3RoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gbWMoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZuLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLG4uZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXt0b3A6MCxsZWZ0OjB9LGU9dGhpc1swXSxmPWUmJmUub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixlKT8oInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKGQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1tYyhmKSx7dG9wOmQudG9wKyhjLnBhZ2VZT2Zmc2V0fHxiLnNjcm9sbFRvcCktKGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoYy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0KS0oYi5jbGllbnRMZWZ0fHwwKX0pOmR9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXt0b3A6MCxsZWZ0OjB9LGQ9dGhpc1swXTtyZXR1cm4iZml4ZWQiPT09bi5jc3MoZCwicG9zaXRpb24iKT9iPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLCJodG1sIil8fChjPWEub2Zmc2V0KCkpLGMudG9wKz1uLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGMubGVmdCs9bi5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6Yi50b3AtYy50b3Atbi5jc3MoZCwibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtYy5sZWZ0LW4uY3NzKGQsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYhbi5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bi5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxRYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9bWMoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bihmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bihmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1VYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1TYShhLGIpLE9hLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7CnBhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjaywiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBuYz1hLmpRdWVyeSxvYz1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1vYyksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9bmMpLG59LGJ8fChhLmpRdWVyeT1hLiQ9biksbn0pOwo="}]},{"name":"网盘助手","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://pan.baidu.com/*","*://yun.baidu.com/*","*://*.weiyun.com/*","*://*.lanzous.com/*","*://*.lanzoux.com/*","*://cloud.189.cn/*","*://*.newday.me/*","*://*.likestyle.cn/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"$config":"o{\"uid\":\"0aactzr56y5fj6oztoa86yt04afap4dj\",\"share_log_list\":{\"lanzous#b0162itre\":{\"share_id\":\"b0162itre\",\"share_pwd\":\"bpco\",\"share_link\":\"https://wwa.lanzous.com/b0162itre\",\"share_source\":\"lanzous\",\"share_time\":1610721953903},\"baidu#h347t3R3kbXkfmADFIGOMg\":{\"share_id\":\"h347t3R3kbXkfmADFIGOMg\",\"share_pwd\":\"bcqc\",\"share_link\":\"https://pan.baidu.com/share/init?surl=h347t3R3kbXkfmADFIGOMg\",\"share_source\":\"baidu\",\"share_time\":1618025189903},\"lanzous#b01hweblc\":{\"share_id\":\"b01hweblc\",\"share_pwd\":\"0\",\"share_link\":\"https://sabrinathings.lanzous.com/b01hweblc\",\"share_source\":\"lanzous\",\"share_time\":1620400604834},\"baidu#7w54DzbugtGF_3m7Adz4Ag\":{\"share_id\":\"7w54DzbugtGF_3m7Adz4Ag\",\"share_pwd\":\"1234\",\"share_link\":\"https://pan.baidu.com/share/init?surl=7w54DzbugtGF_3m7Adz4Ag\",\"share_source\":\"baidu\",\"share_time\":1630076806412},\"baidu#qBPLZ8TdYuD3OYmTdIAjTQ\":{\"share_id\":\"qBPLZ8TdYuD3OYmTdIAjTQ\",\"share_pwd\":\"akuq\",\"share_link\":\"https://pan.baidu.com/share/init?surl=qBPLZ8TdYuD3OYmTdIAjTQ\",\"share_source\":\"baidu\",\"share_time\":1631957156681},\"baidu#PuJJPbtlcts0lwSKpeA1Pw\":{\"share_id\":\"PuJJPbtlcts0lwSKpeA1Pw\",\"share_pwd\":\"bmxv\",\"share_link\":\"https://pan.baidu.com/share/init?surl=PuJJPbtlcts0lwSKpeA1Pw\",\"share_source\":\"baidu\",\"share_time\":1631957408991},\"baidu#vA2uLMvAKmJQABLIO12SUA\":{\"share_id\":\"vA2uLMvAKmJQABLIO12SUA\",\"share_pwd\":\"kudm\",\"share_link\":\"https://pan.baidu.com/share/init?surl=vA2uLMvAKmJQABLIO12SUA\",\"share_source\":\"baidu\",\"share_time\":1633420146824},\"baidu#mZs5S9yX96IUS5yjewGV4w\":{\"share_id\":\"mZs5S9yX96IUS5yjewGV4w\",\"share_pwd\":\"m3dz\",\"share_link\":\"https://pan.baidu.com/share/init?surl=mZs5S9yX96IUS5yjewGV4w\",\"share_source\":\"baidu\",\"share_time\":1634896237841},\"baidu#iP8vAFo-DSiaGrjqSMDcrw\":{\"share_id\":\"iP8vAFo-DSiaGrjqSMDcrw\",\"share_pwd\":\"0s5b\",\"share_link\":\"https://pan.baidu.com/share/init?surl=iP8vAFo-DSiaGrjqSMDcrw\",\"share_source\":\"baidu\",\"share_time\":1640075809972},\"baidu#Cu4B5800eDV2slkh7dGrBw\":{\"share_id\":\"Cu4B5800eDV2slkh7dGrBw\",\"share_pwd\":\"t3t1\",\"share_link\":\"https://pan.baidu.com/share/init?surl=Cu4B5800eDV2slkh7dGrBw&pwd=t3t1\",\"share_source\":\"baidu\",\"share_time\":1641535193730}}}","$storage":"o{\"version_date\":\"20220107\",\"version_payload\":{\"version\":\"0.4.7\"},\"version_latest\":\"0.4.7\"}","config_json":"s{\"wpzs_version_date\":\"20200507\",\"wpzs_version_latest\":\"0.2.2\",\"wpzs_app_id\":\"778750\"}","uid":"schj8hjgqezi5h888ay84eym9ixyhes4l"},"ts":1641535193730},"enabled":true,"position":9,"file_url":"https://greasyfork.org/scripts/378301-%E7%BD%91%E7%9B%98%E5%8A%A9%E6%89%8B/code/%E7%BD%91%E7%9B%98%E5%8A%A9%E6%89%8B.user.js","uuid":"7b8b80c7-e653-435b-8d6f-583865cad3e1","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDnvZHnm5jliqnmiYsKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vZ28ubmV3ZGF5Lm1lL3MvcGFuLWhvbWUKLy8gQHZlcnNpb24gICAgICAwLjQuOAovLyBAaWNvbiAgICAgICAgIGh0dHA6Ly9jZG4ubmV3ZGF5Lm1lL2FkZG9uL3Bhbi9mYXZpY29uLmljbwovLyBAYXV0aG9yICAgICAgIOWTqeWRtQovLyBAZGVzY3JpcHRpb24gIOS4gOS4quS8mOmbheWlveeUqOeahOe9keebmOWKqeaJi++8m+aPkuS7tuS4u+imgeWKn+iDveacie+8mlsxXeiusOS9j+WQhOWkp+e9keebmOWIhuS6q+eahOiuv+mXruWvhumSpSBbMl3nmb7luqbnvZHnm5jnlJ/miJDlubblsZXnpLrkuIvovb3pk77mjqUgWzNd55m+5bqm572R55uY5YiG5Lqr5pe26Ieq5a6a5LmJ5o+Q5Y+W56CBCi8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi53ZWl5dW4uY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5sYW56b3VzLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubGFuem91eC5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly9jbG91ZC4xODkuY24vKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLm5ld2RheS5tZS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubGlrZXN0eWxlLmNuLyoKLy8gQGNvbm5lY3QgICAgICBuZXdkYXkubWUKLy8gQGNvbm5lY3QgICAgICBsaWtlc3R5bGUuY24KLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5zdGF0aWNmaWxlLm9yZy9qcXVlcnkvMy41LjAvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2RvbXB1cmlmeS8yLjAuMTAvcHVyaWZ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL3NuYXAuc3ZnLzAuNS4xL3NuYXAuc3ZnLW1pbi5qcwovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX2RlbGV0ZVZhbHVlCi8vIEBncmFudCAgICAgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgIEdNX25vdGlmaWNhdGlvbgovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICB2YXIgbWFuaWZlc3QgPSB7CiAgICAgICAgIm5hbWUiOiAid3B6cyIsCiAgICAgICAgInRpdGxlIjogIue9keebmOWKqeaJiyIsCiAgICAgICAgInVybHMiOiB7fSwKICAgICAgICAiYXBpcyI6IHsKICAgICAgICAgICAgInZlcnNpb24iOiAiaHR0cHM6Ly9hcGkubmV3ZGF5Lm1lL3NoYXJlL2Rpc2svdmVyc2lvbiIsCiAgICAgICAgICAgICJvcmlnaW4iOiAiaHR0cHM6Ly9hcGkubmV3ZGF5Lm1lL3NoYXJlL2Rpc2svb3JpZ2luIgogICAgICAgIH0sCiAgICAgICAgImxvZ2dlcl9sZXZlbCI6IDMsCiAgICAgICAgIm9wdGlvbnNfcGFnZSI6ICJodHRwOi8vZ28ubmV3ZGF5Lm1lL3MvcGFuLW9wdGlvbiIKICAgIH07CgogICAgdmFyIGNvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgZGVmaW5lczoge30sCiAgICAgICAgICAgIG1vZHVsZXM6IHt9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmRlZmluZSA9IGZ1bmN0aW9uIChuYW1lLCByZXF1aXJlcywgY2FsbGJhY2spIHsKICAgICAgICAgICAgbmFtZSA9IG9iai5wcm9jZXNzTmFtZShuYW1lKTsKICAgICAgICAgICAgb2JqLmRlZmluZXNbbmFtZV0gPSB7CiAgICAgICAgICAgICAgICByZXF1aXJlczogcmVxdWlyZXMsCiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sKICAgICAgICAgICAgfTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVxdWlyZSA9IGZ1bmN0aW9uIChuYW1lLCBjYWNoZSkgewogICAgICAgICAgICBpZiAodHlwZW9mIGNhY2hlID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICBjYWNoZSA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5hbWUgPSBvYmoucHJvY2Vzc05hbWUobmFtZSk7CiAgICAgICAgICAgIGlmIChjYWNoZSAmJiBvYmoubW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5tb2R1bGVzW25hbWVdOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5kZWZpbmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVxdWlyZXMgPSBvYmouZGVmaW5lc1tuYW1lXS5yZXF1aXJlczsKICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IG9iai5kZWZpbmVzW25hbWVdLmNhbGxiYWNrOwoKICAgICAgICAgICAgICAgIHZhciBtb2R1bGUgPSBvYmoudXNlKHJlcXVpcmVzLCBjYWxsYmFjayk7CiAgICAgICAgICAgICAgICBjYWNoZSAmJiBvYmoucmVnaXN0ZXIobmFtZSwgbW9kdWxlKTsKICAgICAgICAgICAgICAgIHJldHVybiBtb2R1bGU7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoudXNlID0gZnVuY3Rpb24gKHJlcXVpcmVzLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgbW9kdWxlID0gewogICAgICAgICAgICAgICAgZXhwb3J0czogdW5kZWZpbmVkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBvYmouYnVpbGRQYXJhbXMocmVxdWlyZXMsIG1vZHVsZSk7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjay5hcHBseSh0aGlzLCBwYXJhbXMpOwogICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBtb2R1bGUuZXhwb3J0czsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlciA9IGZ1bmN0aW9uIChuYW1lLCBtb2R1bGUpIHsKICAgICAgICAgICAgbmFtZSA9IG9iai5wcm9jZXNzTmFtZShuYW1lKTsKICAgICAgICAgICAgb2JqLm1vZHVsZXNbbmFtZV0gPSBtb2R1bGU7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmJ1aWxkUGFyYW1zID0gZnVuY3Rpb24gKHJlcXVpcmVzLCBtb2R1bGUpIHsKICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtdOwogICAgICAgICAgICByZXF1aXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChvYmoucmVxdWlyZShuYW1lKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBwYXJhbXMucHVzaChvYmoucmVxdWlyZSk7CiAgICAgICAgICAgIHBhcmFtcy5wdXNoKG1vZHVsZS5leHBvcnRzKTsKICAgICAgICAgICAgcGFyYW1zLnB1c2gobW9kdWxlKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtczsKICAgICAgICB9OwoKICAgICAgICBvYmoucHJvY2Vzc05hbWUgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRlZmluZTogb2JqLmRlZmluZSwKICAgICAgICAgICAgdXNlOiBvYmoudXNlLAogICAgICAgICAgICByZWdpc3Rlcjogb2JqLnJlZ2lzdGVyLAogICAgICAgICAgICBtb2R1bGVzOiBvYmoubW9kdWxlcwogICAgICAgIH07CiAgICB9KSgpOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImdtIiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5yZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgICAgICBpZiAodHlwZW9mIEdNX2dldFZhbHVlICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnJlYWR5KGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgLyoqIGNvbW1vbiAqKi8KICAgIGNvbnRhaW5lci5kZWZpbmUoImdtRGFvIiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBpdGVtczoge30KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0ID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIEdNX2dldFZhbHVlKG5hbWUpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRCYXRjaCA9IGZ1bmN0aW9uIChuYW1lcykgewogICAgICAgICAgICB2YXIgaXRlbXMgPSB7fTsKICAgICAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgaXRlbXNbbmFtZV0gPSBvYmouZ2V0KG5hbWUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGl0ZW1zOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0QmF0Y2goR01fbGlzdFZhbHVlcygpKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0ID0gZnVuY3Rpb24gKG5hbWUsIGl0ZW0pIHsKICAgICAgICAgICAgR01fc2V0VmFsdWUobmFtZSwgaXRlbSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldEJhdGNoID0gZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gaXRlbXMpIHsKICAgICAgICAgICAgICAgIG9iai5zZXQobmFtZSwgaXRlbXNbbmFtZV0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldEFsbCA9IGZ1bmN0aW9uIChpdGVtcykgewogICAgICAgICAgICB2YXIgbmFtZXMgPSBHTV9saXN0VmFsdWVzKCk7CiAgICAgICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmICghaXRlbXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICBvYmoucmVtb3ZlKG5hbWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgb2JqLnNldEJhdGNoKGl0ZW1zKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVtb3ZlID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUobmFtZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlbW92ZUJhdGNoID0gZnVuY3Rpb24gKG5hbWVzKSB7CiAgICAgICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgIG9iai5yZW1vdmUobmFtZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZW1vdmVBbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5yZW1vdmVCYXRjaChHTV9saXN0VmFsdWVzKCkpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJTY29wZURhbyIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYW8sIHNjb3BlKSB7CiAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICBpdGVtczoge30KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5nZXQgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5pdGVtc1tuYW1lXTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5nZXRCYXRjaCA9IGZ1bmN0aW9uIChuYW1lcykgewogICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0ge307CiAgICAgICAgICAgICAgICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5pdGVtcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tuYW1lXSA9IG9iai5pdGVtc1tuYW1lXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtczsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLml0ZW1zOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLnNldCA9IGZ1bmN0aW9uIChuYW1lLCBpdGVtKSB7CiAgICAgICAgICAgICAgICBvYmouaXRlbXNbbmFtZV0gPSBpdGVtOwoKICAgICAgICAgICAgICAgIG9iai5zeW5jKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBvYmouc2V0QmF0Y2ggPSBmdW5jdGlvbiAoaXRlbXMpIHsKICAgICAgICAgICAgICAgIG9iai5pdGVtcyA9IE9iamVjdC5hc3NpZ24ob2JqLml0ZW1zLCBpdGVtcyk7CgogICAgICAgICAgICAgICAgb2JqLnN5bmMoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5zZXRBbGwgPSBmdW5jdGlvbiAoaXRlbXMpIHsKICAgICAgICAgICAgICAgIG9iai5pdGVtcyA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW1zKTsKCiAgICAgICAgICAgICAgICBvYmouc3luYygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLnJlbW92ZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgb2JqLml0ZW1zW25hbWVdOwoKICAgICAgICAgICAgICAgIG9iai5zeW5jKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBvYmoucmVtb3ZlQmF0Y2ggPSBmdW5jdGlvbiAobmFtZXMpIHsKICAgICAgICAgICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqLml0ZW1zW25hbWVdOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgb2JqLnN5bmMoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5yZW1vdmVBbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBvYmouaXRlbXMgPSB7fTsKCiAgICAgICAgICAgICAgICBvYmouZ2V0RGFvKCkucmVtb3ZlKG9iai5nZXRTY29wZSgpKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gb2JqLmdldERhbygpLmdldChvYmouZ2V0U2NvcGUoKSk7CiAgICAgICAgICAgICAgICBpZiAoaXRlbXMgaW5zdGFuY2VvZiBPYmplY3QpIHsKICAgICAgICAgICAgICAgICAgICBvYmouaXRlbXMgPSBpdGVtczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5zeW5jID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgb2JqLmdldERhbygpLnNldChvYmouZ2V0U2NvcGUoKSwgb2JqLml0ZW1zKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5nZXREYW8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZGFvOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldFNjb3BlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuIG9iai5pbml0KCksIG9iajsKICAgICAgICB9OwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiY29uZmlnIiwgWyJmYWN0b3J5Il0sIGZ1bmN0aW9uIChmYWN0b3J5KSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouZ2V0Q29uZmlnID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5nZXREYW8oKS5nZXQobmFtZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldENvbmZpZyA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICBvYmouZ2V0RGFvKCkuc2V0KG5hbWUsIHZhbHVlKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZGVsQ29uZmlnID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgb2JqLmdldERhbygpLnJlbW92ZShuYW1lKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygpLmdldEFsbCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXREYW8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5LmdldENvbmZpZ0RhbygpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJzdG9yYWdlIiwgWyJmYWN0b3J5Il0sIGZ1bmN0aW9uIChmYWN0b3J5KSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouZ2V0VmFsdWUgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygpLmdldChuYW1lKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0VmFsdWUgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsKICAgICAgICAgICAgb2JqLmdldERhbygpLnNldChuYW1lLCB2YWx1ZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5nZXREYW8oKS5nZXRBbGwoKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RGFvID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZmFjdG9yeS5nZXRTdG9yYWdlRGFvKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoIm9wdGlvbiIsIFsiY29uZmlnIiwgImNvbnN0YW50Il0sIGZ1bmN0aW9uIChjb25maWcsIGNvbnN0YW50KSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgbmFtZTogIm9wdGlvbiIsCiAgICAgICAgICAgIGNvbnN0YW50OiBjb25zdGFudC5vcHRpb24KICAgICAgICB9OwoKICAgICAgICBvYmouaXNPcHRpb25BY3RpdmUgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICB2YXIgbmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgICAgICAgdmFyIG9wdGlvbiA9IG9iai5nZXRPcHRpb24oKTsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5pbmRleE9mKG5hbWUpID49IDAgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldE9wdGlvbkFjdGl2ZSA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBuYW1lID0gaXRlbS5uYW1lOwogICAgICAgICAgICB2YXIgb3B0aW9uID0gb2JqLmdldE9wdGlvbigpOwogICAgICAgICAgICBpZiAob3B0aW9uLmluZGV4T2YobmFtZSkgPCAwKSB7CiAgICAgICAgICAgICAgICBvcHRpb24ucHVzaChuYW1lKTsKICAgICAgICAgICAgICAgIG9iai5zZXRPcHRpb24ob3B0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5zZXRPcHRpb25VbkFjdGl2ZSA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBuYW1lID0gaXRlbS5uYW1lOwogICAgICAgICAgICB2YXIgb3B0aW9uID0gb2JqLmdldE9wdGlvbigpOwogICAgICAgICAgICB2YXIgaW5kZXggPSBvcHRpb24uaW5kZXhPZihuYW1lKTsKICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25baW5kZXhdOwogICAgICAgICAgICAgICAgb2JqLnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE9wdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG9wdGlvbiA9IFtdOwogICAgICAgICAgICB2YXIgb3B0aW9uTGlzdCA9IG9iai5nZXRPcHRpb25MaXN0KCk7CiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMob2JqLmNvbnN0YW50KS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgICAgICAgICAgIGlmIChvcHRpb25MaXN0Lmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbkxpc3RbbmFtZV0gIT0gIm5vIikgewogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24ucHVzaChuYW1lKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnZhbHVlICE9ICJubyIpIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb24ucHVzaChuYW1lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBvcHRpb247CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldE9wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICAgICAgdmFyIG9wdGlvbkxpc3QgPSB7fTsKICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhvYmouY29uc3RhbnQpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gaXRlbS5uYW1lOwogICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5pbmRleE9mKG5hbWUpID49IDApIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb25MaXN0W25hbWVdID0gInllcyI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbkxpc3RbbmFtZV0gPSAibm8iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgb2JqLnNldE9wdGlvbkxpc3Qob3B0aW9uTGlzdCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE9wdGlvbkxpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBvcHRpb25MaXN0ID0gY29uZmlnLmdldENvbmZpZyhvYmoubmFtZSk7CiAgICAgICAgICAgIHJldHVybiBvcHRpb25MaXN0ID8gb3B0aW9uTGlzdCA6IHt9OwogICAgICAgIH07CgogICAgICAgIG9iai5zZXRPcHRpb25MaXN0ID0gZnVuY3Rpb24gKG9wdGlvbkxpc3QpIHsKICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZyhvYmoubmFtZSwgb3B0aW9uTGlzdCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoIm1hbmlmZXN0IiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBtYW5pZmVzdDogbWFuaWZlc3QKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0SXRlbSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWFuaWZlc3RbbmFtZV07CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE1hbmlmZXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hbmlmZXN0OwogICAgICAgIH07CgogICAgICAgIG9iai5nZXROYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldEl0ZW0oIm5hbWUiKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VGl0bGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0SXRlbSgidGl0bGUiKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VXJsID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgdmFyIHVybHMgPSBvYmouZ2V0SXRlbSgidXJscyIpOwogICAgICAgICAgICAodXJscyBpbnN0YW5jZW9mIE9iamVjdCkgfHwgKHVybHMgPSB7fSk7CiAgICAgICAgICAgIHJldHVybiB1cmxzW25hbWVdOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRBcGkgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICB2YXIgYXBpcyA9IG9iai5nZXRJdGVtKCJhcGlzIik7CiAgICAgICAgICAgIChhcGlzIGluc3RhbmNlb2YgT2JqZWN0KSB8fCAoYXBpcyA9IHt9KTsKICAgICAgICAgICAgcmV0dXJuIGFwaXNbbmFtZV07CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE9wdGlvbnNQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoR01faW5mby5zY3JpcHQub3B0aW9uVXJsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gR01faW5mby5zY3JpcHQub3B0aW9uVXJsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRJdGVtKCJvcHRpb25zX3BhZ2UiKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJlbnYiLCBbImNvbmZpZyIsICJtYW5pZmVzdCJdLCBmdW5jdGlvbiAoY29uZmlnLCBtYW5pZmVzdCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIG1vZGVzOiB7CiAgICAgICAgICAgICAgICBBRERPTjogImFkZG9uIiwKICAgICAgICAgICAgICAgIFNDUklQVDogInNjcmlwdCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYnJvd3NlcnM6IHsKICAgICAgICAgICAgICAgIEZJUkVGT1g6ICJmaXJlZm94IiwKICAgICAgICAgICAgICAgIEVERzogImVkZyIsCiAgICAgICAgICAgICAgICBFREdFOiAiZWRnZSIsCiAgICAgICAgICAgICAgICBCQUlEVTogImJhaWR1IiwKICAgICAgICAgICAgICAgIExJRUJBTzogImxpZWJhbyIsCiAgICAgICAgICAgICAgICBVQzogInVjIiwKICAgICAgICAgICAgICAgIFFROiAicXEiLAogICAgICAgICAgICAgICAgU09HT1U6ICJzb2dvdSIsCiAgICAgICAgICAgICAgICBPUEVSQTogIm9wZXJhIiwKICAgICAgICAgICAgICAgIE1BWFRIT046ICJtYXh0aG9uIiwKICAgICAgICAgICAgICAgIElFMjM0NTogIjIzNDUiLAogICAgICAgICAgICAgICAgU0UzNjA6ICIzNjAiLAogICAgICAgICAgICAgICAgQ0hST01FOiAiY2hyb21lIiwKICAgICAgICAgICAgICAgIFNBRklSSTogInNhZmFyaSIsCiAgICAgICAgICAgICAgICBPVEhFUjogIm90aGVyIgogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBtYW5pZmVzdC5nZXROYW1lKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE1vZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChHTV9pbmZvLm1vZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBHTV9pbmZvLm1vZGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm1vZGVzLlNDUklQVDsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRBaWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChHTV9pbmZvLnNjcmlwdEhhbmRsZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBHTV9pbmZvLnNjcmlwdEhhbmRsZXIudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAidW5rbm93biI7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VWlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdWlkID0gY29uZmlnLmdldENvbmZpZygidWlkIik7CiAgICAgICAgICAgIGlmICghdWlkKSB7CiAgICAgICAgICAgICAgICB1aWQgPSBvYmoucmFuZFN0cmluZygzMik7CiAgICAgICAgICAgICAgICBjb25maWcuc2V0Q29uZmlnKCJ1aWQiLCB1aWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB1aWQ7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghb2JqLl9icm93c2VyKSB7CiAgICAgICAgICAgICAgICBvYmouX2Jyb3dzZXIgPSBvYmoubWF0Y2hCcm93c2VyVHlwZShuYXZpZ2F0b3IudXNlckFnZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gb2JqLl9icm93c2VyOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRWZXJzaW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gR01faW5mby5zY3JpcHQudmVyc2lvbjsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RWRpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIEdNX2luZm8udmVyc2lvbjsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0SW5mbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIG1vZGU6IG9iai5nZXRNb2RlKCksCiAgICAgICAgICAgICAgICBhaWQ6IG9iai5nZXRBaWQoKSwKICAgICAgICAgICAgICAgIHVpZDogb2JqLmdldFVpZCgpLAogICAgICAgICAgICAgICAgYnJvd3Nlcjogb2JqLmdldEJyb3dzZXIoKSwKICAgICAgICAgICAgICAgIHZlcnNpb246IG9iai5nZXRWZXJzaW9uKCksCiAgICAgICAgICAgICAgICBlZGl0aW9uOiBvYmouZ2V0RWRpdGlvbigpCiAgICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm1hdGNoQnJvd3NlclR5cGUgPSBmdW5jdGlvbiAodXNlckFnZW50KSB7CiAgICAgICAgICAgIHZhciBicm93c2VyID0gb2JqLmJyb3dzZXJzLk9USEVSOwogICAgICAgICAgICB1c2VyQWdlbnQgPSB1c2VyQWdlbnQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgaWYgKHVzZXJBZ2VudC5tYXRjaCgvZmlyZWZveC8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuRklSRUZPWDsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL2VkZ2UvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLkVER0U7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9lZGcvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLkVERzsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL2JpZHVicm93c2VyLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5CQUlEVTsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL2xiYnJvd3Nlci8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuTElFQkFPOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvdWJyb3dzZXIvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLlVDOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvcXFicm93c2UvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLlFROwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvbWV0YXNyLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5TT0dPVTsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL29wci8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuT1BFUkE7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9tYXh0aG9uLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5NQVhUSE9OOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvMjM0NWV4cGxvcmVyLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5JRTIzNDU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9jaHJvbWUvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLm1pbWVUeXBlcy5sZW5ndGggPiAxMCkgewogICAgICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuU0UzNjA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuQ0hST01FOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvc2FmYXJpLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5TQUZJUkk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXI7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJhbmRTdHJpbmcgPSBmdW5jdGlvbiAobGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBwb3NzaWJsZSA9ICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkiOwogICAgICAgICAgICB2YXIgdGV4dCA9ICIiOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiaHR0cCIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouYWpheCA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICAgICAgdmFyIGRldGFpbHMgPSB7CiAgICAgICAgICAgICAgICBtZXRob2Q6IG9wdGlvbi50eXBlLAogICAgICAgICAgICAgICAgdXJsOiBvcHRpb24udXJsLAogICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBvcHRpb24uZGF0YVR5cGUsCiAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5zdGF0dXMgfHwgcGFyc2VJbnQocmVzdWx0LnN0YXR1cyAvIDEwMCkgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc3VjY2VzcyAmJiBvcHRpb24uc3VjY2VzcyhyZXN1bHQucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmVycm9yICYmIG9wdGlvbi5lcnJvcigiIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb24uZXJyb3IgJiYgb3B0aW9uLmVycm9yKHJlc3VsdC5lcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyDmj5DkuqTmlbDmja4KICAgICAgICAgICAgaWYgKG9wdGlvbi5kYXRhIGluc3RhbmNlb2YgT2JqZWN0KSB7CiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmRhdGEgaW5zdGFuY2VvZiBGb3JtRGF0YSkgewogICAgICAgICAgICAgICAgICAgIGRldGFpbHMuZGF0YSA9IG9wdGlvbi5kYXRhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb24uZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoaSwgb3B0aW9uLmRhdGFbaV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLmRhdGEgPSBmb3JtRGF0YTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g6Ieq5a6a5LmJ5aS0CiAgICAgICAgICAgIGlmIChvcHRpb24uaGVhZGVycykgewogICAgICAgICAgICAgICAgZGV0YWlscy5oZWFkZXJzID0gb3B0aW9uLmhlYWRlcnM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOi2heaXtgogICAgICAgICAgICBpZiAob3B0aW9uLnRpbWVvdXQpIHsKICAgICAgICAgICAgICAgIGRldGFpbHMudGltZW91dCA9IG9wdGlvbi50aW1lb3V0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdChkZXRhaWxzKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgicm91dGVyIiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5nZXRVcmwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmOwogICAgICAgIH07CgogICAgICAgIG9iai5nb1VybCA9IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHVybDsKICAgICAgICB9OwoKICAgICAgICBvYmoub3BlblVybCA9IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsKTsKICAgICAgICB9OwoKICAgICAgICBvYmoub3BlblRhYiA9IGZ1bmN0aW9uICh1cmwsIGFjdGl2ZSkgewogICAgICAgICAgICBHTV9vcGVuSW5UYWIodXJsLCAhYWN0aXZlKTsKICAgICAgICB9OwoKICAgICAgICBvYmouanVtcExpbmsgPSBmdW5jdGlvbiAoanVtcFVybCwganVtcE1vZGUpIHsKICAgICAgICAgICAgc3dpdGNoIChqdW1wTW9kZSkgewogICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgIC8vIHNlbGYKICAgICAgICAgICAgICAgICAgICBvYmouZ29VcmwoanVtcFVybCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgLy8gbmV3CiAgICAgICAgICAgICAgICAgICAgb2JqLm9wZW5VcmwoanVtcFVybCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgLy8gbmV3ICYgbm90IGFjdGl2ZQogICAgICAgICAgICAgICAgICAgIG9iai5vcGVuVGFiKGp1bXBVcmwsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAvLyBuZXcgJiBhY3RpdmUKICAgICAgICAgICAgICAgICAgICBvYmoub3BlblRhYihqdW1wVXJsLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRVcmxQYXJhbSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHZhciBwYXJhbSA9IG9iai5wYXJzZVVybFBhcmFtKG9iai5nZXRVcmwoKSk7CiAgICAgICAgICAgIGlmIChuYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW0uaGFzT3duUHJvcGVydHkobmFtZSkgPyBwYXJhbVtuYW1lXSA6IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucGFyc2VVcmxQYXJhbSA9IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCI/IikpIHsKICAgICAgICAgICAgICAgIHVybCA9IHVybC5zcGxpdCgiPyIpWzFdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciByZWcgPSAvKFtePSZcc10rKVs9XHNdKihbXj0mXHNdKikvZzsKICAgICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgICB3aGlsZSAocmVnLmV4ZWModXJsKSkgewogICAgICAgICAgICAgICAgb2JqW1JlZ0V4cC4kMV0gPSBSZWdFeHAuJDI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgibG9nZ2VyIiwgWyJlbnYiLCAibWFuaWZlc3QiXSwgZnVuY3Rpb24gKGVudiwgbWFuaWZlc3QpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBjb25zdGFudDogewogICAgICAgICAgICAgICAgREVCVUc6IDAsCiAgICAgICAgICAgICAgICBJTkZPOiAxLAogICAgICAgICAgICAgICAgV0FSTjogMiwKICAgICAgICAgICAgICAgIEVSUk9SOiAzLAogICAgICAgICAgICAgICAgTk9ORTogNAogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmRlYnVnID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICAgICAgb2JqLmxvZyhtZXNzYWdlLCBvYmouY29uc3RhbnQuREVCVUcpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbmZvID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICAgICAgb2JqLmxvZyhtZXNzYWdlLCBvYmouY29uc3RhbnQuSU5GTyk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLndhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgICAgICBvYmoubG9nKG1lc3NhZ2UsIG9iai5jb25zdGFudC5XQVJOKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgICAgICBvYmoubG9nKG1lc3NhZ2UsIG9iai5jb25zdGFudC5FUlJPUik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmxvZyA9IGZ1bmN0aW9uIChtZXNzYWdlLCBsZXZlbCkgewogICAgICAgICAgICBpZiAobGV2ZWwgPCBtYW5pZmVzdC5nZXRJdGVtKCJsb2dnZXJfbGV2ZWwiKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zb2xlLmdyb3VwKCJbIiArIGVudi5nZXROYW1lKCkgKyAiXSIgKyBlbnYuZ2V0TW9kZSgpKTsKICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7CiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgibWV0YSIsIFsiZW52IiwgIiQiXSwgZnVuY3Rpb24gKGVudiwgJCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLmV4aXN0TWV0YSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIG5hbWUgPSBvYmoucHJvY2Vzc05hbWUobmFtZSk7CiAgICAgICAgICAgIGlmICgkKCJtZXRhW25hbWU9JyIgKyBuYW1lICsgIiddIikubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5hcHBlbmRNZXRhID0gZnVuY3Rpb24gKG5hbWUsIGNvbnRlbnQpIHsKICAgICAgICAgICAgbmFtZSA9IG9iai5wcm9jZXNzTmFtZShuYW1lKTsKICAgICAgICAgICAgY29udGVudCB8fCAoY29udGVudCA9ICJvbiIpOwogICAgICAgICAgICAkKCc8bWV0YSBuYW1lPSInICsgbmFtZSArICciIGNvbnRlbnQ9Im9uIj4nKS5hcHBlbmRUbygkKCJoZWFkIikpOwogICAgICAgIH07CgogICAgICAgIG9iai5wcm9jZXNzTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBlbnYuZ2V0TmFtZSgpICsgIjo6IiArIG5hbWU7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInVuc2FmZVdpbmRvdyIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHR5cGVvZiB1bnNhZmVXaW5kb3cgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB1bnNhZmVXaW5kb3c7CiAgICAgICAgfQogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgic3ZnQ3J5cHQiLCBbIlNuYXAiXSwgZnVuY3Rpb24gKFNuYXApIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5nZXRSZXFEYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcmVxVGltZSA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTsKICAgICAgICAgICAgdmFyIHJlcVBvaW50ID0gb2JqLmdldFN0clBvaW50KCJ0aW1lc3RhbXA6IiArIHJlcVRpbWUpOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcmVxX3RpbWU6IHJlcVRpbWUsCiAgICAgICAgICAgICAgICByZXFfcG9pbnQ6IHJlcVBvaW50CiAgICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFN0clBvaW50ID0gZnVuY3Rpb24gKHN0cikgewogICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA8IDIpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiMDowIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHBhdGggPSAiIjsKICAgICAgICAgICAgdmFyIGN1cnJlbnQsIGxhc3QgPSBzdHJbMF0uY2hhckNvZGVBdCgpOwogICAgICAgICAgICB2YXIgc3VtID0gbGFzdDsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBzdHJbaV0uY2hhckNvZGVBdCgpOwogICAgICAgICAgICAgICAgaWYgKGkgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoICsgIk0iOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGF0aCArICIgTCI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwYXRoID0gcGF0aCArIGN1cnJlbnQgKyAiICIgKyBsYXN0OwogICAgICAgICAgICAgICAgbGFzdCA9IGN1cnJlbnQ7CiAgICAgICAgICAgICAgICBzdW0gPSBzdW0gKyBjdXJyZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHBhdGggPSBwYXRoICsgIiBaIjsKICAgICAgICAgICAgdmFyIGluZGV4ID0gc3VtICUgc3RyLmxlbmd0aDsKICAgICAgICAgICAgdmFyIGRhdGEgPSBTbmFwLnBhdGguZ2V0UG9pbnRBdExlbmd0aChwYXRoLCBzdHJbaW5kZXhdLmNoYXJDb2RlQXQoKSk7CiAgICAgICAgICAgIHJldHVybiBkYXRhLm0ueCArICI6IiArIGRhdGEubi55OwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJjYWxlbmRhciIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouZ2V0VGltZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmZvcm1hdFRpbWUgPSBmdW5jdGlvbiAoZm9ybWF0LCB0aW1lc3RhbXApIHsKICAgICAgICAgICAgZm9ybWF0IHx8IChmb3JtYXQgPSAiWS1tLWQgSDppOnMiKTsKICAgICAgICAgICAgdGltZXN0YW1wIHx8ICh0aW1lc3RhbXAgPSBvYmouZ2V0VGltZSgpKTsKICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApOwogICAgICAgICAgICB2YXIgeWVhciA9IDE5MDAgKyBkYXRlLmdldFllYXIoKTsKICAgICAgICAgICAgdmFyIG1vbnRoID0gIjAiICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpOwogICAgICAgICAgICB2YXIgZGF5ID0gIjAiICsgZGF0ZS5nZXREYXRlKCk7CiAgICAgICAgICAgIHZhciBob3VyID0gIjAiICsgZGF0ZS5nZXRIb3VycygpOwogICAgICAgICAgICB2YXIgbWludXRlID0gIjAiICsgZGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgICAgICAgIHZhciBzZWNvbmQgPSAiMCIgKyBkYXRlLmdldFNlY29uZHMoKTsKICAgICAgICAgICAgdmFyIHZhcnMgPSB7CiAgICAgICAgICAgICAgICAiWSI6IHllYXIsCiAgICAgICAgICAgICAgICAibSI6IG1vbnRoLnN1YnN0cmluZyhtb250aC5sZW5ndGggLSAyLCBtb250aC5sZW5ndGgpLAogICAgICAgICAgICAgICAgImQiOiBkYXkuc3Vic3RyaW5nKGRheS5sZW5ndGggLSAyLCBkYXkubGVuZ3RoKSwKICAgICAgICAgICAgICAgICJIIjogaG91ci5zdWJzdHJpbmcoaG91ci5sZW5ndGggLSAyLCBob3VyLmxlbmd0aCksCiAgICAgICAgICAgICAgICAiaSI6IG1pbnV0ZS5zdWJzdHJpbmcobWludXRlLmxlbmd0aCAtIDIsIG1pbnV0ZS5sZW5ndGgpLAogICAgICAgICAgICAgICAgInMiOiBzZWNvbmQuc3Vic3RyaW5nKHNlY29uZC5sZW5ndGggLSAyLCBzZWNvbmQubGVuZ3RoKQogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gb2JqLnJlcGxhY2VWYXJzKHZhcnMsIGZvcm1hdCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlcGxhY2VWYXJzID0gZnVuY3Rpb24gKHZhcnMsIHZhbHVlKSB7CiAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGtleSwgdmFyc1trZXldKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgib25lRGF0YSIsIFsiZW52IiwgImh0dHAiLCAic2V0dGluZyJdLCBmdW5jdGlvbiAoZW52LCBodHRwLCBzZXR0aW5nKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmoucmVxdWVzdE9uZUFwaSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIGh0dHAuYWpheCh7CiAgICAgICAgICAgICAgICB0eXBlOiAicG9zdCIsCiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICBkYXRhOiBPYmplY3QuYXNzaWduKGVudi5nZXRJbmZvKCksIGRhdGEsIHsgYWNjZXNzX3Rva2VuOiBzZXR0aW5nLmdldEFjY2Vzc1Rva2VuKCkgfSksCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCIkZXh0ZW5kIiwgWyIkIiwgIkRPTVB1cmlmeSIsICJsb2dnZXIiXSwgZnVuY3Rpb24gKCQsIERPTVB1cmlmeSwgbG9nZ2VyKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKERPTVB1cmlmeSAmJiBET01QdXJpZnkgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgICAgICAgdmFyIGRvbVB1cmlmeSA9IERPTVB1cmlmeSh3aW5kb3cpOwogICAgICAgICAgICAgICAgJC5mbi5zYWZlSHRtbCA9IGZ1bmN0aW9uIChodG1sKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odG1sKGRvbVB1cmlmeS5zYW5pdGl6ZShodG1sKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICQuZm4uc2FmZUh0bWwgPSBmdW5jdGlvbiAoaHRtbCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbChodG1sKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqLmluaXQoKSwgb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwUnVubmVyIiwgWyJyb3V0ZXIiLCAibG9nZ2VyIiwgIm1ldGEiLCAiJCJdLCBmdW5jdGlvbiAocm91dGVyLCBsb2dnZXIsIG1ldGEsICQsIHJlcXVpcmUpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoYXBwTGlzdCkgewogICAgICAgICAgICB2YXIgbWV0YU5hbWUgPSAic3RhdHVzIjsKICAgICAgICAgICAgaWYgKG1ldGEuZXhpc3RNZXRhKG1ldGFOYW1lKSkgewogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oInNldHVwIGFscmVhZHkiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIOa3u+WKoG1ldGEKICAgICAgICAgICAgICAgIG1ldGEuYXBwZW5kTWV0YShtZXRhTmFtZSk7CgogICAgICAgICAgICAgICAgLy8g6L+Q6KGM5bqU55SoCiAgICAgICAgICAgICAgICAkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmoucnVuQXBwTGlzdChhcHBMaXN0KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJ1bkFwcExpc3QgPSBmdW5jdGlvbiAoYXBwTGlzdCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBmb3IgKHZhciBpIGluIGFwcExpc3QpIHsKICAgICAgICAgICAgICAgIHZhciBhcHAgPSBhcHBMaXN0W2ldOwoKICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG9iai5tYXRjaEFwcCh1cmwsIGFwcCk7CiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZShhcHAubmFtZSkucnVuKCkgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm1hdGNoQXBwID0gZnVuY3Rpb24gKHVybCwgYXBwKSB7CiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZhbHNlOwogICAgICAgICAgICBhcHAubWF0Y2hzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihpdGVtKSA+IDAgfHwgaXRlbSA9PSAiKiIpIHsKICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIC8qKiBjdXN0b20gKiovCiAgICBjb250YWluZXIuZGVmaW5lKCJmYWN0b3J5IiwgWyJnbURhbyIsICJTY29wZURhbyJdLCBmdW5jdGlvbiAoZ21EYW8sIFNjb3BlRGFvKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgZGFvczoge30KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0Q29uZmlnRGFvID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygiY29uZmlnIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFNjb3BlRGFvKGdtRGFvLCAiJGNvbmZpZyIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U3RvcmFnZURhbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5nZXREYW8oInN0b3JhZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gU2NvcGVEYW8oZ21EYW8sICIkc3RvcmFnZSIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RGFvID0gZnVuY3Rpb24gKGtleSwgY3JlYXRlRnVuYykgewogICAgICAgICAgICBpZiAoIW9iai5kYW9zLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgIG9iai5kYW9zW2tleV0gPSBjcmVhdGVGdW5jKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai5kYW9zW2tleV07CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImNvbnN0YW50IiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzb3VyY2U6IHsKICAgICAgICAgICAgICAgIGJhaWR1OiAiYmFpZHUiLAogICAgICAgICAgICAgICAgd2VpeXVuOiAid2VpeXVuIiwKICAgICAgICAgICAgICAgIGxhbnpvdXM6ICJsYW56b3VzIiwKICAgICAgICAgICAgICAgIHR5MTg5OiAidHkxODkiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wdGlvbjogewogICAgICAgICAgICAgICAgYmFpZHVfcGFnZV9ob21lOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImJhaWR1X3BhZ2VfaG9tZSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmFpZHVfcGFnZV9zaGFyZTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9wYWdlX3NoYXJlIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBiYWlkdV9wYWdlX3ZlcmlmeTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9wYWdlX3ZlcmlmeSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmFpZHVfY3VzdG9tX3Bhc3N3b3JkOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImJhaWR1X2N1c3RvbV9wYXNzd29yZCIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmFpZHVfc2hvd19vcmlnaW46IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYmFpZHVfc2hvd19vcmlnaW4iLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X2F1dG9fanVtcDogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9hdXRvX2p1bXAiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAibm8iCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd2VpeXVuX3BhZ2VfaG9tZTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ3ZWl5dW5fcGFnZV9ob21lIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB3ZWl5dW5fcGFnZV9zaGFyZTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ3ZWl5dW5fcGFnZV9zaGFyZSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd2VpeXVuX3BhZ2VfdmVyaWZ5OiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIndlaXl1bl9wYWdlX3ZlcmlmeSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd2VpeXVuX2F1dG9fanVtcDogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ3ZWl5dW5fYXV0b19qdW1wIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm5vIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxhbnpvdXNfcGFnZV92ZXJpZnk6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAibGFuem91c19wYWdlX3ZlcmlmeSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbGFuem91c19hdXRvX2p1bXA6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAibGFuem91c19hdXRvX2p1bXAiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAibm8iCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdHkxODlfcGFnZV9ob21lOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIjE4OV9wYWdlX2hvbWUiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHR5MTg5X3BhZ2Vfc2hhcmU6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiMTg5X3BhZ2Vfc2hhcmUiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHR5MTg5X3BhZ2VfdmVyaWZ5OiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIjE4OV9wYWdlX3ZlcmlmeSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdHkxODlfYXV0b19qdW1wOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIjE4OV9hdXRvX2p1bXAiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAibm8iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgic2V0dGluZyIsIFsiY29uZmlnIl0sIGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5nZXRBY2Nlc3NUb2tlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGFjY2Vzc1Rva2VuID0gY29uZmlnLmdldENvbmZpZygiYWNjZXNzX3Rva2VuIik7CiAgICAgICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbiA/IGFjY2Vzc1Rva2VuIDogIiI7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldEFjY2Vzc1Rva2VuID0gZnVuY3Rpb24gKGFjY2Vzc1Rva2VuKSB7CiAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcoImFjY2Vzc190b2tlbiIsIGFjY2Vzc1Rva2VuKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0Tm90aWZ5U3RhdHVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbm90aWZ5U3RhdHVzID0gY29uZmlnLmdldENvbmZpZygibm90aWZ5X3N0YXR1cyIpOwogICAgICAgICAgICBpZiAoIW5vdGlmeVN0YXR1cykgewogICAgICAgICAgICAgICAgbm90aWZ5U3RhdHVzID0gInN1Y2Nlc3MiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBub3RpZnlTdGF0dXM7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldE5vdGlmeVN0YXR1cyA9IGZ1bmN0aW9uIChub3RpZnlTdGF0dXMpIHsKICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZygibm90aWZ5X3N0YXR1cyIsIG5vdGlmeVN0YXR1cyk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dOb3RpZnlTdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAob2JqLmdldE5vdGlmeVN0YXR1cygpID09ICJhbGwiIHx8IG9iai5nZXROb3RpZnlTdGF0dXMoKSA9PSAic3VjY2VzcyIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dOb3RpZnlGYWlsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAob2JqLmdldE5vdGlmeVN0YXR1cygpID09ICJhbGwiIHx8IG9iai5nZXROb3RpZnlTdGF0dXMoKSA9PSAiZmFpbCIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImFwaSIsIFsibWFuaWZlc3QiLCAic3ZnQ3J5cHQiLCAib25lRGF0YSJdLCBmdW5jdGlvbiAobWFuaWZlc3QsIHN2Z0NyeXB0LCBvbmVEYXRhKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmoudmVyc2lvblF1ZXJ5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIG9uZURhdGEucmVxdWVzdE9uZUFwaShtYW5pZmVzdC5nZXRBcGkoInZlcnNpb24iKSwge30sIGNhbGxiYWNrKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucXVlcnlTaGFyZU9yaWdpbiA9IGZ1bmN0aW9uIChzaGFyZVNvdXJjZSwgc2hhcmVJZCwgc2hhcmVMaW5rLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX2lkOiBzaGFyZUlkLAogICAgICAgICAgICAgICAgc2hhcmVfc291cmNlOiBzaGFyZVNvdXJjZSwKICAgICAgICAgICAgICAgIHNoYXJlX3BvaW50OiBzdmdDcnlwdC5nZXRTdHJQb2ludChzaGFyZUlkKSwKICAgICAgICAgICAgICAgIHNoYXJlX2xpbms6IHNoYXJlTGluawogICAgICAgICAgICB9OwogICAgICAgICAgICBvbmVEYXRhLnJlcXVlc3RPbmVBcGkobWFuaWZlc3QuZ2V0QXBpKCJvcmlnaW4iKSwgZGF0YSwgY2FsbGJhY2spOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJzaGFyZUxvZyIsIFsiY29uZmlnIiwgImNhbGVuZGFyIiwgImNvbnN0YW50Il0sIGZ1bmN0aW9uIChjb25maWcsIGNhbGVuZGFyLCBjb25zdGFudCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIG5hbWU6ICJzaGFyZV9sb2dfbGlzdCIsCiAgICAgICAgICAgIG5hbWVfb2xkOiAic2hhcmVfbGlzdCIKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVMb2dMaXN0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIG9iai5taWdyYXRlU2hhcmVMb2coKTsKCiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKG9iai5nZXRMb2NhbFNoYXJlTG9nTGlzdCgpKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0TG9jYWxTaGFyZUxvZ0xpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUxpc3QgPSBjb25maWcuZ2V0Q29uZmlnKG9iai5uYW1lKTsKICAgICAgICAgICAgcmV0dXJuIHNoYXJlTGlzdCA/IHNoYXJlTGlzdCA6IHt9OwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUxvZyA9IGZ1bmN0aW9uIChzaGFyZVNvdXJjZSwgc2hhcmVJZCwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHNoYXJlTGlzdCA9IG9iai5nZXRTaGFyZUxvZ0xpc3QoKTsKICAgICAgICAgICAgdmFyIHNoYXJlTm8gPSBvYmouYnVpbGRTaGFyZU5vKHNoYXJlU291cmNlLCBzaGFyZUlkKTsKICAgICAgICAgICAgaWYgKHNoYXJlTGlzdC5oYXNPd25Qcm9wZXJ0eShzaGFyZU5vKSkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soc2hhcmVMaXN0W3NoYXJlTm9dKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm1pZ3JhdGVTaGFyZUxvZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBzaGFyZUxpc3RPbGQgPSBjb25maWcuZ2V0Q29uZmlnKG9iai5uYW1lX29sZCk7CiAgICAgICAgICAgICAgICBpZiAoc2hhcmVMaXN0T2xkIGluc3RhbmNlb2YgT2JqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlTGlzdCA9IG9iai5nZXRMb2NhbFNoYXJlTG9nTGlzdCgpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gc2hhcmVMaXN0T2xkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gc2hhcmVMaXN0T2xkW2ldOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uc2hhcmVfc291cmNlID09ICIxODkiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNoYXJlX3NvdXJjZSA9IGNvbnN0YW50LnNvdXJjZS50eTE4OTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVMaXN0W29iai5idWlsZFNoYXJlTm8oaXRlbS5zaGFyZV9zb3VyY2UsIGl0ZW0uc2hhcmVfaWQpXSA9IGl0ZW07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcob2JqLm5hbWUsIHNoYXJlTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmRlbENvbmZpZyhvYmoubmFtZV9vbGQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbmZpZy5kZWxDb25maWcob2JqLm5hbWVfb2xkKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5hZGRTaGFyZUxvZyA9IGZ1bmN0aW9uIChzaGFyZVNvdXJjZSwgc2hhcmVJZCwgc2hhcmVQd2QsIHNoYXJlTGluaywgY2FsbGJhY2spIHsKICAgICAgICAgICAgb2JqLmdldFNoYXJlTG9nTGlzdChmdW5jdGlvbiAoc2hhcmVMaXN0KSB7CiAgICAgICAgICAgICAgICB2YXIgc2hhcmVObyA9IG9iai5idWlsZFNoYXJlTm8oc2hhcmVTb3VyY2UsIHNoYXJlSWQpOwogICAgICAgICAgICAgICAgc2hhcmVMaXN0W3NoYXJlTm9dID0gewogICAgICAgICAgICAgICAgICAgIHNoYXJlX2lkOiBzaGFyZUlkLAogICAgICAgICAgICAgICAgICAgIHNoYXJlX3B3ZDogc2hhcmVQd2QsCiAgICAgICAgICAgICAgICAgICAgc2hhcmVfbGluazogc2hhcmVMaW5rLAogICAgICAgICAgICAgICAgICAgIHNoYXJlX3NvdXJjZTogc2hhcmVTb3VyY2UsCiAgICAgICAgICAgICAgICAgICAgc2hhcmVfdGltZTogKG5ldyBEYXRlKCkpLmdldFRpbWUoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcob2JqLm5hbWUsIHNoYXJlTGlzdCk7CiAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVtb3ZlU2hhcmVMb2cgPSBmdW5jdGlvbiAoc2hhcmVTb3VyY2UsIHNoYXJlSWQsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIG9iai5nZXRTaGFyZUxvZ0xpc3QoZnVuY3Rpb24gKHNoYXJlTGlzdCkgewogICAgICAgICAgICAgICAgdmFyIHNoYXJlTm8gPSBvYmouYnVpbGRTaGFyZU5vKHNoYXJlU291cmNlLCBzaGFyZUlkKTsKICAgICAgICAgICAgICAgIGlmIChzaGFyZUxpc3QuaGFzT3duUHJvcGVydHkoc2hhcmVObykpIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2hhcmVMaXN0W3NoYXJlTm9dOwogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcob2JqLm5hbWUsIHNoYXJlTGlzdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouYnVpbGRTaGFyZU5vID0gZnVuY3Rpb24gKHNoYXJlU291cmNlLCBzaGFyZUlkKSB7CiAgICAgICAgICAgIHJldHVybiBzaGFyZVNvdXJjZSArICIjIiArIHNoYXJlSWQ7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmJ1aWxkU2hhcmVUaW1lID0gZnVuY3Rpb24gKHNoYXJlVGltZSkgewogICAgICAgICAgICByZXR1cm4gY2FsZW5kYXIuZm9ybWF0VGltZSgiWS1tLWQgSDppOnMiLCBzaGFyZVRpbWUpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJydW50aW1lIiwgWyJyb3V0ZXIiLCAibWFuaWZlc3QiLCAiY2FsZW5kYXIiLCAic3RvcmFnZSIsICJhcGkiXSwgZnVuY3Rpb24gKHJvdXRlciwgbWFuaWZlc3QsIGNhbGVuZGFyLCBzdG9yYWdlLCBhcGkpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5vcGVuT3B0aW9uc1BhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJvdXRlci5vcGVuVGFiKG1hbmlmZXN0LmdldE9wdGlvbnNQYWdlKCksIHRydWUpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHZlcnNpb25EYXRlID0gcGFyc2VJbnQoc3RvcmFnZS5nZXRWYWx1ZSgidmVyc2lvbl9kYXRlIikpOwogICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBjYWxlbmRhci5mb3JtYXRUaW1lKCJZbWQiKTsKICAgICAgICAgICAgaWYgKCF2ZXJzaW9uRGF0ZSB8fCB2ZXJzaW9uRGF0ZSA8IGN1cnJlbnREYXRlKSB7CiAgICAgICAgICAgICAgICBhcGkudmVyc2lvblF1ZXJ5KGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoInZlcnNpb25fZGF0ZSIsIGN1cnJlbnREYXRlKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvZGUgPT0gMSAmJiByZXNwb25zZS5kYXRhIGluc3RhbmNlb2YgT2JqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJzaW9uUGF5bG9hZCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoInZlcnNpb25fcGF5bG9hZCIsIHZlcnNpb25QYXlsb2FkKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZSgidmVyc2lvbl9sYXRlc3QiLCB2ZXJzaW9uUGF5bG9hZC52ZXJzaW9uKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0UnVudGltZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLmluaXRWZXJzaW9uKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImNvcmUiLCBbInJ1bnRpbWUiLCAiJGV4dGVuZCJdLCBmdW5jdGlvbiAocnVudGltZSkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLnJlYWR5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHJ1bnRpbWUuaW5pdFJ1bnRpbWUoKTsKCiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIC8qKiBhcHAgKiovCiAgICBjb250YWluZXIuZGVmaW5lKCJhcHBfYmFpZHUiLCBbIm1hbmlmZXN0IiwgImNvbmZpZyIsICJvcHRpb24iLCAicm91dGVyIiwgImxvZ2dlciIsICJ1bnNhZmVXaW5kb3ciLCAiY29uc3RhbnQiLCAic2V0dGluZyIsICJydW50aW1lIiwgImFwaSIsICJzaGFyZUxvZyIsICIkIl0sIGZ1bmN0aW9uIChtYW5pZmVzdCwgY29uZmlnLCBvcHRpb24sIHJvdXRlciwgbG9nZ2VyLCB1bnNhZmVXaW5kb3csIGNvbnN0YW50LCBzZXR0aW5nLCBydW50aW1lLCBhcGksIHNoYXJlTG9nLCAkKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgYXBwX2lkOiAyNTA1MjgsCiAgICAgICAgICAgIHRlbXBfcGF0aDogIi9vbmV0bXAiLAogICAgICAgICAgICB5dW5fZGF0YTogbnVsbCwKICAgICAgICAgICAgdmVyaWZ5X3BhZ2U6IHsKICAgICAgICAgICAgICAgIHNoYXJlX3B3ZDogbnVsbCwKICAgICAgICAgICAgICAgIHNldFB3ZDogbnVsbCwKICAgICAgICAgICAgICAgIGJhY2t1cFB3ZDogbnVsbCwKICAgICAgICAgICAgICAgIHJlc3RvcmVQd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzdWJtaXRfcHdkOiBudWxsCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucnVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoIi5iYWlkdS5jb20vcy8iKSA+IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfcGFnZV9zaGFyZSkgJiYgb2JqLmluaXRTaGFyZVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHVybC5pbmRleE9mKCIuYmFpZHUuY29tL2Rpc2svaG9tZSIpID4gMCkgewogICAgICAgICAgICAgICAgb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5iYWlkdV9wYWdlX2hvbWUpICYmIG9iai5pbml0SG9tZVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVybC5pbmRleE9mKCIuYmFpZHUuY29tL2Rpc2svdGltZWxpbmUiKSA+IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfcGFnZV9ob21lKSAmJiBvYmouaW5pdFRpbWVMaW5lUGFnZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXJsLmluZGV4T2YoIi5iYWlkdS5jb20vc2hhcmUvaW5pdCIpID4gMCkgewogICAgICAgICAgICAgICAgb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5iYWlkdV9wYWdlX3ZlcmlmeSkgJiYgb2JqLmluaXRWZXJpZnlQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0U2hhcmVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmouZ2V0SnF1ZXJ5KCkoZG9jdW1lbnQpLmFqYXhTZW5kKGZ1bmN0aW9uIChldmVudCwgeGhyLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICB2YXIgY2xpZW50VHlwZSA9IGNvbmZpZy5nZXRDb25maWcoImNsaWVudF90eXBlIik7CiAgICAgICAgICAgICAgICBpZiAoY2xpZW50VHlwZSkgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXJsID0gb3B0aW9ucy51cmwucmVwbGFjZSgiJmNsaWVudHR5cGU9MCIsICImY2xpZW50dHlwZT0iICsgY2xpZW50VHlwZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgb2JqLnJlbW92ZVZpZGVvTGltaXQoKTsKCiAgICAgICAgICAgIG9iai5wcmV0dHlTaW5nbGVTaGFyZVBhZ2UoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uU2hhcmUoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uRXZlbnQoKTsKCiAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmJhaWR1X3Nob3dfb3JpZ2luKSkgewogICAgICAgICAgICAgICAgb2JqLnNob3dTaGFyZU9yaWdpbigpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRIb21lUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlZ2lzdGVyQ3VzdG9tU2hhcmVQd2QoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uSG9tZSgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25FdmVudCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VGltZUxpbmVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmoucmVnaXN0ZXJDdXN0b21TaGFyZVB3ZCgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25UaW1lTGluZSgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25FdmVudCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlZ2lzdGVyU3RvcmVTaGFyZVB3ZCgpOwoKICAgICAgICAgICAgaWYgKG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQoKSkgewogICAgICAgICAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgdmFyICRwd2QgPSAkKCIuaW5wdXQtYXJlYSBpbnB1dCIpOwogICAgICAgICAgICBpZiAoc2hhcmVJZCAmJiAkcHdkLmxlbmd0aCkgewogICAgICAgICAgICAgICAgLy8g6K6+572u5o+Q5Y+W56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2V0UHdkID0gZnVuY3Rpb24gKHB3ZCkgewogICAgICAgICAgICAgICAgICAgICRwd2QudmFsKHB3ZCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIOWkh+S7veaPkOWPlueggQogICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLmJhY2t1cFB3ZCA9IGZ1bmN0aW9uIChwd2QpIHsKICAgICAgICAgICAgICAgICAgICAkcHdkLmF0dHIoImRhdGEtcHdkIiwgcHdkKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8g6L+Y5Y6f5o+Q5Y+W56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2UucmVzdG9yZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkcHdkLnZhbCgkcHdkLmF0dHIoImRhdGEtcHdkIikpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyDmj5DkuqTmj5Dlj5bnoIEKICAgICAgICAgICAgICAgIHZhciAkYnV0dG9uID0gJCgiLmlucHV0LWFyZWEgLmctYnV0dG9uLXJpZ2h0Iik7CiAgICAgICAgICAgICAgICBpZiAoJGJ1dHRvbi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc3VibWl0X3B3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGJ1dHRvbi5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouYXV0b1BhZGRpbmdTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNoYXJlSWQgPSBvYmouZ2V0U2hhcmVJZCgpOwogICAgICAgICAgICBzaGFyZUxvZy5nZXRTaGFyZUxvZyhjb25zdGFudC5zb3VyY2UuYmFpZHUsIHNoYXJlSWQsIGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICAgICAgICAgIGlmIChyZWNvcmQgaW5zdGFuY2VvZiBPYmplY3QgJiYgcmVjb3JkLnNoYXJlX3B3ZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IHJlY29yZC5zaGFyZV9wd2Q7CiAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnNoYXJlX3B3ZCA9IHNoYXJlUHdkOwogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zZXRQd2Qoc2hhcmVQd2QpOwogICAgICAgICAgICAgICAgICAgIHNldHRpbmcuc2hvd05vdGlmeVN1Y2Nlc3MoKSAmJiBvYmouc2hvd1RpcFN1Y2Nlc3MoIlsiICsgbWFuaWZlc3QuZ2V0VGl0bGUoKSArICJdIOWbnuWhq+aPkOWPlueggeaIkOWKnyIpOwoKICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5iYWlkdV9hdXRvX2p1bXApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkICYmIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZy5zaG93Tm90aWZ5RmFpbCgpICYmIG9iai5zaG93VGlwRXJyb3IoIlsiICsgbWFuaWZlc3QuZ2V0VGl0bGUoKSArICJdIOayoeacieaPkOWPlueggeiusOW9lSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmouZ2V0SnF1ZXJ5KCkoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoZXZlbnQsIHhociwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSBvcHRpb25zLnVybDsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0VXJsLmluZGV4T2YoIi9zaGFyZS92ZXJpZnkiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gb3B0aW9ucy5kYXRhLm1hdGNoKC9wd2Q9KFthLXowLTldKykvaSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBub3QgbWF0Y2giKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIOaLkue7nSrlj7cKICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnZlcmlmeV9wYWdlLmJhY2t1cFB3ZCkgewogICAgICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2UuYmFja3VwUHdkKG1hdGNoWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChvYmoudmVyaWZ5X3BhZ2UucmVzdG9yZVB3ZCwgNTAwKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHhoci5yZXNwb25zZUpTT047CiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJybm8gPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IG1hdGNoWzFdOwogICAgICAgICAgICAgICAgICAgIGlmIChzaGFyZVB3ZCA9PSBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVMaW5rID0gb2JqLmdldFNoYXJlTGluaygpOwogICAgICAgICAgICAgICAgICAgIHNoYXJlTG9nLmFkZFNoYXJlTG9nKGNvbnN0YW50LnNvdXJjZS5iYWlkdSwgc2hhcmVJZCwgc2hhcmVQd2QsIHNoYXJlTGluayk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlckN1c3RvbVNoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyDlip/og73lvIDlhbMKICAgICAgICAgICAgaWYgKCFvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmJhaWR1X2N1c3RvbV9wYXNzd29yZCkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb2JqLmxvYWRQbHVnaW4oIue9keebmOWIhuS6qyIsICJjb20uYmFpZHUucGFuIik7CgogICAgICAgICAgICBvYmoub25Nb2R1bGVSZWFkeSgiZnVuY3Rpb24td2lkZ2V0LTE6c2hhcmUvdXRpbC9zaGFyZURpYWxvZy5qcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIOWIhuS6q+S6i+S7tgogICAgICAgICAgICAgICAgb2JqLmFzeW5jKCJmdW5jdGlvbi13aWRnZXQtMTpzaGFyZS91dGlsL3NoYXJlRGlhbG9nLmpzIiwgZnVuY3Rpb24gKHNoYXJlRGlhbG9nKSB7CiAgICAgICAgICAgICAgICAgICAgc2hhcmVEaWFsb2cucHJvdG90eXBlLm9uVmlzaWJpbGl0eUNoYW5nZU9yaWdpbiA9IHNoYXJlRGlhbG9nLnByb3RvdHlwZS5vblZpc2liaWxpdHlDaGFuZ2U7CiAgICAgICAgICAgICAgICAgICAgc2hhcmVEaWFsb2cucHJvdG90eXBlLm9uVmlzaWJpbGl0eUNoYW5nZSA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoIi5uZC1pbnB1dC1zaGFyZS1wd2QiKS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlUHdkID0gY29uZmlnLmdldENvbmZpZygic2hhcmVfcHdkIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8dHI+PHRkIGNsYXNzPSJmaXJzdC1jaGlsZCI+PGxhYmVsPuaPkOWPlueggTwvbGFiZWw+PC90ZD48dGQ+PGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJuZC1pbnB1dC1zaGFyZS1wd2QiIHZhbHVlPSInICsgKHNoYXJlUHdkID8gc2hhcmVQd2QgOiAiIikgKyAnIiBwbGFjZWhvbGRlcj0i5Li656m65YiZ6ZqP5py65Zub5L2NIiBzdHlsZT0icGFkZGluZzogNnB4OyB3aWR0aDogMTAwcHg7Ym9yZGVyOiAxcHggc29saWQgI2U5ZTllOTsiPjwvdGQ+PC90cj4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiI3NoYXJlIC5kaWFsb2ctYm9keSB0YWJsZSIpLmFwcGVuZChodG1sKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVmlzaWJpbGl0eUNoYW5nZU9yaWdpbihzdGF0dXMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyDnlJ/miJDmj5Dlj5bnoIEKICAgICAgICAgICAgICAgIG9iai5hc3luYygiZnVuY3Rpb24td2lkZ2V0LTE6c2hhcmUvdXRpbC9zaGFyZUZyaWVuZC9jcmVhdGVMaW5rU2hhcmUuanMiLCBmdW5jdGlvbiAoc2hhcmVMaW5rKSB7CiAgICAgICAgICAgICAgICAgICAgc2hhcmVMaW5rLnByb3RvdHlwZS5tYWtlUHJpdmF0ZVBhc3N3b3JkT3JpZ2luID0gc2hhcmVMaW5rLnByb3RvdHlwZS5tYWtlUHJpdmF0ZVBhc3N3b3JkOwogICAgICAgICAgICAgICAgICAgIHNoYXJlTGluay5wcm90b3R5cGUubWFrZVByaXZhdGVQYXNzd29yZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlUHdkID0gY29uZmlnLmdldENvbmZpZygic2hhcmVfcHdkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGFyZVB3ZCA/IHNoYXJlUHdkIDogdGhpcy5tYWtlUHJpdmF0ZVBhc3N3b3JkT3JpZ2luKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vIOaPkOWPlueggeabtOaUueS6i+S7tgogICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNoYW5nZSIsICIubmQtaW5wdXQtc2hhcmUtcHdkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmICF2YWx1ZS5tYXRjaCgvXlswLTlhLXpdezR9JC9pKSkgewogICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd1RpcEVycm9yKCLmj5Dlj5bnoIHlj6rog73mmK/lm5vkvY3mlbDlrZfmiJblrZfmr40iKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZygic2hhcmVfcHdkIiwgdmFsdWUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5sb2FkUGx1Z2luID0gZnVuY3Rpb24gKG5hbWUsIGdyb3VwKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgcGx1Z2luID0gb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOnBsdWdpbkh1Yi9kYXRhL1JlZ2lzdHJ5LmpzIikuZ2V0UGx1Z2luQnlOYW1lQW5kR3JvdXAobmFtZSwgZ3JvdXApOwogICAgICAgICAgICAgICAgb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOnBsdWdpbkh1Yi9pbnZva2VyL2xvYWRQbHVnaW5Bc3NldHMuanMiKShwbHVnaW4pOwogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsgfQogICAgICAgIH07CgogICAgICAgIG9iai5vbk1vZHVsZVJlYWR5ID0gZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBvYmoucmVxdWlyZShuYW1lKTsKICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLm9uTW9kdWxlUmVhZHkobmFtZSwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5yZW1vdmVWaWRlb0xpbWl0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG9iai5nZXRTeXN0ZW1Db250ZXh0KCkubWVzc2FnZTsKICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2FsbFN5c3RlbSgic2hhcmUtdmlkZW8tYWZ0ZXItdHJhbnNmZXIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJ3YWl0IHJlbW92ZVZpZGVvTGltaXQuLi4iKTsKICAgICAgICAgICAgICAgIG9iai5zZXRUaW1lb3V0KG9iai5yZW1vdmVWaWRlb0xpbWl0LCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnByZXR0eVNpbmdsZVNoYXJlUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCFvYmouaXNTaGFyZVBhZ2VNdWx0aSgpKSB7CiAgICAgICAgICAgICAgICAkKCIjbGF5b3V0TWFpbiIpLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogImF1dG8iLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiAiMTE4MHB4IiwKICAgICAgICAgICAgICAgICAgICAibWFyZ2luIjogIjg4cHggMzBweCIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dTaGFyZU9yaWdpbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgYXBpLnF1ZXJ5U2hhcmVPcmlnaW4oY29uc3RhbnQuc291cmNlLmJhaWR1LCBvYmouZ2V0U2hhcmVJZCgpLCBvYmouZ2V0U2hhcmVMaW5rKCksIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvZGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5saXN0ICYmIGRhdGEubGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogMTBweCA1cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjZmNmY2OyBsaW5lLWhlaWdodDogMzBweDsiPic7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZGF0YS5saXN0WzBdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5saXN0Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwPuWIhuS6q+adpea6kO+8mjxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSInICsgaXRlbS51cmwgKyAnIj4nICsgaXRlbS50aXRsZSArICc8L2E+IFs8YSBjbGFzcz0ic2hvdy1vcmlnaW4tZGlhbG9nIiBocmVmPSJqYXZhc2NyaXB0OjsiIHN0eWxlPSJjb2xvcjojZmYwMDAwOyI+IOafpeeci+abtOWkmiA8L2E+XTwvcD4nOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPHA+5YiG5Lqr5p2l5rqQ77yaPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9IicgKyBpdGVtLnVybCArICciPicgKyBpdGVtLnRpdGxlICsgJzwvYT48L3A+JzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwogICAgICAgICAgICAgICAgICAgICAgICAkKCIubW9kdWxlLXNoYXJlLWhlYWRlciIpLmFmdGVyKGh0bWwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5zaG93LW9yaWdpbi1kaWFsb2ciLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSAi5YiG5Lqr5p2l5rqQIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib2R5ID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHggMjBweDttaW4taGVpZ2h0OiAxMjBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87Ij4nOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxwPicgKyAoKytpbmRleCkgKyAn77yaPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9IicgKyBpdGVtLnVybCArICciPicgKyBpdGVtLnRpdGxlICsgJzwvYT48L3A+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm9vdGVyID0gb2JqLnJlbmRlckZvb3RlckFwcElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0RpYWxvZyh0aXRsZSwgYm9keSwgZm9vdGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBvYmouc2hvd1RpcEVycm9yKCLmmoLmnKrmn6Xor6LliLDliIbkuqvnmoTmnaXmupAiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0QnV0dG9uU2hhcmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICgkKCIueC1idXR0b24tYm94IikubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8YSBjbGFzcz0iZy1idXR0b24gbmQtYnV0dG9uLWJ1aWxkIj48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLWRpc2siIHRpdGxlPSLkuIvovb0iPjwvZW0+PHNwYW4gY2xhc3M9InRleHQiPueUn+aIkOmTvuaOpTwvc3Bhbj48L3NwYW4+PC9hPic7CiAgICAgICAgICAgICAgICAkKCIueC1idXR0b24tYm94IikuYXBwZW5kKGh0bWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oIndhaXQgaW5pdEJ1dHRvblNoYXJlLi4uIik7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG9iai5pbml0QnV0dG9uU2hhcmUsIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdEJ1dHRvbkhvbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBsaXN0VG9vbHMgPSBvYmouZ2V0U3lzdGVtQ29udGV4dCgpLkJyb2tlci5nZXRCdXR0b25Ccm9rZXIoImxpc3RUb29scyIpOwogICAgICAgICAgICBpZiAobGlzdFRvb2xzICYmIGxpc3RUb29scy4kYm94KSB7CiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8YSBjbGFzcz0iZy1idXR0b24gbmQtYnV0dG9uLWJ1aWxkIj48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLWRpc2siIHRpdGxlPSLkuIvovb0iPjwvZW0+PHNwYW4gY2xhc3M9InRleHQiPueUn+aIkOmTvuaOpTwvc3Bhbj48L3NwYW4+PC9hPic7CiAgICAgICAgICAgICAgICAkKGxpc3RUb29scy4kYm94KS5wcmVwZW5kKGh0bWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oIndhaXQgaW5pdEJ1dHRvbkhvbWUuLi4iKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQob2JqLmluaXRCdXR0b25Ib21lLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRCdXR0b25UaW1lTGluZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCQoIi5tb2R1bGUtb3BlcmF0ZUJ0biAuZ3JvdXAtYnV0dG9uIikubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8c3BhbiBjbGFzcz0iYnV0dG9uIj48YSBjbGFzcz0iZy12LWJ1dHRvbiBnLXYtYnV0dG9uLW1pZGRsZSBuZC1idXR0b24tYnVpbGQiPjxzcGFuIGNsYXNzPSJnLXYtYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kaXNrIj48L2VtPjxzcGFuIGNsYXNzPSJ0ZXh0Ij7nlJ/miJDpk77mjqU8L3NwYW4+PC9zcGFuPjwvYT48L3NwYW4+JzsKICAgICAgICAgICAgICAgICQoIi5tb2R1bGUtb3BlcmF0ZUJ0biAuZ3JvdXAtYnV0dG9uIikucHJlcGVuZChodG1sKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJ3YWl0IGluaXRCdXR0b25UaW1lTGluZS4uLiIpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChvYmouaW5pdEJ1dHRvblRpbWVMaW5lLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRCdXR0b25FdmVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g55Sf5oiQ6ZO+5o6lCiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIubmQtYnV0dG9uLWJ1aWxkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHl1bkRhdGEgPSBvYmouZ2V0WXVuRGF0YSgpOwogICAgICAgICAgICAgICAgaWYgKHl1bkRhdGEuTVlVSyB8fCBvYmouaXNIb21lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZVN0YXQgPSBvYmouZ2V0RmlsZUxpc3RTdGF0KGZpbGVMaXN0KTsKICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlTGlzdC5sZW5ndGggPiAxICYmIGZpbGVTdGF0LmZpbGVfbnVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkU2VsZWN0KGZpbGVMaXN0LCBmaWxlU3RhdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZmlsZVN0YXQuZmlsZV9udW0gPT0gMSAmJiAhb2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZFNpbmdsZShmaWxlTGlzdCwgZmlsZVN0YXQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhY2sgPSBmaWxlU3RhdC5maWxlX251bSA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmouaXNIb21lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9Ib21lKGZpbGVMaXN0LCBwYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvU2hhcmVPZmZpY2FsKGZpbGVMaXN0LCBwYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXBFcnJvcigi6K+36Iez5bCR6YCJ5oup5LiA5Liq5paH5Lu25oiW5paH5Lu25aS5Iik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dMb2dpbigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOWOi+e8qeWMhQogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLWJ1dHRvbi1wYWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgIGlmIChvYmouaXNIb21lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9Ib21lKGZpbGVMaXN0LCB0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvU2hhcmVPZmZpY2FsKGZpbGVMaXN0LCB0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDlpJrmlofku7YKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5uZC1idXR0b24tbXVsdGkiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBvYmouZ2V0U2VsZWN0ZWRGaWxlTGlzdCgpOwoKICAgICAgICAgICAgICAgIC8vIOi/h+a7pOaWh+S7tuWkuQogICAgICAgICAgICAgICAgZmlsZUxpc3QgPSBvYmouZmlsdGVyRmlsZUxpc3REaXIoZmlsZUxpc3QpOwoKICAgICAgICAgICAgICAgIGlmIChvYmouaXNIb21lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9Ib21lKGZpbGVMaXN0LCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb1NoYXJlT2ZmaWNhbChmaWxlTGlzdCwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOi9rOWtmOWkmuaWh+S7tgogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLWJ1dHRvbi1kaXNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QoKTsKCiAgICAgICAgICAgICAgICAvLyDov4fmu6Tmlofku7blpLkKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gb2JqLmZpbHRlckZpbGVMaXN0RGlyKGZpbGVMaXN0KTsKCiAgICAgICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvSG9tZShmaWxlTGlzdCwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9TaGFyZVRyYW5zZmVyKGZpbGVMaXN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDlupTnlKhJRAogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLWNoYW5nZS1hcHAtaWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBvYmouc2hvd0FwcElkQ2hhbmdlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2hhbmdlIiwgIi5uZC1pbnB1dC1hcHAtaWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBvYmouc2V0QXBwSWQodGhpcy52YWx1ZSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5omT5byA6YWN572u6aG1CiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIubmQtb3Blbi1wYWdlLW9wdGlvbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJ1bnRpbWUub3Blbk9wdGlvbnNQYWdlKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5omT5byA5Li05pe26aG16Z2iCiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIubmQtb3Blbi1wYWdlLXRlbXAiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByb3V0ZXIub3BlblRhYigiaHR0cHM6Ly9wYW4uYmFpZHUuY29tL2Rpc2svaG9tZSMvYWxsP3Ztb2RlPWxpc3QmcGF0aD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG9iai5nZXRUZW1wUGF0aCgpKSwgdHJ1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93TG9naW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5nZXRKcXVlcnkoKSgiW25vZGUtdHlwZT0naGVhZGVyLWxvZ2luLWJ0biddIikuY2xpY2soKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb1NoYXJlVHJhbnNmZXIgPSBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZmlsZUxpc3QpOwogICAgICAgICAgICBvYmouYXBwbHlUcmFuc2ZlckZpbGUoZmlsZUxpc3QsIG9iai5nZXRUZW1wUGF0aCgpLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5leHRyYSAmJiByZXNwb25zZS5leHRyYS5saXN0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RNYXAgPSB7fTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5leHRyYS5saXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdE1hcFtpdGVtLmZyb21fZnNfaWRdID0gaXRlbTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGRvd25MaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdE1hcC5oYXNPd25Qcm9wZXJ0eShpdGVtLmZzX2lkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5kbGluayA9IG9iai5idWlsZERvd25sb2FkVXJsKGxpc3RNYXBbaXRlbS5mc19pZF0udG8sIGl0ZW0uc2VydmVyX2ZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25MaXN0LnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua0ZpbGUoZG93bkxpc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb1NoYXJlT2ZmaWNhbCA9IGZ1bmN0aW9uIChmaWxlTGlzdCwgcGFjaykgewogICAgICAgICAgICBvYmouZ2V0RG93bmxvYWRTaGFyZShmaWxlTGlzdCwgcGFjaywgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBvYmouaGlkZVRpcCgpOwogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8ocmVzcG9uc2UpOwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5saXN0ICYmIHJlc3BvbnNlLmxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5paH5Lu2CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZExpbmtGaWxlKHJlc3BvbnNlLmxpc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UuZGxpbmspIHsKICAgICAgICAgICAgICAgICAgICAvLyDljovnvKnljIUKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua1BhY2soZmlsZUxpc3QsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGxpbms6IHJlc3BvbnNlLmRsaW5rCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyDlhbbku5YKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0RpYWxvZ1VuS25vd25SZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvSG9tZSA9IGZ1bmN0aW9uIChmaWxlTGlzdCwgcGFjaykgewogICAgICAgICAgICBsb2dnZXIuaW5mbyhmaWxlTGlzdCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBvYmouZ2V0RG93bmxvYWRIb21lKGZpbGVMaXN0LCBwYWNrLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBvYmouaGlkZVRpcCgpOwogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRsaW5rICYmIHR5cGVvZiByZXNwb25zZS5kbGluayA9PSAic3RyaW5nIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y6L57yp5YyFCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua1BhY2soZmlsZUxpc3QsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbGluazogcmVzcG9uc2UuZGxpbmsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YW25LuWCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0RpYWxvZ1VuS25vd25SZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kbGluayBpbnN0YW5jZW9mIEFycmF5ICYmIHJlc3BvbnNlLmRsaW5rLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRsaW5rTWFwcGluZyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGxpbmsuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRsaW5rTWFwcGluZ1tpdGVtLmZzX2lkXSA9IGl0ZW0uZGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmRsaW5rID0gZGxpbmtNYXBwaW5nW2l0ZW0uZnNfaWRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZGxpbmtBcGkgPSBvYmouYnVpbGREb3dubG9hZFVybChpdGVtLnBhdGgsIGl0ZW0uc2VydmVyX2ZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZGxpbmsgPSBvYmouYnVpbGREb3dubG9hZFVybChpdGVtLnBhdGgsIGl0ZW0uc2VydmVyX2ZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRMaW5rRmlsZShmaWxlTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIGl0ZW0uZGxpbmsgPSBvYmouYnVpbGREb3dubG9hZFVybChpdGVtLnBhdGgsIGl0ZW0uc2VydmVyX2ZpbGVuYW1lKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZExpbmtGaWxlKGZpbGVMaXN0KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWRMaW5rRmlsZSA9IGZ1bmN0aW9uIChmaWxlTGlzdCkgewogICAgICAgICAgICB2YXIgdGl0bGUgPSAi5paH5Lu25LiL6L29IjsKICAgICAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogMjBweCAyMHB4O21pbi1oZWlnaHQ6IDEyMHB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsgIj4nOwoKICAgICAgICAgICAgdmFyIHJvd1N0eWxlID0gImRpc3BsYXk6YmxvY2s7IG92ZXJmbG93OmhpZGRlbjsgd2hpdGUtc3BhY2U6bm93cmFwOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOyI7CiAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyI+JzsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxkaXY+JyArIChpbmRleCArIDEpICsgJ++8micgKyBpdGVtLnNlcnZlcl9maWxlbmFtZSArICc8L2Rpdj4nOwogICAgICAgICAgICAgICAgaWYgKGl0ZW0uZGxpbmtBcGkpIHsKICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8ZGl2PjxhIGhyZWY9IicgKyBpdGVtLmRsaW5rICsgJyZmaWxlbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGl0ZW0uc2VydmVyX2ZpbGVuYW1lKSArICciIHRpdGxlPSInICsgaXRlbS5kbGluayArICciIHN0eWxlPSInICsgcm93U3R5bGUgKyAnIj7lrpjmlrnvvJonICsgaXRlbS5kbGluayArICc8L2E+PC9kaXY+JzsKICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8ZGl2PjxhIGhyZWY9IicgKyBpdGVtLmRsaW5rQXBpICsgJyZmaWxlbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGl0ZW0uc2VydmVyX2ZpbGVuYW1lKSArICciIHRpdGxlPSInICsgaXRlbS5kbGlua0FwaSArICciIHN0eWxlPSInICsgcm93U3R5bGUgKyAnIj7nm7Tpk77vvJonICsgaXRlbS5kbGlua0FwaSArICc8L2E+PC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxkaXY+PGEgaHJlZj0iJyArIGl0ZW0uZGxpbmsgKyAnJmZpbGVuYW1lPScgKyBlbmNvZGVVUklDb21wb25lbnQoaXRlbS5zZXJ2ZXJfZmlsZW5hbWUpICsgJyIgdGl0bGU9IicgKyBpdGVtLmRsaW5rICsgJyIgc3R5bGU9IicgKyByb3dTdHlsZSArICciPicgKyBpdGVtLmRsaW5rICsgJzwvYT48L2Rpdj4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYm9keSArPSAnPC9kaXY+JzsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwogICAgICAgICAgICB2YXIgZm9vdGVyID0gb2JqLnJlbmRlckZvb3RlckFwcElkKCk7CiAgICAgICAgICAgIG9iai5zaG93RGlhbG9nKHRpdGxlLCBib2R5LCBmb290ZXIpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWRMaW5rUGFjayA9IGZ1bmN0aW9uIChmaWxlTGlzdCwgZGF0YSkgewogICAgICAgICAgICB2YXIgdGl0bGUgPSAi5paH5Lu25LiL6L29IjsKICAgICAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogMjBweCAyMHB4O21pbi1oZWlnaHQ6IDEyMHB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsgIj4nOwoKICAgICAgICAgICAgdmFyIHBhY2tOYW1lID0gb2JqLmdldERvd25sb2FkUGFja05hbWUoZmlsZUxpc3QpOwogICAgICAgICAgICBib2R5ICs9ICc8ZGl2PicgKyBwYWNrTmFtZSArICc8L2Rpdj48ZGl2PjxhIGhyZWY9IicgKyBkYXRhLmRsaW5rICsgJyZ6aXBuYW1lPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFja05hbWUpICsgJyIgdGl0bGU9IicgKyBkYXRhLmRsaW5rICsgJyIgc3R5bGU9ImRpc3BsYXk6YmxvY2s7IG92ZXJmbG93OmhpZGRlbjsgd2hpdGUtc3BhY2U6bm93cmFwOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOyI+JyArIGRhdGEuZGxpbmsgKyAnPC9hPjwvZGl2Pic7CgogICAgICAgICAgICBib2R5ICs9ICc8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiAxNXB4OyI+5omT5YyF55qE5paH5Lu2L+aWh+S7tuWkueWIl+ihqDwvZGl2Pic7CiAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8ZGl2IHRpdGxlPSInICsgaXRlbS5wYXRoICsgJyIgc3R5bGU9ImNvbG9yOiAnICsgKGl0ZW0uaXNkaXIgPyAiYmx1ZSIgOiAiaW5oZXJpdCIpICsgJzsiPlsnICsgKGluZGV4ICsgMSkgKyAnXSAnICsgaXRlbS5zZXJ2ZXJfZmlsZW5hbWUgKyAnPC9kaXY+JzsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwogICAgICAgICAgICB2YXIgZm9vdGVyID0gb2JqLnJlbmRlckZvb3RlckFwcElkKCk7CiAgICAgICAgICAgIG9iai5zaG93RGlhbG9nKHRpdGxlLCBib2R5LCBmb290ZXIpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXREb3dubG9hZFBhY2tOYW1lID0gZnVuY3Rpb24gKGZpbGVMaXN0KSB7CiAgICAgICAgICAgIHJldHVybiBmaWxlTGlzdFswXS5zZXJ2ZXJfZmlsZW5hbWUgKyAiIOetiSIgKyBmaWxlTGlzdC5sZW5ndGggKyAi5Liq5paH5Lu2LnppcCI7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmJ1aWxkRG93bmxvYWRVcmwgPSBmdW5jdGlvbiAocGF0aCwgbmFtZSkgewogICAgICAgICAgICByZXR1cm4gImh0dHBzOi8vcGNzLmJhaWR1LmNvbS9yZXN0LzIuMC9wY3MvZmlsZT9tZXRob2Q9ZG93bmxvYWQmYXBwX2lkPSIgKyBvYmouZ2V0QXBwSWQoKSArICImZmlsZW5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICImcGF0aD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhdGgpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWRTaW5nbGUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIGZpbGVTdGF0KSB7CiAgICAgICAgICAgIHZhciB0aXRsZSA9ICLpk77mjqXnsbvlnosiOwogICAgICAgICAgICB2YXIgYm9keSA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOiA0MHB4IDIwcHg7IG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyI+JzsKCiAgICAgICAgICAgIGJvZHkgKz0gJzxkaXYgY2xhc3M9Im5vcm1hbEJ0bkJveCBnLWNlbnRlciI+JzsKICAgICAgICAgICAgYm9keSArPSAnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWxhcmdlIGctYnV0dG9uLWdyYXktbGFyZ2UgbmQtYnV0dG9uLW11bHRpIiB0aXRsZT0i6LCD55So5a6Y5pa55o6l5Y+j55Sf5oiQ6ZO+5o6lIj48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLWRvd25sb2FkIj48L2VtPiDlrpjmlrnpk77mjqU8L3NwYW4+PC9hPic7CiAgICAgICAgICAgIGJvZHkgKz0gJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1sYXJnZSBnLWJ1dHRvbi1ncmF5LWxhcmdlIG5kLWJ1dHRvbi1kaXNrIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NTBweDsiIHRpdGxlPSLovazlrZjmlofku7bnhLblkI7nlJ/miJDmlofku7bnm7Tpk74iPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tc2F2ZS1kaXNrIj48L2VtPiDovazlrZjnm7Tpk748L3NwYW4+PC9hPic7CiAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CgogICAgICAgICAgICBpZiAoZmlsZVN0YXQuZGlyX251bSkgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNDBweDsgcGFkZGluZy10b3A6IDEwcHg7IG1hcmdpbi1ib3R0b206IC0yMHB4OyBib3JkZXItdG9wOiAxcHggc29saWQgI0QwREZFNzsiPjxwIGNsYXNzPSJnLWNlbnRlciI+6YCJ5oupIFvlpJrmlofku7ZdIOS8mui/h+a7pOW9k+WJjemAieS4reeahCA8c3BhbiBzdHlsZT0iY29sb3I6IHJlZCI+JyArIGZpbGVTdGF0LmRpcl9udW0gKyAnPC9zcGFuPiDkuKrmlofku7blpLk8L3A+JzsKCiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAxOwogICAgICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzZGlyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxwIHRpdGxlPSInICsgaXRlbS5wYXRoICsgJyIgc3R5bGU9ImNvbG9yOiBibHVlOyI+WycgKyBpbmRleCArICddICcgKyBpdGVtLnNlcnZlcl9maWxlbmFtZSArICc8L3A+JzsKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIHZhciBmb290ZXIgPSBvYmoucmVuZGVyRm9vdGVyQXBwSWQoKTsKICAgICAgICAgICAgb2JqLnNob3dEaWFsb2codGl0bGUsIGJvZHksIGZvb3Rlcik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dEb3dubG9hZFNlbGVjdCA9IGZ1bmN0aW9uIChmaWxlTGlzdCwgZmlsZVN0YXQpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIumTvuaOpeexu+WeiyI7CiAgICAgICAgICAgIHZhciBib2R5ID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDQwcHggMjBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87Ij4nOwoKICAgICAgICAgICAgYm9keSArPSAnPGRpdiBjbGFzcz0ibm9ybWFsQnRuQm94IGctY2VudGVyIj4nOwogICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWxhcmdlIGctYnV0dG9uLWdyYXktbGFyZ2UgbmQtYnV0dG9uLWRpc2siIHRpdGxlPSLlkIjlubblrpjmlrnpk77mjqXlkozmlofku7bnm7Tpk74iPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tc2F2ZS1kaXNrIj48L2VtPiDlpJrmlofku7Y8L3NwYW4+PC9hPic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8YSBjbGFzcz0iZy1idXR0b24gZy1idXR0b24tbGFyZ2UgZy1idXR0b24tZ3JheS1sYXJnZSBuZC1idXR0b24tbXVsdGkiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCIgdGl0bGU9Iuiwg+eUqOWumOaWueaOpeWPo+eUn+aIkOaWh+S7tumTvuaOpSI+PGVtIGNsYXNzPSJpY29uIGljb24tZG93bmxvYWQiPjwvZW0+IOWumOaWueWkmuaWh+S7tjwvc3Bhbj48L2E+JzsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1sYXJnZSBnLWJ1dHRvbi1ncmF5LWxhcmdlIG5kLWJ1dHRvbi1kaXNrIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NTBweDsiIHRpdGxlPSLovazlrZjmlofku7bnhLblkI7nlJ/miJDmlofku7bnm7Tpk74iPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tc2F2ZS1kaXNrIj48L2VtPiDovazlrZjlpJrmlofku7Y8L3NwYW4+PC9hPic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keSArPSAnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWxhcmdlIGctYnV0dG9uLWdyYXktbGFyZ2UgbmQtYnV0dG9uLXBhY2siIHN0eWxlPSJtYXJnaW4tbGVmdDo1MHB4OyIgdGl0bGU9Iuiwg+eUqOWumOaWueaOpeWPo+eUn+aIkOWOi+e8qeWMhemTvuaOpSI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1wb2x5Ij48L2VtPiDljovnvKnljIU8L3NwYW4+PC9hPic7CiAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CgogICAgICAgICAgICBpZiAoZmlsZVN0YXQuZGlyX251bSkgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNDBweDsgcGFkZGluZy10b3A6IDEwcHg7IG1hcmdpbi1ib3R0b206IC0yMHB4OyBib3JkZXItdG9wOiAxcHggc29saWQgI0QwREZFNzsiPjxwIGNsYXNzPSJnLWNlbnRlciI+6YCJ5oupIFvlpJrmlofku7ZdIOS8mui/h+a7pOW9k+WJjemAieS4reeahCA8c3BhbiBzdHlsZT0iY29sb3I6IHJlZCI+JyArIGZpbGVTdGF0LmRpcl9udW0gKyAnPC9zcGFuPiDkuKrmlofku7blpLk8L3A+JzsKICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDE7CiAgICAgICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNkaXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYm9keSArPSAnPHAgdGl0bGU9IicgKyBpdGVtLnBhdGggKyAnIiBzdHlsZT0iY29sb3I6IGJsdWU7Ij5bJyArIGluZGV4ICsgJ10gJyArIGl0ZW0uc2VydmVyX2ZpbGVuYW1lICsgJzwvcD4nOwogICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYm9keSArPSAnPC9kaXY+JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYm9keSArPSAnPC9kaXY+JzsKICAgICAgICAgICAgdmFyIGZvb3RlciA9IG9iai5yZW5kZXJGb290ZXJBcHBJZCgpOwogICAgICAgICAgICBvYmouc2hvd0RpYWxvZyh0aXRsZSwgYm9keSwgZm9vdGVyKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0FwcElkQ2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdGl0bGUgPSAi5bqU55SoSUQiOwogICAgICAgICAgICB2YXIgYm9keSA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOiA2MHB4IDIwcHg7IG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyI+PGRpdiBjbGFzcz0iZy1jZW50ZXIiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyI+5b2T5YmN5bqU55SoSUTvvJo8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9Im5kLWlucHV0LWFwcC1pZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmMmYyZjI7IHBhZGRpbmc6IDRweCA1cHg7IiB2YWx1ZT0iJyArIG9iai5nZXRBcHBJZCgpICsgJyI+PC9kaXY+PGRpdiBjbGFzcz0iZy1jZW50ZXIiPjxwPueUqOS6juaehOmAoOS4quS6uue9keebmOaWh+S7tueahOS4i+i9veebtOmTvu+8jOabtOWkmuW6lOeUqElE6K+35p+l55yLPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly9nby5uZXdkYXkubWUvcy9wYW4tc2NyaXB0Ij4g6ISa5pys5Li76aG1IDwvYT48L3A+PC9kaXY+PC9kaXY+JzsKICAgICAgICAgICAgdmFyIGZvb3RlciA9ICcnOwogICAgICAgICAgICBvYmouc2hvd0RpYWxvZyh0aXRsZSwgYm9keSwgZm9vdGVyKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0RpYWxvZ1VuS25vd25SZXNwb25zZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICB2YXIgdGl0bGUgPSAi5pyq55+l57uT5p6cIjsKICAgICAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogMjBweCAyMHB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsiPjxwcmUgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmUtd3JhcDsgd29yZC13cmFwOiBicmVhay13b3JkOyB3b3JkLWJyZWFrOiBicmVhay1hbGw7Ij4nICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UsIG51bGwsIDQpICsgJzwvcHJlPjwvZGl2Pic7CiAgICAgICAgICAgIHZhciBmb290ZXIgPSBvYmoucmVuZGVyRm9vdGVyQXBwSWQoKTsKICAgICAgICAgICAgb2JqLnNob3dEaWFsb2codGl0bGUsIGJvZHksIGZvb3Rlcik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlbmRlckZvb3RlckFwcElkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gJzxwIHN0eWxlPSJwYWRkaW5nLXRvcDogMTBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEMERGRTc7Ij7lupTnlKhJRO+8micgKyBvYmouZ2V0QXBwSWQoKSArICcgPGEgaHJlZj0iamF2YXNjcmlwdDo7IiBjbGFzcz0ibmQtY2hhbmdlLWFwcC1pZCI+5L+u5pS5PC9hPu+8jOWFtuS7lumhtemdou+8miA8YSBjbGFzcz0ibmQtb3Blbi1wYWdlLW9wdGlvbiIgaHJlZj0iamF2YXNjcmlwdDo7Ij7phY3nva7pobXpnaI8L2E+IOOAgTxhIGNsYXNzPSJuZC1vcGVuLXBhZ2UtdGVtcCIgaHJlZj0iamF2YXNjcmlwdDo7Ij7kuLTml7bmlofku7Y8L2E+PC9wPic7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dEaWFsb2cgPSBmdW5jdGlvbiAodGl0bGUsIGJvZHksIGZvb3RlcikgewogICAgICAgICAgICB2YXIgZGlhbG9nID0gb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOnN5c3RlbS91aVNlcnZpY2UvZGlhbG9nL2RpYWxvZy5qcyIpLnZlcmlmeSh7CiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgICBpbWc6ICJpbWciLAogICAgICAgICAgICAgICAgdmNvZGU6ICJ2Y29kZSIKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDlhoXlrrkKICAgICAgICAgICAgJChkaWFsb2cuJGRpYWxvZykuZmluZCgiLmRpYWxvZy1ib2R5Iikuc2FmZUh0bWwoYm9keSk7CgogICAgICAgICAgICAvLyDlupXpg6gKICAgICAgICAgICAgJChkaWFsb2cuJGRpYWxvZykuZmluZCgiLmRpYWxvZy1mb290ZXIiKS5zYWZlSHRtbChmb290ZXIpOwoKICAgICAgICAgICAgZGlhbG9nLnNob3coKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd1RpcFN1Y2Nlc3MgPSBmdW5jdGlvbiAobXNnLCBoYXNDbG9zZSwgYXV0b0Nsb3NlKSB7CiAgICAgICAgICAgIG9iai5zaG93VGlwKCJzdWNjZXNzIiwgbXNnLCBoYXNDbG9zZSwgYXV0b0Nsb3NlKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd1RpcEVycm9yID0gZnVuY3Rpb24gKG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSkgewogICAgICAgICAgICBvYmouc2hvd1RpcCgiZmFpbHVyZSIsIG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXBMb2FkaW5nID0gZnVuY3Rpb24gKG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSkgewogICAgICAgICAgICBvYmouc2hvd1RpcCgibG9hZGluZyIsIG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXAgPSBmdW5jdGlvbiAobW9kZSwgbXNnLCBoYXNDbG9zZSwgYXV0b0Nsb3NlKSB7CiAgICAgICAgICAgIHZhciBvcHRpb24gPSB7CiAgICAgICAgICAgICAgICBtb2RlOiBtb2RlLAogICAgICAgICAgICAgICAgbXNnOiBtc2cKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIOWFs+mXreaMiemSrgogICAgICAgICAgICBpZiAodHlwZW9mIGhhc0Nsb3NlICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uaGFzQ2xvc2UgPSBoYXNDbG9zZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g6Ieq5Yqo5YWz6ZetCiAgICAgICAgICAgIGlmICh0eXBlb2YgYXV0b0Nsb3NlICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uYXV0b0Nsb3NlID0gYXV0b0Nsb3NlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBvYmoucmVxdWlyZSgic3lzdGVtLWNvcmU6c3lzdGVtL3VpU2VydmljZS90aXAvdGlwLmpzIikuc2hvdyhvcHRpb24pOwogICAgICAgIH07CgogICAgICAgIG9iai5oaWRlVGlwID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmoucmVxdWlyZSgic3lzdGVtLWNvcmU6c3lzdGVtL3VpU2VydmljZS90aXAvdGlwLmpzIikuaGlkZSh7CiAgICAgICAgICAgICAgICBoaWRlVGlwc0FuaW1hdGlvbkZsYWc6IDEKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmlzSG9tZVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiLmJhaWR1LmNvbS9kaXNrIikgPiAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pc1RpbWVsaW5lUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHVybCA9IHJvdXRlci5nZXRVcmwoKTsKICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCIuYmFpZHUuY29tL2Rpc2svdGltZWxpbmUiKSA+IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmlzU2hhcmVQYWdlTXVsdGkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB5dW5EYXRhID0gb2JqLmdldFl1bkRhdGEoKTsKICAgICAgICAgICAgaWYgKHl1bkRhdGEuU0hBUkVQQUdFVFlQRSA9PSAic2luZ2xlX2ZpbGVfcGFnZSIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChvYmouaXNIb21lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmdldFNlbGVjdGVkRmlsZUxpc3RIb21lKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmdldFNlbGVjdGVkRmlsZUxpc3RTaGFyZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNlbGVjdGVkRmlsZUxpc3RIb21lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAob2JqLmlzVGltZWxpbmVQYWdlKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmoucmVxdWlyZSgicGFuLXRpbWVsaW5lOndpZGdldC9zdG9yZS9pbmRleC5qcyIpLmdldHRlcnMuZ2V0Q2hvb3NlZEl0ZW1BcnI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnJlcXVpcmUoJ3N5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcycpLmluc3RhbmNlRm9yU3lzdGVtLmxpc3QuZ2V0U2VsZWN0ZWQoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0U2hhcmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoucmVxdWlyZSgnc3lzdGVtLWNvcmU6Y29udGV4dC9jb250ZXh0LmpzJykuaW5zdGFuY2VGb3JTeXN0ZW0ubGlzdC5nZXRTZWxlY3RlZCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRGaWxlTGlzdFN0YXQgPSBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgICAgICAgdmFyIGZpbGVTdGF0ID0gewogICAgICAgICAgICAgICAgZmlsZV9udW06IDAsCiAgICAgICAgICAgICAgICBkaXJfbnVtOiAwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzZGlyID09IDApIHsKICAgICAgICAgICAgICAgICAgICBmaWxlU3RhdC5maWxlX251bSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZVN0YXQuZGlyX251bSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpbGVTdGF0OwogICAgICAgIH07CgogICAgICAgIG9iai5maWx0ZXJGaWxlTGlzdERpciA9IGZ1bmN0aW9uIChmaWxlTGlzdCkgewogICAgICAgICAgICB2YXIgZmlsZUxpc3RGaWx0ZXIgPSBbXTsKICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNkaXIgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0RmlsdGVyLnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmlsZUxpc3RGaWx0ZXI7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnBhcnNlRmlkTGlzdCA9IGZ1bmN0aW9uIChmaWxlTGlzdCkgewogICAgICAgICAgICB2YXIgZmlkTGlzdCA9IFtdOwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBmaWRMaXN0LnB1c2goaXRlbS5mc19pZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmlkTGlzdDsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RG93bmxvYWRTaGFyZSA9IGZ1bmN0aW9uIChmaWxlTGlzdCwgcGFjaywgY2FsbGJhY2spIHsKICAgICAgICAgICAgb2JqLnNob3dUaXBMb2FkaW5nKCLnlJ/miJDpk77mjqXkuK3vvIzor7fnqI3nrYkuLi4iKTsKCiAgICAgICAgICAgIG9iai5sb2FkUGx1Z2luKCLnvZHnm5jkuIvovb0iLCAiY29tLmJhaWR1LnBhbiIpOwoKICAgICAgICAgICAgb2JqLm9uTW9kdWxlUmVhZHkoImZ1bmN0aW9uLXdpZGdldC0xOmRvd25sb2FkL3V0aWwvY29udGV4dC5qcyIsIGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgICBvYmouaW5pdFdpZGdldENvbnRleHQoImZ1bmN0aW9uLXdpZGdldC0xOmRvd25sb2FkL3V0aWwvY29udGV4dC5qcyIpOwoKICAgICAgICAgICAgICAgIG9iai5hc3luYygiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvc2VydmljZS9kbGlua1NlcnZpY2UuanMiLCBmdW5jdGlvbiAoZGwpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgeXVuRGF0YSA9IG9iai5nZXRZdW5EYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IGZpbGVMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICBzaGFyZV91azogeXVuRGF0YS5TSEFSRV9VSywKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVfaWQ6IHl1bkRhdGEuU0hBUkVfSUQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ246IHl1bkRhdGEuU0lHTiwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB5dW5EYXRhLlRJTUVTVEFNUCwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFjayA/ICJiYXRjaCIgOiAibm9saW1pdCIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRsLmdldERsaW5rU2hhcmUoZGF0YSwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXREb3dubG9hZEhvbWUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2ssIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIG9iai5zaG93VGlwTG9hZGluZygi55Sf5oiQ6ZO+5o6l5Lit77yM6K+356iN562JLi4uIik7CgogICAgICAgICAgICBvYmoubG9hZFBsdWdpbigi572R55uY5LiL6L29IiwgImNvbS5iYWlkdS5wYW4iKTsKCiAgICAgICAgICAgIG9iai5vbk1vZHVsZVJlYWR5KCJmdW5jdGlvbi13aWRnZXQtMTpkb3dubG9hZC91dGlsL2NvbnRleHQuanMiLCBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgb2JqLmluaXRXaWRnZXRDb250ZXh0KCJmdW5jdGlvbi13aWRnZXQtMTpkb3dubG9hZC91dGlsL2NvbnRleHQuanMiKTsKCiAgICAgICAgICAgICAgICBvYmouYXN5bmMoImZ1bmN0aW9uLXdpZGdldC0xOmRvd25sb2FkL3NlcnZpY2UvZGxpbmtTZXJ2aWNlLmpzIiwgZnVuY3Rpb24gKGRsKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpZExpc3QgPSBvYmoucGFyc2VGaWRMaXN0KGZpbGVMaXN0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IHBhY2sgPyAiYmF0Y2giIDogIm5vbGltaXQiOwogICAgICAgICAgICAgICAgICAgIGRsLmdldERsaW5rUGFuKEpTT04uc3RyaW5naWZ5KGZpZExpc3QpLCB0eXBlLCBjYWxsYmFjayk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmFwcGx5VHJhbnNmZXJGaWxlID0gZnVuY3Rpb24gKGZpbGVMaXN0LCBwYXRoLCBjYWxsYmFjaykgewogICAgICAgICAgICBvYmoubGlzdERpcihwYXRoLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5lcnJubyA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnRyYW5zZmVyRmlsZShmaWxlTGlzdCwgcGF0aCwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBvYmouY3JlYXRlRGlyKHBhdGgsIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJybm8gPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRyYW5zZmVyRmlsZShmaWxlTGlzdCwgcmVzcG9uc2UucGF0aCwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soIiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai50cmFuc2ZlckZpbGUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhdGgsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciB5dW5EYXRhID0gb2JqLmdldFl1bkRhdGEoKTsKICAgICAgICAgICAgdmFyIGZpZExpc3QgPSBvYmoucGFyc2VGaWRMaXN0KGZpbGVMaXN0KTsKICAgICAgICAgICAgdmFyIHVybCA9ICIvc2hhcmUvdHJhbnNmZXI/b25kdXA9bmV3Y29weSZhc3luYz0xJnNoYXJlaWQ9IiArIHl1bkRhdGEuU0hBUkVfSUQgKyAiJmZyb209IiArIHl1bkRhdGEuU0hBUkVfVUs7CiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgZnNpZGxpc3Q6ICJbIiArIGZpZExpc3Quam9pbigiLCIpICsgIl0iLAogICAgICAgICAgICAgICAgcGF0aDogcGF0aAogICAgICAgICAgICB9OwogICAgICAgICAgICBvYmouYWpheCh7CiAgICAgICAgICAgICAgICB0eXBlOiAicG9zdCIsCiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgICAgICAgdGltZW91dDogMWU1LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoubGlzdERpciA9IGZ1bmN0aW9uIChwYXRoLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgdXJsID0gIi9hcGkvbGlzdCI7CiAgICAgICAgICAgIG9iai5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJnZXQiLAogICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgb3JkZXI6ICJuYW1lIiwKICAgICAgICAgICAgICAgICAgICBkZXNjOiAwLAogICAgICAgICAgICAgICAgICAgIHNob3dlbXB0eTogMCwKICAgICAgICAgICAgICAgICAgICB3ZWI6IDEsCiAgICAgICAgICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgICAgICAgICBudW06IDEwLAogICAgICAgICAgICAgICAgICAgIGRpcjogcGF0aAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiAxZTUsCiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCIiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5jcmVhdGVEaXIgPSBmdW5jdGlvbiAocGF0aCwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHVybCA9ICIvYXBpL2NyZWF0ZT9hPWNvbW1pdCI7CiAgICAgICAgICAgIG9iai5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJwb3N0IiwKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgsCiAgICAgICAgICAgICAgICAgICAgaXNkaXI6IDEsCiAgICAgICAgICAgICAgICAgICAgYmxvY2tfbGlzdDogIltdIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiAxZTUsCiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCIiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbWF0Y2g7CgogICAgICAgICAgICBtYXRjaCA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL3NoYXJlXC9pbml0XD9zdXJsPShbYS16MC05LV9dKykvaSk7CiAgICAgICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoWzFdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtYXRjaCA9IGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9cL3NcLzEoW2EtejAtOS1fXSspL2kpOwogICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaFsxXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlTGluayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5nZXRVcmwoKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0WXVuRGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCFvYmoueXVuX2RhdGEpIHsKICAgICAgICAgICAgICAgIG9iai55dW5fZGF0YSA9IHVuc2FmZVdpbmRvdy55dW5EYXRhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBvYmoueXVuX2RhdGE7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFRlbXBQYXRoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdGVtcFBhdGggPSBjb25maWcuZ2V0Q29uZmlnKCJ0ZW1wX3BhdGgiKTsKICAgICAgICAgICAgaWYgKHRlbXBQYXRoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFBhdGg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnRlbXBfcGF0aDsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5zZXRUZW1wUGF0aCA9IGZ1bmN0aW9uICh0ZW1wUGF0aCkgewogICAgICAgICAgICBjb25maWcuc2V0Q29uZmlnKCJ0ZW1wX3BhdGgiLCB0ZW1wUGF0aCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEFwcElkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYXBwSWQgPSBjb25maWcuZ2V0Q29uZmlnKCJhcHBfaWQiKTsKICAgICAgICAgICAgaWYgKGFwcElkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBwSWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmFwcF9pZDsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5zZXRBcHBJZCA9IGZ1bmN0aW9uIChhcHBJZCkgewogICAgICAgICAgICBjb25maWcuc2V0Q29uZmlnKCJhcHBfaWQiLCBhcHBJZCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRXaWRnZXRDb250ZXh0ID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIG9iai5hc3luYyhuYW1lLCBmdW5jdGlvbiAod2lkZ2V0KSB7CiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0LnNldENvbnRleHQob2JqLmdldFN5c3RlbUNvbnRleHQoKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZXJyKSB7IH0KICAgICAgICB9OwoKICAgICAgICBvYmouYWpheCA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICAgICAgb2JqLmdldEpxdWVyeSgpLmFqYXgob3B0aW9uKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U3lzdGVtQ29udGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5yZXF1aXJlKCJzeXN0ZW0tY29yZTpjb250ZXh0L2NvbnRleHQuanMiKS5pbnN0YW5jZUZvclN5c3RlbTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0SnF1ZXJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLnJlcXVpcmUoImJhc2U6d2lkZ2V0L2xpYnMvanF1ZXJ5cGFja2V0LmpzIik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlcXVpcmUgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gdW5zYWZlV2luZG93LnJlcXVpcmUobmFtZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmFzeW5jID0gZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5yZXF1aXJlLmFzeW5jKG5hbWUsIGNhbGxiYWNrKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX3dlaXl1biIsIFsibWFuaWZlc3QiLCAicm91dGVyIiwgIm9wdGlvbiIsICJsb2dnZXIiLCAidW5zYWZlV2luZG93IiwgImNvbnN0YW50IiwgInNldHRpbmciLCAic2hhcmVMb2ciLCAiJCJdLCBmdW5jdGlvbiAobWFuaWZlc3QsIHJvdXRlciwgb3B0aW9uLCBsb2dnZXIsIHVuc2FmZVdpbmRvdywgY29uc3RhbnQsIHNldHRpbmcsIHNoYXJlTG9nLCAkKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgbW9kdWxlczoge30sCiAgICAgICAgICAgIHdlYnBhY2tfcmVxdWlyZTogbnVsbCwKICAgICAgICAgICAgdmVyaWZ5X3BhZ2U6IHsKICAgICAgICAgICAgICAgIHNldFB3ZDogbnVsbCwKICAgICAgICAgICAgICAgIHNoYXJlX3B3ZDogbnVsbCwKICAgICAgICAgICAgICAgIHN1Ym1pdF9wd2Q6IG51bGwKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrIikgPiAwKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9wYWdlX2hvbWUpICYmIG9iai5pbml0SG9tZVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHVybC5pbmRleE9mKCJzaGFyZS53ZWl5dW4uY29tIikgPiAwKSB7CiAgICAgICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRIb21lUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLmluaXRXZWJwYWNrUmVxdWlyZSgpOwoKICAgICAgICAgICAgc2V0SW50ZXJ2YWwob2JqLmluaXRIb21lUGFnZUVsZW1lbnQsIDEwMDApOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0SG9tZVBhZ2VFbGVtZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz0iYWN0aW9uLWl0ZW0gbW9kLWFjdGlvbi13cmFwLWxpbmsiPjxkaXYgY2xhc3M9ImFjdGlvbi1pdGVtLWNvbiI+PGkgY2xhc3M9Imljb24gaWNvbi1saW5rIj48L2k+PHNwYW4gY2xhc3M9ImFjdC10eHQiPuaYvuekuumTvuaOpTwvc3Bhbj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICAkKCIubW9kLWFjdGlvbi13cmFwLW1lbnU6bm90KC5uZC1zaG93LWxpbmstYWxyZWFkeSkiKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgiLmljb24tZG93bmxvYWQiKSkgewogICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCJuZC1zaG93LWxpbmstYWxyZWFkeSIpOwoKICAgICAgICAgICAgICAgICAgICAkdGhpcy5wcmVwZW5kKHRlbXBsYXRlKTsKICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCIubW9kLWFjdGlvbi13cmFwLWxpbmsiKS5jbGljayhmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0hvbWVEb3dubG9hZCgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5pbml0V2VicGFja1JlcXVpcmUoKTsKCiAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9wYWdlX3ZlcmlmeSkpIHsKICAgICAgICAgICAgICAgIG9iai5yZWdpc3RlclN0b3JlU2hhcmVQd2QoKTsKCiAgICAgICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmouYXV0b1BhZGRpbmdTaGFyZVB3ZCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9wYWdlX3NoYXJlKSAmJiB1bnNhZmVXaW5kb3cuc3luY0RhdGEuc2hhcmVJbmZvLm5vdGVfbGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgb2JqLmluaXRTaGFyZVBhZ2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0U2hhcmVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoJCgiLm1vZC1hY3Rpb24td3JhcC1saW5rIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9Im1vZC1hY3Rpb24td3JhcCBtb2QtYWN0aW9uLXdyYXAtbWVudSBtb2QtYWN0aW9uLXdyYXAtbGluayBjbGVhcmZpeCI+PGRpdiBjbGFzcz0iYWN0aW9uLWl0ZW0iPjxkaXYgY2xhc3M9ImFjdGlvbi1pdGVtLWNvbiI+PGkgY2xhc3M9Imljb24gaWNvbi1saW5rIj48L2k+PHNwYW4gY2xhc3M9ImFjdC10eHQiPuaYvuekuumTvuaOpTwvc3Bhbj48L2Rpdj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICAgICAgJCgiLm1vZC1hY3Rpb24td3JhcC1jb2RlIikuYWZ0ZXIoaHRtbCk7CgogICAgICAgICAgICAgICAgJCgiLm1vZC1hY3Rpb24td3JhcC1saW5rIikuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIG9iai5zaG93U2hhcmVEb3dubG9hZCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2V0VGltZW91dChvYmouaW5pdFNoYXJlUGFnZSwgNTAwKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgdmFyICRwd2QgPSAkKCIuY2FyZC1pbm5lciAuaW5wdXQtdHh0Iik7CiAgICAgICAgICAgIHZhciAkYnV0dG9uID0gJCgiLmNhcmQtaW5uZXIgLmJ0bi1tYWluIik7CiAgICAgICAgICAgIGlmIChzaGFyZUlkICYmICRwd2QubGVuZ3RoICYmICRidXR0b24ubGVuZ3RoKSB7CgogICAgICAgICAgICAgICAgLy8g5pi+56S65YiG5Lqr5a+G56CBCiAgICAgICAgICAgICAgICAkcHdkLmF0dHIoInR5cGUiLCAidGV4dCIpOwoKICAgICAgICAgICAgICAgIC8vIOiuvue9ruWIhuS6q+WvhueggQogICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnNldFB3ZCA9IGZ1bmN0aW9uIChwd2QpIHsKICAgICAgICAgICAgICAgICAgICAkcHdkLnZhbChwd2QpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyDph43pgKDmjInpkq4KICAgICAgICAgICAgICAgIHZhciAkaXRlbUJ1dHRvbiA9ICRidXR0b24ucGFyZW50KCk7CiAgICAgICAgICAgICAgICAkaXRlbUJ1dHRvbi5zYWZlSHRtbCgkYnV0dG9uLnByb3AoIm91dGVySFRNTCIpKTsKICAgICAgICAgICAgICAgICRidXR0b24gPSAkaXRlbUJ1dHRvbi5maW5kKCIuYnRuLW1haW4iKTsKCiAgICAgICAgICAgICAgICAvLyDmjInpkq7kuovku7YKICAgICAgICAgICAgICAgICRidXR0b24ub24oImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG9iai5nZXRTdG9yZSgpICYmIG9iai5nZXRTdG9yZSgpLmRpc3BhdGNoKCJzaGFyZUluZm8vbG9hZFNoYXJlSW5mb1dpdGhvdXRMb2dpbiIsICRwd2QudmFsKCkpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8g5o+Q5Lqk5a+G56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc3VibWl0X3B3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkYnV0dG9uLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50KGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouYXV0b1BhZGRpbmdTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNoYXJlSWQgPSBvYmouZ2V0U2hhcmVJZCgpOwogICAgICAgICAgICBzaGFyZUxvZy5nZXRTaGFyZUxvZyhjb25zdGFudC5zb3VyY2Uud2VpeXVuLCBzaGFyZUlkLCBmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICAgICAgICBpZiAocmVjb3JkIGluc3RhbmNlb2YgT2JqZWN0ICYmIHJlY29yZC5zaGFyZV9wd2QpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSByZWNvcmQuc2hhcmVfcHdkOwogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zaGFyZV9wd2QgPSBzaGFyZVB3ZDsKICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2V0UHdkKHNoYXJlUHdkKTsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnNob3dOb3RpZnlTdWNjZXNzKCkgJiYgb2JqLnNob3dUaXBTdWNjZXNzKCJbIiArIG1hbmlmZXN0LmdldFRpdGxlKCkgKyAiXSDlm57loavlr4bnoIHmiJDlip8iKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQud2VpeXVuX2F1dG9fanVtcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QgJiYgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnNob3dOb3RpZnlGYWlsKCkgJiYgb2JqLnNob3dUaXBFcnJvcigiWyIgKyBtYW5pZmVzdC5nZXRUaXRsZSgpICsgIl0g5rKh5pyJ5a+G56CB6K6w5b2VIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclN0b3JlU2hhcmVQd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5hZGRSZXNwb25zZUludGVyY2VwdG9yKGZ1bmN0aW9uIChyZXF1ZXN0LCByZXNwb25zZSkgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSByZXF1ZXN0LnJlc3BvbnNlVVJMOwogICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RVcmwuaW5kZXhPZigid2VpeXVuU2hhcmVOb0xvZ2luL1dlaXl1blNoYXJlVmlldyIpID4gMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEucnNwX2hlYWRlci5yZXRjb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gcmVzcG9uc2UuY29uZmlnLmRhdGEubWF0Y2goL1xcInNoYXJlX3B3ZFxcIjpcXCIoW1x3XSspXFwiLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBtYXRjaCIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSBtYXRjaFsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoYXJlUHdkID09IG9iai52ZXJpZnlfcGFnZS5zaGFyZV9wd2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlSWQgPSBvYmouZ2V0U2hhcmVJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVMaW5rID0gb2JqLmdldFNoYXJlTGluaygpOwogICAgICAgICAgICAgICAgICAgICAgICBzaGFyZUxvZy5hZGRTaGFyZUxvZyhjb25zdGFudC5zb3VyY2Uud2VpeXVuLCBzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIGVycm9yIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouYWRkUmVzcG9uc2VJbnRlcmNlcHRvciA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZS5yZXF1ZXN0LCByZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICAgICAgICB9OwogICAgICAgICAgICBvYmouZ2V0QXhpb3MoKSAmJiBvYmouZ2V0QXhpb3MoKS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHN1Y2Nlc3MsIGVycm9yKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0JveCA9IGZ1bmN0aW9uIChib2R5KSB7CiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPSJtb2RhbCBtb2RhbC1zaG93IiBpZD0iZmlsZS1tb2RhbCI+PGIgY2xhc3M9Im1vZGFsLW1hc2siPjwvYj48ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2cgbW9kYWwtZGlhbG9nLTY4MCI+PGRpdiBjbGFzcz0ibW9kYWwtZGlhbG9nLWhkIGNsZWFyZml4Ij48aDQgY2xhc3M9Im1vZGFsLWRpYWxvZy10aXRsZSI+5paH5Lu25LiL6L29PC9oND48YnV0dG9uIGNsYXNzPSJidG4taWNvbiBpY29uIGljb24tcG9wLWNsb3NlIj48L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2ctYmQgbW9kYWwtYm9keSI+PC9kaXY+PC9kaXY+PC9kaXY+JzsKICAgICAgICAgICAgaWYgKCQoIiNmaWxlLW1vZGFsIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICQoImJvZHkiKS5hcHBlbmQodGVtcGxhdGUpOwogICAgICAgICAgICAgICAgJCgiI2ZpbGUtbW9kYWwgLmljb24tcG9wLWNsb3NlIikub24oImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICQoIiNmaWxlLW1vZGFsIikuaGlkZSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJCgiI2ZpbGUtbW9kYWwiKS5zaG93KCk7CiAgICAgICAgICAgICQoIiNmaWxlLW1vZGFsIC5tb2RhbC1ib2R5Iikuc2FmZUh0bWwoYm9keSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dTaGFyZURvd25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZURhdGEgPSBvYmouZ2V0U2VsZWN0ZWRTaGFyZUZpbGVEYXRhKCk7CiAgICAgICAgICAgIGlmIChmaWxlRGF0YS5ub2RlX2xpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouc2hvd1RpcEVycm9yKCLor7fpgInmi6noh7PlsJHkuIDkuKrmlofku7Yv5paH5Lu25aS5Iik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG9iai5yZXF1ZXN0U2hhcmVEb3dubG9hZChmaWxlRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIG9iai5zaG93U2hhcmVEb3dubG9hZEJveChmaWxlRGF0YSwgcmVzcG9uc2UpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIG9iai5zaG93VGlwRXJyb3IocmVzcG9uc2UubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dIb21lRG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBmaWxlRGF0YSA9IG9iai5nZXRTZWxlY3RlZFNoYXJlRmlsZURhdGEoKTsKICAgICAgICAgICAgaWYgKGZpbGVEYXRhLm5vZGVfbGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5zaG93VGlwRXJyb3IoIuivt+mAieaLqeiHs+WwkeS4gOS4quaWh+S7ti/mlofku7blpLkiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb2JqLnJlcXVlc3RIb21lRG93bmxvYWQoZmlsZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBvYmouc2hvd1NoYXJlRG93bmxvYWRCb3goZmlsZURhdGEsIHJlc3BvbnNlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBvYmouc2hvd1RpcEVycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5wYXJzZURvd25GaWxlID0gZnVuY3Rpb24gKGZpbGVEYXRhKSB7CiAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9ICIiLCBwYWNrTmFtZSA9ICIiOwogICAgICAgICAgICBpZiAoZmlsZURhdGEuZGlyX2xpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgaWYgKGZpbGVEYXRhLmZpbGVfbGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgcGFja05hbWUgPSBmaWxlRGF0YS5kaXJfbGlzdFswXS5maWxlbmFtZSArICIg562JIiArIChmaWxlRGF0YS5kaXJfbGlzdC5sZW5ndGggKyBmaWxlRGF0YS5maWxlX2xpc3QubGVuZ3RoKSArICLkuKrmlofku7YiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGFja05hbWUgPSBmaWxlRGF0YS5kaXJfbGlzdFswXS5maWxlbmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gcGFja05hbWUgKyAiLnppcCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoZmlsZURhdGEuZmlsZV9saXN0Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBwYWNrTmFtZSA9IGZpbGVEYXRhLm5vZGVfbGlzdFswXS5nZXROYW1lTm9FeHQoKSArICIg562JIiArIGZpbGVEYXRhLmZpbGVfbGlzdC5sZW5ndGggKyAi5Liq5paH5Lu2IjsKICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IHBhY2tOYW1lICsgIi56aXAiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBmaWxlRGF0YS5maWxlX2xpc3RbMF0uZmlsZW5hbWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogZmlsZU5hbWUsCiAgICAgICAgICAgICAgICBwYWNrX25hbWU6IHBhY2tOYW1lCiAgICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlcXVlc3RIb21lRG93bmxvYWQgPSBmdW5jdGlvbiAoZmlsZURhdGEpIHsKICAgICAgICAgICAgdmFyIGJhc2VSZXF1ZXN0ID0gb2JqLmdldEJhc2VSZXF1ZXN0KCk7CiAgICAgICAgICAgIHZhciBkb3duRmlsZSA9IG9iai5wYXJzZURvd25GaWxlKGZpbGVEYXRhKTsKICAgICAgICAgICAgaWYgKGJhc2VSZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZG93bkZpbGUucGFja19uYW1lID8gYmFzZVJlcXVlc3QuZ2V0UGFja1VybChmaWxlRGF0YS5ub2RlX2xpc3QsIHt9KSA6IGJhc2VSZXF1ZXN0LmdldFNpbmdsZVVybChmaWxlRGF0YS5ub2RlX2xpc3QsIHt9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHsgcmV0Y29kZTogLTEsIG1zZzogIueUn+aIkOmTvuaOpeWksei0pSIgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5yZXF1ZXN0U2hhcmVEb3dubG9hZCA9IGZ1bmN0aW9uIChmaWxlRGF0YSkgewogICAgICAgICAgICB2YXIgc2hhcmVGaWxlID0gb2JqLmdldFNoYXJlRmlsZSgpLCBkb3dubG9hZFJlcXVlc3QgPSBvYmouZ2V0RG93bmxvYWRSZXF1ZXN0KCk7CiAgICAgICAgICAgIHZhciBkb3duRmlsZSA9IG9iai5wYXJzZURvd25GaWxlKGZpbGVEYXRhKTsKICAgICAgICAgICAgaWYgKHNoYXJlRmlsZSAmJiBkb3dubG9hZFJlcXVlc3QpIHsKICAgICAgICAgICAgICAgIHZhciBkZXRhaWwgPSB7CiAgICAgICAgICAgICAgICAgICAgc2hhcmVLZXk6IHNoYXJlRmlsZS5zaGFyZUtleSwKICAgICAgICAgICAgICAgICAgICBzaGFyZVB3ZDogc2hhcmVGaWxlLnNoYXJlUHdkLAogICAgICAgICAgICAgICAgICAgIGZpbGVPd25lcjogc2hhcmVGaWxlLnNoYXJlT3duZXIsCiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeXBlOiAwLAogICAgICAgICAgICAgICAgICAgIHBhY2tOYW1lOiBkb3duRmlsZS5wYWNrX25hbWUsCiAgICAgICAgICAgICAgICAgICAgcGRpcktleTogIiIsCiAgICAgICAgICAgICAgICAgICAgZGlyTGlzdDogZmlsZURhdGEuZGlyX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgZmlsZUxpc3Q6IGZpbGVEYXRhLmZpbGVfbGlzdAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBkb3duRmlsZS5wYWNrX25hbWUgPyBkb3dubG9hZFJlcXVlc3Quc2hhcmVQYXJ0RG93bmxvYWQoZGV0YWlsKSA6IGRvd25sb2FkUmVxdWVzdC5zaGFyZUJhdGNoRG93bmxvYWQoZGV0YWlsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHsgcmV0Y29kZTogLTEsIG1zZzogIueUn+aIkOmTvuaOpeWksei0pSIgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5zaG93U2hhcmVEb3dubG9hZEJveCA9IGZ1bmN0aW9uIChmaWxlRGF0YSwgcmVzcG9uc2UpIHsKICAgICAgICAgICAgdmFyIGRvd25GaWxlID0gb2JqLnBhcnNlRG93bkZpbGUoZmlsZURhdGEpOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZG93bmxvYWRfdXJsKSB7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGRvd25GaWxlLCByZXNwb25zZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGRvd25GaWxlLCByZXNwb25zZS5maWxlX2xpc3RbMF0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgaHRtbCA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOiAyMHB4OyBvdmVyZmxvdy15OiBhdXRvOyI+JzsKICAgICAgICAgICAgdmFyIHJvd1N0eWxlID0gIm1hcmdpbjoxMHB4IDBweDtvdmVyZmxvdzpoaWRkZW47IHdoaXRlLXNwYWNlOm5vd3JhcDsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsiOwogICAgICAgICAgICBodG1sICs9ICc8cD4nICsgZG93bkZpbGUuZmlsZV9uYW1lICsgJzwvcD4nOwogICAgICAgICAgICBodG1sICs9ICc8cCBzdHlsZT0iJyArIHJvd1N0eWxlICsgJyI+PGEgdGl0bGU9IicgKyBkb3duRmlsZS5kb3dubG9hZF91cmwgKyAnIiBocmVmPSInICsgZG93bkZpbGUuZG93bmxvYWRfdXJsICsgJyIgc3R5bGU9ImNvbG9yOiBibHVlOyI+JyArIGRvd25GaWxlLmRvd25sb2FkX3VybCArICc8L2E+PC9wPic7CiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+JzsKICAgICAgICAgICAgb2JqLnNob3dCb3goaHRtbCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXBTdWNjZXNzID0gZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICBvYmouZ2V0TW9kYWwoKSAmJiBvYmouZ2V0TW9kYWwoKS5zdWNjZXNzKG1zZyk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXBFcnJvciA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgb2JqLmdldE1vZGFsKCkgJiYgb2JqLmdldE1vZGFsKCkuZXJyb3IobXNnKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVJZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHVybCA9IG9iai5nZXRTaGFyZUxpbmsoKTsKICAgICAgICAgICAgdmFyIG1hdGNoID0gdXJsLm1hdGNoKC9zaGFyZS53ZWl5dW4uY29tXC8oWzAtOWEtel0rKS9pKTsKICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBudWxsOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUxpbmsgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmlzSG9tZVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChyb3V0ZXIuZ2V0VXJsKCkuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrIikgPj0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2VsZWN0ZWRTaGFyZUZpbGVEYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZURhdGEgPSB7CiAgICAgICAgICAgICAgICBub2RlX2xpc3Q6IG9iai5nZXRTZWxlY3RlZEZpbGVOb2RlcygpLAogICAgICAgICAgICAgICAgZGlyX2xpc3Q6IFtdLAogICAgICAgICAgICAgICAgZmlsZV9saXN0OiBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICBmaWxlRGF0YS5ub2RlX2xpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ2V0U2l6ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX2lkOiBpdGVtLmdldElkKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHBkaXJfa2V5OiBpdGVtLmdldFBkaXJLZXkoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IGl0ZW0uZ2V0TmFtZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemU6IGl0ZW0uZ2V0U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc0RpcigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVEYXRhLmRpcl9saXN0LnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlRGF0YS5maWxlX2xpc3QucHVzaChmaWxlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmlsZURhdGE7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNlbGVjdGVkRmlsZU5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZU5vZGVzID0gW107CiAgICAgICAgICAgIGlmIChvYmouaXNIb21lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBvYmouZ2V0SG9tZUZpbGVOb2RlcygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHNoYXJlRmlsZSA9IG9iai5nZXRTaGFyZUZpbGUoKTsKICAgICAgICAgICAgICAgIGlmIChzaGFyZUZpbGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2hhcmVGaWxlLmlzU2luZ2xlRmlsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBzaGFyZUZpbGUuY2hpbGROb2RlczsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHNoYXJlRmlsZS5zZWxlY3RlZE5vZGVzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmlsZU5vZGVzOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRIb21lRmlsZU5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZU5vZGVzID0gW107CiAgICAgICAgICAgIHZhciBzdG9yZSA9IG9iai5nZXRTdG9yZSgpOwogICAgICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5pc1NlbGVjdGVkKCkgPyAxIDogMDsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHN0b3JlIGluc3RhbmNlb2YgT2JqZWN0KSB7CiAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoIndlaXl1bi5jb20vZGlzay9kb2MiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUuZG9jLmN1ckNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3Bob3RvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLnBob3RvLmN1ckNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3ZpZGVvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLnZpZGVvLmNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL2F1aWRvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLmF1ZGlvLmNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3RpbWUiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUudGltZS5yb290Tm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodXJsLmluZGV4T2YoIndlaXl1bi5jb20vZGlzay9zaGFyZWRpciIpID49IDApIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBzdG9yZS5zdGF0ZS5zaGFyZWRpci5jdXJOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3JlY2VudCIpID49IDApIHsKICAgICAgICAgICAgICAgICAgICB2YXIga2lkRmVlZHMgPSBzdG9yZS5zdGF0ZS5yZWNlbnQucm9vdE5vZGUuZ2V0S2lkRmVlZHMoKTsKICAgICAgICAgICAgICAgICAgICBraWRGZWVkcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWVkLmlzU2VsZWN0ZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gZmlsZU5vZGVzLmNvbmNhdChmZWVkLmdldEtpZE5vZGVzKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3JlY3ljbGUiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUucmVjeWNsZS5yb290Tm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RvcmUuc3RhdGUuZGlzaykgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLmRpc2suY3VyTm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmaWxlTm9kZXM7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlRmlsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHN0b3JlID0gb2JqLmdldFN0b3JlKCk7CiAgICAgICAgICAgIGlmIChzdG9yZSBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLnNoYXJlZmlsZS5zaGFyZUZpbGU7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QmFzZVJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlKCJiYXNlX3JlcXVlc3QiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5nZXRTaW5nbGVVcmwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RG93bmxvYWRSZXF1ZXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgiZG93bmxvYWRfcmVxdWVzdCIsIGZ1bmN0aW9uIChtb2R1bGUsIG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChtb2R1bGUgJiYgbW9kdWxlLkRvd25sb2FkUmVxdWVzdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbW9kdWxlLkRvd25sb2FkUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QXhpb3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlKCJheGlvcyIsIGZ1bmN0aW9uIChtb2R1bGUsIG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChtb2R1bGUgJiYgbW9kdWxlLkF4aW9zKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE1vZGFsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgibW9kYWwiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5jb25maXJtICYmIG1vZHVsZS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFN0b3JlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgic3RvcmUiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5kZWZhdWx0ICYmIG1vZHVsZS5kZWZhdWx0Ll9tb2R1bGVzTmFtZXNwYWNlTWFwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5kZWZhdWx0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlID0gZnVuY3Rpb24gKG5hbWUsIG1hdGNoRnVuYykgewogICAgICAgICAgICBpZiAoIW9iai5tb2R1bGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqLndlYnBhY2tfcmVxdWlyZS5jKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbWF0Y2hGdW5jKG9iai53ZWJwYWNrX3JlcXVpcmUoa2V5KSwga2V5KTsKICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm1vZHVsZXNbbmFtZV0gPSBtYXRjaDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai5tb2R1bGVzW25hbWVdOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0V2VicGFja1JlcXVpcmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBpbmplY3ROYW1lID0gIl9uZF9pbmplY3RfIjsKICAgICAgICAgICAgdmFyIG1vcmVNb2R1bGVzID0ge307CiAgICAgICAgICAgIG1vcmVNb2R1bGVzW2luamVjdE5hbWVdID0gZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAgICAgICAgICAgb2JqLndlYnBhY2tfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX187CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy53ZWJwYWNrSnNvbnAoW2luamVjdE5hbWVdLCBtb3JlTW9kdWxlcywgW2luamVjdE5hbWVdKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX2xhbnpvdXMiLCBbIm1hbmlmZXN0IiwgInJvdXRlciIsICJvcHRpb24iLCAibG9nZ2VyIiwgInVuc2FmZVdpbmRvdyIsICJjb25zdGFudCIsICJzZXR0aW5nIiwgInNoYXJlTG9nIiwgIiQiXSwgZnVuY3Rpb24gKG1hbmlmZXN0LCByb3V0ZXIsIG9wdGlvbiwgbG9nZ2VyLCB1bnNhZmVXaW5kb3csIGNvbnN0YW50LCBzZXR0aW5nLCBzaGFyZUxvZywgJCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIHZlcmlmeV9wYWdlOiB7CiAgICAgICAgICAgICAgICBzZXRQd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzdWJtaXRfcHdkOiBudWxsCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucnVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoImxhbnpvdXMuY29tIikgPiAwIHx8IHVybC5pbmRleE9mKCJsYW56b3V4LmNvbSIpID4gMCkgewogICAgICAgICAgICAgICAgb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5sYW56b3VzX3BhZ2VfdmVyaWZ5KSAmJiBvYmouaW5pdFZlcmlmeVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkKCk7CgogICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG9iai5hdXRvUGFkZGluZ1NoYXJlUHdkKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHNoYXJlSWQgPSBvYmouZ2V0U2hhcmVJZCgpOwogICAgICAgICAgICB2YXIgJHB3ZCA9ICQoIiNwd2QiKTsKICAgICAgICAgICAgaWYgKHNoYXJlSWQgJiYgJHB3ZC5sZW5ndGgpIHsKCiAgICAgICAgICAgICAgICAvLyDorr7nva7liIbkuqvlr4bnoIEKICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zZXRQd2QgPSBmdW5jdGlvbiAocHdkKSB7CiAgICAgICAgICAgICAgICAgICAgJHB3ZC52YWwocHdkKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8g5o+Q5Lqk5a+G56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc3VibWl0X3B3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjc3ViIikuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuZG93bl9wICYmIHVuc2FmZVdpbmRvdy5kb3duX3AoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQoY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5hdXRvUGFkZGluZ1NoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgIHNoYXJlTG9nLmdldFNoYXJlTG9nKGNvbnN0YW50LnNvdXJjZS5sYW56b3VzLCBzaGFyZUlkLCBmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICAgICAgICBpZiAocmVjb3JkIGluc3RhbmNlb2YgT2JqZWN0ICYmIHJlY29yZC5zaGFyZV9wd2QpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSByZWNvcmQuc2hhcmVfcHdkOwogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zaGFyZV9wd2QgPSBzaGFyZVB3ZDsKICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2V0UHdkKHNoYXJlUHdkKTsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnNob3dOb3RpZnlTdWNjZXNzKCkgJiYgb2JqLnNob3dUaXAoMSwgIlsiICsgbWFuaWZlc3QuZ2V0VGl0bGUoKSArICJdIOWbnuWhq+WvhueggeaIkOWKnyIsIDIwMDApOwoKICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5sYW56b3VzX2F1dG9fanVtcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QgJiYgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnNob3dOb3RpZnlGYWlsKCkgJiYgb2JqLnNob3dUaXAoMCwgIlsiICsgbWFuaWZlc3QuZ2V0VGl0bGUoKSArICJdIOayoeacieWvhueggeiusOW9lSIsIDIwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB1bnNhZmVXaW5kb3cuJChkb2N1bWVudCkuYWpheENvbXBsZXRlKGZ1bmN0aW9uIChldmVudCwgeGhyLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBvcHRpb25zLmRhdGEubWF0Y2goL3B3ZD0oXHcrKS8pOwogICAgICAgICAgICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgICAgICAgICAgICAgIG1hdGNoID0gb3B0aW9ucy5kYXRhLm1hdGNoKC9wPShcdyspLyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBub3QgbWF0Y2giKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHNoYXJlUHdkID0gbWF0Y2hbMV07CiAgICAgICAgICAgICAgICBpZiAoc2hhcmVQd2QgPT0gb2JqLnZlcmlmeV9wYWdlLnNoYXJlX3B3ZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgICAgICB2YXIgc2hhcmVMaW5rID0gb2JqLmdldFNoYXJlTGluaygpOwogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gb2JqLnBhcnNlSnNvbih4aHIucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnp0ID09IDEgJiYgc2hhcmVQd2QpIHsKICAgICAgICAgICAgICAgICAgICBzaGFyZUxvZy5hZGRTaGFyZUxvZyhjb25zdGFudC5zb3VyY2UubGFuem91cywgc2hhcmVJZCwgc2hhcmVQd2QsIHNoYXJlTGluayk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBlcnJvciIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd1RpcCA9IGZ1bmN0aW9uIChjb2RlLCBtc2csIHRpbWVvdXQpIHsKICAgICAgICAgICAgaWYgKHVuc2FmZVdpbmRvdy5zbXMpIHsKICAgICAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5zbXMobXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvcjsKICAgICAgICAgICAgICAgIGlmICgkKCIub2ZmIikubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IgPSAiI3B3ZGVyciI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9ICIjaW5mbyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29kZSkgewogICAgICAgICAgICAgICAgICAgICQoc2VsZWN0b3IpLnNhZmVIdG1sKCc8c3BhbiBzdHlsZT0iY29sb3I6IGdyZWVuOyI+JyArIG1zZyArICc8L3NwYW4+Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkKHNlbGVjdG9yKS5zYWZlSHRtbCgnPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQ7Ij4nICsgbXNnICsgJzwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICQoc2VsZWN0b3IpLnRleHQoIiIpOwogICAgICAgICAgICAgICAgfSwgdGltZW91dCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVJZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHVybCA9IG9iai5nZXRTaGFyZUxpbmsoKTsKICAgICAgICAgICAgdmFyIG1hdGNoOwoKICAgICAgICAgICAgbWF0Y2ggPSAvW2xhbnpvdXN8bGFuem91eF0uY29tXC8oW1x3XSspXC8oW2EtejAtOS1fXXs0LH0pL2dpLmV4ZWModXJsKTsKICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV0gKyAiLyIgKyBtYXRjaFsyXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbWF0Y2ggPSAvW2xhbnpvdXN8bGFuem91eF0uY29tXC8oW2EtejAtOS1fXXs0LH0pL2dpLmV4ZWModXJsKTsKICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUxpbmsgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnBhcnNlSnNvbiA9IGZ1bmN0aW9uIChqc29uU3RyKSB7CiAgICAgICAgICAgIHZhciBqc29uT2JqZWN0ID0ge307CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoanNvblN0cikgewogICAgICAgICAgICAgICAgICAgIGpzb25PYmplY3QgPSBKU09OLnBhcnNlKGpzb25TdHIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlKSB7IH0KICAgICAgICAgICAgcmV0dXJuIGpzb25PYmplY3Q7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImFwcF8xODkiLCBbIm1hbmlmZXN0IiwgInJvdXRlciIsICJvcHRpb24iLCAibG9nZ2VyIiwgInVuc2FmZVdpbmRvdyIsICJjb25zdGFudCIsICJzZXR0aW5nIiwgInNoYXJlTG9nIiwgIiQiXSwgZnVuY3Rpb24gKG1hbmlmZXN0LCByb3V0ZXIsIG9wdGlvbiwgbG9nZ2VyLCB1bnNhZmVXaW5kb3csIGNvbnN0YW50LCBzZXR0aW5nLCBzaGFyZUxvZywgJCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIHZlcmlmeV9wYWdlOiB7CiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IG51bGwKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiY2xvdWQuMTg5LmNuL3QiKSA+IDApIHsKICAgICAgICAgICAgICAgIG9iai5pbml0U2hhcmVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigiY2xvdWQuMTg5LmNuL21haW4iKSA+IDAgfHwgdXJsLmluZGV4T2YoImNsb3VkLjE4OS5jbi9waG90byIpID4gMCkgewogICAgICAgICAgICAgICAgb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC50eTE4OV9wYWdlX2hvbWUpICYmIG9iai5pbml0SG9tZVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRIb21lUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCQoIiNKX0NyZWF0ZSIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgJCgiI0pfQ3JlYXRlIikuYWZ0ZXIoJzxhIGNsYXNzPSJidG4gYnRuLXNob3ctbGluayIgc3R5bGU9ImJhY2tncm91bmQ6ICMyYjg5ZWE7IGNvbG9yOiAjZmZmOyBjdXJzb3I6IHBvaW50ZXIiPuaYvuekuumTvuaOpTwvYT4nKTsKICAgICAgICAgICAgICAgICQoIi5idG4tc2hvdy1saW5rIikub24oImNsaWNrIiwgb2JqLnNob3dEb3dubG9hZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoJCgiLkpDX1JlZnJlc2giKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICQoIi5KQ19SZWZyZXNoIikuYWZ0ZXIoJzxhIGNsYXNzPSJidG4gYnRuLXNob3ctbGluayIgc3R5bGU9ImJhY2tncm91bmQ6ICMyYjg5ZWE7IGNvbG9yOiAjZmZmOyBjdXJzb3I6IHBvaW50ZXIiPuaYvuekuumTvuaOpTwvYT4nKTsKICAgICAgICAgICAgICAgICQoIi5idG4tc2hvdy1saW5rIikub24oImNsaWNrIiwgb2JqLnNob3dEb3dubG9hZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG9iai5pbml0SG9tZVBhZ2UsIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFNoYXJlUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCQoIi5jb2RlLXBhbmVsIikubGVuZ3RoICYmIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQudHkxODlfcGFnZV92ZXJpZnkpKSB7CiAgICAgICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQudHkxODlfcGFnZV9zaGFyZSkpIHsKICAgICAgICAgICAgICAgIG9iai5pbml0RG93bmxvYWRQYWdlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5yZWdpc3RlclN0b3JlU2hhcmVQd2QoKTsKCiAgICAgICAgICAgIG9iai5hdXRvUGFkZGluZ1NoYXJlUHdkKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlZ2lzdGVyU3RvcmVTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LiQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoZXZlbnQsIHhociwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlSlNPTjsKICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51cmwuaW5kZXhPZigibGlzdFNoYXJlRGlyLmFjdGlvbiIpID4gMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIE9iamVjdCAmJiByZXNwb25zZS5kaWdlc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gb3B0aW9ucy51cmwubWF0Y2goL2FjY2Vzc0NvZGU9KFx3KykvKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgbm90IG1hdGNoIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlUHdkID0gbWF0Y2hbMV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBub3QgbWF0Y2giKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnVybC5pbmRleE9mKCJzaGFyZUZpbGVWZXJpZnlQYXNzLmFjdGlvbiIpID4gMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIE9iamVjdCAmJiByZXNwb25zZS5zaGFyZUlkICYmIHJlc3BvbnNlLmFjY2Vzc0NvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVQd2QgPSByZXNwb25zZS5hY2Nlc3NDb2RlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgbm90IG1hdGNoIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJub3QgcHdkIHJlcXVlc3QiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc2hhcmVQd2QgPT0gb2JqLnZlcmlmeV9wYWdlLnNoYXJlX3B3ZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgICAgICB2YXIgc2hhcmVMaW5rID0gb2JqLmdldFNoYXJlTGluaygpOwogICAgICAgICAgICAgICAgc2hhcmVMb2cuYWRkU2hhcmVMb2coY29uc3RhbnQuc291cmNlLnR5MTg5LCBzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgc2hhcmVMb2cuZ2V0U2hhcmVMb2coY29uc3RhbnQuc291cmNlLnR5MTg5LCBzaGFyZUlkLCBmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICAgICAgICBpZiAocmVjb3JkIGluc3RhbmNlb2YgT2JqZWN0ICYmIHJlY29yZC5zaGFyZV9wd2QpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSByZWNvcmQuc2hhcmVfcHdkOwogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zaGFyZV9wd2QgPSBzaGFyZVB3ZDsKICAgICAgICAgICAgICAgICAgICAkKCIjY29kZV90eHQiKS52YWwoc2hhcmVQd2QpOwogICAgICAgICAgICAgICAgICAgIHNldHRpbmcuc2hvd05vdGlmeVN1Y2Nlc3MoKSAmJiBvYmouc2hvd1RpcCgxLCAiWyIgKyBtYW5pZmVzdC5nZXRUaXRsZSgpICsgIl0g5Zue5aGr6K6/6Zeu56CB5oiQ5YqfIiwgMjAwMCk7CgogICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LnR5MTg5X2F1dG9fanVtcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuJCgiLmJ0bi52aXNpdCIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNldHRpbmcuc2hvd05vdGlmeUZhaWwoKSAmJiBvYmouc2hvd1RpcCgwLCAiWyIgKyBtYW5pZmVzdC5nZXRUaXRsZSgpICsgIl0g5rKh5pyJ6K6/6Zeu56CB6K6w5b2VIiwgMjAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwID0gZnVuY3Rpb24gKGNvZGUsIG1zZywgdGltZW91dCkgewogICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKCIudmlzaXRfZXJyb3IiKTsKICAgICAgICAgICAgaWYgKGNvZGUpIHsKICAgICAgICAgICAgICAgICRlbGVtZW50LnNhZmVIdG1sKCc8c3BhbiBzdHlsZT0iY29sb3I6IGdyZWVuOyI+JyArIG1zZyArICc8L3NwYW4+Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkZWxlbWVudC5zYWZlSHRtbCgnPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQ7Ij4nICsgbXNnICsgJzwvc3Bhbj4nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkZWxlbWVudC5zaG93KCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJGVsZW1lbnQuaGlkZSgpOwogICAgICAgICAgICB9LCB0aW1lb3V0KTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdERvd25sb2FkUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCgiLmJ0bi1kb3dubG9hZCIpLmFmdGVyKCc8YSBjbGFzcz0iYnRuIGJ0bi1zaG93LWxpbmsiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjMmI4OWVhOyBjdXJzb3I6IHBvaW50ZXIiPuaYvuekuumTvuaOpTwvYT4nKTsKICAgICAgICAgICAgJCgiLmJ0bi1zaG93LWxpbmsiKS5vbigiY2xpY2siLCBvYmouc2hvd0Rvd25sb2FkKTsKCiAgICAgICAgICAgIGlmICh1bnNhZmVXaW5kb3cuZmlsZUlkKSB7CiAgICAgICAgICAgICAgICBvYmouZ2V0RG93bmxvYWRVcmwoJCgiLnNoYXJlSWQiKS52YWwoKSwgdW5zYWZlV2luZG93LmZpbGVJZCkudGhlbihmdW5jdGlvbiAoZG93bmxvYWRVcmwpIHsKICAgICAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuZG93bmxvYWRVcmwgPSBkb3dubG9hZFVybCArICJmaWxlbmFtZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHVuc2FmZVdpbmRvdy5maWxlTmFtZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHg7IGhlaWdodDogNDEwcHg7IG92ZXJmbG93LXk6IGF1dG87Ij4nOwogICAgICAgICAgICB2YXIgcm93U3R5bGUgPSAibWFyZ2luOjEwcHggMHB4OyBvdmVyZmxvdzpoaWRkZW47IHdoaXRlLXNwYWNlOm5vd3JhcDsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsiOwoKICAgICAgICAgICAgdmFyIGZpbGVJZHMgPSBvYmouZ2V0U2VsZWN0ZWRGaWxlSWRzKCksCiAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CgogICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgdmFyIHBhY2thZ2VVcmwgPSBvYmouYnVpbGRQYWNrYWdlVXJsKGZpbGVJZHMsICLmiZPljIXkuIvovb0uemlwIik7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cD7ljovnvKnljIU8L3A+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwIHN0eWxlPSInICsgcm93U3R5bGUgKyAnIj48YSB0aXRsZT0iJyArIHBhY2thZ2VVcmwgKyAnIiBocmVmPSInICsgcGFja2FnZVVybCArICciIHN0eWxlPSJjb2xvcjogYmx1ZTsiPicgKyBwYWNrYWdlVXJsICsgJzwvYT48L3A+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwPiZuYnNwOzwvcD4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBpdGVtLmF0dHJpYnV0ZXM7CiAgICAgICAgICAgICAgICBpZiAoZmlsZS5pc0ZvbGRlcikgewogICAgICAgICAgICAgICAgICAgIGZpbGUuZG93bmxvYWRVcmwgPSBvYmouYnVpbGRQYWNrYWdlVXJsKGZpbGUuZmlsZUlkLCBmaWxlLmZpbGVOYW1lICsgIi56aXAiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpbGUuZG93bmxvYWRVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIGZpbGUuZG93bmxvYWRVcmw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cD4nICsgKCsraW5kZXgpICsgJ++8micgKyAoZmlsZS5maWxlTmFtZSA/IGZpbGUuZmlsZU5hbWUgOiBmaWxlLmZpbGVJZCkgKyAnPC9wPic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cCBzdHlsZT0iJyArIHJvd1N0eWxlICsgJyI+PGEgdGl0bGU9IicgKyBmaWxlLmRvd25sb2FkVXJsICsgJyIgaHJlZj0iJyArIGZpbGUuZG93bmxvYWRVcmwgKyAnIiBzdHlsZT0iY29sb3I6IGJsdWU7Ij4nICsgZmlsZS5kb3dubG9hZFVybCArICc8L2E+PC9wPic7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaHRtbCArPSAnPGRpdj4nOwogICAgICAgICAgICBvYmouc2hvd0JveChodG1sKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0JveCA9IGZ1bmN0aW9uIChib2R5KSB7CiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGlkPSJKX0ZpbGVNb2RhbCIgY2xhc3M9InRyZWVCb3gtbW9kYWwgbW9kYWwgaW4iIHN0eWxlPSJkaXNwbGF5OmJsb2NrIj48ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2ciPjxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+PGEgY2xhc3M9ImNsb3NlIj7DlzwvYT48aDM+5paH5Lu25LiL6L29PC9oMz48L2Rpdj48ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij48L2Rpdj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICBpZiAoJCgiI0pfRmlsZU1vZGFsIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICQoImJvZHkiKS5hcHBlbmQodGVtcGxhdGUpOwogICAgICAgICAgICAgICAgJCgiI0pfRmlsZU1vZGFsIC5jbG9zZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjSl9GaWxlTW9kYWwiKS5oaWRlKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkKCIjSl9GaWxlTW9kYWwiKS5zaG93KCk7CiAgICAgICAgICAgICQoIiNKX0ZpbGVNb2RhbCAubW9kYWwtYm9keSIpLnNhZmVIdG1sKGJvZHkpOwogICAgICAgIH07CgogICAgICAgIG9iai5idWlsZFBhY2thZ2VVcmwgPSBmdW5jdGlvbiAoZmlsZUlkcywgZmlsZU5hbWUpIHsKICAgICAgICAgICAgdmFyIGRvd25sb2FkVXJsID0gdW5zYWZlV2luZG93LmVkcml2ZS5kb3dubG9hZFVybCwKICAgICAgICAgICAgICAgIHNlc3Npb25LZXkgPSB1bnNhZmVXaW5kb3cuZWRyaXZlLnNlc3Npb25LZXk7CiAgICAgICAgICAgIGZpbGVOYW1lIHx8IChmaWxlTmFtZSA9ICIiKTsKICAgICAgICAgICAgaWYgKHVuc2FmZVdpbmRvdy5fc2hhcmVJZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLnByb3RvY29sICsgZG93bmxvYWRVcmwgKyAiP3Nlc3Npb25LZXk9IiArIHNlc3Npb25LZXkgKyAiJmZpbGVJZFM9IiArIGZpbGVJZHMgKyAiJmRvd25sb2FkVHlwZT0zJnNoYXJlSWQ9IiArIHVuc2FmZVdpbmRvdy5fc2hhcmVJZCArICImZmlsZW5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wgKyBkb3dubG9hZFVybCArICI/c2Vzc2lvbktleT0iICsgc2Vzc2lvbktleSArICImZmlsZUlkUz0iICsgZmlsZUlkcyArICImZG93bmxvYWRUeXBlPTEmZmlsZW5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouYnVpbGREb3dubG9hZFVybCA9IGZ1bmN0aW9uIChzaGFyZUlkLCBmaWxlRGlnZXN0LCBmaWxlTmFtZSkgewogICAgICAgICAgICByZXR1cm4gImh0dHBzOi8vY2xvdWQuMTg5LmNuL2Rvd25sb2FkRmlsZS5hY3Rpb24/ZmlsZVN0cj0iICsgZmlsZURpZ2VzdCArICImZG93bmxvYWRUeXBlPTMmc2hhcmVJZD0iICsgc2hhcmVJZCArICImZmlsZW5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlTmFtZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNlbGVjdGVkRmlsZUlkcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGZpbGVJZExpc3QgPSBbXTsKICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QoKTsKICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgZmlsZUlkTGlzdC5wdXNoKGl0ZW0uYXR0cmlidXRlcy5maWxlSWQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpbGVJZExpc3Quam9pbigiLCIpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbWFpblZpZXcgPSBudWxsLCBmaWxlTGlzdCA9IFtdOwogICAgICAgICAgICBpZiAodW5zYWZlV2luZG93LmZpbGVJZCkgewogICAgICAgICAgICAgICAgZmlsZUxpc3QgPSBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB1bnNhZmVXaW5kb3cKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHVuc2FmZVdpbmRvdy5fc2hhcmVJZCkgewogICAgICAgICAgICAgICAgbWFpblZpZXcgPSB1bnNhZmVXaW5kb3cuYXBwUm91dGVyLm1haW5WaWV3OwogICAgICAgICAgICAgICAgaWYgKG1haW5WaWV3IGluc3RhbmNlb2YgT2JqZWN0ICYmIG1haW5WaWV3LmZpbGVMaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZUxpc3QgPSBtYWluVmlldy5maWxlTGlzdDsKICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3Quc2VsZWN0ZWQoKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUxpc3QgPSBmaWxlTGlzdC5zZWxlY3RlZCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG9iai5wcm9jZXNzRmlsZUxpc3QoZmlsZUxpc3QsIHVuc2FmZVdpbmRvdy5fc2hhcmVJZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodW5zYWZlV2luZG93Lm1haW5WaWV3KSB7CiAgICAgICAgICAgICAgICBtYWluVmlldyA9IHVuc2FmZVdpbmRvdy5tYWluVmlldzsKICAgICAgICAgICAgICAgIGlmIChtYWluVmlldy5maWxlTGlzdFRhYk9iaiAmJiBtYWluVmlldy5maWxlTGlzdFRhYk9ialttYWluVmlldy5vcHRpb25zLmZpbGVJZF0pIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG1haW5WaWV3LmZpbGVMaXN0VGFiT2JqW21haW5WaWV3Lm9wdGlvbnMuZmlsZUlkXS5maWxlTGlzdC5zZWxlY3RlZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAobWFpblZpZXcuZ2V0U2VsZWN0ZWRNb2RlbHMpIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG1haW5WaWV3LmdldFNlbGVjdGVkTW9kZWxzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBzZWxlY3RlZEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmF0dHJpYnV0ZXMuZmlsZUlkID4gMCkgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsZUxpc3QucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZEZpbGVMaXN0OwogICAgICAgIH07CgogICAgICAgIG9iai5wcm9jZXNzRmlsZUxpc3QgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHNoYXJlSWQpIHsKICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uYXR0cmlidXRlcy5pc0ZvbGRlciAhPT0gdHJ1ZSAmJiBpdGVtLmF0dHJpYnV0ZXMuZmlsZUlkRGlnZXN0KSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5hdHRyaWJ1dGVzLmRvd25sb2FkVXJsID0gb2JqLmJ1aWxkRG93bmxvYWRVcmwoc2hhcmVJZCwgaXRlbS5hdHRyaWJ1dGVzLmZpbGVJZERpZ2VzdCwgaXRlbS5hdHRyaWJ1dGVzLmZpbGVOYW1lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldERvd25sb2FkVXJsID0gZnVuY3Rpb24gKHNoYXJlSWQsIGZpbGVJZCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9jbG91ZC4xODkuY24vdjIvZ2V0RmlsZURvd25sb2FkVXJsLmFjdGlvbj9zaGFyZUlkPSIgKyBzaGFyZUlkICsgIiZmaWxlSWQ9IiArIGZpbGVJZCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICBkYXRlVHlwZTogInRleHQiLAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChjb250ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCIiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlSWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSBvYmouZ2V0U2hhcmVMaW5rKCk7CiAgICAgICAgICAgIHZhciBtYXRjaCA9IHVybC5tYXRjaCgvY2xvdWRcLjE4OVwuY25cL3RcLyhbMC05YS16XSspL2kpOwogICAgICAgICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IG51bGw7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlTGluayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5nZXRVcmwoKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX21hbmFnZSIsIFsibWV0YSIsICJ1bnNhZmVXaW5kb3ciXSwgZnVuY3Rpb24gKG1ldGEsIHVuc2FmZVdpbmRvdykgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKG1ldGEuZXhpc3RNZXRhKCJtYW5hZ2UiKSkgewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93Lk9uZVBhbiA9IGNvbnRhaW5lcjsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImFwcCIsIFsiYXBwUnVubmVyIl0sIGZ1bmN0aW9uIChhcHBSdW5uZXIpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGFwcFJ1bm5lci5ydW4oWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfYmFpZHUiLAogICAgICAgICAgICAgICAgICAgIG1hdGNoczogWwogICAgICAgICAgICAgICAgICAgICAgICAiYmFpZHUuY29tIgogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImFwcF93ZWl5dW4iLAogICAgICAgICAgICAgICAgICAgIG1hdGNoczogWwogICAgICAgICAgICAgICAgICAgICAgICAid2VpeXVuLmNvbSIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfbGFuem91cyIsCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICJsYW56b3VzLmNvbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJsYW56b3V4LmNvbSIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfMTg5IiwKICAgICAgICAgICAgICAgICAgICBtYXRjaHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgImNsb3VkLjE4OS5jbiIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfbWFuYWdlIiwKICAgICAgICAgICAgICAgICAgICBtYXRjaHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgIioiCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgLyoqIGxpYiAqKi8KICAgIGNvbnRhaW5lci5kZWZpbmUoIiQiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB3aW5kb3cuJDsKICAgIH0pOwogICAgY29udGFpbmVyLmRlZmluZSgiU25hcCIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHR5cGVvZiBTbmFwICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHJldHVybiBTbmFwOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5TbmFwOwogICAgICAgIH0KICAgIH0pOwogICAgY29udGFpbmVyLmRlZmluZSgiRE9NUHVyaWZ5IiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodHlwZW9mIERPTVB1cmlmeSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICByZXR1cm4gRE9NUHVyaWZ5OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5ET01QdXJpZnk7CiAgICAgICAgfQogICAgfSk7CgogICAgY29udGFpbmVyLnVzZShbImdtIiwgImNvcmUiLCAiYXBwIl0sIGZ1bmN0aW9uIChnbSwgY29yZSwgYXBwKSB7CiAgICAgICAgZ20ucmVhZHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb3JlLnJlYWR5KGFwcC5ydW4pOwogICAgICAgIH0pOwogICAgfSk7Cn0pKCk7","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.staticfile.org/jquery/3.5.0/jquery.min.js","ts":1641535195935,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My41LjAgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIHQoZSl9OnQoZSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKEMsZSl7InVzZSBzdHJpY3QiO3ZhciB0PVtdLHI9T2JqZWN0LmdldFByb3RvdHlwZU9mLHM9dC5zbGljZSxnPXQuZmxhdD9mdW5jdGlvbihlKXtyZXR1cm4gdC5mbGF0LmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbmNhdC5hcHBseShbXSxlKX0sdT10LnB1c2gsaT10LmluZGV4T2Ysbj17fSxvPW4udG9TdHJpbmcsdj1uLmhhc093blByb3BlcnR5LGE9di50b1N0cmluZyxsPWEuY2FsbChPYmplY3QpLHk9e30sbT1mdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmIm51bWJlciIhPXR5cGVvZiBlLm5vZGVUeXBlfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT09ZS53aW5kb3d9LEU9Qy5kb2N1bWVudCxjPXt0eXBlOiEwLHNyYzohMCxub25jZTohMCxub01vZHVsZTohMH07ZnVuY3Rpb24gYihlLHQsbil7dmFyIHIsaSxvPShuPW58fEUpLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKG8udGV4dD1lLHQpZm9yKHIgaW4gYykoaT10W3JdfHx0LmdldEF0dHJpYnV0ZSYmdC5nZXRBdHRyaWJ1dGUocikpJiZvLnNldEF0dHJpYnV0ZShyLGkpO24uaGVhZC5hcHBlbmRDaGlsZChvKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIG51bGw9PWU/ZSsiIjoib2JqZWN0Ij09dHlwZW9mIGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBlP25bby5jYWxsKGUpXXx8Im9iamVjdCI6dHlwZW9mIGV9dmFyIGY9IjMuNS4wIixTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBTLmZuLmluaXQoZSx0KX07ZnVuY3Rpb24gcChlKXt2YXIgdD0hIWUmJiJsZW5ndGgiaW4gZSYmZS5sZW5ndGgsbj13KGUpO3JldHVybiFtKGUpJiYheChlKSYmKCJhcnJheSI9PT1ufHwwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiYwPHQmJnQtMSBpbiBlKX1TLmZuPVMucHJvdG90eXBlPXtqcXVlcnk6Zixjb25zdHJ1Y3RvcjpTLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gcy5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/cy5jYWxsKHRoaXMpOmU8MD90aGlzW2UrdGhpcy5sZW5ndGhdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlKXt2YXIgdD1TLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdH0sZWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gUy5lYWNoKHRoaXMsZSl9LG1hcDpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5tYXAodGhpcyxmdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0LGUpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGV2ZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4odCsxKSUyfSkpfSxvZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCUyfSkpfSxlcTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCxuPStlKyhlPDA/dDowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soMDw9biYmbjx0P1t0aGlzW25dXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDp1LHNvcnQ6dC5zb3J0LHNwbGljZTp0LnNwbGljZX0sUy5leHRlbmQ9Uy5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixpLG8sYT1hcmd1bWVudHNbMF18fHt9LHM9MSx1PWFyZ3VtZW50cy5sZW5ndGgsbD0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgYSYmKGw9YSxhPWFyZ3VtZW50c1tzXXx8e30scysrKSwib2JqZWN0Ij09dHlwZW9mIGF8fG0oYSl8fChhPXt9KSxzPT09dSYmKGE9dGhpcyxzLS0pO3M8dTtzKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW3NdKSlmb3IodCBpbiBlKXI9ZVt0XSwiX19wcm90b19fIiE9PXQmJmEhPT1yJiYobCYmciYmKFMuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhuPWFbdF0sbz1pJiYhQXJyYXkuaXNBcnJheShuKT9bXTppfHxTLmlzUGxhaW5PYmplY3Qobik/bjp7fSxpPSExLGFbdF09Uy5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LFMuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8IltvYmplY3QgT2JqZWN0XSIhPT1vLmNhbGwoZSkpJiYoISh0PXIoZSkpfHwiZnVuY3Rpb24iPT10eXBlb2Yobj12LmNhbGwodCwiY29uc3RydWN0b3IiKSYmdC5jb25zdHJ1Y3RvcikmJmEuY2FsbChuKT09PWwpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSx0LG4pe2IoZSx7bm9uY2U6dCYmdC5ub25jZX0sbil9LGVhY2g6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7aWYocChlKSl7Zm9yKG49ZS5sZW5ndGg7cjxuO3IrKylpZighMT09PXQuY2FsbChlW3JdLHIsZVtyXSkpYnJlYWt9ZWxzZSBmb3IociBpbiBlKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVhaztyZXR1cm4gZX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHx8W107cmV0dXJuIG51bGwhPWUmJihwKE9iamVjdChlKSk/Uy5tZXJnZShuLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6dS5jYWxsKG4sZSkpLG59LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT10Py0xOmkuY2FsbCh0LGUsbil9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPSt0Lmxlbmd0aCxyPTAsaT1lLmxlbmd0aDtyPG47cisrKWVbaSsrXT10W3JdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1bXSxpPTAsbz1lLmxlbmd0aCxhPSFuO2k8bztpKyspIXQoZVtpXSxpKSE9PWEmJnIucHVzaChlW2ldKTtyZXR1cm4gcn0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89MCxhPVtdO2lmKHAoZSkpZm9yKHI9ZS5sZW5ndGg7bzxyO28rKyludWxsIT0oaT10KGVbb10sbyxuKSkmJmEucHVzaChpKTtlbHNlIGZvcihvIGluIGUpbnVsbCE9KGk9dChlW29dLG8sbikpJiZhLnB1c2goaSk7cmV0dXJuIGcoYSl9LGd1aWQ6MSxzdXBwb3J0Onl9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoUy5mbltTeW1ib2wuaXRlcmF0b3JdPXRbU3ltYm9sLml0ZXJhdG9yXSksUy5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe25bIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7dmFyIGQ9ZnVuY3Rpb24obil7dmFyIGUsZCxiLG8saSxoLGYsZyx3LHUsbCxULEMsYSxFLHYscyxjLHksUz0ic2l6emxlIisxKm5ldyBEYXRlLHA9bi5kb2N1bWVudCxrPTAscj0wLG09dWUoKSx4PXVlKCksQT11ZSgpLE49dWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYobD0hMCksMH0saj17fS5oYXNPd25Qcm9wZXJ0eSx0PVtdLHE9dC5wb3AsTD10LnB1c2gsSD10LnB1c2gsTz10LnNsaWNlLFA9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFI9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixJPSIoPzpcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcW15cXHJcXG5cXGZdfFtcXHctXXxbXlwwLVxceDdmXSkrIixXPSJcXFsiK00rIiooIitJKyIpKD86IitNKyIqKFsqXiR8IX5dPz0pIitNKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrSSsiKSl8KSIrTSsiKlxcXSIsRj0iOigiK0krIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1crIikqKXwuKilcXCl8KSIsQj1uZXcgUmVnRXhwKE0rIisiLCJnIiksJD1uZXcgUmVnRXhwKCJeIitNKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK00rIiskIiwiZyIpLF89bmV3IFJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSx6PW5ldyBSZWdFeHAoIl4iK00rIiooWz4rfl18IitNKyIpIitNKyIqIiksVT1uZXcgUmVnRXhwKE0rInw+IiksWD1uZXcgUmVnRXhwKEYpLFY9bmV3IFJlZ0V4cCgiXiIrSSsiJCIpLEc9e0lEOm5ldyBSZWdFeHAoIl4jKCIrSSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitJKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitJKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrVyksUFNFVURPOm5ldyBSZWdFeHAoIl4iK0YpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFk9L0hUTUwkL2ksUT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLEo9L15oXGQkL2ksSz0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGVlPS9bK35dLyx0ZT1uZXcgUmVnRXhwKCJcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcKFteXFxyXFxuXFxmXSkiLCJnIiksbmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0iMHgiK2Uuc2xpY2UoMSktNjU1MzY7cmV0dXJuIHR8fChuPDA/U3RyaW5nLmZyb21DaGFyQ29kZShuKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKG4+PjEwfDU1Mjk2LDEwMjMmbnw1NjMyMCkpfSxyZT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxpZT1mdW5jdGlvbihlLHQpe3JldHVybiB0PyJcMCI9PT1lPyJcdWZmZmQiOmUuc2xpY2UoMCwtMSkrIlxcIitlLmNoYXJDb2RlQXQoZS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2V9LG9lPWZ1bmN0aW9uKCl7VCgpfSxhZT1iZShmdW5jdGlvbihlKXtyZXR1cm4hMD09PWUuZGlzYWJsZWQmJiJmaWVsZHNldCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9LHtkaXI6InBhcmVudE5vZGUiLG5leHQ6ImxlZ2VuZCJ9KTt0cnl7SC5hcHBseSh0PU8uY2FsbChwLmNoaWxkTm9kZXMpLHAuY2hpbGROb2RlcyksdFtwLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlKXtIPXthcHBseTp0Lmxlbmd0aD9mdW5jdGlvbihlLHQpe0wuYXBwbHkoZSxPLmNhbGwodCkpfTpmdW5jdGlvbihlLHQpe3ZhciBuPWUubGVuZ3RoLHI9MDt3aGlsZShlW24rK109dFtyKytdKTtlLmxlbmd0aD1uLTF9fX1mdW5jdGlvbiBzZSh0LGUsbixyKXt2YXIgaSxvLGEscyx1LGwsYyxmPWUmJmUub3duZXJEb2N1bWVudCxwPWU/ZS5ub2RlVHlwZTo5O2lmKG49bnx8W10sInN0cmluZyIhPXR5cGVvZiB0fHwhdHx8MSE9PXAmJjkhPT1wJiYxMSE9PXApcmV0dXJuIG47aWYoIXImJihUKGUpLGU9ZXx8QyxFKSl7aWYoMTEhPT1wJiYodT1aLmV4ZWModCkpKWlmKGk9dVsxXSl7aWYoOT09PXApe2lmKCEoYT1lLmdldEVsZW1lbnRCeUlkKGkpKSlyZXR1cm4gbjtpZihhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZSBpZihmJiYoYT1mLmdldEVsZW1lbnRCeUlkKGkpKSYmeShlLGEpJiZhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZXtpZih1WzJdKXJldHVybiBILmFwcGx5KG4sZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSksbjtpZigoaT11WzNdKSYmZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkobixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaSkpLG59aWYoZC5xc2EmJiFOW3QrIiAiXSYmKCF2fHwhdi50ZXN0KHQpKSYmKDEhPT1wfHwib2JqZWN0IiE9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkpe2lmKGM9dCxmPWUsMT09PXAmJihVLnRlc3QodCl8fHoudGVzdCh0KSkpeyhmPWVlLnRlc3QodCkmJnllKGUucGFyZW50Tm9kZSl8fGUpPT09ZSYmZC5zY29wZXx8KChzPWUuZ2V0QXR0cmlidXRlKCJpZCIpKT9zPXMucmVwbGFjZShyZSxpZSk6ZS5zZXRBdHRyaWJ1dGUoImlkIixzPVMpKSxvPShsPWgodCkpLmxlbmd0aDt3aGlsZShvLS0pbFtvXT0ocz8iIyIrczoiOnNjb3BlIikrIiAiK3hlKGxbb10pO2M9bC5qb2luKCIsIil9dHJ5e3JldHVybiBILmFwcGx5KG4sZi5xdWVyeVNlbGVjdG9yQWxsKGMpKSxufWNhdGNoKGUpe04odCwhMCl9ZmluYWxseXtzPT09UyYmZS5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gZyh0LnJlcGxhY2UoJCwiJDEiKSxlLG4scil9ZnVuY3Rpb24gdWUoKXt2YXIgcj1bXTtyZXR1cm4gZnVuY3Rpb24gZSh0LG4pe3JldHVybiByLnB1c2godCsiICIpPmIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Iuc2hpZnQoKV0sZVt0KyIgIl09bn19ZnVuY3Rpb24gbGUoZSl7cmV0dXJuIGVbU109ITAsZX1mdW5jdGlvbiBjZShlKXt2YXIgdD1DLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChlKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gZmUoZSx0KXt2YXIgbj1lLnNwbGl0KCJ8Iikscj1uLmxlbmd0aDt3aGlsZShyLS0pYi5hdHRySGFuZGxlW25bcl1dPXR9ZnVuY3Rpb24gcGUoZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiZlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7aWYocilyZXR1cm4gcjtpZihuKXdoaWxlKG49bi5uZXh0U2libGluZylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGRlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnR5cGU9PT10fX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09dHx8ImJ1dHRvbiI9PT10KSYmZS50eXBlPT09bn19ZnVuY3Rpb24gZ2UodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiJmb3JtImluIGU/ZS5wYXJlbnROb2RlJiYhMT09PWUuZGlzYWJsZWQ/ImxhYmVsImluIGU/ImxhYmVsImluIGUucGFyZW50Tm9kZT9lLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT10OmUuZGlzYWJsZWQ9PT10OmUuaXNEaXNhYmxlZD09PXR8fGUuaXNEaXNhYmxlZCE9PSF0JiZhZShlKT09PXQ6ZS5kaXNhYmxlZD09PXQ6ImxhYmVsImluIGUmJmUuZGlzYWJsZWQ9PT10fX1mdW5jdGlvbiB2ZShhKXtyZXR1cm4gbGUoZnVuY3Rpb24obyl7cmV0dXJuIG89K28sbGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoW10sZS5sZW5ndGgsbyksaT1yLmxlbmd0aDt3aGlsZShpLS0pZVtuPXJbaV1dJiYoZVtuXT0hKHRbbl09ZVtuXSkpfSl9KX1mdW5jdGlvbiB5ZShlKXtyZXR1cm4gZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZlfWZvcihlIGluIGQ9c2Uuc3VwcG9ydD17fSxpPXNlLmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZXNwYWNlVVJJLG49KGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiFZLnRlc3QodHx8biYmbi5ub2RlTmFtZXx8IkhUTUwiKX0sVD1zZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZT9lLm93bmVyRG9jdW1lbnR8fGU6cDtyZXR1cm4gciE9QyYmOT09PXIubm9kZVR5cGUmJnIuZG9jdW1lbnRFbGVtZW50JiYoYT0oQz1yKS5kb2N1bWVudEVsZW1lbnQsRT0haShDKSxwIT1DJiYobj1DLmRlZmF1bHRWaWV3KSYmbi50b3AhPT1uJiYobi5hZGRFdmVudExpc3RlbmVyP24uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixvZSwhMSk6bi5hdHRhY2hFdmVudCYmbi5hdHRhY2hFdmVudCgib251bmxvYWQiLG9lKSksZC5zY29wZT1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChDLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwidW5kZWZpbmVkIiE9dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCYmIWUucXVlcnlTZWxlY3RvckFsbCgiOnNjb3BlIGZpZWxkc2V0IGRpdiIpLmxlbmd0aH0pLGQuYXR0cmlidXRlcz1jZShmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxkLmdldEVsZW1lbnRzQnlUYWdOYW1lPWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKEMuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPUsudGVzdChDLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGQuZ2V0QnlJZD1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5pZD1TLCFDLmdldEVsZW1lbnRzQnlOYW1lfHwhQy5nZXRFbGVtZW50c0J5TmFtZShTKS5sZW5ndGh9KSxkLmdldEJ5SWQ/KGIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZSh0ZSxuZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSxiLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJkUpe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4/W25dOltdfX0pOihiLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgbj1lLnJlcGxhY2UodGUsbmUpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiB0JiZ0LnZhbHVlPT09bn19LGIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmRSl7dmFyIG4scixpLG89dC5nZXRFbGVtZW50QnlJZChlKTtpZihvKXtpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb107aT10LmdldEVsZW1lbnRzQnlOYW1lKGUpLHI9MDt3aGlsZShvPWlbcisrXSlpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb119cmV0dXJuW119fSksYi5maW5kLlRBRz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGUsdCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6ZC5xc2E/dC5xdWVyeVNlbGVjdG9yQWxsKGUpOnZvaWQgMH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoIioiPT09ZSl7d2hpbGUobj1vW2krK10pMT09PW4ubm9kZVR5cGUmJnIucHVzaChuKTtyZXR1cm4gcn1yZXR1cm4gb30sYi5maW5kLkNMQVNTPWQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmRSlyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxzPVtdLHY9W10sKGQucXNhPUsudGVzdChDLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGNlKGZ1bmN0aW9uKGUpe3ZhciB0O2EuYXBwZW5kQ2hpbGQoZSkuaW5uZXJIVE1MPSI8YSBpZD0nIitTKyInPjwvYT48c2VsZWN0IGlkPSciK1MrIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmdi5wdXNoKCJbKl4kXT0iK00rIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIiooPzp2YWx1ZXwiK1IrIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IitTKyItXSIpLmxlbmd0aHx8di5wdXNoKCJ+PSIpLCh0PUMuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkuc2V0QXR0cmlidXRlKCJuYW1lIiwiIiksZS5hcHBlbmRDaGlsZCh0KSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPScnXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIipuYW1lIitNKyIqPSIrTSsiKig/OicnfFwiXCIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8di5wdXNoKCI6Y2hlY2tlZCIpLGUucXVlcnlTZWxlY3RvckFsbCgiYSMiK1MrIisqIikubGVuZ3RofHx2LnB1c2goIi4jLitbK35dIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJcXFxmIiksdi5wdXNoKCJbXFxyXFxuXFxmXSIpfSksY2UoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+PHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PiI7dmFyIHQ9Qy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Quc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmdi5wdXNoKCJuYW1lIitNKyIqWypeJHwhfl0/PSIpLDIhPT1lLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoJiZ2LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5hcHBlbmRDaGlsZChlKS5kaXNhYmxlZD0hMCwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZGlzYWJsZWQiKS5sZW5ndGgmJnYucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSx2LnB1c2goIiwuKjoiKX0pKSwoZC5tYXRjaGVzU2VsZWN0b3I9Sy50ZXN0KGM9YS5tYXRjaGVzfHxhLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEub01hdGNoZXNTZWxlY3Rvcnx8YS5tc01hdGNoZXNTZWxlY3RvcikpJiZjZShmdW5jdGlvbihlKXtkLmRpc2Nvbm5lY3RlZE1hdGNoPWMuY2FsbChlLCIqIiksYy5jYWxsKGUsIltzIT0nJ106eCIpLHMucHVzaCgiIT0iLEYpfSksdj12Lmxlbmd0aCYmbmV3IFJlZ0V4cCh2LmpvaW4oInwiKSkscz1zLmxlbmd0aCYmbmV3IFJlZ0V4cChzLmpvaW4oInwiKSksdD1LLnRlc3QoYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikseT10fHxLLnRlc3QoYS5jb250YWlucyk/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxEPXQ/ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuPSFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBufHwoMSYobj0oZS5vd25lckRvY3VtZW50fHxlKT09KHQub3duZXJEb2N1bWVudHx8dCk/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KToxKXx8IWQuc29ydERldGFjaGVkJiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpPT09bj9lPT1DfHxlLm93bmVyRG9jdW1lbnQ9PXAmJnkocCxlKT8tMTp0PT1DfHx0Lm93bmVyRG9jdW1lbnQ9PXAmJnkocCx0KT8xOnU/UCh1LGUpLVAodSx0KTowOjQmbj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuLHI9MCxpPWUucGFyZW50Tm9kZSxvPXQucGFyZW50Tm9kZSxhPVtlXSxzPVt0XTtpZighaXx8IW8pcmV0dXJuIGU9PUM/LTE6dD09Qz8xOmk/LTE6bz8xOnU/UCh1LGUpLVAodSx0KTowO2lmKGk9PT1vKXJldHVybiBwZShlLHQpO249ZTt3aGlsZShuPW4ucGFyZW50Tm9kZSlhLnVuc2hpZnQobik7bj10O3doaWxlKG49bi5wYXJlbnROb2RlKXMudW5zaGlmdChuKTt3aGlsZShhW3JdPT09c1tyXSlyKys7cmV0dXJuIHI/cGUoYVtyXSxzW3JdKTphW3JdPT1wPy0xOnNbcl09PXA/MTowfSksQ30sc2UubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBzZShlLG51bGwsbnVsbCx0KX0sc2UubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoVChlKSxkLm1hdGNoZXNTZWxlY3RvciYmRSYmIU5bdCsiICJdJiYoIXN8fCFzLnRlc3QodCkpJiYoIXZ8fCF2LnRlc3QodCkpKXRyeXt2YXIgbj1jLmNhbGwoZSx0KTtpZihufHxkLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2goZSl7Tih0LCEwKX1yZXR1cm4gMDxzZSh0LEMsbnVsbCxbZV0pLmxlbmd0aH0sc2UuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKSx5KGUsdCl9LHNlLmF0dHI9ZnVuY3Rpb24oZSx0KXsoZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKTt2YXIgbj1iLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxyPW4mJmouY2FsbChiLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9uKGUsdCwhRSk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1yP3I6ZC5hdHRyaWJ1dGVzfHwhRT9lLmdldEF0dHJpYnV0ZSh0KToocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOm51bGx9LHNlLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4oZSsiIikucmVwbGFjZShyZSxpZSl9LHNlLmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sc2UudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9MCxpPTA7aWYobD0hZC5kZXRlY3REdXBsaWNhdGVzLHU9IWQuc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoRCksbCl7d2hpbGUodD1lW2krK10pdD09PWVbaV0mJihyPW4ucHVzaChpKSk7d2hpbGUoci0tKWUuc3BsaWNlKG5bcl0sMSl9cmV0dXJuIHU9bnVsbCxlfSxvPXNlLmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2Ugd2hpbGUodD1lW3IrK10pbis9byh0KTtyZXR1cm4gbn0sKGI9c2Uuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86bGUsbWF0Y2g6RyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKHRlLG5lKSxlWzNdPShlWzNdfHxlWzRdfHxlWzVdfHwiIikucmVwbGFjZSh0ZSxuZSksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHNlLmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnNlLmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzZdJiZlWzJdO3JldHVybiBHLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXT9lWzJdPWVbNF18fGVbNV18fCIiOm4mJlgudGVzdChuKSYmKHQ9aChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodGUsbmUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PW1bZSsiICJdO3JldHVybiB0fHwodD1uZXcgUmVnRXhwKCIoXnwiK00rIikiK2UrIigiK00rInwkKSIpKSYmbShlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoInN0cmluZyI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXNlLmF0dHIoZSxuKTtyZXR1cm4gbnVsbD09dD8iIT0iPT09cjohcnx8KHQrPSIiLCI9Ij09PXI/dD09PWk6IiE9Ij09PXI/dCE9PWk6Il49Ij09PXI/aSYmMD09PXQuaW5kZXhPZihpKToiKj0iPT09cj9pJiYtMTx0LmluZGV4T2YoaSk6IiQ9Ij09PXI/aSYmdC5zbGljZSgtaS5sZW5ndGgpPT09aToifj0iPT09cj8tMTwoIiAiK3QucmVwbGFjZShCLCIgIikrIiAiKS5pbmRleE9mKGkpOiJ8PSI9PT1yJiYodD09PWl8fHQuc2xpY2UoMCxpLmxlbmd0aCsxKT09PWkrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihoLGUsdCxnLHYpe3ZhciB5PSJudGgiIT09aC5zbGljZSgwLDMpLG09Imxhc3QiIT09aC5zbGljZSgtNCkseD0ib2YtdHlwZSI9PT1lO3JldHVybiAxPT09ZyYmMD09PXY/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbD15IT09bT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLGM9ZS5wYXJlbnROb2RlLGY9eCYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHA9IW4mJiF4LGQ9ITE7aWYoYyl7aWYoeSl7d2hpbGUobCl7YT1lO3doaWxlKGE9YVtsXSlpZih4P2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWY6MT09PWEubm9kZVR5cGUpcmV0dXJuITE7dT1sPSJvbmx5Ij09PWgmJiF1JiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKHU9W20/Yy5maXJzdENoaWxkOmMubGFzdENoaWxkXSxtJiZwKXtkPShzPShyPShpPShvPShhPWMpW1NdfHwoYVtTXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdfHxbXSlbMF09PT1rJiZyWzFdKSYmclsyXSxhPXMmJmMuY2hpbGROb2Rlc1tzXTt3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigxPT09YS5ub2RlVHlwZSYmKytkJiZhPT09ZSl7aVtoXT1bayxzLGRdO2JyZWFrfX1lbHNlIGlmKHAmJihkPXM9KHI9KGk9KG89KGE9ZSlbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF18fFtdKVswXT09PWsmJnJbMV0pLCExPT09ZCl3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigoeD9hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1mOjE9PT1hLm5vZGVUeXBlKSYmKytkJiYocCYmKChpPShvPWFbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF09W2ssZF0pLGE9PT1lKSlicmVhaztyZXR1cm4oZC09dik9PT1nfHxkJWc9PTAmJjA8PWQvZ319fSxQU0VVRE86ZnVuY3Rpb24oZSxvKXt2YXIgdCxhPWIucHNldWRvc1tlXXx8Yi5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIGFbU10/YShvKToxPGEubGVuZ3RoPyh0PVtlLGUsIiIsb10sYi5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/bGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoZSxvKSxpPXIubGVuZ3RoO3doaWxlKGktLSllW249UChlLHJbaV0pXT0hKHRbbl09cltpXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gYShlLDAsdCl9KTphfX0scHNldWRvczp7bm90OmxlKGZ1bmN0aW9uKGUpe3ZhciByPVtdLGk9W10scz1mKGUucmVwbGFjZSgkLCIkMSIpKTtyZXR1cm4gc1tTXT9sZShmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvPXMoZSxudWxsLHIsW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShpPW9bYV0pJiYoZVthXT0hKHRbYV09aSkpfSk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByWzBdPWUscyhyLG51bGwsbixpKSxyWzBdPW51bGwsIWkucG9wKCl9fSksaGFzOmxlKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gMDxzZSh0LGUpLmxlbmd0aH19KSxjb250YWluczpsZShmdW5jdGlvbih0KXtyZXR1cm4gdD10LnJlcGxhY2UodGUsbmUpLGZ1bmN0aW9uKGUpe3JldHVybi0xPChlLnRleHRDb250ZW50fHxvKGUpKS5pbmRleE9mKHQpfX0pLGxhbmc6bGUoZnVuY3Rpb24obil7cmV0dXJuIFYudGVzdChufHwiIil8fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK24pLG49bi5yZXBsYWNlKHRlLG5lKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGUpe3ZhciB0O2Rve2lmKHQ9RT9lLmxhbmc6ZS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGUuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuKHQ9dC50b0xvd2VyQ2FzZSgpKT09PW58fDA9PT10LmluZGV4T2YobisiLSIpfXdoaWxlKChlPWUucGFyZW50Tm9kZSkmJjE9PT1lLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bi5sb2NhdGlvbiYmbi5sb2NhdGlvbi5oYXNoO3JldHVybiB0JiZ0LnNsaWNlKDEpPT09ZS5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWF9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09Qy5hY3RpdmVFbGVtZW50JiYoIUMuaGFzRm9jdXN8fEMuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6Z2UoITEpLGRpc2FibGVkOmdlKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmISFlLmNoZWNrZWR8fCJvcHRpb24iPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwhMD09PWUuc2VsZWN0ZWR9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hYi5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEoudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09dC50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6dmUoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnZlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTp2ZShmdW5jdGlvbihlLHQsbil7cmV0dXJuW248MD9uK3Q6bl19KSxldmVuOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTE7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksbHQ6dmUoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0OnQ8bj90Om47MDw9LS1yOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDp2ZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6bjsrK3I8dDspZS5wdXNoKHIpO3JldHVybiBlfSl9fSkucHNldWRvcy5udGg9Yi5wc2V1ZG9zLmVxLHtyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSliLnBzZXVkb3NbZV09ZGUoZSk7Zm9yKGUgaW57c3VibWl0OiEwLHJlc2V0OiEwfSliLnBzZXVkb3NbZV09aGUoZSk7ZnVuY3Rpb24gbWUoKXt9ZnVuY3Rpb24geGUoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxyPSIiO3Q8bjt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBiZShzLGUsdCl7dmFyIHU9ZS5kaXIsbD1lLm5leHQsYz1sfHx1LGY9dCYmInBhcmVudE5vZGUiPT09YyxwPXIrKztyZXR1cm4gZS5maXJzdD9mdW5jdGlvbihlLHQsbil7d2hpbGUoZT1lW3VdKWlmKDE9PT1lLm5vZGVUeXBlfHxmKXJldHVybiBzKGUsdCxuKTtyZXR1cm4hMX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPVtrLHBdO2lmKG4pe3doaWxlKGU9ZVt1XSlpZigoMT09PWUubm9kZVR5cGV8fGYpJiZzKGUsdCxuKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGU9ZVt1XSlpZigxPT09ZS5ub2RlVHlwZXx8ZilpZihpPShvPWVbU118fChlW1NdPXt9KSlbZS51bmlxdWVJRF18fChvW2UudW5pcXVlSURdPXt9KSxsJiZsPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWU9ZVt1XXx8ZTtlbHNle2lmKChyPWlbY10pJiZyWzBdPT09ayYmclsxXT09PXApcmV0dXJuIGFbMl09clsyXTtpZigoaVtjXT1hKVsyXT1zKGUsdCxuKSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24gd2UoaSl7cmV0dXJuIDE8aS5sZW5ndGg/ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkubGVuZ3RoO3doaWxlKHItLSlpZighaVtyXShlLHQsbikpcmV0dXJuITE7cmV0dXJuITB9OmlbMF19ZnVuY3Rpb24gVGUoZSx0LG4scixpKXtmb3IodmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7czx1O3MrKykobz1lW3NdKSYmKG4mJiFuKG8scixpKXx8KGEucHVzaChvKSxsJiZ0LnB1c2gocykpKTtyZXR1cm4gYX1mdW5jdGlvbiBDZShkLGgsZyx2LHksZSl7cmV0dXJuIHYmJiF2W1NdJiYodj1DZSh2KSkseSYmIXlbU10mJih5PUNlKHksZSkpLGxlKGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVtdLHU9W10sbD10Lmxlbmd0aCxjPWV8fGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspc2UoZSx0W3JdLG4pO3JldHVybiBufShofHwiKiIsbi5ub2RlVHlwZT9bbl06bixbXSksZj0hZHx8IWUmJmg/YzpUZShjLHMsZCxuLHIpLHA9Zz95fHwoZT9kOmx8fHYpP1tdOnQ6ZjtpZihnJiZnKGYscCxuLHIpLHYpe2k9VGUocCx1KSx2KGksW10sbixyKSxvPWkubGVuZ3RoO3doaWxlKG8tLSkoYT1pW29dKSYmKHBbdVtvXV09IShmW3Vbb11dPWEpKX1pZihlKXtpZih5fHxkKXtpZih5KXtpPVtdLG89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiZpLnB1c2goZltvXT1hKTt5KG51bGwscD1bXSxpLHIpfW89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiYtMTwoaT15P1AoZSxhKTpzW29dKSYmKGVbaV09ISh0W2ldPWEpKX19ZWxzZSBwPVRlKHA9PT10P3Auc3BsaWNlKGwscC5sZW5ndGgpOnApLHk/eShudWxsLHQscCxyKTpILmFwcGx5KHQscCl9KX1mdW5jdGlvbiBFZShlKXtmb3IodmFyIGksdCxuLHI9ZS5sZW5ndGgsbz1iLnJlbGF0aXZlW2VbMF0udHlwZV0sYT1vfHxiLnJlbGF0aXZlWyIgIl0scz1vPzE6MCx1PWJlKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09aX0sYSwhMCksbD1iZShmdW5jdGlvbihlKXtyZXR1cm4tMTxQKGksZSl9LGEsITApLGM9W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj0hbyYmKG58fHQhPT13KXx8KChpPXQpLm5vZGVUeXBlP3UoZSx0LG4pOmwoZSx0LG4pKTtyZXR1cm4gaT1udWxsLHJ9XTtzPHI7cysrKWlmKHQ9Yi5yZWxhdGl2ZVtlW3NdLnR5cGVdKWM9W2JlKHdlKGMpLHQpXTtlbHNle2lmKCh0PWIuZmlsdGVyW2Vbc10udHlwZV0uYXBwbHkobnVsbCxlW3NdLm1hdGNoZXMpKVtTXSl7Zm9yKG49KytzO248cjtuKyspaWYoYi5yZWxhdGl2ZVtlW25dLnR5cGVdKWJyZWFrO3JldHVybiBDZSgxPHMmJndlKGMpLDE8cyYmeGUoZS5zbGljZSgwLHMtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW3MtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZSgkLCIkMSIpLHQsczxuJiZFZShlLnNsaWNlKHMsbikpLG48ciYmRWUoZT1lLnNsaWNlKG4pKSxuPHImJnhlKGUpKX1jLnB1c2godCl9cmV0dXJuIHdlKGMpfXJldHVybiBtZS5wcm90b3R5cGU9Yi5maWx0ZXJzPWIucHNldWRvcyxiLnNldEZpbHRlcnM9bmV3IG1lLGg9c2UudG9rZW5pemU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHMsdSxsPXhbZSsiICJdO2lmKGwpcmV0dXJuIHQ/MDpsLnNsaWNlKDApO2E9ZSxzPVtdLHU9Yi5wcmVGaWx0ZXI7d2hpbGUoYSl7Zm9yKG8gaW4gbiYmIShyPV8uZXhlYyhhKSl8fChyJiYoYT1hLnNsaWNlKHJbMF0ubGVuZ3RoKXx8YSkscy5wdXNoKGk9W10pKSxuPSExLChyPXouZXhlYyhhKSkmJihuPXIuc2hpZnQoKSxpLnB1c2goe3ZhbHVlOm4sdHlwZTpyWzBdLnJlcGxhY2UoJCwiICIpfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSksYi5maWx0ZXIpIShyPUdbb10uZXhlYyhhKSl8fHVbb10mJiEocj11W29dKHIpKXx8KG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOm8sbWF0Y2hlczpyfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/YS5sZW5ndGg6YT9zZS5lcnJvcihlKTp4KGUscykuc2xpY2UoMCl9LGY9c2UuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHYseSxtLHgscixpPVtdLG89W10sYT1BW2UrIiAiXTtpZighYSl7dHx8KHQ9aChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pKGE9RWUodFtuXSkpW1NdP2kucHVzaChhKTpvLnB1c2goYSk7KGE9QShlLCh2PW8sbT0wPCh5PWkpLmxlbmd0aCx4PTA8di5sZW5ndGgscj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1PTAsbD0iMCIsYz1lJiZbXSxmPVtdLHA9dyxkPWV8fHgmJmIuZmluZC5UQUcoIioiLGkpLGg9ays9bnVsbD09cD8xOk1hdGgucmFuZG9tKCl8fC4xLGc9ZC5sZW5ndGg7Zm9yKGkmJih3PXQ9PUN8fHR8fGkpO2whPT1nJiZudWxsIT0obz1kW2xdKTtsKyspe2lmKHgmJm8pe2E9MCx0fHxvLm93bmVyRG9jdW1lbnQ9PUN8fChUKG8pLG49IUUpO3doaWxlKHM9dlthKytdKWlmKHMobyx0fHxDLG4pKXtyLnB1c2gobyk7YnJlYWt9aSYmKGs9aCl9bSYmKChvPSFzJiZvKSYmdS0tLGUmJmMucHVzaChvKSl9aWYodSs9bCxtJiZsIT09dSl7YT0wO3doaWxlKHM9eVthKytdKXMoYyxmLHQsbik7aWYoZSl7aWYoMDx1KXdoaWxlKGwtLSljW2xdfHxmW2xdfHwoZltsXT1xLmNhbGwocikpO2Y9VGUoZil9SC5hcHBseShyLGYpLGkmJiFlJiYwPGYubGVuZ3RoJiYxPHUreS5sZW5ndGgmJnNlLnVuaXF1ZVNvcnQocil9cmV0dXJuIGkmJihrPWgsdz1wKSxjfSxtP2xlKHIpOnIpKSkuc2VsZWN0b3I9ZX1yZXR1cm4gYX0sZz1zZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLGM9IXImJmgoZT1sLnNlbGVjdG9yfHxlKTtpZihuPW58fFtdLDE9PT1jLmxlbmd0aCl7aWYoMjwobz1jWzBdPWNbMF0uc2xpY2UoMCkpLmxlbmd0aCYmIklEIj09PShhPW9bMF0pLnR5cGUmJjk9PT10Lm5vZGVUeXBlJiZFJiZiLnJlbGF0aXZlW29bMV0udHlwZV0pe2lmKCEodD0oYi5maW5kLklEKGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtsJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZShvLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPUcubmVlZHNDb250ZXh0LnRlc3QoZSk/MDpvLmxlbmd0aDt3aGlsZShpLS0pe2lmKGE9b1tpXSxiLnJlbGF0aXZlW3M9YS50eXBlXSlicmVhaztpZigodT1iLmZpbmRbc10pJiYocj11KGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSxlZS50ZXN0KG9bMF0udHlwZSkmJnllKHQucGFyZW50Tm9kZSl8fHQpKSl7aWYoby5zcGxpY2UoaSwxKSwhKGU9ci5sZW5ndGgmJnhlKG8pKSlyZXR1cm4gSC5hcHBseShuLHIpLG47YnJlYWt9fX1yZXR1cm4obHx8ZihlLGMpKShyLHQsIUUsbiwhdHx8ZWUudGVzdChlKSYmeWUodC5wYXJlbnROb2RlKXx8dCksbn0sZC5zb3J0U3RhYmxlPVMuc3BsaXQoIiIpLnNvcnQoRCkuam9pbigiIik9PT1TLGQuZGV0ZWN0RHVwbGljYXRlcz0hIWwsVCgpLGQuc29ydERldGFjaGVkPWNlKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQy5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGZlKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxkLmF0dHJpYnV0ZXMmJmNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGZlKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuJiYiaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxmZShSLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLHNlfShDKTtTLmZpbmQ9ZCxTLmV4cHI9ZC5zZWxlY3RvcnMsUy5leHByWyI6Il09Uy5leHByLnBzZXVkb3MsUy51bmlxdWVTb3J0PVMudW5pcXVlPWQudW5pcXVlU29ydCxTLnRleHQ9ZC5nZXRUZXh0LFMuaXNYTUxEb2M9ZC5pc1hNTCxTLmNvbnRhaW5zPWQuY29udGFpbnMsUy5lc2NhcGVTZWxlY3Rvcj1kLmVzY2FwZTt2YXIgaD1mdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT12b2lkIDAhPT1uO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmUyhlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LFQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LGs9Uy5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBBKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX12YXIgTj0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaTtmdW5jdGlvbiBEKGUsbixyKXtyZXR1cm4gbShuKT9TLmdyZXAoZSxmdW5jdGlvbihlLHQpe3JldHVybiEhbi5jYWxsKGUsdCxlKSE9PXJ9KTpuLm5vZGVUeXBlP1MuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09biE9PXJ9KToic3RyaW5nIiE9dHlwZW9mIG4/Uy5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuLTE8aS5jYWxsKG4sZSkhPT1yfSk6Uy5maWx0ZXIobixlLHIpfVMuZmlsdGVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1yLm5vZGVUeXBlP1MuZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106Uy5maW5kLm1hdGNoZXMoZSxTLmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LFMuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmxlbmd0aCxpPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayhTKGUpLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7dDxyO3QrKylpZihTLmNvbnRhaW5zKGlbdF0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKG49dGhpcy5wdXNoU3RhY2soW10pLHQ9MDt0PHI7dCsrKVMuZmluZChlLGlbdF0sbik7cmV0dXJuIDE8cj9TLnVuaXF1ZVNvcnQobik6bn0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFEKHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZrLnRlc3QoZSk/UyhlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBqLHE9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLzsoUy5mbi5pbml0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpO2lmKCFlKXJldHVybiB0aGlzO2lmKG49bnx8aiwic3RyaW5nIj09dHlwZW9mIGUpe2lmKCEocj0iPCI9PT1lWzBdJiYiPiI9PT1lW2UubGVuZ3RoLTFdJiYzPD1lLmxlbmd0aD9bbnVsbCxlLG51bGxdOnEuZXhlYyhlKSl8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgUz90WzBdOnQsUy5tZXJnZSh0aGlzLFMucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6RSwhMCkpLE4udGVzdChyWzFdKSYmUy5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpbSh0aGlzW3JdKT90aGlzW3JdKHRbcl0pOnRoaXMuYXR0cihyLHRbcl0pO3JldHVybiB0aGlzfXJldHVybihpPUUuZ2V0RWxlbWVudEJ5SWQoclsyXSkpJiYodGhpc1swXT1pLHRoaXMubGVuZ3RoPTEpLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOm0oZSk/dm9pZCAwIT09bi5yZWFkeT9uLnJlYWR5KGUpOmUoUyk6Uy5tYWtlQXJyYXkoZSx0aGlzKX0pLnByb3RvdHlwZT1TLmZuLGo9UyhFKTt2YXIgTD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxIPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2Z1bmN0aW9uIE8oZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfVMuZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9UyhlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxuO2UrKylpZihTLmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT0ic3RyaW5nIiE9dHlwZW9mIGUmJlMoZSk7aWYoIWsudGVzdChlKSlmb3IoO3I8aTtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYoYT8tMTxhLmluZGV4KG4pOjE9PT1uLm5vZGVUeXBlJiZTLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtvLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKDE8by5sZW5ndGg/Uy51bmlxdWVTb3J0KG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/aS5jYWxsKFMoZSksdGhpc1swXSk6aS5jYWxsKHRoaXMsZS5qcXVlcnk/ZVswXTplKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnB1c2hTdGFjayhTLnVuaXF1ZVNvcnQoUy5tZXJnZSh0aGlzLmdldCgpLFMoZSx0KSkpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksUy5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gaChlLCJwYXJlbnROb2RlIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gTyhlLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBPKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGgoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGgoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBoKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBUKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gVChlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5jb250ZW50RG9jdW1lbnQmJnIoZS5jb250ZW50RG9jdW1lbnQpP2UuY29udGVudERvY3VtZW50OihBKGUsInRlbXBsYXRlIikmJihlPWUuY29udGVudHx8ZSksUy5tZXJnZShbXSxlLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKHIsaSl7Uy5mbltyXT1mdW5jdGlvbihlLHQpe3ZhciBuPVMubWFwKHRoaXMsaSxlKTtyZXR1cm4iVW50aWwiIT09ci5zbGljZSgtNSkmJih0PWUpLHQmJiJzdHJpbmciPT10eXBlb2YgdCYmKG49Uy5maWx0ZXIodCxuKSksMTx0aGlzLmxlbmd0aCYmKEhbcl18fFMudW5pcXVlU29ydChuKSxMLnRlc3QocikmJm4ucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgUD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIFIoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gTShlKXt0aHJvdyBlfWZ1bmN0aW9uIEkoZSx0LG4scil7dmFyIGk7dHJ5e2UmJm0oaT1lLnByb21pc2UpP2kuY2FsbChlKS5kb25lKHQpLmZhaWwobik6ZSYmbShpPWUudGhlbik/aS5jYWxsKGUsdCxuKTp0LmFwcGx5KHZvaWQgMCxbZV0uc2xpY2UocikpfWNhdGNoKGUpe24uYXBwbHkodm9pZCAwLFtlXSl9fVMuQ2FsbGJhY2tzPWZ1bmN0aW9uKHIpe3ZhciBlLG47cj0ic3RyaW5nIj09dHlwZW9mIHI/KGU9cixuPXt9LFMuZWFjaChlLm1hdGNoKFApfHxbXSxmdW5jdGlvbihlLHQpe25bdF09ITB9KSxuKTpTLmV4dGVuZCh7fSxyKTt2YXIgaSx0LG8sYSxzPVtdLHU9W10sbD0tMSxjPWZ1bmN0aW9uKCl7Zm9yKGE9YXx8ci5vbmNlLG89aT0hMDt1Lmxlbmd0aDtsPS0xKXt0PXUuc2hpZnQoKTt3aGlsZSgrK2w8cy5sZW5ndGgpITE9PT1zW2xdLmFwcGx5KHRbMF0sdFsxXSkmJnIuc3RvcE9uRmFsc2UmJihsPXMubGVuZ3RoLHQ9ITEpfXIubWVtb3J5fHwodD0hMSksaT0hMSxhJiYocz10P1tdOiIiKX0sZj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIHMmJih0JiYhaSYmKGw9cy5sZW5ndGgtMSx1LnB1c2godCkpLGZ1bmN0aW9uIG4oZSl7Uy5lYWNoKGUsZnVuY3Rpb24oZSx0KXttKHQpP3IudW5pcXVlJiZmLmhhcyh0KXx8cy5wdXNoKHQpOnQmJnQubGVuZ3RoJiYic3RyaW5nIiE9PXcodCkmJm4odCl9KX0oYXJndW1lbnRzKSx0JiYhaSYmYygpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gUy5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKC0xPChuPVMuaW5BcnJheSh0LHMsbikpKXMuc3BsaWNlKG4sMSksbjw9bCYmbC0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlPy0xPFMuaW5BcnJheShlLHMpOjA8cy5sZW5ndGh9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHMmJihzPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT1bXSxzPXQ9IiIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sbG9jazpmdW5jdGlvbigpe3JldHVybiBhPXU9W10sdHx8aXx8KHM9dD0iIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFhfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiBhfHwodD1bZSwodD10fHxbXSkuc2xpY2U/dC5zbGljZSgpOnRdLHUucHVzaCh0KSxpfHxjKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW99fTtyZXR1cm4gZn0sUy5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciBvPVtbIm5vdGlmeSIsInByb2dyZXNzIixTLkNhbGxiYWNrcygibWVtb3J5IiksUy5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxpPSJwZW5kaW5nIixhPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBpfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGEudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGk9YXJndW1lbnRzO3JldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKHIpe1MuZWFjaChvLGZ1bmN0aW9uKGUsdCl7dmFyIG49bShpW3RbNF1dKSYmaVt0WzRdXTtzW3RbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9biYmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmbShlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHIubm90aWZ5KS5kb25lKHIucmVzb2x2ZSkuZmFpbChyLnJlamVjdCk6clt0WzBdKyJXaXRoIl0odGhpcyxuP1tlXTphcmd1bWVudHMpfSl9KSxpPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxuLHIpe3ZhciB1PTA7ZnVuY3Rpb24gbChpLG8sYSxzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLHI9YXJndW1lbnRzLGU9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKCEoaTx1KSl7aWYoKGU9YS5hcHBseShuLHIpKT09PW8ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO3Q9ZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpJiZlLnRoZW4sbSh0KT9zP3QuY2FsbChlLGwodSxvLFIscyksbCh1LG8sTSxzKSk6KHUrKyx0LmNhbGwoZSxsKHUsbyxSLHMpLGwodSxvLE0scyksbCh1LG8sUixvLm5vdGlmeVdpdGgpKSk6KGEhPT1SJiYobj12b2lkIDAscj1bZV0pLChzfHxvLnJlc29sdmVXaXRoKShuLHIpKX19LHQ9cz9lOmZ1bmN0aW9uKCl7dHJ5e2UoKX1jYXRjaChlKXtTLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJlMuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHQuc3RhY2tUcmFjZSksdTw9aSsxJiYoYSE9PU0mJihuPXZvaWQgMCxyPVtlXSksby5yZWplY3RXaXRoKG4scikpfX07aT90KCk6KFMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYodC5zdGFja1RyYWNlPVMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLEMuc2V0VGltZW91dCh0KSl9fXJldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKGUpe29bMF1bM10uYWRkKGwoMCxlLG0ocik/cjpSLGUubm90aWZ5V2l0aCkpLG9bMV1bM10uYWRkKGwoMCxlLG0odCk/dDpSKSksb1syXVszXS5hZGQobCgwLGUsbShuKT9uOk0pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9TLmV4dGVuZChlLGEpOmF9fSxzPXt9O3JldHVybiBTLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPXRbMl0scj10WzVdO2FbdFsxXV09bi5hZGQsciYmbi5hZGQoZnVuY3Rpb24oKXtpPXJ9LG9bMy1lXVsyXS5kaXNhYmxlLG9bMy1lXVszXS5kaXNhYmxlLG9bMF1bMl0ubG9jayxvWzBdWzNdLmxvY2spLG4uYWRkKHRbM10uZmlyZSksc1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBzW3RbMF0rIldpdGgiXSh0aGlzPT09cz92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LHNbdFswXSsiV2l0aCJdPW4uZmlyZVdpdGh9KSxhLnByb21pc2UocyksZSYmZS5jYWxsKHMscyksc30sd2hlbjpmdW5jdGlvbihlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHQ9bixyPUFycmF5KHQpLGk9cy5jYWxsKGFyZ3VtZW50cyksbz1TLkRlZmVycmVkKCksYT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7clt0XT10aGlzLGlbdF09MTxhcmd1bWVudHMubGVuZ3RoP3MuY2FsbChhcmd1bWVudHMpOmUsLS1ufHxvLnJlc29sdmVXaXRoKHIsaSl9fTtpZihuPD0xJiYoSShlLG8uZG9uZShhKHQpKS5yZXNvbHZlLG8ucmVqZWN0LCFuKSwicGVuZGluZyI9PT1vLnN0YXRlKCl8fG0oaVt0XSYmaVt0XS50aGVuKSkpcmV0dXJuIG8udGhlbigpO3doaWxlKHQtLSlJKGlbdF0sYSh0KSxvLnJlamVjdCk7cmV0dXJuIG8ucHJvbWlzZSgpfX0pO3ZhciBXPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO1MuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlLHQpe0MuY29uc29sZSYmQy5jb25zb2xlLndhcm4mJmUmJlcudGVzdChlLm5hbWUpJiZDLmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIitlLm1lc3NhZ2UsZS5zdGFjayx0KX0sUy5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlKXtDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9O3ZhciBGPVMuRGVmZXJyZWQoKTtmdW5jdGlvbiBCKCl7RS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixCKSxDLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLEIpLFMucmVhZHkoKX1TLmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7Uy5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LFMuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS1TLnJlYWR5V2FpdDpTLmlzUmVhZHkpfHwoUy5pc1JlYWR5PSEwKSE9PWUmJjA8LS1TLnJlYWR5V2FpdHx8Ri5yZXNvbHZlV2l0aChFLFtTXSl9fSksUy5yZWFkeS50aGVuPUYudGhlbiwiY29tcGxldGUiPT09RS5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1FLnJlYWR5U3RhdGUmJiFFLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9DLnNldFRpbWVvdXQoUy5yZWFkeSk6KEUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQiksQy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixCKSk7dmFyICQ9ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZigib2JqZWN0Ij09PXcobikpZm9yKHMgaW4gaT0hMCxuKSQoZSx0LHMsbltzXSwhMCxvLGEpO2Vsc2UgaWYodm9pZCAwIT09ciYmKGk9ITAsbShyKXx8KGE9ITApLGwmJihhPyh0LmNhbGwoZSxyKSx0PW51bGwpOihsPXQsdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY2FsbChTKGUpLG4pfSkpLHQpKWZvcig7czx1O3MrKyl0KGVbc10sbixhP3I6ci5jYWxsKGVbc10scyx0KGVbc10sbikpKTtyZXR1cm4gaT9lOmw/dC5jYWxsKGUpOnU/dChlWzBdLG4pOm99LF89L14tbXMtLyx6PS8tKFthLXpdKS9nO2Z1bmN0aW9uIFUoZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIFgoZSl7cmV0dXJuIGUucmVwbGFjZShfLCJtcy0iKS5yZXBsYWNlKHosVSl9dmFyIFY9ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfHw5PT09ZS5ub2RlVHlwZXx8IStlLm5vZGVUeXBlfTtmdW5jdGlvbiBHKCl7dGhpcy5leHBhbmRvPVMuZXhwYW5kbytHLnVpZCsrfUcudWlkPTEsRy5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdHx8KHQ9T2JqZWN0LmNyZWF0ZShudWxsKSxWKGUpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dDpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLmV4cGFuZG8se3ZhbHVlOnQsY29uZmlndXJhYmxlOiEwfSkpKSx0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9dGhpcy5jYWNoZShlKTtpZigic3RyaW5nIj09dHlwZW9mIHQpaVtYKHQpXT1uO2Vsc2UgZm9yKHIgaW4gdClpW1gocildPXRbcl07cmV0dXJuIGl9LGdldDpmdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3RoaXMuY2FjaGUoZSk6ZVt0aGlzLmV4cGFuZG9dJiZlW3RoaXMuZXhwYW5kb11bWCh0KV19LGFjY2VzczpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PXR8fHQmJiJzdHJpbmciPT10eXBlb2YgdCYmdm9pZCAwPT09bj90aGlzLmdldChlLHQpOih0aGlzLnNldChlLHQsbiksdm9pZCAwIT09bj9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWVbdGhpcy5leHBhbmRvXTtpZih2b2lkIDAhPT1yKXtpZih2b2lkIDAhPT10KXtuPSh0PUFycmF5LmlzQXJyYXkodCk/dC5tYXAoWCk6KHQ9WCh0KSlpbiByP1t0XTp0Lm1hdGNoKFApfHxbXSkubGVuZ3RoO3doaWxlKG4tLSlkZWxldGUgclt0W25dXX0odm9pZCAwPT09dHx8Uy5pc0VtcHR5T2JqZWN0KHIpKSYmKGUubm9kZVR5cGU/ZVt0aGlzLmV4cGFuZG9dPXZvaWQgMDpkZWxldGUgZVt0aGlzLmV4cGFuZG9dKX19LGhhc0RhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLmV4cGFuZG9dO3JldHVybiB2b2lkIDAhPT10JiYhUy5pc0VtcHR5T2JqZWN0KHQpfX07dmFyIFk9bmV3IEcsUT1uZXcgRyxKPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sSz0vW0EtWl0vZztmdW5jdGlvbiBaKGUsdCxuKXt2YXIgcixpO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoSywiLSQmIikudG9Mb3dlckNhc2UoKSwic3RyaW5nIj09dHlwZW9mKG49ZS5nZXRBdHRyaWJ1dGUocikpKXt0cnl7bj0idHJ1ZSI9PT0oaT1uKXx8ImZhbHNlIiE9PWkmJigibnVsbCI9PT1pP251bGw6aT09PStpKyIiPytpOkoudGVzdChpKT9KU09OLnBhcnNlKGkpOmkpfWNhdGNoKGUpe31RLnNldChlLHQsbil9ZWxzZSBuPXZvaWQgMDtyZXR1cm4gbn1TLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gUS5oYXNEYXRhKGUpfHxZLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBRLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtRLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFkuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtZLnJlbW92ZShlLHQpfX0pLFMuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKG4sZSl7dmFyIHQscixpLG89dGhpc1swXSxhPW8mJm8uYXR0cmlidXRlcztpZih2b2lkIDA9PT1uKXtpZih0aGlzLmxlbmd0aCYmKGk9US5nZXQobyksMT09PW8ubm9kZVR5cGUmJiFZLmdldChvLCJoYXNEYXRhQXR0cnMiKSkpe3Q9YS5sZW5ndGg7d2hpbGUodC0tKWFbdF0mJjA9PT0ocj1hW3RdLm5hbWUpLmluZGV4T2YoImRhdGEtIikmJihyPVgoci5zbGljZSg1KSksWihvLHIsaVtyXSkpO1kuc2V0KG8sImhhc0RhdGFBdHRycyIsITApfXJldHVybiBpfXJldHVybiJvYmplY3QiPT10eXBlb2Ygbj90aGlzLmVhY2goZnVuY3Rpb24oKXtRLnNldCh0aGlzLG4pfSk6JCh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0O2lmKG8mJnZvaWQgMD09PWUpcmV0dXJuIHZvaWQgMCE9PSh0PVEuZ2V0KG8sbikpP3Q6dm9pZCAwIT09KHQ9WihvLG4pKT90OnZvaWQgMDt0aGlzLmVhY2goZnVuY3Rpb24oKXtRLnNldCh0aGlzLG4sZSl9KX0sbnVsbCxlLDE8YXJndW1lbnRzLmxlbmd0aCxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5yZW1vdmUodGhpcyxlKX0pfX0pLFMuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoZSlyZXR1cm4gdD0odHx8ImZ4IikrInF1ZXVlIixyPVkuZ2V0KGUsdCksbiYmKCFyfHxBcnJheS5pc0FycmF5KG4pP3I9WS5hY2Nlc3MoZSx0LFMubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdfSxkZXF1ZXVlOmZ1bmN0aW9uKGUsdCl7dD10fHwiZngiO3ZhciBuPVMucXVldWUoZSx0KSxyPW4ubGVuZ3RoLGk9bi5zaGlmdCgpLG89Uy5fcXVldWVIb29rcyhlLHQpOyJpbnByb2dyZXNzIj09PWkmJihpPW4uc2hpZnQoKSxyLS0pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxmdW5jdGlvbigpe1MuZGVxdWV1ZShlLHQpfSxvKSksIXImJm8mJm8uZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrInF1ZXVlSG9va3MiO3JldHVybiBZLmdldChlLG4pfHxZLmFjY2VzcyhlLG4se2VtcHR5OlMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe1kucmVtb3ZlKGUsW3QrInF1ZXVlIixuXSl9KX0pfX0pLFMuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbih0LG4pe3ZhciBlPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiB0JiYobj10LHQ9ImZ4IixlLS0pLGFyZ3VtZW50cy5sZW5ndGg8ZT9TLnF1ZXVlKHRoaXNbMF0sdCk6dm9pZCAwPT09bj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPVMucXVldWUodGhpcyx0LG4pO1MuX3F1ZXVlSG9va3ModGhpcyx0KSwiZngiPT09dCYmImlucHJvZ3Jlc3MiIT09ZVswXSYmUy5kZXF1ZXVlKHRoaXMsdCl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5kZXF1ZXVlKHRoaXMsZSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MSxpPVMuRGVmZXJyZWQoKSxvPXRoaXMsYT10aGlzLmxlbmd0aCxzPWZ1bmN0aW9uKCl7LS1yfHxpLnJlc29sdmVXaXRoKG8sW29dKX07InN0cmluZyIhPXR5cGVvZiBlJiYodD1lLGU9dm9pZCAwKSxlPWV8fCJmeCI7d2hpbGUoYS0tKShuPVkuZ2V0KG9bYV0sZSsicXVldWVIb29rcyIpKSYmbi5lbXB0eSYmKHIrKyxuLmVtcHR5LmFkZChzKSk7cmV0dXJuIHMoKSxpLnByb21pc2UodCl9fSk7dmFyIGVlPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHRlPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitlZSsiKShbYS16JV0qKSQiLCJpIiksbmU9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxyZT1FLmRvY3VtZW50RWxlbWVudCxpZT1mdW5jdGlvbihlKXtyZXR1cm4gUy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9LG9lPXtjb21wb3NlZDohMH07cmUuZ2V0Um9vdE5vZGUmJihpZT1mdW5jdGlvbihlKXtyZXR1cm4gUy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl8fGUuZ2V0Um9vdE5vZGUob2UpPT09ZS5vd25lckRvY3VtZW50fSk7dmFyIGFlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm5vbmUiPT09KGU9dHx8ZSkuc3R5bGUuZGlzcGxheXx8IiI9PT1lLnN0eWxlLmRpc3BsYXkmJmllKGUpJiYibm9uZSI9PT1TLmNzcyhlLCJkaXNwbGF5Iil9O2Z1bmN0aW9uIHNlKGUsdCxuLHIpe3ZhciBpLG8sYT0yMCxzPXI/ZnVuY3Rpb24oKXtyZXR1cm4gci5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gUy5jc3MoZSx0LCIiKX0sdT1zKCksbD1uJiZuWzNdfHwoUy5jc3NOdW1iZXJbdF0/IiI6InB4IiksYz1lLm5vZGVUeXBlJiYoUy5jc3NOdW1iZXJbdF18fCJweCIhPT1sJiYrdSkmJnRlLmV4ZWMoUy5jc3MoZSx0KSk7aWYoYyYmY1szXSE9PWwpe3UvPTIsbD1sfHxjWzNdLGM9K3V8fDE7d2hpbGUoYS0tKVMuc3R5bGUoZSx0LGMrbCksKDEtbykqKDEtKG89cygpL3V8fC41KSk8PTAmJihhPTApLGMvPW87Yyo9MixTLnN0eWxlKGUsdCxjK2wpLG49bnx8W119cmV0dXJuIG4mJihjPStjfHwrdXx8MCxpPW5bMV0/YysoblsxXSsxKSpuWzJdOituWzJdLHImJihyLnVuaXQ9bCxyLnN0YXJ0PWMsci5lbmQ9aSkpLGl9dmFyIHVlPXt9O2Z1bmN0aW9uIGxlKGUsdCl7Zm9yKHZhciBuLHIsaSxvLGEscyx1LGw9W10sYz0wLGY9ZS5sZW5ndGg7YzxmO2MrKykocj1lW2NdKS5zdHlsZSYmKG49ci5zdHlsZS5kaXNwbGF5LHQ/KCJub25lIj09PW4mJihsW2NdPVkuZ2V0KHIsImRpc3BsYXkiKXx8bnVsbCxsW2NdfHwoci5zdHlsZS5kaXNwbGF5PSIiKSksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJmFlKHIpJiYobFtjXT0odT1hPW89dm9pZCAwLGE9KGk9cikub3duZXJEb2N1bWVudCxzPWkubm9kZU5hbWUsKHU9dWVbc10pfHwobz1hLmJvZHkuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KHMpKSx1PVMuY3NzKG8sImRpc3BsYXkiKSxvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobyksIm5vbmUiPT09dSYmKHU9ImJsb2NrIiksdWVbc109dSkpKSk6Im5vbmUiIT09biYmKGxbY109Im5vbmUiLFkuc2V0KHIsImRpc3BsYXkiLG4pKSk7Zm9yKGM9MDtjPGY7YysrKW51bGwhPWxbY10mJihlW2NdLnN0eWxlLmRpc3BsYXk9bFtjXSk7cmV0dXJuIGV9Uy5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gbGUodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gbGUodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7YWUodGhpcyk/Uyh0aGlzKS5zaG93KCk6Uyh0aGlzKS5oaWRlKCl9KX19KTt2YXIgY2UsZmUscGU9L14oPzpjaGVja2JveHxyYWRpbykkL2ksZGU9LzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSopL2ksaGU9L14kfF5tb2R1bGUkfFwvKD86amF2YXxlY21hKXNjcmlwdC9pO2NlPUUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLmFwcGVuZENoaWxkKEUuY3JlYXRlRWxlbWVudCgiZGl2IikpLChmZT1FLmNyZWF0ZUVsZW1lbnQoImlucHV0IikpLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksZmUuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpLGZlLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxjZS5hcHBlbmRDaGlsZChmZSkseS5jaGVja0Nsb25lPWNlLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxjZS5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLHkubm9DbG9uZUNoZWNrZWQ9ISFjZS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsY2UuaW5uZXJIVE1MPSI8b3B0aW9uPjwvb3B0aW9uPiIseS5vcHRpb249ISFjZS5sYXN0Q2hpbGQ7dmFyIGdlPXt0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07ZnVuY3Rpb24gdmUoZSx0KXt2YXIgbjtyZXR1cm4gbj0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsP2UucXVlcnlTZWxlY3RvckFsbCh0fHwiKiIpOltdLHZvaWQgMD09PXR8fHQmJkEoZSx0KT9TLm1lcmdlKFtlXSxuKTpufWZ1bmN0aW9uIHllKGUsdCl7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKVkuc2V0KGVbbl0sImdsb2JhbEV2YWwiLCF0fHxZLmdldCh0W25dLCJnbG9iYWxFdmFsIikpfWdlLnRib2R5PWdlLnRmb290PWdlLmNvbGdyb3VwPWdlLmNhcHRpb249Z2UudGhlYWQsZ2UudGg9Z2UudGQseS5vcHRpb258fChnZS5vcHRncm91cD1nZS5vcHRpb249WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSk7dmFyIG1lPS88fCYjP1x3KzsvO2Z1bmN0aW9uIHhlKGUsdCxuLHIsaSl7Zm9yKHZhciBvLGEscyx1LGwsYyxmPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHA9W10sZD0wLGg9ZS5sZW5ndGg7ZDxoO2QrKylpZigobz1lW2RdKXx8MD09PW8paWYoIm9iamVjdCI9PT13KG8pKVMubWVyZ2UocCxvLm5vZGVUeXBlP1tvXTpvKTtlbHNlIGlmKG1lLnRlc3Qobykpe2E9YXx8Zi5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxzPShkZS5leGVjKG8pfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLHU9Z2Vbc118fGdlLl9kZWZhdWx0LGEuaW5uZXJIVE1MPXVbMV0rUy5odG1sUHJlZmlsdGVyKG8pK3VbMl0sYz11WzBdO3doaWxlKGMtLSlhPWEubGFzdENoaWxkO1MubWVyZ2UocCxhLmNoaWxkTm9kZXMpLChhPWYuZmlyc3RDaGlsZCkudGV4dENvbnRlbnQ9IiJ9ZWxzZSBwLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7Zi50ZXh0Q29udGVudD0iIixkPTA7d2hpbGUobz1wW2QrK10paWYociYmLTE8Uy5pbkFycmF5KG8scikpaSYmaS5wdXNoKG8pO2Vsc2UgaWYobD1pZShvKSxhPXZlKGYuYXBwZW5kQ2hpbGQobyksInNjcmlwdCIpLGwmJnllKGEpLG4pe2M9MDt3aGlsZShvPWFbYysrXSloZS50ZXN0KG8udHlwZXx8IiIpJiZuLnB1c2gobyl9cmV0dXJuIGZ9dmFyIGJlPS9ea2V5Lyx3ZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sVGU9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIENlKCl7cmV0dXJuITB9ZnVuY3Rpb24gRWUoKXtyZXR1cm4hMX1mdW5jdGlvbiBTZShlLHQpe3JldHVybiBlPT09ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIEUuYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fSgpPT0oImZvY3VzIj09PXQpfWZ1bmN0aW9uIGtlKGUsdCxuLHIsaSxvKXt2YXIgYSxzO2lmKCJvYmplY3QiPT10eXBlb2YgdCl7Zm9yKHMgaW4ic3RyaW5nIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj12b2lkIDApLHQpa2UoZSxzLG4scix0W3NdLG8pO3JldHVybiBlfWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dm9pZCAwKTpudWxsPT1pJiYoInN0cmluZyI9PXR5cGVvZiBuPyhpPXIscj12b2lkIDApOihpPXIscj1uLG49dm9pZCAwKSksITE9PT1pKWk9RWU7ZWxzZSBpZighaSlyZXR1cm4gZTtyZXR1cm4gMT09PW8mJihhPWksKGk9ZnVuY3Rpb24oZSl7cmV0dXJuIFMoKS5vZmYoZSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5ndWlkPWEuZ3VpZHx8KGEuZ3VpZD1TLmd1aWQrKykpLGUuZWFjaChmdW5jdGlvbigpe1MuZXZlbnQuYWRkKHRoaXMsdCxpLHIsbil9KX1mdW5jdGlvbiBBZShlLGksbyl7bz8oWS5zZXQoZSxpLCExKSxTLmV2ZW50LmFkZChlLGkse25hbWVzcGFjZTohMSxoYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1ZLmdldCh0aGlzLGkpO2lmKDEmZS5pc1RyaWdnZXImJnRoaXNbaV0pe2lmKHIubGVuZ3RoKShTLmV2ZW50LnNwZWNpYWxbaV18fHt9KS5kZWxlZ2F0ZVR5cGUmJmUuc3RvcFByb3BhZ2F0aW9uKCk7ZWxzZSBpZihyPXMuY2FsbChhcmd1bWVudHMpLFkuc2V0KHRoaXMsaSxyKSx0PW8odGhpcyxpKSx0aGlzW2ldKCksciE9PShuPVkuZ2V0KHRoaXMsaSkpfHx0P1kuc2V0KHRoaXMsaSwhMSk6bj17fSxyIT09bilyZXR1cm4gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksbi52YWx1ZX1lbHNlIHIubGVuZ3RoJiYoWS5zZXQodGhpcyxpLHt2YWx1ZTpTLmV2ZW50LnRyaWdnZXIoUy5leHRlbmQoclswXSxTLkV2ZW50LnByb3RvdHlwZSksci5zbGljZSgxKSx0aGlzKX0pLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfX0pKTp2b2lkIDA9PT1ZLmdldChlLGkpJiZTLmV2ZW50LmFkZChlLGksQ2UpfVMuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9WS5nZXQodCk7aWYoVih0KSl7bi5oYW5kbGVyJiYobj0obz1uKS5oYW5kbGVyLGk9by5zZWxlY3RvciksaSYmUy5maW5kLm1hdGNoZXNTZWxlY3RvcihyZSxpKSxuLmd1aWR8fChuLmd1aWQ9Uy5ndWlkKyspLCh1PXYuZXZlbnRzKXx8KHU9di5ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSksKGE9di5oYW5kbGUpfHwoYT12LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIFMmJlMuZXZlbnQudHJpZ2dlcmVkIT09ZS50eXBlP1MuZXZlbnQuZGlzcGF0Y2guYXBwbHkodCxhcmd1bWVudHMpOnZvaWQgMH0pLGw9KGU9KGV8fCIiKS5tYXRjaChQKXx8WyIiXSkubGVuZ3RoO3doaWxlKGwtLSlkPWc9KHM9VGUuZXhlYyhlW2xdKXx8W10pWzFdLGg9KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkJiYoZj1TLmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KGk/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGQsZj1TLmV2ZW50LnNwZWNpYWxbZF18fHt9LGM9Uy5leHRlbmQoe3R5cGU6ZCxvcmlnVHlwZTpnLGRhdGE6cixoYW5kbGVyOm4sZ3VpZDpuLmd1aWQsc2VsZWN0b3I6aSxuZWVkc0NvbnRleHQ6aSYmUy5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGkpLG5hbWVzcGFjZTpoLmpvaW4oIi4iKX0sbyksKHA9dVtkXSl8fCgocD11W2RdPVtdKS5kZWxlZ2F0ZUNvdW50PTAsZi5zZXR1cCYmITEhPT1mLnNldHVwLmNhbGwodCxyLGgsYSl8fHQuYWRkRXZlbnRMaXN0ZW5lciYmdC5hZGRFdmVudExpc3RlbmVyKGQsYSkpLGYuYWRkJiYoZi5hZGQuY2FsbCh0LGMpLGMuaGFuZGxlci5ndWlkfHwoYy5oYW5kbGVyLmd1aWQ9bi5ndWlkKSksaT9wLnNwbGljZShwLmRlbGVnYXRlQ291bnQrKywwLGMpOnAucHVzaChjKSxTLmV2ZW50Lmdsb2JhbFtkXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9WS5oYXNEYXRhKGUpJiZZLmdldChlKTtpZih2JiYodT12LmV2ZW50cykpe2w9KHQ9KHR8fCIiKS5tYXRjaChQKXx8WyIiXSkubGVuZ3RoO3doaWxlKGwtLSlpZihkPWc9KHM9VGUuZXhlYyh0W2xdKXx8W10pWzFdLGg9KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkKXtmPVMuZXZlbnQuc3BlY2lhbFtkXXx8e30scD11W2Q9KHI/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGRdfHxbXSxzPXNbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK2guam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksYT1vPXAubGVuZ3RoO3doaWxlKG8tLSljPXBbb10sIWkmJmchPT1jLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1jLmd1aWR8fHMmJiFzLnRlc3QoYy5uYW1lc3BhY2UpfHxyJiZyIT09Yy5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYy5zZWxlY3Rvcil8fChwLnNwbGljZShvLDEpLGMuc2VsZWN0b3ImJnAuZGVsZWdhdGVDb3VudC0tLGYucmVtb3ZlJiZmLnJlbW92ZS5jYWxsKGUsYykpO2EmJiFwLmxlbmd0aCYmKGYudGVhcmRvd24mJiExIT09Zi50ZWFyZG93bi5jYWxsKGUsaCx2LmhhbmRsZSl8fFMucmVtb3ZlRXZlbnQoZSxkLHYuaGFuZGxlKSxkZWxldGUgdVtkXSl9ZWxzZSBmb3IoZCBpbiB1KVMuZXZlbnQucmVtb3ZlKGUsZCt0W2xdLG4sciwhMCk7Uy5pc0VtcHR5T2JqZWN0KHUpJiZZLnJlbW92ZShlLCJoYW5kbGUgZXZlbnRzIil9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksdT1TLmV2ZW50LmZpeChlKSxsPShZLmdldCh0aGlzLCJldmVudHMiKXx8T2JqZWN0LmNyZWF0ZShudWxsKSlbdS50eXBlXXx8W10sYz1TLmV2ZW50LnNwZWNpYWxbdS50eXBlXXx8e307Zm9yKHNbMF09dSx0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKylzW3RdPWFyZ3VtZW50c1t0XTtpZih1LmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fCExIT09Yy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsdSkpe2E9Uy5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsdSxsKSx0PTA7d2hpbGUoKGk9YVt0KytdKSYmIXUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7dS5jdXJyZW50VGFyZ2V0PWkuZWxlbSxuPTA7d2hpbGUoKG89aS5oYW5kbGVyc1tuKytdKSYmIXUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl1LnJuYW1lc3BhY2UmJiExIT09by5uYW1lc3BhY2UmJiF1LnJuYW1lc3BhY2UudGVzdChvLm5hbWVzcGFjZSl8fCh1LmhhbmRsZU9iaj1vLHUuZGF0YT1vLmRhdGEsdm9pZCAwIT09KHI9KChTLmV2ZW50LnNwZWNpYWxbby5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fG8uaGFuZGxlcikuYXBwbHkoaS5lbGVtLHMpKSYmITE9PT0odS5yZXN1bHQ9cikmJih1LnByZXZlbnREZWZhdWx0KCksdS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBjLnBvc3REaXNwYXRjaCYmYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLHUpLHUucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHM9W10sdT10LmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1JiZsLm5vZGVUeXBlJiYhKCJjbGljayI9PT1lLnR5cGUmJjE8PWUuYnV0dG9uKSlmb3IoO2whPT10aGlzO2w9bC5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1sLm5vZGVUeXBlJiYoImNsaWNrIiE9PWUudHlwZXx8ITAhPT1sLmRpc2FibGVkKSl7Zm9yKG89W10sYT17fSxuPTA7bjx1O24rKyl2b2lkIDA9PT1hW2k9KHI9dFtuXSkuc2VsZWN0b3IrIiAiXSYmKGFbaV09ci5uZWVkc0NvbnRleHQ/LTE8UyhpLHRoaXMpLmluZGV4KGwpOlMuZmluZChpLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksYVtpXSYmby5wdXNoKHIpO28ubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIGw9dGhpcyx1PHQubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczp0LnNsaWNlKHUpfSksc30sYWRkUHJvcDpmdW5jdGlvbih0LGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShTLkV2ZW50LnByb3RvdHlwZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6bShlKT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gZSh0aGlzLm9yaWdpbmFsRXZlbnQpfTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W3RdfSxzZXQ6ZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ZX0pfX0pfSxmaXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbUy5leHBhbmRvXT9lOm5ldyBTLkV2ZW50KGUpfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sY2xpY2s6e3NldHVwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXN8fGU7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZBZSh0LCJjbGljayIsQ2UpLCExfSx0cmlnZ2VyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXN8fGU7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZBZSh0LCJjbGljayIpLCEwfSxfZGVmYXVsdDpmdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldDtyZXR1cm4gcGUudGVzdCh0LnR5cGUpJiZ0LmNsaWNrJiZBKHQsImlucHV0IikmJlkuZ2V0KHQsImNsaWNrIil8fEEodCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5yZXN1bHQmJmUub3JpZ2luYWxFdmVudCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX19LFMucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbil9LFMuRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBTLkV2ZW50KSlyZXR1cm4gbmV3IFMuRXZlbnQoZSx0KTtlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1lLmRlZmF1bHRQcmV2ZW50ZWQmJiExPT09ZS5yZXR1cm5WYWx1ZT9DZTpFZSx0aGlzLnRhcmdldD1lLnRhcmdldCYmMz09PWUudGFyZ2V0Lm5vZGVUeXBlP2UudGFyZ2V0LnBhcmVudE5vZGU6ZS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWUuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9ZS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9ZSx0JiZTLmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHxEYXRlLm5vdygpLHRoaXNbUy5leHBhbmRvXT0hMH0sUy5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlMuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOkVlLGlzUHJvcGFnYXRpb25TdG9wcGVkOkVlLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOkVlLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPUNlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPUNlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1DZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sUy5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjb2RlOiEwLGNoYXJDb2RlOiEwLGtleTohMCxrZXlDb2RlOiEwLGJ1dHRvbjohMCxidXR0b25zOiEwLGNsaWVudFg6ITAsY2xpZW50WTohMCxvZmZzZXRYOiEwLG9mZnNldFk6ITAscG9pbnRlcklkOiEwLHBvaW50ZXJUeXBlOiEwLHNjcmVlblg6ITAsc2NyZWVuWTohMCx0YXJnZXRUb3VjaGVzOiEwLHRvRWxlbWVudDohMCx0b3VjaGVzOiEwLHdoaWNoOmZ1bmN0aW9uKGUpe3ZhciB0PWUuYnV0dG9uO3JldHVybiBudWxsPT1lLndoaWNoJiZiZS50ZXN0KGUudHlwZSk/bnVsbCE9ZS5jaGFyQ29kZT9lLmNoYXJDb2RlOmUua2V5Q29kZTohZS53aGljaCYmdm9pZCAwIT09dCYmd2UudGVzdChlLnR5cGUpPzEmdD8xOjImdD8zOjQmdD8yOjA6ZS53aGljaH19LFMuZXZlbnQuYWRkUHJvcCksUy5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihlLHQpe1MuZXZlbnQuc3BlY2lhbFtlXT17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gQWUodGhpcyxlLFNlKSwhMX0sdHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBBZSh0aGlzLGUpLCEwfSxkZWxlZ2F0ZVR5cGU6dH19KSxTLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKGUsaSl7Uy5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6aSxiaW5kVHlwZTppLGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgdCxuPWUucmVsYXRlZFRhcmdldCxyPWUuaGFuZGxlT2JqO3JldHVybiBuJiYobj09PXRoaXN8fFMuY29udGFpbnModGhpcyxuKSl8fChlLnR5cGU9ci5vcmlnVHlwZSx0PXIuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPWkpLHR9fX0pLFMuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4ga2UodGhpcyxlLHQsbixyKX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBrZSh0aGlzLGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaTtpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gcj1lLmhhbmRsZU9iaixTKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihyLm5hbWVzcGFjZT9yLm9yaWdUeXBlKyIuIityLm5hbWVzcGFjZTpyLm9yaWdUeXBlLHIuc2VsZWN0b3Isci5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKGkgaW4gZSl0aGlzLm9mZihpLHQsZVtpXSk7cmV0dXJuIHRoaXN9cmV0dXJuITEhPT10JiYiZnVuY3Rpb24iIT10eXBlb2YgdHx8KG49dCx0PXZvaWQgMCksITE9PT1uJiYobj1FZSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5ldmVudC5yZW1vdmUodGhpcyxlLG4sdCl9KX19KTt2YXIgTmU9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksRGU9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksamU9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nO2Z1bmN0aW9uIHFlKGUsdCl7cmV0dXJuIEEoZSwidGFibGUiKSYmQSgxMSE9PXQubm9kZVR5cGU/dDp0LmZpcnN0Q2hpbGQsInRyIikmJlMoZSkuY2hpbGRyZW4oInRib2R5IilbMF18fGV9ZnVuY3Rpb24gTGUoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBIZShlKXtyZXR1cm4idHJ1ZS8iPT09KGUudHlwZXx8IiIpLnNsaWNlKDAsNSk/ZS50eXBlPWUudHlwZS5zbGljZSg1KTplLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gT2UoZSx0KXt2YXIgbixyLGksbyxhLHM7aWYoMT09PXQubm9kZVR5cGUpe2lmKFkuaGFzRGF0YShlKSYmKHM9WS5nZXQoZSkuZXZlbnRzKSlmb3IoaSBpbiBZLnJlbW92ZSh0LCJoYW5kbGUgZXZlbnRzIikscylmb3Iobj0wLHI9c1tpXS5sZW5ndGg7bjxyO24rKylTLmV2ZW50LmFkZCh0LGksc1tpXVtuXSk7US5oYXNEYXRhKGUpJiYobz1RLmFjY2VzcyhlKSxhPVMuZXh0ZW5kKHt9LG8pLFEuc2V0KHQsYSkpfX1mdW5jdGlvbiBQZShuLHIsaSxvKXtyPWcocik7dmFyIGUsdCxhLHMsdSxsLGM9MCxmPW4ubGVuZ3RoLHA9Zi0xLGQ9clswXSxoPW0oZCk7aWYoaHx8MTxmJiYic3RyaW5nIj09dHlwZW9mIGQmJiF5LmNoZWNrQ2xvbmUmJkRlLnRlc3QoZCkpcmV0dXJuIG4uZWFjaChmdW5jdGlvbihlKXt2YXIgdD1uLmVxKGUpO2gmJihyWzBdPWQuY2FsbCh0aGlzLGUsdC5odG1sKCkpKSxQZSh0LHIsaSxvKX0pO2lmKGYmJih0PShlPXhlKHIsblswXS5vd25lckRvY3VtZW50LCExLG4sbykpLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPXQpLHR8fG8pKXtmb3Iocz0oYT1TLm1hcCh2ZShlLCJzY3JpcHQiKSxMZSkpLmxlbmd0aDtjPGY7YysrKXU9ZSxjIT09cCYmKHU9Uy5jbG9uZSh1LCEwLCEwKSxzJiZTLm1lcmdlKGEsdmUodSwic2NyaXB0IikpKSxpLmNhbGwobltjXSx1LGMpO2lmKHMpZm9yKGw9YVthLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LFMubWFwKGEsSGUpLGM9MDtjPHM7YysrKXU9YVtjXSxoZS50ZXN0KHUudHlwZXx8IiIpJiYhWS5hY2Nlc3ModSwiZ2xvYmFsRXZhbCIpJiZTLmNvbnRhaW5zKGwsdSkmJih1LnNyYyYmIm1vZHVsZSIhPT0odS50eXBlfHwiIikudG9Mb3dlckNhc2UoKT9TLl9ldmFsVXJsJiYhdS5ub01vZHVsZSYmUy5fZXZhbFVybCh1LnNyYyx7bm9uY2U6dS5ub25jZXx8dS5nZXRBdHRyaWJ1dGUoIm5vbmNlIil9LGwpOmIodS50ZXh0Q29udGVudC5yZXBsYWNlKGplLCIiKSx1LGwpKX1yZXR1cm4gbn1mdW5jdGlvbiBSZShlLHQsbil7Zm9yKHZhciByLGk9dD9TLmZpbHRlcih0LGUpOmUsbz0wO251bGwhPShyPWlbb10pO28rKylufHwxIT09ci5ub2RlVHlwZXx8Uy5jbGVhbkRhdGEodmUocikpLHIucGFyZW50Tm9kZSYmKG4mJmllKHIpJiZ5ZSh2ZShyLCJzY3JpcHQiKSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpKTtyZXR1cm4gZX1TLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGM9ZS5jbG9uZU5vZGUoITApLGY9aWUoZSk7aWYoISh5Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHxTLmlzWE1MRG9jKGUpKSlmb3IoYT12ZShjKSxyPTAsaT0obz12ZShlKSkubGVuZ3RoO3I8aTtyKyspcz1vW3JdLHU9YVtyXSx2b2lkIDAsImlucHV0Ij09PShsPXUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJnBlLnRlc3Qocy50eXBlKT91LmNoZWNrZWQ9cy5jaGVja2VkOiJpbnB1dCIhPT1sJiYidGV4dGFyZWEiIT09bHx8KHUuZGVmYXVsdFZhbHVlPXMuZGVmYXVsdFZhbHVlKTtpZih0KWlmKG4pZm9yKG89b3x8dmUoZSksYT1hfHx2ZShjKSxyPTAsaT1vLmxlbmd0aDtyPGk7cisrKU9lKG9bcl0sYVtyXSk7ZWxzZSBPZShlLGMpO3JldHVybiAwPChhPXZlKGMsInNjcmlwdCIpKS5sZW5ndGgmJnllKGEsIWYmJnZlKGUsInNjcmlwdCIpKSxjfSxjbGVhbkRhdGE6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4scixpPVMuZXZlbnQuc3BlY2lhbCxvPTA7dm9pZCAwIT09KG49ZVtvXSk7bysrKWlmKFYobikpe2lmKHQ9bltZLmV4cGFuZG9dKXtpZih0LmV2ZW50cylmb3IociBpbiB0LmV2ZW50cylpW3JdP1MuZXZlbnQucmVtb3ZlKG4scik6Uy5yZW1vdmVFdmVudChuLHIsdC5oYW5kbGUpO25bWS5leHBhbmRvXT12b2lkIDB9bltRLmV4cGFuZG9dJiYobltRLmV4cGFuZG9dPXZvaWQgMCl9fX0pLFMuZm4uZXh0ZW5kKHtkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIFJlKHRoaXMsZSwhMCl9LHJlbW92ZTpmdW5jdGlvbihlKXtyZXR1cm4gUmUodGhpcyxlKX0sdGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gJCh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP1MudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHwodGhpcy50ZXh0Q29udGVudD1lKX0pfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8cWUodGhpcyxlKS5hcHBlbmRDaGlsZChlKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1xZSh0aGlzLGUpO3QuaW5zZXJ0QmVmb3JlKGUsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDtudWxsIT0oZT10aGlzW3RdKTt0KyspMT09PWUubm9kZVR5cGUmJihTLmNsZWFuRGF0YSh2ZShlLCExKSksZS50ZXh0Q29udGVudD0iIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbCE9ZSYmZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIFMuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlKXt2YXIgdD10aGlzWzBdfHx7fSxuPTAscj10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1lJiYxPT09dC5ub2RlVHlwZSlyZXR1cm4gdC5pbm5lckhUTUw7aWYoInN0cmluZyI9PXR5cGVvZiBlJiYhTmUudGVzdChlKSYmIWdlWyhkZS5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1TLmh0bWxQcmVmaWx0ZXIoZSk7dHJ5e2Zvcig7bjxyO24rKykxPT09KHQ9dGhpc1tuXXx8e30pLm5vZGVUeXBlJiYoUy5jbGVhbkRhdGEodmUodCwhMSkpLHQuaW5uZXJIVE1MPWUpO3Q9MH1jYXRjaChlKXt9fXQmJnRoaXMuZW1wdHkoKS5hcHBlbmQoZSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgbj1bXTtyZXR1cm4gUGUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJlbnROb2RlO1MuaW5BcnJheSh0aGlzLG4pPDAmJihTLmNsZWFuRGF0YSh2ZSh0aGlzKSksdCYmdC5yZXBsYWNlQ2hpbGQoZSx0aGlzKSl9LG4pfX0pLFMuZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsYSl7Uy5mbltlXT1mdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxyPVMoZSksaT1yLmxlbmd0aC0xLG89MDtvPD1pO28rKyl0PW89PT1pP3RoaXM6dGhpcy5jbG9uZSghMCksUyhyW29dKVthXSh0KSx1LmFwcGx5KG4sdC5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4pfX0pO3ZhciBNZT1uZXcgUmVnRXhwKCJeKCIrZWUrIikoPyFweClbYS16JV0rJCIsImkiKSxJZT1mdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIHQmJnQub3BlbmVyfHwodD1DKSx0LmdldENvbXB1dGVkU3R5bGUoZSl9LFdlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e307Zm9yKGkgaW4gdClvW2ldPWUuc3R5bGVbaV0sZS5zdHlsZVtpXT10W2ldO2ZvcihpIGluIHI9bi5jYWxsKGUpLHQpZS5zdHlsZVtpXT1vW2ldO3JldHVybiByfSxGZT1uZXcgUmVnRXhwKG5lLmpvaW4oInwiKSwiaSIpO2Z1bmN0aW9uIEJlKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuc3R5bGU7cmV0dXJuKG49bnx8SWUoZSkpJiYoIiIhPT0oYT1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pfHxpZShlKXx8KGE9Uy5zdHlsZShlLHQpKSwheS5waXhlbEJveFN0eWxlcygpJiZNZS50ZXN0KGEpJiZGZS50ZXN0KHQpJiYocj1zLndpZHRoLGk9cy5taW5XaWR0aCxvPXMubWF4V2lkdGgscy5taW5XaWR0aD1zLm1heFdpZHRoPXMud2lkdGg9YSxhPW4ud2lkdGgscy53aWR0aD1yLHMubWluV2lkdGg9aSxzLm1heFdpZHRoPW8pKSx2b2lkIDAhPT1hP2ErIiI6YX1mdW5jdGlvbiAkZShlLHQpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZighZSgpKXJldHVybih0aGlzLmdldD10KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuZ2V0fX19IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2lmKGwpe3Uuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O21hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MCIsbC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo2MCU7dG9wOjElIixyZS5hcHBlbmRDaGlsZCh1KS5hcHBlbmRDaGlsZChsKTt2YXIgZT1DLmdldENvbXB1dGVkU3R5bGUobCk7bj0iMSUiIT09ZS50b3Ascz0xMj09PXQoZS5tYXJnaW5MZWZ0KSxsLnN0eWxlLnJpZ2h0PSI2MCUiLG89MzY9PT10KGUucmlnaHQpLHI9MzY9PT10KGUud2lkdGgpLGwuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixpPTEyPT09dChsLm9mZnNldFdpZHRoLzMpLHJlLnJlbW92ZUNoaWxkKHUpLGw9bnVsbH19ZnVuY3Rpb24gdChlKXtyZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGUpKX12YXIgbixyLGksbyxhLHMsdT1FLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGw9RS5jcmVhdGVFbGVtZW50KCJkaXYiKTtsLnN0eWxlJiYobC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGwuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix5LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09bC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxTLmV4dGVuZCh5LHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBlKCkscn0scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG99LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG59LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiBlKCksc30sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe3JldHVybiBlKCksaX0scmVsaWFibGVUckRpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scjtyZXR1cm4gbnVsbD09YSYmKGU9RS5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpLHQ9RS5jcmVhdGVFbGVtZW50KCJ0ciIpLG49RS5jcmVhdGVFbGVtZW50KCJkaXYiKSxlLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHgiLHQuc3R5bGUuaGVpZ2h0PSIxcHgiLG4uc3R5bGUuaGVpZ2h0PSI5cHgiLHJlLmFwcGVuZENoaWxkKGUpLmFwcGVuZENoaWxkKHQpLmFwcGVuZENoaWxkKG4pLHI9Qy5nZXRDb21wdXRlZFN0eWxlKHQpLGE9MzxwYXJzZUludChyLmhlaWdodCkscmUucmVtb3ZlQ2hpbGQoZSkpLGF9fSkpfSgpO3ZhciBfZT1bIldlYmtpdCIsIk1veiIsIm1zIl0semU9RS5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSxVZT17fTtmdW5jdGlvbiBYZShlKXt2YXIgdD1TLmNzc1Byb3BzW2VdfHxVZVtlXTtyZXR1cm4gdHx8KGUgaW4gemU/ZTpVZVtlXT1mdW5jdGlvbihlKXt2YXIgdD1lWzBdLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPV9lLmxlbmd0aDt3aGlsZShuLS0paWYoKGU9X2Vbbl0rdClpbiB6ZSlyZXR1cm4gZX0oZSl8fGUpfXZhciBWZT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sR2U9L14tLS8sWWU9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LFFlPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifTtmdW5jdGlvbiBKZShlLHQsbil7dmFyIHI9dGUuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMl0tKG58fDApKSsoclszXXx8InB4Iik6dH1mdW5jdGlvbiBLZShlLHQsbixyLGksbyl7dmFyIGE9IndpZHRoIj09PXQ/MTowLHM9MCx1PTA7aWYobj09PShyPyJib3JkZXIiOiJjb250ZW50IikpcmV0dXJuIDA7Zm9yKDthPDQ7YSs9MikibWFyZ2luIj09PW4mJih1Kz1TLmNzcyhlLG4rbmVbYV0sITAsaSkpLHI/KCJjb250ZW50Ij09PW4mJih1LT1TLmNzcyhlLCJwYWRkaW5nIituZVthXSwhMCxpKSksIm1hcmdpbiIhPT1uJiYodS09Uy5jc3MoZSwiYm9yZGVyIituZVthXSsiV2lkdGgiLCEwLGkpKSk6KHUrPVMuY3NzKGUsInBhZGRpbmciK25lW2FdLCEwLGkpLCJwYWRkaW5nIiE9PW4/dSs9Uy5jc3MoZSwiYm9yZGVyIituZVthXSsiV2lkdGgiLCEwLGkpOnMrPVMuY3NzKGUsImJvcmRlciIrbmVbYV0rIldpZHRoIiwhMCxpKSk7cmV0dXJuIXImJjA8PW8mJih1Kz1NYXRoLm1heCgwLE1hdGguY2VpbChlWyJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXS1vLXUtcy0uNSkpfHwwKSx1fWZ1bmN0aW9uIFplKGUsdCxuKXt2YXIgcj1JZShlKSxpPSgheS5ib3hTaXppbmdSZWxpYWJsZSgpfHxuKSYmImJvcmRlci1ib3giPT09Uy5jc3MoZSwiYm94U2l6aW5nIiwhMSxyKSxvPWksYT1CZShlLHQscikscz0ib2Zmc2V0Iit0WzBdLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTtpZihNZS50ZXN0KGEpKXtpZighbilyZXR1cm4gYTthPSJhdXRvIn1yZXR1cm4oIXkuYm94U2l6aW5nUmVsaWFibGUoKSYmaXx8IXkucmVsaWFibGVUckRpbWVuc2lvbnMoKSYmQShlLCJ0ciIpfHwiYXV0byI9PT1hfHwhcGFyc2VGbG9hdChhKSYmImlubGluZSI9PT1TLmNzcyhlLCJkaXNwbGF5IiwhMSxyKSkmJmUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJihpPSJib3JkZXItYm94Ij09PVMuY3NzKGUsImJveFNpemluZyIsITEsciksKG89cyBpbiBlKSYmKGE9ZVtzXSkpLChhPXBhcnNlRmxvYXQoYSl8fDApK0tlKGUsdCxufHwoaT8iYm9yZGVyIjoiY29udGVudCIpLG8scixhKSsicHgifWZ1bmN0aW9uIGV0KGUsdCxuLHIsaSl7cmV0dXJuIG5ldyBldC5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfVMuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIG49QmUoZSwib3BhY2l0eSIpO3JldHVybiIiPT09bj8iMSI6bn19fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsZ3JpZEFyZWE6ITAsZ3JpZENvbHVtbjohMCxncmlkQ29sdW1uRW5kOiEwLGdyaWRDb2x1bW5TdGFydDohMCxncmlkUm93OiEwLGdyaWRSb3dFbmQ6ITAsZ3JpZFJvd1N0YXJ0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e30sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLGEscz1YKHQpLHU9R2UudGVzdCh0KSxsPWUuc3R5bGU7aWYodXx8KHQ9WGUocykpLGE9Uy5jc3NIb29rc1t0XXx8Uy5jc3NIb29rc1tzXSx2b2lkIDA9PT1uKXJldHVybiBhJiYiZ2V0ImluIGEmJnZvaWQgMCE9PShpPWEuZ2V0KGUsITEscikpP2k6bFt0XTsic3RyaW5nIj09PShvPXR5cGVvZiBuKSYmKGk9dGUuZXhlYyhuKSkmJmlbMV0mJihuPXNlKGUsdCxpKSxvPSJudW1iZXIiKSxudWxsIT1uJiZuPT1uJiYoIm51bWJlciIhPT1vfHx1fHwobis9aSYmaVszXXx8KFMuY3NzTnVtYmVyW3NdPyIiOiJweCIpKSx5LmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChsW3RdPSJpbmhlcml0IiksYSYmInNldCJpbiBhJiZ2b2lkIDA9PT0obj1hLnNldChlLG4scikpfHwodT9sLnNldFByb3BlcnR5KHQsbik6bFt0XT1uKSl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHM9WCh0KTtyZXR1cm4gR2UudGVzdCh0KXx8KHQ9WGUocykpLChhPVMuY3NzSG9va3NbdF18fFMuY3NzSG9va3Nbc10pJiYiZ2V0ImluIGEmJihpPWEuZ2V0KGUsITAsbikpLHZvaWQgMD09PWkmJihpPUJlKGUsdCxyKSksIm5vcm1hbCI9PT1pJiZ0IGluIFFlJiYoaT1RZVt0XSksIiI9PT1ufHxuPyhvPXBhcnNlRmxvYXQoaSksITA9PT1ufHxpc0Zpbml0ZShvKT9vfHwwOmkpOml9fSksUy5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihlLHUpe1MuY3NzSG9va3NbdV09e2dldDpmdW5jdGlvbihlLHQsbil7aWYodClyZXR1cm4hVmUudGVzdChTLmNzcyhlLCJkaXNwbGF5IikpfHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiZlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoP1plKGUsdSxuKTpXZShlLFllLGZ1bmN0aW9uKCl7cmV0dXJuIFplKGUsdSxuKX0pfSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9SWUoZSksbz0heS5zY3JvbGxib3hTaXplKCkmJiJhYnNvbHV0ZSI9PT1pLnBvc2l0aW9uLGE9KG98fG4pJiYiYm9yZGVyLWJveCI9PT1TLmNzcyhlLCJib3hTaXppbmciLCExLGkpLHM9bj9LZShlLHUsbixhLGkpOjA7cmV0dXJuIGEmJm8mJihzLT1NYXRoLmNlaWwoZVsib2Zmc2V0Iit1WzBdLnRvVXBwZXJDYXNlKCkrdS5zbGljZSgxKV0tcGFyc2VGbG9hdChpW3VdKS1LZShlLHUsImJvcmRlciIsITEsaSktLjUpKSxzJiYocj10ZS5leGVjKHQpKSYmInB4IiE9PShyWzNdfHwicHgiKSYmKGUuc3R5bGVbdV09dCx0PVMuY3NzKGUsdSkpLEplKDAsdCxzKX19fSksUy5jc3NIb29rcy5tYXJnaW5MZWZ0PSRlKHkucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4ocGFyc2VGbG9hdChCZShlLCJtYXJnaW5MZWZ0IikpfHxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtV2UoZSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrInB4In0pLFMuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGksbyl7Uy5jc3NIb29rc1tpK29dPXtleHBhbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj17fSxyPSJzdHJpbmciPT10eXBlb2YgZT9lLnNwbGl0KCIgIik6W2VdO3Q8NDt0KyspbltpK25lW3RdK29dPXJbdF18fHJbdC0yXXx8clswXTtyZXR1cm4gbn19LCJtYXJnaW4iIT09aSYmKFMuY3NzSG9va3NbaStvXS5zZXQ9SmUpfSksUy5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLHQpe3JldHVybiAkKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz17fSxhPTA7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHI9SWUoZSksaT10Lmxlbmd0aDthPGk7YSsrKW9bdFthXV09Uy5jc3MoZSx0W2FdLCExLHIpO3JldHVybiBvfXJldHVybiB2b2lkIDAhPT1uP1Muc3R5bGUoZSx0LG4pOlMuY3NzKGUsdCl9LGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfX0pLCgoUy5Ud2Vlbj1ldCkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpldCxpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHxTLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KFMuY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1ldC5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6ZXQucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZXQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz10PVMuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpldC5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSkuaW5pdC5wcm90b3R5cGU9ZXQucHJvdG90eXBlLChldC5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIDEhPT1lLmVsZW0ubm9kZVR5cGV8fG51bGwhPWUuZWxlbVtlLnByb3BdJiZudWxsPT1lLmVsZW0uc3R5bGVbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXToodD1TLmNzcyhlLmVsZW0sZS5wcm9wLCIiKSkmJiJhdXRvIiE9PXQ/dDowfSxzZXQ6ZnVuY3Rpb24oZSl7Uy5meC5zdGVwW2UucHJvcF0/Uy5meC5zdGVwW2UucHJvcF0oZSk6MSE9PWUuZWxlbS5ub2RlVHlwZXx8IVMuY3NzSG9va3NbZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW1hlKGUucHJvcCldP2UuZWxlbVtlLnByb3BdPWUubm93OlMuc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpfX19KS5zY3JvbGxUb3A9ZXQucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0sUy5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxTLmZ4PWV0LnByb3RvdHlwZS5pbml0LFMuZnguc3RlcD17fTt2YXIgdHQsbnQscnQsaXQsb3Q9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGF0PS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gc3QoKXtudCYmKCExPT09RS5oaWRkZW4mJkMucmVxdWVzdEFuaW1hdGlvbkZyYW1lP0MucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0KTpDLnNldFRpbWVvdXQoc3QsUy5meC5pbnRlcnZhbCksUy5meC50aWNrKCkpfWZ1bmN0aW9uIHV0KCl7cmV0dXJuIEMuc2V0VGltZW91dChmdW5jdGlvbigpe3R0PXZvaWQgMH0pLHR0PURhdGUubm93KCl9ZnVuY3Rpb24gbHQoZSx0KXt2YXIgbixyPTAsaT17aGVpZ2h0OmV9O2Zvcih0PXQ/MTowO3I8NDtyKz0yLXQpaVsibWFyZ2luIisobj1uZVtyXSldPWlbInBhZGRpbmciK25dPWU7cmV0dXJuIHQmJihpLm9wYWNpdHk9aS53aWR0aD1lKSxpfWZ1bmN0aW9uIGN0KGUsdCxuKXtmb3IodmFyIHIsaT0oZnQudHdlZW5lcnNbdF18fFtdKS5jb25jYXQoZnQudHdlZW5lcnNbIioiXSksbz0wLGE9aS5sZW5ndGg7bzxhO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gZnQobyxlLHQpe3ZhciBuLGEscj0wLGk9ZnQucHJlZmlsdGVycy5sZW5ndGgscz1TLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihhKXJldHVybiExO2Zvcih2YXIgZT10dHx8dXQoKSx0PU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi1lKSxuPTEtKHQvbC5kdXJhdGlvbnx8MCkscj0wLGk9bC50d2VlbnMubGVuZ3RoO3I8aTtyKyspbC50d2VlbnNbcl0ucnVuKG4pO3JldHVybiBzLm5vdGlmeVdpdGgobyxbbCxuLHRdKSxuPDEmJmk/dDooaXx8cy5ub3RpZnlXaXRoKG8sW2wsMSwwXSkscy5yZXNvbHZlV2l0aChvLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTpvLHByb3BzOlMuZXh0ZW5kKHt9LGUpLG9wdHM6Uy5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOlMuZWFzaW5nLl9kZWZhdWx0fSx0KSxvcmlnaW5hbFByb3BlcnRpZXM6ZSxvcmlnaW5hbE9wdGlvbnM6dCxzdGFydFRpbWU6dHR8fHV0KCksZHVyYXRpb246dC5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1TLlR3ZWVuKG8sbC5vcHRzLGUsdCxsLm9wdHMuc3BlY2lhbEVhc2luZ1tlXXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gobiksbn0sc3RvcDpmdW5jdGlvbihlKXt2YXIgdD0wLG49ZT9sLnR3ZWVucy5sZW5ndGg6MDtpZihhKXJldHVybiB0aGlzO2ZvcihhPSEwO3Q8bjt0KyspbC50d2VlbnNbdF0ucnVuKDEpO3JldHVybiBlPyhzLm5vdGlmeVdpdGgobyxbbCwxLDBdKSxzLnJlc29sdmVXaXRoKG8sW2wsZV0pKTpzLnJlamVjdFdpdGgobyxbbCxlXSksdGhpc319KSxjPWwucHJvcHM7Zm9yKCFmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGE7Zm9yKG4gaW4gZSlpZihpPXRbcj1YKG4pXSxvPWVbbl0sQXJyYXkuaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLChhPVMuY3NzSG9va3Nbcl0pJiYiZXhwYW5kImluIGEpZm9yKG4gaW4gbz1hLmV4cGFuZChvKSxkZWxldGUgZVtyXSxvKW4gaW4gZXx8KGVbbl09b1tuXSx0W25dPWkpO2Vsc2UgdFtyXT1pfShjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTtyPGk7cisrKWlmKG49ZnQucHJlZmlsdGVyc1tyXS5jYWxsKGwsbyxjLGwub3B0cykpcmV0dXJuIG0obi5zdG9wKSYmKFMuX3F1ZXVlSG9va3MobC5lbGVtLGwub3B0cy5xdWV1ZSkuc3RvcD1uLnN0b3AuYmluZChuKSksbjtyZXR1cm4gUy5tYXAoYyxjdCxsKSxtKGwub3B0cy5zdGFydCkmJmwub3B0cy5zdGFydC5jYWxsKG8sbCksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyksUy5meC50aW1lcihTLmV4dGVuZCh1LHtlbGVtOm8sYW5pbTpsLHF1ZXVlOmwub3B0cy5xdWV1ZX0pKSxsfVMuQW5pbWF0aW9uPVMuZXh0ZW5kKGZ0LHt0d2VlbmVyczp7IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KTtyZXR1cm4gc2Uobi5lbGVtLGUsdGUuZXhlYyh0KSxuKSxufV19LHR3ZWVuZXI6ZnVuY3Rpb24oZSx0KXttKGUpPyh0PWUsZT1bIioiXSk6ZT1lLm1hdGNoKFApO2Zvcih2YXIgbixyPTAsaT1lLmxlbmd0aDtyPGk7cisrKW49ZVtyXSxmdC50d2VlbmVyc1tuXT1mdC50d2VlbmVyc1tuXXx8W10sZnQudHdlZW5lcnNbbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyczpbZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGMsZj0id2lkdGgiaW4gdHx8ImhlaWdodCJpbiB0LHA9dGhpcyxkPXt9LGg9ZS5zdHlsZSxnPWUubm9kZVR5cGUmJmFlKGUpLHY9WS5nZXQoZSwiZnhzaG93Iik7Zm9yKHIgaW4gbi5xdWV1ZXx8KG51bGw9PShhPVMuX3F1ZXVlSG9va3MoZSwiZngiKSkudW5xdWV1ZWQmJihhLnVucXVldWVkPTAscz1hLmVtcHR5LmZpcmUsYS5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7YS51bnF1ZXVlZHx8cygpfSksYS51bnF1ZXVlZCsrLHAuYWx3YXlzKGZ1bmN0aW9uKCl7cC5hbHdheXMoZnVuY3Rpb24oKXthLnVucXVldWVkLS0sUy5xdWV1ZShlLCJmeCIpLmxlbmd0aHx8YS5lbXB0eS5maXJlKCl9KX0pKSx0KWlmKGk9dFtyXSxvdC50ZXN0KGkpKXtpZihkZWxldGUgdFtyXSxvPW98fCJ0b2dnbGUiPT09aSxpPT09KGc/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWl8fCF2fHx2b2lkIDA9PT12W3JdKWNvbnRpbnVlO2c9ITB9ZFtyXT12JiZ2W3JdfHxTLnN0eWxlKGUscil9aWYoKHU9IVMuaXNFbXB0eU9iamVjdCh0KSl8fCFTLmlzRW1wdHlPYmplY3QoZCkpZm9yKHIgaW4gZiYmMT09PWUubm9kZVR5cGUmJihuLm92ZXJmbG93PVtoLm92ZXJmbG93LGgub3ZlcmZsb3dYLGgub3ZlcmZsb3dZXSxudWxsPT0obD12JiZ2LmRpc3BsYXkpJiYobD1ZLmdldChlLCJkaXNwbGF5IikpLCJub25lIj09PShjPVMuY3NzKGUsImRpc3BsYXkiKSkmJihsP2M9bDoobGUoW2VdLCEwKSxsPWUuc3R5bGUuZGlzcGxheXx8bCxjPVMuY3NzKGUsImRpc3BsYXkiKSxsZShbZV0pKSksKCJpbmxpbmUiPT09Y3x8ImlubGluZS1ibG9jayI9PT1jJiZudWxsIT1sKSYmIm5vbmUiPT09Uy5jc3MoZSwiZmxvYXQiKSYmKHV8fChwLmRvbmUoZnVuY3Rpb24oKXtoLmRpc3BsYXk9bH0pLG51bGw9PWwmJihjPWguZGlzcGxheSxsPSJub25lIj09PWM/IiI6YykpLGguZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihoLm92ZXJmbG93PSJoaWRkZW4iLHAuYWx3YXlzKGZ1bmN0aW9uKCl7aC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGgub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0saC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKSx1PSExLGQpdXx8KHY/ImhpZGRlbiJpbiB2JiYoZz12LmhpZGRlbik6dj1ZLmFjY2VzcyhlLCJmeHNob3ciLHtkaXNwbGF5Omx9KSxvJiYodi5oaWRkZW49IWcpLGcmJmxlKFtlXSwhMCkscC5kb25lKGZ1bmN0aW9uKCl7Zm9yKHIgaW4gZ3x8bGUoW2VdKSxZLnJlbW92ZShlLCJmeHNob3ciKSxkKVMuc3R5bGUoZSxyLGRbcl0pfSkpLHU9Y3QoZz92W3JdOjAscixwKSxyIGluIHZ8fCh2W3JdPXUuc3RhcnQsZyYmKHUuZW5kPXUuc3RhcnQsdS5zdGFydD0wKSl9XSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P2Z0LnByZWZpbHRlcnMudW5zaGlmdChlKTpmdC5wcmVmaWx0ZXJzLnB1c2goZSl9fSksUy5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmIm9iamVjdCI9PXR5cGVvZiBlP1MuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8bShlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYhbSh0KSYmdH07cmV0dXJuIFMuZngub2ZmP3IuZHVyYXRpb249MDoibnVtYmVyIiE9dHlwZW9mIHIuZHVyYXRpb24mJihyLmR1cmF0aW9uIGluIFMuZnguc3BlZWRzP3IuZHVyYXRpb249Uy5meC5zcGVlZHNbci5kdXJhdGlvbl06ci5kdXJhdGlvbj1TLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ci5xdWV1ZSYmITAhPT1yLnF1ZXVlfHwoci5xdWV1ZT0iZngiKSxyLm9sZD1yLmNvbXBsZXRlLHIuY29tcGxldGU9ZnVuY3Rpb24oKXttKHIub2xkKSYmci5vbGQuY2FsbCh0aGlzKSxyLnF1ZXVlJiZTLmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0sUy5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIoYWUpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPVMuaXNFbXB0eU9iamVjdCh0KSxvPVMuc3BlZWQoZSxuLHIpLGE9ZnVuY3Rpb24oKXt2YXIgZT1mdCh0aGlzLFMuZXh0ZW5kKHt9LHQpLG8pOyhpfHxZLmdldCh0aGlzLCJmaW5pc2giKSkmJmUuc3RvcCghMCl9O3JldHVybiBhLmZpbmlzaD1hLGl8fCExPT09by5xdWV1ZT90aGlzLmVhY2goYSk6dGhpcy5xdWV1ZShvLnF1ZXVlLGEpfSxzdG9wOmZ1bmN0aW9uKGksZSxvKXt2YXIgYT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KG8pfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGkmJihvPWUsZT1pLGk9dm9pZCAwKSxlJiZ0aGlzLnF1ZXVlKGl8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPSEwLHQ9bnVsbCE9aSYmaSsicXVldWVIb29rcyIsbj1TLnRpbWVycyxyPVkuZ2V0KHRoaXMpO2lmKHQpclt0XSYmclt0XS5zdG9wJiZhKHJbdF0pO2Vsc2UgZm9yKHQgaW4gcilyW3RdJiZyW3RdLnN0b3AmJmF0LnRlc3QodCkmJmEoclt0XSk7Zm9yKHQ9bi5sZW5ndGg7dC0tOyluW3RdLmVsZW0hPT10aGlzfHxudWxsIT1pJiZuW3RdLnF1ZXVlIT09aXx8KG5bdF0uYW5pbS5zdG9wKG8pLGU9ITEsbi5zcGxpY2UodCwxKSk7IWUmJm98fFMuZGVxdWV1ZSh0aGlzLGkpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4hMSE9PWEmJihhPWF8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQ9WS5nZXQodGhpcyksbj10W2ErInF1ZXVlIl0scj10W2ErInF1ZXVlSG9va3MiXSxpPVMudGltZXJzLG89bj9uLmxlbmd0aDowO2Zvcih0LmZpbmlzaD0hMCxTLnF1ZXVlKHRoaXMsYSxbXSksciYmci5zdG9wJiZyLnN0b3AuY2FsbCh0aGlzLCEwKSxlPWkubGVuZ3RoO2UtLTspaVtlXS5lbGVtPT09dGhpcyYmaVtlXS5xdWV1ZT09PWEmJihpW2VdLmFuaW0uc3RvcCghMCksaS5zcGxpY2UoZSwxKSk7Zm9yKGU9MDtlPG87ZSsrKW5bZV0mJm5bZV0uZmluaXNoJiZuW2VdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSB0LmZpbmlzaH0pfX0pLFMuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSxyKXt2YXIgaT1TLmZuW3JdO1MuZm5bcl09ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP2kuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShsdChyLCEwKSxlLHQsbil9fSksUy5lYWNoKHtzbGlkZURvd246bHQoInNob3ciKSxzbGlkZVVwOmx0KCJoaWRlIiksc2xpZGVUb2dnbGU6bHQoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSxyKXtTLmZuW2VdPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5hbmltYXRlKHIsZSx0LG4pfX0pLFMudGltZXJzPVtdLFMuZngudGljaz1mdW5jdGlvbigpe3ZhciBlLHQ9MCxuPVMudGltZXJzO2Zvcih0dD1EYXRlLm5vdygpO3Q8bi5sZW5ndGg7dCsrKShlPW5bdF0pKCl8fG5bdF0hPT1lfHxuLnNwbGljZSh0LS0sMSk7bi5sZW5ndGh8fFMuZnguc3RvcCgpLHR0PXZvaWQgMH0sUy5meC50aW1lcj1mdW5jdGlvbihlKXtTLnRpbWVycy5wdXNoKGUpLFMuZnguc3RhcnQoKX0sUy5meC5pbnRlcnZhbD0xMyxTLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7bnR8fChudD0hMCxzdCgpKX0sUy5meC5zdG9wPWZ1bmN0aW9uKCl7bnQ9bnVsbH0sUy5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sUy5mbi5kZWxheT1mdW5jdGlvbihyLGUpe3JldHVybiByPVMuZngmJlMuZnguc3BlZWRzW3JdfHxyLGU9ZXx8ImZ4Iix0aGlzLnF1ZXVlKGUsZnVuY3Rpb24oZSx0KXt2YXIgbj1DLnNldFRpbWVvdXQoZSxyKTt0LnN0b3A9ZnVuY3Rpb24oKXtDLmNsZWFyVGltZW91dChuKX19KX0scnQ9RS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGl0PUUuY3JlYXRlRWxlbWVudCgic2VsZWN0IikuYXBwZW5kQ2hpbGQoRS5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSkscnQudHlwZT0iY2hlY2tib3giLHkuY2hlY2tPbj0iIiE9PXJ0LnZhbHVlLHkub3B0U2VsZWN0ZWQ9aXQuc2VsZWN0ZWQsKHJ0PUUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkudmFsdWU9InQiLHJ0LnR5cGU9InJhZGlvIix5LnJhZGlvVmFsdWU9InQiPT09cnQudmFsdWU7dmFyIHB0LGR0PVMuZXhwci5hdHRySGFuZGxlO1MuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuICQodGhpcyxTLmF0dHIsZSx0LDE8YXJndW1lbnRzLmxlbmd0aCl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1MucmVtb3ZlQXR0cih0aGlzLGUpfSl9fSksUy5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlLmdldEF0dHJpYnV0ZT9TLnByb3AoZSx0LG4pOigxPT09byYmUy5pc1hNTERvYyhlKXx8KGk9Uy5hdHRySG9va3NbdC50b0xvd2VyQ2FzZSgpXXx8KFMuZXhwci5tYXRjaC5ib29sLnRlc3QodCk/cHQ6dm9pZCAwKSksdm9pZCAwIT09bj9udWxsPT09bj92b2lkIFMucmVtb3ZlQXR0cihlLHQpOmkmJiJzZXQiaW4gaSYmdm9pZCAwIT09KHI9aS5zZXQoZSxuLHQpKT9yOihlLnNldEF0dHJpYnV0ZSh0LG4rIiIpLG4pOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6bnVsbD09KHI9Uy5maW5kLmF0dHIoZSx0KSk/dm9pZCAwOnIpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlLHQpe2lmKCF5LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZBKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dCYmdC5tYXRjaChQKTtpZihpJiYxPT09ZS5ub2RlVHlwZSl3aGlsZShuPWlbcisrXSllLnJlbW92ZUF0dHJpYnV0ZShuKX19KSxwdD17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4hMT09PXQ/Uy5yZW1vdmVBdHRyKGUsbik6ZS5zZXRBdHRyaWJ1dGUobixuKSxufX0sUy5lYWNoKFMuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGUsdCl7dmFyIGE9ZHRbdF18fFMuZmluZC5hdHRyO2R0W3RdPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89dC50b0xvd2VyQ2FzZSgpO3JldHVybiBufHwoaT1kdFtvXSxkdFtvXT1yLHI9bnVsbCE9YShlLHQsbik/bzpudWxsLGR0W29dPWkpLHJ9fSk7dmFyIGh0PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksZ3Q9L14oPzphfGFyZWEpJC9pO2Z1bmN0aW9uIHZ0KGUpe3JldHVybihlLm1hdGNoKFApfHxbXSkuam9pbigiICIpfWZ1bmN0aW9uIHl0KGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifWZ1bmN0aW9uIG10KGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP2U6InN0cmluZyI9PXR5cGVvZiBlJiZlLm1hdGNoKFApfHxbXX1TLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiAkKHRoaXMsUy5wcm9wLGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tTLnByb3BGaXhbZV18fGVdfSl9fSksUy5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuIDE9PT1vJiZTLmlzWE1MRG9jKGUpfHwodD1TLnByb3BGaXhbdF18fHQsaT1TLnByb3BIb29rc1t0XSksdm9pZCAwIT09bj9pJiYic2V0ImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjplW3RdPW46aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Uy5maW5kLmF0dHIoZSwidGFiaW5kZXgiKTtyZXR1cm4gdD9wYXJzZUludCh0LDEwKTpodC50ZXN0KGUubm9kZU5hbWUpfHxndC50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSx5Lm9wdFNlbGVjdGVkfHwoUy5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTt0JiYodC5zZWxlY3RlZEluZGV4LHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLFMuZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7Uy5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLFMuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvLGEscyx1PTA7aWYobSh0KSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykuYWRkQ2xhc3ModC5jYWxsKHRoaXMsZSx5dCh0aGlzKSkpfSk7aWYoKGU9bXQodCkpLmxlbmd0aCl3aGlsZShuPXRoaXNbdSsrXSlpZihpPXl0KG4pLHI9MT09PW4ubm9kZVR5cGUmJiIgIit2dChpKSsiICIpe2E9MDt3aGlsZShvPWVbYSsrXSlyLmluZGV4T2YoIiAiK28rIiAiKTwwJiYocis9bysiICIpO2khPT0ocz12dChyKSkmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIscyl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHQpe3ZhciBlLG4scixpLG8sYSxzLHU9MDtpZihtKHQpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSl7Uyh0aGlzKS5yZW1vdmVDbGFzcyh0LmNhbGwodGhpcyxlLHl0KHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKChlPW10KHQpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT15dChuKSxyPTE9PT1uLm5vZGVUeXBlJiYiICIrdnQoaSkrIiAiKXthPTA7d2hpbGUobz1lW2ErK10pd2hpbGUoLTE8ci5pbmRleE9mKCIgIitvKyIgIikpcj1yLnJlcGxhY2UoIiAiK28rIiAiLCIgIik7aSE9PShzPXZ0KHIpKSYmbi5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oaSx0KXt2YXIgbz10eXBlb2YgaSxhPSJzdHJpbmciPT09b3x8QXJyYXkuaXNBcnJheShpKTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiZhP3Q/dGhpcy5hZGRDbGFzcyhpKTp0aGlzLnJlbW92ZUNsYXNzKGkpOm0oaSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykudG9nZ2xlQ2xhc3MoaS5jYWxsKHRoaXMsZSx5dCh0aGlzKSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQsbixyO2lmKGEpe3Q9MCxuPVModGhpcykscj1tdChpKTt3aGlsZShlPXJbdCsrXSluLmhhc0NsYXNzKGUpP24ucmVtb3ZlQ2xhc3MoZSk6bi5hZGRDbGFzcyhlKX1lbHNlIHZvaWQgMCE9PWkmJiJib29sZWFuIiE9PW98fCgoZT15dCh0aGlzKSkmJlkuc2V0KHRoaXMsIl9fY2xhc3NOYW1lX18iLGUpLHRoaXMuc2V0QXR0cmlidXRlJiZ0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGV8fCExPT09aT8iIjpZLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPTA7dD0iICIrZSsiICI7d2hpbGUobj10aGlzW3IrK10paWYoMT09PW4ubm9kZVR5cGUmJi0xPCgiICIrdnQoeXQobikpKyIgIikuaW5kZXhPZih0KSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgeHQ9L1xyL2c7Uy5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihuKXt2YXIgcixlLGksdD10aGlzWzBdO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPW0obiksdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciB0OzE9PT10aGlzLm5vZGVUeXBlJiYobnVsbD09KHQ9aT9uLmNhbGwodGhpcyxlLFModGhpcykudmFsKCkpOm4pP3Q9IiI6Im51bWJlciI9PXR5cGVvZiB0P3QrPSIiOkFycmF5LmlzQXJyYXkodCkmJih0PVMubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSwocj1TLnZhbEhvb2tzW3RoaXMudHlwZV18fFMudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJzZXQiaW4gciYmdm9pZCAwIT09ci5zZXQodGhpcyx0LCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT10KSl9KSk6dD8ocj1TLnZhbEhvb2tzW3QudHlwZV18fFMudmFsSG9va3NbdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJnZXQiaW4gciYmdm9pZCAwIT09KGU9ci5nZXQodCwidmFsdWUiKSk/ZToic3RyaW5nIj09dHlwZW9mKGU9dC52YWx1ZSk/ZS5yZXBsYWNlKHh0LCIiKTpudWxsPT1lPyIiOmU6dm9pZCAwfX0pLFMuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Uy5maW5kLmF0dHIoZSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9dD90OnZ0KFMudGV4dChlKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT1lLm9wdGlvbnMsbz1lLnNlbGVjdGVkSW5kZXgsYT0ic2VsZWN0LW9uZSI9PT1lLnR5cGUscz1hP251bGw6W10sdT1hP28rMTppLmxlbmd0aDtmb3Iocj1vPDA/dTphP286MDtyPHU7cisrKWlmKCgobj1pW3JdKS5zZWxlY3RlZHx8cj09PW8pJiYhbi5kaXNhYmxlZCYmKCFuLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFBKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9UyhuKS52YWwoKSxhKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPVMubWFrZUFycmF5KHQpLGE9aS5sZW5ndGg7d2hpbGUoYS0tKSgocj1pW2FdKS5zZWxlY3RlZD0tMTxTLmluQXJyYXkoUy52YWxIb29rcy5vcHRpb24uZ2V0KHIpLG8pKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19fSksUy5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7Uy52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gZS5jaGVja2VkPS0xPFMuaW5BcnJheShTKGUpLnZhbCgpLHQpfX0seS5jaGVja09ufHwoUy52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pLHkuZm9jdXNpbj0ib25mb2N1c2luImluIEM7dmFyIGJ0PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyx3dD1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpfTtTLmV4dGVuZChTLmV2ZW50LHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbCxjLGYscD1bbnx8RV0sZD12LmNhbGwoZSwidHlwZSIpP2UudHlwZTplLGg9di5jYWxsKGUsIm5hbWVzcGFjZSIpP2UubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYobz1mPWE9bj1ufHxFLDMhPT1uLm5vZGVUeXBlJiY4IT09bi5ub2RlVHlwZSYmIWJ0LnRlc3QoZCtTLmV2ZW50LnRyaWdnZXJlZCkmJigtMTxkLmluZGV4T2YoIi4iKSYmKGQ9KGg9ZC5zcGxpdCgiLiIpKS5zaGlmdCgpLGguc29ydCgpKSx1PWQuaW5kZXhPZigiOiIpPDAmJiJvbiIrZCwoZT1lW1MuZXhwYW5kb10/ZTpuZXcgUy5FdmVudChkLCJvYmplY3QiPT10eXBlb2YgZSYmZSkpLmlzVHJpZ2dlcj1yPzI6MyxlLm5hbWVzcGFjZT1oLmpvaW4oIi4iKSxlLnJuYW1lc3BhY2U9ZS5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIraC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLGUucmVzdWx0PXZvaWQgMCxlLnRhcmdldHx8KGUudGFyZ2V0PW4pLHQ9bnVsbD09dD9bZV06Uy5tYWtlQXJyYXkodCxbZV0pLGM9Uy5ldmVudC5zcGVjaWFsW2RdfHx7fSxyfHwhYy50cmlnZ2VyfHwhMSE9PWMudHJpZ2dlci5hcHBseShuLHQpKSl7aWYoIXImJiFjLm5vQnViYmxlJiYheChuKSl7Zm9yKHM9Yy5kZWxlZ2F0ZVR5cGV8fGQsYnQudGVzdChzK2QpfHwobz1vLnBhcmVudE5vZGUpO287bz1vLnBhcmVudE5vZGUpcC5wdXNoKG8pLGE9bzthPT09KG4ub3duZXJEb2N1bWVudHx8RSkmJnAucHVzaChhLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvd3x8Qyl9aT0wO3doaWxlKChvPXBbaSsrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpZj1vLGUudHlwZT0xPGk/czpjLmJpbmRUeXBlfHxkLChsPShZLmdldChvLCJldmVudHMiKXx8T2JqZWN0LmNyZWF0ZShudWxsKSlbZS50eXBlXSYmWS5nZXQobywiaGFuZGxlIikpJiZsLmFwcGx5KG8sdCksKGw9dSYmb1t1XSkmJmwuYXBwbHkmJlYobykmJihlLnJlc3VsdD1sLmFwcGx5KG8sdCksITE9PT1lLnJlc3VsdCYmZS5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gZS50eXBlPWQscnx8ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Yy5fZGVmYXVsdCYmITEhPT1jLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksdCl8fCFWKG4pfHx1JiZtKG5bZF0pJiYheChuKSYmKChhPW5bdV0pJiYoblt1XT1udWxsKSxTLmV2ZW50LnRyaWdnZXJlZD1kLGUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSYmZi5hZGRFdmVudExpc3RlbmVyKGQsd3QpLG5bZF0oKSxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLHd0KSxTLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsYSYmKG5bdV09YSkpLGUucmVzdWx0fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVMuZXh0ZW5kKG5ldyBTLkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMH0pO1MuZXZlbnQudHJpZ2dlcihyLG51bGwsdCl9fSksUy5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXNbMF07aWYobilyZXR1cm4gUy5ldmVudC50cmlnZ2VyKGUsdCxuLCEwKX19KSx5LmZvY3VzaW58fFMuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24obixyKXt2YXIgaT1mdW5jdGlvbihlKXtTLmV2ZW50LnNpbXVsYXRlKHIsZS50YXJnZXQsUy5ldmVudC5maXgoZSkpfTtTLmV2ZW50LnNwZWNpYWxbcl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLmRvY3VtZW50fHx0aGlzLHQ9WS5hY2Nlc3MoZSxyKTt0fHxlLmFkZEV2ZW50TGlzdGVuZXIobixpLCEwKSxZLmFjY2VzcyhlLHIsKHR8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcy5kb2N1bWVudHx8dGhpcyx0PVkuYWNjZXNzKGUsciktMTt0P1kuYWNjZXNzKGUscix0KTooZS5yZW1vdmVFdmVudExpc3RlbmVyKG4saSwhMCksWS5yZW1vdmUoZSxyKSl9fX0pO3ZhciBUdD1DLmxvY2F0aW9uLEN0PXtndWlkOkRhdGUubm93KCl9LEV0PS9cPy87Uy5wYXJzZVhNTD1mdW5jdGlvbihlKXt2YXIgdDtpZighZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBudWxsO3RyeXt0PShuZXcgQy5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCJ0ZXh0L3htbCIpfWNhdGNoKGUpe3Q9dm9pZCAwfXJldHVybiB0JiYhdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGh8fFMuZXJyb3IoIkludmFsaWQgWE1MOiAiK2UpLHR9O3ZhciBTdD0vXFtcXSQvLGt0PS9ccj9cbi9nLEF0PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxOdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gRHQobixlLHIsaSl7dmFyIHQ7aWYoQXJyYXkuaXNBcnJheShlKSlTLmVhY2goZSxmdW5jdGlvbihlLHQpe3J8fFN0LnRlc3Qobik/aShuLHQpOkR0KG4rIlsiKygib2JqZWN0Ij09dHlwZW9mIHQmJm51bGwhPXQ/ZToiIikrIl0iLHQscixpKX0pO2Vsc2UgaWYocnx8Im9iamVjdCIhPT13KGUpKWkobixlKTtlbHNlIGZvcih0IGluIGUpRHQobisiWyIrdCsiXSIsZVt0XSxyLGkpfVMucGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj1tKHQpP3QoKTp0O3Jbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG51bGw9PW4/IiI6bil9O2lmKG51bGw9PWUpcmV0dXJuIiI7aWYoQXJyYXkuaXNBcnJheShlKXx8ZS5qcXVlcnkmJiFTLmlzUGxhaW5PYmplY3QoZSkpUy5lYWNoKGUsZnVuY3Rpb24oKXtpKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKG4gaW4gZSlEdChuLGVbbl0sdCxpKTtyZXR1cm4gci5qb2luKCImIil9LFMuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gUy5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPVMucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP1MubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIVModGhpcykuaXMoIjpkaXNhYmxlZCIpJiZOdC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhQXQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IXBlLnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49Uyh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOkFycmF5LmlzQXJyYXkobik/Uy5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKGt0LCJcclxuIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShrdCwiXHJcbiIpfX0pLmdldCgpfX0pO3ZhciBqdD0vJTIwL2cscXQ9LyMuKiQvLEx0PS8oWz8mXSlfPVteJl0qLyxIdD0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLE90PS9eKD86R0VUfEhFQUQpJC8sUHQ9L15cL1wvLyxSdD17fSxNdD17fSxJdD0iKi8iLmNvbmNhdCgiKiIpLFd0PUUuY3JlYXRlRWxlbWVudCgiYSIpO2Z1bmN0aW9uIEZ0KG8pe3JldHVybiBmdW5jdGlvbihlLHQpeyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPSIqIik7dmFyIG4scj0wLGk9ZS50b0xvd2VyQ2FzZSgpLm1hdGNoKFApfHxbXTtpZihtKHQpKXdoaWxlKG49aVtyKytdKSIrIj09PW5bMF0/KG49bi5zbGljZSgxKXx8IioiLChvW25dPW9bbl18fFtdKS51bnNoaWZ0KHQpKToob1tuXT1vW25dfHxbXSkucHVzaCh0KX19ZnVuY3Rpb24gQnQodCxpLG8sYSl7dmFyIHM9e30sdT10PT09TXQ7ZnVuY3Rpb24gbChlKXt2YXIgcjtyZXR1cm4gc1tlXT0hMCxTLmVhY2godFtlXXx8W10sZnVuY3Rpb24oZSx0KXt2YXIgbj10KGksbyxhKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIG58fHV8fHNbbl0/dT8hKHI9bik6dm9pZCAwOihpLmRhdGFUeXBlcy51bnNoaWZ0KG4pLGwobiksITEpfSkscn1yZXR1cm4gbChpLmRhdGFUeXBlc1swXSl8fCFzWyIqIl0mJmwoIioiKX1mdW5jdGlvbiAkdChlLHQpe3ZhciBuLHIsaT1TLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl2b2lkIDAhPT10W25dJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZTLmV4dGVuZCghMCxlLHIpLGV9V3QuaHJlZj1UdC5ocmVmLFMuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpUdC5ocmVmLHR5cGU6IkdFVCIsaXNMb2NhbDovXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLy50ZXN0KFR0LnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOkl0LHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi9cYnhtbFxiLyxodG1sOi9cYmh0bWwvLGpzb246L1xianNvblxiL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjpTLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8kdCgkdChlLFMuYWpheFNldHRpbmdzKSx0KTokdChTLmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpGdChSdCksYWpheFRyYW5zcG9ydDpGdChNdCksYWpheDpmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksdD10fHx7fTt2YXIgYyxmLHAsbixkLHIsaCxnLGksbyx2PVMuYWpheFNldHVwKHt9LHQpLHk9di5jb250ZXh0fHx2LG09di5jb250ZXh0JiYoeS5ub2RlVHlwZXx8eS5qcXVlcnkpP1MoeSk6Uy5ldmVudCx4PVMuRGVmZXJyZWQoKSxiPVMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHc9di5zdGF0dXNDb2RlfHx7fSxhPXt9LHM9e30sdT0iY2FuY2VsZWQiLFQ9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZihoKXtpZighbil7bj17fTt3aGlsZSh0PUh0LmV4ZWMocCkpblt0WzFdLnRvTG93ZXJDYXNlKCkrIiAiXT0oblt0WzFdLnRvTG93ZXJDYXNlKCkrIiAiXXx8W10pLmNvbmNhdCh0WzJdKX10PW5bZS50b0xvd2VyQ2FzZSgpKyIgIl19cmV0dXJuIG51bGw9PXQ/bnVsbDp0LmpvaW4oIiwgIil9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiBoP3A6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1oJiYoZT1zW2UudG9Mb3dlckNhc2UoKV09c1tlLnRvTG93ZXJDYXNlKCldfHxlLGFbZV09dCksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09aCYmKHYubWltZVR5cGU9ZSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihlKXt2YXIgdDtpZihlKWlmKGgpVC5hbHdheXMoZVtULnN0YXR1c10pO2Vsc2UgZm9yKHQgaW4gZSl3W3RdPVt3W3RdLGVbdF1dO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHx1O3JldHVybiBjJiZjLmFib3J0KHQpLGwoMCx0KSx0aGlzfX07aWYoeC5wcm9taXNlKFQpLHYudXJsPSgoZXx8di51cmx8fFR0LmhyZWYpKyIiKS5yZXBsYWNlKFB0LFR0LnByb3RvY29sKyIvLyIpLHYudHlwZT10Lm1ldGhvZHx8dC50eXBlfHx2Lm1ldGhvZHx8di50eXBlLHYuZGF0YVR5cGVzPSh2LmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goUCl8fFsiIl0sbnVsbD09di5jcm9zc0RvbWFpbil7cj1FLmNyZWF0ZUVsZW1lbnQoImEiKTt0cnl7ci5ocmVmPXYudXJsLHIuaHJlZj1yLmhyZWYsdi5jcm9zc0RvbWFpbj1XdC5wcm90b2NvbCsiLy8iK1d0Lmhvc3QhPXIucHJvdG9jb2wrIi8vIityLmhvc3R9Y2F0Y2goZSl7di5jcm9zc0RvbWFpbj0hMH19aWYodi5kYXRhJiZ2LnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIHYuZGF0YSYmKHYuZGF0YT1TLnBhcmFtKHYuZGF0YSx2LnRyYWRpdGlvbmFsKSksQnQoUnQsdix0LFQpLGgpcmV0dXJuIFQ7Zm9yKGkgaW4oZz1TLmV2ZW50JiZ2Lmdsb2JhbCkmJjA9PVMuYWN0aXZlKysmJlMuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iiksdi50eXBlPXYudHlwZS50b1VwcGVyQ2FzZSgpLHYuaGFzQ29udGVudD0hT3QudGVzdCh2LnR5cGUpLGY9di51cmwucmVwbGFjZShxdCwiIiksdi5oYXNDb250ZW50P3YuZGF0YSYmdi5wcm9jZXNzRGF0YSYmMD09PSh2LmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJih2LmRhdGE9di5kYXRhLnJlcGxhY2UoanQsIisiKSk6KG89di51cmwuc2xpY2UoZi5sZW5ndGgpLHYuZGF0YSYmKHYucHJvY2Vzc0RhdGF8fCJzdHJpbmciPT10eXBlb2Ygdi5kYXRhKSYmKGYrPShFdC50ZXN0KGYpPyImIjoiPyIpK3YuZGF0YSxkZWxldGUgdi5kYXRhKSwhMT09PXYuY2FjaGUmJihmPWYucmVwbGFjZShMdCwiJDEiKSxvPShFdC50ZXN0KGYpPyImIjoiPyIpKyJfPSIrQ3QuZ3VpZCsrK28pLHYudXJsPWYrbyksdi5pZk1vZGlmaWVkJiYoUy5sYXN0TW9kaWZpZWRbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLFMubGFzdE1vZGlmaWVkW2ZdKSxTLmV0YWdbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsUy5ldGFnW2ZdKSksKHYuZGF0YSYmdi5oYXNDb250ZW50JiYhMSE9PXYuY29udGVudFR5cGV8fHQuY29udGVudFR5cGUpJiZULnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsdi5jb250ZW50VHlwZSksVC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHYuZGF0YVR5cGVzWzBdJiZ2LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dP3YuYWNjZXB0c1t2LmRhdGFUeXBlc1swXV0rKCIqIiE9PXYuZGF0YVR5cGVzWzBdPyIsICIrSXQrIjsgcT0wLjAxIjoiIik6di5hY2NlcHRzWyIqIl0pLHYuaGVhZGVycylULnNldFJlcXVlc3RIZWFkZXIoaSx2LmhlYWRlcnNbaV0pO2lmKHYuYmVmb3JlU2VuZCYmKCExPT09di5iZWZvcmVTZW5kLmNhbGwoeSxULHYpfHxoKSlyZXR1cm4gVC5hYm9ydCgpO2lmKHU9ImFib3J0IixiLmFkZCh2LmNvbXBsZXRlKSxULmRvbmUodi5zdWNjZXNzKSxULmZhaWwodi5lcnJvciksYz1CdChNdCx2LHQsVCkpe2lmKFQucmVhZHlTdGF0ZT0xLGcmJm0udHJpZ2dlcigiYWpheFNlbmQiLFtULHZdKSxoKXJldHVybiBUO3YuYXN5bmMmJjA8di50aW1lb3V0JiYoZD1DLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtULmFib3J0KCJ0aW1lb3V0Iil9LHYudGltZW91dCkpO3RyeXtoPSExLGMuc2VuZChhLGwpfWNhdGNoKGUpe2lmKGgpdGhyb3cgZTtsKC0xLGUpfX1lbHNlIGwoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGwoZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPXQ7aHx8KGg9ITAsZCYmQy5jbGVhclRpbWVvdXQoZCksYz12b2lkIDAscD1yfHwiIixULnJlYWR5U3RhdGU9MDxlPzQ6MCxpPTIwMDw9ZSYmZTwzMDB8fDMwND09PWUsbiYmKHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHM9ZS5jb250ZW50cyx1PWUuZGF0YVR5cGVzO3doaWxlKCIqIj09PXVbMF0pdS5zaGlmdCgpLHZvaWQgMD09PXImJihyPWUubWltZVR5cGV8fHQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihyKWZvcihpIGluIHMpaWYoc1tpXSYmc1tpXS50ZXN0KHIpKXt1LnVuc2hpZnQoaSk7YnJlYWt9aWYodVswXWluIG4pbz11WzBdO2Vsc2V7Zm9yKGkgaW4gbil7aWYoIXVbMF18fGUuY29udmVydGVyc1tpKyIgIit1WzBdXSl7bz1pO2JyZWFrfWF8fChhPWkpfW89b3x8YX1pZihvKXJldHVybiBvIT09dVswXSYmdS51bnNoaWZ0KG8pLG5bb119KHYsVCxuKSksIWkmJi0xPFMuaW5BcnJheSgic2NyaXB0Iix2LmRhdGFUeXBlcykmJih2LmNvbnZlcnRlcnNbInRleHQgc2NyaXB0Il09ZnVuY3Rpb24oKXt9KSxzPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbD17fSxjPWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYoY1sxXSlmb3IoYSBpbiBlLmNvbnZlcnRlcnMpbFthLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1thXTtvPWMuc2hpZnQoKTt3aGlsZShvKWlmKGUucmVzcG9uc2VGaWVsZHNbb10mJihuW2UucmVzcG9uc2VGaWVsZHNbb11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PW8sbz1jLnNoaWZ0KCkpaWYoIioiPT09bylvPXU7ZWxzZSBpZigiKiIhPT11JiZ1IT09byl7aWYoIShhPWxbdSsiICIrb118fGxbIiogIitvXSkpZm9yKGkgaW4gbClpZigocz1pLnNwbGl0KCIgIikpWzFdPT09byYmKGE9bFt1KyIgIitzWzBdXXx8bFsiKiAiK3NbMF1dKSl7ITA9PT1hP2E9bFtpXTohMCE9PWxbaV0mJihvPXNbMF0sYy51bnNoaWZ0KHNbMV0pKTticmVha31pZighMCE9PWEpaWYoYSYmZVsidGhyb3dzIl0pdD1hKHQpO2Vsc2UgdHJ5e3Q9YSh0KX1jYXRjaChlKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjphP2U6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3UrIiB0byAiK299fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19KHYscyxULGkpLGk/KHYuaWZNb2RpZmllZCYmKCh1PVQuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSkmJihTLmxhc3RNb2RpZmllZFtmXT11KSwodT1ULmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIikpJiYoUy5ldGFnW2ZdPXUpKSwyMDQ9PT1lfHwiSEVBRCI9PT12LnR5cGU/bD0ibm9jb250ZW50IjozMDQ9PT1lP2w9Im5vdG1vZGlmaWVkIjoobD1zLnN0YXRlLG89cy5kYXRhLGk9IShhPXMuZXJyb3IpKSk6KGE9bCwhZSYmbHx8KGw9ImVycm9yIixlPDAmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fGwpKyIiLGk/eC5yZXNvbHZlV2l0aCh5LFtvLGwsVF0pOngucmVqZWN0V2l0aCh5LFtULGwsYV0pLFQuc3RhdHVzQ29kZSh3KSx3PXZvaWQgMCxnJiZtLnRyaWdnZXIoaT8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtULHYsaT9vOmFdKSxiLmZpcmVXaXRoKHksW1QsbF0pLGcmJihtLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW1Qsdl0pLC0tUy5hY3RpdmV8fFMuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBUfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUy5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFMuZ2V0KGUsdm9pZCAwLHQsInNjcmlwdCIpfX0pLFMuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLGkpe1NbaV09ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIG0odCkmJihyPXJ8fG4sbj10LHQ9dm9pZCAwKSxTLmFqYXgoUy5leHRlbmQoe3VybDplLHR5cGU6aSxkYXRhVHlwZTpyLGRhdGE6dCxzdWNjZXNzOm59LFMuaXNQbGFpbk9iamVjdChlKSYmZSkpfX0pLFMuYWpheFByZWZpbHRlcihmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlLmhlYWRlcnMpImNvbnRlbnQtdHlwZSI9PT10LnRvTG93ZXJDYXNlKCkmJihlLmNvbnRlbnRUeXBlPWUuaGVhZGVyc1t0XXx8IiIpfSksUy5fZXZhbFVybD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIFMuYWpheCh7dXJsOmUsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0IixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbigpe319LGRhdGFGaWx0ZXI6ZnVuY3Rpb24oZSl7Uy5nbG9iYWxFdmFsKGUsdCxuKX19KX0sUy5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXNbMF0mJihtKGUpJiYoZT1lLmNhbGwodGhpc1swXSkpLHQ9UyhlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24obil7cmV0dXJuIG0obik/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykud3JhcElubmVyKG4uY2FsbCh0aGlzLGUpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPVModGhpcyksdD1lLmNvbnRlbnRzKCk7dC5sZW5ndGg/dC53cmFwQWxsKG4pOmUuYXBwZW5kKG4pfSl9LHdyYXA6ZnVuY3Rpb24odCl7dmFyIG49bSh0KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykud3JhcEFsbChuP3QuY2FsbCh0aGlzLGUpOnQpfSl9LHVud3JhcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnQoZSkubm90KCJib2R5IikuZWFjaChmdW5jdGlvbigpe1ModGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLHRoaXN9fSksUy5leHByLnBzZXVkb3MuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiFTLmV4cHIucHNldWRvcy52aXNpYmxlKGUpfSxTLmV4cHIucHNldWRvcy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiEhKGUub2Zmc2V0V2lkdGh8fGUub2Zmc2V0SGVpZ2h0fHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKX0sUy5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgQy5YTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgX3Q9ezA6MjAwLDEyMjM6MjA0fSx6dD1TLmFqYXhTZXR0aW5ncy54aHIoKTt5LmNvcnM9ISF6dCYmIndpdGhDcmVkZW50aWFscyJpbiB6dCx5LmFqYXg9enQ9ISF6dCxTLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oaSl7dmFyIG8sYTtpZih5LmNvcnN8fHp0JiYhaS5jcm9zc0RvbWFpbilyZXR1cm57c2VuZDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS54aHIoKTtpZihyLm9wZW4oaS50eXBlLGkudXJsLGkuYXN5bmMsaS51c2VybmFtZSxpLnBhc3N3b3JkKSxpLnhockZpZWxkcylmb3IobiBpbiBpLnhockZpZWxkcylyW25dPWkueGhyRmllbGRzW25dO2ZvcihuIGluIGkubWltZVR5cGUmJnIub3ZlcnJpZGVNaW1lVHlwZSYmci5vdmVycmlkZU1pbWVUeXBlKGkubWltZVR5cGUpLGkuY3Jvc3NEb21haW58fGVbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGVbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKSxlKXIuc2V0UmVxdWVzdEhlYWRlcihuLGVbbl0pO289ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7byYmKG89YT1yLm9ubG9hZD1yLm9uZXJyb3I9ci5vbmFib3J0PXIub250aW1lb3V0PXIub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsImFib3J0Ij09PWU/ci5hYm9ydCgpOiJlcnJvciI9PT1lPyJudW1iZXIiIT10eXBlb2Ygci5zdGF0dXM/dCgwLCJlcnJvciIpOnQoci5zdGF0dXMsci5zdGF0dXNUZXh0KTp0KF90W3Iuc3RhdHVzXXx8ci5zdGF0dXMsci5zdGF0dXNUZXh0LCJ0ZXh0IiE9PShyLnJlc3BvbnNlVHlwZXx8InRleHQiKXx8InN0cmluZyIhPXR5cGVvZiByLnJlc3BvbnNlVGV4dD97YmluYXJ5OnIucmVzcG9uc2V9Ont0ZXh0OnIucmVzcG9uc2VUZXh0fSxyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxyLm9ubG9hZD1vKCksYT1yLm9uZXJyb3I9ci5vbnRpbWVvdXQ9bygiZXJyb3IiKSx2b2lkIDAhPT1yLm9uYWJvcnQ/ci5vbmFib3J0PWE6ci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09ci5yZWFkeVN0YXRlJiZDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtvJiZhKCl9KX0sbz1vKCJhYm9ydCIpO3RyeXtyLnNlbmQoaS5oYXNDb250ZW50JiZpLmRhdGF8fG51bGwpfWNhdGNoKGUpe2lmKG8pdGhyb3cgZX19LGFib3J0OmZ1bmN0aW9uKCl7byYmbygpfX19KSxTLmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oZSl7ZS5jcm9zc0RvbWFpbiYmKGUuY29udGVudHMuc2NyaXB0PSExKX0pLFMuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiBTLmdsb2JhbEV2YWwoZSksZX19fSksUy5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUuY2FjaGUmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiKX0pLFMuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihuKXt2YXIgcixpO2lmKG4uY3Jvc3NEb21haW58fG4uc2NyaXB0QXR0cnMpcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSx0KXtyPVMoIjxzY3JpcHQ+IikuYXR0cihuLnNjcmlwdEF0dHJzfHx7fSkucHJvcCh7Y2hhcnNldDpuLnNjcmlwdENoYXJzZXQsc3JjOm4udXJsfSkub24oImxvYWQgZXJyb3IiLGk9ZnVuY3Rpb24oZSl7ci5yZW1vdmUoKSxpPW51bGwsZSYmdCgiZXJyb3IiPT09ZS50eXBlPzQwNDoyMDAsZS50eXBlKX0pLEUuaGVhZC5hcHBlbmRDaGlsZChyWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtpJiZpKCl9fX0pO3ZhciBVdCxYdD1bXSxWdD0vKD0pXD8oPz0mfCQpfFw/XD8vO1MuYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1YdC5wb3AoKXx8Uy5leHBhbmRvKyJfIitDdC5ndWlkKys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSxTLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT0hMSE9PWUuanNvbnAmJihWdC50ZXN0KGUudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIGUuZGF0YSYmMD09PShlLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJlZ0LnRlc3QoZS5kYXRhKSYmImRhdGEiKTtpZihhfHwianNvbnAiPT09ZS5kYXRhVHlwZXNbMF0pcmV0dXJuIHI9ZS5qc29ucENhbGxiYWNrPW0oZS5qc29ucENhbGxiYWNrKT9lLmpzb25wQ2FsbGJhY2soKTplLmpzb25wQ2FsbGJhY2ssYT9lW2FdPWVbYV0ucmVwbGFjZShWdCwiJDEiK3IpOiExIT09ZS5qc29ucCYmKGUudXJsKz0oRXQudGVzdChlLnVybCk/IiYiOiI/IikrZS5qc29ucCsiPSIrciksZS5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIG98fFMuZXJyb3IocisiIHdhcyBub3QgY2FsbGVkIiksb1swXX0sZS5kYXRhVHlwZXNbMF09Impzb24iLGk9Q1tyXSxDW3JdPWZ1bmN0aW9uKCl7bz1hcmd1bWVudHN9LG4uYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09aT9TKEMpLnJlbW92ZVByb3Aocik6Q1tyXT1pLGVbcl0mJihlLmpzb25wQ2FsbGJhY2s9dC5qc29ucENhbGxiYWNrLFh0LnB1c2gocikpLG8mJm0oaSkmJmkob1swXSksbz1pPXZvaWQgMH0pLCJzY3JpcHQifSkseS5jcmVhdGVIVE1MRG9jdW1lbnQ9KChVdD1FLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keSkuaW5uZXJIVE1MPSI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPiIsMj09PVV0LmNoaWxkTm9kZXMubGVuZ3RoKSxTLnBhcnNlSFRNTD1mdW5jdGlvbihlLHQsbil7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlP1tdOigiYm9vbGVhbiI9PXR5cGVvZiB0JiYobj10LHQ9ITEpLHR8fCh5LmNyZWF0ZUhUTUxEb2N1bWVudD8oKHI9KHQ9RS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKS5jcmVhdGVFbGVtZW50KCJiYXNlIikpLmhyZWY9RS5sb2NhdGlvbi5ocmVmLHQuaGVhZC5hcHBlbmRDaGlsZChyKSk6dD1FKSxvPSFuJiZbXSwoaT1OLmV4ZWMoZSkpP1t0LmNyZWF0ZUVsZW1lbnQoaVsxXSldOihpPXhlKFtlXSx0LG8pLG8mJm8ubGVuZ3RoJiZTKG8pLnJlbW92ZSgpLFMubWVyZ2UoW10saS5jaGlsZE5vZGVzKSkpO3ZhciByLGksb30sUy5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT10aGlzLHM9ZS5pbmRleE9mKCIgIik7cmV0dXJuLTE8cyYmKHI9dnQoZS5zbGljZShzKSksZT1lLnNsaWNlKDAscykpLG0odCk/KG49dCx0PXZvaWQgMCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLDA8YS5sZW5ndGgmJlMuYWpheCh7dXJsOmUsdHlwZTppfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTp0fSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxhLmh0bWwocj9TKCI8ZGl2PiIpLmFwcGVuZChTLnBhcnNlSFRNTChlKSkuZmluZChyKTplKX0pLmFsd2F5cyhuJiZmdW5jdGlvbihlLHQpe2EuZWFjaChmdW5jdGlvbigpe24uYXBwbHkodGhpcyxvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KX0pLHRoaXN9LFMuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKHQpe3JldHVybiBTLmdyZXAoUy50aW1lcnMsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9PT1lLmVsZW19KS5sZW5ndGh9LFMub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsPVMuY3NzKGUsInBvc2l0aW9uIiksYz1TKGUpLGY9e307InN0YXRpYyI9PT1sJiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxzPWMub2Zmc2V0KCksbz1TLmNzcyhlLCJ0b3AiKSx1PVMuY3NzKGUsImxlZnQiKSwoImFic29sdXRlIj09PWx8fCJmaXhlZCI9PT1sKSYmLTE8KG8rdSkuaW5kZXhPZigiYXV0byIpPyhhPShyPWMucG9zaXRpb24oKSkudG9wLGk9ci5sZWZ0KTooYT1wYXJzZUZsb2F0KG8pfHwwLGk9cGFyc2VGbG9hdCh1KXx8MCksbSh0KSYmKHQ9dC5jYWxsKGUsbixTLmV4dGVuZCh7fSxzKSkpLG51bGwhPXQudG9wJiYoZi50b3A9dC50b3Atcy50b3ArYSksbnVsbCE9dC5sZWZ0JiYoZi5sZWZ0PXQubGVmdC1zLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6KCJudW1iZXIiPT10eXBlb2YgZi50b3AmJihmLnRvcCs9InB4IiksIm51bWJlciI9PXR5cGVvZiBmLmxlZnQmJihmLmxlZnQrPSJweCIpLGMuY3NzKGYpKX19LFMuZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24odCl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihlKXtTLm9mZnNldC5zZXRPZmZzZXQodGhpcyx0LGUpfSk7dmFyIGUsbixyPXRoaXNbMF07cmV0dXJuIHI/ci5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZT1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49ci5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LHt0b3A6ZS50b3Arbi5wYWdlWU9mZnNldCxsZWZ0OmUubGVmdCtuLnBhZ2VYT2Zmc2V0fSk6e3RvcDowLGxlZnQ6MH06dm9pZCAwfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbixyPXRoaXNbMF0saT17dG9wOjAsbGVmdDowfTtpZigiZml4ZWQiPT09Uy5jc3MociwicG9zaXRpb24iKSl0PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZWxzZXt0PXRoaXMub2Zmc2V0KCksbj1yLm93bmVyRG9jdW1lbnQsZT1yLm9mZnNldFBhcmVudHx8bi5kb2N1bWVudEVsZW1lbnQ7d2hpbGUoZSYmKGU9PT1uLmJvZHl8fGU9PT1uLmRvY3VtZW50RWxlbWVudCkmJiJzdGF0aWMiPT09Uy5jc3MoZSwicG9zaXRpb24iKSllPWUucGFyZW50Tm9kZTtlJiZlIT09ciYmMT09PWUubm9kZVR5cGUmJigoaT1TKGUpLm9mZnNldCgpKS50b3ArPVMuY3NzKGUsImJvcmRlclRvcFdpZHRoIiwhMCksaS5sZWZ0Kz1TLmNzcyhlLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSl9cmV0dXJue3RvcDp0LnRvcC1pLnRvcC1TLmNzcyhyLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1pLmxlZnQtUy5jc3MociwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50O3doaWxlKGUmJiJzdGF0aWMiPT09Uy5jc3MoZSwicG9zaXRpb24iKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxyZX0pfX0pLFMuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbih0LGkpe3ZhciBvPSJwYWdlWU9mZnNldCI9PT1pO1MuZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoeChlKT9yPWU6OT09PWUubm9kZVR5cGUmJihyPWUuZGVmYXVsdFZpZXcpLHZvaWQgMD09PW4pcmV0dXJuIHI/cltpXTplW3RdO3I/ci5zY3JvbGxUbyhvP3IucGFnZVhPZmZzZXQ6bixvP246ci5wYWdlWU9mZnNldCk6ZVt0XT1ufSx0LGUsYXJndW1lbnRzLmxlbmd0aCl9fSksUy5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsbil7Uy5jc3NIb29rc1tuXT0kZSh5LnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZSx0KXtpZih0KXJldHVybiB0PUJlKGUsbiksTWUudGVzdCh0KT9TKGUpLnBvc2l0aW9uKClbbl0rInB4Ijp0fSl9KSxTLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLHMpe1MuZWFjaCh7cGFkZGluZzoiaW5uZXIiK2EsY29udGVudDpzLCIiOiJvdXRlciIrYX0sZnVuY3Rpb24ocixvKXtTLmZuW29dPWZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aCYmKHJ8fCJib29sZWFuIiE9dHlwZW9mIGUpLGk9cnx8KCEwPT09ZXx8ITA9PT10PyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gJCh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4geChlKT8wPT09by5pbmRleE9mKCJvdXRlciIpP2VbImlubmVyIithXTplLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IithXTo5PT09ZS5ub2RlVHlwZT8ocj1lLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChlLmJvZHlbInNjcm9sbCIrYV0sclsic2Nyb2xsIithXSxlLmJvZHlbIm9mZnNldCIrYV0sclsib2Zmc2V0IithXSxyWyJjbGllbnQiK2FdKSk6dm9pZCAwPT09bj9TLmNzcyhlLHQsaSk6Uy5zdHlsZShlLHQsbixpKX0scyxuP2U6dm9pZCAwLG4pfX0pfSksUy5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oZSx0KXtTLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKHQsZSl9fSksUy5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLm9uKGUsbnVsbCx0LG4pfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5vZmYoZSxudWxsLHQpfSxkZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbih0LGUsbixyKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGUsIioqIik6dGhpcy5vZmYodCxlfHwiKioiLG4pfSxob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX19KSxTLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSxuKXtTLmZuW25dPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIDA8YXJndW1lbnRzLmxlbmd0aD90aGlzLm9uKG4sbnVsbCxlLHQpOnRoaXMudHJpZ2dlcihuKX19KTt2YXIgR3Q9L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nO1MucHJveHk9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7aWYoInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLG0oZSkpcmV0dXJuIHI9cy5jYWxsKGFyZ3VtZW50cywyKSwoaT1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHR8fHRoaXMsci5jb25jYXQocy5jYWxsKGFyZ3VtZW50cykpKX0pLmd1aWQ9ZS5ndWlkPWUuZ3VpZHx8Uy5ndWlkKyssaX0sUy5ob2xkUmVhZHk9ZnVuY3Rpb24oZSl7ZT9TLnJlYWR5V2FpdCsrOlMucmVhZHkoITApfSxTLmlzQXJyYXk9QXJyYXkuaXNBcnJheSxTLnBhcnNlSlNPTj1KU09OLnBhcnNlLFMubm9kZU5hbWU9QSxTLmlzRnVuY3Rpb249bSxTLmlzV2luZG93PXgsUy5jYW1lbENhc2U9WCxTLnR5cGU9dyxTLm5vdz1EYXRlLm5vdyxTLmlzTnVtZXJpYz1mdW5jdGlvbihlKXt2YXIgdD1TLnR5cGUoZSk7cmV0dXJuKCJudW1iZXIiPT09dHx8InN0cmluZyI9PT10KSYmIWlzTmFOKGUtcGFyc2VGbG9hdChlKSl9LFMudHJpbT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjooZSsiIikucmVwbGFjZShHdCwiIil9LCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBTfSk7dmFyIFl0PUMualF1ZXJ5LFF0PUMuJDtyZXR1cm4gUy5ub0NvbmZsaWN0PWZ1bmN0aW9uKGUpe3JldHVybiBDLiQ9PT1TJiYoQy4kPVF0KSxlJiZDLmpRdWVyeT09PVMmJihDLmpRdWVyeT1ZdCksU30sInVuZGVmaW5lZCI9PXR5cGVvZiBlJiYoQy5qUXVlcnk9Qy4kPVMpLFN9KTsK"},{"meta":{"name":"purify.min.js","url":"https://cdn.staticfile.org/dompurify/2.0.10/purify.min.js","ts":1641535195913,"mimetype":"text/javascript"},"source":"LyohIEBsaWNlbnNlIERPTVB1cmlmeSB8IChjKSBDdXJlNTMgYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyB8IFJlbGVhc2VkIHVuZGVyIHRoZSBBcGFjaGUgbGljZW5zZSAyLjAgYW5kIE1vemlsbGEgUHVibGljIExpY2Vuc2UgMi4wIHwgZ2l0aHViLmNvbS9jdXJlNTMvRE9NUHVyaWZ5L2Jsb2IvMi4wLjgvTElDRU5TRSAqLwohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTooZT1lfHxzZWxmKS5ET01QdXJpZnk9dCgpfSh0aGlzLChmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuaGFzT3duUHJvcGVydHksdD1PYmplY3Quc2V0UHJvdG90eXBlT2Ysbj1PYmplY3QuaXNGcm96ZW4scj1PYmplY3Qua2V5cyxvPU9iamVjdC5mcmVlemUsaT1PYmplY3Quc2VhbCxhPSJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmUmVmbGVjdCxsPWEuYXBwbHksYz1hLmNvbnN0cnVjdDtsfHwobD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGUuYXBwbHkodCxuKX0pLG98fChvPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksaXx8KGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxjfHwoYz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoZSxbbnVsbF0uY29uY2F0KGZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdD0wLG49QXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKW5bdF09ZVt0XTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbShlKX0odCkpKSl9KTt2YXIgcz1TKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSx1PVMoQXJyYXkucHJvdG90eXBlLmluZGV4T2YpLGQ9UyhBcnJheS5wcm90b3R5cGUuam9pbiksZj1TKEFycmF5LnByb3RvdHlwZS5wb3ApLHA9UyhBcnJheS5wcm90b3R5cGUucHVzaCksbT1TKEFycmF5LnByb3RvdHlwZS5zbGljZSkseT1TKFN0cmluZy5wcm90b3R5cGUudG9Mb3dlckNhc2UpLGc9UyhTdHJpbmcucHJvdG90eXBlLm1hdGNoKSxoPVMoU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlKSx2PVMoU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mKSxiPVMoU3RyaW5nLnByb3RvdHlwZS50cmltKSxUPVMoUmVnRXhwLnByb3RvdHlwZS50ZXN0KSxBPWsoUmVnRXhwKSx4PWsoVHlwZUVycm9yKTtmdW5jdGlvbiBTKGUpe3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KG4+MT9uLTE6MCksbz0xO288bjtvKyspcltvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gbChlLHQscil9fWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbj1BcnJheSh0KSxyPTA7cjx0O3IrKyluW3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gYyhlLG4pfX1mdW5jdGlvbiBMKGUscil7dCYmdChlLG51bGwpO2Zvcih2YXIgbz1yLmxlbmd0aDtvLS07KXt2YXIgaT1yW29dO2lmKCJzdHJpbmciPT10eXBlb2YgaSl7dmFyIGE9eShpKTthIT09aSYmKG4ocil8fChyW29dPWEpLGk9YSl9ZVtpXT0hMH1yZXR1cm4gZX1mdW5jdGlvbiBFKHQpe3ZhciBuPXt9LHI9dm9pZCAwO2ZvcihyIGluIHQpbChlLHQsW3JdKSYmKG5bcl09dFtyXSk7cmV0dXJuIG59dmFyIE09byhbImEiLCJhYmJyIiwiYWNyb255bSIsImFkZHJlc3MiLCJhcmVhIiwiYXJ0aWNsZSIsImFzaWRlIiwiYXVkaW8iLCJiIiwiYmRpIiwiYmRvIiwiYmlnIiwiYmxpbmsiLCJibG9ja3F1b3RlIiwiYm9keSIsImJyIiwiYnV0dG9uIiwiY2FudmFzIiwiY2FwdGlvbiIsImNlbnRlciIsImNpdGUiLCJjb2RlIiwiY29sIiwiY29sZ3JvdXAiLCJjb250ZW50IiwiZGF0YSIsImRhdGFsaXN0IiwiZGQiLCJkZWNvcmF0b3IiLCJkZWwiLCJkZXRhaWxzIiwiZGZuIiwiZGlyIiwiZGl2IiwiZGwiLCJkdCIsImVsZW1lbnQiLCJlbSIsImZpZWxkc2V0IiwiZmlnY2FwdGlvbiIsImZpZ3VyZSIsImZvbnQiLCJmb290ZXIiLCJmb3JtIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJoNSIsImg2IiwiaGVhZCIsImhlYWRlciIsImhncm91cCIsImhyIiwiaHRtbCIsImkiLCJpbWciLCJpbnB1dCIsImlucyIsImtiZCIsImxhYmVsIiwibGVnZW5kIiwibGkiLCJtYWluIiwibWFwIiwibWFyayIsIm1hcnF1ZWUiLCJtZW51IiwibWVudWl0ZW0iLCJtZXRlciIsIm5hdiIsIm5vYnIiLCJvbCIsIm9wdGdyb3VwIiwib3B0aW9uIiwib3V0cHV0IiwicCIsInBpY3R1cmUiLCJwcmUiLCJwcm9ncmVzcyIsInEiLCJycCIsInJ0IiwicnVieSIsInMiLCJzYW1wIiwic2VjdGlvbiIsInNlbGVjdCIsInNoYWRvdyIsInNtYWxsIiwic291cmNlIiwic3BhY2VyIiwic3BhbiIsInN0cmlrZSIsInN0cm9uZyIsInN0eWxlIiwic3ViIiwic3VtbWFyeSIsInN1cCIsInRhYmxlIiwidGJvZHkiLCJ0ZCIsInRlbXBsYXRlIiwidGV4dGFyZWEiLCJ0Zm9vdCIsInRoIiwidGhlYWQiLCJ0aW1lIiwidHIiLCJ0cmFjayIsInR0IiwidSIsInVsIiwidmFyIiwidmlkZW8iLCJ3YnIiXSksXz1vKFsic3ZnIiwiYSIsImFsdGdseXBoIiwiYWx0Z2x5cGhkZWYiLCJhbHRnbHlwaGl0ZW0iLCJhbmltYXRlY29sb3IiLCJhbmltYXRlbW90aW9uIiwiYW5pbWF0ZXRyYW5zZm9ybSIsImF1ZGlvIiwiY2FudmFzIiwiY2lyY2xlIiwiY2xpcHBhdGgiLCJkZWZzIiwiZGVzYyIsImVsbGlwc2UiLCJmaWx0ZXIiLCJmb250IiwiZyIsImdseXBoIiwiZ2x5cGhyZWYiLCJoa2VybiIsImltYWdlIiwibGluZSIsImxpbmVhcmdyYWRpZW50IiwibWFya2VyIiwibWFzayIsIm1ldGFkYXRhIiwibXBhdGgiLCJwYXRoIiwicGF0dGVybiIsInBvbHlnb24iLCJwb2x5bGluZSIsInJhZGlhbGdyYWRpZW50IiwicmVjdCIsInN0b3AiLCJzdHlsZSIsInN3aXRjaCIsInN5bWJvbCIsInRleHQiLCJ0ZXh0cGF0aCIsInRpdGxlIiwidHJlZiIsInRzcGFuIiwidmlkZW8iLCJ2aWV3Iiwidmtlcm4iXSksTj1vKFsiZmVCbGVuZCIsImZlQ29sb3JNYXRyaXgiLCJmZUNvbXBvbmVudFRyYW5zZmVyIiwiZmVDb21wb3NpdGUiLCJmZUNvbnZvbHZlTWF0cml4IiwiZmVEaWZmdXNlTGlnaHRpbmciLCJmZURpc3BsYWNlbWVudE1hcCIsImZlRGlzdGFudExpZ2h0IiwiZmVGbG9vZCIsImZlRnVuY0EiLCJmZUZ1bmNCIiwiZmVGdW5jRyIsImZlRnVuY1IiLCJmZUdhdXNzaWFuQmx1ciIsImZlTWVyZ2UiLCJmZU1lcmdlTm9kZSIsImZlTW9ycGhvbG9neSIsImZlT2Zmc2V0IiwiZmVQb2ludExpZ2h0IiwiZmVTcGVjdWxhckxpZ2h0aW5nIiwiZmVTcG90TGlnaHQiLCJmZVRpbGUiLCJmZVR1cmJ1bGVuY2UiXSksTz1vKFsibWF0aCIsIm1lbmNsb3NlIiwibWVycm9yIiwibWZlbmNlZCIsIm1mcmFjIiwibWdseXBoIiwibWkiLCJtbGFiZWxlZHRyIiwibW11bHRpc2NyaXB0cyIsIm1uIiwibW8iLCJtb3ZlciIsIm1wYWRkZWQiLCJtcGhhbnRvbSIsIm1yb290IiwibXJvdyIsIm1zIiwibXNwYWNlIiwibXNxcnQiLCJtc3R5bGUiLCJtc3ViIiwibXN1cCIsIm1zdWJzdXAiLCJtdGFibGUiLCJtdGQiLCJtdGV4dCIsIm10ciIsIm11bmRlciIsIm11bmRlcm92ZXIiXSksdz1vKFsiI3RleHQiXSksRD1vKFsiYWNjZXB0IiwiYWN0aW9uIiwiYWxpZ24iLCJhbHQiLCJhdXRvY2FwaXRhbGl6ZSIsImF1dG9jb21wbGV0ZSIsImF1dG9waWN0dXJlaW5waWN0dXJlIiwiYXV0b3BsYXkiLCJiYWNrZ3JvdW5kIiwiYmdjb2xvciIsImJvcmRlciIsImNhcHR1cmUiLCJjZWxscGFkZGluZyIsImNlbGxzcGFjaW5nIiwiY2hlY2tlZCIsImNpdGUiLCJjbGFzcyIsImNsZWFyIiwiY29sb3IiLCJjb2xzIiwiY29sc3BhbiIsImNvbnRyb2xzIiwiY29udHJvbHNsaXN0IiwiY29vcmRzIiwiY3Jvc3NvcmlnaW4iLCJkYXRldGltZSIsImRlY29kaW5nIiwiZGVmYXVsdCIsImRpciIsImRpc2FibGVkIiwiZGlzYWJsZXBpY3R1cmVpbnBpY3R1cmUiLCJkaXNhYmxlcmVtb3RlcGxheWJhY2siLCJkb3dubG9hZCIsImRyYWdnYWJsZSIsImVuY3R5cGUiLCJlbnRlcmtleWhpbnQiLCJmYWNlIiwiZm9yIiwiaGVhZGVycyIsImhlaWdodCIsImhpZGRlbiIsImhpZ2giLCJocmVmIiwiaHJlZmxhbmciLCJpZCIsImlucHV0bW9kZSIsImludGVncml0eSIsImlzbWFwIiwia2luZCIsImxhYmVsIiwibGFuZyIsImxpc3QiLCJsb2FkaW5nIiwibG9vcCIsImxvdyIsIm1heCIsIm1heGxlbmd0aCIsIm1lZGlhIiwibWV0aG9kIiwibWluIiwibWlubGVuZ3RoIiwibXVsdGlwbGUiLCJtdXRlZCIsIm5hbWUiLCJub3NoYWRlIiwibm92YWxpZGF0ZSIsIm5vd3JhcCIsIm9wZW4iLCJvcHRpbXVtIiwicGF0dGVybiIsInBsYWNlaG9sZGVyIiwicGxheXNpbmxpbmUiLCJwb3N0ZXIiLCJwcmVsb2FkIiwicHViZGF0ZSIsInJhZGlvZ3JvdXAiLCJyZWFkb25seSIsInJlbCIsInJlcXVpcmVkIiwicmV2IiwicmV2ZXJzZWQiLCJyb2xlIiwicm93cyIsInJvd3NwYW4iLCJzcGVsbGNoZWNrIiwic2NvcGUiLCJzZWxlY3RlZCIsInNoYXBlIiwic2l6ZSIsInNpemVzIiwic3BhbiIsInNyY2xhbmciLCJzdGFydCIsInNyYyIsInNyY3NldCIsInN0ZXAiLCJzdHlsZSIsInN1bW1hcnkiLCJ0YWJpbmRleCIsInRpdGxlIiwidHJhbnNsYXRlIiwidHlwZSIsInVzZW1hcCIsInZhbGlnbiIsInZhbHVlIiwid2lkdGgiLCJ4bWxucyJdKSxSPW8oWyJhY2NlbnQtaGVpZ2h0IiwiYWNjdW11bGF0ZSIsImFkZGl0aXZlIiwiYWxpZ25tZW50LWJhc2VsaW5lIiwiYXNjZW50IiwiYXR0cmlidXRlbmFtZSIsImF0dHJpYnV0ZXR5cGUiLCJhemltdXRoIiwiYmFzZWZyZXF1ZW5jeSIsImJhc2VsaW5lLXNoaWZ0IiwiYmVnaW4iLCJiaWFzIiwiYnkiLCJjbGFzcyIsImNsaXAiLCJjbGlwLXBhdGgiLCJjbGlwLXJ1bGUiLCJjb2xvciIsImNvbG9yLWludGVycG9sYXRpb24iLCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMiLCJjb2xvci1wcm9maWxlIiwiY29sb3ItcmVuZGVyaW5nIiwiY3giLCJjeSIsImQiLCJkeCIsImR5IiwiZGlmZnVzZWNvbnN0YW50IiwiZGlyZWN0aW9uIiwiZGlzcGxheSIsImRpdmlzb3IiLCJkdXIiLCJlZGdlbW9kZSIsImVsZXZhdGlvbiIsImVuZCIsImZpbGwiLCJmaWxsLW9wYWNpdHkiLCJmaWxsLXJ1bGUiLCJmaWx0ZXIiLCJmaWx0ZXJ1bml0cyIsImZsb29kLWNvbG9yIiwiZmxvb2Qtb3BhY2l0eSIsImZvbnQtZmFtaWx5IiwiZm9udC1zaXplIiwiZm9udC1zaXplLWFkanVzdCIsImZvbnQtc3RyZXRjaCIsImZvbnQtc3R5bGUiLCJmb250LXZhcmlhbnQiLCJmb250LXdlaWdodCIsImZ4IiwiZnkiLCJnMSIsImcyIiwiZ2x5cGgtbmFtZSIsImdseXBocmVmIiwiZ3JhZGllbnR1bml0cyIsImdyYWRpZW50dHJhbnNmb3JtIiwiaGVpZ2h0IiwiaHJlZiIsImlkIiwiaW1hZ2UtcmVuZGVyaW5nIiwiaW4iLCJpbjIiLCJrIiwiazEiLCJrMiIsImszIiwiazQiLCJrZXJuaW5nIiwia2V5cG9pbnRzIiwia2V5c3BsaW5lcyIsImtleXRpbWVzIiwibGFuZyIsImxlbmd0aGFkanVzdCIsImxldHRlci1zcGFjaW5nIiwia2VybmVsbWF0cml4Iiwia2VybmVsdW5pdGxlbmd0aCIsImxpZ2h0aW5nLWNvbG9yIiwibG9jYWwiLCJtYXJrZXItZW5kIiwibWFya2VyLW1pZCIsIm1hcmtlci1zdGFydCIsIm1hcmtlcmhlaWdodCIsIm1hcmtlcnVuaXRzIiwibWFya2Vyd2lkdGgiLCJtYXNrY29udGVudHVuaXRzIiwibWFza3VuaXRzIiwibWF4IiwibWFzayIsIm1lZGlhIiwibWV0aG9kIiwibW9kZSIsIm1pbiIsIm5hbWUiLCJudW1vY3RhdmVzIiwib2Zmc2V0Iiwib3BlcmF0b3IiLCJvcGFjaXR5Iiwib3JkZXIiLCJvcmllbnQiLCJvcmllbnRhdGlvbiIsIm9yaWdpbiIsIm92ZXJmbG93IiwicGFpbnQtb3JkZXIiLCJwYXRoIiwicGF0aGxlbmd0aCIsInBhdHRlcm5jb250ZW50dW5pdHMiLCJwYXR0ZXJudHJhbnNmb3JtIiwicGF0dGVybnVuaXRzIiwicG9pbnRzIiwicHJlc2VydmVhbHBoYSIsInByZXNlcnZlYXNwZWN0cmF0aW8iLCJwcmltaXRpdmV1bml0cyIsInIiLCJyeCIsInJ5IiwicmFkaXVzIiwicmVmeCIsInJlZnkiLCJyZXBlYXRjb3VudCIsInJlcGVhdGR1ciIsInJlc3RhcnQiLCJyZXN1bHQiLCJyb3RhdGUiLCJzY2FsZSIsInNlZWQiLCJzaGFwZS1yZW5kZXJpbmciLCJzcGVjdWxhcmNvbnN0YW50Iiwic3BlY3VsYXJleHBvbmVudCIsInNwcmVhZG1ldGhvZCIsInN0YXJ0b2Zmc2V0Iiwic3RkZGV2aWF0aW9uIiwic3RpdGNodGlsZXMiLCJzdG9wLWNvbG9yIiwic3RvcC1vcGFjaXR5Iiwic3Ryb2tlLWRhc2hhcnJheSIsInN0cm9rZS1kYXNob2Zmc2V0Iiwic3Ryb2tlLWxpbmVjYXAiLCJzdHJva2UtbGluZWpvaW4iLCJzdHJva2UtbWl0ZXJsaW1pdCIsInN0cm9rZS1vcGFjaXR5Iiwic3Ryb2tlIiwic3Ryb2tlLXdpZHRoIiwic3R5bGUiLCJzdXJmYWNlc2NhbGUiLCJ0YWJpbmRleCIsInRhcmdldHgiLCJ0YXJnZXR5IiwidHJhbnNmb3JtIiwidGV4dC1hbmNob3IiLCJ0ZXh0LWRlY29yYXRpb24iLCJ0ZXh0LXJlbmRlcmluZyIsInRleHRsZW5ndGgiLCJ0eXBlIiwidTEiLCJ1MiIsInVuaWNvZGUiLCJ2YWx1ZXMiLCJ2aWV3Ym94IiwidmlzaWJpbGl0eSIsInZlcnNpb24iLCJ2ZXJ0LWFkdi15IiwidmVydC1vcmlnaW4teCIsInZlcnQtb3JpZ2luLXkiLCJ3aWR0aCIsIndvcmQtc3BhY2luZyIsIndyYXAiLCJ3cml0aW5nLW1vZGUiLCJ4Y2hhbm5lbHNlbGVjdG9yIiwieWNoYW5uZWxzZWxlY3RvciIsIngiLCJ4MSIsIngyIiwieG1sbnMiLCJ5IiwieTEiLCJ5MiIsInoiLCJ6b29tYW5kcGFuIl0pLEg9byhbImFjY2VudCIsImFjY2VudHVuZGVyIiwiYWxpZ24iLCJiZXZlbGxlZCIsImNsb3NlIiwiY29sdW1uc2FsaWduIiwiY29sdW1ubGluZXMiLCJjb2x1bW5zcGFuIiwiZGVub21hbGlnbiIsImRlcHRoIiwiZGlyIiwiZGlzcGxheSIsImRpc3BsYXlzdHlsZSIsImVuY29kaW5nIiwiZmVuY2UiLCJmcmFtZSIsImhlaWdodCIsImhyZWYiLCJpZCIsImxhcmdlb3AiLCJsZW5ndGgiLCJsaW5ldGhpY2tuZXNzIiwibHNwYWNlIiwibHF1b3RlIiwibWF0aGJhY2tncm91bmQiLCJtYXRoY29sb3IiLCJtYXRoc2l6ZSIsIm1hdGh2YXJpYW50IiwibWF4c2l6ZSIsIm1pbnNpemUiLCJtb3ZhYmxlbGltaXRzIiwibm90YXRpb24iLCJudW1hbGlnbiIsIm9wZW4iLCJyb3dhbGlnbiIsInJvd2xpbmVzIiwicm93c3BhY2luZyIsInJvd3NwYW4iLCJyc3BhY2UiLCJycXVvdGUiLCJzY3JpcHRsZXZlbCIsInNjcmlwdG1pbnNpemUiLCJzY3JpcHRzaXplbXVsdGlwbGllciIsInNlbGVjdGlvbiIsInNlcGFyYXRvciIsInNlcGFyYXRvcnMiLCJzdHJldGNoeSIsInN1YnNjcmlwdHNoaWZ0Iiwic3Vwc2NyaXB0c2hpZnQiLCJzeW1tZXRyaWMiLCJ2b2Zmc2V0Iiwid2lkdGgiLCJ4bWxucyJdKSxDPW8oWyJ4bGluazpocmVmIiwieG1sOmlkIiwieGxpbms6dGl0bGUiLCJ4bWw6c3BhY2UiLCJ4bWxuczp4bGluayJdKSxGPWkoL1x7XHtbXHNcU10qfFtcc1xTXSpcfVx9L2dtKSx6PWkoLzwlW1xzXFNdKnxbXHNcU10qJT4vZ20pLEk9aSgvXmRhdGEtW1wtXHcuXHUwMEI3LVx1RkZGRl0vKSxqPWkoL15hcmlhLVtcLVx3XSskLyksVT1pKC9eKD86KD86KD86ZnxodCl0cHM/fG1haWx0b3x0ZWx8Y2FsbHRvfGNpZHx4bXBwKTp8W15hLXpdfFthLXorLlwtXSsoPzpbXmEteisuXC06XXwkKSkvaSksUD1pKC9eKD86XHcrc2NyaXB0fGRhdGEpOi9pKSxXPWkoL1tcdTAwMDAtXHUwMDIwXHUwMEEwXHUxNjgwXHUxODBFXHUyMDAwLVx1MjAyOVx1MjA1Zlx1MzAwMF0vZyksQj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgZX07ZnVuY3Rpb24gRyhlKXtpZihBcnJheS5pc0FycmF5KGUpKXtmb3IodmFyIHQ9MCxuPUFycmF5KGUubGVuZ3RoKTt0PGUubGVuZ3RoO3QrKyluW3RdPWVbdF07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20oZSl9dmFyIHE9ZnVuY3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdz9udWxsOndpbmRvd30sSz1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiIT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6QihlKSl8fCJmdW5jdGlvbiIhPXR5cGVvZiBlLmNyZWF0ZVBvbGljeSlyZXR1cm4gbnVsbDt2YXIgbj1udWxsO3QuY3VycmVudFNjcmlwdCYmdC5jdXJyZW50U2NyaXB0Lmhhc0F0dHJpYnV0ZSgiZGF0YS10dC1wb2xpY3ktc3VmZml4IikmJihuPXQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoImRhdGEtdHQtcG9saWN5LXN1ZmZpeCIpKTt2YXIgcj0iZG9tcHVyaWZ5Iisobj8iIyIrbjoiIik7dHJ5e3JldHVybiBlLmNyZWF0ZVBvbGljeShyLHtjcmVhdGVIVE1MOmZ1bmN0aW9uKGUpe3JldHVybiBlfX0pfWNhdGNoKGUpe3JldHVybiBjb25zb2xlLndhcm4oIlRydXN0ZWRUeXBlcyBwb2xpY3kgIityKyIgY291bGQgbm90IGJlIGNyZWF0ZWQuIiksbnVsbH19O3JldHVybiBmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnEoKSxuPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfTtpZihuLnZlcnNpb249IjIuMC4xMCIsbi5yZW1vdmVkPVtdLCF0fHwhdC5kb2N1bWVudHx8OSE9PXQuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG4uaXNTdXBwb3J0ZWQ9ITEsbjt2YXIgaT10LmRvY3VtZW50LGE9ITEsbD10LmRvY3VtZW50LGM9dC5Eb2N1bWVudEZyYWdtZW50LFM9dC5IVE1MVGVtcGxhdGVFbGVtZW50LGs9dC5Ob2RlLFY9dC5Ob2RlRmlsdGVyLFk9dC5OYW1lZE5vZGVNYXAsWD12b2lkIDA9PT1ZP3QuTmFtZWROb2RlTWFwfHx0Lk1vek5hbWVkQXR0ck1hcDpZLCQ9dC5UZXh0LEo9dC5Db21tZW50LFE9dC5ET01QYXJzZXIsWj10LnRydXN0ZWRUeXBlcztpZigiZnVuY3Rpb24iPT10eXBlb2YgUyl7dmFyIGVlPWwuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTtlZS5jb250ZW50JiZlZS5jb250ZW50Lm93bmVyRG9jdW1lbnQmJihsPWVlLmNvbnRlbnQub3duZXJEb2N1bWVudCl9dmFyIHRlPUsoWixpKSxuZT10ZT90ZS5jcmVhdGVIVE1MKCIiKToiIixyZT1sLG9lPXJlLmltcGxlbWVudGF0aW9uLGllPXJlLmNyZWF0ZU5vZGVJdGVyYXRvcixhZT1yZS5nZXRFbGVtZW50c0J5VGFnTmFtZSxsZT1yZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50LGNlPWkuaW1wb3J0Tm9kZSxzZT17fTtuLmlzU3VwcG9ydGVkPW9lJiZ2b2lkIDAhPT1vZS5jcmVhdGVIVE1MRG9jdW1lbnQmJjkhPT1sLmRvY3VtZW50TW9kZTt2YXIgdWU9RixkZT16LGZlPUkscGU9aixtZT1QLHllPVcsZ2U9VSxoZT1udWxsLHZlPUwoe30sW10uY29uY2F0KEcoTSksRyhfKSxHKE4pLEcoTyksRyh3KSkpLGJlPW51bGwsVGU9TCh7fSxbXS5jb25jYXQoRyhEKSxHKFIpLEcoSCksRyhDKSkpLEFlPW51bGwseGU9bnVsbCxTZT0hMCxrZT0hMCxMZT0hMSxFZT0hMSxNZT0hMSxfZT0hMSxOZT0hMSxPZT0hMSx3ZT0hMSxEZT0hMSxSZT0hMSxIZT0hMSxDZT0hMCxGZT0hMCx6ZT0hMSxJZT17fSxqZT1MKHt9LFsiYW5ub3RhdGlvbi14bWwiLCJhdWRpbyIsImNvbGdyb3VwIiwiZGVzYyIsImZvcmVpZ25vYmplY3QiLCJoZWFkIiwiaWZyYW1lIiwibWF0aCIsIm1pIiwibW4iLCJtbyIsIm1zIiwibXRleHQiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJzY3JpcHQiLCJzdHlsZSIsInN2ZyIsInRlbXBsYXRlIiwidGhlYWQiLCJ0aXRsZSIsInZpZGVvIiwieG1wIl0pLFVlPUwoe30sWyJhdWRpbyIsInZpZGVvIiwiaW1nIiwic291cmNlIiwiaW1hZ2UiLCJ0cmFjayJdKSxQZT1udWxsLFdlPUwoe30sWyJhbHQiLCJjbGFzcyIsImZvciIsImlkIiwibGFiZWwiLCJuYW1lIiwicGF0dGVybiIsInBsYWNlaG9sZGVyIiwic3VtbWFyeSIsInRpdGxlIiwidmFsdWUiLCJzdHlsZSIsInhtbG5zIl0pLEJlPW51bGwsR2U9bC5jcmVhdGVFbGVtZW50KCJmb3JtIikscWU9ZnVuY3Rpb24oZSl7QmUmJkJlPT09ZXx8KGUmJiJvYmplY3QiPT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6QihlKSl8fChlPXt9KSxoZT0iQUxMT1dFRF9UQUdTImluIGU/TCh7fSxlLkFMTE9XRURfVEFHUyk6dmUsYmU9IkFMTE9XRURfQVRUUiJpbiBlP0woe30sZS5BTExPV0VEX0FUVFIpOlRlLFBlPSJBRERfVVJJX1NBRkVfQVRUUiJpbiBlP0woRShXZSksZS5BRERfVVJJX1NBRkVfQVRUUik6V2UsQWU9IkZPUkJJRF9UQUdTImluIGU/TCh7fSxlLkZPUkJJRF9UQUdTKTp7fSx4ZT0iRk9SQklEX0FUVFIiaW4gZT9MKHt9LGUuRk9SQklEX0FUVFIpOnt9LEllPSJVU0VfUFJPRklMRVMiaW4gZSYmZS5VU0VfUFJPRklMRVMsU2U9ITEhPT1lLkFMTE9XX0FSSUFfQVRUUixrZT0hMSE9PWUuQUxMT1dfREFUQV9BVFRSLExlPWUuQUxMT1dfVU5LTk9XTl9QUk9UT0NPTFN8fCExLEVlPWUuU0FGRV9GT1JfSlFVRVJZfHwhMSxNZT1lLlNBRkVfRk9SX1RFTVBMQVRFU3x8ITEsX2U9ZS5XSE9MRV9ET0NVTUVOVHx8ITEsd2U9ZS5SRVRVUk5fRE9NfHwhMSxEZT1lLlJFVFVSTl9ET01fRlJBR01FTlR8fCExLFJlPWUuUkVUVVJOX0RPTV9JTVBPUlR8fCExLEhlPWUuUkVUVVJOX1RSVVNURURfVFlQRXx8ITEsT2U9ZS5GT1JDRV9CT0RZfHwhMSxDZT0hMSE9PWUuU0FOSVRJWkVfRE9NLEZlPSExIT09ZS5LRUVQX0NPTlRFTlQsemU9ZS5JTl9QTEFDRXx8ITEsZ2U9ZS5BTExPV0VEX1VSSV9SRUdFWFB8fGdlLE1lJiYoa2U9ITEpLERlJiYod2U9ITApLEllJiYoaGU9TCh7fSxbXS5jb25jYXQoRyh3KSkpLGJlPVtdLCEwPT09SWUuaHRtbCYmKEwoaGUsTSksTChiZSxEKSksITA9PT1JZS5zdmcmJihMKGhlLF8pLEwoYmUsUiksTChiZSxDKSksITA9PT1JZS5zdmdGaWx0ZXJzJiYoTChoZSxOKSxMKGJlLFIpLEwoYmUsQykpLCEwPT09SWUubWF0aE1sJiYoTChoZSxPKSxMKGJlLEgpLEwoYmUsQykpKSxlLkFERF9UQUdTJiYoaGU9PT12ZSYmKGhlPUUoaGUpKSxMKGhlLGUuQUREX1RBR1MpKSxlLkFERF9BVFRSJiYoYmU9PT1UZSYmKGJlPUUoYmUpKSxMKGJlLGUuQUREX0FUVFIpKSxlLkFERF9VUklfU0FGRV9BVFRSJiZMKFBlLGUuQUREX1VSSV9TQUZFX0FUVFIpLEZlJiYoaGVbIiN0ZXh0Il09ITApLF9lJiZMKGhlLFsiaHRtbCIsImhlYWQiLCJib2R5Il0pLGhlLnRhYmxlJiYoTChoZSxbInRib2R5Il0pLGRlbGV0ZSBBZS50Ym9keSksbyYmbyhlKSxCZT1lKX0sS2U9ZnVuY3Rpb24oZSl7cChuLnJlbW92ZWQse2VsZW1lbnQ6ZX0pO3RyeXtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9Y2F0Y2godCl7ZS5vdXRlckhUTUw9bmV9fSxWZT1mdW5jdGlvbihlLHQpe3RyeXtwKG4ucmVtb3ZlZCx7YXR0cmlidXRlOnQuZ2V0QXR0cmlidXRlTm9kZShlKSxmcm9tOnR9KX1jYXRjaChlKXtwKG4ucmVtb3ZlZCx7YXR0cmlidXRlOm51bGwsZnJvbTp0fSl9dC5yZW1vdmVBdHRyaWJ1dGUoZSl9LFllPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMCxuPXZvaWQgMDtpZihPZSllPSI8cmVtb3ZlPjwvcmVtb3ZlPiIrZTtlbHNle3ZhciByPWcoZSwvXltcc10rLyk7bj1yJiZyWzBdfXZhciBvPXRlP3RlLmNyZWF0ZUhUTUwoZSk6ZTt0cnl7dD0obmV3IFEpLnBhcnNlRnJvbVN0cmluZyhvLCJ0ZXh0L2h0bWwiKX1jYXRjaChlKXt9aWYoYSYmTChBZSxbInRpdGxlIl0pLCF0fHwhdC5kb2N1bWVudEVsZW1lbnQpe3ZhciBpPSh0PW9lLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLmJvZHk7aS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkucGFyZW50Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCksaS5vdXRlckhUTUw9b31yZXR1cm4gZSYmbiYmdC5ib2R5Lmluc2VydEJlZm9yZShsLmNyZWF0ZVRleHROb2RlKG4pLHQuYm9keS5jaGlsZE5vZGVzWzBdfHxudWxsKSxhZS5jYWxsKHQsX2U/Imh0bWwiOiJib2R5IilbMF19O24uaXNTdXBwb3J0ZWQmJmZ1bmN0aW9uKCl7dHJ5e3ZhciBlPVllKCI8eC8+PHRpdGxlPiZsdDsvdGl0bGUmZ3Q7Jmx0O2ltZyZndDsiKTtUKC88XC90aXRsZS8sZS5xdWVyeVNlbGVjdG9yKCJ0aXRsZSIpLmlubmVySFRNTCkmJihhPSEwKX1jYXRjaChlKXt9fSgpO3ZhciBYZT1mdW5jdGlvbihlKXtyZXR1cm4gaWUuY2FsbChlLm93bmVyRG9jdW1lbnR8fGUsZSxWLlNIT1dfRUxFTUVOVHxWLlNIT1dfQ09NTUVOVHxWLlNIT1dfVEVYVCwoZnVuY3Rpb24oKXtyZXR1cm4gVi5GSUxURVJfQUNDRVBUfSksITEpfSwkZT1mdW5jdGlvbihlKXtyZXR1cm4hKGUgaW5zdGFuY2VvZiAkfHxlIGluc3RhbmNlb2YgSikmJiEoInN0cmluZyI9PXR5cGVvZiBlLm5vZGVOYW1lJiYic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnJlbW92ZUNoaWxkJiZlLmF0dHJpYnV0ZXMgaW5zdGFuY2VvZiBYJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5yZW1vdmVBdHRyaWJ1dGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnNldEF0dHJpYnV0ZSYmInN0cmluZyI9PXR5cGVvZiBlLm5hbWVzcGFjZVVSSSl9LEplPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT09KHZvaWQgMD09PWs/InVuZGVmaW5lZCI6QihrKSk/ZSBpbnN0YW5jZW9mIGs6ZSYmIm9iamVjdCI9PT0odm9pZCAwPT09ZT8idW5kZWZpbmVkIjpCKGUpKSYmIm51bWJlciI9PXR5cGVvZiBlLm5vZGVUeXBlJiYic3RyaW5nIj09dHlwZW9mIGUubm9kZU5hbWV9LFFlPWZ1bmN0aW9uKGUsdCxyKXtzZVtlXSYmcyhzZVtlXSwoZnVuY3Rpb24oZSl7ZS5jYWxsKG4sdCxyLEJlKX0pKX0sWmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwO2lmKFFlKCJiZWZvcmVTYW5pdGl6ZUVsZW1lbnRzIixlLG51bGwpLCRlKGUpKXJldHVybiBLZShlKSwhMDt2YXIgcj15KGUubm9kZU5hbWUpO2lmKFFlKCJ1cG9uU2FuaXRpemVFbGVtZW50IixlLHt0YWdOYW1lOnIsYWxsb3dlZFRhZ3M6aGV9KSwoInN2ZyI9PT1yfHwibWF0aCI9PT1yKSYmMCE9PWUucXVlcnlTZWxlY3RvckFsbCgicCwgYnIiKS5sZW5ndGgpcmV0dXJuIEtlKGUpLCEwO2lmKCFoZVtyXXx8QWVbcl0pe2lmKEZlJiYhamVbcl0mJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmluc2VydEFkamFjZW50SFRNTCl0cnl7dmFyIG89ZS5pbm5lckhUTUw7ZS5pbnNlcnRBZGphY2VudEhUTUwoIkFmdGVyRW5kIix0ZT90ZS5jcmVhdGVIVE1MKG8pOm8pfWNhdGNoKGUpe31yZXR1cm4gS2UoZSksITB9cmV0dXJuIm5vc2NyaXB0Ij09PXImJlQoLzxcL25vc2NyaXB0L2ksZS5pbm5lckhUTUwpfHwibm9lbWJlZCI9PT1yJiZUKC88XC9ub2VtYmVkL2ksZS5pbm5lckhUTUwpPyhLZShlKSwhMCk6KCFFZXx8ZS5maXJzdEVsZW1lbnRDaGlsZHx8ZS5jb250ZW50JiZlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGR8fCFUKC88L2csZS50ZXh0Q29udGVudCl8fChwKG4ucmVtb3ZlZCx7ZWxlbWVudDplLmNsb25lTm9kZSgpfSksZS5pbm5lckhUTUw/ZS5pbm5lckhUTUw9aChlLmlubmVySFRNTCwvPC9nLCImbHQ7Iik6ZS5pbm5lckhUTUw9aChlLnRleHRDb250ZW50LC88L2csIiZsdDsiKSksTWUmJjM9PT1lLm5vZGVUeXBlJiYodD1lLnRleHRDb250ZW50LHQ9aCh0LHVlLCIgIiksdD1oKHQsZGUsIiAiKSxlLnRleHRDb250ZW50IT09dCYmKHAobi5yZW1vdmVkLHtlbGVtZW50OmUuY2xvbmVOb2RlKCl9KSxlLnRleHRDb250ZW50PXQpKSxRZSgiYWZ0ZXJTYW5pdGl6ZUVsZW1lbnRzIixlLG51bGwpLCExKX0sZXQ9ZnVuY3Rpb24oZSx0LG4pe2lmKENlJiYoImlkIj09PXR8fCJuYW1lIj09PXQpJiYobiBpbiBsfHxuIGluIEdlKSlyZXR1cm4hMTtpZihrZSYmVChmZSx0KSk7ZWxzZSBpZihTZSYmVChwZSx0KSk7ZWxzZXtpZighYmVbdF18fHhlW3RdKXJldHVybiExO2lmKFBlW3RdKTtlbHNlIGlmKFQoZ2UsaChuLHllLCIiKSkpO2Vsc2UgaWYoInNyYyIhPT10JiYieGxpbms6aHJlZiIhPT10JiYiaHJlZiIhPT10fHwic2NyaXB0Ij09PWV8fDAhPT12KG4sImRhdGE6Iil8fCFVZVtlXSl7aWYoTGUmJiFUKG1lLGgobix5ZSwiIikpKTtlbHNlIGlmKG4pcmV0dXJuITF9ZWxzZTt9cmV0dXJuITB9LHR0PWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMCxvPXZvaWQgMCxpPXZvaWQgMCxhPXZvaWQgMCxsPXZvaWQgMDtRZSgiYmVmb3JlU2FuaXRpemVBdHRyaWJ1dGVzIixlLG51bGwpO3ZhciBjPWUuYXR0cmlidXRlcztpZihjKXt2YXIgcz17YXR0ck5hbWU6IiIsYXR0clZhbHVlOiIiLGtlZXBBdHRyOiEwLGFsbG93ZWRBdHRyaWJ1dGVzOmJlfTtmb3IobD1jLmxlbmd0aDtsLS07KXt2YXIgcD10PWNbbF0sZz1wLm5hbWUsdj1wLm5hbWVzcGFjZVVSSTtpZihvPWIodC52YWx1ZSksaT15KGcpLHMuYXR0ck5hbWU9aSxzLmF0dHJWYWx1ZT1vLHMua2VlcEF0dHI9ITAscy5mb3JjZUtlZXBBdHRyPXZvaWQgMCxRZSgidXBvblNhbml0aXplQXR0cmlidXRlIixlLHMpLG89cy5hdHRyVmFsdWUsIXMuZm9yY2VLZWVwQXR0cil7aWYoIm5hbWUiPT09aSYmIklNRyI9PT1lLm5vZGVOYW1lJiZjLmlkKWE9Yy5pZCxjPW0oYyxbXSksVmUoImlkIixlKSxWZShnLGUpLHUoYyxhKT5sJiZlLnNldEF0dHJpYnV0ZSgiaWQiLGEudmFsdWUpO2Vsc2V7aWYoIklOUFVUIj09PWUubm9kZU5hbWUmJiJ0eXBlIj09PWkmJiJmaWxlIj09PW8mJnMua2VlcEF0dHImJihiZVtpXXx8IXhlW2ldKSljb250aW51ZTsiaWQiPT09ZyYmZS5zZXRBdHRyaWJ1dGUoZywiIiksVmUoZyxlKX1pZihzLmtlZXBBdHRyKWlmKEVlJiZUKC9cLz4vaSxvKSlWZShnLGUpO2Vsc2UgaWYoVCgvc3ZnfG1hdGgvaSxlLm5hbWVzcGFjZVVSSSkmJlQoQSgiPC8oIitkKHIoamUpLCJ8IikrIikiLCJpIiksbykpVmUoZyxlKTtlbHNle01lJiYobz1oKG8sdWUsIiAiKSxvPWgobyxkZSwiICIpKTt2YXIgeD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoZXQoeCxpLG8pKXRyeXt2P2Uuc2V0QXR0cmlidXRlTlModixnLG8pOmUuc2V0QXR0cmlidXRlKGcsbyksZihuLnJlbW92ZWQpfWNhdGNoKGUpe319fX1RZSgiYWZ0ZXJTYW5pdGl6ZUF0dHJpYnV0ZXMiLGUsbnVsbCl9fSxudD1mdW5jdGlvbiBlKHQpe3ZhciBuPXZvaWQgMCxyPVhlKHQpO2ZvcihRZSgiYmVmb3JlU2FuaXRpemVTaGFkb3dET00iLHQsbnVsbCk7bj1yLm5leHROb2RlKCk7KVFlKCJ1cG9uU2FuaXRpemVTaGFkb3dOb2RlIixuLG51bGwpLFplKG4pfHwobi5jb250ZW50IGluc3RhbmNlb2YgYyYmZShuLmNvbnRlbnQpLHR0KG4pKTtRZSgiYWZ0ZXJTYW5pdGl6ZVNoYWRvd0RPTSIsdCxudWxsKX07cmV0dXJuIG4uc2FuaXRpemU9ZnVuY3Rpb24oZSxyKXt2YXIgbz12b2lkIDAsYT12b2lkIDAsbD12b2lkIDAscz12b2lkIDAsdT12b2lkIDA7aWYoZXx8KGU9Ilx4M2MhLS1ceDNlIiksInN0cmluZyIhPXR5cGVvZiBlJiYhSmUoZSkpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlLnRvU3RyaW5nKXRocm93IHgoInRvU3RyaW5nIGlzIG5vdCBhIGZ1bmN0aW9uIik7aWYoInN0cmluZyIhPXR5cGVvZihlPWUudG9TdHJpbmcoKSkpdGhyb3cgeCgiZGlydHkgaXMgbm90IGEgc3RyaW5nLCBhYm9ydGluZyIpfWlmKCFuLmlzU3VwcG9ydGVkKXtpZigib2JqZWN0Ij09PUIodC50b1N0YXRpY0hUTUwpfHwiZnVuY3Rpb24iPT10eXBlb2YgdC50b1N0YXRpY0hUTUwpe2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm4gdC50b1N0YXRpY0hUTUwoZSk7aWYoSmUoZSkpcmV0dXJuIHQudG9TdGF0aWNIVE1MKGUub3V0ZXJIVE1MKX1yZXR1cm4gZX1pZihOZXx8cWUociksbi5yZW1vdmVkPVtdLCJzdHJpbmciPT10eXBlb2YgZSYmKHplPSExKSx6ZSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgaykxPT09KGE9KG89WWUoIlx4M2MhLS1ceDNlIikpLm93bmVyRG9jdW1lbnQuaW1wb3J0Tm9kZShlLCEwKSkubm9kZVR5cGUmJiJCT0RZIj09PWEubm9kZU5hbWV8fCJIVE1MIj09PWEubm9kZU5hbWU/bz1hOm8uYXBwZW5kQ2hpbGQoYSk7ZWxzZXtpZighd2UmJiFNZSYmIV9lJiZIZSYmLTE9PT1lLmluZGV4T2YoIjwiKSlyZXR1cm4gdGU/dGUuY3JlYXRlSFRNTChlKTplO2lmKCEobz1ZZShlKSkpcmV0dXJuIHdlP251bGw6bmV9byYmT2UmJktlKG8uZmlyc3RDaGlsZCk7Zm9yKHZhciBkPVhlKHplP2U6byk7bD1kLm5leHROb2RlKCk7KTM9PT1sLm5vZGVUeXBlJiZsPT09c3x8WmUobCl8fChsLmNvbnRlbnQgaW5zdGFuY2VvZiBjJiZudChsLmNvbnRlbnQpLHR0KGwpLHM9bCk7aWYocz1udWxsLHplKXJldHVybiBlO2lmKHdlKXtpZihEZSlmb3IodT1sZS5jYWxsKG8ub3duZXJEb2N1bWVudCk7by5maXJzdENoaWxkOyl1LmFwcGVuZENoaWxkKG8uZmlyc3RDaGlsZCk7ZWxzZSB1PW87cmV0dXJuIFJlJiYodT1jZS5jYWxsKGksdSwhMCkpLHV9dmFyIGY9X2U/by5vdXRlckhUTUw6by5pbm5lckhUTUw7cmV0dXJuIE1lJiYoZj1oKGYsdWUsIiAiKSxmPWgoZixkZSwiICIpKSx0ZSYmSGU/dGUuY3JlYXRlSFRNTChmKTpmfSxuLnNldENvbmZpZz1mdW5jdGlvbihlKXtxZShlKSxOZT0hMH0sbi5jbGVhckNvbmZpZz1mdW5jdGlvbigpe0JlPW51bGwsTmU9ITF9LG4uaXNWYWxpZEF0dHJpYnV0ZT1mdW5jdGlvbihlLHQsbil7QmV8fHFlKHt9KTt2YXIgcj15KGUpLG89eSh0KTtyZXR1cm4gZXQocixvLG4pfSxuLmFkZEhvb2s9ZnVuY3Rpb24oZSx0KXsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHNlW2VdPXNlW2VdfHxbXSxwKHNlW2VdLHQpKX0sbi5yZW1vdmVIb29rPWZ1bmN0aW9uKGUpe3NlW2VdJiZmKHNlW2VdKX0sbi5yZW1vdmVIb29rcz1mdW5jdGlvbihlKXtzZVtlXSYmKHNlW2VdPVtdKX0sbi5yZW1vdmVBbGxIb29rcz1mdW5jdGlvbigpe3NlPXt9fSxufSgpfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1wdXJpZnkubWluLmpzLm1hcAo="},{"meta":{"name":"snap.svg-min.js","url":"https://cdn.staticfile.org/snap.svg/0.5.1/snap.svg-min.js","ts":1641535195950,"mimetype":"text/javascript"},"source":"Ly8gU25hcC5zdmcgMC41LjAKLy8KLy8gQ29weXJpZ2h0IChjKSAyMDEzIOKAkyAyMDE3IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkLiBBbGwgcmlnaHRzIHJlc2VydmVkLgovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCi8vCi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCi8vCi8vIGJ1aWxkOiAyMDE3LTAyLTA2CgohZnVuY3Rpb24oYSl7dmFyIGIsYyxkPSIwLjUuMCIsZT0iaGFzT3duUHJvcGVydHkiLGY9L1tcLlwvXS8sZz0vXHMqLFxzKi8saD0iKiIsaT1mdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LGo9e246e319LGs9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMubGVuZ3RoO2I+YTthKyspaWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzW2FdKXJldHVybiB0aGlzW2FdfSxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubGVuZ3RoOy0tYTspaWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzW2FdKXJldHVybiB0aGlzW2FdfSxtPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbj1TdHJpbmcsbz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5fHwiW29iamVjdCBBcnJheV0iPT1tLmNhbGwoYSl9O2V2ZT1mdW5jdGlvbihhLGQpe3ZhciBlLGY9YyxnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxoPWV2ZS5saXN0ZW5lcnMoYSksaj0wLG09W10sbj17fSxvPVtdLHA9YjtvLmZpcnN0RGVmaW5lZD1rLG8ubGFzdERlZmluZWQ9bCxiPWEsYz0wO2Zvcih2YXIgcT0wLHI9aC5sZW5ndGg7cj5xO3ErKykiekluZGV4ImluIGhbcV0mJihtLnB1c2goaFtxXS56SW5kZXgpLGhbcV0uekluZGV4PDAmJihuW2hbcV0uekluZGV4XT1oW3FdKSk7Zm9yKG0uc29ydChpKTttW2pdPDA7KWlmKGU9blttW2orK11dLG8ucHVzaChlLmFwcGx5KGQsZykpLGMpcmV0dXJuIGM9ZixvO2ZvcihxPTA7cj5xO3ErKylpZihlPWhbcV0sInpJbmRleCJpbiBlKWlmKGUuekluZGV4PT1tW2pdKXtpZihvLnB1c2goZS5hcHBseShkLGcpKSxjKWJyZWFrO2RvIGlmKGorKyxlPW5bbVtqXV0sZSYmby5wdXNoKGUuYXBwbHkoZCxnKSksYylicmVhazt3aGlsZShlKX1lbHNlIG5bZS56SW5kZXhdPWU7ZWxzZSBpZihvLnB1c2goZS5hcHBseShkLGcpKSxjKWJyZWFrO3JldHVybiBjPWYsYj1wLG99LGV2ZS5fZXZlbnRzPWosZXZlLmxpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxnLGksayxsLG09byhhKT9hOmEuc3BsaXQoZiksbj1qLHA9W25dLHE9W107Zm9yKGU9MCxnPW0ubGVuZ3RoO2c+ZTtlKyspe2ZvcihsPVtdLGk9MCxrPXAubGVuZ3RoO2s+aTtpKyspZm9yKG49cFtpXS5uLGM9W25bbVtlXV0sbltoXV0sZD0yO2QtLTspYj1jW2RdLGImJihsLnB1c2goYikscT1xLmNvbmNhdChiLmZ8fFtdKSk7cD1sfXJldHVybiBxfSxldmUuc2VwYXJhdG9yPWZ1bmN0aW9uKGEpe2E/KGE9bihhKS5yZXBsYWNlKC8oPz1bXC5cXlxdXFtcLV0pL2csIlxcIiksYT0iWyIrYSsiXSIsZj1uZXcgUmVnRXhwKGEpKTpmPS9bXC5cL10vfSxldmUub249ZnVuY3Rpb24oYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYilyZXR1cm4gZnVuY3Rpb24oKXt9O2Zvcih2YXIgYz1vKGEpP28oYVswXSk/YTpbYV06bihhKS5zcGxpdChnKSxkPTAsZT1jLmxlbmd0aDtlPmQ7ZCsrKSFmdW5jdGlvbihhKXtmb3IodmFyIGMsZD1vKGEpP2E6bihhKS5zcGxpdChmKSxlPWosZz0wLGg9ZC5sZW5ndGg7aD5nO2crKyllPWUubixlPWUuaGFzT3duUHJvcGVydHkoZFtnXSkmJmVbZFtnXV18fChlW2RbZ11dPXtuOnt9fSk7Zm9yKGUuZj1lLmZ8fFtdLGc9MCxoPWUuZi5sZW5ndGg7aD5nO2crKylpZihlLmZbZ109PWIpe2M9ITA7YnJlYWt9IWMmJmUuZi5wdXNoKGIpfShjW2RdKTtyZXR1cm4gZnVuY3Rpb24oYSl7K2E9PSthJiYoYi56SW5kZXg9K2EpfX0sZXZlLmY9ZnVuY3Rpb24oYSl7dmFyIGI9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7ZXZlLmFwcGx5KG51bGwsW2EsbnVsbF0uY29uY2F0KGIpLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpfX0sZXZlLnN0b3A9ZnVuY3Rpb24oKXtjPTF9LGV2ZS5udD1mdW5jdGlvbihhKXt2YXIgYz1vKGIpP2Iuam9pbigiLiIpOmI7cmV0dXJuIGE/bmV3IFJlZ0V4cCgiKD86XFwufFxcL3xeKSIrYSsiKD86XFwufFxcL3wkKSIpLnRlc3QoYyk6Y30sZXZlLm50cz1mdW5jdGlvbigpe3JldHVybiBvKGIpP2I6Yi5zcGxpdChmKX0sZXZlLm9mZj1ldmUudW5iaW5kPWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIHZvaWQoZXZlLl9ldmVudHM9aj17bjp7fX0pO3ZhciBjPW8oYSk/byhhWzBdKT9hOlthXTpuKGEpLnNwbGl0KGcpO2lmKGMubGVuZ3RoPjEpZm9yKHZhciBkPTAsaT1jLmxlbmd0aDtpPmQ7ZCsrKWV2ZS5vZmYoY1tkXSxiKTtlbHNle2M9byhhKT9hOm4oYSkuc3BsaXQoZik7dmFyIGssbCxtLGQsaSxwLHEscj1bal0scz1bXTtmb3IoZD0wLGk9Yy5sZW5ndGg7aT5kO2QrKylmb3IocD0wO3A8ci5sZW5ndGg7cCs9bS5sZW5ndGgtMil7aWYobT1bcCwxXSxrPXJbcF0ubixjW2RdIT1oKWtbY1tkXV0mJihtLnB1c2goa1tjW2RdXSkscy51bnNoaWZ0KHtuOmssbmFtZTpjW2RdfSkpO2Vsc2UgZm9yKGwgaW4gaylrW2VdKGwpJiYobS5wdXNoKGtbbF0pLHMudW5zaGlmdCh7bjprLG5hbWU6bH0pKTtyLnNwbGljZS5hcHBseShyLG0pfWZvcihkPTAsaT1yLmxlbmd0aDtpPmQ7ZCsrKWZvcihrPXJbZF07ay5uOyl7aWYoYil7aWYoay5mKXtmb3IocD0wLHE9ay5mLmxlbmd0aDtxPnA7cCsrKWlmKGsuZltwXT09Yil7ay5mLnNwbGljZShwLDEpO2JyZWFrfSFrLmYubGVuZ3RoJiZkZWxldGUgay5mfWZvcihsIGluIGsubilpZihrLm5bZV0obCkmJmsubltsXS5mKXt2YXIgdD1rLm5bbF0uZjtmb3IocD0wLHE9dC5sZW5ndGg7cT5wO3ArKylpZih0W3BdPT1iKXt0LnNwbGljZShwLDEpO2JyZWFrfSF0Lmxlbmd0aCYmZGVsZXRlIGsubltsXS5mfX1lbHNle2RlbGV0ZSBrLmY7Zm9yKGwgaW4gay5uKWsubltlXShsKSYmay5uW2xdLmYmJmRlbGV0ZSBrLm5bbF0uZn1rPWsubn1hOmZvcihkPTAsaT1zLmxlbmd0aDtpPmQ7ZCsrKXtrPXNbZF07Zm9yKGwgaW4gay5uW2submFtZV0uZiljb250aW51ZSBhO2ZvcihsIGluIGsubltrLm5hbWVdLm4pY29udGludWUgYTtkZWxldGUgay5uW2submFtZV19fX0sZXZlLm9uY2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe3JldHVybiBldmUub2ZmKGEsYyksYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBldmUub24oYSxjKX0sZXZlLnZlcnNpb249ZCxldmUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iWW91IGFyZSBydW5uaW5nIEV2ZSAiK2R9LCJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1ldmU6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoImV2ZSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZXZlfSk6YS5ldmU9ZXZlfSh0aGlzKSxmdW5jdGlvbihhLGIpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFsiZXZlIl0sZnVuY3Rpb24oYyl7cmV0dXJuIGIoYSxjKX0pO2Vsc2UgaWYoInVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzKXt2YXIgYz1yZXF1aXJlKCJldmUiKTttb2R1bGUuZXhwb3J0cz1iKGEsYyl9ZWxzZSBiKGEsYS5ldmUpfSh3aW5kb3d8fHRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihiKXt2YXIgYyxkPXt9LGU9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGEud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxhLm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8YS5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxhLm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtyZXR1cm4gc2V0VGltZW91dChhLDE2LChuZXcgRGF0ZSkuZ2V0VGltZSgpKSwhMH0sZj1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5fHwiW29iamVjdCBBcnJheV0iPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9LGc9MCxoPSJNIisoK25ldyBEYXRlKS50b1N0cmluZygzNiksaT1mdW5jdGlvbigpe3JldHVybiBoKyhnKyspLnRvU3RyaW5nKDM2KX0saj1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9LGs9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihudWxsPT1hKXJldHVybiBiLnM7dmFyIGM9Yi5zLWE7Yi5iKz1iLmR1cipjLGIuQis9Yi5kdXIqYyxiLnM9YX0sbD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBudWxsPT1hP2Iuc3BkOnZvaWQoYi5zcGQ9YSl9LG09ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gbnVsbD09YT9iLmR1cjooYi5zPWIucyphL2IuZHVyLHZvaWQoYi5kdXI9YSkpfSxuPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztkZWxldGUgZFthLmlkXSxhLnVwZGF0ZSgpLGIoIm1pbmEuc3RvcC4iK2EuaWQsYSl9LG89ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EucGRpZnx8KGRlbGV0ZSBkW2EuaWRdLGEudXBkYXRlKCksYS5wZGlmPWEuZ2V0KCktYS5iKX0scD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5wZGlmJiYoYS5iPWEuZ2V0KCktYS5wZGlmLGRlbGV0ZSBhLnBkaWYsZFthLmlkXT1hLHIoKSl9LHE9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXM7aWYoZihiLnN0YXJ0KSl7YT1bXTtmb3IodmFyIGM9MCxkPWIuc3RhcnQubGVuZ3RoO2Q+YztjKyspYVtjXT0rYi5zdGFydFtjXSsoYi5lbmRbY10tYi5zdGFydFtjXSkqYi5lYXNpbmcoYi5zKX1lbHNlIGE9K2Iuc3RhcnQrKGIuZW5kLWIuc3RhcnQpKmIuZWFzaW5nKGIucyk7Yi5zZXQoYSl9LHI9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIHZvaWQoY3x8KGM9ZShyKSkpO3ZhciBmPTA7Zm9yKHZhciBnIGluIGQpaWYoZC5oYXNPd25Qcm9wZXJ0eShnKSl7dmFyIGg9ZFtnXSxpPWguZ2V0KCk7ZisrLGgucz0oaS1oLmIpLyhoLmR1ci9oLnNwZCksaC5zPj0xJiYoZGVsZXRlIGRbZ10saC5zPTEsZi0tLGZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiKCJtaW5hLmZpbmlzaC4iK2EuaWQsYSl9KX0oaCkpLGgudXBkYXRlKCl9Yz1mP2Uocik6ITF9LHM9ZnVuY3Rpb24oYSxiLGMsZSxmLGcsaCl7dmFyIGo9e2lkOmkoKSxzdGFydDphLGVuZDpiLGI6YyxzOjAsZHVyOmUtYyxzcGQ6MSxnZXQ6ZixzZXQ6ZyxlYXNpbmc6aHx8cy5saW5lYXIsc3RhdHVzOmssc3BlZWQ6bCxkdXJhdGlvbjptLHN0b3A6bixwYXVzZTpvLHJlc3VtZTpwLHVwZGF0ZTpxfTtkW2ouaWRdPWo7dmFyIHQsdT0wO2Zvcih0IGluIGQpaWYoZC5oYXNPd25Qcm9wZXJ0eSh0KSYmKHUrKywyPT11KSlicmVhaztyZXR1cm4gMT09dSYmcigpLGp9O3JldHVybiBzLnRpbWU9aixzLmdldEJ5SWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGRbYV18fG51bGx9LHMubGluZWFyPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxzLmVhc2VvdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEsMS43KX0scy5lYXNlaW49ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEsLjQ4KX0scy5lYXNlaW5vdXQ9ZnVuY3Rpb24oYSl7aWYoMT09YSlyZXR1cm4gMTtpZigwPT1hKXJldHVybiAwO3ZhciBiPS40OC1hLzEuMDQsYz1NYXRoLnNxcnQoLjE3MzQrYipiKSxkPWMtYixlPU1hdGgucG93KE1hdGguYWJzKGQpLDEvMykqKDA+ZD8tMToxKSxmPS1jLWIsZz1NYXRoLnBvdyhNYXRoLmFicyhmKSwxLzMpKigwPmY/LTE6MSksaD1lK2crLjU7cmV0dXJuIDMqKDEtaCkqaCpoK2gqaCpofSxzLmJhY2tpbj1mdW5jdGlvbihhKXtpZigxPT1hKXJldHVybiAxO3ZhciBiPTEuNzAxNTg7cmV0dXJuIGEqYSooKGIrMSkqYS1iKX0scy5iYWNrb3V0PWZ1bmN0aW9uKGEpe2lmKDA9PWEpcmV0dXJuIDA7YS09MTt2YXIgYj0xLjcwMTU4O3JldHVybiBhKmEqKChiKzEpKmErYikrMX0scy5lbGFzdGljPWZ1bmN0aW9uKGEpe3JldHVybiBhPT0hIWE/YTpNYXRoLnBvdygyLC0xMCphKSpNYXRoLnNpbigoYS0uMDc1KSooMipNYXRoLlBJKS8uMykrMX0scy5ib3VuY2U9ZnVuY3Rpb24oYSl7dmFyIGIsYz03LjU2MjUsZD0yLjc1O3JldHVybiAxL2Q+YT9iPWMqYSphOjIvZD5hPyhhLT0xLjUvZCxiPWMqYSphKy43NSk6Mi41L2Q+YT8oYS09Mi4yNS9kLGI9YyphKmErLjkzNzUpOihhLT0yLjYyNS9kLGI9YyphKmErLjk4NDM3NSksYn0sYS5taW5hPXMsc30oInVuZGVmaW5lZCI9PXR5cGVvZiBiP2Z1bmN0aW9uKCl7fTpiKSxkPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoYSxiKXtpZihhKXtpZihhLm5vZGVUeXBlKXJldHVybiB3KGEpO2lmKGUoYSwiYXJyYXkiKSYmYy5zZXQpcmV0dXJuIGMuc2V0LmFwcGx5KGMsYSk7aWYoYSBpbnN0YW5jZW9mIHMpcmV0dXJuIGE7aWYobnVsbD09YilyZXR1cm4gYT15LmRvYy5xdWVyeVNlbGVjdG9yKFN0cmluZyhhKSksdyhhKX1yZXR1cm4gYT1udWxsPT1hPyIxMDAlIjphLGI9bnVsbD09Yj8iMTAwJSI6YixuZXcgdihhLGIpfWZ1bmN0aW9uIGQoYSxiKXtpZihiKXtpZigiI3RleHQiPT1hJiYoYT15LmRvYy5jcmVhdGVUZXh0Tm9kZShiLnRleHR8fGJbIiN0ZXh0Il18fCIiKSksIiNjb21tZW50Ij09YSYmKGE9eS5kb2MuY3JlYXRlQ29tbWVudChiLnRleHR8fGJbIiN0ZXh0Il18fCIiKSksInN0cmluZyI9PXR5cGVvZiBhJiYoYT1kKGEpKSwic3RyaW5nIj09dHlwZW9mIGIpcmV0dXJuIDE9PWEubm9kZVR5cGU/InhsaW5rOiI9PWIuc3Vic3RyaW5nKDAsNik/YS5nZXRBdHRyaWJ1dGVOUyhULGIuc3Vic3RyaW5nKDYpKToieG1sOiI9PWIuc3Vic3RyaW5nKDAsNCk/YS5nZXRBdHRyaWJ1dGVOUyhVLGIuc3Vic3RyaW5nKDQpKTphLmdldEF0dHJpYnV0ZShiKToidGV4dCI9PWI/YS5ub2RlVmFsdWU6bnVsbDtpZigxPT1hLm5vZGVUeXBlKXtmb3IodmFyIGMgaW4gYilpZihiW3pdKGMpKXt2YXIgZT1BKGJbY10pO2U/InhsaW5rOiI9PWMuc3Vic3RyaW5nKDAsNik/YS5zZXRBdHRyaWJ1dGVOUyhULGMuc3Vic3RyaW5nKDYpLGUpOiJ4bWw6Ij09Yy5zdWJzdHJpbmcoMCw0KT9hLnNldEF0dHJpYnV0ZU5TKFUsYy5zdWJzdHJpbmcoNCksZSk6YS5zZXRBdHRyaWJ1dGUoYyxlKTphLnJlbW92ZUF0dHJpYnV0ZShjKX19ZWxzZSJ0ZXh0ImluIGImJihhLm5vZGVWYWx1ZT1iLnRleHQpfWVsc2UgYT15LmRvYy5jcmVhdGVFbGVtZW50TlMoVSxhKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGI9QS5wcm90b3R5cGUudG9Mb3dlckNhc2UuY2FsbChiKSwiZmluaXRlIj09Yj9pc0Zpbml0ZShhKToiYXJyYXkiPT1iJiYoYSBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5JiZBcnJheS5pc0FycmF5KGEpKT8hMDoibnVsbCI9PWImJm51bGw9PT1hfHxiPT10eXBlb2YgYSYmbnVsbCE9PWF8fCJvYmplY3QiPT1iJiZhPT09T2JqZWN0KGEpfHxKLmNhbGwoYSkuc2xpY2UoOCwtMSkudG9Mb3dlckNhc2UoKT09Yn1mdW5jdGlvbiBmKGEpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBhfHxPYmplY3QoYSkhPT1hKXJldHVybiBhO3ZhciBiPW5ldyBhLmNvbnN0cnVjdG9yO2Zvcih2YXIgYyBpbiBhKWFbel0oYykmJihiW2NdPWYoYVtjXSkpO3JldHVybiBifWZ1bmN0aW9uIGgoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGEucHVzaChhLnNwbGljZShjLDEpWzBdKX1mdW5jdGlvbiBpKGEsYixjKXtmdW5jdGlvbiBkKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLGY9ZS5qb2luKCLikIAiKSxnPWQuY2FjaGU9ZC5jYWNoZXx8e30saT1kLmNvdW50PWQuY291bnR8fFtdO3JldHVybiBnW3pdKGYpPyhoKGksZiksYz9jKGdbZl0pOmdbZl0pOihpLmxlbmd0aD49MWUzJiZkZWxldGUgZ1tpLnNoaWZ0KCldLGkucHVzaChmKSxnW2ZdPWEuYXBwbHkoYixlKSxjP2MoZ1tmXSk6Z1tmXSl9cmV0dXJuIGR9ZnVuY3Rpb24gaihhLGIsYyxkLGUsZil7aWYobnVsbD09ZSl7dmFyIGc9YS1jLGg9Yi1kO3JldHVybiBnfHxoPygxODArMTgwKkQuYXRhbjIoLWgsLWcpL0grMzYwKSUzNjA6MH1yZXR1cm4gaihhLGIsZSxmKS1qKGMsZCxlLGYpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGElMzYwKkgvMTgwfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIDE4MCphL0glMzYwfWZ1bmN0aW9uIG0oYSl7dmFyIGI9W107cmV0dXJuIGE9YS5yZXBsYWNlKC8oPzpefFxzKShcdyspXCgoW14pXSspXCkvZyxmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGQ9ZC5zcGxpdCgvXHMqLFxzKnxccysvKSwicm90YXRlIj09YyYmMT09ZC5sZW5ndGgmJmQucHVzaCgwLDApLCJzY2FsZSI9PWMmJihkLmxlbmd0aD4yP2Q9ZC5zbGljZSgwLDIpOjI9PWQubGVuZ3RoJiZkLnB1c2goMCwwKSwxPT1kLmxlbmd0aCYmZC5wdXNoKGRbMF0sMCwwKSksInNrZXdYIj09Yz9iLnB1c2goWyJtIiwxLDAsRC50YW4oayhkWzBdKSksMSwwLDBdKToic2tld1kiPT1jP2IucHVzaChbIm0iLDEsRC50YW4oayhkWzBdKSksMCwxLDAsMF0pOmIucHVzaChbYy5jaGFyQXQoMCldLmNvbmNhdChkKSksYX0pLGJ9ZnVuY3Rpb24gbihhLGIpe3ZhciBkPWFhKGEpLGU9bmV3IGMuTWF0cml4O2lmKGQpZm9yKHZhciBmPTAsZz1kLmxlbmd0aDtnPmY7ZisrKXt2YXIgaCxpLGosayxsLG09ZFtmXSxuPW0ubGVuZ3RoLG89QShtWzBdKS50b0xvd2VyQ2FzZSgpLHA9bVswXSE9byxxPXA/ZS5pbnZlcnQoKTowOyJ0Ij09byYmMj09bj9lLnRyYW5zbGF0ZShtWzFdLDApOiJ0Ij09byYmMz09bj9wPyhoPXEueCgwLDApLGk9cS55KDAsMCksaj1xLngobVsxXSxtWzJdKSxrPXEueShtWzFdLG1bMl0pLGUudHJhbnNsYXRlKGotaCxrLWkpKTplLnRyYW5zbGF0ZShtWzFdLG1bMl0pOiJyIj09bz8yPT1uPyhsPWx8fGIsZS5yb3RhdGUobVsxXSxsLngrbC53aWR0aC8yLGwueStsLmhlaWdodC8yKSk6ND09biYmKHA/KGo9cS54KG1bMl0sbVszXSksaz1xLnkobVsyXSxtWzNdKSxlLnJvdGF0ZShtWzFdLGosaykpOmUucm90YXRlKG1bMV0sbVsyXSxtWzNdKSk6InMiPT1vPzI9PW58fDM9PW4/KGw9bHx8YixlLnNjYWxlKG1bMV0sbVtuLTFdLGwueCtsLndpZHRoLzIsbC55K2wuaGVpZ2h0LzIpKTo0PT1uP3A/KGo9cS54KG1bMl0sbVszXSksaz1xLnkobVsyXSxtWzNdKSxlLnNjYWxlKG1bMV0sbVsxXSxqLGspKTplLnNjYWxlKG1bMV0sbVsxXSxtWzJdLG1bM10pOjU9PW4mJihwPyhqPXEueChtWzNdLG1bNF0pLGs9cS55KG1bM10sbVs0XSksZS5zY2FsZShtWzFdLG1bMl0saixrKSk6ZS5zY2FsZShtWzFdLG1bMl0sbVszXSxtWzRdKSk6Im0iPT1vJiY3PT1uJiZlLmFkZChtWzFdLG1bMl0sbVszXSxtWzRdLG1bNV0sbVs2XSl9cmV0dXJuIGV9ZnVuY3Rpb24gbyhhKXt2YXIgYj1hLm5vZGUub3duZXJTVkdFbGVtZW50JiZ3KGEubm9kZS5vd25lclNWR0VsZW1lbnQpfHxhLm5vZGUucGFyZW50Tm9kZSYmdyhhLm5vZGUucGFyZW50Tm9kZSl8fGMuc2VsZWN0KCJzdmciKXx8YygwLDApLGQ9Yi5zZWxlY3QoImRlZnMiKSxlPW51bGw9PWQ/ITE6ZC5ub2RlO3JldHVybiBlfHwoZT11KCJkZWZzIixiLm5vZGUpLm5vZGUpLGV9ZnVuY3Rpb24gcChhKXtyZXR1cm4gYS5ub2RlLm93bmVyU1ZHRWxlbWVudCYmdyhhLm5vZGUub3duZXJTVkdFbGVtZW50KXx8Yy5zZWxlY3QoInN2ZyIpfWZ1bmN0aW9uIHEoYSxiLGMpe2Z1bmN0aW9uIGUoYSl7aWYobnVsbD09YSlyZXR1cm4gSTtpZihhPT0rYSlyZXR1cm4gYTtkKGose3dpZHRoOmF9KTt0cnl7cmV0dXJuIGouZ2V0QkJveCgpLndpZHRofWNhdGNoKGIpe3JldHVybiAwfX1mdW5jdGlvbiBmKGEpe2lmKG51bGw9PWEpcmV0dXJuIEk7aWYoYT09K2EpcmV0dXJuIGE7ZChqLHtoZWlnaHQ6YX0pO3RyeXtyZXR1cm4gai5nZXRCQm94KCkuaGVpZ2h0fWNhdGNoKGIpe3JldHVybiAwfX1mdW5jdGlvbiBnKGQsZSl7bnVsbD09Yj9pW2RdPWUoYS5hdHRyKGQpfHwwKTpkPT1iJiYoaT1lKG51bGw9PWM/YS5hdHRyKGQpfHwwOmMpKX12YXIgaD1wKGEpLm5vZGUsaT17fSxqPWgucXVlcnlTZWxlY3RvcigiLnN2Zy0tLW1nciIpO3N3aXRjaChqfHwoaj1kKCJyZWN0IiksZChqLHt4Oi05ZTkseTotOWU5LHdpZHRoOjEwLGhlaWdodDoxMCwiY2xhc3MiOiJzdmctLS1tZ3IiLGZpbGw6Im5vbmUifSksaC5hcHBlbmRDaGlsZChqKSksYS50eXBlKXtjYXNlInJlY3QiOmcoInJ4IixlKSxnKCJyeSIsZik7Y2FzZSJpbWFnZSI6Zygid2lkdGgiLGUpLGcoImhlaWdodCIsZik7Y2FzZSJ0ZXh0IjpnKCJ4IixlKSxnKCJ5IixmKTticmVhaztjYXNlImNpcmNsZSI6ZygiY3giLGUpLGcoImN5IixmKSxnKCJyIixlKTticmVhaztjYXNlImVsbGlwc2UiOmcoImN4IixlKSxnKCJjeSIsZiksZygicngiLGUpLGcoInJ5IixmKTticmVhaztjYXNlImxpbmUiOmcoIngxIixlKSxnKCJ4MiIsZSksZygieTEiLGYpLGcoInkyIixmKTticmVhaztjYXNlIm1hcmtlciI6ZygicmVmWCIsZSksZygibWFya2VyV2lkdGgiLGUpLGcoInJlZlkiLGYpLGcoIm1hcmtlckhlaWdodCIsZik7YnJlYWs7Y2FzZSJyYWRpYWxHcmFkaWVudCI6ZygiZngiLGUpLGcoImZ5IixmKTticmVhaztjYXNlInRzcGFuIjpnKCJkeCIsZSksZygiZHkiLGYpO2JyZWFrO2RlZmF1bHQ6ZyhiLGUpfXJldHVybiBoLnJlbW92ZUNoaWxkKGopLGl9ZnVuY3Rpb24gcihhKXtlKGEsImFycmF5Iil8fChhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSk7Zm9yKHZhciBiPTAsYz0wLGQ9dGhpcy5ub2RlO3RoaXNbYl07KWRlbGV0ZSB0aGlzW2IrK107Zm9yKGI9MDtiPGEubGVuZ3RoO2IrKykic2V0Ij09YVtiXS50eXBlP2FbYl0uZm9yRWFjaChmdW5jdGlvbihhKXtkLmFwcGVuZENoaWxkKGEubm9kZSl9KTpkLmFwcGVuZENoaWxkKGFbYl0ubm9kZSk7dmFyIGY9ZC5jaGlsZE5vZGVzO2ZvcihiPTA7YjxmLmxlbmd0aDtiKyspdGhpc1tjKytdPXcoZltiXSk7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gcyhhKXtpZihhLnNuYXAgaW4gVilyZXR1cm4gVlthLnNuYXBdO3ZhciBiO3RyeXtiPWEub3duZXJTVkdFbGVtZW50fWNhdGNoKGMpe310aGlzLm5vZGU9YSxiJiYodGhpcy5wYXBlcj1uZXcgdihiKSksdGhpcy50eXBlPWEudGFnTmFtZXx8YS5ub2RlTmFtZTt2YXIgZD10aGlzLmlkPVModGhpcyk7aWYodGhpcy5hbmltcz17fSx0aGlzLl89e3RyYW5zZm9ybTpbXX0sYS5zbmFwPWQsVltkXT10aGlzLCJnIj09dGhpcy50eXBlJiYodGhpcy5hZGQ9ciksdGhpcy50eXBlIGlue2c6MSxtYXNrOjEscGF0dGVybjoxLHN5bWJvbDoxfSlmb3IodmFyIGUgaW4gdi5wcm90b3R5cGUpdi5wcm90b3R5cGVbel0oZSkmJih0aGlzW2VdPXYucHJvdG90eXBlW2VdKX1mdW5jdGlvbiB0KGEpe3RoaXMubm9kZT1hfWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1kKGEpO2IuYXBwZW5kQ2hpbGQoYyk7dmFyIGU9dyhjKTtyZXR1cm4gZX1mdW5jdGlvbiB2KGEsYil7dmFyIGMsZSxmLGc9di5wcm90b3R5cGU7aWYoYSYmYS50YWdOYW1lJiYic3ZnIj09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe2lmKGEuc25hcCBpbiBWKXJldHVybiBWW2Euc25hcF07dmFyIGg9YS5vd25lckRvY3VtZW50O2M9bmV3IHMoYSksZT1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkZXNjIilbMF0sZj1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkZWZzIilbMF0sZXx8KGU9ZCgiZGVzYyIpLGUuYXBwZW5kQ2hpbGQoaC5jcmVhdGVUZXh0Tm9kZSgiQ3JlYXRlZCB3aXRoIFNuYXAiKSksYy5ub2RlLmFwcGVuZENoaWxkKGUpKSxmfHwoZj1kKCJkZWZzIiksYy5ub2RlLmFwcGVuZENoaWxkKGYpKSxjLmRlZnM9Zjtmb3IodmFyIGkgaW4gZylnW3pdKGkpJiYoY1tpXT1nW2ldKTtjLnBhcGVyPWMucm9vdD1jfWVsc2UgYz11KCJzdmciLHkuZG9jLmJvZHkpLGQoYy5ub2RlLHtoZWlnaHQ6Yix2ZXJzaW9uOjEuMSx3aWR0aDphLHhtbG5zOlV9KTtyZXR1cm4gY31mdW5jdGlvbiB3KGEpe3JldHVybiBhP2EgaW5zdGFuY2VvZiBzfHxhIGluc3RhbmNlb2YgdD9hOmEudGFnTmFtZSYmInN2ZyI9PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpP25ldyB2KGEpOmEudGFnTmFtZSYmIm9iamVjdCI9PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYiaW1hZ2Uvc3ZnK3htbCI9PWEudHlwZT9uZXcgdihhLmNvbnRlbnREb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3ZnIilbMF0pOm5ldyBzKGEpOmF9ZnVuY3Rpb24geChhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyl7dmFyIGU9e3R5cGU6YVtjXS50eXBlLGF0dHI6YVtjXS5hdHRyKCl9LGY9YVtjXS5jaGlsZHJlbigpO2IucHVzaChlKSxmLmxlbmd0aCYmeChmLGUuY2hpbGROb2Rlcz1bXSl9fWMudmVyc2lvbj0iMC41LjEiLGMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iU25hcCB2Iit0aGlzLnZlcnNpb259LGMuXz17fTt2YXIgeT17d2luOmEud2luZG93LGRvYzphLndpbmRvdy5kb2N1bWVudH07Yy5fLmdsb2I9eTt2YXIgej0iaGFzT3duUHJvcGVydHkiLEE9U3RyaW5nLEI9cGFyc2VGbG9hdCxDPXBhcnNlSW50LEQ9TWF0aCxFPUQubWF4LEY9RC5taW4sRz1ELmFicyxIPShELnBvdyxELlBJKSxJPShELnJvdW5kLCIiKSxKPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsSz0vXlxzKigoI1thLWZcZF17Nn0pfCgjW2EtZlxkXXszfSl8cmdiYT9cKFxzKihbXGRcLl0rJT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSslPyg/OlxzKixccypbXGRcLl0rJT8pPylccypcKXxoc2JhP1woXHMqKFtcZFwuXSsoPzpkZWd8XHhiMHwlKT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSsoPzolP1xzKixccypbXGRcLl0rKT8lPylccypcKXxoc2xhP1woXHMqKFtcZFwuXSsoPzpkZWd8XHhiMHwlKT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSsoPzolP1xzKixccypbXGRcLl0rKT8lPylccypcKSlccyokL2ksTD0oYy5fLnNlcGFyYXRvcj0vWyxcc10rLywvW1xzXSosW1xzXSovKSxNPXtoczoxLHJnOjF9LE49LyhbYS16XSlbXHMsXSooKC0/XGQqXC4/XGQqKD86ZVtcLStdP1xkKyk/W1xzXSosP1tcc10qKSspL2dpLE89LyhbcnN0bV0pW1xzLF0qKCgtP1xkKlwuP1xkKig/OmVbXC0rXT9cZCspP1tcc10qLD9bXHNdKikrKS9naSxQPS8oLT9cZCpcLj9cZCooPzplW1wtK10/XGQrKT8pW1xzXSosP1tcc10qL2dpLFE9MCxSPSJTIisoK25ldyBEYXRlKS50b1N0cmluZygzNiksUz1mdW5jdGlvbihhKXtyZXR1cm4oYSYmYS50eXBlP2EudHlwZTpJKStSKyhRKyspLnRvU3RyaW5nKDM2KX0sVD0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsVT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLFY9e307Yy51cmw9ZnVuY3Rpb24oYSl7cmV0dXJuInVybCgnIyIrYSsiJykifTtjLl8uJD1kLGMuXy5pZD1TLGMuZm9ybWF0PWZ1bmN0aW9uKCl7dmFyIGE9L1x7KFteXH1dKylcfS9nLGI9Lyg/Oig/Ol58XC4pKC4rPykoPz1cW3xcLnwkfFwoKXxcWygnfCIpKC4rPylcMlxdKShcKFwpKT8vZyxjPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kO3JldHVybiBjLnJlcGxhY2UoYixmdW5jdGlvbihhLGIsYyxkLGYpe2I9Ynx8ZCxlJiYoYiBpbiBlJiYoZT1lW2JdKSwiZnVuY3Rpb24iPT10eXBlb2YgZSYmZiYmKGU9ZSgpKSl9KSxlPShudWxsPT1lfHxlPT1kP2E6ZSkrIiJ9O3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBBKGIpLnJlcGxhY2UoYSxmdW5jdGlvbihhLGIpe3JldHVybiBjKGEsYixkKX0pfX0oKSxjLl8uY2xvbmU9ZixjLl8uY2FjaGVyPWksYy5yYWQ9ayxjLmRlZz1sLGMuc2luPWZ1bmN0aW9uKGEpe3JldHVybiBELnNpbihjLnJhZChhKSl9LGMudGFuPWZ1bmN0aW9uKGEpe3JldHVybiBELnRhbihjLnJhZChhKSl9LGMuY29zPWZ1bmN0aW9uKGEpe3JldHVybiBELmNvcyhjLnJhZChhKSl9LGMuYXNpbj1mdW5jdGlvbihhKXtyZXR1cm4gYy5kZWcoRC5hc2luKGEpKX0sYy5hY29zPWZ1bmN0aW9uKGEpe3JldHVybiBjLmRlZyhELmFjb3MoYSkpfSxjLmF0YW49ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGVnKEQuYXRhbihhKSl9LGMuYXRhbjI9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGVnKEQuYXRhbjIoYSkpfSxjLmFuZ2xlPWosYy5sZW49ZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIE1hdGguc3FydChjLmxlbjIoYSxiLGQsZSkpfSxjLmxlbjI9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuKGEtYykqKGEtYykrKGItZCkqKGItZCl9LGMuY2xvc2VzdFBvaW50PWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3ZhciBkPWEueC1iLGU9YS55LWM7cmV0dXJuIGQqZCtlKmV9Zm9yKHZhciBlLGYsZyxoLGk9YS5ub2RlLGo9aS5nZXRUb3RhbExlbmd0aCgpLGs9ai9pLnBhdGhTZWdMaXN0Lm51bWJlck9mSXRlbXMqLjEyNSxsPTEvMCxtPTA7aj49bTttKz1rKShoPWQoZz1pLmdldFBvaW50QXRMZW5ndGgobSkpKTxsJiYoZT1nLGY9bSxsPWgpO2ZvcihrKj0uNTtrPi41Oyl7dmFyIG4sbyxwLHEscixzOyhwPWYtayk+PTAmJihyPWQobj1pLmdldFBvaW50QXRMZW5ndGgocCkpKTxsPyhlPW4sZj1wLGw9cik6KHE9ZitrKTw9aiYmKHM9ZChvPWkuZ2V0UG9pbnRBdExlbmd0aChxKSkpPGw/KGU9byxmPXEsbD1zKTprKj0uNX1yZXR1cm4gZT17eDplLngseTplLnksbGVuZ3RoOmYsZGlzdGFuY2U6TWF0aC5zcXJ0KGwpfX0sYy5pcz1lLGMuc25hcFRvPWZ1bmN0aW9uKGEsYixjKXtpZihjPWUoYywiZmluaXRlIik/YzoxMCxlKGEsImFycmF5Iikpe2Zvcih2YXIgZD1hLmxlbmd0aDtkLS07KWlmKEcoYVtkXS1iKTw9YylyZXR1cm4gYVtkXX1lbHNle2E9K2E7dmFyIGY9YiVhO2lmKGM+ZilyZXR1cm4gYi1mO2lmKGY+YS1jKXJldHVybiBiLWYrYX1yZXR1cm4gYn0sYy5nZXRSR0I9aShmdW5jdGlvbihhKXtpZighYXx8KGE9QShhKSkuaW5kZXhPZigiLSIpKzEpcmV0dXJue3I6LTEsZzotMSxiOi0xLGhleDoibm9uZSIsZXJyb3I6MSx0b1N0cmluZzpafTtpZigibm9uZSI9PWEpcmV0dXJue3I6LTEsZzotMSxiOi0xLGhleDoibm9uZSIsdG9TdHJpbmc6Wn07aWYoIShNW3pdKGEudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMCwyKSl8fCIjIj09YS5jaGFyQXQoKSkmJihhPVcoYSkpLCFhKXJldHVybntyOi0xLGc6LTEsYjotMSxoZXg6Im5vbmUiLGVycm9yOjEsdG9TdHJpbmc6Wn07dmFyIGIsZCxmLGcsaCxpLGo9YS5tYXRjaChLKTtyZXR1cm4gaj8oalsyXSYmKGY9QyhqWzJdLnN1YnN0cmluZyg1KSwxNiksZD1DKGpbMl0uc3Vic3RyaW5nKDMsNSksMTYpLGI9QyhqWzJdLnN1YnN0cmluZygxLDMpLDE2KSksalszXSYmKGY9QygoaD1qWzNdLmNoYXJBdCgzKSkraCwxNiksZD1DKChoPWpbM10uY2hhckF0KDIpKStoLDE2KSxiPUMoKGg9alszXS5jaGFyQXQoMSkpK2gsMTYpKSxqWzRdJiYoaT1qWzRdLnNwbGl0KEwpLGI9QihpWzBdKSwiJSI9PWlbMF0uc2xpY2UoLTEpJiYoYio9Mi41NSksZD1CKGlbMV0pLCIlIj09aVsxXS5zbGljZSgtMSkmJihkKj0yLjU1KSxmPUIoaVsyXSksIiUiPT1pWzJdLnNsaWNlKC0xKSYmKGYqPTIuNTUpLCJyZ2JhIj09alsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsNCkmJihnPUIoaVszXSkpLGlbM10mJiIlIj09aVszXS5zbGljZSgtMSkmJihnLz0xMDApKSxqWzVdPyhpPWpbNV0uc3BsaXQoTCksYj1CKGlbMF0pLCIlIj09aVswXS5zbGljZSgtMSkmJihiLz0xMDApLGQ9QihpWzFdKSwiJSI9PWlbMV0uc2xpY2UoLTEpJiYoZC89MTAwKSxmPUIoaVsyXSksIiUiPT1pWzJdLnNsaWNlKC0xKSYmKGYvPTEwMCksKCJkZWciPT1pWzBdLnNsaWNlKC0zKXx8IsKwIj09aVswXS5zbGljZSgtMSkpJiYoYi89MzYwKSwiaHNiYSI9PWpbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLDQpJiYoZz1CKGlbM10pKSxpWzNdJiYiJSI9PWlbM10uc2xpY2UoLTEpJiYoZy89MTAwKSxjLmhzYjJyZ2IoYixkLGYsZykpOmpbNl0/KGk9als2XS5zcGxpdChMKSxiPUIoaVswXSksIiUiPT1pWzBdLnNsaWNlKC0xKSYmKGIvPTEwMCksZD1CKGlbMV0pLCIlIj09aVsxXS5zbGljZSgtMSkmJihkLz0xMDApLGY9QihpWzJdKSwiJSI9PWlbMl0uc2xpY2UoLTEpJiYoZi89MTAwKSwoImRlZyI9PWlbMF0uc2xpY2UoLTMpfHwiwrAiPT1pWzBdLnNsaWNlKC0xKSkmJihiLz0zNjApLCJoc2xhIj09alsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsNCkmJihnPUIoaVszXSkpLGlbM10mJiIlIj09aVszXS5zbGljZSgtMSkmJihnLz0xMDApLGMuaHNsMnJnYihiLGQsZixnKSk6KGI9RihELnJvdW5kKGIpLDI1NSksZD1GKEQucm91bmQoZCksMjU1KSxmPUYoRC5yb3VuZChmKSwyNTUpLGc9RihFKGcsMCksMSksaj17cjpiLGc6ZCxiOmYsdG9TdHJpbmc6Wn0sai5oZXg9IiMiKygxNjc3NzIxNnxmfGQ8PDh8Yjw8MTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKSxqLm9wYWNpdHk9ZShnLCJmaW5pdGUiKT9nOjEsaikpOntyOi0xLGc6LTEsYjotMSxoZXg6Im5vbmUiLGVycm9yOjEsdG9TdHJpbmc6Wn19LGMpLGMuaHNiPWkoZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmhzYjJyZ2IoYSxiLGQpLmhleH0pLGMuaHNsPWkoZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmhzbDJyZ2IoYSxiLGQpLmhleH0pLGMucmdiPWkoZnVuY3Rpb24oYSxiLGMsZCl7aWYoZShkLCJmaW5pdGUiKSl7dmFyIGY9RC5yb3VuZDtyZXR1cm4icmdiYSgiK1tmKGEpLGYoYiksZihjKSwrZC50b0ZpeGVkKDIpXSsiKSJ9cmV0dXJuIiMiKygxNjc3NzIxNnxjfGI8PDh8YTw8MTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKX0pO3ZhciBXPWZ1bmN0aW9uKGEpe3ZhciBiPXkuZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF18fHkuZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzdmciKVswXSxjPSJyZ2IoMjU1LCAwLCAwKSI7cmV0dXJuKFc9aShmdW5jdGlvbihhKXtpZigicmVkIj09YS50b0xvd2VyQ2FzZSgpKXJldHVybiBjO2Iuc3R5bGUuY29sb3I9YyxiLnN0eWxlLmNvbG9yPWE7dmFyIGQ9eS5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShiLEkpLmdldFByb3BlcnR5VmFsdWUoImNvbG9yIik7cmV0dXJuIGQ9PWM/bnVsbDpkfSkpKGEpfSxYPWZ1bmN0aW9uKCl7cmV0dXJuImhzYigiK1t0aGlzLmgsdGhpcy5zLHRoaXMuYl0rIikifSxZPWZ1bmN0aW9uKCl7cmV0dXJuImhzbCgiK1t0aGlzLmgsdGhpcy5zLHRoaXMubF0rIikifSxaPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PXRoaXMub3BhY2l0eXx8bnVsbD09dGhpcy5vcGFjaXR5P3RoaXMuaGV4OiJyZ2JhKCIrW3RoaXMucix0aGlzLmcsdGhpcy5iLHRoaXMub3BhY2l0eV0rIikifSwkPWZ1bmN0aW9uKGEsYixkKXtpZihudWxsPT1iJiZlKGEsIm9iamVjdCIpJiYiciJpbiBhJiYiZyJpbiBhJiYiYiJpbiBhJiYoZD1hLmIsYj1hLmcsYT1hLnIpLG51bGw9PWImJmUoYSxzdHJpbmcpKXt2YXIgZj1jLmdldFJHQihhKTthPWYucixiPWYuZyxkPWYuYn1yZXR1cm4oYT4xfHxiPjF8fGQ+MSkmJihhLz0yNTUsYi89MjU1LGQvPTI1NSksW2EsYixkXX0sXz1mdW5jdGlvbihhLGIsZCxmKXthPUQucm91bmQoMjU1KmEpLGI9RC5yb3VuZCgyNTUqYiksZD1ELnJvdW5kKDI1NSpkKTt2YXIgZz17cjphLGc6YixiOmQsb3BhY2l0eTplKGYsImZpbml0ZSIpP2Y6MSxoZXg6Yy5yZ2IoYSxiLGQpLHRvU3RyaW5nOlp9O3JldHVybiBlKGYsImZpbml0ZSIpJiYoZy5vcGFjaXR5PWYpLGd9O2MuY29sb3I9ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGUoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJiImluIGE/KGI9Yy5oc2IycmdiKGEpLGEucj1iLnIsYS5nPWIuZyxhLmI9Yi5iLGEub3BhY2l0eT0xLGEuaGV4PWIuaGV4KTplKGEsIm9iamVjdCIpJiYiaCJpbiBhJiYicyJpbiBhJiYibCJpbiBhPyhiPWMuaHNsMnJnYihhKSxhLnI9Yi5yLGEuZz1iLmcsYS5iPWIuYixhLm9wYWNpdHk9MSxhLmhleD1iLmhleCk6KGUoYSwic3RyaW5nIikmJihhPWMuZ2V0UkdCKGEpKSxlKGEsIm9iamVjdCIpJiYiciJpbiBhJiYiZyJpbiBhJiYiYiJpbiBhJiYhKCJlcnJvciJpbiBhKT8oYj1jLnJnYjJoc2woYSksYS5oPWIuaCxhLnM9Yi5zLGEubD1iLmwsYj1jLnJnYjJoc2IoYSksYS52PWIuYik6KGE9e2hleDoibm9uZSJ9LGEucj1hLmc9YS5iPWEuaD1hLnM9YS52PWEubD0tMSxhLmVycm9yPTEpKSxhLnRvU3RyaW5nPVosYX0sYy5oc2IycmdiPWZ1bmN0aW9uKGEsYixjLGQpe2UoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJiImluIGEmJihjPWEuYixiPWEucyxkPWEubyxhPWEuaCksYSo9MzYwO3ZhciBmLGcsaCxpLGo7cmV0dXJuIGE9YSUzNjAvNjAsaj1jKmIsaT1qKigxLUcoYSUyLTEpKSxmPWc9aD1jLWosYT1+fmEsZis9W2osaSwwLDAsaSxqXVthXSxnKz1baSxqLGosaSwwLDBdW2FdLGgrPVswLDAsaSxqLGosaV1bYV0sXyhmLGcsaCxkKX0sYy5oc2wycmdiPWZ1bmN0aW9uKGEsYixjLGQpe2UoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJsImluIGEmJihjPWEubCxiPWEucyxhPWEuaCksKGE+MXx8Yj4xfHxjPjEpJiYoYS89MzYwLGIvPTEwMCxjLz0xMDApLGEqPTM2MDt2YXIgZixnLGgsaSxqO3JldHVybiBhPWElMzYwLzYwLGo9MipiKiguNT5jP2M6MS1jKSxpPWoqKDEtRyhhJTItMSkpLGY9Zz1oPWMtai8yLGE9fn5hLGYrPVtqLGksMCwwLGksal1bYV0sZys9W2ksaixqLGksMCwwXVthXSxoKz1bMCwwLGksaixqLGldW2FdLF8oZixnLGgsZCl9LGMucmdiMmhzYj1mdW5jdGlvbihhLGIsYyl7Yz0kKGEsYixjKSxhPWNbMF0sYj1jWzFdLGM9Y1syXTt2YXIgZCxlLGYsZztyZXR1cm4gZj1FKGEsYixjKSxnPWYtRihhLGIsYyksZD0wPT1nP251bGw6Zj09YT8oYi1jKS9nOmY9PWI/KGMtYSkvZysyOihhLWIpL2crNCxkPShkKzM2MCklNio2MC8zNjAsZT0wPT1nPzA6Zy9mLHtoOmQsczplLGI6Zix0b1N0cmluZzpYfX0sYy5yZ2IyaHNsPWZ1bmN0aW9uKGEsYixjKXtjPSQoYSxiLGMpLGE9Y1swXSxiPWNbMV0sYz1jWzJdO3ZhciBkLGUsZixnLGgsaTtyZXR1cm4gZz1FKGEsYixjKSxoPUYoYSxiLGMpLGk9Zy1oLGQ9MD09aT9udWxsOmc9PWE/KGItYykvaTpnPT1iPyhjLWEpL2krMjooYS1iKS9pKzQsZD0oZCszNjApJTYqNjAvMzYwLGY9KGcraCkvMixlPTA9PWk/MDouNT5mP2kvKDIqZik6aS8oMi0yKmYpLHtoOmQsczplLGw6Zix0b1N0cmluZzpZfX0sYy5wYXJzZVBhdGhTdHJpbmc9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGI9Yy5wYXRoKGEpO2lmKGIuYXJyKXJldHVybiBjLnBhdGguY2xvbmUoYi5hcnIpO3ZhciBkPXthOjcsYzo2LG86MixoOjEsbDoyLG06MixyOjQscTo0LHM6NCx0OjIsdjoxLHU6Myx6OjB9LGY9W107cmV0dXJuIGUoYSwiYXJyYXkiKSYmZShhWzBdLCJhcnJheSIpJiYoZj1jLnBhdGguY2xvbmUoYSkpLGYubGVuZ3RofHxBKGEpLnJlcGxhY2UoTixmdW5jdGlvbihhLGIsYyl7dmFyIGU9W10sZz1iLnRvTG93ZXJDYXNlKCk7aWYoYy5yZXBsYWNlKFAsZnVuY3Rpb24oYSxiKXtiJiZlLnB1c2goK2IpfSksIm0iPT1nJiZlLmxlbmd0aD4yJiYoZi5wdXNoKFtiXS5jb25jYXQoZS5zcGxpY2UoMCwyKSkpLGc9ImwiLGI9Im0iPT1iPyJsIjoiTCIpLCJvIj09ZyYmMT09ZS5sZW5ndGgmJmYucHVzaChbYixlWzBdXSksInIiPT1nKWYucHVzaChbYl0uY29uY2F0KGUpKTtlbHNlIGZvcig7ZS5sZW5ndGg+PWRbZ10mJihmLnB1c2goW2JdLmNvbmNhdChlLnNwbGljZSgwLGRbZ10pKSksZFtnXSk7KTt9KSxmLnRvU3RyaW5nPWMucGF0aC50b1N0cmluZyxiLmFycj1jLnBhdGguY2xvbmUoZiksZn07dmFyIGFhPWMucGFyc2VUcmFuc2Zvcm1TdHJpbmc9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGI9W107cmV0dXJuIGUoYSwiYXJyYXkiKSYmZShhWzBdLCJhcnJheSIpJiYoYj1jLnBhdGguY2xvbmUoYSkpLGIubGVuZ3RofHxBKGEpLnJlcGxhY2UoTyxmdW5jdGlvbihhLGMsZCl7dmFyIGU9W107Yy50b0xvd2VyQ2FzZSgpO2QucmVwbGFjZShQLGZ1bmN0aW9uKGEsYil7YiYmZS5wdXNoKCtiKX0pLGIucHVzaChbY10uY29uY2F0KGUpKX0pLGIudG9TdHJpbmc9Yy5wYXRoLnRvU3RyaW5nLGJ9O2MuXy5zdmdUcmFuc2Zvcm0yc3RyaW5nPW0sYy5fLnJnVHJhbnNmb3JtPS9eW2Etel1bXHNdKi0/XC4/XGQvaSxjLl8udHJhbnNmb3JtMm1hdHJpeD1uLGMuX3VuaXQycHg9cTt5LmRvYy5jb250YWluc3x8eS5kb2MuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PWR8fCEoIWR8fDEhPWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKWZvcig7YjspaWYoYj1iLnBhcmVudE5vZGUsYj09YSlyZXR1cm4hMDtyZXR1cm4hMX07Yy5fLmdldFNvbWVEZWZzPW8sYy5fLmdldFNvbWVTVkc9cCxjLnNlbGVjdD1mdW5jdGlvbihhKXtyZXR1cm4gYT1BKGEpLnJlcGxhY2UoLyhbXlxcXSk6L2csIiQxXFw6Iiksdyh5LmRvYy5xdWVyeVNlbGVjdG9yKGEpKX0sYy5zZWxlY3RBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXkuZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYSksZD0oYy5zZXR8fEFycmF5KSgpLGU9MDtlPGIubGVuZ3RoO2UrKylkLnB1c2godyhiW2VdKSk7cmV0dXJuIGR9LHNldEludGVydmFsKGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIFYpaWYoVlt6XShhKSl7dmFyIGI9VlthXSxjPWIubm9kZTsoInN2ZyIhPWIudHlwZSYmIWMub3duZXJTVkdFbGVtZW50fHwic3ZnIj09Yi50eXBlJiYoIWMucGFyZW50Tm9kZXx8Im93bmVyU1ZHRWxlbWVudCJpbiBjLnBhcmVudE5vZGUmJiFjLm93bmVyU1ZHRWxlbWVudCkpJiZkZWxldGUgVlthXX19LDFlNCkscy5wcm90b3R5cGUuYXR0cj1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZj1kLm5vZGU7aWYoIWEpe2lmKDEhPWYubm9kZVR5cGUpcmV0dXJue3RleHQ6Zi5ub2RlVmFsdWV9O2Zvcih2YXIgZz1mLmF0dHJpYnV0ZXMsaD17fSxpPTAsaj1nLmxlbmd0aDtqPmk7aSsrKWhbZ1tpXS5ub2RlTmFtZV09Z1tpXS5ub2RlVmFsdWU7cmV0dXJuIGh9aWYoZShhLCJzdHJpbmciKSl7aWYoIShhcmd1bWVudHMubGVuZ3RoPjEpKXJldHVybiBiKCJzbmFwLnV0aWwuZ2V0YXR0ci4iK2EsZCkuZmlyc3REZWZpbmVkKCk7dmFyIGs9e307a1thXT1jLGE9a31mb3IodmFyIGwgaW4gYSlhW3pdKGwpJiZiKCJzbmFwLnV0aWwuYXR0ci4iK2wsZCxhW2xdKTtyZXR1cm4gZH0sYy5wYXJzZT1mdW5jdGlvbihhKXt2YXIgYj15LmRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYz0hMCxkPXkuZG9jLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKGE9QShhKSxhLm1hdGNoKC9eXHMqPFxzKnN2Zyg/OlxzfD4pLyl8fChhPSI8c3ZnPiIrYSsiPC9zdmc+IixjPSExKSxkLmlubmVySFRNTD1hLGE9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3ZnIilbMF0paWYoYyliPWE7ZWxzZSBmb3IoO2EuZmlyc3RDaGlsZDspYi5hcHBlbmRDaGlsZChhLmZpcnN0Q2hpbGQpO3JldHVybiBuZXcgdChiKX0sYy5mcmFnbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCksYj15LmRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyl7dmFyIGY9YVtkXTtmLm5vZGUmJmYubm9kZS5ub2RlVHlwZSYmYi5hcHBlbmRDaGlsZChmLm5vZGUpLGYubm9kZVR5cGUmJmIuYXBwZW5kQ2hpbGQoZiksInN0cmluZyI9PXR5cGVvZiBmJiZiLmFwcGVuZENoaWxkKGMucGFyc2UoZikubm9kZSl9cmV0dXJuIG5ldyB0KGIpfSxjLl8ubWFrZT11LGMuXy53cmFwPXcsdi5wcm90b3R5cGUuZWw9ZnVuY3Rpb24oYSxiKXt2YXIgYz11KGEsdGhpcy5ub2RlKTtyZXR1cm4gYiYmYy5hdHRyKGIpLGN9LHMucHJvdG90eXBlLmNoaWxkcmVuPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9dGhpcy5ub2RlLmNoaWxkTm9kZXMsZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylhW2RdPWMoYltkXSk7cmV0dXJuIGF9LHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiB4KFt0aGlzXSxhKSxhWzBdfSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ciIsZnVuY3Rpb24oKXt2YXIgYT1iLm50KCk7YT1hLnN1YnN0cmluZyhhLmxhc3RJbmRleE9mKCIuIikrMSk7dmFyIGM9YS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KTtyZXR1cm4gYmFbel0oYyk/dGhpcy5ub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vZGUsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShjKTpkKHRoaXMubm9kZSxhKX0pO3ZhciBiYT17ImFsaWdubWVudC1iYXNlbGluZSI6MCwiYmFzZWxpbmUtc2hpZnQiOjAsY2xpcDowLCJjbGlwLXBhdGgiOjAsImNsaXAtcnVsZSI6MCxjb2xvcjowLCJjb2xvci1pbnRlcnBvbGF0aW9uIjowLCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMiOjAsImNvbG9yLXByb2ZpbGUiOjAsImNvbG9yLXJlbmRlcmluZyI6MCxjdXJzb3I6MCxkaXJlY3Rpb246MCxkaXNwbGF5OjAsImRvbWluYW50LWJhc2VsaW5lIjowLCJlbmFibGUtYmFja2dyb3VuZCI6MCxmaWxsOjAsImZpbGwtb3BhY2l0eSI6MCwiZmlsbC1ydWxlIjowLGZpbHRlcjowLCJmbG9vZC1jb2xvciI6MCwiZmxvb2Qtb3BhY2l0eSI6MCxmb250OjAsImZvbnQtZmFtaWx5IjowLCJmb250LXNpemUiOjAsImZvbnQtc2l6ZS1hZGp1c3QiOjAsImZvbnQtc3RyZXRjaCI6MCwiZm9udC1zdHlsZSI6MCwiZm9udC12YXJpYW50IjowLCJmb250LXdlaWdodCI6MCwiZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbCI6MCwiZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwiOjAsImltYWdlLXJlbmRlcmluZyI6MCxrZXJuaW5nOjAsImxldHRlci1zcGFjaW5nIjowLCJsaWdodGluZy1jb2xvciI6MCxtYXJrZXI6MCwibWFya2VyLWVuZCI6MCwibWFya2VyLW1pZCI6MCwibWFya2VyLXN0YXJ0IjowLG1hc2s6MCxvcGFjaXR5OjAsb3ZlcmZsb3c6MCwicG9pbnRlci1ldmVudHMiOjAsInNoYXBlLXJlbmRlcmluZyI6MCwic3RvcC1jb2xvciI6MCwic3RvcC1vcGFjaXR5IjowLHN0cm9rZTowLCJzdHJva2UtZGFzaGFycmF5IjowLCJzdHJva2UtZGFzaG9mZnNldCI6MCwic3Ryb2tlLWxpbmVjYXAiOjAsInN0cm9rZS1saW5lam9pbiI6MCwic3Ryb2tlLW1pdGVybGltaXQiOjAsInN0cm9rZS1vcGFjaXR5IjowLCJzdHJva2Utd2lkdGgiOjAsInRleHQtYW5jaG9yIjowLCJ0ZXh0LWRlY29yYXRpb24iOjAsInRleHQtcmVuZGVyaW5nIjowLCJ1bmljb2RlLWJpZGkiOjAsdmlzaWJpbGl0eTowLCJ3b3JkLXNwYWNpbmciOjAsIndyaXRpbmctbW9kZSI6MH07Yi5vbigic25hcC51dGlsLmF0dHIiLGZ1bmN0aW9uKGEpe3ZhciBjPWIubnQoKSxlPXt9O2M9Yy5zdWJzdHJpbmcoYy5sYXN0SW5kZXhPZigiLiIpKzEpLGVbY109YTt2YXIgZj1jLnJlcGxhY2UoLy0oXHcpL2dpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pLGc9Yy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KTtiYVt6XShnKT90aGlzLm5vZGUuc3R5bGVbZl09bnVsbD09YT9JOmE6ZCh0aGlzLm5vZGUsZSl9KSxmdW5jdGlvbihhKXt9KHYucHJvdG90eXBlKSxjLmFqYXg9ZnVuY3Rpb24oYSxjLGQsZil7dmFyIGc9bmV3IFhNTEh0dHBSZXF1ZXN0LGg9UygpO2lmKGcpe2lmKGUoYywiZnVuY3Rpb24iKSlmPWQsZD1jLGM9bnVsbDtlbHNlIGlmKGUoYywib2JqZWN0Iikpe3ZhciBpPVtdO2Zvcih2YXIgaiBpbiBjKWMuaGFzT3duUHJvcGVydHkoaikmJmkucHVzaChlbmNvZGVVUklDb21wb25lbnQoaikrIj0iK2VuY29kZVVSSUNvbXBvbmVudChjW2pdKSk7Yz1pLmpvaW4oIiYiKX1yZXR1cm4gZy5vcGVuKGM/IlBPU1QiOiJHRVQiLGEsITApLGMmJihnLnNldFJlcXVlc3RIZWFkZXIoIlgtUmVxdWVzdGVkLVdpdGgiLCJYTUxIdHRwUmVxdWVzdCIpLGcuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikpLGQmJihiLm9uY2UoInNuYXAuYWpheC4iK2grIi4wIixkKSxiLm9uY2UoInNuYXAuYWpheC4iK2grIi4yMDAiLGQpLGIub25jZSgic25hcC5hamF4LiIraCsiLjMwNCIsZCkpLGcub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09Zy5yZWFkeVN0YXRlJiZiKCJzbmFwLmFqYXguIitoKyIuIitnLnN0YXR1cyxmLGcpfSw0PT1nLnJlYWR5U3RhdGU/ZzooZy5zZW5kKGMpLGcpfX0sYy5sb2FkPWZ1bmN0aW9uKGEsYixkKXtjLmFqYXgoYSxmdW5jdGlvbihhKXt2YXIgZT1jLnBhcnNlKGEucmVzcG9uc2VUZXh0KTtkP2IuY2FsbChkLGUpOmIoZSl9KX07dmFyIGNhPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz1hLm93bmVyRG9jdW1lbnQsZD1jLmJvZHksZT1jLmRvY3VtZW50RWxlbWVudCxmPWUuY2xpZW50VG9wfHxkLmNsaWVudFRvcHx8MCxoPWUuY2xpZW50TGVmdHx8ZC5jbGllbnRMZWZ0fHwwLGk9Yi50b3ArKGcud2luLnBhZ2VZT2Zmc2V0fHxlLnNjcm9sbFRvcHx8ZC5zY3JvbGxUb3ApLWYsaj1iLmxlZnQrKGcud2luLnBhZ2VYT2Zmc2V0fHxlLnNjcm9sbExlZnR8fGQuc2Nyb2xsTGVmdCktaDtyZXR1cm57eTppLHg6an19O3JldHVybiBjLmdldEVsZW1lbnRCeVBvaW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPShjLmNhbnZhcyx5LmRvYy5lbGVtZW50RnJvbVBvaW50KGEsYikpO2lmKHkud2luLm9wZXJhJiYic3ZnIj09ZC50YWdOYW1lKXt2YXIgZT1jYShkKSxmPWQuY3JlYXRlU1ZHUmVjdCgpO2YueD1hLWUueCxmLnk9Yi1lLnksZi53aWR0aD1mLmhlaWdodD0xO3ZhciBnPWQuZ2V0SW50ZXJzZWN0aW9uTGlzdChmLG51bGwpO2cubGVuZ3RoJiYoZD1nW2cubGVuZ3RoLTFdKX1yZXR1cm4gZD93KGQpOm51bGx9LGMucGx1Z2luPWZ1bmN0aW9uKGEpe2EoYyxzLHYseSx0KX0seS53aW4uU25hcD1jLGN9KGF8fHRoaXMpO3JldHVybiBkLnBsdWdpbihmdW5jdGlvbihjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoYSxiKXtpZihudWxsPT1iKXt2YXIgZD0hMDtpZihiPSJsaW5lYXJHcmFkaWVudCI9PWEudHlwZXx8InJhZGlhbEdyYWRpZW50Ij09YS50eXBlP2Eubm9kZS5nZXRBdHRyaWJ1dGUoImdyYWRpZW50VHJhbnNmb3JtIik6InBhdHRlcm4iPT1hLnR5cGU/YS5ub2RlLmdldEF0dHJpYnV0ZSgicGF0dGVyblRyYW5zZm9ybSIpOmEubm9kZS5nZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIpLCFiKXJldHVybiBuZXcgYy5NYXRyaXg7Yj1jLl8uc3ZnVHJhbnNmb3JtMnN0cmluZyhiKX1lbHNlIGI9Yy5fLnJnVHJhbnNmb3JtLnRlc3QoYik/bShiKS5yZXBsYWNlKC9cLnszfXxcdTIwMjYvZyxhLl8udHJhbnNmb3JtfHwiIik6Yy5fLnN2Z1RyYW5zZm9ybTJzdHJpbmcoYiksbChiLCJhcnJheSIpJiYoYj1jLnBhdGg/Yy5wYXRoLnRvU3RyaW5nLmNhbGwoYik6bShiKSksYS5fLnRyYW5zZm9ybT1iO3ZhciBlPWMuXy50cmFuc2Zvcm0ybWF0cml4KGIsYS5nZXRCQm94KDEpKTtyZXR1cm4gZD9lOnZvaWQoYS5tYXRyaXg9ZSl9ZnVuY3Rpb24gaShhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGQ9byhhLm5vZGUsYik7ZD1kJiZkLm1hdGNoKGcpLGQ9ZCYmZFsyXSxkJiYiIyI9PWQuY2hhckF0KCkmJihkPWQuc3Vic3RyaW5nKDEpLGQmJihpW2RdPShpW2RdfHxbXSkuY29uY2F0KGZ1bmN0aW9uKGQpe3ZhciBlPXt9O2VbYl09Yy51cmwoZCksbyhhLm5vZGUsZSl9KSkpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9byhhLm5vZGUsInhsaW5rOmhyZWYiKTtiJiYiIyI9PWIuY2hhckF0KCkmJihiPWIuc3Vic3RyaW5nKDEpLGImJihpW2JdPShpW2JdfHxbXSkuY29uY2F0KGZ1bmN0aW9uKGIpe2EuYXR0cigieGxpbms6aHJlZiIsIiMiK2IpfSkpKX1mb3IodmFyIGUsZj1hLnNlbGVjdEFsbCgiKiIpLGc9L15ccyp1cmxcKCgifCd8KSguKilcMVwpXHMqJC8saD1bXSxpPXt9LGo9MCxrPWYubGVuZ3RoO2s+ajtqKyspe2U9ZltqXSxiKGUsImZpbGwiKSxiKGUsInN0cm9rZSIpLGIoZSwiZmlsdGVyIiksYihlLCJtYXNrIiksYihlLCJjbGlwLXBhdGgiKSxkKGUpO3ZhciBsPW8oZS5ub2RlLCJpZCIpO2wmJihvKGUubm9kZSx7aWQ6ZS5pZH0pLGgucHVzaCh7b2xkOmwsaWQ6ZS5pZH0pKX1mb3Ioaj0wLGs9aC5sZW5ndGg7az5qO2orKyl7dmFyIG09aVtoW2pdLm9sZF07aWYobSlmb3IodmFyIG49MCxwPW0ubGVuZ3RoO3A+bjtuKyspbVtuXShoW2pdLmlkKX19ZnVuY3Rpb24gaihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1hPyI8Iit0aGlzLnR5cGU6IiIsYz10aGlzLm5vZGUuYXR0cmlidXRlcyxkPXRoaXMubm9kZS5jaGlsZE5vZGVzO2lmKGEpZm9yKHZhciBlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWIrPSIgIitjW2VdLm5hbWUrJz0iJytjW2VdLnZhbHVlLnJlcGxhY2UoLyIvZywnXFwiJykrJyInO2lmKGQubGVuZ3RoKXtmb3IoYSYmKGIrPSI+IiksZT0wLGY9ZC5sZW5ndGg7Zj5lO2UrKykzPT1kW2VdLm5vZGVUeXBlP2IrPWRbZV0ubm9kZVZhbHVlOjE9PWRbZV0ubm9kZVR5cGUmJihiKz1zKGRbZV0pLnRvU3RyaW5nKCkpO2EmJihiKz0iPC8iK3RoaXMudHlwZSsiPiIpfWVsc2UgYSYmKGIrPSIvPiIpO3JldHVybiBifX12YXIgaz1kLnByb3RvdHlwZSxsPWMuaXMsbT1TdHJpbmcsbj1jLl91bml0MnB4LG89Yy5fLiQscD1jLl8ubWFrZSxxPWMuXy5nZXRTb21lRGVmcyxyPSJoYXNPd25Qcm9wZXJ0eSIscz1jLl8ud3JhcDtrLmdldEJCb3g9ZnVuY3Rpb24oYSl7aWYoInRzcGFuIj09dGhpcy50eXBlKXJldHVybiBjLl8uYm94KHRoaXMubm9kZS5nZXRDbGllbnRSZWN0cygpLml0ZW0oMCkpO2lmKCFjLk1hdHJpeHx8IWMucGF0aClyZXR1cm4gdGhpcy5ub2RlLmdldEJCb3goKTt2YXIgYj10aGlzLGQ9bmV3IGMuTWF0cml4O2lmKGIucmVtb3ZlZClyZXR1cm4gYy5fLmJveCgpO2Zvcig7InVzZSI9PWIudHlwZTspaWYoYXx8KGQ9ZC5hZGQoYi50cmFuc2Zvcm0oKS5sb2NhbE1hdHJpeC50cmFuc2xhdGUoYi5hdHRyKCJ4Iil8fDAsYi5hdHRyKCJ5Iil8fDApKSksYi5vcmlnaW5hbCliPWIub3JpZ2luYWw7ZWxzZXt2YXIgZT1iLmF0dHIoInhsaW5rOmhyZWYiKTtiPWIub3JpZ2luYWw9Yi5ub2RlLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZS5zdWJzdHJpbmcoZS5pbmRleE9mKCIjIikrMSkpfXZhciBmPWIuXyxnPWMucGF0aC5nZXRbYi50eXBlXXx8Yy5wYXRoLmdldC5kZWZsdDt0cnl7cmV0dXJuIGE/KGYuYmJveHd0PWc/Yy5wYXRoLmdldEJCb3goYi5yZWFsUGF0aD1nKGIpKTpjLl8uYm94KGIubm9kZS5nZXRCQm94KCkpLGMuXy5ib3goZi5iYm94d3QpKTooYi5yZWFsUGF0aD1nKGIpLGIubWF0cml4PWIudHJhbnNmb3JtKCkubG9jYWxNYXRyaXgsZi5iYm94PWMucGF0aC5nZXRCQm94KGMucGF0aC5tYXAoYi5yZWFsUGF0aCxkLmFkZChiLm1hdHJpeCkpKSxjLl8uYm94KGYuYmJveCkpfWNhdGNoKGgpe3JldHVybiBjLl8uYm94KCl9fTt2YXIgdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmluZ307ay50cmFuc2Zvcm09ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fO2lmKG51bGw9PWEpe2Zvcih2YXIgZCxlPXRoaXMsZj1uZXcgYy5NYXRyaXgodGhpcy5ub2RlLmdldENUTSgpKSxnPWgodGhpcyksaT1bZ10saj1uZXcgYy5NYXRyaXgsaz1nLnRvVHJhbnNmb3JtU3RyaW5nKCksbD1tKGcpPT1tKHRoaXMubWF0cml4KT9tKGIudHJhbnNmb3JtKTprOyJzdmciIT1lLnR5cGUmJihlPWUucGFyZW50KCkpOylpLnB1c2goaChlKSk7Zm9yKGQ9aS5sZW5ndGg7ZC0tOylqLmFkZChpW2RdKTtyZXR1cm57c3RyaW5nOmwsZ2xvYmFsTWF0cml4OmYsdG90YWxNYXRyaXg6aixsb2NhbE1hdHJpeDpnLGRpZmZNYXRyaXg6Zi5jbG9uZSgpLmFkZChnLmludmVydCgpKSxnbG9iYWw6Zi50b1RyYW5zZm9ybVN0cmluZygpLHRvdGFsOmoudG9UcmFuc2Zvcm1TdHJpbmcoKSxsb2NhbDprLHRvU3RyaW5nOnR9fXJldHVybiBhIGluc3RhbmNlb2YgYy5NYXRyaXg/KHRoaXMubWF0cml4PWEsdGhpcy5fLnRyYW5zZm9ybT1hLnRvVHJhbnNmb3JtU3RyaW5nKCkpOmgodGhpcyxhKSx0aGlzLm5vZGUmJigibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGV8fCJyYWRpYWxHcmFkaWVudCI9PXRoaXMudHlwZT9vKHRoaXMubm9kZSx7Z3JhZGllbnRUcmFuc2Zvcm06dGhpcy5tYXRyaXh9KToicGF0dGVybiI9PXRoaXMudHlwZT9vKHRoaXMubm9kZSx7cGF0dGVyblRyYW5zZm9ybTp0aGlzLm1hdHJpeH0pOm8odGhpcy5ub2RlLHt0cmFuc2Zvcm06dGhpcy5tYXRyaXh9KSksdGhpc30say5wYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcyh0aGlzLm5vZGUucGFyZW50Tm9kZSl9LGsuYXBwZW5kPWsuYWRkPWZ1bmN0aW9uKGEpe2lmKGEpe2lmKCJzZXQiPT1hLnR5cGUpe3ZhciBiPXRoaXM7cmV0dXJuIGEuZm9yRWFjaChmdW5jdGlvbihhKXtiLmFkZChhKX0pLHRoaXN9YT1zKGEpLHRoaXMubm9kZS5hcHBlbmRDaGlsZChhLm5vZGUpLGEucGFwZXI9dGhpcy5wYXBlcn1yZXR1cm4gdGhpc30say5hcHBlbmRUbz1mdW5jdGlvbihhKXtyZXR1cm4gYSYmKGE9cyhhKSxhLmFwcGVuZCh0aGlzKSksdGhpc30say5wcmVwZW5kPWZ1bmN0aW9uKGEpe2lmKGEpe2lmKCJzZXQiPT1hLnR5cGUpe3ZhciBiLGM9dGhpcztyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2I/Yi5hZnRlcihhKTpjLnByZXBlbmQoYSksYj1hfSksdGhpc31hPXMoYSk7dmFyIGQ9YS5wYXJlbnQoKTt0aGlzLm5vZGUuaW5zZXJ0QmVmb3JlKGEubm9kZSx0aGlzLm5vZGUuZmlyc3RDaGlsZCksdGhpcy5hZGQmJnRoaXMuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXMucGFyZW50KCkmJnRoaXMucGFyZW50KCkuYWRkKCksZCYmZC5hZGQoKX1yZXR1cm4gdGhpc30say5wcmVwZW5kVG89ZnVuY3Rpb24oYSl7cmV0dXJuIGE9cyhhKSxhLnByZXBlbmQodGhpcyksdGhpc30say5iZWZvcmU9ZnVuY3Rpb24oYSl7aWYoInNldCI9PWEudHlwZSl7dmFyIGI9dGhpcztyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEucGFyZW50KCk7Yi5ub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEubm9kZSxiLm5vZGUpLGMmJmMuYWRkKCl9KSx0aGlzLnBhcmVudCgpLmFkZCgpLHRoaXN9YT1zKGEpO3ZhciBjPWEucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLm5vZGUsdGhpcy5ub2RlKSx0aGlzLnBhcmVudCgpJiZ0aGlzLnBhcmVudCgpLmFkZCgpLGMmJmMuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXN9LGsuYWZ0ZXI9ZnVuY3Rpb24oYSl7YT1zKGEpO3ZhciBiPWEucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5uZXh0U2libGluZz90aGlzLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYS5ub2RlLHRoaXMubm9kZS5uZXh0U2libGluZyk6dGhpcy5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoYS5ub2RlKSx0aGlzLnBhcmVudCgpJiZ0aGlzLnBhcmVudCgpLmFkZCgpLGImJmIuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXN9LGsuaW5zZXJ0QmVmb3JlPWZ1bmN0aW9uKGEpe2E9cyhhKTt2YXIgYj10aGlzLnBhcmVudCgpO3JldHVybiBhLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGEubm9kZSksdGhpcy5wYXBlcj1hLnBhcGVyLGImJmIuYWRkKCksYS5wYXJlbnQoKSYmYS5wYXJlbnQoKS5hZGQoKSx0aGlzfSxrLmluc2VydEFmdGVyPWZ1bmN0aW9uKGEpe2E9cyhhKTt2YXIgYj10aGlzLnBhcmVudCgpO3JldHVybiBhLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGEubm9kZS5uZXh0U2libGluZyksdGhpcy5wYXBlcj1hLnBhcGVyLGImJmIuYWRkKCksYS5wYXJlbnQoKSYmYS5wYXJlbnQoKS5hZGQoKSx0aGlzfSxrLnJlbW92ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5wYXJlbnROb2RlJiZ0aGlzLm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpLGRlbGV0ZSB0aGlzLnBhcGVyLHRoaXMucmVtb3ZlZD0hMCxhJiZhLmFkZCgpLHRoaXN9LGsuc2VsZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBzKHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKGEpKX0say5zZWxlY3RBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMubm9kZS5xdWVyeVNlbGVjdG9yQWxsKGEpLGQ9KGMuc2V0fHxBcnJheSkoKSxlPTA7ZTxiLmxlbmd0aDtlKyspZC5wdXNoKHMoYltlXSkpO3JldHVybiBkfSxrLmFzUFg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YiYmKGI9dGhpcy5hdHRyKGEpKSwrbih0aGlzLGEsYil9LGsudXNlPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLm5vZGUuaWQ7cmV0dXJuIGJ8fChiPXRoaXMuaWQsbyh0aGlzLm5vZGUse2lkOmJ9KSksYT0ibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGV8fCJyYWRpYWxHcmFkaWVudCI9PXRoaXMudHlwZXx8InBhdHRlcm4iPT10aGlzLnR5cGU/cCh0aGlzLnR5cGUsdGhpcy5ub2RlLnBhcmVudE5vZGUpOnAoInVzZSIsdGhpcy5ub2RlLnBhcmVudE5vZGUpLG8oYS5ub2RlLHsieGxpbms6aHJlZiI6IiMiK2J9KSxhLm9yaWdpbmFsPXRoaXMsYX0say5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXModGhpcy5ub2RlLmNsb25lTm9kZSghMCkpO3JldHVybiBvKGEubm9kZSwiaWQiKSYmbyhhLm5vZGUse2lkOmEuaWR9KSxpKGEpLGEuaW5zZXJ0QWZ0ZXIodGhpcyksYX0say50b0RlZnM9ZnVuY3Rpb24oKXt2YXIgYT1xKHRoaXMpO3JldHVybiBhLmFwcGVuZENoaWxkKHRoaXMubm9kZSksdGhpc30say5wYXR0ZXJuPWsudG9QYXR0ZXJuPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXAoInBhdHRlcm4iLHEodGhpcykpO3JldHVybiBudWxsPT1hJiYoYT10aGlzLmdldEJCb3goKSksbChhLCJvYmplY3QiKSYmIngiaW4gYSYmKGI9YS55LGM9YS53aWR0aCxkPWEuaGVpZ2h0LGE9YS54KSxvKGUubm9kZSx7eDphLHk6Yix3aWR0aDpjLGhlaWdodDpkLHBhdHRlcm5Vbml0czoidXNlclNwYWNlT25Vc2UiLGlkOmUuaWQsdmlld0JveDpbYSxiLGMsZF0uam9pbigiICIpfSksZS5ub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSksZX0say5tYXJrZXI9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPXAoIm1hcmtlciIscSh0aGlzKSk7cmV0dXJuIG51bGw9PWEmJihhPXRoaXMuZ2V0QkJveCgpKSxsKGEsIm9iamVjdCIpJiYieCJpbiBhJiYoYj1hLnksYz1hLndpZHRoLGQ9YS5oZWlnaHQsZT1hLnJlZlh8fGEuY3gsZj1hLnJlZll8fGEuY3ksYT1hLngpLG8oZy5ub2RlLHt2aWV3Qm94OlthLGIsYyxkXS5qb2luKCIgIiksbWFya2VyV2lkdGg6YyxtYXJrZXJIZWlnaHQ6ZCxvcmllbnQ6ImF1dG8iLHJlZlg6ZXx8MCxyZWZZOmZ8fDAsaWQ6Zy5pZH0pLGcubm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpLGd9O3ZhciB1PXt9O2suZGF0YT1mdW5jdGlvbihhLGQpe3ZhciBlPXVbdGhpcy5pZF09dVt0aGlzLmlkXXx8e307aWYoMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gYigic25hcC5kYXRhLmdldC4iK3RoaXMuaWQsdGhpcyxlLG51bGwpLGU7aWYoMT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYy5pcyhhLCJvYmplY3QiKSl7Zm9yKHZhciBmIGluIGEpYVtyXShmKSYmdGhpcy5kYXRhKGYsYVtmXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIoInNuYXAuZGF0YS5nZXQuIit0aGlzLmlkLHRoaXMsZVthXSxhKSxlW2FdfXJldHVybiBlW2FdPWQsYigic25hcC5kYXRhLnNldC4iK3RoaXMuaWQsdGhpcyxkLGEpLHRoaXN9LGsucmVtb3ZlRGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT91W3RoaXMuaWRdPXt9OnVbdGhpcy5pZF0mJmRlbGV0ZSB1W3RoaXMuaWRdW2FdLHRoaXN9LGsub3V0ZXJTVkc9ay50b1N0cmluZz1qKDEpLGsuaW5uZXJTVkc9aigpLGsudG9EYXRhVVJMPWZ1bmN0aW9uKCl7aWYoYSYmYS5idG9hKXt2YXIgYj10aGlzLmdldEJCb3goKSxkPWMuZm9ybWF0KCc8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9Int3aWR0aH0iIGhlaWdodD0ie2hlaWdodH0iIHZpZXdCb3g9Int4fSB7eX0ge3dpZHRofSB7aGVpZ2h0fSI+e2NvbnRlbnRzfTwvc3ZnPicse3g6K2IueC50b0ZpeGVkKDMpLHk6K2IueS50b0ZpeGVkKDMpLHdpZHRoOitiLndpZHRoLnRvRml4ZWQoMyksaGVpZ2h0OitiLmhlaWdodC50b0ZpeGVkKDMpLGNvbnRlbnRzOnRoaXMub3V0ZXJTVkcoKX0pOwpyZXR1cm4iZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwiK2J0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGQpKSl9fSxnLnByb3RvdHlwZS5zZWxlY3Q9ay5zZWxlY3QsZy5wcm90b3R5cGUuc2VsZWN0QWxsPWsuc2VsZWN0QWxsfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxkLGUsZixnKXtmdW5jdGlvbiBoKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZC5zbGljZShhLGIpO3JldHVybiAxPT1lLmxlbmd0aCYmKGU9ZVswXSksYz9jKGUpOmV9fXZhciBpPWQucHJvdG90eXBlLGo9YS5pcyxrPVN0cmluZyxsPSJoYXNPd25Qcm9wZXJ0eSIsbT1mdW5jdGlvbihhLGIsZCxlKXsiZnVuY3Rpb24iIT10eXBlb2YgZHx8ZC5sZW5ndGh8fChlPWQsZD1jLmxpbmVhciksdGhpcy5hdHRyPWEsdGhpcy5kdXI9YixkJiYodGhpcy5lYXNpbmc9ZCksZSYmKHRoaXMuY2FsbGJhY2s9ZSl9O2EuXy5BbmltYXRpb249bSxhLmFuaW1hdGlvbj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gbmV3IG0oYSxiLGMsZCl9LGkuaW5BbmltPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPVtdO2Zvcih2YXIgYyBpbiBhLmFuaW1zKWEuYW5pbXNbbF0oYykmJiFmdW5jdGlvbihhKXtiLnB1c2goe2FuaW06bmV3IG0oYS5fYXR0cnMsYS5kdXIsYS5lYXNpbmcsYS5fY2FsbGJhY2spLG1pbmE6YSxjdXJTdGF0dXM6YS5zdGF0dXMoKSxzdGF0dXM6ZnVuY3Rpb24oYil7cmV0dXJuIGEuc3RhdHVzKGIpfSxzdG9wOmZ1bmN0aW9uKCl7YS5zdG9wKCl9fSl9KGEuYW5pbXNbY10pO3JldHVybiBifSxhLmFuaW1hdGU9ZnVuY3Rpb24oYSxkLGUsZixnLGgpeyJmdW5jdGlvbiIhPXR5cGVvZiBnfHxnLmxlbmd0aHx8KGg9ZyxnPWMubGluZWFyKTt2YXIgaT1jLnRpbWUoKSxqPWMoYSxkLGksaStmLGMudGltZSxlLGcpO3JldHVybiBoJiZiLm9uY2UoIm1pbmEuZmluaXNoLiIrai5pZCxoKSxqfSxpLnN0b3A9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5pbkFuaW0oKSxiPTAsYz1hLmxlbmd0aDtjPmI7YisrKWFbYl0uc3RvcCgpO3JldHVybiB0aGlzfSxpLmFuaW1hdGU9ZnVuY3Rpb24oYSxkLGUsZil7ImZ1bmN0aW9uIiE9dHlwZW9mIGV8fGUubGVuZ3RofHwoZj1lLGU9Yy5saW5lYXIpLGEgaW5zdGFuY2VvZiBtJiYoZj1hLmNhbGxiYWNrLGU9YS5lYXNpbmcsZD1hLmR1cixhPWEuYXR0cik7dmFyIGcsaSxuLG8scD1bXSxxPVtdLHI9e30scz10aGlzO2Zvcih2YXIgdCBpbiBhKWlmKGFbbF0odCkpe3MuZXF1YWw/KG89cy5lcXVhbCh0LGsoYVt0XSkpLGc9by5mcm9tLGk9by50byxuPW8uZik6KGc9K3MuYXR0cih0KSxpPSthW3RdKTt2YXIgdT1qKGcsImFycmF5Iik/Zy5sZW5ndGg6MTtyW3RdPWgocC5sZW5ndGgscC5sZW5ndGgrdSxuKSxwPXAuY29uY2F0KGcpLHE9cS5jb25jYXQoaSl9dmFyIHY9Yy50aW1lKCksdz1jKHAscSx2LHYrZCxjLnRpbWUsZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIHIpcltsXShjKSYmKGJbY109cltjXShhKSk7cy5hdHRyKGIpfSxlKTtyZXR1cm4gcy5hbmltc1t3LmlkXT13LHcuX2F0dHJzPWEsdy5fY2FsbGJhY2s9ZixiKCJzbmFwLmFuaW1jcmVhdGVkLiIrcy5pZCx3KSxiLm9uY2UoIm1pbmEuZmluaXNoLiIrdy5pZCxmdW5jdGlvbigpe2Iub2ZmKCJtaW5hLiouIit3LmlkKSxkZWxldGUgcy5hbmltc1t3LmlkXSxmJiZmLmNhbGwocyl9KSxiLm9uY2UoIm1pbmEuc3RvcC4iK3cuaWQsZnVuY3Rpb24oKXtiLm9mZigibWluYS4qLiIrdy5pZCksZGVsZXRlIHMuYW5pbXNbdy5pZF19KSxzfX0pLGQucGx1Z2luKGZ1bmN0aW9uKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihhLGIsYyxkLGUsZil7cmV0dXJuIG51bGw9PWImJiJbb2JqZWN0IFNWR01hdHJpeF0iPT1nLmNhbGwoYSk/KHRoaXMuYT1hLmEsdGhpcy5iPWEuYix0aGlzLmM9YS5jLHRoaXMuZD1hLmQsdGhpcy5lPWEuZSx2b2lkKHRoaXMuZj1hLmYpKTp2b2lkKG51bGwhPWE/KHRoaXMuYT0rYSx0aGlzLmI9K2IsdGhpcy5jPStjLHRoaXMuZD0rZCx0aGlzLmU9K2UsdGhpcy5mPStmKToodGhpcy5hPTEsdGhpcy5iPTAsdGhpcy5jPTAsdGhpcy5kPTEsdGhpcy5lPTAsdGhpcy5mPTApKX12YXIgZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGg9U3RyaW5nLGk9TWF0aCxqPSIiOyFmdW5jdGlvbihiKXtmdW5jdGlvbiBjKGEpe3JldHVybiBhWzBdKmFbMF0rYVsxXSphWzFdfWZ1bmN0aW9uIGQoYSl7dmFyIGI9aS5zcXJ0KGMoYSkpO2FbMF0mJihhWzBdLz1iKSxhWzFdJiYoYVsxXS89Yil9Yi5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe2lmKGEmJmEgaW5zdGFuY2VvZiBmKXJldHVybiB0aGlzLmFkZChhLmEsYS5iLGEuYyxhLmQsYS5lLGEuZik7dmFyIGg9YSp0aGlzLmErYip0aGlzLmMsaT1hKnRoaXMuYitiKnRoaXMuZDtyZXR1cm4gdGhpcy5lKz1lKnRoaXMuYStnKnRoaXMuYyx0aGlzLmYrPWUqdGhpcy5iK2cqdGhpcy5kLHRoaXMuYz1jKnRoaXMuYStkKnRoaXMuYyx0aGlzLmQ9Yyp0aGlzLmIrZCp0aGlzLmQsdGhpcy5hPWgsdGhpcy5iPWksdGhpc30sZi5wcm90b3R5cGUubXVsdExlZnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe2lmKGEmJmEgaW5zdGFuY2VvZiBmKXJldHVybiB0aGlzLm11bHRMZWZ0KGEuYSxhLmIsYS5jLGEuZCxhLmUsYS5mKTt2YXIgaD1hKnRoaXMuYStjKnRoaXMuYixpPWEqdGhpcy5jK2MqdGhpcy5kLGo9YSp0aGlzLmUrYyp0aGlzLmYrZTtyZXR1cm4gdGhpcy5iPWIqdGhpcy5hK2QqdGhpcy5iLHRoaXMuZD1iKnRoaXMuYytkKnRoaXMuZCx0aGlzLmY9Yip0aGlzLmUrZCp0aGlzLmYrZyx0aGlzLmE9aCx0aGlzLmM9aSx0aGlzLmU9aix0aGlzfSxiLmludmVydD1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmEqYS5kLWEuYiphLmM7cmV0dXJuIG5ldyBmKGEuZC9iLC1hLmIvYiwtYS5jL2IsYS5hL2IsKGEuYyphLmYtYS5kKmEuZSkvYiwoYS5iKmEuZS1hLmEqYS5mKS9iKX0sYi5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZih0aGlzLmEsdGhpcy5iLHRoaXMuYyx0aGlzLmQsdGhpcy5lLHRoaXMuZil9LGIudHJhbnNsYXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZSs9YSp0aGlzLmErYip0aGlzLmMsdGhpcy5mKz1hKnRoaXMuYitiKnRoaXMuZCx0aGlzfSxiLnNjYWxlPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBudWxsPT1iJiYoYj1hKSwoY3x8ZCkmJnRoaXMudHJhbnNsYXRlKGMsZCksdGhpcy5hKj1hLHRoaXMuYio9YSx0aGlzLmMqPWIsdGhpcy5kKj1iLChjfHxkKSYmdGhpcy50cmFuc2xhdGUoLWMsLWQpLHRoaXN9LGIucm90YXRlPWZ1bmN0aW9uKGIsYyxkKXtiPWEucmFkKGIpLGM9Y3x8MCxkPWR8fDA7dmFyIGU9K2kuY29zKGIpLnRvRml4ZWQoOSksZj0raS5zaW4oYikudG9GaXhlZCg5KTtyZXR1cm4gdGhpcy5hZGQoZSxmLC1mLGUsYyxkKSx0aGlzLmFkZCgxLDAsMCwxLC1jLC1kKX0sYi5za2V3WD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5za2V3KGEsMCl9LGIuc2tld1k9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2tldygwLGEpfSxiLnNrZXc9ZnVuY3Rpb24oYixjKXtiPWJ8fDAsYz1jfHwwLGI9YS5yYWQoYiksYz1hLnJhZChjKTt2YXIgZD1pLnRhbihiKS50b0ZpeGVkKDkpLGU9aS50YW4oYykudG9GaXhlZCg5KTtyZXR1cm4gdGhpcy5hZGQoMSxlLGQsMSwwLDApfSxiLng9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSp0aGlzLmErYip0aGlzLmMrdGhpcy5lfSxiLnk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSp0aGlzLmIrYip0aGlzLmQrdGhpcy5mfSxiLmdldD1mdW5jdGlvbihhKXtyZXR1cm4rdGhpc1toLmZyb21DaGFyQ29kZSg5NythKV0udG9GaXhlZCg0KX0sYi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJtYXRyaXgoIitbdGhpcy5nZXQoMCksdGhpcy5nZXQoMSksdGhpcy5nZXQoMiksdGhpcy5nZXQoMyksdGhpcy5nZXQoNCksdGhpcy5nZXQoNSldLmpvaW4oKSsiKSJ9LGIub2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuZS50b0ZpeGVkKDQpLHRoaXMuZi50b0ZpeGVkKDQpXX0sYi5kZXRlcm1pbmFudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEqdGhpcy5kLXRoaXMuYip0aGlzLmN9LGIuc3BsaXQ9ZnVuY3Rpb24oKXt2YXIgYj17fTtiLmR4PXRoaXMuZSxiLmR5PXRoaXMuZjt2YXIgZT1bW3RoaXMuYSx0aGlzLmJdLFt0aGlzLmMsdGhpcy5kXV07Yi5zY2FsZXg9aS5zcXJ0KGMoZVswXSkpLGQoZVswXSksYi5zaGVhcj1lWzBdWzBdKmVbMV1bMF0rZVswXVsxXSplWzFdWzFdLGVbMV09W2VbMV1bMF0tZVswXVswXSpiLnNoZWFyLGVbMV1bMV0tZVswXVsxXSpiLnNoZWFyXSxiLnNjYWxleT1pLnNxcnQoYyhlWzFdKSksZChlWzFdKSxiLnNoZWFyLz1iLnNjYWxleSx0aGlzLmRldGVybWluYW50KCk8MCYmKGIuc2NhbGV4PS1iLnNjYWxleCk7dmFyIGY9ZVswXVsxXSxnPWVbMV1bMV07cmV0dXJuIDA+Zz8oYi5yb3RhdGU9YS5kZWcoaS5hY29zKGcpKSwwPmYmJihiLnJvdGF0ZT0zNjAtYi5yb3RhdGUpKTpiLnJvdGF0ZT1hLmRlZyhpLmFzaW4oZikpLGIuaXNTaW1wbGU9ISgrYi5zaGVhci50b0ZpeGVkKDkpfHxiLnNjYWxleC50b0ZpeGVkKDkpIT1iLnNjYWxleS50b0ZpeGVkKDkpJiZiLnJvdGF0ZSksYi5pc1N1cGVyU2ltcGxlPSErYi5zaGVhci50b0ZpeGVkKDkpJiZiLnNjYWxleC50b0ZpeGVkKDkpPT1iLnNjYWxleS50b0ZpeGVkKDkpJiYhYi5yb3RhdGUsYi5ub1JvdGF0aW9uPSErYi5zaGVhci50b0ZpeGVkKDkpJiYhYi5yb3RhdGUsYn0sYi50b1RyYW5zZm9ybVN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1hfHx0aGlzLnNwbGl0KCk7cmV0dXJuK2Iuc2hlYXIudG9GaXhlZCg5KT8ibSIrW3RoaXMuZ2V0KDApLHRoaXMuZ2V0KDEpLHRoaXMuZ2V0KDIpLHRoaXMuZ2V0KDMpLHRoaXMuZ2V0KDQpLHRoaXMuZ2V0KDUpXTooYi5zY2FsZXg9K2Iuc2NhbGV4LnRvRml4ZWQoNCksYi5zY2FsZXk9K2Iuc2NhbGV5LnRvRml4ZWQoNCksYi5yb3RhdGU9K2Iucm90YXRlLnRvRml4ZWQoNCksKGIuZHh8fGIuZHk/InQiK1srYi5keC50b0ZpeGVkKDQpLCtiLmR5LnRvRml4ZWQoNCldOmopKyhiLnJvdGF0ZT8iciIrWytiLnJvdGF0ZS50b0ZpeGVkKDQpLDAsMF06aikrKDEhPWIuc2NhbGV4fHwxIT1iLnNjYWxleT8icyIrW2Iuc2NhbGV4LGIuc2NhbGV5LDAsMF06aikpfX0oZi5wcm90b3R5cGUpLGEuTWF0cml4PWYsYS5tYXRyaXg9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe3JldHVybiBuZXcgZihhLGIsYyxkLGUsZyl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSxmKXtmdW5jdGlvbiBnKGQpe3JldHVybiBmdW5jdGlvbihlKXtpZihiLnN0b3AoKSxlIGluc3RhbmNlb2YgZiYmMT09ZS5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoJiYoInJhZGlhbEdyYWRpZW50Ij09ZS5ub2RlLmZpcnN0Q2hpbGQudGFnTmFtZXx8ImxpbmVhckdyYWRpZW50Ij09ZS5ub2RlLmZpcnN0Q2hpbGQudGFnTmFtZXx8InBhdHRlcm4iPT1lLm5vZGUuZmlyc3RDaGlsZC50YWdOYW1lKSYmKGU9ZS5ub2RlLmZpcnN0Q2hpbGQsbih0aGlzKS5hcHBlbmRDaGlsZChlKSxlPWwoZSkpLGUgaW5zdGFuY2VvZiBjKWlmKCJyYWRpYWxHcmFkaWVudCI9PWUudHlwZXx8ImxpbmVhckdyYWRpZW50Ij09ZS50eXBlfHwicGF0dGVybiI9PWUudHlwZSl7ZS5ub2RlLmlkfHxwKGUubm9kZSx7aWQ6ZS5pZH0pO3ZhciBnPXEoZS5ub2RlLmlkKX1lbHNlIGc9ZS5hdHRyKGQpO2Vsc2UgaWYoZz1hLmNvbG9yKGUpLGcuZXJyb3Ipe3ZhciBoPWEobih0aGlzKS5vd25lclNWR0VsZW1lbnQpLmdyYWRpZW50KGUpO2g/KGgubm9kZS5pZHx8cChoLm5vZGUse2lkOmguaWR9KSxnPXEoaC5ub2RlLmlkKSk6Zz1lfWVsc2UgZz1yKGcpO3ZhciBpPXt9O2lbZF09ZyxwKHRoaXMubm9kZSxpKSx0aGlzLm5vZGUuc3R5bGVbZF09dH19ZnVuY3Rpb24gaChhKXtiLnN0b3AoKSxhPT0rYSYmKGErPSJweCIpLHRoaXMubm9kZS5zdHlsZS5mb250U2l6ZT1hfWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiPVtdLGM9YS5jaGlsZE5vZGVzLGQ9MCxlPWMubGVuZ3RoO2U+ZDtkKyspe3ZhciBmPWNbZF07Mz09Zi5ub2RlVHlwZSYmYi5wdXNoKGYubm9kZVZhbHVlKSwidHNwYW4iPT1mLnRhZ05hbWUmJigxPT1mLmNoaWxkTm9kZXMubGVuZ3RoJiYzPT1mLmZpcnN0Q2hpbGQubm9kZVR5cGU/Yi5wdXNoKGYuZmlyc3RDaGlsZC5ub2RlVmFsdWUpOmIucHVzaChpKGYpKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gaigpe3JldHVybiBiLnN0b3AoKSx0aGlzLm5vZGUuc3R5bGUuZm9udFNpemV9dmFyIGs9YS5fLm1ha2UsbD1hLl8ud3JhcCxtPWEuaXMsbj1hLl8uZ2V0U29tZURlZnMsbz0vXnVybFwoKFsnIl0/KShbXildKylcMVwpJC8scD1hLl8uJCxxPWEudXJsLHI9U3RyaW5nLHM9YS5fLnNlcGFyYXRvcix0PSIiO2EuZGV1cmw9ZnVuY3Rpb24oYSl7dmFyIGI9U3RyaW5nKGEpLm1hdGNoKG8pO3JldHVybiBiP2JbMl06YX0sYi5vbigic25hcC51dGlsLmF0dHIubWFzayIsZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIGN8fGEgaW5zdGFuY2VvZiBmKXtpZihiLnN0b3AoKSxhIGluc3RhbmNlb2YgZiYmMT09YS5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoJiYoYT1hLm5vZGUuZmlyc3RDaGlsZCxuKHRoaXMpLmFwcGVuZENoaWxkKGEpLGE9bChhKSksIm1hc2siPT1hLnR5cGUpdmFyIGQ9YTtlbHNlIGQ9aygibWFzayIsbih0aGlzKSksZC5ub2RlLmFwcGVuZENoaWxkKGEubm9kZSk7IWQubm9kZS5pZCYmcChkLm5vZGUse2lkOmQuaWR9KSxwKHRoaXMubm9kZSx7bWFzazpxKGQuaWQpfSl9fSksZnVuY3Rpb24oYSl7Yi5vbigic25hcC51dGlsLmF0dHIuY2xpcCIsYSksYi5vbigic25hcC51dGlsLmF0dHIuY2xpcC1wYXRoIixhKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5jbGlwUGF0aCIsYSl9KGZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBjfHxhIGluc3RhbmNlb2YgZil7Yi5zdG9wKCk7Zm9yKHZhciBkLGU9YS5ub2RlO2U7KXtpZigiY2xpcFBhdGgiPT09ZS5ub2RlTmFtZSl7ZD1uZXcgYyhlKTticmVha31pZigic3ZnIj09PWUubm9kZU5hbWUpe2Q9dm9pZCAwO2JyZWFrfWU9ZS5wYXJlbnROb2RlfWR8fChkPWsoImNsaXBQYXRoIixuKHRoaXMpKSxkLm5vZGUuYXBwZW5kQ2hpbGQoYS5ub2RlKSwhZC5ub2RlLmlkJiZwKGQubm9kZSx7aWQ6ZC5pZH0pKSxwKHRoaXMubm9kZSx7ImNsaXAtcGF0aCI6cShkLm5vZGUuaWR8fGQuaWQpfSl9fSksYi5vbigic25hcC51dGlsLmF0dHIuZmlsbCIsZygiZmlsbCIpKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5zdHJva2UiLGcoInN0cm9rZSIpKTt2YXIgdT0vXihbbHJdKSg/OlwoKFteKV0qKVwpKT8oLiopJC9pO2Iub24oInNuYXAudXRpbC5ncmFkLnBhcnNlIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjPShiLWgpLyhhLWkpLGQ9aTthPmQ7ZCsrKWZbZF0ub2Zmc2V0PSsoK2grYyooZC1pKSkudG9GaXhlZCgyKTtpPWEsaD1ifWE9cihhKTt2YXIgYz1hLm1hdGNoKHUpO2lmKCFjKXJldHVybiBudWxsO3ZhciBkPWNbMV0sZT1jWzJdLGY9Y1szXTtlPWUuc3BsaXQoL1xzKixccyovKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuK2E9PWE/K2E6YX0pLDE9PWUubGVuZ3RoJiYwPT1lWzBdJiYoZT1bXSksZj1mLnNwbGl0KCItIiksZj1mLm1hcChmdW5jdGlvbihhKXthPWEuc3BsaXQoIjoiKTt2YXIgYj17Y29sb3I6YVswXX07cmV0dXJuIGFbMV0mJihiLm9mZnNldD1wYXJzZUZsb2F0KGFbMV0pKSxifSk7dmFyIGc9Zi5sZW5ndGgsaD0wLGk9MDtnLS07Zm9yKHZhciBqPTA7Zz5qO2orKykib2Zmc2V0ImluIGZbal0mJmIoaixmW2pdLm9mZnNldCk7cmV0dXJuIGZbZ10ub2Zmc2V0PWZbZ10ub2Zmc2V0fHwxMDAsYihnLGZbZ10ub2Zmc2V0KSx7dHlwZTpkLHBhcmFtczplLHN0b3BzOmZ9fSksYi5vbigic25hcC51dGlsLmF0dHIuZCIsZnVuY3Rpb24oYyl7Yi5zdG9wKCksbShjLCJhcnJheSIpJiZtKGNbMF0sImFycmF5IikmJihjPWEucGF0aC50b1N0cmluZy5jYWxsKGMpKSxjPXIoYyksYy5tYXRjaCgvW3J1b10vaSkmJihjPWEucGF0aC50b0Fic29sdXRlKGMpKSxwKHRoaXMubm9kZSx7ZDpjfSl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuI3RleHQiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLGE9cihhKTtmb3IodmFyIGM9ZS5kb2MuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5ub2RlLmZpcnN0Q2hpbGQ7KXRoaXMubm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUuZmlyc3RDaGlsZCk7dGhpcy5ub2RlLmFwcGVuZENoaWxkKGMpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnBhdGgiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLHRoaXMuYXR0cih7ZDphfSl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuY2xhc3MiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLHRoaXMubm9kZS5jbGFzc05hbWUuYmFzZVZhbD1hfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnZpZXdCb3giLGZ1bmN0aW9uKGEpe3ZhciBjO2M9bShhLCJvYmplY3QiKSYmIngiaW4gYT9bYS54LGEueSxhLndpZHRoLGEuaGVpZ2h0XS5qb2luKCIgIik6bShhLCJhcnJheSIpP2Euam9pbigiICIpOmEscCh0aGlzLm5vZGUse3ZpZXdCb3g6Y30pLGIuc3RvcCgpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRyYW5zZm9ybSIsZnVuY3Rpb24oYSl7dGhpcy50cmFuc2Zvcm0oYSksYi5zdG9wKCl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuciIsZnVuY3Rpb24oYSl7InJlY3QiPT10aGlzLnR5cGUmJihiLnN0b3AoKSxwKHRoaXMubm9kZSx7cng6YSxyeTphfSkpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRleHRwYXRoIixmdW5jdGlvbihhKXtpZihiLnN0b3AoKSwidGV4dCI9PXRoaXMudHlwZSl7dmFyIGQsZSxmO2lmKCFhJiZ0aGlzLnRleHRQYXRoKXtmb3IoZT10aGlzLnRleHRQYXRoO2Uubm9kZS5maXJzdENoaWxkOyl0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoZS5ub2RlLmZpcnN0Q2hpbGQpO3JldHVybiBlLnJlbW92ZSgpLHZvaWQgZGVsZXRlIHRoaXMudGV4dFBhdGh9aWYobShhLCJzdHJpbmciKSl7dmFyIGc9bih0aGlzKSxoPWwoZy5wYXJlbnROb2RlKS5wYXRoKGEpO2cuYXBwZW5kQ2hpbGQoaC5ub2RlKSxkPWguaWQsaC5hdHRyKHtpZDpkfSl9ZWxzZSBhPWwoYSksYSBpbnN0YW5jZW9mIGMmJihkPWEuYXR0cigiaWQiKSxkfHwoZD1hLmlkLGEuYXR0cih7aWQ6ZH0pKSk7aWYoZClpZihlPXRoaXMudGV4dFBhdGgsZj10aGlzLm5vZGUsZSllLmF0dHIoeyJ4bGluazpocmVmIjoiIyIrZH0pO2Vsc2V7Zm9yKGU9cCgidGV4dFBhdGgiLHsieGxpbms6aHJlZiI6IiMiK2R9KTtmLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZi5maXJzdENoaWxkKTtmLmFwcGVuZENoaWxkKGUpLHRoaXMudGV4dFBhdGg9bChlKX19fSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRleHQiLGZ1bmN0aW9uKGEpe2lmKCJ0ZXh0Ij09dGhpcy50eXBlKXtmb3IodmFyIGM9dGhpcy5ub2RlLGQ9ZnVuY3Rpb24oYSl7dmFyIGI9cCgidHNwYW4iKTtpZihtKGEsImFycmF5IikpZm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYi5hcHBlbmRDaGlsZChkKGFbY10pKTtlbHNlIGIuYXBwZW5kQ2hpbGQoZS5kb2MuY3JlYXRlVGV4dE5vZGUoYSkpO3JldHVybiBiLm5vcm1hbGl6ZSYmYi5ub3JtYWxpemUoKSxifTtjLmZpcnN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5maXJzdENoaWxkKTtmb3IodmFyIGY9ZChhKTtmLmZpcnN0Q2hpbGQ7KWMuYXBwZW5kQ2hpbGQoZi5maXJzdENoaWxkKX1iLnN0b3AoKX0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5mb250U2l6ZSIsaCkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLmZvbnQtc2l6ZSIsaCkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnRyYW5zZm9ybSIsZnVuY3Rpb24oKXtyZXR1cm4gYi5zdG9wKCksdGhpcy50cmFuc2Zvcm0oKX0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci50ZXh0cGF0aCIsZnVuY3Rpb24oKXtyZXR1cm4gYi5zdG9wKCksdGhpcy50ZXh0UGF0aH0pKC0xKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYyl7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5zdG9wKCk7dmFyIGQ9ZS5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vZGUsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgibWFya2VyLSIrYyk7cmV0dXJuIm5vbmUiPT1kP2Q6YShlLmRvYy5nZXRFbGVtZW50QnlJZChkLm1hdGNoKG8pWzFdKSl9fWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe2Iuc3RvcCgpO3ZhciBkPSJtYXJrZXIiK2EuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHJpbmcoMSk7aWYoIiI9PWN8fCFjKXJldHVybiB2b2lkKHRoaXMubm9kZS5zdHlsZVtkXT0ibm9uZSIpO2lmKCJtYXJrZXIiPT1jLnR5cGUpe3ZhciBlPWMubm9kZS5pZDtyZXR1cm4gZXx8cChjLm5vZGUse2lkOmMuaWR9KSx2b2lkKHRoaXMubm9kZS5zdHlsZVtkXT1xKGUpKX19fWIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlci1lbmQiLGMoImVuZCIpKSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIubWFya2VyRW5kIixjKCJlbmQiKSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlci1zdGFydCIsYygic3RhcnQiKSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlclN0YXJ0IixjKCJzdGFydCIpKSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIubWFya2VyLW1pZCIsYygibWlkIikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5tYXJrZXJNaWQiLGMoIm1pZCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyLWVuZCIsZCgiZW5kIikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5tYXJrZXJFbmQiLGQoImVuZCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyLXN0YXJ0IixkKCJzdGFydCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyU3RhcnQiLGQoInN0YXJ0IikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5tYXJrZXItbWlkIixkKCJtaWQiKSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLm1hcmtlck1pZCIsZCgibWlkIikpKC0xKX0oKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5yIixmdW5jdGlvbigpe3JldHVybiJyZWN0Ij09dGhpcy50eXBlJiZwKHRoaXMubm9kZSwicngiKT09cCh0aGlzLm5vZGUsInJ5Iik/KGIuc3RvcCgpLHAodGhpcy5ub2RlLCJyeCIpKTp2b2lkIDB9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIudGV4dCIsZnVuY3Rpb24oKXtpZigidGV4dCI9PXRoaXMudHlwZXx8InRzcGFuIj09dGhpcy50eXBlKXtiLnN0b3AoKTt2YXIgYT1pKHRoaXMubm9kZSk7cmV0dXJuIDE9PWEubGVuZ3RoP2FbMF06YX19KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIuI3RleHQiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS50ZXh0Q29udGVudH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5maWxsIixmdW5jdGlvbihjKXtpZighYyl7Yi5zdG9wKCk7dmFyIGQ9Yigic25hcC51dGlsLmdldGF0dHIuZmlsbCIsdGhpcywhMCkuZmlyc3REZWZpbmVkKCk7cmV0dXJuIGEoYS5kZXVybChkKSl8fGR9fSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnN0cm9rZSIsZnVuY3Rpb24oYyl7aWYoIWMpe2Iuc3RvcCgpO3ZhciBkPWIoInNuYXAudXRpbC5nZXRhdHRyLnN0cm9rZSIsdGhpcywhMCkuZmlyc3REZWZpbmVkKCk7cmV0dXJuIGEoYS5kZXVybChkKSl8fGR9fSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnZpZXdCb3giLGZ1bmN0aW9uKCl7Yi5zdG9wKCk7dmFyIGM9cCh0aGlzLm5vZGUsInZpZXdCb3giKTtyZXR1cm4gYz8oYz1jLnNwbGl0KHMpLGEuXy5ib3goK2NbMF0sK2NbMV0sK2NbMl0sK2NbM10pKTp2b2lkIDB9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIucG9pbnRzIixmdW5jdGlvbigpe3ZhciBhPXAodGhpcy5ub2RlLCJwb2ludHMiKTtyZXR1cm4gYi5zdG9wKCksYT9hLnNwbGl0KHMpOnZvaWQgMH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5wYXRoIixmdW5jdGlvbigpe3ZhciBhPXAodGhpcy5ub2RlLCJkIik7cmV0dXJuIGIuc3RvcCgpLGF9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIuY2xhc3MiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5jbGFzc05hbWUuYmFzZVZhbH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5mb250U2l6ZSIsaikoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLmZvbnQtc2l6ZSIsaikoLTEpfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj0vXFMrL2csZz1TdHJpbmcsaD1iLnByb3RvdHlwZTtoLmFkZENsYXNzPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGg9ZyhhfHwiIikubWF0Y2goZil8fFtdLGk9dGhpcy5ub2RlLGo9aS5jbGFzc05hbWUuYmFzZVZhbCxrPWoubWF0Y2goZil8fFtdO2lmKGgubGVuZ3RoKXtmb3IoYj0wO2Q9aFtiKytdOyljPWsuaW5kZXhPZihkKSx+Y3x8ay5wdXNoKGQpO2U9ay5qb2luKCIgIiksaiE9ZSYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZSl9cmV0dXJuIHRoaXN9LGgucmVtb3ZlQ2xhc3M9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsaD1nKGF8fCIiKS5tYXRjaChmKXx8W10saT10aGlzLm5vZGUsaj1pLmNsYXNzTmFtZS5iYXNlVmFsLGs9ai5tYXRjaChmKXx8W107aWYoay5sZW5ndGgpe2ZvcihiPTA7ZD1oW2IrK107KWM9ay5pbmRleE9mKGQpLH5jJiZrLnNwbGljZShjLDEpO2U9ay5qb2luKCIgIiksaiE9ZSYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZSl9cmV0dXJuIHRoaXN9LGguaGFzQ2xhc3M9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ub2RlLGM9Yi5jbGFzc05hbWUuYmFzZVZhbCxkPWMubWF0Y2goZil8fFtdO3JldHVybiEhfmQuaW5kZXhPZihhKX0saC50b2dnbGVDbGFzcz1mdW5jdGlvbihhLGIpe2lmKG51bGwhPWIpcmV0dXJuIGI/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpO3ZhciBjLGQsZSxnLGg9KGF8fCIiKS5tYXRjaChmKXx8W10saT10aGlzLm5vZGUsaj1pLmNsYXNzTmFtZS5iYXNlVmFsLGs9ai5tYXRjaChmKXx8W107Zm9yKGM9MDtlPWhbYysrXTspZD1rLmluZGV4T2YoZSksfmQ/ay5zcGxpY2UoZCwxKTprLnB1c2goZSk7cmV0dXJuIGc9ay5qb2luKCIgIiksaiE9ZyYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZyksdGhpc319KSxkLnBsdWdpbihmdW5jdGlvbihhLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gaChhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuK2IudG9GaXhlZCgzKSthfX12YXIgaT17IisiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYn0sIi0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0sIi8iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEvYn0sIioiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEqYn19LGo9U3RyaW5nLGs9L1thLXpdKyQvaSxsPS9eXHMqKFsrXC1cLypdKVxzKj1ccyooW1xkLmVFK1wtXSspXHMqKFteXGRcc10rKT9ccyokLztiLm9uKCJzbmFwLnV0aWwuYXR0ciIsZnVuY3Rpb24oYSl7dmFyIGM9aihhKS5tYXRjaChsKTtpZihjKXt2YXIgZD1iLm50KCksZT1kLnN1YnN0cmluZyhkLmxhc3RJbmRleE9mKCIuIikrMSksZj10aGlzLmF0dHIoZSksZz17fTtiLnN0b3AoKTt2YXIgaD1jWzNdfHwiIixtPWYubWF0Y2goayksbj1pW2NbMV1dO2lmKG0mJm09PWg/YT1uKHBhcnNlRmxvYXQoZiksK2NbMl0pOihmPXRoaXMuYXNQWChlKSxhPW4odGhpcy5hc1BYKGUpLHRoaXMuYXNQWChlLGNbMl0raCkpKSxpc05hTihmKXx8aXNOYU4oYSkpcmV0dXJuO2dbZV09YSx0aGlzLmF0dHIoZyl9fSkoLTEwKSxiLm9uKCJzbmFwLnV0aWwuZXF1YWwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9aih0aGlzLmF0dHIoYSl8fCIiKSxlPWooYykubWF0Y2gobCk7aWYoZSl7Yi5zdG9wKCk7dmFyIGY9ZVszXXx8IiIsbT1kLm1hdGNoKGspLG49aVtlWzFdXTtyZXR1cm4gbSYmbT09Zj97ZnJvbTpwYXJzZUZsb2F0KGQpLHRvOm4ocGFyc2VGbG9hdChkKSwrZVsyXSksZjpoKG0pfTooZD10aGlzLmFzUFgoYSkse2Zyb206ZCx0bzpuKGQsdGhpcy5hc1BYKGEsZVsyXStmKSksZjpnfSl9fSkoLTEwKX0pLGQucGx1Z2luKGZ1bmN0aW9uKGMsZCxlLGYsZyl7dmFyIGg9ZS5wcm90b3R5cGUsaT1jLmlzO2gucmVjdD1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc7cmV0dXJuIG51bGw9PWYmJihmPWUpLGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2c9YTpudWxsIT1hJiYoZz17eDphLHk6Yix3aWR0aDpjLGhlaWdodDpkfSxudWxsIT1lJiYoZy5yeD1lLGcucnk9ZikpLHRoaXMuZWwoInJlY3QiLGcpfSxoLmNpcmNsZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2Q9YTpudWxsIT1hJiYoZD17Y3g6YSxjeTpiLHI6Y30pLHRoaXMuZWwoImNpcmNsZSIsZCl9O3ZhciBqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKX1yZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD1mLmRvYy5jcmVhdGVFbGVtZW50KCJpbWciKSxlPWYuZG9jLmJvZHk7ZC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW0iLGQub25sb2FkPWZ1bmN0aW9uKCl7Yy5jYWxsKGQpLGQub25sb2FkPWQub25lcnJvcj1udWxsLGUucmVtb3ZlQ2hpbGQoZCl9LGQub25lcnJvcj1hLGUuYXBwZW5kQ2hpbGQoZCksZC5zcmM9Yn19KCk7aC5pbWFnZT1mdW5jdGlvbihhLGIsZCxlLGYpe3ZhciBnPXRoaXMuZWwoImltYWdlIik7aWYoaShhLCJvYmplY3QiKSYmInNyYyJpbiBhKWcuYXR0cihhKTtlbHNlIGlmKG51bGwhPWEpe3ZhciBoPXsieGxpbms6aHJlZiI6YSxwcmVzZXJ2ZUFzcGVjdFJhdGlvOiJub25lIn07bnVsbCE9YiYmbnVsbCE9ZCYmKGgueD1iLGgueT1kKSxudWxsIT1lJiZudWxsIT1mPyhoLndpZHRoPWUsaC5oZWlnaHQ9Zik6aihhLGZ1bmN0aW9uKCl7Yy5fLiQoZy5ub2RlLHt3aWR0aDp0aGlzLm9mZnNldFdpZHRoLGhlaWdodDp0aGlzLm9mZnNldEhlaWdodH0pfSksYy5fLiQoZy5ub2RlLGgpfXJldHVybiBnfSxoLmVsbGlwc2U9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU7cmV0dXJuIGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2U9YTpudWxsIT1hJiYoZT17Y3g6YSxjeTpiLHJ4OmMscnk6ZH0pLHRoaXMuZWwoImVsbGlwc2UiLGUpfSxoLnBhdGg9ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGkoYSwib2JqZWN0IikmJiFpKGEsImFycmF5Iik/Yj1hOmEmJihiPXtkOmF9KSx0aGlzLmVsKCJwYXRoIixiKX0saC5ncm91cD1oLmc9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbCgiZyIpO3JldHVybiAxPT1hcmd1bWVudHMubGVuZ3RoJiZhJiYhYS50eXBlP2IuYXR0cihhKTphcmd1bWVudHMubGVuZ3RoJiZiLmFkZChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpLGJ9LGguc3ZnPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dmFyIGo9e307cmV0dXJuIGkoYSwib2JqZWN0IikmJm51bGw9PWI/aj1hOihudWxsIT1hJiYoai54PWEpLG51bGwhPWImJihqLnk9YiksbnVsbCE9YyYmKGoud2lkdGg9YyksbnVsbCE9ZCYmKGouaGVpZ2h0PWQpLG51bGwhPWUmJm51bGwhPWYmJm51bGwhPWcmJm51bGwhPWgmJihqLnZpZXdCb3g9W2UsZixnLGhdKSksdGhpcy5lbCgic3ZnIixqKX0saC5tYXNrPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWwoIm1hc2siKTtyZXR1cm4gMT09YXJndW1lbnRzLmxlbmd0aCYmYSYmIWEudHlwZT9iLmF0dHIoYSk6YXJndW1lbnRzLmxlbmd0aCYmYi5hZGQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKSxifSxoLnB0cm49ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtpZihpKGEsIm9iamVjdCIpKXZhciBqPWE7ZWxzZSBqPXtwYXR0ZXJuVW5pdHM6InVzZXJTcGFjZU9uVXNlIn0sYSYmKGoueD1hKSxiJiYoai55PWIpLG51bGwhPWMmJihqLndpZHRoPWMpLG51bGwhPWQmJihqLmhlaWdodD1kKSxudWxsIT1lJiZudWxsIT1mJiZudWxsIT1nJiZudWxsIT1oP2oudmlld0JveD1bZSxmLGcsaF06ai52aWV3Qm94PVthfHwwLGJ8fDAsY3x8MCxkfHwwXTtyZXR1cm4gdGhpcy5lbCgicGF0dGVybiIsail9LGgudXNlPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hPyhhIGluc3RhbmNlb2YgZCYmKGEuYXR0cigiaWQiKXx8YS5hdHRyKHtpZDpjLl8uaWQoYSl9KSxhPWEuYXR0cigiaWQiKSksIiMiPT1TdHJpbmcoYSkuY2hhckF0KCkmJihhPWEuc3Vic3RyaW5nKDEpKSx0aGlzLmVsKCJ1c2UiLHsieGxpbms6aHJlZiI6IiMiK2F9KSk6ZC5wcm90b3R5cGUudXNlLmNhbGwodGhpcyl9LGguc3ltYm9sPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXt9O3JldHVybiBudWxsIT1hJiZudWxsIT1iJiZudWxsIT1jJiZudWxsIT1kJiYoZS52aWV3Qm94PVthLGIsYyxkXSksdGhpcy5lbCgic3ltYm9sIixlKX0saC50ZXh0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fTtyZXR1cm4gaShhLCJvYmplY3QiKT9kPWE6bnVsbCE9YSYmKGQ9e3g6YSx5OmIsdGV4dDpjfHwiIn0pLHRoaXMuZWwoInRleHQiLGQpfSxoLmxpbmU9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e307cmV0dXJuIGkoYSwib2JqZWN0Iik/ZT1hOm51bGwhPWEmJihlPXt4MTphLHgyOmMseTE6Yix5MjpkfSksdGhpcy5lbCgibGluZSIsZSl9LGgucG9seWxpbmU9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aD4xJiYoYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpO3ZhciBiPXt9O3JldHVybiBpKGEsIm9iamVjdCIpJiYhaShhLCJhcnJheSIpP2I9YTpudWxsIT1hJiYoYj17cG9pbnRzOmF9KSx0aGlzLmVsKCJwb2x5bGluZSIsYil9LGgucG9seWdvbj1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoPjEmJihhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSk7dmFyIGI9e307cmV0dXJuIGkoYSwib2JqZWN0IikmJiFpKGEsImFycmF5Iik/Yj1hOm51bGwhPWEmJihiPXtwb2ludHM6YX0pLHRoaXMuZWwoInBvbHlnb24iLGIpfSxmdW5jdGlvbigpe2Z1bmN0aW9uIGQoKXtyZXR1cm4gdGhpcy5zZWxlY3RBbGwoInN0b3AiKX1mdW5jdGlvbiBlKGEsYil7dmFyIGQ9bCgic3RvcCIpLGU9e29mZnNldDorYisiJSJ9O2E9Yy5jb2xvcihhKSxlWyJzdG9wLWNvbG9yIl09YS5oZXgsYS5vcGFjaXR5PDEmJihlWyJzdG9wLW9wYWNpdHkiXT1hLm9wYWNpdHkpLGwoZCxlKTtmb3IodmFyIGYsZz10aGlzLnN0b3BzKCksaD0wO2g8Zy5sZW5ndGg7aCsrKXt2YXIgaT1wYXJzZUZsb2F0KGdbaF0uYXR0cigib2Zmc2V0IikpO2lmKGk+Yil7dGhpcy5ub2RlLmluc2VydEJlZm9yZShkLGdbaF0ubm9kZSksZj0hMDticmVha319cmV0dXJuIGZ8fHRoaXMubm9kZS5hcHBlbmRDaGlsZChkKSx0aGlzfWZ1bmN0aW9uIGYoKXtpZigibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGUpe3ZhciBhPWwodGhpcy5ub2RlLCJ4MSIpfHwwLGI9bCh0aGlzLm5vZGUsIngyIil8fDEsZD1sKHRoaXMubm9kZSwieTEiKXx8MCxlPWwodGhpcy5ub2RlLCJ5MiIpfHwwO3JldHVybiBjLl8uYm94KGEsZCxtYXRoLmFicyhiLWEpLG1hdGguYWJzKGUtZCkpfXZhciBmPXRoaXMubm9kZS5jeHx8LjUsZz10aGlzLm5vZGUuY3l8fC41LGg9dGhpcy5ub2RlLnJ8fDA7cmV0dXJuIGMuXy5ib3goZi1oLGctaCwyKmgsMipoKX1mdW5jdGlvbiBnKGEpe3ZhciBkPWEsZT10aGlzLnN0b3BzKCk7aWYoInN0cmluZyI9PXR5cGVvZiBhJiYoZD1iKCJzbmFwLnV0aWwuZ3JhZC5wYXJzZSIsbnVsbCwibCgwLDAsMCwxKSIrYSkuZmlyc3REZWZpbmVkKCkuc3RvcHMpLGMuaXMoZCwiYXJyYXkiKSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZFtmXSl7dmFyIGc9Yy5jb2xvcihkW2ZdLmNvbG9yKSxoPXtvZmZzZXQ6ZFtmXS5vZmZzZXQrIiUifTtoWyJzdG9wLWNvbG9yIl09Zy5oZXgsZy5vcGFjaXR5PDEmJihoWyJzdG9wLW9wYWNpdHkiXT1nLm9wYWNpdHkpLGVbZl0uYXR0cihoKX1lbHNlIGVbZl0ucmVtb3ZlKCk7Zm9yKGY9ZS5sZW5ndGg7ZjxkLmxlbmd0aDtmKyspdGhpcy5hZGRTdG9wKGRbZl0uY29sb3IsZFtmXS5vZmZzZXQpO3JldHVybiB0aGlzfX1mdW5jdGlvbiBpKGEsYyl7dmFyIGQsZT1iKCJzbmFwLnV0aWwuZ3JhZC5wYXJzZSIsbnVsbCxjKS5maXJzdERlZmluZWQoKTtpZighZSlyZXR1cm4gbnVsbDtlLnBhcmFtcy51bnNoaWZ0KGEpLGQ9ImwiPT1lLnR5cGUudG9Mb3dlckNhc2UoKT9qLmFwcGx5KDAsZS5wYXJhbXMpOmsuYXBwbHkoMCxlLnBhcmFtcyksZS50eXBlIT1lLnR5cGUudG9Mb3dlckNhc2UoKSYmbChkLm5vZGUse2dyYWRpZW50VW5pdHM6InVzZXJTcGFjZU9uVXNlIn0pO2Zvcih2YXIgZj1lLnN0b3BzLGc9Zi5sZW5ndGgsaD0wO2c+aDtoKyspe3ZhciBpPWZbaF07ZC5hZGRTdG9wKGkuY29sb3IsaS5vZmZzZXQpfXJldHVybiBkfWZ1bmN0aW9uIGooYSxiLGgsaSxqKXt2YXIgaz1jLl8ubWFrZSgibGluZWFyR3JhZGllbnQiLGEpO3JldHVybiBrLnN0b3BzPWQsay5hZGRTdG9wPWUsay5nZXRCQm94PWYsay5zZXRTdG9wcz1nLG51bGwhPWImJmwoay5ub2RlLHt4MTpiLHkxOmgseDI6aSx5MjpqfSksa31mdW5jdGlvbiBrKGEsYixnLGgsaSxqKXt2YXIgaz1jLl8ubWFrZSgicmFkaWFsR3JhZGllbnQiLGEpO3JldHVybiBrLnN0b3BzPWQsay5hZGRTdG9wPWUsay5nZXRCQm94PWYsbnVsbCE9YiYmbChrLm5vZGUse2N4OmIsY3k6ZyxyOmh9KSxudWxsIT1pJiZudWxsIT1qJiZsKGsubm9kZSx7Zng6aSxmeTpqfSksa312YXIgbD1jLl8uJDtoLmdyYWRpZW50PWZ1bmN0aW9uKGEpe3JldHVybiBpKHRoaXMuZGVmcyxhKX0saC5ncmFkaWVudExpbmVhcj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gaih0aGlzLmRlZnMsYSxiLGMsZCl9LGguZ3JhZGllbnRSYWRpYWw9ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gayh0aGlzLmRlZnMsYSxiLGMsZCxlKX0saC50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5ub2RlLm93bmVyRG9jdW1lbnQsZD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxlPWIuY3JlYXRlRWxlbWVudCgiZGl2IiksZj10aGlzLm5vZGUuY2xvbmVOb2RlKCEwKTtyZXR1cm4gZC5hcHBlbmRDaGlsZChlKSxlLmFwcGVuZENoaWxkKGYpLGMuXy4kKGYse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyJ9KSxhPWUuaW5uZXJIVE1MLGQucmVtb3ZlQ2hpbGQoZC5maXJzdENoaWxkKSxhfSxoLnRvRGF0YVVSTD1mdW5jdGlvbigpe3JldHVybiBhJiZhLmJ0b2E/ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsIitidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudCh0aGlzKSkpOnZvaWQgMH0saC5jbGVhcj1mdW5jdGlvbigpe2Zvcih2YXIgYSxiPXRoaXMubm9kZS5maXJzdENoaWxkO2I7KWE9Yi5uZXh0U2libGluZywiZGVmcyIhPWIudGFnTmFtZT9iLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik6aC5jbGVhci5jYWxsKHtub2RlOmJ9KSxiPWF9fSgpfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1lLnBzPWUucHN8fHt9O3JldHVybiBiW2FdP2JbYV0uc2xlZXA9MTAwOmJbYV09e3NsZWVwOjEwMH0sc2V0VGltZW91dChmdW5jdGlvbigpe2Zvcih2YXIgYyBpbiBiKWJbTV0oYykmJmMhPWEmJihiW2NdLnNsZWVwLS0sIWJbY10uc2xlZXAmJmRlbGV0ZSBiW2NdKX0pLGJbYV19ZnVuY3Rpb24gZihhLGIsYyxkKXtyZXR1cm4gbnVsbD09YSYmKGE9Yj1jPWQ9MCksbnVsbD09YiYmKGI9YS55LGM9YS53aWR0aCxkPWEuaGVpZ2h0LGE9YS54KSx7eDphLHk6Yix3aWR0aDpjLHc6YyxoZWlnaHQ6ZCxoOmQseDI6YStjLHkyOmIrZCxjeDphK2MvMixjeTpiK2QvMixyMTpQLm1pbihjLGQpLzIscjI6UC5tYXgoYyxkKS8yLHIwOlAuc3FydChjKmMrZCpkKS8yLHBhdGg6eShhLGIsYyxkKSx2YjpbYSxiLGMsZF0uam9pbigiICIpfX1mdW5jdGlvbiBnKCl7cmV0dXJuIHRoaXMuam9pbigiLCIpLnJlcGxhY2UoTiwiJDEiKX1mdW5jdGlvbiBoKGEpe3ZhciBiPUwoYSk7cmV0dXJuIGIudG9TdHJpbmc9ZyxifWZ1bmN0aW9uIGkoYSxiLGMsZCxlLGYsZyxoLGkpe3JldHVybiBudWxsPT1pP3AoYSxiLGMsZCxlLGYsZyxoKTprKGEsYixjLGQsZSxmLGcsaCxxKGEsYixjLGQsZSxmLGcsaCxpKSl9ZnVuY3Rpb24gaihjLGQpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuKygrYSkudG9GaXhlZCgzKX1yZXR1cm4gYS5fLmNhY2hlcihmdW5jdGlvbihhLGYsZyl7YSBpbnN0YW5jZW9mIGImJihhPWEuYXR0cigiZCIpKSxhPUcoYSk7Zm9yKHZhciBoLGosbCxtLG4sbz0iIixwPXt9LHE9MCxyPTAscz1hLmxlbmd0aDtzPnI7cisrKXtpZihsPWFbcl0sIk0iPT1sWzBdKWg9K2xbMV0saj0rbFsyXTtlbHNle2lmKG09aShoLGosbFsxXSxsWzJdLGxbM10sbFs0XSxsWzVdLGxbNl0pLHErbT5mKXtpZihkJiYhcC5zdGFydCl7aWYobj1pKGgsaixsWzFdLGxbMl0sbFszXSxsWzRdLGxbNV0sbFs2XSxmLXEpLG8rPVsiQyIrZShuLnN0YXJ0LngpLGUobi5zdGFydC55KSxlKG4ubS54KSxlKG4ubS55KSxlKG4ueCksZShuLnkpXSxnKXJldHVybiBvO3Auc3RhcnQ9byxvPVsiTSIrZShuLngpLGUobi55KSsiQyIrZShuLm4ueCksZShuLm4ueSksZShuLmVuZC54KSxlKG4uZW5kLnkpLGUobFs1XSksZShsWzZdKV0uam9pbigpLHErPW0saD0rbFs1XSxqPStsWzZdO2NvbnRpbnVlfWlmKCFjJiYhZClyZXR1cm4gbj1pKGgsaixsWzFdLGxbMl0sbFszXSxsWzRdLGxbNV0sbFs2XSxmLXEpfXErPW0saD0rbFs1XSxqPStsWzZdfW8rPWwuc2hpZnQoKStsfXJldHVybiBwLmVuZD1vLG49Yz9xOmQ/cDprKGgsaixsWzBdLGxbMV0sbFsyXSxsWzNdLGxbNF0sbFs1XSwxKX0sbnVsbCxhLl8uY2xvbmUpfWZ1bmN0aW9uIGsoYSxiLGMsZCxlLGYsZyxoLGkpe3ZhciBqPTEtaSxrPVQoaiwzKSxsPVQoaiwyKSxtPWkqaSxuPW0qaSxvPWsqYSszKmwqaSpjKzMqaippKmkqZStuKmcscD1rKmIrMypsKmkqZCszKmoqaSppKmYrbipoLHE9YSsyKmkqKGMtYSkrbSooZS0yKmMrYSkscj1iKzIqaSooZC1iKSttKihmLTIqZCtiKSxzPWMrMippKihlLWMpK20qKGctMiplK2MpLHQ9ZCsyKmkqKGYtZCkrbSooaC0yKmYrZCksdT1qKmEraSpjLHY9aipiK2kqZCx3PWoqZStpKmcseD1qKmYraSpoLHk9OTAtMTgwKlAuYXRhbjIocS1zLHItdCkvUTtyZXR1cm57eDpvLHk6cCxtOnt4OnEseTpyfSxuOnt4OnMseTp0fSxzdGFydDp7eDp1LHk6dn0sZW5kOnt4OncseTp4fSxhbHBoYTp5fX1mdW5jdGlvbiBsKGIsYyxkLGUsZyxoLGksail7YS5pcyhiLCJhcnJheSIpfHwoYj1bYixjLGQsZSxnLGgsaSxqXSk7dmFyIGs9Ri5hcHBseShudWxsLGIpO3JldHVybiBmKGsubWluLngsay5taW4ueSxrLm1heC54LWsubWluLngsay5tYXgueS1rLm1pbi55KX1mdW5jdGlvbiBtKGEsYixjKXtyZXR1cm4gYj49YS54JiZiPD1hLngrYS53aWR0aCYmYz49YS55JiZjPD1hLnkrYS5oZWlnaHR9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPWYoYSksYj1mKGIpLG0oYixhLngsYS55KXx8bShiLGEueDIsYS55KXx8bShiLGEueCxhLnkyKXx8bShiLGEueDIsYS55Mil8fG0oYSxiLngsYi55KXx8bShhLGIueDIsYi55KXx8bShhLGIueCxiLnkyKXx8bShhLGIueDIsYi55Mil8fChhLng8Yi54MiYmYS54PmIueHx8Yi54PGEueDImJmIueD5hLngpJiYoYS55PGIueTImJmEueT5iLnl8fGIueTxhLnkyJiZiLnk+YS55KX1mdW5jdGlvbiBvKGEsYixjLGQsZSl7dmFyIGY9LTMqYis5KmMtOSpkKzMqZSxnPWEqZis2KmItMTIqYys2KmQ7cmV0dXJuIGEqZy0zKmIrMypjfWZ1bmN0aW9uIHAoYSxiLGMsZCxlLGYsZyxoLGkpe251bGw9PWkmJihpPTEpLGk9aT4xPzE6MD5pPzA6aTtmb3IodmFyIGo9aS8yLGs9MTIsbD1bLS4xMjUyLC4xMjUyLC0uMzY3OCwuMzY3OCwtLjU4NzMsLjU4NzMsLS43Njk5LC43Njk5LC0uOTA0MSwuOTA0MSwtLjk4MTYsLjk4MTZdLG09Wy4yNDkxLC4yNDkxLC4yMzM1LC4yMzM1LC4yMDMyLC4yMDMyLC4xNjAxLC4xNjAxLC4xMDY5LC4xMDY5LC4wNDcyLC4wNDcyXSxuPTAscD0wO2s+cDtwKyspe3ZhciBxPWoqbFtwXStqLHI9byhxLGEsYyxlLGcpLHM9byhxLGIsZCxmLGgpLHQ9cipyK3MqcztuKz1tW3BdKlAuc3FydCh0KX1yZXR1cm4gaipufWZ1bmN0aW9uIHEoYSxiLGMsZCxlLGYsZyxoLGkpe2lmKCEoMD5pfHxwKGEsYixjLGQsZSxmLGcsaCk8aSkpe3ZhciBqLGs9MSxsPWsvMixtPWstbCxuPS4wMTtmb3Ioaj1wKGEsYixjLGQsZSxmLGcsaCxtKTtVKGotaSk+bjspbC89MixtKz0oaT5qPzE6LTEpKmwsaj1wKGEsYixjLGQsZSxmLGcsaCxtKTtyZXR1cm4gbX19ZnVuY3Rpb24gcihhLGIsYyxkLGUsZixnLGgpe2lmKCEoUyhhLGMpPFIoZSxnKXx8UihhLGMpPlMoZSxnKXx8UyhiLGQpPFIoZixoKXx8UihiLGQpPlMoZixoKSkpe3ZhciBpPShhKmQtYipjKSooZS1nKS0oYS1jKSooZSpoLWYqZyksaj0oYSpkLWIqYykqKGYtaCktKGItZCkqKGUqaC1mKmcpLGs9KGEtYykqKGYtaCktKGItZCkqKGUtZyk7aWYoayl7dmFyIGw9aS9rLG09ai9rLG49K2wudG9GaXhlZCgyKSxvPSttLnRvRml4ZWQoMik7aWYoIShuPCtSKGEsYykudG9GaXhlZCgyKXx8bj4rUyhhLGMpLnRvRml4ZWQoMil8fG48K1IoZSxnKS50b0ZpeGVkKDIpfHxuPitTKGUsZykudG9GaXhlZCgyKXx8bzwrUihiLGQpLnRvRml4ZWQoMil8fG8+K1MoYixkKS50b0ZpeGVkKDIpfHxvPCtSKGYsaCkudG9GaXhlZCgyKXx8bz4rUyhmLGgpLnRvRml4ZWQoMikpKXJldHVybnt4OmwseTptfX19fWZ1bmN0aW9uIHMoYSxiLGMpe3ZhciBkPWwoYSksZT1sKGIpO2lmKCFuKGQsZSkpcmV0dXJuIGM/MDpbXTtmb3IodmFyIGY9cC5hcHBseSgwLGEpLGc9cC5hcHBseSgwLGIpLGg9fn4oZi84KSxpPX5+KGcvOCksaj1bXSxtPVtdLG89e30scT1jPzA6W10scz0wO2grMT5zO3MrKyl7dmFyIHQ9ay5hcHBseSgwLGEuY29uY2F0KHMvaCkpO2oucHVzaCh7eDp0LngseTp0LnksdDpzL2h9KX1mb3Iocz0wO2krMT5zO3MrKyl0PWsuYXBwbHkoMCxiLmNvbmNhdChzL2kpKSxtLnB1c2goe3g6dC54LHk6dC55LHQ6cy9pfSk7Zm9yKHM9MDtoPnM7cysrKWZvcih2YXIgdT0wO2k+dTt1Kyspe3ZhciB2PWpbc10sdz1qW3MrMV0seD1tW3VdLHk9bVt1KzFdLHo9VSh3Lngtdi54KTwuMDAxPyJ5IjoieCIsQT1VKHkueC14LngpPC4wMDE/InkiOiJ4IixCPXIodi54LHYueSx3Lngsdy55LHgueCx4LnkseS54LHkueSk7aWYoQil7aWYob1tCLngudG9GaXhlZCg0KV09PUIueS50b0ZpeGVkKDQpKWNvbnRpbnVlO29bQi54LnRvRml4ZWQoNCldPUIueS50b0ZpeGVkKDQpO3ZhciBDPXYudCtVKChCW3pdLXZbel0pLyh3W3pdLXZbel0pKSoody50LXYudCksRD14LnQrVSgoQltBXS14W0FdKS8oeVtBXS14W0FdKSkqKHkudC14LnQpO0M+PTAmJjE+PUMmJkQ+PTAmJjE+PUQmJihjP3ErKzpxLnB1c2goe3g6Qi54LHk6Qi55LHQxOkMsdDI6RH0pKX19cmV0dXJuIHF9ZnVuY3Rpb24gdChhLGIpe3JldHVybiB2KGEsYil9ZnVuY3Rpb24gdShhLGIpe3JldHVybiB2KGEsYiwxKX1mdW5jdGlvbiB2KGEsYixjKXthPUcoYSksYj1HKGIpO2Zvcih2YXIgZCxlLGYsZyxoLGksaixrLGwsbSxuPWM/MDpbXSxvPTAscD1hLmxlbmd0aDtwPm87bysrKXt2YXIgcT1hW29dO2lmKCJNIj09cVswXSlkPWg9cVsxXSxlPWk9cVsyXTtlbHNleyJDIj09cVswXT8obD1bZCxlXS5jb25jYXQocS5zbGljZSgxKSksZD1sWzZdLGU9bFs3XSk6KGw9W2QsZSxkLGUsaCxpLGgsaV0sZD1oLGU9aSk7Zm9yKHZhciByPTAsdD1iLmxlbmd0aDt0PnI7cisrKXt2YXIgdT1iW3JdO2lmKCJNIj09dVswXSlmPWo9dVsxXSxnPWs9dVsyXTtlbHNleyJDIj09dVswXT8obT1bZixnXS5jb25jYXQodS5zbGljZSgxKSksZj1tWzZdLGc9bVs3XSk6KG09W2YsZyxmLGcsaixrLGosa10sZj1qLGc9ayk7dmFyIHY9cyhsLG0sYyk7aWYoYyluKz12O2Vsc2V7Zm9yKHZhciB3PTAseD12Lmxlbmd0aDt4Pnc7dysrKXZbd10uc2VnbWVudDE9byx2W3ddLnNlZ21lbnQyPXIsdlt3XS5iZXoxPWwsdlt3XS5iZXoyPW07bj1uLmNvbmNhdCh2KX19fX19cmV0dXJuIG59ZnVuY3Rpb24gdyhhLGIsYyl7dmFyIGQ9eChhKTtyZXR1cm4gbShkLGIsYykmJnYoYSxbWyJNIixiLGNdLFsiSCIsZC54MisxMF1dLDEpJTI9PTF9ZnVuY3Rpb24geChhKXt2YXIgYj1lKGEpO2lmKGIuYmJveClyZXR1cm4gTChiLmJib3gpO2lmKCFhKXJldHVybiBmKCk7YT1HKGEpO2Zvcih2YXIgYyxkPTAsZz0wLGg9W10saT1bXSxqPTAsaz1hLmxlbmd0aDtrPmo7aisrKWlmKGM9YVtqXSwiTSI9PWNbMF0pZD1jWzFdLGc9Y1syXSxoLnB1c2goZCksaS5wdXNoKGcpO2Vsc2V7dmFyIGw9RihkLGcsY1sxXSxjWzJdLGNbM10sY1s0XSxjWzVdLGNbNl0pO2g9aC5jb25jYXQobC5taW4ueCxsLm1heC54KSxpPWkuY29uY2F0KGwubWluLnksbC5tYXgueSksZD1jWzVdLGc9Y1s2XX12YXIgbT1SLmFwcGx5KDAsaCksbj1SLmFwcGx5KDAsaSksbz1TLmFwcGx5KDAsaCkscD1TLmFwcGx5KDAsaSkscT1mKG0sbixvLW0scC1uKTtyZXR1cm4gYi5iYm94PUwocSkscX1mdW5jdGlvbiB5KGEsYixjLGQsZSl7aWYoZSlyZXR1cm5bWyJNIiwrYSsgK2UsYl0sWyJsIixjLTIqZSwwXSxbImEiLGUsZSwwLDAsMSxlLGVdLFsibCIsMCxkLTIqZV0sWyJhIixlLGUsMCwwLDEsLWUsZV0sWyJsIiwyKmUtYywwXSxbImEiLGUsZSwwLDAsMSwtZSwtZV0sWyJsIiwwLDIqZS1kXSxbImEiLGUsZSwwLDAsMSxlLC1lXSxbInoiXV07dmFyIGY9W1siTSIsYSxiXSxbImwiLGMsMF0sWyJsIiwwLGRdLFsibCIsLWMsMF0sWyJ6Il1dO3JldHVybiBmLnRvU3RyaW5nPWcsZn1mdW5jdGlvbiB6KGEsYixjLGQsZSl7aWYobnVsbD09ZSYmbnVsbD09ZCYmKGQ9YyksYT0rYSxiPStiLGM9K2MsZD0rZCxudWxsIT1lKXZhciBmPU1hdGguUEkvMTgwLGg9YStjKk1hdGguY29zKC1kKmYpLGk9YStjKk1hdGguY29zKC1lKmYpLGo9YitjKk1hdGguc2luKC1kKmYpLGs9YitjKk1hdGguc2luKC1lKmYpLGw9W1siTSIsaCxqXSxbIkEiLGMsYywwLCsoZS1kPjE4MCksMCxpLGtdXTtlbHNlIGw9W1siTSIsYSxiXSxbIm0iLDAsLWRdLFsiYSIsYyxkLDAsMSwxLDAsMipkXSxbImEiLGMsZCwwLDEsMSwwLC0yKmRdLFsieiJdXTtyZXR1cm4gbC50b1N0cmluZz1nLGx9ZnVuY3Rpb24gQShiKXt2YXIgYz1lKGIpLGQ9U3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZTtpZihjLnJlbClyZXR1cm4gaChjLnJlbCk7YS5pcyhiLCJhcnJheSIpJiZhLmlzKGImJmJbMF0sImFycmF5Iil8fChiPWEucGFyc2VQYXRoU3RyaW5nKGIpKTt2YXIgZj1bXSxpPTAsaj0wLGs9MCxsPTAsbT0wOyJNIj09YlswXVswXSYmKGk9YlswXVsxXSxqPWJbMF1bMl0saz1pLGw9aixtKyssZi5wdXNoKFsiTSIsaSxqXSkpO2Zvcih2YXIgbj1tLG89Yi5sZW5ndGg7bz5uO24rKyl7dmFyIHA9ZltuXT1bXSxxPWJbbl07aWYocVswXSE9ZC5jYWxsKHFbMF0pKXN3aXRjaChwWzBdPWQuY2FsbChxWzBdKSxwWzBdKXtjYXNlImEiOnBbMV09cVsxXSxwWzJdPXFbMl0scFszXT1xWzNdLHBbNF09cVs0XSxwWzVdPXFbNV0scFs2XT0rKHFbNl0taSkudG9GaXhlZCgzKSxwWzddPSsocVs3XS1qKS50b0ZpeGVkKDMpO2JyZWFrO2Nhc2UidiI6cFsxXT0rKHFbMV0taikudG9GaXhlZCgzKTticmVhaztjYXNlIm0iOms9cVsxXSxsPXFbMl07ZGVmYXVsdDpmb3IodmFyIHI9MSxzPXEubGVuZ3RoO3M+cjtyKyspcFtyXT0rKHFbcl0tKHIlMj9pOmopKS50b0ZpeGVkKDMpfWVsc2V7cD1mW25dPVtdLCJtIj09cVswXSYmKGs9cVsxXStpLGw9cVsyXStqKTtmb3IodmFyIHQ9MCx1PXEubGVuZ3RoO3U+dDt0KyspZltuXVt0XT1xW3RdfXZhciB2PWZbbl0ubGVuZ3RoO3N3aXRjaChmW25dWzBdKXtjYXNlInoiOmk9ayxqPWw7YnJlYWs7Y2FzZSJoIjppKz0rZltuXVt2LTFdO2JyZWFrO2Nhc2UidiI6ais9K2Zbbl1bdi0xXTticmVhaztkZWZhdWx0OmkrPStmW25dW3YtMl0sais9K2Zbbl1bdi0xXX19cmV0dXJuIGYudG9TdHJpbmc9ZyxjLnJlbD1oKGYpLGZ9ZnVuY3Rpb24gQihiKXt2YXIgYz1lKGIpO2lmKGMuYWJzKXJldHVybiBoKGMuYWJzKTtpZihLKGIsImFycmF5IikmJksoYiYmYlswXSwiYXJyYXkiKXx8KGI9YS5wYXJzZVBhdGhTdHJpbmcoYikpLCFifHwhYi5sZW5ndGgpcmV0dXJuW1siTSIsMCwwXV07dmFyIGQsZj1bXSxpPTAsaj0wLGs9MCxsPTAsbT0wOyJNIj09YlswXVswXSYmKGk9K2JbMF1bMV0saj0rYlswXVsyXSxrPWksbD1qLG0rKyxmWzBdPVsiTSIsaSxqXSk7Zm9yKHZhciBuLG8scD0zPT1iLmxlbmd0aCYmIk0iPT1iWzBdWzBdJiYiUiI9PWJbMV1bMF0udG9VcHBlckNhc2UoKSYmIloiPT1iWzJdWzBdLnRvVXBwZXJDYXNlKCkscT1tLHI9Yi5sZW5ndGg7cj5xO3ErKyl7aWYoZi5wdXNoKG49W10pLG89YltxXSxkPW9bMF0sZCE9ZC50b1VwcGVyQ2FzZSgpKXN3aXRjaChuWzBdPWQudG9VcHBlckNhc2UoKSxuWzBdKXtjYXNlIkEiOm5bMV09b1sxXSxuWzJdPW9bMl0sblszXT1vWzNdLG5bNF09b1s0XSxuWzVdPW9bNV0sbls2XT0rb1s2XStpLG5bN109K29bN10rajticmVhaztjYXNlIlYiOm5bMV09K29bMV0rajticmVhaztjYXNlIkgiOm5bMV09K29bMV0raTticmVhaztjYXNlIlIiOmZvcih2YXIgcz1baSxqXS5jb25jYXQoby5zbGljZSgxKSksdD0yLHU9cy5sZW5ndGg7dT50O3QrKylzW3RdPStzW3RdK2ksc1srK3RdPStzW3RdK2o7Zi5wb3AoKSxmPWYuY29uY2F0KEkocyxwKSk7YnJlYWs7Y2FzZSJPIjpmLnBvcCgpLHM9eihpLGosb1sxXSxvWzJdKSxzLnB1c2goc1swXSksZj1mLmNvbmNhdChzKTticmVhaztjYXNlIlUiOmYucG9wKCksZj1mLmNvbmNhdCh6KGksaixvWzFdLG9bMl0sb1szXSkpLG49WyJVIl0uY29uY2F0KGZbZi5sZW5ndGgtMV0uc2xpY2UoLTIpKTticmVhaztjYXNlIk0iOms9K29bMV0raSxsPStvWzJdK2o7ZGVmYXVsdDpmb3IodD0xLHU9by5sZW5ndGg7dT50O3QrKyluW3RdPStvW3RdKyh0JTI/aTpqKX1lbHNlIGlmKCJSIj09ZClzPVtpLGpdLmNvbmNhdChvLnNsaWNlKDEpKSxmLnBvcCgpLGY9Zi5jb25jYXQoSShzLHApKSxuPVsiUiJdLmNvbmNhdChvLnNsaWNlKC0yKSk7ZWxzZSBpZigiTyI9PWQpZi5wb3AoKSxzPXooaSxqLG9bMV0sb1syXSkscy5wdXNoKHNbMF0pLGY9Zi5jb25jYXQocyk7ZWxzZSBpZigiVSI9PWQpZi5wb3AoKSxmPWYuY29uY2F0KHooaSxqLG9bMV0sb1syXSxvWzNdKSksbj1bIlUiXS5jb25jYXQoZltmLmxlbmd0aC0xXS5zbGljZSgtMikpO2Vsc2UgZm9yKHZhciB2PTAsdz1vLmxlbmd0aDt3PnY7disrKW5bdl09b1t2XTtpZihkPWQudG9VcHBlckNhc2UoKSwiTyIhPWQpc3dpdGNoKG5bMF0pe2Nhc2UiWiI6aT0rayxqPStsO2JyZWFrO2Nhc2UiSCI6aT1uWzFdO2JyZWFrO2Nhc2UiViI6aj1uWzFdO2JyZWFrO2Nhc2UiTSI6az1uW24ubGVuZ3RoLTJdLGw9bltuLmxlbmd0aC0xXTtkZWZhdWx0Omk9bltuLmxlbmd0aC0yXSxqPW5bbi5sZW5ndGgtMV19fXJldHVybiBmLnRvU3RyaW5nPWcsYy5hYnM9aChmKSxmfWZ1bmN0aW9uIEMoYSxiLGMsZCl7cmV0dXJuW2EsYixjLGQsYyxkXX1mdW5jdGlvbiBEKGEsYixjLGQsZSxmKXt2YXIgZz0xLzMsaD0yLzM7cmV0dXJuW2cqYStoKmMsZypiK2gqZCxnKmUraCpjLGcqZitoKmQsZSxmXX1mdW5jdGlvbiBFKGIsYyxkLGUsZixnLGgsaSxqLGspe3ZhciBsLG09MTIwKlEvMTgwLG49US8xODAqKCtmfHwwKSxvPVtdLHA9YS5fLmNhY2hlcihmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSpQLmNvcyhjKS1iKlAuc2luKGMpLGU9YSpQLnNpbihjKStiKlAuY29zKGMpO3JldHVybnt4OmQseTplfX0pO2lmKCFkfHwhZSlyZXR1cm5bYixjLGksaixpLGpdO2lmKGspeT1rWzBdLHo9a1sxXSx3PWtbMl0seD1rWzNdO2Vsc2V7bD1wKGIsYywtbiksYj1sLngsYz1sLnksbD1wKGksaiwtbiksaT1sLngsaj1sLnk7dmFyIHE9KFAuY29zKFEvMTgwKmYpLFAuc2luKFEvMTgwKmYpLChiLWkpLzIpLHI9KGMtaikvMixzPXEqcS8oZCpkKStyKnIvKGUqZSk7cz4xJiYocz1QLnNxcnQocyksZD1zKmQsZT1zKmUpO3ZhciB0PWQqZCx1PWUqZSx2PShnPT1oPy0xOjEpKlAuc3FydChVKCh0KnUtdCpyKnItdSpxKnEpLyh0KnIqcit1KnEqcSkpKSx3PXYqZCpyL2UrKGIraSkvMix4PXYqLWUqcS9kKyhjK2opLzIseT1QLmFzaW4oKChjLXgpL2UpLnRvRml4ZWQoOSkpLHo9UC5hc2luKCgoai14KS9lKS50b0ZpeGVkKDkpKTt5PXc+Yj9RLXk6eSx6PXc+aT9RLXo6eiwwPnkmJih5PTIqUSt5KSwwPnomJih6PTIqUSt6KSxoJiZ5PnomJih5LT0yKlEpLCFoJiZ6PnkmJih6LT0yKlEpfXZhciBBPXoteTtpZihVKEEpPm0pe3ZhciBCPXosQz1pLEQ9ajt6PXkrbSooaCYmej55PzE6LTEpLGk9dytkKlAuY29zKHopLGo9eCtlKlAuc2luKHopLG89RShpLGosZCxlLGYsMCxoLEMsRCxbeixCLHcseF0pfUE9ei15O3ZhciBGPVAuY29zKHkpLEc9UC5zaW4oeSksSD1QLmNvcyh6KSxJPVAuc2luKHopLEo9UC50YW4oQS80KSxLPTQvMypkKkosTD00LzMqZSpKLE09W2IsY10sTj1bYitLKkcsYy1MKkZdLE89W2krSypJLGotTCpIXSxSPVtpLGpdO2lmKE5bMF09MipNWzBdLU5bMF0sTlsxXT0yKk1bMV0tTlsxXSxrKXJldHVybltOLE8sUl0uY29uY2F0KG8pO289W04sTyxSXS5jb25jYXQobykuam9pbigpLnNwbGl0KCIsIik7Zm9yKHZhciBTPVtdLFQ9MCxWPW8ubGVuZ3RoO1Y+VDtUKyspU1tUXT1UJTI/cChvW1QtMV0sb1tUXSxuKS55OnAob1tUXSxvW1QrMV0sbikueDtyZXR1cm4gU31mdW5jdGlvbiBGKGEsYixjLGQsZSxmLGcsaCl7Zm9yKHZhciBpLGosayxsLG0sbixvLHAscT1bXSxyPVtbXSxbXV0scz0wOzI+czsrK3MpaWYoMD09cz8oaj02KmEtMTIqYys2KmUsaT0tMyphKzkqYy05KmUrMypnLGs9MypjLTMqYSk6KGo9NipiLTEyKmQrNipmLGk9LTMqYis5KmQtOSpmKzMqaCxrPTMqZC0zKmIpLFUoaSk8MWUtMTIpe2lmKFUoaik8MWUtMTIpY29udGludWU7bD0tay9qLGw+MCYmMT5sJiZxLnB1c2gobCl9ZWxzZSBvPWoqai00KmsqaSxwPVAuc3FydChvKSwwPm98fChtPSgtaitwKS8oMippKSxtPjAmJjE+bSYmcS5wdXNoKG0pLG49KC1qLXApLygyKmkpLG4+MCYmMT5uJiZxLnB1c2gobikpO2Zvcih2YXIgdCx1PXEubGVuZ3RoLHY9dTt1LS07KWw9cVt1XSx0PTEtbCxyWzBdW3VdPXQqdCp0KmErMyp0KnQqbCpjKzMqdCpsKmwqZStsKmwqbCpnLHJbMV1bdV09dCp0KnQqYiszKnQqdCpsKmQrMyp0KmwqbCpmK2wqbCpsKmg7cmV0dXJuIHJbMF1bdl09YSxyWzFdW3ZdPWIsclswXVt2KzFdPWcsclsxXVt2KzFdPWgsclswXS5sZW5ndGg9clsxXS5sZW5ndGg9disyLHttaW46e3g6Ui5hcHBseSgwLHJbMF0pLHk6Ui5hcHBseSgwLHJbMV0pfSxtYXg6e3g6Uy5hcHBseSgwLHJbMF0pLHk6Uy5hcHBseSgwLHJbMV0pfX19ZnVuY3Rpb24gRyhhLGIpe3ZhciBjPSFiJiZlKGEpO2lmKCFiJiZjLmN1cnZlKXJldHVybiBoKGMuY3VydmUpO2Zvcih2YXIgZD1CKGEpLGY9YiYmQihiKSxnPXt4OjAseTowLGJ4OjAsYnk6MCxYOjAsWTowLHF4Om51bGwscXk6bnVsbH0saT17eDowLHk6MCxieDowLGJ5OjAsWDowLFk6MCxxeDpudWxsLHF5Om51bGx9LGo9KGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKCFhKXJldHVyblsiQyIsYi54LGIueSxiLngsYi55LGIueCxiLnldO3N3aXRjaCghKGFbMF1pbntUOjEsUToxfSkmJihiLnF4PWIucXk9bnVsbCksYVswXSl7Y2FzZSJNIjpiLlg9YVsxXSxiLlk9YVsyXTticmVhaztjYXNlIkEiOmE9WyJDIl0uY29uY2F0KEUuYXBwbHkoMCxbYi54LGIueV0uY29uY2F0KGEuc2xpY2UoMSkpKSk7YnJlYWs7Y2FzZSJTIjoiQyI9PWN8fCJTIj09Yz8oZD0yKmIueC1iLmJ4LGU9MipiLnktYi5ieSk6KGQ9Yi54LGU9Yi55KSxhPVsiQyIsZCxlXS5jb25jYXQoYS5zbGljZSgxKSk7YnJlYWs7Y2FzZSJUIjoiUSI9PWN8fCJUIj09Yz8oYi5xeD0yKmIueC1iLnF4LGIucXk9MipiLnktYi5xeSk6KGIucXg9Yi54LGIucXk9Yi55KSxhPVsiQyJdLmNvbmNhdChEKGIueCxiLnksYi5xeCxiLnF5LGFbMV0sYVsyXSkpO2JyZWFrO2Nhc2UiUSI6Yi5xeD1hWzFdLGIucXk9YVsyXSxhPVsiQyJdLmNvbmNhdChEKGIueCxiLnksYVsxXSxhWzJdLGFbM10sYVs0XSkpO2JyZWFrO2Nhc2UiTCI6YT1bIkMiXS5jb25jYXQoQyhiLngsYi55LGFbMV0sYVsyXSkpO2JyZWFrO2Nhc2UiSCI6YT1bIkMiXS5jb25jYXQoQyhiLngsYi55LGFbMV0sYi55KSk7YnJlYWs7Y2FzZSJWIjphPVsiQyJdLmNvbmNhdChDKGIueCxiLnksYi54LGFbMV0pKTticmVhaztjYXNlIloiOmE9WyJDIl0uY29uY2F0KEMoYi54LGIueSxiLlgsYi5ZKSl9cmV0dXJuIGF9KSxrPWZ1bmN0aW9uKGEsYil7aWYoYVtiXS5sZW5ndGg+Nyl7YVtiXS5zaGlmdCgpO2Zvcih2YXIgYz1hW2JdO2MubGVuZ3RoOyltW2JdPSJBIixmJiYobltiXT0iQSIpLGEuc3BsaWNlKGIrKywwLFsiQyJdLmNvbmNhdChjLnNwbGljZSgwLDYpKSk7YS5zcGxpY2UoYiwxKSxyPVMoZC5sZW5ndGgsZiYmZi5sZW5ndGh8fDApfX0sbD1mdW5jdGlvbihhLGIsYyxlLGcpe2EmJmImJiJNIj09YVtnXVswXSYmIk0iIT1iW2ddWzBdJiYoYi5zcGxpY2UoZywwLFsiTSIsZS54LGUueV0pLGMuYng9MCxjLmJ5PTAsYy54PWFbZ11bMV0sYy55PWFbZ11bMl0scj1TKGQubGVuZ3RoLGYmJmYubGVuZ3RofHwwKSl9LG09W10sbj1bXSxvPSIiLHA9IiIscT0wLHI9UyhkLmxlbmd0aCxmJiZmLmxlbmd0aHx8MCk7cj5xO3ErKyl7ZFtxXSYmKG89ZFtxXVswXSksIkMiIT1vJiYobVtxXT1vLHEmJihwPW1bcS0xXSkpLGRbcV09aihkW3FdLGcscCksIkEiIT1tW3FdJiYiQyI9PW8mJihtW3FdPSJDIiksayhkLHEpLGYmJihmW3FdJiYobz1mW3FdWzBdKSwiQyIhPW8mJihuW3FdPW8scSYmKHA9bltxLTFdKSksZltxXT1qKGZbcV0saSxwKSwiQSIhPW5bcV0mJiJDIj09byYmKG5bcV09IkMiKSxrKGYscSkpLGwoZCxmLGcsaSxxKSxsKGYsZCxpLGcscSk7dmFyIHM9ZFtxXSx0PWYmJmZbcV0sdT1zLmxlbmd0aCx2PWYmJnQubGVuZ3RoO2cueD1zW3UtMl0sZy55PXNbdS0xXSxnLmJ4PU8oc1t1LTRdKXx8Zy54LGcuYnk9TyhzW3UtM10pfHxnLnksaS5ieD1mJiYoTyh0W3YtNF0pfHxpLngpLGkuYnk9ZiYmKE8odFt2LTNdKXx8aS55KSxpLng9ZiYmdFt2LTJdLGkueT1mJiZ0W3YtMV19cmV0dXJuIGZ8fChjLmN1cnZlPWgoZCkpLGY/W2QsZl06ZH1mdW5jdGlvbiBIKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGMsZCxlLGYsZyxoLGk7Zm9yKGE9RyhhKSxlPTAsZz1hLmxlbmd0aDtnPmU7ZSsrKWZvcihpPWFbZV0sZj0xLGg9aS5sZW5ndGg7aD5mO2YrPTIpYz1iLngoaVtmXSxpW2YrMV0pLGQ9Yi55KGlbZl0saVtmKzFdKSxpW2ZdPWMsaVtmKzFdPWQ7cmV0dXJuIGF9ZnVuY3Rpb24gSShhLGIpe2Zvcih2YXIgYz1bXSxkPTAsZT1hLmxlbmd0aDtlLTIqIWI+ZDtkKz0yKXt2YXIgZj1be3g6K2FbZC0yXSx5OithW2QtMV19LHt4OithW2RdLHk6K2FbZCsxXX0se3g6K2FbZCsyXSx5OithW2QrM119LHt4OithW2QrNF0seTorYVtkKzVdfV07Yj9kP2UtND09ZD9mWzNdPXt4OithWzBdLHk6K2FbMV19OmUtMj09ZCYmKGZbMl09e3g6K2FbMF0seTorYVsxXX0sZlszXT17eDorYVsyXSx5OithWzNdfSk6ZlswXT17eDorYVtlLTJdLHk6K2FbZS0xXX06ZS00PT1kP2ZbM109ZlsyXTpkfHwoZlswXT17eDorYVtkXSx5OithW2QrMV19KSxjLnB1c2goWyJDIiwoLWZbMF0ueCs2KmZbMV0ueCtmWzJdLngpLzYsKC1mWzBdLnkrNipmWzFdLnkrZlsyXS55KS82LChmWzFdLngrNipmWzJdLngtZlszXS54KS82LChmWzFdLnkrNipmWzJdLnktZlszXS55KS82LGZbMl0ueCxmWzJdLnldKX1yZXR1cm4gY312YXIgSj1iLnByb3RvdHlwZSxLPWEuaXMsTD1hLl8uY2xvbmUsTT0iaGFzT3duUHJvcGVydHkiLE49Lyw/KFthLXpdKSw/L2dpLE89cGFyc2VGbG9hdCxQPU1hdGgsUT1QLlBJLFI9UC5taW4sUz1QLm1heCxUPVAucG93LFU9UC5hYnMsVj1qKDEpLFc9aigpLFg9aigwLDEpLFk9YS5fdW5pdDJweCxaPXtwYXRoOmZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHIoInBhdGgiKX0sY2lyY2xlOmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHooYi5jeCxiLmN5LGIucil9LGVsbGlwc2U6ZnVuY3Rpb24oYSl7dmFyIGI9WShhKTtyZXR1cm4geihiLmN4fHwwLGIuY3l8fDAsYi5yeCxiLnJ5KTsKfSxyZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHkoYi54fHwwLGIueXx8MCxiLndpZHRoLGIuaGVpZ2h0LGIucngsYi5yeSl9LGltYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHkoYi54fHwwLGIueXx8MCxiLndpZHRoLGIuaGVpZ2h0KX0sbGluZTpmdW5jdGlvbihhKXtyZXR1cm4iTSIrW2EuYXR0cigieDEiKXx8MCxhLmF0dHIoInkxIil8fDAsYS5hdHRyKCJ4MiIpLGEuYXR0cigieTIiKV19LHBvbHlsaW5lOmZ1bmN0aW9uKGEpe3JldHVybiJNIithLmF0dHIoInBvaW50cyIpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiJNIithLmF0dHIoInBvaW50cyIpKyJ6In0sZGVmbHQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlLmdldEJCb3goKTtyZXR1cm4geShiLngsYi55LGIud2lkdGgsYi5oZWlnaHQpfX07YS5wYXRoPWUsYS5wYXRoLmdldFRvdGFsTGVuZ3RoPVYsYS5wYXRoLmdldFBvaW50QXRMZW5ndGg9VyxhLnBhdGguZ2V0U3VicGF0aD1mdW5jdGlvbihhLGIsYyl7aWYodGhpcy5nZXRUb3RhbExlbmd0aChhKS1jPDFlLTYpcmV0dXJuIFgoYSxiKS5lbmQ7dmFyIGQ9WChhLGMsMSk7cmV0dXJuIGI/WChkLGIpLmVuZDpkfSxKLmdldFRvdGFsTGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5nZXRUb3RhbExlbmd0aD90aGlzLm5vZGUuZ2V0VG90YWxMZW5ndGgoKTp2b2lkIDB9LEouZ2V0UG9pbnRBdExlbmd0aD1mdW5jdGlvbihhKXtyZXR1cm4gVyh0aGlzLmF0dHIoImQiKSxhKX0sSi5nZXRTdWJwYXRoPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucGF0aC5nZXRTdWJwYXRoKHRoaXMuYXR0cigiZCIpLGIsYyl9LGEuXy5ib3g9ZixhLnBhdGguZmluZERvdHNBdFNlZ21lbnQ9ayxhLnBhdGguYmV6aWVyQkJveD1sLGEucGF0aC5pc1BvaW50SW5zaWRlQkJveD1tLGEuY2xvc2VzdD1mdW5jdGlvbihiLGMsZCxlKXtmb3IodmFyIGc9MTAwLGg9ZihiLWcvMixjLWcvMixnLGcpLGk9W10saj1kWzBdLmhhc093blByb3BlcnR5KCJ4Iik/ZnVuY3Rpb24oYSl7cmV0dXJue3g6ZFthXS54LHk6ZFthXS55fX06ZnVuY3Rpb24oYSl7cmV0dXJue3g6ZFthXSx5OmVbYV19fSxrPTA7MWU2Pj1nJiYhazspe2Zvcih2YXIgbD0wLG49ZC5sZW5ndGg7bj5sO2wrKyl7dmFyIG89aihsKTtpZihtKGgsby54LG8ueSkpe2srKyxpLnB1c2gobyk7YnJlYWt9fWt8fChnKj0yLGg9ZihiLWcvMixjLWcvMixnLGcpKX1pZigxZTYhPWcpe3ZhciBwLHE9MS8wO2ZvcihsPTAsbj1pLmxlbmd0aDtuPmw7bCsrKXt2YXIgcj1hLmxlbihiLGMsaVtsXS54LGlbbF0ueSk7cT5yJiYocT1yLGlbbF0ubGVuPXIscD1pW2xdKX1yZXR1cm4gcH19LGEucGF0aC5pc0JCb3hJbnRlcnNlY3Q9bixhLnBhdGguaW50ZXJzZWN0aW9uPXQsYS5wYXRoLmludGVyc2VjdGlvbk51bWJlcj11LGEucGF0aC5pc1BvaW50SW5zaWRlPXcsYS5wYXRoLmdldEJCb3g9eCxhLnBhdGguZ2V0PVosYS5wYXRoLnRvUmVsYXRpdmU9QSxhLnBhdGgudG9BYnNvbHV0ZT1CLGEucGF0aC50b0N1YmljPUcsYS5wYXRoLm1hcD1ILGEucGF0aC50b1N0cmluZz1nLGEucGF0aC5jbG9uZT1ofSksZC5wbHVnaW4oZnVuY3Rpb24oYSxkLGUsZil7dmFyIGc9TWF0aC5tYXgsaD1NYXRoLm1pbixpPWZ1bmN0aW9uKGEpe2lmKHRoaXMuaXRlbXM9W10sdGhpcy5iaW5kaW5ncz17fSx0aGlzLmxlbmd0aD0wLHRoaXMudHlwZT0ic2V0IixhKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKylhW2JdJiYodGhpc1t0aGlzLml0ZW1zLmxlbmd0aF09dGhpcy5pdGVtc1t0aGlzLml0ZW1zLmxlbmd0aF09YVtiXSx0aGlzLmxlbmd0aCsrKX0saj1pLnByb3RvdHlwZTtqLnB1c2g9ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPTAsZD1hcmd1bWVudHMubGVuZ3RoO2Q+YztjKyspYT1hcmd1bWVudHNbY10sYSYmKGI9dGhpcy5pdGVtcy5sZW5ndGgsdGhpc1tiXT10aGlzLml0ZW1zW2JdPWEsdGhpcy5sZW5ndGgrKyk7cmV0dXJuIHRoaXN9LGoucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoJiZkZWxldGUgdGhpc1t0aGlzLmxlbmd0aC0tXSx0aGlzLml0ZW1zLnBvcCgpfSxqLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuaXRlbXMubGVuZ3RoO2Q+YztjKyspaWYoYS5jYWxsKGIsdGhpcy5pdGVtc1tjXSxjKT09PSExKXJldHVybiB0aGlzO3JldHVybiB0aGlzfSxqLmFuaW1hdGU9ZnVuY3Rpb24oZCxlLGYsZyl7ImZ1bmN0aW9uIiE9dHlwZW9mIGZ8fGYubGVuZ3RofHwoZz1mLGY9Yy5saW5lYXIpLGQgaW5zdGFuY2VvZiBhLl8uQW5pbWF0aW9uJiYoZz1kLmNhbGxiYWNrLGY9ZC5lYXNpbmcsZT1mLmR1cixkPWQuYXR0cik7dmFyIGg9YXJndW1lbnRzO2lmKGEuaXMoZCwiYXJyYXkiKSYmYS5pcyhoW2gubGVuZ3RoLTFdLCJhcnJheSIpKXZhciBpPSEwO3ZhciBqLGs9ZnVuY3Rpb24oKXtqP3RoaXMuYj1qOmo9dGhpcy5ifSxsPTAsbT10aGlzLG49ZyYmZnVuY3Rpb24oKXsrK2w9PW0ubGVuZ3RoJiZnLmNhbGwodGhpcyl9O3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oYSxjKXtiLm9uY2UoInNuYXAuYW5pbWNyZWF0ZWQuIithLmlkLGspLGk/aFtjXSYmYS5hbmltYXRlLmFwcGx5KGEsaFtjXSk6YS5hbmltYXRlKGQsZSxmLG4pfSl9LGoucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKDt0aGlzLmxlbmd0aDspdGhpcy5wb3AoKS5yZW1vdmUoKTtyZXR1cm4gdGhpc30sai5iaW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYil0aGlzLmJpbmRpbmdzW2FdPWI7ZWxzZXt2YXIgZT1jfHxhO3RoaXMuYmluZGluZ3NbYV09ZnVuY3Rpb24oYSl7ZFtlXT1hLGIuYXR0cihkKX19cmV0dXJuIHRoaXN9LGouYXR0cj1mdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSl0aGlzLmJpbmRpbmdzW2NdP3RoaXMuYmluZGluZ3NbY10oYVtjXSk6YltjXT1hW2NdO2Zvcih2YXIgZD0wLGU9dGhpcy5pdGVtcy5sZW5ndGg7ZT5kO2QrKyl0aGlzLml0ZW1zW2RdLmF0dHIoYik7cmV0dXJuIHRoaXN9LGouY2xlYXI9ZnVuY3Rpb24oKXtmb3IoO3RoaXMubGVuZ3RoOyl0aGlzLnBvcCgpfSxqLnNwbGljZT1mdW5jdGlvbihhLGIsYyl7YT0wPmE/Zyh0aGlzLmxlbmd0aCthLDApOmEsYj1nKDAsaCh0aGlzLmxlbmd0aC1hLGIpKTt2YXIgZCxlPVtdLGY9W10saj1bXTtmb3IoZD0yO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspai5wdXNoKGFyZ3VtZW50c1tkXSk7Zm9yKGQ9MDtiPmQ7ZCsrKWYucHVzaCh0aGlzW2ErZF0pO2Zvcig7ZDx0aGlzLmxlbmd0aC1hO2QrKyllLnB1c2godGhpc1thK2RdKTt2YXIgaz1qLmxlbmd0aDtmb3IoZD0wO2Q8aytlLmxlbmd0aDtkKyspdGhpcy5pdGVtc1thK2RdPXRoaXNbYStkXT1rPmQ/altkXTplW2Qta107Zm9yKGQ9dGhpcy5pdGVtcy5sZW5ndGg9dGhpcy5sZW5ndGgtPWItazt0aGlzW2RdOylkZWxldGUgdGhpc1tkKytdO3JldHVybiBuZXcgaShmKX0sai5leGNsdWRlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sZW5ndGg7Yz5iO2IrKylpZih0aGlzW2JdPT1hKXJldHVybiB0aGlzLnNwbGljZShiLDEpLCEwO3JldHVybiExfSxqLmluc2VydEFmdGVyPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLml0ZW1zLmxlbmd0aDtiLS07KXRoaXMuaXRlbXNbYl0uaW5zZXJ0QWZ0ZXIoYSk7cmV0dXJuIHRoaXN9LGouZ2V0QkJveD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPVtdLGM9W10sZD1bXSxlPXRoaXMuaXRlbXMubGVuZ3RoO2UtLTspaWYoIXRoaXMuaXRlbXNbZV0ucmVtb3ZlZCl7dmFyIGY9dGhpcy5pdGVtc1tlXS5nZXRCQm94KCk7YS5wdXNoKGYueCksYi5wdXNoKGYueSksYy5wdXNoKGYueCtmLndpZHRoKSxkLnB1c2goZi55K2YuaGVpZ2h0KX1yZXR1cm4gYT1oLmFwcGx5KDAsYSksYj1oLmFwcGx5KDAsYiksYz1nLmFwcGx5KDAsYyksZD1nLmFwcGx5KDAsZCkse3g6YSx5OmIseDI6Yyx5MjpkLHdpZHRoOmMtYSxoZWlnaHQ6ZC1iLGN4OmErKGMtYSkvMixjeTpiKyhkLWIpLzJ9fSxqLmNsb25lPWZ1bmN0aW9uKGEpe2E9bmV3IGk7Zm9yKHZhciBiPTAsYz10aGlzLml0ZW1zLmxlbmd0aDtjPmI7YisrKWEucHVzaCh0aGlzLml0ZW1zW2JdLmNsb25lKCkpO3JldHVybiBhfSxqLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIlNuYXDigJhzIHNldCJ9LGoudHlwZT0ic2V0IixhLlNldD1pLGEuc2V0PWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJmEucHVzaC5hcHBseShhLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSksYX19KSxkLnBsdWdpbihmdW5jdGlvbihhLGMsZCxlKXtmdW5jdGlvbiBmKGEpe3ZhciBiPWFbMF07c3dpdGNoKGIudG9Mb3dlckNhc2UoKSl7Y2FzZSJ0IjpyZXR1cm5bYiwwLDBdO2Nhc2UibSI6cmV0dXJuW2IsMSwwLDAsMSwwLDBdO2Nhc2UiciI6cmV0dXJuIDQ9PWEubGVuZ3RoP1tiLDAsYVsyXSxhWzNdXTpbYiwwXTtjYXNlInMiOnJldHVybiA1PT1hLmxlbmd0aD9bYiwxLDEsYVszXSxhWzRdXTozPT1hLmxlbmd0aD9bYiwxLDFdOltiLDFdfX1mdW5jdGlvbiBnKGIsYyxkKXtiPWJ8fG5ldyBhLk1hdHJpeCxjPWN8fG5ldyBhLk1hdHJpeCxiPWEucGFyc2VUcmFuc2Zvcm1TdHJpbmcoYi50b1RyYW5zZm9ybVN0cmluZygpKXx8W10sYz1hLnBhcnNlVHJhbnNmb3JtU3RyaW5nKGMudG9UcmFuc2Zvcm1TdHJpbmcoKSl8fFtdO2Zvcih2YXIgZSxnLGgsaSxqPU1hdGgubWF4KGIubGVuZ3RoLGMubGVuZ3RoKSxrPVtdLG49W10sbz0wO2o+bztvKyspe2lmKGg9YltvXXx8ZihjW29dKSxpPWNbb118fGYoaCksaFswXSE9aVswXXx8InIiPT1oWzBdLnRvTG93ZXJDYXNlKCkmJihoWzJdIT1pWzJdfHxoWzNdIT1pWzNdKXx8InMiPT1oWzBdLnRvTG93ZXJDYXNlKCkmJihoWzNdIT1pWzNdfHxoWzRdIT1pWzRdKSl7Yj1hLl8udHJhbnNmb3JtMm1hdHJpeChiLGQoKSksYz1hLl8udHJhbnNmb3JtMm1hdHJpeChjLGQoKSksaz1bWyJtIixiLmEsYi5iLGIuYyxiLmQsYi5lLGIuZl1dLG49W1sibSIsYy5hLGMuYixjLmMsYy5kLGMuZSxjLmZdXTticmVha31mb3Ioa1tvXT1bXSxuW29dPVtdLGU9MCxnPU1hdGgubWF4KGgubGVuZ3RoLGkubGVuZ3RoKTtnPmU7ZSsrKWUgaW4gaCYmKGtbb11bZV09aFtlXSksZSBpbiBpJiYobltvXVtlXT1pW2VdKX1yZXR1cm57ZnJvbTptKGspLHRvOm0obiksZjpsKGspfX1mdW5jdGlvbiBoKGEpe3JldHVybiBhfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybitiLnRvRml4ZWQoMykrYX19ZnVuY3Rpb24gaihhKXtyZXR1cm4gYS5qb2luKCIgIil9ZnVuY3Rpb24gayhiKXtyZXR1cm4gYS5yZ2IoYlswXSxiWzFdLGJbMl0sYlszXSl9ZnVuY3Rpb24gbChhKXt2YXIgYixjLGQsZSxmLGcsaD0wLGk9W107Zm9yKGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspe2ZvcihmPSJbIixnPVsnIicrYVtiXVswXSsnIiddLGQ9MSxlPWFbYl0ubGVuZ3RoO2U+ZDtkKyspZ1tkXT0idmFsWyIraCsrICsiXSI7Zis9ZysiXSIsaVtiXT1mfXJldHVybiBGdW5jdGlvbigidmFsIiwicmV0dXJuIFNuYXAucGF0aC50b1N0cmluZy5jYWxsKFsiK2krIl0pIil9ZnVuY3Rpb24gbShhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylmb3IodmFyIGU9MSxmPWFbY10ubGVuZ3RoO2Y+ZTtlKyspYi5wdXNoKGFbY11bZV0pO3JldHVybiBifWZ1bmN0aW9uIG4oYSl7cmV0dXJuIGlzRmluaXRlKGEpfWZ1bmN0aW9uIG8oYixjKXtyZXR1cm4gYS5pcyhiLCJhcnJheSIpJiZhLmlzKGMsImFycmF5Iik/Yi50b1N0cmluZygpPT1jLnRvU3RyaW5nKCk6ITF9dmFyIHA9e30scT0vWyVhLXpdKyQvaSxyPVN0cmluZztwLnN0cm9rZT1wLmZpbGw9ImNvbG91ciIsYy5wcm90b3R5cGUuZXF1YWw9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYigic25hcC51dGlsLmVxdWFsIix0aGlzLGEsYykuZmlyc3REZWZpbmVkKCl9LGIub24oInNuYXAudXRpbC5lcXVhbCIsZnVuY3Rpb24oYixjKXt2YXIgZCxlLGY9cih0aGlzLmF0dHIoYil8fCIiKSxzPXRoaXM7aWYoImNvbG91ciI9PXBbYl0pcmV0dXJuIGQ9YS5jb2xvcihmKSxlPWEuY29sb3IoYykse2Zyb206W2QucixkLmcsZC5iLGQub3BhY2l0eV0sdG86W2UucixlLmcsZS5iLGUub3BhY2l0eV0sZjprfTtpZigidmlld0JveCI9PWIpcmV0dXJuIGQ9dGhpcy5hdHRyKGIpLnZiLnNwbGl0KCIgIikubWFwKE51bWJlciksZT1jLnNwbGl0KCIgIikubWFwKE51bWJlcikse2Zyb206ZCx0bzplLGY6an07aWYoInRyYW5zZm9ybSI9PWJ8fCJncmFkaWVudFRyYW5zZm9ybSI9PWJ8fCJwYXR0ZXJuVHJhbnNmb3JtIj09YilyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGMmJihjPXIoYykucmVwbGFjZSgvXC57M318XHUyMDI2L2csZikpLGY9dGhpcy5tYXRyaXgsYz1hLl8ucmdUcmFuc2Zvcm0udGVzdChjKT9hLl8udHJhbnNmb3JtMm1hdHJpeChjLHRoaXMuZ2V0QkJveCgpKTphLl8udHJhbnNmb3JtMm1hdHJpeChhLl8uc3ZnVHJhbnNmb3JtMnN0cmluZyhjKSx0aGlzLmdldEJCb3goKSksZyhmLGMsZnVuY3Rpb24oKXtyZXR1cm4gcy5nZXRCQm94KDEpfSk7aWYoImQiPT1ifHwicGF0aCI9PWIpcmV0dXJuIGQ9YS5wYXRoLnRvQ3ViaWMoZixjKSx7ZnJvbTptKGRbMF0pLHRvOm0oZFsxXSksZjpsKGRbMF0pfTtpZigicG9pbnRzIj09YilyZXR1cm4gZD1yKGYpLnNwbGl0KGEuXy5zZXBhcmF0b3IpLGU9cihjKS5zcGxpdChhLl8uc2VwYXJhdG9yKSx7ZnJvbTpkLHRvOmUsZjpmdW5jdGlvbihhKXtyZXR1cm4gYX19O2lmKG4oZikmJm4oYykpcmV0dXJue2Zyb206cGFyc2VGbG9hdChmKSx0bzpwYXJzZUZsb2F0KGMpLGY6aH07dmFyIHQ9Zi5tYXRjaChxKSx1PXIoYykubWF0Y2gocSk7cmV0dXJuIHQmJm8odCx1KT97ZnJvbTpwYXJzZUZsb2F0KGYpLHRvOnBhcnNlRmxvYXQoYyksZjppKHQpfTp7ZnJvbTp0aGlzLmFzUFgoYiksdG86dGhpcy5hc1BYKGIsYyksZjpofX0pfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSl7Zm9yKHZhciBmPWMucHJvdG90eXBlLGc9Imhhc093blByb3BlcnR5IixoPSgiY3JlYXRlVG91Y2giaW4gZS5kb2MpLGk9WyJjbGljayIsImRibGNsaWNrIiwibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2VvdXQiLCJtb3VzZW92ZXIiLCJtb3VzZXVwIiwidG91Y2hzdGFydCIsInRvdWNobW92ZSIsInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiXSxqPXttb3VzZWRvd246InRvdWNoc3RhcnQiLG1vdXNlbW92ZToidG91Y2htb3ZlIixtb3VzZXVwOiJ0b3VjaGVuZCJ9LGs9KGZ1bmN0aW9uKGEsYil7dmFyIGM9InkiPT1hPyJzY3JvbGxUb3AiOiJzY3JvbGxMZWZ0IixkPWImJmIubm9kZT9iLm5vZGUub3duZXJEb2N1bWVudDplLmRvYztyZXR1cm4gZFtjIGluIGQuZG9jdW1lbnRFbGVtZW50PyJkb2N1bWVudEVsZW1lbnQiOiJib2R5Il1bY119KSxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpfSxtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKX0sbj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1oJiZqW2JdP2pbYl06YixmPWZ1bmN0aW9uKGUpe3ZhciBmPWsoInkiLGQpLGk9aygieCIsZCk7aWYoaCYmaltnXShiKSlmb3IodmFyIG49MCxvPWUudGFyZ2V0VG91Y2hlcyYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aDtvPm47bisrKWlmKGUudGFyZ2V0VG91Y2hlc1tuXS50YXJnZXQ9PWF8fGEuY29udGFpbnMoZS50YXJnZXRUb3VjaGVzW25dLnRhcmdldCkpe3ZhciBwPWU7ZT1lLnRhcmdldFRvdWNoZXNbbl0sZS5vcmlnaW5hbEV2ZW50PXAsZS5wcmV2ZW50RGVmYXVsdD1sLGUuc3RvcFByb3BhZ2F0aW9uPW07YnJlYWt9dmFyIHE9ZS5jbGllbnRYK2kscj1lLmNsaWVudFkrZjtyZXR1cm4gYy5jYWxsKGQsZSxxLHIpfTtyZXR1cm4gYiE9PWUmJmEuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihlLGYsITEpLGZ1bmN0aW9uKCl7cmV0dXJuIGIhPT1lJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixmLCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxmLCExKSwhMH19LG89W10scD1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1hLmNsaWVudFgsZT1hLmNsaWVudFksZj1rKCJ5IiksZz1rKCJ4IiksaT1vLmxlbmd0aDtpLS07KXtpZihjPW9baV0saCl7Zm9yKHZhciBqLGw9YS50b3VjaGVzJiZhLnRvdWNoZXMubGVuZ3RoO2wtLTspaWYoaj1hLnRvdWNoZXNbbF0sai5pZGVudGlmaWVyPT1jLmVsLl9kcmFnLmlkfHxjLmVsLm5vZGUuY29udGFpbnMoai50YXJnZXQpKXtkPWouY2xpZW50WCxlPWouY2xpZW50WSwoYS5vcmlnaW5hbEV2ZW50P2Eub3JpZ2luYWxFdmVudDphKS5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrfX1lbHNlIGEucHJldmVudERlZmF1bHQoKTt2YXIgbT1jLmVsLm5vZGU7bS5uZXh0U2libGluZyxtLnBhcmVudE5vZGUsbS5zdHlsZS5kaXNwbGF5O2QrPWcsZSs9ZixiKCJzbmFwLmRyYWcubW92ZS4iK2MuZWwuaWQsYy5tb3ZlX3Njb3BlfHxjLmVsLGQtYy5lbC5fZHJhZy54LGUtYy5lbC5fZHJhZy55LGQsZSxhKX19LHE9ZnVuY3Rpb24oYyl7YS51bm1vdXNlbW92ZShwKS51bm1vdXNldXAocSk7Zm9yKHZhciBkLGU9by5sZW5ndGg7ZS0tOylkPW9bZV0sZC5lbC5fZHJhZz17fSxiKCJzbmFwLmRyYWcuZW5kLiIrZC5lbC5pZCxkLmVuZF9zY29wZXx8ZC5zdGFydF9zY29wZXx8ZC5tb3ZlX3Njb3BlfHxkLmVsLGMpLGIub2ZmKCJzbmFwLmRyYWcuKi4iK2QuZWwuaWQpO289W119LHI9aS5sZW5ndGg7ci0tOykhZnVuY3Rpb24oYil7YVtiXT1mW2JdPWZ1bmN0aW9uKGMsZCl7aWYoYS5pcyhjLCJmdW5jdGlvbiIpKXRoaXMuZXZlbnRzPXRoaXMuZXZlbnRzfHxbXSx0aGlzLmV2ZW50cy5wdXNoKHtuYW1lOmIsZjpjLHVuYmluZDpuKHRoaXMubm9kZXx8ZG9jdW1lbnQsYixjLGR8fHRoaXMpfSk7ZWxzZSBmb3IodmFyIGU9MCxmPXRoaXMuZXZlbnRzLmxlbmd0aDtmPmU7ZSsrKWlmKHRoaXMuZXZlbnRzW2VdLm5hbWU9PWIpdHJ5e3RoaXMuZXZlbnRzW2VdLmYuY2FsbCh0aGlzKX1jYXRjaChnKXt9cmV0dXJuIHRoaXN9LGFbInVuIitiXT1mWyJ1biIrYl09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPXRoaXMuZXZlbnRzfHxbXSxkPWMubGVuZ3RoO2QtLTspaWYoY1tkXS5uYW1lPT1iJiYoY1tkXS5mPT1hfHwhYSkpcmV0dXJuIGNbZF0udW5iaW5kKCksYy5zcGxpY2UoZCwxKSwhYy5sZW5ndGgmJmRlbGV0ZSB0aGlzLmV2ZW50cyx0aGlzO3JldHVybiB0aGlzfX0oaVtyXSk7Zi5ob3Zlcj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5tb3VzZW92ZXIoYSxjKS5tb3VzZW91dChiLGR8fGMpfSxmLnVuaG92ZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy51bm1vdXNlb3ZlcihhKS51bm1vdXNlb3V0KGIpfTt2YXIgcz1bXTtmLmRyYWc9ZnVuY3Rpb24oYyxkLGUsZixnLGgpe2Z1bmN0aW9uIGkoaSxqLGwpeyhpLm9yaWdpbmFsRXZlbnR8fGkpLnByZXZlbnREZWZhdWx0KCksay5fZHJhZy54PWosay5fZHJhZy55PWwsay5fZHJhZy5pZD1pLmlkZW50aWZpZXIsIW8ubGVuZ3RoJiZhLm1vdXNlbW92ZShwKS5tb3VzZXVwKHEpLG8ucHVzaCh7ZWw6ayxtb3ZlX3Njb3BlOmYsc3RhcnRfc2NvcGU6ZyxlbmRfc2NvcGU6aH0pLGQmJmIub24oInNuYXAuZHJhZy5zdGFydC4iK2suaWQsZCksYyYmYi5vbigic25hcC5kcmFnLm1vdmUuIitrLmlkLGMpLGUmJmIub24oInNuYXAuZHJhZy5lbmQuIitrLmlkLGUpLGIoInNuYXAuZHJhZy5zdGFydC4iK2suaWQsZ3x8Znx8ayxqLGwsaSl9ZnVuY3Rpb24gaihhLGMsZCl7Yigic25hcC5kcmFnaW5pdC4iK2suaWQsayxhLGMsZCl9dmFyIGs9dGhpcztpZighYXJndW1lbnRzLmxlbmd0aCl7dmFyIGw7cmV0dXJuIGsuZHJhZyhmdW5jdGlvbihhLGIpe3RoaXMuYXR0cih7dHJhbnNmb3JtOmwrKGw/IlQiOiJ0IikrW2EsYl19KX0sZnVuY3Rpb24oKXtsPXRoaXMudHJhbnNmb3JtKCkubG9jYWx9KX1yZXR1cm4gYi5vbigic25hcC5kcmFnaW5pdC4iK2suaWQsaSksay5fZHJhZz17fSxzLnB1c2goe2VsOmssc3RhcnQ6aSxpbml0Omp9KSxrLm1vdXNlZG93bihqKSxrfSxmLnVuZHJhZz1mdW5jdGlvbigpe2Zvcih2YXIgYz1zLmxlbmd0aDtjLS07KXNbY10uZWw9PXRoaXMmJih0aGlzLnVubW91c2Vkb3duKHNbY10uaW5pdCkscy5zcGxpY2UoYywxKSxiLnVuYmluZCgic25hcC5kcmFnLiouIit0aGlzLmlkKSxiLnVuYmluZCgic25hcC5kcmFnaW5pdC4iK3RoaXMuaWQpKTtyZXR1cm4hcy5sZW5ndGgmJmEudW5tb3VzZW1vdmUocCkudW5tb3VzZXVwKHEpLHRoaXN9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9KGMucHJvdG90eXBlLGQucHJvdG90eXBlKSxnPS9eXHMqdXJsXCgoLispXCkvLGg9U3RyaW5nLGk9YS5fLiQ7YS5maWx0ZXI9e30sZi5maWx0ZXI9ZnVuY3Rpb24oYil7dmFyIGQ9dGhpczsic3ZnIiE9ZC50eXBlJiYoZD1kLnBhcGVyKTt2YXIgZT1hLnBhcnNlKGgoYikpLGY9YS5fLmlkKCksZz0oZC5ub2RlLm9mZnNldFdpZHRoLGQubm9kZS5vZmZzZXRIZWlnaHQsaSgiZmlsdGVyIikpO3JldHVybiBpKGcse2lkOmYsZmlsdGVyVW5pdHM6InVzZXJTcGFjZU9uVXNlIn0pLGcuYXBwZW5kQ2hpbGQoZS5ub2RlKSxkLmRlZnMuYXBwZW5kQ2hpbGQoZyksbmV3IGMoZyl9LGIub24oInNuYXAudXRpbC5nZXRhdHRyLmZpbHRlciIsZnVuY3Rpb24oKXtiLnN0b3AoKTt2YXIgYz1pKHRoaXMubm9kZSwiZmlsdGVyIik7aWYoYyl7dmFyIGQ9aChjKS5tYXRjaChnKTtyZXR1cm4gZCYmYS5zZWxlY3QoZFsxXSl9fSksYi5vbigic25hcC51dGlsLmF0dHIuZmlsdGVyIixmdW5jdGlvbihkKXtpZihkIGluc3RhbmNlb2YgYyYmImZpbHRlciI9PWQudHlwZSl7Yi5zdG9wKCk7dmFyIGU9ZC5ub2RlLmlkO2V8fChpKGQubm9kZSx7aWQ6ZC5pZH0pLGU9ZC5pZCksaSh0aGlzLm5vZGUse2ZpbHRlcjphLnVybChlKX0pfWQmJiJub25lIiE9ZHx8KGIuc3RvcCgpLHRoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpKX0pLGEuZmlsdGVyLmJsdXI9ZnVuY3Rpb24oYixjKXtudWxsPT1iJiYoYj0yKTt2YXIgZD1udWxsPT1jP2I6W2IsY107cmV0dXJuIGEuZm9ybWF0KCc8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSJ7ZGVmfSIvPicse2RlZjpkfSl9LGEuZmlsdGVyLmJsdXIudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5zaGFkb3c9ZnVuY3Rpb24oYixjLGQsZSxmKXtyZXR1cm4gbnVsbD09ZiYmKG51bGw9PWU/KGY9ZCxkPTQsZT0iIzAwMCIpOihmPWUsZT1kLGQ9NCkpLG51bGw9PWQmJihkPTQpLG51bGw9PWYmJihmPTEpLG51bGw9PWImJihiPTAsYz0yKSxudWxsPT1jJiYoYz1iKSxlPWEuY29sb3IoZSksYS5mb3JtYXQoJzxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlQWxwaGEiIHN0ZERldmlhdGlvbj0ie2JsdXJ9Ii8+PGZlT2Zmc2V0IGR4PSJ7ZHh9IiBkeT0ie2R5fSIgcmVzdWx0PSJvZmZzZXRibHVyIi8+PGZlRmxvb2QgZmxvb2QtY29sb3I9Intjb2xvcn0iLz48ZmVDb21wb3NpdGUgaW4yPSJvZmZzZXRibHVyIiBvcGVyYXRvcj0iaW4iLz48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jQSB0eXBlPSJsaW5lYXIiIHNsb3BlPSJ7b3BhY2l0eX0iLz48L2ZlQ29tcG9uZW50VHJhbnNmZXI+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlLz48ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZlTWVyZ2U+Jyx7Y29sb3I6ZSxkeDpiLGR5OmMsYmx1cjpkLG9wYWNpdHk6Zn0pfSxhLmZpbHRlci5zaGFkb3cudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5ncmF5c2NhbGU9ZnVuY3Rpb24oYil7cmV0dXJuIG51bGw9PWImJihiPTEpLGEuZm9ybWF0KCc8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0ie2F9IHtifSB7Y30gMCAwIHtkfSB7ZX0ge2Z9IDAgMCB7Z30ge2J9IHtofSAwIDAgMCAwIDAgMSAwIi8+Jyx7YTouMjEyNisuNzg3NCooMS1iKSxiOi43MTUyLS43MTUyKigxLWIpLGM6LjA3MjItLjA3MjIqKDEtYiksZDouMjEyNi0uMjEyNiooMS1iKSxlOi43MTUyKy4yODQ4KigxLWIpLGY6LjA3MjItLjA3MjIqKDEtYiksZzouMjEyNi0uMjEyNiooMS1iKSxoOi4wNzIyKy45Mjc4KigxLWIpfSl9LGEuZmlsdGVyLmdyYXlzY2FsZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9LGEuZmlsdGVyLnNlcGlhPWZ1bmN0aW9uKGIpe3JldHVybiBudWxsPT1iJiYoYj0xKSxhLmZvcm1hdCgnPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9InthfSB7Yn0ge2N9IDAgMCB7ZH0ge2V9IHtmfSAwIDAge2d9IHtofSB7aX0gMCAwIDAgMCAwIDEgMCIvPicse2E6LjM5MysuNjA3KigxLWIpLGI6Ljc2OS0uNzY5KigxLWIpLGM6LjE4OS0uMTg5KigxLWIpLGQ6LjM0OS0uMzQ5KigxLWIpLGU6LjY4NisuMzE0KigxLWIpLGY6LjE2OC0uMTY4KigxLWIpLGc6LjI3Mi0uMjcyKigxLWIpLGg6LjUzNC0uNTM0KigxLWIpLGk6LjEzMSsuODY5KigxLWIpfSl9LGEuZmlsdGVyLnNlcGlhLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMoKX0sYS5maWx0ZXIuc2F0dXJhdGU9ZnVuY3Rpb24oYil7cmV0dXJuIG51bGw9PWImJihiPTEpLGEuZm9ybWF0KCc8ZmVDb2xvck1hdHJpeCB0eXBlPSJzYXR1cmF0ZSIgdmFsdWVzPSJ7YW1vdW50fSIvPicse2Ftb3VudDoxLWJ9KX0sYS5maWx0ZXIuc2F0dXJhdGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5odWVSb3RhdGU9ZnVuY3Rpb24oYil7cmV0dXJuIGI9Ynx8MCxhLmZvcm1hdCgnPGZlQ29sb3JNYXRyaXggdHlwZT0iaHVlUm90YXRlIiB2YWx1ZXM9InthbmdsZX0iLz4nLHthbmdsZTpifSl9LGEuZmlsdGVyLmh1ZVJvdGF0ZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9LGEuZmlsdGVyLmludmVydD1mdW5jdGlvbihiKXtyZXR1cm4gbnVsbD09YiYmKGI9MSksYS5mb3JtYXQoJzxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNSIHR5cGU9InRhYmxlIiB0YWJsZVZhbHVlcz0ie2Ftb3VudH0ge2Ftb3VudDJ9Ii8+PGZlRnVuY0cgdHlwZT0idGFibGUiIHRhYmxlVmFsdWVzPSJ7YW1vdW50fSB7YW1vdW50Mn0iLz48ZmVGdW5jQiB0eXBlPSJ0YWJsZSIgdGFibGVWYWx1ZXM9InthbW91bnR9IHthbW91bnQyfSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj4nLHthbW91bnQ6YixhbW91bnQyOjEtYn0pfSxhLmZpbHRlci5pbnZlcnQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5icmlnaHRuZXNzPWZ1bmN0aW9uKGIpe3JldHVybiBudWxsPT1iJiYoYj0xKSxhLmZvcm1hdCgnPGZlQ29tcG9uZW50VHJhbnNmZXI+PGZlRnVuY1IgdHlwZT0ibGluZWFyIiBzbG9wZT0ie2Ftb3VudH0iLz48ZmVGdW5jRyB0eXBlPSJsaW5lYXIiIHNsb3BlPSJ7YW1vdW50fSIvPjxmZUZ1bmNCIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9Ii8+PC9mZUNvbXBvbmVudFRyYW5zZmVyPicse2Ftb3VudDpifSl9LGEuZmlsdGVyLmJyaWdodG5lc3MudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5jb250cmFzdD1mdW5jdGlvbihiKXtyZXR1cm4gbnVsbD09YiYmKGI9MSksYS5mb3JtYXQoJzxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNSIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjxmZUZ1bmNHIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjxmZUZ1bmNCIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj4nLHthbW91bnQ6YixhbW91bnQyOi41LWIvMn0pfSxhLmZpbHRlci5jb250cmFzdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1hLl8uYm94LGc9YS5pcyxoPS9eW15hLXpdKihbdGJtbHJjXSkvaSxpPWZ1bmN0aW9uKCl7cmV0dXJuIlQiK3RoaXMuZHgrIiwiK3RoaXMuZHl9O2IucHJvdG90eXBlLmdldEFsaWduPWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmZyhhLCJzdHJpbmciKSYmKGI9YSxhPW51bGwpLGE9YXx8dGhpcy5wYXBlcjt2YXIgYz1hLmdldEJCb3g/YS5nZXRCQm94KCk6ZihhKSxkPXRoaXMuZ2V0QkJveCgpLGU9e307c3dpdGNoKGI9YiYmYi5tYXRjaChoKSxiPWI/YlsxXS50b0xvd2VyQ2FzZSgpOiJjIil7Y2FzZSJ0IjplLmR4PTAsZS5keT1jLnktZC55O2JyZWFrO2Nhc2UiYiI6ZS5keD0wLGUuZHk9Yy55Mi1kLnkyO2JyZWFrO2Nhc2UibSI6ZS5keD0wLGUuZHk9Yy5jeS1kLmN5O2JyZWFrO2Nhc2UibCI6ZS5keD1jLngtZC54LGUuZHk9MDticmVhaztjYXNlInIiOmUuZHg9Yy54Mi1kLngyLGUuZHk9MDticmVhaztkZWZhdWx0OmUuZHg9Yy5jeC1kLmN4LGUuZHk9MH1yZXR1cm4gZS50b1N0cmluZz1pLGV9LGIucHJvdG90eXBlLmFsaWduPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudHJhbnNmb3JtKCIuLi4iK3RoaXMuZ2V0QWxpZ24oYSxiKSl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYixjLGQsZSl7ZnVuY3Rpb24gZihhKXthPWEuc3BsaXQoLyg/PSMpLyk7dmFyIGI9bmV3IFN0cmluZyhhWzVdKTtyZXR1cm4gYls1MF09YVswXSxiWzEwMF09YVsxXSxiWzIwMF09YVsyXSxiWzMwMF09YVszXSxiWzQwMF09YVs0XSxiWzUwMF09YVs1XSxiWzYwMF09YVs2XSxiWzcwMF09YVs3XSxiWzgwMF09YVs4XSxiWzkwMF09YVs5XSxhWzEwXSYmKGIuQTEwMD1hWzEwXSxiLkEyMDA9YVsxMV0sYi5BNDAwPWFbMTJdLGIuQTcwMD1hWzEzXSksYn12YXIgZz0iI2ZmZWJlZSNmZmNkZDIjZWY5YTlhI2U1NzM3MyNlZjUzNTAjZjQ0MzM2I2U1MzkzNSNkMzJmMmYjYzYyODI4I2I3MWMxYyNmZjhhODAjZmY1MjUyI2ZmMTc0NCNkNTAwMDAiLGg9IiNGQ0U0RUMjRjhCQkQwI0Y0OEZCMSNGMDYyOTIjRUM0MDdBI0U5MUU2MyNEODFCNjAjQzIxODVCI0FEMTQ1NyM4ODBFNEYjRkY4MEFCI0ZGNDA4MSNGNTAwNTcjQzUxMTYyIixpPSIjRjNFNUY1I0UxQkVFNyNDRTkzRDgjQkE2OEM4I0FCNDdCQyM5QzI3QjAjOEUyNEFBIzdCMUZBMiM2QTFCOUEjNEExNDhDI0VBODBGQyNFMDQwRkIjRDUwMEY5I0FBMDBGRiIsaj0iI0VERTdGNiNEMUM0RTkjQjM5RERCIzk1NzVDRCM3RTU3QzIjNjczQUI3IzVFMzVCMSM1MTJEQTgjNDUyN0EwIzMxMUI5MiNCMzg4RkYjN0M0REZGIzY1MUZGRiM2MjAwRUEiLGs9IiNFOEVBRjYjQzVDQUU5IzlGQThEQSM3OTg2Q0IjNUM2QkMwIzNGNTFCNSMzOTQ5QUIjMzAzRjlGIzI4MzU5MyMxQTIzN0UjOEM5RUZGIzUzNkRGRSMzRDVBRkUjMzA0RkZFIixsPSIjRTNGMkZEI0JCREVGQiM5MENBRjkjNjRCNUY2IzY0QjVGNiMyMTk2RjMjMUU4OEU1IzE5NzZEMiMxNTY1QzAjMEQ0N0ExIzgyQjFGRiM0NDhBRkYjMjk3OUZGIzI5NjJGRiIsbT0iI0UxRjVGRSNCM0U1RkMjODFENEZBIzRGQzNGNyMyOUI2RjYjMDNBOUY0IzAzOUJFNSMwMjg4RDEjMDI3N0JEIzAxNTc5QiM4MEQ4RkYjNDBDNEZGIzAwQjBGRiMwMDkxRUEiLG49IiNFMEY3RkEjQjJFQkYyIzgwREVFQSM0REQwRTEjMjZDNkRBIzAwQkNENCMwMEFDQzEjMDA5N0E3IzAwODM4RiMwMDYwNjQjODRGRkZGIzE4RkZGRiMwMEU1RkYjMDBCOEQ0IixvPSIjRTBGMkYxI0IyREZEQiM4MENCQzQjNERCNkFDIzI2QTY5QSMwMDk2ODgjMDA4OTdCIzAwNzk2QiMwMDY5NUMjMDA0RDQwI0E3RkZFQiM2NEZGREEjMURFOUI2IzAwQkZBNSIscD0iI0U4RjVFOSNDOEU2QzkjQTVENkE3IzgxQzc4NCM2NkJCNkEjNENBRjUwIzQzQTA0NyMzODhFM0MjMkU3RDMyIzFCNUUyMCNCOUY2Q0EjNjlGMEFFIzAwRTY3NiMwMEM4NTMiLHE9IiNGMUY4RTkjRENFREM4I0M1RTFBNSNBRUQ1ODEjOUNDQzY1IzhCQzM0QSM3Q0IzNDIjNjg5RjM4IzU1OEIyRiMzMzY5MUUjQ0NGRjkwI0IyRkY1OSM3NkZGMDMjNjRERDE3IixyPSIjRjlGQkU3I0YwRjRDMyNFNkVFOUMjRENFNzc1I0Q0RTE1NyNDRERDMzkjQzBDQTMzI0FGQjQyQiM5RTlEMjQjODI3NzE3I0Y0RkY4MSNFRUZGNDEjQzZGRjAwI0FFRUEwMCIscz0iI0ZGRkRFNyNGRkY5QzQjRkZGNTlEI0ZGRjE3NiNGRkVFNTgjRkZFQjNCI0ZERDgzNSNGQkMwMkQjRjlBODI1I0Y1N0YxNyNGRkZGOEQjRkZGRjAwI0ZGRUEwMCNGRkQ2MDAiLHQ9IiNGRkY4RTEjRkZFQ0IzI0ZGRTA4MiNGRkQ1NEYjRkZDQTI4I0ZGQzEwNyNGRkIzMDAjRkZBMDAwI0ZGOEYwMCNGRjZGMDAjRkZFNTdGI0ZGRDc0MCNGRkM0MDAjRkZBQjAwIix1PSIjRkZGM0UwI0ZGRTBCMiNGRkNDODAjRkZCNzREI0ZGQTcyNiNGRjk4MDAjRkI4QzAwI0Y1N0MwMCNFRjZDMDAjRTY1MTAwI0ZGRDE4MCNGRkFCNDAjRkY5MTAwI0ZGNkQwMCIsdj0iI0ZCRTlFNyNGRkNDQkMjRkZBQjkxI0ZGOEE2NSNGRjcwNDMjRkY1NzIyI0Y0NTExRSNFNjRBMTkjRDg0MzE1I0JGMzYwQyNGRjlFODAjRkY2RTQwI0ZGM0QwMCNERDJDMDAiLHc9IiNFRkVCRTkjRDdDQ0M4I0JDQUFBNCNBMTg4N0YjOEQ2RTYzIzc5NTU0OCM2RDRDNDEjNUQ0MDM3IzRFMzQyRSMzRTI3MjMiLHg9IiNGQUZBRkEjRjVGNUY1I0VFRUVFRSNFMEUwRTAjQkRCREJEIzlFOUU5RSM3NTc1NzUjNjE2MTYxIzQyNDI0MiMyMTIxMjEiLHk9IiNFQ0VGRjEjQ0ZEOERDI0IwQkVDNSM5MEE0QUUjNzg5MDlDIzYwN0Q4QiM1NDZFN0EjNDU1QTY0IzM3NDc0RiMyNjMyMzgiO2IubXVpPXt9LGIuZmxhdD17fSxiLm11aS5yZWQ9ZihnKSxiLm11aS5waW5rPWYoaCksYi5tdWkucHVycGxlPWYoaSksYi5tdWkuZGVlcHB1cnBsZT1mKGopLGIubXVpLmluZGlnbz1mKGspLGIubXVpLmJsdWU9ZihsKSxiLm11aS5saWdodGJsdWU9ZihtKSxiLm11aS5jeWFuPWYobiksYi5tdWkudGVhbD1mKG8pLGIubXVpLmdyZWVuPWYocCksYi5tdWkubGlnaHRncmVlbj1mKHEpLGIubXVpLmxpbWU9ZihyKSxiLm11aS55ZWxsb3c9ZihzKSxiLm11aS5hbWJlcj1mKHQpLGIubXVpLm9yYW5nZT1mKHUpLGIubXVpLmRlZXBvcmFuZ2U9Zih2KSxiLm11aS5icm93bj1mKHcpLGIubXVpLmdyZXk9Zih4KSxiLm11aS5ibHVlZ3JleT1mKHkpLGIuZmxhdC50dXJxdW9pc2U9IiMxYWJjOWMiLGIuZmxhdC5ncmVlbnNlYT0iIzE2YTA4NSIsYi5mbGF0LnN1bmZsb3dlcj0iI2YxYzQwZiIsYi5mbGF0Lm9yYW5nZT0iI2YzOWMxMiIsYi5mbGF0LmVtZXJsYW5kPSIjMmVjYzcxIixiLmZsYXQubmVwaHJpdGlzPSIjMjdhZTYwIixiLmZsYXQuY2Fycm90PSIjZTY3ZTIyIixiLmZsYXQucHVtcGtpbj0iI2QzNTQwMCIsYi5mbGF0LnBldGVycml2ZXI9IiMzNDk4ZGIiLGIuZmxhdC5iZWxpemVob2xlPSIjMjk4MGI5IixiLmZsYXQuYWxpemFyaW49IiNlNzRjM2MiLGIuZmxhdC5wb21lZ3JhbmF0ZT0iI2MwMzkyYiIsYi5mbGF0LmFtZXRoeXN0PSIjOWI1OWI2IixiLmZsYXQud2lzdGVyaWE9IiM4ZTQ0YWQiLGIuZmxhdC5jbG91ZHM9IiNlY2YwZjEiLGIuZmxhdC5zaWx2ZXI9IiNiZGMzYzciLGIuZmxhdC53ZXRhc3BoYWx0PSIjMzQ0OTVlIixiLmZsYXQubWlkbmlnaHRibHVlPSIjMmMzZTUwIixiLmZsYXQuY29uY3JldGU9IiM5NWE1YTYiLGIuZmxhdC5hc2Jlc3Rvcz0iIzdmOGM4ZCIsYi5pbXBvcnRNVUlDb2xvcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGMgaW4gYi5tdWkpYi5tdWkuaGFzT3duUHJvcGVydHkoYykmJihhW2NdPWIubXVpW2NdKX19KSxkfSk7"}]},{"name":"Github 增强 - 高速下载","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://github.com/*","*://hub.fastgit.org/*"],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"xiu2_menu_raw_fast":"n3"},"ts":1631245412746},"enabled":false,"position":10,"file_url":"https://greasyfork.org/scripts/412245-github-%E5%A2%9E%E5%BC%BA-%E9%AB%98%E9%80%9F%E4%B8%8B%E8%BD%BD/code/Github%20%E5%A2%9E%E5%BC%BA%20-%20%E9%AB%98%E9%80%9F%E4%B8%8B%E8%BD%BD.user.js","uuid":"b2494f88-aa30-49c0-9f14-157b5dc46863","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBHaXRodWIg5aKe5by6IC0g6auY6YCf5LiL6L29Ci8vIEB2ZXJzaW9uICAgICAgMS42LjIKLy8gQGF1dGhvciAgICAgICBYLkkuVQovLyBAZGVzY3JpcHRpb24gIOmrmOmAn+S4i+i9vSBHaXQgQ2xvbmUvU1NI44CBUmVsZWFzZeOAgVJhd+OAgUNvZGUoWklQKSDnrYnmlofku7bjgIHpobnnm67liJfooajljZXmlofku7blv6vmjbfkuIvovb0gKOKYgSkKLy8gQG1hdGNoICAgICAgICAqOi8vZ2l0aHViLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovL2h1Yi5mYXN0Z2l0Lm9yZy8qCi8vIEBpY29uICAgICAgICAgaHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDMvMzAvVUxWOVh1bmFIZXNxR0lSLnBuZwovLyBAZ3JhbnQgICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQGdyYW50ICAgICAgICBHTV91bnJlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQGdyYW50ICAgICAgICBHTV9vcGVuSW5UYWIKLy8gQGdyYW50ICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fbm90aWZpY2F0aW9uCi8vIEBsaWNlbnNlICAgICAgR1BMLTMuMCBMaWNlbnNlCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtZW5kCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzQxMjI0NQovLyBAc3VwcG9ydFVSTCAgIGh0dHBzOi8vZ2l0aHViLmNvbS9YSVUyL1VzZXJTY3JpcHQKLy8gQGhvbWVwYWdlVVJMICBodHRwczovL2dpdGh1Yi5jb20vWElVMi9Vc2VyU2NyaXB0Ci8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgdmFyIGJhY2tDb2xvciA9ICcjZmZmZmZmJzsKICAgIHZhciBmb250Q29sb3IgPSAnIzg4ODg4OCc7CiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sb3ItbW9kZScpID09PSAnZGFyaycpIHsgLy8g6buR5pqX5qih5byP5Yik5patCiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLWRhcmstdGhlbWUnKSA9PT0gJ2RhcmtfZGltbWVkJykgewogICAgICAgICAgICBiYWNrQ29sb3IgPSAnIzI3MmUzNyc7CiAgICAgICAgICAgIGZvbnRDb2xvciA9ICcjNzY4MzkwJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBiYWNrQ29sb3IgPSAnIzE2MWEyMSc7CiAgICAgICAgICAgIGZvbnRDb2xvciA9ICcjOTdhMGFhJzsKICAgICAgICB9CiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLWNvbG9yLW1vZGUnKSA9PT0gJ2F1dG8nKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZyh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5iYWNrZ3JvdW5kQ29sb3IpCiAgICAgICAgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmJhY2tncm91bmRDb2xvciA9PT0gJ3JnYigzNCwgMzksIDQ2KScpIHsKICAgICAgICAgICAgYmFja0NvbG9yID0gJyMyNzJlMzcnOwogICAgICAgICAgICBmb250Q29sb3IgPSAnIzc2ODM5MCc7CiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5iYWNrZ3JvdW5kQ29sb3IgPT09ICdyZ2IoMTMsIDE3LCAyMyknKSB7CiAgICAgICAgICAgIGJhY2tDb2xvciA9ICcjMTYxYTIxJzsKICAgICAgICAgICAgZm9udENvbG9yID0gJyM5N2EwYWEnOwogICAgICAgIH0KICAgIH0KICAgIC8vWydodHRwczovL2dpdC55dW1lbmFrYS5uZXQnLCAn576O5Zu9J10sCiAgICBjb25zdCBkb3dubG9hZF91cmwgPSBbCiAgICAgICAgWydodHRwczovL2doLmFwaS45OTk4ODg2Ni54eXonLCAn576O5Zu9IDEnXSwKICAgICAgICBbJ2h0dHBzOi8vZ2l0aHViLjkxY2hpZnVuLndvcmtlcnMuZGV2JywgJ+e+juWbvSAyJ10sCiAgICAgICAgWydodHRwczovL2doLnhpdTIueHl6JywgJ+e+juWbvSAzJ10sCiAgICAgICAgWydodHRwczovL2doLmFyZ3YuY2MnLCAn576O5Zu9IDQnXSwKICAgICAgICBbJ2h0dHBzOi8vcGQuendjMzY1LmNvbS9zZXR1cmwnLCAn576O5Zu9IDUnXSwKICAgICAgICBbJ2h0dHBzOi8vZG93bmxvYWQuZmFzdGdpdC5vcmcnLCAn5pel5pysJ10sCiAgICAgICAgWydodHRwczovL2docHJveHkuY29tJywgJ+mfqeWbvSddCiAgICBdLAogICAgICAgIGNsb25lX3VybCA9IFsKICAgICAgICAgICAgWydodHRwczovL2h1Yi5mYXN0Z2l0Lm9yZycsICfkuK3lm73pppnmuK8nXSwKICAgICAgICAgICAgWydodHRwczovL2dpdGNsb25lLmNvbScsICfkuK3lm73mtZnmsZ8nXSwKICAgICAgICAgICAgWydodHRwczovL2dpdGh1Yi5jb20uY25wbWpzLm9yZycsICfmlrDliqDlnaEnXQogICAgICAgIF0sCiAgICAgICAgY2xvbmVfc3NoX3VybCA9IFsKICAgICAgICAgICAgWydnaXRAZ2l0LnpobGg2LmNuJywgJ+S4reWbveWMl+S6rCddLAogICAgICAgICAgICBbJ2dpdEBodWIuZmFzdGdpdC5vcmcnLCAn5Lit5Zu96aaZ5rivJ10KICAgICAgICBdLAogICAgICAgIHJhd191cmwgPSBbCiAgICAgICAgICAgIFsnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tJywgJ0dpdGh1YiDljp/nlJ8nLCcnXSwKICAgICAgICAgICAgWydodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQnLCfkuK3lm73lm73lhoUnLCAn5rOo5oSP77ya6K+l5Yqg6YCf5rqQ5a2Y5Zyo57yT5a2Y5py65Yi277yIMjTlsI/ml7bvvInvvIzmiYDku6Xmlofku7blj6/og73kuI3mmK/mnIDmlrDjgIImIzEwO+azqOaEj++8muW9k+WJjeWIhuaUr+aJgOacieaWh+S7tuaAu+aWh+S7tuWkp+Wwj+i2hei/hyA1ME1CIOaXtu+8jOivpeWKoOmAn+a6kOS4jeWPr+eUqOOAgiYjMTA75rOo5oSP77ya5b2T5YmN5YiG5pSv5ZCN5Li654mI5pys5Y+35qC85byP5pe277yI5aaCIHYxLjIuM++8ie+8jOivpemrmOmAn+S4i+i9vemTvuaOpeWboOagvOW8j+mZkOWItuS4jeWPr+eUqOOAgiddLAogICAgICAgICAgICBbJ2h0dHBzOi8vcmF3LmZhc3RnaXQub3JnJywn5Lit5Zu96aaZ5rivJywgJ+azqOaEj++8muWNleS4quaWh+S7tuWkquWkp+aXtuWPr+iDveS8muaPkOekuui2heaXtu+8iOWunuaXtuiOt+WPluS4re+8ie+8jOivt+mHjeivleOAgiddLAogICAgICAgICAgICBbJ2h0dHBzOi8vY2RuLnN0YXRpY2FseS5jb20nLCfml6XmnKzkuJzkuqwnLCAn5rOo5oSP77ya6K+l5Yqg6YCf5piv5YWo55CDIEFueWNhc3QgQ0RO77yM5Zu95YaF5LiA6Iis5YiG6YWN5Yiw5pel5pys6IqC54K544CCJ10sCiAgICAgICAgICAgIFsnaHR0cHM6Ly9naHByb3h5LmNvbScsJ+mfqeWbvemmluWwlCcsICcnXQogICAgICAgIF0sCiAgICAgICAgc3ZnID0gWwogICAgICAgICAgICAnPHN2ZyBjbGFzcz0ib2N0aWNvbiBvY3RpY29uLWZpbGUtemlwIG1yLTIiIGFyaWEtaGlkZGVuPSJ0cnVlIiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTYgMTYiIHZlcnNpb249IjEuMSIgd2lkdGg9IjE2IiBkYXRhLXZpZXctY29tcG9uZW50PSJ0cnVlIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zLjUgMS43NWEuMjUuMjUgMCAwMS4yNS0uMjVoM2EuNzUuNzUgMCAwMDAgMS41aC41YS43NS43NSAwIDAwMC0xLjVoMi4wODZhLjI1LjI1IDAgMDEuMTc3LjA3M2wyLjkxNCAyLjkxNGEuMjUuMjUgMCAwMS4wNzMuMTc3djguNTg2YS4yNS4yNSAwIDAxLS4yNS4yNWgtLjVhLjc1Ljc1IDAgMDAwIDEuNWguNUExLjc1IDEuNzUgMCAwMDE0IDEzLjI1VjQuNjY0YzAtLjQ2NC0uMTg0LS45MDktLjUxMy0xLjIzN0wxMC41NzMuNTEzQTEuNzUgMS43NSAwIDAwOS4zMzYgMEgzLjc1QTEuNzUgMS43NSAwIDAwMiAxLjc1djExLjVjMCAuNjQ5LjM1MyAxLjIxNC44NzQgMS41MTVhLjc1Ljc1IDAgMTAuNzUyLTEuMjk4LjI1LjI1IDAgMDEtLjEyNi0uMjE3VjEuNzV6TTguNzUgM2EuNzUuNzUgMCAwMDAgMS41aC41YS43NS43NSAwIDAwMC0xLjVoLS41ek02IDUuMjVhLjc1Ljc1IDAgMDEuNzUtLjc1aC41YS43NS43NSAwIDAxMCAxLjVoLS41QS43NS43NSAwIDAxNiA1LjI1em0yIDEuNUEuNzUuNzUgMCAwMTguNzUgNmguNWEuNzUuNzUgMCAwMTAgMS41aC0uNUEuNzUuNzUgMCAwMTggNi43NXptLTEuMjUuNzVhLjc1Ljc1IDAgMDAwIDEuNWguNWEuNzUuNzUgMCAwMDAtMS41aC0uNXpNOCA5Ljc1QS43NS43NSAwIDAxOC43NSA5aC41YS43NS43NSAwIDAxMCAxLjVoLS41QS43NS43NSAwIDAxOCA5Ljc1em0tLjc1Ljc1YTEuNzUgMS43NSAwIDAwLTEuNzUgMS43NXYzYzAgLjQxNC4zMzYuNzUuNzUuNzVoMi41YS43NS43NSAwIDAwLjc1LS43NXYtM2ExLjc1IDEuNzUgMCAwMC0xLjc1LTEuNzVoLS41ek03IDEyLjI1YS4yNS4yNSAwIDAxLjI1LS4yNWguNWEuMjUuMjUgMCAwMS4yNS4yNXYyLjI1SDd2LTIuMjV6Ij48L3BhdGg+PC9zdmc+JywKICAgICAgICAgICAgJzxzdmcgYXJpYS1oaWRkZW49InRydWUiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMTYiIGRhdGEtdmlldy1jb21wb25lbnQ9InRydWUiIGNsYXNzPSJvY3RpY29uIG9jdGljb24tcGFzdGUganMtY2xpcGJvYXJkLWNsaXBweS1pY29uIGQtaW5saW5lLWJsb2NrIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ljc1IDFhLjc1Ljc1IDAgMDAtLjc1Ljc1djNjMCAuNDE0LjMzNi43NS43NS43NWg0LjVhLjc1Ljc1IDAgMDAuNzUtLjc1di0zYS43NS43NSAwIDAwLS43NS0uNzVoLTQuNXptLjc1IDNWMi41aDNWNGgtM3ptLTIuODc0LS40NjdhLjc1Ljc1IDAgMDAtLjc1Mi0xLjI5OEExLjc1IDEuNzUgMCAwMDIgMy43NXY5LjVjMCAuOTY2Ljc4NCAxLjc1IDEuNzUgMS43NWg4LjVBMS43NSAxLjc1IDAgMDAxNCAxMy4yNXYtOS41YTEuNzUgMS43NSAwIDAwLS44NzQtMS41MTUuNzUuNzUgMCAxMC0uNzUyIDEuMjk4LjI1LjI1IDAgMDEuMTI2LjIxN3Y5LjVhLjI1LjI1IDAgMDEtLjI1LjI1aC04LjVhLjI1LjI1IDAgMDEtLjI1LS4yNXYtOS41YS4yNS4yNSAwIDAxLjEyNi0uMjE3eiI+PC9wYXRoPjwvc3ZnPjxzdmcgYXJpYS1oaWRkZW49InRydWUiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMTYiIGRhdGEtdmlldy1jb21wb25lbnQ9InRydWUiIGNsYXNzPSJvY3RpY29uIG9jdGljb24tY2hlY2sganMtY2xpcGJvYXJkLWNoZWNrLWljb24gY29sb3ItdGV4dC1zdWNjZXNzIGQtaW5saW5lLWJsb2NrIGQtc20tbm9uZSI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTMuNzggNC4yMmEuNzUuNzUgMCAwMTAgMS4wNmwtNy4yNSA3LjI1YS43NS43NSAwIDAxLTEuMDYgMEwyLjIyIDkuMjhhLjc1Ljc1IDAgMDExLjA2LTEuMDZMNiAxMC45NGw2LjcyLTYuNzJhLjc1Ljc1IDAgMDExLjA2IDB6Ij48L3BhdGg+PC9zdmc+JywKICAgICAgICAgICAgJzxzdmcgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jbG91ZC1kb3dubG9hZCIgYXJpYS1oaWRkZW49InRydWUiIGhlaWdodD0iMTYiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGQ9Ik05IDEyaDJsLTMgMy0zLTNoMlY3aDJ2NXptMy04YzAtLjQ0LS45MS0zLTQuNS0zQzUuMDggMSAzIDIuOTIgMyA1IDEuMDIgNSAwIDYuNTIgMCA4YzAgMS41MyAxIDMgMyAzaDNWOS43SDNDMS4zOCA5LjcgMS4zIDguMjggMS4zIDhjMC0uMTcuMDUtMS43IDEuNy0xLjdoMS4zVjVjMC0xLjM5IDEuNTYtMi43IDMuMi0yLjcgMi41NSAwIDMuMTMgMS41NSAzLjIgMS44djEuMkgxMmMuODEgMCAyLjcuMjIgMi43IDIuMiAwIDIuMDktMi4yNSAyLjItMi43IDIuMmgtMlYxMWgyYzIuMDggMCA0LTEuMTYgNC0zLjVDMTYgNS4wNiAxNC4wOCA0IDEyIDR6Ij48L3BhdGg+PC9zdmc+JwogICAgICAgIF0sCiAgICAgICAgc3R5bGUgPSBbJ3BhZGRpbmc6MCA2cHg7bWFyZ2luLXJpZ2h0OiAtMXB4O2JvcmRlci1yYWRpdXM6IDJweDtiYWNrZ3JvdW5kLWNvbG9yOiAnK2JhY2tDb2xvcisnO2JvcmRlci1jb2xvcjogcmdiYSgyNywgMzEsIDM1LCAwLjEpO2ZvbnQtc2l6ZTogMTFweDtjb2xvcjogJytmb250Q29sb3IrJzsnXTsKICAgICAgICB2YXIgbWVudV9yYXdfZmFzdCA9IEdNX2dldFZhbHVlKCd4aXUyX21lbnVfcmF3X2Zhc3QnKSwgbWVudV9tZW51X3Jhd19mYXN0X0lELCBtZW51X2ZlZWRCYWNrX0lEOwogICAgaWYgKG1lbnVfcmF3X2Zhc3QgPT0gbnVsbCl7bWVudV9yYXdfZmFzdCA9IDE7IEdNX3NldFZhbHVlKCd4aXUyX21lbnVfcmF3X2Zhc3QnLCAxKX07CgogICAgcmVnaXN0ZXJNZW51Q29tbWFuZCgpOwogICAgLy8g5rOo5YaM6ISa5pys6I+c5Y2VCiAgICBmdW5jdGlvbiByZWdpc3Rlck1lbnVDb21tYW5kKCkgewogICAgICAgIGlmIChtZW51X2ZlZWRCYWNrX0lEKSB7IC8vIOWmguaenOWPjemmiOiPnOWNlUlE5LiN5pivIG51bGzvvIzliJnliKDpmaTmiYDmnInohJrmnKzoj5zljZUKICAgICAgICAgICAgR01fdW5yZWdpc3Rlck1lbnVDb21tYW5kKG1lbnVfbWVudV9yYXdfZmFzdF9JRCk7CiAgICAgICAgICAgIEdNX3VucmVnaXN0ZXJNZW51Q29tbWFuZChtZW51X2ZlZWRCYWNrX0lEKTsKICAgICAgICAgICAgbWVudV9yYXdfZmFzdCA9IEdNX2dldFZhbHVlKCd4aXUyX21lbnVfcmF3X2Zhc3QnKTsKICAgICAgICB9CiAgICAgICAgaWYgKG1lbnVfcmF3X2Zhc3QgPiByYXdfdXJsLmxlbmd0aCAtIDEpIHsgLy8g6YG/5YWN5Zyo5YeP5bCRIHJhdyDmlbDnu4TlkI7vvIznlKjmiLflgqjlrZjnmoTmlbDmja7lpKfkuo7mlbDnu4TogIzmiqXplJkKICAgICAgICAgICAgbWVudV9yYXdfZmFzdCA9IDAKICAgICAgICB9CiAgICAgICAgbWVudV9tZW51X3Jhd19mYXN0X0lEID0gR01fcmVnaXN0ZXJNZW51Q29tbWFuZChgJHttZW51X251bShtZW51X3Jhd19mYXN0KX0gWyAke3Jhd191cmxbbWVudV9yYXdfZmFzdF1bMV19IF0g5Yqg6YCf5rqQICjimIEpIC0g54K55Ye75YiH5o2iYCwgbWVudV90b2dnbGVfcmF3X2Zhc3QpOwogICAgICAgIG1lbnVfZmVlZEJhY2tfSUQgPSBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCfwn5KsIOWPjemmiCAmIOW7uuiuriBbR2l0aHViXScsIGZ1bmN0aW9uICgpIHt3aW5kb3cuR01fb3BlbkluVGFiKCdodHRwczovL2dpdGh1Yi5jb20vWElVMi9Vc2VyU2NyaXB0Jywge2FjdGl2ZTogdHJ1ZSxpbnNlcnQ6IHRydWUsc2V0UGFyZW50OiB0cnVlfSk7d2luZG93LkdNX29wZW5JblRhYignaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi9zY3JpcHRzLzQxMjI0NS9mZWVkYmFjaycsIHthY3RpdmU6IHRydWUsaW5zZXJ0OiB0cnVlLHNldFBhcmVudDogdHJ1ZX0pO30pOwogICAgfQoKICAgIC8vIOWIh+aNouWKoOmAn+a6kAogICAgZnVuY3Rpb24gbWVudV90b2dnbGVfcmF3X2Zhc3QoKSB7CiAgICAgICAgaWYgKG1lbnVfcmF3X2Zhc3QgPj0gcmF3X3VybC5sZW5ndGggLSAxKSB7IC8vIOWmguaenOW9k+WJjeWKoOmAn+a6kOS9jee9ruWkp+S6juetieS6juWKoOmAn+a6kOaAu+aVsO+8jOWImeaUueS4uuesrOS4gOS4quWKoOmAn+a6kO+8jOWPjeS5i+mAkuWinuS4i+S4gOS4quWKoOmAn+a6kAogICAgICAgICAgICBtZW51X3Jhd19mYXN0ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtZW51X3Jhd19mYXN0ICs9IDE7CiAgICAgICAgfQogICAgICAgIEdNX3NldFZhbHVlKCd4aXUyX21lbnVfcmF3X2Zhc3QnLCBtZW51X3Jhd19mYXN0KTsKICAgICAgICBkZWxSYXdEb3duTGluaygpOyAvLyDliKDpmaTml6fliqDpgJ/mupAKICAgICAgICBhZGRSYXdEb3duTGluaygpOyAvLyDmt7vliqDmlrDliqDpgJ/mupAKICAgICAgICBHTV9ub3RpZmljYXRpb24oe3RleHQ6ICLlt7LliIfmjaLliqDpgJ/mupDkuLrvvJoiICsgcmF3X3VybFttZW51X3Jhd19mYXN0XVsxXSwgdGltZW91dDogMzAwMH0pOyAvLyDmj5DnpLrmtojmga8KICAgICAgICByZWdpc3Rlck1lbnVDb21tYW5kKCk7IC8vIOmHjeaWsOazqOWGjOiEmuacrOiPnOWNlQogICAgfTsKCiAgICAvLyDoj5zljZXmlbDlrZflm77moIcKICAgIGZ1bmN0aW9uIG1lbnVfbnVtKG51bSkgewogICAgICAgIHJldHVybiBbJzDvuI/ig6MnLCcx77iP4oOjJywnMu+4j+KDoycsJzPvuI/ig6MnLCc077iP4oOjJywnNe+4j+KDoycsJzbvuI/ig6MnLCc377iP4oOjJywnOO+4j+KDoycsJznvuI/ig6MnLCfwn5SfJ11bbnVtXQogICAgfQoKICAgIGFkZFJlbGVhc2UoKTsgLy8gICAgICAgICAgICAgICAgICAgICBSZWxlYXNlIOWKoOmAnwogICAgc2V0VGltZW91dChhZGREb3dubG9hZFpJUCwgMjAwMCk7IC8vIERvd25sb2FkIFpJUCDliqDpgJ8KICAgIHNldFRpbWVvdXQoYWRkR2l0Q2xvbmUsIDIwMDApOyAvLyAgICBHaXQgQ2xvbmUg5Yqg6YCfCiAgICBzZXRUaW1lb3V0KGFkZEdpdENsb25lU1NILCAyMDAwKTsgLy8gR2l0IENsb25lIFNTSCDliqDpgJ8KICAgIGFkZFJhd0ZpbGUoKTsgLy8gICAgICAgICAgICAgICAgICAgICBSYXcg5Yqg6YCfCiAgICBzZXRUaW1lb3V0KGFkZFJhd0Rvd25MaW5rLCAyMDAwKTsgLy8g5re75YqgIFJhdyDkuIvovb3pk77mjqXvvIjimIHvvInvvIzlu7bov58gMiDnp5LmiafooYzvvIzpgb/lhY3ooqsgcGpheCDliLfmjokKCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwamF4OnN1Y2Nlc3MnLGZ1bmN0aW9uKCl7IC8vIHBqYXgg5LqL5Lu25Y+R55Sf5ZCOCiAgICAgICAgYWRkUmVsZWFzZSgpOyAvLyAgICAgICAgICAgICAgICAgICAgIFJlbGVhc2Ug5Yqg6YCfCiAgICAgICAgc2V0VGltZW91dChhZGREb3dubG9hZFpJUCwgMjAwMCk7IC8vIERvd25sb2FkIFpJUCDliqDpgJ8KICAgICAgICBzZXRUaW1lb3V0KGFkZEdpdENsb25lLCAyMDAwKTsgLy8gICAgR2l0IENsb25lIOWKoOmAnwogICAgICAgIHNldFRpbWVvdXQoYWRkR2l0Q2xvbmVTU0gsIDIwMDApOyAvLyBHaXQgQ2xvbmUgU1NIIOWKoOmAnwogICAgICAgIGFkZFJhd0ZpbGUoKTsgLy8gICAgICAgICAgICAgICAgICAgICBSYXcg5Yqg6YCfCiAgICAgICAgc2V0VGltZW91dChhZGRSYXdEb3duTGluaywgMjAwMCk7IC8vIOa3u+WKoCBSYXcg5LiL6L296ZO+5o6l77yI4piB77yJ77yM5bu26L+fIDIg56eS5omn6KGM77yM6YG/5YWN6KKrIHBqYXgg5Yi35o6JCiAgICB9KTsKCiAgICBhZGRMb2NhdGlvbmNoYW5nZSgpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvY2F0aW9uY2hhbmdlJywgZnVuY3Rpb24oKXsKICAgICAgICBhZGRSYXdEb3duTGlua18oKTsgLy8g5Zyo5rWP6KeI5Zmo6L+U5ZueL+WJjei/m+aXtumHjeaWsOa3u+WKoCBSYXcg5LiL6L296ZO+5o6l77yI4piB77yJ5LqL5Lu2CiAgICB9KQoKCiAgICAvLyBSZWxlYXNlCiAgICBmdW5jdGlvbiBhZGRSZWxlYXNlKCkgewogICAgICAgIGxldCBodG1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnQm94IEJveC0tY29uZGVuc2VkJyk7aWYgKCFodG1sKSByZXR1cm4KICAgICAgICBsZXQgZGl2RGlzcGxheTsKICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoID4gMTAwMCkgewogICAgICAgICAgICBkaXZEaXNwbGF5ID0gJ2Rpc3BsYXk6IGZsZXg7JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkaXZEaXNwbGF5ID0gJ2Rpc3BsYXk6IGJsb2NrOyc7CiAgICAgICAgfQogICAgICAgIEFycmF5LmZyb20oaHRtbCkuZm9yRWFjaChmdW5jdGlvbiAoY3VycmVudCkgewogICAgICAgICAgICBjdXJyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kLWZsZXguQm94LWJvZHkgPiBhJykuZm9yRWFjaChmdW5jdGlvbiAoX3RoaXMpIHsKICAgICAgICAgICAgICAgIGxldCBocmVmID0gX3RoaXMuaHJlZi5zcGxpdChsb2NhdGlvbi5ob3N0KSwKICAgICAgICAgICAgICAgICAgICB1cmwgPSBbXSwKICAgICAgICAgICAgICAgICAgICBfaHRtbCA9IGA8ZGl2IHN0eWxlPSIke2RpdkRpc3BsYXl9anVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPmA7CgogICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wO2k8ZG93bmxvYWRfdXJsLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgIGlmIChkb3dubG9hZF91cmxbaV1bMF0gPT09ICdodHRwczovL2Rvd25sb2FkLmZhc3RnaXQub3JnJykgewogICAgICAgICAgICAgICAgICAgICAgICB1cmxbaV0gPSBkb3dubG9hZF91cmxbaV1bMF0gKyBocmVmWzFdCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsW2ldID0gZG93bmxvYWRfdXJsW2ldWzBdICsgJy8nICsgX3RoaXMuaHJlZgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24uaG9zdCA9PT0gJ2h1Yi5mYXN0Z2l0Lm9yZycpIHVybFtpXSA9IHVybFtpXS5yZXBsYWNlKCdodWIuZmFzdGdpdC5vcmcnLCdnaXRodWIuY29tJykKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpPTA7aTx1cmwubGVuZ3RoO2krKykgewogICAgICAgICAgICAgICAgICAgIF9odG1sICs9IGA8YSBzdHlsZT0iJHtzdHlsZVswXX0iIGNsYXNzPSJidG4iIGhyZWY9IiR7dXJsW2ldfSIgcmVsPSJub3JlZmVycmVyIG5vb3BlbmVyIG5vZm9sbG93Ij4ke2Rvd25sb2FkX3VybFtpXVsxXX08L2E+YAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX2h0bWwgKz0gYDwvZGl2PmAKICAgICAgICAgICAgICAgIF90aGlzLm5leHRFbGVtZW50U2libGluZy5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgX2h0bWwpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8g5L+u5pS5W+aWh+S7tuWkp+Wwj13lhYPntKDmoLflvI8KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc21hbGwucGwtMi5jb2xvci10ZXh0LXNlY29uZGFyeS5mbGV4LXNocmluay0wJykuZm9yRWFjaChlbD0+e2VsLnN0eWxlLmNzc1RleHQ9J2Rpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7IGZsZXgtZ3JvdzogMTsgbWFyZ2luLXJpZ2h0OiA4cHg7J30pOwoKCiAgICAgICAgICAgIC8vIFNvdXJjZSBDb2RlCiAgICAgICAgICAgIGN1cnJlbnQucXVlcnlTZWxlY3RvckFsbCgnLmQtYmxvY2suQm94LWJvZHkgPiBhJykuZm9yRWFjaChmdW5jdGlvbiAoX3RoaXMpIHsKICAgICAgICAgICAgICAgIGxldCBocmVmID0gX3RoaXMuaHJlZi5zcGxpdChsb2NhdGlvbi5ob3N0KSwKICAgICAgICAgICAgICAgICAgICB1cmwgPSBbXSwKICAgICAgICAgICAgICAgICAgICBfaHRtbCA9IGA8ZGl2IHN0eWxlPSIke2RpdkRpc3BsYXl9anVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtmbGV4LWdyb3c6IDE7Ij5gOwoKICAgICAgICAgICAgICAgIGZvciAobGV0IGk9MDtpPGRvd25sb2FkX3VybC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICBpZiAoZG93bmxvYWRfdXJsW2ldWzBdID09PSAnaHR0cHM6Ly9kb3dubG9hZC5mYXN0Z2l0Lm9yZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsW2ldID0gZG93bmxvYWRfdXJsW2ldWzBdICsgaHJlZlsxXQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybFtpXSA9IGRvd25sb2FkX3VybFtpXVswXSArICcvJyArIF90aGlzLmhyZWYKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhvc3QgPT09ICdodWIuZmFzdGdpdC5vcmcnKSB1cmxbaV0gPSB1cmxbaV0ucmVwbGFjZSgnaHViLmZhc3RnaXQub3JnJywnZ2l0aHViLmNvbScpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wO2k8dXJsLmxlbmd0aDtpKyspIHsKICAgICAgICAgICAgICAgICAgICBfaHRtbCArPSBgPGEgc3R5bGU9IiR7c3R5bGVbMF19IiBjbGFzcz0iYnRuIiBocmVmPSIke3VybFtpXX0iIHJlbD0ibm9yZWZlcnJlciBub29wZW5lciBub2ZvbGxvdyI+JHtkb3dubG9hZF91cmxbaV1bMV19PC9hPmAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9odG1sICs9IGA8L2Rpdj5gCiAgICAgICAgICAgICAgICBfdGhpcy5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgX2h0bWwpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICAvLyDkv67mlLkgU291cmNlIGNvZGUg5qC35byP77yM5L2/5YW25ZKM5Yqg6YCf5oyJ6ZKu5bm25YiX5LiA5o6SCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmQtYmxvY2sucHktMS5weS1tZC0yLkJveC1ib2R5LnB4LTInKS5mb3JFYWNoKGVsPT57ZWwuY2xhc3NOYW1lPSdkLWZsZXggcHktMSBweS1tZC0yIEJveC1ib2R5IHB4LTInfSk7CiAgICB9CgoKICAgIC8vIERvd25sb2FkIFpJUAogICAgZnVuY3Rpb24gYWRkRG93bmxvYWRaSVAoKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5YSVUyLURaJykpIHJldHVybgogICAgICAgIGxldCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUuZHJvcGRvd24tbWVudS1zdy5wLTAgdWwgbGk6bGFzdC1jaGlsZCcpO2lmICghaHRtbCkgcmV0dXJuCiAgICAgICAgbGV0IGhyZWYgPSBodG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJylbMF0uaHJlZiwKICAgICAgICAgICAgdXJsID0gW10sCiAgICAgICAgICAgIF9odG1sID0gYGA7CgogICAgICAgIGZvciAobGV0IGk9MDtpPGRvd25sb2FkX3VybC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgaWYgKGRvd25sb2FkX3VybFtpXVswXSA9PT0gJ2h0dHBzOi8vZG93bmxvYWQuZmFzdGdpdC5vcmcnKSB7CiAgICAgICAgICAgICAgICB1cmxbaV0gPSBkb3dubG9hZF91cmxbaV1bMF0gKyBocmVmLnNwbGl0KGxvY2F0aW9uLmhvc3QpWzFdCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB1cmxbaV0gPSBkb3dubG9hZF91cmxbaV1bMF0gKyAnLycgKyBocmVmCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhvc3QgPT09ICdodWIuZmFzdGdpdC5vcmcnKSB1cmxbaV0gPSB1cmxbaV0ucmVwbGFjZSgnaHViLmZhc3RnaXQub3JnJywnZ2l0aHViLmNvbScpCiAgICAgICAgfQoKICAgICAgICBmb3IgKGxldCBpPTA7aTx1cmwubGVuZ3RoO2krKykgewogICAgICAgICAgICBfaHRtbCArPSBgPGxpIGNsYXNzPSJCb3gtcm93IEJveC1yb3ctLWhvdmVyLWdyYXkgcC0zIG10LTAgWElVMi1EWiI+PGEgY2xhc3M9ImQtZmxleCBmbGV4LWl0ZW1zLWNlbnRlciBjb2xvci10ZXh0LXByaW1hcnkgdGV4dC1ib2xkIG5vLXVuZGVybGluZSIgcmVsPSJub2ZvbGxvdyIgaHJlZj0iJHt1cmxbaV19Ij4ke3N2Z1swXX1Eb3dubG9hZCBaSVAgJHtkb3dubG9hZF91cmxbaV1bMV19PC9hPjwvbGk+YAogICAgICAgIH0KICAgICAgICBodG1sLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBfaHRtbCk7CiAgICB9CgoKICAgIC8vIEdpdCBDbG9uZQogICAgZnVuY3Rpb24gYWRkR2l0Q2xvbmUoKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5YSVUyLUdDJykpIHJldHVybgogICAgICAgIGxldCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3JvbGU9InRhYnBhbmVsIl06bnRoLWNoaWxkKDIpIGRpdi5pbnB1dC1ncm91cCcpO2lmICghaHRtbCkgcmV0dXJuCiAgICAgICAgbGV0IGhyZWZfc3BsaXQgPSBodG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpWzBdLmdldEF0dHJpYnV0ZSgndmFsdWUnKS5zcGxpdChsb2NhdGlvbi5ob3N0KSwKICAgICAgICAgICAgdXJsID0gW10sCiAgICAgICAgICAgIF9odG1sID0gYGA7CgogICAgICAgIGZvciAobGV0IGk9MDtpPGNsb25lX3VybC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgaWYgKGNsb25lX3VybFtpXVswXSA9PT0gJ2h0dHBzOi8vZ2l0Y2xvbmUuY29tJykgewogICAgICAgICAgICAgICAgdXJsW2ldID0gY2xvbmVfdXJsW2ldWzBdICsgJy9naXRodWIuY29tJyArIGhyZWZfc3BsaXRbMV0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHVybFtpXSA9IGNsb25lX3VybFtpXVswXSArIGhyZWZfc3BsaXRbMV0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yIChsZXQgaT0wO2k8dXJsLmxlbmd0aDtpKyspIHsKICAgICAgICAgICAgX2h0bWwgKz0gYDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIFhJVTItR0MiIHN0eWxlPSJtYXJnaW4tdG9wOiA0cHg7IiB0aXRsZT0i5Yqg6YCf5rqQ77yaJHtjbG9uZV91cmxbaV1bMV19IO+8iOeCueWHu+WPr+ebtOaOpeWkjeWItu+8iSI+PGlucHV0IHZhbHVlPSIke3VybFtpXX0iIGFyaWEtbGFiZWw9IiR7dXJsW2ldfSIgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBpbnB1dC1tb25vc3BhY2UgaW5wdXQtc20gY29sb3ItYmctc2Vjb25kYXJ5IiBkYXRhLWF1dG9zZWxlY3Q9IiIgcmVhZG9ubHk9IiI+PGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAtYnV0dG9uIj48Y2xpcGJvYXJkLWNvcHkgdmFsdWU9IiR7dXJsW2ldfSIgYXJpYS1sYWJlbD0iQ29weSB0byBjbGlwYm9hcmQiIGNsYXNzPSJidG4gYnRuLXNtIGpzLWNsaXBib2FyZC1jb3B5IHRvb2x0aXBwZWQtbm8tZGVsYXkgQ2xpcGJvYXJkQnV0dG9uIiB0YWJpbmRleD0iMCIgcm9sZT0iYnV0dG9uIj4ke3N2Z1sxXX08L2NsaXBib2FyZC1jb3B5PjwvZGl2PjwvZGl2PmAKICAgICAgICB9CiAgICAgICAgaHRtbC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgX2h0bWwpOwogICAgfQoKCiAgICAvLyBHaXQgQ2xvbmUgU1NICiAgICBmdW5jdGlvbiBhZGRHaXRDbG9uZVNTSCgpIHsKICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLlhJVTItR0NTJykpIHJldHVybgogICAgICAgIGxldCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3JvbGU9InRhYnBhbmVsIl06bnRoLWNoaWxkKDMpIGRpdi5pbnB1dC1ncm91cCcpO2lmICghaHRtbCkgcmV0dXJuCiAgICAgICAgbGV0IGhyZWZfc3BsaXQgPSBodG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpWzBdLmdldEF0dHJpYnV0ZSgndmFsdWUnKS5zcGxpdCgnOicpLAogICAgICAgICAgICB1cmwgPSBbXSwKICAgICAgICAgICAgX2h0bWwgPSBgYDsKCiAgICAgICAgaWYgKGhyZWZfc3BsaXRbMF0gIT0gJ2dpdEBnaXRodWIuY29tJykgcmV0dXJuCgogICAgICAgIGZvciAobGV0IGk9MDtpPGNsb25lX3NzaF91cmwubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICB1cmxbaV0gPSBjbG9uZV9zc2hfdXJsW2ldWzBdICsgJzonICsgaHJlZl9zcGxpdFsxXQogICAgICAgIH0KCiAgICAgICAgZm9yIChsZXQgaT0wO2k8dXJsLmxlbmd0aDtpKyspIHsKICAgICAgICAgICAgX2h0bWwgKz0gYDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIFhJVTItR0NTIiBzdHlsZT0ibWFyZ2luLXRvcDogNHB4OyIgdGl0bGU9IuWKoOmAn+a6kO+8miR7Y2xvbmVfc3NoX3VybFtpXVsxXX0g77yI54K55Ye75Y+v55u05o6l5aSN5Yi277yJIj48aW5wdXQgdmFsdWU9IiR7dXJsW2ldfSIgYXJpYS1sYWJlbD0iJHt1cmxbaV19IiB0eXBlPSJ0ZXh0IiBjbGFzcz0iZm9ybS1jb250cm9sIGlucHV0LW1vbm9zcGFjZSBpbnB1dC1zbSBjb2xvci1iZy1zZWNvbmRhcnkiIGRhdGEtYXV0b3NlbGVjdD0iIiByZWFkb25seT0iIj48ZGl2IGNsYXNzPSJpbnB1dC1ncm91cC1idXR0b24iPjxjbGlwYm9hcmQtY29weSB2YWx1ZT0iJHt1cmxbaV19IiBhcmlhLWxhYmVsPSJDb3B5IHRvIGNsaXBib2FyZCIgY2xhc3M9ImJ0biBidG4tc20ganMtY2xpcGJvYXJkLWNvcHkgdG9vbHRpcHBlZC1uby1kZWxheSBDbGlwYm9hcmRCdXR0b24iIHRhYmluZGV4PSIwIiByb2xlPSJidXR0b24iPiR7c3ZnWzFdfTwvY2xpcGJvYXJkLWNvcHk+PC9kaXY+PC9kaXY+YAogICAgICAgIH0KICAgICAgICBodG1sLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBfaHRtbCk7CiAgICB9CgoKICAgIC8vIFJhdwogICAgZnVuY3Rpb24gYWRkUmF3RmlsZSgpIHsKICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLlhJVTItUkYnKSkgcmV0dXJuCiAgICAgICAgbGV0IGh0bWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmF3LXVybCcpO2lmICghaHRtbCkgcmV0dXJuCiAgICAgICAgbGV0IGhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoYGh0dHBzOi8vJHtsb2NhdGlvbi5ob3N0fWAsJycpLAogICAgICAgICAgICBocmVmMiA9IGhyZWYucmVwbGFjZSgnL2Jsb2IvJywnLycpLAogICAgICAgICAgICB1cmwgPSBbCiAgICAgICAgICAgICAgICByYXdfdXJsWzFdWzBdICsgJy9naCcgKyBocmVmLnJlcGxhY2UoJy9ibG9iLycsJ0AnKSwKICAgICAgICAgICAgICAgIHJhd191cmxbMl1bMF0gKyBocmVmMiwKICAgICAgICAgICAgICAgIHJhd191cmxbM11bMF0gKyAnL2doJyArIGhyZWYucmVwbGFjZSgnL2Jsb2IvJywnLycpLAogICAgICAgICAgICAgICAgcmF3X3VybFs0XVswXSArICcvJyArIHJhd191cmxbMF1bMF0gKyBocmVmMgogICAgICAgICAgICBdLAogICAgICAgICAgICBfaHRtbCA9IGBgOwogICAgICAgIGZvciAobGV0IGk9MDtpPHVybC5sZW5ndGg7aSsrKSB7CiAgICAgICAgICAgIF9odG1sICs9IGA8YSBocmVmPSIke3VybFtpXX0iIHRpdGxlPSIke3Jhd191cmxbaSsxXVsyXX0iIHRhcmdldD0iX2JsYW5rIiByb2xlPSJidXR0b24iIHJlbD0ibm9yZWZlcnJlciBub29wZW5lciBub2ZvbGxvdyIgY2xhc3M9ImJ0biBidG4tc20gQnRuR3JvdXAtaXRlbSBYSVUyLVJGIj4ke3Jhd191cmxbaSsxXVsxXX08L2E+YAogICAgICAgIH0KICAgICAgICBodG1sLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBfaHRtbCk7CiAgICB9CgoKICAgIC8vIOa3u+WKoCBSYXcg5LiL6L296ZO+5o6l77yI4piB77yJCiAgICBmdW5jdGlvbiBhZGRSYXdEb3duTGluaygpIHsKICAgICAgICAvLyDlpoLmnpzkuI3mmK/pobnnm67mlofku7bpobXpnaLvvIzlsLHov5Tlm57vvIzlpoLmnpznvZHpobXmnIkgUmF3IOS4i+i9vemTvuaOpe+8iOKYge+8ieWwsei/lOWbngogICAgICAgIGxldCBmaWxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5Cb3gtcm93IHN2Zy5vY3RpY29uLm9jdGljb24tZmlsZScpO2lmKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO2lmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCcvdGFncycpID4gLTEpIHJldHVybgogICAgICAgIGxldCBmaWxlczEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhLmZpbGVEb3duTGluaycpO2lmKGZpbGVzMS5sZW5ndGggPiAwKSByZXR1cm47CgogICAgICAgIC8vIOm8oOagh+aMh+WQkeWImeaYvuekugogICAgICAgIHZhciBtb3VzZU92ZXJIYW5kbGVyID0gZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICAgIGxldCBlbGVtID0gZXZ0LmN1cnJlbnRUYXJnZXQsCiAgICAgICAgICAgICAgICBhRWxtX25ldyA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCgnLmZpbGVEb3duTGluaycpLAogICAgICAgICAgICAgICAgYUVsbV9ub3cgPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2Zy5vY3RpY29uLm9jdGljb24tZmlsZS5jb2xvci1pY29uLXRlcnRpYXJ5Jyk7CiAgICAgICAgICAgIGFFbG1fbmV3LmZvckVhY2goZWw9PntlbC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGlubGluZSd9KTsKICAgICAgICAgICAgYUVsbV9ub3cuZm9yRWFjaChlbD0+e2VsLnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTogbm9uZSd9KTsKICAgICAgICB9OwoKICAgICAgICAvLyDpvKDmoIfnprvlvIDliJnpmpDol48KICAgICAgICB2YXIgbW91c2VPdXRIYW5kbGVyID0gZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICAgIGxldCBlbGVtID0gZXZ0LmN1cnJlbnRUYXJnZXQsCiAgICAgICAgICAgICAgICBhRWxtX25ldyA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCgnLmZpbGVEb3duTGluaycpLAogICAgICAgICAgICAgICAgYUVsbV9ub3cgPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2Zy5vY3RpY29uLm9jdGljb24tZmlsZS5jb2xvci1pY29uLXRlcnRpYXJ5Jyk7CiAgICAgICAgICAgIGFFbG1fbmV3LmZvckVhY2goZWw9PntlbC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IG5vbmUnfSk7CiAgICAgICAgICAgIGFFbG1fbm93LmZvckVhY2goZWw9PntlbC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGlubGluZSd9KTsKICAgICAgICB9OwoKICAgICAgICAvLyDlvqrnjq/mt7vliqAKICAgICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGZpbGVFbG0sIGkpIHsKICAgICAgICAgICAgbGV0IHRyRWxtID0gZmlsZUVsbS5wYXJlbnROb2RlLnBhcmVudE5vZGUsCiAgICAgICAgICAgICAgICBjbnRFbG1fYSA9IHRyRWxtLnF1ZXJ5U2VsZWN0b3IoJy5jc3MtdHJ1bmNhdGUuY3NzLXRydW5jYXRlLXRhcmdldC5kLWJsb2NrLndpZHRoLWZpdCBhJyksCiAgICAgICAgICAgICAgICBjbnRFbG1fc3ZnID0gdHJFbG0ucXVlcnlTZWxlY3RvcignLm1yLTMuZmxleC1zaHJpbmstMCBzdmcub2N0aWNvbi5vY3RpY29uLWZpbGUuY29sb3ItaWNvbi10ZXJ0aWFyeScpLAogICAgICAgICAgICAgICAgTmFtZSA9IGNudEVsbV9hLmlubmVyVGV4dCwKICAgICAgICAgICAgICAgIGhyZWYgPSBjbnRFbG1fYS5hdHRyaWJ1dGVzLmhyZWYubm9kZVZhbHVlLnJlcGxhY2UoYGh0dHBzOi8vJHtsb2NhdGlvbi5ob3N0fWAsJycpOwogICAgICAgICAgICBsZXQgaHJlZjIgPSBocmVmLnJlcGxhY2UoJy9ibG9iLycsJy8nKSwgdXJsLCB1cmxfbmFtZSwgdXJsX3RpcCA9ICcnOwogICAgICAgICAgICBzd2l0Y2gobWVudV9yYXdfZmFzdCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIHVybCA9IHJhd191cmxbbWVudV9yYXdfZmFzdF1bMF0gKyBocmVmMjsgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgdXJsID0gcmF3X3VybFttZW51X3Jhd19mYXN0XVswXSArICcvZ2gnICsgaHJlZi5yZXBsYWNlKCcvYmxvYi8nLCdAJyk7IGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIHVybCA9IHJhd191cmxbbWVudV9yYXdfZmFzdF1bMF0gKyAnL2doJyArIGhyZWYucmVwbGFjZSgnL2Jsb2IvJywnLycpOyBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgdXJsID0gcmF3X3VybFttZW51X3Jhd19mYXN0XVswXSArICcvJyArIHJhd191cmxbMF1bMF0gKyBocmVmMjsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cmxfbmFtZSA9IHJhd191cmxbbWVudV9yYXdfZmFzdF1bMV07IHVybF90aXAgPSByYXdfdXJsW21lbnVfcmF3X2Zhc3RdWzJdOwogICAgICAgICAgICBsZXQgX2h0bWwgPSBgIDxhIGhyZWY9IiR7dXJsfSIgZG93bmxvYWQ9IiR7TmFtZX0iIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vcmVmZXJyZXIgbm9vcGVuZXIgbm9mb2xsb3ciIGNsYXNzPSJmaWxlRG93bkxpbmsiIHN0eWxlPSJkaXNwbGF5OiBub25lOyIgdGl0bGU9IuOAjCR7dXJsX25hbWV944CNJiMxMDsmIzEwO1tBbHQgKyDlt6bplK5dIOaIliBb5Y+z6ZSuIC0g5Y+m5a2Y5Li6Li4uXSDkuIvovb3mlofku7bjgIImIzEwO+azqOaEj++8mum8oOagh+eCueWHuyBb4piBXSDlm77moIfvvIzogIzkuI3mmK/lt6bkvqfnmoTmlofku7blkI3vvIEmIzEwOyYjMTA7JHt1cmxfdGlwfeaPkOekuu+8mueCueWHu+a1j+iniOWZqOWPs+S4iuinkiBUYW1wZXJtb25rZXkg5omp5bGV5Zu+5qCHIC0gWyAke3Jhd191cmxbbWVudV9yYXdfZmFzdF1bMV19IF0g5Yqg6YCf5rqQICjimIEpIOWNs+WPr+WIh+aNouOAgiI+JHtzdmdbMl19PC9hPmA7CiAgICAgICAgICAgIGNudEVsbV9zdmcuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIF9odG1sKTsKICAgICAgICAgICAgLy8g57uR5a6a6byg5qCH5LqL5Lu2CiAgICAgICAgICAgIHRyRWxtLm9ubW91c2VvdmVyID0gbW91c2VPdmVySGFuZGxlcjsKICAgICAgICAgICAgdHJFbG0ub25tb3VzZW91dCA9IG1vdXNlT3V0SGFuZGxlcjsKICAgICAgICB9KTsKICAgIH0KCgogICAgLy8g5Yig6ZmkIFJhdyDlv6vmjbfkuIvovb3vvIjimIHvvIkKICAgIGZ1bmN0aW9uIGRlbFJhd0Rvd25MaW5rKCkgewogICAgICAgIGxldCBhRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpbGVEb3duTGluaycpO2lmKGFFbG0ubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgYUVsbS5mb3JFYWNoKGZ1bmN0aW9uKGZpbGVFbG0pIHsKICAgICAgICAgICAgZmlsZUVsbS5yZW1vdmUoKQogICAgICAgIH0pCiAgICB9CgoKICAgIC8vIOWcqOa1j+iniOWZqOi/lOWbni/liY3ov5vml7bph43mlrDmt7vliqAgUmF3IOS4i+i9vemTvuaOpe+8iOKYge+8iem8oOagh+S6i+S7tgogICAgZnVuY3Rpb24gYWRkUmF3RG93bkxpbmtfKCkgewogICAgICAgIC8vIOWmguaenOS4jeaYr+mhueebruaWh+S7tumhtemdou+8jOWwsei/lOWbnu+8jOWmguaenOe9kemhteayoeaciSBSYXcg5LiL6L296ZO+5o6l77yI4piB77yJ5bCx6L+U5ZueCiAgICAgICAgbGV0IGZpbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LkJveC1yb3cgc3ZnLm9jdGljb24ub2N0aWNvbi1maWxlJyk7aWYoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgbGV0IGZpbGVzMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuZmlsZURvd25MaW5rJyk7aWYoZmlsZXMxLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKICAgICAgICAvLyDpvKDmoIfmjIflkJHliJnmmL7npLoKICAgICAgICB2YXIgbW91c2VPdmVySGFuZGxlciA9IGZ1bmN0aW9uKGV2dCkgewogICAgICAgICAgICBsZXQgZWxlbSA9IGV2dC5jdXJyZW50VGFyZ2V0LAogICAgICAgICAgICAgICAgYUVsbV9uZXcgPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWxlRG93bkxpbmsnKSwKICAgICAgICAgICAgICAgIGFFbG1fbm93ID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCdzdmcub2N0aWNvbi5vY3RpY29uLWZpbGUuY29sb3ItaWNvbi10ZXJ0aWFyeScpOwogICAgICAgICAgICBhRWxtX25ldy5mb3JFYWNoKGVsPT57ZWwuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBpbmxpbmUnfSk7CiAgICAgICAgICAgIGFFbG1fbm93LmZvckVhY2goZWw9PntlbC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IG5vbmUnfSk7CiAgICAgICAgfTsKCiAgICAgICAgLy8g6byg5qCH56a75byA5YiZ6ZqQ6JePCiAgICAgICAgdmFyIG1vdXNlT3V0SGFuZGxlciA9IGZ1bmN0aW9uKGV2dCkgewogICAgICAgICAgICBsZXQgZWxlbSA9IGV2dC5jdXJyZW50VGFyZ2V0LAogICAgICAgICAgICAgICAgYUVsbV9uZXcgPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWxlRG93bkxpbmsnKSwKICAgICAgICAgICAgICAgIGFFbG1fbm93ID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCdzdmcub2N0aWNvbi5vY3RpY29uLWZpbGUuY29sb3ItaWNvbi10ZXJ0aWFyeScpOwogICAgICAgICAgICBhRWxtX25ldy5mb3JFYWNoKGVsPT57ZWwuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBub25lJ30pOwogICAgICAgICAgICBhRWxtX25vdy5mb3JFYWNoKGVsPT57ZWwuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBpbmxpbmUnfSk7CiAgICAgICAgfTsKCiAgICAgICAgLy8g5b6q546v5re75YqgCiAgICAgICAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbihmaWxlRWxtLCBpKSB7CiAgICAgICAgICAgIGxldCB0ckVsbSA9IGZpbGVFbG0ucGFyZW50Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICAvLyDnu5HlrprpvKDmoIfkuovku7YKICAgICAgICAgICAgdHJFbG0ub25tb3VzZW92ZXIgPSBtb3VzZU92ZXJIYW5kbGVyOwogICAgICAgICAgICB0ckVsbS5vbm1vdXNlb3V0ID0gbW91c2VPdXRIYW5kbGVyOwogICAgICAgIH0pOwogICAgfQoKCiAgICAvLyDoh6rlrprkuYkgbG9jYXRpb25jaGFuZ2Ug5LqL5Lu277yI55So5p2l55uR5ZCsIFVSTCDlj5jljJbvvIkKICAgIGZ1bmN0aW9uIGFkZExvY2F0aW9uY2hhbmdlKCkgewogICAgICAgIGhpc3RvcnkucHVzaFN0YXRlID0gKCBmID0+IGZ1bmN0aW9uIHB1c2hTdGF0ZSgpewogICAgICAgICAgICB2YXIgcmV0ID0gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3B1c2hzdGF0ZScpKTsKICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdsb2NhdGlvbmNoYW5nZScpKTsKICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9KShoaXN0b3J5LnB1c2hTdGF0ZSk7CgogICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlID0gKCBmID0+IGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZSgpewogICAgICAgICAgICB2YXIgcmV0ID0gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3JlcGxhY2VzdGF0ZScpKTsKICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdsb2NhdGlvbmNoYW5nZScpKTsKICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9KShoaXN0b3J5LnJlcGxhY2VTdGF0ZSk7CgogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsKCk9PnsKICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdsb2NhdGlvbmNoYW5nZScpKQogICAgICAgIH0pOwogICAgfQp9KSgpOw=="},{"name":"知乎免登录","options":{"check_for_updates":true,"comment":null,"compat_foreach":false,"compat_metadata":false,"compat_prototypes":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["api.zhihu.com"],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*.zhihu.com/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1632384840772,"data":{}},"enabled":true,"position":11,"file_url":"https://greasyfork.org/scripts/396171-%E7%9F%A5%E4%B9%8E%E5%85%8D%E7%99%BB%E5%BD%95/code/%E7%9F%A5%E4%B9%8E%E5%85%8D%E7%99%BB%E5%BD%95.user.js","uuid":"171c7156-710a-42df-a590-8279f9236863","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDnn6XkuY7lhY3nmbvlvZUKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL3d3dy56aGlodS5jb20vCi8vIEB2ZXJzaW9uICAgICAgMC4xMC4wCi8vIEBkZXNjcmlwdGlvbiAg5Y676Zmk55+l5LmO54Om5Lq655qE55m75b2V5o+Q56S677yM5a6J5Y2T56uv5YWNYXBw5rWP6KeICi8vIEBhdXRob3IgICAgICAgU3lzdGVtCi8vIEBtYXRjaCAgICAgICAgKjovLyouemhpaHUuY29tLyoKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1zdGFydAovLyBAY29ubmVjdCAgICAgIGFwaS56aGlodS5jb20KLy8gQGxpY2Vuc2UgICAgICBHUEx2MwovLyBAbm90ZSAgICAgICAgIDIwMjIwMTE0LTAuMTAuMCDljrvpmaTpk77mjqXph43lrprlkJE75Y676Zmk5aWH5oCq55qE5pCc57Si6K+NO+ino+WGs+mDqOWIhuaMiemSruaYvuekuumhtemdouW0qea6g+mXrumimDvop6PlhrPmsrnnjLTmj5Lku7blhbzlrrnmgKfpl67popgjMTEzNTEyO+WIoOmZpOacquS9v+eUqOeahOS7o+eggQovLyBAbm90ZSAgICAgICAgIDIwMjEwNzA3LTAuOS45IOWOu+mZpOenu+WKqOerr+WPr+iDveS4jeaUr+aMgeeahOWPr+mAiemTvuivreazle+8jOaPkOmrmOWFvOWuueaApwovLyBAbm90ZSAgICAgICAgIDIwMjEwNzA2LTAuOS44IOino+WGs2lQYWTkuJPmoI/ml6Dms5Xmu5rliqjpl67popgKLy8gQG5vdGUgICAgICAgICAyMDIxMDcwNi0wLjkuNyDmt7vliqDnp7vliqjnq6/kuJPmoI/pmLJBUFDot7PovazvvJvkv67lpI3np7vliqjnq6/kuJPmoI/ml6Dms5Xmu5rliqjpl67popjvvJvnp7vpmaTlpLHmlYjlip/og73vvJrpmpDnp4Hkv53miqTnlKjmiLflm57nrZTmmL7npLoKLy8gQG5vdGUgICAgICAgICAyMDIxMDcwNi0wLjguNiDmt7vliqDpq5jmuIXlm77liqDovb3vvIjop6bnorDlm77niYfml7bop6blj5HvvInvvJvmt7vliqDnp7vliqjnq6/mkJzntKLmjInpkq4KLy8gQG5vdGUgICAgICAgICAyMDIxMDcwNi0wLjguNCDkv67lpI3lvLnnqpflsY/olL0KCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uICgpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIGNvbnN0IGlzTW9iaWxlID0gLyhBbmRyb2lkfGlQaG9uZXxpUGFkKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7CiAgICBjb25zdCBpc1podWFubGFuID0gbG9jYXRpb24uaG9zdC5zdGFydHNXaXRoKCd6aHVhbmxhbicpOwogICAgY29uc3QgcXVlcnlTZWxlY3RvckFsbEFuZFNlbGYgPSAodGFyZ2V0LCBzZWxlY3RvcikgPT4gWy4uLih0YXJnZXQubWF0Y2hlcyhzZWxlY3RvcikgPyBbdGFyZ2V0XSA6IFtdKSwgLi4udGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpXTsKICAgIHsKICAgICAgICBuZXcgTXV0YXRpb25PYnNlcnZlcigoZXZlbnRzLCBvYnNlcnZlcikgPT4gZXZlbnRzLmZvckVhY2goKGUpID0+IGUuYWRkZWROb2Rlcy5mb3JFYWNoKCh0YXJnZXQpID0+IHsKICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMSkgewogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/lsY/olL3nmbvlvZXlvLnnqpcKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5xdWVyeVNlbGVjdG9yKCIuc2lnbkZsb3dNb2RhbCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5xdWVyeVNlbGVjdG9yKCIuTW9kYWwtY2xvc2VCdXR0b24iKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8v56e76Zmk6ZO+5o6l6YeN5a6a5ZCRCiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3JBbGxBbmRTZWxmKHRhcmdldCwgJ2FbaHJlZio9ImxpbmsuemhpaHUuY29tIl0nKS5mb3JFYWNoKGxpbmsgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSAvbGlua1wuemhpaHVcLmNvbVwvXD90YXJnZXQ9KC4rKSQvLmV4ZWMobGluay5ocmVmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAvL+enu+mZpOWlh+aAqueahOaQnOe0ouivjQogICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVNlbGVjdG9yQWxsQW5kU2VsZih0YXJnZXQsICdhW2hyZWYqPSJ3d3cuemhpaHUuY29tL3NlYXJjaCJdJykuZm9yRWFjaChsaW5rID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN2ZyA9IGxpbmsucXVlcnlTZWxlY3Rvcignc3ZnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ZnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoJ2hyZWYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdmcucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXS5mb3JFYWNoKGZ1bmMgPT4gewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMoKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pKSkub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOwogICAgfSAvL0VORAoKICAgIC8v566A5Y2V5qih5p2/5riy5p+T5ZmoCiAgICBmdW5jdGlvbiByZW5kZXIodGVtcCwgZGF0YSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlbmRlcix0ZW1wLGRhdGEpCiAgICAgICAgY29uc3QgZ2V0ID0gKHZhbHVlKSA9PgogICAgICAgICAgICB2YWx1ZQogICAgICAgICAgICAgICAgLnNwbGl0KCIuIikKICAgICAgICAgICAgICAgIC5yZWR1Y2UoKHByZXYsIGN1cikgPT4gKHByZXYgPyBwcmV2W2N1ci50cmltKCldIDogbnVsbCksIGRhdGEpOwogICAgICAgIHJldHVybiB0ZW1wCiAgICAgICAgICAgIC5yZXBsYWNlKC97JVxzKmlmXHMrKC4qPyklfShbXHNcU10qPyl7JVxzKmZpXHMqJX0vZ20sIChtYXRjaCwgdjEsIHYyKSA9PgogICAgICAgICAgICAgICAgZ2V0KHYxKSA/IHYyIDogIiIKICAgICAgICAgICAgKQogICAgICAgICAgICAucmVwbGFjZSgve3tccyooLis/KVxzKn19L2csIChtYXRjaCwgdmFsdWUpID0+IGdldCh2YWx1ZSkpOwogICAgfQoKICAgIC8v5Li76aG15o6o6I2Q5YaF5a655pi+56S6CiAgICBmdW5jdGlvbiBSZXBsYWNlSG9tZVBhZ2UoKSB7CiAgICAgICAgY29uc3QgYm9keV9odG1sID0gYAogICAgICAgICAgPHN0eWxlPgogICAgICAgICAgYm9keXtvdmVyZmxvdy15OnNjcm9sbDt9CiAgICAgICAgICAuaWNvbi1yZWZyZXNoeyAgICB0cmFuc2l0aW9uOiBmaWx0ZXIgLjVzIGVhc2U7fQogICAgICAgICAgIC5pY29uLXJlZnJlc2g6aG92ZXJ7CiAgICAgICAgICAgICAgIGZpbHRlcjogc2F0dXJhdGUoMC4xKTsKICAgICAgICAgICB9CiAgICAgICAgICAudS1zYWZlQXJlYUluc2V0LXRvcCB7CiAgICAgICAgICAgICAgaGVpZ2h0OiBjb25zdGFudChzYWZlLWFyZWEtaW5zZXQtdG9wKSAhaW1wb3J0YW50OwogICAgICAgICAgICAgIGhlaWdodDogZW52KHNhZmUtYXJlYS1pbnNldC10b3ApICFpbXBvcnRhbnQ7CgogICAgICAgICAgfQoKICAgICAgICAgIC51LXNhZmVBcmVhSW5zZXQtYm90dG9tIHsKICAgICAgICAgICAgICBoZWlnaHQ6IGNvbnN0YW50KHNhZmUtYXJlYS1pbnNldC1ib3R0b20pICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgaGVpZ2h0OiBlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSkgIWltcG9ydGFudDsKCiAgICAgICAgICB9CgogICAgICAgICAgLkNhcmQgewogICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsKICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgICAgICAgICAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDI2LCAyNiwgMjYsIC4xKTsKICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgyNiwgMjYsIDI2LCAuMSk7CiAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICB9CgogICAgICAgICAgLkFuc3dlckNhcmQgewogICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC1ib3gtc2hhZG93IC4zczsKICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAtd2Via2l0LWJveC1zaGFkb3cgLjNzOwogICAgICAgICAgICAgIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjNzOwogICAgICAgICAgICAgIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjNzLCAtd2Via2l0LWJveC1zaGFkb3cgLjNzOwogICAgICAgICAgfQoKICAgICAgICAgIC5RdWVzdGlvbkFuc3dlci1jb250ZW50IHsKICAgICAgICAgICAgICBwYWRkaW5nOiAxNnB4IDIwcHg7CiAgICAgICAgICB9CiAgICAgIDwvc3R5bGU+CiAgICAgIDxzdHlsZT4KICAgICAgICAgIC5JbmZvSXRlbSB7CiAgICAgICAgICAgICAgcGFkZGluZzogMTVweCAwIDE0cHg7CiAgICAgICAgICAgICAgbWFyZ2luOiAwIDE1cHg7CiAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogLjVweCBzb2xpZCAjZDNkM2QzCiAgICAgICAgICB9CgogICAgICAgICAgLkluZm9JdGVtSGVhZCB7CiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgICAgICAgICBmb250LXNpemU6IDE3cHg7CiAgICAgICAgICAgICAgY29sb3I6ICMxYTFhMWE7CiAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIycHgKICAgICAgICAgIH0KCiAgICAgICAgICAuSW5mb0l0ZW1Db250ZW50IHsKICAgICAgICAgICAgICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxMXB4OwogICAgICAgICAgICAgIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgICB3aWR0aDogMTAwJQogICAgICAgICAgfQoKICAgICAgICAgIC5JbmZvSXRlbkRpcmVjdGlvbiB7CiAgICAgICAgICAgICAgLW1zLWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbgogICAgICAgICAgfQoKICAgICAgICAgIC5JbmZvSXRlbURlcyB7CiAgICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgICAgLXdlYmtpdC1saW5lLWNsYW1wOiAzOwogICAgICAgICAgICAgIGhlaWdodDogNjNweDsKICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxNXB4CiAgICAgICAgICB9CgogICAgICAgICAgLkluZm9JdGVtRGVzLAogICAgICAgICAgLkluZm9JdGVtRGVzLWNpcmNsZSB7CiAgICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4OwogICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjFweDsKICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogbm9ybWFsOwogICAgICAgICAgICAgIGNvbG9yOiAjNDQ0OwogICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNHB4IDE1cHg7CiAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbAogICAgICAgICAgfQoKICAgICAgICAgIC5FbGxUd28sCiAgICAgICAgICAuSW5mb0l0ZW1EZXMtY2lyY2xlIHsKICAgICAgICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDIKICAgICAgICAgIH0KCiAgICAgICAgICAuRWxsVHdvIHsKICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7CiAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3gKICAgICAgICAgIH0KCiAgICAgICAgICAuSW5mb0l0ZW1JbWctcyB7CiAgICAgICAgICAgICAgd2lkdGg6IDExMnB4OwogICAgICAgICAgICAgIGhlaWdodDogNzRweDsKICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2NjYwogICAgICAgICAgfQoKICAgICAgICAgIC5JbmZvSXRlbUltZyB7CiAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgIGhlaWdodDogMTQ0cHg7CiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW4KICAgICAgICAgIH0KCiAgICAgICAgICAuSW5mb0l0ZW1JbWctbCB7CiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2NjYzsKICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGUKICAgICAgICAgIH0KCiAgICAgICAgICAuSW5mb0l0ZW1Gb290ZXIgewogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgICBjb2xvcjogIzk5OTsKICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogOXB4CiAgICAgICAgICB9CgogICAgICAgICAgLkluZm9JdGVtQW5zd2VyLAogICAgICAgICAgLkluZm9JdGVtUG9pbnQgewogICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDVweAogICAgICAgICAgfQoKICAgICAgICAgIC5JbmZvSXRlbVBvaW50IHsKICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDVweAogICAgICAgICAgfQoKICAgICAgICAgIC5JbmZvSXRlbVZpZGVvIHsKICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICBoZWlnaHQ6IDE5NHB4OwogICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgICBtYXJnaW46IDEwcHggMCA1cHg7CiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNjY2MKICAgICAgICAgIH0KCiAgICAgICAgICAuSW5mb0l0ZW1WaWRlbyAuVmlkZW9DYXJkIHsKICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgICB6LWluZGV4OiAxMDsKICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZQogICAgICAgICAgfQogICAgICA8L3N0eWxlPgogICAgICA8c3R5bGU+CiAgICAgICAgICBtYWluIHsKICAgICAgICAgICAgICB3aWR0aDogMTAwMHB4OwogICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgICAgfQoKICAgICAgICAgIC5Nd2ViVmlkZW8gewogICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICB9CgogICAgICAgICAgLmljb24tcmVmcmVzaCB7CiAgICAgICAgICAgICAgd2lkdGg6IDQ1cHg7CiAgICAgICAgICAgICAgaGVpZ2h0OiA0NXB4OwogICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgICByaWdodDogMTVweDsKICAgICAgICAgICAgICBib3R0b206IDEyMHB4OwogICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgIH0KICAgICAgICAgIC5hY3RpdmUge2NvbG9yOiAjNDQ0O2ZvbnQtd2VpZ2h0OiA2MDA7fQoKICAgICAgICAgIC5Ib3RMaXN0LWl0ZW0gewogICAgICAgICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94OwogICAgICAgICAgICAgIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4OwogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweAogICAgICAgICAgfQoKICAgICAgICAgIC5Ib3RMaXN0LWl0ZW06bm90KDpmaXJzdC1jaGlsZCkgewogICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgICBib3JkZXItdG9wOiAuNXB4IHNvbGlkICNkM2QzZDMKICAgICAgICAgIH0KCiAgICAgICAgICAuSG90TGlzdC1pdGVtUHJlIHsKICAgICAgICAgICAgICAtbXMtZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICAgIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyCiAgICAgICAgICB9CgogICAgICAgICAgLkhvdExpc3QtaXRlbUJvZHksLkhvdExpc3QtaXRlbVByZSB7CiAgICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgICAgICAgICAgICAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOwogICAgICAgICAgICAgIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsCiAgICAgICAgICB9CgogICAgICAgICAgLkhvdExpc3QtaXRlbUJvZHkgewogICAgICAgICAgICAgIC13ZWJraXQtYm94LWZsZXg6IDE7CiAgICAgICAgICAgICAgLW1zLWZsZXg6IDEgMTsKICAgICAgICAgICAgICBmbGV4OiAxIDE7CiAgICAgICAgICAgICAgLW1zLWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICAgIG1hcmdpbjogMCA4cHgKICAgICAgICAgIH0KCiAgICAgICAgICAuSG90TGlzdC1pdGVtSW5kZXggewogICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4OwogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgICAgICAgICBjb2xvcjogI2MyYTQ2OTsKICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICAgIGZvbnQtc3ludGhlc2lzOiBzdHlsZQogICAgICAgICAgfQogICAgICAgICAgLkhvdExpc3QtaXRlbVRpdGxlIHsKICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7CiAgICAgICAgICAgICAgbWF4LWhlaWdodDogNzJweDsKICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICAgIGZvbnQtc3ludGhlc2lzOiBzdHlsZTsKICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDM7CiAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDsKICAgICAgICAgIH0KICAgICAgICAgIC5Ib3RMaXN0LWl0ZW1NZXRyaWNzIHsKICAgICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICAgICAgICAgICAgICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICAgIGNvbG9yOiAjOTk5OwogICAgICAgICAgfQogICAgICAgICAgLkhvdExpc3QtaXRlbUltZ0NvbnRhaW5lciB7CiAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94OwogICAgICAgICAgICAgIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICB9CiAgICAgICAgICAuSG90TGlzdC1pdGVtSW1nQ29udGFpbmVyIGltZywuSG90TGlzdC1pdGVtSW1nQ29udGFpbmVyIHNwYW4gewogICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgICAgICAgICAgICB3aWR0aDogMTUwcHg7CiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDBweDsKICAgICAgICAgICAgICAtby1vYmplY3QtZml0OiBjb3ZlcjsKICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcgogICAgICAgICAgfQogICAgICAgICAgLkhvdExpc3QtaXRlbTpudGgtY2hpbGQoMSkgLkhvdExpc3QtaXRlbUluZGV4LC5Ib3RMaXN0LWl0ZW06bnRoLWNoaWxkKDIpIC5Ib3RMaXN0LWl0ZW1JbmRleCwuSG90TGlzdC1pdGVtOm50aC1jaGlsZCgzKSAuSG90TGlzdC1pdGVtSW5kZXgsLkhvdExpc3QtaXRlbUluZGV4SG90ewogICAgICAgICAgICAgIGNvbG9yOiAjZjE0MDNjOwogICAgICAgICAgfQogICAgICAgICAgLkhvdExpc3QtaXRlbUV4Y2VycHQgewogICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgICAgICAgICAgY29sb3I6ICM0NDQ7CiAgICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDsKICAgICAgICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDY7CiAgICAgICAgICB9CiAgICAgIDwvc3R5bGU+CiAgICAgIDxkaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJMb2FkaW5nQmFyIj48L2Rpdj4KICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGhlYWRlciByb2xlPSJiYW5uZXIiIGNsYXNzPSJTdGlja3kgQXBwSGVhZGVyIiBkYXRhLXphLW1vZHVsZT0iVG9wTmF2QmFyIj4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iQXBwSGVhZGVyLWlubmVyIj48YSBocmVmPSIvL3d3dy56aGlodS5jb20iIGFyaWEtbGFiZWw9IuefpeS5jiI+PHN2ZyB2aWV3Qm94PSIwIDAgMjAwIDkxIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjMDA4NEZGIiB3aWR0aD0iNjQiIGhlaWdodD0iMzAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZD0iTTUzLjI5IDgwLjAzNWw3LjMyLjAwMiAyLjQxIDguMjQgMTMuMTI4LTguMjRoMTUuNDc3di02Ny45OEg1My4yOXY2Ny45Nzh6bTcuNzktNjAuNTk4aDIyLjc1NnY1My4yMmgtOC43M2wtOC43MTggNS40NzMtMS41ODctNS40Ni0zLjcyLS4wMTJ2LTUzLjIyek00Ni44MTggNDMuMTYyaC0xNi4zNWMuNTQ1LTguNDY3LjY4Ny0xNi4xMi42ODctMjIuOTU1aDE1Ljk4N3MuNjE1LTcuMDUtMi42OC02Ljk3SDE2LjgwN2MxLjA5LTQuMSAyLjQ2LTguMzMyIDQuMS0xMi43MDggMCAwLTcuNTIzIDAtMTAuMDg1IDYuNzQtMS4wNiAyLjc4LTQuMTI4IDEzLjQ4LTkuNTkyIDI0LjQxIDEuODQtLjIgNy45MjctLjM3IDExLjUxMi02Ljk0LjY2LTEuODQuNzg1LTIuMDggMS42MDUtNC41NGg5LjAyYzAgMy4yOC0uMzc0IDIwLjktLjUyNiAyMi45NUg2LjUxYy0zLjY3IDAtNC44NjMgNy4zOC00Ljg2MyA3LjM4SDIyLjE0QzIwLjc2NSA2Ni4xMSAxMy4zODUgNzkuMjQgMCA4OS42MmM2LjQwMyAxLjgyOCAxMi43ODQtLjI5IDE1LjkzNy0zLjA5NCAwIDAgNy4xODItNi41MyAxMS4xMi0yMS42NEw0My45MiA4NS4xOHMyLjQ3My04LjQwMi0uMzg4LTEyLjQ5NmMtMi4zNy0yLjc4OC04Ljc2OC0xMC4zMy0xMS40OTYtMTMuMDY0bC00LjU3IDMuNjI3YzEuMzYzLTQuMzY4IDIuMTgzLTguNjEgMi40Ni0xMi43MUg0OS4xOXMtLjAyNy03LjM4LTIuMzcyLTcuMzh6bTEyOC43NTItLjUwMmM2LjUxLTguMDEzIDE0LjA1NC0xOC4zMDIgMTQuMDU0LTE4LjMwMnMtNS44MjctNC42MjUtOC41NTYtMS4yN2MtMS44NzQgMi41NDgtMTEuNTEgMTUuMDYzLTExLjUxIDE1LjA2M2w2LjAxMiA0LjUxem0tNDYuOTAzLTE4LjQ2MmMtMi44MTQtMi41NzctOC4wOTYuNjY3LTguMDk2LjY2N3MxMi4zNSAxNy4yIDEyLjg1IDE3Ljk1M2w2LjA4LTQuMjlzLTguMDItMTEuNzUyLTEwLjgzLTE0LjMzek0xOTkuOTkgNDYuNWMtNi4xOCAwLTQwLjkwOC4yOTItNDAuOTUzLjI5MnYtMzEuNTZjMS41MDMgMCAzLjg4Mi0uMTI0IDcuMTQtLjM3NiAxMi43NzMtLjc1MyAyMS45MTQtMS4yNSAyNy40MjctMS41MDQgMCAwIDMuODE3LTguNDk2LS4xODUtMTAuNDUtLjk2LS4zNy03LjI0IDEuNDMtNy4yNCAxLjQzcy01MS42MyA1LjE1My03Mi42MSA1LjY0Yy41IDIuNzU2IDIuMzggNS4zMzYgNC45MyA2LjExIDQuMTYgMS4wODcgNy4wOS41MyAxNS4zNi4yNzcgNy43Ni0uNSAxMy42NS0uNzYgMTcuNjYtLjc2djMxLjE5aC00MS43MXMuODggNi45NyA3Ljk3IDcuMTRoMzMuNzN2MjIuMTZjMCA0LjM2NC0zLjQ5OCA2Ljg3LTcuNjUgNi42LTQuNC4wMzQtOC4xNS0uMzYtMTMuMDI3LS41NjYuNjIzIDEuMjQgMS45NzcgNC40OTYgNi4wMzUgNi44MjQgMy4wODcgMS41MDIgNS4wNTQgMi4wNTMgOC4xMyAyLjA1MyA5LjIzNyAwIDE0LjI3LTUuNCAxNC4wMjctMTQuMTZWNTMuOTNoMzguMjM1YzMuMDI2IDAgMi43Mi03LjQzMiAyLjcyLTcuNDMyeiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPjwvYT4KICAgICAgICAgICAgICAgICAgICAgIDx1bCByb2xlPSJuYXZpZ2F0aW9uIiBjbGFzcz0iVGFicyBBcHBIZWFkZXItVGFicyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIHJvbGU9InRhYiIgY2xhc3M9IlRhYnMtaXRlbSBBcHBIZWFkZXItVGFiIFRhYnMtaXRlbS0tbm9NZXRhIj48YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9IlRhYnMtbGluayBBcHBIZWFkZXItVGFic0xpbmsgaXMtYWN0aXZlIiBocmVmPSIvL3d3dy56aGlodS5jb20vIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS16YS1ub3QtdHJhY2stbGluaz0idHJ1ZSI+6aaW6aG1PC9hPjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIHJvbGU9InRhYiIgY2xhc3M9IlRhYnMtaXRlbSBBcHBIZWFkZXItVGFiIFRhYnMtaXRlbS0tbm9NZXRhIj48YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9IlRhYnMtbGluayBBcHBIZWFkZXItVGFic0xpbmsiIGhyZWY9Ii8vd3d3LnpoaWh1LmNvbS9leHBsb3JlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS16YS1ub3QtdHJhY2stbGluaz0idHJ1ZSI+5Y+R546wPC9hPjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIHJvbGU9InRhYiIgY2xhc3M9IlRhYnMtaXRlbSBBcHBIZWFkZXItVGFiIFRhYnMtaXRlbS0tbm9NZXRhIj48YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9IlRhYnMtbGluayBBcHBIZWFkZXItVGFic0xpbmsiIGhyZWY9Ii8vd3d3LnpoaWh1LmNvbS9xdWVzdGlvbi93YWl0aW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS16YS1ub3QtdHJhY2stbGluaz0idHJ1ZSI+562J5L2g5p2l562UPC9hPjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IlNlYXJjaEJhciIgcm9sZT0ic2VhcmNoIiBkYXRhLXphLW1vZHVsZT0iUHJlc2V0V29yZEl0ZW0iPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IlNlYXJjaEJhci10b29sV3JhcHBlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIGNsYXNzPSJTZWFyY2hCYXItdG9vbCIgbWV0aG9kPSJnZXQiIGFjdGlvbj0iL3NlYXJjaCIgQHN1Ym1pdC5uYXRpdmUucHJldmVudD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iUG9wb3ZlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iU2VhcmNoQmFyLWlucHV0IElucHV0LXdyYXBwZXIgSW5wdXQtd3JhcHBlci0tZ3JleSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ic2VhcmNoIiBuYW1lPSJxIiBtYXhMZW5ndGg9IjEwMCIgdmFsdWU9IiIgYXV0b0NvbXBsZXRlPSJvZmYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0iY29tYm9ib3giIGFyaWEtZXhwYW5kZWQ9ImZhbHNlIiBhcmlhLWF1dG9jb21wbGV0ZT0ibGlzdCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWFjdGl2ZWRlc2NlbmRhbnQ9Im51bGwtLTEiIGlkPSJudWxsLXRvZ2dsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhhc3BvcHVwPSJ0cnVlIiBhcmlhLW93bnM9Im51bGwtY29udGVudCIgY2xhc3M9IklucHV0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSLmkJzntKLlhoXlrrkiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idHlwZSIgdmFsdWU9ImNvbnRlbnQiIGhpZGRlbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gYXJpYS1sYWJlbD0i5pCc57SiIiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJCdXR0b24gU2VhcmNoQmFyLXNlYXJjaEJ1dHRvbiBCdXR0b24tLXByaW1hcnkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlciI+4oCLCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9IlppIFppLS1TZWFyY2ggU2VhcmNoQmFyLXNlYXJjaEljb24iIGZpbGw9ImN1cnJlbnRDb2xvciIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE3LjA2OCAxNS41OGE4LjM3NyA4LjM3NyAwIDAgMCAxLjc3NC01LjE1OSA4LjQyMSA4LjQyMSAwIDEgMC04LjQyIDguNDIxIDguMzggOC4zOCAwIDAgMCA1LjE1OC0xLjc3NGwzLjg3OSAzLjg4Yy45NTcuNTczIDIuMTMxLS40NjQgMS40ODgtMS40OWwtMy44NzktMy44Nzh6bS02LjY0NyAxLjE1N2E2LjMyMyA2LjMyMyAwIDAgMS02LjMxNi02LjMxNiA2LjMyMyA2LjMyMyAwIDAgMSA2LjMxNi02LjMxNiA2LjMyMyA2LjMyMyAwIDAgMSA2LjMxNiA2LjMxNiA2LjMyMyA2LjMyMyAwIDAgMS02LjMxNiA2LjMxNnoiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IkFwcEhlYWRlci11c2VySW5mbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iQXBwSGVhZGVyLXByb2ZpbGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PgogICAgICAgICAgICAgIDwvaGVhZGVyPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8bWFpbiByb2xlPSJtYWluIiBjbGFzcz0iQXBwLW1haW4iPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9IkNhcmQgQW5zd2Vyc05hdldyYXBwZXIiPgogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJMaXN0U2hvcnRjdXQiPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iTGlzdCBQcm9maWxlLWFuc3dlcnMiIGlkPSJQcm9maWxlLWFuc3dlcnMiIGRhdGEtem9wLWZlZWRsaXN0ZmF0aGVyPSIxIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJMaXN0LWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Ikxpc3QtaGVhZGVyT3B0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNjcm9sbCI+CgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9tYWluPgogICAgICAgICAgPGltZyBjbGFzcz0iaWNvbi1yZWZyZXNoIgogICAgICAgICAgICAgIHNyYz0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFGa0FBQUJaQ0FZQUFBQlZDNGl2QUFBQUFYTlNSMElBcnM0YzZRQUFEYXRKUkVGVWVBSHRYUW1RRk5VWi9ucG1aKzlkRmxnUk1YZ0IzcnBvSWtiazBzakdCSWxYRG9rRzE0b0VOZVpRUXdFaUJHUVhqWVlxVVZORzBSTFBVSVl5SG1nUXNRS0lRQ3l2MVFvR0VBOUFFWVJsNzN1bjgvM2IwM1Bzek01TWQ3K2VuZXp1cStydDN1NzMvdmUvYjE3LzczLy8rOS9mR3RJcExkRUh3NDlSMERDU2JJMkF6a1BERUY3bjh6cWY1endlT1R5YWVEVHdXVDNQOVh4MmdOZTdlTDJMMTUvQWc1MjRYVHZFLzlNaWFUM0t4VUs5Q0Q2Y1J4N09KN2pqQ05TSnl2alJzWU5nYnlLOXQ5Q0dMVmlvVlN1amJaRlE2a0ZlcU9mQ2k0c0o2SS9KNndRZUhvczgyOG51WjZHTjdPV3IwSUUxQkx6UkRoRzdaVklIOGhMOVZQYldHV1QwRWg3eTJ2ZFVhbURGcS9uVExxZEkyWllLSnR3SCtTNzlMUGFlMzdFeHBhbG9rTVU2MXZLdFdvYTUydnNXeTFuSzdoN0lmOUpQUWpzVzhoV2RhSW1qbnNpc1lRTXl5T3RzYmJzYjFhc0grVjQ5RDYyNGxjeitpZ0I3M1dEYUZab2EzemZnRVJSaktXYXFsZGxxUVY2c2wzSkF1NHZNSHVVS0VLa2h1bytkWXk3bWEydFZWYWNHNUlWNkpsKzNlV1JLQnJiZWtwWlQzRlZRRTJsMTJpRG5JTit0SDBObUhpWWpKVTZaU2NQeWxldzhNekZIMisyRU4yY2dsK3ZmWmVVcmVCUTZZU0xOeTlhU3Z6TGNvVzIxeTZmOWljQmlYU1lVZjJQRnZSbGd3Yld3czUzU1hwdkpIc2psK3RXcytGRU9FRmsyNi8zL0tpYnRsUFpLdTIwazYrTENxT2hlRzNYMWxpS3pLRHFlc2RJWWF5QWJJdUpSVm1EdkRiRENXZnJtOWZNTnZwNHEzcHBrV1V3ZVpCbmtSQWIzRlJFUkQwRU5MY1JoV3JLRFlYSWdHMnFhS09lOWZaQ0xCMjNYWjdWVTcwcVRVZThTdi9ZeTBURDA0SDZBSTJFdTdNUkY4RW1RRW9Qc3d4MmswUnNuR2dtZ1NlcHhDUmNkQkorNEtiNjRNR3dSSytKUzZIOEl5dWV5ZUxhTzdrRVdhMW9MVnhONnlOaVQ3NE0yWlJReVJ4OEozMG1Ea1NISDhVWHcrbldndVIyNkhBMXQwUGZVb21QN0liUy8vUlhhMW42SzFuMzFYQnBJZmRwSFRYb0NabW15SUJDVnVnZTVYRi9BM0RkRWxYRHhScDRQdU93a1pQLzBWR1NYSG8vczdBenFNeGJUUndmUTl0UkhhRnp4SVpxK2FXUWZTMVhTOEJEbWFZdGpWUmU3RVliQmZSMVpUSWs5T0NjRHVIVU04djV3SHZLTHN0WG80SzBkMEIrdlJPT2lOMUdma3Q0dDl1Z01YQlRMOEI4YjVISjlKWDhSV2VSME5YbForL1dqa2JOZ1BBcUdGVVQrb0JRTCt0WXYwZnJCZnJSL3VCOXRjcFplS2d6bFpVSmpyOWNLcytBNXBSamVraUh3VFRvV21XT0dJZFByaWV6OVRlM3czN01GOVl2ZlJFT0gyLzFhVmxqbWFkTzZnaFlOc3JFbTkwclhqS3IvUHlvZm5sVlhvbWpzdHlMdEg1U3g3VS93VlYvK1BocDMxMXFUcndPem9WMTlPckpubm8yODA0L2d1QitXM3QySDF1a3ZvWHJid2M0VmtMQW5paSs5bU5KMXpUQWE1SEo5QmF0MWRkRnovSEQ0bnJzQ0E0Zm1oM3J2RnpWb3YrVjExTDZ3SFMwcU90eVVFY2k4NXlJVW5sb2NBcHNEcFgvYVAxRDk4azRPNmU2bHRad0psb1dUandUWldMWmZGNTVCOWZWTlp5UG52bElNOEhtTjE3cWRsb0Q3MzBiRC9BMm9hMnhYVzV1SHJidGxESElySnFFd0t6Q0lkckMrMy9QSGZQQWR1T2Q3NGFGc0RuTTNpSnlNR0g0UmFsc2FSazFlNWIvOElBVHdsM1ZvUC9keEhMenREZlVBUzdXaTdpMzlOeHJIUG9HRG54em0vSXhKWkxhTUEzTHRXdXFDWTZnbmkyZFBCaXBac1N1T0p4Y2NCOSthcXpBNE05Q0RkMWFoZmZJek9QU0ZSYmxyRjVqaUhHanJyc2FnRXVyZDQ1L0VvVTE3akVIVUxyMEU1UnI0azVhWW5rcWhuaXl1VXk0QnpFSEkrL3lWR0dRQ1hMa2ZyZVBZdTFJRnNBQnlzQW42eEtkUU5lc04xTG9Nc0ZTWHg5RW11SklTQXRud1RaTU1TcE84S2s5ZmlpSlQvLzI2SGgybHo2THFRQ29uQ29FVzFkQkErZWV0THNyaWNPVEM4RFJBRnU5S2wvVGlHem5ROFJYdHRGU0o3bnZOaTZqdUNZREQyNStpNndrd2NBM01ycndZeTRwRHZWb1JGNkszM2prSkJTYTVpazJvZitOeitoZjFqZVNoeUJCY0E4QjZqSDlVdDcxOEV2SUg1eGk2OEM2TzdqTEZWVjJIU25vaExVQVIxUUN1UnU4VkIyekZLWmYyaUxJemtXdVNYZklXNmwyZjFwcVYyVGd2bW9pODVqa1lldmNGblI3OU5pakVLQkxBMVFQWlFxRFN3ejFRbDFqVGNuM0dteUs5V0tiS01kaElpMXVYbllpc0JlTlFJTnJQN0xFb21Fb1RxeExHQkZmaTY2RjFZSlFTZ2wySVhIVWFzczFieXppalM5ZGVQTHdBbnNjdXdRRHlHcFFXeTZlZ2lHSXUrTC9aRGx0bjRpczJxNUcyQ3NjcFZFZ3JtZGlEelN5MFJ6U2IxK2wwbG1uM3M1ZWphRkJnM0RCNU81SmE3c00vN0FUZXZHWC9USHhGSm8rd1R5RjJ5VXRHSWN1MEZZaDVjaytkTld0YWJLcnE3OTQ1QWZuamhrZGFBYzFhcmp3Wk9kZlFER0QrNytBOHdrUER2SEtRdnowMFpQbGFzeXM5ZS9HRm5PYlBQVC8rSVBmQTl6SGdhSW9UQndETCtoOUJOdmJKT2FMVHRYREpVRnBCQXFueWdHR1lNZjlQaDdQWU1UZ0xIVWh4RVZmdXlpejFpUjg1RkJ2RVYzNGwyWVNvTkEwdk5IUmpJYnFYQzUxS2lTc2c5dGhVRE9DaVFWSkxhOTg3RHRrM2Y4ZVIxUzVmeElWeWtObFRnZzNZbTJieWVCaFhaS2FPdENacmJ6blhBVWJFVjE1clJ5Q1BIQWp2ejA1Qk5xZlFRZG5GMFRyNEdrNmpLaWVMbXRJQjYybWdXY05sKzArcmU2NTNpeHVCR0lvb0NvSThKbm81eEM3dElPVnI5TG5kU3dKQmdLd1MyL1ZySEhGQ1VVZ0dKeXBmMHd6L3NRL2lnRFEwVVY2M25oODNBSjdKeHlPclFMeU9tYkk0TWkyNTBQRHowMm5Fa29WWHMrN0Q1UGZ2SDZQRlFjZndTMCtXbVpodFF6MlpzcFM0d3F4eEpxajFKTWlmMThDLy9JUFFESFFFMzBZVFpBRjF6cjlDSUZ0cVhPek1UZEtEWTNxOXhNNGZmWGZwVm1zTXZiQUR6U254ZzRobXRkczdIS2lEYi9JM1RjcDErZ1pSNFlLdlJyZGN4SG53MEh0b2V2Mno1SFJocnVsMXpIZ0ZOWEhJOWNnajZzTEJnWHBQamVMeGd2aktMK2dJWkVHbDdDWFVIRTdRQTJTVm1BYjd3NGU0RE5RalNNYXA5Q3c2eDVpUEs3OVdydGNUWkFuSTRUQjlSU2UvbTErTDMwTXJOcU51L1JldUxsN2Fic1hGSTBOVDYzZnByV1NiVUt5Q3hGZkVoVVE4Y1p5ZS9RK2FPUXJITkdkdTNJMldSUnVkeVg3SERIWkQ0QmpLNDlNQzNrYmlLYnBhdGVNTDhSVnhvUVJrYWNNTnI2S0dnMXJFREkvaW9VTzhkaHpxbXQxQTVQejJGU2VISmlack9iYlV0U29YWndSWll2WW9TbFhOMEgrNUdoS0d4cFM3K25Vdm8xckVpYUlxbEpJUmg4ZmZuQk5TWDFmeWJWUmFnUkFqdmg0cUx6dFZFdjduTHJUS2dta1RaMVlMNkhwRnY3TzBYVGk5cmdRNTVrUksvT1Jjc1hzVFgyTnF1VmhmVDlsOG9rcXcwNTJXOU9JZE40Vm1xdys4Zy9yZnZvWTZwWHhMc0tuNTJpUkRDVGVpVGltbG4rN0U3cHlJZkxNWEgyeEV4L3oxemxYWnFEWUhjRFZuT205RlplakZOMmkzeUp3ek5tUVltN2NlZFM1Tjh6dHhOVUNXdUdsMGd1ekZ1QWFiTmpRUEhuRWJNdzMyNzMrTlZqcWN4MVE5ZzRYc1hmaXBjUXV1Z1RtN0VaaHVvejFhMWt2TlBnKzU0bDFrdmFTekVnTHcycDlqMEJCeEIyU1NXYXE0alptcWtEUHFVYVUzMHF1ek0rQ2ZLUzVFMVZnVmxjMkZHeE9QZ2U5dW1oWFgvd0tEaCtTbURtaHVUL05zdWhhRHp3aE1vVnM0OGJoOEZhcGMyOTRRaG1jSVpJbjg1OUFpbDh4dmNqOFhKNWxQTzVPTjNYSWRpczhabHJ3dE9objZzZkpJSFp1bW81Z216YzYxUjdFWmwxRi8zN0JiOFJRNlZIa0RwMlRCS0FJaGtJM1FpcXREK2R5NSt1dTdkSFNSWUFaTU1ycEw0MFY4aUVxbE9zbSt3R1dUVWJEbFdoU2J1NnRrbFdZbVo2WXJ0N2t3OFFnMVlMWHBBQzYzSXB1V2dqMGpVcWxzbWxuSmpUbjVtU0U3N3ZZcXRNMWVoN29YRmRnT3hHbUZmaE5aUzdreGg3Yml6dDRyOVg1RlUrdFBuc2Zoelh0ZDY4RlNqWXgwRVh0R0lrR1dEQ25ZL1NUVmNCdXY5OG1wS0JwemRLVGYyY2VIMFBiSWUyaDgraU0waVhlODVFMDJpZHlkTVJxNTArbm9HRzRqbHZKdjBraEZnS3YzTjdpdVJTWFkvU1RjcEdnZm4xUWxQZTcyODVFM2x6cXI2WndvOXlXSncvZzczQzlOdWRraUd5WC95LzNUdFZ3WGxJWFFob0FSNTh3amtjRzkxeGtpMzJYREpHV3ZUK3ZpU3lHYmYvNjRBZldQMCtFeEpVYXFwUGJ4U1FzcmRJblFNbEV1VTVIb2UrYVpQeDU1MTVjZ3ozVHZjbHB2RmRVekxvalczZmMyR2xzaTdJSk9LY2Nwbi9TT1ZLR1I0cjNWSnR2aVNUbjlET1RJTWRwdzlZb1daMmJtR0dmWjRrc0RWY3R6MjlEMDBnNjA4UC9VSmN0N3E0VzFDbjArZS9PTnFlTXlzaWJSb1V0UFFOWTVSOEYzY2pFeWhnK0FsNDdsbWtRTzRJWjNqV0lCbjlGL1E4SXd5TUVkVlcydmZvSVcxUnN1STdtSzg1L2xLQUZDcTRmalhjUnBUam8raWh2dklxUW5kMlZkQW1SSTlOWCtsQmdCd2FtYmdDSlN1SHVRNWFtRXQ1WElmdjBwSGdMTDQ0WEdrWUx4UVpZY2JTam5YOWtPM0oraUVhaWtBMEZGOU8zSU84bU4zdjF4NFNKUk0vNVRHQmRPQ0JyeGc4c29PdHlNRXhHckllbDV6OENoTEpuQWU5S0F4T0xDYktiRUQvWjNxblI5d3Jodk5qdkcyZCtKZzRWNHlzbURMTFVaUVVCbng2aTRMOTJhSGNBaDZUWmJBMW5JR21GdFovR3FyL1ZvYWEvbHNMNENXWElEbitUc21pVE1yNGV4MFBwQ0ZGcVJ3U0lxTFlUekRZZkxQc2hDcFQrbWZUaVczVjViRnhmaHBFVDRTM2piM3F0SHk5Y1pTcE9Oa3h3T1RmaTFNNUNGa3FoMzdiaTAxODBNWmFZcjdYTDQrUXVCeUptNEVBcmhxZitMT2VGb0JLL1ZnaXhrRGV2ZGJmejVabkJRREc0VENOYVlyaGRpRDliNStiZ3NmdnNwanJISER2dnFRVGE1NlArS21ZbUVZbkVSSkJ0MjBmODl2aFNBYk9MZC8yVkpFNGtVblB1L2tab0NrTU9ya0xocEV0WkxvazY1OWJWZlB6WnpTTnRNajU0KzlMWGZjSkM3WGlmK2JyVnN0cGRvS3JLM281N0NUdllncHYxM3EvOEhlMFk0T1ZyaHg0NEFBQUFBU1VWT1JLNUNZSUk9IgogICAgICAgICAgICAgIGFsdD0i5Yi35pawIj4KICAgICAgICAgIDxkaXYgZGF0YS16b3AtdXNlcnRva2VuPSJ7fSI+PC9kaXY+CiAgICAgIDwvZGl2PmA7CiAgICAgICAgY29uc3QgSG90aXRlbSA9IGAKICAgICAgPGRpdiBjbGFzcz0iSG90TGlzdC1pdGVtIiBkYXRhLXphLWRldGFpbC12aWV3LXBhdGgtbW9kdWxlPSJGZWVkSXRlbSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJIb3RMaXN0LWl0ZW1QcmUiPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9IkhvdExpc3QtaXRlbUluZGV4Ij57e2luZGV4fX08L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJIb3RMaXN0LWl0ZW1MYWJlbCIgc3R5bGU9ImNvbG9yOiByZ2IoMjQxLCA2NCwgNjApOyI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9IkhvdExpc3QtaXRlbUJvZHkiPgogICAgICAgICAgICAgIDxhIGNsYXNzPSJIb3RMaXN0LWl0ZW1UaXRsZSIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHBzOi8vd3d3LnpoaWh1LmNvbS9xdWVzdGlvbi97e3RhcmdldC5pZH19Ij57e3RhcmdldC50aXRsZX19PC9hPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9IkhvdExpc3QtaXRlbUV4Y2VycHQiPnt7dGFyZ2V0LmV4Y2VycHR9fTwvZGl2PgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9IkhvdExpc3QtaXRlbU1ldHJpY3MiPnt7ZGV0YWlsX3RleHR9fTwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJIb3RMaXN0LWl0ZW1JbWdDb250YWluZXIiPgogICAgICAgICAgICAgIDxpbWcgc3JjPSJ7e2NoaWxkcmVuLjAudGh1bWJuYWlsfX0iCiAgICAgICAgICAgICAgICAgIGFsdD0ie3t0YXJnZXQudGl0bGV9fSI+CiAgICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIGA7CgogICAgICAgIGlmICgKICAgICAgICAgICAgbG9jYXRpb24uaHJlZi5lbmRzV2l0aCgiOi8vd3d3LnpoaWh1LmNvbS8iKSB8fAogICAgICAgICAgICBsb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCI6Ly93d3cuemhpaHUuY29tL3NpZ25pbiIpCiAgICAgICAgKSB7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgKCkgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBib2R5X2h0bWw7CgogICAgICAgICAgICAgICAgbGV0IGlzX2VuZCA9IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHVwZGF0ZSA9IDAsCiAgICAgICAgICAgICAgICAgICAgbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2LnNjcm9sbCIpOwogICAgICAgICAgICAgICAgY29uc3QgcGFkID0gKG51bSwgbikgPT4gKEFycmF5KG4pLmpvaW4oMCkgKyBudW0pLnNsaWNlKC1uKTsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWQocmVsb2FkKSB7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgICAgICAgICAgICAgbG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oCiAgICAgICAgICAgICAgICAgICAgICAgICJHRVQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaHR0cHM6Ly93d3cuemhpaHUuY29tL2FwaS92My9mZWVkL3RvcHN0b3J5L2hvdC1saXN0cy90b3RhbD9saW1pdD01MCZkZXNrdG9wPXRydWUiCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzX2VuZCA9IGRhdGEucGFnaW5nLmlzX2VuZDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpOwogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHZhbCwgaSkgPT4gKCh2YWwuaW5kZXggPSBwYWQoaSArIDEsIDIpKSwgdmFsKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHZhbCkgPT4gcmVuZGVyKEhvdGl0ZW0sIHZhbCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgodmFsKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh2YWwsICJ0ZXh0L2h0bWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuYXBwZW5kKGRvYy5ib2R5LmNoaWxkcmVuWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNfZW5kIHx8IGxvYWRpbmcgfHwgRGF0ZS5ub3coKSAtIHVwZGF0ZSA8IDEwMCB8fCB0YXJnZXQuc2Nyb2xsSGVpZ2h0IC0gd2luZG93LnNjcm9sbFkgPiAxMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbG9hZCgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBzY3JvbGwpOwogICAgICAgICAgICAgICAgY29uc3QgcmVsb2FkID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgIFsuLi50YXJnZXQuY2hpbGRyZW5dLmZvckVhY2goKGUpID0+IGUucmVtb3ZlKCkpOwogICAgICAgICAgICAgICAgICAgIGxvYWQodHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGRvY3VtZW50CiAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoImltZy5pY29uLXJlZnJlc2giKQogICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIHJlbG9hZCk7CiAgICAgICAgICAgICAgICBzY3JvbGwoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSAvL0VORAoKICAgIC8v6ZqQ56eB5L+d5oqk55So5oi35L+h5oGv5pi+56S6CiAgICBmdW5jdGlvbiBOb0hpZGRlblVzZXIoKSB7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLnRhcmdldC5ub2RlTmFtZSA9PSAiU1BBTiIKICAgICAgICAgICAgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdVc2VyTGluaycpCiAgICAgICAgICAgICYmIHdpbmRvdy5vcGVuKCdodHRwczovL3d3dy56aGlodS5jb20vcGVvcGxlLycgKyBKU09OLnBhcnNlKGUucGF0aC5maW5kKGUgPT4gZS5jbGFzc0xpc3QuY29udGFpbnMoJ0Fuc3dlckl0ZW0nKSkuZGF0YXNldC56YUV4dHJhTW9kdWxlKS5jYXJkLmNvbnRlbnQuYXV0aG9yX21lbWJlcl9oYXNoX2lkLCAnX2JsYW5rJykpOwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgIGNzcy5pbm5lckhUTUwgPSBgc3Bhbi5Vc2VyTGlua3tjdXJzb3I6IHBvaW50ZXI7fWA7CiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kKGNzcyk7CiAgICAgICAgfSk7CiAgICB9IC8vRU5ECgogICAgZnVuY3Rpb24gQWRkU2VhcmNoQnV0dG9uKCkgewoKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsICgpID0+IHsKICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09ICcvc2VhcmNoJykKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5Nb2JpbGVBcHBIZWFkZXItYWN0aW9ucycpOwogICAgICAgICAgICBpZiAoIW5vZGUpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9ICcvc2VhcmNoP3R5cGU9Y29udGVudCZxPSc7CiAgICAgICAgICAgIGxpbmsuY2xhc3NOYW1lID0gIk1vYmlsZUFwcEhlYWRlci1kb3dubG9hZExpbmsiOwogICAgICAgICAgICBsaW5rLmlubmVySFRNTCA9ICLmkJzntKIiOwogICAgICAgICAgICBub2RlLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJCZWdpbicsIGxpbmspOwogICAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gQ2hhbmdlVUEoKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoKHVuc2FmZVdpbmRvdyB8fCB3aW5kb3cpLm5hdmlnYXRvciwgewogICAgICAgICAgICB1c2VyQWdlbnQ6IHsgdmFsdWU6ICJNb3ppbGxhLzUuMCAoaVBhZDsgQ1BVIE9TIDExXzAgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA0LjEuMzQgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzExLjAgTW9iaWxlLzE1QTUzNDFmIFNhZmFyaS82MDQuMSIgfSwKICAgICAgICAgICAgcGxhdGZvcm06IHsgdmFsdWU6ICdNYWMnIH0KICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIFJhd0ltYWdlTG9hZGVyKCkgewogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoaXNNb2JpbGUgPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgZSA9PiBlLnRhcmdldC5ub2RlTmFtZSA9PSAnSU1HJyAmJiBlLnRhcmdldC5kYXRhc2V0Lm9yaWdpbmFsICYmIChlLnRhcmdldC5zcmMgPSBlLnRhcmdldC5kYXRhc2V0Lm9yaWdpbmFsKSkKICAgIH0KICAgIGZ1bmN0aW9uIFpodWFubGFuTm9BcHAoKSB7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IGUucGF0aC5maW5kKGUgPT4gZS5jbGFzc0xpc3QgJiYgZS5jbGFzc0xpc3QuY29udGFpbnMoJ1Bvc3QtU3ViJykpICYmIGUuc3RvcFByb3BhZ2F0aW9uKCksIHRydWUpOwogICAgfQogICAgZnVuY3Rpb24gTm9Db3B5QmxvY2tlcigpIHsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb3B5JywgZSA9PiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCB0cnVlKTsKICAgIH0KICAgIGlmIChpc01vYmlsZSkgewogICAgICAgIEFkZFNlYXJjaEJ1dHRvbigpOwogICAgICAgIGlmIChpc1podWFubGFuKSB7CiAgICAgICAgICAgIFpodWFubGFuTm9BcHAoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIENoYW5nZVVBKCk7CiAgICAgICAgfQoKICAgIH0gZWxzZSB7CiAgICAgICAgUmVwbGFjZUhvbWVQYWdlKCk7CiAgICB9CiAgICBOb0hpZGRlblVzZXIoKTsKICAgIFJhd0ltYWdlTG9hZGVyKCk7CgogICAgLy8g55Sx5LqO5LiN6IO95aSN5Yi255qE562U5qGI5rKh5pyJ5piO5pi+5qCH6K+GLOi/mOaYr+WFs+mXrei/meS4quWKn+iDveWlveS6hgogICAgLy8gTm9Db3B5QmxvY2tlcigpOwp9KSgpOwo="},{"name":"百度网盘文件高速下载，无需SVIP超级会员","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_prototypes":false,"noframes":null,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://pan.baidu.com/*","*://yun.baidu.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1642390204661,"data":{}},"enabled":true,"position":12,"uuid":"6ae85477-ba87-4438-b2c1-e7a841ade4e8","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDnmb7luqbnvZHnm5jmlofku7bpq5jpgJ/kuIvovb3vvIzml6DpnIBTVklQ6LaF57qn5Lya5ZGYCi8vIEBuYW1lc3BhY2UgCSDlpb3njqnlrp7pqozlrqQKLy8gQHZlcnNpb24gICAgICAwLjMuNQovLyBAYW50aWZlYXR1cmUgIG1lbWJlcnNoaXAgIOS4uumYsuatouaOpeWPo+iiq+ebl++8geivpeiEmuacrOmcgOimgei+k+WFpemqjOivgeeggeS5i+WQjuaJjeiDveS9v+eUqOWujOaVtOWKn+iDve+8jOaEn+iwoueQhuino++8geWmguaenOiEmuacrOS4jeiDveato+W4uOS9v+eUqO+8jOWPr+S7pemAmui/h+W+ruS/oeWFrOS8l+WPt+iBlOezu+aIke+8gQovLyBAZGVzY3JpcHRpb24gIDIwMjHlubQxMuaciDE05pelIOiEmuacrOWPr+eUqO+8geaXoOmcgOi2hee6p+S8muWRmO+8jOeZvuW6pue9keebmOaWh+S7tumrmOmAn+S4i+i9ve+8jOS4i+i9vemAn+W6puWfuuacrOiDvei3kea7oeS9oOeahOW4puWuveOAguS9v+eUqOS5i+WJjeivt+eci+S4i+S4i+mdoueahOS9v+eUqOaVmeeoi++8jOeJueWIq+aYr+ino+aekOWHuuebtOmTvuS5i+WQjuS4jeiDveebtOaOpeeCueWHu+mTvuaOpeS7peWPiklETeimgea3u+WKoFVB55qE6L+Z5Lik56eN5oOF5Ya144CC5aaC5p6c5LiL6L296Zeu6aKY77yM5Y+v5Lul5Y+N6aaI57uZ5oiR77yM5oiR5Lya56ys5LiA5pe26Ze05L+u5aSN6Zeu6aKY77yB5oSf6LCi77yBCi8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tLyoKLy8gQHJlcXVpcmUgICAgICBodHRwczovL3VucGtnLmNvbS9zd2VldGFsZXJ0L2Rpc3Qvc3dlZXRhbGVydC5taW4uanMKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5zdGF0aWNmaWxlLm9yZy9qcXVlcnkvMS4xMC4yL2pxdWVyeS5taW4uanMKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2NsaXBib2FyZEAyLjAuNi9kaXN0L2NsaXBib2FyZC5taW4uanMKLy8gQGdyYW50ICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgIEdNX2FkZFN0eWxlCi8vIEBsaWNlbnNlICAgICAgQUdQTC0zLjAKLy8gPT0vVXNlclNjcmlwdD09CiAKIAooZnVuY3Rpb24oKSB7CiAgdmFyIHNlbGVjdGVkTGlzdCA9IFtdOwogIHZhciBwd2QgPSAiIjsKICB2YXIgc2hhcmVVcmwgPSAiIjsKICB2YXIgZmlsZU5hbWUgPSAiIjsKICBpZighaXNIb21lKCkpewogICAgcmV0dXJuOwogIH0KIAogIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgIGNvbnNvbGUubG9nKCLmiafooYzkuoYiKQogICAgaW5pdFBhbmVsKCk7CiAgICBpbml0RXZlbnQoKTsKICB9LCAxMDAwKQogIGZ1bmN0aW9uIGluaXRFdmVudCgpIHsKICB9CiAgZnVuY3Rpb24gaW5pdFBhbmVsKCkgewogICAgdmFyICQgPSB1bnNhZmVXaW5kb3cualF1ZXJ5OwogICAgJCgiLnRjdUxBdSIpLnByZXBlbmQoJzxzcGFuIGlkPSJteS1kb3dubG9hZC1idG4iIGNsYXNzPSJnLWRyb3Bkb3duLWJ1dHRvbiBnLWJ1dHRvbiAgZy1idXR0b24tYmx1ZSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6I2QwN2QxMjtib3JkZXI6bm9uZTtjb2xvcjp3aGl0ZTtmb250LXNpemU6MTRweDtwYWRkaW5nLWxlZnQ6MTBweDtwYWRkaW5nLXJpZ2h0OjEwcHgiPuaegemAn+S4i+i9veWKqeaJizwvc3Bhbj4nKTsKICAgICQoIiNteS1kb3dubG9hZC1idG4iKS5jbGljayhmdW5jdGlvbihldmVudCl7CiAgICAgIHZhciByZXN1bHQgPSBjaGVja1NlbGVjdGVkRmlsZSgpOwogICAgICBpZihyZXN1bHQpIHsKICAgICAgICB2YXIgb2JqID0gZ2VuZXJhdGVSZXF1ZXN0T2JqKCk7CiAgICAgICAgR01feG1saHR0cFJlcXVlc3Qob2JqKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzd2FsKCLnm67liY3lj6rog73pgInkuK3ljZXkuKrmlofku7YiKQogICAgICB9CiAgICB9KQogIH0KIAogIGZ1bmN0aW9uIGdlbmVyYXRlUmVxdWVzdE9iaigpIHsKICAgIGxldCBiZHN0b2tlbiA9IHVuc2FmZVdpbmRvdy5sb2NhbHMuZ2V0KCdiZHN0b2tlbicpOwogICAgdmFyIHVybFRlbXBsYXRlID0gIGBodHRwczovL3Bhbi5iYWlkdS5jb20vc2hhcmUvc2V0P2NoYW5uZWw9Y2h1bmxlaSZjbGllbnR0eXBlPTAmd2ViPTEmY2hhbm5lbD1jaHVubGVpJndlYj0xJmFwcF9pZD0yNTA1MjgmYmRzdG9rZW49JHtiZHN0b2tlbn0mY2xpZW50dHlwZT0wYAogICAgcHdkID0gZ2VuZXJhdGVSYW5kb21Qd2QoNCk7CiAgICB2YXIgb2JqID0gewogICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicsCiAgICAgIHRpbWVvdXQ6IDgwMDAsCiAgICAgIHVybDogdXJsVGVtcGxhdGUsCiAgICAgIGRhdGE6IGBmaWRfbGlzdD1bJHtzZWxlY3RlZExpc3RbMF0uZnNfaWR9XSZzY2hhbm5lbD00JmNoYW5uZWxfbGlzdD1bXSZwZXJpb2Q9MSZwd2Q9JHtwd2R9YCwKICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgY29uc3QgbWFpbkNvbnRlbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIG1haW5Db250ZW50RGl2LmlkID0gIm1haW5Db250ZW50RGl2IjsKICAgICAgICAgIHN3aXRjaChyZXMucmVzcG9uc2UuZXJybm8pIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHNoYXJlVXJsID0gcmVzLnJlc3BvbnNlLmxpbms7CiAgICAgICAgICAgICAgZmlsZU5hbWUgPSBzZWxlY3RlZExpc3RbMF0uc2VydmVyX2ZpbGVuYW1lCiAgICAgICAgICAgICAgbWFpbkNvbnRlbnREaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGgxIGlkPSJ0aXRsZSI+5q2j5Zyo6I635Y+WICR7ZmlsZU5hbWV9IOeahOebtOmTvjwvaDE+CiAgICAgICAgICAgICAgICA8aHIvPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm9keSIgc3R5bGU9IndpZHRoOiA4NDBweDtoZWlnaHQ6NTAwcHg7ZGlzcGxheTpmbGV4Ij4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGVmdCIgc3R5bGU9ImZsZXg6MyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udGVudDEiIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQiPgogICAgICAgICAgICAgICAgICAgICAgPGgzPuS4i+i9veWcsOWdgDjlsI/ml7bmnInmlYjvvIzor7flj4rml7bkuIvovb08L2gzPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxoci8+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udGVudDIiIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQiPgogICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+KiDpk77mjqUgIOKGkyDihpMg4oaTIO+8mjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPSJyZWFsTGluayIgc3R5bGU9Im1hcmdpbi1ib3R0b206MjBweCI+PC9wPgogICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cueW91YXBwc3RvcmUuY29tLzExMTQuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiPi0+6ZO+5o6l5L2/55So5biu5YqpIOivt+eCueWHu+i/memHjDwtPC9hPgogICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbi10b3A6MTBweCI+5aaC5p6c5L2g6ZyA6KaBSURN6L+Z5Liq6L2v5Lu277yM5Y+v5Lul5Zyo5YWs5LyX5Y+35Zue5aSNSURNPC9wPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxoci8+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udGVudDMiIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQiPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OjQwcHg7bGluZS1oZWlnaHQ6NDBweDtmb250LXNpemU6MTRweCI+5rip6aao5o+Q56S677ya5L2/55So5pa55rOVIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnlvdWFwcHN0b3JlLmNvbS8xMTE0Lmh0bWwiIHRhcmdldD0iX2JsYW5rIj4tPuivt+eCueWHu+i/memHjDwtPC9hPiDjgII8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDo0MHB4O2xpbmUtaGVpZ2h0OjQwcHg7Zm9udC1zaXplOjE0cHgiPuWmguaenOmBh+WIsOiOt+WPlumTvuaOpeWksei0peaIluiAheS4i+i9veWksei0peeahOmXrumimDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OjQwcHg7bGluZS1oZWlnaHQ6NDBweDtmb250LXNpemU6MTRweCI+6K+35Zyo5b6u5L+h5YWs5LyX5Y+344CQ6L2v5Lu26ZuG6KOF566x44CR5ZCO5Y+w55WZ6KiA5Y+N6aaIPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6NDBweDtsaW5lLWhlaWdodDo0MHB4O2ZvbnQtc2l6ZToxNHB4Ij7kvZzogIXkvJrlsL3lv6vkv67lpI3vvIE8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJpZ2h0IiBzdHlsZT0iZmxleDozO2Rpc3BsYXk6IGZsZXg7ZmxleC1kaXJlY3Rpb246IGNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjthbGlnbi1pdGVtczogY2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ici1jb250ZW50MSIgc3R5bGU9IndpZHRoOjEwMCU7cGFkZGluZy10b3A6NDBweCI+CiAgICAgICAgICAgICAgICAgICAgICA8cCBpZD0idGlwMSI+PC9wPgogICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJnZXREaXJlY3RMaW5rQnRuIiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6NDBweDttYXJnaW4tdG9wOjEwcHg7Zm9udC1zaXplOjIwcHg7YmFja2dyb3VuZDojZDA3ZDEyO2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MTBweCIgdHlwZT0iYnV0dG9uIiB2YWx1ZT0i54K55Ye76I635Y+W55u06ZO+Ij48L2lucHV0PgogICAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9ImNoZWNrQ29kZSIgaWQ9ImNoZWNrQ29kZSIgc3R5bGU9IndpZHRoOjEwMCU7aGVpZ2h0OjQwcHg7bWFyZ2luLXRvcDoyMHB4O2ZvbnQtc2l6ZToxNXB4O2JhY2tncm91bmQ6I2Q5ZDlkOTtib3JkZXI6bm9uZTtvdXRsaW5lOm5vbmU7Y29sb3I6YmxhY2s7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmctbGVmdDoxMHB4O2JveC1zaXppbmc6Ym9yZGVyLWJveCIgcGxhY2Vob2xkZXI9Iuivt+i+k+WFpemqjOivgeeggSIvPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjEycHg7dGV4dC1hbGlnbjpsZWZ0O21hcmdpbi10b3A6NXB4Ij4qIOS4uumYsuatouaOpeWPo+iiq+a7peeUqO+8jOS4jeWumuacn+abtOaWsOmqjOivgeeggTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6Ym9sZGVyO3RleHQtYWxpZ246bGVmdDttYXJnaW4tdG9wOjEwcHgiPiog6aqM6K+B56CB5YWN6LS56I635Y+W5pa55byPPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTRweDt0ZXh0LWFsaWduOmxlZnQiPiAx77yJ5YWz5rOo5YWs5LyX5Y+344CQ6L2v5Lu26ZuG6KOF566x44CR77yM5Zue5aSN6aqM6K+B56CBPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTRweDt0ZXh0LWFsaWduOmxlZnQiPiAy77yJ5bCG6aqM6K+B56CB6L6T5YWl5LiK5pa56L6T5YWl5qGG77yM54S25ZCO54K55Ye75LiK5pa55oyJ6ZKu5Y2z5Y+v6I635Y+W55u06ZO+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ici1jb250ZW50MiI+CiAgICAgICAgICAgICAgICAgICAgICA8aW1nIHdpZHRoPSI4MCUiIHNyYz0iaHR0cHM6Ly9zNC5heDF4LmNvbS8yMDIxLzEyLzE0L294STNFNC5wbmciLz4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgY29udGVudDptYWluQ29udGVudERpdiwKICAgICAgICAgICAgICAgIGNsb3NlT25DbGlja091dHNpZGU6ZmFsc2UsCiAgICAgICAgICAgICAgICBidXR0b25zIDogewogICAgICAgICAgICAgICAgICBidXR0b24xIDogewogICAgICAgICAgICAgICAgICAgIHRleHQgOiAi5YWz6ZetIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgYnV0dG9uMiA6IHsKICAgICAgICAgICAgICAgICAgICB0ZXh0IDogIuWPjemmiOmXrumimCIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgICAgIGlmKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwuY2xvc2UoKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oImh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy80Mjk1MTEvZmVlZGJhY2siLCJfYmxhbmsiKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgJCgiI2dldERpcmVjdExpbmtCdG4iKS5iaW5kKCJjbGljayIsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBsZXQgY2hlY2tDb2RlID0gbWFpbkNvbnRlbnREaXYucXVlcnlTZWxlY3RvckFsbCgiI2NoZWNrQ29kZSIpWzBdLnZhbHVlCiAgICAgICAgICAgICAgICBpZihjaGVja0NvZGUpewogICAgICAgICAgICAgICAgICBnZXREaXJlY3RMaW5rQnRuKGNoZWNrQ29kZSkKICAgICAgICAgICAgICAgICAgbWFpbkNvbnRlbnREaXYucXVlcnlTZWxlY3RvckFsbCgiI3RpcDEiKVswXS5pbm5lckhUTUwgPSAi77yB77yB77yB5q2j5Zyo6I635Y+W6ZO+5o6l77yM6K+356iN562J77yB77yB77yBIgogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgYWxlcnQoIuivt+i+k+WFpemqjOivgeeggSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBzd2FsKCLlj5HnlJ/mnKrnn6XplJnor68iKQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gb2JqOwogIH0KICBmdW5jdGlvbiBnZXREaXJlY3RMaW5rQnRuKGNoZWNrQ29kZSkgewogICAgbGV0IHVyaSA9IHNoYXJlVXJsLnNwbGl0KCIvIikucG9wKCkKICAgIGxldCByZXF1ZXN0T2JqID0gewogICAgICBtZXRob2Q6ICdHRVQnLAogICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgdGltZW91dDogODAwMCwKICAgICAgdXJsOiBgaHR0cDovL3Rvb2wueW91YXBwc3RvcmUuY29tL3Bhbi9hcGkvcGFyc2U/c2hvcnRVcmw9JHt1cml9JnB3ZD0ke3B3ZH0mY2hlY2tDb2RlPSR7Y2hlY2tDb2RlfWAsCiAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc09iaikgewogICAgICAgIC8vY29uc29sZS5sb2coJ+WIhuS6q+aWh+S7tuaXtu+8jOeZvuW6pui/lOWbnu+8micsIHJlcyk7CiAgICAgICAgaWYgKHJlc09iai5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgbGV0IGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UocmVzT2JqLnJlc3BvbnNlKTsKICAgICAgICAgIGlmIChqc29uUmVzcG9uc2Uuc3RhdHVzID09ICdzdWNjZXNzJykgewogICAgICAgICAgICBtYWluQ29udGVudERpdi5xdWVyeVNlbGVjdG9yQWxsKCIjdGlwMSIpWzBdLmlubmVySFRNTCA9ICLojrflj5bpq5jpgJ/pk77mjqXmiJDlip/vvIHvvIHvvIHor7flpI3liLblt6bkvqfkuIvovb3pk77mjqUs5LiA5a6a5LiN6KaB55u05o6l54K55Ye76ZO+5o6l6L+b6KGM5LiL6L29IgogICAgICAgICAgICBtYWluQ29udGVudERpdi5xdWVyeVNlbGVjdG9yQWxsKCJoMSN0aXRsZSIpWzBdLmlubmVySFRNTCA9IGDojrflj5YgJHtmaWxlTmFtZX0g55qE6auY6YCf55u06ZO+5oiQ5YqfYAogICAgICAgICAgICBtYWluQ29udGVudERpdi5xdWVyeVNlbGVjdG9yQWxsKCJwI3JlYWxMaW5rIilbMF0uaW5uZXJIVE1MID0gYDxhIGhyZWY9JHtqc29uUmVzcG9uc2UubGlua30gc3R5bGU9ImNvbG9yOnJlZDtmb250LXNpemU6MTZweCI+5LiL6L296ZO+5o6lPC9hPmAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1haW5Db250ZW50RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImgxI3RpdGxlIilbMF0uaW5uZXJIVE1MID0gYOiOt+WPliAke2ZpbGVOYW1lfSDnmoTpq5jpgJ/nm7Tpk77lpLHotKVgCiAgICAgICAgICAgIG1haW5Db250ZW50RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIiN0aXAxIilbMF0uaW5uZXJIVE1MID0gYOiOt+WPlumrmOmAn+mTvuaOpTxzcGFuIHN0eWxlPSJmb250LXdlaWdodDo4MDA7Y29sb3I6cmVkIj7lpLHotKXvvIHvvIHvvIE8L3NwYW4+LOWOn+WboOaYryR7anNvblJlc3BvbnNlLnRleHR9YAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgR01feG1saHR0cFJlcXVlc3QocmVxdWVzdE9iaikKICAgIAogIH0KIAogIGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tUHdkKGxlbmd0aCkgewogICAgZSA9IGxlbmd0aCB8fCA0OwogICAgdmFyIHQgPSAiQUJDREVGR0hKS01OUFFSU1RXWFlaYWJjZGVmaGlqa21ucHJzdHd4eXoxMjM0NTY3ODkiLAogICAgYSA9IHQubGVuZ3RoLAogICAgbiA9ICIiOwogICAgZm9yIChpID0gMDsgaSA8IGU7IGkrKykgbiArPSB0LmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhKSk7CiAgICByZXR1cm4gbgogIH0KIAogIGZ1bmN0aW9uIGNoZWNrU2VsZWN0ZWRGaWxlKCkgewogICAgc2VsZWN0ZWRMaXN0ID0gcmVxdWlyZSgic3lzdGVtLWNvcmU6Y29udGV4dC9jb250ZXh0LmpzIikuaW5zdGFuY2VGb3JTeXN0ZW0ubGlzdC5nZXRTZWxlY3RlZCgpOwogICAgdmFyIHJlcyA9IGRvQ2hlY2soc2VsZWN0ZWRMaXN0KQogICAgcmV0dXJuIHJlczsKICB9CiAKICBmdW5jdGlvbiBkb0NoZWNrKHNlbGVjdGVkTGlzdCkgewogICAgaWYoc2VsZWN0ZWRMaXN0ICYmIHNlbGVjdGVkTGlzdC5sZW5ndGggPT09IDEpIHsKICAgICAgaWYoc2VsZWN0ZWRMaXN0WzBdLmlzZGlyID09PSAxKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGlzSG9tZSgpIHsKICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygiL2Rpc2svaG9tZSIpOwogIH0KICBHTV9hZGRTdHlsZShgCiAgLnN3YWwtbW9kYWwgewogICAgICBtaW4td2lkdGg6IDg0MHB4ICFpbXBvcnRhbnQ7CiAgICAgIHdpZHRoOiBhdXRvOwogIH1gKQp9KSgp","requires":[{"meta":{"name":"sweetalert.min.js","url":"https://unpkg.com/sweetalert/dist/sweetalert.min.js","ts":1642390207021,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuc3dhbD1lKCk6dC5zd2FsPWUoKX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtmdW5jdGlvbiBlKG8pe2lmKG5bb10pcmV0dXJuIG5bb10uZXhwb3J0czt2YXIgcj1uW29dPXtpOm8sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtvXS5jYWxsKHIuZXhwb3J0cyxyLHIuZXhwb3J0cyxlKSxyLmw9ITAsci5leHBvcnRzfXZhciBuPXt9O3JldHVybiBlLm09dCxlLmM9bixlLmQ9ZnVuY3Rpb24odCxuLG8pe2Uubyh0LG4pfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6b30pfSxlLm49ZnVuY3Rpb24odCl7dmFyIG49dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIGUuZChuLCJhIixuKSxufSxlLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LGUucD0iIixlKGUucz04KX0oW2Z1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPSJzd2FsLWJ1dHRvbiI7ZS5DTEFTU19OQU1FUz17TU9EQUw6InN3YWwtbW9kYWwiLE9WRVJMQVk6InN3YWwtb3ZlcmxheSIsU0hPV19NT0RBTDoic3dhbC1vdmVybGF5LS1zaG93LW1vZGFsIixNT0RBTF9USVRMRToic3dhbC10aXRsZSIsTU9EQUxfVEVYVDoic3dhbC10ZXh0IixJQ09OOiJzd2FsLWljb24iLElDT05fQ1VTVE9NOiJzd2FsLWljb24tLWN1c3RvbSIsQ09OVEVOVDoic3dhbC1jb250ZW50IixGT09URVI6InN3YWwtZm9vdGVyIixCVVRUT05fQ09OVEFJTkVSOiJzd2FsLWJ1dHRvbi1jb250YWluZXIiLEJVVFRPTjpvLENPTkZJUk1fQlVUVE9OOm8rIi0tY29uZmlybSIsQ0FOQ0VMX0JVVFRPTjpvKyItLWNhbmNlbCIsREFOR0VSX0JVVFRPTjpvKyItLWRhbmdlciIsQlVUVE9OX0xPQURJTkc6bysiLS1sb2FkaW5nIixCVVRUT05fTE9BREVSOm8rIl9fbG9hZGVyIn0sZS5kZWZhdWx0PWUuQ0xBU1NfTkFNRVN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuZ2V0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT0iLiIrdDtyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKX0sZS5zdHJpbmdUb05vZGU9ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuaW5uZXJIVE1MPXQudHJpbSgpLGUuZmlyc3RDaGlsZH0sZS5pbnNlcnRBZnRlcj1mdW5jdGlvbih0LGUpe3ZhciBuPWUubmV4dFNpYmxpbmc7ZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0LG4pfSxlLnJlbW92ZU5vZGU9ZnVuY3Rpb24odCl7dC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHQpfSxlLnRocm93RXJyPWZ1bmN0aW9uKHQpe3Rocm93IHQ9dC5yZXBsYWNlKC8gKyg/PSApL2csIiIpLCJTd2VldEFsZXJ0OiAiKyh0PXQudHJpbSgpKX0sZS5pc1BsYWluT2JqZWN0PWZ1bmN0aW9uKHQpe2lmKCJbb2JqZWN0IE9iamVjdF0iIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXJldHVybiExO3ZhciBlPU9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtyZXR1cm4gbnVsbD09PWV8fGU9PT1PYmplY3QucHJvdG90eXBlfSxlLm9yZGluYWxTdWZmaXhPZj1mdW5jdGlvbih0KXt2YXIgZT10JTEwLG49dCUxMDA7cmV0dXJuIDE9PT1lJiYxMSE9PW4/dCsic3QiOjI9PT1lJiYxMiE9PW4/dCsibmQiOjM9PT1lJiYxMyE9PW4/dCsicmQiOnQrInRoIn19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbyh0KXtmb3IodmFyIG4gaW4gdCllLmhhc093blByb3BlcnR5KG4pfHwoZVtuXT10W25dKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksbyhuKDI1KSk7dmFyIHI9bigyNik7ZS5vdmVybGF5TWFya3VwPXIuZGVmYXVsdCxvKG4oMjcpKSxvKG4oMjgpKSxvKG4oMjkpKTt2YXIgaT1uKDApLGE9aS5kZWZhdWx0Lk1PREFMX1RJVExFLHM9aS5kZWZhdWx0Lk1PREFMX1RFWFQsYz1pLmRlZmF1bHQuSUNPTixsPWkuZGVmYXVsdC5GT09URVI7ZS5pY29uTWFya3VwPSdcbiAgPGRpdiBjbGFzcz0iJytjKyciPjwvZGl2PicsZS50aXRsZU1hcmt1cD0nXG4gIDxkaXYgY2xhc3M9IicrYSsnIj48L2Rpdj5cbicsZS50ZXh0TWFya3VwPSdcbiAgPGRpdiBjbGFzcz0iJytzKyciPjwvZGl2PicsZS5mb290ZXJNYXJrdXA9J1xuICA8ZGl2IGNsYXNzPSInK2wrJyI+PC9kaXY+XG4nfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDEpO2UuQ09ORklSTV9LRVk9ImNvbmZpcm0iLGUuQ0FOQ0VMX0tFWT0iY2FuY2VsIjt2YXIgcj17dmlzaWJsZTohMCx0ZXh0Om51bGwsdmFsdWU6bnVsbCxjbGFzc05hbWU6IiIsY2xvc2VNb2RhbDohMH0saT1PYmplY3QuYXNzaWduKHt9LHIse3Zpc2libGU6ITEsdGV4dDoiQ2FuY2VsIix2YWx1ZTpudWxsfSksYT1PYmplY3QuYXNzaWduKHt9LHIse3RleHQ6Ik9LIix2YWx1ZTohMH0pO2UuZGVmYXVsdEJ1dHRvbkxpc3Q9e2NhbmNlbDppLGNvbmZpcm06YX07dmFyIHM9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgZS5DT05GSVJNX0tFWTpyZXR1cm4gYTtjYXNlIGUuQ0FOQ0VMX0tFWTpyZXR1cm4gaTtkZWZhdWx0OnZhciBuPXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7fSxyLHt0ZXh0Om4sdmFsdWU6dH0pfX0sYz1mdW5jdGlvbih0LGUpe3ZhciBuPXModCk7cmV0dXJuITA9PT1lP09iamVjdC5hc3NpZ24oe30sbix7dmlzaWJsZTohMH0pOiJzdHJpbmciPT10eXBlb2YgZT9PYmplY3QuYXNzaWduKHt9LG4se3Zpc2libGU6ITAsdGV4dDplfSk6by5pc1BsYWluT2JqZWN0KGUpP09iamVjdC5hc3NpZ24oe3Zpc2libGU6ITB9LG4sZSk6T2JqZWN0LmFzc2lnbih7fSxuLHt2aXNpYmxlOiExfSl9LGw9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LG49MCxvPU9iamVjdC5rZXlzKHQpO248by5sZW5ndGg7bisrKXt2YXIgcj1vW25dLGE9dFtyXSxzPWMocixhKTtlW3JdPXN9cmV0dXJuIGUuY2FuY2VsfHwoZS5jYW5jZWw9aSksZX0sdT1mdW5jdGlvbih0KXt2YXIgbj17fTtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMTpuW2UuQ0FOQ0VMX0tFWV09T2JqZWN0LmFzc2lnbih7fSxpLHt2aXNpYmxlOiExfSk7YnJlYWs7Y2FzZSAyOm5bZS5DQU5DRUxfS0VZXT1jKGUuQ0FOQ0VMX0tFWSx0WzBdKSxuW2UuQ09ORklSTV9LRVldPWMoZS5DT05GSVJNX0tFWSx0WzFdKTticmVhaztkZWZhdWx0Om8udGhyb3dFcnIoIkludmFsaWQgbnVtYmVyIG9mICdidXR0b25zJyBpbiBhcnJheSAoIit0Lmxlbmd0aCsiKS5cbiAgICAgIElmIHlvdSB3YW50IG1vcmUgdGhhbiAyIGJ1dHRvbnMsIHlvdSBuZWVkIHRvIHVzZSBhbiBvYmplY3QhIil9cmV0dXJuIG59O2UuZ2V0QnV0dG9uTGlzdE9wdHM9ZnVuY3Rpb24odCl7dmFyIG49ZS5kZWZhdWx0QnV0dG9uTGlzdDtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/bltlLkNPTkZJUk1fS0VZXT1jKGUuQ09ORklSTV9LRVksdCk6QXJyYXkuaXNBcnJheSh0KT9uPXUodCk6by5pc1BsYWluT2JqZWN0KHQpP249bCh0KTohMD09PXQ/bj11KFshMCwhMF0pOiExPT09dD9uPXUoWyExLCExXSk6dm9pZCAwPT09dCYmKG49ZS5kZWZhdWx0QnV0dG9uTGlzdCksbn19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMSkscj1uKDIpLGk9bigwKSxhPWkuZGVmYXVsdC5NT0RBTCxzPWkuZGVmYXVsdC5PVkVSTEFZLGM9bigzMCksbD1uKDMxKSx1PW4oMzIpLGY9bigzMyk7ZS5pbmplY3RFbEludG9Nb2RhbD1mdW5jdGlvbih0KXt2YXIgZT1vLmdldE5vZGUoYSksbj1vLnN0cmluZ1RvTm9kZSh0KTtyZXR1cm4gZS5hcHBlbmRDaGlsZChuKSxufTt2YXIgZD1mdW5jdGlvbih0KXt0LmNsYXNzTmFtZT1hLHQudGV4dENvbnRlbnQ9IiJ9LHA9ZnVuY3Rpb24odCxlKXtkKHQpO3ZhciBuPWUuY2xhc3NOYW1lO24mJnQuY2xhc3NMaXN0LmFkZChuKX07ZS5pbml0TW9kYWxDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPW8uZ2V0Tm9kZShhKTtwKGUsdCksYy5kZWZhdWx0KHQuaWNvbiksbC5pbml0VGl0bGUodC50aXRsZSksbC5pbml0VGV4dCh0LnRleHQpLGYuZGVmYXVsdCh0LmNvbnRlbnQpLHUuZGVmYXVsdCh0LmJ1dHRvbnMsdC5kYW5nZXJNb2RlKX07dmFyIG09ZnVuY3Rpb24oKXt2YXIgdD1vLmdldE5vZGUocyksZT1vLnN0cmluZ1RvTm9kZShyLm1vZGFsTWFya3VwKTt0LmFwcGVuZENoaWxkKGUpfTtlLmRlZmF1bHQ9bX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigzKSxyPXtpc09wZW46ITEscHJvbWlzZTpudWxsLGFjdGlvbnM6e30sdGltZXI6bnVsbH0saT1PYmplY3QuYXNzaWduKHt9LHIpO2UucmVzZXRTdGF0ZT1mdW5jdGlvbigpe2k9T2JqZWN0LmFzc2lnbih7fSxyKX0sZS5zZXRBY3Rpb25WYWx1ZT1mdW5jdGlvbih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpcmV0dXJuIGEoby5DT05GSVJNX0tFWSx0KTtmb3IodmFyIGUgaW4gdClhKGUsdFtlXSl9O3ZhciBhPWZ1bmN0aW9uKHQsZSl7aS5hY3Rpb25zW3RdfHwoaS5hY3Rpb25zW3RdPXt9KSxPYmplY3QuYXNzaWduKGkuYWN0aW9uc1t0XSx7dmFsdWU6ZX0pfTtlLnNldEFjdGlvbk9wdGlvbnNGb3I9ZnVuY3Rpb24odCxlKXt2YXIgbj0odm9pZCAwPT09ZT97fTplKS5jbG9zZU1vZGFsLG89dm9pZCAwPT09bnx8bjtPYmplY3QuYXNzaWduKGkuYWN0aW9uc1t0XSx7Y2xvc2VNb2RhbDpvfSl9LGUuZGVmYXVsdD1pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDEpLHI9bigzKSxpPW4oMCksYT1pLmRlZmF1bHQuT1ZFUkxBWSxzPWkuZGVmYXVsdC5TSE9XX01PREFMLGM9aS5kZWZhdWx0LkJVVFRPTixsPWkuZGVmYXVsdC5CVVRUT05fTE9BRElORyx1PW4oNSk7ZS5vcGVuTW9kYWw9ZnVuY3Rpb24oKXtvLmdldE5vZGUoYSkuY2xhc3NMaXN0LmFkZChzKSx1LmRlZmF1bHQuaXNPcGVuPSEwfTt2YXIgZj1mdW5jdGlvbigpe28uZ2V0Tm9kZShhKS5jbGFzc0xpc3QucmVtb3ZlKHMpLHUuZGVmYXVsdC5pc09wZW49ITF9O2Uub25BY3Rpb249ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ci5DQU5DRUxfS0VZKTt2YXIgZT11LmRlZmF1bHQuYWN0aW9uc1t0XSxuPWUudmFsdWU7aWYoITE9PT1lLmNsb3NlTW9kYWwpe3ZhciBpPWMrIi0tIit0O28uZ2V0Tm9kZShpKS5jbGFzc0xpc3QuYWRkKGwpfWVsc2UgZigpO3UuZGVmYXVsdC5wcm9taXNlLnJlc29sdmUobil9LGUuZ2V0U3RhdGU9ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3QuYXNzaWduKHt9LHUuZGVmYXVsdCk7cmV0dXJuIGRlbGV0ZSB0LnByb21pc2UsZGVsZXRlIHQudGltZXIsdH0sZS5zdG9wTG9hZGluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuIitjKSxlPTA7ZTx0Lmxlbmd0aDtlKyspe3RbZV0uY2xhc3NMaXN0LnJlbW92ZShsKX19fSxmdW5jdGlvbih0LGUpe3ZhciBuO249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7bj1ufHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpfHwoMCxldmFsKSgidGhpcyIpfWNhdGNoKHQpeyJvYmplY3QiPT10eXBlb2Ygd2luZG93JiYobj13aW5kb3cpfXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe3QuZXhwb3J0cz1lLnN3ZWV0QWxlcnQ9big5KX0pLmNhbGwoZSxuKDcpKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXt0LmV4cG9ydHM9ZS5zd2FsPW4oMTApfSkuY2FsbChlLG4oNykpfSxmdW5jdGlvbih0LGUsbil7InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJm4oMTEpLG4oMTYpO3ZhciBvPW4oMjMpLmRlZmF1bHQ7dC5leHBvcnRzPW99LGZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1uKDEyKTsic3RyaW5nIj09dHlwZW9mIG8mJihvPVtbdC5pLG8sIiJdXSk7dmFyIHI9e2luc2VydEF0OiJ0b3AifTtyLnRyYW5zZm9ybT12b2lkIDA7bigxNCkobyxyKTtvLmxvY2FscyYmKHQuZXhwb3J0cz1vLmxvY2Fscyl9LGZ1bmN0aW9uKHQsZSxuKXtlPXQuZXhwb3J0cz1uKDEzKSh2b2lkIDApLGUucHVzaChbdC5pLCcuc3dhbC1pY29uLS1lcnJvcntib3JkZXItY29sb3I6I2YyNzQ3NDstd2Via2l0LWFuaW1hdGlvbjphbmltYXRlRXJyb3JJY29uIC41czthbmltYXRpb246YW5pbWF0ZUVycm9ySWNvbiAuNXN9LnN3YWwtaWNvbi0tZXJyb3JfX3gtbWFya3twb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrOy13ZWJraXQtYW5pbWF0aW9uOmFuaW1hdGVYTWFyayAuNXM7YW5pbWF0aW9uOmFuaW1hdGVYTWFyayAuNXN9LnN3YWwtaWNvbi0tZXJyb3JfX2xpbmV7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjVweDt3aWR0aDo0N3B4O2JhY2tncm91bmQtY29sb3I6I2YyNzQ3NDtkaXNwbGF5OmJsb2NrO3RvcDozN3B4O2JvcmRlci1yYWRpdXM6MnB4fS5zd2FsLWljb24tLWVycm9yX19saW5lLS1sZWZ0ey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7bGVmdDoxN3B4fS5zd2FsLWljb24tLWVycm9yX19saW5lLS1yaWdodHstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7cmlnaHQ6MTZweH1ALXdlYmtpdC1rZXlmcmFtZXMgYW5pbWF0ZUVycm9ySWNvbnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGVYKDEwMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZVgoMTAwZGVnKTtvcGFjaXR5OjB9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlWCgwZGVnKTt0cmFuc2Zvcm06cm90YXRlWCgwZGVnKTtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgYW5pbWF0ZUVycm9ySWNvbnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGVYKDEwMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZVgoMTAwZGVnKTtvcGFjaXR5OjB9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlWCgwZGVnKTt0cmFuc2Zvcm06cm90YXRlWCgwZGVnKTtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBhbmltYXRlWE1hcmt7MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjQpO3RyYW5zZm9ybTpzY2FsZSguNCk7bWFyZ2luLXRvcDoyNnB4O29wYWNpdHk6MH01MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjQpO3RyYW5zZm9ybTpzY2FsZSguNCk7bWFyZ2luLXRvcDoyNnB4O29wYWNpdHk6MH04MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4xNSk7dHJhbnNmb3JtOnNjYWxlKDEuMTUpO21hcmdpbi10b3A6LTZweH10b3std2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7bWFyZ2luLXRvcDowO29wYWNpdHk6MX19QGtleWZyYW1lcyBhbmltYXRlWE1hcmt7MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjQpO3RyYW5zZm9ybTpzY2FsZSguNCk7bWFyZ2luLXRvcDoyNnB4O29wYWNpdHk6MH01MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjQpO3RyYW5zZm9ybTpzY2FsZSguNCk7bWFyZ2luLXRvcDoyNnB4O29wYWNpdHk6MH04MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4xNSk7dHJhbnNmb3JtOnNjYWxlKDEuMTUpO21hcmdpbi10b3A6LTZweH10b3std2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7bWFyZ2luLXRvcDowO29wYWNpdHk6MX19LnN3YWwtaWNvbi0td2FybmluZ3tib3JkZXItY29sb3I6I2Y4YmI4Njstd2Via2l0LWFuaW1hdGlvbjpwdWxzZVdhcm5pbmcgLjc1cyBpbmZpbml0ZSBhbHRlcm5hdGU7YW5pbWF0aW9uOnB1bHNlV2FybmluZyAuNzVzIGluZmluaXRlIGFsdGVybmF0ZX0uc3dhbC1pY29uLS13YXJuaW5nX19ib2R5e3dpZHRoOjVweDtoZWlnaHQ6NDdweDt0b3A6MTBweDtib3JkZXItcmFkaXVzOjJweDttYXJnaW4tbGVmdDotMnB4fS5zd2FsLWljb24tLXdhcm5pbmdfX2JvZHksLnN3YWwtaWNvbi0td2FybmluZ19fZG90e3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6NTAlO2JhY2tncm91bmQtY29sb3I6I2Y4YmI4Nn0uc3dhbC1pY29uLS13YXJuaW5nX19kb3R7d2lkdGg6N3B4O2hlaWdodDo3cHg7Ym9yZGVyLXJhZGl1czo1MCU7bWFyZ2luLWxlZnQ6LTRweDtib3R0b206LTExcHh9QC13ZWJraXQta2V5ZnJhbWVzIHB1bHNlV2FybmluZ3swJXtib3JkZXItY29sb3I6I2Y4ZDQ4Nn10b3tib3JkZXItY29sb3I6I2Y4YmI4Nn19QGtleWZyYW1lcyBwdWxzZVdhcm5pbmd7MCV7Ym9yZGVyLWNvbG9yOiNmOGQ0ODZ9dG97Ym9yZGVyLWNvbG9yOiNmOGJiODZ9fS5zd2FsLWljb24tLXN1Y2Nlc3N7Ym9yZGVyLWNvbG9yOiNhNWRjODZ9LnN3YWwtaWNvbi0tc3VjY2VzczphZnRlciwuc3dhbC1pY29uLS1zdWNjZXNzOmJlZm9yZXtjb250ZW50OiIiO2JvcmRlci1yYWRpdXM6NTAlO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjYwcHg7aGVpZ2h0OjEyMHB4O2JhY2tncm91bmQ6I2ZmZjstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoNDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpfS5zd2FsLWljb24tLXN1Y2Nlc3M6YmVmb3Jle2JvcmRlci1yYWRpdXM6MTIwcHggMCAwIDEyMHB4O3RvcDotN3B4O2xlZnQ6LTMzcHg7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpOy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjo2MHB4IDYwcHg7dHJhbnNmb3JtLW9yaWdpbjo2MHB4IDYwcHh9LnN3YWwtaWNvbi0tc3VjY2VzczphZnRlcntib3JkZXItcmFkaXVzOjAgMTIwcHggMTIwcHggMDt0b3A6LTExcHg7bGVmdDozMHB4Oy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46MCA2MHB4O3RyYW5zZm9ybS1vcmlnaW46MCA2MHB4Oy13ZWJraXQtYW5pbWF0aW9uOnJvdGF0ZVBsYWNlaG9sZGVyIDQuMjVzIGVhc2UtaW47YW5pbWF0aW9uOnJvdGF0ZVBsYWNlaG9sZGVyIDQuMjVzIGVhc2UtaW59LnN3YWwtaWNvbi0tc3VjY2Vzc19fcmluZ3t3aWR0aDo4MHB4O2hlaWdodDo4MHB4O2JvcmRlcjo0cHggc29saWQgaHNsYSg5OCw1NSUsNjklLC4yKTtib3JkZXItcmFkaXVzOjUwJTtib3gtc2l6aW5nOmNvbnRlbnQtYm94O3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTRweDt0b3A6LTRweDt6LWluZGV4OjJ9LnN3YWwtaWNvbi0tc3VjY2Vzc19faGlkZS1jb3JuZXJze3dpZHRoOjVweDtoZWlnaHQ6OTBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7cGFkZGluZzoxcHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDoyOHB4O3RvcDo4cHg7ei1pbmRleDoxOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0uc3dhbC1pY29uLS1zdWNjZXNzX19saW5le2hlaWdodDo1cHg7YmFja2dyb3VuZC1jb2xvcjojYTVkYzg2O2Rpc3BsYXk6YmxvY2s7Ym9yZGVyLXJhZGl1czoycHg7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoyfS5zd2FsLWljb24tLXN1Y2Nlc3NfX2xpbmUtLXRpcHt3aWR0aDoyNXB4O2xlZnQ6MTRweDt0b3A6NDZweDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoNDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpOy13ZWJraXQtYW5pbWF0aW9uOmFuaW1hdGVTdWNjZXNzVGlwIC43NXM7YW5pbWF0aW9uOmFuaW1hdGVTdWNjZXNzVGlwIC43NXN9LnN3YWwtaWNvbi0tc3VjY2Vzc19fbGluZS0tbG9uZ3t3aWR0aDo0N3B4O3JpZ2h0OjhweDt0b3A6MzhweDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7LXdlYmtpdC1hbmltYXRpb246YW5pbWF0ZVN1Y2Nlc3NMb25nIC43NXM7YW5pbWF0aW9uOmFuaW1hdGVTdWNjZXNzTG9uZyAuNzVzfUAtd2Via2l0LWtleWZyYW1lcyByb3RhdGVQbGFjZWhvbGRlcnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9NSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTEyJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX10b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX19QGtleWZyYW1lcyByb3RhdGVQbGFjZWhvbGRlcnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9NSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTEyJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX10b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX19QC13ZWJraXQta2V5ZnJhbWVzIGFuaW1hdGVTdWNjZXNzVGlwezAle3dpZHRoOjA7bGVmdDoxcHg7dG9wOjE5cHh9NTQle3dpZHRoOjA7bGVmdDoxcHg7dG9wOjE5cHh9NzAle3dpZHRoOjUwcHg7bGVmdDotOHB4O3RvcDozN3B4fTg0JXt3aWR0aDoxN3B4O2xlZnQ6MjFweDt0b3A6NDhweH10b3t3aWR0aDoyNXB4O2xlZnQ6MTRweDt0b3A6NDVweH19QGtleWZyYW1lcyBhbmltYXRlU3VjY2Vzc1RpcHswJXt3aWR0aDowO2xlZnQ6MXB4O3RvcDoxOXB4fTU0JXt3aWR0aDowO2xlZnQ6MXB4O3RvcDoxOXB4fTcwJXt3aWR0aDo1MHB4O2xlZnQ6LThweDt0b3A6MzdweH04NCV7d2lkdGg6MTdweDtsZWZ0OjIxcHg7dG9wOjQ4cHh9dG97d2lkdGg6MjVweDtsZWZ0OjE0cHg7dG9wOjQ1cHh9fUAtd2Via2l0LWtleWZyYW1lcyBhbmltYXRlU3VjY2Vzc0xvbmd7MCV7d2lkdGg6MDtyaWdodDo0NnB4O3RvcDo1NHB4fTY1JXt3aWR0aDowO3JpZ2h0OjQ2cHg7dG9wOjU0cHh9ODQle3dpZHRoOjU1cHg7cmlnaHQ6MDt0b3A6MzVweH10b3t3aWR0aDo0N3B4O3JpZ2h0OjhweDt0b3A6MzhweH19QGtleWZyYW1lcyBhbmltYXRlU3VjY2Vzc0xvbmd7MCV7d2lkdGg6MDtyaWdodDo0NnB4O3RvcDo1NHB4fTY1JXt3aWR0aDowO3JpZ2h0OjQ2cHg7dG9wOjU0cHh9ODQle3dpZHRoOjU1cHg7cmlnaHQ6MDt0b3A6MzVweH10b3t3aWR0aDo0N3B4O3JpZ2h0OjhweDt0b3A6MzhweH19LnN3YWwtaWNvbi0taW5mb3tib3JkZXItY29sb3I6I2M5ZGFlMX0uc3dhbC1pY29uLS1pbmZvOmJlZm9yZXt3aWR0aDo1cHg7aGVpZ2h0OjI5cHg7Ym90dG9tOjE3cHg7Ym9yZGVyLXJhZGl1czoycHg7bWFyZ2luLWxlZnQ6LTJweH0uc3dhbC1pY29uLS1pbmZvOmFmdGVyLC5zd2FsLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo1MCU7YmFja2dyb3VuZC1jb2xvcjojYzlkYWUxfS5zd2FsLWljb24tLWluZm86YWZ0ZXJ7d2lkdGg6N3B4O2hlaWdodDo3cHg7Ym9yZGVyLXJhZGl1czo1MCU7bWFyZ2luLWxlZnQ6LTNweDt0b3A6MTlweH0uc3dhbC1pY29ue3dpZHRoOjgwcHg7aGVpZ2h0OjgwcHg7Ym9yZGVyLXdpZHRoOjRweDtib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLXJhZGl1czo1MCU7cGFkZGluZzowO3Bvc2l0aW9uOnJlbGF0aXZlO2JveC1zaXppbmc6Y29udGVudC1ib3g7bWFyZ2luOjIwcHggYXV0b30uc3dhbC1pY29uOmZpcnN0LWNoaWxke21hcmdpbi10b3A6MzJweH0uc3dhbC1pY29uLS1jdXN0b217d2lkdGg6YXV0bztoZWlnaHQ6YXV0bzttYXgtd2lkdGg6MTAwJTtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjB9LnN3YWwtaWNvbiBpbWd7bWF4LXdpZHRoOjEwMCU7bWF4LWhlaWdodDoxMDAlfS5zd2FsLXRpdGxle2NvbG9yOnJnYmEoMCwwLDAsLjY1KTtmb250LXdlaWdodDo2MDA7dGV4dC10cmFuc2Zvcm06bm9uZTtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6MTNweCAxNnB4O2ZvbnQtc2l6ZToyN3B4O2xpbmUtaGVpZ2h0Om5vcm1hbDt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjB9LnN3YWwtdGl0bGU6Zmlyc3QtY2hpbGR7bWFyZ2luLXRvcDoyNnB4fS5zd2FsLXRpdGxlOm5vdCg6Zmlyc3QtY2hpbGQpe3BhZGRpbmctYm90dG9tOjB9LnN3YWwtdGl0bGU6bm90KDpsYXN0LWNoaWxkKXttYXJnaW4tYm90dG9tOjEzcHh9LnN3YWwtdGV4dHtmb250LXNpemU6MTZweDtwb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDt2ZXJ0aWNhbC1hbGlnbjp0b3A7dGV4dC1hbGlnbjpsZWZ0O2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbjowO3BhZGRpbmc6MCAxMHB4O2ZvbnQtd2VpZ2h0OjQwMDtjb2xvcjpyZ2JhKDAsMCwwLC42NCk7bWF4LXdpZHRoOmNhbGMoMTAwJSAtIDIwcHgpO292ZXJmbG93LXdyYXA6YnJlYWstd29yZDtib3gtc2l6aW5nOmJvcmRlci1ib3h9LnN3YWwtdGV4dDpmaXJzdC1jaGlsZHttYXJnaW4tdG9wOjQ1cHh9LnN3YWwtdGV4dDpsYXN0LWNoaWxke21hcmdpbi1ib3R0b206NDVweH0uc3dhbC1mb290ZXJ7dGV4dC1hbGlnbjpyaWdodDtwYWRkaW5nLXRvcDoxM3B4O21hcmdpbi10b3A6MTNweDtwYWRkaW5nOjEzcHggMTZweDtib3JkZXItcmFkaXVzOmluaGVyaXQ7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czowO2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjB9LnN3YWwtYnV0dG9uLWNvbnRhaW5lcnttYXJnaW46NXB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlfS5zd2FsLWJ1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiM3Y2QxZjk7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7Ym9yZGVyLXJhZGl1czo1cHg7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmc6MTBweCAyNHB4O21hcmdpbjowO2N1cnNvcjpwb2ludGVyfS5zd2FsLWJ1dHRvbjpub3QoW2Rpc2FibGVkXSk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojNzhjYmYyfS5zd2FsLWJ1dHRvbjphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojNzBiY2UwfS5zd2FsLWJ1dHRvbjpmb2N1c3tvdXRsaW5lOm5vbmU7Ym94LXNoYWRvdzowIDAgMCAxcHggI2ZmZiwwIDAgMCAzcHggcmdiYSg0MywxMTQsMTY1LC4yOSl9LnN3YWwtYnV0dG9uW2Rpc2FibGVkXXtvcGFjaXR5Oi41O2N1cnNvcjpkZWZhdWx0fS5zd2FsLWJ1dHRvbjo6LW1vei1mb2N1cy1pbm5lcntib3JkZXI6MH0uc3dhbC1idXR0b24tLWNhbmNlbHtjb2xvcjojNTU1O2JhY2tncm91bmQtY29sb3I6I2VmZWZlZn0uc3dhbC1idXR0b24tLWNhbmNlbDpub3QoW2Rpc2FibGVkXSk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZThlOGU4fS5zd2FsLWJ1dHRvbi0tY2FuY2VsOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNkN2Q3ZDd9LnN3YWwtYnV0dG9uLS1jYW5jZWw6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAxcHggI2ZmZiwwIDAgMCAzcHggcmdiYSgxMTYsMTM2LDE1MCwuMjkpfS5zd2FsLWJ1dHRvbi0tZGFuZ2Vye2JhY2tncm91bmQtY29sb3I6I2U2NDk0Mn0uc3dhbC1idXR0b24tLWRhbmdlcjpub3QoW2Rpc2FibGVkXSk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZGY0NzQwfS5zd2FsLWJ1dHRvbi0tZGFuZ2VyOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNjZjQyM2J9LnN3YWwtYnV0dG9uLS1kYW5nZXI6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAxcHggI2ZmZiwwIDAgMCAzcHggcmdiYSgxNjUsNDMsNDMsLjI5KX0uc3dhbC1jb250ZW50e3BhZGRpbmc6MCAyMHB4O21hcmdpbi10b3A6MjBweDtmb250LXNpemU6bWVkaXVtfS5zd2FsLWNvbnRlbnQ6bGFzdC1jaGlsZHttYXJnaW4tYm90dG9tOjIwcHh9LnN3YWwtY29udGVudF9faW5wdXQsLnN3YWwtY29udGVudF9fdGV4dGFyZWF7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxNHB4O2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O3dpZHRoOjEwMCU7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4xNCk7cGFkZGluZzoxMHB4IDEzcHg7Ym9yZGVyLXJhZGl1czoycHg7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjJzfS5zd2FsLWNvbnRlbnRfX2lucHV0OmZvY3VzLC5zd2FsLWNvbnRlbnRfX3RleHRhcmVhOmZvY3Vze291dGxpbmU6bm9uZTtib3JkZXItY29sb3I6IzZkYjhmZn0uc3dhbC1jb250ZW50X190ZXh0YXJlYXtyZXNpemU6dmVydGljYWx9LnN3YWwtYnV0dG9uLS1sb2FkaW5ne2NvbG9yOnRyYW5zcGFyZW50fS5zd2FsLWJ1dHRvbi0tbG9hZGluZ34uc3dhbC1idXR0b25fX2xvYWRlcntvcGFjaXR5OjF9LnN3YWwtYnV0dG9uX19sb2FkZXJ7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OmF1dG87d2lkdGg6NDNweDt6LWluZGV4OjI7bGVmdDo1MCU7dG9wOjUwJTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpIHRyYW5zbGF0ZVkoLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgtNTAlKTt0ZXh0LWFsaWduOmNlbnRlcjtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MH0uc3dhbC1idXR0b25fX2xvYWRlciBkaXZ7ZGlzcGxheTppbmxpbmUtYmxvY2s7ZmxvYXQ6bm9uZTt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZTt3aWR0aDo5cHg7aGVpZ2h0OjlweDtwYWRkaW5nOjA7Ym9yZGVyOm5vbmU7bWFyZ2luOjJweDtvcGFjaXR5Oi40O2JvcmRlci1yYWRpdXM6N3B4O2JhY2tncm91bmQtY29sb3I6aHNsYSgwLDAlLDEwMCUsLjkpO3RyYW5zaXRpb246YmFja2dyb3VuZCAuMnM7LXdlYmtpdC1hbmltYXRpb246c3dhbC1sb2FkaW5nLWFuaW0gMXMgaW5maW5pdGU7YW5pbWF0aW9uOnN3YWwtbG9hZGluZy1hbmltIDFzIGluZmluaXRlfS5zd2FsLWJ1dHRvbl9fbG9hZGVyIGRpdjpudGgtY2hpbGQoM24rMil7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6LjE1czthbmltYXRpb24tZGVsYXk6LjE1c30uc3dhbC1idXR0b25fX2xvYWRlciBkaXY6bnRoLWNoaWxkKDNuKzMpey13ZWJraXQtYW5pbWF0aW9uLWRlbGF5Oi4zczthbmltYXRpb24tZGVsYXk6LjNzfUAtd2Via2l0LWtleWZyYW1lcyBzd2FsLWxvYWRpbmctYW5pbXswJXtvcGFjaXR5Oi40fTIwJXtvcGFjaXR5Oi40fTUwJXtvcGFjaXR5OjF9dG97b3BhY2l0eTouNH19QGtleWZyYW1lcyBzd2FsLWxvYWRpbmctYW5pbXswJXtvcGFjaXR5Oi40fTIwJXtvcGFjaXR5Oi40fTUwJXtvcGFjaXR5OjF9dG97b3BhY2l0eTouNH19LnN3YWwtb3ZlcmxheXtwb3NpdGlvbjpmaXhlZDt0b3A6MDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MDtvdmVyZmxvdy15OmF1dG87YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC40KTt6LWluZGV4OjEwMDAwO3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAuM3N9LnN3YWwtb3ZlcmxheTpiZWZvcmV7Y29udGVudDoiICI7ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlO2hlaWdodDoxMDAlfS5zd2FsLW92ZXJsYXktLXNob3ctbW9kYWx7b3BhY2l0eToxO3BvaW50ZXItZXZlbnRzOmF1dG99LnN3YWwtb3ZlcmxheS0tc2hvdy1tb2RhbCAuc3dhbC1tb2RhbHtvcGFjaXR5OjE7cG9pbnRlci1ldmVudHM6YXV0bztib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC1hbmltYXRpb246c2hvd1N3ZWV0QWxlcnQgLjNzO2FuaW1hdGlvbjpzaG93U3dlZXRBbGVydCAuM3M7d2lsbC1jaGFuZ2U6dHJhbnNmb3JtfS5zd2FsLW1vZGFse3dpZHRoOjQ3OHB4O29wYWNpdHk6MDtwb2ludGVyLWV2ZW50czpub25lO2JhY2tncm91bmQtY29sb3I6I2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtib3JkZXItcmFkaXVzOjVweDtwb3NpdGlvbjpzdGF0aWM7bWFyZ2luOjIwcHggYXV0bztkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtOnNjYWxlKDEpOy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjo1MCUgNTAlO3RyYW5zZm9ybS1vcmlnaW46NTAlIDUwJTt6LWluZGV4OjEwMDAxO3RyYW5zaXRpb246b3BhY2l0eSAuMnMsLXdlYmtpdC10cmFuc2Zvcm0gLjNzO3RyYW5zaXRpb246dHJhbnNmb3JtIC4zcyxvcGFjaXR5IC4yczt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuM3Msb3BhY2l0eSAuMnMsLXdlYmtpdC10cmFuc2Zvcm0gLjNzfUBtZWRpYSAobWF4LXdpZHRoOjUwMHB4KXsuc3dhbC1tb2RhbHt3aWR0aDpjYWxjKDEwMCUgLSAyMHB4KX19QC13ZWJraXQta2V5ZnJhbWVzIHNob3dTd2VldEFsZXJ0ezAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX0xJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSguNSk7dHJhbnNmb3JtOnNjYWxlKC41KX00NSV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4wNSk7dHJhbnNmb3JtOnNjYWxlKDEuMDUpfTgwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSguOTUpO3RyYW5zZm9ybTpzY2FsZSguOTUpfXRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX19QGtleWZyYW1lcyBzaG93U3dlZXRBbGVydHswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSl9MSV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjUpO3RyYW5zZm9ybTpzY2FsZSguNSl9NDUley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEuMDUpO3RyYW5zZm9ybTpzY2FsZSgxLjA1KX04MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLjk1KTt0cmFuc2Zvcm06c2NhbGUoLjk1KX10b3std2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSl9fScsIiJdKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7dmFyIG49dFsxXXx8IiIscj10WzNdO2lmKCFyKXJldHVybiBuO2lmKGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBidG9hKXt2YXIgaT1vKHIpO3JldHVybltuXS5jb25jYXQoci5zb3VyY2VzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4iLyojIHNvdXJjZVVSTD0iK3Iuc291cmNlUm9vdCt0KyIgKi8ifSkpLmNvbmNhdChbaV0pLmpvaW4oIlxuIil9cmV0dXJuW25dLmpvaW4oIlxuIil9ZnVuY3Rpb24gbyh0KXtyZXR1cm4iLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCIrYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodCkpKSkrIiAqLyJ9dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO3JldHVybiBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGUpe3ZhciBvPW4oZSx0KTtyZXR1cm4gZVsyXT8iQG1lZGlhICIrZVsyXSsieyIrbysifSI6b30pLmpvaW4oIiIpfSxlLmk9ZnVuY3Rpb24odCxuKXsic3RyaW5nIj09dHlwZW9mIHQmJih0PVtbbnVsbCx0LCIiXV0pO2Zvcih2YXIgbz17fSxyPTA7cjx0aGlzLmxlbmd0aDtyKyspe3ZhciBpPXRoaXNbcl1bMF07Im51bWJlciI9PXR5cGVvZiBpJiYob1tpXT0hMCl9Zm9yKHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTsibnVtYmVyIj09dHlwZW9mIGFbMF0mJm9bYVswXV18fChuJiYhYVsyXT9hWzJdPW46biYmKGFbMl09IigiK2FbMl0rIikgYW5kICgiK24rIikiKSxlLnB1c2goYSkpfX0sZX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBvKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBvPXRbbl0scj1tW28uaWRdO2lmKHIpe3IucmVmcysrO2Zvcih2YXIgaT0wO2k8ci5wYXJ0cy5sZW5ndGg7aSsrKXIucGFydHNbaV0oby5wYXJ0c1tpXSk7Zm9yKDtpPG8ucGFydHMubGVuZ3RoO2krKylyLnBhcnRzLnB1c2godShvLnBhcnRzW2ldLGUpKX1lbHNle2Zvcih2YXIgYT1bXSxpPTA7aTxvLnBhcnRzLmxlbmd0aDtpKyspYS5wdXNoKHUoby5wYXJ0c1tpXSxlKSk7bVtvLmlkXT17aWQ6by5pZCxyZWZzOjEscGFydHM6YX19fX1mdW5jdGlvbiByKHQsZSl7Zm9yKHZhciBuPVtdLG89e30scj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgaT10W3JdLGE9ZS5iYXNlP2lbMF0rZS5iYXNlOmlbMF0scz1pWzFdLGM9aVsyXSxsPWlbM10sdT17Y3NzOnMsbWVkaWE6Yyxzb3VyY2VNYXA6bH07b1thXT9vW2FdLnBhcnRzLnB1c2godSk6bi5wdXNoKG9bYV09e2lkOmEscGFydHM6W3VdfSl9cmV0dXJuIG59ZnVuY3Rpb24gaSh0LGUpe3ZhciBuPXYodC5pbnNlcnRJbnRvKTtpZighbil0aHJvdyBuZXcgRXJyb3IoIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuIik7dmFyIG89d1t3Lmxlbmd0aC0xXTtpZigidG9wIj09PXQuaW5zZXJ0QXQpbz9vLm5leHRTaWJsaW5nP24uaW5zZXJ0QmVmb3JlKGUsby5uZXh0U2libGluZyk6bi5hcHBlbmRDaGlsZChlKTpuLmluc2VydEJlZm9yZShlLG4uZmlyc3RDaGlsZCksdy5wdXNoKGUpO2Vsc2V7aWYoImJvdHRvbSIhPT10Lmluc2VydEF0KXRocm93IG5ldyBFcnJvcigiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuIik7bi5hcHBlbmRDaGlsZChlKX19ZnVuY3Rpb24gYSh0KXtpZihudWxsPT09dC5wYXJlbnROb2RlKXJldHVybiExO3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KTt2YXIgZT13LmluZGV4T2YodCk7ZT49MCYmdy5zcGxpY2UoZSwxKX1mdW5jdGlvbiBzKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIHQuYXR0cnMudHlwZT0idGV4dC9jc3MiLGwoZSx0LmF0dHJzKSxpKHQsZSksZX1mdW5jdGlvbiBjKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTtyZXR1cm4gdC5hdHRycy50eXBlPSJ0ZXh0L2NzcyIsdC5hdHRycy5yZWw9InN0eWxlc2hlZXQiLGwoZSx0LmF0dHJzKSxpKHQsZSksZX1mdW5jdGlvbiBsKHQsZSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihuKXt0LnNldEF0dHJpYnV0ZShuLGVbbl0pfSl9ZnVuY3Rpb24gdSh0LGUpe3ZhciBuLG8scixpO2lmKGUudHJhbnNmb3JtJiZ0LmNzcyl7aWYoIShpPWUudHJhbnNmb3JtKHQuY3NzKSkpcmV0dXJuIGZ1bmN0aW9uKCl7fTt0LmNzcz1pfWlmKGUuc2luZ2xldG9uKXt2YXIgbD1oKys7bj1nfHwoZz1zKGUpKSxvPWYuYmluZChudWxsLG4sbCwhMSkscj1mLmJpbmQobnVsbCxuLGwsITApfWVsc2UgdC5zb3VyY2VNYXAmJiJmdW5jdGlvbiI9PXR5cGVvZiBVUkwmJiJmdW5jdGlvbiI9PXR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMJiYiZnVuY3Rpb24iPT10eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCYmImZ1bmN0aW9uIj09dHlwZW9mIEJsb2ImJiJmdW5jdGlvbiI9PXR5cGVvZiBidG9hPyhuPWMoZSksbz1wLmJpbmQobnVsbCxuLGUpLHI9ZnVuY3Rpb24oKXthKG4pLG4uaHJlZiYmVVJMLnJldm9rZU9iamVjdFVSTChuLmhyZWYpfSk6KG49cyhlKSxvPWQuYmluZChudWxsLG4pLHI9ZnVuY3Rpb24oKXthKG4pfSk7cmV0dXJuIG8odCksZnVuY3Rpb24oZSl7aWYoZSl7aWYoZS5jc3M9PT10LmNzcyYmZS5tZWRpYT09PXQubWVkaWEmJmUuc291cmNlTWFwPT09dC5zb3VyY2VNYXApcmV0dXJuO28odD1lKX1lbHNlIHIoKX19ZnVuY3Rpb24gZih0LGUsbixvKXt2YXIgcj1uPyIiOm8uY3NzO2lmKHQuc3R5bGVTaGVldCl0LnN0eWxlU2hlZXQuY3NzVGV4dD14KGUscik7ZWxzZXt2YXIgaT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShyKSxhPXQuY2hpbGROb2RlczthW2VdJiZ0LnJlbW92ZUNoaWxkKGFbZV0pLGEubGVuZ3RoP3QuaW5zZXJ0QmVmb3JlKGksYVtlXSk6dC5hcHBlbmRDaGlsZChpKX19ZnVuY3Rpb24gZCh0LGUpe3ZhciBuPWUuY3NzLG89ZS5tZWRpYTtpZihvJiZ0LnNldEF0dHJpYnV0ZSgibWVkaWEiLG8pLHQuc3R5bGVTaGVldCl0LnN0eWxlU2hlZXQuY3NzVGV4dD1uO2Vsc2V7Zm9yKDt0LmZpcnN0Q2hpbGQ7KXQucmVtb3ZlQ2hpbGQodC5maXJzdENoaWxkKTt0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4pKX19ZnVuY3Rpb24gcCh0LGUsbil7dmFyIG89bi5jc3Mscj1uLnNvdXJjZU1hcCxpPXZvaWQgMD09PWUuY29udmVydFRvQWJzb2x1dGVVcmxzJiZyOyhlLmNvbnZlcnRUb0Fic29sdXRlVXJsc3x8aSkmJihvPXkobykpLHImJihvKz0iXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LCIrYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocikpKSkrIiAqLyIpO3ZhciBhPW5ldyBCbG9iKFtvXSx7dHlwZToidGV4dC9jc3MifSkscz10LmhyZWY7dC5ocmVmPVVSTC5jcmVhdGVPYmplY3RVUkwoYSkscyYmVVJMLnJldm9rZU9iamVjdFVSTChzKX12YXIgbT17fSxiPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT1lJiYoZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSksZX19KGZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdyYmZG9jdW1lbnQmJmRvY3VtZW50LmFsbCYmIXdpbmRvdy5hdG9ifSksdj1mdW5jdGlvbih0KXt2YXIgZT17fTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHZvaWQgMD09PWVbbl0mJihlW25dPXQuY2FsbCh0aGlzLG4pKSxlW25dfX0oZnVuY3Rpb24odCl7cmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCl9KSxnPW51bGwsaD0wLHc9W10seT1uKDE1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIERFQlVHJiZERUJVRyYmIm9iamVjdCIhPXR5cGVvZiBkb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudCIpO2U9ZXx8e30sZS5hdHRycz0ib2JqZWN0Ij09dHlwZW9mIGUuYXR0cnM/ZS5hdHRyczp7fSxlLnNpbmdsZXRvbnx8KGUuc2luZ2xldG9uPWIoKSksZS5pbnNlcnRJbnRvfHwoZS5pbnNlcnRJbnRvPSJoZWFkIiksZS5pbnNlcnRBdHx8KGUuaW5zZXJ0QXQ9ImJvdHRvbSIpO3ZhciBuPXIodCxlKTtyZXR1cm4gbyhuLGUpLGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT1bXSxhPTA7YTxuLmxlbmd0aDthKyspe3ZhciBzPW5bYV0sYz1tW3MuaWRdO2MucmVmcy0tLGkucHVzaChjKX1pZih0KXtvKHIodCxlKSxlKX1mb3IodmFyIGE9MDthPGkubGVuZ3RoO2ErKyl7dmFyIGM9aVthXTtpZigwPT09Yy5yZWZzKXtmb3IodmFyIGw9MDtsPGMucGFydHMubGVuZ3RoO2wrKyljLnBhcnRzW2xdKCk7ZGVsZXRlIG1bYy5pZF19fX19O3ZhciB4PWZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuIHRbZV09bix0LmZpbHRlcihCb29sZWFuKS5qb2luKCJcbiIpfX0oKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5sb2NhdGlvbjtpZighZSl0aHJvdyBuZXcgRXJyb3IoImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uIik7aWYoIXR8fCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gdDt2YXIgbj1lLnByb3RvY29sKyIvLyIrZS5ob3N0LG89bitlLnBhdGhuYW1lLnJlcGxhY2UoL1wvW15cL10qJC8sIi8iKTtyZXR1cm4gdC5yZXBsYWNlKC91cmxccypcKCgoPzpbXikoXXxcKCg/OlteKShdK3xcKFteKShdKlwpKSpcKSkqKVwpL2dpLGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZS50cmltKCkucmVwbGFjZSgvXiIoLiopIiQvLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV9KS5yZXBsYWNlKC9eJyguKiknJC8sZnVuY3Rpb24odCxlKXtyZXR1cm4gZX0pO2lmKC9eKCN8ZGF0YTp8aHR0cDpcL1wvfGh0dHBzOlwvXC98ZmlsZTpcL1wvXC8pL2kudGVzdChyKSlyZXR1cm4gdDt2YXIgaTtyZXR1cm4gaT0wPT09ci5pbmRleE9mKCIvLyIpP3I6MD09PXIuaW5kZXhPZigiLyIpP24rcjpvK3IucmVwbGFjZSgvXlwuXC8vLCIiKSwidXJsKCIrSlNPTi5zdHJpbmdpZnkoaSkrIikifSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIG89bigxNyk7InVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3d8fHdpbmRvdy5Qcm9taXNlfHwod2luZG93LlByb21pc2U9byksbigyMSksU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlc3x8KFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlJiYoZT0wKSwhKGUrdC5sZW5ndGg+dGhpcy5sZW5ndGgpJiYtMSE9PXRoaXMuaW5kZXhPZih0LGUpfSksQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCJpbmNsdWRlcyIse3ZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYobnVsbD09dGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yKCcidGhpcyIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO3ZhciBuPU9iamVjdCh0aGlzKSxvPW4ubGVuZ3RoPj4+MDtpZigwPT09bylyZXR1cm4hMTtmb3IodmFyIHI9MHxlLGk9TWF0aC5tYXgocj49MD9yOm8tTWF0aC5hYnMociksMCk7aTxvOyl7aWYoZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWV8fCJudW1iZXIiPT10eXBlb2YgdCYmIm51bWJlciI9PXR5cGVvZiBlJiZpc05hTih0KSYmaXNOYU4oZSl9KG5baV0sdCkpcmV0dXJuITA7aSsrfXJldHVybiExfX0pLCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZmdW5jdGlvbih0KXt0LmZvckVhY2goZnVuY3Rpb24odCl7dC5oYXNPd25Qcm9wZXJ0eSgicmVtb3ZlIil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJyZW1vdmUiLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKX19KX0pfShbRWxlbWVudC5wcm90b3R5cGUsQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUsRG9jdW1lbnRUeXBlLnByb3RvdHlwZV0pfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpeyFmdW5jdGlvbihuKXtmdW5jdGlvbiBvKCl7fWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gZnVuY3Rpb24oKXt0LmFwcGx5KGUsYXJndW1lbnRzKX19ZnVuY3Rpb24gaSh0KXtpZigib2JqZWN0IiE9dHlwZW9mIHRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcigiUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigibm90IGEgZnVuY3Rpb24iKTt0aGlzLl9zdGF0ZT0wLHRoaXMuX2hhbmRsZWQ9ITEsdGhpcy5fdmFsdWU9dm9pZCAwLHRoaXMuX2RlZmVycmVkcz1bXSxmKHQsdGhpcyl9ZnVuY3Rpb24gYSh0LGUpe2Zvcig7Mz09PXQuX3N0YXRlOyl0PXQuX3ZhbHVlO2lmKDA9PT10Ll9zdGF0ZSlyZXR1cm4gdm9pZCB0Ll9kZWZlcnJlZHMucHVzaChlKTt0Ll9oYW5kbGVkPSEwLGkuX2ltbWVkaWF0ZUZuKGZ1bmN0aW9uKCl7dmFyIG49MT09PXQuX3N0YXRlP2Uub25GdWxmaWxsZWQ6ZS5vblJlamVjdGVkO2lmKG51bGw9PT1uKXJldHVybiB2b2lkKDE9PT10Ll9zdGF0ZT9zOmMpKGUucHJvbWlzZSx0Ll92YWx1ZSk7dmFyIG87dHJ5e289bih0Ll92YWx1ZSl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgYyhlLnByb21pc2UsdCl9cyhlLnByb21pc2Usbyl9KX1mdW5jdGlvbiBzKHQsZSl7dHJ5e2lmKGU9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkEgcHJvbWlzZSBjYW5ub3QgYmUgcmVzb2x2ZWQgd2l0aCBpdHNlbGYuIik7aWYoZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpKXt2YXIgbj1lLnRoZW47aWYoZSBpbnN0YW5jZW9mIGkpcmV0dXJuIHQuX3N0YXRlPTMsdC5fdmFsdWU9ZSx2b2lkIGwodCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4pcmV0dXJuIHZvaWQgZihyKG4sZSksdCl9dC5fc3RhdGU9MSx0Ll92YWx1ZT1lLGwodCl9Y2F0Y2goZSl7Yyh0LGUpfX1mdW5jdGlvbiBjKHQsZSl7dC5fc3RhdGU9Mix0Ll92YWx1ZT1lLGwodCl9ZnVuY3Rpb24gbCh0KXsyPT09dC5fc3RhdGUmJjA9PT10Ll9kZWZlcnJlZHMubGVuZ3RoJiZpLl9pbW1lZGlhdGVGbihmdW5jdGlvbigpe3QuX2hhbmRsZWR8fGkuX3VuaGFuZGxlZFJlamVjdGlvbkZuKHQuX3ZhbHVlKX0pO2Zvcih2YXIgZT0wLG49dC5fZGVmZXJyZWRzLmxlbmd0aDtlPG47ZSsrKWEodCx0Ll9kZWZlcnJlZHNbZV0pO3QuX2RlZmVycmVkcz1udWxsfWZ1bmN0aW9uIHUodCxlLG4pe3RoaXMub25GdWxmaWxsZWQ9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpudWxsLHRoaXMub25SZWplY3RlZD0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOm51bGwsdGhpcy5wcm9taXNlPW59ZnVuY3Rpb24gZih0LGUpe3ZhciBuPSExO3RyeXt0KGZ1bmN0aW9uKHQpe258fChuPSEwLHMoZSx0KSl9LGZ1bmN0aW9uKHQpe258fChuPSEwLGMoZSx0KSl9KX1jYXRjaCh0KXtpZihuKXJldHVybjtuPSEwLGMoZSx0KX19dmFyIGQ9c2V0VGltZW91dDtpLnByb3RvdHlwZS5jYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKG51bGwsdCl9LGkucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgdGhpcy5jb25zdHJ1Y3RvcihvKTtyZXR1cm4gYSh0aGlzLG5ldyB1KHQsZSxuKSksbn0saS5hbGw9ZnVuY3Rpb24odCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCk7cmV0dXJuIG5ldyBpKGZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gbyhpLGEpe3RyeXtpZihhJiYoIm9iamVjdCI9PXR5cGVvZiBhfHwiZnVuY3Rpb24iPT10eXBlb2YgYSkpe3ZhciBzPWEudGhlbjtpZigiZnVuY3Rpb24iPT10eXBlb2YgcylyZXR1cm4gdm9pZCBzLmNhbGwoYSxmdW5jdGlvbih0KXtvKGksdCl9LG4pfWVbaV09YSwwPT0tLXImJnQoZSl9Y2F0Y2godCl7bih0KX19aWYoMD09PWUubGVuZ3RoKXJldHVybiB0KFtdKTtmb3IodmFyIHI9ZS5sZW5ndGgsaT0wO2k8ZS5sZW5ndGg7aSsrKW8oaSxlW2ldKX0pfSxpLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJvYmplY3QiPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3Rvcj09PWk/dDpuZXcgaShmdW5jdGlvbihlKXtlKHQpfSl9LGkucmVqZWN0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgaShmdW5jdGlvbihlLG4pe24odCl9KX0saS5yYWNlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgaShmdW5jdGlvbihlLG4pe2Zvcih2YXIgbz0wLHI9dC5sZW5ndGg7bzxyO28rKyl0W29dLnRoZW4oZSxuKX0pfSxpLl9pbW1lZGlhdGVGbj0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZnVuY3Rpb24odCl7ZSh0KX18fGZ1bmN0aW9uKHQpe2QodCwwKX0saS5fdW5oYW5kbGVkUmVqZWN0aW9uRm49ZnVuY3Rpb24odCl7InVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlJiZjb25zb2xlLndhcm4oIlBvc3NpYmxlIFVuaGFuZGxlZCBQcm9taXNlIFJlamVjdGlvbjoiLHQpfSxpLl9zZXRJbW1lZGlhdGVGbj1mdW5jdGlvbih0KXtpLl9pbW1lZGlhdGVGbj10fSxpLl9zZXRVbmhhbmRsZWRSZWplY3Rpb25Gbj1mdW5jdGlvbih0KXtpLl91bmhhbmRsZWRSZWplY3Rpb25Gbj10fSx2b2lkIDAhPT10JiZ0LmV4cG9ydHM/dC5leHBvcnRzPWk6bi5Qcm9taXNlfHwobi5Qcm9taXNlPWkpfSh0aGlzKX0pLmNhbGwoZSxuKDE4KS5zZXRJbW1lZGlhdGUpfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gbyh0LGUpe3RoaXMuX2lkPXQsdGhpcy5fY2xlYXJGbj1lfXZhciByPUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtlLnNldFRpbWVvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8oci5jYWxsKHNldFRpbWVvdXQsd2luZG93LGFyZ3VtZW50cyksY2xlYXJUaW1lb3V0KX0sZS5zZXRJbnRlcnZhbD1mdW5jdGlvbigpe3JldHVybiBuZXcgbyhyLmNhbGwoc2V0SW50ZXJ2YWwsd2luZG93LGFyZ3VtZW50cyksY2xlYXJJbnRlcnZhbCl9LGUuY2xlYXJUaW1lb3V0PWUuY2xlYXJJbnRlcnZhbD1mdW5jdGlvbih0KXt0JiZ0LmNsb3NlKCl9LG8ucHJvdG90eXBlLnVucmVmPW8ucHJvdG90eXBlLnJlZj1mdW5jdGlvbigpe30sby5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LHRoaXMuX2lkKX0sZS5lbnJvbGw9ZnVuY3Rpb24odCxlKXtjbGVhclRpbWVvdXQodC5faWRsZVRpbWVvdXRJZCksdC5faWRsZVRpbWVvdXQ9ZX0sZS51bmVucm9sbD1mdW5jdGlvbih0KXtjbGVhclRpbWVvdXQodC5faWRsZVRpbWVvdXRJZCksdC5faWRsZVRpbWVvdXQ9LTF9LGUuX3VucmVmQWN0aXZlPWUuYWN0aXZlPWZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dCh0Ll9pZGxlVGltZW91dElkKTt2YXIgZT10Ll9pZGxlVGltZW91dDtlPj0wJiYodC5faWRsZVRpbWVvdXRJZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fb25UaW1lb3V0JiZ0Ll9vblRpbWVvdXQoKX0sZSkpfSxuKDE5KSxlLnNldEltbWVkaWF0ZT1zZXRJbW1lZGlhdGUsZS5jbGVhckltbWVkaWF0ZT1jbGVhckltbWVkaWF0ZX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbih0LGUpeyFmdW5jdGlvbih0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBvKHQpeyJmdW5jdGlvbiIhPXR5cGVvZiB0JiYodD1uZXcgRnVuY3Rpb24oIiIrdCkpO2Zvcih2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXT1hcmd1bWVudHNbbisxXTt2YXIgbz17Y2FsbGJhY2s6dCxhcmdzOmV9O3JldHVybiBsW2NdPW8scyhjKSxjKyt9ZnVuY3Rpb24gcih0KXtkZWxldGUgbFt0XX1mdW5jdGlvbiBpKHQpe3ZhciBlPXQuY2FsbGJhY2ssbz10LmFyZ3M7c3dpdGNoKG8ubGVuZ3RoKXtjYXNlIDA6ZSgpO2JyZWFrO2Nhc2UgMTplKG9bMF0pO2JyZWFrO2Nhc2UgMjplKG9bMF0sb1sxXSk7YnJlYWs7Y2FzZSAzOmUob1swXSxvWzFdLG9bMl0pO2JyZWFrO2RlZmF1bHQ6ZS5hcHBseShuLG8pfX1mdW5jdGlvbiBhKHQpe2lmKHUpc2V0VGltZW91dChhLDAsdCk7ZWxzZXt2YXIgZT1sW3RdO2lmKGUpe3U9ITA7dHJ5e2koZSl9ZmluYWxseXtyKHQpLHU9ITF9fX19aWYoIXQuc2V0SW1tZWRpYXRlKXt2YXIgcyxjPTEsbD17fSx1PSExLGY9dC5kb2N1bWVudCxkPU9iamVjdC5nZXRQcm90b3R5cGVPZiYmT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpO2Q9ZCYmZC5zZXRUaW1lb3V0P2Q6dCwiW29iamVjdCBwcm9jZXNzXSI9PT17fS50b1N0cmluZy5jYWxsKHQucHJvY2Vzcyk/ZnVuY3Rpb24oKXtzPWZ1bmN0aW9uKHQpe2UubmV4dFRpY2soZnVuY3Rpb24oKXthKHQpfSl9fSgpOmZ1bmN0aW9uKCl7aWYodC5wb3N0TWVzc2FnZSYmIXQuaW1wb3J0U2NyaXB0cyl7dmFyIGU9ITAsbj10Lm9ubWVzc2FnZTtyZXR1cm4gdC5vbm1lc3NhZ2U9ZnVuY3Rpb24oKXtlPSExfSx0LnBvc3RNZXNzYWdlKCIiLCIqIiksdC5vbm1lc3NhZ2U9bixlfX0oKT9mdW5jdGlvbigpe3ZhciBlPSJzZXRJbW1lZGlhdGUkIitNYXRoLnJhbmRvbSgpKyIkIixuPWZ1bmN0aW9uKG4pe24uc291cmNlPT09dCYmInN0cmluZyI9PXR5cGVvZiBuLmRhdGEmJjA9PT1uLmRhdGEuaW5kZXhPZihlKSYmYSgrbi5kYXRhLnNsaWNlKGUubGVuZ3RoKSl9O3QuYWRkRXZlbnRMaXN0ZW5lcj90LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG4sITEpOnQuYXR0YWNoRXZlbnQoIm9ubWVzc2FnZSIsbikscz1mdW5jdGlvbihuKXt0LnBvc3RNZXNzYWdlKGUrbiwiKiIpfX0oKTp0Lk1lc3NhZ2VDaGFubmVsP2Z1bmN0aW9uKCl7dmFyIHQ9bmV3IE1lc3NhZ2VDaGFubmVsO3QucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKHQpe2EodC5kYXRhKX0scz1mdW5jdGlvbihlKXt0LnBvcnQyLnBvc3RNZXNzYWdlKGUpfX0oKTpmJiYib25yZWFkeXN0YXRlY2hhbmdlImluIGYuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik/ZnVuY3Rpb24oKXt2YXIgdD1mLmRvY3VtZW50RWxlbWVudDtzPWZ1bmN0aW9uKGUpe3ZhciBuPWYuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7bi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXthKGUpLG4ub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsdC5yZW1vdmVDaGlsZChuKSxuPW51bGx9LHQuYXBwZW5kQ2hpbGQobil9fSgpOmZ1bmN0aW9uKCl7cz1mdW5jdGlvbih0KXtzZXRUaW1lb3V0KGEsMCx0KX19KCksZC5zZXRJbW1lZGlhdGU9byxkLmNsZWFySW1tZWRpYXRlPXJ9fSgidW5kZWZpbmVkIj09dHlwZW9mIHNlbGY/dm9pZCAwPT09dD90aGlzOnQ6c2VsZil9KS5jYWxsKGUsbig3KSxuKDIwKSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3Rocm93IG5ldyBFcnJvcigic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpfWZ1bmN0aW9uIG8oKXt0aHJvdyBuZXcgRXJyb3IoImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpfWZ1bmN0aW9uIHIodCl7aWYodT09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQodCwwKTtpZigodT09PW58fCF1KSYmc2V0VGltZW91dClyZXR1cm4gdT1zZXRUaW1lb3V0LHNldFRpbWVvdXQodCwwKTt0cnl7cmV0dXJuIHUodCwwKX1jYXRjaChlKXt0cnl7cmV0dXJuIHUuY2FsbChudWxsLHQsMCl9Y2F0Y2goZSl7cmV0dXJuIHUuY2FsbCh0aGlzLHQsMCl9fX1mdW5jdGlvbiBpKHQpe2lmKGY9PT1jbGVhclRpbWVvdXQpcmV0dXJuIGNsZWFyVGltZW91dCh0KTtpZigoZj09PW98fCFmKSYmY2xlYXJUaW1lb3V0KXJldHVybiBmPWNsZWFyVGltZW91dCxjbGVhclRpbWVvdXQodCk7dHJ5e3JldHVybiBmKHQpfWNhdGNoKGUpe3RyeXtyZXR1cm4gZi5jYWxsKG51bGwsdCl9Y2F0Y2goZSl7cmV0dXJuIGYuY2FsbCh0aGlzLHQpfX19ZnVuY3Rpb24gYSgpe2ImJnAmJihiPSExLHAubGVuZ3RoP209cC5jb25jYXQobSk6dj0tMSxtLmxlbmd0aCYmcygpKX1mdW5jdGlvbiBzKCl7aWYoIWIpe3ZhciB0PXIoYSk7Yj0hMDtmb3IodmFyIGU9bS5sZW5ndGg7ZTspe2ZvcihwPW0sbT1bXTsrK3Y8ZTspcCYmcFt2XS5ydW4oKTt2PS0xLGU9bS5sZW5ndGh9cD1udWxsLGI9ITEsaSh0KX19ZnVuY3Rpb24gYyh0LGUpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1lfWZ1bmN0aW9uIGwoKXt9dmFyIHUsZixkPXQuZXhwb3J0cz17fTshZnVuY3Rpb24oKXt0cnl7dT0iZnVuY3Rpb24iPT10eXBlb2Ygc2V0VGltZW91dD9zZXRUaW1lb3V0Om59Y2F0Y2godCl7dT1ufXRyeXtmPSJmdW5jdGlvbiI9PXR5cGVvZiBjbGVhclRpbWVvdXQ/Y2xlYXJUaW1lb3V0Om99Y2F0Y2godCl7Zj1vfX0oKTt2YXIgcCxtPVtdLGI9ITEsdj0tMTtkLm5leHRUaWNrPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07bS5wdXNoKG5ldyBjKHQsZSkpLDEhPT1tLmxlbmd0aHx8Ynx8cihzKX0sYy5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sZC50aXRsZT0iYnJvd3NlciIsZC5icm93c2VyPSEwLGQuZW52PXt9LGQuYXJndj1bXSxkLnZlcnNpb249IiIsZC52ZXJzaW9ucz17fSxkLm9uPWwsZC5hZGRMaXN0ZW5lcj1sLGQub25jZT1sLGQub2ZmPWwsZC5yZW1vdmVMaXN0ZW5lcj1sLGQucmVtb3ZlQWxsTGlzdGVuZXJzPWwsZC5lbWl0PWwsZC5wcmVwZW5kTGlzdGVuZXI9bCxkLnByZXBlbmRPbmNlTGlzdGVuZXI9bCxkLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm5bXX0sZC5iaW5kaW5nPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKX0sZC5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm4iLyJ9LGQuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX0sZC51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuKDIyKS5wb2x5ZmlsbCgpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG8odCxlKXtpZih2b2lkIDA9PT10fHxudWxsPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY29udmVydCBmaXJzdCBhcmd1bWVudCB0byBvYmplY3QiKTtmb3IodmFyIG49T2JqZWN0KHQpLG89MTtvPGFyZ3VtZW50cy5sZW5ndGg7bysrKXt2YXIgcj1hcmd1bWVudHNbb107aWYodm9pZCAwIT09ciYmbnVsbCE9PXIpZm9yKHZhciBpPU9iamVjdC5rZXlzKE9iamVjdChyKSksYT0wLHM9aS5sZW5ndGg7YTxzO2ErKyl7dmFyIGM9aVthXSxsPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocixjKTt2b2lkIDAhPT1sJiZsLmVudW1lcmFibGUmJihuW2NdPXJbY10pfX1yZXR1cm4gbn1mdW5jdGlvbiByKCl7T2JqZWN0LmFzc2lnbnx8T2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdCwiYXNzaWduIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6b30pfXQuZXhwb3J0cz17YXNzaWduOm8scG9seWZpbGw6cn19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMjQpLHI9big2KSxpPW4oNSksYT1uKDM2KSxzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93KXt2YXIgbj1hLmdldE9wdHMuYXBwbHkodm9pZCAwLHQpO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LGUpe2kuZGVmYXVsdC5wcm9taXNlPXtyZXNvbHZlOnQscmVqZWN0OmV9LG8uZGVmYXVsdChuKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5vcGVuTW9kYWwoKX0pfSl9fTtzLmNsb3NlPXIub25BY3Rpb24scy5nZXRTdGF0ZT1yLmdldFN0YXRlLHMuc2V0QWN0aW9uVmFsdWU9aS5zZXRBY3Rpb25WYWx1ZSxzLnN0b3BMb2FkaW5nPXIuc3RvcExvYWRpbmcscy5zZXREZWZhdWx0cz1hLnNldERlZmF1bHRzLGUuZGVmYXVsdD1zfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDEpLHI9bigwKSxpPXIuZGVmYXVsdC5NT0RBTCxhPW4oNCkscz1uKDM0KSxjPW4oMzUpLGw9bigxKTtlLmluaXQ9ZnVuY3Rpb24odCl7by5nZXROb2RlKGkpfHwoZG9jdW1lbnQuYm9keXx8bC50aHJvd0VycigiWW91IGNhbiBvbmx5IHVzZSBTd2VldEFsZXJ0IEFGVEVSIHRoZSBET00gaGFzIGxvYWRlZCEiKSxzLmRlZmF1bHQoKSxhLmRlZmF1bHQoKSksYS5pbml0TW9kYWxDb250ZW50KHQpLGMuZGVmYXVsdCh0KX0sZS5kZWZhdWx0PWUuaW5pdH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigwKSxyPW8uZGVmYXVsdC5NT0RBTDtlLm1vZGFsTWFya3VwPSdcbiAgPGRpdiBjbGFzcz0iJytyKyciIHJvbGU9ImRpYWxvZyIgYXJpYS1tb2RhbD0idHJ1ZSI+PC9kaXY+JyxlLmRlZmF1bHQ9ZS5tb2RhbE1hcmt1cH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigwKSxyPW8uZGVmYXVsdC5PVkVSTEFZLGk9JzxkaXYgXG4gICAgY2xhc3M9IicrcisnIlxuICAgIHRhYkluZGV4PSItMSI+XG4gIDwvZGl2Pic7ZS5kZWZhdWx0PWl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMCkscj1vLmRlZmF1bHQuSUNPTjtlLmVycm9ySWNvbk1hcmt1cD1mdW5jdGlvbigpe3ZhciB0PXIrIi0tZXJyb3IiLGU9dCsiX19saW5lIjtyZXR1cm4nXG4gICAgPGRpdiBjbGFzcz0iJyt0KydfX3gtbWFyayI+XG4gICAgICA8c3BhbiBjbGFzcz0iJytlKyIgIitlKyctLWxlZnQiPjwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPSInK2UrIiAiK2UrJy0tcmlnaHQiPjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgJ30sZS53YXJuaW5nSWNvbk1hcmt1cD1mdW5jdGlvbigpe3ZhciB0PXIrIi0td2FybmluZyI7cmV0dXJuJ1xuICAgIDxzcGFuIGNsYXNzPSInK3QrJ19fYm9keSI+XG4gICAgICA8c3BhbiBjbGFzcz0iJyt0KydfX2RvdCI+PC9zcGFuPlxuICAgIDwvc3Bhbj5cbiAgJ30sZS5zdWNjZXNzSWNvbk1hcmt1cD1mdW5jdGlvbigpe3ZhciB0PXIrIi0tc3VjY2VzcyI7cmV0dXJuJ1xuICAgIDxzcGFuIGNsYXNzPSInK3QrIl9fbGluZSAiK3QrJ19fbGluZS0tbG9uZyI+PC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPSInK3QrIl9fbGluZSAiK3QrJ19fbGluZS0tdGlwIj48L3NwYW4+XG5cbiAgICA8ZGl2IGNsYXNzPSInK3QrJ19fcmluZyI+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz0iJyt0KydfX2hpZGUtY29ybmVycyI+PC9kaXY+XG4gICd9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDApLHI9by5kZWZhdWx0LkNPTlRFTlQ7ZS5jb250ZW50TWFya3VwPSdcbiAgPGRpdiBjbGFzcz0iJytyKyciPlxuXG4gIDwvZGl2PlxuJ30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigwKSxyPW8uZGVmYXVsdC5CVVRUT05fQ09OVEFJTkVSLGk9by5kZWZhdWx0LkJVVFRPTixhPW8uZGVmYXVsdC5CVVRUT05fTE9BREVSO2UuYnV0dG9uTWFya3VwPSdcbiAgPGRpdiBjbGFzcz0iJytyKyciPlxuXG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9IicraSsnIlxuICAgID48L2J1dHRvbj5cblxuICAgIDxkaXYgY2xhc3M9IicrYSsnIj5cbiAgICAgIDxkaXY+PC9kaXY+XG4gICAgICA8ZGl2PjwvZGl2PlxuICAgICAgPGRpdj48L2Rpdj5cbiAgICA8L2Rpdj5cblxuICA8L2Rpdj5cbid9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPW4oNCkscj1uKDIpLGk9bigwKSxhPWkuZGVmYXVsdC5JQ09OLHM9aS5kZWZhdWx0LklDT05fQ1VTVE9NLGM9WyJlcnJvciIsIndhcm5pbmciLCJzdWNjZXNzIiwiaW5mbyJdLGw9e2Vycm9yOnIuZXJyb3JJY29uTWFya3VwKCksd2FybmluZzpyLndhcm5pbmdJY29uTWFya3VwKCksc3VjY2VzczpyLnN1Y2Nlc3NJY29uTWFya3VwKCl9LHU9ZnVuY3Rpb24odCxlKXt2YXIgbj1hKyItLSIrdDtlLmNsYXNzTGlzdC5hZGQobik7dmFyIG89bFt0XTtvJiYoZS5pbm5lckhUTUw9byl9LGY9ZnVuY3Rpb24odCxlKXtlLmNsYXNzTGlzdC5hZGQocyk7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7bi5zcmM9dCxlLmFwcGVuZENoaWxkKG4pfSxkPWZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBlPW8uaW5qZWN0RWxJbnRvTW9kYWwoci5pY29uTWFya3VwKTtjLmluY2x1ZGVzKHQpP3UodCxlKTpmKHQsZSl9fTtlLmRlZmF1bHQ9ZH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigyKSxyPW4oNCksaT1mdW5jdGlvbih0KXtuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCJBcHBsZVdlYktpdCIpJiYodC5zdHlsZS5kaXNwbGF5PSJub25lIix0Lm9mZnNldEhlaWdodCx0LnN0eWxlLmRpc3BsYXk9IiIpfTtlLmluaXRUaXRsZT1mdW5jdGlvbih0KXtpZih0KXt2YXIgZT1yLmluamVjdEVsSW50b01vZGFsKG8udGl0bGVNYXJrdXApO2UudGV4dENvbnRlbnQ9dCxpKGUpfX0sZS5pbml0VGV4dD1mdW5jdGlvbih0KXtpZih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7dC5zcGxpdCgiXG4iKS5mb3JFYWNoKGZ1bmN0aW9uKHQsbixvKXtlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHQpKSxuPG8ubGVuZ3RoLTEmJmUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKSl9KTt2YXIgbj1yLmluamVjdEVsSW50b01vZGFsKG8udGV4dE1hcmt1cCk7bi5hcHBlbmRDaGlsZChlKSxpKG4pfX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMSkscj1uKDQpLGk9bigwKSxhPWkuZGVmYXVsdC5CVVRUT04scz1pLmRlZmF1bHQuREFOR0VSX0JVVFRPTixjPW4oMyksbD1uKDIpLHU9big2KSxmPW4oNSksZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZS50ZXh0LGk9ZS52YWx1ZSxkPWUuY2xhc3NOYW1lLHA9ZS5jbG9zZU1vZGFsLG09by5zdHJpbmdUb05vZGUobC5idXR0b25NYXJrdXApLGI9bS5xdWVyeVNlbGVjdG9yKCIuIithKSx2PWErIi0tIit0O2lmKGIuY2xhc3NMaXN0LmFkZCh2KSxkKXsoQXJyYXkuaXNBcnJheShkKT9kOmQuc3BsaXQoIiAiKSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aD4wfSkuZm9yRWFjaChmdW5jdGlvbih0KXtiLmNsYXNzTGlzdC5hZGQodCl9KX1uJiZ0PT09Yy5DT05GSVJNX0tFWSYmYi5jbGFzc0xpc3QuYWRkKHMpLGIudGV4dENvbnRlbnQ9cjt2YXIgZz17fTtyZXR1cm4gZ1t0XT1pLGYuc2V0QWN0aW9uVmFsdWUoZyksZi5zZXRBY3Rpb25PcHRpb25zRm9yKHQse2Nsb3NlTW9kYWw6cH0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7cmV0dXJuIHUub25BY3Rpb24odCl9KSxtfSxwPWZ1bmN0aW9uKHQsZSl7dmFyIG49ci5pbmplY3RFbEludG9Nb2RhbChsLmZvb3Rlck1hcmt1cCk7Zm9yKHZhciBvIGluIHQpe3ZhciBpPXRbb10sYT1kKG8saSxlKTtpLnZpc2libGUmJm4uYXBwZW5kQ2hpbGQoYSl9MD09PW4uY2hpbGRyZW4ubGVuZ3RoJiZuLnJlbW92ZSgpfTtlLmRlZmF1bHQ9cH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigzKSxyPW4oNCksaT1uKDIpLGE9big1KSxzPW4oNiksYz1uKDApLGw9Yy5kZWZhdWx0LkNPTlRFTlQsdT1mdW5jdGlvbih0KXt0LmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixmdW5jdGlvbih0KXt2YXIgZT10LnRhcmdldCxuPWUudmFsdWU7YS5zZXRBY3Rpb25WYWx1ZShuKX0pLHQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLGZ1bmN0aW9uKHQpe2lmKCJFbnRlciI9PT10LmtleSlyZXR1cm4gcy5vbkFjdGlvbihvLkNPTkZJUk1fS0VZKX0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmZvY3VzKCksYS5zZXRBY3Rpb25WYWx1ZSgiIil9LDApfSxmPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpLHI9bCsiX18iK2U7by5jbGFzc0xpc3QuYWRkKHIpO2Zvcih2YXIgaSBpbiBuKXt2YXIgYT1uW2ldO29baV09YX0iaW5wdXQiPT09ZSYmdShvKSx0LmFwcGVuZENoaWxkKG8pfSxkPWZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBlPXIuaW5qZWN0RWxJbnRvTW9kYWwoaS5jb250ZW50TWFya3VwKSxuPXQuZWxlbWVudCxvPXQuYXR0cmlidXRlczsic3RyaW5nIj09dHlwZW9mIG4/ZihlLG4sbyk6ZS5hcHBlbmRDaGlsZChuKX19O2UuZGVmYXVsdD1kfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDEpLHI9bigyKSxpPWZ1bmN0aW9uKCl7dmFyIHQ9by5zdHJpbmdUb05vZGUoci5vdmVybGF5TWFya3VwKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpfTtlLmRlZmF1bHQ9aX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89big1KSxyPW4oNiksaT1uKDEpLGE9bigzKSxzPW4oMCksYz1zLmRlZmF1bHQuTU9EQUwsbD1zLmRlZmF1bHQuQlVUVE9OLHU9cy5kZWZhdWx0Lk9WRVJMQVksZj1mdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdigpfSxkPWZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxnKCl9LHA9ZnVuY3Rpb24odCl7aWYoby5kZWZhdWx0LmlzT3Blbilzd2l0Y2godC5rZXkpe2Nhc2UiRXNjYXBlIjpyZXR1cm4gci5vbkFjdGlvbihhLkNBTkNFTF9LRVkpfX0sbT1mdW5jdGlvbih0KXtpZihvLmRlZmF1bHQuaXNPcGVuKXN3aXRjaCh0LmtleSl7Y2FzZSJUYWIiOnJldHVybiBmKHQpfX0sYj1mdW5jdGlvbih0KXtpZihvLmRlZmF1bHQuaXNPcGVuKXJldHVybiJUYWIiPT09dC5rZXkmJnQuc2hpZnRLZXk/ZCh0KTp2b2lkIDB9LHY9ZnVuY3Rpb24oKXt2YXIgdD1pLmdldE5vZGUobCk7dCYmKHQudGFiSW5kZXg9MCx0LmZvY3VzKCkpfSxnPWZ1bmN0aW9uKCl7dmFyIHQ9aS5nZXROb2RlKGMpLGU9dC5xdWVyeVNlbGVjdG9yQWxsKCIuIitsKSxuPWUubGVuZ3RoLTEsbz1lW25dO28mJm8uZm9jdXMoKX0saD1mdW5jdGlvbih0KXt0W3QubGVuZ3RoLTFdLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLG0pfSx3PWZ1bmN0aW9uKHQpe3RbMF0uYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsYil9LHk9ZnVuY3Rpb24oKXt2YXIgdD1pLmdldE5vZGUoYyksZT10LnF1ZXJ5U2VsZWN0b3JBbGwoIi4iK2wpO2UubGVuZ3RoJiYoaChlKSx3KGUpKX0seD1mdW5jdGlvbih0KXtpZihpLmdldE5vZGUodSk9PT10LnRhcmdldClyZXR1cm4gci5vbkFjdGlvbihhLkNBTkNFTF9LRVkpfSxfPWZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0Tm9kZSh1KTtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIix4KSx0JiZlLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIix4KX0saz1mdW5jdGlvbih0KXtvLmRlZmF1bHQudGltZXImJmNsZWFyVGltZW91dChvLmRlZmF1bHQudGltZXIpLHQmJihvLmRlZmF1bHQudGltZXI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gci5vbkFjdGlvbihhLkNBTkNFTF9LRVkpfSx0KSl9LE89ZnVuY3Rpb24odCl7dC5jbG9zZU9uRXNjP2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIixwKTpkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXl1cCIscCksdC5kYW5nZXJNb2RlP3YoKTpnKCkseSgpLF8odC5jbG9zZU9uQ2xpY2tPdXRzaWRlKSxrKHQudGltZXIpfTtlLmRlZmF1bHQ9T30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigxKSxyPW4oMyksaT1uKDM3KSxhPW4oMzgpLHM9e3RpdGxlOm51bGwsdGV4dDpudWxsLGljb246bnVsbCxidXR0b25zOnIuZGVmYXVsdEJ1dHRvbkxpc3QsY29udGVudDpudWxsLGNsYXNzTmFtZTpudWxsLGNsb3NlT25DbGlja091dHNpZGU6ITAsY2xvc2VPbkVzYzohMCxkYW5nZXJNb2RlOiExLHRpbWVyOm51bGx9LGM9T2JqZWN0LmFzc2lnbih7fSxzKTtlLnNldERlZmF1bHRzPWZ1bmN0aW9uKHQpe2M9T2JqZWN0LmFzc2lnbih7fSxzLHQpfTt2YXIgbD1mdW5jdGlvbih0KXt2YXIgZT10JiZ0LmJ1dHRvbixuPXQmJnQuYnV0dG9ucztyZXR1cm4gdm9pZCAwIT09ZSYmdm9pZCAwIT09biYmby50aHJvd0VycigiQ2Fubm90IHNldCBib3RoICdidXR0b24nIGFuZCAnYnV0dG9ucycgb3B0aW9ucyEiKSx2b2lkIDAhPT1lP3tjb25maXJtOmV9Om59LHU9ZnVuY3Rpb24odCl7cmV0dXJuIG8ub3JkaW5hbFN1ZmZpeE9mKHQrMSl9LGY9ZnVuY3Rpb24odCxlKXtvLnRocm93RXJyKHUoZSkrIiBhcmd1bWVudCAoJyIrdCsiJykgaXMgaW52YWxpZCIpfSxkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dCsxLHI9ZVtuXTtvLmlzUGxhaW5PYmplY3Qocil8fHZvaWQgMD09PXJ8fG8udGhyb3dFcnIoIkV4cGVjdGVkICIrdShuKSsiIGFyZ3VtZW50ICgnIityKyInKSB0byBiZSBhIHBsYWluIG9iamVjdCIpfSxwPWZ1bmN0aW9uKHQsZSl7dmFyIG49dCsxLHI9ZVtuXTt2b2lkIDAhPT1yJiZvLnRocm93RXJyKCJVbmV4cGVjdGVkICIrdShuKSsiIGFyZ3VtZW50ICgiK3IrIikiKX0sbT1mdW5jdGlvbih0LGUsbixyKXt2YXIgaT10eXBlb2YgZSxhPSJzdHJpbmciPT09aSxzPWUgaW5zdGFuY2VvZiBFbGVtZW50O2lmKGEpe2lmKDA9PT1uKXJldHVybnt0ZXh0OmV9O2lmKDE9PT1uKXJldHVybnt0ZXh0OmUsdGl0bGU6clswXX07aWYoMj09PW4pcmV0dXJuIGQobixyKSx7aWNvbjplfTtmKGUsbil9ZWxzZXtpZihzJiYwPT09bilyZXR1cm4gZChuLHIpLHtjb250ZW50OmV9O2lmKG8uaXNQbGFpbk9iamVjdChlKSlyZXR1cm4gcChuLHIpLGU7ZihlLG4pfX07ZS5nZXRPcHRzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3ZhciBuPXt9O3QuZm9yRWFjaChmdW5jdGlvbihlLG8pe3ZhciByPW0oMCxlLG8sdCk7T2JqZWN0LmFzc2lnbihuLHIpfSk7dmFyIG89bChuKTtuLmJ1dHRvbnM9ci5nZXRCdXR0b25MaXN0T3B0cyhvKSxkZWxldGUgbi5idXR0b24sbi5jb250ZW50PWkuZ2V0Q29udGVudE9wdHMobi5jb250ZW50KTt2YXIgdT1PYmplY3QuYXNzaWduKHt9LHMsYyxuKTtyZXR1cm4gT2JqZWN0LmtleXModSkuZm9yRWFjaChmdW5jdGlvbih0KXthLkRFUFJFQ0FURURfT1BUU1t0XSYmYS5sb2dEZXByZWNhdGlvbih0KX0pLHV9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDEpLHI9e2VsZW1lbnQ6ImlucHV0IixhdHRyaWJ1dGVzOntwbGFjZWhvbGRlcjoiIn19O2UuZ2V0Q29udGVudE9wdHM9ZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIG8uaXNQbGFpbk9iamVjdCh0KT9PYmplY3QuYXNzaWduKGUsdCk6dCBpbnN0YW5jZW9mIEVsZW1lbnQ/e2VsZW1lbnQ6dH06ImlucHV0Ij09PXQ/cjpudWxsfX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5sb2dEZXByZWNhdGlvbj1mdW5jdGlvbih0KXt2YXIgbj1lLkRFUFJFQ0FURURfT1BUU1t0XSxvPW4ub25seVJlbmFtZSxyPW4ucmVwbGFjZW1lbnQsaT1uLnN1Yk9wdGlvbixhPW4ubGluayxzPW8/InJlbmFtZWQiOiJkZXByZWNhdGVkIixjPSdTd2VldEFsZXJ0IHdhcm5pbmc6ICInK3QrJyIgb3B0aW9uIGhhcyBiZWVuICcrcysiLiI7aWYocil7Yys9IiBQbGVhc2UgdXNlIisoaT8nICInK2krJyIgaW4gJzoiICIpKyciJytyKyciIGluc3RlYWQuJ312YXIgbD0iaHR0cHM6Ly9zd2VldGFsZXJ0LmpzLm9yZyI7Yys9YT8iIE1vcmUgZGV0YWlsczogIitsK2E6IiBNb3JlIGRldGFpbHM6ICIrbCsiL2d1aWRlcy8jdXBncmFkaW5nLWZyb20tMXgiLGNvbnNvbGUud2FybihjKX0sZS5ERVBSRUNBVEVEX09QVFM9e3R5cGU6e3JlcGxhY2VtZW50OiJpY29uIixsaW5rOiIvZG9jcy8jaWNvbiJ9LGltYWdlVXJsOntyZXBsYWNlbWVudDoiaWNvbiIsbGluazoiL2RvY3MvI2ljb24ifSxjdXN0b21DbGFzczp7cmVwbGFjZW1lbnQ6ImNsYXNzTmFtZSIsb25seVJlbmFtZTohMCxsaW5rOiIvZG9jcy8jY2xhc3NuYW1lIn0saW1hZ2VTaXplOnt9LHNob3dDYW5jZWxCdXR0b246e3JlcGxhY2VtZW50OiJidXR0b25zIixsaW5rOiIvZG9jcy8jYnV0dG9ucyJ9LHNob3dDb25maXJtQnV0dG9uOntyZXBsYWNlbWVudDoiYnV0dG9uIixsaW5rOiIvZG9jcy8jYnV0dG9uIn0sY29uZmlybUJ1dHRvblRleHQ6e3JlcGxhY2VtZW50OiJidXR0b24iLGxpbms6Ii9kb2NzLyNidXR0b24ifSxjb25maXJtQnV0dG9uQ29sb3I6e30sY2FuY2VsQnV0dG9uVGV4dDp7cmVwbGFjZW1lbnQ6ImJ1dHRvbnMiLGxpbms6Ii9kb2NzLyNidXR0b25zIn0sY2xvc2VPbkNvbmZpcm06e3JlcGxhY2VtZW50OiJidXR0b24iLHN1Yk9wdGlvbjoiY2xvc2VNb2RhbCIsbGluazoiL2RvY3MvI2J1dHRvbiJ9LGNsb3NlT25DYW5jZWw6e3JlcGxhY2VtZW50OiJidXR0b25zIixzdWJPcHRpb246ImNsb3NlTW9kYWwiLGxpbms6Ii9kb2NzLyNidXR0b25zIn0sc2hvd0xvYWRlck9uQ29uZmlybTp7cmVwbGFjZW1lbnQ6ImJ1dHRvbnMifSxhbmltYXRpb246e30saW5wdXRUeXBlOntyZXBsYWNlbWVudDoiY29udGVudCIsbGluazoiL2RvY3MvI2NvbnRlbnQifSxpbnB1dFZhbHVlOntyZXBsYWNlbWVudDoiY29udGVudCIsbGluazoiL2RvY3MvI2NvbnRlbnQifSxpbnB1dFBsYWNlaG9sZGVyOntyZXBsYWNlbWVudDoiY29udGVudCIsbGluazoiL2RvY3MvI2NvbnRlbnQifSxodG1sOntyZXBsYWNlbWVudDoiY29udGVudCIsbGluazoiL2RvY3MvI2NvbnRlbnQifSxhbGxvd0VzY2FwZUtleTp7cmVwbGFjZW1lbnQ6ImNsb3NlT25Fc2MiLG9ubHlSZW5hbWU6ITAsbGluazoiL2RvY3MvI2Nsb3Nlb25lc2MifSxhbGxvd0NsaWNrT3V0c2lkZTp7cmVwbGFjZW1lbnQ6ImNsb3NlT25DbGlja091dHNpZGUiLG9ubHlSZW5hbWU6ITAsbGluazoiL2RvY3MvI2Nsb3Nlb25jbGlja291dHNpZGUifX19XSl9KTs="},{"meta":{"name":"jquery.min.js","url":"https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js","ts":1642390204927,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMC4yIHwgKGMpIDIwMDUsIDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UKLy9AIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXAKKi8KKGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPXR5cGVvZiB0LG89ZS5sb2NhdGlvbixhPWUuZG9jdW1lbnQscz1hLmRvY3VtZW50RWxlbWVudCxsPWUualF1ZXJ5LHU9ZS4kLGM9e30scD1bXSxmPSIxLjEwLjIiLGQ9cC5jb25jYXQsaD1wLnB1c2gsZz1wLnNsaWNlLG09cC5pbmRleE9mLHk9Yy50b1N0cmluZyx2PWMuaGFzT3duUHJvcGVydHksYj1mLnRyaW0seD1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgeC5mbi5pbml0KGUsdCxyKX0sdz0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxUPS9cUysvZyxDPS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZyxOPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8saz0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvLEU9L15bXF0sOnt9XHNdKiQvLFM9Lyg/Ol58OnwsKSg/OlxzKlxbKSsvZyxBPS9cXCg/OlsiXFxcL2JmbnJ0XXx1W1xkYS1mQS1GXXs0fSkvZyxqPS8iW14iXFxcclxuXSoifHRydWV8ZmFsc2V8bnVsbHwtPyg/OlxkK1wufClcZCsoPzpbZUVdWystXT9cZCt8KS9nLEQ9L14tbXMtLyxMPS8tKFtcZGEtel0pL2dpLEg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSxxPWZ1bmN0aW9uKGUpeyhhLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWUudHlwZXx8ImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZSkmJihfKCkseC5yZWFkeSgpKX0sXz1mdW5jdGlvbigpe2EuYWRkRXZlbnRMaXN0ZW5lcj8oYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixxLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLHEsITEpKTooYS5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixxKSxlLmRldGFjaEV2ZW50KCJvbmxvYWQiLHEpKX07eC5mbj14LnByb3RvdHlwZT17anF1ZXJ5OmYsY29uc3RydWN0b3I6eCxpbml0OmZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvO2lmKCFlKXJldHVybiB0aGlzO2lmKCJzdHJpbmciPT10eXBlb2YgZSl7aWYoaT0iPCI9PT1lLmNoYXJBdCgwKSYmIj4iPT09ZS5jaGFyQXQoZS5sZW5ndGgtMSkmJmUubGVuZ3RoPj0zP1tudWxsLGUsbnVsbF06Ti5leGVjKGUpLCFpfHwhaVsxXSYmbilyZXR1cm4hbnx8bi5qcXVlcnk/KG58fHIpLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3RvcihuKS5maW5kKGUpO2lmKGlbMV0pe2lmKG49biBpbnN0YW5jZW9mIHg/blswXTpuLHgubWVyZ2UodGhpcyx4LnBhcnNlSFRNTChpWzFdLG4mJm4ubm9kZVR5cGU/bi5vd25lckRvY3VtZW50fHxuOmEsITApKSxrLnRlc3QoaVsxXSkmJnguaXNQbGFpbk9iamVjdChuKSlmb3IoaSBpbiBuKXguaXNGdW5jdGlvbih0aGlzW2ldKT90aGlzW2ldKG5baV0pOnRoaXMuYXR0cihpLG5baV0pO3JldHVybiB0aGlzfWlmKG89YS5nZXRFbGVtZW50QnlJZChpWzJdKSxvJiZvLnBhcmVudE5vZGUpe2lmKG8uaWQhPT1pWzJdKXJldHVybiByLmZpbmQoZSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPW99cmV0dXJuIHRoaXMuY29udGV4dD1hLHRoaXMuc2VsZWN0b3I9ZSx0aGlzfXJldHVybiBlLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1lLHRoaXMubGVuZ3RoPTEsdGhpcyk6eC5pc0Z1bmN0aW9uKGUpP3IucmVhZHkoZSk6KGUuc2VsZWN0b3IhPT10JiYodGhpcy5zZWxlY3Rvcj1lLnNlbGVjdG9yLHRoaXMuY29udGV4dD1lLmNvbnRleHQpLHgubWFrZUFycmF5KGUsdGhpcykpfSxzZWxlY3RvcjoiIixsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGcuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3RoaXMudG9BcnJheSgpOjA+ZT90aGlzW3RoaXMubGVuZ3RoK2VdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlKXt2YXIgdD14Lm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdC5jb250ZXh0PXRoaXMuY29udGV4dCx0fSxlYWNoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguZWFjaCh0aGlzLGUsdCl9LHJlYWR5OmZ1bmN0aW9uKGUpe3JldHVybiB4LnJlYWR5LnByb21pc2UoKS5kb25lKGUpLHRoaXN9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGcuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoMD5lP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4+PTAmJnQ+bj9bdGhpc1tuXV06W10pfSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHgubWFwKHRoaXMsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbix0KX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpoLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSx4LmZuLmluaXQucHJvdG90eXBlPXguZm4seC5leHRlbmQ9eC5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvLGEscz1hcmd1bWVudHNbMF18fHt9LGw9MSx1PWFyZ3VtZW50cy5sZW5ndGgsYz0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgcyYmKGM9cyxzPWFyZ3VtZW50c1sxXXx8e30sbD0yKSwib2JqZWN0Ij09dHlwZW9mIHN8fHguaXNGdW5jdGlvbihzKXx8KHM9e30pLHU9PT1sJiYocz10aGlzLC0tbCk7dT5sO2wrKylpZihudWxsIT0obz1hcmd1bWVudHNbbF0pKWZvcihpIGluIG8pZT1zW2ldLHI9b1tpXSxzIT09ciYmKGMmJnImJih4LmlzUGxhaW5PYmplY3Qocil8fChuPXguaXNBcnJheShyKSkpPyhuPyhuPSExLGE9ZSYmeC5pc0FycmF5KGUpP2U6W10pOmE9ZSYmeC5pc1BsYWluT2JqZWN0KGUpP2U6e30sc1tpXT14LmV4dGVuZChjLGEscikpOnIhPT10JiYoc1tpXT1yKSk7cmV0dXJuIHN9LHguZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PXgmJihlLiQ9dSksdCYmZS5qUXVlcnk9PT14JiYoZS5qUXVlcnk9bCkseH0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT94LnJlYWR5V2FpdCsrOngucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXtpZihlPT09ITA/IS0teC5yZWFkeVdhaXQ6IXguaXNSZWFkeSl7aWYoIWEuYm9keSlyZXR1cm4gc2V0VGltZW91dCh4LnJlYWR5KTt4LmlzUmVhZHk9ITAsZSE9PSEwJiYtLXgucmVhZHlXYWl0PjB8fChuLnJlc29sdmVXaXRoKGEsW3hdKSx4LmZuLnRyaWdnZXImJngoYSkudHJpZ2dlcigicmVhZHkiKS5vZmYoInJlYWR5IikpfX0saXNGdW5jdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT09eC50eXBlKGUpfSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJhcnJheSI9PT14LnR5cGUoZSl9LGlzV2luZG93OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT1lLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGUpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KGUpKSYmaXNGaW5pdGUoZSl9LHR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/ZSsiIjoib2JqZWN0Ij09dHlwZW9mIGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBlP2NbeS5jYWxsKGUpXXx8Im9iamVjdCI6dHlwZW9mIGV9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oZSl7dmFyIG47aWYoIWV8fCJvYmplY3QiIT09eC50eXBlKGUpfHxlLm5vZGVUeXBlfHx4LmlzV2luZG93KGUpKXJldHVybiExO3RyeXtpZihlLmNvbnN0cnVjdG9yJiYhdi5jYWxsKGUsImNvbnN0cnVjdG9yIikmJiF2LmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKSlyZXR1cm4hMX1jYXRjaChyKXtyZXR1cm4hMX1pZih4LnN1cHBvcnQub3duTGFzdClmb3IobiBpbiBlKXJldHVybiB2LmNhbGwoZSxuKTtmb3IobiBpbiBlKTtyZXR1cm4gbj09PXR8fHYuY2FsbChlLG4pfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0PXR8fGE7dmFyIHI9ay5leGVjKGUpLGk9IW4mJltdO3JldHVybiByP1t0LmNyZWF0ZUVsZW1lbnQoclsxXSldOihyPXguYnVpbGRGcmFnbWVudChbZV0sdCxpKSxpJiZ4KGkpLnJlbW92ZSgpLHgubWVyZ2UoW10sci5jaGlsZE5vZGVzKSl9LHBhcnNlSlNPTjpmdW5jdGlvbihuKXtyZXR1cm4gZS5KU09OJiZlLkpTT04ucGFyc2U/ZS5KU09OLnBhcnNlKG4pOm51bGw9PT1uP246InN0cmluZyI9PXR5cGVvZiBuJiYobj14LnRyaW0obiksbiYmRS50ZXN0KG4ucmVwbGFjZShBLCJAIikucmVwbGFjZShqLCJdIikucmVwbGFjZShTLCIiKSkpP0Z1bmN0aW9uKCJyZXR1cm4gIituKSgpOih4LmVycm9yKCJJbnZhbGlkIEpTT046ICIrbiksdCl9LHBhcnNlWE1MOmZ1bmN0aW9uKG4pe3ZhciByLGk7aWYoIW58fCJzdHJpbmciIT10eXBlb2YgbilyZXR1cm4gbnVsbDt0cnl7ZS5ET01QYXJzZXI/KGk9bmV3IERPTVBhcnNlcixyPWkucGFyc2VGcm9tU3RyaW5nKG4sInRleHQveG1sIikpOihyPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIiksci5hc3luYz0iZmFsc2UiLHIubG9hZFhNTChuKSl9Y2F0Y2gobyl7cj10fXJldHVybiByJiZyLmRvY3VtZW50RWxlbWVudCYmIXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHx4LmVycm9yKCJJbnZhbGlkIFhNTDogIituKSxyfSxub29wOmZ1bmN0aW9uKCl7fSxnbG9iYWxFdmFsOmZ1bmN0aW9uKHQpe3QmJngudHJpbSh0KSYmKGUuZXhlY1NjcmlwdHx8ZnVuY3Rpb24odCl7ZS5ldmFsLmNhbGwoZSx0KX0pKHQpfSxjYW1lbENhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShELCJtcy0iKS5yZXBsYWNlKEwsSCl9LG5vZGVOYW1lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgsYT1NKGUpO2lmKG4pe2lmKGEpe2Zvcig7bz5pO2krKylpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBmb3IoaSBpbiBlKWlmKHI9dC5hcHBseShlW2ldLG4pLHI9PT0hMSlicmVha31lbHNlIGlmKGEpe2Zvcig7bz5pO2krKylpZihyPXQuY2FsbChlW2ldLGksZVtpXSkscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuY2FsbChlW2ldLGksZVtpXSkscj09PSExKWJyZWFrO3JldHVybiBlfSx0cmltOmImJiFiLmNhbGwoIlx1ZmVmZlx1MDBhMCIpP2Z1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOmIuY2FsbChlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6KGUrIiIpLnJlcGxhY2UoQywiIil9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuPXR8fFtdO3JldHVybiBudWxsIT1lJiYoTShPYmplY3QoZSkpP3gubWVyZ2Uobiwic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpOmguY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZih0KXtpZihtKXJldHVybiBtLmNhbGwodCxlLG4pO2ZvcihyPXQubGVuZ3RoLG49bj8wPm4/TWF0aC5tYXgoMCxyK24pOm46MDtyPm47bisrKWlmKG4gaW4gdCYmdFtuXT09PWUpcmV0dXJuIG59cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGUsbil7dmFyIHI9bi5sZW5ndGgsaT1lLmxlbmd0aCxvPTA7aWYoIm51bWJlciI9PXR5cGVvZiByKWZvcig7cj5vO28rKyllW2krK109bltvXTtlbHNlIHdoaWxlKG5bb10hPT10KWVbaSsrXT1uW28rK107cmV0dXJuIGUubGVuZ3RoPWksZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1bXSxvPTAsYT1lLmxlbmd0aDtmb3Iobj0hIW47YT5vO28rKylyPSEhdChlW29dLG8pLG4hPT1yJiZpLnB1c2goZVtvXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgsYT1NKGUpLHM9W107aWYoYSlmb3IoO28+aTtpKyspcj10KGVbaV0saSxuKSxudWxsIT1yJiYoc1tzLmxlbmd0aF09cik7ZWxzZSBmb3IoaSBpbiBlKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKHNbcy5sZW5ndGhdPXIpO3JldHVybiBkLmFwcGx5KFtdLHMpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLG87cmV0dXJuInN0cmluZyI9PXR5cGVvZiBuJiYobz1lW25dLG49ZSxlPW8pLHguaXNGdW5jdGlvbihlKT8ocj1nLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseShufHx0aGlzLHIuY29uY2F0KGcuY2FsbChhcmd1bWVudHMpKSl9LGkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHx4Lmd1aWQrKyxpKTp0fSxhY2Nlc3M6ZnVuY3Rpb24oZSxuLHIsaSxvLGEscyl7dmFyIGw9MCx1PWUubGVuZ3RoLGM9bnVsbD09cjtpZigib2JqZWN0Ij09PXgudHlwZShyKSl7bz0hMDtmb3IobCBpbiByKXguYWNjZXNzKGUsbixsLHJbbF0sITAsYSxzKX1lbHNlIGlmKGkhPT10JiYobz0hMCx4LmlzRnVuY3Rpb24oaSl8fChzPSEwKSxjJiYocz8obi5jYWxsKGUsaSksbj1udWxsKTooYz1uLG49ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBjLmNhbGwoeChlKSxuKX0pKSxuKSlmb3IoO3U+bDtsKyspbihlW2xdLHIscz9pOmkuY2FsbChlW2xdLGwsbihlW2xdLHIpKSk7cmV0dXJuIG8/ZTpjP24uY2FsbChlKTp1P24oZVswXSxyKTphfSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX0sc3dhcDpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGE9e307Zm9yKG8gaW4gdClhW29dPWUuc3R5bGVbb10sZS5zdHlsZVtvXT10W29dO2k9bi5hcHBseShlLHJ8fFtdKTtmb3IobyBpbiB0KWUuc3R5bGVbb109YVtvXTtyZXR1cm4gaX19KSx4LnJlYWR5LnByb21pc2U9ZnVuY3Rpb24odCl7aWYoIW4paWYobj14LkRlZmVycmVkKCksImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZSlzZXRUaW1lb3V0KHgucmVhZHkpO2Vsc2UgaWYoYS5hZGRFdmVudExpc3RlbmVyKWEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIscSwhMSksZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixxLCExKTtlbHNle2EuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIscSksZS5hdHRhY2hFdmVudCgib25sb2FkIixxKTt2YXIgcj0hMTt0cnl7cj1udWxsPT1lLmZyYW1lRWxlbWVudCYmYS5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goaSl7fXImJnIuZG9TY3JvbGwmJmZ1bmN0aW9uIG8oKXtpZigheC5pc1JlYWR5KXt0cnl7ci5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGUpe3JldHVybiBzZXRUaW1lb3V0KG8sNTApfV8oKSx4LnJlYWR5KCl9fSgpfXJldHVybiBuLnByb21pc2UodCl9LHguZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2NbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gTShlKXt2YXIgdD1lLmxlbmd0aCxuPXgudHlwZShlKTtyZXR1cm4geC5pc1dpbmRvdyhlKT8hMToxPT09ZS5ub2RlVHlwZSYmdD8hMDoiYXJyYXkiPT09bnx8ImZ1bmN0aW9uIiE9PW4mJigwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlKX1yPXgoYSksZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHMsbCx1LGMscCxmLGQsaCxnLG0seSx2LGI9InNpenpsZSIrLW5ldyBEYXRlLHc9ZS5kb2N1bWVudCxUPTAsQz0wLE49c3QoKSxrPXN0KCksRT1zdCgpLFM9ITEsQT1mdW5jdGlvbihlLHQpe3JldHVybiBlPT09dD8oUz0hMCwwKTowfSxqPXR5cGVvZiB0LEQ9MTw8MzEsTD17fS5oYXNPd25Qcm9wZXJ0eSxIPVtdLHE9SC5wb3AsXz1ILnB1c2gsTT1ILnB1c2gsTz1ILnNsaWNlLEY9SC5pbmRleE9mfHxmdW5jdGlvbihlKXt2YXIgdD0wLG49dGhpcy5sZW5ndGg7Zm9yKDtuPnQ7dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxCPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsUD0iW1xceDIwXFx0XFxyXFxuXFxmXSIsUj0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLFc9Ui5yZXBsYWNlKCJ3IiwidyMiKSwkPSJcXFsiK1ArIiooIitSKyIpIitQKyIqKD86KFsqXiR8IX5dPz0pIitQKyIqKD86KFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcM3woIitXKyIpfCl8KSIrUCsiKlxcXSIsST0iOigiK1IrIikoPzpcXCgoKFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcM3woKD86XFxcXC58W15cXFxcKClbXFxdXXwiKyQucmVwbGFjZSgzLDgpKyIpKil8LiopXFwpfCkiLHo9UmVnRXhwKCJeIitQKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK1ArIiskIiwiZyIpLFg9UmVnRXhwKCJeIitQKyIqLCIrUCsiKiIpLFU9UmVnRXhwKCJeIitQKyIqKFs+K35dfCIrUCsiKSIrUCsiKiIpLFY9UmVnRXhwKFArIipbK35dIiksWT1SZWdFeHAoIj0iK1ArIiooW15cXF0nXCJdKikiK1ArIipcXF0iLCJnIiksSj1SZWdFeHAoSSksRz1SZWdFeHAoIl4iK1crIiQiKSxRPXtJRDpSZWdFeHAoIl4jKCIrUisiKSIpLENMQVNTOlJlZ0V4cCgiXlxcLigiK1IrIikiKSxUQUc6UmVnRXhwKCJeKCIrUi5yZXBsYWNlKCJ3IiwidyoiKSsiKSIpLEFUVFI6UmVnRXhwKCJeIiskKSxQU0VVRE86UmVnRXhwKCJeIitJKSxDSElMRDpSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrUCsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrUCsiKig/OihbKy1dfCkiK1ArIiooXFxkKyl8KSkiK1ArIipcXCl8KSIsImkiKSxib29sOlJlZ0V4cCgiXig/OiIrQisiKSQiLCJpIiksbmVlZHNDb250ZXh0OlJlZ0V4cCgiXiIrUCsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitQKyIqKCg/Oi1cXGQpP1xcZCopIitQKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxLPS9eW157XStce1xzKlxbbmF0aXZlIFx3LyxaPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sZXQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSx0dD0vXmhcZCQvaSxudD0vJ3xcXC9nLHJ0PVJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitQKyI/fCgiK1ArIil8LikiLCJpZyIpLGl0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0iMHgiK3QtNjU1MzY7cmV0dXJuIHIhPT1yfHxuP3Q6MD5yP1N0cmluZy5mcm9tQ2hhckNvZGUocis2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxyPj4xMCw1NjMyMHwxMDIzJnIpfTt0cnl7TS5hcHBseShIPU8uY2FsbCh3LmNoaWxkTm9kZXMpLHcuY2hpbGROb2RlcyksSFt3LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChvdCl7TT17YXBwbHk6SC5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtfLmFwcGx5KGUsTy5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gYXQoZSx0LG4saSl7dmFyIG8sYSxzLGwsdSxjLGQsbSx5LHg7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OncpIT09ZiYmcCh0KSx0PXR8fGYsbj1ufHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBuO2lmKDEhPT0obD10Lm5vZGVUeXBlKSYmOSE9PWwpcmV0dXJuW107aWYoaCYmIWkpe2lmKG89Wi5leGVjKGUpKWlmKHM9b1sxXSl7aWYoOT09PWwpe2lmKGE9dC5nZXRFbGVtZW50QnlJZChzKSwhYXx8IWEucGFyZW50Tm9kZSlyZXR1cm4gbjtpZihhLmlkPT09cylyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihhPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChzKSkmJnYodCxhKSYmYS5pZD09PXMpcmV0dXJuIG4ucHVzaChhKSxufWVsc2V7aWYob1syXSlyZXR1cm4gTS5hcHBseShuLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLG47aWYoKHM9b1szXSkmJnIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBNLmFwcGx5KG4sdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHMpKSxufWlmKHIucXNhJiYoIWd8fCFnLnRlc3QoZSkpKXtpZihtPWQ9Yix5PXQseD05PT09bCYmZSwxPT09bCYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2M9bXQoZSksKGQ9dC5nZXRBdHRyaWJ1dGUoImlkIikpP209ZC5yZXBsYWNlKG50LCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixtKSxtPSJbaWQ9JyIrbSsiJ10gIix1PWMubGVuZ3RoO3doaWxlKHUtLSljW3VdPW0reXQoY1t1XSk7eT1WLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx4PWMuam9pbigiLCIpfWlmKHgpdHJ5e3JldHVybiBNLmFwcGx5KG4seS5xdWVyeVNlbGVjdG9yQWxsKHgpKSxufWNhdGNoKFQpe31maW5hbGx5e2R8fHQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGt0KGUucmVwbGFjZSh6LCIkMSIpLHQsbixpKX1mdW5jdGlvbiBzdCgpe3ZhciBlPVtdO2Z1bmN0aW9uIHQobixyKXtyZXR1cm4gZS5wdXNoKG4rPSIgIik+by5jYWNoZUxlbmd0aCYmZGVsZXRlIHRbZS5zaGlmdCgpXSx0W25dPXJ9cmV0dXJuIHR9ZnVuY3Rpb24gbHQoZSl7cmV0dXJuIGVbYl09ITAsZX1mdW5jdGlvbiB1dChlKXt2YXIgdD1mLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWUodCl9Y2F0Y2gobil7cmV0dXJuITF9ZmluYWxseXt0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9fWZ1bmN0aW9uIGN0KGUsdCl7dmFyIG49ZS5zcGxpdCgifCIpLHI9ZS5sZW5ndGg7d2hpbGUoci0tKW8uYXR0ckhhbmRsZVtuW3JdXT10fWZ1bmN0aW9uIHB0KGUsdCl7dmFyIG49dCYmZSxyPW4mJjE9PT1lLm5vZGVUeXBlJiYxPT09dC5ub2RlVHlwZSYmKH50LnNvdXJjZUluZGV4fHxEKS0ofmUuc291cmNlSW5kZXh8fEQpO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1uJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBkdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09bnx8ImJ1dHRvbiI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gaHQoZSl7cmV0dXJuIGx0KGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LGx0KGZ1bmN0aW9uKG4scil7dmFyIGksbz1lKFtdLG4ubGVuZ3RoLHQpLGE9by5sZW5ndGg7d2hpbGUoYS0tKW5baT1vW2FdXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9cz1hdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0scj1hdC5zdXBwb3J0PXt9LHA9YXQuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIG49ZT9lLm93bmVyRG9jdW1lbnR8fGU6dyxpPW4uZGVmYXVsdFZpZXc7cmV0dXJuIG4hPT1mJiY5PT09bi5ub2RlVHlwZSYmbi5kb2N1bWVudEVsZW1lbnQ/KGY9bixkPW4uZG9jdW1lbnRFbGVtZW50LGg9IXMobiksaSYmaS5hdHRhY2hFdmVudCYmaSE9PWkudG9wJiZpLmF0dGFjaEV2ZW50KCJvbmJlZm9yZXVubG9hZCIsZnVuY3Rpb24oKXtwKCl9KSxyLmF0dHJpYnV0ZXM9dXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPSJpIiwhZS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksci5nZXRFbGVtZW50c0J5VGFnTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZChuLmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLHIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+IixlLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJpIiwyPT09ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RofSksci5nZXRCeUlkPXV0KGZ1bmN0aW9uKGUpe3JldHVybiBkLmFwcGVuZENoaWxkKGUpLmlkPWIsIW4uZ2V0RWxlbWVudHNCeU5hbWV8fCFuLmdldEVsZW1lbnRzQnlOYW1lKGIpLmxlbmd0aH0pLHIuZ2V0QnlJZD8oby5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQhPT1qJiZoKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0sby5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKHJ0LGl0KTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19KTooZGVsZXRlIG8uZmluZC5JRCxvLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UocnQsaXQpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlIT09aiYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxvLmZpbmQuVEFHPXIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHlwZW9mIG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1qP24uZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoIioiPT09ZSl7d2hpbGUobj1vW2krK10pMT09PW4ubm9kZVR5cGUmJnIucHVzaChuKTtyZXR1cm4gcn1yZXR1cm4gb30sby5maW5kLkNMQVNTPXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHlwZW9mIG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PWomJmg/bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpOnR9LG09W10sZz1bXSwoci5xc2E9Sy50ZXN0KG4ucXVlcnlTZWxlY3RvckFsbCkpJiYodXQoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxzZWxlY3Q+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8Zy5wdXNoKCJcXFsiK1ArIiooPzp2YWx1ZXwiK0IrIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxnLnB1c2goIjpjaGVja2VkIil9KSx1dChmdW5jdGlvbihlKXt2YXIgdD1uLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKSxlLmFwcGVuZENoaWxkKHQpLnNldEF0dHJpYnV0ZSgidCIsIiIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3RePScnXSIpLmxlbmd0aCYmZy5wdXNoKCJbKl4kXT0iK1ArIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGh8fGcucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSxnLnB1c2goIiwuKjoiKX0pKSwoci5tYXRjaGVzU2VsZWN0b3I9Sy50ZXN0KHk9ZC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGQubW96TWF0Y2hlc1NlbGVjdG9yfHxkLm9NYXRjaGVzU2VsZWN0b3J8fGQubXNNYXRjaGVzU2VsZWN0b3IpKSYmdXQoZnVuY3Rpb24oZSl7ci5kaXNjb25uZWN0ZWRNYXRjaD15LmNhbGwoZSwiZGl2IikseS5jYWxsKGUsIltzIT0nJ106eCIpLG0ucHVzaCgiIT0iLEkpfSksZz1nLmxlbmd0aCYmUmVnRXhwKGcuam9pbigifCIpKSxtPW0ubGVuZ3RoJiZSZWdFeHAobS5qb2luKCJ8IikpLHY9Sy50ZXN0KGQuY29udGFpbnMpfHxkLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7dmFyIG49OT09PWUubm9kZVR5cGU/ZS5kb2N1bWVudEVsZW1lbnQ6ZSxyPXQmJnQucGFyZW50Tm9kZTtyZXR1cm4gZT09PXJ8fCEoIXJ8fDEhPT1yLm5vZGVUeXBlfHwhKG4uY29udGFpbnM/bi5jb250YWlucyhyKTplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIpKSl9OmZ1bmN0aW9uKGUsdCl7aWYodCl3aGlsZSh0PXQucGFyZW50Tm9kZSlpZih0PT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sQT1kLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIFM9ITAsMDt2YXIgaT10LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpO3JldHVybiBpPzEmaXx8IXIuc29ydERldGFjaGVkJiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpPT09aT9lPT09bnx8dih3LGUpPy0xOnQ9PT1ufHx2KHcsdCk/MTpjP0YuY2FsbChjLGUpLUYuY2FsbChjLHQpOjA6NCZpPy0xOjE6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj8tMToxfTpmdW5jdGlvbihlLHQpe3ZhciByLGk9MCxvPWUucGFyZW50Tm9kZSxhPXQucGFyZW50Tm9kZSxzPVtlXSxsPVt0XTtpZihlPT09dClyZXR1cm4gUz0hMCwwO2lmKCFvfHwhYSlyZXR1cm4gZT09PW4/LTE6dD09PW4/MTpvPy0xOmE/MTpjP0YuY2FsbChjLGUpLUYuY2FsbChjLHQpOjA7aWYobz09PWEpcmV0dXJuIHB0KGUsdCk7cj1lO3doaWxlKHI9ci5wYXJlbnROb2RlKXMudW5zaGlmdChyKTtyPXQ7d2hpbGUocj1yLnBhcmVudE5vZGUpbC51bnNoaWZ0KHIpO3doaWxlKHNbaV09PT1sW2ldKWkrKztyZXR1cm4gaT9wdChzW2ldLGxbaV0pOnNbaV09PT13Py0xOmxbaV09PT13PzE6MH0sbik6Zn0sYXQubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBhdChlLG51bGwsbnVsbCx0KX0sYXQubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoKGUub3duZXJEb2N1bWVudHx8ZSkhPT1mJiZwKGUpLHQ9dC5yZXBsYWNlKFksIj0nJDEnXSIpLCEoIXIubWF0Y2hlc1NlbGVjdG9yfHwhaHx8bSYmbS50ZXN0KHQpfHxnJiZnLnRlc3QodCkpKXRyeXt2YXIgbj15LmNhbGwoZSx0KTtpZihufHxyLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2goaSl7fXJldHVybiBhdCh0LGYsbnVsbCxbZV0pLmxlbmd0aD4wfSxhdC5jb250YWlucz1mdW5jdGlvbihlLHQpe3JldHVybihlLm93bmVyRG9jdW1lbnR8fGUpIT09ZiYmcChlKSx2KGUsdCl9LGF0LmF0dHI9ZnVuY3Rpb24oZSxuKXsoZS5vd25lckRvY3VtZW50fHxlKSE9PWYmJnAoZSk7dmFyIGk9by5hdHRySGFuZGxlW24udG9Mb3dlckNhc2UoKV0sYT1pJiZMLmNhbGwoby5hdHRySGFuZGxlLG4udG9Mb3dlckNhc2UoKSk/aShlLG4sIWgpOnQ7cmV0dXJuIGE9PT10P3IuYXR0cmlidXRlc3x8IWg/ZS5nZXRBdHRyaWJ1dGUobik6KGE9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pKSYmYS5zcGVjaWZpZWQ/YS52YWx1ZTpudWxsOmF9LGF0LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2UpfSxhdC51bmlxdWVTb3J0PWZ1bmN0aW9uKGUpe3ZhciB0LG49W10saT0wLG89MDtpZihTPSFyLmRldGVjdER1cGxpY2F0ZXMsYz0hci5zb3J0U3RhYmxlJiZlLnNsaWNlKDApLGUuc29ydChBKSxTKXt3aGlsZSh0PWVbbysrXSl0PT09ZVtvXSYmKGk9bi5wdXNoKG8pKTt3aGlsZShpLS0pZS5zcGxpY2UobltpXSwxKX1yZXR1cm4gZX0sYT1hdC5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49IiIscj0wLGk9ZS5ub2RlVHlwZTtpZihpKXtpZigxPT09aXx8OT09PWl8fDExPT09aSl7aWYoInN0cmluZyI9PXR5cGVvZiBlLnRleHRDb250ZW50KXJldHVybiBlLnRleHRDb250ZW50O2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyluKz1hKGUpfWVsc2UgaWYoMz09PWl8fDQ9PT1pKXJldHVybiBlLm5vZGVWYWx1ZX1lbHNlIGZvcig7dD1lW3JdO3IrKyluKz1hKHQpO3JldHVybiBufSxvPWF0LnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmx0LG1hdGNoOlEsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6ITB9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6ITB9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0ucmVwbGFjZShydCxpdCksZVszXT0oZVs0XXx8ZVs1XXx8IiIpLnJlcGxhY2UocnQsaXQpLCJ+PSI9PT1lWzJdJiYoZVszXT0iICIrZVszXSsiICIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09ZVsxXS5zbGljZSgwLDMpPyhlWzNdfHxhdC5lcnJvcihlWzBdKSxlWzRdPSsoZVs0XT9lWzVdKyhlWzZdfHwxKToyKigiZXZlbiI9PT1lWzNdfHwib2RkIj09PWVbM10pKSxlWzVdPSsoZVs3XStlWzhdfHwib2RkIj09PWVbM10pKTplWzNdJiZhdC5lcnJvcihlWzBdKSxlfSxQU0VVRE86ZnVuY3Rpb24oZSl7dmFyIG4scj0hZVs1XSYmZVsyXTtyZXR1cm4gUS5DSElMRC50ZXN0KGVbMF0pP251bGw6KGVbM10mJmVbNF0hPT10P2VbMl09ZVs0XTpyJiZKLnRlc3QocikmJihuPW10KHIsITApKSYmKG49ci5pbmRleE9mKCIpIixyLmxlbmd0aC1uKS1yLmxlbmd0aCkmJihlWzBdPWVbMF0uc2xpY2UoMCxuKSxlWzJdPXIuc2xpY2UoMCxuKSksZS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShydCxpdCkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1lP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10fX0sQ0xBU1M6ZnVuY3Rpb24oZSl7dmFyIHQ9TltlKyIgIl07cmV0dXJuIHR8fCh0PVJlZ0V4cCgiKF58IitQKyIpIitlKyIoIitQKyJ8JCkiKSkmJk4oZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KCJzdHJpbmciPT10eXBlb2YgZS5jbGFzc05hbWUmJmUuY2xhc3NOYW1lfHx0eXBlb2YgZS5nZXRBdHRyaWJ1dGUhPT1qJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgaT1hdC5hdHRyKHIsZSk7cmV0dXJuIG51bGw9PWk/IiE9Ij09PXQ6dD8oaSs9IiIsIj0iPT09dD9pPT09bjoiIT0iPT09dD9pIT09bjoiXj0iPT09dD9uJiYwPT09aS5pbmRleE9mKG4pOiIqPSI9PT10P24mJmkuaW5kZXhPZihuKT4tMToiJD0iPT09dD9uJiZpLnNsaWNlKC1uLmxlbmd0aCk9PT1uOiJ+PSI9PT10PygiICIraSsiICIpLmluZGV4T2Yobik+LTE6Inw9Ij09PXQ/aT09PW58fGkuc2xpY2UoMCxuLmxlbmd0aCsxKT09PW4rIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG89Im50aCIhPT1lLnNsaWNlKDAsMyksYT0ibGFzdCIhPT1lLnNsaWNlKC00KSxzPSJvZi10eXBlIj09PXQ7cmV0dXJuIDE9PT1yJiYwPT09aT9mdW5jdGlvbihlKXtyZXR1cm4hIWUucGFyZW50Tm9kZX06ZnVuY3Rpb24odCxuLGwpe3ZhciB1LGMscCxmLGQsaCxnPW8hPT1hPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIsbT10LnBhcmVudE5vZGUseT1zJiZ0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksdj0hbCYmIXM7aWYobSl7aWYobyl7d2hpbGUoZyl7cD10O3doaWxlKHA9cFtnXSlpZihzP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXk6MT09PXAubm9kZVR5cGUpcmV0dXJuITE7aD1nPSJvbmx5Ij09PWUmJiFoJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKGg9W2E/bS5maXJzdENoaWxkOm0ubGFzdENoaWxkXSxhJiZ2KXtjPW1bYl18fChtW2JdPXt9KSx1PWNbZV18fFtdLGQ9dVswXT09PVQmJnVbMV0sZj11WzBdPT09VCYmdVsyXSxwPWQmJm0uY2hpbGROb2Rlc1tkXTt3aGlsZShwPSsrZCYmcCYmcFtnXXx8KGY9ZD0wKXx8aC5wb3AoKSlpZigxPT09cC5ub2RlVHlwZSYmKytmJiZwPT09dCl7Y1tlXT1bVCxkLGZdO2JyZWFrfX1lbHNlIGlmKHYmJih1PSh0W2JdfHwodFtiXT17fSkpW2VdKSYmdVswXT09PVQpZj11WzFdO2Vsc2Ugd2hpbGUocD0rK2QmJnAmJnBbZ118fChmPWQ9MCl8fGgucG9wKCkpaWYoKHM/cC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09eToxPT09cC5ub2RlVHlwZSkmJisrZiYmKHYmJigocFtiXXx8KHBbYl09e30pKVtlXT1bVCxmXSkscD09PXQpKWJyZWFrO3JldHVybiBmLT1pLGY9PT1yfHwwPT09ZiVyJiZmL3I+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1vLnBzZXVkb3NbZV18fG8uc2V0RmlsdGVyc1tlLnRvTG93ZXJDYXNlKCldfHxhdC5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2UpO3JldHVybiByW2JdP3IodCk6ci5sZW5ndGg+MT8obj1bZSxlLCIiLHRdLG8uc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShlLnRvTG93ZXJDYXNlKCkpP2x0KGZ1bmN0aW9uKGUsbil7dmFyIGksbz1yKGUsdCksYT1vLmxlbmd0aDt3aGlsZShhLS0paT1GLmNhbGwoZSxvW2FdKSxlW2ldPSEobltpXT1vW2FdKX0pOmZ1bmN0aW9uKGUpe3JldHVybiByKGUsMCxuKX0pOnJ9fSxwc2V1ZG9zOntub3Q6bHQoZnVuY3Rpb24oZSl7dmFyIHQ9W10sbj1bXSxyPWwoZS5yZXBsYWNlKHosIiQxIikpO3JldHVybiByW2JdP2x0KGZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLGE9cihlLG51bGwsaSxbXSkscz1lLmxlbmd0aDt3aGlsZShzLS0pKG89YVtzXSkmJihlW3NdPSEodFtzXT1vKSl9KTpmdW5jdGlvbihlLGksbyl7cmV0dXJuIHRbMF09ZSxyKHQsbnVsbCxvLG4pLCFuLnBvcCgpfX0pLGhhczpsdChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGF0KGUsdCkubGVuZ3RoPjB9fSksY29udGFpbnM6bHQoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybih0LnRleHRDb250ZW50fHx0LmlubmVyVGV4dHx8YSh0KSkuaW5kZXhPZihlKT4tMX19KSxsYW5nOmx0KGZ1bmN0aW9uKGUpe3JldHVybiBHLnRlc3QoZXx8IiIpfHxhdC5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIitlKSxlPWUucmVwbGFjZShydCxpdCkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbih0KXt2YXIgbjtkbyBpZihuPWg/dC5sYW5nOnQuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHx0LmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBuPW4udG9Mb3dlckNhc2UoKSxuPT09ZXx8MD09PW4uaW5kZXhPZihlKyItIik7d2hpbGUoKHQ9dC5wYXJlbnROb2RlKSYmMT09PXQubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbih0KXt2YXIgbj1lLmxvY2F0aW9uJiZlLmxvY2F0aW9uLmhhc2g7cmV0dXJuIG4mJm4uc2xpY2UoMSk9PT10LmlkfSxyb290OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09ZH0sZm9jdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1mLmFjdGl2ZUVsZW1lbnQmJighZi5oYXNGb2N1c3x8Zi5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmISFlLmNoZWNrZWR8fCJvcHRpb24iPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxlLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVOYW1lPiJAInx8Mz09PWUubm9kZVR5cGV8fDQ9PT1lLm5vZGVUeXBlKXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIW8ucHNldWRvcy5lbXB0eShlKX0saGVhZGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0dC50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gZXQudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8dC50b0xvd2VyQ2FzZSgpPT09ZS50eXBlKX0sZmlyc3Q6aHQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Omh0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTpodChmdW5jdGlvbihlLHQsbil7cmV0dXJuWzA+bj9uK3Q6bl19KSxldmVuOmh0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MDtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpodChmdW5jdGlvbihlLHQpe3ZhciBuPTE7Zm9yKDt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7LS1yPj0wOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7dD4rK3I7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0sby5wc2V1ZG9zLm50aD1vLnBzZXVkb3MuZXE7Zm9yKG4gaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pby5wc2V1ZG9zW25dPWZ0KG4pO2ZvcihuIGlue3N1Ym1pdDohMCxyZXNldDohMH0pby5wc2V1ZG9zW25dPWR0KG4pO2Z1bmN0aW9uIGd0KCl7fWd0LnByb3RvdHlwZT1vLmZpbHRlcnM9by5wc2V1ZG9zLG8uc2V0RmlsdGVycz1uZXcgZ3Q7ZnVuY3Rpb24gbXQoZSx0KXt2YXIgbixyLGksYSxzLGwsdSxjPWtbZSsiICJdO2lmKGMpcmV0dXJuIHQ/MDpjLnNsaWNlKDApO3M9ZSxsPVtdLHU9by5wcmVGaWx0ZXI7d2hpbGUocyl7KCFufHwocj1YLmV4ZWMocykpKSYmKHImJihzPXMuc2xpY2UoclswXS5sZW5ndGgpfHxzKSxsLnB1c2goaT1bXSkpLG49ITEsKHI9VS5leGVjKHMpKSYmKG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOnJbMF0ucmVwbGFjZSh6LCIgIil9KSxzPXMuc2xpY2Uobi5sZW5ndGgpKTtmb3IoYSBpbiBvLmZpbHRlcikhKHI9UVthXS5leGVjKHMpKXx8dVthXSYmIShyPXVbYV0ocikpfHwobj1yLnNoaWZ0KCksaS5wdXNoKHt2YWx1ZTpuLHR5cGU6YSxtYXRjaGVzOnJ9KSxzPXMuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9zLmxlbmd0aDpzP2F0LmVycm9yKGUpOmsoZSxsKS5zbGljZSgwKX1mdW5jdGlvbiB5dChlKXt2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiB2dChlLHQsbil7dmFyIHI9dC5kaXIsbz1uJiYicGFyZW50Tm9kZSI9PT1yLGE9QysrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixpKXt3aGlsZSh0PXRbcl0paWYoMT09PXQubm9kZVR5cGV8fG8pcmV0dXJuIGUodCxuLGkpfTpmdW5jdGlvbih0LG4scyl7dmFyIGwsdSxjLHA9VCsiICIrYTtpZihzKXt3aGlsZSh0PXRbcl0paWYoKDE9PT10Lm5vZGVUeXBlfHxvKSYmZSh0LG4scykpcmV0dXJuITB9ZWxzZSB3aGlsZSh0PXRbcl0paWYoMT09PXQubm9kZVR5cGV8fG8paWYoYz10W2JdfHwodFtiXT17fSksKHU9Y1tyXSkmJnVbMF09PT1wKXtpZigobD11WzFdKT09PSEwfHxsPT09aSlyZXR1cm4gbD09PSEwfWVsc2UgaWYodT1jW3JdPVtwXSx1WzFdPWUodCxuLHMpfHxpLHVbMV09PT0hMClyZXR1cm4hMH19ZnVuY3Rpb24gYnQoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24geHQoZSx0LG4scixpKXt2YXIgbyxhPVtdLHM9MCxsPWUubGVuZ3RoLHU9bnVsbCE9dDtmb3IoO2w+cztzKyspKG89ZVtzXSkmJighbnx8bihvLHIsaSkpJiYoYS5wdXNoKG8pLHUmJnQucHVzaChzKSk7cmV0dXJuIGF9ZnVuY3Rpb24gd3QoZSx0LG4scixpLG8pe3JldHVybiByJiYhcltiXSYmKHI9d3QocikpLGkmJiFpW2JdJiYoaT13dChpLG8pKSxsdChmdW5jdGlvbihvLGEscyxsKXt2YXIgdSxjLHAsZj1bXSxkPVtdLGg9YS5sZW5ndGgsZz1vfHxOdCh0fHwiKiIscy5ub2RlVHlwZT9bc106cyxbXSksbT0hZXx8IW8mJnQ/Zzp4dChnLGYsZSxzLGwpLHk9bj9pfHwobz9lOmh8fHIpP1tdOmE6bTtpZihuJiZuKG0seSxzLGwpLHIpe3U9eHQoeSxkKSxyKHUsW10scyxsKSxjPXUubGVuZ3RoO3doaWxlKGMtLSkocD11W2NdKSYmKHlbZFtjXV09IShtW2RbY11dPXApKX1pZihvKXtpZihpfHxlKXtpZihpKXt1PVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiZ1LnB1c2gobVtjXT1wKTtpKG51bGwseT1bXSx1LGwpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiYodT1pP0YuY2FsbChvLHApOmZbY10pPi0xJiYob1t1XT0hKGFbdV09cCkpfX1lbHNlIHk9eHQoeT09PWE/eS5zcGxpY2UoaCx5Lmxlbmd0aCk6eSksaT9pKG51bGwsYSx5LGwpOk0uYXBwbHkoYSx5KX0pfWZ1bmN0aW9uIFR0KGUpe3ZhciB0LG4scixpPWUubGVuZ3RoLGE9by5yZWxhdGl2ZVtlWzBdLnR5cGVdLHM9YXx8by5yZWxhdGl2ZVsiICJdLGw9YT8xOjAsYz12dChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LHMsITApLHA9dnQoZnVuY3Rpb24oZSl7cmV0dXJuIEYuY2FsbCh0LGUpPi0xfSxzLCEwKSxmPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIWEmJihyfHxuIT09dSl8fCgodD1uKS5ub2RlVHlwZT9jKGUsbixyKTpwKGUsbixyKSl9XTtmb3IoO2k+bDtsKyspaWYobj1vLnJlbGF0aXZlW2VbbF0udHlwZV0pZj1bdnQoYnQoZiksbildO2Vsc2V7aWYobj1vLmZpbHRlcltlW2xdLnR5cGVdLmFwcGx5KG51bGwsZVtsXS5tYXRjaGVzKSxuW2JdKXtmb3Iocj0rK2w7aT5yO3IrKylpZihvLnJlbGF0aXZlW2Vbcl0udHlwZV0pYnJlYWs7cmV0dXJuIHd0KGw+MSYmYnQoZiksbD4xJiZ5dChlLnNsaWNlKDAsbC0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWVbbC0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKHosIiQxIiksbixyPmwmJlR0KGUuc2xpY2UobCxyKSksaT5yJiZUdChlPWUuc2xpY2UocikpLGk+ciYmeXQoZSkpfWYucHVzaChuKX1yZXR1cm4gYnQoZil9ZnVuY3Rpb24gQ3QoZSx0KXt2YXIgbj0wLHI9dC5sZW5ndGg+MCxhPWUubGVuZ3RoPjAscz1mdW5jdGlvbihzLGwsYyxwLGQpe3ZhciBoLGcsbSx5PVtdLHY9MCxiPSIwIix4PXMmJltdLHc9bnVsbCE9ZCxDPXUsTj1zfHxhJiZvLmZpbmQuVEFHKCIqIixkJiZsLnBhcmVudE5vZGV8fGwpLGs9VCs9bnVsbD09Qz8xOk1hdGgucmFuZG9tKCl8fC4xO2Zvcih3JiYodT1sIT09ZiYmbCxpPW4pO251bGwhPShoPU5bYl0pO2IrKyl7aWYoYSYmaCl7Zz0wO3doaWxlKG09ZVtnKytdKWlmKG0oaCxsLGMpKXtwLnB1c2goaCk7YnJlYWt9dyYmKFQ9ayxpPSsrbil9ciYmKChoPSFtJiZoKSYmdi0tLHMmJngucHVzaChoKSl9aWYodis9YixyJiZiIT09dil7Zz0wO3doaWxlKG09dFtnKytdKW0oeCx5LGwsYyk7aWYocyl7aWYodj4wKXdoaWxlKGItLSl4W2JdfHx5W2JdfHwoeVtiXT1xLmNhbGwocCkpO3k9eHQoeSl9TS5hcHBseShwLHkpLHcmJiFzJiZ5Lmxlbmd0aD4wJiZ2K3QubGVuZ3RoPjEmJmF0LnVuaXF1ZVNvcnQocCl9cmV0dXJuIHcmJihUPWssdT1DKSx4fTtyZXR1cm4gcj9sdChzKTpzfWw9YXQuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPUVbZSsiICJdO2lmKCFvKXt0fHwodD1tdChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pbz1UdCh0W25dKSxvW2JdP3IucHVzaChvKTppLnB1c2gobyk7bz1FKGUsQ3QoaSxyKSl9cmV0dXJuIG99O2Z1bmN0aW9uIE50KGUsdCxuKXt2YXIgcj0wLGk9dC5sZW5ndGg7Zm9yKDtpPnI7cisrKWF0KGUsdFtyXSxuKTtyZXR1cm4gbn1mdW5jdGlvbiBrdChlLHQsbixpKXt2YXIgYSxzLHUsYyxwLGY9bXQoZSk7aWYoIWkmJjE9PT1mLmxlbmd0aCl7aWYocz1mWzBdPWZbMF0uc2xpY2UoMCkscy5sZW5ndGg+MiYmIklEIj09PSh1PXNbMF0pLnR5cGUmJnIuZ2V0QnlJZCYmOT09PXQubm9kZVR5cGUmJmgmJm8ucmVsYXRpdmVbc1sxXS50eXBlXSl7aWYodD0oby5maW5kLklEKHUubWF0Y2hlc1swXS5yZXBsYWNlKHJ0LGl0KSx0KXx8W10pWzBdLCF0KXJldHVybiBuO2U9ZS5zbGljZShzLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1hPVEubmVlZHNDb250ZXh0LnRlc3QoZSk/MDpzLmxlbmd0aDt3aGlsZShhLS0pe2lmKHU9c1thXSxvLnJlbGF0aXZlW2M9dS50eXBlXSlicmVhaztpZigocD1vLmZpbmRbY10pJiYoaT1wKHUubWF0Y2hlc1swXS5yZXBsYWNlKHJ0LGl0KSxWLnRlc3Qoc1swXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0KSkpe2lmKHMuc3BsaWNlKGEsMSksZT1pLmxlbmd0aCYmeXQocyksIWUpcmV0dXJuIE0uYXBwbHkobixpKSxuO2JyZWFrfX19cmV0dXJuIGwoZSxmKShpLHQsIWgsbixWLnRlc3QoZSkpLG59ci5zb3J0U3RhYmxlPWIuc3BsaXQoIiIpLnNvcnQoQSkuam9pbigiIik9PT1iLHIuZGV0ZWN0RHVwbGljYXRlcz1TLHAoKSxyLnNvcnREZXRhY2hlZD11dChmdW5jdGlvbihlKXtyZXR1cm4gMSZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGYuY3JlYXRlRWxlbWVudCgiZGl2IikpfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8Y3QoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gcj90OmUuZ2V0QXR0cmlidXRlKG4sInR5cGUiPT09bi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxyLmF0dHJpYnV0ZXMmJnV0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGN0KCJ2YWx1ZSIsZnVuY3Rpb24oZSxuLHIpe3JldHVybiByfHwiaW5wdXQiIT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3Q6ZS5kZWZhdWx0VmFsdWV9KSx1dChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIil9KXx8Y3QoQixmdW5jdGlvbihlLG4scil7dmFyIGk7cmV0dXJuIHI/dDooaT1lLmdldEF0dHJpYnV0ZU5vZGUobikpJiZpLnNwZWNpZmllZD9pLnZhbHVlOmVbbl09PT0hMD9uLnRvTG93ZXJDYXNlKCk6bnVsbH0pLHguZmluZD1hdCx4LmV4cHI9YXQuc2VsZWN0b3JzLHguZXhwclsiOiJdPXguZXhwci5wc2V1ZG9zLHgudW5pcXVlPWF0LnVuaXF1ZVNvcnQseC50ZXh0PWF0LmdldFRleHQseC5pc1hNTERvYz1hdC5pc1hNTCx4LmNvbnRhaW5zPWF0LmNvbnRhaW5zfShlKTt2YXIgTz17fTtmdW5jdGlvbiBGKGUpe3ZhciB0PU9bZV09e307cmV0dXJuIHguZWFjaChlLm1hdGNoKFQpfHxbXSxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KSx0fXguQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9InN0cmluZyI9PXR5cGVvZiBlP09bZV18fEYoZSk6eC5leHRlbmQoe30sZSk7dmFyIG4scixpLG8sYSxzLGw9W10sdT0hZS5vbmNlJiZbXSxjPWZ1bmN0aW9uKHQpe2ZvcihyPWUubWVtb3J5JiZ0LGk9ITAsYT1zfHwwLHM9MCxvPWwubGVuZ3RoLG49ITA7bCYmbz5hO2ErKylpZihsW2FdLmFwcGx5KHRbMF0sdFsxXSk9PT0hMSYmZS5zdG9wT25GYWxzZSl7cj0hMTticmVha31uPSExLGwmJih1P3UubGVuZ3RoJiZjKHUuc2hpZnQoKSk6cj9sPVtdOnAuZGlzYWJsZSgpKX0scD17YWRkOmZ1bmN0aW9uKCl7aWYobCl7dmFyIHQ9bC5sZW5ndGg7KGZ1bmN0aW9uIGkodCl7eC5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj14LnR5cGUobik7ImZ1bmN0aW9uIj09PXI/ZS51bmlxdWUmJnAuaGFzKG4pfHxsLnB1c2gobik6biYmbi5sZW5ndGgmJiJzdHJpbmciIT09ciYmaShuKX0pfSkoYXJndW1lbnRzKSxuP289bC5sZW5ndGg6ciYmKHM9dCxjKHIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGwmJnguZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgcjt3aGlsZSgocj14LmluQXJyYXkodCxsLHIpKT4tMSlsLnNwbGljZShyLDEpLG4mJihvPj1yJiZvLS0sYT49ciYmYS0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT94LmluQXJyYXkoZSxsKT4tMTohKCFsfHwhbC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBsPVtdLG89MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGw9dT1yPXQsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbH0sbG9jazpmdW5jdGlvbigpe3JldHVybiB1PXQscnx8cC5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIXV9LGZpcmVXaXRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIWx8fGkmJiF1fHwodD10fHxbXSx0PVtlLHQuc2xpY2U/dC5zbGljZSgpOnRdLG4/dS5wdXNoKHQpOmModCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gcC5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWl9fTtyZXR1cm4gcH0seC5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciB0PVtbInJlc29sdmUiLCJkb25lIix4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLHguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZWplY3RlZCJdLFsibm90aWZ5IiwicHJvZ3Jlc3MiLHguQ2FsbGJhY2tzKCJtZW1vcnkiKV1dLG49InBlbmRpbmciLHI9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG59LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBpLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm4geC5EZWZlcnJlZChmdW5jdGlvbihuKXt4LmVhY2godCxmdW5jdGlvbih0LG8pe3ZhciBhPW9bMF0scz14LmlzRnVuY3Rpb24oZVt0XSkmJmVbdF07aVtvWzFdXShmdW5jdGlvbigpe3ZhciBlPXMmJnMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2UmJnguaXNGdW5jdGlvbihlLnByb21pc2UpP2UucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSk6blthKyJXaXRoIl0odGhpcz09PXI/bi5wcm9taXNlKCk6dGhpcyxzP1tlXTphcmd1bWVudHMpfSl9KSxlPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWU/eC5leHRlbmQoZSxyKTpyfX0saT17fTtyZXR1cm4gci5waXBlPXIudGhlbix4LmVhY2godCxmdW5jdGlvbihlLG8pe3ZhciBhPW9bMl0scz1vWzNdO3Jbb1sxXV09YS5hZGQscyYmYS5hZGQoZnVuY3Rpb24oKXtuPXN9LHRbMV5lXVsyXS5kaXNhYmxlLHRbMl1bMl0ubG9jayksaVtvWzBdXT1mdW5jdGlvbigpe3JldHVybiBpW29bMF0rIldpdGgiXSh0aGlzPT09aT9yOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxpW29bMF0rIldpdGgiXT1hLmZpcmVXaXRofSksci5wcm9taXNlKGkpLGUmJmUuY2FsbChpLGkpLGl9LHdoZW46ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPWcuY2FsbChhcmd1bWVudHMpLHI9bi5sZW5ndGgsaT0xIT09cnx8ZSYmeC5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/cjowLG89MT09PWk/ZTp4LkRlZmVycmVkKCksYT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3RbZV09dGhpcyxuW2VdPWFyZ3VtZW50cy5sZW5ndGg+MT9nLmNhbGwoYXJndW1lbnRzKTpyLG49PT1zP28ubm90aWZ5V2l0aCh0LG4pOi0taXx8by5yZXNvbHZlV2l0aCh0LG4pfX0scyxsLHU7aWYocj4xKWZvcihzPUFycmF5KHIpLGw9QXJyYXkociksdT1BcnJheShyKTtyPnQ7dCsrKW5bdF0mJnguaXNGdW5jdGlvbihuW3RdLnByb21pc2UpP25bdF0ucHJvbWlzZSgpLmRvbmUoYSh0LHUsbikpLmZhaWwoby5yZWplY3QpLnByb2dyZXNzKGEodCxsLHMpKTotLWk7cmV0dXJuIGl8fG8ucmVzb2x2ZVdpdGgodSxuKSxvLnByb21pc2UoKX19KSx4LnN1cHBvcnQ9ZnVuY3Rpb24odCl7dmFyIG4scixvLHMsbCx1LGMscCxmLGQ9YS5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZihkLnNldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIiwidCIpLGQuaW5uZXJIVE1MPSIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iLG49ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpfHxbXSxyPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSwhcnx8IXIuc3R5bGV8fCFuLmxlbmd0aClyZXR1cm4gdDtzPWEuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksdT1zLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpLG89ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXSxyLnN0eWxlLmNzc1RleHQ9InRvcDoxcHg7ZmxvYXQ6bGVmdDtvcGFjaXR5Oi41Iix0LmdldFNldEF0dHJpYnV0ZT0idCIhPT1kLmNsYXNzTmFtZSx0LmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1kLmZpcnN0Q2hpbGQubm9kZVR5cGUsdC50Ym9keT0hZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsdC5odG1sU2VyaWFsaXplPSEhZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCx0LnN0eWxlPS90b3AvLnRlc3Qoci5nZXRBdHRyaWJ1dGUoInN0eWxlIikpLHQuaHJlZk5vcm1hbGl6ZWQ9Ii9hIj09PXIuZ2V0QXR0cmlidXRlKCJocmVmIiksdC5vcGFjaXR5PS9eMC41Ly50ZXN0KHIuc3R5bGUub3BhY2l0eSksdC5jc3NGbG9hdD0hIXIuc3R5bGUuY3NzRmxvYXQsdC5jaGVja09uPSEhby52YWx1ZSx0Lm9wdFNlbGVjdGVkPXUuc2VsZWN0ZWQsdC5lbmN0eXBlPSEhYS5jcmVhdGVFbGVtZW50KCJmb3JtIikuZW5jdHlwZSx0Lmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09YS5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCx0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9ITEsdC5zaHJpbmtXcmFwQmxvY2tzPSExLHQucGl4ZWxQb3NpdGlvbj0hMSx0LmRlbGV0ZUV4cGFuZG89ITAsdC5ub0Nsb25lRXZlbnQ9ITAsdC5yZWxpYWJsZU1hcmdpblJpZ2h0PSEwLHQuYm94U2l6aW5nUmVsaWFibGU9ITAsby5jaGVja2VkPSEwLHQubm9DbG9uZUNoZWNrZWQ9by5jbG9uZU5vZGUoITApLmNoZWNrZWQscy5kaXNhYmxlZD0hMCx0Lm9wdERpc2FibGVkPSF1LmRpc2FibGVkO3RyeXtkZWxldGUgZC50ZXN0fWNhdGNoKGgpe3QuZGVsZXRlRXhwYW5kbz0hMX1vPWEuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxvLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSx0LmlucHV0PSIiPT09by5nZXRBdHRyaWJ1dGUoInZhbHVlIiksby52YWx1ZT0idCIsby5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLHQucmFkaW9WYWx1ZT0idCI9PT1vLnZhbHVlLG8uc2V0QXR0cmlidXRlKCJjaGVja2VkIiwidCIpLG8uc2V0QXR0cmlidXRlKCJuYW1lIiwidCIpLGw9YS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbC5hcHBlbmRDaGlsZChvKSx0LmFwcGVuZENoZWNrZWQ9by5jaGVja2VkLHQuY2hlY2tDbG9uZT1sLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxkLmF0dGFjaEV2ZW50JiYoZC5hdHRhY2hFdmVudCgib25jbGljayIsZnVuY3Rpb24oKXt0Lm5vQ2xvbmVFdmVudD0hMX0pLGQuY2xvbmVOb2RlKCEwKS5jbGljaygpKTtmb3IoZiBpbntzdWJtaXQ6ITAsY2hhbmdlOiEwLGZvY3VzaW46ITB9KWQuc2V0QXR0cmlidXRlKGM9Im9uIitmLCJ0IiksdFtmKyJCdWJibGVzIl09YyBpbiBlfHxkLmF0dHJpYnV0ZXNbY10uZXhwYW5kbz09PSExO2Quc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IixkLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIsdC5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWQuc3R5bGUuYmFja2dyb3VuZENsaXA7Zm9yKGYgaW4geCh0KSlicmVhaztyZXR1cm4gdC5vd25MYXN0PSIwIiE9PWYseChmdW5jdGlvbigpe3ZhciBuLHIsbyxzPSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7IixsPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTtsJiYobj1hLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG4uc3R5bGUuY3NzVGV4dD0iYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHgiLGwuYXBwZW5kQ2hpbGQobikuYXBwZW5kQ2hpbGQoZCksZC5pbm5lckhUTUw9Ijx0YWJsZT48dHI+PHRkPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT4iLG89ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKSxvWzBdLnN0eWxlLmNzc1RleHQ9InBhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MDtkaXNwbGF5Om5vbmUiLHA9MD09PW9bMF0ub2Zmc2V0SGVpZ2h0LG9bMF0uc3R5bGUuZGlzcGxheT0iIixvWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLHQucmVsaWFibGVIaWRkZW5PZmZzZXRzPXAmJjA9PT1vWzBdLm9mZnNldEhlaWdodCxkLmlubmVySFRNTD0iIixkLnN0eWxlLmNzc1RleHQ9ImJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElOyIseC5zd2FwKGwsbnVsbCE9bC5zdHlsZS56b29tP3t6b29tOjF9Ont9LGZ1bmN0aW9uKCl7dC5ib3hTaXppbmc9ND09PWQub2Zmc2V0V2lkdGh9KSxlLmdldENvbXB1dGVkU3R5bGUmJih0LnBpeGVsUG9zaXRpb249IjElIiE9PShlLmdldENvbXB1dGVkU3R5bGUoZCxudWxsKXx8e30pLnRvcCx0LmJveFNpemluZ1JlbGlhYmxlPSI0cHgiPT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShkLG51bGwpfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxyPWQuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KCJkaXYiKSksci5zdHlsZS5jc3NUZXh0PWQuc3R5bGUuY3NzVGV4dD1zLHIuc3R5bGUubWFyZ2luUmlnaHQ9ci5zdHlsZS53aWR0aD0iMCIsZC5zdHlsZS53aWR0aD0iMXB4Iix0LnJlbGlhYmxlTWFyZ2luUmlnaHQ9IXBhcnNlRmxvYXQoKGUuZ2V0Q29tcHV0ZWRTdHlsZShyLG51bGwpfHx7fSkubWFyZ2luUmlnaHQpKSx0eXBlb2YgZC5zdHlsZS56b29tIT09aSYmKGQuaW5uZXJIVE1MPSIiLGQuc3R5bGUuY3NzVGV4dD1zKyJ3aWR0aDoxcHg7cGFkZGluZzoxcHg7ZGlzcGxheTppbmxpbmU7em9vbToxIix0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9Mz09PWQub2Zmc2V0V2lkdGgsZC5zdHlsZS5kaXNwbGF5PSJibG9jayIsZC5pbm5lckhUTUw9IjxkaXY+PC9kaXY+IixkLmZpcnN0Q2hpbGQuc3R5bGUud2lkdGg9IjVweCIsdC5zaHJpbmtXcmFwQmxvY2tzPTMhPT1kLm9mZnNldFdpZHRoLHQuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmKGwuc3R5bGUuem9vbT0xKSksbC5yZW1vdmVDaGlsZChuKSxuPWQ9bz1yPW51bGwpfSksbj1zPWw9dT1yPW89bnVsbCx0Cn0oe30pO3ZhciBCPS8oPzpce1tcc1xTXSpcfXxcW1tcc1xTXSpcXSkkLyxQPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUihlLG4scixpKXtpZih4LmFjY2VwdERhdGEoZSkpe3ZhciBvLGEscz14LmV4cGFuZG8sbD1lLm5vZGVUeXBlLHU9bD94LmNhY2hlOmUsYz1sP2Vbc106ZVtzXSYmcztpZihjJiZ1W2NdJiYoaXx8dVtjXS5kYXRhKXx8ciE9PXR8fCJzdHJpbmciIT10eXBlb2YgbilyZXR1cm4gY3x8KGM9bD9lW3NdPXAucG9wKCl8fHguZ3VpZCsrOnMpLHVbY118fCh1W2NdPWw/e306e3RvSlNPTjp4Lm5vb3B9KSwoIm9iamVjdCI9PXR5cGVvZiBufHwiZnVuY3Rpb24iPT10eXBlb2YgbikmJihpP3VbY109eC5leHRlbmQodVtjXSxuKTp1W2NdLmRhdGE9eC5leHRlbmQodVtjXS5kYXRhLG4pKSxhPXVbY10saXx8KGEuZGF0YXx8KGEuZGF0YT17fSksYT1hLmRhdGEpLHIhPT10JiYoYVt4LmNhbWVsQ2FzZShuKV09ciksInN0cmluZyI9PXR5cGVvZiBuPyhvPWFbbl0sbnVsbD09byYmKG89YVt4LmNhbWVsQ2FzZShuKV0pKTpvPWEsb319ZnVuY3Rpb24gVyhlLHQsbil7aWYoeC5hY2NlcHREYXRhKGUpKXt2YXIgcixpLG89ZS5ub2RlVHlwZSxhPW8/eC5jYWNoZTplLHM9bz9lW3guZXhwYW5kb106eC5leHBhbmRvO2lmKGFbc10pe2lmKHQmJihyPW4/YVtzXTphW3NdLmRhdGEpKXt4LmlzQXJyYXkodCk/dD10LmNvbmNhdCh4Lm1hcCh0LHguY2FtZWxDYXNlKSk6dCBpbiByP3Q9W3RdOih0PXguY2FtZWxDYXNlKHQpLHQ9dCBpbiByP1t0XTp0LnNwbGl0KCIgIikpLGk9dC5sZW5ndGg7d2hpbGUoaS0tKWRlbGV0ZSByW3RbaV1dO2lmKG4/IUkocik6IXguaXNFbXB0eU9iamVjdChyKSlyZXR1cm59KG58fChkZWxldGUgYVtzXS5kYXRhLEkoYVtzXSkpKSYmKG8/eC5jbGVhbkRhdGEoW2VdLCEwKTp4LnN1cHBvcnQuZGVsZXRlRXhwYW5kb3x8YSE9YS53aW5kb3c/ZGVsZXRlIGFbc106YVtzXT1udWxsKX19fXguZXh0ZW5kKHtjYWNoZTp7fSxub0RhdGE6e2FwcGxldDohMCxlbWJlZDohMCxvYmplY3Q6ImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMCJ9LGhhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5ub2RlVHlwZT94LmNhY2hlW2VbeC5leHBhbmRvXV06ZVt4LmV4cGFuZG9dLCEhZSYmIUkoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBSKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBXKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUihlLHQsbiwhMCl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFcoZSx0LCEwKX0sYWNjZXB0RGF0YTpmdW5jdGlvbihlKXtpZihlLm5vZGVUeXBlJiYxIT09ZS5ub2RlVHlwZSYmOSE9PWUubm9kZVR5cGUpcmV0dXJuITE7dmFyIHQ9ZS5ub2RlTmFtZSYmeC5ub0RhdGFbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtyZXR1cm4hdHx8dCE9PSEwJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3NpZCIpPT09dH19KSx4LmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihlLG4pe3ZhciByLGksbz1udWxsLGE9MCxzPXRoaXNbMF07aWYoZT09PXQpe2lmKHRoaXMubGVuZ3RoJiYobz14LmRhdGEocyksMT09PXMubm9kZVR5cGUmJiF4Ll9kYXRhKHMsInBhcnNlZEF0dHJzIikpKXtmb3Iocj1zLmF0dHJpYnV0ZXM7ci5sZW5ndGg+YTthKyspaT1yW2FdLm5hbWUsMD09PWkuaW5kZXhPZigiZGF0YS0iKSYmKGk9eC5jYW1lbENhc2UoaS5zbGljZSg1KSksJChzLGksb1tpXSkpO3guX2RhdGEocywicGFyc2VkQXR0cnMiLCEwKX1yZXR1cm4gb31yZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5kYXRhKHRoaXMsZSl9KTphcmd1bWVudHMubGVuZ3RoPjE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5kYXRhKHRoaXMsZSxuKX0pOnM/JChzLGUseC5kYXRhKHMsZSkpOm51bGx9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3gucmVtb3ZlRGF0YSh0aGlzLGUpfSl9fSk7ZnVuY3Rpb24gJChlLG4scil7aWYocj09PXQmJjE9PT1lLm5vZGVUeXBlKXt2YXIgaT0iZGF0YS0iK24ucmVwbGFjZShQLCItJDEiKS50b0xvd2VyQ2FzZSgpO2lmKHI9ZS5nZXRBdHRyaWJ1dGUoaSksInN0cmluZyI9PXR5cGVvZiByKXt0cnl7cj0idHJ1ZSI9PT1yPyEwOiJmYWxzZSI9PT1yPyExOiJudWxsIj09PXI/bnVsbDorcisiIj09PXI/K3I6Qi50ZXN0KHIpP3gucGFyc2VKU09OKHIpOnJ9Y2F0Y2gobyl7fXguZGF0YShlLG4scil9ZWxzZSByPXR9cmV0dXJuIHJ9ZnVuY3Rpb24gSShlKXt2YXIgdDtmb3IodCBpbiBlKWlmKCgiZGF0YSIhPT10fHwheC5pc0VtcHR5T2JqZWN0KGVbdF0pKSYmInRvSlNPTiIhPT10KXJldHVybiExO3JldHVybiEwfXguZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLG4scil7dmFyIGk7cmV0dXJuIGU/KG49KG58fCJmeCIpKyJxdWV1ZSIsaT14Ll9kYXRhKGUsbiksciYmKCFpfHx4LmlzQXJyYXkocik/aT14Ll9kYXRhKGUsbix4Lm1ha2VBcnJheShyKSk6aS5wdXNoKHIpKSxpfHxbXSk6dH0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj14LnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPXguX3F1ZXVlSG9va3MoZSx0KSxhPWZ1bmN0aW9uKCl7eC5kZXF1ZXVlKGUsdCl9OyJpbnByb2dyZXNzIj09PWkmJihpPW4uc2hpZnQoKSxyLS0pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxhLG8pKSwhciYmbyYmby5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIHguX2RhdGEoZSxuKXx8eC5fZGF0YShlLG4se2VtcHR5OnguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe3guX3JlbW92ZURhdGEoZSx0KyJxdWV1ZSIpLHguX3JlbW92ZURhdGEoZSxuKX0pfSl9fSkseC5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsbil7dmFyIHI9MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJihuPWUsZT0iZngiLHItLSkscj5hcmd1bWVudHMubGVuZ3RoP3gucXVldWUodGhpc1swXSxlKTpuPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXgucXVldWUodGhpcyxlLG4pO3guX3F1ZXVlSG9va3ModGhpcyxlKSwiZngiPT09ZSYmImlucHJvZ3Jlc3MiIT09dFswXSYmeC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVsYXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT14LmZ4P3guZnguc3BlZWRzW2VdfHxlOmUsdD10fHwiZngiLHRoaXMucXVldWUodCxmdW5jdGlvbih0LG4pe3ZhciByPXNldFRpbWVvdXQodCxlKTtuLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocil9fSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTEsbz14LkRlZmVycmVkKCksYT10aGlzLHM9dGhpcy5sZW5ndGgsbD1mdW5jdGlvbigpey0taXx8by5yZXNvbHZlV2l0aChhLFthXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKG49ZSxlPXQpLGU9ZXx8ImZ4Ijt3aGlsZShzLS0pcj14Ll9kYXRhKGFbc10sZSsicXVldWVIb29rcyIpLHImJnIuZW1wdHkmJihpKyssci5lbXB0eS5hZGQobCkpO3JldHVybiBsKCksby5wcm9taXNlKG4pfX0pO3ZhciB6LFgsVT0vW1x0XHJcblxmXS9nLFY9L1xyL2csWT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSxKPS9eKD86YXxhcmVhKSQvaSxHPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2ksUT14LnN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlLEs9eC5zdXBwb3J0LmlucHV0O3guZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMseC5hdHRyLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt4LnJlbW92ZUF0dHIodGhpcyxlKX0pfSxwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMseC5wcm9wLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiBlPXgucHJvcEZpeFtlXXx8ZSx0aGlzLmVhY2goZnVuY3Rpb24oKXt0cnl7dGhpc1tlXT10LGRlbGV0ZSB0aGlzW2VdfWNhdGNoKG4pe319KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhPTAscz10aGlzLmxlbmd0aCxsPSJzdHJpbmciPT10eXBlb2YgZSYmZTtpZih4LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGwpZm9yKHQ9KGV8fCIiKS5tYXRjaChUKXx8W107cz5hO2ErKylpZihuPXRoaXNbYV0scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKFUsIiAiKToiICIpKXtvPTA7d2hpbGUoaT10W28rK10pMD5yLmluZGV4T2YoIiAiK2krIiAiKSYmKHIrPWkrIiAiKTtuLmNsYXNzTmFtZT14LnRyaW0ocil9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8sYT0wLHM9dGhpcy5sZW5ndGgsbD0wPT09YXJndW1lbnRzLmxlbmd0aHx8InN0cmluZyI9PXR5cGVvZiBlJiZlO2lmKHguaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYobClmb3IodD0oZXx8IiIpLm1hdGNoKFQpfHxbXTtzPmE7YSsrKWlmKG49dGhpc1thXSxyPTE9PT1uLm5vZGVUeXBlJiYobi5jbGFzc05hbWU/KCIgIituLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoVSwiICIpOiIiKSl7bz0wO3doaWxlKGk9dFtvKytdKXdoaWxlKHIuaW5kZXhPZigiICIraSsiICIpPj0wKXI9ci5yZXBsYWNlKCIgIitpKyIgIiwiICIpO24uY2xhc3NOYW1lPWU/eC50cmltKHIpOiIifXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlO3JldHVybiJib29sZWFuIj09dHlwZW9mIHQmJiJzdHJpbmciPT09bj90P3RoaXMuYWRkQ2xhc3MoZSk6dGhpcy5yZW1vdmVDbGFzcyhlKTp4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3godGhpcykudG9nZ2xlQ2xhc3MoZS5jYWxsKHRoaXMsbix0aGlzLmNsYXNzTmFtZSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCJzdHJpbmciPT09bil7dmFyIHQscj0wLG89eCh0aGlzKSxhPWUubWF0Y2goVCl8fFtdO3doaWxlKHQ9YVtyKytdKW8uaGFzQ2xhc3ModCk/by5yZW1vdmVDbGFzcyh0KTpvLmFkZENsYXNzKHQpfWVsc2Uobj09PWl8fCJib29sZWFuIj09PW4pJiYodGhpcy5jbGFzc05hbWUmJnguX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxlPT09ITE/IiI6eC5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihlKXt2YXIgdD0iICIrZSsiICIsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKDtyPm47bisrKWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoIiAiK3RoaXNbbl0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShVLCIgIikuaW5kZXhPZih0KT49MClyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9uKGUpe3ZhciBuLHIsaSxvPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGk9eC5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgbzsxPT09dGhpcy5ub2RlVHlwZSYmKG89aT9lLmNhbGwodGhpcyxuLHgodGhpcykudmFsKCkpOmUsbnVsbD09bz9vPSIiOiJudW1iZXIiPT10eXBlb2Ygbz9vKz0iIjp4LmlzQXJyYXkobykmJihvPXgubWFwKG8sZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSxyPXgudmFsSG9va3NbdGhpcy50eXBlXXx8eC52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHImJiJzZXQiaW4gciYmci5zZXQodGhpcyxvLCJ2YWx1ZSIpIT09dHx8KHRoaXMudmFsdWU9bykpfSk7aWYobylyZXR1cm4gcj14LnZhbEhvb2tzW28udHlwZV18fHgudmFsSG9va3Nbby5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxyJiYiZ2V0ImluIHImJihuPXIuZ2V0KG8sInZhbHVlIikpIT09dD9uOihuPW8udmFsdWUsInN0cmluZyI9PXR5cGVvZiBuP24ucmVwbGFjZShWLCIiKTpudWxsPT1uPyIiOm4pfX19KSx4LmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXguZmluZC5hdHRyKGUsInZhbHVlIik7cmV0dXJuIG51bGwhPXQ/dDplLnRleHR9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHI9ZS5vcHRpb25zLGk9ZS5zZWxlY3RlZEluZGV4LG89InNlbGVjdC1vbmUiPT09ZS50eXBlfHwwPmksYT1vP251bGw6W10scz1vP2krMTpyLmxlbmd0aCxsPTA+aT9zOm8/aTowO2Zvcig7cz5sO2wrKylpZihuPXJbbF0sISghbi5zZWxlY3RlZCYmbCE9PWl8fCh4LnN1cHBvcnQub3B0RGlzYWJsZWQ/bi5kaXNhYmxlZDpudWxsIT09bi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpfHxuLnBhcmVudE5vZGUuZGlzYWJsZWQmJngubm9kZU5hbWUobi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYodD14KG4pLnZhbCgpLG8pcmV0dXJuIHQ7YS5wdXNoKHQpfXJldHVybiBhfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9ZS5vcHRpb25zLG89eC5tYWtlQXJyYXkodCksYT1pLmxlbmd0aDt3aGlsZShhLS0pcj1pW2FdLChyLnNlbGVjdGVkPXguaW5BcnJheSh4KHIpLnZhbCgpLG8pPj0wKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19LGF0dHI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBvLGEscz1lLm5vZGVUeXBlO2lmKGUmJjMhPT1zJiY4IT09cyYmMiE9PXMpcmV0dXJuIHR5cGVvZiBlLmdldEF0dHJpYnV0ZT09PWk/eC5wcm9wKGUsbixyKTooMT09PXMmJnguaXNYTUxEb2MoZSl8fChuPW4udG9Mb3dlckNhc2UoKSxvPXguYXR0ckhvb2tzW25dfHwoeC5leHByLm1hdGNoLmJvb2wudGVzdChuKT9YOnopKSxyPT09dD9vJiYiZ2V0ImluIG8mJm51bGwhPT0oYT1vLmdldChlLG4pKT9hOihhPXguZmluZC5hdHRyKGUsbiksbnVsbD09YT90OmEpOm51bGwhPT1yP28mJiJzZXQiaW4gbyYmKGE9by5zZXQoZSxyLG4pKSE9PXQ/YTooZS5zZXRBdHRyaWJ1dGUobixyKyIiKSxyKTooeC5yZW1vdmVBdHRyKGUsbiksdCkpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPTAsbz10JiZ0Lm1hdGNoKFQpO2lmKG8mJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49b1tpKytdKXI9eC5wcm9wRml4W25dfHxuLHguZXhwci5tYXRjaC5ib29sLnRlc3Qobik/SyYmUXx8IUcudGVzdChuKT9lW3JdPSExOmVbeC5jYW1lbENhc2UoImRlZmF1bHQtIituKV09ZVtyXT0hMTp4LmF0dHIoZSxuLCIiKSxlLnJlbW92ZUF0dHJpYnV0ZShRP246cil9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIXguc3VwcG9ydC5yYWRpb1ZhbHVlJiYicmFkaW8iPT09dCYmeC5ub2RlTmFtZShlLCJpbnB1dCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZSgidHlwZSIsdCksbiYmKGUudmFsdWU9biksdH19fX0scHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9LHByb3A6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYSxzPWUubm9kZVR5cGU7aWYoZSYmMyE9PXMmJjghPT1zJiYyIT09cylyZXR1cm4gYT0xIT09c3x8IXguaXNYTUxEb2MoZSksYSYmKG49eC5wcm9wRml4W25dfHxuLG89eC5wcm9wSG9va3Nbbl0pLHIhPT10P28mJiJzZXQiaW4gbyYmKGk9by5zZXQoZSxyLG4pKSE9PXQ/aTplW25dPXI6byYmImdldCJpbiBvJiZudWxsIT09KGk9by5nZXQoZSxuKSk/aTplW25dfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5maW5kLmF0dHIoZSwidGFiaW5kZXgiKTtyZXR1cm4gdD9wYXJzZUludCh0LDEwKTpZLnRlc3QoZS5ub2RlTmFtZSl8fEoudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6LTF9fX19KSxYPXtzZXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0PT09ITE/eC5yZW1vdmVBdHRyKGUsbik6SyYmUXx8IUcudGVzdChuKT9lLnNldEF0dHJpYnV0ZSghUSYmeC5wcm9wRml4W25dfHxuLG4pOmVbeC5jYW1lbENhc2UoImRlZmF1bHQtIituKV09ZVtuXT0hMCxufX0seC5lYWNoKHguZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGUsbil7dmFyIHI9eC5leHByLmF0dHJIYW5kbGVbbl18fHguZmluZC5hdHRyO3guZXhwci5hdHRySGFuZGxlW25dPUsmJlF8fCFHLnRlc3Qobik/ZnVuY3Rpb24oZSxuLGkpe3ZhciBvPXguZXhwci5hdHRySGFuZGxlW25dLGE9aT90Oih4LmV4cHIuYXR0ckhhbmRsZVtuXT10KSE9cihlLG4saSk/bi50b0xvd2VyQ2FzZSgpOm51bGw7cmV0dXJuIHguZXhwci5hdHRySGFuZGxlW25dPW8sYX06ZnVuY3Rpb24oZSxuLHIpe3JldHVybiByP3Q6ZVt4LmNhbWVsQ2FzZSgiZGVmYXVsdC0iK24pXT9uLnRvTG93ZXJDYXNlKCk6bnVsbH19KSxLJiZRfHwoeC5hdHRySG9va3MudmFsdWU9e3NldDpmdW5jdGlvbihlLG4scil7cmV0dXJuIHgubm9kZU5hbWUoZSwiaW5wdXQiKT8oZS5kZWZhdWx0VmFsdWU9bix0KTp6JiZ6LnNldChlLG4scil9fSksUXx8KHo9e3NldDpmdW5jdGlvbihlLG4scil7dmFyIGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKHIpO3JldHVybiBpfHxlLnNldEF0dHJpYnV0ZU5vZGUoaT1lLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKHIpKSxpLnZhbHVlPW4rPSIiLCJ2YWx1ZSI9PT1yfHxuPT09ZS5nZXRBdHRyaWJ1dGUocik/bjp0fX0seC5leHByLmF0dHJIYW5kbGUuaWQ9eC5leHByLmF0dHJIYW5kbGUubmFtZT14LmV4cHIuYXR0ckhhbmRsZS5jb29yZHM9ZnVuY3Rpb24oZSxuLHIpe3ZhciBpO3JldHVybiByP3Q6KGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pKSYmIiIhPT1pLnZhbHVlP2kudmFsdWU6bnVsbH0seC52YWxIb29rcy5idXR0b249e2dldDpmdW5jdGlvbihlLG4pe3ZhciByPWUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gciYmci5zcGVjaWZpZWQ/ci52YWx1ZTp0fSxzZXQ6ei5zZXR9LHguYXR0ckhvb2tzLmNvbnRlbnRlZGl0YWJsZT17c2V0OmZ1bmN0aW9uKGUsdCxuKXt6LnNldChlLCIiPT09dD8hMTp0LG4pfX0seC5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihlLG4pe3guYXR0ckhvb2tzW25dPXtzZXQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm4iIj09PXI/KGUuc2V0QXR0cmlidXRlKG4sImF1dG8iKSxyKTp0fX19KSkseC5zdXBwb3J0LmhyZWZOb3JtYWxpemVkfHx4LmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oZSx0KXt4LnByb3BIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSh0LDQpfX19KSx4LnN1cHBvcnQuc3R5bGV8fCh4LmF0dHJIb29rcy5zdHlsZT17Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLnN0eWxlLmNzc1RleHR8fHR9LHNldDpmdW5jdGlvbihlLHQpe3JldHVybiBlLnN0eWxlLmNzc1RleHQ9dCsiIn19KSx4LnN1cHBvcnQub3B0U2VsZWN0ZWR8fCh4LnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmKHQuc2VsZWN0ZWRJbmRleCx0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KSxudWxsfX0pLHguZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7eC5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLHguc3VwcG9ydC5lbmN0eXBlfHwoeC5wcm9wRml4LmVuY3R5cGU9ImVuY29kaW5nIikseC5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7eC52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIHguaXNBcnJheShuKT9lLmNoZWNrZWQ9eC5pbkFycmF5KHgoZSkudmFsKCksbik+PTA6dH19LHguc3VwcG9ydC5jaGVja09ufHwoeC52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pO3ZhciBaPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSxldD0vXmtleS8sdHQ9L14oPzptb3VzZXxjb250ZXh0bWVudSl8Y2xpY2svLG50PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxydD0vXihbXi5dKikoPzpcLiguKyl8KSQvO2Z1bmN0aW9uIGl0KCl7cmV0dXJuITB9ZnVuY3Rpb24gb3QoKXtyZXR1cm4hMX1mdW5jdGlvbiBhdCgpe3RyeXtyZXR1cm4gYS5hY3RpdmVFbGVtZW50fWNhdGNoKGUpe319eC5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlLG4scixvLGEpe3ZhciBzLGwsdSxjLHAsZixkLGgsZyxtLHksdj14Ll9kYXRhKGUpO2lmKHYpe3IuaGFuZGxlciYmKGM9cixyPWMuaGFuZGxlcixhPWMuc2VsZWN0b3IpLHIuZ3VpZHx8KHIuZ3VpZD14Lmd1aWQrKyksKGw9di5ldmVudHMpfHwobD12LmV2ZW50cz17fSksKGY9di5oYW5kbGUpfHwoZj12LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHg9PT1pfHxlJiZ4LmV2ZW50LnRyaWdnZXJlZD09PWUudHlwZT90OnguZXZlbnQuZGlzcGF0Y2guYXBwbHkoZi5lbGVtLGFyZ3VtZW50cyl9LGYuZWxlbT1lKSxuPShufHwiIikubWF0Y2goVCl8fFsiIl0sdT1uLmxlbmd0aDt3aGlsZSh1LS0pcz1ydC5leGVjKG5bdV0pfHxbXSxnPXk9c1sxXSxtPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZyYmKHA9eC5ldmVudC5zcGVjaWFsW2ddfHx7fSxnPShhP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxnLHA9eC5ldmVudC5zcGVjaWFsW2ddfHx7fSxkPXguZXh0ZW5kKHt0eXBlOmcsb3JpZ1R5cGU6eSxkYXRhOm8saGFuZGxlcjpyLGd1aWQ6ci5ndWlkLHNlbGVjdG9yOmEsbmVlZHNDb250ZXh0OmEmJnguZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChhKSxuYW1lc3BhY2U6bS5qb2luKCIuIil9LGMpLChoPWxbZ10pfHwoaD1sW2ddPVtdLGguZGVsZWdhdGVDb3VudD0wLHAuc2V0dXAmJnAuc2V0dXAuY2FsbChlLG8sbSxmKSE9PSExfHwoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihnLGYsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9uIitnLGYpKSkscC5hZGQmJihwLmFkZC5jYWxsKGUsZCksZC5oYW5kbGVyLmd1aWR8fChkLmhhbmRsZXIuZ3VpZD1yLmd1aWQpKSxhP2guc3BsaWNlKGguZGVsZWdhdGVDb3VudCsrLDAsZCk6aC5wdXNoKGQpLHguZXZlbnQuZ2xvYmFsW2ddPSEwKTtlPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsbCx1LGMscCxmLGQsaCxnLG09eC5oYXNEYXRhKGUpJiZ4Ll9kYXRhKGUpO2lmKG0mJihjPW0uZXZlbnRzKSl7dD0odHx8IiIpLm1hdGNoKFQpfHxbIiJdLHU9dC5sZW5ndGg7d2hpbGUodS0tKWlmKHM9cnQuZXhlYyh0W3VdKXx8W10sZD1nPXNbMV0saD0oc1syXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQpe3A9eC5ldmVudC5zcGVjaWFsW2RdfHx7fSxkPShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxkLGY9Y1tkXXx8W10scz1zWzJdJiZSZWdFeHAoIihefFxcLikiK2guam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksbD1vPWYubGVuZ3RoO3doaWxlKG8tLSlhPWZbb10sIWkmJmchPT1hLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1hLmd1aWR8fHMmJiFzLnRlc3QoYS5uYW1lc3BhY2UpfHxyJiZyIT09YS5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYS5zZWxlY3Rvcil8fChmLnNwbGljZShvLDEpLGEuc2VsZWN0b3ImJmYuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGUsYSkpO2wmJiFmLmxlbmd0aCYmKHAudGVhcmRvd24mJnAudGVhcmRvd24uY2FsbChlLGgsbS5oYW5kbGUpIT09ITF8fHgucmVtb3ZlRXZlbnQoZSxkLG0uaGFuZGxlKSxkZWxldGUgY1tkXSl9ZWxzZSBmb3IoZCBpbiBjKXguZXZlbnQucmVtb3ZlKGUsZCt0W3VdLG4sciwhMCk7eC5pc0VtcHR5T2JqZWN0KGMpJiYoZGVsZXRlIG0uaGFuZGxlLHguX3JlbW92ZURhdGEoZSwiZXZlbnRzIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihuLHIsaSxvKXt2YXIgcyxsLHUsYyxwLGYsZCxoPVtpfHxhXSxnPXYuY2FsbChuLCJ0eXBlIik/bi50eXBlOm4sbT12LmNhbGwobiwibmFtZXNwYWNlIik/bi5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZih1PWY9aT1pfHxhLDMhPT1pLm5vZGVUeXBlJiY4IT09aS5ub2RlVHlwZSYmIW50LnRlc3QoZyt4LmV2ZW50LnRyaWdnZXJlZCkmJihnLmluZGV4T2YoIi4iKT49MCYmKG09Zy5zcGxpdCgiLiIpLGc9bS5zaGlmdCgpLG0uc29ydCgpKSxsPTA+Zy5pbmRleE9mKCI6IikmJiJvbiIrZyxuPW5beC5leHBhbmRvXT9uOm5ldyB4LkV2ZW50KGcsIm9iamVjdCI9PXR5cGVvZiBuJiZuKSxuLmlzVHJpZ2dlcj1vPzI6MyxuLm5hbWVzcGFjZT1tLmpvaW4oIi4iKSxuLm5hbWVzcGFjZV9yZT1uLm5hbWVzcGFjZT9SZWdFeHAoIihefFxcLikiK20uam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxuLnJlc3VsdD10LG4udGFyZ2V0fHwobi50YXJnZXQ9aSkscj1udWxsPT1yP1tuXTp4Lm1ha2VBcnJheShyLFtuXSkscD14LmV2ZW50LnNwZWNpYWxbZ118fHt9LG98fCFwLnRyaWdnZXJ8fHAudHJpZ2dlci5hcHBseShpLHIpIT09ITEpKXtpZighbyYmIXAubm9CdWJibGUmJiF4LmlzV2luZG93KGkpKXtmb3IoYz1wLmRlbGVnYXRlVHlwZXx8ZyxudC50ZXN0KGMrZyl8fCh1PXUucGFyZW50Tm9kZSk7dTt1PXUucGFyZW50Tm9kZSloLnB1c2godSksZj11O2Y9PT0oaS5vd25lckRvY3VtZW50fHxhKSYmaC5wdXNoKGYuZGVmYXVsdFZpZXd8fGYucGFyZW50V2luZG93fHxlKX1kPTA7d2hpbGUoKHU9aFtkKytdKSYmIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKSluLnR5cGU9ZD4xP2M6cC5iaW5kVHlwZXx8ZyxzPSh4Ll9kYXRhKHUsImV2ZW50cyIpfHx7fSlbbi50eXBlXSYmeC5fZGF0YSh1LCJoYW5kbGUiKSxzJiZzLmFwcGx5KHUscikscz1sJiZ1W2xdLHMmJnguYWNjZXB0RGF0YSh1KSYmcy5hcHBseSYmcy5hcHBseSh1LHIpPT09ITEmJm4ucHJldmVudERlZmF1bHQoKTtpZihuLnR5cGU9ZywhbyYmIW4uaXNEZWZhdWx0UHJldmVudGVkKCkmJighcC5fZGVmYXVsdHx8cC5fZGVmYXVsdC5hcHBseShoLnBvcCgpLHIpPT09ITEpJiZ4LmFjY2VwdERhdGEoaSkmJmwmJmlbZ10mJiF4LmlzV2luZG93KGkpKXtmPWlbbF0sZiYmKGlbbF09bnVsbCkseC5ldmVudC50cmlnZ2VyZWQ9Zzt0cnl7aVtnXSgpfWNhdGNoKHkpe314LmV2ZW50LnRyaWdnZXJlZD10LGYmJihpW2xdPWYpfXJldHVybiBuLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe2U9eC5ldmVudC5maXgoZSk7dmFyIG4scixpLG8sYSxzPVtdLGw9Zy5jYWxsKGFyZ3VtZW50cyksdT0oeC5fZGF0YSh0aGlzLCJldmVudHMiKXx8e30pW2UudHlwZV18fFtdLGM9eC5ldmVudC5zcGVjaWFsW2UudHlwZV18fHt9O2lmKGxbMF09ZSxlLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fGMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGUpIT09ITEpe3M9eC5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsZSx1KSxuPTA7d2hpbGUoKG89c1tuKytdKSYmIWUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZS5jdXJyZW50VGFyZ2V0PW8uZWxlbSxhPTA7d2hpbGUoKGk9by5oYW5kbGVyc1thKytdKSYmIWUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWUubmFtZXNwYWNlX3JlfHxlLm5hbWVzcGFjZV9yZS50ZXN0KGkubmFtZXNwYWNlKSkmJihlLmhhbmRsZU9iaj1pLGUuZGF0YT1pLmRhdGEscj0oKHguZXZlbnQuc3BlY2lhbFtpLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8aS5oYW5kbGVyKS5hcHBseShvLmVsZW0sbCksciE9PXQmJihlLnJlc3VsdD1yKT09PSExJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gYy5wb3N0RGlzcGF0Y2gmJmMucG9zdERpc3BhdGNoLmNhbGwodGhpcyxlKSxlLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvLGEscz1bXSxsPW4uZGVsZWdhdGVDb3VudCx1PWUudGFyZ2V0O2lmKGwmJnUubm9kZVR5cGUmJighZS5idXR0b258fCJjbGljayIhPT1lLnR5cGUpKWZvcig7dSE9dGhpczt1PXUucGFyZW50Tm9kZXx8dGhpcylpZigxPT09dS5ub2RlVHlwZSYmKHUuZGlzYWJsZWQhPT0hMHx8ImNsaWNrIiE9PWUudHlwZSkpe2ZvcihvPVtdLGE9MDtsPmE7YSsrKWk9blthXSxyPWkuc2VsZWN0b3IrIiAiLG9bcl09PT10JiYob1tyXT1pLm5lZWRzQ29udGV4dD94KHIsdGhpcykuaW5kZXgodSk+PTA6eC5maW5kKHIsdGhpcyxudWxsLFt1XSkubGVuZ3RoKSxvW3JdJiZvLnB1c2goaSk7by5sZW5ndGgmJnMucHVzaCh7ZWxlbTp1LGhhbmRsZXJzOm99KX1yZXR1cm4gbi5sZW5ndGg+bCYmcy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6bi5zbGljZShsKX0pLHN9LGZpeDpmdW5jdGlvbihlKXtpZihlW3guZXhwYW5kb10pcmV0dXJuIGU7dmFyIHQsbixyLGk9ZS50eXBlLG89ZSxzPXRoaXMuZml4SG9va3NbaV07c3x8KHRoaXMuZml4SG9va3NbaV09cz10dC50ZXN0KGkpP3RoaXMubW91c2VIb29rczpldC50ZXN0KGkpP3RoaXMua2V5SG9va3M6e30pLHI9cy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChzLnByb3BzKTp0aGlzLnByb3BzLGU9bmV3IHguRXZlbnQobyksdD1yLmxlbmd0aDt3aGlsZSh0LS0pbj1yW3RdLGVbbl09b1tuXTtyZXR1cm4gZS50YXJnZXR8fChlLnRhcmdldD1vLnNyY0VsZW1lbnR8fGEpLDM9PT1lLnRhcmdldC5ub2RlVHlwZSYmKGUudGFyZ2V0PWUudGFyZ2V0LnBhcmVudE5vZGUpLGUubWV0YUtleT0hIWUubWV0YUtleSxzLmZpbHRlcj9zLmZpbHRlcihlLG8pOmV9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1lLndoaWNoJiYoZS53aGljaD1udWxsIT10LmNoYXJDb2RlP3QuY2hhckNvZGU6dC5rZXlDb2RlKSxlfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBmcm9tRWxlbWVudCBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLG8scz1uLmJ1dHRvbixsPW4uZnJvbUVsZW1lbnQ7cmV0dXJuIG51bGw9PWUucGFnZVgmJm51bGwhPW4uY2xpZW50WCYmKGk9ZS50YXJnZXQub3duZXJEb2N1bWVudHx8YSxvPWkuZG9jdW1lbnRFbGVtZW50LHI9aS5ib2R5LGUucGFnZVg9bi5jbGllbnRYKyhvJiZvLnNjcm9sbExlZnR8fHImJnIuc2Nyb2xsTGVmdHx8MCktKG8mJm8uY2xpZW50TGVmdHx8ciYmci5jbGllbnRMZWZ0fHwwKSxlLnBhZ2VZPW4uY2xpZW50WSsobyYmby5zY3JvbGxUb3B8fHImJnIuc2Nyb2xsVG9wfHwwKS0obyYmby5jbGllbnRUb3B8fHImJnIuY2xpZW50VG9wfHwwKSksIWUucmVsYXRlZFRhcmdldCYmbCYmKGUucmVsYXRlZFRhcmdldD1sPT09ZS50YXJnZXQ/bi50b0VsZW1lbnQ6bCksZS53aGljaHx8cz09PXR8fChlLndoaWNoPTEmcz8xOjImcz8zOjQmcz8yOjApLGV9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09YXQoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChlKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1hdCgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp0fSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4geC5ub2RlTmFtZSh0aGlzLCJpbnB1dCIpJiYiY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrPyh0aGlzLmNsaWNrKCksITEpOnR9LF9kZWZhdWx0OmZ1bmN0aW9uKGUpe3JldHVybiB4Lm5vZGVOYW1lKGUudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLnJlc3VsdCE9PXQmJihlLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXguZXh0ZW5kKG5ldyB4LkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7cj94LmV2ZW50LnRyaWdnZXIoaSxudWxsLHQpOnguZXZlbnQuZGlzcGF0Y2guY2FsbCh0LGkpLGkuaXNEZWZhdWx0UHJldmVudGVkKCkmJm4ucHJldmVudERlZmF1bHQoKX19LHgucmVtb3ZlRXZlbnQ9YS5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4sITEpfTpmdW5jdGlvbihlLHQsbil7dmFyIHI9Im9uIit0O2UuZGV0YWNoRXZlbnQmJih0eXBlb2YgZVtyXT09PWkmJihlW3JdPW51bGwpLGUuZGV0YWNoRXZlbnQocixuKSl9LHguRXZlbnQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHguRXZlbnQ/KGUmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fGUucmV0dXJuVmFsdWU9PT0hMXx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP2l0Om90KTp0aGlzLnR5cGU9ZSxuJiZ4LmV4dGVuZCh0aGlzLG4pLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHx4Lm5vdygpLHRoaXNbeC5leHBhbmRvXT0hMCx0KTpuZXcgeC5FdmVudChlLG4pfSx4LkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOm90LGlzUHJvcGFnYXRpb25TdG9wcGVkOm90LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOm90LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWl0LGUmJihlLnByZXZlbnREZWZhdWx0P2UucHJldmVudERlZmF1bHQoKTplLnJldHVyblZhbHVlPSExKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9aXQsZSYmKGUuc3RvcFByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpLGUuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1pdCx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0seC5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0In0sZnVuY3Rpb24oZSx0KXt4LmV2ZW50LnNwZWNpYWxbZV09e2RlbGVnYXRlVHlwZTp0LGJpbmRUeXBlOnQsaGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciBuLHI9dGhpcyxpPWUucmVsYXRlZFRhcmdldCxvPWUuaGFuZGxlT2JqO3JldHVybighaXx8aSE9PXImJiF4LmNvbnRhaW5zKHIsaSkpJiYoZS50eXBlPW8ub3JpZ1R5cGUsbj1vLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT10KSxufX19KSx4LnN1cHBvcnQuc3VibWl0QnViYmxlc3x8KHguZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIHgubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOih4LmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGUpe3ZhciBuPWUudGFyZ2V0LHI9eC5ub2RlTmFtZShuLCJpbnB1dCIpfHx4Lm5vZGVOYW1lKG4sImJ1dHRvbiIpP24uZm9ybTp0O3ImJiF4Ll9kYXRhKHIsInN1Ym1pdEJ1YmJsZXMiKSYmKHguZXZlbnQuYWRkKHIsInN1Ym1pdC5fc3VibWl0IixmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlPSEwfSkseC5fZGF0YShyLCJzdWJtaXRCdWJibGVzIiwhMCkpfSksdCl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlJiYoZGVsZXRlIGUuX3N1Ym1pdF9idWJibGUsdGhpcy5wYXJlbnROb2RlJiYhZS5pc1RyaWdnZXImJnguZXZlbnQuc2ltdWxhdGUoInN1Ym1pdCIsdGhpcy5wYXJlbnROb2RlLGUsITApKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4geC5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6KHguZXZlbnQucmVtb3ZlKHRoaXMsIi5fc3VibWl0IiksdCl9fSkseC5zdXBwb3J0LmNoYW5nZUJ1YmJsZXN8fCh4LmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBaLnRlc3QodGhpcy5ub2RlTmFtZSk/KCgiY2hlY2tib3giPT09dGhpcy50eXBlfHwicmFkaW8iPT09dGhpcy50eXBlKSYmKHguZXZlbnQuYWRkKHRoaXMsInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpeyJjaGVja2VkIj09PWUub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITApfSkseC5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oZSl7dGhpcy5fanVzdF9jaGFuZ2VkJiYhZS5pc1RyaWdnZXImJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITEpLHguZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcyxlLCEwKX0pKSwhMSk6KHguZXZlbnQuYWRkKHRoaXMsImJlZm9yZWFjdGl2YXRlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O1oudGVzdCh0Lm5vZGVOYW1lKSYmIXguX2RhdGEodCwiY2hhbmdlQnViYmxlcyIpJiYoeC5ldmVudC5hZGQodCwiY2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpeyF0aGlzLnBhcmVudE5vZGV8fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHx4LmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMucGFyZW50Tm9kZSxlLCEwKX0pLHguX2RhdGEodCwiY2hhbmdlQnViYmxlcyIsITApKX0pLHQpfSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG49ZS50YXJnZXQ7cmV0dXJuIHRoaXMhPT1ufHxlLmlzU2ltdWxhdGVkfHxlLmlzVHJpZ2dlcnx8InJhZGlvIiE9PW4udHlwZSYmImNoZWNrYm94IiE9PW4udHlwZT9lLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0fSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiB4LmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFaLnRlc3QodGhpcy5ub2RlTmFtZSl9fSkseC5zdXBwb3J0LmZvY3VzaW5CdWJibGVzfHx4LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWZ1bmN0aW9uKGUpe3guZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCx4LmV2ZW50LmZpeChlKSwhMCl9O3guZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZhLmFkZEV2ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSkseC5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsbixyLGksbyl7dmFyIGEscztpZigib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciIT10eXBlb2YgbiYmKHI9cnx8bixuPXQpO2ZvcihhIGluIGUpdGhpcy5vbihhLG4scixlW2FdLG8pO3JldHVybiB0aGlzfWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dCk6bnVsbD09aSYmKCJzdHJpbmciPT10eXBlb2Ygbj8oaT1yLHI9dCk6KGk9cixyPW4sbj10KSksaT09PSExKWk9b3Q7ZWxzZSBpZighaSlyZXR1cm4gdGhpcztyZXR1cm4gMT09PW8mJihzPWksaT1mdW5jdGlvbihlKXtyZXR1cm4geCgpLm9mZihlKSxzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5ndWlkPXMuZ3VpZHx8KHMuZ3VpZD14Lmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe3guZXZlbnQuYWRkKHRoaXMsZSxpLHIsbil9KX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLG4scil7dmFyIGksbztpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gaT1lLmhhbmRsZU9iaix4KGUuZGVsZWdhdGVUYXJnZXQpLm9mZihpLm5hbWVzcGFjZT9pLm9yaWdUeXBlKyIuIitpLm5hbWVzcGFjZTppLm9yaWdUeXBlLGkuc2VsZWN0b3IsaS5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKG8gaW4gZSl0aGlzLm9mZihvLG4sZVtvXSk7cmV0dXJuIHRoaXN9cmV0dXJuKG49PT0hMXx8ImZ1bmN0aW9uIj09dHlwZW9mIG4pJiYocj1uLG49dCkscj09PSExJiYocj1vdCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5ldmVudC5yZW1vdmUodGhpcyxlLHIsbil9KX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LnRyaWdnZXIoZSx0LHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpc1swXTtyZXR1cm4gcj94LmV2ZW50LnRyaWdnZXIoZSxuLHIsITApOnR9fSk7dmFyIHN0PS9eLlteOiNcW1wuLF0qJC8sbHQ9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sdXQ9eC5leHByLm1hdGNoLm5lZWRzQ29udGV4dCxjdD17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTt4LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9dGhpcyxpPXIubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2soeChlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO2k+dDt0KyspaWYoeC5jb250YWlucyhyW3RdLHRoaXMpKXJldHVybiEwfSkpO2Zvcih0PTA7aT50O3QrKyl4LmZpbmQoZSxyW3RdLG4pO3JldHVybiBuPXRoaXMucHVzaFN0YWNrKGk+MT94LnVuaXF1ZShuKTpuKSxuLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrZTplLG59LGhhczpmdW5jdGlvbihlKXt2YXIgdCxuPXgoZSx0aGlzKSxyPW4ubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7cj50O3QrKylpZih4LmNvbnRhaW5zKHRoaXMsblt0XSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGV8fFtdLCEwKSl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZnQodGhpcyxlfHxbXSwhMSkpfSxpczpmdW5jdGlvbihlKXtyZXR1cm4hIWZ0KHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZ1dC50ZXN0KGUpP3goZSk6ZXx8W10sITEpLmxlbmd0aH0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT11dC50ZXN0KGUpfHwic3RyaW5nIiE9dHlwZW9mIGU/eChlLHR8fHRoaXMuY29udGV4dCk6MDtmb3IoO2k+cjtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZigxMT5uLm5vZGVUeXBlJiYoYT9hLmluZGV4KG4pPi0xOjE9PT1uLm5vZGVUeXBlJiZ4LmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtuPW8ucHVzaChuKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soby5sZW5ndGg+MT94LnVuaXF1ZShvKTpvKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/InN0cmluZyI9PXR5cGVvZiBlP3guaW5BcnJheSh0aGlzWzBdLHgoZSkpOnguaW5BcnJheShlLmpxdWVyeT9lWzBdOmUsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj0ic3RyaW5nIj09dHlwZW9mIGU/eChlLHQpOngubWFrZUFycmF5KGUmJmUubm9kZVR5cGU/W2VdOmUpLHI9eC5tZXJnZSh0aGlzLmdldCgpLG4pO3JldHVybiB0aGlzLnB1c2hTdGFjayh4LnVuaXF1ZShyKSl9LGFkZEJhY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWU/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpfX0pO2Z1bmN0aW9uIHB0KGUsdCl7ZG8gZT1lW3RdO3doaWxlKGUmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX14LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHB0KGUsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIHB0KGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiB4LmRpcihlLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGUpe3JldHVybiB4LmRpcihlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB4LmRpcihlLCJwcmV2aW91c1NpYmxpbmciLG4pfSxzaWJsaW5nczpmdW5jdGlvbihlKXtyZXR1cm4geC5zaWJsaW5nKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4geC5zaWJsaW5nKGUuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiB4Lm5vZGVOYW1lKGUsImlmcmFtZSIpP2UuY29udGVudERvY3VtZW50fHxlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6eC5tZXJnZShbXSxlLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9eC5tYXAodGhpcyx0LG4pO3JldHVybiJVbnRpbCIhPT1lLnNsaWNlKC01KSYmKHI9biksciYmInN0cmluZyI9PXR5cGVvZiByJiYoaT14LmZpbHRlcihyLGkpKSx0aGlzLmxlbmd0aD4xJiYoY3RbZV18fChpPXgudW5pcXVlKGkpKSxsdC50ZXN0KGUpJiYoaT1pLnJldmVyc2UoKSkpLHRoaXMucHVzaFN0YWNrKGkpfX0pLHguZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRbMF07cmV0dXJuIG4mJihlPSI6bm90KCIrZSsiKSIpLDE9PT10Lmxlbmd0aCYmMT09PXIubm9kZVR5cGU/eC5maW5kLm1hdGNoZXNTZWxlY3RvcihyLGUpP1tyXTpbXTp4LmZpbmQubWF0Y2hlcyhlLHguZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pKX0sZGlyOmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1bXSxvPWVbbl07d2hpbGUobyYmOSE9PW8ubm9kZVR5cGUmJihyPT09dHx8MSE9PW8ubm9kZVR5cGV8fCF4KG8pLmlzKHIpKSkxPT09by5ub2RlVHlwZSYmaS5wdXNoKG8pLG89b1tuXTtyZXR1cm4gaX0sc2libGluZzpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2Zvcig7ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSk7ZnVuY3Rpb24gZnQoZSx0LG4pe2lmKHguaXNGdW5jdGlvbih0KSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSxyKXtyZXR1cm4hIXQuY2FsbChlLHIsZSkhPT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10IT09bn0pO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoc3QudGVzdCh0KSlyZXR1cm4geC5maWx0ZXIodCxlLG4pO3Q9eC5maWx0ZXIodCxlKX1yZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHguaW5BcnJheShlLHQpPj0wIT09bn0pfWZ1bmN0aW9uIGR0KGUpe3ZhciB0PWh0LnNwbGl0KCJ8Iiksbj1lLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihuLmNyZWF0ZUVsZW1lbnQpd2hpbGUodC5sZW5ndGgpbi5jcmVhdGVFbGVtZW50KHQucG9wKCkpO3JldHVybiBufXZhciBodD0iYWJicnxhcnRpY2xlfGFzaWRlfGF1ZGlvfGJkaXxjYW52YXN8ZGF0YXxkYXRhbGlzdHxkZXRhaWxzfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlbyIsZ3Q9LyBqUXVlcnlcZCs9Iig/Om51bGx8XGQrKSIvZyxtdD1SZWdFeHAoIjwoPzoiK2h0KyIpW1xccy8+XSIsImkiKSx5dD0vXlxzKy8sdnQ9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Ol0rKVtePl0qKVwvPi9naSxidD0vPChbXHc6XSspLyx4dD0vPHRib2R5L2ksd3Q9Lzx8JiM/XHcrOy8sVHQ9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxDdD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxOdD0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxrdD0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksRXQ9L150cnVlXC8oLiopLyxTdD0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csQXQ9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLGxlZ2VuZDpbMSwiPGZpZWxkc2V0PiIsIjwvZmllbGRzZXQ+Il0sYXJlYTpbMSwiPG1hcD4iLCI8L21hcD4iXSxwYXJhbTpbMSwiPG9iamVjdD4iLCI8L29iamVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLGNvbDpbMiwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0Onguc3VwcG9ydC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19LGp0PWR0KGEpLER0PWp0LmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgiZGl2IikpO0F0Lm9wdGdyb3VwPUF0Lm9wdGlvbixBdC50Ym9keT1BdC50Zm9vdD1BdC5jb2xncm91cD1BdC5jYXB0aW9uPUF0LnRoZWFkLEF0LnRoPUF0LnRkLHguZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD94LnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxhKS5jcmVhdGVUZXh0Tm9kZShlKSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1MdCh0aGlzLGUpO3QuYXBwZW5kQ2hpbGQoZSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PUx0KHRoaXMsZSk7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lP3guZmlsdGVyKGUsdGhpcyk6dGhpcyxpPTA7Zm9yKDtudWxsIT0obj1yW2ldKTtpKyspdHx8MSE9PW4ubm9kZVR5cGV8fHguY2xlYW5EYXRhKEZ0KG4pKSxuLnBhcmVudE5vZGUmJih0JiZ4LmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCxuKSYmX3QoRnQobiwic2NyaXB0IikpLG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO2Zvcig7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKXsxPT09ZS5ub2RlVHlwZSYmeC5jbGVhbkRhdGEoRnQoZSwhMSkpO3doaWxlKGUuZmlyc3RDaGlsZCllLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7ZS5vcHRpb25zJiZ4Lm5vZGVOYW1lKGUsInNlbGVjdCIpJiYoZS5vcHRpb25zLmxlbmd0aD0wKX1yZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1udWxsPT1lPyExOmUsdD1udWxsPT10P2U6dCx0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiB4LmNsb25lKHRoaXMsZSx0KX0pfSxodG1sOmZ1bmN0aW9uKGUpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUpe3ZhciBuPXRoaXNbMF18fHt9LHI9MCxpPXRoaXMubGVuZ3RoO2lmKGU9PT10KXJldHVybiAxPT09bi5ub2RlVHlwZT9uLmlubmVySFRNTC5yZXBsYWNlKGd0LCIiKTp0O2lmKCEoInN0cmluZyIhPXR5cGVvZiBlfHxUdC50ZXN0KGUpfHwheC5zdXBwb3J0Lmh0bWxTZXJpYWxpemUmJm10LnRlc3QoZSl8fCF4LnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UmJnl0LnRlc3QoZSl8fEF0WyhidC5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSkpe2U9ZS5yZXBsYWNlKHZ0LCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtpPnI7cisrKW49dGhpc1tyXXx8e30sMT09PW4ubm9kZVR5cGUmJih4LmNsZWFuRGF0YShGdChuLCExKSksbi5pbm5lckhUTUw9ZSk7bj0wfWNhdGNoKG8pe319biYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBlPXgubWFwKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuW2UubmV4dFNpYmxpbmcsZS5wYXJlbnROb2RlXX0pLHQ9MDtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24obil7dmFyIHI9ZVt0KytdLGk9ZVt0KytdO2kmJihyJiZyLnBhcmVudE5vZGUhPT1pJiYocj10aGlzLm5leHRTaWJsaW5nKSx4KHRoaXMpLnJlbW92ZSgpLGkuaW5zZXJ0QmVmb3JlKG4scikpfSwhMCksdD90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsdCxuKXtlPWQuYXBwbHkoW10sZSk7dmFyIHIsaSxvLGEscyxsLHU9MCxjPXRoaXMubGVuZ3RoLHA9dGhpcyxmPWMtMSxoPWVbMF0sZz14LmlzRnVuY3Rpb24oaCk7aWYoZ3x8ISgxPj1jfHwic3RyaW5nIiE9dHlwZW9mIGh8fHguc3VwcG9ydC5jaGVja0Nsb25lKSYmTnQudGVzdChoKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBpPXAuZXEocik7ZyYmKGVbMF09aC5jYWxsKHRoaXMscixpLmh0bWwoKSkpLGkuZG9tTWFuaXAoZSx0LG4pfSk7aWYoYyYmKGw9eC5idWlsZEZyYWdtZW50KGUsdGhpc1swXS5vd25lckRvY3VtZW50LCExLCFuJiZ0aGlzKSxyPWwuZmlyc3RDaGlsZCwxPT09bC5jaGlsZE5vZGVzLmxlbmd0aCYmKGw9cikscikpe2ZvcihhPXgubWFwKEZ0KGwsInNjcmlwdCIpLEh0KSxvPWEubGVuZ3RoO2M+dTt1KyspaT1sLHUhPT1mJiYoaT14LmNsb25lKGksITAsITApLG8mJngubWVyZ2UoYSxGdChpLCJzY3JpcHQiKSkpLHQuY2FsbCh0aGlzW3VdLGksdSk7aWYobylmb3Iocz1hW2EubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQseC5tYXAoYSxxdCksdT0wO28+dTt1KyspaT1hW3VdLGt0LnRlc3QoaS50eXBlfHwiIikmJiF4Ll9kYXRhKGksImdsb2JhbEV2YWwiKSYmeC5jb250YWlucyhzLGkpJiYoaS5zcmM/eC5fZXZhbFVybChpLnNyYyk6eC5nbG9iYWxFdmFsKChpLnRleHR8fGkudGV4dENvbnRlbnR8fGkuaW5uZXJIVE1MfHwiIikucmVwbGFjZShTdCwiIikpKTtsPXI9bnVsbH1yZXR1cm4gdGhpc319KTtmdW5jdGlvbiBMdChlLHQpe3JldHVybiB4Lm5vZGVOYW1lKGUsInRhYmxlIikmJngubm9kZU5hbWUoMT09PXQubm9kZVR5cGU/dDp0LmZpcnN0Q2hpbGQsInRyIik/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8ZS5hcHBlbmRDaGlsZChlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6ZX1mdW5jdGlvbiBIdChlKXtyZXR1cm4gZS50eXBlPShudWxsIT09eC5maW5kLmF0dHIoZSwidHlwZSIpKSsiLyIrZS50eXBlLGV9ZnVuY3Rpb24gcXQoZSl7dmFyIHQ9RXQuZXhlYyhlLnR5cGUpO3JldHVybiB0P2UudHlwZT10WzFdOmUucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksZX1mdW5jdGlvbiBfdChlLHQpe3ZhciBuLHI9MDtmb3IoO251bGwhPShuPWVbcl0pO3IrKyl4Ll9kYXRhKG4sImdsb2JhbEV2YWwiLCF0fHx4Ll9kYXRhKHRbcl0sImdsb2JhbEV2YWwiKSl9ZnVuY3Rpb24gTXQoZSx0KXtpZigxPT09dC5ub2RlVHlwZSYmeC5oYXNEYXRhKGUpKXt2YXIgbixyLGksbz14Ll9kYXRhKGUpLGE9eC5fZGF0YSh0LG8pLHM9by5ldmVudHM7aWYocyl7ZGVsZXRlIGEuaGFuZGxlLGEuZXZlbnRzPXt9O2ZvcihuIGluIHMpZm9yKHI9MCxpPXNbbl0ubGVuZ3RoO2k+cjtyKyspeC5ldmVudC5hZGQodCxuLHNbbl1bcl0pfWEuZGF0YSYmKGEuZGF0YT14LmV4dGVuZCh7fSxhLmRhdGEpKX19ZnVuY3Rpb24gT3QoZSx0KXt2YXIgbixyLGk7aWYoMT09PXQubm9kZVR5cGUpe2lmKG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCF4LnN1cHBvcnQubm9DbG9uZUV2ZW50JiZ0W3guZXhwYW5kb10pe2k9eC5fZGF0YSh0KTtmb3IociBpbiBpLmV2ZW50cyl4LnJlbW92ZUV2ZW50KHQscixpLmhhbmRsZSk7dC5yZW1vdmVBdHRyaWJ1dGUoeC5leHBhbmRvKX0ic2NyaXB0Ij09PW4mJnQudGV4dCE9PWUudGV4dD8oSHQodCkudGV4dD1lLnRleHQscXQodCkpOiJvYmplY3QiPT09bj8odC5wYXJlbnROb2RlJiYodC5vdXRlckhUTUw9ZS5vdXRlckhUTUwpLHguc3VwcG9ydC5odG1sNUNsb25lJiZlLmlubmVySFRNTCYmIXgudHJpbSh0LmlubmVySFRNTCkmJih0LmlubmVySFRNTD1lLmlubmVySFRNTCkpOiJpbnB1dCI9PT1uJiZDdC50ZXN0KGUudHlwZSk/KHQuZGVmYXVsdENoZWNrZWQ9dC5jaGVja2VkPWUuY2hlY2tlZCx0LnZhbHVlIT09ZS52YWx1ZSYmKHQudmFsdWU9ZS52YWx1ZSkpOiJvcHRpb24iPT09bj90LmRlZmF1bHRTZWxlY3RlZD10LnNlbGVjdGVkPWUuZGVmYXVsdFNlbGVjdGVkOigiaW5wdXQiPT09bnx8InRleHRhcmVhIj09PW4pJiYodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfX14LmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihlLHQpe3guZm5bZV09ZnVuY3Rpb24oZSl7dmFyIG4scj0wLGk9W10sbz14KGUpLGE9by5sZW5ndGgtMTtmb3IoO2E+PXI7cisrKW49cj09PWE/dGhpczp0aGlzLmNsb25lKCEwKSx4KG9bcl0pW3RdKG4pLGguYXBwbHkoaSxuLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaSl9fSk7ZnVuY3Rpb24gRnQoZSxuKXt2YXIgcixvLGE9MCxzPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09aT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKG58fCIqIik6dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCE9PWk/ZS5xdWVyeVNlbGVjdG9yQWxsKG58fCIqIik6dDtpZighcylmb3Iocz1bXSxyPWUuY2hpbGROb2Rlc3x8ZTtudWxsIT0obz1yW2FdKTthKyspIW58fHgubm9kZU5hbWUobyxuKT9zLnB1c2gobyk6eC5tZXJnZShzLEZ0KG8sbikpO3JldHVybiBuPT09dHx8biYmeC5ub2RlTmFtZShlLG4pP3gubWVyZ2UoW2VdLHMpOnN9ZnVuY3Rpb24gQnQoZSl7Q3QudGVzdChlLnR5cGUpJiYoZS5kZWZhdWx0Q2hlY2tlZD1lLmNoZWNrZWQpfXguZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGEscyxsPXguY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpO2lmKHguc3VwcG9ydC5odG1sNUNsb25lfHx4LmlzWE1MRG9jKGUpfHwhbXQudGVzdCgiPCIrZS5ub2RlTmFtZSsiPiIpP289ZS5jbG9uZU5vZGUoITApOihEdC5pbm5lckhUTUw9ZS5vdXRlckhUTUwsRHQucmVtb3ZlQ2hpbGQobz1EdC5maXJzdENoaWxkKSksISh4LnN1cHBvcnQubm9DbG9uZUV2ZW50JiZ4LnN1cHBvcnQubm9DbG9uZUNoZWNrZWR8fDEhPT1lLm5vZGVUeXBlJiYxMSE9PWUubm9kZVR5cGV8fHguaXNYTUxEb2MoZSkpKWZvcihyPUZ0KG8pLHM9RnQoZSksYT0wO251bGwhPShpPXNbYV0pOysrYSlyW2FdJiZPdChpLHJbYV0pO2lmKHQpaWYobilmb3Iocz1zfHxGdChlKSxyPXJ8fEZ0KG8pLGE9MDtudWxsIT0oaT1zW2FdKTthKyspTXQoaSxyW2FdKTtlbHNlIE10KGUsbyk7cmV0dXJuIHI9RnQobywic2NyaXB0Iiksci5sZW5ndGg+MCYmX3QociwhbCYmRnQoZSwic2NyaXB0IikpLHI9cz1pPW51bGwsb30sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscyxsLHUsYyxwPWUubGVuZ3RoLGY9ZHQodCksZD1bXSxoPTA7Zm9yKDtwPmg7aCsrKWlmKG89ZVtoXSxvfHwwPT09bylpZigib2JqZWN0Ij09PXgudHlwZShvKSl4Lm1lcmdlKGQsby5ub2RlVHlwZT9bb106byk7ZWxzZSBpZih3dC50ZXN0KG8pKXtzPXN8fGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KCJkaXYiKSksbD0oYnQuZXhlYyhvKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSxjPUF0W2xdfHxBdC5fZGVmYXVsdCxzLmlubmVySFRNTD1jWzFdK28ucmVwbGFjZSh2dCwiPCQxPjwvJDI+IikrY1syXSxpPWNbMF07d2hpbGUoaS0tKXM9cy5sYXN0Q2hpbGQ7aWYoIXguc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmeXQudGVzdChvKSYmZC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUoeXQuZXhlYyhvKVswXSkpLCF4LnN1cHBvcnQudGJvZHkpe289InRhYmxlIiE9PWx8fHh0LnRlc3Qobyk/Ijx0YWJsZT4iIT09Y1sxXXx8eHQudGVzdChvKT8wOnM6cy5maXJzdENoaWxkLGk9byYmby5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShpLS0peC5ub2RlTmFtZSh1PW8uY2hpbGROb2Rlc1tpXSwidGJvZHkiKSYmIXUuY2hpbGROb2Rlcy5sZW5ndGgmJm8ucmVtb3ZlQ2hpbGQodSl9eC5tZXJnZShkLHMuY2hpbGROb2Rlcykscy50ZXh0Q29udGVudD0iIjt3aGlsZShzLmZpcnN0Q2hpbGQpcy5yZW1vdmVDaGlsZChzLmZpcnN0Q2hpbGQpO3M9Zi5sYXN0Q2hpbGR9ZWxzZSBkLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7cyYmZi5yZW1vdmVDaGlsZChzKSx4LnN1cHBvcnQuYXBwZW5kQ2hlY2tlZHx8eC5ncmVwKEZ0KGQsImlucHV0IiksQnQpLGg9MDt3aGlsZShvPWRbaCsrXSlpZigoIXJ8fC0xPT09eC5pbkFycmF5KG8scikpJiYoYT14LmNvbnRhaW5zKG8ub3duZXJEb2N1bWVudCxvKSxzPUZ0KGYuYXBwZW5kQ2hpbGQobyksInNjcmlwdCIpLGEmJl90KHMpLG4pKXtpPTA7d2hpbGUobz1zW2krK10pa3QudGVzdChvLnR5cGV8fCIiKSYmbi5wdXNoKG8pfXJldHVybiBzPW51bGwsZn0sY2xlYW5EYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixvLGEscz0wLGw9eC5leHBhbmRvLHU9eC5jYWNoZSxjPXguc3VwcG9ydC5kZWxldGVFeHBhbmRvLGY9eC5ldmVudC5zcGVjaWFsO2Zvcig7bnVsbCE9KG49ZVtzXSk7cysrKWlmKCh0fHx4LmFjY2VwdERhdGEobikpJiYobz1uW2xdLGE9byYmdVtvXSkpe2lmKGEuZXZlbnRzKWZvcihyIGluIGEuZXZlbnRzKWZbcl0/eC5ldmVudC5yZW1vdmUobixyKTp4LnJlbW92ZUV2ZW50KG4scixhLmhhbmRsZSk7CnVbb10mJihkZWxldGUgdVtvXSxjP2RlbGV0ZSBuW2xdOnR5cGVvZiBuLnJlbW92ZUF0dHJpYnV0ZSE9PWk/bi5yZW1vdmVBdHRyaWJ1dGUobCk6bltsXT1udWxsLHAucHVzaChvKSl9fSxfZXZhbFVybDpmdW5jdGlvbihlKXtyZXR1cm4geC5hamF4KHt1cmw6ZSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfX0pLHguZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe2lmKHguaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KTtpZih0aGlzWzBdKXt2YXIgdD14KGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCk7dGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdENoaWxkJiYxPT09ZS5maXJzdENoaWxkLm5vZGVUeXBlKWU9ZS5maXJzdENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHguaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7eCh0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9eCh0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD14LmlzRnVuY3Rpb24oZSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXt4KHRoaXMpLndyYXBBbGwodD9lLmNhbGwodGhpcyxuKTplKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7eC5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fHgodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pO3ZhciBQdCxSdCxXdCwkdD0vYWxwaGFcKFteKV0qXCkvaSxJdD0vb3BhY2l0eVxzKj1ccyooW14pXSopLyx6dD0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC8sWHQ9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFV0PS9ebWFyZ2luLyxWdD1SZWdFeHAoIl4oIit3KyIpKC4qKSQiLCJpIiksWXQ9UmVnRXhwKCJeKCIrdysiKSg/IXB4KVthLXolXSskIiwiaSIpLEp0PVJlZ0V4cCgiXihbKy1dKT0oIit3KyIpIiwiaSIpLEd0PXtCT0RZOiJibG9jayJ9LFF0PXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxLdD17bGV0dGVyU3BhY2luZzowLGZvbnRXZWlnaHQ6NDAwfSxadD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGVuPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gdG4oZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPWVuLmxlbmd0aDt3aGlsZShpLS0paWYodD1lbltpXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gcn1mdW5jdGlvbiBubihlLHQpe3JldHVybiBlPXR8fGUsIm5vbmUiPT09eC5jc3MoZSwiZGlzcGxheSIpfHwheC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9ZnVuY3Rpb24gcm4oZSx0KXt2YXIgbixyLGksbz1bXSxhPTAscz1lLmxlbmd0aDtmb3IoO3M+YTthKyspcj1lW2FdLHIuc3R5bGUmJihvW2FdPXguX2RhdGEociwib2xkZGlzcGxheSIpLG49ci5zdHlsZS5kaXNwbGF5LHQ/KG9bYV18fCJub25lIiE9PW58fChyLnN0eWxlLmRpc3BsYXk9IiIpLCIiPT09ci5zdHlsZS5kaXNwbGF5JiZubihyKSYmKG9bYV09eC5fZGF0YShyLCJvbGRkaXNwbGF5IixsbihyLm5vZGVOYW1lKSkpKTpvW2FdfHwoaT1ubihyKSwobiYmIm5vbmUiIT09bnx8IWkpJiZ4Ll9kYXRhKHIsIm9sZGRpc3BsYXkiLGk/bjp4LmNzcyhyLCJkaXNwbGF5IikpKSk7Zm9yKGE9MDtzPmE7YSsrKXI9ZVthXSxyLnN0eWxlJiYodCYmIm5vbmUiIT09ci5zdHlsZS5kaXNwbGF5JiYiIiE9PXIuc3R5bGUuZGlzcGxheXx8KHIuc3R5bGUuZGlzcGxheT10P29bYV18fCIiOiJub25lIikpO3JldHVybiBlfXguZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSxuKXtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbihlLG4scil7dmFyIGksbyxhPXt9LHM9MDtpZih4LmlzQXJyYXkobikpe2ZvcihvPVJ0KGUpLGk9bi5sZW5ndGg7aT5zO3MrKylhW25bc11dPXguY3NzKGUsbltzXSwhMSxvKTtyZXR1cm4gYX1yZXR1cm4gciE9PXQ/eC5zdHlsZShlLG4scik6eC5jc3MoZSxuKX0sZSxuLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gcm4odGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gcm4odGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7bm4odGhpcyk/eCh0aGlzKS5zaG93KCk6eCh0aGlzKS5oaWRlKCl9KX19KSx4LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPVd0KGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOnguc3VwcG9ydC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oZSxuLHIsaSl7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgbyxhLHMsbD14LmNhbWVsQ2FzZShuKSx1PWUuc3R5bGU7aWYobj14LmNzc1Byb3BzW2xdfHwoeC5jc3NQcm9wc1tsXT10bih1LGwpKSxzPXguY3NzSG9va3Nbbl18fHguY3NzSG9va3NbbF0scj09PXQpcmV0dXJuIHMmJiJnZXQiaW4gcyYmKG89cy5nZXQoZSwhMSxpKSkhPT10P286dVtuXTtpZihhPXR5cGVvZiByLCJzdHJpbmciPT09YSYmKG89SnQuZXhlYyhyKSkmJihyPShvWzFdKzEpKm9bMl0rcGFyc2VGbG9hdCh4LmNzcyhlLG4pKSxhPSJudW1iZXIiKSwhKG51bGw9PXJ8fCJudW1iZXIiPT09YSYmaXNOYU4ocil8fCgibnVtYmVyIiE9PWF8fHguY3NzTnVtYmVyW2xdfHwocis9InB4IikseC5zdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1yfHwwIT09bi5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fCh1W25dPSJpbmhlcml0IikscyYmInNldCJpbiBzJiYocj1zLnNldChlLHIsaSkpPT09dCkpKXRyeXt1W25dPXJ9Y2F0Y2goYyl7fX19LGNzczpmdW5jdGlvbihlLG4scixpKXt2YXIgbyxhLHMsbD14LmNhbWVsQ2FzZShuKTtyZXR1cm4gbj14LmNzc1Byb3BzW2xdfHwoeC5jc3NQcm9wc1tsXT10bihlLnN0eWxlLGwpKSxzPXguY3NzSG9va3Nbbl18fHguY3NzSG9va3NbbF0scyYmImdldCJpbiBzJiYoYT1zLmdldChlLCEwLHIpKSxhPT09dCYmKGE9V3QoZSxuLGkpKSwibm9ybWFsIj09PWEmJm4gaW4gS3QmJihhPUt0W25dKSwiIj09PXJ8fHI/KG89cGFyc2VGbG9hdChhKSxyPT09ITB8fHguaXNOdW1lcmljKG8pP298fDA6YSk6YX19KSxlLmdldENvbXB1dGVkU3R5bGU/KFJ0PWZ1bmN0aW9uKHQpe3JldHVybiBlLmdldENvbXB1dGVkU3R5bGUodCxudWxsKX0sV3Q9ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYSxzPXJ8fFJ0KGUpLGw9cz9zLmdldFByb3BlcnR5VmFsdWUobil8fHNbbl06dCx1PWUuc3R5bGU7cmV0dXJuIHMmJigiIiE9PWx8fHguY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHwobD14LnN0eWxlKGUsbikpLFl0LnRlc3QobCkmJlV0LnRlc3QobikmJihpPXUud2lkdGgsbz11Lm1pbldpZHRoLGE9dS5tYXhXaWR0aCx1Lm1pbldpZHRoPXUubWF4V2lkdGg9dS53aWR0aD1sLGw9cy53aWR0aCx1LndpZHRoPWksdS5taW5XaWR0aD1vLHUubWF4V2lkdGg9YSkpLGx9KTphLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUmJihSdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJyZW50U3R5bGV9LFd0PWZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGEscz1yfHxSdChlKSxsPXM/c1tuXTp0LHU9ZS5zdHlsZTtyZXR1cm4gbnVsbD09bCYmdSYmdVtuXSYmKGw9dVtuXSksWXQudGVzdChsKSYmIXp0LnRlc3QobikmJihpPXUubGVmdCxvPWUucnVudGltZVN0eWxlLGE9byYmby5sZWZ0LGEmJihvLmxlZnQ9ZS5jdXJyZW50U3R5bGUubGVmdCksdS5sZWZ0PSJmb250U2l6ZSI9PT1uPyIxZW0iOmwsbD11LnBpeGVsTGVmdCsicHgiLHUubGVmdD1pLGEmJihvLmxlZnQ9YSkpLCIiPT09bD8iYXV0byI6bH0pO2Z1bmN0aW9uIG9uKGUsdCxuKXt2YXIgcj1WdC5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsxXS0obnx8MCkpKyhyWzJdfHwicHgiKTp0fWZ1bmN0aW9uIGFuKGUsdCxuLHIsaSl7dmFyIG89bj09PShyPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09dD8xOjAsYT0wO2Zvcig7ND5vO28rPTIpIm1hcmdpbiI9PT1uJiYoYSs9eC5jc3MoZSxuK1p0W29dLCEwLGkpKSxyPygiY29udGVudCI9PT1uJiYoYS09eC5jc3MoZSwicGFkZGluZyIrWnRbb10sITAsaSkpLCJtYXJnaW4iIT09biYmKGEtPXguY3NzKGUsImJvcmRlciIrWnRbb10rIldpZHRoIiwhMCxpKSkpOihhKz14LmNzcyhlLCJwYWRkaW5nIitadFtvXSwhMCxpKSwicGFkZGluZyIhPT1uJiYoYSs9eC5jc3MoZSwiYm9yZGVyIitadFtvXSsiV2lkdGgiLCEwLGkpKSk7cmV0dXJuIGF9ZnVuY3Rpb24gc24oZSx0LG4pe3ZhciByPSEwLGk9IndpZHRoIj09PXQ/ZS5vZmZzZXRXaWR0aDplLm9mZnNldEhlaWdodCxvPVJ0KGUpLGE9eC5zdXBwb3J0LmJveFNpemluZyYmImJvcmRlci1ib3giPT09eC5jc3MoZSwiYm94U2l6aW5nIiwhMSxvKTtpZigwPj1pfHxudWxsPT1pKXtpZihpPVd0KGUsdCxvKSwoMD5pfHxudWxsPT1pKSYmKGk9ZS5zdHlsZVt0XSksWXQudGVzdChpKSlyZXR1cm4gaTtyPWEmJih4LnN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGV8fGk9PT1lLnN0eWxlW3RdKSxpPXBhcnNlRmxvYXQoaSl8fDB9cmV0dXJuIGkrYW4oZSx0LG58fChhPyJib3JkZXIiOiJjb250ZW50IikscixvKSsicHgifWZ1bmN0aW9uIGxuKGUpe3ZhciB0PWEsbj1HdFtlXTtyZXR1cm4gbnx8KG49dW4oZSx0KSwibm9uZSIhPT1uJiZufHwoUHQ9KFB0fHx4KCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikuY3NzKCJjc3NUZXh0IiwiZGlzcGxheTpibG9jayAhaW1wb3J0YW50IikpLmFwcGVuZFRvKHQuZG9jdW1lbnRFbGVtZW50KSx0PShQdFswXS5jb250ZW50V2luZG93fHxQdFswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LHQud3JpdGUoIjwhZG9jdHlwZSBodG1sPjxodG1sPjxib2R5PiIpLHQuY2xvc2UoKSxuPXVuKGUsdCksUHQuZGV0YWNoKCkpLEd0W2VdPW4pLG59ZnVuY3Rpb24gdW4oZSx0KXt2YXIgbj14KHQuY3JlYXRlRWxlbWVudChlKSkuYXBwZW5kVG8odC5ib2R5KSxyPXguY3NzKG5bMF0sImRpc3BsYXkiKTtyZXR1cm4gbi5yZW1vdmUoKSxyfXguZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oZSxuKXt4LmNzc0hvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oZSxyLGkpe3JldHVybiByPzA9PT1lLm9mZnNldFdpZHRoJiZYdC50ZXN0KHguY3NzKGUsImRpc3BsYXkiKSk/eC5zd2FwKGUsUXQsZnVuY3Rpb24oKXtyZXR1cm4gc24oZSxuLGkpfSk6c24oZSxuLGkpOnR9LHNldDpmdW5jdGlvbihlLHQscil7dmFyIGk9ciYmUnQoZSk7cmV0dXJuIG9uKGUsdCxyP2FuKGUsbixyLHguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsaSksaSk6MCl9fX0pLHguc3VwcG9ydC5vcGFjaXR5fHwoeC5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gSXQudGVzdCgodCYmZS5jdXJyZW50U3R5bGU/ZS5jdXJyZW50U3R5bGUuZmlsdGVyOmUuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6dD8iMSI6IiJ9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuPWUuc3R5bGUscj1lLmN1cnJlbnRTdHlsZSxpPXguaXNOdW1lcmljKHQpPyJhbHBoYShvcGFjaXR5PSIrMTAwKnQrIikiOiIiLG89ciYmci5maWx0ZXJ8fG4uZmlsdGVyfHwiIjtuLnpvb209MSwodD49MXx8IiI9PT10KSYmIiI9PT14LnRyaW0oby5yZXBsYWNlKCR0LCIiKSkmJm4ucmVtb3ZlQXR0cmlidXRlJiYobi5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09dHx8ciYmIXIuZmlsdGVyKXx8KG4uZmlsdGVyPSR0LnRlc3Qobyk/by5yZXBsYWNlKCR0LGkpOm8rIiAiK2kpfX0pLHgoZnVuY3Rpb24oKXt4LnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KHguY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLG4pe3JldHVybiBuP3guc3dhcChlLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSxXdCxbZSwibWFyZ2luUmlnaHQiXSk6dH19KSwheC5zdXBwb3J0LnBpeGVsUG9zaXRpb24mJnguZm4ucG9zaXRpb24mJnguZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihlLG4pe3guY3NzSG9va3Nbbl09e2dldDpmdW5jdGlvbihlLHIpe3JldHVybiByPyhyPVd0KGUsbiksWXQudGVzdChyKT94KGUpLnBvc2l0aW9uKClbbl0rInB4IjpyKTp0fX19KX0pLHguZXhwciYmeC5leHByLmZpbHRlcnMmJih4LmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIDA+PWUub2Zmc2V0V2lkdGgmJjA+PWUub2Zmc2V0SGVpZ2h0fHwheC5zdXBwb3J0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cyYmIm5vbmUiPT09KGUuc3R5bGUmJmUuc3R5bGUuZGlzcGxheXx8eC5jc3MoZSwiZGlzcGxheSIpKX0seC5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4heC5leHByLmZpbHRlcnMuaGlkZGVuKGUpfSkseC5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oZSx0KXt4LmNzc0hvb2tzW2UrdF09e2V4cGFuZDpmdW5jdGlvbihuKXt2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtmb3IoOzQ+cjtyKyspaVtlK1p0W3JdK3RdPW9bcl18fG9bci0yXXx8b1swXTtyZXR1cm4gaX19LFV0LnRlc3QoZSl8fCh4LmNzc0hvb2tzW2UrdF0uc2V0PW9uKX0pO3ZhciBjbj0vJTIwL2cscG49L1xbXF0kLyxmbj0vXHI/XG4vZyxkbj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksaG49L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO3guZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4geC5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXgucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP3gubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXgodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZobi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhZG4udGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IUN0LnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49eCh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOnguaXNBcnJheShuKT94Lm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoZm4sIlxyXG4iKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKGZuLCJcclxuIil9fSkuZ2V0KCl9fSkseC5wYXJhbT1mdW5jdGlvbihlLG4pe3ZhciByLGk9W10sbz1mdW5jdGlvbihlLHQpe3Q9eC5pc0Z1bmN0aW9uKHQpP3QoKTpudWxsPT10PyIiOnQsaVtpLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKG49PT10JiYobj14LmFqYXhTZXR0aW5ncyYmeC5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLHguaXNBcnJheShlKXx8ZS5qcXVlcnkmJiF4LmlzUGxhaW5PYmplY3QoZSkpeC5lYWNoKGUsZnVuY3Rpb24oKXtvKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKHIgaW4gZSlnbihyLGVbcl0sbixvKTtyZXR1cm4gaS5qb2luKCImIikucmVwbGFjZShjbiwiKyIpfTtmdW5jdGlvbiBnbihlLHQsbixyKXt2YXIgaTtpZih4LmlzQXJyYXkodCkpeC5lYWNoKHQsZnVuY3Rpb24odCxpKXtufHxwbi50ZXN0KGUpP3IoZSxpKTpnbihlKyJbIisoIm9iamVjdCI9PXR5cGVvZiBpP3Q6IiIpKyJdIixpLG4scil9KTtlbHNlIGlmKG58fCJvYmplY3QiIT09eC50eXBlKHQpKXIoZSx0KTtlbHNlIGZvcihpIGluIHQpZ24oZSsiWyIraSsiXSIsdFtpXSxuLHIpfXguZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe3guZm5bdF09ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24odCxudWxsLGUsbik6dGhpcy50cmlnZ2VyKHQpfX0pLHguZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoZSwiKioiKTp0aGlzLm9mZih0LGV8fCIqKiIsbil9fSk7dmFyIG1uLHluLHZuPXgubm93KCksYm49L1w/Lyx4bj0vIy4qJC8sd249LyhbPyZdKV89W14mXSovLFRuPS9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKVxyPyQvZ20sQ249L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sTm49L14oPzpHRVR8SEVBRCkkLyxrbj0vXlwvXC8vLEVuPS9eKFtcdy4rLV0rOikoPzpcL1wvKFteXC8/IzpdKikoPzo6KFxkKyl8KXwpLyxTbj14LmZuLmxvYWQsQW49e30sam49e30sRG49IiovIi5jb25jYXQoIioiKTt0cnl7eW49by5ocmVmfWNhdGNoKExuKXt5bj1hLmNyZWF0ZUVsZW1lbnQoImEiKSx5bi5ocmVmPSIiLHluPXluLmhyZWZ9bW49RW4uZXhlYyh5bi50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gSG4oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7InN0cmluZyIhPXR5cGVvZiB0JiYobj10LHQ9IioiKTt2YXIgcixpPTAsbz10LnRvTG93ZXJDYXNlKCkubWF0Y2goVCl8fFtdO2lmKHguaXNGdW5jdGlvbihuKSl3aGlsZShyPW9baSsrXSkiKyI9PT1yWzBdPyhyPXIuc2xpY2UoMSl8fCIqIiwoZVtyXT1lW3JdfHxbXSkudW5zaGlmdChuKSk6KGVbcl09ZVtyXXx8W10pLnB1c2gobil9fWZ1bmN0aW9uIHFuKGUsbixyLGkpe3ZhciBvPXt9LGE9ZT09PWpuO2Z1bmN0aW9uIHMobCl7dmFyIHU7cmV0dXJuIG9bbF09ITAseC5lYWNoKGVbbF18fFtdLGZ1bmN0aW9uKGUsbCl7dmFyIGM9bChuLHIsaSk7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBjfHxhfHxvW2NdP2E/ISh1PWMpOnQ6KG4uZGF0YVR5cGVzLnVuc2hpZnQoYykscyhjKSwhMSl9KSx1fXJldHVybiBzKG4uZGF0YVR5cGVzWzBdKXx8IW9bIioiXSYmcygiKiIpfWZ1bmN0aW9uIF9uKGUsbil7dmFyIHIsaSxvPXguYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoaSBpbiBuKW5baV0hPT10JiYoKG9baV0/ZTpyfHwocj17fSkpW2ldPW5baV0pO3JldHVybiByJiZ4LmV4dGVuZCghMCxlLHIpLGV9eC5mbi5sb2FkPWZ1bmN0aW9uKGUsbixyKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJlNuKXJldHVybiBTbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGksbyxhLHM9dGhpcyxsPWUuaW5kZXhPZigiICIpO3JldHVybiBsPj0wJiYoaT1lLnNsaWNlKGwsZS5sZW5ndGgpLGU9ZS5zbGljZSgwLGwpKSx4LmlzRnVuY3Rpb24obik/KHI9bixuPXQpOm4mJiJvYmplY3QiPT10eXBlb2YgbiYmKGE9IlBPU1QiKSxzLmxlbmd0aD4wJiZ4LmFqYXgoe3VybDplLHR5cGU6YSxkYXRhVHlwZToiaHRtbCIsZGF0YTpufSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxzLmh0bWwoaT94KCI8ZGl2PiIpLmFwcGVuZCh4LnBhcnNlSFRNTChlKSkuZmluZChpKTplKX0pLmNvbXBsZXRlKHImJmZ1bmN0aW9uKGUsdCl7cy5lYWNoKHIsb3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfSksdGhpc30seC5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oZSx0KXt4LmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKHQsZSl9fSkseC5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOnluLHR5cGU6IkdFVCIsaXNMb2NhbDpDbi50ZXN0KG1uWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOkRuLHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6eC5wYXJzZUpTT04sInRleHQgeG1sIjp4LnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9fbihfbihlLHguYWpheFNldHRpbmdzKSx0KTpfbih4LmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpIbihBbiksYWpheFRyYW5zcG9ydDpIbihqbiksYWpheDpmdW5jdGlvbihlLG4peyJvYmplY3QiPT10eXBlb2YgZSYmKG49ZSxlPXQpLG49bnx8e307dmFyIHIsaSxvLGEscyxsLHUsYyxwPXguYWpheFNldHVwKHt9LG4pLGY9cC5jb250ZXh0fHxwLGQ9cC5jb250ZXh0JiYoZi5ub2RlVHlwZXx8Zi5qcXVlcnkpP3goZik6eC5ldmVudCxoPXguRGVmZXJyZWQoKSxnPXguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLG09cC5zdGF0dXNDb2RlfHx7fSx5PXt9LHY9e30sYj0wLHc9ImNhbmNlbGVkIixDPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoMj09PWIpe2lmKCFjKXtjPXt9O3doaWxlKHQ9VG4uZXhlYyhhKSljW3RbMV0udG9Mb3dlckNhc2UoKV09dFsyXX10PWNbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09dD9udWxsOnR9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09Yj9hOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGJ8fChlPXZbbl09dltuXXx8ZSx5W2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGJ8fChwLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZigyPmIpZm9yKHQgaW4gZSltW3RdPVttW3RdLGVbdF1dO2Vsc2UgQy5hbHdheXMoZVtDLnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHx3O3JldHVybiB1JiZ1LmFib3J0KHQpLGsoMCx0KSx0aGlzfX07aWYoaC5wcm9taXNlKEMpLmNvbXBsZXRlPWcuYWRkLEMuc3VjY2Vzcz1DLmRvbmUsQy5lcnJvcj1DLmZhaWwscC51cmw9KChlfHxwLnVybHx8eW4pKyIiKS5yZXBsYWNlKHhuLCIiKS5yZXBsYWNlKGtuLG1uWzFdKyIvLyIpLHAudHlwZT1uLm1ldGhvZHx8bi50eXBlfHxwLm1ldGhvZHx8cC50eXBlLHAuZGF0YVR5cGVzPXgudHJpbShwLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goVCl8fFsiIl0sbnVsbD09cC5jcm9zc0RvbWFpbiYmKHI9RW4uZXhlYyhwLnVybC50b0xvd2VyQ2FzZSgpKSxwLmNyb3NzRG9tYWluPSEoIXJ8fHJbMV09PT1tblsxXSYmclsyXT09PW1uWzJdJiYoclszXXx8KCJodHRwOiI9PT1yWzFdPyI4MCI6IjQ0MyIpKT09PShtblszXXx8KCJodHRwOiI9PT1tblsxXT8iODAiOiI0NDMiKSkpKSxwLmRhdGEmJnAucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2YgcC5kYXRhJiYocC5kYXRhPXgucGFyYW0ocC5kYXRhLHAudHJhZGl0aW9uYWwpKSxxbihBbixwLG4sQyksMj09PWIpcmV0dXJuIEM7bD1wLmdsb2JhbCxsJiYwPT09eC5hY3RpdmUrKyYmeC5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxwLnR5cGU9cC50eXBlLnRvVXBwZXJDYXNlKCkscC5oYXNDb250ZW50PSFObi50ZXN0KHAudHlwZSksbz1wLnVybCxwLmhhc0NvbnRlbnR8fChwLmRhdGEmJihvPXAudXJsKz0oYm4udGVzdChvKT8iJiI6Ij8iKStwLmRhdGEsZGVsZXRlIHAuZGF0YSkscC5jYWNoZT09PSExJiYocC51cmw9d24udGVzdChvKT9vLnJlcGxhY2Uod24sIiQxXz0iK3ZuKyspOm8rKGJuLnRlc3Qobyk/IiYiOiI/IikrIl89Iit2bisrKSkscC5pZk1vZGlmaWVkJiYoeC5sYXN0TW9kaWZpZWRbb10mJkMuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHgubGFzdE1vZGlmaWVkW29dKSx4LmV0YWdbb10mJkMuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIseC5ldGFnW29dKSksKHAuZGF0YSYmcC5oYXNDb250ZW50JiZwLmNvbnRlbnRUeXBlIT09ITF8fG4uY29udGVudFR5cGUpJiZDLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIscC5jb250ZW50VHlwZSksQy5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHAuZGF0YVR5cGVzWzBdJiZwLmFjY2VwdHNbcC5kYXRhVHlwZXNbMF1dP3AuYWNjZXB0c1twLmRhdGFUeXBlc1swXV0rKCIqIiE9PXAuZGF0YVR5cGVzWzBdPyIsICIrRG4rIjsgcT0wLjAxIjoiIik6cC5hY2NlcHRzWyIqIl0pO2ZvcihpIGluIHAuaGVhZGVycylDLnNldFJlcXVlc3RIZWFkZXIoaSxwLmhlYWRlcnNbaV0pO2lmKHAuYmVmb3JlU2VuZCYmKHAuYmVmb3JlU2VuZC5jYWxsKGYsQyxwKT09PSExfHwyPT09YikpcmV0dXJuIEMuYWJvcnQoKTt3PSJhYm9ydCI7Zm9yKGkgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pQ1tpXShwW2ldKTtpZih1PXFuKGpuLHAsbixDKSl7Qy5yZWFkeVN0YXRlPTEsbCYmZC50cmlnZ2VyKCJhamF4U2VuZCIsW0MscF0pLHAuYXN5bmMmJnAudGltZW91dD4wJiYocz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Qy5hYm9ydCgidGltZW91dCIpfSxwLnRpbWVvdXQpKTt0cnl7Yj0xLHUuc2VuZCh5LGspfWNhdGNoKE4pe2lmKCEoMj5iKSl0aHJvdyBOO2soLTEsTil9fWVsc2UgaygtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24gayhlLG4scixpKXt2YXIgYyx5LHYsdyxULE49bjsyIT09YiYmKGI9MixzJiZjbGVhclRpbWVvdXQocyksdT10LGE9aXx8IiIsQy5yZWFkeVN0YXRlPWU+MD80OjAsYz1lPj0yMDAmJjMwMD5lfHwzMDQ9PT1lLHImJih3PU1uKHAsQyxyKSksdz1PbihwLHcsQyxjKSxjPyhwLmlmTW9kaWZpZWQmJihUPUMuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSxUJiYoeC5sYXN0TW9kaWZpZWRbb109VCksVD1DLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksVCYmKHguZXRhZ1tvXT1UKSksMjA0PT09ZXx8IkhFQUQiPT09cC50eXBlP049Im5vY29udGVudCI6MzA0PT09ZT9OPSJub3Rtb2RpZmllZCI6KE49dy5zdGF0ZSx5PXcuZGF0YSx2PXcuZXJyb3IsYz0hdikpOih2PU4sKGV8fCFOKSYmKE49ImVycm9yIiwwPmUmJihlPTApKSksQy5zdGF0dXM9ZSxDLnN0YXR1c1RleHQ9KG58fE4pKyIiLGM/aC5yZXNvbHZlV2l0aChmLFt5LE4sQ10pOmgucmVqZWN0V2l0aChmLFtDLE4sdl0pLEMuc3RhdHVzQ29kZShtKSxtPXQsbCYmZC50cmlnZ2VyKGM/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbQyxwLGM/eTp2XSksZy5maXJlV2l0aChmLFtDLE5dKSxsJiYoZC50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFtDLHBdKSwtLXguYWN0aXZlfHx4LmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKX1yZXR1cm4gQ30sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZ2V0KGUsdCxuLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihlLG4pe3JldHVybiB4LmdldChlLHQsbiwic2NyaXB0Iil9fSkseC5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGUsbil7eFtuXT1mdW5jdGlvbihlLHIsaSxvKXtyZXR1cm4geC5pc0Z1bmN0aW9uKHIpJiYobz1vfHxpLGk9cixyPXQpLHguYWpheCh7dXJsOmUsdHlwZTpuLGRhdGFUeXBlOm8sZGF0YTpyLHN1Y2Nlc3M6aX0pfX0pO2Z1bmN0aW9uIE1uKGUsbixyKXt2YXIgaSxvLGEscyxsPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSxvPT09dCYmKG89ZS5taW1lVHlwZXx8bi5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKG8pZm9yKHMgaW4gbClpZihsW3NdJiZsW3NdLnRlc3Qobykpe3UudW5zaGlmdChzKTticmVha31pZih1WzBdaW4gcilhPXVbMF07ZWxzZXtmb3IocyBpbiByKXtpZighdVswXXx8ZS5jb252ZXJ0ZXJzW3MrIiAiK3VbMF1dKXthPXM7YnJlYWt9aXx8KGk9cyl9YT1hfHxpfXJldHVybiBhPyhhIT09dVswXSYmdS51bnNoaWZ0KGEpLHJbYV0pOnR9ZnVuY3Rpb24gT24oZSx0LG4scil7dmFyIGksbyxhLHMsbCx1PXt9LGM9ZS5kYXRhVHlwZXMuc2xpY2UoKTtpZihjWzFdKWZvcihhIGluIGUuY29udmVydGVycyl1W2EudG9Mb3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW2FdO289Yy5zaGlmdCgpO3doaWxlKG8paWYoZS5yZXNwb25zZUZpZWxkc1tvXSYmKG5bZS5yZXNwb25zZUZpZWxkc1tvXV09dCksIWwmJnImJmUuZGF0YUZpbHRlciYmKHQ9ZS5kYXRhRmlsdGVyKHQsZS5kYXRhVHlwZSkpLGw9byxvPWMuc2hpZnQoKSlpZigiKiI9PT1vKW89bDtlbHNlIGlmKCIqIiE9PWwmJmwhPT1vKXtpZihhPXVbbCsiICIrb118fHVbIiogIitvXSwhYSlmb3IoaSBpbiB1KWlmKHM9aS5zcGxpdCgiICIpLHNbMV09PT1vJiYoYT11W2wrIiAiK3NbMF1dfHx1WyIqICIrc1swXV0pKXthPT09ITA/YT11W2ldOnVbaV0hPT0hMCYmKG89c1swXSxjLnVuc2hpZnQoc1sxXSkpO2JyZWFrfWlmKGEhPT0hMClpZihhJiZlWyJ0aHJvd3MiXSl0PWEodCk7ZWxzZSB0cnl7dD1hKHQpfWNhdGNoKHApe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmE/cDoiTm8gY29udmVyc2lvbiBmcm9tICIrbCsiIHRvICIrb319fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0fX14LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiB4Lmdsb2JhbEV2YWwoZSksZX19fSkseC5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe2UuY2FjaGU9PT10JiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIixlLmdsb2JhbD0hMSl9KSx4LmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIG4scj1hLmhlYWR8fHgoImhlYWQiKVswXXx8YS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJue3NlbmQ6ZnVuY3Rpb24odCxpKXtuPWEuY3JlYXRlRWxlbWVudCgic2NyaXB0Iiksbi5hc3luYz0hMCxlLnNjcmlwdENoYXJzZXQmJihuLmNoYXJzZXQ9ZS5zY3JpcHRDaGFyc2V0KSxuLnNyYz1lLnVybCxuLm9ubG9hZD1uLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihlLHQpeyh0fHwhbi5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG4ucmVhZHlTdGF0ZSkpJiYobi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxuLnBhcmVudE5vZGUmJm4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSxuPW51bGwsdHx8aSgyMDAsInN1Y2Nlc3MiKSl9LHIuaW5zZXJ0QmVmb3JlKG4sci5maXJzdENoaWxkKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuLm9ubG9hZCh0LCEwKX19fX0pO3ZhciBGbj1bXSxCbj0vKD0pXD8oPz0mfCQpfFw/XD8vO3guYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1Gbi5wb3AoKXx8eC5leHBhbmRvKyJfIit2bisrO3JldHVybiB0aGlzW2VdPSEwLGV9fSkseC5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbihuLHIsaSl7dmFyIG8sYSxzLGw9bi5qc29ucCE9PSExJiYoQm4udGVzdChuLnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiBuLmRhdGEmJiEobi5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZCbi50ZXN0KG4uZGF0YSkmJiJkYXRhIik7cmV0dXJuIGx8fCJqc29ucCI9PT1uLmRhdGFUeXBlc1swXT8obz1uLmpzb25wQ2FsbGJhY2s9eC5pc0Z1bmN0aW9uKG4uanNvbnBDYWxsYmFjayk/bi5qc29ucENhbGxiYWNrKCk6bi5qc29ucENhbGxiYWNrLGw/bltsXT1uW2xdLnJlcGxhY2UoQm4sIiQxIitvKTpuLmpzb25wIT09ITEmJihuLnVybCs9KGJuLnRlc3Qobi51cmwpPyImIjoiPyIpK24uanNvbnArIj0iK28pLG4uY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBzfHx4LmVycm9yKG8rIiB3YXMgbm90IGNhbGxlZCIpLHNbMF19LG4uZGF0YVR5cGVzWzBdPSJqc29uIixhPWVbb10sZVtvXT1mdW5jdGlvbigpe3M9YXJndW1lbnRzfSxpLmFsd2F5cyhmdW5jdGlvbigpe2Vbb109YSxuW29dJiYobi5qc29ucENhbGxiYWNrPXIuanNvbnBDYWxsYmFjayxGbi5wdXNoKG8pKSxzJiZ4LmlzRnVuY3Rpb24oYSkmJmEoc1swXSkscz1hPXR9KSwic2NyaXB0Iik6dH0pO3ZhciBQbixSbixXbj0wLCRuPWUuQWN0aXZlWE9iamVjdCYmZnVuY3Rpb24oKXt2YXIgZTtmb3IoZSBpbiBQbilQbltlXSh0LCEwKX07ZnVuY3Rpb24gSW4oKXt0cnl7cmV0dXJuIG5ldyBlLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKHQpe319ZnVuY3Rpb24gem4oKXt0cnl7cmV0dXJuIG5ldyBlLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9Y2F0Y2godCl7fX14LmFqYXhTZXR0aW5ncy54aHI9ZS5BY3RpdmVYT2JqZWN0P2Z1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNMb2NhbCYmSW4oKXx8em4oKX06SW4sUm49eC5hamF4U2V0dGluZ3MueGhyKCkseC5zdXBwb3J0LmNvcnM9ISFSbiYmIndpdGhDcmVkZW50aWFscyJpbiBSbixSbj14LnN1cHBvcnQuYWpheD0hIVJuLFJuJiZ4LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24obil7aWYoIW4uY3Jvc3NEb21haW58fHguc3VwcG9ydC5jb3JzKXt2YXIgcjtyZXR1cm57c2VuZDpmdW5jdGlvbihpLG8pe3ZhciBhLHMsbD1uLnhocigpO2lmKG4udXNlcm5hbWU/bC5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jLG4udXNlcm5hbWUsbi5wYXNzd29yZCk6bC5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jKSxuLnhockZpZWxkcylmb3IocyBpbiBuLnhockZpZWxkcylsW3NdPW4ueGhyRmllbGRzW3NdO24ubWltZVR5cGUmJmwub3ZlcnJpZGVNaW1lVHlwZSYmbC5vdmVycmlkZU1pbWVUeXBlKG4ubWltZVR5cGUpLG4uY3Jvc3NEb21haW58fGlbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGlbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTt0cnl7Zm9yKHMgaW4gaSlsLnNldFJlcXVlc3RIZWFkZXIocyxpW3NdKX1jYXRjaCh1KXt9bC5zZW5kKG4uaGFzQ29udGVudCYmbi5kYXRhfHxudWxsKSxyPWZ1bmN0aW9uKGUsaSl7dmFyIHMsdSxjLHA7dHJ5e2lmKHImJihpfHw0PT09bC5yZWFkeVN0YXRlKSlpZihyPXQsYSYmKGwub25yZWFkeXN0YXRlY2hhbmdlPXgubm9vcCwkbiYmZGVsZXRlIFBuW2FdKSxpKTQhPT1sLnJlYWR5U3RhdGUmJmwuYWJvcnQoKTtlbHNle3A9e30scz1sLnN0YXR1cyx1PWwuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksInN0cmluZyI9PXR5cGVvZiBsLnJlc3BvbnNlVGV4dCYmKHAudGV4dD1sLnJlc3BvbnNlVGV4dCk7dHJ5e2M9bC5zdGF0dXNUZXh0fWNhdGNoKGYpe2M9IiJ9c3x8IW4uaXNMb2NhbHx8bi5jcm9zc0RvbWFpbj8xMjIzPT09cyYmKHM9MjA0KTpzPXAudGV4dD8yMDA6NDA0fX1jYXRjaChkKXtpfHxvKC0xLGQpfXAmJm8ocyxjLHAsdSl9LG4uYXN5bmM/ND09PWwucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHIpOihhPSsrV24sJG4mJihQbnx8KFBuPXt9LHgoZSkudW5sb2FkKCRuKSksUG5bYV09ciksbC5vbnJlYWR5c3RhdGVjaGFuZ2U9cik6cigpfSxhYm9ydDpmdW5jdGlvbigpe3ImJnIodCwhMCl9fX19KTt2YXIgWG4sVW4sVm49L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFluPVJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3crIikoW2EteiVdKikkIiwiaSIpLEpuPS9xdWV1ZUhvb2tzJC8sR249W25yXSxRbj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KSxyPW4uY3VyKCksaT1Zbi5leGVjKHQpLG89aSYmaVszXXx8KHguY3NzTnVtYmVyW2VdPyIiOiJweCIpLGE9KHguY3NzTnVtYmVyW2VdfHwicHgiIT09byYmK3IpJiZZbi5leGVjKHguY3NzKG4uZWxlbSxlKSkscz0xLGw9MjA7aWYoYSYmYVszXSE9PW8pe289b3x8YVszXSxpPWl8fFtdLGE9K3J8fDE7ZG8gcz1zfHwiLjUiLGEvPXMseC5zdHlsZShuLmVsZW0sZSxhK28pO3doaWxlKHMhPT0ocz1uLmN1cigpL3IpJiYxIT09cyYmLS1sKX1yZXR1cm4gaSYmKGE9bi5zdGFydD0rYXx8K3J8fDAsbi51bml0PW8sbi5lbmQ9aVsxXT9hKyhpWzFdKzEpKmlbMl06K2lbMl0pLG59XX07ZnVuY3Rpb24gS24oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1huPXR9KSxYbj14Lm5vdygpfWZ1bmN0aW9uIFpuKGUsdCxuKXt2YXIgcixpPShRblt0XXx8W10pLmNvbmNhdChRblsiKiJdKSxvPTAsYT1pLmxlbmd0aDtmb3IoO2E+bztvKyspaWYocj1pW29dLmNhbGwobix0LGUpKXJldHVybiByfWZ1bmN0aW9uIGVyKGUsdCxuKXt2YXIgcixpLG89MCxhPUduLmxlbmd0aCxzPXguRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgbC5lbGVtfSksbD1mdW5jdGlvbigpe2lmKGkpcmV0dXJuITE7dmFyIHQ9WG58fEtuKCksbj1NYXRoLm1heCgwLHUuc3RhcnRUaW1lK3UuZHVyYXRpb24tdCkscj1uL3UuZHVyYXRpb258fDAsbz0xLXIsYT0wLGw9dS50d2VlbnMubGVuZ3RoO2Zvcig7bD5hO2ErKyl1LnR3ZWVuc1thXS5ydW4obyk7cmV0dXJuIHMubm90aWZ5V2l0aChlLFt1LG8sbl0pLDE+byYmbD9uOihzLnJlc29sdmVXaXRoKGUsW3VdKSwhMSl9LHU9cy5wcm9taXNlKHtlbGVtOmUscHJvcHM6eC5leHRlbmQoe30sdCksb3B0czp4LmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fX0sbiksb3JpZ2luYWxQcm9wZXJ0aWVzOnQsb3JpZ2luYWxPcHRpb25zOm4sc3RhcnRUaW1lOlhufHxLbigpLGR1cmF0aW9uOm4uZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHQsbil7dmFyIHI9eC5Ud2VlbihlLHUub3B0cyx0LG4sdS5vcHRzLnNwZWNpYWxFYXNpbmdbdF18fHUub3B0cy5lYXNpbmcpO3JldHVybiB1LnR3ZWVucy5wdXNoKHIpLHJ9LHN0b3A6ZnVuY3Rpb24odCl7dmFyIG49MCxyPXQ/dS50d2VlbnMubGVuZ3RoOjA7aWYoaSlyZXR1cm4gdGhpcztmb3IoaT0hMDtyPm47bisrKXUudHdlZW5zW25dLnJ1bigxKTtyZXR1cm4gdD9zLnJlc29sdmVXaXRoKGUsW3UsdF0pOnMucmVqZWN0V2l0aChlLFt1LHRdKSx0aGlzfX0pLGM9dS5wcm9wcztmb3IodHIoYyx1Lm9wdHMuc3BlY2lhbEVhc2luZyk7YT5vO28rKylpZihyPUduW29dLmNhbGwodSxlLGMsdS5vcHRzKSlyZXR1cm4gcjtyZXR1cm4geC5tYXAoYyxabix1KSx4LmlzRnVuY3Rpb24odS5vcHRzLnN0YXJ0KSYmdS5vcHRzLnN0YXJ0LmNhbGwoZSx1KSx4LmZ4LnRpbWVyKHguZXh0ZW5kKGwse2VsZW06ZSxhbmltOnUscXVldWU6dS5vcHRzLnF1ZXVlfSkpLHUucHJvZ3Jlc3ModS5vcHRzLnByb2dyZXNzKS5kb25lKHUub3B0cy5kb25lLHUub3B0cy5jb21wbGV0ZSkuZmFpbCh1Lm9wdHMuZmFpbCkuYWx3YXlzKHUub3B0cy5hbHdheXMpfWZ1bmN0aW9uIHRyKGUsdCl7dmFyIG4scixpLG8sYTtmb3IobiBpbiBlKWlmKHI9eC5jYW1lbENhc2UobiksaT10W3JdLG89ZVtuXSx4LmlzQXJyYXkobykmJihpPW9bMV0sbz1lW25dPW9bMF0pLG4hPT1yJiYoZVtyXT1vLGRlbGV0ZSBlW25dKSxhPXguY3NzSG9va3Nbcl0sYSYmImV4cGFuZCJpbiBhKXtvPWEuZXhwYW5kKG8pLGRlbGV0ZSBlW3JdO2ZvcihuIGluIG8pbiBpbiBlfHwoZVtuXT1vW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9eC5BbmltYXRpb249eC5leHRlbmQoZXIse3R3ZWVuZXI6ZnVuY3Rpb24oZSx0KXt4LmlzRnVuY3Rpb24oZSk/KHQ9ZSxlPVsiKiJdKTplPWUuc3BsaXQoIiAiKTt2YXIgbixyPTAsaT1lLmxlbmd0aDtmb3IoO2k+cjtyKyspbj1lW3JdLFFuW25dPVFuW25dfHxbXSxRbltuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P0duLnVuc2hpZnQoZSk6R24ucHVzaChlKX19KTtmdW5jdGlvbiBucihlLHQsbil7dmFyIHIsaSxvLGEscyxsLHU9dGhpcyxjPXt9LHA9ZS5zdHlsZSxmPWUubm9kZVR5cGUmJm5uKGUpLGQ9eC5fZGF0YShlLCJmeHNob3ciKTtuLnF1ZXVlfHwocz14Ll9xdWV1ZUhvb2tzKGUsImZ4IiksbnVsbD09cy51bnF1ZXVlZCYmKHMudW5xdWV1ZWQ9MCxsPXMuZW1wdHkuZmlyZSxzLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtzLnVucXVldWVkfHxsKCl9KSxzLnVucXVldWVkKyssdS5hbHdheXMoZnVuY3Rpb24oKXt1LmFsd2F5cyhmdW5jdGlvbigpe3MudW5xdWV1ZWQtLSx4LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxzLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1lLm5vZGVUeXBlJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSwiaW5saW5lIj09PXguY3NzKGUsImRpc3BsYXkiKSYmIm5vbmUiPT09eC5jc3MoZSwiZmxvYXQiKSYmKHguc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0JiYiaW5saW5lIiE9PWxuKGUubm9kZU5hbWUpP3Auem9vbT0xOnAuZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihwLm92ZXJmbG93PSJoaWRkZW4iLHguc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzfHx1LmFsd2F5cyhmdW5jdGlvbigpe3Aub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxwLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLHAub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSk7Zm9yKHIgaW4gdClpZihpPXRbcl0sVm4uZXhlYyhpKSl7aWYoZGVsZXRlIHRbcl0sbz1vfHwidG9nZ2xlIj09PWksaT09PShmPyJoaWRlIjoic2hvdyIpKWNvbnRpbnVlO2Nbcl09ZCYmZFtyXXx8eC5zdHlsZShlLHIpfWlmKCF4LmlzRW1wdHlPYmplY3QoYykpe2Q/ImhpZGRlbiJpbiBkJiYoZj1kLmhpZGRlbik6ZD14Ll9kYXRhKGUsImZ4c2hvdyIse30pLG8mJihkLmhpZGRlbj0hZiksZj94KGUpLnNob3coKTp1LmRvbmUoZnVuY3Rpb24oKXt4KGUpLmhpZGUoKX0pLHUuZG9uZShmdW5jdGlvbigpe3ZhciB0O3guX3JlbW92ZURhdGEoZSwiZnhzaG93Iik7Zm9yKHQgaW4gYyl4LnN0eWxlKGUsdCxjW3RdKX0pO2ZvcihyIGluIGMpYT1abihmP2Rbcl06MCxyLHUpLHIgaW4gZHx8KGRbcl09YS5zdGFydCxmJiYoYS5lbmQ9YS5zdGFydCxhLnN0YXJ0PSJ3aWR0aCI9PT1yfHwiaGVpZ2h0Ij09PXI/MTowKSl9fWZ1bmN0aW9uIHJyKGUsdCxuLHIsaSl7cmV0dXJuIG5ldyByci5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfXguVHdlZW49cnIscnIucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjpycixpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHwic3dpbmciLHRoaXMub3B0aW9ucz10LHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1yLHRoaXMudW5pdD1vfHwoeC5jc3NOdW1iZXJbbl0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPXJyLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBlJiZlLmdldD9lLmdldCh0aGlzKTpyci5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oZSl7dmFyIHQsbj1yci5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5wb3M9dD10aGlzLm9wdGlvbnMuZHVyYXRpb24/eC5lYXNpbmdbdGhpcy5lYXNpbmddKGUsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpyci5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxyci5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9cnIucHJvdG90eXBlLHJyLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbnVsbD09ZS5lbGVtW2UucHJvcF18fGUuZWxlbS5zdHlsZSYmbnVsbCE9ZS5lbGVtLnN0eWxlW2UucHJvcF0/KHQ9eC5jc3MoZS5lbGVtLGUucHJvcCwiIiksdCYmImF1dG8iIT09dD90OjApOmUuZWxlbVtlLnByb3BdfSxzZXQ6ZnVuY3Rpb24oZSl7eC5meC5zdGVwW2UucHJvcF0/eC5meC5zdGVwW2UucHJvcF0oZSk6ZS5lbGVtLnN0eWxlJiYobnVsbCE9ZS5lbGVtLnN0eWxlW3guY3NzUHJvcHNbZS5wcm9wXV18fHguY3NzSG9va3NbZS5wcm9wXSk/eC5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCk6ZS5lbGVtW2UucHJvcF09ZS5ub3d9fX0scnIucHJvcEhvb2tzLnNjcm9sbFRvcD1yci5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSx4LmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49eC5mblt0XTt4LmZuW3RdPWZ1bmN0aW9uKGUscixpKXtyZXR1cm4gbnVsbD09ZXx8ImJvb2xlYW4iPT10eXBlb2YgZT9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoaXIodCwhMCksZSxyLGkpfX0pLHguZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKG5uKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT14LmlzRW1wdHlPYmplY3QoZSksbz14LnNwZWVkKHQsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIHQ9ZXIodGhpcyx4LmV4dGVuZCh7fSxlKSxvKTsoaXx8eC5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJnQuc3RvcCghMCl9O3JldHVybiBhLmZpbmlzaD1hLGl8fG8ucXVldWU9PT0hMT90aGlzLmVhY2goYSk6dGhpcy5xdWV1ZShvLnF1ZXVlLGEpfSxzdG9wOmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KHIpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJihyPW4sbj1lLGU9dCksbiYmZSE9PSExJiZ0aGlzLnF1ZXVlKGV8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLG49bnVsbCE9ZSYmZSsicXVldWVIb29rcyIsbz14LnRpbWVycyxhPXguX2RhdGEodGhpcyk7aWYobilhW25dJiZhW25dLnN0b3AmJmkoYVtuXSk7ZWxzZSBmb3IobiBpbiBhKWFbbl0mJmFbbl0uc3RvcCYmSm4udGVzdChuKSYmaShhW25dKTtmb3Iobj1vLmxlbmd0aDtuLS07KW9bbl0uZWxlbSE9PXRoaXN8fG51bGwhPWUmJm9bbl0ucXVldWUhPT1lfHwob1tuXS5hbmltLnN0b3AociksdD0hMSxvLnNwbGljZShuLDEpKTsodHx8IXIpJiZ4LmRlcXVldWUodGhpcyxlKX0pfSxmaW5pc2g6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT0hMSYmKGU9ZXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsbj14Ll9kYXRhKHRoaXMpLHI9bltlKyJxdWV1ZSJdLGk9bltlKyJxdWV1ZUhvb2tzIl0sbz14LnRpbWVycyxhPXI/ci5sZW5ndGg6MDtmb3Iobi5maW5pc2g9ITAseC5xdWV1ZSh0aGlzLGUsW10pLGkmJmkuc3RvcCYmaS5zdG9wLmNhbGwodGhpcywhMCksdD1vLmxlbmd0aDt0LS07KW9bdF0uZWxlbT09PXRoaXMmJm9bdF0ucXVldWU9PT1lJiYob1t0XS5hbmltLnN0b3AoITApLG8uc3BsaWNlKHQsMSkpO2Zvcih0PTA7YT50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KTtmdW5jdGlvbiBpcihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPVp0W2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9eC5lYWNoKHtzbGlkZURvd246aXIoInNob3ciKSxzbGlkZVVwOmlyKCJoaWRlIiksc2xpZGVUb2dnbGU6aXIoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHguc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT94LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fHguaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYheC5pc0Z1bmN0aW9uKHQpJiZ0fTtyZXR1cm4gci5kdXJhdGlvbj14LmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2Ygci5kdXJhdGlvbj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4geC5meC5zcGVlZHM/eC5meC5zcGVlZHNbci5kdXJhdGlvbl06eC5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PXIucXVldWV8fHIucXVldWU9PT0hMCkmJihyLnF1ZXVlPSJmeCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe3guaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmeC5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHguZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LHgudGltZXJzPVtdLHguZng9cnIucHJvdG90eXBlLmluaXQseC5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsbj14LnRpbWVycyxyPTA7Zm9yKFhuPXgubm93KCk7bi5sZW5ndGg+cjtyKyspZT1uW3JdLGUoKXx8bltyXSE9PWV8fG4uc3BsaWNlKHItLSwxKTtuLmxlbmd0aHx8eC5meC5zdG9wKCksWG49dH0seC5meC50aW1lcj1mdW5jdGlvbihlKXtlKCkmJngudGltZXJzLnB1c2goZSkmJnguZnguc3RhcnQoKX0seC5meC5pbnRlcnZhbD0xMyx4LmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7VW58fChVbj1zZXRJbnRlcnZhbCh4LmZ4LnRpY2sseC5meC5pbnRlcnZhbCkpfSx4LmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKFVuKSxVbj1udWxsfSx4LmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSx4LmZ4LnN0ZXA9e30seC5leHByJiZ4LmV4cHIuZmlsdGVycyYmKHguZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiB4LmdyZXAoeC50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9KSx4LmZuLm9mZnNldD1mdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBlPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbih0KXt4Lm9mZnNldC5zZXRPZmZzZXQodGhpcyxlLHQpfSk7dmFyIG4scixvPXt0b3A6MCxsZWZ0OjB9LGE9dGhpc1swXSxzPWEmJmEub3duZXJEb2N1bWVudDtpZihzKXJldHVybiBuPXMuZG9jdW1lbnRFbGVtZW50LHguY29udGFpbnMobixhKT8odHlwZW9mIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09aSYmKG89YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkscj1vcihzKSx7dG9wOm8udG9wKyhyLnBhZ2VZT2Zmc2V0fHxuLnNjcm9sbFRvcCktKG4uY2xpZW50VG9wfHwwKSxsZWZ0Om8ubGVmdCsoci5wYWdlWE9mZnNldHx8bi5zY3JvbGxMZWZ0KS0obi5jbGllbnRMZWZ0fHwwKX0pOm99LHgub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXguY3NzKGUsInBvc2l0aW9uIik7InN0YXRpYyI9PT1yJiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKTt2YXIgaT14KGUpLG89aS5vZmZzZXQoKSxhPXguY3NzKGUsInRvcCIpLHM9eC5jc3MoZSwibGVmdCIpLGw9KCJhYnNvbHV0ZSI9PT1yfHwiZml4ZWQiPT09cikmJnguaW5BcnJheSgiYXV0byIsW2Esc10pPi0xLHU9e30sYz17fSxwLGY7bD8oYz1pLnBvc2l0aW9uKCkscD1jLnRvcCxmPWMubGVmdCk6KHA9cGFyc2VGbG9hdChhKXx8MCxmPXBhcnNlRmxvYXQocyl8fDApLHguaXNGdW5jdGlvbih0KSYmKHQ9dC5jYWxsKGUsbixvKSksbnVsbCE9dC50b3AmJih1LnRvcD10LnRvcC1vLnRvcCtwKSxudWxsIT10LmxlZnQmJih1LmxlZnQ9dC5sZWZ0LW8ubGVmdCtmKSwidXNpbmciaW4gdD90LnVzaW5nLmNhbGwoZSx1KTppLmNzcyh1KX19LHguZm4uZXh0ZW5kKHtwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbj17dG9wOjAsbGVmdDowfSxyPXRoaXNbMF07cmV0dXJuImZpeGVkIj09PXguY3NzKHIsInBvc2l0aW9uIik/dD1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihlPXRoaXMub2Zmc2V0UGFyZW50KCksdD10aGlzLm9mZnNldCgpLHgubm9kZU5hbWUoZVswXSwiaHRtbCIpfHwobj1lLm9mZnNldCgpKSxuLnRvcCs9eC5jc3MoZVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxuLmxlZnQrPXguY3NzKGVbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOnQudG9wLW4udG9wLXguY3NzKHIsIm1hcmdpblRvcCIsITApLGxlZnQ6dC5sZWZ0LW4ubGVmdC14LmNzcyhyLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vZmZzZXRQYXJlbnR8fHM7d2hpbGUoZSYmIXgubm9kZU5hbWUoZSwiaHRtbCIpJiYic3RhdGljIj09PXguY3NzKGUsInBvc2l0aW9uIikpZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8c30pfX0pLHguZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihlLG4pe3ZhciByPS9ZLy50ZXN0KG4pO3guZm5bZV09ZnVuY3Rpb24oaSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSxpLG8pe3ZhciBhPW9yKGUpO3JldHVybiBvPT09dD9hP24gaW4gYT9hW25dOmEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W2ldOmVbaV06KGE/YS5zY3JvbGxUbyhyP3goYSkuc2Nyb2xsTGVmdCgpOm8scj9vOngoYSkuc2Nyb2xsVG9wKCkpOmVbaV09byx0KX0sZSxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7ZnVuY3Rpb24gb3IoZSl7cmV0dXJuIHguaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZT9lLmRlZmF1bHRWaWV3fHxlLnBhcmVudFdpbmRvdzohMX14LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLG4pe3guZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDpuLCIiOiJvdXRlciIrZX0sZnVuY3Rpb24ocixpKXt4LmZuW2ldPWZ1bmN0aW9uKGksbyl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aCYmKHJ8fCJib29sZWFuIiE9dHlwZW9mIGkpLHM9cnx8KGk9PT0hMHx8bz09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbihuLHIsaSl7dmFyIG87cmV0dXJuIHguaXNXaW5kb3cobik/bi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrZV06OT09PW4ubm9kZVR5cGU/KG89bi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgobi5ib2R5WyJzY3JvbGwiK2VdLG9bInNjcm9sbCIrZV0sbi5ib2R5WyJvZmZzZXQiK2VdLG9bIm9mZnNldCIrZV0sb1siY2xpZW50IitlXSkpOmk9PT10P3guY3NzKG4scixzKTp4LnN0eWxlKG4scixpLHMpfSxuLGE/aTp0LGEsbnVsbCl9fSl9KSx4LmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LHguZm4uYW5kU2VsZj14LmZuLmFkZEJhY2ssIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz14OihlLmpRdWVyeT1lLiQ9eCwiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4geH0pKX0pKHdpbmRvdyk7Cg=="},{"meta":{"name":"clipboard.min.js","url":"https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js","ts":1642390204917,"mimetype":"text/javascript"},"source":"LyohCiAqIGNsaXBib2FyZC5qcyB2Mi4wLjYKICogaHR0cHM6Ly9jbGlwYm9hcmRqcy5jb20vCiAqIAogKiBMaWNlbnNlZCBNSVQgwqkgWmVubyBSb2NoYQogKi8KIWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuQ2xpcGJvYXJkSlM9ZSgpOnQuQ2xpcGJvYXJkSlM9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG89e30sci5tPW49W2Z1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlO2lmKCJTRUxFQ1QiPT09dC5ub2RlTmFtZSl0LmZvY3VzKCksZT10LnZhbHVlO2Vsc2UgaWYoIklOUFVUIj09PXQubm9kZU5hbWV8fCJURVhUQVJFQSI9PT10Lm5vZGVOYW1lKXt2YXIgbj10Lmhhc0F0dHJpYnV0ZSgicmVhZG9ubHkiKTtufHx0LnNldEF0dHJpYnV0ZSgicmVhZG9ubHkiLCIiKSx0LnNlbGVjdCgpLHQuc2V0U2VsZWN0aW9uUmFuZ2UoMCx0LnZhbHVlLmxlbmd0aCksbnx8dC5yZW1vdmVBdHRyaWJ1dGUoInJlYWRvbmx5IiksZT10LnZhbHVlfWVsc2V7dC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRlZGl0YWJsZSIpJiZ0LmZvY3VzKCk7dmFyIG89d2luZG93LmdldFNlbGVjdGlvbigpLHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyLnNlbGVjdE5vZGVDb250ZW50cyh0KSxvLnJlbW92ZUFsbFJhbmdlcygpLG8uYWRkUmFuZ2UociksZT1vLnRvU3RyaW5nKCl9cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt9bi5wcm90b3R5cGU9e29uOmZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzLmV8fCh0aGlzLmU9e30pO3JldHVybihvW3RdfHwob1t0XT1bXSkpLnB1c2goe2ZuOmUsY3R4Om59KSx0aGlzfSxvbmNlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO2Z1bmN0aW9uIHIoKXtvLm9mZih0LHIpLGUuYXBwbHkobixhcmd1bWVudHMpfXJldHVybiByLl89ZSx0aGlzLm9uKHQscixuKX0sZW1pdDpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksbj0oKHRoaXMuZXx8KHRoaXMuZT17fSkpW3RdfHxbXSkuc2xpY2UoKSxvPTAscj1uLmxlbmd0aDtvPHI7bysrKW5bb10uZm4uYXBwbHkobltvXS5jdHgsZSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZXx8KHRoaXMuZT17fSksbz1uW3RdLHI9W107aWYobyYmZSlmb3IodmFyIGk9MCxhPW8ubGVuZ3RoO2k8YTtpKyspb1tpXS5mbiE9PWUmJm9baV0uZm4uXyE9PWUmJnIucHVzaChvW2ldKTtyZXR1cm4gci5sZW5ndGg/blt0XT1yOmRlbGV0ZSBuW3RdLHRoaXN9fSx0LmV4cG9ydHM9bix0LmV4cG9ydHMuVGlueUVtaXR0ZXI9bn0sZnVuY3Rpb24odCxlLG4pe3ZhciBkPW4oMyksaD1uKDQpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7aWYoIXQmJiFlJiYhbil0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnRzIik7aWYoIWQuc3RyaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIlNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgU3RyaW5nIik7aWYoIWQuZm4obikpdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhpcmQgYXJndW1lbnQgbXVzdCBiZSBhIEZ1bmN0aW9uIik7aWYoZC5ub2RlKHQpKXJldHVybiBzPWUsZj1uLCh1PXQpLmFkZEV2ZW50TGlzdGVuZXIocyxmKSx7ZGVzdHJveTpmdW5jdGlvbigpe3UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGYpfX07aWYoZC5ub2RlTGlzdCh0KSlyZXR1cm4gYT10LGM9ZSxsPW4sQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKHQpe3QuYWRkRXZlbnRMaXN0ZW5lcihjLGwpfSkse2Rlc3Ryb3k6ZnVuY3Rpb24oKXtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24odCl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGMsbCl9KX19O2lmKGQuc3RyaW5nKHQpKXJldHVybiBvPXQscj1lLGk9bixoKGRvY3VtZW50LmJvZHksbyxyLGkpO3Rocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmcsIEhUTUxFbGVtZW50LCBIVE1MQ29sbGVjdGlvbiwgb3IgTm9kZUxpc3QiKTt2YXIgbyxyLGksYSxjLGwsdSxzLGZ9fSxmdW5jdGlvbih0LG4pe24ubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmdCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYxPT09dC5ub2RlVHlwZX0sbi5ub2RlTGlzdD1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCk7cmV0dXJuIHZvaWQgMCE9PXQmJigiW29iamVjdCBOb2RlTGlzdF0iPT09ZXx8IltvYmplY3QgSFRNTENvbGxlY3Rpb25dIj09PWUpJiYibGVuZ3RoImluIHQmJigwPT09dC5sZW5ndGh8fG4ubm9kZSh0WzBdKSl9LG4uc3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIFN0cmluZ30sbi5mbj1mdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBGdW5jdGlvbl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBhPW4oNSk7ZnVuY3Rpb24gaSh0LGUsbixvLHIpe3ZhciBpPWZ1bmN0aW9uKGUsbix0LG8pe3JldHVybiBmdW5jdGlvbih0KXt0LmRlbGVnYXRlVGFyZ2V0PWEodC50YXJnZXQsbiksdC5kZWxlZ2F0ZVRhcmdldCYmby5jYWxsKGUsdCl9fS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcihuLGkscikse2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIobixpLHIpfX19dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLG8scil7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQuYWRkRXZlbnRMaXN0ZW5lcj9pLmFwcGx5KG51bGwsYXJndW1lbnRzKToiZnVuY3Rpb24iPT10eXBlb2Ygbj9pLmJpbmQobnVsbCxkb2N1bWVudCkuYXBwbHkobnVsbCxhcmd1bWVudHMpOigic3RyaW5nIj09dHlwZW9mIHQmJih0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodCkpLEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0LGZ1bmN0aW9uKHQpe3JldHVybiBpKHQsZSxuLG8scil9KSl9fSxmdW5jdGlvbih0LGUpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgRWxlbWVudCYmIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpe3ZhciBuPUVsZW1lbnQucHJvdG90eXBlO24ubWF0Y2hlcz1uLm1hdGNoZXNTZWxlY3Rvcnx8bi5tb3pNYXRjaGVzU2VsZWN0b3J8fG4ubXNNYXRjaGVzU2VsZWN0b3J8fG4ub01hdGNoZXNTZWxlY3Rvcnx8bi53ZWJraXRNYXRjaGVzU2VsZWN0b3J9dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7Zm9yKDt0JiY5IT09dC5ub2RlVHlwZTspe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0Lm1hdGNoZXMmJnQubWF0Y2hlcyhlKSlyZXR1cm4gdDt0PXQucGFyZW50Tm9kZX19fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24ucihlKTt2YXIgbz1uKDApLHI9bi5uKG8pLGk9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9O2Z1bmN0aW9uIGEodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG8ua2V5LG8pfX1mdW5jdGlvbiBjKHQpeyFmdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfSh0aGlzLGMpLHRoaXMucmVzb2x2ZU9wdGlvbnModCksdGhpcy5pbml0U2VsZWN0aW9uKCl9dmFyIGw9KGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSYmYSh0LnByb3RvdHlwZSxlKSxuJiZhKHQsbiksdH0oYyxbe2tleToicmVzb2x2ZU9wdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90Ont9O3RoaXMuYWN0aW9uPWUuYWN0aW9uLHRoaXMuY29udGFpbmVyPWUuY29udGFpbmVyLHRoaXMuZW1pdHRlcj1lLmVtaXR0ZXIsdGhpcy50YXJnZXQ9ZS50YXJnZXQsdGhpcy50ZXh0PWUudGV4dCx0aGlzLnRyaWdnZXI9ZS50cmlnZ2VyLHRoaXMuc2VsZWN0ZWRUZXh0PSIifX0se2tleToiaW5pdFNlbGVjdGlvbiIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRleHQ/dGhpcy5zZWxlY3RGYWtlKCk6dGhpcy50YXJnZXQmJnRoaXMuc2VsZWN0VGFyZ2V0KCl9fSx7a2V5OiJzZWxlY3RGYWtlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT0icnRsIj09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgiZGlyIik7dGhpcy5yZW1vdmVGYWtlKCksdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHQucmVtb3ZlRmFrZSgpfSx0aGlzLmZha2VIYW5kbGVyPXRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2spfHwhMCx0aGlzLmZha2VFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIiksdGhpcy5mYWtlRWxlbS5zdHlsZS5mb250U2l6ZT0iMTJwdCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5ib3JkZXI9IjAiLHRoaXMuZmFrZUVsZW0uc3R5bGUucGFkZGluZz0iMCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5tYXJnaW49IjAiLHRoaXMuZmFrZUVsZW0uc3R5bGUucG9zaXRpb249ImFic29sdXRlIix0aGlzLmZha2VFbGVtLnN0eWxlW2U/InJpZ2h0IjoibGVmdCJdPSItOTk5OXB4Ijt2YXIgbj13aW5kb3cucGFnZVlPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7dGhpcy5mYWtlRWxlbS5zdHlsZS50b3A9bisicHgiLHRoaXMuZmFrZUVsZW0uc2V0QXR0cmlidXRlKCJyZWFkb25seSIsIiIpLHRoaXMuZmFrZUVsZW0udmFsdWU9dGhpcy50ZXh0LHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZmFrZUVsZW0pLHRoaXMuc2VsZWN0ZWRUZXh0PXIoKSh0aGlzLmZha2VFbGVtKSx0aGlzLmNvcHlUZXh0KCl9fSx7a2V5OiJyZW1vdmVGYWtlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZmFrZUhhbmRsZXImJih0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrKSx0aGlzLmZha2VIYW5kbGVyPW51bGwsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPW51bGwpLHRoaXMuZmFrZUVsZW0mJih0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZha2VFbGVtKSx0aGlzLmZha2VFbGVtPW51bGwpfX0se2tleToic2VsZWN0VGFyZ2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRUZXh0PXIoKSh0aGlzLnRhcmdldCksdGhpcy5jb3B5VGV4dCgpfX0se2tleToiY29weVRleHQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dm9pZCAwO3RyeXtlPWRvY3VtZW50LmV4ZWNDb21tYW5kKHRoaXMuYWN0aW9uKX1jYXRjaCh0KXtlPSExfXRoaXMuaGFuZGxlUmVzdWx0KGUpfX0se2tleToiaGFuZGxlUmVzdWx0Iix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmVtaXR0ZXIuZW1pdCh0PyJzdWNjZXNzIjoiZXJyb3IiLHthY3Rpb246dGhpcy5hY3Rpb24sdGV4dDp0aGlzLnNlbGVjdGVkVGV4dCx0cmlnZ2VyOnRoaXMudHJpZ2dlcixjbGVhclNlbGVjdGlvbjp0aGlzLmNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcyl9KX19LHtrZXk6ImNsZWFyU2VsZWN0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudHJpZ2dlciYmdGhpcy50cmlnZ2VyLmZvY3VzKCksZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCksd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpfX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUZha2UoKX19LHtrZXk6ImFjdGlvbiIsc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90OiJjb3B5IjtpZih0aGlzLl9hY3Rpb249ZSwiY29weSIhPT10aGlzLl9hY3Rpb24mJiJjdXQiIT09dGhpcy5fYWN0aW9uKXRocm93IG5ldyBFcnJvcignSW52YWxpZCAiYWN0aW9uIiB2YWx1ZSwgdXNlIGVpdGhlciAiY29weSIgb3IgImN1dCInKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGlvbn19LHtrZXk6InRhcmdldCIsc2V0OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9PXQpe2lmKCF0fHwib2JqZWN0IiE9PSh2b2lkIDA9PT10PyJ1bmRlZmluZWQiOmkodCkpfHwxIT09dC5ub2RlVHlwZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInRhcmdldCIgdmFsdWUsIHVzZSBhIHZhbGlkIEVsZW1lbnQnKTtpZigiY29weSI9PT10aGlzLmFjdGlvbiYmdC5oYXNBdHRyaWJ1dGUoImRpc2FibGVkIikpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJ0YXJnZXQiIGF0dHJpYnV0ZS4gUGxlYXNlIHVzZSAicmVhZG9ubHkiIGluc3RlYWQgb2YgImRpc2FibGVkIiBhdHRyaWJ1dGUnKTtpZigiY3V0Ij09PXRoaXMuYWN0aW9uJiYodC5oYXNBdHRyaWJ1dGUoInJlYWRvbmx5Iil8fHQuaGFzQXR0cmlidXRlKCJkaXNhYmxlZCIpKSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInRhcmdldCIgYXR0cmlidXRlLiBZb3UgY2FuXCd0IGN1dCB0ZXh0IGZyb20gZWxlbWVudHMgd2l0aCAicmVhZG9ubHkiIG9yICJkaXNhYmxlZCIgYXR0cmlidXRlcycpO3RoaXMuX3RhcmdldD10fX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldH19XSksYyksdT1uKDEpLHM9bi5uKHUpLGY9bigyKSxkPW4ubihmKSxoPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSxwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSYmeSh0LnByb3RvdHlwZSxlKSxuJiZ5KHQsbiksdH07ZnVuY3Rpb24geSh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgbz1lW25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsby5rZXksbyl9fXZhciBtPShmdW5jdGlvbih0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9KHYscy5hKSxwKHYsW3trZXk6InJlc29sdmVPcHRpb25zIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQ/dDp7fTt0aGlzLmFjdGlvbj0iZnVuY3Rpb24iPT10eXBlb2YgZS5hY3Rpb24/ZS5hY3Rpb246dGhpcy5kZWZhdWx0QWN0aW9uLHRoaXMudGFyZ2V0PSJmdW5jdGlvbiI9PXR5cGVvZiBlLnRhcmdldD9lLnRhcmdldDp0aGlzLmRlZmF1bHRUYXJnZXQsdGhpcy50ZXh0PSJmdW5jdGlvbiI9PXR5cGVvZiBlLnRleHQ/ZS50ZXh0OnRoaXMuZGVmYXVsdFRleHQsdGhpcy5jb250YWluZXI9Im9iamVjdCI9PT1oKGUuY29udGFpbmVyKT9lLmNvbnRhaW5lcjpkb2N1bWVudC5ib2R5fX0se2tleToibGlzdGVuQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5saXN0ZW5lcj1kKCkodCwiY2xpY2siLGZ1bmN0aW9uKHQpe3JldHVybiBlLm9uQ2xpY2sodCl9KX19LHtrZXk6Im9uQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGVsZWdhdGVUYXJnZXR8fHQuY3VycmVudFRhcmdldDt0aGlzLmNsaXBib2FyZEFjdGlvbiYmKHRoaXMuY2xpcGJvYXJkQWN0aW9uPW51bGwpLHRoaXMuY2xpcGJvYXJkQWN0aW9uPW5ldyBsKHthY3Rpb246dGhpcy5hY3Rpb24oZSksdGFyZ2V0OnRoaXMudGFyZ2V0KGUpLHRleHQ6dGhpcy50ZXh0KGUpLGNvbnRhaW5lcjp0aGlzLmNvbnRhaW5lcix0cmlnZ2VyOmUsZW1pdHRlcjp0aGlzfSl9fSx7a2V5OiJkZWZhdWx0QWN0aW9uIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gYigiYWN0aW9uIix0KX19LHtrZXk6ImRlZmF1bHRUYXJnZXQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWIoInRhcmdldCIsdCk7aWYoZSlyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKX19LHtrZXk6ImRlZmF1bHRUZXh0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gYigidGV4dCIsdCl9fSx7a2V5OiJkZXN0cm95Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuZXIuZGVzdHJveSgpLHRoaXMuY2xpcGJvYXJkQWN0aW9uJiYodGhpcy5jbGlwYm9hcmRBY3Rpb24uZGVzdHJveSgpLHRoaXMuY2xpcGJvYXJkQWN0aW9uPW51bGwpfX1dLFt7a2V5OiJpc1N1cHBvcnRlZCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10P3Q6WyJjb3B5IiwiY3V0Il0sbj0ic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUsbz0hIWRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZDtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe289byYmISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQodCl9KSxvfX1dKSx2KTtmdW5jdGlvbiB2KHQsZSl7IWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9KHRoaXMsdik7dmFyIG49ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX0odGhpcywodi5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih2KSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4ucmVzb2x2ZU9wdGlvbnMoZSksbi5saXN0ZW5DbGljayh0KSxufWZ1bmN0aW9uIGIodCxlKXt2YXIgbj0iZGF0YS1jbGlwYm9hcmQtIit0O2lmKGUuaGFzQXR0cmlidXRlKG4pKXJldHVybiBlLmdldEF0dHJpYnV0ZShuKX1lLmRlZmF1bHQ9bX1dLHIuYz1vLHIuZD1mdW5jdGlvbih0LGUsbil7ci5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0Om59KX0sci5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LHIudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9cihlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtpZihyLnIobiksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJiJzdHJpbmciIT10eXBlb2YgZSlmb3IodmFyIG8gaW4gZSlyLmQobixvLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsbykpO3JldHVybiBufSxyLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIHIuZChlLCJhIixlKSxlfSxyLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LHIucD0iIixyKHIucz02KS5kZWZhdWx0O2Z1bmN0aW9uIHIodCl7aWYob1t0XSlyZXR1cm4gb1t0XS5leHBvcnRzO3ZhciBlPW9bdF09e2k6dCxsOiExLGV4cG9ydHM6e319O3JldHVybiBuW3RdLmNhbGwoZS5leHBvcnRzLGUsZS5leHBvcnRzLHIpLGUubD0hMCxlLmV4cG9ydHN9dmFyIG4sb30pOw=="}]},{"name":"解析腾讯，优酷，爱奇艺等全网会员视频，vip视频，添加百度网盘超级会员账号共享","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_prototypes":false,"noframes":null,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://v.youku.com/v_*","*://m.youku.com/v*","*://m.youku.com/a*","*://*.iqiyi.com/v_*","*://*.iqiyi.com/w_*","*://*.iqiyi.com/a_*","*://*.iqiyi.com/dianying/*","*://*.le.com/ptv/vplay/*","*v.qq.com/x/cover/*","*v.qq.com/x/page/*","*v.qq.com/play*","*://pan.baidu.com/*","*://*.tudou.com/listplay/*","*://*.tudou.com/albumplay/*","*://*.tudou.com/programs/view/*","*://*.mgtv.com/b/*","*://film.sohu.com/album/*","*://tv.sohu.com/*","*://*.bilibili.com/video/*","*://*.bilibili.com/anime/*","*://*.bilibili.com/bangumi/play/*","*://vip.pptv.com/show/*","*://v.pptv.com/show/*","*://*.baofeng.com/play/*","*://v.yinyuetai.com/video/*","*://v.yinyuetai.com/playlist/*","*://vip.1905.com/play/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1642390231462,"data":{}},"enabled":true,"position":13,"uuid":"2d27556b-a026-48ef-aa24-a2fbdbfde369","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgIOino+aekOiFvuiur++8jOS8mOmFt++8jOeIseWlh+iJuuetieWFqOe9keS8muWRmOinhumike+8jHZpcOinhumike+8jOa3u+WKoOeZvuW6pue9keebmOi2hee6p+S8muWRmOi0puWPt+WFseS6qwovLyBAbmFtZXNwYWNlICAgICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi91c2Vycy83MDQxMDYKLy8gQHZlcnNpb24gICAgICAgICAgIDIuOS4zCi8vIEBpY29uICAgICAgICAgICAgICAKLy8gQGRlc2NyaXB0aW9uICAgICAgIOino+aekOS8muWRmOinhumike+8jHZpcOinhumike+8jOaUr+aMgeiFvuiur++8jOS8mOmFt++8jOeIseWlh+iJuu+8jOiKkuaenO+8jHBwdHbnrYkKLy8gQGFudGlmZWF0dXJlICAgICAgVGhlIHNjcmlwdCBjb3BpZXMgdGhlIFVSTCB0byB0aGUgcGFyc2luZyBzaXRlLCBzbyB0aGUgcGFnZSBjb250YWlucyBwYXJ0IG9mIHRoZSBwYXJzaW5nIHNpdGUgYWRzCi8vIEBhdXRob3IgICAgICAgICAgICBqbG1mCi8vIEBsaWNlbnNlICAgICAgICAgICBNSVQKLy8gQHN1cHBvcnRVUkwgICAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vdXNlcnMvNzA0MTA2Ci8vIEBpbmNsdWRlICAgICAgICAgICAgKjovL3YueW91a3UuY29tL3ZfKgovLyBAaW5jbHVkZSAgICAgICAgICAgICAqOi8vbS55b3VrdS5jb20vdioKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovL20ueW91a3UuY29tL2EqCi8vIEBpbmNsdWRlICAgICAgICAgICAgICo6Ly8qLmlxaXlpLmNvbS92XyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAqOi8vKi5pcWl5aS5jb20vd18qCi8vIEBpbmNsdWRlICAgICAgICAgICAgICo6Ly8qLmlxaXlpLmNvbS9hXyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovLyouaXFpeWkuY29tL2RpYW55aW5nLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAqOi8vKi5sZS5jb20vcHR2L3ZwbGF5LyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKnYucXEuY29tL3gvY292ZXIvKgovLyBAaW5jbHVkZSAgICAgICAgICAgICAqdi5xcS5jb20veC9wYWdlLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKnYucXEuY29tL3BsYXkqCi8vIEBpbmNsdWRlICAgICAgICAgICAgICo6Ly9wYW4uYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovLyoudHVkb3UuY29tL2xpc3RwbGF5LyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovLyoudHVkb3UuY29tL2FsYnVtcGxheS8qCi8vIEBpbmNsdWRlICAgICAgICAgICAgICo6Ly8qLnR1ZG91LmNvbS9wcm9ncmFtcy92aWV3LyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovLyoubWd0di5jb20vYi8qCi8vIEBpbmNsdWRlICAgICAgICAgICAgICo6Ly9maWxtLnNvaHUuY29tL2FsYnVtLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovL3R2LnNvaHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovLyouYmlsaWJpbGkuY29tL3ZpZGVvLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovLyouYmlsaWJpbGkuY29tL2FuaW1lLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovLyouYmlsaWJpbGkuY29tL2Jhbmd1bWkvcGxheS8qCi8vIEBpbmNsdWRlICAgICAgICAgICAgICo6Ly92aXAucHB0di5jb20vc2hvdy8qCi8vIEBpbmNsdWRlICAgICAgICAgICAgKjovL3YucHB0di5jb20vc2hvdy8qCi8vIEBpbmNsdWRlICAgICAgICAgICAgICo6Ly8qLmJhb2ZlbmcuY29tL3BsYXkvKgovLyBAaW5jbHVkZSAgICAgICAgICAgICAqOi8vdi55aW55dWV0YWkuY29tL3ZpZGVvLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICAgKjovL3YueWlueXVldGFpLmNvbS9wbGF5bGlzdC8qCi8vIEBpbmNsdWRlICAgICAgICAgICAgICo6Ly92aXAuMTkwNS5jb20vcGxheS8qCi8vIEByZXF1aXJlICAgICAgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9qcXVlcnkvMS4xMi40L2pxdWVyeS5taW4uanMKLy8gQHJ1bi1hdCAgICAgICAgICAgIGRvY3VtZW50LWlkbGUKLy8gQGdyYW50ICAgICAgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAZ3JhbnQgICAgICAgICAgICAgR01fYWRkU3R5bGUKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgR01fYWRkU3R5bGUoJy5oLWljb24tcGxheSB7Y29sb3I6ICNkOTI2YjU7ZmlsbDogI2Q5MjZiNTtoZWlnaHQ6IDgwcHg7d2lkdGg6IDgwcHg7cG9zaXRpb246IGZpeGVkO3otaW5kZXg6IDk5OTk5O3RvcDogMHB4O2xlZnQ6IDA7Y3Vyc29yOiBwb2ludGVyO30gIC5oLW9sIHtwb3NpdGlvbjogZml4ZWQ7dG9wOiAzMHB4O2xlZnQ6IDIwcHg7ei1pbmRleDogOTk5OTk7Y291bnRlci1yZXNldDogbGk7bGlzdC1zdHlsZTogbm9uZTtmb250LXNpemU6IDhweDtwYWRkaW5nOiAwO21hcmdpbi1ib3R0b206IDJlbTt0ZXh0LXNoYWRvdzogMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIC41KTtkaXNwbGF5OiBub25lO30gIC5oLW9sIGEge3Bvc2l0aW9uOiByZWxhdGl2ZTtkaXNwbGF5OiBibG9jaztwYWRkaW5nOiAzcHggMTBweCAzcHggMmVtO21hcmdpbjogMC41ZW0gMDtiYWNrZ3JvdW5kOiAjZGRkO2NvbG9yOiAjNDQ0O3RleHQtZGVjb3JhdGlvbjogbm9uZTtib3JkZXItcmFkaXVzOiAwLjNlbTt0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLW91dDt9ICAuaC1vbCBhOmhvdmVyIHtiYWNrZ3JvdW5kOiAjZWVlO2NvbG9yOiAjZmY2ZjVjO3RyYW5zaXRpb246IGFsbCAwLjNzIGVhc2Utb3V0O30gIC5oLW9sIGE6OmJlZm9yZSB7Y29udGVudDogY291bnRlcihsaSk7Y291bnRlci1pbmNyZW1lbnQ6IGxpO3Bvc2l0aW9uOiBhYnNvbHV0ZTtsZWZ0OiAtMS4yZW07dG9wOiA1MCU7bWFyZ2luLXRvcDogLTEuMmVtO2JhY2tncm91bmQ6ICM4N2NlZWI7aGVpZ2h0OiAyZW07d2lkdGg6IDJlbTtsaW5lLWhlaWdodDogMmVtO2JvcmRlcjogMC4yZW0gc29saWQgI2ZmZjt0ZXh0LWFsaWduOiBjZW50ZXI7Zm9udC13ZWlnaHQ6IGJvbGQ7Ym9yZGVyLXJhZGl1czogMmVtO30nKTsKCiAgbGV0IGFwaSA9IFsKeyJuYW1lIjoiT0vop6PmnpAiLCJ1cmwiOiJodHRwczovL29ranguY2MvP3VybD0ifSwgIAp7Im5hbWUiOiIyayIsInVybCI6Imh0dHBzOi8vdmlwLjJrdHZiLmNvbS9wbGF5ZXIvP3VybD0ifSwgICAKeyJuYW1lIjoiUGFyd2l4IiwidXJsIjoiaHR0cHM6Ly92aXAucGFyd2l4LmNvbTo0NDMzL3BsYXllci8/dXJsPSJ9LAp7Im5hbWUiOiJibCIsInVybCI6Imh0dHBzOi8vdmlwLmJsamlleC5jb20vP3Y9In0sICAgCnsibmFtZSI6Im1ta3YiLCJ1cmwiOiJodHRwczovL2p4Lm1ta3YuY24vdHYucGhwP3VybD0ifSwKeyJuYW1lIjoi6KeG6aKR5rWBIiwidXJsIjoiaHR0cHM6Ly9qeC5tM3U4LnR2L2ppZXhpLz91cmw9In0sICAgIAp7Im5hbWUiOiLop6PmnpBsYSIsInVybCI6Imh0dHBzOi8vYXBpLmppZXhpLmxhLz91cmw9In0sCnsibmFtZSI6IjE3MTd5dW4iLCJ1cmwiOiJodHRwczovL3d3dy4xNzE3eXVuLmNvbS9qeC90eS5waHA/dXJsPSJ9LCAgCnsibmFtZSI6ImNrbW92MiIsInVybCI6Imh0dHBzOi8vY2ttb3YuY2N5ampkLmNvbS9ja21vdi8/dXJsPSJ9LCAgCnsibmFtZSI6InBsYXkiLCJ1cmwiOiJodHRwczovL3d3dy5wbGF5bTN1OC5jbi9qaWV4aS5waHA/dXJsPSJ9LCAKe25hbWU6ICdNMTk3MCcsIHVybDogJ2h0dHBzOi8vejEubTE5MDcuY24vP2p4PSd9LAp7Im5hbWUiOiLnm5jlj6QiLCJ1cmwiOiJodHRwczovL3d3dy5wYW5ndWppZXhpLmNjL2ppZXhpLnBocD91cmw9In0sCnsibmFtZSI6IuWknOW5lSIsInVybCI6Imh0dHBzOi8vd3d3LnllbXUueHl6Lz91cmw9In0sCnsibmFtZSI6IkNLIiwidXJsIjoiaHR0cHM6Ly93d3cuY2twbGF5ZXIudmlwL2ppZXhpLz91cmw9In0sIAp7Im5hbWUiOiJIOCIsInVybCI6Imh0dHBzOi8vd3d3Lmg4anguY29tL2ppZXhpLnBocD91cmw9In0sIAp7Im5hbWUiOiIwNTIzIiwidXJsIjoiaHR0cHM6Ly9nby55aDA1MjMuY24veS5jeT91cmw9In0sCnsibmFtZSI6InFpYW5xaSIsInVybCI6Imh0dHBzOi8vYXBpLnFpYW5xaS5uZXQvdmlwLz91cmw9In0sCnsibmFtZSI6ImFkbWluaXN0cmF0b3J3IiwidXJsIjoiaHR0cHM6Ly93d3cuYWRtaW5pc3RyYXRvcncuY29tL3ZpZGVvLnBocD91cmw9In0sIAp7Im5hbWUiOiI4MDkwZyIsInVybCI6Imh0dHBzOi8vd3d3LjgwOTBnLmNuLz91cmw9In0sCnsibmFtZSI6Imxhb2JhbiIsInVybCI6Imh0dHBzOi8vdmlwLmxhb2JhbmRxLmNvbS9qaWV4aS5waHA/dXJsPSJ9LF07CgogIGxldCBtYWluID0gewogICAgc2hvd0J1dHRvbjogZnVuY3Rpb24gKCkgewogICAgICBpZiAobG9jYXRpb24uaG9zdC5tYXRjaCgveW91a3V8aXFpeWl8bGV8cXF8dHVkb3V8bWd0dnxzb2h1fGFjZnVufGJpbGliaWxpfHBwdHZ8YmFvZmVuZ3x5aW55dWV0YWkvaWcpKSB7CiAgICAgICAgbGV0IG1haW5CdXR0b24gPSAnPGRpdiBjbGFzcz0iaC1pY29uLXBsYXkiIHRpdGxlPSJDbGljayBzaG93IHJlc29sdmUgYWRkcmVzcyI+PHN2ZyB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHBhdGggZD0iTTQyMi42IDE5My42Yy01LjMtNDUuMy0yMy4zLTUxLjYtNTktNTQgLTUwLjgtMy41LTE2NC4zLTMuNS0yMTUuMSAwIC0zNS43IDIuNC01My43IDguNy01OSA1NCAtNCAzMy42LTQgOTEuMSAwIDEyNC44IDUuMyA0NS4zIDIzLjMgNTEuNiA1OSA1NCA1MC45IDMuNSAxNjQuMyAzLjUgMjE1LjEgMCAzNS43LTIuNCA1My43LTguNyA1OS01NEM0MjYuNiAyODQuOCA0MjYuNiAyMjcuMyA0MjIuNiAxOTMuNnpNMjIyLjIgMzAzLjR2LTk0LjZsOTAuNyA0Ny4zTDIyMi4yIDMwMy40eiI+PC9wYXRoPjwvc3ZnPjwvZGl2Pic7CiAgICAgICAgbGV0IGFwaUxpc3QgPSAnPG9sIGNsYXNzPSJoLW9sIj48L29sPic7CiAgICAgICAgbGV0IGdpdGh1YiA9ICc8aWZyYW1lIHNyYz0iaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi91c2Vycy83MDQxMDYmcmVwbz1tZWRpYSZ0eXBlPXN0YXImY291bnQ9dHJ1ZSIgZnJhbWVib3JkZXI9IjAiIHNjcm9sbGluZz0iMCIgc3R5bGU9ImhlaWdodDogMjBweDttYXgtd2lkdGg6IDExMHB4O3BhZGRpbmc6IDAgNXB4O2JveC1zaXppbmc6IGJvcmRlci1ib3g7bWFyZ2luLXRvcDogMTBweDsiPjwvaWZyYW1lPic7CihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiYm9keSIpLm9uKCdtb3VzZW92ZXInLCAnLml0ZW0gYScsIGZ1bmN0aW9uKGUpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqZmogPSAkKHRoaXMpLCBocmVmID0gb2JqZmouYXR0cignaHJlZicpIHx8IG9iamZqLmRhdGEoImhyZWYiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamZqLm9mZignY2xpY2suY2hyb21lJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZmoub24oJ2NsaWNrLmNocm9tZScsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuYXR0cignZGF0YS1ocmVmJywgaHJlZikuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkucmVtb3ZlQXR0cignaHJlZicpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAkKHRvcC5kb2N1bWVudC5ib2R5KS5hcHBlbmQobWFpbkJ1dHRvbik7CiAgICAgICAgJCh0b3AuZG9jdW1lbnQuYm9keSkuYXBwZW5kKGFwaUxpc3QpOwoKICAgICAgICBhcGkuZm9yRWFjaCgodmFsLCBpbmRleCkgPT4gewogICAgICAgICAgJCgnLmgtb2wnKS5hcHBlbmQoYDxsaT48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iJHt2YWwudXJsICsgZW5jb2RlVVJJKGxvY2F0aW9uLmhyZWYpfSI+JHt2YWwubmFtZX08L2E+PC9saT5gKQogICAgICAgIH0pOwogICAgICAgIC8vRmVlZGJhY2sgYnV0dG9uCiAgICAgICAgJCgnLmgtb2wnKS5hcHBlbmQoYDxsaT48YSB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9ImNvbG9yOiAjOTk5OyIgaHJlZj0iaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi91c2Vycy83MDQxMDYiPkNsaWNrIG9uIHRoZSBmZWVkYmFjazwvYT48L2xpPmApOwogICAgICAgICQoJy5oLW9sJykuYXBwZW5kKGdpdGh1Yik7CgogICAgICAgICQodG9wLmRvY3VtZW50LmJvZHkpLm9uKCdjbGljaycsICcuaC1pY29uLXBsYXknLCAoKSA9PiB7CiAgICAgICAgICAkKCcuaC1vbCcpLmZhZGVUb2dnbGUoJ2Zhc3QnKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH07CgogICQoZnVuY3Rpb24gKCkgewogICAgbWFpbi5zaG93QnV0dG9uKCk7CiAgfSk7Cn0pKCk7CihmdW5jdGlvbiAoKSB7CiAgJ3VzZSBzdHJpY3QnOwoKICBHTV9hZGRTdHlsZSgnLmgtaWNvbi1wbGF5IHtjb2xvcjogI2Q5MjZiNTtmaWxsOiAjZDkyNmI1O2hlaWdodDogODBweDt3aWR0aDogODBweDtwb3NpdGlvbjogZml4ZWQ7ei1pbmRleDogOTk5OTk7dG9wOiAwcHg7bGVmdDogMDtjdXJzb3I6IHBvaW50ZXI7fSAgLmgtb2wge3Bvc2l0aW9uOiBmaXhlZDt0b3A6IDMwcHg7bGVmdDogMjBweDt6LWluZGV4OiA5OTk5OTtjb3VudGVyLXJlc2V0OiBsaTtsaXN0LXN0eWxlOiBub25lO2ZvbnQtc2l6ZTogOHB4O3BhZGRpbmc6IDA7bWFyZ2luLWJvdHRvbTogMmVtO3RleHQtc2hhZG93OiAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgLjUpO2Rpc3BsYXk6IG5vbmU7fSAgLmgtb2wgYSB7cG9zaXRpb246IHJlbGF0aXZlO2Rpc3BsYXk6IGJsb2NrO3BhZGRpbmc6IDNweCAxMHB4IDNweCAyZW07bWFyZ2luOiAwLjVlbSAwO2JhY2tncm91bmQ6ICNkZGQ7Y29sb3I6ICM0NDQ7dGV4dC1kZWNvcmF0aW9uOiBub25lO2JvcmRlci1yYWRpdXM6IDAuM2VtO3RyYW5zaXRpb246IGFsbCAwLjNzIGVhc2Utb3V0O30gIC5oLW9sIGE6aG92ZXIge2JhY2tncm91bmQ6ICNlZWU7Y29sb3I6ICNmZjZmNWM7dHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZS1vdXQ7fSAgLmgtb2wgYTo6YmVmb3JlIHtjb250ZW50OiBjb3VudGVyKGxpKTtjb3VudGVyLWluY3JlbWVudDogbGk7cG9zaXRpb246IGFic29sdXRlO2xlZnQ6IC0xLjJlbTt0b3A6IDUwJTttYXJnaW4tdG9wOiAtMS4yZW07YmFja2dyb3VuZDogIzg3Y2VlYjtoZWlnaHQ6IDJlbTt3aWR0aDogMmVtO2xpbmUtaGVpZ2h0OiAyZW07Ym9yZGVyOiAwLjJlbSBzb2xpZCAjZmZmO3RleHQtYWxpZ246IGNlbnRlcjtmb250LXdlaWdodDogYm9sZDtib3JkZXItcmFkaXVzOiAyZW07fScpOwoKICBsZXQgYXBpID0gWwp7Im5hbWUiOiLnmb7luqbnvZHnm5jkvJrlkZjlhbHkuqsiLCJ1cmwiOiJodHRwczovL21wLndlaXhpbi5xcS5jb20vcz9fX2Jpej1NekkzT1RVME5qazBOQT09Jm1pZD0yMjQ3NDg1MzQ2JmlkeD0xJnNuPTJkNDc4MWY3M2QzOTJkNGMwOWRhZmUyMzE1MTEwNDI1JmNoa3NtPWViNDc1YThkZGMzMGQzOWIyNzcxY2U3ZDkzYWE2YmJkOGUzYzExOTFiMDVmYzQ4ZjNiMjdjZTRmZWQxZjVjOWIxZjllYTViYjllZWYjcmQifSxdOwoKICBsZXQgbWFpbiA9IHsKICAgIHNob3dCdXR0b246IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGxvY2F0aW9uLmhvc3QubWF0Y2goL3Bhbi5iYWlkdXx5dW4uYmFpZHUvaWcpKSB7CiAgICAgICAgbGV0IG1haW5CdXR0b24gPSAnPGRpdiBjbGFzcz0iaC1pY29uLXBsYXkiIHRpdGxlPSJDbGljayBzaG93IHJlc29sdmUgYWRkcmVzcyI+PHN2ZyB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHBhdGggZD0iTTQyMi42IDE5My42Yy01LjMtNDUuMy0yMy4zLTUxLjYtNTktNTQgLTUwLjgtMy41LTE2NC4zLTMuNS0yMTUuMSAwIC0zNS43IDIuNC01My43IDguNy01OSA1NCAtNCAzMy42LTQgOTEuMSAwIDEyNC44IDUuMyA0NS4zIDIzLjMgNTEuNiA1OSA1NCA1MC45IDMuNSAxNjQuMyAzLjUgMjE1LjEgMCAzNS43LTIuNCA1My43LTguNyA1OS01NEM0MjYuNiAyODQuOCA0MjYuNiAyMjcuMyA0MjIuNiAxOTMuNnpNMjIyLjIgMzAzLjR2LTk0LjZsOTAuNyA0Ny4zTDIyMi4yIDMwMy40eiI+PC9wYXRoPjwvc3ZnPjwvZGl2Pic7CiAgICAgICAgbGV0IGFwaUxpc3QgPSAnPG9sIGNsYXNzPSJoLW9sIj48L29sPic7CiAgICAgICAgbGV0IGdpdGh1YiA9ICc8aWZyYW1lIHNyYz0iaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi91c2Vycy83MDQxMDYmcmVwbz1tZWRpYSZ0eXBlPXN0YXImY291bnQ9dHJ1ZSIgZnJhbWVib3JkZXI9IjAiIHNjcm9sbGluZz0iMCIgc3R5bGU9ImhlaWdodDogMjBweDttYXgtd2lkdGg6IDExMHB4O3BhZGRpbmc6IDAgNXB4O2JveC1zaXppbmc6IGJvcmRlci1ib3g7bWFyZ2luLXRvcDogMTBweDsiPjwvaWZyYW1lPic7CgogICAgICAgICQodG9wLmRvY3VtZW50LmJvZHkpLmFwcGVuZChtYWluQnV0dG9uKTsKICAgICAgICAkKHRvcC5kb2N1bWVudC5ib2R5KS5hcHBlbmQoYXBpTGlzdCk7CgogICAgICAgIGFwaS5mb3JFYWNoKCh2YWwsIGluZGV4KSA9PiB7CiAgICAgICAgICAkKCcuaC1vbCcpLmFwcGVuZChgPGxpPjxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSIke3ZhbC51cmx9Ij4ke3ZhbC5uYW1lfTwvYT48L2xpPmApCiAgICAgICAgfSk7CiAgICAgICAgLy9GZWVkYmFjayBidXR0b24KICAgICAgICAkKCcuaC1vbCcpLmFwcGVuZChgPGxpPjxhIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6ICM5OTk7IiBocmVmPSJodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3VzZXJzLzcwNDEwNiI+Q2xpY2sgb24gdGhlIGZlZWRiYWNrPC9hPjwvbGk+YCk7CiAgICAgICAgJCgnLmgtb2wnKS5hcHBlbmQoZ2l0aHViKTsKCiAgICAgICAgJCh0b3AuZG9jdW1lbnQuYm9keSkub24oJ2NsaWNrJywgJy5oLWljb24tcGxheScsICgpID0+IHsKICAgICAgICAgICQoJy5oLW9sJykuZmFkZVRvZ2dsZSgnZmFzdCcpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfTsKCiAgJChmdW5jdGlvbiAoKSB7CiAgICBtYWluLnNob3dCdXR0b24oKTsKICB9KTsKfSkoKTsK","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js","ts":1642390231777,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMi40IHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gYihhKX06YihhKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuZG9jdW1lbnQsZT1jLnNsaWNlLGY9Yy5jb25jYXQsZz1jLnB1c2gsaD1jLmluZGV4T2YsaT17fSxqPWkudG9TdHJpbmcsaz1pLmhhc093blByb3BlcnR5LGw9e30sbT0iMS4xMi40IixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihuLmlzUGxhaW5PYmplY3QoYyl8fChiPW4uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbi5pc0FycmF5KGEpP2E6W10pOmY9YSYmbi5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1uLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bi50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXt2YXIgYj1hJiZhLnRvU3RyaW5nKCk7cmV0dXJuIW4uaXNBcnJheShhKSYmYi1wYXJzZUZsb2F0KGIpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8Im9iamVjdCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKCFsLm93bkZpcnN0KWZvcihiIGluIGEpcmV0dXJuIGsuY2FsbChhLGIpO2ZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxrLmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZuLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKGgpcmV0dXJuIGguY2FsbChiLGEsYyk7Zm9yKGQ9Yi5sZW5ndGgsYz1jPzA+Yz9NYXRoLm1heCgwLGQrYyk6YzowO2Q+YztjKyspaWYoYyBpbiBiJiZiW2NdPT09YSlyZXR1cm4gY31yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7d2hpbGUoYz5kKWFbZSsrXT1iW2QrK107aWYoYyE9PWMpd2hpbGUodm9pZCAwIT09YltkXSlhW2UrK109YltkKytdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9Ziksbi5pc0Z1bmN0aW9uKGEpPyhjPWUuY2FsbChhcmd1bWVudHMsMiksZD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZC5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGQpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omx9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYobi5mbltTeW1ib2wuaXRlcmF0b3JdPWNbU3ltYm9sLml0ZXJhdG9yXSksbi5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2lbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0hIWEmJiJsZW5ndGgiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuImZ1bmN0aW9uIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6ImFycmF5Ij09PWN8fDA9PT1ifHwibnVtYmVyIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2EoKSx6PWdhKCksQT1nYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTD0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE49IlxcWyIrTCsiKigiK00rIikoPzoiK0wrIiooWypeJHwhfl0/PSkiK0wrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitNKyIpKXwpIitMKyIqXFxdIixPPSI6KCIrTSsiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrTisiKSopfC4qKVxcKXwpIixQPW5ldyBSZWdFeHAoTCsiKyIsImciKSxRPW5ldyBSZWdFeHAoIl4iK0wrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTCsiKyQiLCJnIiksUj1uZXcgUmVnRXhwKCJeIitMKyIqLCIrTCsiKiIpLFM9bmV3IFJlZ0V4cCgiXiIrTCsiKihbPit+XXwiK0wrIikiK0wrIioiKSxUPW5ldyBSZWdFeHAoIj0iK0wrIiooW15cXF0nXCJdKj8pIitMKyIqXFxdIiwiZyIpLFU9bmV3IFJlZ0V4cChPKSxWPW5ldyBSZWdFeHAoIl4iK00rIiQiKSxXPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTSsifFsqXSkiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK04pLFBTRVVETzpuZXcgUmVnRXhwKCJeIitPKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK0wrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK0wrIiooPzooWystXXwpIitMKyIqKFxcZCspfCkpIitMKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitLKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTCsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitMKyIqKCg/Oi1cXGQpP1xcZCopIitMKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxYPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWT0vXmhcZCQvaSxaPS9eW157XStce1xzKlxbbmF0aXZlIFx3LywkPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sXz0vWyt+XS8sYWE9Lyd8XFwvZyxiYT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK0wrIj98KCIrTCsiKXwuKSIsImlnIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGRhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmEoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3PWImJmIub3duZXJEb2N1bWVudCx4PWI/Yi5ub2RlVHlwZTo5O2lmKGQ9ZHx8W10sInN0cmluZyIhPXR5cGVvZiBhfHwhYXx8MSE9PXgmJjkhPT14JiYxMSE9PXgpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT14JiYobz0kLmV4ZWMoYSkpKWlmKGY9b1sxXSl7aWYoOT09PXgpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZih3JiYoaj13LmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihvWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1vWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErIiAiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKCJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXsoaz1iLmdldEF0dHJpYnV0ZSgiaWQiKSk/az1rLnJlcGxhY2UoYWEsIlxcJCYiKTpiLnNldEF0dHJpYnV0ZSgiaWQiLGs9dSkscj1nKGEpLGg9ci5sZW5ndGgsbD1WLnRlc3Qoayk/IiMiK2s6IltpZD0nIitrKyInXSI7d2hpbGUoaC0tKXJbaF09bCsiICIrcWEocltoXSk7cz1yLmpvaW4oIiwiKSx3PV8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8Yn1pZihzKXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbChzKSksZH1jYXRjaCh5KXt9ZmluYWxseXtrPT09dSYmYi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUSwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWMubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBoYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9hKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1mYS5zdXBwb3J0PXt9LGY9ZmEuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT1aLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitMKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitMKyIqKD86dmFsdWV8IitLKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGlhKGZ1bmN0aW9uKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrTCsiKlsqXiR8IX5dPz0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVoudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiZGl2Iikscy5jYWxsKGEsIltzIT0nJ106eCIpLHIucHVzaCgiIT0iLE8pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oInwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oInwiKSksYj1aLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHxaLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1ufHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PW58fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxnPVthXSxoPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1uPy0xOmI9PT1uPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGthKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWcudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO3doaWxlKGdbZF09PT1oW2RdKWQrKztyZXR1cm4gZD9rYShnW2RdLGhbZF0pOmdbZF09PT12Py0xOmhbZF09PT12PzE6MH0sbik6bn0sZmEubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYShhLG51bGwsbnVsbCxiKX0sZmEubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFQsIj0nJDEnXSIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiKyIgIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZmEudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYmEsY2EpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGJhLGNhKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmEuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZmEuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFcuQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVS50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTCsiKSIrYSsiKCIrTCsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmEuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShQLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShRLCIkMSIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8IiIpfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWEoYik7ZnVuY3Rpb24gcGEoKXt9cGEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYSxnPWZhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1XW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmEuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXVhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYShzYShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmEoaT4xJiZzYShtKSxpPjEmJnFhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUSwiJDEiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9IjAiLHQ9ZiYmW10sdT1bXSx2PWoseD1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1GLmNhbGwoaSkpO3U9dWEodSl9SC5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmZhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9oYShmKTpmfXJldHVybiBoPWZhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksXy50ZXN0KGpbMF0udHlwZSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSwhYnx8Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGphKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsInR5cGUiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGlucHV0Lz4iLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGphKCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHwiaW5wdXQiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwclsiOiJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlU29ydD1uLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sdj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY30sdz1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHg9L148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyx5PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih5LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBuLmluQXJyYXkoYSxiKT4tMSE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2U+YjtiKyspaWYobi5jb250YWlucyhkW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7ZT5iO2IrKyluLmZpbmQoYSxkW2JdLGMpO3JldHVybiBjPXRoaXMucHVzaFN0YWNrKGU+MT9uLnVuaXF1ZShjKTpjKSxjLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheih0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQz1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxBLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hLmNoYXJBdCgwKSYmIj4iPT09YS5jaGFyQXQoYS5sZW5ndGgtMSkmJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfWlmKGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUpe2lmKGYuaWQhPT1lWzJdKXJldHVybiBBLmZpbmQoYSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPWZ9cmV0dXJuIHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgYy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW4oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihuLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP24uaW5BcnJheSh0aGlzWzBdLG4oYSkpOm4uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXtkbyBhPWFbYl07d2hpbGUoYSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHwoZT1uLnVuaXF1ZVNvcnQoZSkpLEQudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFMrL2c7ZnVuY3Rpb24gSChhKXt2YXIgYj17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOiIiKX0saj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihjJiYhYiYmKGg9Zi5sZW5ndGgtMSxnLnB1c2goYykpLGZ1bmN0aW9uIGQoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXtuLmlzRnVuY3Rpb24oYyk/YS51bmlxdWUmJmouaGFzKGMpfHxmLnB1c2goYyk6YyYmYy5sZW5ndGgmJiJzdHJpbmciIT09bi50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGg+PWMmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMCxjfHxqLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLmFkZEV2ZW50TGlzdGVuZXI/KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixLKSk6KGQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5kZXRhY2hFdmVudCgib25sb2FkIixLKSl9ZnVuY3Rpb24gSygpeyhkLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWEuZXZlbnQudHlwZXx8ImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZSkmJihKKCksbi5yZWFkeSgpKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7aWYoIUkpaWYoST1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZXx8ImxvYWRpbmciIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpYS5zZXRUaW1lb3V0KG4ucmVhZHkpO2Vsc2UgaWYoZC5hZGRFdmVudExpc3RlbmVyKWQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixLKTtlbHNle2QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5hdHRhY2hFdmVudCgib25sb2FkIixLKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZSl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBmKCl7aWYoIW4uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChiKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGYsNTApfUooKSxuLnJlYWR5KCl9fSgpfXJldHVybiBJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBMO2ZvcihMIGluIG4obCkpYnJlYWs7bC5vd25GaXJzdD0iMCI9PT1MLGwuaW5saW5lQmxvY2tOZWVkc0xheW91dD0hMSxuKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGU7Yz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChiKSwidW5kZWZpbmVkIiE9dHlwZW9mIGIuc3R5bGUuem9vbSYmKGIuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSIsbC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChlKSl9KSxmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2wuZGVsZXRlRXhwYW5kbz0hMX1hPW51bGx9KCk7dmFyIE09ZnVuY3Rpb24oYSl7dmFyIGI9bi5ub0RhdGFbKGEubm9kZU5hbWUrIiAiKS50b0xvd2VyQ2FzZSgpXSxjPSthLm5vZGVUeXBlfHwxO3JldHVybiAxIT09YyYmOSE9PWM/ITE6IWJ8fGIhPT0hMCYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PWJ9LE49L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bi5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwOwp9cmV0dXJuIGN9ZnVuY3Rpb24gUShhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKCgiZGF0YSIhPT1ifHwhbi5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmInRvSlNPTiIhPT1iKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFIoYSxiLGQsZSl7aWYoTShhKSl7dmFyIGYsZyxoPW4uZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP24uY2FjaGU6YSxrPWk/YVtoXTphW2hdJiZoO2lmKGsmJmpba10mJihlfHxqW2tdLmRhdGEpfHx2b2lkIDAhPT1kfHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIGt8fChrPWk/YVtoXT1jLnBvcCgpfHxuLmd1aWQrKzpoKSxqW2tdfHwoaltrXT1pP3t9Ont0b0pTT046bi5ub29wfSksIm9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGU/altrXT1uLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1uLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbi5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbi5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFMoYSxiLGMpe2lmKE0oYSkpe3ZhciBkLGUsZj1hLm5vZGVUeXBlLGc9Zj9uLmNhY2hlOmEsaD1mP2Fbbi5leHBhbmRvXTpuLmV4cGFuZG87aWYoZ1toXSl7aWYoYiYmKGQ9Yz9nW2hdOmdbaF0uZGF0YSkpe24uaXNBcnJheShiKT9iPWIuY29uY2F0KG4ubWFwKGIsbi5jYW1lbENhc2UpKTpiIGluIGQ/Yj1bYl06KGI9bi5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIuc3BsaXQoIiAiKSksZT1iLmxlbmd0aDt3aGlsZShlLS0pZGVsZXRlIGRbYltlXV07aWYoYz8hUShkKTohbi5pc0VtcHR5T2JqZWN0KGQpKXJldHVybn0oY3x8KGRlbGV0ZSBnW2hdLmRhdGEsUShnW2hdKSkpJiYoZj9uLmNsZWFuRGF0YShbYV0sITApOmwuZGVsZXRlRXhwYW5kb3x8ZyE9Zy53aW5kb3c/ZGVsZXRlIGdbaF06Z1toXT12b2lkIDApfX19bi5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP24uY2FjaGVbYVtuLmV4cGFuZG9dXTphW24uZXhwYW5kb10sISFhJiYhUShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFIoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBSKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLGIsITApfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bi5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbi5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7bi5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhLGIpfSk6Zj9QKGYsYSxuLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1uLl9kYXRhKGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1uLl9kYXRhKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbi5fZGF0YShhLGMpfHxuLl9kYXRhKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bi5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbi5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW4uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSksZnVuY3Rpb24oKXt2YXIgYTtsLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxlO3JldHVybiBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZSkuYXBwZW5kQ2hpbGQoYiksInVuZGVmaW5lZCIhPXR5cGVvZiBiLnN0eWxlLnpvb20mJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChlKSxhKTp2b2lkIDB9fSgpO3ZhciBUPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1QrIikoW2EteiVdKikkIiwiaSIpLFY9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxXPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSwibm9uZSI9PT1uLmNzcyhhLCJkaXNwbGF5Iil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07ZnVuY3Rpb24gWChhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbi5jc3MoYSxiLCIiKX0saT1oKCksaj1jJiZjWzNdfHwobi5jc3NOdW1iZXJbYl0/IiI6InB4Iiksaz0obi5jc3NOdW1iZXJbYl18fCJweCIhPT1qJiYraSkmJlUuZXhlYyhuLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixuLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBZPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylZKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFo9L14oPzpjaGVja2JveHxyYWRpbykkL2ksJD0vPChbXHc6LV0rKS8sXz0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksYWE9L15ccysvLGJhPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZGlhbG9nfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1haW58bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iO2Z1bmN0aW9uIGNhKGEpe3ZhciBiPWJhLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYj1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTthLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixsLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUsbC50Ym9keT0hYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsbC5odG1sU2VyaWFsaXplPSEhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxsLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09ZC5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxjLnR5cGU9ImNoZWNrYm94IixjLmNoZWNrZWQ9ITAsYi5hcHBlbmRDaGlsZChjKSxsLmFwcGVuZENoZWNrZWQ9Yy5jaGVja2VkLGEuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixsLm5vQ2xvbmVDaGVja2VkPSEhYS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYi5hcHBlbmRDaGlsZChhKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYS5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9YS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsbC5ub0Nsb25lRXZlbnQ9ISFhLmFkZEV2ZW50TGlzdGVuZXIsYVtuLmV4cGFuZG9dPTEsbC5hdHRyaWJ1dGVzPSFhLmdldEF0dHJpYnV0ZShuLmV4cGFuZG8pfSgpO3ZhciBkYT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6bC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19O2RhLm9wdGdyb3VwPWRhLm9wdGlvbixkYS50Ym9keT1kYS50Zm9vdD1kYS5jb2xncm91cD1kYS5jYXB0aW9uPWRhLnRoZWFkLGRhLnRoPWRhLnRkO2Z1bmN0aW9uIGVhKGEsYil7dmFyIGMsZCxlPTAsZj0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOnZvaWQgMDtpZighZilmb3IoZj1bXSxjPWEuY2hpbGROb2Rlc3x8YTtudWxsIT0oZD1jW2VdKTtlKyspIWJ8fG4ubm9kZU5hbWUoZCxiKT9mLnB1c2goZCk6bi5tZXJnZShmLGVhKGQsYikpO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sZik6Zn1mdW5jdGlvbiBmYShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW4uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG4uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX12YXIgZ2E9Lzx8JiM/XHcrOy8saGE9Lzx0Ym9keS9pO2Z1bmN0aW9uIGlhKGEpe1oudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIGphKGEsYixjLGQsZSl7Zm9yKHZhciBmLGcsaCxpLGosayxtLG89YS5sZW5ndGgscD1jYShiKSxxPVtdLHI9MDtvPnI7cisrKWlmKGc9YVtyXSxnfHwwPT09ZylpZigib2JqZWN0Ij09PW4udHlwZShnKSluLm1lcmdlKHEsZy5ub2RlVHlwZT9bZ106Zyk7ZWxzZSBpZihnYS50ZXN0KGcpKXtpPWl8fHAuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaj0oJC5leGVjKGcpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG09ZGFbal18fGRhLl9kZWZhdWx0LGkuaW5uZXJIVE1MPW1bMV0rbi5odG1sUHJlZmlsdGVyKGcpK21bMl0sZj1tWzBdO3doaWxlKGYtLSlpPWkubGFzdENoaWxkO2lmKCFsLmxlYWRpbmdXaGl0ZXNwYWNlJiZhYS50ZXN0KGcpJiZxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhYS5leGVjKGcpWzBdKSksIWwudGJvZHkpe2c9InRhYmxlIiE9PWp8fGhhLnRlc3QoZyk/Ijx0YWJsZT4iIT09bVsxXXx8aGEudGVzdChnKT8wOmk6aS5maXJzdENoaWxkLGY9ZyYmZy5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShmLS0pbi5ub2RlTmFtZShrPWcuY2hpbGROb2Rlc1tmXSwidGJvZHkiKSYmIWsuY2hpbGROb2Rlcy5sZW5ndGgmJmcucmVtb3ZlQ2hpbGQoayl9bi5tZXJnZShxLGkuY2hpbGROb2RlcyksaS50ZXh0Q29udGVudD0iIjt3aGlsZShpLmZpcnN0Q2hpbGQpaS5yZW1vdmVDaGlsZChpLmZpcnN0Q2hpbGQpO2k9cC5sYXN0Q2hpbGR9ZWxzZSBxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShnKSk7aSYmcC5yZW1vdmVDaGlsZChpKSxsLmFwcGVuZENoZWNrZWR8fG4uZ3JlcChlYShxLCJpbnB1dCIpLGlhKSxyPTA7d2hpbGUoZz1xW3IrK10paWYoZCYmbi5pbkFycmF5KGcsZCk+LTEpZSYmZS5wdXNoKGcpO2Vsc2UgaWYoaD1uLmNvbnRhaW5zKGcub3duZXJEb2N1bWVudCxnKSxpPWVhKHAuYXBwZW5kQ2hpbGQoZyksInNjcmlwdCIpLGgmJmZhKGkpLGMpe2Y9MDt3aGlsZShnPWlbZisrXSlfLnRlc3QoZy50eXBlfHwiIikmJmMucHVzaChnKX1yZXR1cm4gaT1udWxsLHB9IWZ1bmN0aW9uKCl7dmFyIGIsYyxlPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGIgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSljPSJvbiIrYiwobFtiXT1jIGluIGEpfHwoZS5zZXRBdHRyaWJ1dGUoYywidCIpLGxbYl09ZS5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMSk7ZT1udWxsfSgpO3ZhciBrYT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksbGE9L15rZXkvLG1hPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxuYT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sb2E9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIHBhKCl7cmV0dXJuITB9ZnVuY3Rpb24gcWEoKXtyZXR1cm4hMX1mdW5jdGlvbiByYSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24gc2EoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoIm9iamVjdCI9PXR5cGVvZiBiKXsic3RyaW5nIiE9dHlwZW9mIGMmJihkPWR8fGMsYz12b2lkIDApO2ZvcihoIGluIGIpc2EoYSxoLGMsZCxiW2hdLGYpO3JldHVybiBhfWlmKG51bGw9PWQmJm51bGw9PWU/KGU9YyxkPWM9dm9pZCAwKTpudWxsPT1lJiYoInN0cmluZyI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9cWE7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1uLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPW4uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8YSYmbi5ldmVudC50cmlnZ2VyZWQ9PT1hLnR5cGU/dm9pZCAwOm4uZXZlbnQuZGlzcGF0Y2guYXBwbHkoay5lbGVtLGFyZ3VtZW50cyl9LGsuZWxlbT1hKSxiPShifHwiIikubWF0Y2goRyl8fFsiIl0saD1iLmxlbmd0aDt3aGlsZShoLS0pZj1vYS5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChtPWdbb10pfHwobT1nW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsbCk6bS5wdXNoKGwpLG4uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9bi5oYXNEYXRhKGEpJiZuLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9b2EuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09a1tvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGk9Zj1tLmxlbmd0aDt3aGlsZShmLS0pZz1tW2ZdLCFlJiZxIT09Zy5vcmlnVHlwZXx8YyYmYy5ndWlkIT09Zy5ndWlkfHxoJiYhaC50ZXN0KGcubmFtZXNwYWNlKXx8ZCYmZCE9PWcuc2VsZWN0b3ImJigiKioiIT09ZHx8IWcuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxnLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGcpKTtpJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGtbb10pfWVsc2UgZm9yKG8gaW4gayluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChrKSYmKGRlbGV0ZSByLmhhbmRsZSxuLl9yZW1vdmVEYXRhKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaT1tPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFuYS50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxsPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IWwudHJpZ2dlcnx8bC50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbC5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPWwuZGVsZWdhdGVUeXBlfHxxLG5hLnRlc3QoaitxKXx8KGk9aS5wYXJlbnROb2RlKTtpO2k9aS5wYXJlbnROb2RlKXAucHVzaChpKSxtPWk7bT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2gobS5kZWZhdWx0Vmlld3x8bS5wYXJlbnRXaW5kb3d8fGEpfW89MDt3aGlsZSgoaT1wW28rK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1vPjE/ajpsLmJpbmRUeXBlfHxxLGc9KG4uX2RhdGEoaSwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZuLl9kYXRhKGksImhhbmRsZSIpLGcmJmcuYXBwbHkoaSxjKSxnPWgmJmlbaF0sZyYmZy5hcHBseSYmTShpKSYmKGIucmVzdWx0PWcuYXBwbHkoaSxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO2lmKGIudHlwZT1xLCFmJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFsLl9kZWZhdWx0fHxsLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYyk9PT0hMSkmJk0oZSkmJmgmJmVbcV0mJiFuLmlzV2luZG93KGUpKXttPWVbaF0sbSYmKGVbaF09bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cTt0cnl7ZVtxXSgpfWNhdGNoKHMpe31uLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbSYmKGVbaF09bSl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShuLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWEucm5hbWVzcGFjZSYmIWEucm5hbWVzcGFjZS50ZXN0KGcubmFtZXNwYWNlKXx8KGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxkPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1kJiYoYS5yZXN1bHQ9ZCk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8aXNOYU4oYS5idXR0b24pfHxhLmJ1dHRvbjwxKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+LTE6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxlLGY9YS50eXBlLGc9YSxoPXRoaXMuZml4SG9va3NbZl07aHx8KHRoaXMuZml4SG9va3NbZl09aD1tYS50ZXN0KGYpP3RoaXMubW91c2VIb29rczpsYS50ZXN0KGYpP3RoaXMua2V5SG9va3M6e30pLGU9aC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChoLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZyksYj1lLmxlbmd0aDt3aGlsZShiLS0pYz1lW2JdLGFbY109Z1tjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1nLnNyY0VsZW1lbnR8fGQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGEubWV0YUtleT0hIWEubWV0YUtleSxoLmZpbHRlcj9oLmZpbHRlcihhLGcpOmF9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGc9Yi5idXR0b24saD1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihlPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGQsZj1lLmRvY3VtZW50RWxlbWVudCxjPWUuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmgmJihhLnJlbGF0ZWRUYXJnZXQ9aD09PWEudGFyZ2V0P2IudG9FbGVtZW50OmgpLGEud2hpY2h8fHZvaWQgMD09PWd8fChhLndoaWNoPTEmZz8xOjImZz8zOjQmZz8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09cmEoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1yYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBuLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYiksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1kLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKCJ1bmRlZmluZWQiPT10eXBlb2YgYVtkXSYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/cGE6cWEpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bi5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6cWEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6cWEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6cWEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cGEsYSYmKGEucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1wYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9cGEsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fG4uY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGwuc3VibWl0fHwobi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6dm9pZCBuLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9bi5ub2RlTmFtZShiLCJpbnB1dCIpfHxuLm5vZGVOYW1lKGIsImJ1dHRvbiIpP24ucHJvcChiLCJmb3JtIik6dm9pZCAwO2MmJiFuLl9kYXRhKGMsInN1Ym1pdCIpJiYobi5ldmVudC5hZGQoYywic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdEJ1YmJsZT0hMH0pLG4uX2RhdGEoYywic3VibWl0IiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRCdWJibGUmJihkZWxldGUgYS5fc3VibWl0QnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZuLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG4ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbi5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxsLmNoYW5nZXx8KG4uZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGthLnRlc3QodGhpcy5ub2RlTmFtZSk/KCJjaGVja2JveCIhPT10aGlzLnR5cGUmJiJyYWRpbyIhPT10aGlzLnR5cGV8fChuLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXsiY2hlY2tlZCI9PT1hLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdENoYW5nZWQ9ITApfSksbi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdENoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RDaGFuZ2VkPSExKSxuLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSl9KSksITEpOnZvaWQgbi5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7a2EudGVzdChiLm5vZGVOYW1lKSYmIW4uX2RhdGEoYiwiY2hhbmdlIikmJihuLmV2ZW50LmFkZChiLCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7IXRoaXMucGFyZW50Tm9kZXx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fG4uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGEpfSksbi5fZGF0YShiLCJjaGFuZ2UiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBuLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFrYS50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLGwuZm9jdXNpbnx8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1uLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbi5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW4uX2RhdGEoZCxiKS0xO2U/bi5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG4uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gc2EodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBzYSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9cWEpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIHRhPS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csdWE9bmV3IFJlZ0V4cCgiPCg/OiIrYmErIilbXFxzLz5dIiwiaSIpLHZhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLHdhPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHhhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHlhPS9edHJ1ZVwvKC4qKS8semE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEFhPWNhKGQpLEJhPUFhLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2Z1bmN0aW9uIENhKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSwidGFibGUiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiBEYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bi5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gRWEoYSl7dmFyIGI9eWEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBGYShhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZuLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW4uX2RhdGEoYSksZz1uLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyluLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW4uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWwubm9DbG9uZUV2ZW50JiZiW24uZXhwYW5kb10pe2U9bi5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyluLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobi5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oRGEoYikudGV4dD1hLnRleHQsRWEoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGwuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFuLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmWi50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX19ZnVuY3Rpb24gSGEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJnhhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxIYShmLGIsYyxkKX0pO2lmKG8mJihrPWphKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZT1rLmZpcnN0Q2hpbGQsMT09PWsuY2hpbGROb2Rlcy5sZW5ndGgmJihrPWUpLGV8fGQpKXtmb3IoaT1uLm1hcChlYShrLCJzY3JpcHQiKSxEYSksaD1pLmxlbmd0aDtvPm07bSsrKWc9ayxtIT09cCYmKGc9bi5jbG9uZShnLCEwLCEwKSxoJiZuLm1lcmdlKGksZWEoZywic2NyaXB0IikpKSxjLmNhbGwoYVttXSxnLG0pO2lmKGgpZm9yKGo9aVtpLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGksRWEpLG09MDtoPm07bSsrKWc9aVttXSxfLnRlc3QoZy50eXBlfHwiIikmJiFuLl9kYXRhKGcsImdsb2JhbEV2YWwiKSYmbi5jb250YWlucyhqLGcpJiYoZy5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChnLnNyYyk6bi5nbG9iYWxFdmFsKChnLnRleHR8fGcudGV4dENvbnRlbnR8fGcuaW5uZXJIVE1MfHwiIikucmVwbGFjZSh6YSwiIikpKTtrPWU9bnVsbH1yZXR1cm4gYX1mdW5jdGlvbiBJYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9uLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8bi5jbGVhbkRhdGEoZWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJm4uY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZmYShlYShkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHZhLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihsLmh0bWw1Q2xvbmV8fG4uaXNYTUxEb2MoYSl8fCF1YS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KEJhLmlubmVySFRNTD1hLm91dGVySFRNTCxCYS5yZW1vdmVDaGlsZChmPUJhLmZpcnN0Q2hpbGQpKSwhKGwubm9DbG9uZUV2ZW50JiZsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZD1lYShmKSxoPWVhKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmR2EoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8ZWEoYSksZD1kfHxlYShmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUZhKGUsZFtnXSk7ZWxzZSBGYShhLGYpO3JldHVybiBkPWVhKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJmZhKGQsIWkmJmVhKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGYsZyxoPTAsaT1uLmV4cGFuZG8saj1uLmNhY2hlLGs9bC5hdHRyaWJ1dGVzLG09bi5ldmVudC5zcGVjaWFsO251bGwhPShkPWFbaF0pO2grKylpZigoYnx8TShkKSkmJihmPWRbaV0sZz1mJiZqW2ZdKSl7aWYoZy5ldmVudHMpZm9yKGUgaW4gZy5ldmVudHMpbVtlXT9uLmV2ZW50LnJlbW92ZShkLGUpOm4ucmVtb3ZlRXZlbnQoZCxlLGcuaGFuZGxlKTtqW2ZdJiYoZGVsZXRlIGpbZl0sa3x8InVuZGVmaW5lZCI9PXR5cGVvZiBkLnJlbW92ZUF0dHJpYnV0ZT9kW2ldPXZvaWQgMDpkLnJlbW92ZUF0dHJpYnV0ZShpKSxjLnB1c2goZikpfX19KSxuLmZuLmV4dGVuZCh7ZG9tTWFuaXA6SGEsZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBJYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIElhKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxkKS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEhhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1DYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUNhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm4uY2xlYW5EYXRhKGVhKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbi5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UodGEsIiIpOnZvaWQgMDtpZigic3RyaW5nIj09dHlwZW9mIGEmJiF3YS50ZXN0KGEpJiYobC5odG1sU2VyaWFsaXplfHwhdWEudGVzdChhKSkmJihsLmxlYWRpbmdXaGl0ZXNwYWNlfHwhYWEudGVzdChhKSkmJiFkYVsoJC5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1uLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoZWEoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO24uaW5BcnJheSh0aGlzLGEpPDAmJihuLmNsZWFuRGF0YShlYSh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD0wLGU9W10sZj1uKGEpLGg9Zi5sZW5ndGgtMTtoPj1kO2QrKyljPWQ9PT1oP3RoaXM6dGhpcy5jbG9uZSghMCksbihmW2RdKVtiXShjKSxnLmFwcGx5KGUsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBKYSxLYT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIE1hKGEpe3ZhciBiPWQsYz1LYVthXTtyZXR1cm4gY3x8KGM9TGEoYSxiKSwibm9uZSIhPT1jJiZjfHwoSmE9KEphfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPShKYVswXS5jb250ZW50V2luZG93fHxKYVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1MYShhLGIpLEphLmRldGFjaCgpKSxLYVthXT1jKSxjfXZhciBOYT0vXm1hcmdpbi8sT2E9bmV3IFJlZ0V4cCgiXigiK1QrIikoPyFweClbYS16JV0rJCIsImkiKSxQYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sUWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZyxoLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxqPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoai5zdHlsZSl7ai5zdHlsZS5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLGwub3BhY2l0eT0iMC41Ij09PWouc3R5bGUub3BhY2l0eSxsLmNzc0Zsb2F0PSEhai5zdHlsZS5jc3NGbG9hdCxqLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsai5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1qLnN0eWxlLmJhY2tncm91bmRDbGlwLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixqLmlubmVySFRNTD0iIixpLmFwcGVuZENoaWxkKGopLGwuYm94U2l6aW5nPSIiPT09ai5zdHlsZS5ib3hTaXppbmd8fCIiPT09ai5zdHlsZS5Nb3pCb3hTaXppbmd8fCIiPT09ai5zdHlsZS5XZWJraXRCb3hTaXppbmcsbi5leHRlbmQobCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxmfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZX0scGl4ZWxNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksY30scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksYn0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZ30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxofX0pO2Z1bmN0aW9uIGsoKXt2YXIgayxsLG09ZC5kb2N1bWVudEVsZW1lbnQ7bS5hcHBlbmRDaGlsZChpKSxqLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJSIsYj1lPWg9ITEsYz1nPSEwLGEuZ2V0Q29tcHV0ZWRTdHlsZSYmKGw9YS5nZXRDb21wdXRlZFN0eWxlKGopLGI9IjElIiE9PShsfHx7fSkudG9wLGg9IjJweCI9PT0obHx8e30pLm1hcmdpbkxlZnQsZT0iNHB4Ij09PShsfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxqLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGM9IjRweCI9PT0obHx8e21hcmdpblJpZ2h0OiI0cHgifSkubWFyZ2luUmlnaHQsaz1qLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGsuc3R5bGUuY3NzVGV4dD1qLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsay5zdHlsZS5tYXJnaW5SaWdodD1rLnN0eWxlLndpZHRoPSIwIixqLnN0eWxlLndpZHRoPSIxcHgiLGc9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShrKXx8e30pLm1hcmdpblJpZ2h0KSxqLnJlbW92ZUNoaWxkKGspKSxqLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWouZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgsZiYmKGouc3R5bGUuZGlzcGxheT0iIixqLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIsai5jaGlsZE5vZGVzWzBdLnN0eWxlLmJvcmRlckNvbGxhcHNlPSJzZXBhcmF0ZSIsaz1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLGtbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSIsZj0wPT09a1swXS5vZmZzZXRIZWlnaHQsZiYmKGtbMF0uc3R5bGUuZGlzcGxheT0iIixrWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWtbMF0ub2Zmc2V0SGVpZ2h0KSksbS5yZW1vdmVDaGlsZChpKX19fSgpO3ZhciBSYSxTYSxUYT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhSYT1mdW5jdGlvbihiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIGMmJmMub3BlbmVyfHwoYz1hKSxjLmdldENvbXB1dGVkU3R5bGUoYil9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2MuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXTp2b2lkIDAsIiIhPT1nJiZ2b2lkIDAhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSxjJiYhbC5waXhlbE1hcmdpblJpZ2h0KCkmJk9hLnRlc3QoZykmJk5hLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9Ziksdm9pZCAwPT09Zz9nOmcrIiJ9KTpRYS5jdXJyZW50U3R5bGUmJihSYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2NbYl06dm9pZCAwLG51bGw9PWcmJmgmJmhbYl0mJihnPWhbYl0pLE9hLnRlc3QoZykmJiFUYS50ZXN0KGIpJiYoZD1oLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdCxmJiYoZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGgubGVmdD0iZm9udFNpemUiPT09Yj8iMWVtIjpnLGc9aC5waXhlbExlZnQrInB4IixoLmxlZnQ9ZCxmJiYoZS5sZWZ0PWYpKSx2b2lkIDA9PT1nP2c6ZysiInx8ImF1dG8ifSk7ZnVuY3Rpb24gVWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIFZhPS9hbHBoYVwoW14pXSpcKS9pLFdhPS9vcGFjaXR5XHMqPVxzKihbXildKikvaSxYYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sWWE9bmV3IFJlZ0V4cCgiXigiK1QrIikoLiopJCIsImkiKSxaYT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sJGE9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LF9hPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl0sYWI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiBiYihhKXtpZihhIGluIGFiKXJldHVybiBhO3ZhciBiPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPV9hLmxlbmd0aDt3aGlsZShjLS0paWYoYT1fYVtjXStiLGEgaW4gYWIpcmV0dXJuIGF9ZnVuY3Rpb24gY2IoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bi5fZGF0YShkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlcoZCkmJihmW2ddPW4uX2RhdGEoZCwib2xkZGlzcGxheSIsTWEoZC5ub2RlTmFtZSkpKSk6KGU9VyhkKSwoYyYmIm5vbmUiIT09Y3x8IWUpJiZuLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfWZ1bmN0aW9uIGRiKGEsYixjKXt2YXIgZD1ZYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIGViKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1uLmNzcyhhLGMrVltmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPVJhKGEpLGc9bC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1TYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLE9hLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYobC5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK2ViKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPVNhKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6bC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1iYihoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdO2lmKGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1VLmV4ZWMoYykpJiZlWzFdJiYoYz1YKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLCEoZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPWJiKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmImdldCJpbiBnJiYoZj1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1mJiYoZj1TYShhLGIsZCkpLCJub3JtYWwiPT09ZiYmYiBpbiAkYSYmKGY9JGFbYl0pLCIiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8aXNGaW5pdGUoZSk/ZXx8MDpmKTpmfX0pLG4uZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP1hhLnRlc3Qobi5jc3MoYSwiZGlzcGxheSIpKSYmMD09PWEub2Zmc2V0V2lkdGg/UGEoYSxaYSxmdW5jdGlvbigpe3JldHVybiBmYihhLGIsZCl9KTpmYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJlJhKGEpO3JldHVybiBkYihhLGMsZD9lYihhLGIsZCxsLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksbC5vcGFjaXR5fHwobi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gV2EudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW4uaXNOdW1lcmljKGIpPyJhbHBoYShvcGFjaXR5PSIrMTAwKmIrIikiOiIiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHwiIjtjLnpvb209MSwoYj49MXx8IiI9PT1iKSYmIiI9PT1uLnRyaW0oZi5yZXBsYWNlKFZhLCIiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPVZhLnRlc3QoZik/Zi5yZXBsYWNlKFZhLGUpOmYrIiAiK2UpfX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9VWEobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/UGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sU2EsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1VYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KFNhKGEsIm1hcmdpbkxlZnQiKSl8fChuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKT9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtUGEoYSx7Cm1hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSk6MCkpKyJweCI6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ND5kO2QrKyllW2ErVltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxOYS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1kYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPVJhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtXKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IGdiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1nYixnYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmdiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fG4uZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWdiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpnYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1nYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOmdiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LGdiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1nYi5wcm90b3R5cGUsZ2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV0mJiFuLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sZ2IucHJvcEhvb2tzLnNjcm9sbFRvcD1nYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LG4uZng9Z2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBoYixpYixqYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sa2I9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBsYigpe3JldHVybiBhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoYj12b2lkIDB9KSxoYj1uLm5vdygpfWZ1bmN0aW9uIG1iKGEsYil7dmFyIGMsZD17aGVpZ2h0OmF9LGU9MDtmb3IoYj1iPzE6MDs0PmU7ZSs9Mi1iKWM9VltlXSxkWyJtYXJnaW4iK2NdPWRbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihkLm9wYWNpdHk9ZC53aWR0aD1hKSxkfWZ1bmN0aW9uIG5iKGEsYixjKXtmb3IodmFyIGQsZT0ocWIudHdlZW5lcnNbYl18fFtdKS5jb25jYXQocWIudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gb2IoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbT10aGlzLG89e30scD1hLnN0eWxlLHE9YS5ub2RlVHlwZSYmVyhhKSxyPW4uX2RhdGEoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gYnx8IndpZHRoImluIGIpJiYoYy5vdmVyZmxvdz1bcC5vdmVyZmxvdyxwLm92ZXJmbG93WCxwLm92ZXJmbG93WV0saj1uLmNzcyhhLCJkaXNwbGF5Iiksaz0ibm9uZSI9PT1qP24uX2RhdGEoYSwib2xkZGlzcGxheSIpfHxNYShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKGwuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmImlubGluZSIhPT1NYShhLm5vZGVOYW1lKT9wLnpvb209MTpwLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIixsLnNocmlua1dyYXBCbG9ja3MoKXx8bS5hbHdheXMoZnVuY3Rpb24oKXtwLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0scC5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxwLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLGpiLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocT8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXJ8fHZvaWQgMD09PXJbZF0pY29udGludWU7cT0hMH1vW2RdPXImJnJbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChvKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP01hKGEubm9kZU5hbWUpOmopJiYocC5kaXNwbGF5PWopO2Vsc2V7cj8iaGlkZGVuImluIHImJihxPXIuaGlkZGVuKTpyPW4uX2RhdGEoYSwiZnhzaG93Iix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP24oYSkuc2hvdygpOm0uZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbS5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bi5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoYiBpbiBvKW4uc3R5bGUoYSxiLG9bYl0pfSk7Zm9yKGQgaW4gbylnPW5iKHE/cltkXTowLGQsbSksZCBpbiByfHwocltkXT1nLnN0YXJ0LHEmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBxYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1xYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWhifHxsYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmhifHxsYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihwYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9cWIucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLG5iLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQocWIse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBYKGMuZWxlbSxhLFUuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLHFiLnR3ZWVuZXJzW2NdPXFiLnR3ZWVuZXJzW2NdfHxbXSxxYi50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltvYl0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9xYi5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6cWIucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihXKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9cWIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8bi5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9bi5fZGF0YSh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZrYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1uLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobWIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOm1iKCJzaG93Iiksc2xpZGVVcDptYigiaGlkZSIpLHNsaWRlVG9nZ2xlOm1iKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW4udGltZXJzLGM9MDtmb3IoaGI9bi5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxuLmZ4LnN0b3AoKSxoYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtpYnx8KGliPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKGliKSxpYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYSxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGY9ZS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYy5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxjLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94IiksYy5hcHBlbmRDaGlsZChiKSxhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxhLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGwuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWMuY2xhc3NOYW1lLGwuc3R5bGU9L3RvcC8udGVzdChhLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksbC5ocmVmTm9ybWFsaXplZD0iL2EiPT09YS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxsLmNoZWNrT249ISFiLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Zi5zZWxlY3RlZCxsLmVuY3R5cGU9ISFkLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGUuZGlzYWJsZWQ9ITAsbC5vcHREaXNhYmxlZD0hZi5kaXNhYmxlZCxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxsLmlucHV0PSIiPT09Yi5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYi52YWx1ZT0idCIsYi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGwucmFkaW9WYWx1ZT0idCI9PT1iLnZhbHVlfSgpO3ZhciByYj0vXHIvZyxzYj0vW1x4MjBcdFxyXG5cZl0rL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKHJiLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKHNiLCIgIil9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPSJzZWxlY3Qtb25lIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwoYy5zZWxlY3RlZHx8aT09PWUpJiYobC5vcHREaXNhYmxlZD8hYy5kaXNhYmxlZDpudWxsPT09Yy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG4uaW5BcnJheShuLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSk7dmFyIHRiLHViLHZiPW4uZXhwci5hdHRySGFuZGxlLHdiPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2kseGI9bC5nZXRTZXRBdHRyaWJ1dGUseWI9bC5pbnB1dDtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBZKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgYS5nZXRBdHRyaWJ1dGU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxlPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT91Yjp0YikpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/eWImJnhifHwhd2IudGVzdChjKT9hW2RdPSExOmFbbi5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtkXT0hMTpuLmF0dHIoYSxjLCIiKSxhLnJlbW92ZUF0dHJpYnV0ZSh4Yj9jOmQpfX0pLHViPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6eWImJnhifHwhd2IudGVzdChjKT9hLnNldEF0dHJpYnV0ZSgheGImJm4ucHJvcEZpeFtjXXx8YyxjKTphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYyldPWFbY109ITAsY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPXZiW2JdfHxuLmZpbmQuYXR0cjt5YiYmeGJ8fCF3Yi50ZXN0KGIpP3ZiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj12YltiXSx2YltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsdmJbYl09ZiksZX06dmJbYl09ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHliJiZ4Ynx8KG4uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLm5vZGVOYW1lKGEsImlucHV0Iik/dm9pZChhLmRlZmF1bHRWYWx1ZT1iKTp0YiYmdGIuc2V0KGEsYixjKX19KSx4Ynx8KHRiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QXR0cmlidXRlTm9kZShjKTtyZXR1cm4gZHx8YS5zZXRBdHRyaWJ1dGVOb2RlKGQ9YS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShjKSksZC52YWx1ZT1iKz0iIiwidmFsdWUiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sdmIuaWQ9dmIubmFtZT12Yi5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiYiIiE9PWQudmFsdWU/ZC52YWx1ZTpudWxsfSxuLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpO3JldHVybiBjJiZjLnNwZWNpZmllZD9jLnZhbHVlOnZvaWQgMH0sc2V0OnRiLnNldH0sbi5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RiLnNldChhLCIiPT09Yj8hMTpiLGMpfX0sbi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihhLGIpe24uYXR0ckhvb2tzW2JdPXtzZXQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4iIj09PWM/KGEuc2V0QXR0cmlidXRlKGIsImF1dG8iKSxjKTp2b2lkIDB9fX0pKSxsLnN0eWxlfHwobi5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YisiIn19KTt2YXIgemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksQWI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9bi5wcm9wRml4W2FdfHxhLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2FdPXZvaWQgMCxkZWxldGUgdGhpc1thXX1jYXRjaChiKXt9fSl9fSksbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTp6Yi50ZXN0KGEubm9kZU5hbWUpfHxBYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLmhyZWZOb3JtYWxpemVkfHxuLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXtuLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGwuZW5jdHlwZXx8KG4ucHJvcEZpeC5lbmN0eXBlPSJlbmNvZGluZyIpO3ZhciBCYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIENiKGEpe3JldHVybiBuLmF0dHIoYSwiY2xhc3MiKXx8IiJ9bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsQ2IodGhpcykpKX0pO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZigiICIrZisiICIpPDAmJihkKz1mKyIgIik7aD1uLnRyaW0oZCksZSE9PWgmJm4uYXR0cihjLCJjbGFzcyIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLENiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKXdoaWxlKGQuaW5kZXhPZigiICIrZisiICIpPi0xKWQ9ZC5yZXBsYWNlKCIgIitmKyIgIiwiICIpO2g9bi50cmltKGQpLGUhPT1oJiZuLmF0dHIoYywiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsQ2IodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZigic3RyaW5nIj09PWMpe2Q9MCxlPW4odGhpcyksZj1hLm1hdGNoKEcpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJiJib29sZWFuIiE9PWN8fChiPUNiKHRoaXMpLGImJm4uX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsYiksbi5hdHRyKHRoaXMsImNsYXNzIixifHxhPT09ITE/IiI6bi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj0iICIrYSsiICI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJigiICIrQ2IoYykrIiAiKS5yZXBsYWNlKEJiLCIgIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KSxuLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIERiPWEubG9jYXRpb24sRWI9bi5ub3coKSxGYj0vXD8vLEdiPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7bi5wYXJzZUpTT049ZnVuY3Rpb24oYil7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiKyIiKTt2YXIgYyxkPW51bGwsZT1uLnRyaW0oYisiIik7cmV0dXJuIGUmJiFuLnRyaW0oZS5yZXBsYWNlKEdiLGZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBjJiZiJiYoZD0wKSwwPT09ZD9hOihjPWV8fGIsZCs9IWYtIWUsIiIpfSkpP0Z1bmN0aW9uKCJyZXR1cm4gIitlKSgpOm4uZXJyb3IoIkludmFsaWQgSlNPTjogIitiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihiKXt2YXIgYyxkO2lmKCFifHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2EuRE9NUGFyc2VyPyhkPW5ldyBhLkRPTVBhcnNlcixjPWQucGFyc2VGcm9tU3RyaW5nKGIsInRleHQveG1sIikpOihjPW5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIEhiPS8jLiokLyxJYj0vKFs/Jl0pXz1bXiZdKi8sSmI9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxLYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxMYj0vXig/OkdFVHxIRUFEKSQvLE1iPS9eXC9cLy8sTmI9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sT2I9e30sUGI9e30sUWI9IiovIi5jb25jYXQoIioiKSxSYj1EYi5ocmVmLFNiPU5iLmV4ZWMoUmIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFRiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gVWIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09UGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBWYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZuLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gWGIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6UmIsdHlwZToiR0VUIixpc0xvY2FsOktiLnRlc3QoU2JbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6UWIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6bi5wYXJzZUpTT04sInRleHQgeG1sIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9WYihWYihhLG4uYWpheFNldHRpbmdzKSxiKTpWYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpUYihPYiksYWpheFRyYW5zcG9ydDpUYihQYiksYWpheDpmdW5jdGlvbihiLGMpeyJvYmplY3QiPT10eXBlb2YgYiYmKGM9YixiPXZvaWQgMCksYz1jfHx7fTt2YXIgZCxlLGYsZyxoLGksaixrLGw9bi5hamF4U2V0dXAoe30sYyksbT1sLmNvbnRleHR8fGwsbz1sLmNvbnRleHQmJihtLm5vZGVUeXBlfHxtLmpxdWVyeSk/bihtKTpuLmV2ZW50LHA9bi5EZWZlcnJlZCgpLHE9bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iikscj1sLnN0YXR1c0NvZGV8fHt9LHM9e30sdD17fSx1PTAsdj0iY2FuY2VsZWQiLHc9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dSl7aWYoIWspe2s9e307d2hpbGUoYj1KYi5leGVjKGcpKWtbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9a1thLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT11P2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdXx8KGE9dFtjXT10W2NdfHxhLHNbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdXx8KGwubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dSlmb3IoYiBpbiBhKXJbYl09W3JbYl0sYVtiXV07ZWxzZSB3LmFsd2F5cyhhW3cuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHY7cmV0dXJuIGomJmouYWJvcnQoYikseSgwLGIpLHRoaXN9fTtpZihwLnByb21pc2UodykuY29tcGxldGU9cS5hZGQsdy5zdWNjZXNzPXcuZG9uZSx3LmVycm9yPXcuZmFpbCxsLnVybD0oKGJ8fGwudXJsfHxSYikrIiIpLnJlcGxhY2UoSGIsIiIpLnJlcGxhY2UoTWIsU2JbMV0rIi8vIiksbC50eXBlPWMubWV0aG9kfHxjLnR5cGV8fGwubWV0aG9kfHxsLnR5cGUsbC5kYXRhVHlwZXM9bi50cmltKGwuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8WyIiXSxudWxsPT1sLmNyb3NzRG9tYWluJiYoZD1OYi5leGVjKGwudXJsLnRvTG93ZXJDYXNlKCkpLGwuY3Jvc3NEb21haW49ISghZHx8ZFsxXT09PVNiWzFdJiZkWzJdPT09U2JbMl0mJihkWzNdfHwoImh0dHA6Ij09PWRbMV0/IjgwIjoiNDQzIikpPT09KFNiWzNdfHwoImh0dHA6Ij09PVNiWzFdPyI4MCI6IjQ0MyIpKSkpLGwuZGF0YSYmbC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBsLmRhdGEmJihsLmRhdGE9bi5wYXJhbShsLmRhdGEsbC50cmFkaXRpb25hbCkpLFViKE9iLGwsYyx3KSwyPT09dSlyZXR1cm4gdztpPW4uZXZlbnQmJmwuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGwudHlwZT1sLnR5cGUudG9VcHBlckNhc2UoKSxsLmhhc0NvbnRlbnQ9IUxiLnRlc3QobC50eXBlKSxmPWwudXJsLGwuaGFzQ29udGVudHx8KGwuZGF0YSYmKGY9bC51cmwrPShGYi50ZXN0KGYpPyImIjoiPyIpK2wuZGF0YSxkZWxldGUgbC5kYXRhKSxsLmNhY2hlPT09ITEmJihsLnVybD1JYi50ZXN0KGYpP2YucmVwbGFjZShJYiwiJDFfPSIrRWIrKyk6ZisoRmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0ViKyspKSxsLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixuLmV0YWdbZl0pKSwobC5kYXRhJiZsLmhhc0NvbnRlbnQmJmwuY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJncuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixsLmNvbnRlbnRUeXBlKSx3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsbC5kYXRhVHlwZXNbMF0mJmwuYWNjZXB0c1tsLmRhdGFUeXBlc1swXV0/bC5hY2NlcHRzW2wuZGF0YVR5cGVzWzBdXSsoIioiIT09bC5kYXRhVHlwZXNbMF0/IiwgIitRYisiOyBxPTAuMDEiOiIiKTpsLmFjY2VwdHNbIioiXSk7Zm9yKGUgaW4gbC5oZWFkZXJzKXcuc2V0UmVxdWVzdEhlYWRlcihlLGwuaGVhZGVyc1tlXSk7aWYobC5iZWZvcmVTZW5kJiYobC5iZWZvcmVTZW5kLmNhbGwobSx3LGwpPT09ITF8fDI9PT11KSlyZXR1cm4gdy5hYm9ydCgpO3Y9ImFib3J0Ijtmb3IoZSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl3W2VdKGxbZV0pO2lmKGo9VWIoUGIsbCxjLHcpKXtpZih3LnJlYWR5U3RhdGU9MSxpJiZvLnRyaWdnZXIoImFqYXhTZW5kIixbdyxsXSksMj09PXUpcmV0dXJuIHc7bC5hc3luYyYmbC50aW1lb3V0PjAmJihoPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3cuYWJvcnQoInRpbWVvdXQiKX0sbC50aW1lb3V0KSk7dHJ5e3U9MSxqLnNlbmQocyx5KX1jYXRjaCh4KXtpZighKDI+dSkpdGhyb3cgeDt5KC0xLHgpfX1lbHNlIHkoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHkoYixjLGQsZSl7dmFyIGsscyx0LHYseCx5PWM7MiE9PXUmJih1PTIsaCYmYS5jbGVhclRpbWVvdXQoaCksaj12b2lkIDAsZz1lfHwiIix3LnJlYWR5U3RhdGU9Yj4wPzQ6MCxrPWI+PTIwMCYmMzAwPmJ8fDMwND09PWIsZCYmKHY9V2IobCx3LGQpKSx2PVhiKGwsdix3LGspLGs/KGwuaWZNb2RpZmllZCYmKHg9dy5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHgmJihuLmxhc3RNb2RpZmllZFtmXT14KSx4PXcuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx4JiYobi5ldGFnW2ZdPXgpKSwyMDQ9PT1ifHwiSEVBRCI9PT1sLnR5cGU/eT0ibm9jb250ZW50IjozMDQ9PT1iP3k9Im5vdG1vZGlmaWVkIjooeT12LnN0YXRlLHM9di5kYXRhLHQ9di5lcnJvcixrPSF0KSk6KHQ9eSwhYiYmeXx8KHk9ImVycm9yIiwwPmImJihiPTApKSksdy5zdGF0dXM9Yix3LnN0YXR1c1RleHQ9KGN8fHkpKyIiLGs/cC5yZXNvbHZlV2l0aChtLFtzLHksd10pOnAucmVqZWN0V2l0aChtLFt3LHksdF0pLHcuc3RhdHVzQ29kZShyKSxyPXZvaWQgMCxpJiZvLnRyaWdnZXIoaz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt3LGwsaz9zOnRdKSxxLmZpcmVXaXRoKG0sW3cseV0pLGkmJihvLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3csbF0pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB3fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG4uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheChuLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sbi5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk7aWYodGhpc1swXSl7dmFyIGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RDaGlsZCYmMT09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSlhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTtmdW5jdGlvbiBZYihhKXtyZXR1cm4gYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxuLmNzcyhhLCJkaXNwbGF5Iil9ZnVuY3Rpb24gWmIoYSl7aWYoIW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50fHxkLGEpKXJldHVybiEwO3doaWxlKGEmJjE9PT1hLm5vZGVUeXBlKXtpZigibm9uZSI9PT1ZYihhKXx8ImhpZGRlbiI9PT1hLnR5cGUpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9bi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBsLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpP2Eub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wJiYhYS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aDpaYihhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgJGI9LyUyMC9nLF9iPS9cW1xdJC8sYWM9L1xyP1xuL2csYmM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGNjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBkYyhhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxfYi50ZXN0KGEpP2QoYSxlKTpkYyhhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpZGMoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlkYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSgkYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmY2MudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWJjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFaLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoYWMsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKGFjLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPXZvaWQgMCE9PWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTG9jYWw/aWMoKTpkLmRvY3VtZW50TW9kZT44P2hjKCk6L14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmaGMoKXx8aWMoKX06aGM7dmFyIGVjPTAsZmM9e30sZ2M9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGZjKWZjW2FdKHZvaWQgMCwhMCl9KSxsLmNvcnM9ISFnYyYmIndpdGhDcmVkZW50aWFscyJpbiBnYyxnYz1sLmFqYXg9ISFnYyxnYyYmbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe2lmKCFiLmNyb3NzRG9tYWlufHxsLmNvcnMpe3ZhciBjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7dmFyIGYsZz1iLnhocigpLGg9KytlYztpZihnLm9wZW4oYi50eXBlLGIudXJsLGIuYXN5bmMsYi51c2VybmFtZSxiLnBhc3N3b3JkKSxiLnhockZpZWxkcylmb3IoZiBpbiBiLnhockZpZWxkcylnW2ZdPWIueGhyRmllbGRzW2ZdO2IubWltZVR5cGUmJmcub3ZlcnJpZGVNaW1lVHlwZSYmZy5vdmVycmlkZU1pbWVUeXBlKGIubWltZVR5cGUpLGIuY3Jvc3NEb21haW58fGRbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGRbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZiBpbiBkKXZvaWQgMCE9PWRbZl0mJmcuc2V0UmVxdWVzdEhlYWRlcihmLGRbZl0rIiIpO2cuc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCksYz1mdW5jdGlvbihhLGQpe3ZhciBmLGksajtpZihjJiYoZHx8ND09PWcucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIGZjW2hdLGM9dm9pZCAwLGcub25yZWFkeXN0YXRlY2hhbmdlPW4ubm9vcCxkKTQhPT1nLnJlYWR5U3RhdGUmJmcuYWJvcnQoKTtlbHNle2o9e30sZj1nLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGcucmVzcG9uc2VUZXh0JiYoai50ZXh0PWcucmVzcG9uc2VUZXh0KTt0cnl7aT1nLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1mfHwhYi5pc0xvY2FsfHxiLmNyb3NzRG9tYWluPzEyMjM9PT1mJiYoZj0yMDQpOmY9ai50ZXh0PzIwMDo0MDR9aiYmZShmLGksaixnLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYi5hc3luYz80PT09Zy5yZWFkeVN0YXRlP2Euc2V0VGltZW91dChjKTpnLm9ucmVhZHlzdGF0ZWNoYW5nZT1mY1toXT1jOmMoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKHZvaWQgMCwhMCl9fX19KTtmdW5jdGlvbiBoYygpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX1mdW5jdGlvbiBpYygpe3RyeXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChiKXt9fW4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPWQuaGVhZHx8bigiaGVhZCIpWzBdfHxkLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9ZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxmKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgamM9W10sa2M9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9amMucG9wKCl8fG4uZXhwYW5kbysiXyIrRWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGtjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYma2MudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGtjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShGYi50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssamMucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWphKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBsYz1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZigic3RyaW5nIiE9dHlwZW9mIGEmJmxjKXJldHVybiBsYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZigiICIpO3JldHVybiBoPi0xJiYoZD1uLnRyaW0oYS5zbGljZShoLGEubGVuZ3RoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gbWMoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZuLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLG4uZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXt0b3A6MCxsZWZ0OjB9LGU9dGhpc1swXSxmPWUmJmUub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixlKT8oInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKGQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1tYyhmKSx7dG9wOmQudG9wKyhjLnBhZ2VZT2Zmc2V0fHxiLnNjcm9sbFRvcCktKGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoYy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0KS0oYi5jbGllbnRMZWZ0fHwwKX0pOmR9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXt0b3A6MCxsZWZ0OjB9LGQ9dGhpc1swXTtyZXR1cm4iZml4ZWQiPT09bi5jc3MoZCwicG9zaXRpb24iKT9iPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLCJodG1sIil8fChjPWEub2Zmc2V0KCkpLGMudG9wKz1uLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGMubGVmdCs9bi5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6Yi50b3AtYy50b3Atbi5jc3MoZCwibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtYy5sZWZ0LW4uY3NzKGQsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYhbi5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bi5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxRYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9bWMoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bihmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bihmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1VYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1TYShhLGIpLE9hLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7CnBhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjaywiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBuYz1hLmpRdWVyeSxvYz1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1vYyksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9bmMpLG59LGJ8fChhLmpRdWVyeT1hLiQ9biksbn0pOwo="}]}],"settings":{"script_blacklist_server":[{"rules":["/https?:\\/\\/userscripts\\.org\\/scripts\\/(source|version)/(102614).*\\.user\\.js/"],"severity":"2"},{"name":"SaveFrom.net helper","reason":"Shows advertisements","rules":["/https?:\\/\\/sf-addon\\.com\\/.*\\/.*\\.user\\.js/","/https?:\\/\\/.*\\.sf-helper\\.com\\/.*\\.user\\.js/"],"severity":"3"},{"reasons":{"en":"Used for a phishing compain to compromise users of baon-nutrition.com"},"rules":["/https?:\\/\\/files\\.ulysse\\.travel\\/.*\\.user\\.js/"],"severity":"8"}]}}